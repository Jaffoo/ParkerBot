var GM=Object.defineProperty;var QM=(t,r,e)=>r in t?GM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var JM=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var vc=(t,r,e)=>(QM(t,typeof r!="symbol"?r+"":r,e),e);var YM=JM((exports,module)=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();function makeMap(t,r){const e=Object.create(null),n=t.split(",");for(let o=0;o<n.length;o++)e[n[o]]=!0;return r?o=>!!e[o.toLowerCase()]:o=>!!e[o]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$e.call(t,r),isArray$4=Array.isArray,isMap$2=t=>toTypeString(t)==="[object Map]",isSet$2=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$3=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol$1=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject$2(t)||isFunction$3(t))&&isFunction$3(t.then)&&isFunction$3(t.catch),objectToString$1=Object.prototype.toString,toTypeString=t=>objectToString$1.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$1=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},looseToNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r},toNumber$1=t=>{const r=isString$2(t)?Number(t):NaN;return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$4(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],o=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(o)for(const i in o)r[i]=o[i]}return r}else if(isString$2(t)||isObject$2(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$4(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol$1(t),n=isSymbol$1(r),e||n)return t===r;if(e=isArray$4(t),n=isArray$4(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const o=Object.keys(t).length,i=Object.keys(r).length;if(o!==i)return!1;for(const a in t){const s=t.hasOwnProperty(a),u=r.hasOwnProperty(a);if(s&&!u||!s&&u||!looseEqual(t[a],r[a]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$4(t)||isObject$2(t)&&(t.toString===objectToString$1||!isFunction$3(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap$2(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,o])=>(e[`${n} =>`]=o,e),{})}:isSet$2(r)?{[`Set(${r.size})`]:[...r.values()]}:isObject$2(r)&&!isArray$4(r)&&!isPlainObject$1(r)?String(r):r;let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const r=new Set(t);return r.w=0,r.n=0,r},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const o=r[n];wasTracked(o)&&!newTracked(o)?o.delete(t):r[e++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}r.length=e}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let r=activeEffect,e=shouldTrack;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let o=n.get(e);o||n.set(e,o=createDep()),trackEffects(o)}}function trackEffects(t,r){let e=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,e=!wasTracked(t)):e=!t.has(activeEffect),e&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,r,e,n,o,i){const a=targetMap.get(t);if(!a)return;let s=[];if(r==="clear")s=[...a.values()];else if(e==="length"&&isArray$4(t)){const u=Number(n);a.forEach((c,d)=>{(d==="length"||!isSymbol$1(d)&&d>=u)&&s.push(c)})}else switch(e!==void 0&&s.push(a.get(e)),r){case"add":isArray$4(t)?isIntegerKey(e)&&s.push(a.get("length")):(s.push(a.get(ITERATE_KEY)),isMap$2(t)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(t)||(s.push(a.get(ITERATE_KEY)),isMap$2(t)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(t)&&s.push(a.get(ITERATE_KEY));break}if(s.length===1)s[0]&&triggerEffects(s[0]);else{const u=[];for(const c of s)c&&u.push(...c);triggerEffects(createDep(u))}}function triggerEffects(t,r){const e=isArray$4(t)?t:[...t];for(const n of e)n.computed&&triggerEffect(n);for(const n of e)n.computed||triggerEffect(n)}function triggerEffect(t,r){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function getDepFromReactive(t,r){var e;return(e=targetMap.get(t))==null?void 0:e.get(r)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$1)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let i=0,a=this.length;i<a;i++)track(n,"get",i+"");const o=n[r](...e);return o===-1||o===!1?n[r](...e.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking();const n=toRaw(this)[r].apply(this,e);return resetTracking(),n}}),t}function hasOwnProperty$d(t){const r=toRaw(this);return track(r,"has",t),r.hasOwnProperty(t)}class BaseReactiveHandler{constructor(r=!1,e=!1){this._isReadonly=r,this._shallow=e}get(r,e,n){const o=this._isReadonly,i=this._shallow;if(e==="__v_isReactive")return!o;if(e==="__v_isReadonly")return o;if(e==="__v_isShallow")return i;if(e==="__v_raw"&&n===(o?i?shallowReadonlyMap:readonlyMap:i?shallowReactiveMap:reactiveMap).get(r))return r;const a=isArray$4(r);if(!o){if(a&&hasOwn(arrayInstrumentations,e))return Reflect.get(arrayInstrumentations,e,n);if(e==="hasOwnProperty")return hasOwnProperty$d}const s=Reflect.get(r,e,n);return(isSymbol$1(e)?builtInSymbols.has(e):isNonTrackableKeys(e))||(o||track(r,"get",e),i)?s:isRef(s)?a&&isIntegerKey(e)?s:s.value:isObject$2(s)?o?readonly(s):reactive(s):s}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,e,n,o){let i=r[e];if(isReadonly(i)&&isRef(i)&&!isRef(n))return!1;if(!this._shallow&&(!isShallow(n)&&!isReadonly(n)&&(i=toRaw(i),n=toRaw(n)),!isArray$4(r)&&isRef(i)&&!isRef(n)))return i.value=n,!0;const a=isArray$4(r)&&isIntegerKey(e)?Number(e)<r.length:hasOwn(r,e),s=Reflect.set(r,e,n,o);return r===toRaw(o)&&(a?hasChanged(n,i)&&trigger(r,"set",e,n):trigger(r,"add",e,n)),s}deleteProperty(r,e){const n=hasOwn(r,e);r[e];const o=Reflect.deleteProperty(r,e);return o&&n&&trigger(r,"delete",e,void 0),o}has(r,e){const n=Reflect.has(r,e);return(!isSymbol$1(e)||!builtInSymbols.has(e))&&track(r,"has",e),n}ownKeys(r){return track(r,"iterate",isArray$4(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,r,e=!1,n=!1){t=t.__v_raw;const o=toRaw(t),i=toRaw(r);e||(hasChanged(r,i)&&track(o,"get",r),track(o,"get",i));const{has:a}=getProto(o),s=n?toShallow:e?toReadonly:toReactive;if(a.call(o,r))return s(t.get(r));if(a.call(o,i))return s(t.get(i));t!==o&&t.get(r)}function has(t,r=!1){const e=this.__v_raw,n=toRaw(e),o=toRaw(t);return r||(hasChanged(t,o)&&track(n,"has",t),track(n,"has",o)),t===o?e.has(t):e.has(t)||e.has(o)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$1(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:o}=getProto(e);let i=n.call(e,t);i||(t=toRaw(t),i=n.call(e,t));const a=o.call(e,t);return e.set(t,r),i?hasChanged(r,a)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let o=e.call(r,t);o||(t=toRaw(t),o=e.call(r,t)),n&&n.call(r,t);const i=r.delete(t);return o&&trigger(r,"delete",t,void 0),i}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,o){const i=this,a=i.__v_raw,s=toRaw(a),u=r?toShallow:t?toReadonly:toReactive;return!t&&track(s,"iterate",ITERATE_KEY),a.forEach((c,d)=>n.call(o,u(c),u(d),i))}}function createIterableMethod(t,r,e){return function(...n){const o=this.__v_raw,i=toRaw(o),a=isMap$2(i),s=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,c=o[t](...n),d=e?toShallow:r?toReadonly:toReactive;return!r&&track(i,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:m,done:v}=c.next();return v?{value:m,done:v}:{value:s?[d(m[0]),d(m[1])]:d(m),done:v}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(i){return get$1(this,i)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(i){return get$1(this,i,!1,!0)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(i){return get$1(this,i,!0)},get size(){return size(this,!0)},has(i){return has.call(this,i,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(i){return get$1(this,i,!0,!0)},get size(){return size(this,!0)},has(i){return has.call(this,i,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=createIterableMethod(i,!1,!1),e[i]=createIterableMethod(i,!0,!1),r[i]=createIterableMethod(i,!1,!0),n[i]=createIterableMethod(i,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,o,i)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?n:Reflect.get(hasOwn(e,o)&&o in n?e:n,o,i)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,r,e,n,o){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const i=o.get(t);if(i)return i;const a=getTargetType(t);if(a===0)return t;const s=new Proxy(t,a===2?n:e);return o.set(t,s),s}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,r){t=toRaw(t);const e=t.dep;e&&triggerEffects(e)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this))}}function triggerRef(t){triggerRefValue(t)}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const o=t[r];return isRef(o)&&!isRef(e)?(o.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$4(t)?new Array(t.length):{};for(const e in t)r[e]=propertyToRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,r,e){return isRef(t)?t:isFunction$3(t)?new GetterRefImpl(t):isObject$2(t)&&arguments.length>1?propertyToRef(t,r,e):ref(t)}function propertyToRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}class ComputedRefImpl{constructor(r,e,n,o){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(r,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const r=toRaw(this);return trackRefValue(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function computed$1(t,r,e=!1){let n,o;const i=isFunction$3(t);return i?(n=t,o=NOOP):(n=t.get,o=t.set),new ComputedRefImpl(n,o,i||!o,e)}function warn(t,...r){}function callWithErrorHandling(t,r,e,n){let o;try{o=n?t(...n):t()}catch(i){handleError(i,r,e)}return o}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$3(t)){const i=callWithErrorHandling(t,r,e,n);return i&&isPromise(i)&&i.catch(a=>{handleError(a,r,e)}),i}const o=[];for(let i=0;i<t.length;i++)o.push(callWithAsyncErrorHandling(t[i],r,e,n));return o}function handleError(t,r,e,n=!0){const o=r?r.vnode:null;if(r){let i=r.parent;const a=r.proxy,s=e;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,a,s)===!1)return}i=i.parent}const u=r.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[t,a,s]);return}}logError(t,e,o,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1,o=queue[n],i=getId(o);i<t||i===t&&o.pre?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$4(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r=isFlushing?flushIndex+1:0){for(;r<queue.length;r++){const e=queue[r];e&&e.pre&&(queue.splice(r,1),r--,e())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,activePostFlushCbs.sort((e,n)=>getId(e)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let o=e;const i=r.startsWith("update:"),a=i&&r.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:m,trim:v}=n[d]||EMPTY_OBJ;v&&(o=e.map(g=>isString$2(g)?g.trim():g)),m&&(o=e.map(looseToNumber))}let s,u=n[s=toHandlerKey(r)]||n[s=toHandlerKey(camelize(r))];!u&&i&&(u=n[s=toHandlerKey(hyphenate(r))]),u&&callWithAsyncErrorHandling(u,t,6,o);const c=n[s+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,callWithAsyncErrorHandling(c,t,6,o)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,o=n.get(t);if(o!==void 0)return o;const i=t.emits;let a={},s=!1;if(!isFunction$3(t)){const u=c=>{const d=normalizeEmitsOptions(c,r,!0);d&&(s=!0,extend$1(a,d))};!e&&r.mixins.length&&r.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!s?(isObject$2(t)&&n.set(t,null),null):(isArray$4(i)?i.forEach(u=>a[u]=null):extend$1(a,i),isObject$2(t)&&n.set(t,a),a)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...o)=>{n._d&&setBlockTracking(-1);const i=setCurrentRenderingInstance(r);let a;try{a=t(...o)}finally{setCurrentRenderingInstance(i),n._d&&setBlockTracking(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:o,props:i,propsOptions:[a],slots:s,attrs:u,emit:c,render:d,renderCache:m,data:v,setupState:g,ctx:b,inheritAttrs:T}=t;let _,y;const O=setCurrentRenderingInstance(t);try{if(e.shapeFlag&4){const Ce=o||n;_=normalizeVNode(d.call(Ce,Ce,m,i,g,v,b)),y=u}else{const Ce=r;_=normalizeVNode(Ce.length>1?Ce(i,{attrs:u,slots:s,emit:c}):Ce(i,null)),y=r.props?u:getFunctionalFallthrough(u)}}catch(Ce){blockStack.length=0,handleError(Ce,t,1),_=createVNode(Comment)}let V=_;if(y&&T!==!1){const Ce=Object.keys(y),{shapeFlag:ae}=V;Ce.length&&ae&7&&(a&&Ce.some(isModelListener)&&(y=filterModelListeners(y,a)),V=cloneVNode(V,y))}return e.dirs&&(V=cloneVNode(V),V.dirs=V.dirs?V.dirs.concat(e.dirs):e.dirs),e.transition&&(V.transition=e.transition),_=V,setCurrentRenderingInstance(O),_}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:o,component:i}=t,{props:a,children:s,patchFlag:u}=r,c=i.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&u>=0){if(u&1024)return!0;if(u&16)return n?hasPropsChanged(n,a,c):!!a;if(u&8){const d=r.dynamicProps;for(let m=0;m<d.length;m++){const v=d[m];if(a[v]!==n[v]&&!isEmitListener(c,v))return!0}}}else return(o||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?hasPropsChanged(n,a,c):!0:!!a;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let o=0;o<n.length;o++){const i=n[o];if(r[i]!==t[i]&&!isEmitListener(e,i))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$4(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}function watchEffect(t,r){return doWatch(t,null,r)}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:o,onTrack:i,onTrigger:a}=EMPTY_OBJ){var s;const u=getCurrentScope()===((s=currentInstance)==null?void 0:s.scope)?currentInstance:null;let c,d=!1,m=!1;if(isRef(t)?(c=()=>t.value,d=isShallow(t)):isReactive(t)?(c=()=>t,n=!0):isArray$4(t)?(m=!0,d=t.some(Ce=>isReactive(Ce)||isShallow(Ce)),c=()=>t.map(Ce=>{if(isRef(Ce))return Ce.value;if(isReactive(Ce))return traverse(Ce);if(isFunction$3(Ce))return callWithErrorHandling(Ce,u,2)})):isFunction$3(t)?r?c=()=>callWithErrorHandling(t,u,2):c=()=>{if(!(u&&u.isUnmounted))return v&&v(),callWithAsyncErrorHandling(t,u,3,[g])}:c=NOOP,r&&n){const Ce=c;c=()=>traverse(Ce())}let v,g=Ce=>{v=O.onStop=()=>{callWithErrorHandling(Ce,u,4)}},b;if(isInSSRComponentSetup)if(g=NOOP,r?e&&callWithAsyncErrorHandling(r,u,3,[c(),m?[]:void 0,g]):c(),o==="sync"){const Ce=useSSRContext();b=Ce.__watcherHandles||(Ce.__watcherHandles=[])}else return NOOP;let T=m?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const _=()=>{if(O.active)if(r){const Ce=O.run();(n||d||(m?Ce.some((ae,Fe)=>hasChanged(ae,T[Fe])):hasChanged(Ce,T)))&&(v&&v(),callWithAsyncErrorHandling(r,u,3,[Ce,T===INITIAL_WATCHER_VALUE?void 0:m&&T[0]===INITIAL_WATCHER_VALUE?[]:T,g]),T=Ce)}else O.run()};_.allowRecurse=!!r;let y;o==="sync"?y=_:o==="post"?y=()=>queuePostRenderEffect(_,u&&u.suspense):(_.pre=!0,u&&(_.id=u.uid),y=()=>queueJob(_));const O=new ReactiveEffect(c,y);r?e?_():T=O.run():o==="post"?queuePostRenderEffect(O.run.bind(O),u&&u.suspense):O.run();const V=()=>{O.stop(),u&&u.scope&&remove(u.scope.effects,O)};return b&&b.push(V),V}function instanceWatch(t,r,e){const n=this.proxy,o=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let i;isFunction$3(r)?i=r:(i=r.handler,e=r);const a=currentInstance;setCurrentInstance(this);const s=doWatch(o,i.bind(n),e);return a?setCurrentInstance(a):unsetCurrentInstance(),s}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let o=0;o<e.length&&n;o++)n=n[e[o]];return n}}function traverse(t,r){if(!isObject$2(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),isRef(t))traverse(t.value,r);else if(isArray$4(t))for(let e=0;e<t.length;e++)traverse(t[e],r);else if(isSet$2(t)||isMap$2(t))t.forEach(e=>{traverse(e,r)});else if(isPlainObject$1(t))for(const e in t)traverse(t[e],r);return t}function withDirectives(t,r){const e=currentRenderingInstance;if(e===null)return t;const n=getExposeProxy(e)||e.proxy,o=t.dirs||(t.dirs=[]);for(let i=0;i<r.length;i++){let[a,s,u,c=EMPTY_OBJ]=r[i];a&&(isFunction$3(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(s),o.push({dir:a,instance:n,value:s,oldValue:void 0,arg:u,modifiers:c}))}return t}function invokeDirectiveHook(t,r,e,n){const o=t.dirs,i=r&&r.dirs;for(let a=0;a<o.length;a++){const s=o[a];i&&(s.oldValue=i[a].value);let u=s.dir[n];u&&(pauseTracking(),callWithAsyncErrorHandling(u,e,8,[t.el,s,t,r]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let o;return()=>{const i=r.default&&getTransitionRawChildren(r.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){for(const T of i)if(T.type!==Comment){a=T;break}}const s=toRaw(t),{mode:u}=s;if(n.isLeaving)return emptyPlaceholder(a);const c=getKeepAliveChild(a);if(!c)return emptyPlaceholder(a);const d=resolveTransitionHooks(c,s,n,e);setTransitionHooks(c,d);const m=e.subTree,v=m&&getKeepAliveChild(m);let g=!1;const{getTransitionKey:b}=c.type;if(b){const T=b();o===void 0?o=T:T!==o&&(o=T,g=!0)}if(v&&v.type!==Comment&&(!isSameVNodeType(c,v)||g)){const T=resolveTransitionHooks(v,s,n,e);if(setTransitionHooks(v,T),u==="out-in")return n.isLeaving=!0,T.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},emptyPlaceholder(a);u==="in-out"&&c.type!==Comment&&(T.delayLeave=(_,y,O)=>{const V=getLeavingNodesForType(n,v);V[String(v.key)]=v,_[leaveCbKey]=()=>{y(),_[leaveCbKey]=void 0,delete d.delayedLeave},d.delayedLeave=O})}return a}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:s,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:m,onLeave:v,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:T,onAppear:_,onAfterAppear:y,onAppearCancelled:O}=r,V=String(t.key),Ce=getLeavingNodesForType(e,t),ae=(de,oe)=>{de&&callWithAsyncErrorHandling(de,n,9,oe)},Fe=(de,oe)=>{const he=oe[1];ae(de,oe),isArray$4(de)?de.every(Ve=>Ve.length<=1)&&he():de.length<=1&&he()},_e={mode:i,persisted:a,beforeEnter(de){let oe=s;if(!e.isMounted)if(o)oe=T||s;else return;de[leaveCbKey]&&de[leaveCbKey](!0);const he=Ce[V];he&&isSameVNodeType(t,he)&&he.el[leaveCbKey]&&he.el[leaveCbKey](),ae(oe,[de])},enter(de){let oe=u,he=c,Ve=d;if(!e.isMounted)if(o)oe=_||u,he=y||c,Ve=O||d;else return;let le=!1;const ie=de[enterCbKey$1]=Ie=>{le||(le=!0,Ie?ae(Ve,[de]):ae(he,[de]),_e.delayedLeave&&_e.delayedLeave(),de[enterCbKey$1]=void 0)};oe?Fe(oe,[de,ie]):ie()},leave(de,oe){const he=String(t.key);if(de[enterCbKey$1]&&de[enterCbKey$1](!0),e.isUnmounting)return oe();ae(m,[de]);let Ve=!1;const le=de[leaveCbKey]=ie=>{Ve||(Ve=!0,oe(),ie?ae(b,[de]):ae(g,[de]),de[leaveCbKey]=void 0,Ce[he]===t&&delete Ce[he])};Ce[he]=t,v?Fe(v,[de,le]):le()},clone(de){return resolveTransitionHooks(de,r,e,n)}};return _e}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],o=0;for(let i=0;i<t.length;i++){let a=t[i];const s=e==null?a.key:String(e)+String(a.key!=null?a.key:i);a.type===Fragment?(a.patchFlag&128&&o++,n=n.concat(getTransitionRawChildren(a.children,r,s))):(r||a.type!==Comment)&&n.push(s!=null?cloneVNode(a,{key:s}):a)}if(o>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,r){return isFunction$3(t)?(()=>extend$1({name:t.name},r,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let o=e;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(r,n,e),e){let o=e.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(n,r,e,o),o=o.parent}}function injectToKeepAliveRoot(t,r,e,n){const o=injectHook(r,t,n,!0);onUnmounted(()=>{remove(n[r],o)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const o=e[t]||(e[t]=[]),i=r.__weh||(r.__weh=(...a)=>{if(e.isUnmounted)return;pauseTracking(),setCurrentInstance(e);const s=callWithAsyncErrorHandling(r,e,t,a);return unsetCurrentInstance(),resetTracking(),s});return n?o.unshift(i):o.push(i),i}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,r,e=!0,n=!1){const o=currentRenderingInstance||currentInstance;if(o){const i=o.type;if(t===COMPONENTS){const s=getComponentName(i,!1);if(s&&(s===r||s===camelize(r)||s===capitalize$1(camelize(r))))return i}const a=resolve(o[t]||i[t],r)||resolve(o.appContext[t],r);return!a&&n?i:a}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize$1(camelize(r))])}function renderList(t,r,e,n){let o;const i=e&&e[n];if(isArray$4(t)||isString$2(t)){o=new Array(t.length);for(let a=0,s=t.length;a<s;a++)o[a]=r(t[a],a,void 0,i&&i[a])}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=r(a+1,a,void 0,i&&i[a])}else if(isObject$2(t))if(t[Symbol.iterator])o=Array.from(t,(a,s)=>r(a,s,void 0,i&&i[s]));else{const a=Object.keys(t);o=new Array(a.length);for(let s=0,u=a.length;s<u;s++){const c=a[s];o[s]=r(t[c],c,s,i&&i[s])}}else o=[];return e&&(e[n]=o),o}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$4(n))for(let o=0;o<n.length;o++)t[n[o].name]=n[o].fn;else n&&(t[n.name]=n.key?(...o)=>{const i=n.fn(...o);return i&&(i.key=n.key),i}:n.fn)}return t}function renderSlot(t,r,e={},n,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let i=t[r];i&&i._c&&(i._d=!1),openBlock();const a=i&&ensureValidVNode(i(e)),s=createBlock(Fragment,{key:e.key||a&&a.key||`_${r}`},a||(n?n():[]),a&&t._===1?64:-2);return!o&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),i&&i._c&&(i._d=!0),s}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){const{ctx:e,setupState:n,data:o,props:i,accessCache:a,type:s,appContext:u}=t;let c;if(r[0]!=="$"){const g=a[r];if(g!==void 0)switch(g){case 1:return n[r];case 2:return o[r];case 4:return e[r];case 3:return i[r]}else{if(hasSetupBinding(n,r))return a[r]=1,n[r];if(o!==EMPTY_OBJ&&hasOwn(o,r))return a[r]=2,o[r];if((c=t.propsOptions[0])&&hasOwn(c,r))return a[r]=3,i[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return a[r]=4,e[r];shouldCacheAccess&&(a[r]=0)}}const d=publicPropertiesMap[r];let m,v;if(d)return r==="$attrs"&&track(t,"get",r),d(t);if((m=s.__cssModules)&&(m=m[r]))return m;if(e!==EMPTY_OBJ&&hasOwn(e,r))return a[r]=4,e[r];if(v=u.config.globalProperties,hasOwn(v,r))return v[r]},set({_:t},r,e){const{data:n,setupState:o,ctx:i}=t;return hasSetupBinding(o,r)?(o[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(i[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:o,propsOptions:i}},a){let s;return!!e[a]||t!==EMPTY_OBJ&&hasOwn(t,a)||hasSetupBinding(r,a)||(s=i[0])&&hasOwn(s,a)||hasOwn(n,a)||hasOwn(publicPropertiesMap,a)||hasOwn(o.config.globalProperties,a)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$4(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:o,computed:i,methods:a,watch:s,provide:u,inject:c,created:d,beforeMount:m,mounted:v,beforeUpdate:g,updated:b,activated:T,deactivated:_,beforeDestroy:y,beforeUnmount:O,destroyed:V,unmounted:Ce,render:ae,renderTracked:Fe,renderTriggered:_e,errorCaptured:de,serverPrefetch:oe,expose:he,inheritAttrs:Ve,components:le,directives:ie,filters:Ie}=r;if(c&&resolveInjections(c,n,null),a)for(const Ue in a){const Dt=a[Ue];isFunction$3(Dt)&&(n[Ue]=Dt.bind(e))}if(o){const Ue=o.call(e,e);isObject$2(Ue)&&(t.data=reactive(Ue))}if(shouldCacheAccess=!0,i)for(const Ue in i){const Dt=i[Ue],tr=isFunction$3(Dt)?Dt.bind(e,e):isFunction$3(Dt.get)?Dt.get.bind(e,e):NOOP,dr=!isFunction$3(Dt)&&isFunction$3(Dt.set)?Dt.set.bind(e):NOOP,pr=computed({get:tr,set:dr});Object.defineProperty(n,Ue,{enumerable:!0,configurable:!0,get:()=>pr.value,set:ar=>pr.value=ar})}if(s)for(const Ue in s)createWatcher(s[Ue],n,e,Ue);if(u){const Ue=isFunction$3(u)?u.call(e):u;Reflect.ownKeys(Ue).forEach(Dt=>{provide(Dt,Ue[Dt])})}d&&callHook$1(d,t,"c");function kt(Ue,Dt){isArray$4(Dt)?Dt.forEach(tr=>Ue(tr.bind(e))):Dt&&Ue(Dt.bind(e))}if(kt(onBeforeMount,m),kt(onMounted,v),kt(onBeforeUpdate,g),kt(onUpdated,b),kt(onActivated,T),kt(onDeactivated,_),kt(onErrorCaptured,de),kt(onRenderTracked,Fe),kt(onRenderTriggered,_e),kt(onBeforeUnmount,O),kt(onUnmounted,Ce),kt(onServerPrefetch,oe),isArray$4(he))if(he.length){const Ue=t.exposed||(t.exposed={});he.forEach(Dt=>{Object.defineProperty(Ue,Dt,{get:()=>e[Dt],set:tr=>e[Dt]=tr})})}else t.exposed||(t.exposed={});ae&&t.render===NOOP&&(t.render=ae),Ve!=null&&(t.inheritAttrs=Ve),le&&(t.components=le),ie&&(t.directives=ie)}function resolveInjections(t,r,e=NOOP){isArray$4(t)&&(t=normalizeInject(t));for(const n in t){const o=t[n];let i;isObject$2(o)?"default"in o?i=inject(o.from||n,o.default,!0):i=inject(o.from||n):i=inject(o),isRef(i)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):r[n]=i}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$4(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const o=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const i=r[t];isFunction$3(i)&&watch(o,i)}else if(isFunction$3(t))watch(o,t.bind(e));else if(isObject$2(t))if(isArray$4(t))t.forEach(i=>createWatcher(i,r,e,n));else{const i=isFunction$3(t.handler)?t.handler.bind(e):r[t.handler];isFunction$3(i)&&watch(o,i,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,s=i.get(r);let u;return s?u=s:!o.length&&!e&&!n?u=r:(u={},o.length&&o.forEach(c=>mergeOptions$1(u,c,a,!0)),mergeOptions$1(u,r,a)),isObject$2(r)&&i.set(r,u),u}function mergeOptions$1(t,r,e,n=!1){const{mixins:o,extends:i}=r;i&&mergeOptions$1(t,i,e,!0),o&&o.forEach(a=>mergeOptions$1(t,a,e,!0));for(const a in r)if(!(n&&a==="expose")){const s=internalOptionMergeStrats[a]||e&&e[a];t[a]=s?s(t[a],r[a]):r[a]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$1(isFunction$3(t)?t.call(this,this):t,isFunction$3(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$4(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$1(Object.create(null),t,r):r}function mergeEmitsOrPropsOptions(t,r){return t?isArray$4(t)&&isArray$4(r)?[...new Set([...t,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$1(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,r){return function(n,o=null){isFunction$3(n)||(n=extend$1({},n)),o!=null&&!isObject$2(o)&&(o=null);const i=createAppContext(),a=new WeakSet;let s=!1;const u=i.app={_uid:uid$1++,_component:n,_props:o,_container:null,_context:i,_instance:null,version,get config(){return i.config},set config(c){},use(c,...d){return a.has(c)||(c&&isFunction$3(c.install)?(a.add(c),c.install(u,...d)):isFunction$3(c)&&(a.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,m){if(!s){const v=createVNode(n,o);return v.appContext=i,d&&r?r(v,c):t(v,c,m),s=!0,u._container=c,c.__vue_app__=u,getExposeProxy(v.component)||v.component.proxy}},unmount(){s&&(t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){currentApp=u;try{return c()}finally{currentApp=null}}};return u}}let currentApp=null;function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const o=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return e&&isFunction$3(r)?r.call(n&&n.proxy):r}}function initProps(t,r,e,n=!1){const o={},i={};def(i,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,r,o,i);for(const a in t.propsOptions[0])a in o||(o[a]=void 0);e?t.props=n?o:shallowReactive(o):t.type.props?t.props=o:t.props=i,t.attrs=i}function updateProps(t,r,e,n){const{props:o,attrs:i,vnode:{patchFlag:a}}=t,s=toRaw(o),[u]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let m=0;m<d.length;m++){let v=d[m];if(isEmitListener(t.emitsOptions,v))continue;const g=r[v];if(u)if(hasOwn(i,v))g!==i[v]&&(i[v]=g,c=!0);else{const b=camelize(v);o[b]=resolvePropValue(u,s,b,g,t,!1)}else g!==i[v]&&(i[v]=g,c=!0)}}}else{setFullProps(t,r,o,i)&&(c=!0);let d;for(const m in s)(!r||!hasOwn(r,m)&&((d=hyphenate(m))===m||!hasOwn(r,d)))&&(u?e&&(e[m]!==void 0||e[d]!==void 0)&&(o[m]=resolvePropValue(u,s,m,void 0,t,!0)):delete o[m]);if(i!==s)for(const m in i)(!r||!hasOwn(r,m))&&(delete i[m],c=!0)}c&&trigger(t,"set","$attrs")}function setFullProps(t,r,e,n){const[o,i]=t.propsOptions;let a=!1,s;if(r)for(let u in r){if(isReservedProp(u))continue;const c=r[u];let d;o&&hasOwn(o,d=camelize(u))?!i||!i.includes(d)?e[d]=c:(s||(s={}))[d]=c:isEmitListener(t.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,a=!0)}if(i){const u=toRaw(e),c=s||EMPTY_OBJ;for(let d=0;d<i.length;d++){const m=i[d];e[m]=resolvePropValue(o,u,m,c[m],t,!hasOwn(c,m))}}return a}function resolvePropValue(t,r,e,n,o,i){const a=t[e];if(a!=null){const s=hasOwn(a,"default");if(s&&n===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$3(u)){const{propsDefaults:c}=o;e in c?n=c[e]:(setCurrentInstance(o),n=c[e]=u.call(null,r),unsetCurrentInstance())}else n=u}a[0]&&(i&&!s?n=!1:a[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,o=n.get(t);if(o)return o;const i=t.props,a={},s=[];let u=!1;if(!isFunction$3(t)){const d=m=>{u=!0;const[v,g]=normalizePropsOptions(m,r,!0);extend$1(a,v),g&&s.push(...g)};!e&&r.mixins.length&&r.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$4(i))for(let d=0;d<i.length;d++){const m=camelize(i[d]);validatePropName(m)&&(a[m]=EMPTY_OBJ)}else if(i)for(const d in i){const m=camelize(d);if(validatePropName(m)){const v=i[d],g=a[m]=isArray$4(v)||isFunction$3(v)?{type:v}:extend$1({},v);if(g){const b=getTypeIndex(Boolean,g.type),T=getTypeIndex(String,g.type);g[0]=b>-1,g[1]=T<0||b<T,(b>-1||hasOwn(g,"default"))&&s.push(m)}}}const c=[a,s];return isObject$2(t)&&n.set(t,c),c}function validatePropName(t){return t[0]!=="$"}function getType(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$4(r)?r.findIndex(e=>isSameType(e,t)):isFunction$3(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$4(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,r,e)=>{if(r._n)return r;const n=withCtx((...o)=>normalizeSlotValue(r(...o)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const o in t){if(isInternalKey(o))continue;const i=t[o];if(isFunction$3(i))r[o]=normalizeSlot$1(o,i,n);else if(i!=null){const a=normalizeSlotValue(i);r[o]=()=>a}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=toRaw(r),def(r,"_",e)):normalizeObjectSlots(r,t.slots={})}else t.slots={},r&&normalizeVNodeSlots(t,r);def(t.slots,InternalObjectKey,1)},updateSlots=(t,r,e)=>{const{vnode:n,slots:o}=t;let i=!0,a=EMPTY_OBJ;if(n.shapeFlag&32){const s=r._;s?e&&s===1?i=!1:(extend$1(o,r),!e&&s===1&&delete o._):(i=!r.$stable,normalizeObjectSlots(r,o)),a=r}else r&&(normalizeVNodeSlots(t,r),a={default:1});if(i)for(const s in o)!isInternalKey(s)&&a[s]==null&&delete o[s]};function setRef(t,r,e,n,o=!1){if(isArray$4(t)){t.forEach((v,g)=>setRef(v,r&&(isArray$4(r)?r[g]:r),e,n,o));return}if(isAsyncWrapper(n)&&!o)return;const i=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,a=o?null:i,{i:s,r:u}=t,c=r&&r.r,d=s.refs===EMPTY_OBJ?s.refs={}:s.refs,m=s.setupState;if(c!=null&&c!==u&&(isString$2(c)?(d[c]=null,hasOwn(m,c)&&(m[c]=null)):isRef(c)&&(c.value=null)),isFunction$3(u))callWithErrorHandling(u,s,12,[a,d]);else{const v=isString$2(u),g=isRef(u);if(v||g){const b=()=>{if(t.f){const T=v?hasOwn(m,u)?m[u]:d[u]:u.value;o?isArray$4(T)&&remove(T,i):isArray$4(T)?T.includes(i)||T.push(i):v?(d[u]=[i],hasOwn(m,u)&&(m[u]=d[u])):(u.value=[i],t.k&&(d[t.k]=u.value))}else v?(d[u]=a,hasOwn(m,u)&&(m[u]=a)):g&&(u.value=a,t.k&&(d[t.k]=a))};a?(b.id=-1,queuePostRenderEffect(b,e)):b()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:o,patchProp:i,createElement:a,createText:s,createComment:u,setText:c,setElementText:d,parentNode:m,nextSibling:v,setScopeId:g=NOOP,insertStaticContent:b}=t,T=(Et,Lt,cr,mr=null,vr=null,Tr=null,Ir=!1,kr=null,Ar=!!Lt.dynamicChildren)=>{if(Et===Lt)return;Et&&!isSameVNodeType(Et,Lt)&&(mr=$e(Et),ar(Et,vr,Tr,!0),Et=null),Lt.patchFlag===-2&&(Ar=!1,Lt.dynamicChildren=null);const{type:Nr,ref:Mn,shapeFlag:Or}=Lt;switch(Nr){case Text:_(Et,Lt,cr,mr);break;case Comment:y(Et,Lt,cr,mr);break;case Static:Et==null&&O(Lt,cr,mr,Ir);break;case Fragment:le(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar);break;default:Or&1?ae(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar):Or&6?ie(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar):(Or&64||Or&128)&&Nr.process(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar,or)}Mn!=null&&vr&&setRef(Mn,Et&&Et.ref,Tr,Lt||Et,!Lt)},_=(Et,Lt,cr,mr)=>{if(Et==null)n(Lt.el=s(Lt.children),cr,mr);else{const vr=Lt.el=Et.el;Lt.children!==Et.children&&c(vr,Lt.children)}},y=(Et,Lt,cr,mr)=>{Et==null?n(Lt.el=u(Lt.children||""),cr,mr):Lt.el=Et.el},O=(Et,Lt,cr,mr)=>{[Et.el,Et.anchor]=b(Et.children,Lt,cr,mr,Et.el,Et.anchor)},V=({el:Et,anchor:Lt},cr,mr)=>{let vr;for(;Et&&Et!==Lt;)vr=v(Et),n(Et,cr,mr),Et=vr;n(Lt,cr,mr)},Ce=({el:Et,anchor:Lt})=>{let cr;for(;Et&&Et!==Lt;)cr=v(Et),o(Et),Et=cr;o(Lt)},ae=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar)=>{Ir=Ir||Lt.type==="svg",Et==null?Fe(Lt,cr,mr,vr,Tr,Ir,kr,Ar):oe(Et,Lt,vr,Tr,Ir,kr,Ar)},Fe=(Et,Lt,cr,mr,vr,Tr,Ir,kr)=>{let Ar,Nr;const{type:Mn,props:Or,shapeFlag:Pr,transition:Rr,dirs:Qr}=Et;if(Ar=Et.el=a(Et.type,Tr,Or&&Or.is,Or),Pr&8?d(Ar,Et.children):Pr&16&&de(Et.children,Ar,null,mr,vr,Tr&&Mn!=="foreignObject",Ir,kr),Qr&&invokeDirectiveHook(Et,null,mr,"created"),_e(Ar,Et,Et.scopeId,Ir,mr),Or){for(const Ur in Or)Ur!=="value"&&!isReservedProp(Ur)&&i(Ar,Ur,null,Or[Ur],Tr,Et.children,mr,vr,sr);"value"in Or&&i(Ar,"value",null,Or.value),(Nr=Or.onVnodeBeforeMount)&&invokeVNodeHook(Nr,mr,Et)}Qr&&invokeDirectiveHook(Et,null,mr,"beforeMount");const hn=needTransition(vr,Rr);hn&&Rr.beforeEnter(Ar),n(Ar,Lt,cr),((Nr=Or&&Or.onVnodeMounted)||hn||Qr)&&queuePostRenderEffect(()=>{Nr&&invokeVNodeHook(Nr,mr,Et),hn&&Rr.enter(Ar),Qr&&invokeDirectiveHook(Et,null,mr,"mounted")},vr)},_e=(Et,Lt,cr,mr,vr)=>{if(cr&&g(Et,cr),mr)for(let Tr=0;Tr<mr.length;Tr++)g(Et,mr[Tr]);if(vr){let Tr=vr.subTree;if(Lt===Tr){const Ir=vr.vnode;_e(Et,Ir,Ir.scopeId,Ir.slotScopeIds,vr.parent)}}},de=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar=0)=>{for(let Nr=Ar;Nr<Et.length;Nr++){const Mn=Et[Nr]=kr?cloneIfMounted(Et[Nr]):normalizeVNode(Et[Nr]);T(null,Mn,Lt,cr,mr,vr,Tr,Ir,kr)}},oe=(Et,Lt,cr,mr,vr,Tr,Ir)=>{const kr=Lt.el=Et.el;let{patchFlag:Ar,dynamicChildren:Nr,dirs:Mn}=Lt;Ar|=Et.patchFlag&16;const Or=Et.props||EMPTY_OBJ,Pr=Lt.props||EMPTY_OBJ;let Rr;cr&&toggleRecurse(cr,!1),(Rr=Pr.onVnodeBeforeUpdate)&&invokeVNodeHook(Rr,cr,Lt,Et),Mn&&invokeDirectiveHook(Lt,Et,cr,"beforeUpdate"),cr&&toggleRecurse(cr,!0);const Qr=vr&&Lt.type!=="foreignObject";if(Nr?he(Et.dynamicChildren,Nr,kr,cr,mr,Qr,Tr):Ir||Dt(Et,Lt,kr,null,cr,mr,Qr,Tr,!1),Ar>0){if(Ar&16)Ve(kr,Lt,Or,Pr,cr,mr,vr);else if(Ar&2&&Or.class!==Pr.class&&i(kr,"class",null,Pr.class,vr),Ar&4&&i(kr,"style",Or.style,Pr.style,vr),Ar&8){const hn=Lt.dynamicProps;for(let Ur=0;Ur<hn.length;Ur++){const qr=hn[Ur],Gn=Or[qr],jn=Pr[qr];(jn!==Gn||qr==="value")&&i(kr,qr,Gn,jn,vr,Et.children,cr,mr,sr)}}Ar&1&&Et.children!==Lt.children&&d(kr,Lt.children)}else!Ir&&Nr==null&&Ve(kr,Lt,Or,Pr,cr,mr,vr);((Rr=Pr.onVnodeUpdated)||Mn)&&queuePostRenderEffect(()=>{Rr&&invokeVNodeHook(Rr,cr,Lt,Et),Mn&&invokeDirectiveHook(Lt,Et,cr,"updated")},mr)},he=(Et,Lt,cr,mr,vr,Tr,Ir)=>{for(let kr=0;kr<Lt.length;kr++){const Ar=Et[kr],Nr=Lt[kr],Mn=Ar.el&&(Ar.type===Fragment||!isSameVNodeType(Ar,Nr)||Ar.shapeFlag&70)?m(Ar.el):cr;T(Ar,Nr,Mn,null,mr,vr,Tr,Ir,!0)}},Ve=(Et,Lt,cr,mr,vr,Tr,Ir)=>{if(cr!==mr){if(cr!==EMPTY_OBJ)for(const kr in cr)!isReservedProp(kr)&&!(kr in mr)&&i(Et,kr,cr[kr],null,Ir,Lt.children,vr,Tr,sr);for(const kr in mr){if(isReservedProp(kr))continue;const Ar=mr[kr],Nr=cr[kr];Ar!==Nr&&kr!=="value"&&i(Et,kr,Nr,Ar,Ir,Lt.children,vr,Tr,sr)}"value"in mr&&i(Et,"value",cr.value,mr.value)}},le=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar)=>{const Nr=Lt.el=Et?Et.el:s(""),Mn=Lt.anchor=Et?Et.anchor:s("");let{patchFlag:Or,dynamicChildren:Pr,slotScopeIds:Rr}=Lt;Rr&&(kr=kr?kr.concat(Rr):Rr),Et==null?(n(Nr,cr,mr),n(Mn,cr,mr),de(Lt.children,cr,Mn,vr,Tr,Ir,kr,Ar)):Or>0&&Or&64&&Pr&&Et.dynamicChildren?(he(Et.dynamicChildren,Pr,cr,vr,Tr,Ir,kr),(Lt.key!=null||vr&&Lt===vr.subTree)&&traverseStaticChildren(Et,Lt,!0)):Dt(Et,Lt,cr,Mn,vr,Tr,Ir,kr,Ar)},ie=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar)=>{Lt.slotScopeIds=kr,Et==null?Lt.shapeFlag&512?vr.ctx.activate(Lt,cr,mr,Ir,Ar):Ie(Lt,cr,mr,vr,Tr,Ir,Ar):pe(Et,Lt,Ar)},Ie=(Et,Lt,cr,mr,vr,Tr,Ir)=>{const kr=Et.component=createComponentInstance(Et,mr,vr);if(isKeepAlive(Et)&&(kr.ctx.renderer=or),setupComponent(kr),kr.asyncDep){if(vr&&vr.registerDep(kr,kt),!Et.el){const Ar=kr.subTree=createVNode(Comment);y(null,Ar,Lt,cr)}return}kt(kr,Et,Lt,cr,vr,Tr,Ir)},pe=(Et,Lt,cr)=>{const mr=Lt.component=Et.component;if(shouldUpdateComponent(Et,Lt,cr))if(mr.asyncDep&&!mr.asyncResolved){Ue(mr,Lt,cr);return}else mr.next=Lt,invalidateJob(mr.update),mr.update();else Lt.el=Et.el,mr.vnode=Lt},kt=(Et,Lt,cr,mr,vr,Tr,Ir)=>{const kr=()=>{if(Et.isMounted){let{next:Mn,bu:Or,u:Pr,parent:Rr,vnode:Qr}=Et,hn=Mn,Ur;toggleRecurse(Et,!1),Mn?(Mn.el=Qr.el,Ue(Et,Mn,Ir)):Mn=Qr,Or&&invokeArrayFns(Or),(Ur=Mn.props&&Mn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ur,Rr,Mn,Qr),toggleRecurse(Et,!0);const qr=renderComponentRoot(Et),Gn=Et.subTree;Et.subTree=qr,T(Gn,qr,m(Gn.el),$e(Gn),Et,vr,Tr),Mn.el=qr.el,hn===null&&updateHOCHostEl(Et,qr.el),Pr&&queuePostRenderEffect(Pr,vr),(Ur=Mn.props&&Mn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ur,Rr,Mn,Qr),vr)}else{let Mn;const{el:Or,props:Pr}=Lt,{bm:Rr,m:Qr,parent:hn}=Et,Ur=isAsyncWrapper(Lt);if(toggleRecurse(Et,!1),Rr&&invokeArrayFns(Rr),!Ur&&(Mn=Pr&&Pr.onVnodeBeforeMount)&&invokeVNodeHook(Mn,hn,Lt),toggleRecurse(Et,!0),Or&&rr){const qr=()=>{Et.subTree=renderComponentRoot(Et),rr(Or,Et.subTree,Et,vr,null)};Ur?Lt.type.__asyncLoader().then(()=>!Et.isUnmounted&&qr()):qr()}else{const qr=Et.subTree=renderComponentRoot(Et);T(null,qr,cr,mr,Et,vr,Tr),Lt.el=qr.el}if(Qr&&queuePostRenderEffect(Qr,vr),!Ur&&(Mn=Pr&&Pr.onVnodeMounted)){const qr=Lt;queuePostRenderEffect(()=>invokeVNodeHook(Mn,hn,qr),vr)}(Lt.shapeFlag&256||hn&&isAsyncWrapper(hn.vnode)&&hn.vnode.shapeFlag&256)&&Et.a&&queuePostRenderEffect(Et.a,vr),Et.isMounted=!0,Lt=cr=mr=null}},Ar=Et.effect=new ReactiveEffect(kr,()=>queueJob(Nr),Et.scope),Nr=Et.update=()=>Ar.run();Nr.id=Et.uid,toggleRecurse(Et,!0),Nr()},Ue=(Et,Lt,cr)=>{Lt.component=Et;const mr=Et.vnode.props;Et.vnode=Lt,Et.next=null,updateProps(Et,Lt.props,mr,cr),updateSlots(Et,Lt.children,cr),pauseTracking(),flushPreFlushCbs(),resetTracking()},Dt=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar=!1)=>{const Nr=Et&&Et.children,Mn=Et?Et.shapeFlag:0,Or=Lt.children,{patchFlag:Pr,shapeFlag:Rr}=Lt;if(Pr>0){if(Pr&128){dr(Nr,Or,cr,mr,vr,Tr,Ir,kr,Ar);return}else if(Pr&256){tr(Nr,Or,cr,mr,vr,Tr,Ir,kr,Ar);return}}Rr&8?(Mn&16&&sr(Nr,vr,Tr),Or!==Nr&&d(cr,Or)):Mn&16?Rr&16?dr(Nr,Or,cr,mr,vr,Tr,Ir,kr,Ar):sr(Nr,vr,Tr,!0):(Mn&8&&d(cr,""),Rr&16&&de(Or,cr,mr,vr,Tr,Ir,kr,Ar))},tr=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar)=>{Et=Et||EMPTY_ARR,Lt=Lt||EMPTY_ARR;const Nr=Et.length,Mn=Lt.length,Or=Math.min(Nr,Mn);let Pr;for(Pr=0;Pr<Or;Pr++){const Rr=Lt[Pr]=Ar?cloneIfMounted(Lt[Pr]):normalizeVNode(Lt[Pr]);T(Et[Pr],Rr,cr,null,vr,Tr,Ir,kr,Ar)}Nr>Mn?sr(Et,vr,Tr,!0,!1,Or):de(Lt,cr,mr,vr,Tr,Ir,kr,Ar,Or)},dr=(Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar)=>{let Nr=0;const Mn=Lt.length;let Or=Et.length-1,Pr=Mn-1;for(;Nr<=Or&&Nr<=Pr;){const Rr=Et[Nr],Qr=Lt[Nr]=Ar?cloneIfMounted(Lt[Nr]):normalizeVNode(Lt[Nr]);if(isSameVNodeType(Rr,Qr))T(Rr,Qr,cr,null,vr,Tr,Ir,kr,Ar);else break;Nr++}for(;Nr<=Or&&Nr<=Pr;){const Rr=Et[Or],Qr=Lt[Pr]=Ar?cloneIfMounted(Lt[Pr]):normalizeVNode(Lt[Pr]);if(isSameVNodeType(Rr,Qr))T(Rr,Qr,cr,null,vr,Tr,Ir,kr,Ar);else break;Or--,Pr--}if(Nr>Or){if(Nr<=Pr){const Rr=Pr+1,Qr=Rr<Mn?Lt[Rr].el:mr;for(;Nr<=Pr;)T(null,Lt[Nr]=Ar?cloneIfMounted(Lt[Nr]):normalizeVNode(Lt[Nr]),cr,Qr,vr,Tr,Ir,kr,Ar),Nr++}}else if(Nr>Pr)for(;Nr<=Or;)ar(Et[Nr],vr,Tr,!0),Nr++;else{const Rr=Nr,Qr=Nr,hn=new Map;for(Nr=Qr;Nr<=Pr;Nr++){const vo=Lt[Nr]=Ar?cloneIfMounted(Lt[Nr]):normalizeVNode(Lt[Nr]);vo.key!=null&&hn.set(vo.key,Nr)}let Ur,qr=0;const Gn=Pr-Qr+1;let jn=!1,Jr=0;const Lr=new Array(Gn);for(Nr=0;Nr<Gn;Nr++)Lr[Nr]=0;for(Nr=Rr;Nr<=Or;Nr++){const vo=Et[Nr];if(qr>=Gn){ar(vo,vr,Tr,!0);continue}let bo;if(vo.key!=null)bo=hn.get(vo.key);else for(Ur=Qr;Ur<=Pr;Ur++)if(Lr[Ur-Qr]===0&&isSameVNodeType(vo,Lt[Ur])){bo=Ur;break}bo===void 0?ar(vo,vr,Tr,!0):(Lr[bo-Qr]=Nr+1,bo>=Jr?Jr=bo:jn=!0,T(vo,Lt[bo],cr,null,vr,Tr,Ir,kr,Ar),qr++)}const Kn=jn?getSequence(Lr):EMPTY_ARR;for(Ur=Kn.length-1,Nr=Gn-1;Nr>=0;Nr--){const vo=Qr+Nr,bo=Lt[vo],so=vo+1<Mn?Lt[vo+1].el:mr;Lr[Nr]===0?T(null,bo,cr,so,vr,Tr,Ir,kr,Ar):jn&&(Ur<0||Nr!==Kn[Ur]?pr(bo,cr,so,2):Ur--)}}},pr=(Et,Lt,cr,mr,vr=null)=>{const{el:Tr,type:Ir,transition:kr,children:Ar,shapeFlag:Nr}=Et;if(Nr&6){pr(Et.component.subTree,Lt,cr,mr);return}if(Nr&128){Et.suspense.move(Lt,cr,mr);return}if(Nr&64){Ir.move(Et,Lt,cr,or);return}if(Ir===Fragment){n(Tr,Lt,cr);for(let Or=0;Or<Ar.length;Or++)pr(Ar[Or],Lt,cr,mr);n(Et.anchor,Lt,cr);return}if(Ir===Static){V(Et,Lt,cr);return}if(mr!==2&&Nr&1&&kr)if(mr===0)kr.beforeEnter(Tr),n(Tr,Lt,cr),queuePostRenderEffect(()=>kr.enter(Tr),vr);else{const{leave:Or,delayLeave:Pr,afterLeave:Rr}=kr,Qr=()=>n(Tr,Lt,cr),hn=()=>{Or(Tr,()=>{Qr(),Rr&&Rr()})};Pr?Pr(Tr,Qr,hn):hn()}else n(Tr,Lt,cr)},ar=(Et,Lt,cr,mr=!1,vr=!1)=>{const{type:Tr,props:Ir,ref:kr,children:Ar,dynamicChildren:Nr,shapeFlag:Mn,patchFlag:Or,dirs:Pr}=Et;if(kr!=null&&setRef(kr,null,cr,Et,!0),Mn&256){Lt.ctx.deactivate(Et);return}const Rr=Mn&1&&Pr,Qr=!isAsyncWrapper(Et);let hn;if(Qr&&(hn=Ir&&Ir.onVnodeBeforeUnmount)&&invokeVNodeHook(hn,Lt,Et),Mn&6)nr(Et.component,cr,mr);else{if(Mn&128){Et.suspense.unmount(cr,mr);return}Rr&&invokeDirectiveHook(Et,null,Lt,"beforeUnmount"),Mn&64?Et.type.remove(Et,Lt,cr,vr,or,mr):Nr&&(Tr!==Fragment||Or>0&&Or&64)?sr(Nr,Lt,cr,!1,!0):(Tr===Fragment&&Or&384||!vr&&Mn&16)&&sr(Ar,Lt,cr),mr&&hr(Et)}(Qr&&(hn=Ir&&Ir.onVnodeUnmounted)||Rr)&&queuePostRenderEffect(()=>{hn&&invokeVNodeHook(hn,Lt,Et),Rr&&invokeDirectiveHook(Et,null,Lt,"unmounted")},cr)},hr=Et=>{const{type:Lt,el:cr,anchor:mr,transition:vr}=Et;if(Lt===Fragment){Ne(cr,mr);return}if(Lt===Static){Ce(Et);return}const Tr=()=>{o(cr),vr&&!vr.persisted&&vr.afterLeave&&vr.afterLeave()};if(Et.shapeFlag&1&&vr&&!vr.persisted){const{leave:Ir,delayLeave:kr}=vr,Ar=()=>Ir(cr,Tr);kr?kr(Et.el,Tr,Ar):Ar()}else Tr()},Ne=(Et,Lt)=>{let cr;for(;Et!==Lt;)cr=v(Et),o(Et),Et=cr;o(Lt)},nr=(Et,Lt,cr)=>{const{bum:mr,scope:vr,update:Tr,subTree:Ir,um:kr}=Et;mr&&invokeArrayFns(mr),vr.stop(),Tr&&(Tr.active=!1,ar(Ir,Et,Lt,cr)),kr&&queuePostRenderEffect(kr,Lt),queuePostRenderEffect(()=>{Et.isUnmounted=!0},Lt),Lt&&Lt.pendingBranch&&!Lt.isUnmounted&&Et.asyncDep&&!Et.asyncResolved&&Et.suspenseId===Lt.pendingId&&(Lt.deps--,Lt.deps===0&&Lt.resolve())},sr=(Et,Lt,cr,mr=!1,vr=!1,Tr=0)=>{for(let Ir=Tr;Ir<Et.length;Ir++)ar(Et[Ir],Lt,cr,mr,vr)},$e=Et=>Et.shapeFlag&6?$e(Et.component.subTree):Et.shapeFlag&128?Et.suspense.next():v(Et.anchor||Et.el),er=(Et,Lt,cr)=>{Et==null?Lt._vnode&&ar(Lt._vnode,null,null,!0):T(Lt._vnode||null,Et,Lt,null,null,null,cr),flushPreFlushCbs(),flushPostFlushCbs(),Lt._vnode=Et},or={p:T,um:ar,m:pr,r:hr,mt:Ie,mc:de,pc:Dt,pbc:he,n:$e,o:t};let ze,rr;return r&&([ze,rr]=r(or)),{render:er,hydrate:ze,createApp:createAppAPI(er,ze)}}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function needTransition(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(t,r,e=!1){const n=t.children,o=r.children;if(isArray$4(n)&&isArray$4(o))for(let i=0;i<n.length;i++){const a=n[i];let s=o[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=o[i]=cloneIfMounted(o[i]),s.el=a.el),e||traverseStaticChildren(a,s)),s.type===Text&&(s.el=a.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,o,i,a,s;const u=t.length;for(n=0;n<u;n++){const c=t[n];if(c!==0){if(o=e[e.length-1],t[o]<c){r[n]=o,e.push(n);continue}for(i=0,a=e.length-1;i<a;)s=i+a>>1,t[e[s]]<c?i=s+1:a=s;c<t[e[i]]&&(i>0&&(r[n]=e[i-1]),e[i]=n)}}for(i=e.length,a=e[i-1];i-- >0;)e[i]=a,a=r[a];return e}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={__isTeleport:!0,process(t,r,e,n,o,i,a,s,u,c){const{mc:d,pc:m,pbc:v,o:{insert:g,querySelector:b,createText:T,createComment:_}}=c,y=isTeleportDisabled(r.props);let{shapeFlag:O,children:V,dynamicChildren:Ce}=r;if(t==null){const ae=r.el=T(""),Fe=r.anchor=T("");g(ae,e,n),g(Fe,e,n);const _e=r.target=resolveTarget(r.props,b),de=r.targetAnchor=T("");_e&&(g(de,_e),a=a||isTargetSVG(_e));const oe=(he,Ve)=>{O&16&&d(V,he,Ve,o,i,a,s,u)};y?oe(e,Fe):_e&&oe(_e,de)}else{r.el=t.el;const ae=r.anchor=t.anchor,Fe=r.target=t.target,_e=r.targetAnchor=t.targetAnchor,de=isTeleportDisabled(t.props),oe=de?e:Fe,he=de?ae:_e;if(a=a||isTargetSVG(Fe),Ce?(v(t.dynamicChildren,Ce,oe,o,i,a,s),traverseStaticChildren(t,r,!0)):u||m(t,r,oe,he,o,i,a,s,!1),y)de?r.props&&t.props&&r.props.to!==t.props.to&&(r.props.to=t.props.to):moveTeleport(r,e,ae,c,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const Ve=r.target=resolveTarget(r.props,b);Ve&&moveTeleport(r,Ve,null,c,0)}else de&&moveTeleport(r,Fe,_e,c,1)}updateCssVars(r)},remove(t,r,e,n,{um:o,o:{remove:i}},a){const{shapeFlag:s,children:u,anchor:c,targetAnchor:d,target:m,props:v}=t;if(m&&i(d),a&&i(c),s&16){const g=a||!isTeleportDisabled(v);for(let b=0;b<u.length;b++){const T=u[b];o(T,r,e,g,!!T.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:o},i=2){i===0&&n(t.targetAnchor,r,e);const{el:a,anchor:s,shapeFlag:u,children:c,props:d}=t,m=i===2;if(m&&n(a,r,e),(!m||isTeleportDisabled(d))&&u&16)for(let v=0;v<c.length;v++)o(c[v],r,e,2);m&&n(s,r,e)}function hydrateTeleport(t,r,e,n,o,i,{o:{nextSibling:a,parentNode:s,querySelector:u}},c){const d=r.target=resolveTarget(r.props,u);if(d){const m=d._lpa||d.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=c(a(t),r,s(t),e,n,o,i),r.targetAnchor=m;else{r.anchor=a(t);let v=m;for(;v;)if(v=a(v),v&&v.nodeType===8&&v.data==="teleport anchor"){r.targetAnchor=v,d._lpa=r.targetAnchor&&a(r.targetAnchor);break}c(m,r,d,e,n,o,i)}updateCssVars(r)}return r.anchor&&a(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e&&e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,o,i){return setupBlock(createBaseVNode(t,r,e,n,o,i,!0))}function createBlock(t,r,e,n,o){return setupBlock(createVNode(t,r,e,n,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?isString$2(t)||isRef(t)||isFunction$3(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null);function createBaseVNode(t,r=null,e=null,n=0,o=null,i=t===Fragment?0:1,a=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(u,e),i&128&&t.normalize(u)):e&&(u.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,o=null,i=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const s=cloneVNode(t,r,!0);return e&&normalizeChildren(s,e),isBlockTreeEnabled>0&&!i&&currentBlock&&(s.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=s:currentBlock.push(s)),s.patchFlag|=-2,s}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:s,style:u}=r;s&&!isString$2(s)&&(r.class=normalizeClass(s)),isObject$2(u)&&(isProxy(u)&&!isArray$4(u)&&(u=extend$1({},u)),r.style=normalizeStyle(u))}const a=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$3(t)?2:0;return createBaseVNode(t,r,e,n,o,a,i,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,r,e=!1){const{props:n,ref:o,patchFlag:i,children:a}=t,s=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&normalizeKey(s),ref:r&&r.ref?e&&o?isArray$4(o)?o.concat(normalizeRef(r)):[o,normalizeRef(r)]:normalizeRef(r):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$4(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$4(r))e=16;else if(typeof r=="object")if(n&65){const o=r.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{e=32;const o=r._;!o&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$3(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const o in n)if(o==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(o==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(o)){const i=r[o],a=n[o];a&&i!==a&&!(isArray$4(i)&&i.includes(a))&&(r[o]=i?[].concat(i,a):a)}else o!==""&&(r[o]=n[o])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(t,r,e){const n=t.type,o=(r?r.appContext:t.appContext)||emptyAppContext,i={uid:uid$2++,vnode:t,type:n,parent:r,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,o),emitsOptions:normalizeEmitsOptions(n,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=r?r.root:i,i.emit=emit.bind(null,i),t.ce&&t.ce(i),i}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(t=>currentInstance=t),internalSetCurrentInstance=t=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(r=>r(t)):globalCurrentInstanceSetters[0](t)};const setCurrentInstance=t=>{internalSetCurrentInstance(t),t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){isInSSRComponentSetup=r;const{props:e,children:n}=t.vnode,o=isStatefulComponent(t);initProps(t,e,o,r),initSlots(t,n);const i=o?setupStatefulComponent(t,r):void 0;return isInSSRComponentSetup=!1,i}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=e;if(n){const o=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const i=callWithErrorHandling(n,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),r)return i.then(a=>{handleSetupResult(t,a,r)}).catch(a=>{handleError(a,t,0)});t.asyncDep=i}else handleSetupResult(t,i,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$3(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const o=n.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:s,compilerOptions:u}=n,c=extend$1(extend$1({isCustomElement:i,delimiters:s},a),u);n.render=compile(o,c)}}t.render=n.render||NOOP}{setCurrentInstance(t),pauseTracking();try{applyOptions(t)}finally{resetTracking(),unsetCurrentInstance()}}}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return track(t,"get","$attrs"),r[e]}}))}function createSetupContext(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}function getComponentName(t,r=!0){return isFunction$3(t)?t.displayName||t.name:t.name||r&&t.__name}function isClassComponent(t){return isFunction$3(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function h(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$4(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.7",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const o=r?doc.createElementNS(svgNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,o,i){const a=e?e.previousSibling:r.lastChild;if(o&&(o===i||o.nextSibling))for(;r.insertBefore(o.cloneNode(!0),e),!(o===i||!(o=o.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const s=templateContainer.content;if(n){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}r.insertBefore(s,e)}return[a?a.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(t,{slots:r})=>h(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,r=[])=>{isArray$4(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$4(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const le in t)le in DOMTransitionPropsValidators||(r[le]=t[le]);if(t.css===!1)return r;const{name:e="v",type:n,duration:o,enterFromClass:i=`${e}-enter-from`,enterActiveClass:a=`${e}-enter-active`,enterToClass:s=`${e}-enter-to`,appearFromClass:u=i,appearActiveClass:c=a,appearToClass:d=s,leaveFromClass:m=`${e}-leave-from`,leaveActiveClass:v=`${e}-leave-active`,leaveToClass:g=`${e}-leave-to`}=t,b=normalizeDuration(o),T=b&&b[0],_=b&&b[1],{onBeforeEnter:y,onEnter:O,onEnterCancelled:V,onLeave:Ce,onLeaveCancelled:ae,onBeforeAppear:Fe=y,onAppear:_e=O,onAppearCancelled:de=V}=r,oe=(le,ie,Ie)=>{removeTransitionClass(le,ie?d:s),removeTransitionClass(le,ie?c:a),Ie&&Ie()},he=(le,ie)=>{le._isLeaving=!1,removeTransitionClass(le,m),removeTransitionClass(le,g),removeTransitionClass(le,v),ie&&ie()},Ve=le=>(ie,Ie)=>{const pe=le?_e:O,kt=()=>oe(ie,le,Ie);callHook(pe,[ie,kt]),nextFrame(()=>{removeTransitionClass(ie,le?u:i),addTransitionClass(ie,le?d:s),hasExplicitCallback(pe)||whenTransitionEnds(ie,n,T,kt)})};return extend$1(r,{onBeforeEnter(le){callHook(y,[le]),addTransitionClass(le,i),addTransitionClass(le,a)},onBeforeAppear(le){callHook(Fe,[le]),addTransitionClass(le,u),addTransitionClass(le,c)},onEnter:Ve(!1),onAppear:Ve(!0),onLeave(le,ie){le._isLeaving=!0;const Ie=()=>he(le,ie);addTransitionClass(le,m),forceReflow(),addTransitionClass(le,v),nextFrame(()=>{le._isLeaving&&(removeTransitionClass(le,m),addTransitionClass(le,g),hasExplicitCallback(Ce)||whenTransitionEnds(le,n,_,Ie))}),callHook(Ce,[le,Ie])},onEnterCancelled(le){oe(le,!1),callHook(V,[le])},onAppearCancelled(le){oe(le,!0),callHook(de,[le])},onLeaveCancelled(le){he(le),callHook(ae,[le])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber$1(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[vtcKey]||(t[vtcKey]=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[vtcKey];e&&(e.delete(r),e.size||(t[vtcKey]=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const o=t._endId=++endId,i=()=>{o===t._endId&&n()};if(e)return setTimeout(i,e);const{type:a,timeout:s,propCount:u}=getTransitionInfo(t,r);if(!a)return n();const c=a+"end";let d=0;const m=()=>{t.removeEventListener(c,v),i()},v=g=>{g.target===t&&++d>=u&&m()};setTimeout(()=>{d<u&&m()},s+1),t.addEventListener(c,v)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=b=>(e[b]||"").split(", "),o=n(`${TRANSITION}Delay`),i=n(`${TRANSITION}Duration`),a=getTimeout(o,i),s=n(`${ANIMATION}Delay`),u=n(`${ANIMATION}Duration`),c=getTimeout(s,u);let d=null,m=0,v=0;r===TRANSITION?a>0&&(d=TRANSITION,m=a,v=i.length):r===ANIMATION?c>0&&(d=ANIMATION,m=c,v=u.length):(m=Math.max(a,c),d=m>0?a>c?TRANSITION:ANIMATION:null,v=d?d===TRANSITION?i.length:u.length:0);const g=d===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:d,timeout:m,propCount:v,hasTransform:g}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(t,r,e){const n=t[vtcKey];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const vShowOldKey=Symbol("_vod"),vShow={beforeMount(t,{value:r},{transition:e}){t[vShowOldKey]=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t[vShowOldKey]:"none"}function patchStyle(t,r,e){const n=t.style,o=isString$2(e);if(e&&!o){if(r&&!isString$2(r))for(const i in r)e[i]==null&&setStyle(n,i,"");for(const i in e)setStyle(n,i,e[i])}else{const i=n.display;o?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),vShowOldKey in t&&(n.display=i)}}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$4(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize$1(n);for(let o=0;o<prefixes.length;o++){const i=prefixes[o]+n;if(i in t)return prefixCache[r]=i}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,o){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const i=isSpecialBooleanAttr(r);e==null||i&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,i?"":e)}}function patchDOMProp(t,r,e,n,o,i,a){if(r==="innerHTML"||r==="textContent"){n&&a(n,o,i),t[r]=e??"";return}const s=t.tagName;if(r==="value"&&s!=="PROGRESS"&&!s.includes("-")){t._value=e;const c=s==="OPTION"?t.getAttribute("value"):t.value,d=e??"";c!==d&&(t.value=d),e==null&&t.removeAttribute(r);return}let u=!1;if(e===""||e==null){const c=typeof t[r];c==="boolean"?e=includeBooleanAttr(e):e==null&&c==="string"?(e="",u=!0):c==="number"&&(e=0,u=!0)}try{t[r]=e}catch{}u&&t.removeAttribute(r)}function addEventListener(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}const veiKey=Symbol("_vei");function patchEvent(t,r,e,n,o=null){const i=t[veiKey]||(t[veiKey]={}),a=i[r];if(n&&a)a.value=n;else{const[s,u]=parseName(r);if(n){const c=i[r]=createInvoker(n,o);addEventListener(t,s,c,u)}else a&&(removeEventListener(t,s,a,u),i[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$4(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>o=>!o._stopped&&n&&n(o))}else return r}const nativeOnRE=/^on[a-z]/,patchProp=(t,r,e,n,o=!1,i,a,s,u)=>{r==="class"?patchClass(t,n,o):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,a):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,o))?patchDOMProp(t,r,n,i,a,s,u):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,o))};function shouldSetAsProp(t,r,e,n){return n?!!(r==="innerHTML"||r==="textContent"||r in t&&nativeOnRE.test(r)&&isFunction$3(e)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(r)&&isString$2(e)?!1:r in t}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let o,i;return onUpdated(()=>{if(!o.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(o[0].el,e.vnode.el,a))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const s=o.filter(applyTranslation);forceReflow(),s.forEach(u=>{const c=u.el,d=c.style;addTransitionClass(c,a),d.transform=d.webkitTransform=d.transitionDuration="";const m=c[moveCbKey]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",m),c[moveCbKey]=null,removeTransitionClass(c,a))};c.addEventListener("transitionend",m)})}),()=>{const a=toRaw(t),s=resolveTransitionProps(a);let u=a.tag||Fragment;o=i,i=r.default?getTransitionRawChildren(r.default()):[];for(let c=0;c<i.length;c++){const d=i[c];d.key!=null&&setTransitionHooks(d,resolveTransitionHooks(d,s,n,e))}if(o)for(let c=0;c<o.length;c++){const d=o[c];setTransitionHooks(d,resolveTransitionHooks(d,s,n,e)),positionMap.set(d,d.el.getBoundingClientRect())}return createVNode(u,null,i)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const r=t.el;r[moveCbKey]&&r[moveCbKey](),r[enterCbKey]&&r[enterCbKey]()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const r=positionMap.get(t),e=newPositionMap.get(t),n=r.left-e.left,o=r.top-e.top;if(n||o){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${o}px)`,i.transitionDuration="0s",t}}function hasCSSTransform(t,r,e){const n=t.cloneNode(),o=t[vtcKey];o&&o.forEach(s=>{s.split(/\s+/).forEach(u=>u&&n.classList.remove(u))}),e.split(/\s+/).forEach(s=>s&&n.classList.add(s)),n.style.display="none";const i=r.nodeType===1?r:r.parentNode;i.appendChild(n);const{hasTransform:a}=getTransitionInfo(n);return i.removeChild(n),a}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$4(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},o){t[assignKey]=getModelAssigner(o);const i=n||o.props&&o.props.type==="number";addEventListener(t,r?"change":"input",a=>{if(a.target.composing)return;let s=t.value;e&&(s=s.trim()),i&&(s=looseToNumber(s)),t[assignKey](s)}),e&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:o}},i){if(t[assignKey]=getModelAssigner(i),t.composing||document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===r||(o||t.type==="number")&&looseToNumber(t.value)===r))return;const a=r??"";t.value!==a&&(t.value=a)}},vModelCheckbox={deep:!0,created(t,r,e){t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{const n=t._modelValue,o=getValue$2(t),i=t.checked,a=t[assignKey];if(isArray$4(n)){const s=looseIndexOf(n,o),u=s!==-1;if(i&&!u)a(n.concat(o));else if(!i&&u){const c=[...n];c.splice(s,1),a(c)}}else if(isSet$2(n)){const s=new Set(n);i?s.add(o):s.delete(o),a(s)}else a(getCheckboxValue(t,i))})},mounted:setChecked,beforeUpdate(t,r,e){t[assignKey]=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$4(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet$2(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{t[assignKey](getValue$2(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t[assignKey]=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue$2(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>(e,...n)=>{for(let o=0;o<r.length;o++){const i=modifierGuards[r[o]];if(i&&i(e,r))return}return t(e,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>e=>{if(!("key"in e))return;const n=hyphenate(e.key);if(r.some(o=>o===n||keyNames[o]===n))return t(e)},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...t)=>{ensureRenderer().render(...t)},createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const o=normalizeContainer(n);if(!o)return;const i=r._component;!isFunction$3(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const a=e(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},r};function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,r){const e={};for(const n in r){const o=r[n];e[n]=isArray$3(o)?o.map(t):t(o)}return e}const noop$2=()=>{},isArray$3=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,r,e="/"){let n,o={},i="",a="";const s=r.indexOf("#");let u=r.indexOf("?");return s<u&&s>=0&&(u=-1),u>-1&&(n=r.slice(0,u),i=r.slice(u+1,s>-1?s:r.length),o=t(i)),s>-1&&(n=n||r.slice(0,s),a=r.slice(s,r.length)),n=resolveRelativePath(n??r,e),{fullPath:n+(i&&"?")+i+a,path:n,query:o,hash:a}}function stringifyURL(t,r){const e=r.query?t(r.query):"";return r.path+(e&&"?")+e+(r.hash||"")}function stripBase(t,r){return!r||!t.toLowerCase().startsWith(r.toLowerCase())?t:t.slice(r.length)||"/"}function isSameRouteLocation(t,r,e){const n=r.matched.length-1,o=e.matched.length-1;return n>-1&&n===o&&isSameRouteRecord(r.matched[n],e.matched[o])&&isSameRouteLocationParams(r.params,e.params)&&t(r.query)===t(e.query)&&r.hash===e.hash}function isSameRouteRecord(t,r){return(t.aliasOf||t)===(r.aliasOf||r)}function isSameRouteLocationParams(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const e in t)if(!isSameRouteLocationParamsValue(t[e],r[e]))return!1;return!0}function isSameRouteLocationParamsValue(t,r){return isArray$3(t)?isEquivalentArray(t,r):isArray$3(r)?isEquivalentArray(r,t):t===r}function isEquivalentArray(t,r){return isArray$3(r)?t.length===r.length&&t.every((e,n)=>e===r[n]):t.length===1&&t[0]===r}function resolveRelativePath(t,r){if(t.startsWith("/"))return t;if(!t)return r;const e=r.split("/"),n=t.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let i=e.length-1,a,s;for(a=0;a<n.length;a++)if(s=n[a],s!==".")if(s==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const r=document.querySelector("base");t=r&&r.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,r){return t.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(t,r){const e=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:r.behavior,left:n.left-e.left-(r.left||0),top:n.top-e.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let r;if("el"in t){const e=t.el,n=typeof e=="string"&&e.startsWith("#"),o=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!o)return;r=getElementPosition(o,t)}else r=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.pageXOffset,r.top!=null?r.top:window.pageYOffset)}function getScrollKey(t,r){return(history.state?history.state.position-r:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,r){scrollPositions.set(t,r)}function getSavedScrollPosition(t){const r=scrollPositions.get(t);return scrollPositions.delete(t),r}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,r){const{pathname:e,search:n,hash:o}=r,i=t.indexOf("#");if(i>-1){let s=o.includes(t.slice(i))?t.slice(i).length:1,u=o.slice(s);return u[0]!=="/"&&(u="/"+u),stripBase(u,"")}return stripBase(e,t)+n+o}function useHistoryListeners(t,r,e,n){let o=[],i=[],a=null;const s=({state:v})=>{const g=createCurrentLocation(t,location),b=e.value,T=r.value;let _=0;if(v){if(e.value=g,r.value=v,a&&a===b){a=null;return}_=T?v.position-T.position:0}else n(g);o.forEach(y=>{y(e.value,b,{delta:_,type:NavigationType.pop,direction:_?_>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function u(){a=e.value}function c(v){o.push(v);const g=()=>{const b=o.indexOf(v);b>-1&&o.splice(b,1)};return i.push(g),g}function d(){const{history:v}=window;v.state&&v.replaceState(assign({},v.state,{scroll:computeScrollPosition()}),"")}function m(){for(const v of i)v();i=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:c,destroy:m}}function buildState(t,r,e,n=!1,o=!1){return{back:t,current:r,forward:e,replaced:n,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:r,location:e}=window,n={value:createCurrentLocation(t,e)},o={value:r.state};o.value||i(n.value,{back:null,current:n.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function i(u,c,d){const m=t.indexOf("#"),v=m>-1?(e.host&&document.querySelector("base")?t:t.slice(m))+u:createBaseLocation()+t+u;try{r[d?"replaceState":"pushState"](c,"",v),o.value=c}catch(g){console.error(g),e[d?"replace":"assign"](v)}}function a(u,c){const d=assign({},r.state,buildState(o.value.back,u,o.value.forward,!0),c,{position:o.value.position});i(u,d,!0),n.value=u}function s(u,c){const d=assign({},o.value,r.state,{forward:u,scroll:computeScrollPosition()});i(d.current,d,!0);const m=assign({},buildState(n.value,u,null),{position:d.position+1},c);i(u,m,!1),n.value=u}return{location:n,state:o,push:s,replace:a}}function createWebHistory(t){t=normalizeBase(t);const r=useHistoryStateNavigation(t),e=useHistoryListeners(t,r.state,r.location,r.replace);function n(i,a=!0){a||e.pauseListeners(),history.go(i)}const o=assign({location:"",base:t,go:n,createHref:createHref.bind(null,t)},r,e);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>r.state.value}),o}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,r){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(t,r){return t instanceof Error&&NavigationFailureSymbol in t&&(r==null||!!(t.type&r))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,r){const e=assign({},BASE_PATH_PARSER_OPTIONS,r),n=[];let o=e.start?"^":"";const i=[];for(const c of t){const d=c.length?[]:[90];e.strict&&!c.length&&(o+="/");for(let m=0;m<c.length;m++){const v=c[m];let g=40+(e.sensitive?.25:0);if(v.type===0)m||(o+="/"),o+=v.value.replace(REGEX_CHARS_RE,"\\$&"),g+=40;else if(v.type===1){const{value:b,repeatable:T,optional:_,regexp:y}=v;i.push({name:b,repeatable:T,optional:_});const O=y||BASE_PARAM_PATTERN;if(O!==BASE_PARAM_PATTERN){g+=10;try{new RegExp(`(${O})`)}catch(Ce){throw new Error(`Invalid custom RegExp for param "${b}" (${O}): `+Ce.message)}}let V=T?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;m||(V=_&&c.length<2?`(?:/${V})`:"/"+V),_&&(V+="?"),o+=V,g+=20,_&&(g+=-8),T&&(g+=-20),O===".*"&&(g+=-50)}d.push(g)}n.push(d)}if(e.strict&&e.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}e.strict||(o+="/?"),e.end?o+="$":e.strict&&(o+="(?:/|$)");const a=new RegExp(o,e.sensitive?"":"i");function s(c){const d=c.match(a),m={};if(!d)return null;for(let v=1;v<d.length;v++){const g=d[v]||"",b=i[v-1];m[b.name]=g&&b.repeatable?g.split("/"):g}return m}function u(c){let d="",m=!1;for(const v of t){(!m||!d.endsWith("/"))&&(d+="/"),m=!1;for(const g of v)if(g.type===0)d+=g.value;else if(g.type===1){const{value:b,repeatable:T,optional:_}=g,y=b in c?c[b]:"";if(isArray$3(y)&&!T)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const O=isArray$3(y)?y.join("/"):y;if(!O)if(_)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):m=!0);else throw new Error(`Missing required param "${b}"`);d+=O}}return d||"/"}return{re:a,score:n,keys:i,parse:s,stringify:u}}function compareScoreArray(t,r){let e=0;for(;e<t.length&&e<r.length;){const n=r[e]-t[e];if(n)return n;e++}return t.length<r.length?t.length===1&&t[0]===40+40?-1:1:t.length>r.length?r.length===1&&r[0]===40+40?1:-1:0}function comparePathParserScore(t,r){let e=0;const n=t.score,o=r.score;for(;e<n.length&&e<o.length;){const i=compareScoreArray(n[e],o[e]);if(i)return i;e++}if(Math.abs(o.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(o))return-1}return o.length-n.length}function isLastScoreNegative(t){const r=t[t.length-1];return t.length>0&&r[r.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function r(g){throw new Error(`ERR (${e})/"${c}": ${g}`)}let e=0,n=e;const o=[];let i;function a(){i&&o.push(i),i=[]}let s=0,u,c="",d="";function m(){c&&(e===0?i.push({type:0,value:c}):e===1||e===2||e===3?(i.length>1&&(u==="*"||u==="+")&&r(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):r("Invalid state to consume buffer"),c="")}function v(){c+=u}for(;s<t.length;){if(u=t[s++],u==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:u==="/"?(c&&m(),a()):u===":"?(m(),e=1):v();break;case 4:v(),e=n;break;case 1:u==="("?e=2:VALID_PARAM_RE.test(u)?v():(m(),e=0,u!=="*"&&u!=="?"&&u!=="+"&&s--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:e=3:d+=u;break;case 3:m(),e=0,u!=="*"&&u!=="?"&&u!=="+"&&s--,d="";break;default:r("Unknown state");break}}return e===2&&r(`Unfinished custom RegExp for param "${c}"`),m(),a(),o}function createRouteRecordMatcher(t,r,e){const n=tokensToParser(tokenizePath(t.path),e),o=assign(n,{record:t,parent:r,children:[],alias:[]});return r&&!o.record.aliasOf==!r.record.aliasOf&&r.children.push(o),o}function createRouterMatcher(t,r){const e=[],n=new Map;r=mergeOptions({strict:!1,end:!0,sensitive:!1},r);function o(d){return n.get(d)}function i(d,m,v){const g=!v,b=normalizeRouteRecord(d);b.aliasOf=v&&v.record;const T=mergeOptions(r,d),_=[b];if("alias"in d){const V=typeof d.alias=="string"?[d.alias]:d.alias;for(const Ce of V)_.push(assign({},b,{components:v?v.record.components:b.components,path:Ce,aliasOf:v?v.record:b}))}let y,O;for(const V of _){const{path:Ce}=V;if(m&&Ce[0]!=="/"){const ae=m.record.path,Fe=ae[ae.length-1]==="/"?"":"/";V.path=m.record.path+(Ce&&Fe+Ce)}if(y=createRouteRecordMatcher(V,m,T),v?v.alias.push(y):(O=O||y,O!==y&&O.alias.push(y),g&&d.name&&!isAliasRecord(y)&&a(d.name)),b.children){const ae=b.children;for(let Fe=0;Fe<ae.length;Fe++)i(ae[Fe],y,v&&v.children[Fe])}v=v||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&u(y)}return O?()=>{a(O)}:noop$2}function a(d){if(isRouteName(d)){const m=n.get(d);m&&(n.delete(d),e.splice(e.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=e.indexOf(d);m>-1&&(e.splice(m,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function s(){return e}function u(d){let m=0;for(;m<e.length&&comparePathParserScore(d,e[m])>=0&&(d.record.path!==e[m].record.path||!isRecordChildOf(d,e[m]));)m++;e.splice(m,0,d),d.record.name&&!isAliasRecord(d)&&n.set(d.record.name,d)}function c(d,m){let v,g={},b,T;if("name"in d&&d.name){if(v=n.get(d.name),!v)throw createRouterError(1,{location:d});T=v.record.name,g=assign(paramsFromLocation(m.params,v.keys.filter(O=>!O.optional).map(O=>O.name)),d.params&&paramsFromLocation(d.params,v.keys.map(O=>O.name))),b=v.stringify(g)}else if("path"in d)b=d.path,v=e.find(O=>O.re.test(b)),v&&(g=v.parse(b),T=v.record.name);else{if(v=m.name?n.get(m.name):e.find(O=>O.re.test(m.path)),!v)throw createRouterError(1,{location:d,currentLocation:m});T=v.record.name,g=assign({},m.params,d.params),b=v.stringify(g)}const _=[];let y=v;for(;y;)_.unshift(y.record),y=y.parent;return{name:T,path:b,params:g,matched:_,meta:mergeMetaFields(_)}}return t.forEach(d=>i(d)),{addRoute:i,resolve:c,removeRoute:a,getRoutes:s,getRecordMatcher:o}}function paramsFromLocation(t,r){const e={};for(const n of r)n in t&&(e[n]=t[n]);return e}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const r={},e=t.props||!1;if("component"in t)r.default=e;else for(const n in t.components)r[n]=typeof e=="object"?e[n]:e;return r}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((r,e)=>assign(r,e.meta),{})}function mergeOptions(t,r){const e={};for(const n in t)e[n]=n in r?r[n]:t[n];return e}function isRecordChildOf(t,r){return r.children.some(e=>e===t||isRecordChildOf(t,e))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const r={};if(t===""||t==="?")return r;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<n.length;++o){const i=n[o].replace(PLUS_RE," "),a=i.indexOf("="),s=decode(a<0?i:i.slice(0,a)),u=a<0?null:decode(i.slice(a+1));if(s in r){let c=r[s];isArray$3(c)||(c=r[s]=[c]),c.push(u)}else r[s]=u}return r}function stringifyQuery(t){let r="";for(let e in t){const n=t[e];if(e=encodeQueryKey(e),n==null){n!==void 0&&(r+=(r.length?"&":"")+e);continue}(isArray$3(n)?n.map(i=>i&&encodeQueryValue(i)):[n&&encodeQueryValue(n)]).forEach(i=>{i!==void 0&&(r+=(r.length?"&":"")+e,i!=null&&(r+="="+i))})}return r}function normalizeQuery(t){const r={};for(const e in t){const n=t[e];n!==void 0&&(r[e]=isArray$3(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function r(n){return t.push(n),()=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)}}function e(){t=[]}return{add:r,list:()=>t.slice(),reset:e}}function guardToPromiseFn(t,r,e,n,o){const i=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((a,s)=>{const u=m=>{m===!1?s(createRouterError(4,{from:e,to:r})):m instanceof Error?s(m):isRouteLocation(m)?s(createRouterError(2,{from:r,to:m})):(i&&n.enterCallbacks[o]===i&&typeof m=="function"&&i.push(m),a())},c=t.call(n&&n.instances[o],r,e,u);let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(m=>s(m))})}function extractComponentsGuards(t,r,e,n){const o=[];for(const i of t)for(const a in i.components){let s=i.components[a];if(!(r!=="beforeRouteEnter"&&!i.instances[a]))if(isRouteComponent(s)){const c=(s.__vccOpts||s)[r];c&&o.push(guardToPromiseFn(c,e,n,i,a))}else{let u=s();o.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${i.path}"`));const d=isESModule(c)?c.default:c;i.components[a]=d;const v=(d.__vccOpts||d)[r];return v&&guardToPromiseFn(v,e,n,i,a)()}))}}return o}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const r=inject(routerKey),e=inject(routeLocationKey),n=computed(()=>r.resolve(unref(t.to))),o=computed(()=>{const{matched:u}=n.value,{length:c}=u,d=u[c-1],m=e.matched;if(!d||!m.length)return-1;const v=m.findIndex(isSameRouteRecord.bind(null,d));if(v>-1)return v;const g=getOriginalPath(u[c-2]);return c>1&&getOriginalPath(d)===g&&m[m.length-1].path!==g?m.findIndex(isSameRouteRecord.bind(null,u[c-2])):v}),i=computed(()=>o.value>-1&&includesParams(e.params,n.value.params)),a=computed(()=>o.value>-1&&o.value===e.matched.length-1&&isSameRouteLocationParams(e.params,n.value.params));function s(u={}){return guardEvent(u)?r[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop$2):Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:i,isExactActive:a,navigate:s}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:r}){const e=reactive(useLink(t)),{options:n}=inject(routerKey),o=computed(()=>({[getLinkClass(t.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[getLinkClass(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=r.default&&r.default(e);return t.custom?i:h("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:o.value},i)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const r=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,r){for(const e in r){const n=r[e],o=t[e];if(typeof n=="string"){if(n!==o)return!1}else if(!isArray$3(o)||o.length!==n.length||n.some((i,a)=>i!==o[a]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,r,e)=>t??r??e,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:r,slots:e}){const n=inject(routerViewLocationKey),o=computed(()=>t.route||n.value),i=inject(viewDepthKey,0),a=computed(()=>{let c=unref(i);const{matched:d}=o.value;let m;for(;(m=d[c])&&!m.components;)c++;return c}),s=computed(()=>o.value.matched[a.value]);provide(viewDepthKey,computed(()=>a.value+1)),provide(matchedRouteKey,s),provide(routerViewLocationKey,o);const u=ref();return watch(()=>[u.value,s.value,t.name],([c,d,m],[v,g,b])=>{d&&(d.instances[m]=c,g&&g!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),c&&d&&(!g||!isSameRouteRecord(d,g)||!v)&&(d.enterCallbacks[m]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=o.value,d=t.name,m=s.value,v=m&&m.components[d];if(!v)return normalizeSlot(e.default,{Component:v,route:c});const g=m.props[d],b=g?g===!0?c.params:typeof g=="function"?g(c):g:null,_=h(v,assign({},b,r,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(m.instances[d]=null)},ref:u}));return normalizeSlot(e.default,{Component:_,route:c})||_}}});function normalizeSlot(t,r){if(!t)return null;const e=t(r);return e.length===1?e[0]:e}const RouterView=RouterViewImpl;function createRouter(t){const r=createRouterMatcher(t.routes,t),e=t.parseQuery||parseQuery,n=t.stringifyQuery||stringifyQuery,o=t.history,i=useCallbacks(),a=useCallbacks(),s=useCallbacks(),u=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=applyToParams.bind(null,$e=>""+$e),m=applyToParams.bind(null,encodeParam),v=applyToParams.bind(null,decode);function g($e,er){let or,ze;return isRouteName($e)?(or=r.getRecordMatcher($e),ze=er):ze=$e,r.addRoute(ze,or)}function b($e){const er=r.getRecordMatcher($e);er&&r.removeRoute(er)}function T(){return r.getRoutes().map($e=>$e.record)}function _($e){return!!r.getRecordMatcher($e)}function y($e,er){if(er=assign({},er||u.value),typeof $e=="string"){const cr=parseURL(e,$e,er.path),mr=r.resolve({path:cr.path},er),vr=o.createHref(cr.fullPath);return assign(cr,mr,{params:v(mr.params),hash:decode(cr.hash),redirectedFrom:void 0,href:vr})}let or;if("path"in $e)or=assign({},$e,{path:parseURL(e,$e.path,er.path).path});else{const cr=assign({},$e.params);for(const mr in cr)cr[mr]==null&&delete cr[mr];or=assign({},$e,{params:m(cr)}),er.params=m(er.params)}const ze=r.resolve(or,er),rr=$e.hash||"";ze.params=d(v(ze.params));const Et=stringifyURL(n,assign({},$e,{hash:encodeHash(rr),path:ze.path})),Lt=o.createHref(Et);return assign({fullPath:Et,hash:rr,query:n===stringifyQuery?normalizeQuery($e.query):$e.query||{}},ze,{redirectedFrom:void 0,href:Lt})}function O($e){return typeof $e=="string"?parseURL(e,$e,u.value.path):assign({},$e)}function V($e,er){if(c!==$e)return createRouterError(8,{from:er,to:$e})}function Ce($e){return _e($e)}function ae($e){return Ce(assign(O($e),{replace:!0}))}function Fe($e){const er=$e.matched[$e.matched.length-1];if(er&&er.redirect){const{redirect:or}=er;let ze=typeof or=="function"?or($e):or;return typeof ze=="string"&&(ze=ze.includes("?")||ze.includes("#")?ze=O(ze):{path:ze},ze.params={}),assign({query:$e.query,hash:$e.hash,params:"path"in ze?{}:$e.params},ze)}}function _e($e,er){const or=c=y($e),ze=u.value,rr=$e.state,Et=$e.force,Lt=$e.replace===!0,cr=Fe(or);if(cr)return _e(assign(O(cr),{state:typeof cr=="object"?assign({},rr,cr.state):rr,force:Et,replace:Lt}),er||or);const mr=or;mr.redirectedFrom=er;let vr;return!Et&&isSameRouteLocation(n,ze,or)&&(vr=createRouterError(16,{to:mr,from:ze}),pr(ze,ze,!0,!1)),(vr?Promise.resolve(vr):he(mr,ze)).catch(Tr=>isNavigationFailure(Tr)?isNavigationFailure(Tr,2)?Tr:dr(Tr):Dt(Tr,mr,ze)).then(Tr=>{if(Tr){if(isNavigationFailure(Tr,2))return _e(assign({replace:Lt},O(Tr.to),{state:typeof Tr.to=="object"?assign({},rr,Tr.to.state):rr,force:Et}),er||mr)}else Tr=le(mr,ze,!0,Lt,rr);return Ve(mr,ze,Tr),Tr})}function de($e,er){const or=V($e,er);return or?Promise.reject(or):Promise.resolve()}function oe($e){const er=Ne.values().next().value;return er&&typeof er.runWithContext=="function"?er.runWithContext($e):$e()}function he($e,er){let or;const[ze,rr,Et]=extractChangingRecords($e,er);or=extractComponentsGuards(ze.reverse(),"beforeRouteLeave",$e,er);for(const cr of ze)cr.leaveGuards.forEach(mr=>{or.push(guardToPromiseFn(mr,$e,er))});const Lt=de.bind(null,$e,er);return or.push(Lt),sr(or).then(()=>{or=[];for(const cr of i.list())or.push(guardToPromiseFn(cr,$e,er));return or.push(Lt),sr(or)}).then(()=>{or=extractComponentsGuards(rr,"beforeRouteUpdate",$e,er);for(const cr of rr)cr.updateGuards.forEach(mr=>{or.push(guardToPromiseFn(mr,$e,er))});return or.push(Lt),sr(or)}).then(()=>{or=[];for(const cr of Et)if(cr.beforeEnter)if(isArray$3(cr.beforeEnter))for(const mr of cr.beforeEnter)or.push(guardToPromiseFn(mr,$e,er));else or.push(guardToPromiseFn(cr.beforeEnter,$e,er));return or.push(Lt),sr(or)}).then(()=>($e.matched.forEach(cr=>cr.enterCallbacks={}),or=extractComponentsGuards(Et,"beforeRouteEnter",$e,er),or.push(Lt),sr(or))).then(()=>{or=[];for(const cr of a.list())or.push(guardToPromiseFn(cr,$e,er));return or.push(Lt),sr(or)}).catch(cr=>isNavigationFailure(cr,8)?cr:Promise.reject(cr))}function Ve($e,er,or){s.list().forEach(ze=>oe(()=>ze($e,er,or)))}function le($e,er,or,ze,rr){const Et=V($e,er);if(Et)return Et;const Lt=er===START_LOCATION_NORMALIZED,cr=isBrowser?history.state:{};or&&(ze||Lt?o.replace($e.fullPath,assign({scroll:Lt&&cr&&cr.scroll},rr)):o.push($e.fullPath,rr)),u.value=$e,pr($e,er,or,Lt),dr()}let ie;function Ie(){ie||(ie=o.listen(($e,er,or)=>{if(!nr.listening)return;const ze=y($e),rr=Fe(ze);if(rr){_e(assign(rr,{replace:!0}),ze).catch(noop$2);return}c=ze;const Et=u.value;isBrowser&&saveScrollPosition(getScrollKey(Et.fullPath,or.delta),computeScrollPosition()),he(ze,Et).catch(Lt=>isNavigationFailure(Lt,12)?Lt:isNavigationFailure(Lt,2)?(_e(Lt.to,ze).then(cr=>{isNavigationFailure(cr,20)&&!or.delta&&or.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop$2),Promise.reject()):(or.delta&&o.go(-or.delta,!1),Dt(Lt,ze,Et))).then(Lt=>{Lt=Lt||le(ze,Et,!1),Lt&&(or.delta&&!isNavigationFailure(Lt,8)?o.go(-or.delta,!1):or.type===NavigationType.pop&&isNavigationFailure(Lt,20)&&o.go(-1,!1)),Ve(ze,Et,Lt)}).catch(noop$2)}))}let pe=useCallbacks(),kt=useCallbacks(),Ue;function Dt($e,er,or){dr($e);const ze=kt.list();return ze.length?ze.forEach(rr=>rr($e,er,or)):console.error($e),Promise.reject($e)}function tr(){return Ue&&u.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise(($e,er)=>{pe.add([$e,er])})}function dr($e){return Ue||(Ue=!$e,Ie(),pe.list().forEach(([er,or])=>$e?or($e):er()),pe.reset()),$e}function pr($e,er,or,ze){const{scrollBehavior:rr}=t;if(!isBrowser||!rr)return Promise.resolve();const Et=!or&&getSavedScrollPosition(getScrollKey($e.fullPath,0))||(ze||!or)&&history.state&&history.state.scroll||null;return nextTick().then(()=>rr($e,er,Et)).then(Lt=>Lt&&scrollToPosition(Lt)).catch(Lt=>Dt(Lt,$e,er))}const ar=$e=>o.go($e);let hr;const Ne=new Set,nr={currentRoute:u,listening:!0,addRoute:g,removeRoute:b,hasRoute:_,getRoutes:T,resolve:y,options:t,push:Ce,replace:ae,go:ar,back:()=>ar(-1),forward:()=>ar(1),beforeEach:i.add,beforeResolve:a.add,afterEach:s.add,onError:kt.add,isReady:tr,install($e){const er=this;$e.component("RouterLink",RouterLink),$e.component("RouterView",RouterView),$e.config.globalProperties.$router=er,Object.defineProperty($e.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(u)}),isBrowser&&!hr&&u.value===START_LOCATION_NORMALIZED&&(hr=!0,Ce(o.location).catch(rr=>{}));const or={};for(const rr in START_LOCATION_NORMALIZED)Object.defineProperty(or,rr,{get:()=>u.value[rr],enumerable:!0});$e.provide(routerKey,er),$e.provide(routeLocationKey,shallowReactive(or)),$e.provide(routerViewLocationKey,u);const ze=$e.unmount;Ne.add($e),$e.unmount=function(){Ne.delete($e),Ne.size<1&&(c=START_LOCATION_NORMALIZED,ie&&ie(),ie=null,u.value=START_LOCATION_NORMALIZED,hr=!1,Ue=!1),ze()}}};function sr($e){return $e.reduce((er,or)=>er.then(()=>oe(or)),Promise.resolve())}return nr}function extractChangingRecords(t,r){const e=[],n=[],o=[],i=Math.max(r.matched.length,t.matched.length);for(let a=0;a<i;a++){const s=r.matched[a];s&&(t.matched.find(c=>isSameRouteRecord(c,s))?n.push(s):e.push(s));const u=t.matched[a];u&&(r.matched.find(c=>isSameRouteRecord(c,u))||o.push(u))}return[e,n,o]}function useRouter(){return inject(routerKey)}const isLeaf=t=>!t.getAttribute("aria-owns"),getSibling=(t,r,e)=>{const{parentNode:n}=t;if(!n)return null;const o=n.querySelectorAll(e),i=Array.prototype.indexOf.call(o,t);return o[i+r]||null},focusNode=t=>{t&&(t.focus(),!isLeaf(t)&&t.click())},composeEventHandlers=(t,r,{checkForDefaultPrevented:e=!0}={})=>o=>{const i=t==null?void 0:t(o);if(e===!1||!i)return r==null?void 0:r(o)};var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",noop$1=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,r){function e(...n){return new Promise((o,i)=>{Promise.resolve(t(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(o).catch(i)})}return e}function debounceFilter(t,r={}){let e,n,o=noop$1;const i=s=>{clearTimeout(s),o(),o=noop$1};return s=>{const u=resolveUnref(t),c=resolveUnref(r.maxWait);return e&&i(e),u<=0||c!==void 0&&c<=0?(n&&(i(n),n=null),Promise.resolve(s())):new Promise((d,m)=>{o=r.rejectOnCancel?m:d,c&&!n&&(n=setTimeout(()=>{e&&i(e),n=null,d(s())},c)),e=setTimeout(()=>{n&&i(n),n=null,d(s())},u)})}}function throttleFilter(t,r=!0,e=!0,n=!1){let o=0,i,a=!0,s=noop$1,u;const c=()=>{i&&(clearTimeout(i),i=void 0,s(),s=noop$1)};return m=>{const v=resolveUnref(t),g=Date.now()-o,b=()=>u=m();return c(),v<=0?(o=Date.now(),b()):(g>v&&(e||!a)?(o=Date.now(),b()):r&&(u=new Promise((T,_)=>{s=n?_:T,i=setTimeout(()=>{o=Date.now(),a=!0,T(b()),c()},Math.max(0,v-g))})),!e&&!i&&(i=setTimeout(()=>a=!0,v)),a=!1,u)}}function identity$1(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function useDebounceFn(t,r=200,e={}){return createFilterWrapper(debounceFilter(r,e),t)}function refDebounced(t,r=200,e={}){const n=ref(t.value),o=useDebounceFn(()=>{n.value=t.value},r,e);return watch(t,()=>o()),n}function useThrottleFn(t,r=200,e=!1,n=!0,o=!1){return createFilterWrapper(throttleFilter(r,e,n,o),t)}function tryOnMounted(t,r=!0){getCurrentInstance()?onMounted(t):r?t():nextTick(t)}function useTimeoutFn(t,r,e={}){const{immediate:n=!0}=e,o=ref(!1);let i=null;function a(){i&&(clearTimeout(i),i=null)}function s(){o.value=!1,a()}function u(...c){a(),o.value=!0,i=setTimeout(()=>{o.value=!1,i=null,t(...c)},resolveUnref(r))}return n&&(o.value=!0,isClient&&u()),tryOnScopeDispose(s),{isPending:readonly(o),start:u,stop:s}}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let r,e,n,o;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,o]=t,r=defaultWindow):[r,e,n,o]=t,!r)return noop$1;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const i=[],a=()=>{i.forEach(d=>d()),i.length=0},s=(d,m,v,g)=>(d.addEventListener(m,v,g),()=>d.removeEventListener(m,v,g)),u=watch(()=>[unrefElement(r),resolveUnref(o)],([d,m])=>{a(),d&&i.push(...e.flatMap(v=>n.map(g=>s(d,v,g,m))))},{immediate:!0,flush:"post"}),c=()=>{u(),a()};return tryOnScopeDispose(c),c}let _iOSWorkaround=!1;function onClickOutside(t,r,e={}){const{window:n=defaultWindow,ignore:o=[],capture:i=!0,detectIframe:a=!1}=e;if(!n)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(n.document.body.children).forEach(v=>v.addEventListener("click",noop$1)));let s=!0;const u=v=>o.some(g=>{if(typeof g=="string")return Array.from(n.document.querySelectorAll(g)).some(b=>b===v.target||v.composedPath().includes(b));{const b=unrefElement(g);return b&&(v.target===b||v.composedPath().includes(b))}}),d=[useEventListener(n,"click",v=>{const g=unrefElement(t);if(!(!g||g===v.target||v.composedPath().includes(g))){if(v.detail===0&&(s=!u(v)),!s){s=!0;return}r(v)}},{passive:!0,capture:i}),useEventListener(n,"pointerdown",v=>{const g=unrefElement(t);g&&(s=!v.composedPath().includes(g)&&!u(v))},{passive:!0}),a&&useEventListener(n,"blur",v=>{var g;const b=unrefElement(t);((g=n.document.activeElement)==null?void 0:g.tagName)==="IFRAME"&&!(b!=null&&b.contains(n.document.activeElement))&&r(v)})].filter(Boolean);return()=>d.forEach(v=>v())}function useSupported(t,r=!1){const e=ref(),n=()=>e.value=!!t();return n(),tryOnMounted(n,r),e}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};function useCssVar(t,r,{window:e=defaultWindow,initialValue:n=""}={}){const o=ref(n),i=computed(()=>{var a;return unrefElement(r)||((a=e==null?void 0:e.document)==null?void 0:a.documentElement)});return watch([i,()=>resolveUnref(t)],([a,s])=>{var u;if(a&&e){const c=(u=e.getComputedStyle(a).getPropertyValue(s))==null?void 0:u.trim();o.value=c||n}},{immediate:!0}),watch(o,a=>{var s;(s=i.value)!=null&&s.style&&i.value.style.setProperty(resolveUnref(t),a)}),o}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(t,r)=>{var e={};for(var n in t)__hasOwnProp$g.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$g)for(var n of __getOwnPropSymbols$g(t))r.indexOf(n)<0&&__propIsEnum$g.call(t,n)&&(e[n]=t[n]);return e};function useResizeObserver(t,r,e={}){const n=e,{window:o=defaultWindow}=n,i=__objRest$2(n,["window"]);let a;const s=useSupported(()=>o&&"ResizeObserver"in o),u=()=>{a&&(a.disconnect(),a=void 0)},c=watch(()=>unrefElement(t),m=>{u(),s.value&&o&&m&&(a=new ResizeObserver(r),a.observe(m,i))},{immediate:!0,flush:"post"}),d=()=>{u(),c()};return tryOnScopeDispose(d),{isSupported:s,stop:d}}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(t,r,e,n={}){var o,i,a;const{clone:s=!1,passive:u=!1,eventName:c,deep:d=!1,defaultValue:m}=n,v=getCurrentInstance(),g=e||(v==null?void 0:v.emit)||((o=v==null?void 0:v.$emit)==null?void 0:o.bind(v))||((a=(i=v==null?void 0:v.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(v==null?void 0:v.proxy));let b=c;r||(r="modelValue"),b=c||b||`update:${r.toString()}`;const T=y=>s?isFunction$2(s)?s(y):cloneFnJSON(y):y,_=()=>isDef(t[r])?T(t[r]):m;if(u){const y=_(),O=ref(y);return watch(()=>t[r],V=>O.value=T(V)),watch(O,V=>{(V!==t[r]||d)&&g(b,V)},{deep:d}),O}else return computed({get(){return _()},set(y){g(b,y)}})}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(t,r)=>{if(!isClient||!t||!r)return!1;const e=t.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var r=hasOwnProperty$c.call(t,symToStringTag$1),e=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var n=!0}catch{}var o=nativeObjectToString$1.call(t);return n&&(r?t[symToStringTag$1]=e:delete t[symToStringTag$1]),o}var objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$3="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$3}function arrayMap(t,r){for(var e=-1,n=t==null?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var r=t+"";return r=="0"&&1/t==-INFINITY$3?"-0":r}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var r=t.length;r--&&reWhitespace.test(t.charAt(r)););return r}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject$1(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){if(!t)return t===0?t:0;if(t=toNumber(t),t===INFINITY$2||t===-INFINITY$2){var r=t<0?-1:1;return r*MAX_INTEGER}return t===t?t:0}function toInteger(t){var r=toFinite(t),e=r%1;return r===r?e?r-e:r:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var r=baseGetTag(t);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(t){if(t!=null){try{return funcToString$1.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$c=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$b=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var r=isFunction$1(t)?reIsNative:reIsHostCtor;return r.test(toSource(t))}function getValue$1(t,r){return t==null?void 0:t[r]}function getNative(t,r){var e=getValue$1(t,r);return baseIsNative(e)?e:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function t(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const baseCreate$1=baseCreate;function apply(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function copyArray(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var r=0,e=0;return function(){var n=nativeNow(),o=HOT_SPAN-(n-e);if(e=n,o>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(t,r){return defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function baseFindIndex(t,r,e,n){for(var o=t.length,i=e+(n?1:-1);n?i--:++i<o;)if(r(t[i],i,t))return i;return-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,r){var e=typeof t;return r=r??MAX_SAFE_INTEGER$1,!!r&&(e=="number"||e!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<r}function baseAssignValue(t,r,e){r=="__proto__"&&defineProperty$1?defineProperty$1(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eq(t,r){return t===r||t!==t&&r!==r}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function assignValue(t,r,e){var n=t[r];(!(hasOwnProperty$a.call(t,r)&&eq(n,e))||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function copyObject(t,r,e,n){var o=!e;e||(e={});for(var i=-1,a=r.length;++i<a;){var s=r[i],u=n?n(e[s],t[s],s,e,t):void 0;u===void 0&&(u=t[s]),o?baseAssignValue(e,s,u):assignValue(e,s,u)}return e}var nativeMax$2=Math.max;function overRest(t,r,e){return r=nativeMax$2(r===void 0?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=nativeMax$2(n.length-r,0),a=Array(i);++o<i;)a[o]=n[r+o];o=-1;for(var s=Array(r+1);++o<r;)s[o]=n[o];return s[r]=e(a),apply(t,this,s)}}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}var objectProto$a=Object.prototype;function isPrototype(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||objectProto$a;return t===e}function baseTimes(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var argsTag$3="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$3}var objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$9.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(r){return t(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function arrayLikeKeys(t,r){var e=isArray$2(t),n=!e&&isArguments$1(t),o=!e&&!n&&isBuffer$2(t),i=!e&&!n&&!o&&isTypedArray$2(t),a=e||n||o||i,s=a?baseTimes(t.length,String):[],u=s.length;for(var c in t)(r||hasOwnProperty$8.call(t,c))&&!(a&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||isIndex(c,u)))&&s.push(c);return s}function overArg(t,r){return function(e){return t(r(e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var r=[];for(var e in Object(t))hasOwnProperty$7.call(t,e)&&e!="constructor"&&r.push(e);return r}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function nativeKeysIn(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var r=isPrototype(t),e=[];for(var n in t)n=="constructor"&&(r||!hasOwnProperty$6.call(t,n))||e.push(n);return e}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,r){if(isArray$2(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||r!=null&&t in Object(r)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashGet(t){var r=this.__data__;if(nativeCreate$1){var e=r[t];return e===HASH_UNDEFINED$2?void 0:e}return hasOwnProperty$5.call(r,t)?r[t]:void 0}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function hashHas(t){var r=this.__data__;return nativeCreate$1?r[t]!==void 0:hasOwnProperty$4.call(r,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,r){for(var e=t.length;e--;)if(eq(t[e][0],r))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var r=this.__data__,e=assocIndexOf(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():splice.call(r,e,1),--this.size,!0}function listCacheGet(t){var r=this.__data__,e=assocIndexOf(r,t);return e<0?void 0:r[e][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,r){var e=this.__data__,n=assocIndexOf(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function ListCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function getMapData(t,r){var e=t.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function mapCacheDelete(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,r){var e=getMapData(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function MapCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return e.cache=i.set(o,a)||i,a};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var r=memoize(t,function(n){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),n}),e=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(rePropName,function(e,n,o,i){r.push(o?i.replace(reEscapeChar,"$1"):n||e)}),r});const stringToPath$1=stringToPath;function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,r){return isArray$2(t)?t:isKey(t,r)?[t]:stringToPath$1(toString$1(t))}var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var r=t+"";return r=="0"&&1/t==-INFINITY$1?"-0":r}function baseGet(t,r){r=castPath(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[toKey(r[e++])];return e&&e==n?t:void 0}function get(t,r,e){var n=t==null?void 0:baseGet(t,r);return n===void 0?e:n}function arrayPush(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(t){return isArray$2(t)||isArguments$1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function baseFlatten(t,r,e,n,o){var i=-1,a=t.length;for(e||(e=isFlattenable),o||(o=[]);++i<a;){var s=t[i];r>0&&e(s)?r>1?baseFlatten(s,r-1,e,n,o):arrayPush(o,s):n||(o[o.length]=s)}return o}function flatten(t){var r=t==null?0:t.length;return r?baseFlatten(t,1):[]}function flatRest(t){return setToString$1(overRest(t,void 0,flatten),t+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;function castArray$1(){if(!arguments.length)return[];var t=arguments[0];return isArray$2(t)?t:[t]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,r){var e=this.__data__;if(e instanceof ListCache){var n=e.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new MapCache(n)}return e.set(t,r),this.size=e.size,this}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(t,r){return t&&copyObject(r,keys(r),t)}function baseAssignIn(t,r){return t&&copyObject(r,keysIn(r),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,r){if(r)return t.slice();var e=t.length,n=allocUnsafe?allocUnsafe(e):new t.constructor(e);return t.copy(n),n}function arrayFilter(t,r){for(var e=-1,n=t==null?0:t.length,o=0,i=[];++e<n;){var a=t[e];r(a,e,t)&&(i[o++]=a)}return i}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(r){return propertyIsEnumerable.call(t,r)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,r){return copyObject(t,getSymbols$1(t),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var r=[];t;)arrayPush(r,getSymbols$1(t)),t=getPrototype$1(t);return r}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,r){return copyObject(t,getSymbolsIn$1(t),r)}function baseGetAllKeys(t,r,e){var n=r(t);return isArray$2(t)?n:arrayPush(n,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView=getNative(root$1,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var r=baseGetTag(t),e=r==objectTag$2?t.constructor:void 0,n=e?toSource(e):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return r});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&hasOwnProperty$3.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(t)),r}function cloneDataView(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var r=new t.constructor(t.source,reFlags.exec(t));return r.lastIndex=t.lastIndex,r}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf$1?Object(symbolValueOf$1.call(t)):{}}function cloneTypedArray(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,r,e){var n=t.constructor;switch(r){case arrayBufferTag$2:return cloneArrayBuffer(t);case boolTag$2:case dateTag$2:return new n(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(t);case regexpTag$2:return cloneRegExp(t);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(t)}}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$2="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$2="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,r,e,n,o,i){var a,s=r&CLONE_DEEP_FLAG$1,u=r&CLONE_FLAT_FLAG,c=r&CLONE_SYMBOLS_FLAG$2;if(e&&(a=o?e(t,n,o,i):e(t)),a!==void 0)return a;if(!isObject$1(t))return t;var d=isArray$2(t);if(d){if(a=initCloneArray(t),!s)return copyArray(t,a)}else{var m=getTag$1(t),v=m==funcTag||m==genTag;if(isBuffer$2(t))return cloneBuffer(t,s);if(m==objectTag$1||m==argsTag$1||v&&!o){if(a=u||v?{}:initCloneObject(t),!s)return u?copySymbolsIn(t,baseAssignIn(a,t)):copySymbols(t,baseAssign(a,t))}else{if(!cloneableTags[m])return o?t:{};a=initCloneByTag(t,m,s)}}i||(i=new Stack);var g=i.get(t);if(g)return g;i.set(t,a),isSet$1(t)?t.forEach(function(_){a.add(baseClone(_,r,e,_,t,i))}):isMap$1(t)&&t.forEach(function(_,y){a.set(y,baseClone(_,r,e,y,t,i))});var b=c?u?getAllKeysIn:getAllKeys:u?keysIn:keys,T=d?void 0:b(t);return arrayEach(T||t,function(_,y){T&&(y=_,_=t[y]),assignValue(a,y,baseClone(_,r,e,y,t,i))}),a}var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new MapCache;++r<e;)this.add(t[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function cacheHas(t,r){return t.has(r)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,r,e,n,o,i){var a=e&COMPARE_PARTIAL_FLAG$5,s=t.length,u=r.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(t),d=i.get(r);if(c&&d)return c==r&&d==t;var m=-1,v=!0,g=e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(i.set(t,r),i.set(r,t);++m<s;){var b=t[m],T=r[m];if(n)var _=a?n(T,b,m,r,t,i):n(b,T,m,t,r,i);if(_!==void 0){if(_)continue;v=!1;break}if(g){if(!arraySome(r,function(y,O){if(!cacheHas(g,O)&&(b===y||o(b,y,e,n,i)))return g.push(O)})){v=!1;break}}else if(!(b===T||o(b,T,e,n,i))){v=!1;break}}return i.delete(t),i.delete(r),v}function mapToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n,o){e[++r]=[o,n]}),e}function setToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,r,e,n,o,i,a){switch(e){case dataViewTag:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case arrayBufferTag:return!(t.byteLength!=r.byteLength||!i(new Uint8Array$2(t),new Uint8Array$2(r)));case boolTag:case dateTag:case numberTag:return eq(+t,+r);case errorTag:return t.name==r.name&&t.message==r.message;case regexpTag:case stringTag:return t==r+"";case mapTag:var s=mapToArray;case setTag:var u=n&COMPARE_PARTIAL_FLAG$4;if(s||(s=setToArray),t.size!=r.size&&!u)return!1;var c=a.get(t);if(c)return c==r;n|=COMPARE_UNORDERED_FLAG$2,a.set(t,r);var d=equalArrays(s(t),s(r),n,o,i,a);return a.delete(t),d;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,r,e,n,o,i){var a=e&COMPARE_PARTIAL_FLAG$3,s=getAllKeys(t),u=s.length,c=getAllKeys(r),d=c.length;if(u!=d&&!a)return!1;for(var m=u;m--;){var v=s[m];if(!(a?v in r:hasOwnProperty$2.call(r,v)))return!1}var g=i.get(t),b=i.get(r);if(g&&b)return g==r&&b==t;var T=!0;i.set(t,r),i.set(r,t);for(var _=a;++m<u;){v=s[m];var y=t[v],O=r[v];if(n)var V=a?n(O,y,v,r,t,i):n(y,O,v,t,r,i);if(!(V===void 0?y===O||o(y,O,e,n,i):V)){T=!1;break}_||(_=v=="constructor")}if(T&&!_){var Ce=t.constructor,ae=r.constructor;Ce!=ae&&"constructor"in t&&"constructor"in r&&!(typeof Ce=="function"&&Ce instanceof Ce&&typeof ae=="function"&&ae instanceof ae)&&(T=!1)}return i.delete(t),i.delete(r),T}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,r,e,n,o,i){var a=isArray$2(t),s=isArray$2(r),u=a?arrayTag:getTag$1(t),c=s?arrayTag:getTag$1(r);u=u==argsTag?objectTag:u,c=c==argsTag?objectTag:c;var d=u==objectTag,m=c==objectTag,v=u==c;if(v&&isBuffer$2(t)){if(!isBuffer$2(r))return!1;a=!0,d=!1}if(v&&!d)return i||(i=new Stack),a||isTypedArray$2(t)?equalArrays(t,r,e,n,o,i):equalByTag(t,r,u,e,n,o,i);if(!(e&COMPARE_PARTIAL_FLAG$2)){var g=d&&hasOwnProperty$1.call(t,"__wrapped__"),b=m&&hasOwnProperty$1.call(r,"__wrapped__");if(g||b){var T=g?t.value():t,_=b?r.value():r;return i||(i=new Stack),o(T,_,e,n,i)}}return v?(i||(i=new Stack),equalObjects(t,r,e,n,o,i)):!1}function baseIsEqual(t,r,e,n,o){return t===r?!0:t==null||r==null||!isObjectLike(t)&&!isObjectLike(r)?t!==t&&r!==r:baseIsEqualDeep(t,r,e,n,baseIsEqual,o)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,r,e,n){var o=e.length,i=o,a=!n;if(t==null)return!i;for(t=Object(t);o--;){var s=e[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){s=e[o];var u=s[0],c=t[u],d=s[1];if(a&&s[2]){if(c===void 0&&!(u in t))return!1}else{var m=new Stack;if(n)var v=n(c,d,u,t,r,m);if(!(v===void 0?baseIsEqual(d,c,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,m):v))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var r=keys(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,isStrictComparable(o)]}return r}function matchesStrictComparable(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function baseMatches(t){var r=getMatchData(t);return r.length==1&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||baseIsMatch(e,t,r)}}function baseHasIn(t,r){return t!=null&&r in Object(t)}function hasPath(t,r,e){r=castPath(r,t);for(var n=-1,o=r.length,i=!1;++n<o;){var a=toKey(r[n]);if(!(i=t!=null&&e(t,a)))break;t=t[a]}return i||++n!=o?i:(o=t==null?0:t.length,!!o&&isLength(o)&&isIndex(a,o)&&(isArray$2(t)||isArguments$1(t)))}function hasIn(t,r){return t!=null&&hasPath(t,r,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,r){return isKey(t)&&isStrictComparable(r)?matchesStrictComparable(toKey(t),r):function(e){var n=get(e,t);return n===void 0&&n===r?hasIn(e,t):baseIsEqual(r,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(r){return r==null?void 0:r[t]}}function basePropertyDeep(t){return function(r){return baseGet(r,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$2(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(t,r,e){var n,o,i,a,s,u,c=0,d=!1,m=!1,v=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);r=toNumber(r)||0,isObject$1(e)&&(d=!!e.leading,m="maxWait"in e,i=m?nativeMax$1(toNumber(e.maxWait)||0,r):i,v="trailing"in e?!!e.trailing:v);function g(Fe){var _e=n,de=o;return n=o=void 0,c=Fe,a=t.apply(de,_e),a}function b(Fe){return c=Fe,s=setTimeout(y,r),d?g(Fe):a}function T(Fe){var _e=Fe-u,de=Fe-c,oe=r-_e;return m?nativeMin$1(oe,i-de):oe}function _(Fe){var _e=Fe-u,de=Fe-c;return u===void 0||_e>=r||_e<0||m&&de>=i}function y(){var Fe=now$1();if(_(Fe))return O(Fe);s=setTimeout(y,T(Fe))}function O(Fe){return s=void 0,v&&n?g(Fe):(n=o=void 0,a)}function V(){s!==void 0&&clearTimeout(s),c=0,n=u=o=s=void 0}function Ce(){return s===void 0?a:O(now$1())}function ae(){var Fe=now$1(),_e=_(Fe);if(n=arguments,o=this,u=Fe,_e){if(s===void 0)return b(u);if(m)return clearTimeout(s),s=setTimeout(y,r),g(u)}return s===void 0&&(s=setTimeout(y,r)),a}return ae.cancel=V,ae.flush=Ce,ae}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var o=n-1;return e!==void 0&&(o=toInteger(e),o=e<0?nativeMax(n+o,0):nativeMin(o,n-1)),baseFindIndex(t,baseIteratee(r),o,!0)}var INFINITY=1/0;function flattenDeep(t){var r=t==null?0:t.length;return r?baseFlatten(t,INFINITY):[]}function fromPairs(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var o=t[r];n[o[0]]=o[1]}return n}function isEqual(t,r){return baseIsEqual(t,r)}function isNil(t){return t==null}function isUndefined$2(t){return t===void 0}function baseSet(t,r,e,n){if(!isObject$1(t))return t;r=castPath(r,t);for(var o=-1,i=r.length,a=i-1,s=t;s!=null&&++o<i;){var u=toKey(r[o]),c=e;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(o!=a){var d=s[u];c=n?n(d,u,s):void 0,c===void 0&&(c=isObject$1(d)?d:isIndex(r[o+1])?[]:{})}assignValue(s,u,c),s=s[u]}return t}function basePickBy(t,r,e){for(var n=-1,o=r.length,i={};++n<o;){var a=r[n],s=baseGet(t,a);e(s,a)&&baseSet(i,castPath(a,t),s)}return i}function basePick(t,r){return basePickBy(t,r,function(e,n){return hasIn(t,n)})}var pick=flatRest(function(t,r){return t==null?{}:basePick(t,r)});const pick$1=pick;function set(t,r,e){return t==null?t:baseSet(t,r,e)}var FUNC_ERROR_TEXT="Expected a function";function throttle(t,r,e){var n=!0,o=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(e)&&(n="leading"in e?!!e.leading:n,o="trailing"in e?!!e.trailing:o),debounce(t,r,{leading:n,maxWait:r,trailing:o})}const isUndefined$1=t=>t===void 0,isBoolean$1=t=>typeof t=="boolean",isNumber$1=t=>typeof t=="number",isEmpty=t=>!t&&t!==0||isArray$4(t)&&t.length===0||isObject$2(t)&&!Object.keys(t).length,isElement=t=>typeof Element>"u"?!1:t instanceof Element,isStringNumber=t=>isString$2(t)?!Number.isNaN(Number(t)):!1,escapeStringRegexp=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=t=>capitalize$1(t),keysOf=t=>Object.keys(t),entriesOf=t=>Object.entries(t),getProp=(t,r,e)=>({get value(){return get(t,r,e)},set value(n){set(t,r,n)}});class ElementPlusError extends Error{constructor(r){super(r),this.name="ElementPlusError"}}function throwError(t,r){throw new ElementPlusError(`[${t}] ${r}`)}function debugWarn(t,r){}const classNameToArray=(t="")=>t.split(" ").filter(r=>!!r.trim()),hasClass=(t,r)=>{if(!t||!r)return!1;if(r.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(r)},addClass=(t,r)=>{!t||!r.trim()||t.classList.add(...classNameToArray(r))},removeClass=(t,r)=>{!t||!r.trim()||t.classList.remove(...classNameToArray(r))},getStyle=(t,r)=>{var e;if(!isClient||!t||!r)return"";let n=camelize(r);n==="float"&&(n="cssFloat");try{const o=t.style[n];if(o)return o;const i=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return i?i[n]:""}catch{return t.style[n]}};function addUnit(t,r="px"){if(!t)return"";if(isNumber$1(t)||isStringNumber(t))return`${t}${r}`;if(isString$2(t))return t}const isScroll=(t,r)=>{if(!isClient)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],n=getStyle(t,e);return["scroll","auto","overlay"].some(o=>n.includes(o))},getScrollContainer=(t,r)=>{if(!isClient)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(isScroll(e,r))return e;e=e.parentNode}return e};let scrollBarWidth;const getScrollBarWidth=t=>{var r;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",e.appendChild(o);const i=o.offsetWidth;return(r=e.parentNode)==null||r.removeChild(e),scrollBarWidth=n-i,scrollBarWidth};function scrollIntoView(t,r){if(!isClient)return;if(!r){t.scrollTop=0;return}const e=[];let n=r.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const o=r.offsetTop+e.reduce((u,c)=>u+c.offsetTop,0),i=o+r.offsetHeight,a=t.scrollTop,s=a+t.clientHeight;o<a?t.scrollTop=o:i>s&&(t.scrollTop=i-t.clientHeight)}/*! Element Plus Icons Vue v2.1.0 */var export_helper_default=(t,r)=>{let e=t.__vccOpts||t;for(let[n,o]of r)e[n]=o;return e},arrow_down_vue_vue_type_script_lang_default={name:"ArrowDown"},_hoisted_16$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_26=createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),_hoisted_36=[_hoisted_26];function _sfc_render6(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_16$1,_hoisted_36)}var arrow_down_default=export_helper_default(arrow_down_vue_vue_type_script_lang_default,[["render",_sfc_render6],["__file","arrow-down.vue"]]),arrow_left_vue_vue_type_script_lang_default={name:"ArrowLeft"},_hoisted_18$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_28=createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_38=[_hoisted_28];function _sfc_render8(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_18$1,_hoisted_38)}var arrow_left_default=export_helper_default(arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render8],["__file","arrow-left.vue"]]),arrow_right_vue_vue_type_script_lang_default={name:"ArrowRight"},_hoisted_110={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_210=createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_310=[_hoisted_210];function _sfc_render10(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_110,_hoisted_310)}var arrow_right_default=export_helper_default(arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render10],["__file","arrow-right.vue"]]),check_vue_vue_type_script_lang_default={name:"Check"},_hoisted_143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_243=createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),_hoisted_342=[_hoisted_243];function _sfc_render43(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_143,_hoisted_342)}var check_default=export_helper_default(check_vue_vue_type_script_lang_default,[["render",_sfc_render43],["__file","check.vue"]]),circle_check_vue_vue_type_script_lang_default={name:"CircleCheck"},_hoisted_149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_249=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_348=createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),_hoisted_415=[_hoisted_249,_hoisted_348];function _sfc_render49(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_149,_hoisted_415)}var circle_check_default=export_helper_default(circle_check_vue_vue_type_script_lang_default,[["render",_sfc_render49],["__file","circle-check.vue"]]),circle_close_filled_vue_vue_type_script_lang_default={name:"CircleCloseFilled"},_hoisted_150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_250=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),_hoisted_349=[_hoisted_250];function _sfc_render50(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_150,_hoisted_349)}var circle_close_filled_default=export_helper_default(circle_close_filled_vue_vue_type_script_lang_default,[["render",_sfc_render50],["__file","circle-close-filled.vue"]]),circle_close_vue_vue_type_script_lang_default={name:"CircleClose"},_hoisted_151={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_251=createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),_hoisted_350=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_416=[_hoisted_251,_hoisted_350];function _sfc_render51(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_151,_hoisted_416)}var circle_close_default=export_helper_default(circle_close_vue_vue_type_script_lang_default,[["render",_sfc_render51],["__file","circle-close.vue"]]),close_vue_vue_type_script_lang_default={name:"Close"},_hoisted_156={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_256=createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),_hoisted_355=[_hoisted_256];function _sfc_render56(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_156,_hoisted_355)}var close_default=export_helper_default(close_vue_vue_type_script_lang_default,[["render",_sfc_render56],["__file","close.vue"]]),delete_vue_vue_type_script_lang_default={name:"Delete"},_hoisted_180={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_280=createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),_hoisted_379=[_hoisted_280];function _sfc_render80(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_180,_hoisted_379)}var delete_default=export_helper_default(delete_vue_vue_type_script_lang_default,[["render",_sfc_render80],["__file","delete.vue"]]),document_vue_vue_type_script_lang_default={name:"Document"},_hoisted_190={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_290=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_389=[_hoisted_290];function _sfc_render90(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_190,_hoisted_389)}var document_default=export_helper_default(document_vue_vue_type_script_lang_default,[["render",_sfc_render90],["__file","document.vue"]]),edit_vue_vue_type_script_lang_default={name:"Edit"},_hoisted_194={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_294=createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),_hoisted_393=createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),_hoisted_431=[_hoisted_294,_hoisted_393];function _sfc_render94(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_194,_hoisted_431)}var edit_default=export_helper_default(edit_vue_vue_type_script_lang_default,[["render",_sfc_render94],["__file","edit.vue"]]),full_screen_vue_vue_type_script_lang_default={name:"FullScreen"},_hoisted_1118={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2118=createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),_hoisted_3117=[_hoisted_2118];function _sfc_render118(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1118,_hoisted_3117)}var full_screen_default=export_helper_default(full_screen_vue_vue_type_script_lang_default,[["render",_sfc_render118],["__file","full-screen.vue"]]),hide_vue_vue_type_script_lang_default={name:"Hide"},_hoisted_1133={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2133=createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),_hoisted_3132=createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),_hoisted_438=[_hoisted_2133,_hoisted_3132];function _sfc_render133(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1133,_hoisted_438)}var hide_default=export_helper_default(hide_vue_vue_type_script_lang_default,[["render",_sfc_render133],["__file","hide.vue"]]),info_filled_vue_vue_type_script_lang_default={name:"InfoFilled"},_hoisted_1143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2143=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),_hoisted_3142=[_hoisted_2143];function _sfc_render143(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1143,_hoisted_3142)}var info_filled_default=export_helper_default(info_filled_vue_vue_type_script_lang_default,[["render",_sfc_render143],["__file","info-filled.vue"]]),loading_vue_vue_type_script_lang_default={name:"Loading"},_hoisted_1150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2150=createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),_hoisted_3149=[_hoisted_2150];function _sfc_render150(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1150,_hoisted_3149)}var loading_default=export_helper_default(loading_vue_vue_type_script_lang_default,[["render",_sfc_render150],["__file","loading.vue"]]),plus_vue_vue_type_script_lang_default={name:"Plus"},_hoisted_1201={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2201=createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),_hoisted_3200=[_hoisted_2201];function _sfc_render201(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1201,_hoisted_3200)}var plus_default=export_helper_default(plus_vue_vue_type_script_lang_default,[["render",_sfc_render201],["__file","plus.vue"]]),refresh_left_vue_vue_type_script_lang_default={name:"RefreshLeft"},_hoisted_1215={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2215=createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),_hoisted_3214=[_hoisted_2215];function _sfc_render215(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1215,_hoisted_3214)}var refresh_left_default=export_helper_default(refresh_left_vue_vue_type_script_lang_default,[["render",_sfc_render215],["__file","refresh-left.vue"]]),refresh_right_vue_vue_type_script_lang_default={name:"RefreshRight"},_hoisted_1216={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2216=createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),_hoisted_3215=[_hoisted_2216];function _sfc_render216(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1216,_hoisted_3215)}var refresh_right_default=export_helper_default(refresh_right_vue_vue_type_script_lang_default,[["render",_sfc_render216],["__file","refresh-right.vue"]]),scale_to_original_vue_vue_type_script_lang_default={name:"ScaleToOriginal"},_hoisted_1222={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2222=createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),_hoisted_3221=[_hoisted_2222];function _sfc_render222(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1222,_hoisted_3221)}var scale_to_original_default=export_helper_default(scale_to_original_vue_vue_type_script_lang_default,[["render",_sfc_render222],["__file","scale-to-original.vue"]]),search_vue_vue_type_script_lang_default={name:"Search"},_hoisted_1225={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2225=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),_hoisted_3224=[_hoisted_2225];function _sfc_render225(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1225,_hoisted_3224)}var search_default=export_helper_default(search_vue_vue_type_script_lang_default,[["render",_sfc_render225],["__file","search.vue"]]),setting_vue_vue_type_script_lang_default={name:"Setting"},_hoisted_1231={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2231=createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"},null,-1),_hoisted_3230=[_hoisted_2231];function _sfc_render231(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1231,_hoisted_3230)}var setting_default=export_helper_default(setting_vue_vue_type_script_lang_default,[["render",_sfc_render231],["__file","setting.vue"]]),success_filled_vue_vue_type_script_lang_default={name:"SuccessFilled"},_hoisted_1249={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2249=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_3248=[_hoisted_2249];function _sfc_render249(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1249,_hoisted_3248)}var success_filled_default=export_helper_default(success_filled_vue_vue_type_script_lang_default,[["render",_sfc_render249],["__file","success-filled.vue"]]),view_vue_vue_type_script_lang_default={name:"View"},_hoisted_1283={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2283=createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),_hoisted_3282=[_hoisted_2283];function _sfc_render283(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1283,_hoisted_3282)}var view_default=export_helper_default(view_vue_vue_type_script_lang_default,[["render",_sfc_render283],["__file","view.vue"]]),warning_filled_vue_vue_type_script_lang_default={name:"WarningFilled"},_hoisted_1287={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2287=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),_hoisted_3286=[_hoisted_2287];function _sfc_render287(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1287,_hoisted_3286)}var warning_filled_default=export_helper_default(warning_filled_vue_vue_type_script_lang_default,[["render",_sfc_render287],["__file","warning-filled.vue"]]),zoom_in_vue_vue_type_script_lang_default={name:"ZoomIn"},_hoisted_1292={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2292=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),_hoisted_3291=[_hoisted_2292];function _sfc_render292(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1292,_hoisted_3291)}var zoom_in_default=export_helper_default(zoom_in_vue_vue_type_script_lang_default,[["render",_sfc_render292],["__file","zoom-in.vue"]]),zoom_out_vue_vue_type_script_lang_default={name:"ZoomOut"},_hoisted_1293={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2293=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),_hoisted_3292=[_hoisted_2293];function _sfc_render293(t,r,e,n,o,i){return openBlock(),createElementBlock("svg",_hoisted_1293,_hoisted_3292)}var zoom_out_default=export_helper_default(zoom_out_vue_vue_type_script_lang_default,[["render",_sfc_render293],["__file","zoom-out.vue"]]);const epPropKey="__epPropKey",definePropType=t=>t,isEpProp=t=>isObject$2(t)&&!!t[epPropKey],buildProp=(t,r)=>{if(!isObject$2(t)||isEpProp(t))return t;const{values:e,required:n,default:o,type:i,validator:a}=t,u={type:i,required:!!n,validator:e||a?c=>{let d=!1,m=[];if(e&&(m=Array.from(e),hasOwn(t,"default")&&m.push(o),d||(d=m.includes(c))),a&&(d||(d=a(c))),!d&&m.length>0){const v=[...new Set(m)].map(g=>JSON.stringify(g)).join(", ");warn(`Invalid prop: validation failed${r?` for prop "${r}"`:""}. Expected one of [${v}], got value ${JSON.stringify(c)}.`)}return d}:void 0,[epPropKey]:!0};return hasOwn(t,"default")&&(u.default=o),u},buildProps=t=>fromPairs(Object.entries(t).map(([r,e])=>[r,buildProp(e,r)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(t,r)=>{if(t.install=e=>{for(const n of[t,...Object.values(r??{})])e.component(n.name,n)},r)for(const[e,n]of Object.entries(r))t[e]=n;return t},withInstallFunction=(t,r)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[r]=t},t),withNoopInstall=t=>(t.install=NOOP,t),composeRefs=(...t)=>r=>{t.forEach(e=>{isFunction$3(e)?e(r):e.value=r})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",componentSizes=["","default","small","large"],componentSizeMap={large:40,default:32,small:24},getComponentSize=t=>componentSizeMap[t||"default"],isValidComponentSize=t=>["",...componentSizes].includes(t);var PatchFlags=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(PatchFlags||{});const unique=t=>[...new Set(t)],castArray=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],isKorean=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),generateId=()=>Math.floor(Math.random()*1e4),mutable=t=>t,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(t={})=>{const{excludeListeners:r=!1,excludeKeys:e}=t,n=computed(()=>((e==null?void 0:e.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),o=getCurrentInstance();return computed(o?()=>{var i;return fromPairs(Object.entries((i=o.proxy)==null?void 0:i.$attrs).filter(([a])=>!n.value.includes(a)&&!(r&&LISTENER_PREFIX.test(a))))}:()=>({}))},useDeprecated=({from:t,replacement:r,scope:e,version:n,ref:o,type:i="API"},a)=>{watch(()=>unref(a),s=>{},{immediate:!0})},useDraggable=(t,r,e)=>{let n={offsetX:0,offsetY:0};const o=s=>{const u=s.clientX,c=s.clientY,{offsetX:d,offsetY:m}=n,v=t.value.getBoundingClientRect(),g=v.left,b=v.top,T=v.width,_=v.height,y=document.documentElement.clientWidth,O=document.documentElement.clientHeight,V=-g+d,Ce=-b+m,ae=y-g-T+d,Fe=O-b-_+m,_e=oe=>{const he=Math.min(Math.max(d+oe.clientX-u,V),ae),Ve=Math.min(Math.max(m+oe.clientY-c,Ce),Fe);n={offsetX:he,offsetY:Ve},t.value.style.transform=`translate(${addUnit(he)}, ${addUnit(Ve)})`},de=()=>{document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",de)};document.addEventListener("mousemove",_e),document.addEventListener("mouseup",de)},i=()=>{r.value&&t.value&&r.value.addEventListener("mousedown",o)},a=()=>{r.value&&t.value&&r.value.removeEventListener("mousedown",o)};onMounted(()=>{watchEffect(()=>{e.value?i():a()})}),onBeforeUnmount(()=>{a()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const buildTranslator=t=>(r,e)=>translate(r,e,unref(t)),translate=(t,r,e)=>get(e,t,t).replace(/\{(\w+)\}/g,(n,o)=>{var i;return`${(i=r==null?void 0:r[o])!=null?i:`{${o}}`}`}),buildLocaleContext=t=>{const r=computed(()=>unref(t).name),e=isRef(t)?t:ref(t);return{lang:r,locale:e,t:buildTranslator(t)}},localeContextKey=Symbol("localeContextKey"),useLocale=t=>{const r=t||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>r.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(t,r,e,n,o)=>{let i=`${t}-${r}`;return e&&(i+=`-${e}`),n&&(i+=`__${n}`),o&&(i+=`--${o}`),i},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=t=>{const r=t||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(r)||defaultNamespace)},useNamespace=(t,r)=>{const e=useGetDerivedNamespace(r);return{namespace:e,b:(T="")=>_bem(e.value,t,T,"",""),e:T=>T?_bem(e.value,t,"",T,""):"",m:T=>T?_bem(e.value,t,"","",T):"",be:(T,_)=>T&&_?_bem(e.value,t,T,_,""):"",em:(T,_)=>T&&_?_bem(e.value,t,"",T,_):"",bm:(T,_)=>T&&_?_bem(e.value,t,T,"",_):"",bem:(T,_,y)=>T&&_&&y?_bem(e.value,t,T,_,y):"",is:(T,..._)=>{const y=_.length>=1?_[0]:!0;return T&&y?`${statePrefix}${T}`:""},cssVar:T=>{const _={};for(const y in T)T[y]&&(_[`--${e.value}-${y}`]=T[y]);return _},cssVarName:T=>`--${e.value}-${T}`,cssVarBlock:T=>{const _={};for(const y in T)T[y]&&(_[`--${e.value}-${t}-${y}`]=T[y]);return _},cssVarBlockName:T=>`--${e.value}-${t}-${T}`}},useLockscreen=(t,r={})=>{isRef(t)||throwError("[useLockscreen]","You need to pass a ref param to this function");const e=r.ns||useNamespace("popup"),n=computed$1(()=>e.bm("parent","hidden"));if(!isClient||hasClass(document.body,n.value))return;let o=0,i=!1,a="0";const s=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,n.value),i&&document&&(document.body.style.width=a)},200)};watch(t,u=>{if(!u){s();return}i=!hasClass(document.body,n.value),i&&(a=document.body.style.width),o=getScrollBarWidth(e.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,d=getStyle(document.body,"overflowY");o>0&&(c||d==="scroll")&&i&&(document.body.style.width=`calc(100% - ${o}px)`),addClass(document.body,n.value)}),onScopeDispose(()=>s())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=t=>{const r=`update:${t}`,e=`onUpdate:${t}`,n=[r],o={[t]:_prop,[e]:_event};return{useModelToggle:({indicator:a,toggleReason:s,shouldHideWhenRouteChanges:u,shouldProceed:c,onShow:d,onHide:m})=>{const v=getCurrentInstance(),{emit:g}=v,b=v.props,T=computed(()=>isFunction$3(b[e])),_=computed(()=>b[t]===null),y=_e=>{a.value!==!0&&(a.value=!0,s&&(s.value=_e),isFunction$3(d)&&d(_e))},O=_e=>{a.value!==!1&&(a.value=!1,s&&(s.value=_e),isFunction$3(m)&&m(_e))},V=_e=>{if(b.disabled===!0||isFunction$3(c)&&!c())return;const de=T.value&&isClient;de&&g(r,!0),(_.value||!de)&&y(_e)},Ce=_e=>{if(b.disabled===!0||!isClient)return;const de=T.value&&isClient;de&&g(r,!1),(_.value||!de)&&O(_e)},ae=_e=>{isBoolean$1(_e)&&(b.disabled&&_e?T.value&&g(r,!1):a.value!==_e&&(_e?y():O()))},Fe=()=>{a.value?Ce():V()};return watch(()=>b[t],ae),u&&v.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...v.proxy.$route}),()=>{u.value&&a.value&&Ce()}),onMounted(()=>{ae(b[t])}),{hide:Ce,show:V,toggle:Fe,hasUpdateHandler:T}},useModelToggleProps:o,useModelToggleEmits:n}};createModelToggleComposable("modelValue");const useProp=t=>{const r=getCurrentInstance();return computed(()=>{var e,n;return(n=(e=r==null?void 0:r.proxy)==null?void 0:e.$props)==null?void 0:n[t]})};var E="top",R="bottom",W="right",P="left",me="auto",G=[E,R,W,P],U="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(t,r){return t.concat([r+"-"+U,r+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(t,r){return t.concat([r,r+"-"+U,r+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt$1="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt$1,nt,rt];function C(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function Q(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function B(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function Pe(t){if(typeof ShadowRoot>"u")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function Mt(t){var r=t.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},o=r.attributes[e]||{},i=r.elements[e];!B(i)||!C(i)||(Object.assign(i.style,n),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function Rt(t){var r=t.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(n){var o=r.elements[n],i=r.attributes[n]||{},a=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:e[n]),s=a.reduce(function(u,c){return u[c]="",u},{});!B(o)||!C(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(u){o.removeAttribute(u)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var X=Math.max,ve=Math.min,Z=Math.round;function ee(t,r){r===void 0&&(r=!1);var e=t.getBoundingClientRect(),n=1,o=1;if(B(t)&&r){var i=t.offsetHeight,a=t.offsetWidth;a>0&&(n=Z(e.width)/a||1),i>0&&(o=Z(e.height)/i||1)}return{width:e.width/n,height:e.height/o,top:e.top/o,right:e.right/n,bottom:e.bottom/o,left:e.left/n,x:e.left/n,y:e.top/o}}function ke(t){var r=ee(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}function it(t,r){var e=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(e&&Pe(e)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function N(t){return H(t).getComputedStyle(t)}function Wt(t){return["table","td","th"].indexOf(C(t))>=0}function I(t){return((Q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ge(t){return C(t)==="html"?t:t.assignedSlot||t.parentNode||(Pe(t)?t.host:null)||I(t)}function at(t){return!B(t)||N(t).position==="fixed"?null:t.offsetParent}function Bt(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&B(t)){var n=N(t);if(n.position==="fixed")return null}var o=ge(t);for(Pe(o)&&(o=o.host);B(o)&&["html","body"].indexOf(C(o))<0;){var i=N(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function se(t){for(var r=H(t),e=at(t);e&&Wt(e)&&N(e).position==="static";)e=at(e);return e&&(C(e)==="html"||C(e)==="body"&&N(e).position==="static")?r:e||Bt(t)||r}function Le(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fe(t,r,e){return X(t,ve(r,e))}function St(t,r,e){var n=fe(t,r,e);return n>e?e:n}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(t){return Object.assign({},st(),t)}function ct(t,r){return r.reduce(function(e,n){return e[n]=t,e},{})}var Tt=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ft(typeof t!="number"?t:ct(t,G))};function Ht(t){var r,e=t.state,n=t.name,o=t.options,i=e.elements.arrow,a=e.modifiersData.popperOffsets,s=q(e.placement),u=Le(s),c=[P,W].indexOf(s)>=0,d=c?"height":"width";if(!(!i||!a)){var m=Tt(o.padding,e),v=ke(i),g=u==="y"?E:P,b=u==="y"?R:W,T=e.rects.reference[d]+e.rects.reference[u]-a[u]-e.rects.popper[d],_=a[u]-e.rects.reference[u],y=se(i),O=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,V=T/2-_/2,Ce=m[g],ae=O-v[d]-m[b],Fe=O/2-v[d]/2+V,_e=fe(Ce,Fe,ae),de=u;e.modifiersData[n]=(r={},r[de]=_e,r.centerOffset=_e-Fe,r)}}function Ct(t){var r=t.state,e=t.options,n=e.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=r.elements.popper.querySelector(o),!o)||!it(r.elements.popper,o)||(r.elements.arrow=o))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(t){return t.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(t){var r=t.x,e=t.y,n=window,o=n.devicePixelRatio||1;return{x:Z(r*o)/o||0,y:Z(e*o)/o||0}}function ut(t){var r,e=t.popper,n=t.popperRect,o=t.placement,i=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,m=t.isFixed,v=a.x,g=v===void 0?0:v,b=a.y,T=b===void 0?0:b,_=typeof d=="function"?d({x:g,y:T}):{x:g,y:T};g=_.x,T=_.y;var y=a.hasOwnProperty("x"),O=a.hasOwnProperty("y"),V=P,Ce=E,ae=window;if(c){var Fe=se(e),_e="clientHeight",de="clientWidth";if(Fe===H(e)&&(Fe=I(e),N(Fe).position!=="static"&&s==="absolute"&&(_e="scrollHeight",de="scrollWidth")),Fe=Fe,o===E||(o===P||o===W)&&i===J){Ce=R;var oe=m&&Fe===ae&&ae.visualViewport?ae.visualViewport.height:Fe[_e];T-=oe-n.height,T*=u?1:-1}if(o===P||(o===E||o===R)&&i===J){V=W;var he=m&&Fe===ae&&ae.visualViewport?ae.visualViewport.width:Fe[de];g-=he-n.width,g*=u?1:-1}}var Ve=Object.assign({position:s},c&&qt),le=d===!0?Vt({x:g,y:T}):{x:g,y:T};if(g=le.x,T=le.y,u){var ie;return Object.assign({},Ve,(ie={},ie[Ce]=O?"0":"",ie[V]=y?"0":"",ie.transform=(ae.devicePixelRatio||1)<=1?"translate("+g+"px, "+T+"px)":"translate3d("+g+"px, "+T+"px, 0)",ie))}return Object.assign({},Ve,(r={},r[Ce]=O?T+"px":"",r[V]=y?g+"px":"",r.transform="",r))}function Nt(t){var r=t.state,e=t.options,n=e.gpuAcceleration,o=n===void 0?!0:n,i=e.adaptive,a=i===void 0?!0:i,s=e.roundOffsets,u=s===void 0?!0:s,c={placement:q(r.placement),variation:te(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:o,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,ut(Object.assign({},c,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:a,roundOffsets:u})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,ut(Object.assign({},c,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(t){var r=t.state,e=t.instance,n=t.options,o=n.scroll,i=o===void 0?!0:o,a=n.resize,s=a===void 0?!0:a,u=H(r.elements.popper),c=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&c.forEach(function(d){d.addEventListener("scroll",e.update,ye)}),s&&u.addEventListener("resize",e.update,ye),function(){i&&c.forEach(function(d){d.removeEventListener("scroll",e.update,ye)}),s&&u.removeEventListener("resize",e.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(t){return t.replace(/left|right|bottom|top/g,function(r){return _t[r]})}var zt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(r){return zt[r]})}function We(t){var r=H(t),e=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Be(t){return ee(I(t)).left+We(t).scrollLeft}function Ft(t){var r=H(t),e=I(t),n=r.visualViewport,o=e.clientWidth,i=e.clientHeight,a=0,s=0;return n&&(o=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=n.offsetLeft,s=n.offsetTop)),{width:o,height:i,x:a+Be(t),y:s}}function Ut(t){var r,e=I(t),n=We(t),o=(r=t.ownerDocument)==null?void 0:r.body,i=X(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=X(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-n.scrollLeft+Be(t),u=-n.scrollTop;return N(o||e).direction==="rtl"&&(s+=X(e.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:u}}function Se(t){var r=N(t),e=r.overflow,n=r.overflowX,o=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+o+n)}function dt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:B(t)&&Se(t)?t:dt(ge(t))}function ce(t,r){var e;r===void 0&&(r=[]);var n=dt(t),o=n===((e=t.ownerDocument)==null?void 0:e.body),i=H(n),a=o?[i].concat(i.visualViewport||[],Se(n)?n:[]):n,s=r.concat(a);return o?s:s.concat(ce(ge(a)))}function Te(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Xt(t){var r=ee(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function ht(t,r){return r===je?Te(Ft(t)):Q(r)?Xt(r):Te(Ut(I(t)))}function Yt(t){var r=ce(ge(t)),e=["absolute","fixed"].indexOf(N(t).position)>=0,n=e&&B(t)?se(t):t;return Q(n)?r.filter(function(o){return Q(o)&&it(o,n)&&C(o)!=="body"}):[]}function Gt(t,r,e){var n=r==="clippingParents"?Yt(t):[].concat(r),o=[].concat(n,[e]),i=o[0],a=o.reduce(function(s,u){var c=ht(t,u);return s.top=X(c.top,s.top),s.right=ve(c.right,s.right),s.bottom=ve(c.bottom,s.bottom),s.left=X(c.left,s.left),s},ht(t,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mt(t){var r=t.reference,e=t.element,n=t.placement,o=n?q(n):null,i=n?te(n):null,a=r.x+r.width/2-e.width/2,s=r.y+r.height/2-e.height/2,u;switch(o){case E:u={x:a,y:r.y-e.height};break;case R:u={x:a,y:r.y+r.height};break;case W:u={x:r.x+r.width,y:s};break;case P:u={x:r.x-e.width,y:s};break;default:u={x:r.x,y:r.y}}var c=o?Le(o):null;if(c!=null){var d=c==="y"?"height":"width";switch(i){case U:u[c]=u[c]-(r[d]/2-e[d]/2);break;case J:u[c]=u[c]+(r[d]/2-e[d]/2);break}}return u}function ne(t,r){r===void 0&&(r={});var e=r,n=e.placement,o=n===void 0?t.placement:n,i=e.boundary,a=i===void 0?Xe:i,s=e.rootBoundary,u=s===void 0?je:s,c=e.elementContext,d=c===void 0?K:c,m=e.altBoundary,v=m===void 0?!1:m,g=e.padding,b=g===void 0?0:g,T=ft(typeof b!="number"?b:ct(b,G)),_=d===K?Ye:K,y=t.rects.popper,O=t.elements[v?_:d],V=Gt(Q(O)?O:O.contextElement||I(t.elements.popper),a,u),Ce=ee(t.elements.reference),ae=mt({reference:Ce,element:y,strategy:"absolute",placement:o}),Fe=Te(Object.assign({},y,ae)),_e=d===K?Fe:Ce,de={top:V.top-_e.top+T.top,bottom:_e.bottom-V.bottom+T.bottom,left:V.left-_e.left+T.left,right:_e.right-V.right+T.right},oe=t.modifiersData.offset;if(d===K&&oe){var he=oe[o];Object.keys(de).forEach(function(Ve){var le=[W,R].indexOf(Ve)>=0?1:-1,ie=[E,R].indexOf(Ve)>=0?"y":"x";de[Ve]+=he[ie]*le})}return de}function Jt(t,r){r===void 0&&(r={});var e=r,n=e.placement,o=e.boundary,i=e.rootBoundary,a=e.padding,s=e.flipVariations,u=e.allowedAutoPlacements,c=u===void 0?Ee:u,d=te(n),m=d?s?De:De.filter(function(b){return te(b)===d}):G,v=m.filter(function(b){return c.indexOf(b)>=0});v.length===0&&(v=m);var g=v.reduce(function(b,T){return b[T]=ne(t,{placement:T,boundary:o,rootBoundary:i,padding:a})[q(T)],b},{});return Object.keys(g).sort(function(b,T){return g[b]-g[T]})}function Kt(t){if(q(t)===me)return[];var r=be(t);return[lt(t),r,lt(r)]}function Qt(t){var r=t.state,e=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var o=e.mainAxis,i=o===void 0?!0:o,a=e.altAxis,s=a===void 0?!0:a,u=e.fallbackPlacements,c=e.padding,d=e.boundary,m=e.rootBoundary,v=e.altBoundary,g=e.flipVariations,b=g===void 0?!0:g,T=e.allowedAutoPlacements,_=r.options.placement,y=q(_),O=y===_,V=u||(O||!b?[be(_)]:Kt(_)),Ce=[_].concat(V).reduce(function(Ne,nr){return Ne.concat(q(nr)===me?Jt(r,{placement:nr,boundary:d,rootBoundary:m,padding:c,flipVariations:b,allowedAutoPlacements:T}):nr)},[]),ae=r.rects.reference,Fe=r.rects.popper,_e=new Map,de=!0,oe=Ce[0],he=0;he<Ce.length;he++){var Ve=Ce[he],le=q(Ve),ie=te(Ve)===U,Ie=[E,R].indexOf(le)>=0,pe=Ie?"width":"height",kt=ne(r,{placement:Ve,boundary:d,rootBoundary:m,altBoundary:v,padding:c}),Ue=Ie?ie?W:P:ie?R:E;ae[pe]>Fe[pe]&&(Ue=be(Ue));var Dt=be(Ue),tr=[];if(i&&tr.push(kt[le]<=0),s&&tr.push(kt[Ue]<=0,kt[Dt]<=0),tr.every(function(Ne){return Ne})){oe=Ve,de=!1;break}_e.set(Ve,tr)}if(de)for(var dr=b?3:1,pr=function(Ne){var nr=Ce.find(function(sr){var $e=_e.get(sr);if($e)return $e.slice(0,Ne).every(function(er){return er})});if(nr)return oe=nr,"break"},ar=dr;ar>0;ar--){var hr=pr(ar);if(hr==="break")break}r.placement!==oe&&(r.modifiersData[n]._skip=!0,r.placement=oe,r.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,r,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-r.height-e.y,right:t.right-r.width+e.x,bottom:t.bottom-r.height+e.y,left:t.left-r.width-e.x}}function yt(t){return[E,W,R,P].some(function(r){return t[r]>=0})}function Zt(t){var r=t.state,e=t.name,n=r.rects.reference,o=r.rects.popper,i=r.modifiersData.preventOverflow,a=ne(r,{elementContext:"reference"}),s=ne(r,{altBoundary:!0}),u=gt(a,n),c=gt(s,o,i),d=yt(u),m=yt(c);r.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:m},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(t,r,e){var n=q(t),o=[P,E].indexOf(n)>=0?-1:1,i=typeof e=="function"?e(Object.assign({},r,{placement:t})):e,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[P,W].indexOf(n)>=0?{x:s,y:a}:{x:a,y:s}}function tn(t){var r=t.state,e=t.options,n=t.name,o=e.offset,i=o===void 0?[0,0]:o,a=Ee.reduce(function(d,m){return d[m]=en(m,r.rects,i),d},{}),s=a[r.placement],u=s.x,c=s.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=u,r.modifiersData.popperOffsets.y+=c),r.modifiersData[n]=a}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(t){var r=t.state,e=t.name;r.modifiersData[e]=mt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(t){return t==="x"?"y":"x"}function on(t){var r=t.state,e=t.options,n=t.name,o=e.mainAxis,i=o===void 0?!0:o,a=e.altAxis,s=a===void 0?!1:a,u=e.boundary,c=e.rootBoundary,d=e.altBoundary,m=e.padding,v=e.tether,g=v===void 0?!0:v,b=e.tetherOffset,T=b===void 0?0:b,_=ne(r,{boundary:u,rootBoundary:c,padding:m,altBoundary:d}),y=q(r.placement),O=te(r.placement),V=!O,Ce=Le(y),ae=rn(Ce),Fe=r.modifiersData.popperOffsets,_e=r.rects.reference,de=r.rects.popper,oe=typeof T=="function"?T(Object.assign({},r.rects,{placement:r.placement})):T,he=typeof oe=="number"?{mainAxis:oe,altAxis:oe}:Object.assign({mainAxis:0,altAxis:0},oe),Ve=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,le={x:0,y:0};if(Fe){if(i){var ie,Ie=Ce==="y"?E:P,pe=Ce==="y"?R:W,kt=Ce==="y"?"height":"width",Ue=Fe[Ce],Dt=Ue+_[Ie],tr=Ue-_[pe],dr=g?-de[kt]/2:0,pr=O===U?_e[kt]:de[kt],ar=O===U?-de[kt]:-_e[kt],hr=r.elements.arrow,Ne=g&&hr?ke(hr):{width:0,height:0},nr=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:st(),sr=nr[Ie],$e=nr[pe],er=fe(0,_e[kt],Ne[kt]),or=V?_e[kt]/2-dr-er-sr-he.mainAxis:pr-er-sr-he.mainAxis,ze=V?-_e[kt]/2+dr+er+$e+he.mainAxis:ar+er+$e+he.mainAxis,rr=r.elements.arrow&&se(r.elements.arrow),Et=rr?Ce==="y"?rr.clientTop||0:rr.clientLeft||0:0,Lt=(ie=Ve==null?void 0:Ve[Ce])!=null?ie:0,cr=Ue+or-Lt-Et,mr=Ue+ze-Lt,vr=fe(g?ve(Dt,cr):Dt,Ue,g?X(tr,mr):tr);Fe[Ce]=vr,le[Ce]=vr-Ue}if(s){var Tr,Ir=Ce==="x"?E:P,kr=Ce==="x"?R:W,Ar=Fe[ae],Nr=ae==="y"?"height":"width",Mn=Ar+_[Ir],Or=Ar-_[kr],Pr=[E,P].indexOf(y)!==-1,Rr=(Tr=Ve==null?void 0:Ve[ae])!=null?Tr:0,Qr=Pr?Mn:Ar-_e[Nr]-de[Nr]-Rr+he.altAxis,hn=Pr?Ar+_e[Nr]+de[Nr]-Rr-he.altAxis:Or,Ur=g&&Pr?St(Qr,Ar,hn):fe(g?Qr:Mn,Ar,g?hn:Or);Fe[ae]=Ur,le[ae]=Ur-Ar}r.modifiersData[n]=le}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sn(t){return t===H(t)||!B(t)?We(t):an(t)}function fn(t){var r=t.getBoundingClientRect(),e=Z(r.width)/t.offsetWidth||1,n=Z(r.height)/t.offsetHeight||1;return e!==1||n!==1}function cn(t,r,e){e===void 0&&(e=!1);var n=B(r),o=B(r)&&fn(r),i=I(r),a=ee(t,o),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!e)&&((C(r)!=="body"||Se(i))&&(s=sn(r)),B(r)?(u=ee(r,!0),u.x+=r.clientLeft,u.y+=r.clientTop):i&&(u.x=Be(i))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function pn(t){var r=new Map,e=new Set,n=[];t.forEach(function(i){r.set(i.name,i)});function o(i){e.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!e.has(s)){var u=r.get(s);u&&o(u)}}),n.push(i)}return t.forEach(function(i){e.has(i.name)||o(i)}),n}function un(t){var r=pn(t);return ot.reduce(function(e,n){return e.concat(r.filter(function(o){return o.phase===n}))},[])}function ln(t){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(t())})})),r}}function dn(t){var r=t.reduce(function(e,n){var o=e[n.name];return e[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(t){t===void 0&&(t={});var r=t,e=r.defaultModifiers,n=e===void 0?[]:e,o=r.defaultOptions,i=o===void 0?Ot:o;return function(a,s,u){u===void 0&&(u=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,i),modifiersData:{},elements:{reference:a,popper:s},attributes:{},styles:{}},d=[],m=!1,v={state:c,setOptions:function(T){var _=typeof T=="function"?T(c.options):T;b(),c.options=Object.assign({},i,c.options,_),c.scrollParents={reference:Q(a)?ce(a):a.contextElement?ce(a.contextElement):[],popper:ce(s)};var y=un(dn([].concat(n,c.options.modifiers)));return c.orderedModifiers=y.filter(function(O){return O.enabled}),g(),v.update()},forceUpdate:function(){if(!m){var T=c.elements,_=T.reference,y=T.popper;if($t(_,y)){c.rects={reference:cn(_,se(y),c.options.strategy==="fixed"),popper:ke(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(de){return c.modifiersData[de.name]=Object.assign({},de.data)});for(var O=0;O<c.orderedModifiers.length;O++){if(c.reset===!0){c.reset=!1,O=-1;continue}var V=c.orderedModifiers[O],Ce=V.fn,ae=V.options,Fe=ae===void 0?{}:ae,_e=V.name;typeof Ce=="function"&&(c=Ce({state:c,options:Fe,name:_e,instance:v})||c)}}}},update:ln(function(){return new Promise(function(T){v.forceUpdate(),T(c)})}),destroy:function(){b(),m=!0}};if(!$t(a,s))return v;v.setOptions(u).then(function(T){!m&&u.onFirstUpdate&&u.onFirstUpdate(T)});function g(){c.orderedModifiers.forEach(function(T){var _=T.name,y=T.options,O=y===void 0?{}:y,V=T.effect;if(typeof V=="function"){var Ce=V({state:c,name:_,instance:v,options:O}),ae=function(){};d.push(Ce||ae)}})}function b(){d.forEach(function(T){return T()}),d=[]}return v}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(t,r,e={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:u})=>{const c=deriveState(u);Object.assign(a.value,c)},requires:["computeStyles"]},o=computed(()=>{const{onFirstUpdate:u,placement:c,strategy:d,modifiers:m}=unref(e);return{onFirstUpdate:u,placement:c||"bottom",strategy:d||"absolute",modifiers:[...m||[],n,{name:"applyStyles",enabled:!1}]}}),i=shallowRef(),a=ref({styles:{popper:{position:unref(o).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{i.value&&(i.value.destroy(),i.value=void 0)};return watch(o,u=>{const c=unref(i);c&&c.setOptions(u)},{deep:!0}),watch([t,r],([u,c])=>{s(),!(!u||!c)&&(i.value=yn(u,c,unref(o)))}),onBeforeUnmount(()=>{s()}),{state:computed(()=>{var u;return{...((u=unref(i))==null?void 0:u.state)||{}}}),styles:computed(()=>unref(a).styles),attributes:computed(()=>unref(a).attributes),update:()=>{var u;return(u=unref(i))==null?void 0:u.update()},forceUpdate:()=>{var u;return(u=unref(i))==null?void 0:u.forceUpdate()},instanceRef:computed(()=>unref(i))}};function deriveState(t){const r=Object.keys(t.elements),e=fromPairs(r.map(o=>[o,t.styles[o]||{}])),n=fromPairs(r.map(o=>[o,t.attributes[o]]));return{styles:e,attributes:n}}const useSameTarget=t=>{if(!t)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let r=!1,e=!1;return{onClick:a=>{r&&e&&t(a),r=e=!1},onMousedown:a=>{r=a.target===a.currentTarget},onMouseup:a=>{e=a.target===a.currentTarget}}};function useTimeout(){let t;const r=(n,o)=>{e(),t=window.setTimeout(n,o)},e=()=>window.clearTimeout(t);return tryOnScopeDispose(()=>e()),{registerTimeout:r,cancelTimeout:e}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=t=>{const r=useIdInjection(),e=useGetDerivedNamespace();return computed(()=>unref(t)||`${e.value}-id-${r.prefix}-${r.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=t=>{const r=t;r.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(e=>e(r))},useEscapeKeydown=t=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(t)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(r=>r!==t),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const t=useGetDerivedNamespace(),r=useIdInjection(),e=computed(()=>`${t.value}-popper-container-${r.prefix}`),n=computed(()=>`#${e.value}`);return{id:e,selector:n}},createContainer=t=>{const r=document.createElement("div");return r.id=t,document.body.appendChild(r),r},usePopperContainer=()=>{const{id:t,selector:r}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(r.value)&&(cachedContainer=createContainer(t.value))}),{id:t,selector:r}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:t,hideAfter:r,autoClose:e,open:n,close:o})=>{const{registerTimeout:i}=useTimeout(),{registerTimeout:a,cancelTimeout:s}=useTimeout();return{onOpen:d=>{i(()=>{n(d);const m=unref(e);isNumber$1(m)&&m>0&&a(()=>{o(d)},m)},unref(t))},onClose:d=>{s(),i(()=>{o(d)},unref(r))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=t=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:e=>{t.value=e}})},useForwardRefDirective=t=>({mounted(r){t(r)},updated(r){t(r)},unmounted(){t(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=t=>{const r=t||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),e=computed(()=>{const i=unref(r);return isNumber$1(i)?i:defaultInitialZIndex}),n=computed(()=>e.value+zIndex.value);return{initialZIndex:e,currentZIndex:n,nextZIndex:()=>(zIndex.value++,n.value)}};function useCursor(t){const r=ref();function e(){if(t.value==null)return;const{selectionStart:o,selectionEnd:i,value:a}=t.value;if(o==null||i==null)return;const s=a.slice(0,Math.max(0,o)),u=a.slice(Math.max(0,i));r.value={selectionStart:o,selectionEnd:i,value:a,beforeTxt:s,afterTxt:u}}function n(){if(t.value==null||r.value==null)return;const{value:o}=t.value,{beforeTxt:i,afterTxt:a,selectionStart:s}=r.value;if(i==null||a==null||s==null)return;let u=o.length;if(o.endsWith(a))u=o.length-a.length;else if(o.startsWith(i))u=i.length;else{const c=i[s-1],d=o.indexOf(c,s-1);d!==-1&&(u=d+1)}t.value.setSelectionRange(u,u)}return[e,n]}const useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const t=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(t.size)||"")};function useFocusController(t,{afterFocus:r,beforeBlur:e,afterBlur:n}={}){const o=getCurrentInstance(),{emit:i}=o,a=shallowRef(),s=ref(!1),u=m=>{s.value||(s.value=!0,i("focus",m),r==null||r())},c=m=>{var v;isFunction$3(e)&&e(m)||m.relatedTarget&&((v=a.value)!=null&&v.contains(m.relatedTarget))||(s.value=!1,i("blur",m),n==null||n())},d=()=>{var m;(m=t.value)==null||m.focus()};return watch(a,m=>{m&&m.setAttribute("tabindex","-1")}),useEventListener(a,"click",d),{wrapperRef:a,isFocused:s,handleFocus:u,handleBlur:c}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(t,r=void 0){const e=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return t?computed(()=>{var n,o;return(o=(n=e.value)==null?void 0:n[t])!=null?o:r}):e}function useGlobalComponentSettings(t,r){const e=useGlobalConfig(),n=useNamespace(t,computed(()=>{var s;return((s=e.value)==null?void 0:s.namespace)||defaultNamespace})),o=useLocale(computed(()=>{var s;return(s=e.value)==null?void 0:s.locale})),i=useZIndex(computed(()=>{var s;return((s=e.value)==null?void 0:s.zIndex)||defaultInitialZIndex})),a=computed(()=>{var s;return unref(r)||((s=e.value)==null?void 0:s.size)||""});return provideGlobalConfig(computed(()=>unref(e)||{})),{ns:n,locale:o,zIndex:i,size:a}}const provideGlobalConfig=(t,r,e=!1)=>{var n;const o=!!getCurrentInstance(),i=o?useGlobalConfig():void 0,a=(n=r==null?void 0:r.provide)!=null?n:o?provide:void 0;if(!a)return;const s=computed(()=>{const u=unref(t);return i!=null&&i.value?mergeConfig$1(i.value,u):u});return a(configProviderContextKey,s),a(localeContextKey,computed(()=>s.value.locale)),a(namespaceContextKey,computed(()=>s.value.namespace)),a(zIndexContextKey,computed(()=>s.value.zIndex)),a(SIZE_INJECTION_KEY,{size:computed(()=>s.value.size||"")}),(e||!globalConfig.value)&&(globalConfig.value=s.value),s},mergeConfig$1=(t,r)=>{var e;const n=[...new Set([...keysOf(t),...keysOf(r)])],o={};for(const i of n)o[i]=(e=r[i])!=null?e:t[i];return o},messageConfig={};var _export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,o]of r)e[n]=o;return e};const iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$J=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$X=defineComponent({...__default__$J,props:iconProps,setup(t){const r=t,e=useNamespace("icon"),n=computed(()=>{const{size:o,color:i}=r;return!o&&!i?{}:{fontSize:isUndefined$1(o)?void 0:addUnit(o),"--color":i}});return(o,i)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(e).b(),style:unref(n)},o.$attrs),[renderSlot(o.$slots,"default")],16))}});var Icon=_export_sfc(_sfc_main$X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const ElIcon=withInstall(Icon),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(t,r={})=>{const e=ref(void 0),n=r.prop?e:useProp("size"),o=r.global?e:useGlobalSize(),i=r.form?{size:void 0}:inject(formContextKey,void 0),a=r.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>n.value||unref(t)||(a==null?void 0:a.size)||(i==null?void 0:i.size)||o.value||"")},useFormDisabled=t=>{const r=useProp("disabled"),e=inject(formContextKey,void 0);return computed(()=>r.value||unref(t)||(e==null?void 0:e.disabled)||!1)},useFormItem=()=>{const t=inject(formContextKey,void 0),r=inject(formItemContextKey,void 0);return{form:t,formItem:r}},useFormItemInputId=(t,{formItemContext:r,disableIdGeneration:e,disableIdManagement:n})=>{e||(e=ref(!1)),n||(n=ref(!1));const o=ref();let i;const a=computed(()=>{var s;return!!(!t.label&&r&&r.inputIds&&((s=r.inputIds)==null?void 0:s.length)<=1)});return onMounted(()=>{i=watch([toRef(t,"id"),e],([s,u])=>{const c=s??(u?void 0:useId().value);c!==o.value&&(r!=null&&r.removeInputId&&(o.value&&r.removeInputId(o.value),!(n!=null&&n.value)&&!u&&c&&r.addInputId(c)),o.value=c)},{immediate:!0})}),onUnmounted(()=>{i&&i(),r!=null&&r.removeInputId&&o.value&&r.removeInputId(o.value)}),{isLabeledByFormItem:a,inputId:o}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(t,r,e)=>(isArray$4(t)||isString$2(t))&&isBoolean$1(r)&&isString$2(e)};function useFormLabelWidth(){const t=ref([]),r=computed(()=>{if(!t.value.length)return"0";const i=Math.max(...t.value);return i?`${i}px`:""});function e(i){const a=t.value.indexOf(i);return a===-1&&r.value,a}function n(i,a){if(i&&a){const s=e(a);t.value.splice(s,1,i)}else i&&t.value.push(i)}function o(i){const a=e(i);a>-1&&t.value.splice(a,1)}return{autoLabelWidth:r,registerLabelWidth:n,deregisterLabelWidth:o}}const filterFields=(t,r)=>{const e=castArray$1(r);return e.length>0?t.filter(n=>n.prop&&e.includes(n.prop)):t},COMPONENT_NAME$7="ElForm",__default__$I=defineComponent({name:COMPONENT_NAME$7}),_sfc_main$W=defineComponent({...__default__$I,props:formProps,emits:formEmits,setup(t,{expose:r,emit:e}){const n=t,o=[],i=useFormSize(),a=useNamespace("form"),s=computed(()=>{const{labelPosition:O,inline:V}=n;return[a.b(),a.m(i.value||"default"),{[a.m(`label-${O}`)]:O,[a.m("inline")]:V}]}),u=O=>{o.push(O)},c=O=>{O.prop&&o.splice(o.indexOf(O),1)},d=(O=[])=>{n.model&&filterFields(o,O).forEach(V=>V.resetField())},m=(O=[])=>{filterFields(o,O).forEach(V=>V.clearValidate())},v=computed(()=>!!n.model),g=O=>{if(o.length===0)return[];const V=filterFields(o,O);return V.length?V:[]},b=async O=>_(void 0,O),T=async(O=[])=>{if(!v.value)return!1;const V=g(O);if(V.length===0)return!0;let Ce={};for(const ae of V)try{await ae.validate("")}catch(Fe){Ce={...Ce,...Fe}}return Object.keys(Ce).length===0?!0:Promise.reject(Ce)},_=async(O=[],V)=>{const Ce=!isFunction$3(V);try{const ae=await T(O);return ae===!0&&(V==null||V(ae)),ae}catch(ae){if(ae instanceof Error)throw ae;const Fe=ae;return n.scrollToError&&y(Object.keys(Fe)[0]),V==null||V(!1,Fe),Ce&&Promise.reject(Fe)}},y=O=>{var V;const Ce=filterFields(o,O)[0];Ce&&((V=Ce.$el)==null||V.scrollIntoView(n.scrollIntoViewOptions))};return watch(()=>n.rules,()=>{n.validateOnRuleChange&&b().catch(O=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(n),emit:e,resetFields:d,clearValidate:m,validateField:_,addField:u,removeField:c,...useFormLabelWidth()})),r({validate:b,validateField:_,resetFields:d,clearValidate:m,scrollToField:y}),(O,V)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(s))},[renderSlot(O.$slots,"default")],2))}});var Form=_export_sfc(_sfc_main$W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(t,r,e){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(o,i,a){var s=[null];s.push.apply(s,i);var u=Function.bind.apply(o,s),c=new u;return a&&_setPrototypeOf(c,a.prototype),c},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,o)}function o(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(o,n)},_wrapNativeSuper(t)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(t){if(!t||!t.length)return null;var r={};return t.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function format(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var o=0,i=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var a=t.replace(formatRegExp,function(s){if(s==="%%")return"%";if(o>=i)return s;switch(s){case"%s":return String(e[o++]);case"%d":return Number(e[o++]);case"%j":try{return JSON.stringify(e[o++])}catch{return"[Circular]"}break;default:return s}});return a}return t}function isNativeStringType(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function isEmptyValue(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||isNativeStringType(r)&&typeof t=="string"&&!t)}function asyncParallelArray(t,r,e){var n=[],o=0,i=t.length;function a(s){n.push.apply(n,s||[]),o++,o===i&&e(n)}t.forEach(function(s){r(s,a)})}function asyncSerialArray(t,r,e){var n=0,o=t.length;function i(a){if(a&&a.length){e(a);return}var s=n;n=n+1,s<o?r(t[s],i):e([])}i([])}function flattenObjArr(t){var r=[];return Object.keys(t).forEach(function(e){r.push.apply(r,t[e]||[])}),r}var AsyncValidationError=function(t){_inheritsLoose(r,t);function r(e,n){var o;return o=t.call(this,"Async Validation Error")||this,o.errors=e,o.fields=n,o}return r}(_wrapNativeSuper(Error));function asyncMap(t,r,e,n,o){if(r.first){var i=new Promise(function(v,g){var b=function(y){return n(y),y.length?g(new AsyncValidationError(y,convertFieldsError(y))):v(o)},T=flattenObjArr(t);asyncSerialArray(T,e,b)});return i.catch(function(v){return v}),i}var a=r.firstFields===!0?Object.keys(t):r.firstFields||[],s=Object.keys(t),u=s.length,c=0,d=[],m=new Promise(function(v,g){var b=function(_){if(d.push.apply(d,_),c++,c===u)return n(d),d.length?g(new AsyncValidationError(d,convertFieldsError(d))):v(o)};s.length||(n(d),v(o)),s.forEach(function(T){var _=t[T];a.indexOf(T)!==-1?asyncSerialArray(_,e,b):asyncParallelArray(_,e,b)})});return m.catch(function(v){return v}),m}function isErrorObj(t){return!!(t&&t.message!==void 0)}function getValue(t,r){for(var e=t,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function complementError(t,r){return function(e){var n;return t.fullFields?n=getValue(r,t.fullFields):n=r[e.field||t.fullField],isErrorObj(e)?(e.field=e.field||t.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||t.fullField}}}function deepMerge(t,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];typeof n=="object"&&typeof t[e]=="object"?t[e]=_extends({},t[e],n):t[e]=n}}return t}var required$1=function(r,e,n,o,i,a){r.required&&(!n.hasOwnProperty(r.field)||isEmptyValue(e,a||r.type))&&o.push(format(i.messages.required,r.fullField))},whitespace=function(r,e,n,o,i){(/^\s+$/.test(e)||e==="")&&o.push(format(i.messages.whitespace,r.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var t="[a-fA-F\\d:]",r=function(Ce){return Ce&&Ce.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",o=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+e+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+e+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+e+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+e+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+e+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+e+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+e+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+e+"$)|(?:^"+o+"$)"),a=new RegExp("^"+e+"$"),s=new RegExp("^"+o+"$"),u=function(Ce){return Ce&&Ce.exact?i:new RegExp("(?:"+r(Ce)+e+r(Ce)+")|(?:"+r(Ce)+o+r(Ce)+")","g")};u.v4=function(V){return V&&V.exact?a:new RegExp(""+r(V)+e+r(V),"g")},u.v6=function(V){return V&&V.exact?s:new RegExp(""+r(V)+o+r(V),"g")};var c="(?:(?:[a-z]+:)?//)",d="(?:\\S+(?::\\S*)?@)?",m=u.v4().source,v=u.v6().source,g="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",b="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",T="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",_="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',O="(?:"+c+"|www\\.)"+d+"(?:localhost|"+m+"|"+v+"|"+g+b+T+")"+_+y;return urlReg=new RegExp("(?:^"+O+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(r){return types.number(r)&&parseInt(r,10)===r},float:function(r){return types.number(r)&&!types.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!types.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(pattern$2.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(getUrlRegex())},hex:function(r){return typeof r=="string"&&!!r.match(pattern$2.hex)}},type$1=function(r,e,n,o,i){if(r.required&&e===void 0){required$1(r,e,n,o,i);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=r.type;a.indexOf(s)>-1?types[s](e)||o.push(format(i.messages.types[s],r.fullField,r.type)):s&&typeof e!==r.type&&o.push(format(i.messages.types[s],r.fullField,r.type))},range$1=function(r,e,n,o,i){var a=typeof r.len=="number",s=typeof r.min=="number",u=typeof r.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=e,m=null,v=typeof e=="number",g=typeof e=="string",b=Array.isArray(e);if(v?m="number":g?m="string":b&&(m="array"),!m)return!1;b&&(d=e.length),g&&(d=e.replace(c,"_").length),a?d!==r.len&&o.push(format(i.messages[m].len,r.fullField,r.len)):s&&!u&&d<r.min?o.push(format(i.messages[m].min,r.fullField,r.min)):u&&!s&&d>r.max?o.push(format(i.messages[m].max,r.fullField,r.max)):s&&u&&(d<r.min||d>r.max)&&o.push(format(i.messages[m].range,r.fullField,r.min,r.max))},ENUM$1="enum",enumerable$1=function(r,e,n,o,i){r[ENUM$1]=Array.isArray(r[ENUM$1])?r[ENUM$1]:[],r[ENUM$1].indexOf(e)===-1&&o.push(format(i.messages[ENUM$1],r.fullField,r[ENUM$1].join(", ")))},pattern$1=function(r,e,n,o,i){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||o.push(format(i.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var a=new RegExp(r.pattern);a.test(e)||o.push(format(i.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,o,a,i,"string"),isEmptyValue(e,"string")||(rules.type(r,e,o,a,i),rules.range(r,e,o,a,i),rules.pattern(r,e,o,a,i),r.whitespace===!0&&rules.whitespace(r,e,o,a,i))}n(a)},method=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&rules.type(r,e,o,a,i)}n(a)},number=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(e===""&&(e=void 0),isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&(rules.type(r,e,o,a,i),rules.range(r,e,o,a,i))}n(a)},_boolean=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&rules.type(r,e,o,a,i)}n(a)},regexp=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),isEmptyValue(e)||rules.type(r,e,o,a,i)}n(a)},integer=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&(rules.type(r,e,o,a,i),rules.range(r,e,o,a,i))}n(a)},floatFn=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&(rules.type(r,e,o,a,i),rules.range(r,e,o,a,i))}n(a)},array=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(e==null&&!r.required)return n();rules.required(r,e,o,a,i,"array"),e!=null&&(rules.type(r,e,o,a,i),rules.range(r,e,o,a,i))}n(a)},object=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&rules.type(r,e,o,a,i)}n(a)},ENUM="enum",enumerable=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i),e!==void 0&&rules[ENUM](r,e,o,a,i)}n(a)},pattern=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,o,a,i),isEmptyValue(e,"string")||rules.pattern(r,e,o,a,i)}n(a)},date=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e,"date")&&!r.required)return n();if(rules.required(r,e,o,a,i),!isEmptyValue(e,"date")){var u;e instanceof Date?u=e:u=new Date(e),rules.type(r,u,o,a,i),u&&rules.range(r,u.getTime(),o,a,i)}}n(a)},required=function(r,e,n,o,i){var a=[],s=Array.isArray(e)?"array":typeof e;rules.required(r,e,o,a,i,s),n(a)},type=function(r,e,n,o,i){var a=r.type,s=[],u=r.required||!r.required&&o.hasOwnProperty(r.field);if(u){if(isEmptyValue(e,a)&&!r.required)return n();rules.required(r,e,o,s,i,a),isEmptyValue(e,a)||rules.type(r,e,o,s,i)}n(s)},any=function(r,e,n,o,i){var a=[],s=r.required||!r.required&&o.hasOwnProperty(r.field);if(s){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,i)}n(a)},validators$2={string,method,number,boolean:_boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var messages=newMessages(),Schema=function(){function t(e){this.rules=null,this._messages=messages,this.define(e)}var r=t.prototype;return r.define=function(n){var o=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var a=n[i];o.rules[i]=Array.isArray(a)?a:[a]})},r.messages=function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages},r.validate=function(n,o,i){var a=this;o===void 0&&(o={}),i===void 0&&(i=function(){});var s=n,u=o,c=i;if(typeof u=="function"&&(c=u,u={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,s),Promise.resolve(s);function d(T){var _=[],y={};function O(Ce){if(Array.isArray(Ce)){var ae;_=(ae=_).concat.apply(ae,Ce)}else _.push(Ce)}for(var V=0;V<T.length;V++)O(T[V]);_.length?(y=convertFieldsError(_),c(_,y)):c(null,s)}if(u.messages){var m=this.messages();m===messages&&(m=newMessages()),deepMerge(m,u.messages),u.messages=m}else u.messages=this.messages();var v={},g=u.keys||Object.keys(this.rules);g.forEach(function(T){var _=a.rules[T],y=s[T];_.forEach(function(O){var V=O;typeof V.transform=="function"&&(s===n&&(s=_extends({},s)),y=s[T]=V.transform(y)),typeof V=="function"?V={validator:V}:V=_extends({},V),V.validator=a.getValidationMethod(V),V.validator&&(V.field=T,V.fullField=V.fullField||T,V.type=a.getType(V),v[T]=v[T]||[],v[T].push({rule:V,value:y,source:s,field:T}))})});var b={};return asyncMap(v,u,function(T,_){var y=T.rule,O=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");O=O&&(y.required||!y.required&&T.value),y.field=T.field;function V(Fe,_e){return _extends({},_e,{fullField:y.fullField+"."+Fe,fullFields:y.fullFields?[].concat(y.fullFields,[Fe]):[Fe]})}function Ce(Fe){Fe===void 0&&(Fe=[]);var _e=Array.isArray(Fe)?Fe:[Fe];!u.suppressWarning&&_e.length&&t.warning("async-validator:",_e),_e.length&&y.message!==void 0&&(_e=[].concat(y.message));var de=_e.map(complementError(y,s));if(u.first&&de.length)return b[y.field]=1,_(de);if(!O)_(de);else{if(y.required&&!T.value)return y.message!==void 0?de=[].concat(y.message).map(complementError(y,s)):u.error&&(de=[u.error(y,format(u.messages.required,y.field))]),_(de);var oe={};y.defaultField&&Object.keys(T.value).map(function(le){oe[le]=y.defaultField}),oe=_extends({},oe,T.rule.fields);var he={};Object.keys(oe).forEach(function(le){var ie=oe[le],Ie=Array.isArray(ie)?ie:[ie];he[le]=Ie.map(V.bind(null,le))});var Ve=new t(he);Ve.messages(u.messages),T.rule.options&&(T.rule.options.messages=u.messages,T.rule.options.error=u.error),Ve.validate(T.value,T.rule.options||u,function(le){var ie=[];de&&de.length&&ie.push.apply(ie,de),le&&le.length&&ie.push.apply(ie,le),_(ie.length?ie:null)})}}var ae;if(y.asyncValidator)ae=y.asyncValidator(y,T.value,Ce,T.source,u);else if(y.validator){try{ae=y.validator(y,T.value,Ce,T.source,u)}catch(Fe){console.error==null||console.error(Fe),u.suppressValidatorError||setTimeout(function(){throw Fe},0),Ce(Fe.message)}ae===!0?Ce():ae===!1?Ce(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):ae instanceof Array?Ce(ae):ae instanceof Error&&Ce(ae.message)}ae&&ae.then&&ae.then(function(){return Ce()},function(Fe){return Ce(Fe)})},function(T){d(T)},s)},r.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators$2.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"},r.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var o=Object.keys(n),i=o.indexOf("message");return i!==-1&&o.splice(i,1),o.length===1&&o[0]==="required"?validators$2.required:validators$2[this.getType(n)]||void 0},t}();Schema.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$2[r]=e};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators$2;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$6="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$6,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:r}){const e=inject(formContextKey,void 0),n=inject(formItemContextKey);n||throwError(COMPONENT_NAME$6,"usage: <el-form-item><label-wrap /></el-form-item>");const o=useNamespace("form"),i=ref(),a=ref(0),s=()=>{var d;if((d=i.value)!=null&&d.firstElementChild){const m=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(m))}else return 0},u=(d="update")=>{nextTick(()=>{r.default&&t.isAutoWidth&&(d==="update"?a.value=s():d==="remove"&&(e==null||e.deregisterLabelWidth(a.value)))})},c=()=>u("update");return onMounted(()=>{c()}),onBeforeUnmount(()=>{u("remove")}),onUpdated(()=>c()),watch(a,(d,m)=>{t.updateAll&&(e==null||e.registerLabelWidth(d,m))}),useResizeObserver(computed(()=>{var d,m;return(m=(d=i.value)==null?void 0:d.firstElementChild)!=null?m:null}),c),()=>{var d,m;if(!r)return null;const{isAutoWidth:v}=t;if(v){const g=e==null?void 0:e.autoLabelWidth,b=n==null?void 0:n.hasLabel,T={};if(b&&g&&g!=="auto"){const _=Math.max(0,Number.parseInt(g,10)-a.value),y=e.labelPosition==="left"?"marginRight":"marginLeft";_&&(T[y]=`${_}px`)}return createVNode("div",{ref:i,class:[o.be("item","label-wrap")],style:T},[(d=r.default)==null?void 0:d.call(r)])}else return createVNode(Fragment,{ref:i},[(m=r.default)==null?void 0:m.call(r)])}}});const _hoisted_1$r=["role","aria-labelledby"],__default__$H=defineComponent({name:"ElFormItem"}),_sfc_main$V=defineComponent({...__default__$H,props:formItemProps,setup(t,{expose:r}){const e=t,n=useSlots(),o=inject(formContextKey,void 0),i=inject(formItemContextKey,void 0),a=useFormSize(void 0,{formItem:!1}),s=useNamespace("form-item"),u=useId().value,c=ref([]),d=ref(""),m=refDebounced(d,100),v=ref(""),g=ref();let b,T=!1;const _=computed(()=>{if((o==null?void 0:o.labelPosition)==="top")return{};const $e=addUnit(e.labelWidth||(o==null?void 0:o.labelWidth)||"");return $e?{width:$e}:{}}),y=computed(()=>{if((o==null?void 0:o.labelPosition)==="top"||o!=null&&o.inline)return{};if(!e.label&&!e.labelWidth&&oe)return{};const $e=addUnit(e.labelWidth||(o==null?void 0:o.labelWidth)||"");return!e.label&&!n.label?{marginLeft:$e}:{}}),O=computed(()=>[s.b(),s.m(a.value),s.is("error",d.value==="error"),s.is("validating",d.value==="validating"),s.is("success",d.value==="success"),s.is("required",Ie.value||e.required),s.is("no-asterisk",o==null?void 0:o.hideRequiredAsterisk),(o==null?void 0:o.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:o==null?void 0:o.statusIcon}]),V=computed(()=>isBoolean$1(e.inlineMessage)?e.inlineMessage:(o==null?void 0:o.inlineMessage)||!1),Ce=computed(()=>[s.e("error"),{[s.em("error","inline")]:V.value}]),ae=computed(()=>e.prop?isString$2(e.prop)?e.prop:e.prop.join("."):""),Fe=computed(()=>!!(e.label||n.label)),_e=computed(()=>e.for||(c.value.length===1?c.value[0]:void 0)),de=computed(()=>!_e.value&&Fe.value),oe=!!i,he=computed(()=>{const $e=o==null?void 0:o.model;if(!(!$e||!e.prop))return getProp($e,e.prop).value}),Ve=computed(()=>{const{required:$e}=e,er=[];e.rules&&er.push(...castArray$1(e.rules));const or=o==null?void 0:o.rules;if(or&&e.prop){const ze=getProp(or,e.prop).value;ze&&er.push(...castArray$1(ze))}if($e!==void 0){const ze=er.map((rr,Et)=>[rr,Et]).filter(([rr])=>Object.keys(rr).includes("required"));if(ze.length>0)for(const[rr,Et]of ze)rr.required!==$e&&(er[Et]={...rr,required:$e});else er.push({required:$e})}return er}),le=computed(()=>Ve.value.length>0),ie=$e=>Ve.value.filter(or=>!or.trigger||!$e?!0:Array.isArray(or.trigger)?or.trigger.includes($e):or.trigger===$e).map(({trigger:or,...ze})=>ze),Ie=computed(()=>Ve.value.some($e=>$e.required)),pe=computed(()=>{var $e;return m.value==="error"&&e.showMessage&&(($e=o==null?void 0:o.showMessage)!=null?$e:!0)}),kt=computed(()=>`${e.label||""}${(o==null?void 0:o.labelSuffix)||""}`),Ue=$e=>{d.value=$e},Dt=$e=>{var er,or;const{errors:ze,fields:rr}=$e;(!ze||!rr)&&console.error($e),Ue("error"),v.value=ze?(or=(er=ze==null?void 0:ze[0])==null?void 0:er.message)!=null?or:`${e.prop} is required`:"",o==null||o.emit("validate",e.prop,!1,v.value)},tr=()=>{Ue("success"),o==null||o.emit("validate",e.prop,!0,"")},dr=async $e=>{const er=ae.value;return new Schema({[er]:$e}).validate({[er]:he.value},{firstFields:!0}).then(()=>(tr(),!0)).catch(ze=>(Dt(ze),Promise.reject(ze)))},pr=async($e,er)=>{if(T||!e.prop)return!1;const or=isFunction$3(er);if(!le.value)return er==null||er(!1),!1;const ze=ie($e);return ze.length===0?(er==null||er(!0),!0):(Ue("validating"),dr(ze).then(()=>(er==null||er(!0),!0)).catch(rr=>{const{fields:Et}=rr;return er==null||er(!1,Et),or?!1:Promise.reject(Et)}))},ar=()=>{Ue(""),v.value="",T=!1},hr=async()=>{const $e=o==null?void 0:o.model;if(!$e||!e.prop)return;const er=getProp($e,e.prop);T=!0,er.value=clone(b),await nextTick(),ar(),T=!1},Ne=$e=>{c.value.includes($e)||c.value.push($e)},nr=$e=>{c.value=c.value.filter(er=>er!==$e)};watch(()=>e.error,$e=>{v.value=$e||"",Ue($e?"error":"")},{immediate:!0}),watch(()=>e.validateStatus,$e=>Ue($e||""));const sr=reactive({...toRefs(e),$el:g,size:a,validateState:d,labelId:u,inputIds:c,isGroup:de,hasLabel:Fe,addInputId:Ne,removeInputId:nr,resetField:hr,clearValidate:ar,validate:pr});return provide(formItemContextKey,sr),onMounted(()=>{e.prop&&(o==null||o.addField(sr),b=clone(he.value))}),onBeforeUnmount(()=>{o==null||o.removeField(sr)}),r({size:a,validateMessage:v,validateState:d,validate:pr,clearValidate:ar,resetField:hr}),($e,er)=>{var or;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:g,class:normalizeClass(unref(O)),role:unref(de)?"group":void 0,"aria-labelledby":unref(de)?unref(u):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(_).width==="auto","update-all":((or=unref(o))==null?void 0:or.labelWidth)==="auto"},{default:withCtx(()=>[unref(Fe)?(openBlock(),createBlock(resolveDynamicComponent(unref(_e)?"label":"div"),{key:0,id:unref(u),for:unref(_e),class:normalizeClass(unref(s).e("label")),style:normalizeStyle(unref(_))},{default:withCtx(()=>[renderSlot($e.$slots,"label",{label:unref(kt)},()=>[createTextVNode(toDisplayString(unref(kt)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(s).e("content")),style:normalizeStyle(unref(y))},[renderSlot($e.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(s).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(pe)?renderSlot($e.$slots,"error",{key:0,error:v.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ce))},toDisplayString(v.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$r)}}});var FormItem=_export_sfc(_sfc_main$V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(t){const r=window.getComputedStyle(t),e=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),o=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(a=>`${a}:${r.getPropertyValue(a)}`).join(";"),paddingSize:n,borderSize:o,boxSizing:e}}function calcTextareaHeight(t,r=1,e){var n;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:o,borderSize:i,boxSizing:a,contextStyle:s}=calculateNodeStyling(t);hiddenTextarea.setAttribute("style",`${s};${HIDDEN_STYLE}`),hiddenTextarea.value=t.value||t.placeholder||"";let u=hiddenTextarea.scrollHeight;const c={};a==="border-box"?u=u+i:a==="content-box"&&(u=u-o),hiddenTextarea.value="";const d=hiddenTextarea.scrollHeight-o;if(isNumber$1(r)){let m=d*r;a==="border-box"&&(m=m+o+i),u=Math.max(m,u),c.minHeight=`${m}px`}if(isNumber$1(e)){let m=d*e;a==="border-box"&&(m=m+o+i),u=Math.min(m,u)}return c.height=`${u}px`,(n=hiddenTextarea.parentNode)==null||n.removeChild(hiddenTextarea),hiddenTextarea=void 0,c}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})},autofocus:{type:Boolean,default:!1}}),inputEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t),input:t=>isString$2(t),change:t=>isString$2(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_hoisted_1$q=["role"],_hoisted_2$i=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],_hoisted_3$9=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],__default__$G=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$U=defineComponent({...__default__$G,props:inputProps,emits:inputEmits,setup(t,{expose:r,emit:e}){const n=t,o=useAttrs$1(),i=useSlots(),a=computed(()=>{const Rr={};return n.containerRole==="combobox"&&(Rr["aria-haspopup"]=o["aria-haspopup"],Rr["aria-owns"]=o["aria-owns"],Rr["aria-expanded"]=o["aria-expanded"]),Rr}),s=computed(()=>[n.type==="textarea"?_.b():T.b(),T.m(g.value),T.is("disabled",b.value),T.is("exceed",Ne.value),{[T.b("group")]:i.prepend||i.append,[T.bm("group","append")]:i.append,[T.bm("group","prepend")]:i.prepend,[T.m("prefix")]:i.prefix||n.prefixIcon,[T.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[T.bm("suffix","password-clear")]:dr.value&&pr.value},o.class]),u=computed(()=>[T.e("wrapper"),T.is("focus",he.value)]),c=useAttrs({excludeKeys:computed(()=>Object.keys(a.value))}),{form:d,formItem:m}=useFormItem(),{inputId:v}=useFormItemInputId(n,{formItemContext:m}),g=useFormSize(),b=useFormDisabled(),T=useNamespace("input"),_=useNamespace("textarea"),y=shallowRef(),O=shallowRef(),V=ref(!1),Ce=ref(!1),ae=ref(!1),Fe=ref(),_e=shallowRef(n.inputStyle),de=computed(()=>y.value||O.value),{wrapperRef:oe,isFocused:he,handleFocus:Ve,handleBlur:le}=useFocusController(de,{afterBlur(){var Rr;n.validateEvent&&((Rr=m==null?void 0:m.validate)==null||Rr.call(m,"blur").catch(Qr=>void 0))}}),ie=computed(()=>{var Rr;return(Rr=d==null?void 0:d.statusIcon)!=null?Rr:!1}),Ie=computed(()=>(m==null?void 0:m.validateState)||""),pe=computed(()=>Ie.value&&ValidateComponentsMap[Ie.value]),kt=computed(()=>ae.value?view_default:hide_default),Ue=computed(()=>[o.style,n.inputStyle]),Dt=computed(()=>[n.inputStyle,_e.value,{resize:n.resize}]),tr=computed(()=>isNil(n.modelValue)?"":String(n.modelValue)),dr=computed(()=>n.clearable&&!b.value&&!n.readonly&&!!tr.value&&(he.value||V.value)),pr=computed(()=>n.showPassword&&!b.value&&!n.readonly&&!!tr.value&&(!!tr.value||he.value)),ar=computed(()=>n.showWordLimit&&!!c.value.maxlength&&(n.type==="text"||n.type==="textarea")&&!b.value&&!n.readonly&&!n.showPassword),hr=computed(()=>tr.value.length),Ne=computed(()=>!!ar.value&&hr.value>Number(c.value.maxlength)),nr=computed(()=>!!i.suffix||!!n.suffixIcon||dr.value||n.showPassword||ar.value||!!Ie.value&&ie.value),[sr,$e]=useCursor(y);useResizeObserver(O,Rr=>{if(ze(),!ar.value||n.resize!=="both")return;const Qr=Rr[0],{width:hn}=Qr.contentRect;Fe.value={right:`calc(100% - ${hn+15+6}px)`}});const er=()=>{const{type:Rr,autosize:Qr}=n;if(!(!isClient||Rr!=="textarea"||!O.value))if(Qr){const hn=isObject$2(Qr)?Qr.minRows:void 0,Ur=isObject$2(Qr)?Qr.maxRows:void 0,qr=calcTextareaHeight(O.value,hn,Ur);_e.value={overflowY:"hidden",...qr},nextTick(()=>{O.value.offsetHeight,_e.value=qr})}else _e.value={minHeight:calcTextareaHeight(O.value).minHeight}},ze=(Rr=>{let Qr=!1;return()=>{var hn;if(Qr||!n.autosize)return;((hn=O.value)==null?void 0:hn.offsetParent)===null||(Rr(),Qr=!0)}})(er),rr=()=>{const Rr=de.value,Qr=n.formatter?n.formatter(tr.value):tr.value;!Rr||Rr.value===Qr||(Rr.value=Qr)},Et=async Rr=>{sr();let{value:Qr}=Rr.target;if(n.formatter&&(Qr=n.parser?n.parser(Qr):Qr),!Ce.value){if(Qr===tr.value){rr();return}e(UPDATE_MODEL_EVENT,Qr),e("input",Qr),await nextTick(),rr(),$e()}},Lt=Rr=>{e("change",Rr.target.value)},cr=Rr=>{e("compositionstart",Rr),Ce.value=!0},mr=Rr=>{var Qr;e("compositionupdate",Rr);const hn=(Qr=Rr.target)==null?void 0:Qr.value,Ur=hn[hn.length-1]||"";Ce.value=!isKorean(Ur)},vr=Rr=>{e("compositionend",Rr),Ce.value&&(Ce.value=!1,Et(Rr))},Tr=()=>{ae.value=!ae.value,Ir()},Ir=async()=>{var Rr;await nextTick(),(Rr=de.value)==null||Rr.focus()},kr=()=>{var Rr;return(Rr=de.value)==null?void 0:Rr.blur()},Ar=Rr=>{V.value=!1,e("mouseleave",Rr)},Nr=Rr=>{V.value=!0,e("mouseenter",Rr)},Mn=Rr=>{e("keydown",Rr)},Or=()=>{var Rr;(Rr=de.value)==null||Rr.select()},Pr=()=>{e(UPDATE_MODEL_EVENT,""),e("change",""),e("clear"),e("input","")};return watch(()=>n.modelValue,()=>{var Rr;nextTick(()=>er()),n.validateEvent&&((Rr=m==null?void 0:m.validate)==null||Rr.call(m,"change").catch(Qr=>void 0))}),watch(tr,()=>rr()),watch(()=>n.type,async()=>{await nextTick(),rr(),er()}),onMounted(()=>{!n.formatter&&n.parser,rr(),nextTick(er)}),r({input:y,textarea:O,ref:de,textareaStyle:Dt,autosize:toRef(n,"autosize"),focus:Ir,blur:kr,select:Or,clear:Pr,resizeTextarea:er}),(Rr,Qr)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref(a),{class:unref(s),style:unref(Ue),role:Rr.containerRole,onMouseenter:Nr,onMouseleave:Ar}),[createCommentVNode(" input "),Rr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),Rr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(T).be("group","prepend"))},[renderSlot(Rr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:oe,class:normalizeClass(unref(u))},[createCommentVNode(" prefix slot "),Rr.$slots.prefix||Rr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(T).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("prefix-inner"))},[renderSlot(Rr.$slots,"prefix"),Rr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(T).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Rr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(v),ref_key:"input",ref:y,class:unref(T).e("inner")},unref(c),{type:Rr.showPassword?ae.value?"text":"password":Rr.type,disabled:unref(b),formatter:Rr.formatter,parser:Rr.parser,readonly:Rr.readonly,autocomplete:Rr.autocomplete,tabindex:Rr.tabindex,"aria-label":Rr.label,placeholder:Rr.placeholder,style:Rr.inputStyle,form:n.form,autofocus:n.autofocus,onCompositionstart:cr,onCompositionupdate:mr,onCompositionend:vr,onInput:Et,onFocus:Qr[0]||(Qr[0]=(...hn)=>unref(Ve)&&unref(Ve)(...hn)),onBlur:Qr[1]||(Qr[1]=(...hn)=>unref(le)&&unref(le)(...hn)),onChange:Lt,onKeydown:Mn}),null,16,_hoisted_2$i),createCommentVNode(" suffix slot "),unref(nr)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(T).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("suffix-inner"))},[!unref(dr)||!unref(pr)||!unref(ar)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(Rr.$slots,"suffix"),Rr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(T).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Rr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(dr)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(T).e("icon"),unref(T).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:Pr},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(pr)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(T).e("icon"),unref(T).e("password")]),onClick:Tr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(kt))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(ar)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(T).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("count-inner"))},toDisplayString(unref(hr))+" / "+toDisplayString(unref(c).maxlength),3)],2)):createCommentVNode("v-if",!0),unref(Ie)&&unref(pe)&&unref(ie)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(T).e("icon"),unref(T).e("validateIcon"),unref(T).is("loading",unref(Ie)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(pe))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),Rr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(T).be("group","append"))},[renderSlot(Rr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(v),ref_key:"textarea",ref:O,class:unref(_).e("inner")},unref(c),{tabindex:Rr.tabindex,disabled:unref(b),readonly:Rr.readonly,autocomplete:Rr.autocomplete,style:unref(Dt),"aria-label":Rr.label,placeholder:Rr.placeholder,form:n.form,autofocus:n.autofocus,onCompositionstart:cr,onCompositionupdate:mr,onCompositionend:vr,onInput:Et,onFocus:Qr[2]||(Qr[2]=(...hn)=>unref(Ve)&&unref(Ve)(...hn)),onBlur:Qr[3]||(Qr[3]=(...hn)=>unref(le)&&unref(le)(...hn)),onChange:Lt,onKeydown:Mn}),null,16,_hoisted_3$9),unref(ar)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(Fe.value),class:normalizeClass(unref(T).e("count"))},toDisplayString(unref(hr))+" / "+toDisplayString(unref(c).maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$q)),[[vShow,Rr.type!=="hidden"]])}});var Input=_export_sfc(_sfc_main$U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle=({move:t,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${t}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$5="Thumb",_sfc_main$T=defineComponent({__name:"thumb",props:thumbProps,setup(t){const r=t,e=inject(scrollbarContextKey),n=useNamespace("scrollbar");e||throwError(COMPONENT_NAME$5,"can not inject scrollbar context");const o=ref(),i=ref(),a=ref({}),s=ref(!1);let u=!1,c=!1,d=isClient?document.onselectstart:null;const m=computed(()=>BAR_MAP[r.vertical?"vertical":"horizontal"]),v=computed(()=>renderThumbStyle({size:r.size,move:r.move,bar:m.value})),g=computed(()=>o.value[m.value.offset]**2/e.wrapElement[m.value.scrollSize]/r.ratio/i.value[m.value.offset]),b=Fe=>{var _e;if(Fe.stopPropagation(),Fe.ctrlKey||[1,2].includes(Fe.button))return;(_e=window.getSelection())==null||_e.removeAllRanges(),_(Fe);const de=Fe.currentTarget;de&&(a.value[m.value.axis]=de[m.value.offset]-(Fe[m.value.client]-de.getBoundingClientRect()[m.value.direction]))},T=Fe=>{if(!i.value||!o.value||!e.wrapElement)return;const _e=Math.abs(Fe.target.getBoundingClientRect()[m.value.direction]-Fe[m.value.client]),de=i.value[m.value.offset]/2,oe=(_e-de)*100*g.value/o.value[m.value.offset];e.wrapElement[m.value.scroll]=oe*e.wrapElement[m.value.scrollSize]/100},_=Fe=>{Fe.stopImmediatePropagation(),u=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",O),d=document.onselectstart,document.onselectstart=()=>!1},y=Fe=>{if(!o.value||!i.value||u===!1)return;const _e=a.value[m.value.axis];if(!_e)return;const de=(o.value.getBoundingClientRect()[m.value.direction]-Fe[m.value.client])*-1,oe=i.value[m.value.offset]-_e,he=(de-oe)*100*g.value/o.value[m.value.offset];e.wrapElement[m.value.scroll]=he*e.wrapElement[m.value.scrollSize]/100},O=()=>{u=!1,a.value[m.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",O),ae(),c&&(s.value=!1)},V=()=>{c=!1,s.value=!!r.size},Ce=()=>{c=!0,s.value=u};onBeforeUnmount(()=>{ae(),document.removeEventListener("mouseup",O)});const ae=()=>{document.onselectstart!==d&&(document.onselectstart=d)};return useEventListener(toRef(e,"scrollbarElement"),"mousemove",V),useEventListener(toRef(e,"scrollbarElement"),"mouseleave",Ce),(Fe,_e)=>(openBlock(),createBlock(Transition,{name:unref(n).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:o,class:normalizeClass([unref(n).e("bar"),unref(n).is(unref(m).key)]),onMousedown:T},[createBaseVNode("div",{ref_key:"thumb",ref:i,class:normalizeClass(unref(n).e("thumb")),style:normalizeStyle(unref(v)),onMousedown:b},null,38)],34),[[vShow,Fe.always||s.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc(_sfc_main$T,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),_sfc_main$S=defineComponent({__name:"bar",props:barProps,setup(t,{expose:r}){const e=t,n=ref(0),o=ref(0);return r({handleScroll:a=>{if(a){const s=a.offsetHeight-GAP,u=a.offsetWidth-GAP;o.value=a.scrollTop*100/s*e.ratioY,n.value=a.scrollLeft*100/u*e.ratioX}}}),(a,s)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:n.value,ratio:a.ratioX,size:a.width,always:a.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:o.value,ratio:a.ratioY,size:a.height,vertical:"",always:a.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc(_sfc_main$S,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),scrollbarEmits={scroll:({scrollTop:t,scrollLeft:r})=>[t,r].every(isNumber$1)},COMPONENT_NAME$4="ElScrollbar",__default__$F=defineComponent({name:COMPONENT_NAME$4}),_sfc_main$R=defineComponent({...__default__$F,props:scrollbarProps,emits:scrollbarEmits,setup(t,{expose:r,emit:e}){const n=t,o=useNamespace("scrollbar");let i,a;const s=ref(),u=ref(),c=ref(),d=ref("0"),m=ref("0"),v=ref(),g=ref(1),b=ref(1),T=computed(()=>{const _e={};return n.height&&(_e.height=addUnit(n.height)),n.maxHeight&&(_e.maxHeight=addUnit(n.maxHeight)),[n.wrapStyle,_e]}),_=computed(()=>[n.wrapClass,o.e("wrap"),{[o.em("wrap","hidden-default")]:!n.native}]),y=computed(()=>[o.e("view"),n.viewClass]),O=()=>{var _e;u.value&&((_e=v.value)==null||_e.handleScroll(u.value),e("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function V(_e,de){isObject$2(_e)?u.value.scrollTo(_e):isNumber$1(_e)&&isNumber$1(de)&&u.value.scrollTo(_e,de)}const Ce=_e=>{isNumber$1(_e)&&(u.value.scrollTop=_e)},ae=_e=>{isNumber$1(_e)&&(u.value.scrollLeft=_e)},Fe=()=>{if(!u.value)return;const _e=u.value.offsetHeight-GAP,de=u.value.offsetWidth-GAP,oe=_e**2/u.value.scrollHeight,he=de**2/u.value.scrollWidth,Ve=Math.max(oe,n.minSize),le=Math.max(he,n.minSize);g.value=oe/(_e-oe)/(Ve/(_e-Ve)),b.value=he/(de-he)/(le/(de-le)),m.value=Ve+GAP<_e?`${Ve}px`:"",d.value=le+GAP<de?`${le}px`:""};return watch(()=>n.noresize,_e=>{_e?(i==null||i(),a==null||a()):({stop:i}=useResizeObserver(c,Fe),a=useEventListener("resize",Fe))},{immediate:!0}),watch(()=>[n.maxHeight,n.height],()=>{n.native||nextTick(()=>{var _e;Fe(),u.value&&((_e=v.value)==null||_e.handleScroll(u.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:s,wrapElement:u})),onMounted(()=>{n.native||nextTick(()=>{Fe()})}),onUpdated(()=>Fe()),r({wrapRef:u,update:Fe,scrollTo:V,setScrollTop:Ce,setScrollLeft:ae,handleScroll:O}),(_e,de)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:s,class:normalizeClass(unref(o).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:u,class:normalizeClass(unref(_)),style:normalizeStyle(unref(T)),onScroll:O},[(openBlock(),createBlock(resolveDynamicComponent(_e.tag),{id:_e.id,ref_key:"resizeRef",ref:c,class:normalizeClass(unref(y)),style:normalizeStyle(_e.viewStyle),role:_e.role,"aria-label":_e.ariaLabel,"aria-orientation":_e.ariaOrientation},{default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),_e.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:v,height:m.value,width:d.value,always:_e.always,"ratio-x":b.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Scrollbar=_export_sfc(_sfc_main$R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$E=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$Q=defineComponent({...__default__$E,props:popperProps,setup(t,{expose:r}){const e=t,n=ref(),o=ref(),i=ref(),a=ref(),s=computed(()=>e.role),u={triggerRef:n,popperInstanceRef:o,contentRef:i,referenceRef:a,role:s};return r(u),provide(POPPER_INJECTION_KEY,u),(c,d)=>renderSlot(c.$slots,"default")}});var Popper=_export_sfc(_sfc_main$Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$D=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$P=defineComponent({...__default__$D,props:popperArrowProps,setup(t,{expose:r}){const e=t,n=useNamespace("popper"),{arrowOffset:o,arrowRef:i,arrowStyle:a}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>e.arrowOffset,s=>{o.value=s}),onBeforeUnmount(()=>{i.value=void 0}),r({arrowRef:i}),(s,u)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:i,class:normalizeClass(unref(n).e("arrow")),style:normalizeStyle(unref(a)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc(_sfc_main$P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(t,{slots:r,attrs:e}){var n;const o=inject(FORWARD_REF_INJECTION_KEY),i=useForwardRefDirective((n=o==null?void 0:o.setForwardRef)!=null?n:NOOP);return()=>{var a;const s=(a=r.default)==null?void 0:a.call(r,e);if(!s||s.length>1)return null;const u=findFirstLegitChild(s);return u?withDirectives(cloneVNode(u,e),[[i]]):null}}});function findFirstLegitChild(t){if(!t)return null;const r=t;for(const e of r){if(isObject$2(e))switch(e.type){case Comment:continue;case Text:case"svg":return wrapTextContent(e);case Fragment:return findFirstLegitChild(e.children);default:return e}return wrapTextContent(e)}return null}function wrapTextContent(t){const r=useNamespace("only-child");return createVNode("span",{class:r.e("content")},[t])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$C=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$O=defineComponent({...__default__$C,props:popperTriggerProps,setup(t,{expose:r}){const e=t,{role:n,triggerRef:o}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(o);const i=computed(()=>s.value?e.id:void 0),a=computed(()=>{if(n&&n.value==="tooltip")return e.open&&e.id?e.id:void 0}),s=computed(()=>{if(n&&n.value!=="tooltip")return n.value}),u=computed(()=>s.value?`${e.open}`:void 0);let c;return onMounted(()=>{watch(()=>e.virtualRef,d=>{d&&(o.value=unrefElement(d))},{immediate:!0}),watch(o,(d,m)=>{c==null||c(),c=void 0,isElement(d)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(v=>{var g;const b=e[v];b&&(d.addEventListener(v.slice(2).toLowerCase(),b),(g=m==null?void 0:m.removeEventListener)==null||g.call(m,v.slice(2).toLowerCase(),b))}),c=watch([i,a,s,u],v=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((g,b)=>{isNil(v[b])?d.removeAttribute(g):d.setAttribute(g,v[b])})},{immediate:!0})),isElement(m)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(v=>m.removeAttribute(v))},{immediate:!0})}),onBeforeUnmount(()=>{c==null||c(),c=void 0}),r({triggerRef:o}),(d,m)=>d.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},d.$attrs,{"aria-controls":unref(i),"aria-describedby":unref(a),"aria-expanded":unref(u),"aria-haspopup":unref(s)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc(_sfc_main$O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=t=>{const r=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},getVisibleElement=(t,r)=>{for(const e of t)if(!isHidden(e,r))return e},isHidden=(t,r)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},getEdges=t=>{const r=obtainAllFocusableElements(t),e=getVisibleElement(r,t),n=getVisibleElement(r.reverse(),t);return[e,n]},isSelectable=t=>t instanceof HTMLInputElement&&"select"in t,tryFocus=(t,r)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),t!==e&&isSelectable(t)&&r&&t.select()}};function removeFromStack(t,r){const e=[...t],n=t.indexOf(r);return n!==-1&&e.splice(n,1),e}const createFocusableStack=()=>{let t=[];return{push:n=>{const o=t[0];o&&n!==o&&o.pause(),t=removeFromStack(t,n),t.unshift(n)},remove:n=>{var o,i;t=removeFromStack(t,n),(i=(o=t[0])==null?void 0:o.resume)==null||i.call(o)}}},focusFirstDescendant=(t,r=!1)=>{const e=document.activeElement;for(const n of t)if(tryFocus(n,r),document.activeElement!==e)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=t=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:t}),_sfc_main$N=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:r}){const e=ref();let n,o;const{focusReason:i}=useFocusReason();useEscapeKeydown(b=>{t.trapped&&!a.paused&&r("release-requested",b)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=b=>{if(!t.loop&&!t.trapped||a.paused)return;const{key:T,altKey:_,ctrlKey:y,metaKey:O,currentTarget:V,shiftKey:Ce}=b,{loop:ae}=t,Fe=T===EVENT_CODE.tab&&!_&&!y&&!O,_e=document.activeElement;if(Fe&&_e){const de=V,[oe,he]=getEdges(de);if(oe&&he){if(!Ce&&_e===he){const le=createFocusOutPreventedEvent({focusReason:i.value});r("focusout-prevented",le),le.defaultPrevented||(b.preventDefault(),ae&&tryFocus(oe,!0))}else if(Ce&&[oe,de].includes(_e)){const le=createFocusOutPreventedEvent({focusReason:i.value});r("focusout-prevented",le),le.defaultPrevented||(b.preventDefault(),ae&&tryFocus(he,!0))}}else if(_e===de){const le=createFocusOutPreventedEvent({focusReason:i.value});r("focusout-prevented",le),le.defaultPrevented||b.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:e,onKeydown:s}),watch(()=>t.focusTrapEl,b=>{b&&(e.value=b)},{immediate:!0}),watch([e],([b],[T])=>{b&&(b.addEventListener("keydown",s),b.addEventListener("focusin",d),b.addEventListener("focusout",m)),T&&(T.removeEventListener("keydown",s),T.removeEventListener("focusin",d),T.removeEventListener("focusout",m))});const u=b=>{r(ON_TRAP_FOCUS_EVT,b)},c=b=>r(ON_RELEASE_FOCUS_EVT,b),d=b=>{const T=unref(e);if(!T)return;const _=b.target,y=b.relatedTarget,O=_&&T.contains(_);t.trapped||y&&T.contains(y)||(n=y),O&&r("focusin",b),!a.paused&&t.trapped&&(O?o=_:tryFocus(o,!0))},m=b=>{const T=unref(e);if(!(a.paused||!T))if(t.trapped){const _=b.relatedTarget;!isNil(_)&&!T.contains(_)&&setTimeout(()=>{if(!a.paused&&t.trapped){const y=createFocusOutPreventedEvent({focusReason:i.value});r("focusout-prevented",y),y.defaultPrevented||tryFocus(o,!0)}},0)}else{const _=b.target;_&&T.contains(_)||r("focusout",b)}};async function v(){await nextTick();const b=unref(e);if(b){focusableStack.push(a);const T=b.contains(document.activeElement)?n:document.activeElement;if(n=T,!b.contains(T)){const y=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);b.addEventListener(FOCUS_AFTER_TRAPPED,u),b.dispatchEvent(y),y.defaultPrevented||nextTick(()=>{let O=t.focusStartEl;isString$2(O)||(tryFocus(O),document.activeElement!==O&&(O="first")),O==="first"&&focusFirstDescendant(obtainAllFocusableElements(b),!0),(document.activeElement===T||O==="container")&&tryFocus(b)})}}}function g(){const b=unref(e);if(b){b.removeEventListener(FOCUS_AFTER_TRAPPED,u);const T=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:i.value}});b.addEventListener(FOCUS_AFTER_RELEASED,c),b.dispatchEvent(T),!T.defaultPrevented&&(i.value=="keyboard"||!isFocusCausedByUserEvent()||b.contains(document.activeElement))&&tryFocus(n??document.body),b.removeEventListener(FOCUS_AFTER_RELEASED,c),focusableStack.remove(a)}}return onMounted(()=>{t.trapped&&v(),watch(()=>t.trapped,b=>{b?v():g()})}),onBeforeUnmount(()=>{t.trapped&&g()}),{onKeydown:s}}});function _sfc_render$7(t,r,e,n,o,i){return renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var ElFocusTrap=_export_sfc(_sfc_main$N,[["render",_sfc_render$7],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(t,r=[])=>{const{placement:e,strategy:n,popperOptions:o}=t,i={placement:e,strategy:n,...o,modifiers:[...genModifiers(t),...r]};return deriveExtraModifiers(i,o==null?void 0:o.modifiers),i},unwrapMeasurableEl=t=>{if(isClient)return unrefElement(t)};function genModifiers(t){const{offset:r,gpuAcceleration:e,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function deriveExtraModifiers(t,r){r&&(t.modifiers=[...t.modifiers,...r??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=t=>{const{popperInstanceRef:r,contentRef:e,triggerRef:n,role:o}=inject(POPPER_INJECTION_KEY,void 0),i=ref(),a=ref(),s=computed(()=>({name:"eventListeners",enabled:!!t.visible})),u=computed(()=>{var y;const O=unref(i),V=(y=unref(a))!=null?y:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$2(O),options:{element:O,padding:V}}}),c=computed(()=>({onFirstUpdate:()=>{b()},...buildPopperOptions(t,[unref(u),unref(s)])})),d=computed(()=>unwrapMeasurableEl(t.referenceEl)||unref(n)),{attributes:m,state:v,styles:g,update:b,forceUpdate:T,instanceRef:_}=usePopper(d,e,c);return watch(_,y=>r.value=y),onMounted(()=>{watch(()=>{var y;return(y=unref(d))==null?void 0:y.getBoundingClientRect()},()=>{b()})}),{attributes:m,arrowRef:i,contentRef:e,instanceRef:_,state:v,styles:g,role:o,forceUpdate:T,update:b}},usePopperContentDOM=(t,{attributes:r,styles:e,role:n})=>{const{nextZIndex:o}=useZIndex(),i=useNamespace("popper"),a=computed(()=>unref(r).popper),s=ref(isNumber$1(t.zIndex)?t.zIndex:o()),u=computed(()=>[i.b(),i.is("pure",t.pure),i.is(t.effect),t.popperClass]),c=computed(()=>[{zIndex:unref(s)},unref(e).popper,t.popperStyle||{}]),d=computed(()=>n.value==="dialog"?"false":void 0),m=computed(()=>unref(e).arrow||{});return{ariaModal:d,arrowStyle:m,contentAttrs:a,contentClass:u,contentStyle:c,contentZIndex:s,updateZIndex:()=>{s.value=isNumber$1(t.zIndex)?t.zIndex:o()}}},usePopperContentFocusTrap=(t,r)=>{const e=ref(!1),n=ref();return{focusStartRef:n,trapped:e,onFocusAfterReleased:c=>{var d;((d=c.detail)==null?void 0:d.focusReason)!=="pointer"&&(n.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:c=>{t.visible&&!e.value&&(c.target&&(n.value=c.target),e.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},__default__$B=defineComponent({name:"ElPopperContent"}),_sfc_main$M=defineComponent({...__default__$B,props:popperContentProps,emits:popperContentEmits,setup(t,{expose:r,emit:e}){const n=t,{focusStartRef:o,trapped:i,onFocusAfterReleased:a,onFocusAfterTrapped:s,onFocusInTrap:u,onFocusoutPrevented:c,onReleaseRequested:d}=usePopperContentFocusTrap(n,e),{attributes:m,arrowRef:v,contentRef:g,styles:b,instanceRef:T,role:_,update:y}=usePopperContent(n),{ariaModal:O,arrowStyle:V,contentAttrs:Ce,contentClass:ae,contentStyle:Fe,updateZIndex:_e}=usePopperContentDOM(n,{styles:b,attributes:m,role:_}),de=inject(formItemContextKey,void 0),oe=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:V,arrowRef:v,arrowOffset:oe}),de&&(de.addInputId||de.removeInputId)&&provide(formItemContextKey,{...de,addInputId:NOOP,removeInputId:NOOP});let he;const Ve=(ie=!0)=>{y(),ie&&_e()},le=()=>{Ve(!1),n.visible&&n.focusOnShow?i.value=!0:n.visible===!1&&(i.value=!1)};return onMounted(()=>{watch(()=>n.triggerTargetEl,(ie,Ie)=>{he==null||he(),he=void 0;const pe=unref(ie||g.value),kt=unref(Ie||g.value);isElement(pe)&&(he=watch([_,()=>n.ariaLabel,O,()=>n.id],Ue=>{["role","aria-label","aria-modal","id"].forEach((Dt,tr)=>{isNil(Ue[tr])?pe.removeAttribute(Dt):pe.setAttribute(Dt,Ue[tr])})},{immediate:!0})),kt!==pe&&isElement(kt)&&["role","aria-label","aria-modal","id"].forEach(Ue=>{kt.removeAttribute(Ue)})},{immediate:!0}),watch(()=>n.visible,le,{immediate:!0})}),onBeforeUnmount(()=>{he==null||he(),he=void 0}),r({popperContentRef:g,popperInstanceRef:T,updatePopper:Ve,contentStyle:Fe}),(ie,Ie)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:g},unref(Ce),{style:unref(Fe),class:unref(ae),tabindex:"-1",onMouseenter:Ie[0]||(Ie[0]=pe=>ie.$emit("mouseenter",pe)),onMouseleave:Ie[1]||(Ie[1]=pe=>ie.$emit("mouseleave",pe))}),[createVNode(unref(ElFocusTrap),{trapped:unref(i),"trap-on-focus-in":!0,"focus-trap-el":unref(g),"focus-start-el":unref(o),onFocusAfterTrapped:unref(s),onFocusAfterReleased:unref(a),onFocusin:unref(u),onFocusoutPrevented:unref(c),onReleaseRequested:unref(d)},{default:withCtx(()=>[renderSlot(ie.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc(_sfc_main$M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(t,r)=>isArray$4(t)?t.includes(r):t===r,whenTrigger=(t,r,e)=>n=>{isTriggerType(unref(t),r)&&e(n)},__default__$A=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$L=defineComponent({...__default__$A,props:useTooltipTriggerProps,setup(t,{expose:r}){const e=t,n=useNamespace("tooltip"),{controlled:o,id:i,open:a,onOpen:s,onClose:u,onToggle:c}=inject(TOOLTIP_INJECTION_KEY,void 0),d=ref(null),m=()=>{if(unref(o)||e.disabled)return!0},v=toRef(e,"trigger"),g=composeEventHandlers(m,whenTrigger(v,"hover",s)),b=composeEventHandlers(m,whenTrigger(v,"hover",u)),T=composeEventHandlers(m,whenTrigger(v,"click",Ce=>{Ce.button===0&&c(Ce)})),_=composeEventHandlers(m,whenTrigger(v,"focus",s)),y=composeEventHandlers(m,whenTrigger(v,"focus",u)),O=composeEventHandlers(m,whenTrigger(v,"contextmenu",Ce=>{Ce.preventDefault(),c(Ce)})),V=composeEventHandlers(m,Ce=>{const{code:ae}=Ce;e.triggerKeys.includes(ae)&&(Ce.preventDefault(),c(Ce))});return r({triggerRef:d}),(Ce,ae)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(i),"virtual-ref":Ce.virtualRef,open:unref(a),"virtual-triggering":Ce.virtualTriggering,class:normalizeClass(unref(n).e("trigger")),onBlur:unref(y),onClick:unref(T),onContextmenu:unref(O),onFocus:unref(_),onMouseenter:unref(g),onMouseleave:unref(b),onKeydown:unref(V)},{default:withCtx(()=>[renderSlot(Ce.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc(_sfc_main$L,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const __default__$z=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$K=defineComponent({...__default__$z,props:useTooltipContentProps,setup(t,{expose:r}){const e=t,{selector:n}=usePopperContainerId(),o=useNamespace("tooltip"),i=ref(null),a=ref(!1),{controlled:s,id:u,open:c,trigger:d,onClose:m,onOpen:v,onShow:g,onHide:b,onBeforeShow:T,onBeforeHide:_}=inject(TOOLTIP_INJECTION_KEY,void 0),y=computed(()=>e.transition||`${o.namespace.value}-fade-in-linear`),O=computed(()=>e.persistent);onBeforeUnmount(()=>{a.value=!0});const V=computed(()=>unref(O)?!0:unref(c)),Ce=computed(()=>e.disabled?!1:unref(c)),ae=computed(()=>e.appendTo||n.value),Fe=computed(()=>{var Ue;return(Ue=e.style)!=null?Ue:{}}),_e=computed(()=>!unref(c)),de=()=>{b()},oe=()=>{if(unref(s))return!0},he=composeEventHandlers(oe,()=>{e.enterable&&unref(d)==="hover"&&v()}),Ve=composeEventHandlers(oe,()=>{unref(d)==="hover"&&m()}),le=()=>{var Ue,Dt;(Dt=(Ue=i.value)==null?void 0:Ue.updatePopper)==null||Dt.call(Ue),T==null||T()},ie=()=>{_==null||_()},Ie=()=>{g(),kt=onClickOutside(computed(()=>{var Ue;return(Ue=i.value)==null?void 0:Ue.popperContentRef}),()=>{if(unref(s))return;unref(d)!=="hover"&&m()})},pe=()=>{e.virtualTriggering||m()};let kt;return watch(()=>unref(c),Ue=>{Ue||kt==null||kt()},{flush:"post"}),watch(()=>e.content,()=>{var Ue,Dt;(Dt=(Ue=i.value)==null?void 0:Ue.updatePopper)==null||Dt.call(Ue)}),r({contentRef:i}),(Ue,Dt)=>(openBlock(),createBlock(Teleport,{disabled:!Ue.teleported,to:unref(ae)},[createVNode(Transition,{name:unref(y),onAfterLeave:de,onBeforeEnter:le,onAfterEnter:Ie,onBeforeLeave:ie},{default:withCtx(()=>[unref(V)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(u),ref_key:"contentRef",ref:i},Ue.$attrs,{"aria-label":Ue.ariaLabel,"aria-hidden":unref(_e),"boundaries-padding":Ue.boundariesPadding,"fallback-placements":Ue.fallbackPlacements,"gpu-acceleration":Ue.gpuAcceleration,offset:Ue.offset,placement:Ue.placement,"popper-options":Ue.popperOptions,strategy:Ue.strategy,effect:Ue.effect,enterable:Ue.enterable,pure:Ue.pure,"popper-class":Ue.popperClass,"popper-style":[Ue.popperStyle,unref(Fe)],"reference-el":Ue.referenceEl,"trigger-target-el":Ue.triggerTargetEl,visible:unref(Ce),"z-index":Ue.zIndex,onMouseenter:unref(he),onMouseleave:unref(Ve),onBlur:pe,onClose:unref(m)}),{default:withCtx(()=>[a.value?createCommentVNode("v-if",!0):renderSlot(Ue.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ce)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc(_sfc_main$K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const _hoisted_1$p=["innerHTML"],_hoisted_2$h={key:1},__default__$y=defineComponent({name:"ElTooltip"}),_sfc_main$J=defineComponent({...__default__$y,props:useTooltipProps,emits:tooltipEmits,setup(t,{expose:r,emit:e}){const n=t;usePopperContainer();const o=useId(),i=ref(),a=ref(),s=()=>{var y;const O=unref(i);O&&((y=O.popperInstanceRef)==null||y.update())},u=ref(!1),c=ref(),{show:d,hide:m,hasUpdateHandler:v}=useTooltipModelToggle({indicator:u,toggleReason:c}),{onOpen:g,onClose:b}=useDelayedToggle({showAfter:toRef(n,"showAfter"),hideAfter:toRef(n,"hideAfter"),autoClose:toRef(n,"autoClose"),open:d,close:m}),T=computed(()=>isBoolean$1(n.visible)&&!v.value);provide(TOOLTIP_INJECTION_KEY,{controlled:T,id:o,open:readonly(u),trigger:toRef(n,"trigger"),onOpen:y=>{g(y)},onClose:y=>{b(y)},onToggle:y=>{unref(u)?b(y):g(y)},onShow:()=>{e("show",c.value)},onHide:()=>{e("hide",c.value)},onBeforeShow:()=>{e("before-show",c.value)},onBeforeHide:()=>{e("before-hide",c.value)},updatePopper:s}),watch(()=>n.disabled,y=>{y&&u.value&&(u.value=!1)});const _=y=>{var O,V;const Ce=(V=(O=a.value)==null?void 0:O.contentRef)==null?void 0:V.popperContentRef,ae=(y==null?void 0:y.relatedTarget)||document.activeElement;return Ce&&Ce.contains(ae)};return onDeactivated(()=>u.value&&m()),r({popperRef:i,contentRef:a,isFocusInsideContent:_,updatePopper:s,onOpen:g,onClose:b,hide:m}),(y,O)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:i,role:y.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:withCtx(()=>[y.$slots.default?renderSlot(y.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:a,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:withCtx(()=>[renderSlot(y.$slots,"content",{},()=>[y.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:y.content},null,8,_hoisted_1$p)):(openBlock(),createElementBlock("span",_hoisted_2$h,toDisplayString(y.content),1))]),y.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc(_sfc_main$J,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$o=["textContent"],__default__$x=defineComponent({name:"ElBadge"}),_sfc_main$I=defineComponent({...__default__$x,props:badgeProps,setup(t,{expose:r}){const e=t,n=useNamespace("badge"),o=computed(()=>e.isDot?"":isNumber$1(e.value)&&isNumber$1(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return r({content:o}),(i,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(n).b())},[renderSlot(i.$slots,"default"),createVNode(Transition,{name:`${unref(n).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(n).e("content"),unref(n).em("content",i.type),unref(n).is("fixed",!!i.$slots.default),unref(n).is("dot",i.isDot)]),textContent:toDisplayString(unref(o))},null,10,_hoisted_1$o),[[vShow,!i.hidden&&(unref(o)||i.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc(_sfc_main$I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ElBadge=withInstall(Badge),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(t,r)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>t.type==="text"));const e=inject(buttonGroupContextKey,void 0),n=useGlobalConfig("button"),{form:o}=useFormItem(),i=useFormSize(computed(()=>e==null?void 0:e.size)),a=useFormDisabled(),s=ref(),u=useSlots(),c=computed(()=>t.type||(e==null?void 0:e.type)||""),d=computed(()=>{var b,T,_;return(_=(T=t.autoInsertSpace)!=null?T:(b=n.value)==null?void 0:b.autoInsertSpace)!=null?_:!1}),m=computed(()=>t.tag==="button"?{ariaDisabled:a.value||t.loading,disabled:a.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),v=computed(()=>{var b;const T=(b=u.default)==null?void 0:b.call(u);if(d.value&&(T==null?void 0:T.length)===1){const _=T[0];if((_==null?void 0:_.type)===Text){const y=_.children;return/^\p{Unified_Ideograph}{2}$/u.test(y.trim())}}return!1});return{_disabled:a,_size:i,_type:c,_ref:s,_props:m,shouldAddSpace:v,handleClick:b=>{t.nativeType==="reset"&&(o==null||o.resetFields()),r("click",b)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:t=>t instanceof MouseEvent};function bound01(t,r){isOnePointZero(t)&&(t="100%");var e=isPercentage(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function clamp01(t){return Math.min(1,Math.max(0,t))}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!==-1}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function convertToPercentage(t){return t<=1?"".concat(Number(t)*100,"%"):t}function pad2(t){return t.length===1?"0"+t:String(t)}function rgbToRgb(t,r,e){return{r:bound01(t,255)*255,g:bound01(r,255)*255,b:bound01(e,255)*255}}function rgbToHsl(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),o=Math.min(t,r,e),i=0,a=0,s=(n+o)/2;if(n===o)a=0,i=0;else{var u=n-o;switch(a=s>.5?u/(2-n-o):u/(n+o),n){case t:i=(r-e)/u+(r<e?6:0);break;case r:i=(e-t)/u+2;break;case e:i=(t-r)/u+4;break}i/=6}return{h:i,s:a,l:s}}function hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*(6*e):e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}function hslToRgb(t,r,e){var n,o,i;if(t=bound01(t,360),r=bound01(r,100),e=bound01(e,100),r===0)o=e,i=e,n=e;else{var a=e<.5?e*(1+r):e+r-e*r,s=2*e-a;n=hue2rgb(s,a,t+1/3),o=hue2rgb(s,a,t),i=hue2rgb(s,a,t-1/3)}return{r:n*255,g:o*255,b:i*255}}function rgbToHsv(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),o=Math.min(t,r,e),i=0,a=n,s=n-o,u=n===0?0:s/n;if(n===o)i=0;else{switch(n){case t:i=(r-e)/s+(r<e?6:0);break;case r:i=(e-t)/s+2;break;case e:i=(t-r)/s+4;break}i/=6}return{h:i,s:u,v:a}}function hsvToRgb(t,r,e){t=bound01(t,360)*6,r=bound01(r,100),e=bound01(e,100);var n=Math.floor(t),o=t-n,i=e*(1-r),a=e*(1-o*r),s=e*(1-(1-o)*r),u=n%6,c=[e,a,i,i,s,e][u],d=[s,e,e,a,i,i][u],m=[i,i,s,e,e,a][u];return{r:c*255,g:d*255,b:m*255}}function rgbToHex(t,r,e,n){var o=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function rgbaToHex(t,r,e,n,o){var i=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16)),pad2(convertDecimalToHex(n))];return o&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}function parseIntFromHex(t){return parseInt(t,16)}function numberInputToObject(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(t){var r={r:0,g:0,b:0},e=1,n=null,o=null,i=null,a=!1,s=!1;return typeof t=="string"&&(t=stringInputToObject(t)),typeof t=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(r=rgbToRgb(t.r,t.g,t.b),a=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(n=convertToPercentage(t.s),o=convertToPercentage(t.v),r=hsvToRgb(t.h,n,o),a=!0,s="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(n=convertToPercentage(t.s),i=convertToPercentage(t.l),r=hslToRgb(t.h,n,i),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=boundAlpha(e),{ok:a,format:t.format||s,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(names[t])t=names[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=matchers.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=matchers.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=matchers.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=matchers.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=matchers.hex8.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),a:convertHexToDecimal(e[4]),format:r?"name":"hex8"}:(e=matchers.hex6.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),format:r?"name":"hex"}:(e=matchers.hex4.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),a:convertHexToDecimal(e[4]+e[4]),format:r?"name":"hex8"}:(e=matchers.hex3.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),format:r?"name":"hex"}:!1)))))))))}function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(String(t))}var TinyColor=function(){function t(r,e){r===void 0&&(r=""),e===void 0&&(e={});var n;if(r instanceof t)return r;typeof r=="number"&&(r=numberInputToObject(r)),this.originalInput=r;var o=inputToRGB(r);this.originalInput=r,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:o.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),e,n,o,i=r.r/255,a=r.g/255,s=r.b/255;return i<=.03928?e=i/12.92:e=Math.pow((i+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),.2126*e+.7152*n+.0722*o},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=boundAlpha(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=rgbToHsv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=rgbToHsv(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=rgbToHsl(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=rgbToHsl(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),rgbToHex(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),rgbaToHex(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(e,", ").concat(n,")"):"rgba(".concat(r,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(e){return"".concat(Math.round(bound01(e,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(e){return Math.round(bound01(e,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+rgbToHex(this.r,this.g,this.b,!1),e=0,n=Object.entries(names);e<n.length;e++){var o=n[e],i=o[0],a=o[1];if(r===a)return i}return!1},t.prototype.toString=function(r){var e=!!r;r=r??this.format;var n=!1,o=this.a<1&&this.a>=0,i=!e&&o&&(r.startsWith("hex")||r==="name");return i?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l+=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.brighten=function(r){r===void 0&&(r=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),new t(e)},t.prototype.darken=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l-=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s-=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.saturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s+=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var e=this.toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,new t(e)},t.prototype.mix=function(r,e){e===void 0&&(e=50);var n=this.toRgb(),o=new t(r).toRgb(),i=e/100,a={r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a};return new t(a)},t.prototype.analogous=function(r,e){r===void 0&&(r=6),e===void 0&&(e=30);var n=this.toHsl(),o=360/e,i=[this];for(n.h=(n.h-(o*r>>1)+720)%360;--r;)n.h=(n.h+o)%360,i.push(new t(n));return i},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var e=this.toHsv(),n=e.h,o=e.s,i=e.v,a=[],s=1/r;r--;)a.push(new t({h:n,s:o,v:i})),i=(i+s)%1;return a},t.prototype.splitcomplement=function(){var r=this.toHsl(),e=r.h;return[this,new t({h:(e+72)%360,s:r.s,l:r.l}),new t({h:(e+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var e=this.toRgb(),n=new t(r).toRgb(),o=e.a+n.a*(1-e.a);return new t({r:(e.r*e.a+n.r*n.a*(1-e.a))/o,g:(e.g*e.a+n.g*n.a*(1-e.a))/o,b:(e.b*e.a+n.b*n.a*(1-e.a))/o,a:o})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var e=this.toHsl(),n=e.h,o=[this],i=360/r,a=1;a<r;a++)o.push(new t({h:(n+a*i)%360,s:e.s,l:e.l}));return o},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}();function darken(t,r=20){return t.mix("#141414",r).toString()}function useButtonCustomStyle(t){const r=useFormDisabled(),e=useNamespace("button");return computed(()=>{let n={};const o=t.color;if(o){const i=new TinyColor(o),a=t.dark?i.tint(20).toString():darken(i,20);if(t.plain)n=e.cssVarBlock({"bg-color":t.dark?darken(i,90):i.tint(90).toString(),"text-color":o,"border-color":t.dark?darken(i,50):i.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":a,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":a}),r.value&&(n[e.cssVarBlockName("disabled-bg-color")]=t.dark?darken(i,90):i.tint(90).toString(),n[e.cssVarBlockName("disabled-text-color")]=t.dark?darken(i,50):i.tint(50).toString(),n[e.cssVarBlockName("disabled-border-color")]=t.dark?darken(i,80):i.tint(80).toString());else{const s=t.dark?darken(i,30):i.tint(30).toString(),u=i.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(n=e.cssVarBlock({"bg-color":o,"text-color":u,"border-color":o,"hover-bg-color":s,"hover-text-color":u,"hover-border-color":s,"active-bg-color":a,"active-border-color":a}),r.value){const c=t.dark?darken(i,50):i.tint(50).toString();n[e.cssVarBlockName("disabled-bg-color")]=c,n[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,n[e.cssVarBlockName("disabled-border-color")]=c}}}return n})}const __default__$w=defineComponent({name:"ElButton"}),_sfc_main$H=defineComponent({...__default__$w,props:buttonProps,emits:buttonEmits,setup(t,{expose:r,emit:e}){const n=t,o=useButtonCustomStyle(n),i=useNamespace("button"),{_ref:a,_size:s,_type:u,_disabled:c,_props:d,shouldAddSpace:m,handleClick:v}=useButton(n,e);return r({ref:a,size:s,type:u,disabled:c,shouldAddSpace:m}),(g,b)=>(openBlock(),createBlock(resolveDynamicComponent(g.tag),mergeProps({ref_key:"_ref",ref:a},unref(d),{class:[unref(i).b(),unref(i).m(unref(u)),unref(i).m(unref(s)),unref(i).is("disabled",unref(c)),unref(i).is("loading",g.loading),unref(i).is("plain",g.plain),unref(i).is("round",g.round),unref(i).is("circle",g.circle),unref(i).is("text",g.text),unref(i).is("link",g.link),unref(i).is("has-bg",g.bg)],style:unref(o),onClick:unref(v)}),{default:withCtx(()=>[g.loading?(openBlock(),createElementBlock(Fragment,{key:0},[g.$slots.loading?renderSlot(g.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(i).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.loadingIcon)))]),_:1},8,["class"]))],64)):g.icon||g.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[g.icon?(openBlock(),createBlock(resolveDynamicComponent(g.icon),{key:0})):renderSlot(g.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),g.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(i).em("text","expand")]:unref(m)})},[renderSlot(g.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc(_sfc_main$H,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$v=defineComponent({name:"ElButtonGroup"}),_sfc_main$G=defineComponent({...__default__$v,props:buttonGroupProps,setup(t){const r=t;provide(buttonGroupContextKey,reactive({size:toRef(r,"size"),type:toRef(r,"type")}));const e=useNamespace("button");return(n,o)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(e).b("group")}`)},[renderSlot(n.$slots,"default")],2))}});var ButtonGroup=_export_sfc(_sfc_main$G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup});withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dayjs_min={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=1e3,n=6e4,o=36e5,i="millisecond",a="second",s="minute",u="hour",c="day",d="week",m="month",v="quarter",g="year",b="date",T="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ie){var pe=["th","st","nd","rd"],kt=Ie%100;return"["+Ie+(pe[(kt-20)%10]||pe[kt]||pe[0])+"]"}},V=function(Ie,pe,kt){var Ue=String(Ie);return!Ue||Ue.length>=pe?Ie:""+Array(pe+1-Ue.length).join(kt)+Ie},Ce={s:V,z:function(Ie){var pe=-Ie.utcOffset(),kt=Math.abs(pe),Ue=Math.floor(kt/60),Dt=kt%60;return(pe<=0?"+":"-")+V(Ue,2,"0")+":"+V(Dt,2,"0")},m:function Ie(pe,kt){if(pe.date()<kt.date())return-Ie(kt,pe);var Ue=12*(kt.year()-pe.year())+(kt.month()-pe.month()),Dt=pe.clone().add(Ue,m),tr=kt-Dt<0,dr=pe.clone().add(Ue+(tr?-1:1),m);return+(-(Ue+(kt-Dt)/(tr?Dt-dr:dr-Dt))||0)},a:function(Ie){return Ie<0?Math.ceil(Ie)||0:Math.floor(Ie)},p:function(Ie){return{M:m,y:g,w:d,d:c,D:b,h:u,m:s,s:a,ms:i,Q:v}[Ie]||String(Ie||"").toLowerCase().replace(/s$/,"")},u:function(Ie){return Ie===void 0}},ae="en",Fe={};Fe[ae]=O;var _e="$isDayjsObject",de=function(Ie){return Ie instanceof le||!(!Ie||!Ie[_e])},oe=function Ie(pe,kt,Ue){var Dt;if(!pe)return ae;if(typeof pe=="string"){var tr=pe.toLowerCase();Fe[tr]&&(Dt=tr),kt&&(Fe[tr]=kt,Dt=tr);var dr=pe.split("-");if(!Dt&&dr.length>1)return Ie(dr[0])}else{var pr=pe.name;Fe[pr]=pe,Dt=pr}return!Ue&&Dt&&(ae=Dt),Dt||!Ue&&ae},he=function(Ie,pe){if(de(Ie))return Ie.clone();var kt=typeof pe=="object"?pe:{};return kt.date=Ie,kt.args=arguments,new le(kt)},Ve=Ce;Ve.l=oe,Ve.i=de,Ve.w=function(Ie,pe){return he(Ie,{locale:pe.$L,utc:pe.$u,x:pe.$x,$offset:pe.$offset})};var le=function(){function Ie(kt){this.$L=oe(kt.locale,null,!0),this.parse(kt),this.$x=this.$x||kt.x||{},this[_e]=!0}var pe=Ie.prototype;return pe.parse=function(kt){this.$d=function(Ue){var Dt=Ue.date,tr=Ue.utc;if(Dt===null)return new Date(NaN);if(Ve.u(Dt))return new Date;if(Dt instanceof Date)return new Date(Dt);if(typeof Dt=="string"&&!/Z$/i.test(Dt)){var dr=Dt.match(_);if(dr){var pr=dr[2]-1||0,ar=(dr[7]||"0").substring(0,3);return tr?new Date(Date.UTC(dr[1],pr,dr[3]||1,dr[4]||0,dr[5]||0,dr[6]||0,ar)):new Date(dr[1],pr,dr[3]||1,dr[4]||0,dr[5]||0,dr[6]||0,ar)}}return new Date(Dt)}(kt),this.init()},pe.init=function(){var kt=this.$d;this.$y=kt.getFullYear(),this.$M=kt.getMonth(),this.$D=kt.getDate(),this.$W=kt.getDay(),this.$H=kt.getHours(),this.$m=kt.getMinutes(),this.$s=kt.getSeconds(),this.$ms=kt.getMilliseconds()},pe.$utils=function(){return Ve},pe.isValid=function(){return this.$d.toString()!==T},pe.isSame=function(kt,Ue){var Dt=he(kt);return this.startOf(Ue)<=Dt&&Dt<=this.endOf(Ue)},pe.isAfter=function(kt,Ue){return he(kt)<this.startOf(Ue)},pe.isBefore=function(kt,Ue){return this.endOf(Ue)<he(kt)},pe.$g=function(kt,Ue,Dt){return Ve.u(kt)?this[Ue]:this.set(Dt,kt)},pe.unix=function(){return Math.floor(this.valueOf()/1e3)},pe.valueOf=function(){return this.$d.getTime()},pe.startOf=function(kt,Ue){var Dt=this,tr=!!Ve.u(Ue)||Ue,dr=Ve.p(kt),pr=function(or,ze){var rr=Ve.w(Dt.$u?Date.UTC(Dt.$y,ze,or):new Date(Dt.$y,ze,or),Dt);return tr?rr:rr.endOf(c)},ar=function(or,ze){return Ve.w(Dt.toDate()[or].apply(Dt.toDate("s"),(tr?[0,0,0,0]:[23,59,59,999]).slice(ze)),Dt)},hr=this.$W,Ne=this.$M,nr=this.$D,sr="set"+(this.$u?"UTC":"");switch(dr){case g:return tr?pr(1,0):pr(31,11);case m:return tr?pr(1,Ne):pr(0,Ne+1);case d:var $e=this.$locale().weekStart||0,er=(hr<$e?hr+7:hr)-$e;return pr(tr?nr-er:nr+(6-er),Ne);case c:case b:return ar(sr+"Hours",0);case u:return ar(sr+"Minutes",1);case s:return ar(sr+"Seconds",2);case a:return ar(sr+"Milliseconds",3);default:return this.clone()}},pe.endOf=function(kt){return this.startOf(kt,!1)},pe.$set=function(kt,Ue){var Dt,tr=Ve.p(kt),dr="set"+(this.$u?"UTC":""),pr=(Dt={},Dt[c]=dr+"Date",Dt[b]=dr+"Date",Dt[m]=dr+"Month",Dt[g]=dr+"FullYear",Dt[u]=dr+"Hours",Dt[s]=dr+"Minutes",Dt[a]=dr+"Seconds",Dt[i]=dr+"Milliseconds",Dt)[tr],ar=tr===c?this.$D+(Ue-this.$W):Ue;if(tr===m||tr===g){var hr=this.clone().set(b,1);hr.$d[pr](ar),hr.init(),this.$d=hr.set(b,Math.min(this.$D,hr.daysInMonth())).$d}else pr&&this.$d[pr](ar);return this.init(),this},pe.set=function(kt,Ue){return this.clone().$set(kt,Ue)},pe.get=function(kt){return this[Ve.p(kt)]()},pe.add=function(kt,Ue){var Dt,tr=this;kt=Number(kt);var dr=Ve.p(Ue),pr=function(Ne){var nr=he(tr);return Ve.w(nr.date(nr.date()+Math.round(Ne*kt)),tr)};if(dr===m)return this.set(m,this.$M+kt);if(dr===g)return this.set(g,this.$y+kt);if(dr===c)return pr(1);if(dr===d)return pr(7);var ar=(Dt={},Dt[s]=n,Dt[u]=o,Dt[a]=e,Dt)[dr]||1,hr=this.$d.getTime()+kt*ar;return Ve.w(hr,this)},pe.subtract=function(kt,Ue){return this.add(-1*kt,Ue)},pe.format=function(kt){var Ue=this,Dt=this.$locale();if(!this.isValid())return Dt.invalidDate||T;var tr=kt||"YYYY-MM-DDTHH:mm:ssZ",dr=Ve.z(this),pr=this.$H,ar=this.$m,hr=this.$M,Ne=Dt.weekdays,nr=Dt.months,sr=Dt.meridiem,$e=function(ze,rr,Et,Lt){return ze&&(ze[rr]||ze(Ue,tr))||Et[rr].slice(0,Lt)},er=function(ze){return Ve.s(pr%12||12,ze,"0")},or=sr||function(ze,rr,Et){var Lt=ze<12?"AM":"PM";return Et?Lt.toLowerCase():Lt};return tr.replace(y,function(ze,rr){return rr||function(Et){switch(Et){case"YY":return String(Ue.$y).slice(-2);case"YYYY":return Ve.s(Ue.$y,4,"0");case"M":return hr+1;case"MM":return Ve.s(hr+1,2,"0");case"MMM":return $e(Dt.monthsShort,hr,nr,3);case"MMMM":return $e(nr,hr);case"D":return Ue.$D;case"DD":return Ve.s(Ue.$D,2,"0");case"d":return String(Ue.$W);case"dd":return $e(Dt.weekdaysMin,Ue.$W,Ne,2);case"ddd":return $e(Dt.weekdaysShort,Ue.$W,Ne,3);case"dddd":return Ne[Ue.$W];case"H":return String(pr);case"HH":return Ve.s(pr,2,"0");case"h":return er(1);case"hh":return er(2);case"a":return or(pr,ar,!0);case"A":return or(pr,ar,!1);case"m":return String(ar);case"mm":return Ve.s(ar,2,"0");case"s":return String(Ue.$s);case"ss":return Ve.s(Ue.$s,2,"0");case"SSS":return Ve.s(Ue.$ms,3,"0");case"Z":return dr}return null}(ze)||dr.replace(":","")})},pe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},pe.diff=function(kt,Ue,Dt){var tr,dr=this,pr=Ve.p(Ue),ar=he(kt),hr=(ar.utcOffset()-this.utcOffset())*n,Ne=this-ar,nr=function(){return Ve.m(dr,ar)};switch(pr){case g:tr=nr()/12;break;case m:tr=nr();break;case v:tr=nr()/3;break;case d:tr=(Ne-hr)/6048e5;break;case c:tr=(Ne-hr)/864e5;break;case u:tr=Ne/o;break;case s:tr=Ne/n;break;case a:tr=Ne/e;break;default:tr=Ne}return Dt?tr:Ve.a(tr)},pe.daysInMonth=function(){return this.endOf(m).$D},pe.$locale=function(){return Fe[this.$L]},pe.locale=function(kt,Ue){if(!kt)return this.$L;var Dt=this.clone(),tr=oe(kt,Ue,!0);return tr&&(Dt.$L=tr),Dt},pe.clone=function(){return Ve.w(this.$d,this)},pe.toDate=function(){return new Date(this.valueOf())},pe.toJSON=function(){return this.isValid()?this.toISOString():null},pe.toISOString=function(){return this.$d.toISOString()},pe.toString=function(){return this.$d.toUTCString()},Ie}(),ie=le.prototype;return he.prototype=ie,[["$ms",i],["$s",a],["$m",s],["$H",u],["$W",c],["$M",m],["$y",g],["$D",b]].forEach(function(Ie){ie[Ie[1]]=function(pe){return this.$g(pe,Ie[0],Ie[1])}}),he.extend=function(Ie,pe){return Ie.$i||(Ie(pe,le,he),Ie.$i=!0),he},he.locale=oe,he.isDayjs=de,he.unix=function(Ie){return he(1e3*Ie)},he.en=Fe[ae],he.Ls=Fe,he.p={},he})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",t=>startClick=t),document.addEventListener("mouseup",t=>{for(const r of nodeList.values())for(const{documentHandler:e}of r)e(t,startClick)}));function createDocumentHandler(t,r){let e=[];return Array.isArray(r.arg)?e=r.arg:isElement(r.arg)&&e.push(r.arg),function(n,o){const i=r.instance.popperRef,a=n.target,s=o==null?void 0:o.target,u=!r||!r.instance,c=!a||!s,d=t.contains(a)||t.contains(s),m=t===a,v=e.length&&e.some(b=>b==null?void 0:b.contains(a))||e.length&&e.includes(s),g=i&&(i.contains(a)||i.contains(s));u||c||d||m||v||g||r.value(n,o)}}const ClickOutside={beforeMount(t,r){nodeList.has(t)||nodeList.set(t,[]),nodeList.get(t).push({documentHandler:createDocumentHandler(t,r),bindingFn:r.value})},updated(t,r){nodeList.has(t)||nodeList.set(t,[]);const e=nodeList.get(t),n=e.findIndex(i=>i.bindingFn===r.oldValue),o={documentHandler:createDocumentHandler(t,r),bindingFn:r.value};n>=0?e.splice(n,1,o):e.push(o)},unmounted(t){nodeList.delete(t)}},checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),change:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:t,isChecked:r})=>{const e=inject(checkboxGroupContextKey,void 0),n=computed(()=>{var i,a;const s=(i=e==null?void 0:e.max)==null?void 0:i.value,u=(a=e==null?void 0:e.min)==null?void 0:a.value;return!isUndefined$1(s)&&t.value.length>=s&&!r.value||!isUndefined$1(u)&&t.value.length<=u&&r.value});return{isDisabled:useFormDisabled(computed(()=>(e==null?void 0:e.disabled.value)||n.value)),isLimitDisabled:n}},useCheckboxEvent=(t,{model:r,isLimitExceeded:e,hasOwnLabel:n,isDisabled:o,isLabeledByFormItem:i})=>{const a=inject(checkboxGroupContextKey,void 0),{formItem:s}=useFormItem(),{emit:u}=getCurrentInstance();function c(b){var T,_;return b===t.trueLabel||b===!0?(T=t.trueLabel)!=null?T:!0:(_=t.falseLabel)!=null?_:!1}function d(b,T){u("change",c(b),T)}function m(b){if(e.value)return;const T=b.target;u("change",c(T.checked),b)}async function v(b){e.value||!n.value&&!o.value&&i.value&&(b.composedPath().some(y=>y.tagName==="LABEL")||(r.value=c([!1,t.falseLabel].includes(r.value)),await nextTick(),d(r.value,b)))}const g=computed(()=>(a==null?void 0:a.validateEvent)||t.validateEvent);return watch(()=>t.modelValue,()=>{g.value&&(s==null||s.validate("change").catch(b=>void 0))}),{handleChange:m,onClickRoot:v}},useCheckboxModel=t=>{const r=ref(!1),{emit:e}=getCurrentInstance(),n=inject(checkboxGroupContextKey,void 0),o=computed(()=>isUndefined$1(n)===!1),i=ref(!1);return{model:computed({get(){var s,u;return o.value?(s=n==null?void 0:n.modelValue)==null?void 0:s.value:(u=t.modelValue)!=null?u:r.value},set(s){var u,c;o.value&&isArray$4(s)?(i.value=((u=n==null?void 0:n.max)==null?void 0:u.value)!==void 0&&s.length>(n==null?void 0:n.max.value),i.value===!1&&((c=n==null?void 0:n.changeEvent)==null||c.call(n,s))):(e(UPDATE_MODEL_EVENT,s),r.value=s)}}),isGroup:o,isLimitExceeded:i}},useCheckboxStatus=(t,r,{model:e})=>{const n=inject(checkboxGroupContextKey,void 0),o=ref(!1),i=computed(()=>{const c=e.value;return isBoolean$1(c)?c:isArray$4(c)?isObject$2(t.label)?c.map(toRaw).some(d=>isEqual(d,t.label)):c.map(toRaw).includes(t.label):c!=null?c===t.trueLabel:!!c}),a=useFormSize(computed(()=>{var c;return(c=n==null?void 0:n.size)==null?void 0:c.value}),{prop:!0}),s=useFormSize(computed(()=>{var c;return(c=n==null?void 0:n.size)==null?void 0:c.value})),u=computed(()=>!!r.default||!isNil(t.label));return{checkboxButtonSize:a,isChecked:i,isFocused:o,checkboxSize:s,hasOwnLabel:u}},setStoreValue=(t,{model:r})=>{function e(){isArray$4(r.value)&&!r.value.includes(t.label)?r.value.push(t.label):r.value=t.trueLabel||!0}t.checked&&e()},useCheckbox=(t,r)=>{const{formItem:e}=useFormItem(),{model:n,isGroup:o,isLimitExceeded:i}=useCheckboxModel(t),{isFocused:a,isChecked:s,checkboxButtonSize:u,checkboxSize:c,hasOwnLabel:d}=useCheckboxStatus(t,r,{model:n}),{isDisabled:m}=useCheckboxDisabled({model:n,isChecked:s}),{inputId:v,isLabeledByFormItem:g}=useFormItemInputId(t,{formItemContext:e,disableIdGeneration:d,disableIdManagement:o}),{handleChange:b,onClickRoot:T}=useCheckboxEvent(t,{model:n,isLimitExceeded:i,hasOwnLabel:d,isDisabled:m,isLabeledByFormItem:g});return setStoreValue(t,{model:n}),{inputId:v,isLabeledByFormItem:g,isChecked:s,isDisabled:m,isFocused:a,checkboxButtonSize:u,checkboxSize:c,hasOwnLabel:d,model:n,handleChange:b,onClickRoot:T}},_hoisted_1$n=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],_hoisted_2$g=["id","indeterminate","disabled","value","name","tabindex"],__default__$u=defineComponent({name:"ElCheckbox"}),_sfc_main$F=defineComponent({...__default__$u,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{inputId:n,isLabeledByFormItem:o,isChecked:i,isDisabled:a,isFocused:s,checkboxSize:u,hasOwnLabel:c,model:d,handleChange:m,onClickRoot:v}=useCheckbox(r,e),g=useNamespace("checkbox"),b=computed(()=>[g.b(),g.m(u.value),g.is("disabled",a.value),g.is("bordered",r.border),g.is("checked",i.value)]),T=computed(()=>[g.e("input"),g.is("disabled",a.value),g.is("checked",i.value),g.is("indeterminate",r.indeterminate),g.is("focus",s.value)]);return(_,y)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(c)&&unref(o)?"span":"label"),{class:normalizeClass(unref(b)),"aria-controls":_.indeterminate?_.controls:null,onClick:unref(v)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(T))},[_.trueLabel||_.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(n),"onUpdate:modelValue":y[0]||(y[0]=O=>isRef(d)?d.value=O:null),class:normalizeClass(unref(g).e("original")),type:"checkbox",indeterminate:_.indeterminate,name:_.name,tabindex:_.tabindex,disabled:unref(a),"true-value":_.trueLabel,"false-value":_.falseLabel,onChange:y[1]||(y[1]=(...O)=>unref(m)&&unref(m)(...O)),onFocus:y[2]||(y[2]=O=>s.value=!0),onBlur:y[3]||(y[3]=O=>s.value=!1),onClick:y[4]||(y[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$n)),[[vModelCheckbox,unref(d)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(n),"onUpdate:modelValue":y[5]||(y[5]=O=>isRef(d)?d.value=O:null),class:normalizeClass(unref(g).e("original")),type:"checkbox",indeterminate:_.indeterminate,disabled:unref(a),value:_.label,name:_.name,tabindex:_.tabindex,onChange:y[6]||(y[6]=(...O)=>unref(m)&&unref(m)(...O)),onFocus:y[7]||(y[7]=O=>s.value=!0),onBlur:y[8]||(y[8]=O=>s.value=!1),onClick:y[9]||(y[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$g)),[[vModelCheckbox,unref(d)]]),createBaseVNode("span",{class:normalizeClass(unref(g).e("inner"))},null,2)],2),unref(c)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).e("label"))},[renderSlot(_.$slots,"default"),_.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(_.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc(_sfc_main$F,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const _hoisted_1$m=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$f=["name","tabindex","disabled","value"],__default__$t=defineComponent({name:"ElCheckboxButton"}),_sfc_main$E=defineComponent({...__default__$t,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{isFocused:n,isChecked:o,isDisabled:i,checkboxButtonSize:a,model:s,handleChange:u}=useCheckbox(r,e),c=inject(checkboxGroupContextKey,void 0),d=useNamespace("checkbox"),m=computed(()=>{var g,b,T,_;const y=(b=(g=c==null?void 0:c.fill)==null?void 0:g.value)!=null?b:"";return{backgroundColor:y,borderColor:y,color:(_=(T=c==null?void 0:c.textColor)==null?void 0:T.value)!=null?_:"",boxShadow:y?`-1px 0 0 0 ${y}`:void 0}}),v=computed(()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",i.value),d.is("checked",o.value),d.is("focus",n.value)]);return(g,b)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(v))},[g.trueLabel||g.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":b[0]||(b[0]=T=>isRef(s)?s.value=T:null),class:normalizeClass(unref(d).be("button","original")),type:"checkbox",name:g.name,tabindex:g.tabindex,disabled:unref(i),"true-value":g.trueLabel,"false-value":g.falseLabel,onChange:b[1]||(b[1]=(...T)=>unref(u)&&unref(u)(...T)),onFocus:b[2]||(b[2]=T=>n.value=!0),onBlur:b[3]||(b[3]=T=>n.value=!1),onClick:b[4]||(b[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$m)),[[vModelCheckbox,unref(s)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":b[5]||(b[5]=T=>isRef(s)?s.value=T:null),class:normalizeClass(unref(d).be("button","original")),type:"checkbox",name:g.name,tabindex:g.tabindex,disabled:unref(i),value:g.label,onChange:b[6]||(b[6]=(...T)=>unref(u)&&unref(u)(...T)),onFocus:b[7]||(b[7]=T=>n.value=!0),onBlur:b[8]||(b[8]=T=>n.value=!1),onClick:b[9]||(b[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$f)),[[vModelCheckbox,unref(s)]]),g.$slots.default||g.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(d).be("button","inner")),style:normalizeStyle(unref(o)?unref(m):void 0)},[renderSlot(g.$slots,"default",{},()=>[createTextVNode(toDisplayString(g.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc(_sfc_main$E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:t=>isArray$4(t),change:t=>isArray$4(t)},__default__$s=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$D=defineComponent({...__default__$s,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("checkbox"),{formItem:o}=useFormItem(),{inputId:i,isLabeledByFormItem:a}=useFormItemInputId(e,{formItemContext:o}),s=async c=>{r(UPDATE_MODEL_EVENT,c),await nextTick(),r("change",c)},u=computed({get(){return e.modelValue},set(c){s(c)}});return provide(checkboxGroupContextKey,{...pick$1(toRefs(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:u,changeEvent:s}),watch(()=>e.modelValue,()=>{e.validateEvent&&(o==null||o.validate("change").catch(c=>void 0))}),(c,d)=>{var m;return openBlock(),createBlock(resolveDynamicComponent(c.tag),{id:unref(i),class:normalizeClass(unref(n).b("group")),role:"group","aria-label":unref(a)?void 0:c.label||"checkbox-group","aria-labelledby":unref(a)?(m=unref(o))==null?void 0:m.labelId:void 0},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc(_sfc_main$D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);const ElCheckboxGroup=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),[CHANGE_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(t,r)=>{const e=ref(),n=inject(radioGroupKey,void 0),o=computed(()=>!!n),i=computed({get(){return o.value?n.modelValue:t.modelValue},set(d){o.value?n.changeEvent(d):r&&r(UPDATE_MODEL_EVENT,d),e.value.checked=t.modelValue===t.label}}),a=useFormSize(computed(()=>n==null?void 0:n.size)),s=useFormDisabled(computed(()=>n==null?void 0:n.disabled)),u=ref(!1),c=computed(()=>s.value||o.value&&i.value!==t.label?-1:0);return{radioRef:e,isGroup:o,radioGroup:n,focus:u,size:a,disabled:s,tabIndex:c,modelValue:i}},_hoisted_1$l=["value","name","disabled"],__default__$r=defineComponent({name:"ElRadio"}),_sfc_main$C=defineComponent({...__default__$r,props:radioProps,emits:radioEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),{radioRef:o,radioGroup:i,focus:a,size:s,disabled:u,modelValue:c}=useRadio(e,r);function d(){nextTick(()=>r("change",c.value))}return(m,v)=>{var g;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(n).b(),unref(n).is("disabled",unref(u)),unref(n).is("focus",unref(a)),unref(n).is("bordered",m.border),unref(n).is("checked",unref(c)===m.label),unref(n).m(unref(s))])},[createBaseVNode("span",{class:normalizeClass([unref(n).e("input"),unref(n).is("disabled",unref(u)),unref(n).is("checked",unref(c)===m.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":v[0]||(v[0]=b=>isRef(c)?c.value=b:null),class:normalizeClass(unref(n).e("original")),value:m.label,name:m.name||((g=unref(i))==null?void 0:g.name),disabled:unref(u),type:"radio",onFocus:v[1]||(v[1]=b=>a.value=!0),onBlur:v[2]||(v[2]=b=>a.value=!1),onChange:d,onClick:v[3]||(v[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$l),[[vModelRadio,unref(c)]]),createBaseVNode("span",{class:normalizeClass(unref(n).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(n).e("label")),onKeydown:v[4]||(v[4]=withModifiers(()=>{},["stop"]))},[renderSlot(m.$slots,"default",{},()=>[createTextVNode(toDisplayString(m.label),1)])],34)],2)}}});var Radio=_export_sfc(_sfc_main$C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$k=["value","name","disabled"],__default__$q=defineComponent({name:"ElRadioButton"}),_sfc_main$B=defineComponent({...__default__$q,props:radioButtonProps,setup(t){const r=t,e=useNamespace("radio"),{radioRef:n,focus:o,size:i,disabled:a,modelValue:s,radioGroup:u}=useRadio(r),c=computed(()=>({backgroundColor:(u==null?void 0:u.fill)||"",borderColor:(u==null?void 0:u.fill)||"",boxShadow:u!=null&&u.fill?`-1px 0 0 0 ${u.fill}`:"",color:(u==null?void 0:u.textColor)||""}));return(d,m)=>{var v;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(e).b("button"),unref(e).is("active",unref(s)===d.label),unref(e).is("disabled",unref(a)),unref(e).is("focus",unref(o)),unref(e).bm("button",unref(i))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":m[0]||(m[0]=g=>isRef(s)?s.value=g:null),class:normalizeClass(unref(e).be("button","original-radio")),value:d.label,type:"radio",name:d.name||((v=unref(u))==null?void 0:v.name),disabled:unref(a),onFocus:m[1]||(m[1]=g=>o.value=!0),onBlur:m[2]||(m[2]=g=>o.value=!1),onClick:m[3]||(m[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$k),[[vModelRadio,unref(s)]]),createBaseVNode("span",{class:normalizeClass(unref(e).be("button","inner")),style:normalizeStyle(unref(s)===d.label?unref(c):{}),onKeydown:m[4]||(m[4]=withModifiers(()=>{},["stop"]))},[renderSlot(d.$slots,"default",{},()=>[createTextVNode(toDisplayString(d.label),1)])],38)],2)}}});var RadioButton=_export_sfc(_sfc_main$B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$j=["id","aria-label","aria-labelledby"],__default__$p=defineComponent({name:"ElRadioGroup"}),_sfc_main$A=defineComponent({...__default__$p,props:radioGroupProps,emits:radioGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),o=useId(),i=ref(),{formItem:a}=useFormItem(),{inputId:s,isLabeledByFormItem:u}=useFormItemInputId(e,{formItemContext:a}),c=m=>{r(UPDATE_MODEL_EVENT,m),nextTick(()=>r("change",m))};onMounted(()=>{const m=i.value.querySelectorAll("[type=radio]"),v=m[0];!Array.from(m).some(g=>g.checked)&&v&&(v.tabIndex=0)});const d=computed(()=>e.name||o.value);return provide(radioGroupKey,reactive({...toRefs(e),changeEvent:c,name:d})),watch(()=>e.modelValue,()=>{e.validateEvent&&(a==null||a.validate("change").catch(m=>void 0))}),(m,v)=>(openBlock(),createElementBlock("div",{id:unref(s),ref_key:"radioGroupRef",ref:i,class:normalizeClass(unref(n).b("group")),role:"radiogroup","aria-label":unref(u)?void 0:m.label||"radio-group","aria-labelledby":unref(u)?unref(a).labelId:void 0},[renderSlot(m.$slots,"default")],10,_hoisted_1$j))}});var RadioGroup=_export_sfc(_sfc_main$A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup});withNoopInstall(RadioGroup);withNoopInstall(RadioButton);var NodeContent=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:t}=this,{node:r,panel:e}=this.$parent,{data:n,label:o}=r,{renderLabelFn:i}=e;return h("span",{class:t.e("label")},i?i({node:r,data:n}):o)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$z=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:r}){const e=inject(CASCADER_PANEL_INJECTION_KEY),n=useNamespace("cascader-node"),o=computed(()=>e.isHoverMenu),i=computed(()=>e.config.multiple),a=computed(()=>e.config.checkStrictly),s=computed(()=>{var Fe;return(Fe=e.checkedNodes[0])==null?void 0:Fe.uid}),u=computed(()=>t.node.isDisabled),c=computed(()=>t.node.isLeaf),d=computed(()=>a.value&&!c.value||!u.value),m=computed(()=>g(e.expandingNode)),v=computed(()=>a.value&&e.checkedNodes.some(g)),g=Fe=>{var _e;const{level:de,uid:oe}=t.node;return((_e=Fe==null?void 0:Fe.pathNodes[de-1])==null?void 0:_e.uid)===oe},b=()=>{m.value||e.expandNode(t.node)},T=Fe=>{const{node:_e}=t;Fe!==_e.checked&&e.handleCheckChange(_e,Fe)},_=()=>{e.lazyLoad(t.node,()=>{c.value||b()})},y=Fe=>{o.value&&(O(),!c.value&&r("expand",Fe))},O=()=>{const{node:Fe}=t;!d.value||Fe.loading||(Fe.loaded?b():_())},V=()=>{o.value&&!c.value||(c.value&&!u.value&&!a.value&&!i.value?ae(!0):O())},Ce=Fe=>{a.value?(T(Fe),t.node.loaded&&b()):ae(Fe)},ae=Fe=>{t.node.loaded?(T(Fe),!a.value&&b()):_()};return{panel:e,isHoverMenu:o,multiple:i,checkStrictly:a,checkedNodeId:s,isDisabled:u,isLeaf:c,expandable:d,inExpandingPath:m,inCheckedPath:v,ns:n,handleHoverExpand:y,handleExpand:O,handleClick:V,handleCheck:ae,handleSelectCheck:Ce}}}),_hoisted_1$i=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$e=createBaseVNode("span",null,null,-1);function _sfc_render$6(t,r,e,n,o,i){const a=resolveComponent("el-checkbox"),s=resolveComponent("el-radio"),u=resolveComponent("check"),c=resolveComponent("el-icon"),d=resolveComponent("node-content"),m=resolveComponent("loading"),v=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:normalizeClass([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:r[2]||(r[2]=(...g)=>t.handleHoverExpand&&t.handleHoverExpand(...g)),onFocus:r[3]||(r[3]=(...g)=>t.handleHoverExpand&&t.handleHoverExpand(...g)),onClick:r[4]||(r[4]=(...g)=>t.handleClick&&t.handleClick(...g))},[createCommentVNode(" prefix "),t.multiple?(openBlock(),createBlock(a,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:r[0]||(r[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(openBlock(),createBlock(s,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:r[1]||(r[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$e]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(openBlock(),createBlock(c,{key:2,class:normalizeClass(t.ns.e("prefix"))},{default:withCtx(()=>[createVNode(u)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(d),createCommentVNode(" postfix "),t.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[t.node.loading?(openBlock(),createBlock(c,{key:0,class:normalizeClass([t.ns.is("loading"),t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(m)]),_:1},8,["class"])):(openBlock(),createBlock(c,{key:1,class:normalizeClass(["arrow-right",t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(v)]),_:1},8,["class"]))],64))],42,_hoisted_1$i)}var ElCascaderNode=_export_sfc(_sfc_main$z,[["render",_sfc_render$6],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const _sfc_main$y=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const r=getCurrentInstance(),e=useNamespace("cascader-menu"),{t:n}=useLocale(),o=generateId();let i=null,a=null;const s=inject(CASCADER_PANEL_INJECTION_KEY),u=ref(null),c=computed(()=>!t.nodes.length),d=computed(()=>!s.initialLoaded),m=computed(()=>`cascader-menu-${o}-${t.index}`),v=_=>{i=_.target},g=_=>{if(!(!s.isHoverMenu||!i||!u.value))if(i.contains(_.target)){b();const y=r.vnode.el,{left:O}=y.getBoundingClientRect(),{offsetWidth:V,offsetHeight:Ce}=y,ae=_.clientX-O,Fe=i.offsetTop,_e=Fe+i.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${ae} ${Fe} L${V} 0 V${Fe} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${ae} ${_e} L${V} ${Ce} V${_e} Z" />
        `}else a||(a=window.setTimeout(T,s.config.hoverThreshold))},b=()=>{a&&(clearTimeout(a),a=null)},T=()=>{u.value&&(u.value.innerHTML="",b())};return{ns:e,panel:s,hoverZone:u,isEmpty:c,isLoading:d,menuId:m,t:n,handleExpand:v,handleMouseMove:g,clearHoverZone:T}}});function _sfc_render$5(t,r,e,n,o,i){const a=resolveComponent("el-cascader-node"),s=resolveComponent("loading"),u=resolveComponent("el-icon"),c=resolveComponent("el-scrollbar");return openBlock(),createBlock(c,{key:t.menuId,tag:"ul",role:"menu",class:normalizeClass(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:withCtx(()=>{var d;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.nodes,m=>(openBlock(),createBlock(a,{key:m.uid,node:m,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.e("empty-text"))},[createVNode(u,{size:"14",class:normalizeClass(t.ns.is("loading"))},{default:withCtx(()=>[createVNode(s)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("empty-text"))},toDisplayString(t.t("el.cascader.noData")),3)):(d=t.panel)!=null&&d.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(t.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc(_sfc_main$y,[["render",_sfc_render$5],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let uid=0;const calculatePathNodes=t=>{const r=[t];let{parent:e}=t;for(;e;)r.unshift(e),e=e.parent;return r};class Node{constructor(r,e,n,o=!1){this.data=r,this.config=e,this.parent=n,this.root=o,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:i,label:a,children:s}=e,u=r[s],c=calculatePathNodes(this);this.level=o?0:n?n.level+1:1,this.value=r[i],this.label=r[a],this.pathNodes=c,this.pathValues=c.map(d=>d.value),this.pathLabels=c.map(d=>d.label),this.childrenData=u,this.children=(u||[]).map(d=>new Node(d,e,this)),this.loaded=!e.lazy||this.isLeaf||!isEmpty(u)}get isDisabled(){const{data:r,parent:e,config:n}=this,{disabled:o,checkStrictly:i}=n;return(isFunction$3(o)?o(r,this):!!r[o])||!i&&(e==null?void 0:e.isDisabled)}get isLeaf(){const{data:r,config:e,childrenData:n,loaded:o}=this,{lazy:i,leaf:a}=e,s=isFunction$3(a)?a(r,this):r[a];return isUndefined$1(s)?i&&!o?!1:!(Array.isArray(n)&&n.length):!!s}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(r){const{childrenData:e,children:n}=this,o=new Node(r,this.config,this);return Array.isArray(e)?e.push(r):this.childrenData=[r],n.push(o),o}calcText(r,e){const n=r?this.pathLabels.join(e):this.label;return this.text=n,n}broadcast(r,...e){const n=`onParent${capitalize(r)}`;this.children.forEach(o=>{o&&(o.broadcast(r,...e),o[n]&&o[n](...e))})}emit(r,...e){const{parent:n}=this,o=`onChild${capitalize(r)}`;n&&(n[o]&&n[o](...e),n.emit(r,...e))}onParentCheck(r){this.isDisabled||this.setCheckState(r)}onChildCheck(){const{children:r}=this,e=r.filter(o=>!o.isDisabled),n=e.length?e.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(r){const e=this.children.length,n=this.children.reduce((o,i)=>{const a=i.checked?1:i.indeterminate?.5:0;return o+a},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&r,this.indeterminate=this.loaded&&n!==e&&n>0}doCheck(r){if(this.checked===r)return;const{checkStrictly:e,multiple:n}=this.config;e||!n?this.checked=r:(this.broadcast("check",r),this.setCheckState(r),this.emit("check"))}}const flatNodes=(t,r)=>t.reduce((e,n)=>(n.isLeaf?e.push(n):(!r&&e.push(n),e=e.concat(flatNodes(n.children,r))),e),[]);class Store{constructor(r,e){this.config=e;const n=(r||[]).map(o=>new Node(o,this.config));this.nodes=n,this.allNodes=flatNodes(n,!1),this.leafNodes=flatNodes(n,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const n=e?e.appendChild(r):new Node(r,this.config);e||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(r,e){r.forEach(n=>this.appendNode(n,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(o=>isEqual(o.value,r)||isEqual(o.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:n,level:o})=>isEqual(r.value,n)&&r.level===o)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=t=>computed(()=>({...DefaultProps,...t.props})),getMenuIndex=t=>{if(!t)return 0;const r=t.id.split("-");return Number(r[r.length-2])},checkNode=t=>{if(!t)return;const r=t.querySelector("input");r?r.click():isLeaf(t)&&t.click()},sortByOriginalOrder=(t,r)=>{const e=r.slice(0),n=e.map(i=>i.uid),o=t.reduce((i,a)=>{const s=n.indexOf(a.uid);return s>-1&&(i.push(a),e.splice(s,1),n.splice(s,1)),i},[]);return o.push(...e),o},_sfc_main$x=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(t,{emit:r,slots:e}){let n=!1;const o=useNamespace("cascader"),i=useCascaderConfig(t);let a=null;const s=ref(!0),u=ref([]),c=ref(null),d=ref([]),m=ref(null),v=ref([]),g=computed(()=>i.value.expandTrigger==="hover"),b=computed(()=>t.renderLabel||e.default),T=()=>{const{options:le}=t,ie=i.value;n=!1,a=new Store(le,ie),d.value=[a.getNodes()],ie.lazy&&isEmpty(t.options)?(s.value=!1,_(void 0,Ie=>{Ie&&(a=new Store(Ie,ie),d.value=[a.getNodes()]),s.value=!0,de(!1,!0)})):de(!1,!0)},_=(le,ie)=>{const Ie=i.value;le=le||new Node({},Ie,void 0,!0),le.loading=!0;const pe=kt=>{const Ue=le,Dt=Ue.root?null:Ue;kt&&(a==null||a.appendNodes(kt,Dt)),Ue.loading=!1,Ue.loaded=!0,Ue.childrenData=Ue.childrenData||[],ie&&ie(kt)};Ie.lazyLoad(le,pe)},y=(le,ie)=>{var Ie;const{level:pe}=le,kt=d.value.slice(0,pe);let Ue;le.isLeaf?Ue=le.pathNodes[pe-2]:(Ue=le,kt.push(le.children)),((Ie=m.value)==null?void 0:Ie.uid)!==(Ue==null?void 0:Ue.uid)&&(m.value=le,d.value=kt,!ie&&r("expand-change",(le==null?void 0:le.pathValues)||[]))},O=(le,ie,Ie=!0)=>{const{checkStrictly:pe,multiple:kt}=i.value,Ue=v.value[0];n=!0,!kt&&(Ue==null||Ue.doCheck(!1)),le.doCheck(ie),_e(),Ie&&!kt&&!pe&&r("close"),!Ie&&!kt&&!pe&&V(le)},V=le=>{le&&(le=le.parent,V(le),le&&y(le))},Ce=le=>a==null?void 0:a.getFlattedNodes(le),ae=le=>{var ie;return(ie=Ce(le))==null?void 0:ie.filter(Ie=>Ie.checked!==!1)},Fe=()=>{v.value.forEach(le=>le.doCheck(!1)),_e(),d.value=d.value.slice(0,1),m.value=null,r("expand-change",[])},_e=()=>{var le;const{checkStrictly:ie,multiple:Ie}=i.value,pe=v.value,kt=ae(!ie),Ue=sortByOriginalOrder(pe,kt),Dt=Ue.map(tr=>tr.valueByOption);v.value=Ue,c.value=Ie?Dt:(le=Dt[0])!=null?le:null},de=(le=!1,ie=!1)=>{const{modelValue:Ie}=t,{lazy:pe,multiple:kt,checkStrictly:Ue}=i.value,Dt=!Ue;if(!(!s.value||n||!ie&&isEqual(Ie,c.value)))if(pe&&!le){const dr=unique(flattenDeep(castArray(Ie))).map(pr=>a==null?void 0:a.getNodeByValue(pr)).filter(pr=>!!pr&&!pr.loaded&&!pr.loading);dr.length?dr.forEach(pr=>{_(pr,()=>de(!1,ie))}):de(!0,ie)}else{const tr=kt?castArray(Ie):[Ie],dr=unique(tr.map(pr=>a==null?void 0:a.getNodeByValue(pr,Dt)));oe(dr,ie),c.value=cloneDeep(Ie)}},oe=(le,ie=!0)=>{const{checkStrictly:Ie}=i.value,pe=v.value,kt=le.filter(tr=>!!tr&&(Ie||tr.isLeaf)),Ue=a==null?void 0:a.getSameNode(m.value),Dt=ie&&Ue||kt[0];Dt?Dt.pathNodes.forEach(tr=>y(tr,!0)):m.value=null,pe.forEach(tr=>tr.doCheck(!1)),t.props.multiple?reactive(kt).forEach(tr=>tr.doCheck(!0)):kt.forEach(tr=>tr.doCheck(!0)),v.value=kt,nextTick(he)},he=()=>{isClient&&u.value.forEach(le=>{const ie=le==null?void 0:le.$el;if(ie){const Ie=ie.querySelector(`.${o.namespace.value}-scrollbar__wrap`),pe=ie.querySelector(`.${o.b("node")}.${o.is("active")}`)||ie.querySelector(`.${o.b("node")}.in-active-path`);scrollIntoView(Ie,pe)}})},Ve=le=>{const ie=le.target,{code:Ie}=le;switch(Ie){case EVENT_CODE.up:case EVENT_CODE.down:{le.preventDefault();const pe=Ie===EVENT_CODE.up?-1:1;focusNode(getSibling(ie,pe,`.${o.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{le.preventDefault();const pe=u.value[getMenuIndex(ie)-1],kt=pe==null?void 0:pe.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);focusNode(kt);break}case EVENT_CODE.right:{le.preventDefault();const pe=u.value[getMenuIndex(ie)+1],kt=pe==null?void 0:pe.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);focusNode(kt);break}case EVENT_CODE.enter:checkNode(ie);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:i,expandingNode:m,checkedNodes:v,isHoverMenu:g,initialLoaded:s,renderLabelFn:b,lazyLoad:_,expandNode:y,handleCheckChange:O})),watch([i,()=>t.options],T,{deep:!0,immediate:!0}),watch(()=>t.modelValue,()=>{n=!1,de()},{deep:!0}),watch(()=>c.value,le=>{isEqual(le,t.modelValue)||(r(UPDATE_MODEL_EVENT,le),r(CHANGE_EVENT,le))}),onBeforeUpdate(()=>u.value=[]),onMounted(()=>!isEmpty(t.modelValue)&&de()),{ns:o,menuList:u,menus:d,checkedNodes:v,handleKeyDown:Ve,handleCheckChange:O,getFlattedNodes:Ce,getCheckedNodes:ae,clearCheckedNodes:Fe,calculateCheckedValue:_e,scrollToExpandingNode:he}}});function _sfc_render$4(t,r,e,n,o,i){const a=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:r[0]||(r[0]=(...s)=>t.handleKeyDown&&t.handleKeyDown(...s))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menus,(s,u)=>(openBlock(),createBlock(a,{key:u,ref_for:!0,ref:c=>t.menuList[u]=c,index:u,nodes:[...s]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc(_sfc_main$x,[["render",_sfc_render$4],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);CascaderPanel.install=t=>{t.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,tagProps=buildProps({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:componentSizes,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},__default__$o=defineComponent({name:"ElTag"}),_sfc_main$w=defineComponent({...__default__$o,props:tagProps,emits:tagEmits,setup(t,{emit:r}){const e=t,n=useFormSize(),o=useNamespace("tag"),i=computed(()=>{const{type:u,hit:c,effect:d,closable:m,round:v}=e;return[o.b(),o.is("closable",m),o.m(u),o.m(n.value),o.m(d),o.is("hit",c),o.is("round",v)]}),a=u=>{r("close",u)},s=u=>{r("click",u)};return(u,c)=>u.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(i)),style:normalizeStyle({backgroundColor:u.color}),onClick:s},[createBaseVNode("span",{class:normalizeClass(unref(o).e("content"))},[renderSlot(u.$slots,"default")],2),u.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(o).e("close")),onClick:withModifiers(a,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(o).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(i)),style:normalizeStyle({backgroundColor:u.color}),onClick:s},[createBaseVNode("span",{class:normalizeClass(unref(o).e("content"))},[renderSlot(u.$slots,"default")],2),u.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(o).e("close")),onClick:withModifiers(a,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc(_sfc_main$w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(t,r)=>t.text.includes(r)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:t=>!!t||t===null,[CHANGE_EVENT]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>isBoolean$1(t),expandChange:t=>!!t,removeTag:t=>!!t},_hoisted_1$h={key:0},_hoisted_2$d=["placeholder","onKeydown"],_hoisted_3$8=["onClick"],COMPONENT_NAME$3="ElCascader",__default__$n=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$v=defineComponent({...__default__$n,props:cascaderProps,emits:cascaderEmits,setup(t,{expose:r,emit:e}){const n=t,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Jr})=>{const{modifiersData:Lr,placement:Kn}=Jr;["right","left","bottom","top"].includes(Kn)||(Lr.arrow.x=35)},requires:["arrow"]}]},i=useAttrs$1();let a=0,s=0;const u=useNamespace("cascader"),c=useNamespace("input"),{t:d}=useLocale(),{form:m,formItem:v}=useFormItem(),g=ref(null),b=ref(null),T=ref(null),_=ref(null),y=ref(null),O=ref(!1),V=ref(!1),Ce=ref(!1),ae=ref(!1),Fe=ref(""),_e=ref(""),de=ref([]),oe=ref([]),he=ref([]),Ve=ref(!1),le=computed(()=>i.style),ie=computed(()=>n.disabled||(m==null?void 0:m.disabled)),Ie=computed(()=>n.placeholder||d("el.cascader.placeholder")),pe=computed(()=>_e.value||de.value.length>0||Ve.value?"":Ie.value),kt=useFormSize(),Ue=computed(()=>["small"].includes(kt.value)?"small":"default"),Dt=computed(()=>!!n.props.multiple),tr=computed(()=>!n.filterable||Dt.value),dr=computed(()=>Dt.value?_e.value:Fe.value),pr=computed(()=>{var Jr;return((Jr=_.value)==null?void 0:Jr.checkedNodes)||[]}),ar=computed(()=>!n.clearable||ie.value||Ce.value||!V.value?!1:!!pr.value.length),hr=computed(()=>{const{showAllLevels:Jr,separator:Lr}=n,Kn=pr.value;return Kn.length?Dt.value?"":Kn[0].calcText(Jr,Lr):""}),Ne=computed({get(){return cloneDeep(n.modelValue)},set(Jr){e(UPDATE_MODEL_EVENT,Jr),e(CHANGE_EVENT,Jr),n.validateEvent&&(v==null||v.validate("change").catch(Lr=>void 0))}}),nr=computed(()=>[u.b(),u.m(kt.value),u.is("disabled",ie.value),i.class]),sr=computed(()=>[c.e("icon"),"icon-arrow-down",u.is("reverse",O.value)]),$e=computed(()=>u.is("focus",O.value||ae.value)),er=computed(()=>{var Jr,Lr;return(Lr=(Jr=g.value)==null?void 0:Jr.popperRef)==null?void 0:Lr.contentRef}),or=Jr=>{var Lr,Kn,vo;ie.value||(Jr=Jr??!O.value,Jr!==O.value&&(O.value=Jr,(Kn=(Lr=b.value)==null?void 0:Lr.input)==null||Kn.setAttribute("aria-expanded",`${Jr}`),Jr?(ze(),nextTick((vo=_.value)==null?void 0:vo.scrollToExpandingNode)):n.filterable&&Or(),e("visibleChange",Jr)))},ze=()=>{nextTick(()=>{var Jr;(Jr=g.value)==null||Jr.updatePopper()})},rr=()=>{Ce.value=!1},Et=Jr=>{const{showAllLevels:Lr,separator:Kn}=n;return{node:Jr,key:Jr.uid,text:Jr.calcText(Lr,Kn),hitState:!1,closable:!ie.value&&!Jr.isDisabled,isCollapseTag:!1}},Lt=Jr=>{var Lr;const Kn=Jr.node;Kn.doCheck(!1),(Lr=_.value)==null||Lr.calculateCheckedValue(),e("removeTag",Kn.valueByOption)},cr=()=>{if(!Dt.value)return;const Jr=pr.value,Lr=[],Kn=[];if(Jr.forEach(vo=>Kn.push(Et(vo))),oe.value=Kn,Jr.length){Jr.slice(0,n.maxCollapseTags).forEach(so=>Lr.push(Et(so)));const vo=Jr.slice(n.maxCollapseTags),bo=vo.length;bo&&(n.collapseTags?Lr.push({key:-1,text:`+ ${bo}`,closable:!1,isCollapseTag:!0}):vo.forEach(so=>Lr.push(Et(so))))}de.value=Lr},mr=()=>{var Jr,Lr;const{filterMethod:Kn,showAllLevels:vo,separator:bo}=n,so=(Lr=(Jr=_.value)==null?void 0:Jr.getFlattedNodes(!n.props.checkStrictly))==null?void 0:Lr.filter(co=>co.isDisabled?!1:(co.calcText(vo,bo),Kn(co,dr.value)));Dt.value&&(de.value.forEach(co=>{co.hitState=!1}),oe.value.forEach(co=>{co.hitState=!1})),Ce.value=!0,he.value=so,ze()},vr=()=>{var Jr;let Lr;Ce.value&&y.value?Lr=y.value.$el.querySelector(`.${u.e("suggestion-item")}`):Lr=(Jr=_.value)==null?void 0:Jr.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),Lr&&(Lr.focus(),!Ce.value&&Lr.click())},Tr=()=>{var Jr,Lr;const Kn=(Jr=b.value)==null?void 0:Jr.input,vo=T.value,bo=(Lr=y.value)==null?void 0:Lr.$el;if(!(!isClient||!Kn)){if(bo){const so=bo.querySelector(`.${u.e("suggestion-list")}`);so.style.minWidth=`${Kn.offsetWidth}px`}if(vo){const{offsetHeight:so}=vo,co=de.value.length>0?`${Math.max(so+6,a)}px`:`${a}px`;Kn.style.height=co,ze()}}},Ir=Jr=>{var Lr;return(Lr=_.value)==null?void 0:Lr.getCheckedNodes(Jr)},kr=Jr=>{ze(),e("expandChange",Jr)},Ar=Jr=>{var Lr;const Kn=(Lr=Jr.target)==null?void 0:Lr.value;if(Jr.type==="compositionend")Ve.value=!1,nextTick(()=>Gn(Kn));else{const vo=Kn[Kn.length-1]||"";Ve.value=!isKorean(vo)}},Nr=Jr=>{if(!Ve.value)switch(Jr.code){case EVENT_CODE.enter:or();break;case EVENT_CODE.down:or(!0),nextTick(vr),Jr.preventDefault();break;case EVENT_CODE.esc:O.value===!0&&(Jr.preventDefault(),Jr.stopPropagation(),or(!1));break;case EVENT_CODE.tab:or(!1);break}},Mn=()=>{var Jr;(Jr=_.value)==null||Jr.clearCheckedNodes(),!O.value&&n.filterable&&Or(),or(!1)},Or=()=>{const{value:Jr}=hr;Fe.value=Jr,_e.value=Jr},Pr=Jr=>{var Lr,Kn;const{checked:vo}=Jr;Dt.value?(Lr=_.value)==null||Lr.handleCheckChange(Jr,!vo,!1):(!vo&&((Kn=_.value)==null||Kn.handleCheckChange(Jr,!0,!1)),or(!1))},Rr=Jr=>{const Lr=Jr.target,{code:Kn}=Jr;switch(Kn){case EVENT_CODE.up:case EVENT_CODE.down:{const vo=Kn===EVENT_CODE.up?-1:1;focusNode(getSibling(Lr,vo,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:Lr.click();break}},Qr=()=>{const Jr=de.value,Lr=Jr[Jr.length-1];s=_e.value?0:s+1,!(!Lr||!s||n.collapseTags&&Jr.length>1)&&(Lr.hitState?Lt(Lr):Lr.hitState=!0)},hn=Jr=>{const Lr=Jr.target,Kn=u.e("search-input");Lr.className===Kn&&(ae.value=!0),e("focus",Jr)},Ur=Jr=>{ae.value=!1,e("blur",Jr)},qr=debounce(()=>{const{value:Jr}=dr;if(!Jr)return;const Lr=n.beforeFilter(Jr);isPromise(Lr)?Lr.then(mr).catch(()=>{}):Lr!==!1?mr():rr()},n.debounce),Gn=(Jr,Lr)=>{!O.value&&or(!0),!(Lr!=null&&Lr.isComposing)&&(Jr?qr():rr())},jn=Jr=>Number.parseFloat(useCssVar(c.cssVarName("input-height"),Jr).value)-2;return watch(Ce,ze),watch([pr,ie],cr),watch(de,()=>{nextTick(()=>Tr())}),watch(kt,async()=>{await nextTick();const Jr=b.value.input;a=jn(Jr)||a,Tr()}),watch(hr,Or,{immediate:!0}),onMounted(()=>{const Jr=b.value.input,Lr=jn(Jr);a=Jr.offsetHeight||Lr,useResizeObserver(Jr,Tr)}),r({getCheckedNodes:Ir,cascaderPanelRef:_,togglePopperVisible:or,contentRef:er}),(Jr,Lr)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:g,visible:O.value,teleported:Jr.teleported,"popper-class":[unref(u).e("dropdown"),Jr.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:rr},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(nr)),style:normalizeStyle(unref(le)),onClick:Lr[5]||(Lr[5]=()=>or(unref(tr)?void 0:!0)),onKeydown:Nr,onMouseenter:Lr[6]||(Lr[6]=Kn=>V.value=!0),onMouseleave:Lr[7]||(Lr[7]=Kn=>V.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:b,modelValue:Fe.value,"onUpdate:modelValue":Lr[1]||(Lr[1]=Kn=>Fe.value=Kn),placeholder:unref(pe),readonly:unref(tr),disabled:unref(ie),"validate-event":!1,size:unref(kt),class:normalizeClass(unref($e)),tabindex:unref(Dt)&&Jr.filterable&&!unref(ie)?-1:void 0,onCompositionstart:Ar,onCompositionupdate:Ar,onCompositionend:Ar,onFocus:hn,onBlur:Ur,onInput:Gn},{suffix:withCtx(()=>[unref(ar)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(c).e("icon"),"icon-circle-close"]),onClick:withModifiers(Mn,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(sr)),onClick:Lr[0]||(Lr[0]=withModifiers(Kn=>or(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(Dt)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:T,class:normalizeClass(unref(u).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(de.value,Kn=>(openBlock(),createBlock(unref(ElTag),{key:Kn.key,type:Jr.tagType,size:unref(Ue),hit:Kn.hitState,closable:Kn.closable,"disable-transitions":"",onClose:vo=>Lt(Kn)},{default:withCtx(()=>[Kn.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$h,toDisplayString(Kn.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:O.value||!Jr.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Kn.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(u).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(oe.value.slice(Jr.maxCollapseTags),(vo,bo)=>(openBlock(),createElementBlock("div",{key:bo,class:normalizeClass(unref(u).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:vo.key,class:"in-tooltip",type:Jr.tagType,size:unref(Ue),hit:vo.hitState,closable:vo.closable,"disable-transitions":"",onClose:so=>Lt(vo)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(vo.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),Jr.filterable&&!unref(ie)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":Lr[2]||(Lr[2]=Kn=>_e.value=Kn),type:"text",class:normalizeClass(unref(u).e("search-input")),placeholder:unref(hr)?"":unref(Ie),onInput:Lr[3]||(Lr[3]=Kn=>Gn(_e.value,Kn)),onClick:Lr[4]||(Lr[4]=withModifiers(Kn=>or(!0),["stop"])),onKeydown:withKeys(Qr,["delete"]),onCompositionstart:Ar,onCompositionupdate:Ar,onCompositionend:Ar,onFocus:hn,onBlur:Ur},null,42,_hoisted_2$d)),[[vModelText,_e.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>or(!1),unref(er)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:_,modelValue:unref(Ne),"onUpdate:modelValue":Lr[8]||(Lr[8]=Kn=>isRef(Ne)?Ne.value=Kn:null),options:Jr.options,props:n.props,border:!1,"render-label":Jr.$slots.default,onExpandChange:kr,onClose:Lr[9]||(Lr[9]=Kn=>Jr.$nextTick(()=>or(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ce.value]]),Jr.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:y,tag:"ul",class:normalizeClass(unref(u).e("suggestion-panel")),"view-class":unref(u).e("suggestion-list"),onKeydown:Rr},{default:withCtx(()=>[he.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(he.value,Kn=>(openBlock(),createElementBlock("li",{key:Kn.uid,class:normalizeClass([unref(u).e("suggestion-item"),unref(u).is("checked",Kn.checked)]),tabindex:-1,onClick:vo=>Pr(Kn)},[createBaseVNode("span",null,toDisplayString(Kn.text),1),Kn.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$8))),128)):renderSlot(Jr.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(u).e("empty-text"))},toDisplayString(unref(d)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ce.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc(_sfc_main$v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Cascader.install=t=>{t.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$m=defineComponent({name:"ElRow"}),_sfc_main$u=defineComponent({...__default__$m,props:rowProps,setup(t){const r=t,e=useNamespace("row"),n=computed(()=>r.gutter);provide(rowContextKey,{gutter:n});const o=computed(()=>{const a={};return r.gutter&&(a.marginRight=a.marginLeft=`-${r.gutter/2}px`),a}),i=computed(()=>[e.b(),e.is(`justify-${r.justify}`,r.justify!=="start"),e.is(`align-${r.align}`,!!r.align)]);return(a,s)=>(openBlock(),createBlock(resolveDynamicComponent(a.tag),{class:normalizeClass(unref(i)),style:normalizeStyle(unref(o))},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc(_sfc_main$u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$l=defineComponent({name:"ElCol"}),_sfc_main$t=defineComponent({...__default__$l,props:colProps,setup(t){const r=t,{gutter:e}=inject(rowContextKey,{gutter:computed(()=>0)}),n=useNamespace("col"),o=computed(()=>{const a={};return e.value&&(a.paddingLeft=a.paddingRight=`${e.value/2}px`),a}),i=computed(()=>{const a=[];return["span","offset","pull","push"].forEach(c=>{const d=r[c];isNumber$1(d)&&(c==="span"?a.push(n.b(`${r[c]}`)):d>0&&a.push(n.b(`${c}-${r[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{isNumber$1(r[c])?a.push(n.b(`${c}-${r[c]}`)):isObject$2(r[c])&&Object.entries(r[c]).forEach(([d,m])=>{a.push(d!=="span"?n.b(`${c}-${d}-${m}`):n.b(`${c}-${m}`))})}),e.value&&a.push(n.is("guttered")),[n.b(),a]});return(a,s)=>(openBlock(),createBlock(resolveDynamicComponent(a.tag),{class:normalizeClass(unref(i)),style:normalizeStyle(unref(o))},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc(_sfc_main$t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=t=>typeof isNumber$1(t),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(t,r)=>{const e=ref(castArray$1(t.modelValue)),n=i=>{e.value=i;const a=t.accordion?e.value[0]:e.value;r(UPDATE_MODEL_EVENT,a),r(CHANGE_EVENT,a)},o=i=>{if(t.accordion)n([e.value[0]===i?"":i]);else{const a=[...e.value],s=a.indexOf(i);s>-1?a.splice(s,1):a.push(i),n(a)}};return watch(()=>t.modelValue,()=>e.value=castArray$1(t.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:e,handleItemClick:o}),{activeNames:e,setActiveNames:n}},useCollapseDOM=()=>{const t=useNamespace("collapse");return{rootKls:computed(()=>t.b())}},__default__$k=defineComponent({name:"ElCollapse"}),_sfc_main$s=defineComponent({...__default__$k,props:collapseProps,emits:collapseEmits,setup(t,{expose:r,emit:e}){const n=t,{activeNames:o,setActiveNames:i}=useCollapse(n,e),{rootKls:a}=useCollapseDOM();return r({activeNames:o,setActiveNames:i}),(s,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(a))},[renderSlot(s.$slots,"default")],2))}});var Collapse=_export_sfc(_sfc_main$s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const __default__$j=defineComponent({name:"ElCollapseTransition"}),_sfc_main$r=defineComponent({...__default__$j,setup(t){const r=useNamespace("collapse-transition"),e=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},n={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){o.dataset.oldOverflow=o.style.overflow,o.scrollHeight!==0?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){e(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight=`${o.scrollHeight}px`,o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){e(o)},leaveCancelled(o){e(o)}};return(o,i)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(r).b()},toHandlers(n)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc(_sfc_main$r,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);CollapseTransition.install=t=>{t.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:()=>generateId()},disabled:Boolean}),useCollapseItem=t=>{const r=inject(collapseContextKey),e=ref(!1),n=ref(!1),o=ref(generateId()),i=computed(()=>r==null?void 0:r.activeNames.value.includes(t.name));return{focusing:e,id:o,isActive:i,handleFocus:()=>{setTimeout(()=>{n.value?n.value=!1:e.value=!0},50)},handleHeaderClick:()=>{t.disabled||(r==null||r.handleItemClick(t.name),e.value=!1,n.value=!0)},handleEnterClick:()=>{r==null||r.handleItemClick(t.name)}}},useCollapseItemDOM=(t,{focusing:r,isActive:e,id:n})=>{const o=useNamespace("collapse"),i=computed(()=>[o.b("item"),o.is("active",unref(e)),o.is("disabled",t.disabled)]),a=computed(()=>[o.be("item","header"),o.is("active",unref(e)),{focusing:unref(r)&&!t.disabled}]),s=computed(()=>[o.be("item","arrow"),o.is("active",unref(e))]),u=computed(()=>o.be("item","wrap")),c=computed(()=>o.be("item","content")),d=computed(()=>o.b(`content-${unref(n)}`)),m=computed(()=>o.b(`head-${unref(n)}`));return{arrowKls:s,headKls:a,rootKls:i,itemWrapperKls:u,itemContentKls:c,scopedContentId:d,scopedHeadId:m}},_hoisted_1$g=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],_hoisted_2$c=["id","aria-hidden","aria-labelledby"],__default__$i=defineComponent({name:"ElCollapseItem"}),_sfc_main$q=defineComponent({...__default__$i,props:collapseItemProps,setup(t,{expose:r}){const e=t,{focusing:n,id:o,isActive:i,handleFocus:a,handleHeaderClick:s,handleEnterClick:u}=useCollapseItem(e),{arrowKls:c,headKls:d,rootKls:m,itemWrapperKls:v,itemContentKls:g,scopedContentId:b,scopedHeadId:T}=useCollapseItemDOM(e,{focusing:n,isActive:i,id:o});return r({isActive:i}),(_,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(m))},[createBaseVNode("button",{id:unref(T),class:normalizeClass(unref(d)),"aria-expanded":unref(i),"aria-controls":unref(b),"aria-describedby":unref(b),tabindex:_.disabled?-1:0,type:"button",onClick:y[0]||(y[0]=(...O)=>unref(s)&&unref(s)(...O)),onKeydown:y[1]||(y[1]=withKeys(withModifiers((...O)=>unref(u)&&unref(u)(...O),["stop","prevent"]),["space","enter"])),onFocus:y[2]||(y[2]=(...O)=>unref(a)&&unref(a)(...O)),onBlur:y[3]||(y[3]=O=>n.value=!1)},[renderSlot(_.$slots,"title",{},()=>[createTextVNode(toDisplayString(_.title),1)]),createVNode(unref(ElIcon),{class:normalizeClass(unref(c))},{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1},8,["class"])],42,_hoisted_1$g),createVNode(unref(_CollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(b),role:"region",class:normalizeClass(unref(v)),"aria-hidden":!unref(i),"aria-labelledby":unref(T)},[createBaseVNode("div",{class:normalizeClass(unref(g))},[renderSlot(_.$slots,"default")],2)],10,_hoisted_2$c),[[vShow,unref(i)]])]),_:3})],2))}});var CollapseItem=_export_sfc(_sfc_main$q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),__default__$h=defineComponent({name:"ElContainer"}),_sfc_main$p=defineComponent({...__default__$h,props:{direction:{type:String}},setup(t){const r=t,e=useSlots(),n=useNamespace("container"),o=computed(()=>r.direction==="vertical"?!0:r.direction==="horizontal"?!1:e&&e.default?e.default().some(a=>{const s=a.type.name;return s==="ElHeader"||s==="ElFooter"}):!1);return(i,a)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(n).b(),unref(n).is("vertical",unref(o))])},[renderSlot(i.$slots,"default")],2))}});var Container=_export_sfc(_sfc_main$p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const __default__$g=defineComponent({name:"ElAside"}),_sfc_main$o=defineComponent({...__default__$g,props:{width:{type:String,default:null}},setup(t){const r=t,e=useNamespace("aside"),n=computed(()=>r.width?e.cssVarBlock({width:r.width}):{});return(o,i)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Aside=_export_sfc(_sfc_main$o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const __default__$f=defineComponent({name:"ElFooter"}),_sfc_main$n=defineComponent({...__default__$f,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("footer"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(o,i)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Footer=_export_sfc(_sfc_main$n,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const __default__$e=defineComponent({name:"ElHeader"}),_sfc_main$m=defineComponent({...__default__$e,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("header"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(o,i)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Header=_export_sfc(_sfc_main$m,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const __default__$d=defineComponent({name:"ElMain"}),_sfc_main$l=defineComponent({...__default__$d,setup(t){const r=useNamespace("main");return(e,n)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(r).b())},[renderSlot(e.$slots,"default")],2))}});var Main=_export_sfc(_sfc_main$l,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer,Header,Main});withNoopInstall(Aside);const ElFooter=withNoopInstall(Footer),ElHeader=withNoopInstall(Header),ElMain=withNoopInstall(Main),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:t=>t instanceof MouseEvent},BLOCK="overlay";var Overlay=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(t,{slots:r,emit:e}){const n=useNamespace(BLOCK),o=u=>{e("click",u)},{onClick:i,onMousedown:a,onMouseup:s}=useSameTarget(t.customMaskEvent?void 0:o);return()=>t.mask?createVNode("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:i,onMousedown:a,onMouseup:s},[renderSlot(r,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(r,"default")])}});const ElOverlay=Overlay,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$f=["aria-level"],_hoisted_2$b=["aria-label"],_hoisted_3$7=["id"],__default__$c=defineComponent({name:"ElDialogContent"}),_sfc_main$k=defineComponent({...__default__$c,props:dialogContentProps,emits:dialogContentEmits,setup(t){const r=t,{t:e}=useLocale(),{Close:n}=CloseComponents,{dialogRef:o,headerRef:i,bodyId:a,ns:s,style:u}=inject(dialogInjectionKey),{focusTrapRef:c}=inject(FOCUS_TRAP_INJECTION_KEY),d=computed(()=>[s.b(),s.is("fullscreen",r.fullscreen),s.is("draggable",r.draggable),s.is("align-center",r.alignCenter),{[s.m("center")]:r.center},r.customClass]),m=composeRefs(c,o),v=computed(()=>r.draggable);return useDraggable(o,i,v),(g,b)=>(openBlock(),createElementBlock("div",{ref:unref(m),class:normalizeClass(unref(d)),style:normalizeStyle(unref(u)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:i,class:normalizeClass(unref(s).e("header"))},[renderSlot(g.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":g.ariaLevel,class:normalizeClass(unref(s).e("title"))},toDisplayString(g.title),11,_hoisted_1$f)]),g.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(e)("el.dialog.close"),class:normalizeClass(unref(s).e("headerbtn")),type:"button",onClick:b[0]||(b[0]=T=>g.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(s).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.closeIcon||unref(n))))]),_:1},8,["class"])],10,_hoisted_2$b)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(a),class:normalizeClass(unref(s).e("body"))},[renderSlot(g.$slots,"default")],10,_hoisted_3$7),g.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(s).e("footer"))},[renderSlot(g.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc(_sfc_main$k,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(t,r)=>{const n=getCurrentInstance().emit,{nextZIndex:o}=useZIndex();let i="";const a=useId(),s=useId(),u=ref(!1),c=ref(!1),d=ref(!1),m=ref(t.zIndex||o());let v,g;const b=useGlobalConfig("namespace",defaultNamespace),T=computed(()=>{const Ie={},pe=`--${b.value}-dialog`;return t.fullscreen||(t.top&&(Ie[`${pe}-margin-top`]=t.top),t.width&&(Ie[`${pe}-width`]=addUnit(t.width))),Ie}),_=computed(()=>t.alignCenter?{display:"flex"}:{});function y(){n("opened")}function O(){n("closed"),n(UPDATE_MODEL_EVENT,!1),t.destroyOnClose&&(d.value=!1)}function V(){n("close")}function Ce(){g==null||g(),v==null||v(),t.openDelay&&t.openDelay>0?{stop:v}=useTimeoutFn(()=>de(),t.openDelay):de()}function ae(){v==null||v(),g==null||g(),t.closeDelay&&t.closeDelay>0?{stop:g}=useTimeoutFn(()=>oe(),t.closeDelay):oe()}function Fe(){function Ie(pe){pe||(c.value=!0,u.value=!1)}t.beforeClose?t.beforeClose(Ie):ae()}function _e(){t.closeOnClickModal&&Fe()}function de(){isClient&&(u.value=!0)}function oe(){u.value=!1}function he(){n("openAutoFocus")}function Ve(){n("closeAutoFocus")}function le(Ie){var pe;((pe=Ie.detail)==null?void 0:pe.focusReason)==="pointer"&&Ie.preventDefault()}t.lockScroll&&useLockscreen(u);function ie(){t.closeOnPressEscape&&Fe()}return watch(()=>t.modelValue,Ie=>{Ie?(c.value=!1,Ce(),d.value=!0,m.value=t.zIndex?m.value++:o(),nextTick(()=>{n("open"),r.value&&(r.value.scrollTop=0)})):u.value&&ae()}),watch(()=>t.fullscreen,Ie=>{r.value&&(Ie?(i=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=i)}),onMounted(()=>{t.modelValue&&(u.value=!0,d.value=!0,Ce())}),{afterEnter:y,afterLeave:O,beforeLeave:V,handleClose:Fe,onModalClick:_e,close:ae,doClose:oe,onOpenAutoFocus:he,onCloseAutoFocus:Ve,onCloseRequested:ie,onFocusoutPrevented:le,titleId:a,bodyId:s,closed:c,style:T,overlayDialogStyle:_,rendered:d,visible:u,zIndex:m}},_hoisted_1$e=["aria-label","aria-labelledby","aria-describedby"],__default__$b=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$j=defineComponent({...__default__$b,props:dialogProps,emits:dialogEmits,setup(t,{expose:r}){const e=t,n=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!n.title)),useDeprecated({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},computed(()=>!!e.customClass));const o=useNamespace("dialog"),i=ref(),a=ref(),s=ref(),{visible:u,titleId:c,bodyId:d,style:m,overlayDialogStyle:v,rendered:g,zIndex:b,afterEnter:T,afterLeave:_,beforeLeave:y,handleClose:O,onModalClick:V,onOpenAutoFocus:Ce,onCloseAutoFocus:ae,onCloseRequested:Fe,onFocusoutPrevented:_e}=useDialog(e,i);provide(dialogInjectionKey,{dialogRef:i,headerRef:a,bodyId:d,ns:o,rendered:g,style:m});const de=useSameTarget(V),oe=computed(()=>e.draggable&&!e.fullscreen);return r({visible:u,dialogContentRef:s}),(he,Ve)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!he.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(T),onAfterLeave:unref(_),onBeforeLeave:unref(y),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:he.modal,"overlay-class":he.modalClass,"z-index":unref(b)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":he.title||void 0,"aria-labelledby":he.title?void 0:unref(c),"aria-describedby":unref(d),class:normalizeClass(`${unref(o).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(v)),onClick:Ve[0]||(Ve[0]=(...le)=>unref(de).onClick&&unref(de).onClick(...le)),onMousedown:Ve[1]||(Ve[1]=(...le)=>unref(de).onMousedown&&unref(de).onMousedown(...le)),onMouseup:Ve[2]||(Ve[2]=(...le)=>unref(de).onMouseup&&unref(de).onMouseup(...le))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(u),"focus-start-el":"container",onFocusAfterTrapped:unref(Ce),onFocusAfterReleased:unref(ae),onFocusoutPrevented:unref(_e),onReleaseRequested:unref(Fe)},{default:withCtx(()=>[unref(g)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:s},he.$attrs,{"custom-class":he.customClass,center:he.center,"align-center":he.alignCenter,"close-icon":he.closeIcon,draggable:unref(oe),fullscreen:he.fullscreen,"show-close":he.showClose,title:he.title,"aria-level":he.headerAriaLevel,onClose:unref(O)}),createSlots({header:withCtx(()=>[he.$slots.title?renderSlot(he.$slots,"title",{key:1}):renderSlot(he.$slots,"header",{key:0,close:unref(O),titleId:unref(c),titleClass:unref(o).e("title")})]),default:withCtx(()=>[renderSlot(he.$slots,"default")]),_:2},[he.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(he.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$e)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Dialog=_export_sfc(_sfc_main$j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ElDialog=withInstall(Dialog),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),imageViewerEmits={close:()=>!0,switch:t=>isNumber$1(t),rotate:t=>isNumber$1(t)},_hoisted_1$d=["src"],__default__$a=defineComponent({name:"ElImageViewer"}),_sfc_main$i=defineComponent({...__default__$a,props:imageViewerProps,emits:imageViewerEmits,setup(t,{expose:r,emit:e}){const n=t,o={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:i}=useLocale(),a=useNamespace("image-viewer"),{nextZIndex:s}=useZIndex(),u=ref(),c=ref([]),d=effectScope(),m=ref(!0),v=ref(n.initialIndex),g=shallowRef(o.CONTAIN),b=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),T=computed(()=>{const{urlList:tr}=n;return tr.length<=1}),_=computed(()=>v.value===0),y=computed(()=>v.value===n.urlList.length-1),O=computed(()=>n.urlList[v.value]),V=computed(()=>[a.e("btn"),a.e("prev"),a.is("disabled",!n.infinite&&_.value)]),Ce=computed(()=>[a.e("btn"),a.e("next"),a.is("disabled",!n.infinite&&y.value)]),ae=computed(()=>{const{scale:tr,deg:dr,offsetX:pr,offsetY:ar,enableTransition:hr}=b.value;let Ne=pr/tr,nr=ar/tr;switch(dr%360){case 90:case-270:[Ne,nr]=[nr,-Ne];break;case 180:case-180:[Ne,nr]=[-Ne,-nr];break;case 270:case-90:[Ne,nr]=[-nr,Ne];break}const sr={transform:`scale(${tr}) rotate(${dr}deg) translate(${Ne}px, ${nr}px)`,transition:hr?"transform .3s":""};return g.value.name===o.CONTAIN.name&&(sr.maxWidth=sr.maxHeight="100%"),sr}),Fe=computed(()=>isNumber$1(n.zIndex)?n.zIndex:s());function _e(){oe(),e("close")}function de(){const tr=throttle(pr=>{switch(pr.code){case EVENT_CODE.esc:n.closeOnPressEscape&&_e();break;case EVENT_CODE.space:Ie();break;case EVENT_CODE.left:kt();break;case EVENT_CODE.up:Dt("zoomIn");break;case EVENT_CODE.right:Ue();break;case EVENT_CODE.down:Dt("zoomOut");break}}),dr=throttle(pr=>{const ar=pr.deltaY||pr.deltaX;Dt(ar<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});d.run(()=>{useEventListener(document,"keydown",tr),useEventListener(document,"wheel",dr)})}function oe(){d.stop()}function he(){m.value=!1}function Ve(tr){m.value=!1,tr.target.alt=i("el.image.error")}function le(tr){if(m.value||tr.button!==0||!u.value)return;b.value.enableTransition=!1;const{offsetX:dr,offsetY:pr}=b.value,ar=tr.pageX,hr=tr.pageY,Ne=throttle(sr=>{b.value={...b.value,offsetX:dr+sr.pageX-ar,offsetY:pr+sr.pageY-hr}}),nr=useEventListener(document,"mousemove",Ne);useEventListener(document,"mouseup",()=>{nr()}),tr.preventDefault()}function ie(){b.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Ie(){if(m.value)return;const tr=keysOf(o),dr=Object.values(o),pr=g.value.name,hr=(dr.findIndex(Ne=>Ne.name===pr)+1)%tr.length;g.value=o[tr[hr]],ie()}function pe(tr){const dr=n.urlList.length;v.value=(tr+dr)%dr}function kt(){_.value&&!n.infinite||pe(v.value-1)}function Ue(){y.value&&!n.infinite||pe(v.value+1)}function Dt(tr,dr={}){if(m.value)return;const{minScale:pr,maxScale:ar}=n,{zoomRate:hr,rotateDeg:Ne,enableTransition:nr}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...dr};switch(tr){case"zoomOut":b.value.scale>pr&&(b.value.scale=Number.parseFloat((b.value.scale/hr).toFixed(3)));break;case"zoomIn":b.value.scale<ar&&(b.value.scale=Number.parseFloat((b.value.scale*hr).toFixed(3)));break;case"clockwise":b.value.deg+=Ne,e("rotate",b.value.deg);break;case"anticlockwise":b.value.deg-=Ne,e("rotate",b.value.deg);break}b.value.enableTransition=nr}return watch(O,()=>{nextTick(()=>{const tr=c.value[0];tr!=null&&tr.complete||(m.value=!0)})}),watch(v,tr=>{ie(),e("switch",tr)}),onMounted(()=>{var tr,dr;de(),(dr=(tr=u.value)==null?void 0:tr.focus)==null||dr.call(tr)}),r({setActiveItem:pe}),(tr,dr)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!tr.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:normalizeClass(unref(a).e("wrapper")),style:normalizeStyle({zIndex:unref(Fe)})},[createBaseVNode("div",{class:normalizeClass(unref(a).e("mask")),onClick:dr[0]||(dr[0]=withModifiers(pr=>tr.hideOnClickModal&&_e(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(a).e("btn"),unref(a).e("close")]),onClick:_e},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(T)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(V)),onClick:kt},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(Ce)),onClick:Ue},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(a).e("btn"),unref(a).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(a).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:dr[1]||(dr[1]=pr=>Dt("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:dr[2]||(dr[2]=pr=>Dt("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(a).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:Ie},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(g).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(a).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:dr[3]||(dr[3]=pr=>Dt("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:dr[4]||(dr[4]=pr=>Dt("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(a).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(tr.urlList,(pr,ar)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:hr=>c.value[ar]=hr,key:pr,src:pr,style:normalizeStyle(unref(ae)),class:normalizeClass(unref(a).e("img")),onLoad:he,onError:Ve,onMousedown:le},null,46,_hoisted_1$d)),[[vShow,ar===v.value]])),128))],2),renderSlot(tr.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc(_sfc_main$i,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),imageEmits={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>isNumber$1(t),close:()=>!0,show:()=>!0},_hoisted_1$c=["src","loading"],_hoisted_2$a={key:0},__default__$9=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$h=defineComponent({...__default__$9,props:imageProps,emits:imageEmits,setup(t,{emit:r}){const e=t;let n="";const{t:o}=useLocale(),i=useNamespace("image"),a=useAttrs$1(),s=useAttrs(),u=ref(),c=ref(!1),d=ref(!0),m=ref(!1),v=ref(),g=ref(),b=isClient&&"loading"in HTMLImageElement.prototype;let T,_;const y=computed(()=>[i.e("inner"),Ce.value&&i.e("preview"),d.value&&i.is("loading")]),O=computed(()=>a.style),V=computed(()=>{const{fit:Dt}=e;return isClient&&Dt?{objectFit:Dt}:{}}),Ce=computed(()=>{const{previewSrcList:Dt}=e;return Array.isArray(Dt)&&Dt.length>0}),ae=computed(()=>{const{previewSrcList:Dt,initialIndex:tr}=e;let dr=tr;return tr>Dt.length-1&&(dr=0),dr}),Fe=computed(()=>e.loading==="eager"?!1:!b&&e.loading==="lazy"||e.lazy),_e=()=>{isClient&&(d.value=!0,c.value=!1,u.value=e.src)};function de(Dt){d.value=!1,c.value=!1,r("load",Dt)}function oe(Dt){d.value=!1,c.value=!0,r("error",Dt)}function he(){isInContainer(v.value,g.value)&&(_e(),ie())}const Ve=useThrottleFn(he,200,!0);async function le(){var Dt;if(!isClient)return;await nextTick();const{scrollContainer:tr}=e;isElement(tr)?g.value=tr:isString$2(tr)&&tr!==""?g.value=(Dt=document.querySelector(tr))!=null?Dt:void 0:v.value&&(g.value=getScrollContainer(v.value)),g.value&&(T=useEventListener(g,"scroll",Ve),setTimeout(()=>he(),100))}function ie(){!isClient||!g.value||!Ve||(T==null||T(),g.value=void 0)}function Ie(Dt){if(Dt.ctrlKey){if(Dt.deltaY<0)return Dt.preventDefault(),!1;if(Dt.deltaY>0)return Dt.preventDefault(),!1}}function pe(){Ce.value&&(_=useEventListener("wheel",Ie,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",m.value=!0,r("show"))}function kt(){_==null||_(),document.body.style.overflow=n,m.value=!1,r("close")}function Ue(Dt){r("switch",Dt)}return watch(()=>e.src,()=>{Fe.value?(d.value=!0,c.value=!1,ie(),le()):_e()}),onMounted(()=>{Fe.value?le():_e()}),(Dt,tr)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:v,class:normalizeClass([unref(i).b(),Dt.$attrs.class]),style:normalizeStyle(unref(O))},[c.value?renderSlot(Dt.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(i).e("error"))},toDisplayString(unref(o)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[u.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(s),{src:u.value,loading:Dt.loading,style:unref(V),class:unref(y),onClick:pe,onLoad:de,onError:oe}),null,16,_hoisted_1$c)):createCommentVNode("v-if",!0),d.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(i).e("wrapper"))},[renderSlot(Dt.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(i).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ce)?(openBlock(),createElementBlock(Fragment,{key:2},[m.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":Dt.zIndex,"initial-index":unref(ae),infinite:Dt.infinite,"zoom-rate":Dt.zoomRate,"min-scale":Dt.minScale,"max-scale":Dt.maxScale,"url-list":Dt.previewSrcList,"hide-on-click-modal":Dt.hideOnClickModal,teleported:Dt.previewTeleported,"close-on-press-escape":Dt.closeOnPressEscape,onClose:kt,onSwitch:Ue},{default:withCtx(()=>[Dt.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$a,[renderSlot(Dt.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc(_sfc_main$h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ElImage=withInstall(Image$1),selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption(t,r){const e=inject(selectKey),n=inject(selectGroupKey,{disabled:!1}),o=computed(()=>isObject$2(t.value)),i=computed(()=>e.props.multiple?m(e.props.modelValue,t.value):v(t.value,e.props.modelValue)),a=computed(()=>{if(e.props.multiple){const T=e.props.modelValue||[];return!i.value&&T.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),s=computed(()=>t.label||(o.value?"":t.value)),u=computed(()=>t.value||t.label||""),c=computed(()=>t.disabled||r.groupDisabled||a.value),d=getCurrentInstance(),m=(T=[],_)=>{if(o.value){const y=e.props.valueKey;return T&&T.some(O=>toRaw(get(O,y))===get(_,y))}else return T&&T.includes(_)},v=(T,_)=>{if(o.value){const{valueKey:y}=e.props;return get(T,y)===get(_,y)}else return T===_},g=()=>{!t.disabled&&!n.disabled&&(e.hoverIndex=e.optionsArray.indexOf(d.proxy))};watch(()=>s.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),watch(()=>t.value,(T,_)=>{const{remote:y,valueKey:O}=e.props;if(Object.is(T,_)||(e.onOptionDestroy(_,d.proxy),e.onOptionCreate(d.proxy)),!t.created&&!y){if(O&&isObject$2(T)&&isObject$2(_)&&T[O]===_[O])return;e.setSelected()}}),watch(()=>n.disabled,()=>{r.groupDisabled=n.disabled},{immediate:!0});const{queryChange:b}=toRaw(e);return watch(b,T=>{const{query:_}=unref(T),y=new RegExp(escapeStringRegexp(_),"i");r.visible=y.test(s.value)||t.created,r.visible||e.filteredOptionsCount--},{immediate:!0}),{select:e,currentLabel:s,currentValue:u,itemSelected:i,isDisabled:c,hoverItem:g}}const _sfc_main$g=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const r=useNamespace("select"),e=useId(),n=computed(()=>[r.be("dropdown","item"),r.is("disabled",unref(s)),{selected:unref(a),hover:unref(m)}]),o=reactive({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:i,itemSelected:a,isDisabled:s,select:u,hoverItem:c}=useOption(t,o),{visible:d,hover:m}=toRefs(o),v=getCurrentInstance().proxy;u.onOptionCreate(v),onBeforeUnmount(()=>{const b=v.value,{selected:T}=u,y=(u.props.multiple?T:[T]).some(O=>O.value===v.value);nextTick(()=>{u.cachedOptions.get(b)===v&&!y&&u.cachedOptions.delete(b)}),u.onOptionDestroy(b,v)});function g(){t.disabled!==!0&&o.groupDisabled!==!0&&u.handleOptionSelect(v)}return{ns:r,id:e,containerKls:n,currentLabel:i,itemSelected:a,isDisabled:s,select:u,hoverItem:c,visible:d,hover:m,selectOptionClick:g,states:o}}}),_hoisted_1$b=["id","aria-disabled","aria-selected"];function _sfc_render$3(t,r,e,n,o,i){return withDirectives((openBlock(),createElementBlock("li",{id:t.id,class:normalizeClass(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:r[0]||(r[0]=(...a)=>t.hoverItem&&t.hoverItem(...a)),onClick:r[1]||(r[1]=withModifiers((...a)=>t.selectOptionClick&&t.selectOptionClick(...a),["stop"]))},[renderSlot(t.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(t.currentLabel),1)])],42,_hoisted_1$b)),[[vShow,t.visible]])}var Option=_export_sfc(_sfc_main$g,[["render",_sfc_render$3],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const _sfc_main$f=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=inject(selectKey),r=useNamespace("select"),e=computed(()=>t.props.popperClass),n=computed(()=>t.props.multiple),o=computed(()=>t.props.fitInputWidth),i=ref("");function a(){var s;i.value=`${(s=t.selectWrapper)==null?void 0:s.offsetWidth}px`}return onMounted(()=>{a(),useResizeObserver(t.selectWrapper,a)}),{ns:r,minWidth:i,popperClass:e,isMultiple:n,isFitInputWidth:o}}});function _sfc_render$2(t,r,e,n,o,i){return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:normalizeStyle({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[renderSlot(t.$slots,"default")],6)}var ElSelectMenu=_export_sfc(_sfc_main$f,[["render",_sfc_render$2],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function useSelectStates(t){const{t:r}=useLocale();return reactive({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:t.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:r("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const useSelect=(t,r,e)=>{const{t:n}=useLocale(),o=useNamespace("select");useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>t.suffixTransition===!1));const i=ref(null),a=ref(null),s=ref(null),u=ref(null),c=ref(null),d=ref(null),m=ref(null),v=ref(null),g=ref(),b=shallowRef({query:""}),T=shallowRef(""),_=ref([]);let y=0;const{form:O,formItem:V}=useFormItem(),Ce=computed(()=>!t.filterable||t.multiple||!r.visible),ae=computed(()=>t.disabled||(O==null?void 0:O.disabled)),Fe=computed(()=>{const Br=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!=="";return t.clearable&&!ae.value&&r.inputHovering&&Br}),_e=computed(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),de=computed(()=>o.is("reverse",_e.value&&r.visible&&t.suffixTransition)),oe=computed(()=>(O==null?void 0:O.statusIcon)&&(V==null?void 0:V.validateState)&&ValidateComponentsMap[V==null?void 0:V.validateState]),he=computed(()=>t.remote?300:0),Ve=computed(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&r.query===""&&r.options.size===0?!1:t.filterable&&r.query&&r.options.size>0&&r.filteredOptionsCount===0?t.noMatchText||n("el.select.noMatch"):r.options.size===0?t.noDataText||n("el.select.noData"):null),le=computed(()=>{const Br=Array.from(r.options.values()),Gr=[];return _.value.forEach(Bn=>{const Xn=Br.findIndex(_o=>_o.currentLabel===Bn);Xn>-1&&Gr.push(Br[Xn])}),Gr.length>=Br.length?Gr:Br}),ie=computed(()=>Array.from(r.cachedOptions.values())),Ie=computed(()=>{const Br=le.value.filter(Gr=>!Gr.created).some(Gr=>Gr.currentLabel===r.query);return t.filterable&&t.allowCreate&&r.query!==""&&!Br}),pe=useFormSize(),kt=computed(()=>["small"].includes(pe.value)?"small":"default"),Ue=computed({get(){return r.visible&&Ve.value!==!1},set(Br){r.visible=Br}});watch([()=>ae.value,()=>pe.value,()=>O==null?void 0:O.size],()=>{nextTick(()=>{Dt()})}),watch(()=>t.placeholder,Br=>{r.cachedPlaceHolder=r.currentPlaceholder=Br,t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(r.currentPlaceholder="")}),watch(()=>t.modelValue,(Br,Gr)=>{t.multiple&&(Dt(),Br&&Br.length>0||a.value&&r.query!==""?r.currentPlaceholder="":r.currentPlaceholder=r.cachedPlaceHolder,t.filterable&&!t.reserveKeyword&&(r.query="",tr(r.query))),ar(),t.filterable&&!t.multiple&&(r.inputLength=20),!isEqual(Br,Gr)&&t.validateEvent&&(V==null||V.validate("change").catch(Bn=>void 0))},{flush:"post",deep:!0}),watch(()=>r.visible,Br=>{var Gr,Bn,Xn,_o,oo;Br?((Bn=(Gr=u.value)==null?void 0:Gr.updatePopper)==null||Bn.call(Gr),t.filterable&&(r.filteredOptionsCount=r.optionsCount,r.query=t.remote?"":r.selectedLabel,(_o=(Xn=s.value)==null?void 0:Xn.focus)==null||_o.call(Xn),t.multiple?(oo=a.value)==null||oo.focus():r.selectedLabel&&(r.currentPlaceholder=`${r.selectedLabel}`,r.selectedLabel=""),tr(r.query),!t.multiple&&!t.remote&&(b.value.query="",triggerRef(b),triggerRef(T)))):(t.filterable&&(isFunction$3(t.filterMethod)&&t.filterMethod(""),isFunction$3(t.remoteMethod)&&t.remoteMethod("")),r.query="",r.previousQuery=null,r.selectedLabel="",r.inputLength=20,r.menuVisibleOnFocus=!1,Ne(),nextTick(()=>{a.value&&a.value.value===""&&r.selected.length===0&&(r.currentPlaceholder=r.cachedPlaceHolder)}),t.multiple||(r.selected&&(t.filterable&&t.allowCreate&&r.createdSelected&&r.createdLabel?r.selectedLabel=r.createdLabel:r.selectedLabel=r.selected.currentLabel,t.filterable&&(r.query=r.selectedLabel)),t.filterable&&(r.currentPlaceholder=r.cachedPlaceHolder))),e.emit("visible-change",Br)}),watch(()=>r.options.entries(),()=>{var Br,Gr,Bn;if(!isClient)return;(Gr=(Br=u.value)==null?void 0:Br.updatePopper)==null||Gr.call(Br),t.multiple&&Dt();const Xn=((Bn=m.value)==null?void 0:Bn.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!isUndefined$1(t.modelValue)||!Array.from(Xn).includes(document.activeElement))&&ar(),t.defaultFirstOption&&(t.filterable||t.remote)&&r.filteredOptionsCount&&pr()},{flush:"post"}),watch(()=>r.hoverIndex,Br=>{isNumber$1(Br)&&Br>-1?g.value=le.value[Br]||{}:g.value={},le.value.forEach(Gr=>{Gr.hover=g.value===Gr})});const Dt=()=>{nextTick(()=>{var Br,Gr;if(!i.value)return;const Bn=i.value.$el.querySelector("input");y=y||(Bn.clientHeight>0?Bn.clientHeight+2:0);const Xn=d.value,_o=getComputedStyle(Bn).getPropertyValue(o.cssVarName("input-height")),oo=Number.parseFloat(_o)||getComponentSize(pe.value||(O==null?void 0:O.size)),Ma=pe.value||oo===y||y<=0?oo:y;!(Bn.offsetParent===null)&&(Bn.style.height=`${(r.selected.length===0?Ma:Math.max(Xn?Xn.clientHeight+(Xn.clientHeight>Ma?6:0):0,Ma))-2}px`),r.visible&&Ve.value!==!1&&((Gr=(Br=u.value)==null?void 0:Br.updatePopper)==null||Gr.call(Br))})},tr=async Br=>{if(!(r.previousQuery===Br||r.isOnComposition)){if(r.previousQuery===null&&(isFunction$3(t.filterMethod)||isFunction$3(t.remoteMethod))){r.previousQuery=Br;return}r.previousQuery=Br,nextTick(()=>{var Gr,Bn;r.visible&&((Bn=(Gr=u.value)==null?void 0:Gr.updatePopper)==null||Bn.call(Gr))}),r.hoverIndex=-1,t.multiple&&t.filterable&&nextTick(()=>{if(!ae.value){const Gr=a.value.value.length*15+20;r.inputLength=t.collapseTags?Math.min(50,Gr):Gr,dr()}Dt()}),t.remote&&isFunction$3(t.remoteMethod)?(r.hoverIndex=-1,t.remoteMethod(Br)):isFunction$3(t.filterMethod)?(t.filterMethod(Br),triggerRef(T)):(r.filteredOptionsCount=r.optionsCount,b.value.query=Br,triggerRef(b),triggerRef(T)),t.defaultFirstOption&&(t.filterable||t.remote)&&r.filteredOptionsCount&&(await nextTick(),pr())}},dr=()=>{r.currentPlaceholder!==""&&(r.currentPlaceholder=a.value.value?"":r.cachedPlaceHolder)},pr=()=>{const Br=le.value.filter(Xn=>Xn.visible&&!Xn.disabled&&!Xn.states.groupDisabled),Gr=Br.find(Xn=>Xn.created),Bn=Br[0];r.hoverIndex=vr(le.value,Gr||Bn)},ar=()=>{var Br;if(t.multiple)r.selectedLabel="";else{const Bn=hr(t.modelValue);(Br=Bn.props)!=null&&Br.created?(r.createdLabel=Bn.props.value,r.createdSelected=!0):r.createdSelected=!1,r.selectedLabel=Bn.currentLabel,r.selected=Bn,t.filterable&&(r.query=r.selectedLabel);return}const Gr=[];Array.isArray(t.modelValue)&&t.modelValue.forEach(Bn=>{Gr.push(hr(Bn))}),r.selected=Gr,nextTick(()=>{Dt()})},hr=Br=>{let Gr;const Bn=toRawType(Br).toLowerCase()==="object",Xn=toRawType(Br).toLowerCase()==="null",_o=toRawType(Br).toLowerCase()==="undefined";for(let si=r.cachedOptions.size-1;si>=0;si--){const ci=ie.value[si];if(Bn?get(ci.value,t.valueKey)===get(Br,t.valueKey):ci.value===Br){Gr={value:Br,currentLabel:ci.currentLabel,isDisabled:ci.isDisabled};break}}if(Gr)return Gr;const oo=Bn?Br.label:!Xn&&!_o?Br:"",Ma={value:Br,currentLabel:oo};return t.multiple&&(Ma.hitState=!1),Ma},Ne=()=>{setTimeout(()=>{const Br=t.valueKey;t.multiple?r.selected.length>0?r.hoverIndex=Math.min.apply(null,r.selected.map(Gr=>le.value.findIndex(Bn=>get(Bn,Br)===get(Gr,Br)))):r.hoverIndex=-1:r.hoverIndex=le.value.findIndex(Gr=>Kn(Gr)===Kn(r.selected))},300)},nr=()=>{var Br,Gr;sr(),(Gr=(Br=u.value)==null?void 0:Br.updatePopper)==null||Gr.call(Br),t.multiple&&Dt()},sr=()=>{var Br;r.inputWidth=(Br=i.value)==null?void 0:Br.$el.offsetWidth},$e=()=>{t.filterable&&r.query!==r.selectedLabel&&(r.query=r.selectedLabel,tr(r.query))},er=debounce(()=>{$e()},he.value),or=debounce(Br=>{tr(Br.target.value)},he.value),ze=Br=>{isEqual(t.modelValue,Br)||e.emit(CHANGE_EVENT,Br)},rr=Br=>findLastIndex(Br,Gr=>!r.disabledOptions.has(Gr)),Et=Br=>{if(Br.code!==EVENT_CODE.delete){if(Br.target.value.length<=0&&!Mn()){const Gr=t.modelValue.slice(),Bn=rr(Gr);if(Bn<0)return;Gr.splice(Bn,1),e.emit(UPDATE_MODEL_EVENT,Gr),ze(Gr)}Br.target.value.length===1&&t.modelValue.length===0&&(r.currentPlaceholder=r.cachedPlaceHolder)}},Lt=(Br,Gr)=>{const Bn=r.selected.indexOf(Gr);if(Bn>-1&&!ae.value){const Xn=t.modelValue.slice();Xn.splice(Bn,1),e.emit(UPDATE_MODEL_EVENT,Xn),ze(Xn),e.emit("remove-tag",Gr.value)}Br.stopPropagation(),Qr()},cr=Br=>{Br.stopPropagation();const Gr=t.multiple?[]:"";if(!isString$2(Gr))for(const Bn of r.selected)Bn.isDisabled&&Gr.push(Bn.value);e.emit(UPDATE_MODEL_EVENT,Gr),ze(Gr),r.hoverIndex=-1,r.visible=!1,e.emit("clear"),Qr()},mr=Br=>{var Gr;if(t.multiple){const Bn=(t.modelValue||[]).slice(),Xn=vr(Bn,Br.value);Xn>-1?Bn.splice(Xn,1):(t.multipleLimit<=0||Bn.length<t.multipleLimit)&&Bn.push(Br.value),e.emit(UPDATE_MODEL_EVENT,Bn),ze(Bn),Br.created&&(r.query="",tr(""),r.inputLength=20),t.filterable&&((Gr=a.value)==null||Gr.focus())}else e.emit(UPDATE_MODEL_EVENT,Br.value),ze(Br.value),r.visible=!1;Tr(),!r.visible&&nextTick(()=>{Ir(Br)})},vr=(Br=[],Gr)=>{if(!isObject$2(Gr))return Br.indexOf(Gr);const Bn=t.valueKey;let Xn=-1;return Br.some((_o,oo)=>toRaw(get(_o,Bn))===get(Gr,Bn)?(Xn=oo,!0):!1),Xn},Tr=()=>{const Br=a.value||i.value;Br&&(Br==null||Br.focus())},Ir=Br=>{var Gr,Bn,Xn,_o,oo;const Ma=Array.isArray(Br)?Br[0]:Br;let si=null;if(Ma!=null&&Ma.value){const ci=le.value.filter(Ei=>Ei.value===Ma.value);ci.length>0&&(si=ci[0].$el)}if(u.value&&si){const ci=(_o=(Xn=(Bn=(Gr=u.value)==null?void 0:Gr.popperRef)==null?void 0:Bn.contentRef)==null?void 0:Xn.querySelector)==null?void 0:_o.call(Xn,`.${o.be("dropdown","wrap")}`);ci&&scrollIntoView(ci,si)}(oo=v.value)==null||oo.handleScroll()},kr=Br=>{r.optionsCount++,r.filteredOptionsCount++,r.options.set(Br.value,Br),r.cachedOptions.set(Br.value,Br),Br.disabled&&r.disabledOptions.set(Br.value,Br)},Ar=(Br,Gr)=>{r.options.get(Br)===Gr&&(r.optionsCount--,r.filteredOptionsCount--,r.options.delete(Br))},Nr=Br=>{Br.code!==EVENT_CODE.backspace&&Mn(!1),r.inputLength=a.value.value.length*15+20,Dt()},Mn=Br=>{if(!Array.isArray(r.selected))return;const Gr=rr(r.selected.map(Xn=>Xn.value)),Bn=r.selected[Gr];if(Bn)return Br===!0||Br===!1?(Bn.hitState=Br,Br):(Bn.hitState=!Bn.hitState,Bn.hitState)},Or=Br=>{const Gr=Br.target.value;if(Br.type==="compositionend")r.isOnComposition=!1,nextTick(()=>tr(Gr));else{const Bn=Gr[Gr.length-1]||"";r.isOnComposition=!isKorean(Bn)}},Pr=()=>{nextTick(()=>Ir(r.selected))},Rr=Br=>{r.focused||((t.automaticDropdown||t.filterable)&&(t.filterable&&!r.visible&&(r.menuVisibleOnFocus=!0),r.visible=!0),r.focused=!0,e.emit("focus",Br))},Qr=()=>{var Br,Gr;r.visible?(Br=a.value||i.value)==null||Br.focus():(Gr=i.value)==null||Gr.focus()},hn=()=>{var Br,Gr,Bn;r.visible=!1,(Br=i.value)==null||Br.blur(),(Bn=(Gr=s.value)==null?void 0:Gr.blur)==null||Bn.call(Gr)},Ur=Br=>{var Gr,Bn,Xn;(Gr=u.value)!=null&&Gr.isFocusInsideContent(Br)||(Bn=c.value)!=null&&Bn.isFocusInsideContent(Br)||(Xn=m.value)!=null&&Xn.contains(Br.relatedTarget)||(r.visible&&Gn(),r.focused=!1,e.emit("blur",Br))},qr=Br=>{cr(Br)},Gn=()=>{r.visible=!1},jn=Br=>{r.visible&&(Br.preventDefault(),Br.stopPropagation(),r.visible=!1)},Jr=Br=>{Br&&!r.mouseEnter||ae.value||(r.menuVisibleOnFocus?r.menuVisibleOnFocus=!1:(!u.value||!u.value.isFocusInsideContent())&&(r.visible=!r.visible),Qr())},Lr=()=>{r.visible?le.value[r.hoverIndex]&&mr(le.value[r.hoverIndex]):Jr()},Kn=Br=>isObject$2(Br.value)?get(Br.value,t.valueKey):Br.value,vo=computed(()=>le.value.filter(Br=>Br.visible).every(Br=>Br.disabled)),bo=computed(()=>t.multiple?r.selected.slice(0,t.maxCollapseTags):[]),so=computed(()=>t.multiple?r.selected.slice(t.maxCollapseTags):[]),co=Br=>{if(!r.visible){r.visible=!0;return}if(!(r.options.size===0||r.filteredOptionsCount===0)&&!r.isOnComposition&&!vo.value){Br==="next"?(r.hoverIndex++,r.hoverIndex===r.options.size&&(r.hoverIndex=0)):Br==="prev"&&(r.hoverIndex--,r.hoverIndex<0&&(r.hoverIndex=r.options.size-1));const Gr=le.value[r.hoverIndex];(Gr.disabled===!0||Gr.states.groupDisabled===!0||!Gr.visible)&&co(Br),nextTick(()=>Ir(g.value))}},Ro=()=>{r.mouseEnter=!0},An=()=>{r.mouseEnter=!1},Aa=(Br,Gr)=>{var Bn,Xn;Lt(Br,Gr),(Xn=(Bn=c.value)==null?void 0:Bn.updatePopper)==null||Xn.call(Bn)},to=computed(()=>({maxWidth:`${unref(r.inputWidth)-32-(oe.value?22:0)}px`,width:"100%"}));return{optionList:_,optionsArray:le,hoverOption:g,selectSize:pe,handleResize:nr,debouncedOnInputChange:er,debouncedQueryChange:or,deletePrevTag:Et,deleteTag:Lt,deleteSelected:cr,handleOptionSelect:mr,scrollToOption:Ir,readonly:Ce,resetInputHeight:Dt,showClose:Fe,iconComponent:_e,iconReverse:de,showNewOption:Ie,collapseTagSize:kt,setSelected:ar,managePlaceholder:dr,selectDisabled:ae,emptyText:Ve,toggleLastOptionHitState:Mn,resetInputState:Nr,handleComposition:Or,onOptionCreate:kr,onOptionDestroy:Ar,handleMenuEnter:Pr,handleFocus:Rr,focus:Qr,blur:hn,handleBlur:Ur,handleClearClick:qr,handleClose:Gn,handleKeydownEscape:jn,toggleMenu:Jr,selectOption:Lr,getValueKey:Kn,navigateOptions:co,handleDeleteTooltipTag:Aa,dropMenuVisible:Ue,queryChange:b,groupQueryChange:T,showTagList:bo,collapseTagList:so,selectTagsStyle:to,reference:i,input:a,iOSInput:s,tooltipRef:u,tagTooltipRef:c,tags:d,selectWrapper:m,scrollbar:v,handleMouseEnter:Ro,handleMouseLeave:An}};var ElOptions=defineComponent({name:"ElOptions",emits:["update-options"],setup(t,{slots:r,emit:e}){let n=[];function o(i,a){if(i.length!==a.length)return!1;for(const[s]of i.entries())if(i[s]!=a[s])return!1;return!0}return()=>{var i,a;const s=(i=r.default)==null?void 0:i.call(r),u=[];function c(d){Array.isArray(d)&&d.forEach(m=>{var v,g,b,T;const _=(v=(m==null?void 0:m.type)||{})==null?void 0:v.name;_==="ElOptionGroup"?c(!isString$2(m.children)&&!Array.isArray(m.children)&&isFunction$3((g=m.children)==null?void 0:g.default)?(b=m.children)==null?void 0:b.default():m.children):_==="ElOption"?u.push((T=m.props)==null?void 0:T.label):Array.isArray(m.children)&&c(m.children)})}return s.length&&c((a=s[0])==null?void 0:a.children),o(u,n)||(n=u,e("update-options",u)),s}}});const COMPONENT_NAME$2="ElSelect",_sfc_main$e=defineComponent({name:COMPONENT_NAME$2,componentName:COMPONENT_NAME$2,components:{ElInput,ElSelectMenu,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:isValidComponentSize},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Ee,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(t,r){const e=useNamespace("select"),n=useNamespace("input"),{t:o}=useLocale(),i=useId(),a=useSelectStates(t),{optionList:s,optionsArray:u,hoverOption:c,selectSize:d,readonly:m,handleResize:v,collapseTagSize:g,debouncedOnInputChange:b,debouncedQueryChange:T,deletePrevTag:_,deleteTag:y,deleteSelected:O,handleOptionSelect:V,scrollToOption:Ce,setSelected:ae,resetInputHeight:Fe,managePlaceholder:_e,showClose:de,selectDisabled:oe,iconComponent:he,iconReverse:Ve,showNewOption:le,emptyText:ie,toggleLastOptionHitState:Ie,resetInputState:pe,handleComposition:kt,onOptionCreate:Ue,onOptionDestroy:Dt,handleMenuEnter:tr,handleFocus:dr,focus:pr,blur:ar,handleBlur:hr,handleClearClick:Ne,handleClose:nr,handleKeydownEscape:sr,toggleMenu:$e,selectOption:er,getValueKey:or,navigateOptions:ze,handleDeleteTooltipTag:rr,dropMenuVisible:Et,reference:Lt,input:cr,iOSInput:mr,tooltipRef:vr,tagTooltipRef:Tr,tags:Ir,selectWrapper:kr,scrollbar:Ar,queryChange:Nr,groupQueryChange:Mn,handleMouseEnter:Or,handleMouseLeave:Pr,showTagList:Rr,collapseTagList:Qr,selectTagsStyle:hn}=useSelect(t,a,r),{inputWidth:Ur,selected:qr,inputLength:Gn,filteredOptionsCount:jn,visible:Jr,selectedLabel:Lr,hoverIndex:Kn,query:vo,inputHovering:bo,currentPlaceholder:so,menuVisibleOnFocus:co,isOnComposition:Ro,options:An,cachedOptions:Aa,optionsCount:to,prefixWidth:Br}=toRefs(a),Gr=computed(()=>{const xa=[e.b()],Fs=unref(d);return Fs&&xa.push(e.m(Fs)),t.disabled&&xa.push(e.m("disabled")),xa}),Bn=computed(()=>[e.e("tags"),e.is("disabled",unref(oe))]),Xn=computed(()=>[e.b("tags-wrapper"),{"has-prefix":unref(Br)&&unref(qr).length}]),_o=computed(()=>[e.e("input"),e.is(unref(d)),e.is("disabled",unref(oe))]),oo=computed(()=>[e.e("input"),e.is(unref(d)),e.em("input","iOS")]),Ma=computed(()=>[e.is("empty",!t.allowCreate&&!!unref(vo)&&unref(jn)===0)]),si=computed(()=>({maxWidth:`${unref(Ur)>123?unref(Ur)-123:unref(Ur)-75}px`})),ci=computed(()=>({marginLeft:`${unref(Br)}px`,flexGrow:1,width:`${unref(Gn)/(unref(Ur)-32)}%`,maxWidth:`${unref(Ur)-42}px`}));provide(selectKey,reactive({props:t,options:An,optionsArray:u,cachedOptions:Aa,optionsCount:to,filteredOptionsCount:jn,hoverIndex:Kn,handleOptionSelect:V,onOptionCreate:Ue,onOptionDestroy:Dt,selectWrapper:kr,selected:qr,setSelected:ae,queryChange:Nr,groupQueryChange:Mn})),onMounted(()=>{a.cachedPlaceHolder=so.value=t.placeholder||(()=>o("el.select.placeholder")),t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(so.value=""),useResizeObserver(kr,v),t.remote&&t.multiple&&Fe(),nextTick(()=>{const xa=Lt.value&&Lt.value.$el;if(xa&&(Ur.value=xa.getBoundingClientRect().width,r.slots.prefix)){const Fs=xa.querySelector(`.${n.e("prefix")}`);Br.value=Math.max(Fs.getBoundingClientRect().width+11,30)}}),ae()}),t.multiple&&!Array.isArray(t.modelValue)&&r.emit(UPDATE_MODEL_EVENT,[]),!t.multiple&&Array.isArray(t.modelValue)&&r.emit(UPDATE_MODEL_EVENT,"");const Ei=computed(()=>{var xa,Fs;return(Fs=(xa=vr.value)==null?void 0:xa.popperRef)==null?void 0:Fs.contentRef});return{isIOS,onOptionsRendered:xa=>{s.value=xa},prefixWidth:Br,selectSize:d,readonly:m,handleResize:v,collapseTagSize:g,debouncedOnInputChange:b,debouncedQueryChange:T,deletePrevTag:_,deleteTag:y,handleDeleteTooltipTag:rr,deleteSelected:O,handleOptionSelect:V,scrollToOption:Ce,inputWidth:Ur,selected:qr,inputLength:Gn,filteredOptionsCount:jn,visible:Jr,selectedLabel:Lr,hoverIndex:Kn,query:vo,inputHovering:bo,currentPlaceholder:so,menuVisibleOnFocus:co,isOnComposition:Ro,options:An,resetInputHeight:Fe,managePlaceholder:_e,showClose:de,selectDisabled:oe,iconComponent:he,iconReverse:Ve,showNewOption:le,emptyText:ie,toggleLastOptionHitState:Ie,resetInputState:pe,handleComposition:kt,handleMenuEnter:tr,handleFocus:dr,focus:pr,blur:ar,handleBlur:hr,handleClearClick:Ne,handleClose:nr,handleKeydownEscape:sr,toggleMenu:$e,selectOption:er,getValueKey:or,navigateOptions:ze,dropMenuVisible:Et,reference:Lt,input:cr,iOSInput:mr,tooltipRef:vr,popperPaneRef:Ei,tags:Ir,selectWrapper:kr,scrollbar:Ar,wrapperKls:Gr,tagsKls:Bn,tagWrapperKls:Xn,inputKls:_o,iOSInputKls:oo,scrollbarKls:Ma,selectTagsStyle:hn,nsSelect:e,tagTextStyle:si,inputStyle:ci,handleMouseEnter:Or,handleMouseLeave:Pr,showTagList:Rr,collapseTagList:Qr,tagTooltipRef:Tr,contentId:i,hoverOption:c}}}),_hoisted_1$a=["disabled","autocomplete","aria-activedescendant","aria-controls","aria-expanded","aria-label"],_hoisted_2$9=["disabled"],_hoisted_3$6={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function _sfc_render$1(t,r,e,n,o,i){const a=resolveComponent("el-tag"),s=resolveComponent("el-tooltip"),u=resolveComponent("el-icon"),c=resolveComponent("el-input"),d=resolveComponent("el-option"),m=resolveComponent("el-options"),v=resolveComponent("el-scrollbar"),g=resolveComponent("el-select-menu"),b=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectWrapper",class:normalizeClass(t.wrapperKls),onMouseenter:r[22]||(r[22]=(...T)=>t.handleMouseEnter&&t.handleMouseEnter(...T)),onMouseleave:r[23]||(r[23]=(...T)=>t.handleMouseLeave&&t.handleMouseLeave(...T)),onClick:r[24]||(r[24]=withModifiers((...T)=>t.toggleMenu&&t.toggleMenu(...T),["stop"]))},[createVNode(s,{ref:"tooltipRef",visible:t.dropMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onShow:t.handleMenuEnter},{default:withCtx(()=>{var T,_;return[createBaseVNode("div",{class:"select-trigger",onMouseenter:r[20]||(r[20]=y=>t.inputHovering=!0),onMouseleave:r[21]||(r[21]=y=>t.inputHovering=!1)},[t.multiple?(openBlock(),createElementBlock("div",{key:0,ref:"tags",tabindex:"-1",class:normalizeClass(t.tagsKls),style:normalizeStyle(t.selectTagsStyle),onClick:r[15]||(r[15]=(...y)=>t.focus&&t.focus(...y))},[t.collapseTags&&t.selected.length?(openBlock(),createBlock(Transition,{key:0,onAfterLeave:t.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.tagWrapperKls)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.showTagList,y=>(openBlock(),createBlock(a,{key:t.getValueKey(y),closable:!t.selectDisabled&&!y.isDisabled,size:t.collapseTagSize,hit:y.hitState,type:t.tagType,"disable-transitions":"",onClose:O=>t.deleteTag(O,y)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle(t.tagTextStyle)},toDisplayString(y.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),t.selected.length>t.maxCollapseTags?(openBlock(),createBlock(a,{key:0,closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":""},{default:withCtx(()=>[t.collapseTagsTooltip?(openBlock(),createBlock(s,{key:0,ref:"tagTooltipRef",disabled:t.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},"+ "+toDisplayString(t.selected.length-t.maxCollapseTags),3)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(t.nsSelect.e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.collapseTagList,y=>(openBlock(),createElementBlock("div",{key:t.getValueKey(y),class:normalizeClass(t.nsSelect.e("collapse-tag"))},[createVNode(a,{class:"in-tooltip",closable:!t.selectDisabled&&!y.isDisabled,size:t.collapseTagSize,hit:y.hitState,type:t.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:O=>t.handleDeleteTooltipTag(O,y)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:t.inputWidth-75+"px"})},toDisplayString(y.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.nsSelect.e("tags-text"))},"+ "+toDisplayString(t.selected.length-t.maxCollapseTags),3))]),_:1},8,["size","type"])):createCommentVNode("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):createCommentVNode("v-if",!0),t.collapseTags?createCommentVNode("v-if",!0):(openBlock(),createBlock(Transition,{key:1,onAfterLeave:t.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.tagWrapperKls),style:normalizeStyle(t.prefixWidth&&t.selected.length?{marginLeft:`${t.prefixWidth}px`}:"")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.selected,y=>(openBlock(),createBlock(a,{key:t.getValueKey(y),closable:!t.selectDisabled&&!y.isDisabled,size:t.collapseTagSize,hit:y.hitState,type:t.tagType,"disable-transitions":"",onClose:O=>t.deleteTag(O,y)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:t.inputWidth-75+"px"})},toDisplayString(y.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),t.filterable&&!t.selectDisabled?withDirectives((openBlock(),createElementBlock("input",{key:2,ref:"input","onUpdate:modelValue":r[0]||(r[0]=y=>t.query=y),type:"text",class:normalizeClass(t.inputKls),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:normalizeStyle(t.inputStyle),role:"combobox","aria-activedescendant":((T=t.hoverOption)==null?void 0:T.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:r[1]||(r[1]=(...y)=>t.handleFocus&&t.handleFocus(...y)),onBlur:r[2]||(r[2]=(...y)=>t.handleBlur&&t.handleBlur(...y)),onKeyup:r[3]||(r[3]=(...y)=>t.managePlaceholder&&t.managePlaceholder(...y)),onKeydown:[r[4]||(r[4]=(...y)=>t.resetInputState&&t.resetInputState(...y)),r[5]||(r[5]=withKeys(withModifiers(y=>t.navigateOptions("next"),["prevent"]),["down"])),r[6]||(r[6]=withKeys(withModifiers(y=>t.navigateOptions("prev"),["prevent"]),["up"])),r[7]||(r[7]=withKeys((...y)=>t.handleKeydownEscape&&t.handleKeydownEscape(...y),["esc"])),r[8]||(r[8]=withKeys(withModifiers((...y)=>t.selectOption&&t.selectOption(...y),["stop","prevent"]),["enter"])),r[9]||(r[9]=withKeys((...y)=>t.deletePrevTag&&t.deletePrevTag(...y),["delete"])),r[10]||(r[10]=withKeys(y=>t.visible=!1,["tab"]))],onCompositionstart:r[11]||(r[11]=(...y)=>t.handleComposition&&t.handleComposition(...y)),onCompositionupdate:r[12]||(r[12]=(...y)=>t.handleComposition&&t.handleComposition(...y)),onCompositionend:r[13]||(r[13]=(...y)=>t.handleComposition&&t.handleComposition(...y)),onInput:r[14]||(r[14]=(...y)=>t.debouncedQueryChange&&t.debouncedQueryChange(...y))},null,46,_hoisted_1$a)),[[vModelText,t.query]]):createCommentVNode("v-if",!0)],6)):createCommentVNode("v-if",!0),t.isIOS&&!t.multiple&&t.filterable&&t.readonly?(openBlock(),createElementBlock("input",{key:1,ref:"iOSInput",class:normalizeClass(t.iOSInputKls),disabled:t.selectDisabled,type:"text"},null,10,_hoisted_2$9)):createCommentVNode("v-if",!0),createVNode(c,{id:t.id,ref:"reference",modelValue:t.selectedLabel,"onUpdate:modelValue":r[16]||(r[16]=y=>t.selectedLabel=y),type:"text",placeholder:typeof t.currentPlaceholder=="function"?t.currentPlaceholder():t.currentPlaceholder,name:t.name,autocomplete:t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,class:normalizeClass([t.nsSelect.is("focus",t.visible)]),tabindex:t.multiple&&t.filterable?-1:void 0,role:"combobox","aria-activedescendant":((_=t.hoverOption)==null?void 0:_.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropMenuVisible,label:t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:t.handleFocus,onBlur:t.handleBlur,onInput:t.debouncedOnInputChange,onPaste:t.debouncedOnInputChange,onCompositionstart:t.handleComposition,onCompositionupdate:t.handleComposition,onCompositionend:t.handleComposition,onKeydown:[r[17]||(r[17]=withKeys(withModifiers(y=>t.navigateOptions("next"),["stop","prevent"]),["down"])),r[18]||(r[18]=withKeys(withModifiers(y=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),withKeys(withModifiers(t.selectOption,["stop","prevent"]),["enter"]),withKeys(t.handleKeydownEscape,["esc"]),r[19]||(r[19]=withKeys(y=>t.visible=!1,["tab"]))]},createSlots({suffix:withCtx(()=>[t.iconComponent&&!t.showClose?(openBlock(),createBlock(u,{key:0,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.showClose&&t.clearIcon?(openBlock(),createBlock(u,{key:1,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:2},[t.$slots.prefix?{name:"prefix",fn:withCtx(()=>[createBaseVNode("div",_hoisted_3$6,[renderSlot(t.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","aria-activedescendant","aria-controls","aria-expanded","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]}),content:withCtx(()=>[createVNode(g,null,{default:withCtx(()=>[withDirectives(createVNode(v,{id:t.contentId,ref:"scrollbar",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:normalizeClass(t.scrollbarKls),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[t.showNewOption?(openBlock(),createBlock(d,{key:0,value:t.query,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(m,{onUpdateOptions:t.onOptionsRendered},{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vShow,t.options.size>0&&!t.loading]]),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&t.options.size===0)?(openBlock(),createElementBlock(Fragment,{key:0},[t.$slots.empty?renderSlot(t.$slots,"empty",{key:0}):(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(t.nsSelect.be("dropdown","empty"))},toDisplayString(t.emptyText),3))],64)):createCommentVNode("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[b,t.handleClose,t.popperPaneRef]])}var Select=_export_sfc(_sfc_main$e,[["render",_sfc_render$1],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const _sfc_main$d=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const r=useNamespace("select"),e=ref(!0),n=getCurrentInstance(),o=ref([]);provide(selectGroupKey,reactive({...toRefs(t)}));const i=inject(selectKey);onMounted(()=>{o.value=a(n.subTree)});const a=u=>{const c=[];return Array.isArray(u.children)&&u.children.forEach(d=>{var m;d.type&&d.type.name==="ElOption"&&d.component&&d.component.proxy?c.push(d.component.proxy):(m=d.children)!=null&&m.length&&c.push(...a(d))}),c},{groupQueryChange:s}=toRaw(i);return watch(s,()=>{e.value=o.value.some(u=>u.visible===!0)},{flush:"post"}),{visible:e,ns:r}}});function _sfc_render(t,r,e,n,o,i){return withDirectives((openBlock(),createElementBlock("ul",{class:normalizeClass(t.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(t.ns.be("group","title"))},toDisplayString(t.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(t.ns.b("group"))},[renderSlot(t.$slots,"default")],2)])],2)),[[vShow,t.visible]])}var OptionGroup=_export_sfc(_sfc_main$d,[["render",_sfc_render],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const ElSelect=withInstall(Select,{Option,OptionGroup}),ElOption=withNoopInstall(Option);withNoopInstall(OptionGroup);const progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:t=>`${t}%`}}),_hoisted_1$9=["aria-valuenow"],_hoisted_2$8={viewBox:"0 0 100 100"},_hoisted_3$5=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$5=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$5={key:0},__default__$8=defineComponent({name:"ElProgress"}),_sfc_main$c=defineComponent({...__default__$8,props:progressProps,setup(t){const r=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=useNamespace("progress"),o=computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:O(r.percentage)})),i=computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),a=computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(i.value)/2}`,10):0),s=computed(()=>{const V=a.value,Ce=r.type==="dashboard";return`
          M 50 50
          m 0 ${Ce?"":"-"}${V}
          a ${V} ${V} 0 1 1 0 ${Ce?"-":""}${V*2}
          a ${V} ${V} 0 1 1 0 ${Ce?"":"-"}${V*2}
          `}),u=computed(()=>2*Math.PI*a.value),c=computed(()=>r.type==="dashboard"?.75:1),d=computed(()=>`${-1*u.value*(1-c.value)/2}px`),m=computed(()=>({strokeDasharray:`${u.value*c.value}px, ${u.value}px`,strokeDashoffset:d.value})),v=computed(()=>({strokeDasharray:`${u.value*c.value*(r.percentage/100)}px, ${u.value}px`,strokeDashoffset:d.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),g=computed(()=>{let V;return r.color?V=O(r.percentage):V=e[r.status]||e.default,V}),b=computed(()=>r.status==="warning"?warning_filled_default:r.type==="line"?r.status==="success"?circle_check_default:circle_close_default:r.status==="success"?check_default:close_default),T=computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),_=computed(()=>r.format(r.percentage));function y(V){const Ce=100/V.length;return V.map((Fe,_e)=>isString$2(Fe)?{color:Fe,percentage:(_e+1)*Ce}:Fe).sort((Fe,_e)=>Fe.percentage-_e.percentage)}const O=V=>{var Ce;const{color:ae}=r;if(isFunction$3(ae))return ae(V);if(isString$2(ae))return ae;{const Fe=y(ae);for(const _e of Fe)if(_e.percentage>V)return _e.color;return(Ce=Fe[Fe.length-1])==null?void 0:Ce.color}};return(V,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(V.type),unref(n).is(V.status),{[unref(n).m("without-text")]:!V.showText,[unref(n).m("text-inside")]:V.textInside}]),role:"progressbar","aria-valuenow":V.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[V.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(n).be("bar","outer")),style:normalizeStyle({height:`${V.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(n).be("bar","inner"),{[unref(n).bem("bar","inner","indeterminate")]:V.indeterminate},{[unref(n).bem("bar","inner","striped")]:V.striped},{[unref(n).bem("bar","inner","striped-flow")]:V.stripedFlow}]),style:normalizeStyle(unref(o))},[(V.showText||V.$slots.default)&&V.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).be("bar","innerText"))},[renderSlot(V.$slots,"default",{percentage:V.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(_)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).b("circle")),style:normalizeStyle({height:`${V.width}px`,width:`${V.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$8,[createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","track")),d:unref(s),stroke:`var(${unref(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":V.strokeLinecap,"stroke-width":unref(i),fill:"none",style:normalizeStyle(unref(m))},null,14,_hoisted_3$5),createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","path")),d:unref(s),stroke:unref(g),fill:"none",opacity:V.percentage?1:0,"stroke-linecap":V.strokeLinecap,"stroke-width":unref(i),style:normalizeStyle(unref(v))},null,14,_hoisted_4$5)]))],6)),(V.showText||V.$slots.default)&&!V.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(n).e("text")),style:normalizeStyle({fontSize:`${unref(T)}px`})},[renderSlot(V.$slots,"default",{percentage:V.percentage},()=>[V.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(b))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$5,toDisplayString(unref(_)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$9))}});var Progress=_export_sfc(_sfc_main$c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ElProgress=withInstall(Progress),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:void 0}}),switchEmits={[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[CHANGE_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[INPUT_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t)},_hoisted_1$8=["onClick"],_hoisted_2$7=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$4=["aria-hidden"],_hoisted_4$4=["aria-hidden"],_hoisted_5$4=["aria-hidden"],COMPONENT_NAME$1="ElSwitch",__default__$7=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$b=defineComponent({...__default__$7,props:switchProps,emits:switchEmits,setup(t,{expose:r,emit:e}){const n=t,o=getCurrentInstance(),{formItem:i}=useFormItem(),a=useFormSize(),s=useNamespace("switch");(de=>{de.forEach(oe=>{useDeprecated({from:oe[0],replacement:oe[1],scope:COMPONENT_NAME$1,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var he;return!!((he=o.vnode.props)!=null&&he[oe[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:c}=useFormItemInputId(n,{formItemContext:i}),d=useFormDisabled(computed(()=>n.loading)),m=ref(n.modelValue!==!1),v=ref(),g=ref(),b=computed(()=>[s.b(),s.m(a.value),s.is("disabled",d.value),s.is("checked",V.value)]),T=computed(()=>[s.e("label"),s.em("label","left"),s.is("active",!V.value)]),_=computed(()=>[s.e("label"),s.em("label","right"),s.is("active",V.value)]),y=computed(()=>({width:addUnit(n.width)}));watch(()=>n.modelValue,()=>{m.value=!0}),watch(()=>n.value,()=>{m.value=!1});const O=computed(()=>m.value?n.modelValue:n.value),V=computed(()=>O.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(O.value)||(e(UPDATE_MODEL_EVENT,n.inactiveValue),e(CHANGE_EVENT,n.inactiveValue),e(INPUT_EVENT,n.inactiveValue)),watch(V,de=>{var oe;v.value.checked=de,n.validateEvent&&((oe=i==null?void 0:i.validate)==null||oe.call(i,"change").catch(he=>void 0))});const Ce=()=>{const de=V.value?n.inactiveValue:n.activeValue;e(UPDATE_MODEL_EVENT,de),e(CHANGE_EVENT,de),e(INPUT_EVENT,de),nextTick(()=>{v.value.checked=V.value})},ae=()=>{if(d.value)return;const{beforeChange:de}=n;if(!de){Ce();return}const oe=de();[isPromise(oe),isBoolean$1(oe)].includes(!0)||throwError(COMPONENT_NAME$1,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(oe)?oe.then(Ve=>{Ve&&Ce()}).catch(Ve=>{}):oe&&Ce()},Fe=computed(()=>s.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),_e=()=>{var de,oe;(oe=(de=v.value)==null?void 0:de.focus)==null||oe.call(de)};return onMounted(()=>{v.value.checked=V.value}),r({focus:_e,checked:V}),(de,oe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(b)),style:normalizeStyle(unref(Fe)),onClick:withModifiers(ae,["prevent"])},[createBaseVNode("input",{id:unref(c),ref_key:"input",ref:v,class:normalizeClass(unref(s).e("input")),type:"checkbox",role:"switch","aria-checked":unref(V),"aria-disabled":unref(d),"aria-label":de.label,name:de.name,"true-value":de.activeValue,"false-value":de.inactiveValue,disabled:unref(d),tabindex:de.tabindex,onChange:Ce,onKeydown:withKeys(ae,["enter"])},null,42,_hoisted_2$7),!de.inlinePrompt&&(de.inactiveIcon||de.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(T))},[de.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!de.inactiveIcon&&de.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(V)},toDisplayString(de.inactiveText),9,_hoisted_3$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:g,class:normalizeClass(unref(s).e("core")),style:normalizeStyle(unref(y))},[de.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(s).e("inner"))},[de.activeIcon||de.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(s).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(V)?de.activeIcon:de.inactiveIcon)))]),_:1},8,["class"])):de.activeText||de.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(s).is("text")),"aria-hidden":!unref(V)},toDisplayString(unref(V)?de.activeText:de.inactiveText),11,_hoisted_4$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(s).e("action"))},[de.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(s).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):de.activeActionIcon&&unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.activeActionIcon)))]),_:1})):de.inactiveActionIcon&&!unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:2},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)],2)],6),!de.inlinePrompt&&(de.activeIcon||de.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(_))},[de.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!de.activeIcon&&de.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(V)},toDisplayString(de.activeText),9,_hoisted_5$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$8))}});var Switch=_export_sfc(_sfc_main$b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ElSwitch=withInstall(Switch),LEFT_CHECK_CHANGE_EVENT="left-check-change",RIGHT_CHECK_CHANGE_EVENT="right-check-change",transferProps=buildProps({data:{type:definePropType(Array),default:()=>[]},titles:{type:definePropType(Array),default:()=>[]},buttonTexts:{type:definePropType(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:definePropType(Function)},leftDefaultChecked:{type:definePropType(Array),default:()=>[]},rightDefaultChecked:{type:definePropType(Array),default:()=>[]},renderContent:{type:definePropType(Function)},modelValue:{type:definePropType(Array),default:()=>[]},format:{type:definePropType(Object),default:()=>({})},filterable:Boolean,props:{type:definePropType(Object),default:()=>mutable({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),transferCheckedChangeFn=(t,r)=>[t,r].every(isArray$4)||isArray$4(t)&&isNil(r),transferEmits={[CHANGE_EVENT]:(t,r,e)=>[t,e].every(isArray$4)&&["left","right"].includes(r),[UPDATE_MODEL_EVENT]:t=>isArray$4(t),[LEFT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn,[RIGHT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn},CHECKED_CHANGE_EVENT="checked-change",transferPanelProps=buildProps({data:transferProps.data,optionRender:{type:definePropType(Function)},placeholder:String,title:String,filterable:Boolean,format:transferProps.format,filterMethod:transferProps.filterMethod,defaultChecked:transferProps.leftDefaultChecked,props:transferProps.props}),transferPanelEmits={[CHECKED_CHANGE_EVENT]:transferCheckedChangeFn},usePropsAlias=t=>{const r={label:"label",key:"key",disabled:"disabled"};return computed(()=>({...r,...t.props}))},useCheck=(t,r,e)=>{const n=usePropsAlias(t),o=computed(()=>t.data.filter(d=>isFunction$3(t.filterMethod)?t.filterMethod(r.query,d):String(d[n.value.label]||d[n.value.key]).toLowerCase().includes(r.query.toLowerCase()))),i=computed(()=>o.value.filter(d=>!d[n.value.disabled])),a=computed(()=>{const d=r.checked.length,m=t.data.length,{noChecked:v,hasChecked:g}=t.format;return v&&g?d>0?g.replace(/\${checked}/g,d.toString()).replace(/\${total}/g,m.toString()):v.replace(/\${total}/g,m.toString()):`${d}/${m}`}),s=computed(()=>{const d=r.checked.length;return d>0&&d<i.value.length}),u=()=>{const d=i.value.map(m=>m[n.value.key]);r.allChecked=d.length>0&&d.every(m=>r.checked.includes(m))},c=d=>{r.checked=d?i.value.map(m=>m[n.value.key]):[]};return watch(()=>r.checked,(d,m)=>{if(u(),r.checkChangeByUser){const v=d.concat(m).filter(g=>!d.includes(g)||!m.includes(g));e(CHECKED_CHANGE_EVENT,d,v)}else e(CHECKED_CHANGE_EVENT,d),r.checkChangeByUser=!0}),watch(i,()=>{u()}),watch(()=>t.data,()=>{const d=[],m=o.value.map(v=>v[n.value.key]);r.checked.forEach(v=>{m.includes(v)&&d.push(v)}),r.checkChangeByUser=!1,r.checked=d}),watch(()=>t.defaultChecked,(d,m)=>{if(m&&d.length===m.length&&d.every(b=>m.includes(b)))return;const v=[],g=i.value.map(b=>b[n.value.key]);d.forEach(b=>{g.includes(b)&&v.push(b)}),r.checkChangeByUser=!1,r.checked=v},{immediate:!0}),{filteredData:o,checkableData:i,checkedSummary:a,isIndeterminate:s,updateAllChecked:u,handleAllCheckedChange:c}},useCheckedChange=(t,r)=>({onSourceCheckedChange:(o,i)=>{t.leftChecked=o,i&&r(LEFT_CHECK_CHANGE_EVENT,o,i)},onTargetCheckedChange:(o,i)=>{t.rightChecked=o,i&&r(RIGHT_CHECK_CHANGE_EVENT,o,i)}}),useComputedData=t=>{const r=usePropsAlias(t),e=computed(()=>t.data.reduce((i,a)=>(i[a[r.value.key]]=a)&&i,{})),n=computed(()=>t.data.filter(i=>!t.modelValue.includes(i[r.value.key]))),o=computed(()=>t.targetOrder==="original"?t.data.filter(i=>t.modelValue.includes(i[r.value.key])):t.modelValue.reduce((i,a)=>{const s=e.value[a];return s&&i.push(s),i},[]));return{sourceData:n,targetData:o}},useMove=(t,r,e)=>{const n=usePropsAlias(t),o=(s,u,c)=>{e(UPDATE_MODEL_EVENT,s),e(CHANGE_EVENT,s,u,c)};return{addToLeft:()=>{const s=t.modelValue.slice();r.rightChecked.forEach(u=>{const c=s.indexOf(u);c>-1&&s.splice(c,1)}),o(s,"left",r.rightChecked)},addToRight:()=>{let s=t.modelValue.slice();const u=t.data.filter(c=>{const d=c[n.value.key];return r.leftChecked.includes(d)&&!t.modelValue.includes(d)}).map(c=>c[n.value.key]);s=t.targetOrder==="unshift"?u.concat(s):s.concat(u),t.targetOrder==="original"&&(s=t.data.filter(c=>s.includes(c[n.value.key])).map(c=>c[n.value.key])),o(s,"right",r.leftChecked)}}},__default__$6=defineComponent({name:"ElTransferPanel"}),_sfc_main$a=defineComponent({...__default__$6,props:transferPanelProps,emits:transferPanelEmits,setup(t,{expose:r,emit:e}){const n=t,o=useSlots(),i=({option:V})=>V,{t:a}=useLocale(),s=useNamespace("transfer"),u=reactive({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=usePropsAlias(n),{filteredData:d,checkedSummary:m,isIndeterminate:v,handleAllCheckedChange:g}=useCheck(n,u,e),b=computed(()=>!isEmpty(u.query)&&isEmpty(d.value)),T=computed(()=>!isEmpty(o.default()[0].children)),{checked:_,allChecked:y,query:O}=toRefs(u);return r({query:O}),(V,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(s).b("panel"))},[createBaseVNode("p",{class:normalizeClass(unref(s).be("panel","header"))},[createVNode(unref(ElCheckbox),{modelValue:unref(y),"onUpdate:modelValue":Ce[0]||(Ce[0]=ae=>isRef(y)?y.value=ae:null),indeterminate:unref(v),"validate-event":!1,onChange:unref(g)},{default:withCtx(()=>[createTextVNode(toDisplayString(V.title)+" ",1),createBaseVNode("span",null,toDisplayString(unref(m)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),createBaseVNode("div",{class:normalizeClass([unref(s).be("panel","body"),unref(s).is("with-footer",unref(T))])},[V.filterable?(openBlock(),createBlock(unref(ElInput),{key:0,modelValue:unref(O),"onUpdate:modelValue":Ce[1]||(Ce[1]=ae=>isRef(O)?O.value=ae:null),class:normalizeClass(unref(s).be("panel","filter")),size:"default",placeholder:V.placeholder,"prefix-icon":unref(search_default),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElCheckboxGroup),{modelValue:unref(_),"onUpdate:modelValue":Ce[2]||(Ce[2]=ae=>isRef(_)?_.value=ae:null),"validate-event":!1,class:normalizeClass([unref(s).is("filterable",V.filterable),unref(s).be("panel","list")])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(d),ae=>(openBlock(),createBlock(unref(ElCheckbox),{key:ae[unref(c).key],class:normalizeClass(unref(s).be("panel","item")),label:ae[unref(c).key],disabled:ae[unref(c).disabled],"validate-event":!1},{default:withCtx(()=>{var Fe;return[createVNode(i,{option:(Fe=V.optionRender)==null?void 0:Fe.call(V,ae)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[vShow,!unref(b)&&!unref(isEmpty)(V.data)]]),withDirectives(createBaseVNode("p",{class:normalizeClass(unref(s).be("panel","empty"))},toDisplayString(unref(b)?unref(a)("el.transfer.noMatch"):unref(a)("el.transfer.noData")),3),[[vShow,unref(b)||unref(isEmpty)(V.data)]])],2),unref(T)?(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(s).be("panel","footer"))},[renderSlot(V.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var TransferPanel=_export_sfc(_sfc_main$a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const _hoisted_1$7={key:0},_hoisted_2$6={key:0},__default__$5=defineComponent({name:"ElTransfer"}),_sfc_main$9=defineComponent({...__default__$5,props:transferProps,emits:transferEmits,setup(t,{expose:r,emit:e}){const n=t,o=useSlots(),{t:i}=useLocale(),a=useNamespace("transfer"),{formItem:s}=useFormItem(),u=reactive({leftChecked:[],rightChecked:[]}),c=usePropsAlias(n),{sourceData:d,targetData:m}=useComputedData(n),{onSourceCheckedChange:v,onTargetCheckedChange:g}=useCheckedChange(u,e),{addToLeft:b,addToRight:T}=useMove(n,u,e),_=ref(),y=ref(),O=de=>{switch(de){case"left":_.value.query="";break;case"right":y.value.query="";break}},V=computed(()=>n.buttonTexts.length===2),Ce=computed(()=>n.titles[0]||i("el.transfer.titles.0")),ae=computed(()=>n.titles[1]||i("el.transfer.titles.1")),Fe=computed(()=>n.filterPlaceholder||i("el.transfer.filterPlaceholder"));watch(()=>n.modelValue,()=>{var de;n.validateEvent&&((de=s==null?void 0:s.validate)==null||de.call(s,"change").catch(oe=>void 0))});const _e=computed(()=>de=>n.renderContent?n.renderContent(h,de):o.default?o.default({option:de}):h("span",de[c.value.label]||de[c.value.key]));return r({clearQuery:O,leftPanel:_,rightPanel:y}),(de,oe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(a).b())},[createVNode(TransferPanel,{ref_key:"leftPanel",ref:_,data:unref(d),"option-render":unref(_e),placeholder:unref(Fe),title:unref(Ce),filterable:de.filterable,format:de.format,"filter-method":de.filterMethod,"default-checked":de.leftDefaultChecked,props:n.props,onCheckedChange:unref(v)},{default:withCtx(()=>[renderSlot(de.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),createBaseVNode("div",{class:normalizeClass(unref(a).e("buttons"))},[createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(a).e("button"),unref(a).is("with-texts",unref(V))]),disabled:unref(isEmpty)(u.rightChecked),onClick:unref(b)},{default:withCtx(()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),unref(isUndefined$1)(de.buttonTexts[0])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_1$7,toDisplayString(de.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(a).e("button"),unref(a).is("with-texts",unref(V))]),disabled:unref(isEmpty)(u.leftChecked),onClick:unref(T)},{default:withCtx(()=>[unref(isUndefined$1)(de.buttonTexts[1])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_2$6,toDisplayString(de.buttonTexts[1]),1)),createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),createVNode(TransferPanel,{ref_key:"rightPanel",ref:y,data:unref(m),"option-render":unref(_e),placeholder:unref(Fe),filterable:de.filterable,format:de.format,"filter-method":de.filterMethod,title:unref(ae),"default-checked":de.rightDefaultChecked,props:n.props,onCheckedChange:unref(g)},{default:withCtx(()=>[renderSlot(de.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Transfer=_export_sfc(_sfc_main$9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const ElTransfer=withInstall(Transfer),uploadContextKey=Symbol("uploadContextKey"),SCOPE$1="ElUpload";class UploadAjaxError extends Error{constructor(r,e,n,o){super(r),this.name="UploadAjaxError",this.status=e,this.method=n,this.url=o}}function getError(t,r,e){let n;return e.response?n=`${e.response.error||e.response}`:e.responseText?n=`${e.responseText}`:n=`fail to ${r.method} ${t} ${e.status}`,new UploadAjaxError(n,e.status,r.method,t)}function getBody(t){const r=t.responseText||t.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const ajaxUpload=t=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$1,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,e=t.action;r.upload&&r.upload.addEventListener("progress",i=>{const a=i;a.percent=i.total>0?i.loaded/i.total*100:0,t.onProgress(a)});const n=new FormData;if(t.data)for(const[i,a]of Object.entries(t.data))isArray$4(a)&&a.length?n.append(i,...a):n.append(i,a);n.append(t.filename,t.file,t.file.name),r.addEventListener("error",()=>{t.onError(getError(e,t,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return t.onError(getError(e,t,r));t.onSuccess(getBody(r))}),r.open(t.method,e,!0),t.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const o=t.headers||{};if(o instanceof Headers)o.forEach((i,a)=>r.setRequestHeader(a,i));else for(const[i,a]of Object.entries(o))isNil(a)||r.setRequestHeader(i,String(a));return r.send(n),r},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:definePropType([Object,Function,Promise]),default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"}}),uploadListEmits={remove:t=>!!t},_hoisted_1$6=["onKeydown"],_hoisted_2$5=["src"],_hoisted_3$3=["onClick"],_hoisted_4$3=["title"],_hoisted_5$3=["onClick"],_hoisted_6$2=["onClick"],__default__$4=defineComponent({name:"ElUploadList"}),_sfc_main$8=defineComponent({...__default__$4,props:uploadListProps,emits:uploadListEmits,setup(t,{emit:r}){const e=t,{t:n}=useLocale(),o=useNamespace("upload"),i=useNamespace("icon"),a=useNamespace("list"),s=useFormDisabled(),u=ref(!1),c=computed(()=>[o.b("list"),o.bm("list",e.listType),o.is("disabled",e.disabled)]),d=m=>{r("remove",m)};return(m,v)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass(unref(c)),name:unref(a).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.files,g=>(openBlock(),createElementBlock("li",{key:g.uid||g.name,class:normalizeClass([unref(o).be("list","item"),unref(o).is(g.status),{focusing:u.value}]),tabindex:"0",onKeydown:withKeys(b=>!unref(s)&&d(g),["delete"]),onFocus:v[0]||(v[0]=b=>u.value=!0),onBlur:v[1]||(v[1]=b=>u.value=!1),onClick:v[2]||(v[2]=b=>u.value=!1)},[renderSlot(m.$slots,"default",{file:g},()=>[m.listType==="picture"||g.status!=="uploading"&&m.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(o).be("list","item-thumbnail")),src:g.url,alt:""},null,10,_hoisted_2$5)):createCommentVNode("v-if",!0),g.status==="uploading"||m.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(o).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(o).be("list","item-name")),onClick:withModifiers(b=>m.handlePreview(g),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(i).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(o).be("list","item-file-name")),title:g.name},toDisplayString(g.name),11,_hoisted_4$3)],10,_hoisted_3$3),g.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:m.listType==="picture-card"?"circle":"line","stroke-width":m.listType==="picture-card"?6:2,percentage:Number(g.percentage),style:normalizeStyle(m.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(o).be("list","item-status-label"))},[m.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(i).m("upload-success"),unref(i).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(m.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(i).m("upload-success"),unref(i).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(s)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(i).m("close")),onClick:b=>d(g)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(s)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(i).m("close-tip"))},toDisplayString(unref(n)("el.upload.deleteTip")),3)),m.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(o).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(o).be("list","item-preview")),onClick:b=>m.handlePreview(g)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(i).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$3),unref(s)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(o).be("list","item-delete")),onClick:b=>d(g)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(i).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$2))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$6))),128)),renderSlot(m.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc(_sfc_main$8,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:t=>isArray$4(t)},_hoisted_1$5=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$3=defineComponent({name:COMPONENT_NAME}),_sfc_main$7=defineComponent({...__default__$3,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(t,{emit:r}){const e=inject(uploadContextKey);e||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=useNamespace("upload"),o=ref(!1),i=useFormDisabled(),a=u=>{if(i.value)return;o.value=!1,u.stopPropagation();const c=Array.from(u.dataTransfer.files),d=e.accept.value;if(!d){r("file",c);return}const m=c.filter(v=>{const{type:g,name:b}=v,T=b.includes(".")?`.${b.split(".").pop()}`:"",_=g.replace(/\/.*$/,"");return d.split(",").map(y=>y.trim()).filter(y=>y).some(y=>y.startsWith(".")?T===y:/\/\*$/.test(y)?_===y.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(y)?g===y:!1)});r("file",m)},s=()=>{i.value||(o.value=!0)};return(u,c)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b("dragger"),unref(n).is("dragover",o.value)]),onDrop:withModifiers(a,["prevent"]),onDragover:withModifiers(s,["prevent"]),onDragleave:c[0]||(c[0]=withModifiers(d=>o.value=!1,["prevent"]))},[renderSlot(u.$slots,"default")],42,_hoisted_1$5))}});var UploadDragger=_export_sfc(_sfc_main$7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$4=["onKeydown"],_hoisted_2$4=["name","multiple","accept"],__default__$2=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$6=defineComponent({...__default__$2,props:uploadContentProps,setup(t,{expose:r}){const e=t,n=useNamespace("upload"),o=useFormDisabled(),i=shallowRef({}),a=shallowRef(),s=T=>{if(T.length===0)return;const{autoUpload:_,limit:y,fileList:O,multiple:V,onStart:Ce,onExceed:ae}=e;if(y&&O.length+T.length>y){ae(T,O);return}V||(T=T.slice(0,1));for(const Fe of T){const _e=Fe;_e.uid=genFileId(),Ce(_e),_&&u(_e)}},u=async T=>{if(a.value.value="",!e.beforeUpload)return d(T);let _,y={};try{const V=e.data,Ce=e.beforeUpload(T);y=isPlainObject$1(e.data)?cloneDeep(e.data):e.data,_=await Ce,isPlainObject$1(e.data)&&isEqual(V,y)&&(y=cloneDeep(e.data))}catch{_=!1}if(_===!1){e.onRemove(T);return}let O=T;_ instanceof Blob&&(_ instanceof File?O=_:O=new File([_],T.name,{type:T.type})),d(Object.assign(O,{uid:T.uid}),y)},c=async(T,_)=>isFunction$3(T)?T(_):T,d=async(T,_)=>{const{headers:y,data:O,method:V,withCredentials:Ce,name:ae,action:Fe,onProgress:_e,onSuccess:de,onError:oe,httpRequest:he}=e;try{_=await c(_??O,T)}catch{e.onRemove(T);return}const{uid:Ve}=T,le={headers:y||{},withCredentials:Ce,file:T,data:_,method:V,filename:ae,action:Fe,onProgress:Ie=>{_e(Ie,T)},onSuccess:Ie=>{de(Ie,T),delete i.value[Ve]},onError:Ie=>{oe(Ie,T),delete i.value[Ve]}},ie=he(le);i.value[Ve]=ie,ie instanceof Promise&&ie.then(le.onSuccess,le.onError)},m=T=>{const _=T.target.files;_&&s(Array.from(_))},v=()=>{o.value||(a.value.value="",a.value.click())},g=()=>{v()};return r({abort:T=>{entriesOf(i.value).filter(T?([y])=>String(T.uid)===y:()=>!0).forEach(([y,O])=>{O instanceof XMLHttpRequest&&O.abort(),delete i.value[y]})},upload:u}),(T,_)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(T.listType),unref(n).is("drag",T.drag)]),tabindex:"0",onClick:v,onKeydown:withKeys(withModifiers(g,["self"]),["enter","space"])},[T.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(o),onFile:s},{default:withCtx(()=>[renderSlot(T.$slots,"default")]),_:3},8,["disabled"])):renderSlot(T.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:a,class:normalizeClass(unref(n).e("input")),name:T.name,multiple:T.multiple,accept:T.accept,type:"file",onChange:m,onClick:_[0]||(_[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$4)],42,_hoisted_1$4))}});var UploadContent=_export_sfc(_sfc_main$6,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const SCOPE="ElUpload",revokeFileObjectURL=t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)},useHandlers=(t,r)=>{const e=useVModel(t,"fileList",void 0,{passive:!0}),n=v=>e.value.find(g=>g.uid===v.uid);function o(v){var g;(g=r.value)==null||g.abort(v)}function i(v=["ready","uploading","success","fail"]){e.value=e.value.filter(g=>!v.includes(g.status))}const a=(v,g)=>{const b=n(g);b&&(console.error(v),b.status="fail",e.value.splice(e.value.indexOf(b),1),t.onError(v,b,e.value),t.onChange(b,e.value))},s=(v,g)=>{const b=n(g);b&&(t.onProgress(v,b,e.value),b.status="uploading",b.percentage=Math.round(v.percent))},u=(v,g)=>{const b=n(g);b&&(b.status="success",b.response=v,t.onSuccess(v,b,e.value),t.onChange(b,e.value))},c=v=>{isNil(v.uid)&&(v.uid=genFileId());const g={name:v.name,percentage:0,status:"ready",size:v.size,raw:v,uid:v.uid};if(t.listType==="picture-card"||t.listType==="picture")try{g.url=URL.createObjectURL(v)}catch(b){b.message,t.onError(b,g,e.value)}e.value=[...e.value,g],t.onChange(g,e.value)},d=async v=>{const g=v instanceof File?n(v):v;g||throwError(SCOPE,"file to be removed not found");const b=T=>{o(T);const _=e.value;_.splice(_.indexOf(T),1),t.onRemove(T,_),revokeFileObjectURL(T)};t.beforeRemove?await t.beforeRemove(g,e.value)!==!1&&b(g):b(g)};function m(){e.value.filter(({status:v})=>v==="ready").forEach(({raw:v})=>{var g;return v&&((g=r.value)==null?void 0:g.upload(v))})}return watch(()=>t.listType,v=>{v!=="picture-card"&&v!=="picture"||(e.value=e.value.map(g=>{const{raw:b,url:T}=g;if(!T&&b)try{g.url=URL.createObjectURL(b)}catch(_){t.onError(_,g,e.value)}return g}))}),watch(e,v=>{for(const g of v)g.uid||(g.uid=genFileId()),g.status||(g.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:o,clearFiles:i,handleError:a,handleProgress:s,handleStart:c,handleSuccess:u,handleRemove:d,submit:m,revokeFileObjectURL}},__default__$1=defineComponent({name:"ElUpload"}),_sfc_main$5=defineComponent({...__default__$1,props:uploadProps,setup(t,{expose:r}){const e=t,n=useFormDisabled(),o=shallowRef(),{abort:i,submit:a,clearFiles:s,uploadFiles:u,handleStart:c,handleError:d,handleRemove:m,handleSuccess:v,handleProgress:g,revokeFileObjectURL:b}=useHandlers(e,o),T=computed(()=>e.listType==="picture-card"),_=computed(()=>({...e,fileList:u.value,onStart:c,onProgress:g,onSuccess:v,onError:d,onRemove:m}));return onBeforeUnmount(()=>{u.value.forEach(b)}),provide(uploadContextKey,{accept:toRef(e,"accept")}),r({abort:i,submit:a,clearFiles:s,handleStart:c,handleRemove:m}),(y,O)=>(openBlock(),createElementBlock("div",null,[unref(T)&&y.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(n),"list-type":y.listType,files:unref(u),"handle-preview":y.onPreview,onRemove:unref(m)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:o},unref(_)),{default:withCtx(()=>[y.$slots.trigger?renderSlot(y.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!y.$slots.trigger&&y.$slots.default?renderSlot(y.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[y.$slots.file?{name:"default",fn:withCtx(({file:V})=>[renderSlot(y.$slots,"file",{file:V})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(T)||unref(T)&&!y.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:o},unref(_)),{default:withCtx(()=>[y.$slots.trigger?renderSlot(y.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!y.$slots.trigger&&y.$slots.default?renderSlot(y.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),y.$slots.trigger?renderSlot(y.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(y.$slots,"tip"),!unref(T)&&y.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(n),"list-type":y.listType,files:unref(u),"handle-preview":y.onPreview,onRemove:unref(m)},createSlots({_:2},[y.$slots.file?{name:"default",fn:withCtx(({file:V})=>[renderSlot(y.$slots,"file",{file:V})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc(_sfc_main$5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const ElUpload=withInstall(Upload),messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=t=>{const r=instances.findIndex(o=>o.id===t),e=instances[r];let n;return r>0&&(n=instances[r-1]),{current:e,prev:n}},getLastOffset=t=>{const{prev:r}=getInstance(t);return r?r.vm.exposed.bottom.value:0},getOffsetOrSpace=(t,r)=>instances.findIndex(n=>n.id===t)>0?20:r,_hoisted_1$3=["id"],_hoisted_2$3=["innerHTML"],__default__=defineComponent({name:"ElMessage"}),_sfc_main$4=defineComponent({...__default__,props:messageProps,emits:messageEmits,setup(t,{expose:r}){const e=t,{Close:n}=TypeComponents,{ns:o,zIndex:i}=useGlobalComponentSettings("message"),{currentZIndex:a,nextZIndex:s}=i,u=ref(),c=ref(!1),d=ref(0);let m;const v=computed(()=>e.type?e.type==="error"?"danger":e.type:"info"),g=computed(()=>{const _e=e.type;return{[o.bm("icon",_e)]:_e&&TypeComponentsMap[_e]}}),b=computed(()=>e.icon||TypeComponentsMap[e.type]||""),T=computed(()=>getLastOffset(e.id)),_=computed(()=>getOffsetOrSpace(e.id,e.offset)+T.value),y=computed(()=>d.value+_.value),O=computed(()=>({top:`${_.value}px`,zIndex:a.value}));function V(){e.duration!==0&&({stop:m}=useTimeoutFn(()=>{ae()},e.duration))}function Ce(){m==null||m()}function ae(){c.value=!1}function Fe({code:_e}){_e===EVENT_CODE.esc&&ae()}return onMounted(()=>{V(),s(),c.value=!0}),watch(()=>e.repeatNum,()=>{Ce(),V()}),useEventListener(document,"keydown",Fe),useResizeObserver(u,()=>{d.value=u.value.getBoundingClientRect().height}),r({visible:c,bottom:y,close:ae}),(_e,de)=>(openBlock(),createBlock(Transition,{name:unref(o).b("fade"),onBeforeLeave:_e.onClose,onAfterLeave:de[0]||(de[0]=oe=>_e.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:_e.id,ref_key:"messageRef",ref:u,class:normalizeClass([unref(o).b(),{[unref(o).m(_e.type)]:_e.type&&!_e.icon},unref(o).is("center",_e.center),unref(o).is("closable",_e.showClose),_e.customClass]),style:normalizeStyle(unref(O)),role:"alert",onMouseenter:Ce,onMouseleave:V},[_e.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:_e.repeatNum,type:unref(v),class:normalizeClass(unref(o).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(b)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(o).e("icon"),unref(g)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(b))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(_e.$slots,"default",{},()=>[_e.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(o).e("content")),innerHTML:_e.message},null,10,_hoisted_2$3)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(o).e("content"))},toDisplayString(_e.message),3))]),_e.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(o).e("closeBtn")),onClick:withModifiers(ae,["stop"])},{default:withCtx(()=>[createVNode(unref(n))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$3),[[vShow,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc(_sfc_main$4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let seed=1;const normalizeOptions=t=>{const r=!t||isString$2(t)||isVNode(t)||isFunction$3(t)?{message:t}:t,e={...messageDefaults,...r};if(!e.appendTo)e.appendTo=document.body;else if(isString$2(e.appendTo)){let n=document.querySelector(e.appendTo);isElement(n)||(n=document.body),e.appendTo=n}return e},closeMessage=t=>{const r=instances.indexOf(t);if(r===-1)return;instances.splice(r,1);const{handler:e}=t;e.close()},createMessage=({appendTo:t,...r},e)=>{const n=`message_${seed++}`,o=r.onClose,i=document.createElement("div"),a={...r,id:n,onClose:()=>{o==null||o(),closeMessage(d)},onDestroy:()=>{render(null,i)}},s=createVNode(MessageConstructor,a,isFunction$3(a.message)||isVNode(a.message)?{default:isFunction$3(a.message)?a.message:()=>a.message}:null);s.appContext=e||message._context,render(s,i),t.appendChild(i.firstElementChild);const u=s.component,d={id:n,vnode:s,vm:u,handler:{close:()=>{u.exposed.visible.value=!1}},props:s.component.props};return d},message=(t={},r)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const e=normalizeOptions(t);if(e.grouping&&instances.length){const o=instances.find(({vnode:i})=>{var a;return((a=i.props)==null?void 0:a.message)===e.message});if(o)return o.props.repeatNum+=1,o.props.type=e.type,o.handler}const n=createMessage(e,r);return instances.push(n),n.handler};messageTypes.forEach(t=>{message[t]=(r={},e)=>{const n=normalizeOptions(r);return message({...n,type:t},e)}});function closeAll(t){for(const r of instances)(!t||t===r.props.type)&&r.handler.close()}message.closeAll=closeAll;message._context=null;const ElMessage=withInstallFunction(message,"$message"),base="",elContainer="",elAside="",elFooter="",elHeader="",elMain="",elRow="",elCol="",elImage="",elImageViewer="",elForm="",elFormItem="",elButton="";function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((r=kindOf(t))==="formdata"||r==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,o;if(typeof t!="object"&&(t=[t]),isArray(t))for(n=0,o=t.length;n<o;n++)r.call(null,t[n],n,t);else{const i=e?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let s;for(n=0;n<a;n++)s=i[n],r.call(null,t[s],s,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,o;for(;n-- >0;)if(o=e[n],r===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,o)=>{const i=t&&findKey(r,o)||o;isPlainObject(r[i])&&isPlainObject(n)?r[i]=merge(r[i],n):isPlainObject(n)?r[i]=merge({},n):isArray(n)?r[i]=n.slice():r[i]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(o,i)=>{e&&isFunction(o)?t[i]=bind(o,e):t[i]=o},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let o,i,a;const s={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),i=o.length;i-- >0;)a=o[i],(!n||n(a,t,r))&&!s[a]&&(r[a]=t[a],s[a]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const i=o.value;r.call(t,i[0],i[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(o,i)=>{let a;(a=r(o,i,t))!==!1&&(n[i]=a||o)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=o=>{o.forEach(i=>{e[i]=!0})};return isArray(t)?n(t):n(String(t).split(r)),e},noop=()=>{},toFiniteNumber=(t,r)=>(t=+t,Number.isFinite(t)?t:r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,o)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[o]=n;const i=isArray(n)?[]:{};return forEach(n,(a,s)=>{const u=e(a,o+1);!isUndefined(u)&&(i[s]=u)}),r[o]=void 0,i}}return n};return e(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,r,e,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,o,i)=>{const a=Object.create(prototype$1);return utils.toFlatObject(t,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),AxiosError.call(a,t.message,r,e,n,o),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const httpAdapter=null;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(o,i){return o=removeBrackets(o),!e&&i?"["+o+"]":o}).join(e?".":""):r}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,_){return!utils.isUndefined(_[T])});const n=e.metaTokens,o=e.visitor||d,i=e.dots,a=e.indexes,u=(e.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(r);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(utils.isDate(b))return b.toISOString();if(!u&&utils.isBlob(b))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(b)||utils.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,T,_){let y=b;if(b&&!_&&typeof b=="object"){if(utils.endsWith(T,"{}"))T=n?T:T.slice(0,-2),b=JSON.stringify(b);else if(utils.isArray(b)&&isFlatArray(b)||(utils.isFileList(b)||utils.endsWith(T,"[]"))&&(y=utils.toArray(b)))return T=removeBrackets(T),y.forEach(function(V,Ce){!(utils.isUndefined(V)||V===null)&&r.append(a===!0?renderKey([T],Ce,i):a===null?T:T+"[]",c(V))}),!1}return isVisitable(b)?!0:(r.append(renderKey(_,T,i),c(b)),!1)}const m=[],v=Object.assign(predicates,{defaultVisitor:d,convertValue:c,isVisitable});function g(b,T){if(!utils.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+T.join("."));m.push(b),utils.forEach(b,function(y,O){(!(utils.isUndefined(y)||y===null)&&o.call(r,y,utils.isString(O)?O.trim():O,T,v))===!0&&g(y,T?T.concat(O):[O])}),m.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return g(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,o=e&&e.serialize;let i;if(o?i=o(r,e):i=utils.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,o,i){return platform.isNode&&utils.isBuffer(e)?(this.append(n,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const o=e.length;let i;for(n=0;n<o;n++)i=e[n],r[i]=t[i];return r}function formDataToJSON(t){function r(e,n,o,i){let a=e[i++];const s=Number.isFinite(+a),u=i>=e.length;return a=!a&&utils.isArray(o)?o.length:a,u?(utils.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!s):((!o[a]||!utils.isObject(o[a]))&&(o[a]=[]),r(e,n,o[a],i)&&utils.isArray(o[a])&&(o[a]=arrayToObject(o[a])),!s)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const e={};return utils.forEachEntry(t,(n,o)=>{r(parsePropPath(n),o,e,0)}),e}return null}function stringifySafely(t,r,e){if(utils.isString(t))try{return(r||JSON.parse)(t),utils.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(r,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=utils.isObject(r);if(i&&utils.isHTMLForm(r)&&(r=new FormData(r)),utils.isFormData(r))return o&&o?JSON.stringify(formDataToJSON(r)):r;if(utils.isArrayBuffer(r)||utils.isBuffer(r)||utils.isStream(r)||utils.isFile(r)||utils.isBlob(r))return r;if(utils.isArrayBufferView(r))return r.buffer;if(utils.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((s=utils.isFileList(r))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return toFormData(s?{"files[]":r}:r,u&&new u,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(r&&utils.isString(r)&&(n&&!this.responseType||o)){const a=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(s){if(a)throw s.name==="SyntaxError"?AxiosError.from(s,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):s}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),e=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,r,e,n,o){if(utils.isFunction(n))return n.call(this,r,e);if(o&&(r=e),!!utils.isString(r)){if(utils.isString(n))return r.indexOf(n)!==-1;if(utils.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(o,i,a){return this[n].call(this,r,o,i,a)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const o=this;function i(s,u,c){const d=normalizeHeader(u);if(!d)throw new Error("header name must be a non-empty string");const m=utils.findKey(o,d);(!m||o[m]===void 0||c===!0||c===void 0&&o[m]!==!1)&&(o[m||u]=normalizeValue(s))}const a=(s,u)=>utils.forEach(s,(c,d)=>i(c,d,u));return utils.isPlainObject(r)||r instanceof this.constructor?a(r,e):utils.isString(r)&&(r=r.trim())&&!isValidHeaderName(r)?a(parseHeaders(r),e):r!=null&&i(e,r,n),this}get(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);if(n){const o=this[n];if(!e)return o;if(e===!0)return parseTokens(o);if(utils.isFunction(e))return e.call(this,o,n);if(utils.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let o=!1;function i(a){if(a=normalizeHeader(a),a){const s=utils.findKey(n,a);s&&(!e||matchHeaderValue(n,n[s],s,e))&&(delete n[s],o=!0)}}return utils.isArray(r)?r.forEach(i):i(r),o}clear(r){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const i=e[n];(!r||matchHeaderValue(this,this[i],i,r,!0))&&(delete this[i],o=!0)}return o}normalize(r){const e=this,n={};return utils.forEach(this,(o,i)=>{const a=utils.findKey(n,i);if(a){e[a]=normalizeValue(o),delete e[i];return}const s=r?formatHeader(i):String(i).trim();s!==i&&delete e[i],e[s]=normalizeValue(o),n[s]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils.forEach(this,(n,o)=>{n!=null&&n!==!1&&(e[o]=r&&utils.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(o=>n.set(o)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function i(a){const s=normalizeHeader(a);n[s]||(buildAccessors(o,a),n[s]=!0)}return utils.isArray(r)?r.forEach(i):i(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.reduceDescriptors(AxiosHeaders.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,o=AxiosHeaders$1.from(n.headers);let i=n.data;return utils.forEach(t,function(s){i=s.call(e,i,o.normalize(),r?r.status:void 0)}),o.normalize(),i}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(e,n,o,i,a,s){const u=[];u.push(e+"="+encodeURIComponent(n)),utils.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),utils.isString(i)&&u.push("path="+i),utils.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(i){let a=i;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(a){const s=utils.isString(a)?o(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let o=0,i=0,a;return r=r!==void 0?r:1e3,function(u){const c=Date.now(),d=n[i];a||(a=c),e[o]=u,n[o]=c;let m=i,v=0;for(;m!==o;)v+=e[m++],m=m%t;if(o=(o+1)%t,o===i&&(i=(i+1)%t),c-a<r)return;const g=d&&c-d;return g?Math.round(v*1e3/g):void 0}}function progressEventReducer(t,r){let e=0;const n=speedometer(50,250);return o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-e,u=n(s),c=i<=a;e=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&c?(a-i)/u:void 0,event:o};d[r?"download":"upload"]=!0,t(d)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){let o=t.data;const i=AxiosHeaders$1.from(t.headers).normalize(),a=t.responseType;let s;function u(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}let c;utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?utils.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const b=t.auth.username||"",T=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(b+":"+T))}const m=buildFullPath(t.baseURL,t.url);d.open(t.method.toUpperCase(),buildURL(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function v(){if(!d)return;const b=AxiosHeaders$1.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:b,config:t,request:d};settle(function(O){e(O),u()},function(O){n(O),u()},_),d=null}if("onloadend"in d?d.onloadend=v:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(v)},d.onabort=function(){d&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let T=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(T=t.timeoutErrorMessage),n(new AxiosError(T,_.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,d)),d=null},platform.isStandardBrowserEnv){const b=isURLSameOrigin(m)&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);b&&i.set(t.xsrfHeaderName,b)}o===void 0&&i.setContentType(null),"setRequestHeader"in d&&utils.forEach(i.toJSON(),function(T,_){d.setRequestHeader(_,T)}),utils.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=b=>{d&&(n(!b||b.type?new CanceledError(null,t,d):b),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const g=parseProtocol(m);if(g&&platform.protocols.indexOf(g)===-1){n(new AxiosError("Unsupported protocol "+g+":",AxiosError.ERR_BAD_REQUEST,t));return}d.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:r}=t;let e,n;const o={};for(let i=0;i<r;i++){e=t[i];let a;if(n=e,!isResolvedHandle(e)&&(n=knownAdapters[(a=String(e)).toLowerCase()],n===void 0))throw new AxiosError(`Unknown adapter '${a}'`);if(n)break;o[a||"#"+i]=n}if(!n){const i=Object.entries(o).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?i.length>1?`since :
`+i.map(renderReason).join(`
`):" "+renderReason(i[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,r){r=r||{};const e={};function n(c,d,m){return utils.isPlainObject(c)&&utils.isPlainObject(d)?utils.merge.call({caseless:m},c,d):utils.isPlainObject(d)?utils.merge({},d):utils.isArray(d)?d.slice():d}function o(c,d,m){if(utils.isUndefined(d)){if(!utils.isUndefined(c))return n(void 0,c,m)}else return n(c,d,m)}function i(c,d){if(!utils.isUndefined(d))return n(void 0,d)}function a(c,d){if(utils.isUndefined(d)){if(!utils.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function s(c,d,m){if(m in r)return n(c,d);if(m in t)return n(void 0,c)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,d)=>o(headersToObject(c),headersToObject(d),!0)};return utils.forEach(Object.keys(Object.assign({},t,r)),function(d){const m=u[d]||o,v=m(t[d],r[d],d);utils.isUndefined(v)&&m!==s||(e[d]=v)}),e}const VERSION="1.6.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function o(i,a){return"[Axios v"+VERSION+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,s)=>{if(r===!1)throw new AxiosError(o(a," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[a]&&(deprecatedWarnings[a]=!0,console.warn(o(a," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(i,a,s):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let o=n.length;for(;o-- >0;){const i=n[o],a=r[i];if(a){const s=t[i],u=s===void 0||a(s,i,t);if(u!==!0)throw new AxiosError("option "+i+" must be "+u,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+i,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:i}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils.isFunction(o)?e.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=i&&utils.merge(i.common,i[e.method]);i&&utils.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),e.headers=AxiosHeaders$1.concat(a,i);const s=[];let u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(e)===!1||(u=u&&T.synchronous,s.unshift(T.fulfilled,T.rejected))});const c=[];this.interceptors.response.forEach(function(T){c.push(T.fulfilled,T.rejected)});let d,m=0,v;if(!u){const b=[dispatchRequest.bind(this),void 0];for(b.unshift.apply(b,s),b.push.apply(b,c),v=b.length,d=Promise.resolve(e);m<v;)d=d.then(b[m++],b[m++]);return d}v=s.length;let g=e;for(m=0;m<v;){const b=s[m++],T=s[m++];try{g=b(g)}catch(_){T.call(this,_);break}}try{d=dispatchRequest.call(this,g)}catch(b){return Promise.reject(b)}for(m=0,v=c.length;m<v;)d=d.then(c[m++],c[m++]);return d}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils.forEach(["post","put","patch"],function(r){function e(n){return function(i,a,s){return this.request(mergeConfig(s||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(i){e=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(s=>{n.subscribe(s),i=s}).then(o);return a.cancel=function(){n.unsubscribe(i)},a},r(function(i,a,s){n.reason||(n.reason=new CanceledError(i,a,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(o){r=o}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils.extend(e,r,null,{allOwnKeys:!0}),e.create=function(o){return createInstance(mergeConfig(t,o))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;var QCHAT_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function o(S){var x={exports:{}};return S(x,x.exports),x.exports}var i,a,s=n(o(function(S){S.exports=function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $},S.exports.__esModule=!0,S.exports.default=S.exports})),u=function(S){return S&&S.Math==Math&&S},c=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),d=function(S){try{return!!S()}catch{return!0}},m=!d(function(){var S=(function(){}).bind();return typeof S!="function"||S.hasOwnProperty("prototype")}),v=Function.prototype,g=v.apply,b=v.call,T=typeof Reflect=="object"&&Reflect.apply||(m?b.bind(g):function(){return b.apply(g,arguments)}),_=Function.prototype,y=_.bind,O=_.call,V=m&&y.bind(O,O),Ce=m?function(S){return S&&V(S)}:function(S){return S&&function(){return O.apply(S,arguments)}},ae=function(S){return typeof S=="function"},Fe=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),_e=Function.prototype.call,de=m?_e.bind(_e):function(){return _e.apply(_e,arguments)},oe={}.propertyIsEnumerable,he=Object.getOwnPropertyDescriptor,Ve={f:he&&!oe.call({1:2},1)?function(x){var $=he(this,x);return!!$&&$.enumerable}:oe},le=function(S,x){return{enumerable:!(1&S),configurable:!(2&S),writable:!(4&S),value:x}},ie=Ce({}.toString),Ie=Ce("".slice),pe=function(S){return Ie(ie(S),8,-1)},kt=Object,Ue=Ce("".split),Dt=d(function(){return!kt("z").propertyIsEnumerable(0)})?function(S){return pe(S)=="String"?Ue(S,""):kt(S)}:kt,tr=function(S){return S==null},dr=TypeError,pr=function(S){if(tr(S))throw dr("Can't call method on "+S);return S},ar=function(S){return Dt(pr(S))},hr=typeof document=="object"&&document.all,Ne=hr===void 0&&hr!==void 0?function(S){return typeof S=="object"?S!==null:ae(S)||S===hr}:function(S){return typeof S=="object"?S!==null:ae(S)},nr={},sr=function(S){return ae(S)?S:void 0},$e=function(S,x){return arguments.length<2?sr(nr[S])||sr(c[S]):nr[S]&&nr[S][x]||c[S]&&c[S][x]},er=Ce({}.isPrototypeOf),or=$e("navigator","userAgent")||"",ze=c.process,rr=c.Deno,Et=ze&&ze.versions||rr&&rr.version,Lt=Et&&Et.v8;Lt&&(a=(i=Lt.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!a&&or&&(!(i=or.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=or.match(/Chrome\/(\d+)/))&&(a=+i[1]);var cr,mr=a,vr=!!Object.getOwnPropertySymbols&&!d(function(){var S=Symbol();return!String(S)||!(Object(S)instanceof Symbol)||!Symbol.sham&&mr&&mr<41}),Tr=vr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ir=Object,kr=Tr?function(S){return typeof S=="symbol"}:function(S){var x=$e("Symbol");return ae(x)&&er(x.prototype,Ir(S))},Ar=String,Nr=function(S){try{return Ar(S)}catch{return"Object"}},Mn=TypeError,Or=function(S){if(ae(S))return S;throw Mn(Nr(S)+" is not a function")},Pr=function(S,x){var $=S[x];return tr($)?void 0:Or($)},Rr=TypeError,Qr=Object.defineProperty,hn="__core-js_shared__",Ur=c[hn]||function(S,x){try{Qr(c,S,{value:x,configurable:!0,writable:!0})}catch{c[S]=x}return x}(hn,{}),qr=o(function(S){(S.exports=function(x,$){return Ur[x]||(Ur[x]=$!==void 0?$:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),Gn=Object,jn=function(S){return Gn(pr(S))},Jr=Ce({}.hasOwnProperty),Lr=Object.hasOwn||function(x,$){return Jr(jn(x),$)},Kn=0,vo=Math.random(),bo=Ce(1 .toString),so=function(S){return"Symbol("+(S===void 0?"":S)+")_"+bo(++Kn+vo,36)},co=qr("wks"),Ro=c.Symbol,An=Ro&&Ro.for,Aa=Tr?Ro:Ro&&Ro.withoutSetter||so,to=function(S){if(!Lr(co,S)||!vr&&typeof co[S]!="string"){var x="Symbol."+S;vr&&Lr(Ro,S)?co[S]=Ro[S]:co[S]=Tr&&An?An(x):Aa(x)}return co[S]},Br=TypeError,Gr=to("toPrimitive"),Bn=function(S,x){if(!Ne(S)||kr(S))return S;var $,F=Pr(S,Gr);if(F){if(x===void 0&&(x="default"),$=de(F,S,x),!Ne($)||kr($))return $;throw Br("Can't convert object to primitive value")}return x===void 0&&(x="number"),function(A,re){var xe,z;if(re==="string"&&ae(xe=A.toString)&&!Ne(z=de(xe,A))||ae(xe=A.valueOf)&&!Ne(z=de(xe,A))||re!=="string"&&ae(xe=A.toString)&&!Ne(z=de(xe,A)))return z;throw Rr("Can't convert object to primitive value")}(S,x)},Xn=function(S){var x=Bn(S,"string");return kr(x)?x:x+""},_o=c.document,oo=Ne(_o)&&Ne(_o.createElement),Ma=function(S){return oo?_o.createElement(S):{}},si=!Fe&&!d(function(){return Object.defineProperty(Ma("div"),"a",{get:function(){return 7}}).a!=7}),ci=Object.getOwnPropertyDescriptor,Ei={f:Fe?ci:function(x,$){if(x=ar(x),$=Xn($),si)try{return ci(x,$)}catch{}if(Lr(x,$))return le(!de(Ve.f,x,$),x[$])}},Wh=/#|\.prototype\./,xa=function(S,x){var $=Zy[Fs(S)];return $==tb||$!=eb&&(ae(x)?d(x):!!x)},Fs=xa.normalize=function(S){return String(S).replace(Wh,".").toLowerCase()},Zy=xa.data={},eb=xa.NATIVE="N",tb=xa.POLYFILL="P",af=xa,rb=Ce(Ce.bind),jo=function(S,x){return Or(S),x===void 0?S:m?rb(S,x):function(){return S.apply(x,arguments)}},sf=Fe&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nb=String,ob=TypeError,Vn=function(S){if(Ne(S))return S;throw ob(nb(S)+" is not an object")},ab=TypeError,ru=Object.defineProperty,ib=Object.getOwnPropertyDescriptor,sb="enumerable",cb="configurable",lb="writable",ua={f:Fe?sf?function(x,$,F){if(Vn(x),$=Xn($),Vn(F),typeof x=="function"&&$==="prototype"&&"value"in F&&lb in F&&!F.writable){var A=ib(x,$);A&&A.writable&&(x[$]=F.value,F={configurable:cb in F?F.configurable:A.configurable,enumerable:sb in F?F.enumerable:A.enumerable,writable:!1})}return ru(x,$,F)}:ru:function(x,$,F){if(Vn(x),$=Xn($),Vn(F),si)try{return ru(x,$,F)}catch{}if("get"in F||"set"in F)throw ab("Accessors not supported");return"value"in F&&(x[$]=F.value),x}},Jo=Fe?function(S,x,$){return ua.f(S,x,le(1,$))}:function(S,x,$){return S[x]=$,S},ub=Ei.f,db=function(S){var x=function($,F,A){if(this instanceof x){switch(arguments.length){case 0:return new S;case 1:return new S($);case 2:return new S($,F)}return new S($,F,A)}return T(S,this,arguments)};return x.prototype=S.prototype,x},Vr=function(S,x){var $,F,A,re,xe,z,qe,At,lr=S.target,fr=S.global,Sr=S.stat,br=S.proto,Er=fr?c:Sr?c[lr]:(c[lr]||{}).prototype,$r=fr?nr:nr[lr]||Jo(nr,lr,{})[lr],jr=$r.prototype;for(A in x)$=!af(fr?A:lr+(Sr?".":"#")+A,S.forced)&&Er&&Lr(Er,A),xe=$r[A],$&&(z=S.dontCallGetSet?(At=ub(Er,A))&&At.value:Er[A]),re=$&&z?z:x[A],$&&typeof xe==typeof re||(qe=S.bind&&$?jo(re,c):S.wrap&&$?db(re):br&&ae(re)?Ce(re):re,(S.sham||re&&re.sham||xe&&xe.sham)&&Jo(qe,"sham",!0),Jo($r,A,qe),br&&(Lr(nr,F=lr+"Prototype")||Jo(nr,F,{}),Jo(nr[F],A,re),S.real&&jr&&!jr[A]&&Jo(jr,A,re)))},pb=Math.ceil,fb=Math.floor,mb=Math.trunc||function(x){var $=+x;return($>0?fb:pb)($)},Ls=function(S){var x=+S;return x!=x||x===0?0:mb(x)},gb=Math.max,hb=Math.min,ns=function(S,x){var $=Ls(S);return $<0?gb($+x,0):hb($,x)},vb=Math.min,Ia=function(S){return(x=S.length)>0?vb(Ls(x),9007199254740991):0;var x},cf=function(S){return function(x,$,F){var A,re=ar(x),xe=Ia(re),z=ns(F,xe);if(S&&$!=$){for(;xe>z;)if((A=re[z++])!=A)return!0}else for(;xe>z;z++)if((S||z in re)&&re[z]===$)return S||z||0;return!S&&-1}},nu={includes:cf(!0),indexOf:cf(!1)},os={},yb=nu.indexOf,lf=Ce([].push),uf=function(S,x){var $,F=ar(S),A=0,re=[];for($ in F)!Lr(os,$)&&Lr(F,$)&&lf(re,$);for(;x.length>A;)Lr(F,$=x[A++])&&(~yb(re,$)||lf(re,$));return re},jc=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gi=Object.keys||function(x){return uf(x,jc)},bb=Fe&&!sf?Object.defineProperties:function(x,$){Vn(x);for(var F,A=ar($),re=gi($),xe=re.length,z=0;xe>z;)ua.f(x,F=re[z++],A[F]);return x},df={f:bb},ou=$e("document","documentElement"),pf=qr("keys"),Dc=function(S){return pf[S]||(pf[S]=so(S))},ff=Dc("IE_PROTO"),au=function(){},mf=function(S){return"<script>"+S+"<\/script>"},gf=function(S){S.write(mf("")),S.close();var x=S.parentWindow.Object;return S=null,x},$c=function(){try{cr=new ActiveXObject("htmlfile")}catch{}var S,x;$c=typeof document<"u"?document.domain&&cr?gf(cr):((x=Ma("iframe")).style.display="none",ou.appendChild(x),x.src="javascript:",(S=x.contentWindow.document).open(),S.write(mf("document.F=Object")),S.close(),S.F):gf(cr);for(var $=jc.length;$--;)delete $c.prototype[jc[$]];return $c()};os[ff]=!0;var Ea=Object.create||function(x,$){var F;return x!==null?(au.prototype=Vn(x),F=new au,au.prototype=null,F[ff]=x):F=$c(),$===void 0?F:df.f(F,$)};Vr({target:"Object",stat:!0,sham:!Fe},{create:Ea});var Tb=nr.Object,Ja=function(x,$){return Tb.create(x,$)},Sb=String,Mb=TypeError,js=Object.setPrototypeOf||("__proto__"in{}?function(){var S,x=!1,$={};try{(S=Ce(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))($,[]),x=$ instanceof Array}catch{}return function(A,re){return Vn(A),function(xe){if(typeof xe=="object"||ae(xe))return xe;throw Mb("Can't set "+Sb(xe)+" as a prototype")}(re),x?S(A,re):A.__proto__=re,A}}():void 0);Vr({target:"Object",stat:!0},{setPrototypeOf:js});var Ni=nr.Object.setPrototypeOf,hi=Ce([].slice),hf=Function,Cb=Ce([].concat),kb=Ce([].join),iu={},_b=function(S,x,$){if(!Lr(iu,x)){for(var F=[],A=0;A<x;A++)F[A]="a["+A+"]";iu[x]=hf("C,a","return new C("+kb(F,",")+")")}return iu[x](S,$)},su=m?hf.bind:function(x){var $=Or(this),F=$.prototype,A=hi(arguments,1),re=function(){var z=Cb(A,hi(arguments));return this instanceof re?_b($,z.length,z):$.apply(x,z)};return Ne(F)&&(re.prototype=F),re};Vr({target:"Function",proto:!0,forced:Function.bind!==su},{bind:su});var Uo=function(S){return nr[S+"Prototype"]},wb=Uo("Function").bind,cu=Function.prototype,Oo=function(S){var x=S.bind;return S===cu||er(cu,S)&&x===cu.bind?wb:x},lu=o(function(S){function x($,F){var A;return S.exports=x=Ni?Oo(A=Ni).call(A):function(xe,z){return xe.__proto__=z,xe},S.exports.__esModule=!0,S.exports.default=S.exports,x($,F)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),No=n(o(function(S){S.exports=function($,F){$.prototype=Ja(F.prototype),$.prototype.constructor=$,lu($,F)},S.exports.__esModule=!0,S.exports.default=S.exports})),Ya=Array.isArray||function(x){return pe(x)=="Array"},xb=TypeError,uu=function(S){if(S>9007199254740991)throw xb("Maximum allowed index exceeded");return S},Bi=function(S,x,$){var F=Xn(x);F in S?ua.f(S,F,le(0,$)):S[F]=$},vf={};vf[to("toStringTag")]="z";var du=String(vf)==="[object z]",Ib=to("toStringTag"),Eb=Object,Pb=pe(function(){return arguments}())=="Arguments",Fi=du?pe:function(S){var x,$,F;return S===void 0?"Undefined":S===null?"Null":typeof($=function(A,re){try{return A[re]}catch{}}(x=Eb(S),Ib))=="string"?$:Pb?pe(x):(F=pe(x))=="Object"&&ae(x.callee)?"Arguments":F},Ab=Ce(Function.toString);ae(Ur.inspectSource)||(Ur.inspectSource=function(S){return Ab(S)});var yf=Ur.inspectSource,bf=function(){},Ob=[],Tf=$e("Reflect","construct"),pu=/^\s*(?:class|function)\b/,Rb=Ce(pu.exec),Nb=!pu.exec(bf),Ds=function(x){if(!ae(x))return!1;try{return Tf(bf,Ob,x),!0}catch{return!1}},Sf=function(x){if(!ae(x))return!1;switch(Fi(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nb||!!Rb(pu,yf(x))}catch{return!0}};Sf.sham=!0;var Uc=!Tf||d(function(){var S;return Ds(Ds.call)||!Ds(Object)||!Ds(function(){S=!0})||S})?Sf:Ds,Bb=to("species"),Mf=Array,fu=function(S,x){return new(function($){var F;return Ya($)&&(F=$.constructor,(Uc(F)&&(F===Mf||Ya(F.prototype))||Ne(F)&&(F=F[Bb])===null)&&(F=void 0)),F===void 0?Mf:F}(S))(x===0?0:x)},Fb=to("species"),$s=function(S){return mr>=51||!d(function(){var x=[];return(x.constructor={})[Fb]=function(){return{foo:1}},x[S](Boolean).foo!==1})},Cf=to("isConcatSpreadable"),Lb=mr>=51||!d(function(){var S=[];return S[Cf]=!1,S.concat()[0]!==S}),jb=$s("concat"),Db=function(S){if(!Ne(S))return!1;var x=S[Cf];return x!==void 0?!!x:Ya(S)};Vr({target:"Array",proto:!0,arity:1,forced:!Lb||!jb},{concat:function(x){var $,F,A,re,xe,z=jn(this),qe=fu(z,0),At=0;for($=-1,A=arguments.length;$<A;$++)if(Db(xe=$===-1?z:arguments[$]))for(re=Ia(xe),uu(At+re),F=0;F<re;F++,At++)F in xe&&Bi(qe,At,xe[F]);else uu(At+1),Bi(qe,At++,xe);return qe.length=At,qe}});var qc,Us,Vc,$b=String,Oa=function(S){if(Fi(S)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $b(S)},Ub=jc.concat("length","prototype"),qs={f:Object.getOwnPropertyNames||function(x){return uf(x,Ub)}},qb=Array,Vb=Math.max,mu=function(S,x,$){for(var F=Ia(S),A=ns(x,F),re=ns($===void 0?F:$,F),xe=qb(Vb(re-A,0)),z=0;A<re;A++,z++)Bi(xe,z,S[A]);return xe.length=z,xe},kf=qs.f,_f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gu={f:function(x){return _f&&pe(x)=="Window"?function($){try{return kf($)}catch{return mu(_f)}}(x):kf(ar(x))}},Vs={f:Object.getOwnPropertySymbols},vi=function(S,x,$,F){return F&&F.enumerable?S[x]=$:Jo(S,x,$),S},hu={f:to},Hb=ua.f,wo=function(S){var x=nr.Symbol||(nr.Symbol={});Lr(x,S)||Hb(x,S,{value:hu.f(S)})},wf=function(){var S=$e("Symbol"),x=S&&S.prototype,$=x&&x.valueOf,F=to("toPrimitive");x&&!x[F]&&vi(x,F,function(A){return de($,this)},{arity:1})},zb=du?{}.toString:function(){return"[object "+Fi(this)+"]"},Kb=ua.f,xf=to("toStringTag"),Li=function(S,x,$,F){if(S){var A=$?S:S.prototype;Lr(A,xf)||Kb(A,xf,{configurable:!0,value:x}),F&&!du&&Jo(A,"toString",zb)}},If=c.WeakMap,Wb=ae(If)&&/native code/.test(String(If)),Ef="Object already initialized",vu=c.TypeError,Gb=c.WeakMap;if(Wb||Ur.state){var ji=Ur.state||(Ur.state=new Gb),Qb=Ce(ji.get),Pf=Ce(ji.has),Jb=Ce(ji.set);qc=function(S,x){if(Pf(ji,S))throw vu(Ef);return x.facade=S,Jb(ji,S,x),x},Us=function(S){return Qb(ji,S)||{}},Vc=function(S){return Pf(ji,S)}}else{var as=Dc("state");os[as]=!0,qc=function(S,x){if(Lr(S,as))throw vu(Ef);return x.facade=S,Jo(S,as,x),x},Us=function(S){return Lr(S,as)?S[as]:{}},Vc=function(S){return Lr(S,as)}}var Pa={set:qc,get:Us,has:Vc,enforce:function(S){return Vc(S)?Us(S):qc(S,{})},getterFor:function(S){return function(x){var $;if(!Ne(x)||($=Us(x)).type!==S)throw vu("Incompatible receiver, "+S+" required");return $}}},Af=Ce([].push),yi=function(S){var x=S==1,$=S==2,F=S==3,A=S==4,re=S==6,xe=S==7,z=S==5||re;return function(qe,At,lr,fr){for(var Sr,br,Er=jn(qe),$r=Dt(Er),jr=jo(At,lr),vn=Ia($r),Yr=0,wn=fr||fu,Zr=x?wn(qe,vn):$||xe?wn(qe,0):void 0;vn>Yr;Yr++)if((z||Yr in $r)&&(br=jr(Sr=$r[Yr],Yr,Er),S))if(x)Zr[Yr]=br;else if(br)switch(S){case 3:return!0;case 5:return Sr;case 6:return Yr;case 2:Af(Zr,Sr)}else switch(S){case 4:return!1;case 7:Af(Zr,Sr)}return re?-1:F||A?A:Zr}},bi={forEach:yi(0),map:yi(1),filter:yi(2),some:yi(3),every:yi(4),find:yi(5),findIndex:yi(6),filterReject:yi(7)},Hc=bi.forEach,da=Dc("hidden"),zc="Symbol",Yb=Pa.set,Of=Pa.getterFor(zc),Ba=Object.prototype,Di=c.Symbol,Hs=Di&&Di.prototype,Xb=c.TypeError,yu=c.QObject,Rf=Ei.f,Ti=ua.f,Nf=gu.f,Zb=Ve.f,Bf=Ce([].push),Xa=qr("symbols"),zs=qr("op-symbols"),e0=qr("wks"),bu=!yu||!yu.prototype||!yu.prototype.findChild,Tu=Fe&&d(function(){return Ea(Ti({},"a",{get:function(){return Ti(this,"a",{value:7}).a}})).a!=7})?function(S,x,$){var F=Rf(Ba,x);F&&delete Ba[x],Ti(S,x,$),F&&S!==Ba&&Ti(Ba,x,F)}:Ti,Su=function(S,x){var $=Xa[S]=Ea(Hs);return Yb($,{type:zc,tag:S,description:x}),Fe||($.description=x),$},Kc=function(x,$,F){x===Ba&&Kc(zs,$,F),Vn(x);var A=Xn($);return Vn(F),Lr(Xa,A)?(F.enumerable?(Lr(x,da)&&x[da][A]&&(x[da][A]=!1),F=Ea(F,{enumerable:le(0,!1)})):(Lr(x,da)||Ti(x,da,le(1,{})),x[da][A]=!0),Tu(x,A,F)):Ti(x,A,F)},Mu=function(x,$){Vn(x);var F=ar($),A=gi(F).concat(Df(F));return Hc(A,function(re){Fe&&!de(Ff,F,re)||Kc(x,re,F[re])}),x},Ff=function(x){var $=Xn(x),F=de(Zb,this,$);return!(this===Ba&&Lr(Xa,$)&&!Lr(zs,$))&&(!(F||!Lr(this,$)||!Lr(Xa,$)||Lr(this,da)&&this[da][$])||F)},Lf=function(x,$){var F=ar(x),A=Xn($);if(F!==Ba||!Lr(Xa,A)||Lr(zs,A)){var re=Rf(F,A);return!re||!Lr(Xa,A)||Lr(F,da)&&F[da][A]||(re.enumerable=!0),re}},jf=function(x){var $=Nf(ar(x)),F=[];return Hc($,function(A){Lr(Xa,A)||Lr(os,A)||Bf(F,A)}),F},Df=function(S){var x=S===Ba,$=Nf(x?zs:ar(S)),F=[];return Hc($,function(A){!Lr(Xa,A)||x&&!Lr(Ba,A)||Bf(F,Xa[A])}),F};vr||(Di=function(){if(er(Hs,this))throw Xb("Symbol is not a constructor");var x=arguments.length&&arguments[0]!==void 0?Oa(arguments[0]):void 0,$=so(x),F=function(A){this===Ba&&de(F,zs,A),Lr(this,da)&&Lr(this[da],$)&&(this[da][$]=!1),Tu(this,$,le(1,A))};return Fe&&bu&&Tu(Ba,$,{configurable:!0,set:F}),Su($,x)},Hs=Di.prototype,vi(Hs,"toString",function(){return Of(this).tag}),vi(Di,"withoutSetter",function(S){return Su(so(S),S)}),Ve.f=Ff,ua.f=Kc,df.f=Mu,Ei.f=Lf,qs.f=gu.f=jf,Vs.f=Df,hu.f=function(S){return Su(to(S),S)},Fe&&Ti(Hs,"description",{configurable:!0,get:function(){return Of(this).description}})),Vr({global:!0,constructor:!0,wrap:!0,forced:!vr,sham:!vr},{Symbol:Di}),Hc(gi(e0),function(S){wo(S)}),Vr({target:zc,stat:!0,forced:!vr},{useSetter:function(){bu=!0},useSimple:function(){bu=!1}}),Vr({target:"Object",stat:!0,forced:!vr,sham:!Fe},{create:function(x,$){return $===void 0?Ea(x):Mu(Ea(x),$)},defineProperty:Kc,defineProperties:Mu,getOwnPropertyDescriptor:Lf}),Vr({target:"Object",stat:!0,forced:!vr},{getOwnPropertyNames:jf}),wf(),Li(Di,zc),os[da]=!0;var $f=vr&&!!Symbol.for&&!!Symbol.keyFor,Cu=qr("string-to-symbol-registry"),t0=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!$f},{for:function(S){var x=Oa(S);if(Lr(Cu,x))return Cu[x];var $=$e("Symbol")(x);return Cu[x]=$,t0[$]=x,$}});var Uf=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!$f},{keyFor:function(x){if(!kr(x))throw TypeError(Nr(x)+" is not a symbol");if(Lr(Uf,x))return Uf[x]}});var Si=$e("JSON","stringify"),Wc=Ce(/./.exec),qf=Ce("".charAt),r0=Ce("".charCodeAt),n0=Ce("".replace),o0=Ce(1 .toString),a0=/[\uD800-\uDFFF]/g,Vf=/^[\uD800-\uDBFF]$/,Hf=/^[\uDC00-\uDFFF]$/,zf=!vr||d(function(){var S=$e("Symbol")();return Si([S])!="[null]"||Si({a:S})!="{}"||Si(Object(S))!="{}"}),Kf=d(function(){return Si("\uDF06\uD834")!=='"\\udf06\\ud834"'||Si("\uDEAD")!=='"\\udead"'}),i0=function(S,x){var $=hi(arguments),F=x;if((Ne(x)||S!==void 0)&&!kr(S))return Ya(x)||(x=function(A,re){if(ae(F)&&(re=de(F,this,A,re)),!kr(re))return re}),$[1]=x,T(Si,null,$)},s0=function(S,x,$){var F=qf($,x-1),A=qf($,x+1);return Wc(Vf,S)&&!Wc(Hf,A)||Wc(Hf,S)&&!Wc(Vf,F)?"\\u"+o0(r0(S,0),16):S};Si&&Vr({target:"JSON",stat:!0,arity:3,forced:zf||Kf},{stringify:function(x,$,F){var A=hi(arguments),re=T(zf?i0:Si,null,A);return Kf&&typeof re=="string"?n0(re,a0,s0):re}});var c0=!vr||d(function(){Vs.f(1)});Vr({target:"Object",stat:!0,forced:c0},{getOwnPropertySymbols:function(x){var $=Vs.f;return $?$(jn(x)):[]}}),wo("asyncIterator"),wo("hasInstance"),wo("isConcatSpreadable"),wo("iterator"),wo("match"),wo("matchAll"),wo("replace"),wo("search"),wo("species"),wo("split"),wo("toPrimitive"),wf(),wo("toStringTag"),Li($e("Symbol"),"Symbol"),wo("unscopables"),Li(c.JSON,"JSON",!0);var Mi,Wf,Gf,l0=nr.Symbol,Za={},Qf=Function.prototype,u0=Fe&&Object.getOwnPropertyDescriptor,ku=Lr(Qf,"name"),d0={EXISTS:ku,PROPER:ku&&(function(){}).name==="something",CONFIGURABLE:ku&&(!Fe||Fe&&u0(Qf,"name").configurable)},Jf=!d(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype}),Yf=Dc("IE_PROTO"),_u=Object,p0=_u.prototype,is=Jf?_u.getPrototypeOf:function(S){var x=jn(S);if(Lr(x,Yf))return x[Yf];var $=x.constructor;return ae($)&&x instanceof $?$.prototype:x instanceof _u?p0:null},wu=to("iterator"),Xf=!1;[].keys&&("next"in(Gf=[].keys())?(Wf=is(is(Gf)))!==Object.prototype&&(Mi=Wf):Xf=!0);var f0=!Ne(Mi)||d(function(){var S={};return Mi[wu].call(S)!==S});Mi=f0?{}:Ea(Mi),ae(Mi[wu])||vi(Mi,wu,function(){return this});var Zf={IteratorPrototype:Mi,BUGGY_SAFARI_ITERATORS:Xf},m0=Zf.IteratorPrototype,g0=function(){return this},h0=d0.PROPER,Gc=Zf.BUGGY_SAFARI_ITERATORS,xu=to("iterator"),em="keys",Qc="values",tm="entries",v0=function(){return this},Iu=function(S,x,$,F,A,re,xe){(function(vn,Yr,wn,Zr){var Qn=Yr+" Iterator";vn.prototype=Ea(m0,{next:le(+!Zr,wn)}),Li(vn,Qn,!1,!0),Za[Qn]=g0})($,x,F);var z,qe,At,lr=function(vn){if(vn===A&&$r)return $r;if(!Gc&&vn in br)return br[vn];switch(vn){case em:return function(){return new $(this,vn)};case Qc:return function(){return new $(this,vn)};case tm:return function(){return new $(this,vn)}}return function(){return new $(this)}},fr=x+" Iterator",Sr=!1,br=S.prototype,Er=br[xu]||br["@@iterator"]||A&&br[A],$r=!Gc&&Er||lr(A),jr=x=="Array"&&br.entries||Er;if(jr&&(z=is(jr.call(new S)))!==Object.prototype&&z.next&&(Li(z,fr,!0,!0),Za[fr]=v0),h0&&A==Qc&&Er&&Er.name!==Qc&&(Sr=!0,$r=function(){return de(Er,this)}),A)if(qe={values:lr(Qc),keys:re?$r:lr(em),entries:lr(tm)},xe)for(At in qe)(Gc||Sr||!(At in br))&&vi(br,At,qe[At]);else Vr({target:x,proto:!0,forced:Gc||Sr},qe);return xe&&br[xu]!==$r&&vi(br,xu,$r,{name:A}),Za[x]=$r,qe};ua.f;var rm="Array Iterator",y0=Pa.set,b0=Pa.getterFor(rm);Iu(Array,"Array",function(S,x){y0(this,{type:rm,target:ar(S),index:0,kind:x})},function(){var S=b0(this),x=S.target,$=S.kind,F=S.index++;return!x||F>=x.length?(S.target=void 0,{value:void 0,done:!0}):$=="keys"?{value:F,done:!1}:$=="values"?{value:x[F],done:!1}:{value:[F,x[F]],done:!1}},"values"),Za.Arguments=Za.Array;var nm=to("toStringTag");for(var Eu in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var om=c[Eu],Pu=om&&om.prototype;Pu&&Fi(Pu)!==nm&&Jo(Pu,nm,Eu),Za[Eu]=Za.Array}var T0=l0;wo("asyncDispose"),wo("dispose"),wo("matcher"),wo("metadataKey"),wo("observable"),wo("metadata"),wo("patternMatch"),wo("replaceAll");var ga=T0,S0=Ce("".charAt),am=Ce("".charCodeAt),M0=Ce("".slice),im=function(S){return function(x,$){var F,A,re=Oa(pr(x)),xe=Ls($),z=re.length;return xe<0||xe>=z?S?"":void 0:(F=am(re,xe))<55296||F>56319||xe+1===z||(A=am(re,xe+1))<56320||A>57343?S?S0(re,xe):F:S?M0(re,xe,xe+2):A-56320+(F-55296<<10)+65536}},C0={codeAt:im(!1),charAt:im(!0)}.charAt,sm="String Iterator",k0=Pa.set,_0=Pa.getterFor(sm);Iu(String,"String",function(S){k0(this,{type:sm,string:Oa(S),index:0})},function(){var x,$=_0(this),F=$.string,A=$.index;return A>=F.length?{value:void 0,done:!0}:(x=C0(F,A),$.index+=x.length,{value:x,done:!1})});var cm=hu.f("iterator"),w0=o(function(S){function x($){return S.exports=x=typeof ga=="function"&&typeof cm=="symbol"?function(F){return typeof F}:function(F){return F&&typeof ga=="function"&&F.constructor===ga&&F!==ga.prototype?"symbol":typeof F},S.exports.__esModule=!0,S.exports.default=S.exports,x($)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),lm=ua.f;Vr({target:"Object",stat:!0,forced:Object.defineProperty!==lm,sham:!Fe},{defineProperty:lm});var x0=o(function(S){var x=nr.Object,$=S.exports=function(A,re,xe){return x.defineProperty(A,re,xe)};x.defineProperty.sham&&($.sham=!0)}),Ks=x0,I0=d(function(){is(1)});Vr({target:"Object",stat:!0,forced:I0,sham:!Jf},{getPrototypeOf:function(x){return is(jn(x))}});var $i=nr.Object.getPrototypeOf,Ui=function(S,x){var $=[][S];return!!$&&d(function(){$.call(null,x||function(){return 1},1)})},E0=bi.forEach,um=Ui("forEach")?[].forEach:function(x){return E0(this,x,arguments.length>1?arguments[1]:void 0)};Vr({target:"Array",proto:!0,forced:[].forEach!=um},{forEach:um});var P0=Uo("Array").forEach,Au=Array.prototype,A0={DOMTokenList:!0,NodeList:!0},In=function(S){var x=S.forEach;return S===Au||er(Au,S)&&x===Au.forEach||Lr(A0,Fi(S))?P0:x},O0=Ce([].concat),R0=$e("Reflect","ownKeys")||function(x){var $=qs.f(Vn(x)),F=Vs.f;return F?O0($,F(x)):$},dm=Error,N0=Ce("".replace),B0=String(dm("zxcasd").stack),pm=/\n\s*at [^:]*:[^\n]*/,F0=pm.test(B0),L0=function(S,x){if(F0&&typeof S=="string"&&!dm.prepareStackTrace)for(;x--;)S=N0(S,pm,"");return S},j0=function(S,x){Ne(x)&&"cause"in x&&Jo(S,"cause",x.cause)},D0=to("iterator"),$0=Array.prototype,fm=function(S){return S!==void 0&&(Za.Array===S||$0[D0]===S)},U0=to("iterator"),Jc=function(S){if(!tr(S))return Pr(S,U0)||Pr(S,"@@iterator")||Za[Fi(S)]},q0=TypeError,Ws=function(S,x){var $=arguments.length<2?Jc(S):x;if(Or($))return Vn(de($,S));throw q0(Nr(S)+" is not iterable")},Ou=function(S,x,$){var F,A;Vn(S);try{if(!(F=Pr(S,"return"))){if(x==="throw")throw $;return $}F=de(F,S)}catch(re){A=!0,F=re}if(x==="throw")throw $;if(A)throw F;return Vn(F),$},V0=TypeError,Yc=function(S,x){this.stopped=S,this.result=x},mm=Yc.prototype,lo=function(S,x,$){var F,A,re,xe,z,qe,At,lr=$&&$.that,fr=!(!$||!$.AS_ENTRIES),Sr=!(!$||!$.IS_RECORD),br=!(!$||!$.IS_ITERATOR),Er=!(!$||!$.INTERRUPTED),$r=jo(x,lr),jr=function(Yr){return F&&Ou(F,"normal",Yr),new Yc(!0,Yr)},vn=function(Yr){return fr?(Vn(Yr),Er?$r(Yr[0],Yr[1],jr):$r(Yr[0],Yr[1])):Er?$r(Yr,jr):$r(Yr)};if(Sr)F=S.iterator;else if(br)F=S;else{if(!(A=Jc(S)))throw V0(Nr(S)+" is not iterable");if(fm(A)){for(re=0,xe=Ia(S);xe>re;re++)if((z=vn(S[re]))&&er(mm,z))return z;return new Yc(!1)}F=Ws(S,A)}for(qe=Sr?S.next:F.next;!(At=de(qe,F)).done;){try{z=vn(At.value)}catch(Yr){Ou(F,"throw",Yr)}if(typeof z=="object"&&z&&er(mm,z))return z}return new Yc(!1)},H0=function(S,x){return S===void 0?arguments.length<2?"":x:Oa(S)},z0=!d(function(){var S=Error("a");return!("stack"in S)||(Object.defineProperty(S,"stack",le(1,7)),S.stack!==7)}),K0=to("toStringTag"),Xc=Error,W0=[].push,Gs=function(x,$){var F,A=arguments.length>2?arguments[2]:void 0,re=er(Ru,this);js?F=js(Xc(),re?is(this):Ru):(F=re?this:Ea(Ru),Jo(F,K0,"Error")),$!==void 0&&Jo(F,"message",H0($)),z0&&Jo(F,"stack",L0(F.stack,1)),j0(F,A);var xe=[];return lo(x,W0,{that:xe}),Jo(F,"errors",xe),F};js?js(Gs,Xc):function(S,x,$){for(var F=R0(x),A=ua.f,re=Ei.f,xe=0;xe<F.length;xe++){var z=F[xe];Lr(S,z)||$&&Lr($,z)||A(S,z,re(x,z))}}(Gs,Xc,{name:!0});var Ru=Gs.prototype=Ea(Xc.prototype,{constructor:le(1,Gs),message:le(1,""),name:le(1,"AggregateError")});Vr({global:!0,constructor:!0,arity:2},{AggregateError:Gs});var Qs,ss,gm,Nu,Ua=pe(c.process)=="process",hm=to("species"),vm=function(S){var x=$e(S),$=ua.f;Fe&&x&&!x[hm]&&$(x,hm,{configurable:!0,get:function(){return this}})},G0=TypeError,Bu=function(S,x){if(er(x,S))return S;throw G0("Incorrect invocation")},Q0=TypeError,Zc=function(S){if(Uc(S))return S;throw Q0(Nr(S)+" is not a constructor")},J0=to("species"),Ci=function(S,x){var $,F=Vn(S).constructor;return F===void 0||tr($=Vn(F)[J0])?x:Zc($)},Y0=TypeError,ym=function(S,x){if(S<x)throw Y0("Not enough arguments");return S},bm=/(?:ipad|iphone|ipod).*applewebkit/i.test(or),Fu=c.setImmediate,Lu=c.clearImmediate,X0=c.process,ju=c.Dispatch,Z0=c.Function,Tm=c.MessageChannel,e1=c.String,Du=0,Js={},t1="onreadystatechange";try{Qs=c.location}catch{}var $u=function(S){if(Lr(Js,S)){var x=Js[S];delete Js[S],x()}},Uu=function(S){return function(){$u(S)}},Sm=function(S){$u(S.data)},Mm=function(S){c.postMessage(e1(S),Qs.protocol+"//"+Qs.host)};Fu&&Lu||(Fu=function(x){ym(arguments.length,1);var $=ae(x)?x:Z0(x),F=hi(arguments,1);return Js[++Du]=function(){T($,void 0,F)},ss(Du),Du},Lu=function(x){delete Js[x]},Ua?ss=function(S){X0.nextTick(Uu(S))}:ju&&ju.now?ss=function(S){ju.now(Uu(S))}:Tm&&!bm?(Nu=(gm=new Tm).port2,gm.port1.onmessage=Sm,ss=jo(Nu.postMessage,Nu)):c.addEventListener&&ae(c.postMessage)&&!c.importScripts&&Qs&&Qs.protocol!=="file:"&&!d(Mm)?(ss=Mm,c.addEventListener("message",Sm,!1)):ss=t1 in Ma("script")?function(S){ou.appendChild(Ma("script")).onreadystatechange=function(){ou.removeChild(this),$u(S)}}:function(S){setTimeout(Uu(S),0)});var Ys,qi,Xs,cs,qu,Vu,Hu,Cm,km={set:Fu,clear:Lu},r1=/ipad|iphone|ipod/i.test(or)&&c.Pebble!==void 0,n1=/web0s(?!.*chrome)/i.test(or),o1=Ei.f,zu=km.set,_m=c.MutationObserver||c.WebKitMutationObserver,wm=c.document,xm=c.process,el=c.Promise,Im=o1(c,"queueMicrotask"),Em=Im&&Im.value;Em||(Ys=function(){var S,x;for(Ua&&(S=xm.domain)&&S.exit();qi;){x=qi.fn,qi=qi.next;try{x()}catch($){throw qi?cs():Xs=void 0,$}}Xs=void 0,S&&S.enter()},bm||Ua||n1||!_m||!wm?!r1&&el&&el.resolve?((Hu=el.resolve(void 0)).constructor=el,Cm=jo(Hu.then,Hu),cs=function(){Cm(Ys)}):Ua?cs=function(){xm.nextTick(Ys)}:(zu=jo(zu,c),cs=function(){zu(Ys)}):(qu=!0,Vu=wm.createTextNode(""),new _m(Ys).observe(Vu,{characterData:!0}),cs=function(){Vu.data=qu=!qu}));var Ku=Em||function(S){var x={fn:S,next:void 0};Xs&&(Xs.next=x),qi||(qi=x,cs()),Xs=x},ls=function(S){try{return{error:!1,value:S()}}catch(x){return{error:!0,value:x}}},Pm=function(){this.head=null,this.tail=null};Pm.prototype={add:function(S){var x={item:S,next:null};this.head?this.tail.next=x:this.head=x,this.tail=x},get:function(){var S=this.head;if(S)return this.head=S.next,this.tail===S&&(this.tail=null),S.item}};var Wu,Am,a1=Pm,ra=c.Promise,Om=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",i1=!Om&&!Ua&&typeof window=="object"&&typeof document=="object",Rm=ra&&ra.prototype,s1=to("species"),Nm=!1,Bm=ae(c.PromiseRejectionEvent),c1=af("Promise",function(){var S=yf(ra),x=S!==String(ra);if(!x&&mr===66||!Rm.catch||!Rm.finally)return!0;if(!mr||mr<51||!/native code/.test(S)){var $=new ra(function(A){A(1)}),F=function(A){A(function(){},function(){})};if(($.constructor={})[s1]=F,!(Nm=$.then(function(){})instanceof F))return!0}return!x&&(i1||Om)&&!Bm}),us={CONSTRUCTOR:c1,REJECTION_EVENT:Bm,SUBCLASSING:Nm},l1=TypeError,u1=function(S){var x,$;this.promise=new S(function(F,A){if(x!==void 0||$!==void 0)throw l1("Bad Promise constructor");x=F,$=A}),this.resolve=Or(x),this.reject=Or($)},ei={f:function(S){return new u1(S)}},Fm=km.set,tl="Promise",Lm=us.CONSTRUCTOR,d1=us.REJECTION_EVENT,Gu=Pa.getterFor(tl),p1=Pa.set,f1=ra&&ra.prototype,Zs=ra,Qu=f1,jm=c.TypeError,Ju=c.document,Yu=c.process,Xu=ei.f,m1=Xu,g1=!!(Ju&&Ju.createEvent&&c.dispatchEvent),Dm="unhandledrejection",$m=function(S){var x;return!(!Ne(S)||!ae(x=S.then))&&x},Um=function(S,x){var $,F,A,re=x.value,xe=x.state==1,z=xe?S.ok:S.fail,qe=S.resolve,At=S.reject,lr=S.domain;try{z?(xe||(x.rejection===2&&v1(x),x.rejection=1),z===!0?$=re:(lr&&lr.enter(),$=z(re),lr&&(lr.exit(),A=!0)),$===S.promise?At(jm("Promise-chain cycle")):(F=$m($))?de(F,$,qe,At):qe($)):At(re)}catch(fr){lr&&!A&&lr.exit(),At(fr)}},qm=function(S,x){S.notified||(S.notified=!0,Ku(function(){for(var $,F=S.reactions;$=F.get();)Um($,S);S.notified=!1,x&&!S.rejection&&h1(S)}))},Vm=function(S,x,$){var F,A;g1?((F=Ju.createEvent("Event")).promise=x,F.reason=$,F.initEvent(S,!1,!0),c.dispatchEvent(F)):F={promise:x,reason:$},!d1&&(A=c["on"+S])?A(F):S===Dm&&function(re,xe){var z=c.console;z&&z.error&&(arguments.length==1?z.error(re):z.error(re,xe))}("Unhandled promise rejection",$)},h1=function(S){de(Fm,c,function(){var x,$=S.facade,F=S.value;if(Hm(S)&&(x=ls(function(){Ua?Yu.emit("unhandledRejection",F,$):Vm(Dm,$,F)}),S.rejection=Ua||Hm(S)?2:1,x.error))throw x.value})},Hm=function(S){return S.rejection!==1&&!S.parent},v1=function(S){de(Fm,c,function(){var x=S.facade;Ua?Yu.emit("rejectionHandled",x):Vm("rejectionhandled",x,S.value)})},ds=function(S,x,$){return function(F){S(x,F,$)}},ps=function(S,x,$){S.done||(S.done=!0,$&&(S=$),S.value=x,S.state=2,qm(S,!0))},Zu=function(S,x,$){if(!S.done){S.done=!0,$&&(S=$);try{if(S.facade===x)throw jm("Promise can't be resolved itself");var F=$m(x);F?Ku(function(){var A={done:!1};try{de(F,x,ds(Zu,A,S),ds(ps,A,S))}catch(re){ps(A,re,S)}}):(S.value=x,S.state=1,qm(S,!1))}catch(A){ps({done:!1},A,S)}}};Lm&&(Qu=(Zs=function(x){Bu(this,Qu),Or(x),de(Wu,this);var $=Gu(this);try{x(ds(Zu,$),ds(ps,$))}catch(F){ps($,F)}}).prototype,(Wu=function(x){p1(this,{type:tl,done:!1,notified:!1,parent:!1,reactions:new a1,rejection:!1,state:0,value:void 0})}).prototype=vi(Qu,"then",function(x,$){var F=Gu(this),A=Xu(Ci(this,Zs));return F.parent=!0,A.ok=!ae(x)||x,A.fail=ae($)&&$,A.domain=Ua?Yu.domain:void 0,F.state==0?F.reactions.add(A):Ku(function(){Um(A,F)}),A.promise}),Am=function(){var S=new Wu,x=Gu(S);this.promise=S,this.resolve=ds(Zu,x),this.reject=ds(ps,x)},ei.f=Xu=function(S){return S===Zs||S===void 0?new Am(S):m1(S)}),Vr({global:!0,constructor:!0,wrap:!0,forced:Lm},{Promise:Zs}),Li(Zs,tl,!1,!0),vm(tl);var zm=to("iterator"),Km=!1;try{var y1=0,Wm={next:function(){return{done:!!y1++}},return:function(){Km=!0}};Wm[zm]=function(){return this},Array.from(Wm,function(){throw 2})}catch{}var Gm=function(S,x){if(!x&&!Km)return!1;var $=!1;try{var F={};F[zm]=function(){return{next:function(){return{done:$=!0}}}},S(F)}catch{}return $},Qm=us.CONSTRUCTOR||!Gm(function(S){ra.all(S).then(void 0,function(){})});Vr({target:"Promise",stat:!0,forced:Qm},{all:function(x){var $=this,F=ei.f($),A=F.resolve,re=F.reject,xe=ls(function(){var z=Or($.resolve),qe=[],At=0,lr=1;lo(x,function(fr){var Sr=At++,br=!1;lr++,de(z,$,fr).then(function(Er){br||(br=!0,qe[Sr]=Er,--lr||A(qe))},re)}),--lr||A(qe)});return xe.error&&re(xe.value),F.promise}});var b1=us.CONSTRUCTOR;ra&&ra.prototype,Vr({target:"Promise",proto:!0,forced:b1,real:!0},{catch:function(S){return this.then(void 0,S)}}),Vr({target:"Promise",stat:!0,forced:Qm},{race:function(x){var $=this,F=ei.f($),A=F.reject,re=ls(function(){var xe=Or($.resolve);lo(x,function(z){de(xe,$,z).then(F.resolve,A)})});return re.error&&A(re.value),F.promise}}),Vr({target:"Promise",stat:!0,forced:us.CONSTRUCTOR},{reject:function(x){var $=ei.f(this);return de($.reject,void 0,x),$.promise}});var ed=function(S,x){if(Vn(S),Ne(x)&&x.constructor===S)return x;var $=ei.f(S);return(0,$.resolve)(x),$.promise},T1=us.CONSTRUCTOR,S1=$e("Promise"),M1=!T1;Vr({target:"Promise",stat:!0,forced:!0},{resolve:function(x){return ed(M1&&this===S1?ra:this,x)}}),Vr({target:"Promise",stat:!0},{allSettled:function(x){var $=this,F=ei.f($),A=F.resolve,re=F.reject,xe=ls(function(){var z=Or($.resolve),qe=[],At=0,lr=1;lo(x,function(fr){var Sr=At++,br=!1;lr++,de(z,$,fr).then(function(Er){br||(br=!0,qe[Sr]={status:"fulfilled",value:Er},--lr||A(qe))},function(Er){br||(br=!0,qe[Sr]={status:"rejected",reason:Er},--lr||A(qe))})}),--lr||A(qe)});return xe.error&&re(xe.value),F.promise}});var Jm="No one promise resolved";Vr({target:"Promise",stat:!0},{any:function(x){var $=this,F=$e("AggregateError"),A=ei.f($),re=A.resolve,xe=A.reject,z=ls(function(){var qe=Or($.resolve),At=[],lr=0,fr=1,Sr=!1;lo(x,function(br){var Er=lr++,$r=!1;fr++,de(qe,$,br).then(function(jr){$r||Sr||(Sr=!0,re(jr))},function(jr){$r||Sr||($r=!0,At[Er]=jr,--fr||xe(new F(At,Jm)))})}),--fr||xe(new F(At,Jm))});return z.error&&xe(z.value),A.promise}});var C1=ra&&ra.prototype,k1=!!ra&&d(function(){C1.finally.call({then:function(){}},function(){})});Vr({target:"Promise",proto:!0,real:!0,forced:k1},{finally:function(S){var x=Ci(this,$e("Promise")),$=ae(S);return this.then($?function(F){return ed(x,S()).then(function(){return F})}:S,$?function(F){return ed(x,S()).then(function(){throw F})}:S)}});var _1=nr.Promise;Vr({target:"Promise",stat:!0,forced:!0},{try:function(S){var x=ei.f(this),$=ls(S);return($.error?x.reject:x.resolve)($.value),x.promise}});var uo=_1,w1=Ce([].reverse),Ym=[1,2];Vr({target:"Array",proto:!0,forced:String(Ym)===String(Ym.reverse())},{reverse:function(){return Ya(this)&&(this.length=this.length),w1(this)}});var x1=Uo("Array").reverse,td=Array.prototype,kl=function(S){var x=S.reverse;return S===td||er(td,S)&&x===td.reverse?x1:x},I1=$s("slice"),E1=to("species"),rd=Array,P1=Math.max;Vr({target:"Array",proto:!0,forced:!I1},{slice:function(x,$){var F,A,re,xe=ar(this),z=Ia(xe),qe=ns(x,z),At=ns($===void 0?z:$,z);if(Ya(xe)&&(F=xe.constructor,(Uc(F)&&(F===rd||Ya(F.prototype))||Ne(F)&&(F=F[E1])===null)&&(F=void 0),F===rd||F===void 0))return hi(xe,qe,At);for(A=new(F===void 0?rd:F)(P1(At-qe,0)),re=0;qe<At;qe++,re++)qe in xe&&Bi(A,re,xe[qe]);return A.length=re,A}});var A1=Uo("Array").slice,nd=Array.prototype,Mo=function(S){var x=S.slice;return S===nd||er(nd,S)&&x===nd.slice?A1:x},O1=o(function(S){var x=w0.default;function $(){S.exports=$=function(){return F},S.exports.__esModule=!0,S.exports.default=S.exports;var F={},A=Object.prototype,re=A.hasOwnProperty,xe=typeof ga=="function"?ga:{},z=xe.iterator||"@@iterator",qe=xe.asyncIterator||"@@asyncIterator",At=xe.toStringTag||"@@toStringTag";function lr(Cn,Xr,On){return Ks(Cn,Xr,{value:On,enumerable:!0,configurable:!0,writable:!0}),Cn[Xr]}try{lr({},"")}catch{lr=function(On,Un,eo){return On[Un]=eo}}function fr(Cn,Xr,On,Un){var eo=Xr&&Xr.prototype instanceof Er?Xr:Er,ro=Ja(eo.prototype),$o=new wr(Un||[]);return ro._invoke=function(go,Zo,So){var Io="suspendedStart";return function(ea,Cs){if(Io==="executing")throw new Error("Generator is already running");if(Io==="completed"){if(ea==="throw")throw Cs;return Rn()}for(So.method=ea,So.arg=Cs;;){var Eo=So.delegate;if(Eo){var ks=$n(Eo,So);if(ks){if(ks===br)continue;return ks}}if(So.method==="next")So.sent=So._sent=So.arg;else if(So.method==="throw"){if(Io==="suspendedStart")throw Io="completed",So.arg;So.dispatchException(So.arg)}else So.method==="return"&&So.abrupt("return",So.arg);Io="executing";var ja=Sr(go,Zo,So);if(ja.type==="normal"){if(Io=So.done?"completed":"suspendedYield",ja.arg===br)continue;return{value:ja.arg,done:So.done}}ja.type==="throw"&&(Io="completed",So.method="throw",So.arg=ja.arg)}}}(Cn,On,$o),ro}function Sr(Cn,Xr,On){try{return{type:"normal",arg:Cn.call(Xr,On)}}catch(Un){return{type:"throw",arg:Un}}}F.wrap=fr;var br={};function Er(){}function $r(){}function jr(){}var vn={};lr(vn,z,function(){return this});var Yr=$i&&$i($i(xn([])));Yr&&Yr!==A&&re.call(Yr,z)&&(vn=Yr);var wn=jr.prototype=Er.prototype=Ja(vn);function Zr(Cn){var Xr;In(Xr=["next","throw","return"]).call(Xr,function(On){lr(Cn,On,function(Un){return this._invoke(On,Un)})})}function Qn(Cn,Xr){function On(eo,ro,$o,go){var Zo=Sr(Cn[eo],Cn,ro);if(Zo.type!=="throw"){var So=Zo.arg,Io=So.value;return Io&&x(Io)=="object"&&re.call(Io,"__await")?Xr.resolve(Io.__await).then(function(ea){On("next",ea,$o,go)},function(ea){On("throw",ea,$o,go)}):Xr.resolve(Io).then(function(ea){So.value=ea,$o(So)},function(ea){return On("throw",ea,$o,go)})}go(Zo.arg)}var Un;this._invoke=function(eo,ro){function $o(){return new Xr(function(go,Zo){On(eo,ro,go,Zo)})}return Un=Un?Un.then($o,$o):$o()}}function $n(Cn,Xr){var On=Cn.iterator[Xr.method];if(On===void 0){if(Xr.delegate=null,Xr.method==="throw"){if(Cn.iterator.return&&(Xr.method="return",Xr.arg=void 0,$n(Cn,Xr),Xr.method==="throw"))return br;Xr.method="throw",Xr.arg=new TypeError("The iterator does not provide a 'throw' method")}return br}var Un=Sr(On,Cn.iterator,Xr.arg);if(Un.type==="throw")return Xr.method="throw",Xr.arg=Un.arg,Xr.delegate=null,br;var eo=Un.arg;return eo?eo.done?(Xr[Cn.resultName]=eo.value,Xr.next=Cn.nextLoc,Xr.method!=="return"&&(Xr.method="next",Xr.arg=void 0),Xr.delegate=null,br):eo:(Xr.method="throw",Xr.arg=new TypeError("iterator result is not an object"),Xr.delegate=null,br)}function Do(Cn){var Xr={tryLoc:Cn[0]};1 in Cn&&(Xr.catchLoc=Cn[1]),2 in Cn&&(Xr.finallyLoc=Cn[2],Xr.afterLoc=Cn[3]),this.tryEntries.push(Xr)}function Dn(Cn){var Xr=Cn.completion||{};Xr.type="normal",delete Xr.arg,Cn.completion=Xr}function wr(Cn){this.tryEntries=[{tryLoc:"root"}],In(Cn).call(Cn,Do,this),this.reset(!0)}function xn(Cn){if(Cn){var Xr=Cn[z];if(Xr)return Xr.call(Cn);if(typeof Cn.next=="function")return Cn;if(!isNaN(Cn.length)){var On=-1,Un=function eo(){for(;++On<Cn.length;)if(re.call(Cn,On))return eo.value=Cn[On],eo.done=!1,eo;return eo.value=void 0,eo.done=!0,eo};return Un.next=Un}}return{next:Rn}}function Rn(){return{value:void 0,done:!0}}return $r.prototype=jr,lr(wn,"constructor",jr),lr(jr,"constructor",$r),$r.displayName=lr(jr,At,"GeneratorFunction"),F.isGeneratorFunction=function(Cn){var Xr=typeof Cn=="function"&&Cn.constructor;return!!Xr&&(Xr===$r||(Xr.displayName||Xr.name)==="GeneratorFunction")},F.mark=function(Cn){return Ni?Ni(Cn,jr):(Cn.__proto__=jr,lr(Cn,At,"GeneratorFunction")),Cn.prototype=Ja(wn),Cn},F.awrap=function(Cn){return{__await:Cn}},Zr(Qn.prototype),lr(Qn.prototype,qe,function(){return this}),F.AsyncIterator=Qn,F.async=function(Cn,Xr,On,Un,eo){eo===void 0&&(eo=uo);var ro=new Qn(fr(Cn,Xr,On,Un),eo);return F.isGeneratorFunction(Xr)?ro:ro.next().then(function($o){return $o.done?$o.value:ro.next()})},Zr(wn),lr(wn,At,"Generator"),lr(wn,z,function(){return this}),lr(wn,"toString",function(){return"[object Generator]"}),F.keys=function(Cn){var Xr=[];for(var On in Cn)Xr.push(On);return kl(Xr).call(Xr),function Un(){for(;Xr.length;){var eo=Xr.pop();if(eo in Cn)return Un.value=eo,Un.done=!1,Un}return Un.done=!0,Un}},F.values=xn,wr.prototype={constructor:wr,reset:function(Xr){var On;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,In(On=this.tryEntries).call(On,Dn),!Xr)for(var Un in this)Un.charAt(0)==="t"&&re.call(this,Un)&&!isNaN(+Mo(Un).call(Un,1))&&(this[Un]=void 0)},stop:function(){this.done=!0;var Xr=this.tryEntries[0].completion;if(Xr.type==="throw")throw Xr.arg;return this.rval},dispatchException:function(Xr){if(this.done)throw Xr;var On=this;function Un(So,Io){return $o.type="throw",$o.arg=Xr,On.next=So,Io&&(On.method="next",On.arg=void 0),!!Io}for(var eo=this.tryEntries.length-1;eo>=0;--eo){var ro=this.tryEntries[eo],$o=ro.completion;if(ro.tryLoc==="root")return Un("end");if(ro.tryLoc<=this.prev){var go=re.call(ro,"catchLoc"),Zo=re.call(ro,"finallyLoc");if(go&&Zo){if(this.prev<ro.catchLoc)return Un(ro.catchLoc,!0);if(this.prev<ro.finallyLoc)return Un(ro.finallyLoc)}else if(go){if(this.prev<ro.catchLoc)return Un(ro.catchLoc,!0)}else{if(!Zo)throw new Error("try statement without catch or finally");if(this.prev<ro.finallyLoc)return Un(ro.finallyLoc)}}}},abrupt:function(Xr,On){for(var Un=this.tryEntries.length-1;Un>=0;--Un){var eo=this.tryEntries[Un];if(eo.tryLoc<=this.prev&&re.call(eo,"finallyLoc")&&this.prev<eo.finallyLoc){var ro=eo;break}}ro&&(Xr==="break"||Xr==="continue")&&ro.tryLoc<=On&&On<=ro.finallyLoc&&(ro=null);var $o=ro?ro.completion:{};return $o.type=Xr,$o.arg=On,ro?(this.method="next",this.next=ro.finallyLoc,br):this.complete($o)},complete:function(Xr,On){if(Xr.type==="throw")throw Xr.arg;return Xr.type==="break"||Xr.type==="continue"?this.next=Xr.arg:Xr.type==="return"?(this.rval=this.arg=Xr.arg,this.method="return",this.next="end"):Xr.type==="normal"&&On&&(this.next=On),br},finish:function(Xr){for(var On=this.tryEntries.length-1;On>=0;--On){var Un=this.tryEntries[On];if(Un.finallyLoc===Xr)return this.complete(Un.completion,Un.afterLoc),Dn(Un),br}},catch:function(Xr){for(var On=this.tryEntries.length-1;On>=0;--On){var Un=this.tryEntries[On];if(Un.tryLoc===Xr){var eo=Un.completion;if(eo.type==="throw"){var ro=eo.arg;Dn(Un)}return ro}}throw new Error("illegal catch attempt")},delegateYield:function(Xr,On,Un){return this.delegate={iterator:xn(Xr),resultName:On,nextLoc:Un},this.method==="next"&&(this.arg=void 0),br}},F}S.exports=$,S.exports.__esModule=!0,S.exports.default=S.exports}),rl=O1(),ir=rl;try{regeneratorRuntime=rl}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=rl:Function("r","regeneratorRuntime = r")(rl)}Vr({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Xm=9007199254740991,_l=Object.assign,Vo=Object.defineProperty,wl=Ce([].concat),Zm=!_l||d(function(){if(Fe&&_l({b:1},_l(Vo({},"a",{enumerable:!0,get:function(){Vo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var S={},x={},$=Symbol(),F="abcdefghijklmnopqrst";return S[$]=7,F.split("").forEach(function(A){x[A]=A}),_l({},S)[$]!=7||gi(_l({},x)).join("")!=F})?function(x,$){for(var F=jn(x),A=arguments.length,re=1,xe=Vs.f,z=Ve.f;A>re;)for(var qe,At=Dt(arguments[re++]),lr=xe?wl(gi(At),xe(At)):gi(At),fr=lr.length,Sr=0;fr>Sr;)qe=lr[Sr++],Fe&&!de(z,At,qe)||(F[qe]=At[qe]);return F}:_l;Vr({target:"Object",stat:!0,arity:2,forced:Object.assign!==Zm},{assign:Zm});var Tn=nr.Object.assign;function xl(S,x){var $={};for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&x.indexOf(F)<0&&($[F]=S[F]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function"){var A=0;for(F=Object.getOwnPropertySymbols(S);A<F.length;A++)x.indexOf(F[A])<0&&Object.prototype.propertyIsEnumerable.call(S,F[A])&&($[F[A]]=S[F[A]])}return $}function Cr(S,x,$,F){return new($||($=Promise))(function(A,re){function xe(At){try{qe(F.next(At))}catch(lr){re(lr)}}function z(At){try{qe(F.throw(At))}catch(lr){re(lr)}}function qe(At){At.done?A(At.value):function(fr){return fr instanceof $?fr:new $(function(Sr){Sr(fr)})}(At.value).then(xe,z)}qe((F=F.apply(S,x||[])).next())})}var Gh=d(function(){if(typeof ArrayBuffer=="function"){var S=new ArrayBuffer(8);Object.isExtensible(S)&&Object.defineProperty(S,"a",{value:8})}}),Wo=Object.isExtensible,eg=d(function(){Wo(1)})||Gh?function(x){return!!Ne(x)&&(!Gh||pe(x)!="ArrayBuffer")&&(!Wo||Wo(x))}:Wo,tg=!d(function(){return Object.isExtensible(Object.preventExtensions({}))}),rg=o(function(S){var x=ua.f,$=!1,F=so("meta"),A=0,re=function(z){x(z,F,{value:{objectID:"O"+A++,weakData:{}}})},xe=S.exports={enable:function(){xe.enable=function(){},$=!0;var z=qs.f,qe=Ce([].splice),At={};At[F]=1,z(At).length&&(qs.f=function(lr){for(var fr=z(lr),Sr=0,br=fr.length;Sr<br;Sr++)if(fr[Sr]===F){qe(fr,Sr,1);break}return fr},Vr({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gu.f}))},fastKey:function(z,qe){if(!Ne(z))return typeof z=="symbol"?z:(typeof z=="string"?"S":"P")+z;if(!Lr(z,F)){if(!eg(z))return"F";if(!qe)return"E";re(z)}return z[F].objectID},getWeakData:function(z,qe){if(!Lr(z,F)){if(!eg(z))return!0;if(!qe)return!1;re(z)}return z[F].weakData},onFreeze:function(z){return tg&&$&&eg(z)&&!Lr(z,F)&&re(z),z}};os[F]=!0}),R1=ua.f,N1=bi.forEach,ng=Pa.set,Ca=Pa.getterFor,Qh=function(S,x,$){var F,A=S.indexOf("Map")!==-1,re=S.indexOf("Weak")!==-1,xe=A?"set":"add",z=c[S],qe=z&&z.prototype,At={};if(Fe&&ae(z)&&(re||qe.forEach&&!d(function(){new z().entries().next()}))){var lr=(F=x(function(Sr,br){ng(Bu(Sr,lr),{type:S,collection:new z}),br!=null&&lo(br,Sr[xe],{that:Sr,AS_ENTRIES:A})})).prototype,fr=Ca(S);N1(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(Sr){var br=Sr=="add"||Sr=="set";!(Sr in qe)||re&&Sr=="clear"||Jo(lr,Sr,function(Er,$r){var jr=fr(this).collection;if(!br&&re&&!Ne(Er))return Sr=="get"&&void 0;var vn=jr[Sr](Er===0?0:Er,$r);return br?this:vn})}),re||R1(lr,"size",{configurable:!0,get:function(){return fr(this).collection.size}})}else F=$.getConstructor(x,S,A,xe),rg.enable();return Li(F,S,!1,!0),At[S]=F,Vr({global:!0,forced:!0},At),re||$.setStrong(F,S,A),F},Qd=function(S,x,$){for(var F in x)$&&$.unsafe&&S[F]?S[F]=x[F]:vi(S,F,x[F],$);return S},ki=ua.f,Pi=rg.fastKey,Sn=Pa.set,Jd=Pa.getterFor,od={getConstructor:function(S,x,$,F){var A=S(function(At,lr){Bu(At,re),Sn(At,{type:x,index:Ea(null),first:void 0,last:void 0,size:0}),Fe||(At.size=0),tr(lr)||lo(lr,At[F],{that:At,AS_ENTRIES:$})}),re=A.prototype,xe=Jd(x),z=function(At,lr,fr){var Sr,br,Er=xe(At),$r=qe(At,lr);return $r?$r.value=fr:(Er.last=$r={index:br=Pi(lr,!0),key:lr,value:fr,previous:Sr=Er.last,next:void 0,removed:!1},Er.first||(Er.first=$r),Sr&&(Sr.next=$r),Fe?Er.size++:At.size++,br!=="F"&&(Er.index[br]=$r)),At},qe=function(At,lr){var fr,Sr=xe(At),br=Pi(lr);if(br!=="F")return Sr.index[br];for(fr=Sr.first;fr;fr=fr.next)if(fr.key==lr)return fr};return Qd(re,{clear:function(){for(var lr=xe(this),fr=lr.index,Sr=lr.first;Sr;)Sr.removed=!0,Sr.previous&&(Sr.previous=Sr.previous.next=void 0),delete fr[Sr.index],Sr=Sr.next;lr.first=lr.last=void 0,Fe?lr.size=0:this.size=0},delete:function(At){var lr=this,fr=xe(lr),Sr=qe(lr,At);if(Sr){var br=Sr.next,Er=Sr.previous;delete fr.index[Sr.index],Sr.removed=!0,Er&&(Er.next=br),br&&(br.previous=Er),fr.first==Sr&&(fr.first=br),fr.last==Sr&&(fr.last=Er),Fe?fr.size--:lr.size--}return!!Sr},forEach:function(lr){for(var fr,Sr=xe(this),br=jo(lr,arguments.length>1?arguments[1]:void 0);fr=fr?fr.next:Sr.first;)for(br(fr.value,fr.key,this);fr&&fr.removed;)fr=fr.previous},has:function(lr){return!!qe(this,lr)}}),Qd(re,$?{get:function(lr){var fr=qe(this,lr);return fr&&fr.value},set:function(lr,fr){return z(this,lr===0?0:lr,fr)}}:{add:function(lr){return z(this,lr=lr===0?0:lr,lr)}}),Fe&&ki(re,"size",{get:function(){return xe(this).size}}),A},setStrong:function(S,x,$){var F=x+" Iterator",A=Jd(x),re=Jd(F);Iu(S,x,function(xe,z){Sn(this,{type:F,target:xe,state:A(xe),kind:z,last:void 0})},function(){for(var xe=re(this),z=xe.kind,qe=xe.last;qe&&qe.removed;)qe=qe.previous;return xe.target&&(xe.last=qe=qe?qe.next:xe.state.first)?z=="keys"?{value:qe.key,done:!1}:z=="values"?{value:qe.value,done:!1}:{value:[qe.key,qe.value],done:!1}:(xe.target=void 0,{value:void 0,done:!0})},$?"entries":"values",!$,!0),vm(x)}};Qh("Map",function(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}},od);var og=nr.Map,Jh=[].push,ag=function(x){var $,F,A,re,xe=arguments.length,z=xe>1?arguments[1]:void 0;return Zc(this),($=z!==void 0)&&Or(z),tr(x)?new this:(F=[],$?(A=0,re=jo(z,xe>2?arguments[2]:void 0),lo(x,function(qe){de(Jh,F,re(qe,A++))})):lo(x,Jh,{that:F}),new this(F))};Vr({target:"Map",stat:!0,forced:!0},{from:ag});var Yh=function(){return new this(hi(arguments))};Vr({target:"Map",stat:!0,forced:!0},{of:Yh});var Xh=function(){for(var x,$=Vn(this),F=Or($.delete),A=!0,re=0,xe=arguments.length;re<xe;re++)x=de(F,$,arguments[re]),A=A&&x;return!!A};Vr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:Xh}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(x,$){var F,A,re=Vn(this),xe=Or(re.get),z=Or(re.has),qe=Or(re.set);return de(z,re,x)?(F=de(xe,re,x),"update"in $&&(F=$.update(F,x,re),de(qe,re,x,F)),F):(A=$.insert(x,re),de(qe,re,x,A),A)}});var _s=Ws;Vr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0);return!lo(F,function(re,xe,z){if(!A(xe,re,$))return z()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0),re=new(Ci($,$e("Map"))),xe=Or(re.set);return lo(F,function(z,qe){A(qe,z,$)&&de(xe,re,z,qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0);return lo(F,function(re,xe,z){if(A(xe,re,$))return z(xe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0);return lo(F,function(re,xe,z){if(A(xe,re,$))return z(re)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var B1=Ce([].push);Vr({target:"Map",stat:!0,forced:!0},{groupBy:function(x,$){Or($);var F=Ws(x),A=new this,re=Or(A.has),xe=Or(A.get),z=Or(A.set);return lo(F,function(qe){var At=$(qe);de(re,A,At)?B1(de(xe,A,At),qe):de(z,A,At,[qe])},{IS_ITERATOR:!0}),A}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(x){return lo(_s(Vn(this)),function($,F,A){if((re=F)===(xe=x)||re!=re&&xe!=xe)return A();var re,xe},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",stat:!0,forced:!0},{keyBy:function(x,$){var F=new this;Or($);var A=Or(F.set);return lo(x,function(re){de(A,F,$(re),re)}),F}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(x){return lo(_s(Vn(this)),function($,F,A){if(F===x)return A($)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0),re=new(Ci($,$e("Map"))),xe=Or(re.set);return lo(F,function(z,qe){de(xe,re,A(qe,z,$),qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0),re=new(Ci($,$e("Map"))),xe=Or(re.set);return lo(F,function(z,qe){de(xe,re,z,A(qe,z,$))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(x){for(var $=Vn(this),F=Or($.set),A=arguments.length,re=0;re<A;)lo(arguments[re++],F,{that:$,AS_ENTRIES:!0});return $}});var Zh=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(x){var $=Vn(this),F=_s($),A=arguments.length<2,re=A?void 0:arguments[1];if(Or(x),lo(F,function(xe,z){A?(A=!1,re=z):re=x(re,z,xe,$)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),A)throw Zh("Reduce of empty map with no initial value");return re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(x){var $=Vn(this),F=_s($),A=jo(x,arguments.length>1?arguments[1]:void 0);return lo(F,function(re,xe,z){if(A(xe,re,$))return z()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var F1=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(x,$){var F=Vn(this),A=Or(F.get),re=Or(F.has),xe=Or(F.set),z=arguments.length;Or($);var qe=de(re,F,x);if(!qe&&z<3)throw F1("Updating absent value");var At=qe?de(A,F,x):Or(z>2?arguments[2]:void 0)(x,F);return de(xe,F,x,$(At,x,F)),F}});var ev=TypeError,ig=function(x,$){var F,A=Vn(this),re=Or(A.get),xe=Or(A.has),z=Or(A.set),qe=arguments.length>2?arguments[2]:void 0;if(!ae($)&&!ae(qe))throw ev("At least one callback required");return de(xe,A,x)?(F=de(re,A,x),ae($)&&(F=$(F),de(z,A,x,F))):ae(qe)&&(F=qe(),de(z,A,x,F)),F};Vr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:ig}),Vr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:ig});var nl=og,tv=Date,L1=Ce(tv.prototype.getTime);Vr({target:"Date",stat:!0},{now:function(){return L1(new tv)}});var ti=nr.Date.now,ws=Uo("Array").concat,sg=Array.prototype,Vi=function(S){var x=S.concat;return S===sg||er(sg,S)&&x===sg.concat?ws:x},j1=/MSIE .\./.test(or),D1=c.Function,cg=function(S){return j1?function(x,$){var F=ym(arguments.length,1)>2,A=ae(x)?x:D1(x),re=F?hi(arguments,2):void 0;return S(F?function(){T(A,this,re)}:A,$)}:S},ec={setTimeout:cg(c.setTimeout),setInterval:cg(c.setInterval)},lg=ec.setInterval;Vr({global:!0,bind:!0,forced:c.setInterval!==lg},{setInterval:lg});var rv=ec.setTimeout;Vr({global:!0,bind:!0,forced:c.setTimeout!==rv},{setTimeout:rv});var ia=nr.setTimeout;nr.JSON||(nr.JSON={stringify:JSON.stringify});var $1=function(x,$,F){return T(nr.JSON.stringify,null,arguments)},mo=$1,nv=bi.map,ov=$s("map");Vr({target:"Array",proto:!0,forced:!ov},{map:function(x){return nv(this,x,arguments.length>1?arguments[1]:void 0)}});var av=Uo("Array").map,Yd=Array.prototype,ho=function(S){var x=S.map;return S===Yd||er(Yd,S)&&x===Yd.map?av:x},ug=o(function(S){var x=Object.prototype.hasOwnProperty,$="~";function F(){}function A(qe,At,lr){this.fn=qe,this.context=At,this.once=lr||!1}function re(qe,At,lr,fr,Sr){if(typeof lr!="function")throw new TypeError("The listener must be a function");var br=new A(lr,fr||qe,Sr),Er=$?$+At:At;return qe._events[Er]?qe._events[Er].fn?qe._events[Er]=[qe._events[Er],br]:qe._events[Er].push(br):(qe._events[Er]=br,qe._eventsCount++),qe}function xe(qe,At){--qe._eventsCount==0?qe._events=new F:delete qe._events[At]}function z(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),new F().__proto__||($=!1)),z.prototype.eventNames=function(){var At,lr,fr=[];if(this._eventsCount===0)return fr;for(lr in At=this._events)x.call(At,lr)&&fr.push($?lr.slice(1):lr);return Object.getOwnPropertySymbols?fr.concat(Object.getOwnPropertySymbols(At)):fr},z.prototype.listeners=function(At){var lr=$?$+At:At,fr=this._events[lr];if(!fr)return[];if(fr.fn)return[fr.fn];for(var Sr=0,br=fr.length,Er=new Array(br);Sr<br;Sr++)Er[Sr]=fr[Sr].fn;return Er},z.prototype.listenerCount=function(At){var lr=$?$+At:At,fr=this._events[lr];return fr?fr.fn?1:fr.length:0},z.prototype.emit=function(At,lr,fr,Sr,br,Er){var $r=$?$+At:At;if(!this._events[$r])return!1;var jr,vn,Yr=this._events[$r],wn=arguments.length;if(Yr.fn){switch(Yr.once&&this.removeListener(At,Yr.fn,void 0,!0),wn){case 1:return Yr.fn.call(Yr.context),!0;case 2:return Yr.fn.call(Yr.context,lr),!0;case 3:return Yr.fn.call(Yr.context,lr,fr),!0;case 4:return Yr.fn.call(Yr.context,lr,fr,Sr),!0;case 5:return Yr.fn.call(Yr.context,lr,fr,Sr,br),!0;case 6:return Yr.fn.call(Yr.context,lr,fr,Sr,br,Er),!0}for(vn=1,jr=new Array(wn-1);vn<wn;vn++)jr[vn-1]=arguments[vn];Yr.fn.apply(Yr.context,jr)}else{var Zr,Qn=Yr.length;for(vn=0;vn<Qn;vn++)switch(Yr[vn].once&&this.removeListener(At,Yr[vn].fn,void 0,!0),wn){case 1:Yr[vn].fn.call(Yr[vn].context);break;case 2:Yr[vn].fn.call(Yr[vn].context,lr);break;case 3:Yr[vn].fn.call(Yr[vn].context,lr,fr);break;case 4:Yr[vn].fn.call(Yr[vn].context,lr,fr,Sr);break;default:if(!jr)for(Zr=1,jr=new Array(wn-1);Zr<wn;Zr++)jr[Zr-1]=arguments[Zr];Yr[vn].fn.apply(Yr[vn].context,jr)}}return!0},z.prototype.on=function(At,lr,fr){return re(this,At,lr,fr,!1)},z.prototype.once=function(At,lr,fr){return re(this,At,lr,fr,!0)},z.prototype.removeListener=function(At,lr,fr,Sr){var br=$?$+At:At;if(!this._events[br])return this;if(!lr)return xe(this,br),this;var Er=this._events[br];if(Er.fn)Er.fn!==lr||Sr&&!Er.once||fr&&Er.context!==fr||xe(this,br);else{for(var $r=0,jr=[],vn=Er.length;$r<vn;$r++)(Er[$r].fn!==lr||Sr&&!Er[$r].once||fr&&Er[$r].context!==fr)&&jr.push(Er[$r]);jr.length?this._events[br]=jr.length===1?jr[0]:jr:xe(this,br)}return this},z.prototype.removeAllListeners=function(At){var lr;return At?(lr=$?$+At:At,this._events[lr]&&xe(this,lr)):(this._events=new F,this._eventsCount=0),this},z.prototype.off=z.prototype.removeListener,z.prototype.addListener=z.prototype.on,z.prefixed=$,z.EventEmitter=z,S.exports=z}),U1=Il;function Il(S){S=S||{},this.ms=S.min||100,this.max=S.max||1e4,this.factor=S.factor||2,this.jitter=S.jitter>0&&S.jitter<=1?S.jitter:0,this.attempts=0}Il.prototype.duration=function(){var S=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var x=Math.random(),$=Math.floor(x*this.jitter*S);S=1&Math.floor(10*x)?S+$:S-$}return 0|Math.min(S,this.max)},Il.prototype.reset=function(){this.attempts=0},Il.prototype.setMin=function(S){this.ms=S},Il.prototype.setMax=function(S){this.max=S},Il.prototype.setJitter=function(S){this.jitter=S};var Xd=typeof e=="object"&&e&&e.Object===Object&&e,To=typeof self=="object"&&self&&self.Object===Object&&self,Hi=Xd||To||Function("return this")(),xs=Hi.Symbol,ol=Object.prototype,iv=ol.hasOwnProperty,q1=ol.toString,Ai=xs?xs.toStringTag:void 0,Qi=function(x){var $=iv.call(x,Ai),F=x[Ai];try{x[Ai]=void 0;var A=!0}catch{}var re=q1.call(x);return A&&($?x[Ai]=F:delete x[Ai]),re},sv=Object.prototype.toString,V1=function(x){return sv.call(x)},cv=xs?xs.toStringTag:void 0,Ji=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":cv&&cv in Object(x)?Qi(x):V1(x)},fs=function(x){var $=typeof x;return x!=null&&($=="object"||$=="function")},Zd=function(x){if(!fs(x))return!1;var $=Ji(x);return $=="[object Function]"||$=="[object GeneratorFunction]"||$=="[object AsyncFunction]"||$=="[object Proxy]"},lv={deviceId:"",timeout:8e3},uv={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},yc=nu.includes,ms=d(function(){return!Array(1).includes()});Vr({target:"Array",proto:!0,forced:ms},{includes:function(x){return yc(this,x,arguments.length>1?arguments[1]:void 0)}});var ep=Uo("Array").includes,dv=to("match"),H1=TypeError,pv=function(S){if(function(x){var $;return Ne(x)&&(($=x[dv])!==void 0?!!$:pe(x)=="RegExp")}(S))throw H1("The method doesn't accept regular expressions");return S},z1=to("match"),K1=Ce("".indexOf);Vr({target:"String",proto:!0,forced:!function(S){var x=/./;try{"/./"[S](x)}catch{try{return x[z1]=!1,"/./"[S](x)}catch{}}return!1}("includes")},{includes:function(x){return!!~K1(Oa(pr(this)),Oa(pv(x)),arguments.length>1?arguments[1]:void 0)}});var W1=Uo("String").includes,dg=Array.prototype,pg=String.prototype,gs=function(S){var x=S.includes;return S===dg||er(dg,S)&&x===dg.includes?ep:typeof S=="string"||S===pg||er(pg,S)&&x===pg.includes?W1:x},G1=bi.findIndex,Q1="findIndex",fv=!0;Q1 in[]&&Array(1).findIndex(function(){fv=!1}),Vr({target:"Array",proto:!0,forced:fv},{findIndex:function(x){return G1(this,x,arguments.length>1?arguments[1]:void 0)}});var fg=Uo("Array").findIndex,ad=Array.prototype,bc=function(S){var x=S.findIndex;return S===ad||er(ad,S)&&x===ad.findIndex?fg:x},J1=o(function(S){function x($){var F;return S.exports=x=Ni?Oo(F=$i).call(F):function(re){return re.__proto__||$i(re)},S.exports.__esModule=!0,S.exports.default=S.exports,x($)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),Y1=nu.indexOf,tp=Ce([].indexOf),mv=!!tp&&1/tp([1],1,-0)<0,mg=Ui("indexOf");Vr({target:"Array",proto:!0,forced:mv||!mg},{indexOf:function(x){var $=arguments.length>1?arguments[1]:void 0;return mv?tp(this,x,$)||0:Y1(this,x,$)}});var X1=Uo("Array").indexOf,gg=Array.prototype,pa=function(S){var x=S.indexOf;return S===gg||er(gg,S)&&x===gg.indexOf?X1:x},hg=o(function(S){S.exports=function($){var F;return pa(F=Function.toString.call($)).call(F,"[native code]")!==-1},S.exports.__esModule=!0,S.exports.default=S.exports}),vg=$e("Reflect","construct"),Z1=Object.prototype,gv=[].push,yg=d(function(){function S(){}return!(vg(function(){},[],S)instanceof S)}),bg=!d(function(){vg(function(){})}),Is=yg||bg;Vr({target:"Reflect",stat:!0,forced:Is,sham:Is},{construct:function(x,$){Zc(x),Vn($);var F=arguments.length<3?x:Zc(arguments[2]);if(bg&&!yg)return vg(x,$,F);if(x==F){switch($.length){case 0:return new x;case 1:return new x($[0]);case 2:return new x($[0],$[1]);case 3:return new x($[0],$[1],$[2]);case 4:return new x($[0],$[1],$[2],$[3])}var A=[null];return T(gv,A,$),new(T(su,x,A))}var re=F.prototype,xe=Ea(Ne(re)?re:Z1),z=T(x,xe,$);return Ne(z)?z:xe}});var tc=nr.Reflect.construct,eT=o(function(S){S.exports=function(){if(typeof Reflect>"u"||!tc||tc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(tc(Boolean,[],function(){})),!0}catch{return!1}},S.exports.__esModule=!0,S.exports.default=S.exports}),tT=o(function(S){function x($,F,A){var re;return eT()?(S.exports=x=Oo(re=tc).call(re),S.exports.__esModule=!0,S.exports.default=S.exports):(S.exports=x=function(z,qe,At){var lr=[null];lr.push.apply(lr,qe);var fr=new(Oo(Function).apply(z,lr));return At&&lu(fr,At.prototype),fr},S.exports.__esModule=!0,S.exports.default=S.exports),x.apply(null,arguments)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),rc=o(function(S){function x($){var F=typeof nl=="function"?new nl:void 0;return S.exports=x=function(re){if(re===null||!hg(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has(re))return F.get(re);F.set(re,xe)}function xe(){return tT(re,arguments,J1(this).constructor)}return xe.prototype=Ja(re.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),lu(xe,re)},S.exports.__esModule=!0,S.exports.default=S.exports,x($)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),yo=function(S){function x($,F,A){var re;return F===void 0&&(F={}),A===void 0&&(A=400),(re=S.call(this,$)||this).data=F,re.code=A,re.name="customError",re}return No(x,S),x}(n(rc)(Error)),al=function(S){function x($,F,A){var re;return F===void 0&&(F={}),(re=S.call(this,$,F,414)||this).code=414,re.name="validateError",re.rules=A,re}return No(x,S),x}(yo),rp={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Tg=function(S){function x($,F,A,re,xe){var z;return A===void 0&&(A=""),re===void 0&&(re=new Date().getTime()),xe===void 0&&(xe={}),A=A||rp[$],(z=S.call(this,A,xe,$)||this).name="cmdError",z.cmd=F,z.timetag=re,z}return No(x,S),x}(yo),El=function(S){function x($,F,A){var re;return(re=S.call(this,$,{},412)||this).code=412,re.name="formatError",re.key=F,re.reason=A,re}return No(x,S),x}(yo),Tc=function(S){function x($,F,A,re,xe){var z;return(z=S.call(this,$,{file:xe},400)||this).name="uploadError",z.rawError=F,z.curProvider=A||1,z.mixStorePolicy=re,z}return No(x,S),x}(yo),il=["error","warn","log","debug"],id=function(){},np=["off","error","warn","log","debug"],hv=function(){function S($,F){this.name=F,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=id,this.log=id,this.warn=id,this.error=id,this.name=F,S.instancesName.push(F),gs(np).call(np,$)||($="off"),this.setLogFunc($)}var x=S.prototype;return x.setLogFunc=function(F){var A=this,re=bc(il).call(il,function(xe){return xe===F});In(il).call(il,function(xe,z){z<=re&&(A[xe]=function(){var qe=Mo(Array.prototype).call(arguments),At=this.formatArgs(qe,xe);this.strategies[xe](At)})})},x.formatArgs=function(F,A){var re=new Date,xe=re.getMonth()+1+"-"+re.getDate()+" "+re.getHours()+":"+re.getMinutes()+":"+re.getSeconds()+":"+re.getMilliseconds();return"[NIM "+A+" "+this.name+" "+xe+"] "+ho(F).call(F,function(z){return z instanceof yo?z.name+", "+z.code+", "+z.message:z instanceof Error?z&&z.message?z.message:z:typeof z=="object"?mo(z):z}).join(" ")},S}();hv.instancesName=[],Vr({global:!0},{globalThis:c});var rT=d(function(){gi(1)});Vr({target:"Object",stat:!0,forced:rT},{keys:function(x){return gi(jn(x))}});var na=nr.Object.keys,Sg=bi.filter,li=$s("filter");Vr({target:"Array",proto:!0,forced:!li},{filter:function(x){return Sg(this,x,arguments.length>1?arguments[1]:void 0)}});var nT=Uo("Array").filter,Ho=Array.prototype,Yi=function(S){var x=S.filter;return S===Ho||er(Ho,S)&&x===Ho.filter?nT:x},vv=o(function(S,x){S.exports=function(){function $(At,lr){if(!(At instanceof lr))throw new TypeError("Cannot call a class as a function")}function F(At,lr){for(var fr=0;fr<lr.length;fr++){var Sr=lr[fr];Sr.enumerable=Sr.enumerable||!1,Sr.configurable=!0,"value"in Sr&&(Sr.writable=!0),Ks(At,Sr.key,Sr)}}function A(At,lr,fr){return lr&&F(At.prototype,lr),fr&&F(At,fr),Ks(At,"prototype",{writable:!1}),At}var re={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},xe="https://statistic.live.126.net/dispatcher/req",z=function(){},qe=function(){function At(lr){$(this,At),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=re,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=ti(),this.timer=null,this.setConfig(lr),this.reportConfig.autoStart&&this.initUploadConfig()}return A(At,[{key:"setConfig",value:function(fr){this.reportConfig=Tn({},this.reportConfig,fr)}},{key:"reportImmediately",value:function(fr,Sr){var br=this;this.reportConfig.request(fr,Tn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Sr)).catch(function(Er){var $r,jr;(jr=($r=br.reportConfig)===null||$r===void 0?void 0:$r.logger)===null||jr===void 0||jr.warn("Reporter immediately upload failed",Er)})}},{key:"report",value:function(fr,Sr){var br=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(fr){var Er=ti();br?this.lowPriorityMsgList.push({module:fr,msg:Sr,createTime:Er}):this.msgList.push({module:fr,msg:Sr,createTime:Er}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(fr,Sr){if(fr&&!this.traceMsgCache[fr]){var br=Tn(Tn({start_time:ti()},Sr),{extension:[]});this.traceMsgCache[fr]=br}}},{key:"reportTraceUpdate",value:function(fr){}},{key:"reportTraceUpdateV2",value:function(fr,Sr){if(this.traceMsgCache[fr]){var br=this.traceMsgCache[fr].extension.length,Er=new Date().getTime();Sr.duration=br===0?Er-this.traceMsgCache[fr].start_time:Er-this.traceMsgCache[fr].extension[br-1].end_time,this.traceMsgCache[fr].extension.push(Tn({end_time:Er},Sr))}}},{key:"reportTraceEnd",value:function(fr){var Sr,br=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[fr]&&(fr!=="nos"||br===!1?(typeof br=="boolean"?this.traceMsgCache[fr].succeed=!!br:this.traceMsgCache[fr].state=br,this.traceMsgCache[fr].duration=ti()-this.traceMsgCache[fr].start_time,In(Sr=this.traceMsgCache[fr].extension).call(Sr,function(Er){delete Er.end_time}),this.report(fr,this.traceMsgCache[fr]),this.traceMsgCache[fr]=null):this.traceMsgCache[fr]=null)}},{key:"reportTraceCancel",value:function(fr){this.traceMsgCache[fr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var fr,Sr=this;In(fr=na(this.traceMsgCache)).call(fr,function(br){Sr.reportTraceEnd(br,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=z,this.report=z,this.reportTraceStart=z,this.reportTraceUpdate=z,this.reportTraceEnd=z,this.pause=z,this.restore=z,this.destroy=z,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var fr,Sr,br=this;if(!this.loading){this.loading=!0;var Er=this.reportConfig.common||{};try{this.reportConfig.request(xe,{method:"GET",dataType:"json",params:{deviceId:Er.dev_id,sdkVer:Er.sdk_ver,platform:Er.platform,appkey:Er.app_key},timeout:this.reportConfig.timeout}).then(function($r){var jr,vn;if(!br.isDestroyed){if($r.status===200&&$r.data&&$r.data.code===200){var Yr=$r.data.data||{};br.reportConfig.maxSize=Yr.maxSize>1e3?1e3:Yr.maxSize,br.reportConfig.maxInterval=Yr.maxInterval>1e4?1e4:Yr.maxInterval,br.reportConfig.maxInterval=Yr.maxInterval<10?10:Yr.maxInterval,br.reportConfig.minInterval=Yr.minInterval<2?2:Yr.minInterval,br.reportConfig.maxDelay=Yr.maxDelay||300,br.reportConfig.maxInterval=1e3*br.reportConfig.maxInterval,br.reportConfig.minInterval=1e3*br.reportConfig.minInterval,br.reportConfig.maxDelay=1e3*br.reportConfig.maxDelay,br.enable=!0,br.initConfigLoaded=!0,br.loading=!1,br.reportHeartBeat()}(vn=(jr=br.reportConfig)===null||jr===void 0?void 0:jr.logger)===null||vn===void 0||vn.log("Get reporter upload config success")}}).catch(function($r){var jr,vn;br.loading=!1,(vn=(jr=br.reportConfig)===null||jr===void 0?void 0:jr.logger)===null||vn===void 0||vn.error("Get reporter upload config failed",$r)})}catch($r){this.loading=!1,(Sr=(fr=this.reportConfig)===null||fr===void 0?void 0:fr.logger)===null||Sr===void 0||Sr.error("Exec reporter request failed",$r)}}}},{key:"reportHeartBeat",value:function(){var fr=this;this.isDestroyed||(this.timer=ia(function(){fr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var fr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;ti()-this.lastReportTime>=fr&&this.upload()}}},{key:"getUploadMsg",value:function(){var fr,Sr,br,Er,$r,jr=this,vn={},Yr=ti();this.msgList=Yi(fr=this.msgList).call(fr,function(xn){return Yr-xn.createTime<jr.reportConfig.maxDelay}),this.lowPriorityMsgList=Yi(Sr=this.lowPriorityMsgList).call(Sr,function(xn){return Yr-xn.createTime<jr.reportConfig.maxDelay}),this.cacheMsgList=Yi(br=this.cacheMsgList).call(br,function(xn){return Yr-xn.createTime<jr.reportConfig.maxDelay});var wn=Mo(Er=this.msgList).call(Er,0,this.reportConfig.maxSize);if(this.msgList=Mo($r=this.msgList).call($r,wn.length),wn.length<this.reportConfig.maxSize){var Zr,Qn,$n=this.reportConfig.maxSize-wn.length;wn=Vi(wn).call(wn,Mo(Zr=this.lowPriorityMsgList).call(Zr,0,$n)),this.lowPriorityMsgList=Mo(Qn=this.lowPriorityMsgList).call(Qn,$n)}if(wn.length<this.reportConfig.maxSize){var Do,Dn,wr=this.reportConfig.maxSize-wn.length;wn=Vi(wn).call(wn,Mo(Do=this.cacheMsgList).call(Do,0,wr)),this.cacheMsgList=Mo(Dn=this.cacheMsgList).call(Dn,wr)}return In(wn).call(wn,function(xn){vn[xn.module]?vn[xn.module].push(xn.msg):vn[xn.module]=[xn.msg]}),{uploadMsgArr:wn,uploadMsg:vn}}},{key:"upload",value:function(){var fr,Sr,br=this;if(this.enable&&!(this.lastReportTime&&ti()-this.lastReportTime<this.reportConfig.minInterval)){var Er=this.getUploadMsg(),$r=Er.uploadMsgArr,jr=Er.uploadMsg;if($r.length){this.lastReportTime=ti();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:jr},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(vn){var Yr,wn,Zr,Qn;br.cacheMsgList=Mo(Yr=Vi(wn=br.cacheMsgList).call(wn,$r)).call(Yr,0,br.reportConfig.cacheMaxSize),(Qn=(Zr=br.reportConfig)===null||Zr===void 0?void 0:Zr.logger)===null||Qn===void 0||Qn.warn("Reporter upload failed",vn)})}catch(vn){(Sr=(fr=this.reportConfig)===null||fr===void 0?void 0:fr.logger)===null||Sr===void 0||Sr.warn("Exec reporter request failed",vn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),At}();return qe}()}),ta={setLogger:function(x){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function S($,F){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var x=S.prototype;return x.close=function(F,A){throw new Error("Method not implemented.")},x.send=function(F){throw new Error("Method not implemented.")},x.onclose=function(F){throw new Error("Method not implemented.")},x.onerror=function(F){throw new Error("Method not implemented.")},x.onmessage=function(F){throw new Error("Method not implemented.")},x.onopen=function(F){throw new Error("Method not implemented.")},S}(),localStorage:{},request:function(x,$){throw new Error("Function not implemented.")},uploadFile:function(x){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},oT=TypeError,yv=function(S){return function(x,$,F,A){Or($);var re=jn(x),xe=Dt(re),z=Ia(re),qe=S?z-1:0,At=S?-1:1;if(F<2)for(;;){if(qe in xe){A=xe[qe],qe+=At;break}if(qe+=At,S?qe<0:z<=qe)throw oT("Reduce of empty array with no initial value")}for(;S?qe>=0:z>qe;qe+=At)qe in xe&&(A=$(A,xe[qe],qe,re));return A}},Mg={left:yv(!1),right:yv(!0)}.left,op=Ui("reduce");Vr({target:"Array",proto:!0,forced:!op||!Ua&&mr>79&&mr<83},{reduce:function(x){var $=arguments.length;return Mg(this,x,$,$>1?arguments[1]:void 0)}});var bv=Uo("Array").reduce,Pl=Array.prototype,Sc=function(S){var x=S.reduce;return S===Pl||er(Pl,S)&&x===Pl.reduce?bv:x},Tv=function(x){return x===void 0},sd={},Es={};function qa(S,x){var $,F,A;try{A=JSON.parse(S)}catch(br){throw x.error("Parse command error: ",S),br}var re=A.sid+"_"+A.cid,xe=A.r;if(gs($=["4_1","4_2","4_10","4_11"]).call($,re)){var z=A.r[1].headerPacket;re=z.sid+"_"+z.cid,xe=A.r[1].body}var qe,At=Es[re],lr=sd[At],fr=function(Er,$r){var jr=rp[Er];return jr===null?null:new Tg(Er,$r,jr,new Date().getTime())}(A.code,At),Sr={cmd:At,raw:A,error:fr,service:lr==null?void 0:lr.service,content:{}};if(Sr.error){if(Sr.error.cmd=At,Sr.error.callFunc="parseCmd",!(!((F=lr==null?void 0:lr.ignoreErrCodes)===null||F===void 0)&&gs(F).call(F,A.code)))return Sr;x.warn("parseCmd:: ignore error ",Sr.error),Sr.error.ignore=!0}return!At||!lr?(Sr.notFound=!0,Sr):(lr.response&&In(qe=lr.response).call(qe,function(br,Er){var $r=xe[Er],jr=br.type,vn=br.name,Yr=br.reflectMapper;if(!Tv($r))switch(jr){case"Property":Sr.content[vn]=Yr?Ra($r,Yr):$r;break;case"PropertyArray":Sr.content[vn]=ho($r).call($r,function(wn){return Yr?Ra(wn,Yr):wn});break;case"long":case"Long":case"byte":case"Byte":case"Number":Sr.content[vn]=+$r;break;default:Sr.content[vn]=$r}}),Sr)}function ri(S,x){var $={};for(var F in S)x[F]!==void 0&&($[x[F]]=S[F]);return $}function Ra(S,x){var $={};for(var F in S)x[F]!==void 0&&($[x[F]]=S[F]);return $}function Ps(S){sd=Tn(sd,S.cmdConfig),Es=Tn(Es,S.cmdMap)}function Mc(S){var x;return Sc(x=na(S)).call(x,function($,F){var A,re=S[F];return $[F]=Sc(A=na(re)).call(A,function(xe,z){return xe[re[z]]=z,xe},{}),$},{})}var Cg=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],kg=["transport not supported","client not handshaken","unauthorized"],ap=["reconnect"],aT=function(S){function x(F,A,re){var xe;return(xe=S.call(this)||this).url=A,xe.logger=re,xe.websocket=null,xe.core=F,xe.url=A,xe.status="disconnected",xe.logger=re,xe.connect(),xe}No(x,S);var $=x.prototype;return $.connect=function(){var A=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+ti(),{method:"GET",dataType:"text",timeout:8e3}).then(function(re){var xe=re.data.split(":"),z=xe[0],qe=xe[1];return A.sessionId=z,A.closeTimeout=1e3*qe,A._createWebsocket("wss://"+A.url+"/socket.io/1/websocket/"+z)}).catch(function(re){A.logger.error("imsocket::handshake fail. ",re&&re.message),A.status="disconnected",A.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},$.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(A){this.logger.warn("attempt to close websocket error",A)}this.clean()}},$.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},$.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},$._createWebsocket=function(A){var re,xe=this;this.websocket=new ta.WebSocket(A),this.websocket.onmessage=Oo(re=this.onMessage).call(re,this),this.websocket.onclose=function(){xe.logger.log("imsocket:: receive websocket onclose event, current status",xe.status),xe.clean()},this.websocket.onerror=function(z){xe.logger.error("imsocket:: onerror",z)}},$.onMessage=function(A){var re;this.resetCloseTimer();var xe=this.decodePacket(A.data);if(xe)switch(xe.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",xe.data);break;case"event":xe.name&&this.emit(xe.name,xe.args);break;case"error":xe.reason==="unauthorized"?this.emit("connect_failed",xe.reason):this.emit("error",xe.reason);break;case"heartbeat":(re=this.websocket)===null||re===void 0||re.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",xe.type)}},$.encodePacket=function(A){var re,xe,z=A.type,qe=A.id,At=qe===void 0?"":qe,lr=A.endpoint,fr=lr===void 0?"":lr,Sr=A.ack,br=null;if(!z)return"";switch(z){case"error":re=A.reason?pa(kg).call(kg,A.reason):"",xe=A.advice?pa(ap).call(ap,A.advice):"",re===""&&xe===""||(br=re+(xe!==""?"+"+xe:""));break;case"message":A.data!==""&&(br=A.data);break;case"event":re={name:A.name},re=A.args&&A.args.length?{name:A.name,args:A.args}:{name:A.name},br=mo(re);break;case"json":br=mo(A.data);break;case"connect":A.qs&&(br=A.qs);break;case"ack":br=A.ackId+(A.args&&A.args.length?"+"+mo(A.args):"")}var Er=[pa(Cg).call(Cg,z),At+(Sr==="data"?"+":""),fr];return br!=null&&Er.push(br),Er.join(":")},$.decodePacket=function(A){if(A)if(A.charAt(0)!="�"){var re=A.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(re){var xe,z=re[1],qe=re[2],At=re[3],lr=re[4],fr=re[5],Sr={type:Cg[+z],endpoint:lr};switch(qe&&(Sr.id=qe,Sr.ack=!At||"data"),Sr.type){case"error":xe=fr.split("+"),Sr.reason=kg[+xe[0]]||"";break;case"message":Sr.data=fr||"";break;case"connect":Sr.qs=fr||"";break;case"event":try{var br=JSON.parse(fr);Sr.name=br.name,Sr.args=br.args}catch(Er){this.logger.error("imsocket::parseData::type::event error",Er)}Sr.args=Sr.args||[];break;case"json":try{Sr.data=JSON.parse(fr)}catch(Er){this.logger.error("imsocket::parseData::type::json error",Er)}break;case"ack":if((xe=fr.match(/^([0-9]+)(\+)?(.*)/))&&(Sr.ackId=xe[1],Sr.args=[],xe[3]))try{Sr.args=xe[3]?JSON.parse(xe[3]):[]}catch(Er){this.logger.error("imsocket::parseData::type::ack error",Er)}}return Sr}}else this.logger.error("imsocket::unrecognize dataStr",Mo(A).call(A,0,20))},$.send=function(A){var re,xe={data:A,type:"message",endpoint:""};(re=this.websocket)===null||re===void 0||re.send(this.encodePacket(xe))},$.resetCloseTimer=function(){var A=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=ia(function(){A.close()},this.closeTimeout))},x}(ug),ip=Uo("Array").values,hs=Array.prototype,iT={DOMTokenList:!0,NodeList:!0},sp=function(S){var x=S.values;return S===hs||er(hs,S)&&x===hs.values||Lr(iT,Fi(S))?ip:x};Vr({target:"Array",stat:!0},{isArray:Ya});var ni=nr.Array.isArray,_g=bi.every,sT=Ui("every");Vr({target:"Array",proto:!0,forced:!sT},{every:function(x){return _g(this,x,arguments.length>1?arguments[1]:void 0)}});var vs=Uo("Array").every,wg=Array.prototype,Al=function(S){var x=S.every;return S===wg||er(wg,S)&&x===wg.every?vs:x},ui=function(x){return x!=null&&typeof x=="object"},Sv=function(x){return ui(x)&&Ji(x)=="[object RegExp]"},xg=function(x){return function($){return x($)}},Ol=o(function(S,x){var $=x&&!x.nodeType&&x,F=$&&S&&!S.nodeType&&S,A=F&&F.exports===$&&Xd.process,re=function(){try{var xe=F&&F.require&&F.require("util").types;return xe||A&&A.binding&&A.binding("util")}catch{}}();S.exports=re}),Ig=Ol&&Ol.isRegExp,cT=Ig?xg(Ig):Sv,Eg=Hi["__core-js_shared__"],Cc=function(){var S=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),lT=function(x){return!!Cc&&Cc in x},uT=Function.prototype.toString,sl=function(x){if(x!=null){try{return uT.call(x)}catch{}try{return x+""}catch{}}return""},dT=/^\[object .+?Constructor\]$/,pT=Function.prototype,fT=Object.prototype,mT=pT.toString,gT=fT.hasOwnProperty,cl=RegExp("^"+mT.call(gT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cd=function(x){return!(!fs(x)||lT(x))&&(Zd(x)?cl:dT).test(sl(x))},hT=function(x,$){return x==null?void 0:x[$]},ll=function(x,$){var F=hT(x,$);return cd(F)?F:void 0},ld=ll(Object,"create"),vT=function(){this.__data__=ld?ld(null):{},this.size=0},yT=function(x){var $=this.has(x)&&delete this.__data__[x];return this.size-=$?1:0,$},bT=Object.prototype.hasOwnProperty,TT=function(x){var $=this.__data__;if(ld){var F=$[x];return F==="__lodash_hash_undefined__"?void 0:F}return bT.call($,x)?$[x]:void 0},Rl=Object.prototype.hasOwnProperty,Mv=function(x){var $=this.__data__;return ld?$[x]!==void 0:Rl.call($,x)},ST=function(x,$){var F=this.__data__;return this.size+=this.has(x)?0:1,F[x]=ld&&$===void 0?"__lodash_hash_undefined__":$,this};function nc(S){var x=-1,$=S==null?0:S.length;for(this.clear();++x<$;){var F=S[x];this.set(F[0],F[1])}}nc.prototype.clear=vT,nc.prototype.delete=yT,nc.prototype.get=TT,nc.prototype.has=Mv,nc.prototype.set=ST;var ud=nc,MT=function(){this.__data__=[],this.size=0},cp=function(x,$){return x===$||x!=x&&$!=$},lp=function(x,$){for(var F=x.length;F--;)if(cp(x[F][0],$))return F;return-1},CT=Array.prototype.splice,kT=function(x){var $=this.__data__,F=lp($,x);return!(F<0)&&(F==$.length-1?$.pop():CT.call($,F,1),--this.size,!0)},Nl=function(x){var $=this.__data__,F=lp($,x);return F<0?void 0:$[F][1]},up=function(x){return lp(this.__data__,x)>-1},dd=function(x,$){var F=this.__data__,A=lp(F,x);return A<0?(++this.size,F.push([x,$])):F[A][1]=$,this};function Bl(S){var x=-1,$=S==null?0:S.length;for(this.clear();++x<$;){var F=S[x];this.set(F[0],F[1])}}Bl.prototype.clear=MT,Bl.prototype.delete=kT,Bl.prototype.get=Nl,Bl.prototype.has=up,Bl.prototype.set=dd;var dp=Bl,kc=ll(Hi,"Map"),_T=function(){this.size=0,this.__data__={hash:new ud,map:new(kc||dp),string:new ud}},wT=function(x){var $=typeof x;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?x!=="__proto__":x===null},pp=function(x,$){var F=x.__data__;return wT($)?F[typeof $=="string"?"string":"hash"]:F.map},xT=function(x){var $=pp(this,x).delete(x);return this.size-=$?1:0,$},Fl=function(x){return pp(this,x).get(x)},fp=function(x){return pp(this,x).has(x)},IT=function(x,$){var F=pp(this,x),A=F.size;return F.set(x,$),this.size+=F.size==A?0:1,this};function Ll(S){var x=-1,$=S==null?0:S.length;for(this.clear();++x<$;){var F=S[x];this.set(F[0],F[1])}}Ll.prototype.clear=_T,Ll.prototype.delete=xT,Ll.prototype.get=Fl,Ll.prototype.has=fp,Ll.prototype.set=IT;var ul=Ll,Pg=function(x){return this.__data__.set(x,"__lodash_hash_undefined__"),this},Cv=function(x){return this.__data__.has(x)};function mp(S){var x=-1,$=S==null?0:S.length;for(this.__data__=new ul;++x<$;)this.add(S[x])}mp.prototype.add=mp.prototype.push=Pg,mp.prototype.has=Cv;var Ag=mp,ET=function(x,$,F,A){for(var re=x.length,xe=F+(A?1:-1);A?xe--:++xe<re;)if($(x[xe],xe,x))return xe;return-1},kv=function(x){return x!=x},_v=function(x,$,F){for(var A=F-1,re=x.length;++A<re;)if(x[A]===$)return A;return-1},Og=function(x,$,F){return $==$?_v(x,$,F):ET(x,kv,F)},gp=function(x,$){return!!(x!=null&&x.length)&&Og(x,$,0)>-1},wv=function(x,$,F){for(var A=-1,re=x==null?0:x.length;++A<re;)if(F($,x[A]))return!0;return!1},jl=function(x,$){for(var F=-1,A=x==null?0:x.length,re=Array(A);++F<A;)re[F]=$(x[F],F,x);return re},Rg=function(x,$){return x.has($)},Ng=function(x,$,F,A){var re=-1,xe=gp,z=!0,qe=x.length,At=[],lr=$.length;if(!qe)return At;F&&($=jl($,xg(F))),A?(xe=wv,z=!1):$.length>=200&&(xe=Rg,z=!1,$=new Ag($));e:for(;++re<qe;){var fr=x[re],Sr=F==null?fr:F(fr);if(fr=A||fr!==0?fr:0,z&&Sr==Sr){for(var br=lr;br--;)if($[br]===Sr)continue e;At.push(fr)}else xe($,Sr,A)||At.push(fr)}return At},hp=function(x){return x},xv=function(x,$,F){switch(F.length){case 0:return x.call($);case 1:return x.call($,F[0]);case 2:return x.call($,F[0],F[1]);case 3:return x.call($,F[0],F[1],F[2])}return x.apply($,F)},pd=Math.max,Iv=function(x,$,F){return $=pd($===void 0?x.length-1:$,0),function(){for(var A=arguments,re=-1,xe=pd(A.length-$,0),z=Array(xe);++re<xe;)z[re]=A[$+re];re=-1;for(var qe=Array($+1);++re<$;)qe[re]=A[re];return qe[$]=F(z),xv(x,this,qe)}},PT=function(x){return function(){return x}},vp=function(){try{var S=ll(Object,"defineProperty");return S({},"",{}),S}catch{}}(),Ev=vp?function(S,x){return vp(S,"toString",{configurable:!0,enumerable:!1,value:PT(x),writable:!0})}:hp,Bg=Date.now,yp=function(x){var $=0,F=0;return function(){var A=Bg(),re=16-(A-F);if(F=A,re>0){if(++$>=800)return arguments[0]}else $=0;return x.apply(void 0,arguments)}},Pv=yp(Ev),Av=function(x,$){return Pv(Iv(x,$,hp),x+"")},Fg=function(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=9007199254740991},bp=function(x){return x!=null&&Fg(x.length)&&!Zd(x)},En=function(x){return ui(x)&&bp(x)},AT=Av(function(S,x){return En(S)?Ng(S,x):[]}),Dl=AT;function OT(S,x){return x instanceof RegExp?"__REGEXP "+x.toString():x}function Wr(S,x,$){var F;x===void 0&&(x={});var A={};return In(F=na(S)).call(F,function(re){var xe=S[re].type,z=$?"In "+$+", ":"";if(x[re]===void 0){if(S[re].required===!1)return void(A[re]=x[re]);throw new al(z+'param "'+re+'" is required',{key:re},"required")}var qe=RT[xe];if(qe&&!qe(x,re,S[re]))throw new al(z+'param "'+re+'" expects '+mo(S[re],OT),{key:re,value:x[re]},mo(S[re]));A[re]=x[re]}),A}var RT={string:function(x,$,F){var A=F.allowEmpty,re=F.max,xe=F.min,z=F.regExp,qe=x[$];return typeof qe=="string"&&(A!==!1||qe!=="")&&!(typeof re=="number"&&qe.length>re)&&!(typeof xe=="number"&&qe.length<xe)&&!(cT(z)&&!z.test(qe))},number:function(x,$,F){var A=F.min,re=F.max,xe=x[$];return typeof xe=="number"&&!(typeof A=="number"&&xe<A)&&!(typeof re=="number"&&xe>re)},boolean:function(x,$){return typeof x[$]=="boolean"},enum:function(x,$,F){var A=sp(F),re=x[$];return!A||pa(A).call(A,re)>-1},array:function(x,$,F){var A,re=F.itemType,xe=F.rules,z=F.min,qe=F.max,At=sp(F),lr=x[$];return!!ni(lr)&&!(typeof qe=="number"&&lr.length>qe)&&!(typeof z=="number"&&lr.length<z)&&!(re&&re!=="enum"&&!Al(lr).call(lr,function(fr){return typeof fr===re}))&&(re!=="enum"||!At||!Dl.apply(void 0,Vi(A=[lr]).call(A,At)).length)&&(xe&&In(lr).call(lr,function(fr,Sr){return Wr(xe,fr,$+"["+Sr+"]")}),!0)},object:function(x,$,F){var A=F.rules,re=x[$];return A&&Wr(A,re,$),!0}},$l=ll(Hi,"Set"),NT=function(){},Tp=function(x){var $=-1,F=Array(x.size);return x.forEach(function(A){F[++$]=A}),F},Lg=$l&&1/Tp(new $l([,-0]))[1]==1/0?function(S){return new $l(S)}:NT,Ov=Lg,Sp=function(x,$,F){var A=-1,re=gp,xe=x.length,z=!0,qe=[],At=qe;if(F)z=!1,re=wv;else if(xe>=200){var lr=$?null:Ov(x);if(lr)return Tp(lr);z=!1,re=Rg,At=new Ag}else At=$?[]:qe;e:for(;++A<xe;){var fr=x[A],Sr=$?$(fr):fr;if(fr=F||fr!==0?fr:0,z&&Sr==Sr){for(var br=At.length;br--;)if(At[br]===Sr)continue e;$&&At.push(Sr),qe.push(fr)}else re(At,Sr,F)||(At!==qe&&At.push(Sr),qe.push(fr))}return qe},BT=function(x){return x&&x.length?Sp(x):[]},jg=`	
\v\f\r                　\u2028\u2029\uFEFF`,Mp=Ce("".replace),Cp="["+jg+"]",fd=RegExp("^"+Cp+Cp+"*"),Rv=RegExp(Cp+Cp+"*$"),kp=function(S){return function(x){var $=Oa(pr(x));return 1&S&&($=Mp($,fd,"")),2&S&&($=Mp($,Rv,"")),$}},Nv={start:kp(1),end:kp(2),trim:kp(3)}.trim,md=c.parseInt,Dg=c.Symbol,As=Dg&&Dg.iterator,ko=/^[+-]?0x/i,_p=Ce(ko.exec),ys=md(jg+"08")!==8||md(jg+"0x16")!==22||As&&!d(function(){md(Object(As))})?function(x,$){var F=Nv(Oa(x));return md(F,$>>>0||(_p(ko,F)?16:10))}:md;Vr({global:!0,forced:parseInt!=ys},{parseInt:ys});var Os,Lo=nr.parseInt,$g=(Os=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Os()+Os()+Os()+Os()+Os()+Os()+Os()+Os()});function sa(S){var x;return Yi(x=na(S)).call(x,function($){return!(+$>=0)})}function Bv(S,x){var $,F=Yi($=na(S)).call($,function(A){return S[A]==x});return F.length>0?F[0]:void 0}var FT=TypeError,wp=Object.getOwnPropertyDescriptor,LT=Fe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(S){return S instanceof TypeError}}()?function(S,x){if(Ya(S)&&!wp(S,"length").writable)throw FT("Cannot set read only .length");return S.length=x}:function(S,x){return S.length=x},jT=TypeError,xp=function(S,x){if(!delete S[x])throw jT("Cannot delete property "+Nr(x)+" of "+Nr(S))},DT=$s("splice"),Ug=Math.max,qg=Math.min;Vr({target:"Array",proto:!0,forced:!DT},{splice:function(x,$){var F,A,re,xe,z,qe,At=jn(this),lr=Ia(At),fr=ns(x,lr),Sr=arguments.length;for(Sr===0?F=A=0:Sr===1?(F=0,A=lr-fr):(F=Sr-2,A=qg(Ug(Ls($),0),lr-fr)),uu(lr+F-A),re=fu(At,A),xe=0;xe<A;xe++)(z=fr+xe)in At&&Bi(re,xe,At[z]);if(re.length=A,F<A){for(xe=fr;xe<lr-A;xe++)qe=xe+F,(z=xe+A)in At?At[qe]=At[z]:xp(At,qe);for(xe=lr;xe>lr-A+F;xe--)xp(At,xe-1)}else if(F>A)for(xe=lr-A;xe>fr;xe--)qe=xe+F-1,(z=xe+A-1)in At?At[qe]=At[z]:xp(At,qe);for(xe=0;xe<F;xe++)At[xe+fr]=arguments[xe+2];return LT(At,lr-A+F),re}});var $T=Uo("Array").splice,Ip=Array.prototype,Fv=function(S){var x=S.splice;return S===Ip||er(Ip,S)&&x===Ip.splice?$T:x},Ep=function(S,x,$,F){try{return F?x(Vn($)[0],$[1]):x($)}catch(A){Ou(S,"throw",A)}},gd=Array,Lv=!Gm(function(S){Array.from(S)});Vr({target:"Array",stat:!0,forced:Lv},{from:function(x){var $=jn(x),F=Uc(this),A=arguments.length,re=A>1?arguments[1]:void 0,xe=re!==void 0;xe&&(re=jo(re,A>2?arguments[2]:void 0));var z,qe,At,lr,fr,Sr,br=Jc($),Er=0;if(!br||this===gd&&fm(br))for(z=Ia($),qe=F?new this(z):gd(z);z>Er;Er++)Sr=xe?re($[Er],Er):$[Er],Bi(qe,Er,Sr);else for(fr=(lr=Ws($,br)).next,qe=F?new this:[];!(At=de(fr,lr)).done;Er++)Sr=xe?Ep(lr,re,[At.value,Er],!0):At.value,Bi(qe,Er,Sr);return qe.length=Er,qe}});var _c=nr.Array.from,Va=Jc;function jv(S,x){var $,F=ga!==void 0&&Va(S)||S["@@iterator"];if(F)return Oo($=(F=F.call(S)).next).call($,F);if(ni(S)||(F=function(xe,z){var qe;if(xe){if(typeof xe=="string")return Dv(xe,z);var At=Mo(qe=Object.prototype.toString.call(xe)).call(qe,8,-1);if(At==="Object"&&xe.constructor&&(At=xe.constructor.name),At==="Map"||At==="Set")return _c(xe);if(At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At))return Dv(xe,z)}}(S))||x&&S&&typeof S.length=="number"){F&&(S=F);var A=0;return function(){return A>=S.length?{done:!0}:{done:!1,value:S[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dv(S,x){(x==null||x>S.length)&&(x=S.length);for(var $=0,F=new Array(x);$<x;$++)F[$]=S[$];return F}var di,$v=function(){function S(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var x=S.prototype;return x.addTimer=function(F,A,re){A===void 0&&(A=0),re===void 0&&(re=1);var xe=new Date().getTime(),z=this.id;return this.timerList.push({id:z,loop:re,count:0,timeout:xe+A,interval:A,callback:F}),this.id++,this.checkTimer(xe),z},x.checkTimer=function(F){if(F===void 0&&(F=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var A,re,xe=0,z=jv(this.timerList);!(A=z()).done;){var qe=A.value;(xe===0||xe>qe.timeout)&&(xe=qe.timeout)}this.timerList.length!==0&&(this.timer===null||xe<this.timeout||this.timeout<F)&&(this.timer=ia(Oo(re=this.nowTime).call(re,this),xe-F),this.timeout=xe)}},x.nowTime=function(){for(var F,A=new Date().getTime(),re=jv(this.timerList);!(F=re()).done;){var xe=F.value;A>=xe.timeout&&(xe.callback(),xe.count++,xe.timeout=A+xe.interval)}this.clerTime(),this.checkTimer(A)},x.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},x.deleteTimer=function(F){for(var A=this.timerList.length-1;A>=0;A--){var re;this.timerList[A].id===F&&Fv(re=this.timerList).call(re,A,1)}},x.removeFinished=function(){for(var F=this.timerList.length-1;F>=0;F--){var A,re=this.timerList[F];re.loop>=0&&re.count>=re.loop&&Fv(A=this.timerList).call(A,F,1)}},x.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},S}(),Uv=function(){function S($){this.core=$}var x=S.prototype;return x.request=function(F,A){var re=this,xe=new Date().getTime();return ta.request(F,A).catch(function(z){var qe,At,lr=z;throw re.core.reporter.reportTraceStart("exceptions",{user_id:re.core.options.account,trace_id:(At=(qe=re.core)===null||qe===void 0?void 0:qe.socket)===null||At===void 0?void 0:At.sessionId,start_time:xe,action:1}),re.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof lr.code=="number"?lr.code:0,description:lr.message||""+lr.code,operation_type:0,target:F,context:A?mo(A):""}),re.core.reporter.reportTraceEnd("exceptions",1),z})},x.uploadFile=function(F){var A=this,re=new Date().getTime();return ta.uploadFile(F).catch(function(xe){var z,qe,At=xe;A.core.reporter.reportTraceStart("exceptions",{user_id:A.core.options.account,trace_id:(qe=(z=A.core)===null||z===void 0?void 0:z.socket)===null||qe===void 0?void 0:qe.sessionId,start_time:re,action:1});var lr=ta.platform==="BROWSER"?F.chunkUploadHost:F.commonUploadHost?F.commonUploadHost+"/"+(F.nosToken&&F.nosToken.bucket):"https://nos.netease.com/nim";throw A.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof At.code=="number"?At.code:0,description:At.message||""+At.code,operation_type:1,target:lr}),A.core.reporter.reportTraceEnd("exceptions",1),xe})},S}();(function(S){S[S.ACTIVE=1]="ACTIVE",S[S.KICKED=2]="KICKED",S[S.OFFLINE=3]="OFFLINE"})(di||(di={}));var qv=window&&Zd(window.addEventListener)&&Zd(window.removeEventListener),hd=function(S){function x(F,A){var re;(re=S.call(this)||this).status="unconnected",re.linkUrls=[],re.eventBus=new ug,re.packetSer=1,re.retryCount=0,re.reconnectTimer=0,re.backoff=new U1({max:8e3,min:1600,jitter:.01}),re.sendingCmdMap=new nl,re.pingTimer=0,re.config=lv,re.abtInfo={},Wr({linkUrls:{type:"array",itemType:"string",required:!1}},F),re.options=Tn(Tn({},uv),F),re.adapters=new Uv(s(re));var xe=ta.localStorage.getItem("__NIM_DEVC_ID__");re.options.isFixedDeviceId?(xe=ta.localStorage.getItem("__NIM_DEVC_ID__")||$g(),ta.localStorage.setItem("__NIM_DEVC_ID__",xe)):xe=$g(),re.config=Tn(Tn(Tn({},lv),A),{deviceId:xe}),re.timerManager=new $v,re.logger=new hv(re.options.debugLevel,re.options.account);var z=ta.getSystemInfo();return re.reporter=new vv({common:{app_key:F.appkey,dev_id:xe,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:z.os,os_ver:z.osVer,model:z.hostEnvVer,manufactor:z.hostEnv,host_env:z.hostEnv,host_info:z.hostInfo,host_env_ver:z.hostEnvVer},request:ta.request,logger:re.logger,autoStart:ta.platform==="BROWSER"}),ta.setLogger(re.logger),re.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",F.appkey),re}No(x,S);var $=x.prototype;return $.emit=function(A){try{for(var re,xe,z=ti(),qe=arguments.length,At=new Array(qe>1?qe-1:0),lr=1;lr<qe;lr++)At[lr-1]=arguments[lr];var fr=(re=S.prototype.emit).call.apply(re,Vi(xe=[this,A]).call(xe,At)),Sr=ti()-z;return Sr>=10&&this.logger.warn("Core::emit event: "+A+" process takes: "+Sr+"ms"),fr}catch(br){return this.logger.error("Core::emit event: "+A+". Error: "+br),!1}},$.connect=function(A,re){return A===void 0&&(A={}),Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe,At,lr,fr,Sr;return ir.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(Wr({linkUrls:{type:"array",itemType:"string",required:!1}},A),/^(unconnected|waitReconnect)$/.test(this.status)){Er.next=5;break}return z="Core socket status is "+this.status+", and would not connect",this.logger.warn(z),Er.abrupt("return",uo.reject(z));case 5:this.status="connecting",A.linkUrls&&A.linkUrls.length>0&&(this.linkUrls=Vi(qe=A.linkUrls).call(qe,this.linkUrls),this.linkUrls=BT(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push("weblink.netease.im:443"),At=0;case 9:if(!(At<this.linkUrls.length)){Er.next=32;break}return lr=this.linkUrls[At],fr=new Date().getTime(),Er.prev=12,Er.next=15,this.doConnect(lr);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+lr),this.abtRequest(),Er.abrupt("return",lr);case 21:Er.prev=21,Er.t0=Er.catch(12),Sr=Er.t0,re&&re(Sr,lr),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:fr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Sr.code=="number"?Sr.code:0,description:Sr.message||""+Sr.code,operation_type:0,target:lr}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+lr,Er.t0);case 29:At++,Er.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect(di.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(di.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return Er.stop()}},xe,this,[[12,21]])}))},$.doConnect=function(A){var re=this;return new uo(function(xe,z){var qe;re.socket=new aT(re,A,re.logger),re.socket.on("connect",function(){re.logger.log("socket on connect",A),xe()}),re.socket.on("message",Oo(qe=re.onMessage).call(qe,re)),re.socket.on("disconnect",function(At){re.logger.log("core:: socket on disconnect",At),re.doDisconnect(di.OFFLINE,"SocketOnDisconnect")}),re.socket.on("handshakeFailed",function(){re.logger.warn("core:: socket handshake failed"),z(new yo("handshake failed",{},408))})})},$.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},$.doDisconnect=function(A,re){if(this.logger.log("doDisconnect: type "+A+", description "+re),this.status!=="unconnected"){this.markAllCmdInvaild(new yo("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var xe=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(A===di.ACTIVE||xe)this.logger.log("doDisconnect: emit disconnect, type "+A,xe),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(A===di.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var z=typeof re=="string"?{reason:"unknow",message:re}:re;this.eventBus.emit("kicked",z),this.emit("kicked",z),this.destroyOnlineListener()}else A===di.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},$.attempToReconnect=function(){var A=this;if(this.status!=="waitReconnect"){var re=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+re),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:re}),this.emit("willReconnect",{retryCount:this.retryCount,duration:re}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=ia(function(){A.status==="waitReconnect"?A.connect({isAutoReconnect:!0}).catch(function(){A.logger.error("core::attempToReconnect failed "+A.retryCount)}):A.logger.warn("doDisconnect: reconnectTimer status is "+A.status+", would not go on reconnecting")},re)}else this.logger.warn("doDisconnect: already is waiting reconnect")},$.sendCmd=function(A,re,xe){var z=this;if(this.status!=="logined"&&A!=="login"&&A!=="chatroomLogin"&&A!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+A),uo.reject({cmd:A,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return uo.reject("No_socket");var qe=A!=="heartbeat",At=qe?this.packetSer++:0,lr=function(vn,Yr,wn,Zr){var Qn=sd[vn];if(!Qn)return wn.error("createCmd:: can not find cmd config: ",vn),null;var $n,Do={SER:Yr,SID:Qn.sid,CID:Qn.cid,Q:[]};return Qn.params&&Zr&&In($n=Qn.params).call($n,function(Dn){var wr=Zr[Dn.name];if(!Tv(wr)){var xn=Dn.type,Rn=Dn.reflectMapper;switch(Dn.type){case"PropertyArray":xn="ArrayMable",wr=ho(wr).call(wr,function(Cn){return{t:"Property",v:Rn?ri(Cn,Rn):Cn}});break;case"Property":wr=Rn?ri(wr,Rn):wr;break;case"Bool":case"bool":wr=wr?"true":"false"}Do.Q.push({t:xn,v:wr})}}),{packet:Do,isNoResponse:Qn.isNoResponse||!1}}(A,At,this.logger,re);if(!lr){var fr="SendCmd "+At+" "+A+" error";return this.logger.error(fr),uo.reject(fr)}var Sr=lr.packet,br=lr.isNoResponse,Er=mo(Sr);qe&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",A,"ser:"+At,Er):this.logger.log("core::sendCmd",A,"ser:"+At));var $r=new Date().getTime();return new uo(function(jr,vn){z.sendingCmdMap.set(At,{cmd:A,params:re,callback:[jr,vn],timer:br?null:ia(function(){var wn,Zr=new Tg(504,A,"Packet Timeout",new Date().getTime(),{message:"ser "+At+" cmd "+A+" timeout"});Zr.callFunc="sendCmd",z.markCmdInvalid(At,Zr,A),z.reporter.reportTraceStart("exceptions",{user_id:z.options.account,trace_id:(wn=z.socket)===null||wn===void 0?void 0:wn.sessionId,start_time:$r,action:2}),z.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:Sr.SID+"-"+Sr.CID,context:""+Sr.SER}),z.reporter.reportTraceEnd("exceptions",1)},xe&&xe.timeout?xe.timeout:z.config.timeout)});try{z.socket.send(Er)}catch(wn){var Yr=new Tg(415,A,wn&&wn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:wn});Yr.callFunc="sendCmd",z.markCmdInvalid(At,Yr,A),vn(wn)}})},$.onMessage=function(A){var re=qa(A,this.logger);if(re){var xe=re.raw.ser;if(re.error&&this.logger.error("core:onMessage packet error",re.raw.sid+"_"+re.raw.cid+", ser:"+xe+",",re.error),!re.notFound)return re.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+xe,re.cmd,re.content):this.logger.log("imsocket::recvCmd ser:"+xe,re.cmd)),re.__receiveTime=ti(),re;this.logger.warn("core::onMessage packet not found",re.raw.sid+"_"+re.raw.cid+", ser:"+xe)}},$.markCmdInvalid=function(A,re,xe){var z=this.sendingCmdMap.get(A);if(z){var qe=z.callback,At=z.timer;At&&clearTimeout(At),this.sendingCmdMap.delete(A),this.logger.warn("packet "+A+", "+xe+" is invalid:",re),qe[1](re)}},$.markAllCmdInvaild=function(A){var re;this.logger.log("markAllCmdInvaild"),In(re=this.sendingCmdMap).call(re,function(xe){var z=xe.callback,qe=xe.timer;qe&&clearTimeout(qe),z[1](A)}),this.sendingCmdMap.clear()},$.ping=function(){return Cr(this,void 0,void 0,ir.mark(function A(){var re=this;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return clearTimeout(this.pingTimer),z.prev=1,z.next=4,this.sendCmd("heartbeat");case 4:z.next=14;break;case 6:return z.prev=6,z.t0=z.catch(1),z.next=10,this.testHeartBeat5Timeout();case 10:if(!z.sent){z.next=14;break}return this.doDisconnect(di.OFFLINE,"PingError"),z.abrupt("return");case 14:this.pingTimer=ia(function(){re.ping()},3e4);case 15:case"end":return z.stop()}},A,this,[[1,6]])}))},$.testHeartBeat5Timeout=function(){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:clearTimeout(this.pingTimer),re=0;case 2:if(!(re<5)){z.next=15;break}return z.prev=3,z.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return z.abrupt("return",!1);case 9:z.prev=9,z.t0=z.catch(3),this.logger.debug("core:: test heartbeat "+re+" Timeout");case 12:re++,z.next=2;break;case 15:return z.abrupt("return",!0);case 16:case"end":return z.stop()}},A,this,[[3,9]])}))},$.initOnlineListener=function(){var A,re;this.onlineListener||(qv?(this.onlineListener=Oo(A=function(){this.status==="logined"&&this.ping()}).call(A,this),this.offlineListener=Oo(re=function(){this.logger.log("offline"),this.doDisconnect(di.OFFLINE,"OfflineListener")}).call(re,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},$.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},$.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(di.ACTIVE,"UserActiveDisconnect"),uo.resolve();case"unconnected":case"destroyed":return uo.resolve()}},$.destroy=function(){var A=this;return this.disconnect().then(function(){A.status="destroyed",A.removeAllListeners(),A.eventBus.removeAllListeners(),A.reporter.destroy(),A.connect=function(){return uo.resolve()},A.disconnect=function(){return uo.resolve()},A.destroy=function(){return uo.resolve()}})},$.abtRequest=function(){var A,re;return Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this.options.isAbtestEnable){lr.next=2;break}return lr.abrupt("return");case 2:if(!this.abtInfo.experiments){lr.next=4;break}return lr.abrupt("return");case 4:if(this.options.abtestUrl){lr.next=6;break}return lr.abrupt("return");case 6:return lr.prev=6,lr.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:z=lr.sent,lr.next=15;break;case 12:lr.prev=12,lr.t0=lr.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((re=(A=z==null?void 0:z.data)===null||A===void 0?void 0:A.data)===null||re===void 0?void 0:re.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:ho(qe=this.abtInfo.experiments).call(qe,function(fr){return{experimentKey:fr.experimentKey,schemeKey:fr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return lr.stop()}},xe,this,[[6,12]])}))},x}(ug);hd.setAdapters=function(x){Tn(ta,x)};var Vv=bi.some,bs=Ui("some");Vr({target:"Array",proto:!0,forced:!bs},{some:function(x){return Vv(this,x,arguments.length>1?arguments[1]:void 0)}});var Pp=Uo("Array").some,Vg=Array.prototype,Ap=function(S){var x=S.some;return S===Vg||er(Vg,S)&&x===Vg.some?Pp:x},Hg=function(){this.__data__=new dp,this.size=0},zg=function(x){var $=this.__data__,F=$.delete(x);return this.size=$.size,F},UT=function(x){return this.__data__.get(x)},qT=function(x){return this.__data__.has(x)},VT=function(x,$){var F=this.__data__;if(F instanceof dp){var A=F.__data__;if(!kc||A.length<199)return A.push([x,$]),this.size=++F.size,this;F=this.__data__=new ul(A)}return F.set(x,$),this.size=F.size,this};function Ul(S){var x=this.__data__=new dp(S);this.size=x.size}Ul.prototype.clear=Hg,Ul.prototype.delete=zg,Ul.prototype.get=UT,Ul.prototype.has=qT,Ul.prototype.set=VT;var Op=Ul,Hv=function(x,$){for(var F=-1,A=x==null?0:x.length;++F<A;)if($(x[F],F,x))return!0;return!1},Kg=function(x,$,F,A,re,xe){var z=1&F,qe=x.length,At=$.length;if(qe!=At&&!(z&&At>qe))return!1;var lr=xe.get(x),fr=xe.get($);if(lr&&fr)return lr==$&&fr==x;var Sr=-1,br=!0,Er=2&F?new Ag:void 0;for(xe.set(x,$),xe.set($,x);++Sr<qe;){var $r=x[Sr],jr=$[Sr];if(A)var vn=z?A(jr,$r,Sr,$,x,xe):A($r,jr,Sr,x,$,xe);if(vn!==void 0){if(vn)continue;br=!1;break}if(Er){if(!Hv($,function(Yr,wn){if(!Rg(Er,wn)&&($r===Yr||re($r,Yr,F,A,xe)))return Er.push(wn)})){br=!1;break}}else if($r!==jr&&!re($r,jr,F,A,xe)){br=!1;break}}return xe.delete(x),xe.delete($),br},zv=Hi.Uint8Array,HT=function(x){var $=-1,F=Array(x.size);return x.forEach(function(A,re){F[++$]=[re,A]}),F},vd=xs?xs.prototype:void 0,dl=vd?vd.valueOf:void 0,Wg=function(x,$,F,A,re,xe,z){switch(F){case"[object DataView]":if(x.byteLength!=$.byteLength||x.byteOffset!=$.byteOffset)return!1;x=x.buffer,$=$.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=$.byteLength||!xe(new zv(x),new zv($)));case"[object Boolean]":case"[object Date]":case"[object Number]":return cp(+x,+$);case"[object Error]":return x.name==$.name&&x.message==$.message;case"[object RegExp]":case"[object String]":return x==$+"";case"[object Map]":var qe=HT;case"[object Set]":var At=1&A;if(qe||(qe=Tp),x.size!=$.size&&!At)return!1;var lr=z.get(x);if(lr)return lr==$;A|=2,z.set(x,$);var fr=Kg(qe(x),qe($),A,re,xe,z);return z.delete(x),fr;case"[object Symbol]":if(dl)return dl.call(x)==dl.call($)}return!1},Oi=function(x,$){for(var F=-1,A=$.length,re=x.length;++F<A;)x[re+F]=$[F];return x},Rs=Array.isArray,Rp=function(x,$,F){var A=$(x);return Rs(x)?A:Oi(A,F(x))},Fa=function(x,$){for(var F=-1,A=x==null?0:x.length,re=0,xe=[];++F<A;){var z=x[F];$(z,F,x)&&(xe[re++]=z)}return xe},Kv=function(){return[]},Gg=Object.prototype.propertyIsEnumerable,Qg=Object.getOwnPropertySymbols,zT=Qg?function(S){return S==null?[]:(S=Object(S),Fa(Qg(S),function(x){return Gg.call(S,x)}))}:Kv,Jg=zT,KT=function(x,$){for(var F=-1,A=Array(x);++F<x;)A[F]=$(F);return A},Np=function(x){return ui(x)&&Ji(x)=="[object Arguments]"},Yg=Object.prototype,ql=Yg.hasOwnProperty,WT=Yg.propertyIsEnumerable,Xg=Np(function(){return arguments}())?Np:function(S){return ui(S)&&ql.call(S,"callee")&&!WT.call(S,"callee")},Zg=Xg,GT=function(){return!1},eh=o(function(S,x){var $=x&&!x.nodeType&&x,F=$&&S&&!S.nodeType&&S,A=F&&F.exports===$?Hi.Buffer:void 0,re=(A?A.isBuffer:void 0)||GT;S.exports=re}),Wv=/^(?:0|[1-9]\d*)$/,yd=function(x,$){var F=typeof x;return!!($=$??9007199254740991)&&(F=="number"||F!="symbol"&&Wv.test(x))&&x>-1&&x%1==0&&x<$},Ta={};Ta["[object Float32Array]"]=Ta["[object Float64Array]"]=Ta["[object Int8Array]"]=Ta["[object Int16Array]"]=Ta["[object Int32Array]"]=Ta["[object Uint8Array]"]=Ta["[object Uint8ClampedArray]"]=Ta["[object Uint16Array]"]=Ta["[object Uint32Array]"]=!0,Ta["[object Arguments]"]=Ta["[object Array]"]=Ta["[object ArrayBuffer]"]=Ta["[object Boolean]"]=Ta["[object DataView]"]=Ta["[object Date]"]=Ta["[object Error]"]=Ta["[object Function]"]=Ta["[object Map]"]=Ta["[object Number]"]=Ta["[object Object]"]=Ta["[object RegExp]"]=Ta["[object Set]"]=Ta["[object String]"]=Ta["[object WeakMap]"]=!1;var Gv=function(x){return ui(x)&&Fg(x.length)&&!!Ta[Ji(x)]},th=Ol&&Ol.isTypedArray,oc=th?xg(th):Gv,Qv=Object.prototype.hasOwnProperty,Jv=function(x,$){var F=Rs(x),A=!F&&Zg(x),re=!F&&!A&&eh(x),xe=!F&&!A&&!re&&oc(x),z=F||A||re||xe,qe=z?KT(x.length,String):[],At=qe.length;for(var lr in x)!$&&!Qv.call(x,lr)||z&&(lr=="length"||re&&(lr=="offset"||lr=="parent")||xe&&(lr=="buffer"||lr=="byteLength"||lr=="byteOffset")||yd(lr,At))||qe.push(lr);return qe},QT=Object.prototype,Yv=function(x){var $=x&&x.constructor;return x===(typeof $=="function"&&$.prototype||QT)},Xv=function(x,$){return function(F){return x($(F))}},Zv=Xv(Object.keys,Object),JT=Object.prototype.hasOwnProperty,rh=function(x){if(!Yv(x))return Zv(x);var $=[];for(var F in Object(x))JT.call(x,F)&&F!="constructor"&&$.push(F);return $},wc=function(x){return bp(x)?Jv(x):rh(x)},nh=function(x){return Rp(x,wc,Jg)},YT=Object.prototype.hasOwnProperty,ey=function(x,$,F,A,re,xe){var z=1&F,qe=nh(x),At=qe.length;if(At!=nh($).length&&!z)return!1;for(var lr=At;lr--;){var fr=qe[lr];if(!(z?fr in $:YT.call($,fr)))return!1}var Sr=xe.get(x),br=xe.get($);if(Sr&&br)return Sr==$&&br==x;var Er=!0;xe.set(x,$),xe.set($,x);for(var $r=z;++lr<At;){var jr=x[fr=qe[lr]],vn=$[fr];if(A)var Yr=z?A(vn,jr,fr,$,x,xe):A(jr,vn,fr,x,$,xe);if(!(Yr===void 0?jr===vn||re(jr,vn,F,A,xe):Yr)){Er=!1;break}$r||($r=fr=="constructor")}if(Er&&!$r){var wn=x.constructor,Zr=$.constructor;wn==Zr||!("constructor"in x)||!("constructor"in $)||typeof wn=="function"&&wn instanceof wn&&typeof Zr=="function"&&Zr instanceof Zr||(Er=!1)}return xe.delete(x),xe.delete($),Er},ac=ll(Hi,"DataView"),$a=ll(Hi,"Promise"),Vl=ll(Hi,"WeakMap"),ha="[object Map]",Xi="[object Promise]",ty="[object Set]",oi="[object WeakMap]",oh="[object DataView]",ah=sl(ac),XT=sl(kc),ZT=sl($a),ry=sl($l),eS=sl(Vl),pl=Ji;(ac&&pl(new ac(new ArrayBuffer(1)))!=oh||kc&&pl(new kc)!=ha||$a&&pl($a.resolve())!=Xi||$l&&pl(new $l)!=ty||Vl&&pl(new Vl)!=oi)&&(pl=function(S){var x=Ji(S),$=x=="[object Object]"?S.constructor:void 0,F=$?sl($):"";if(F)switch(F){case ah:return oh;case XT:return ha;case ZT:return Xi;case ry:return ty;case eS:return oi}return x});var bd=pl,Zi="[object Arguments]",ih="[object Array]",Bp="[object Object]",Td=Object.prototype.hasOwnProperty,ny=function(x,$,F,A,re,xe){var z=Rs(x),qe=Rs($),At=z?ih:bd(x),lr=qe?ih:bd($),fr=(At=At==Zi?Bp:At)==Bp,Sr=(lr=lr==Zi?Bp:lr)==Bp,br=At==lr;if(br&&eh(x)){if(!eh($))return!1;z=!0,fr=!1}if(br&&!fr)return xe||(xe=new Op),z||oc(x)?Kg(x,$,F,A,re,xe):Wg(x,$,At,F,A,re,xe);if(!(1&F)){var Er=fr&&Td.call(x,"__wrapped__"),$r=Sr&&Td.call($,"__wrapped__");if(Er||$r){var jr=Er?x.value():x,vn=$r?$.value():$;return xe||(xe=new Op),re(jr,vn,F,A,xe)}}return!!br&&(xe||(xe=new Op),ey(x,$,F,A,re,xe))},sh=function S(x,$,F,A,re){return x===$||(x==null||$==null||!ui(x)&&!ui($)?x!=x&&$!=$:ny(x,$,F,A,S,re))},tS=function(x,$,F,A){var re=F.length,xe=re,z=!A;if(x==null)return!xe;for(x=Object(x);re--;){var qe=F[re];if(z&&qe[2]?qe[1]!==x[qe[0]]:!(qe[0]in x))return!1}for(;++re<xe;){var At=(qe=F[re])[0],lr=x[At],fr=qe[1];if(z&&qe[2]){if(lr===void 0&&!(At in x))return!1}else{var Sr=new Op;if(A)var br=A(lr,fr,At,x,$,Sr);if(!(br===void 0?sh(fr,lr,3,A,Sr):br))return!1}}return!0},oy=function(x){return x==x&&!fs(x)},rS=function(x){for(var $=wc(x),F=$.length;F--;){var A=$[F],re=x[A];$[F]=[A,re,oy(re)]}return $},ch=function(x,$){return function(F){return F!=null&&F[x]===$&&($!==void 0||x in Object(F))}},ay=function(x){var $=rS(x);return $.length==1&&$[0][2]?ch($[0][0],$[0][1]):function(F){return F===x||tS(F,x,$)}},Fp=function(x){return typeof x=="symbol"||ui(x)&&Ji(x)=="[object Symbol]"},nS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oS=/^\w*$/,Sd=function(x,$){if(Rs(x))return!1;var F=typeof x;return!(F!="number"&&F!="symbol"&&F!="boolean"&&x!=null&&!Fp(x))||oS.test(x)||!nS.test(x)||$!=null&&x in Object($)};function lh(S,x){if(typeof S!="function"||x!=null&&typeof x!="function")throw new TypeError("Expected a function");var $=function(){var F=arguments,A=x?x.apply(this,F):F[0],re=$.cache;if(re.has(A))return re.get(A);var xe=S.apply(this,F);return $.cache=re.set(A,xe)||re,xe};return $.cache=new(lh.Cache||ul),$}lh.Cache=ul;var Lp=lh,aS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jp=/\\(\\)?/g,Sa=function(x){var $=Lp(x,function(A){return F.size===500&&F.clear(),A}),F=$.cache;return $}(function(S){var x=[];return S.charCodeAt(0)===46&&x.push(""),S.replace(aS,function($,F,A,re){x.push(A?re.replace(jp,"$1"):F||$)}),x}),iS=Sa,uh=xs?xs.prototype:void 0,dh=uh?uh.toString:void 0,sS=function S(x){if(typeof x=="string")return x;if(Rs(x))return jl(x,S)+"";if(Fp(x))return dh?dh.call(x):"";var $=x+"";return $=="0"&&1/x==-1/0?"-0":$},iy=function(x){return x==null?"":sS(x)},Dp=function(x,$){return Rs(x)?x:Sd(x,$)?[x]:iS(iy(x))},fl=function(x){if(typeof x=="string"||Fp(x))return x;var $=x+"";return $=="0"&&1/x==-1/0?"-0":$},ph=function(x,$){for(var F=0,A=($=Dp($,x)).length;x!=null&&F<A;)x=x[fl($[F++])];return F&&F==A?x:void 0},Wa=function(x,$,F){var A=x==null?void 0:ph(x,$);return A===void 0?F:A},cS=function(x,$){return x!=null&&$ in Object(x)},Md=function(x,$,F){for(var A=-1,re=($=Dp($,x)).length,xe=!1;++A<re;){var z=fl($[A]);if(!(xe=x!=null&&F(x,z)))break;x=x[z]}return xe||++A!=re?xe:!!(re=x==null?0:x.length)&&Fg(re)&&yd(z,re)&&(Rs(x)||Zg(x))},sy=function(x,$){return x!=null&&Md(x,$,cS)},lS=function(x,$){return Sd(x)&&oy($)?ch(fl(x),$):function(F){var A=Wa(F,x);return A===void 0&&A===$?sy(F,x):sh($,A,3)}},fh=function(x){return function($){return $==null?void 0:$[x]}},uS=function(x){return function($){return ph($,x)}},dS=function(x){return Sd(x)?fh(fl(x)):uS(x)},Ga=function(x){return typeof x=="function"?x:x==null?hp:typeof x=="object"?Rs(x)?lS(x[0],x[1]):ay(x):dS(x)},pS=function(x,$,F){$=="__proto__"&&vp?vp(x,$,{configurable:!0,enumerable:!0,value:F,writable:!0}):x[$]=F},mh=Object.prototype.hasOwnProperty,cy=function(x,$,F){var A=x[$];mh.call(x,$)&&cp(A,F)&&(F!==void 0||$ in x)||pS(x,$,F)},fS=function(x,$,F,A){if(!fs(x))return x;for(var re=-1,xe=($=Dp($,x)).length,z=xe-1,qe=x;qe!=null&&++re<xe;){var At=fl($[re]),lr=F;if(At==="__proto__"||At==="constructor"||At==="prototype")return x;if(re!=z){var fr=qe[At];(lr=A?A(fr,At,qe):void 0)===void 0&&(lr=fs(fr)?fr:yd($[re+1])?[]:{})}cy(qe,At,lr),qe=qe[At]}return x},ly=function(x,$,F){for(var A=-1,re=$.length,xe={};++A<re;){var z=$[A],qe=ph(x,z);F(qe,z)&&fS(xe,Dp(z,x),qe)}return xe},uy=Xv(Object.getPrototypeOf,Object),Cd=Object.getOwnPropertySymbols?function(S){for(var x=[];S;)Oi(x,Jg(S)),S=uy(S);return x}:Kv,mS=function(x){var $=[];if(x!=null)for(var F in Object(x))$.push(F);return $},gS=Object.prototype.hasOwnProperty,dy=function(x){if(!fs(x))return mS(x);var $=Yv(x),F=[];for(var A in x)(A!="constructor"||!$&&gS.call(x,A))&&F.push(A);return F},hS=function(x){return bp(x)?Jv(x,!0):dy(x)},vS=function(x){return Rp(x,hS,Cd)},gh,py,fy=function(x,$){if(x==null)return{};var F=jl(vS(x),function(A){return[A]});return $=Ga($),ly(x,F,function(A,re){return $(A,re[0])})},gy={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},Hl={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},ml=Mc(Hl),hh={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:ml.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:Hl.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:ml.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:Hl.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:ml.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:ml.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:ml.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:Hl.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:ml.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:Hl.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:ml.mixStoreAuthTokenResTag}]}};(function(S){S[S.nos=1]="nos",S[S.s3=2]="s3"})(gh||(gh={})),function(S){S[S.dontNeed=-1]="dontNeed",S[S.time=2]="time",S[S.urls=3]="urls"}(py||(py={}));var zi,Ns,yS={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},xc={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},vh={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function yh(S){return S===void 0&&(S="file"),mo(xc[S]||{}).replace(/"/gi,'\\"')}(function(S){S[S.nos=1]="nos",S[S.s3=2]="s3"})(zi||(zi={})),function(S){S[S.dontNeed=-1]="dontNeed",S[S.time=2]="time",S[S.urls=3]="urls"}(Ns||(Ns={}));var hy=function(){function S($,F){F===void 0&&(F={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=zi.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=$.logger,this.core=$,Ps({cmdMap:gy,cmdConfig:hh}),this.setOptions(F)}var x=S.prototype;return x.setOptions=function(F){F===void 0&&(F={});var A=F.storageKeyPrefix||"NIMClient";this.GRAYKEY=A+"-AllGrayscaleConfig",this.MIXSTOREKEY=A+"-AllMixStorePolicy";var re=F.s3,xe=xl(F,["s3"]),z=Tn({},yS,this.config);if(xe&&Object.prototype.hasOwnProperty.call(xe,"cdn")){var qe={cdn:Tn(Tn({},z.cdn),xe.cdn)};this.config=Tn({},z,xe,qe)}else this.config=Tn({},z,xe);re&&(this.s3=re)},x.init=function(){return Cr(this,void 0,void 0,ir.mark(function F(){return ir.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=zi.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){re.next=9;break}return re.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return re.next=9,this.getNosCdnHost();case 9:case"end":return re.stop()}},F,this)}))},x.uploadFile=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(Wr({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},F),F.fileInput||F.file||F.filePath){At.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!F.type||F.type==="file"){At.next=7;break}if(typeof(re=Wa(F,"file.type"))!="string"||pa(re).call(re,F.type)!==-1){At.next=7;break}throw new Error('The meta type "'+re+'" does not match "'+F.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){At.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),At.abrupt("return",this.nosUpload(F));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=zi.nos),xe=vh,At.prev=13,At.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:yh(F.type)}});case 16:z=At.sent,xe=z.content.mixStoreTokenResTag,At.next=24;break;case 20:throw At.prev=20,At.t0=At.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",At.t0),new Tc("getMixStoreToken error",At.t0,this.curProvider,this.mixStorePolicy);case 24:return At.abrupt("return",this.curProvider===zi.s3?this.s3Upload(F,xe):this.nosUpload(F,xe));case 25:case"end":return At.stop()}},A,this,[[13,20]])}))},x.nosUpload=function(F,A){var re,xe;return Cr(this,void 0,void 0,ir.mark(function z(){var qe,At,lr,fr,Sr,br,Er,$r,jr,vn,Yr,wn,Zr;return ir.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(qe=Wa(this.core,"config.cdn.bucket"),At={tag:F.nosScenes||qe||"nim",expireSec:F.nosSurvivalTime},A){$n.next=13;break}return $n.prev=3,$n.next=6,this.core.sendCmd("getNosToken",{responseBody:yh(F.type),nosToken:At});case 6:lr=$n.sent,$n.next=13;break;case 9:throw $n.prev=9,$n.t0=$n.catch(3),this.core.logger.error("uploadFile:: getNosToken error",$n.t0),new Tc("getNosToken error",$n.t0,1);case 13:return $n.prev=13,Sr=lr?lr.content.nosToken:A,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:Sr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:ta.platform}),$n.next=18,this.core.adapters.uploadFile(Tn(Tn({},F),{nosToken:Sr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:F.maxSize||this.config.chunkMaxSize}));case 18:fr=$n.sent,$n.next=42;break;case 21:if($n.prev=21,$n.t1=$n.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",$n.t1),!A){$n.next=41;break}if(this.nosErrorCount!==0){$n.next=37;break}$n.prev=26,this._addCircuitTimer(),$n.next=33;break;case 30:throw $n.prev=30,$n.t2=$n.catch(26),new Tc("upload file error",$n.t2,this.curProvider,this.mixStorePolicy,F.file||F.filePath);case 33:return this.nosErrorCount=(re=this.mixStorePolicy.nosPolicy)===null||re===void 0?void 0:re.uploadConfig.retryPolicy.retry,$n.abrupt("return",this.uploadFile(F));case 37:return this.nosErrorCount--,$n.abrupt("return",this.nosUpload(F,A));case 39:$n.next=42;break;case 41:throw new Tc("nos uploadFile error",$n.t1,1);case 42:if(br=fr==null?void 0:fr.type,Er=br&&pa(br).call(br,"/")>-1?Mo(br).call(br,0,pa(br).call(br,"/")):"",$r={image:"imageInfo",video:"vinfo",audio:"vinfo"},jr=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",lr?lr.content.nosToken.objectName:A==null?void 0:A.objectName),A&&A.shortUrl&&(jr=A.shortUrl),$r[Er]){$n.next=49;break}return $n.abrupt("return",Tn({url:jr},fr));case 49:if($n.prev=49,!(pa(jr).call(jr,"_im_url=1")<0)){$n.next=54;break}return $n.next=53,this.core.adapters.request(jr+"?"+$r[Er],{method:"GET",dataType:"json",timeout:5e3});case 53:vn=$n.sent;case 54:$n.next=60;break;case 56:return $n.prev=56,$n.t3=$n.catch(49),this.core.logger.error("uploadFile:: fetch file info error",$n.t3),$n.abrupt("return",Tn({url:jr},fr));case 60:if(!vn){$n.next=67;break}return Yr=vn.data,wn=$r[Er]==="imageInfo"?Yr:(xe=Yr==null?void 0:Yr.GetVideoInfo)===null||xe===void 0?void 0:xe.VideoInfo,Zr={url:jr,name:fr.name,size:fr.size,ext:fr.ext,w:wn.Width,h:wn.Height,orientation:wn.Orientation,dur:wn.Duration,audioCodec:wn.AudioCodec,videoCodec:wn.VideoCodec,container:wn.Container},$n.abrupt("return",fy(Zr,function(Do,Dn){return Dn!==void 0}));case 67:return $n.abrupt("return",Tn({url:jr},fr));case 68:case"end":return $n.stop()}},z,this,[[3,9],[13,21],[26,30],[49,56]])}))},x.getNosCdnHost=function(){var F;return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe=this;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.prev=0,lr.next=3,this.core.sendCmd("getNosCdnHost");case 3:re=lr.sent,lr.next=10;break;case 6:return lr.prev=6,lr.t0=lr.catch(0),this.logger.error("getNosCdnHost::error",lr.t0),lr.abrupt("return");case 10:if(re){lr.next=12;break}return lr.abrupt("return");case 12:xe=(F=re==null?void 0:re.content)===null||F===void 0?void 0:F.nosConfigTag,(z=Lo(xe==null?void 0:xe.expire))!==0&&xe.cdnDomain?z===-1?(this.config.cdn.bucket=xe.bucket,this.config.cdn.cdnDomain=xe.cdnDomain,this.config.cdn.objectNamePrefix=xe.objectNamePrefix):(this.config.cdn.bucket=xe.bucket,this.config.cdn.cdnDomain=xe.cdnDomain,this.config.cdn.objectNamePrefix=xe.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){qe.getNosCdnHost()},1e3*z)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return lr.stop()}},A,this,[[0,6]])}))},x.getGrayscaleConfig=function(F){var A;return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(ta.localStorage)try{ta.localStorage.getItem&&ta.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(ta.localStorage.getItem(this.GRAYKEY))[F])}catch(lr){ta.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",lr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){At.next=17;break}return At.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(xe=At.sent).content||!xe.content.grayConfigTag){At.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(xe.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(xe.content.grayConfigTag.ttl)}catch(lr){this.logger.error("getGrayscaleConfig error",lr)}if(this.grayConfig){At.next=10;break}return At.abrupt("return");case 10:z=ta.localStorage.getItem(this.GRAYKEY)?JSON.parse(ta.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),z[F]=this.grayConfig,ta.localStorage.setItem(this.GRAYKEY,mo(z)),At.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",xe.content);case 17:if(!(!((A=this.grayConfig)===null||A===void 0)&&A.mixStoreEnable)){At.next=20;break}return At.next=20,this._getMixStorePolicy(F);case 20:case"end":return At.stop()}},re,this)}))},x._getMixStorePolicy=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr,fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(re=new Date().getTime(),ta.localStorage)try{this.mixStorePolicy=JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY))[F],this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>re&&(z=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-re,this.core.timerManager.addTimer(Oo(xe=this._getMixStorePolicy).call(xe,this,F),z))}catch(Er){ta.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY))[F]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Er)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=re)){br.next=30;break}return br.prev=3,br.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:At=br.sent,lr=At.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(lr.ttl),this.mixStorePolicy.providers=lr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=lr.nosPolicy?JSON.parse(lr.nosPolicy):null,this.mixStorePolicy.s3Policy=lr.s3Policy?JSON.parse(lr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Oo(qe=this._getMixStorePolicy).call(qe,this,F),1e3*this.mixStorePolicy.ttl),fr=ta.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),fr[F]=this.mixStorePolicy,ta.localStorage.setItem(this.MIXSTOREKEY,mo(fr)),br.next=30;break;case 23:if(br.prev=23,br.t0=br.catch(3),this.logger.error("getMixStorePolicy error",br.t0),this.mixStoreErrorCount!==0){br.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(F),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return br.stop()}},A,this,[[3,23]])}))},x.s3Upload=function(F,A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr,fr,Sr,br,Er,$r,jr=this;return ir.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(!F.file){Yr.next=4;break}xe=F.file,Yr.next=19;break;case 4:if(typeof F.fileInput!="string"){Yr.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((z=document.getElementById(F.fileInput))&&z.files&&z.files[0])){Yr.next=11;break}xe=z.files[0],Yr.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Yr.next=19;break;case 14:if(!(F.fileInput&&F.fileInput.files&&F.fileInput.files[0])){Yr.next=18;break}xe=F.fileInput.files[0],Yr.next=19;break;case 18:throw new Error("Can not get file from fileInput "+F.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Yr.next=21;break}throw new Error("dont get s3 policy");case 21:return qe={accessKeyId:A.accessKeyId,secretAccessKey:A.secretAccessKey,sessionToken:A.sessionToken,region:A.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},At=this.s3,(lr=new At).config.update(qe),fr=decodeURIComponent(A.bucket),Sr=decodeURIComponent(A.objectName),Er={Bucket:fr,Key:Sr,Body:br=xe,Metadata:{token:A.token},ContentType:br.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Er),$r=lr.upload(Er),Yr.abrupt("return",new uo(function(wn){var Zr=new Date().getTime();$r.send(function(Qn,$n){var Do,Dn;if(Qn){jr.logger.error("uploadFile:","api::s3:upload file failed",Qn),jr.core.reporter.reportTraceStart("exceptions",{user_id:jr.core.options.account,trace_id:(Dn=(Do=jr.core)===null||Do===void 0?void 0:Do.socket)===null||Dn===void 0?void 0:Dn.sessionId,start_time:Zr,action:1}),jr.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Qn.status=="number"?Qn.status:typeof Qn.code=="number"?Qn.code:0,description:Qn.message||""+Qn.code,operation_type:1,target:Qn.hostname}),jr.core.reporter.reportTraceEnd("exceptions",1);try{jr._addCircuitTimer()}catch(xn){throw new Tc("upload file error",xn,jr.curProvider,jr.mixStorePolicy,F.file||F.filePath)}wn(jr.uploadFile(F))}else{var wr=jr.mixStorePolicy.s3Policy.cdnSchema;wr=(wr=wr.replace("{cdnDomain}",jr.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",$n.Key),wn({size:br.size,name:br.name,url:A.shortUrl?A.shortUrl:wr,ext:br.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return Yr.stop()}},re,this)}))},x.getPrivateUrl=function(F){var A;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(F))return this.logger.error("illegal file url:"+F),"";var re=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(F);re[0];var xe=re[1];re[2];var z=re[3];re[4];var qe=re[5];if(re[6],re[7],(A=this.grayConfig)===null||A===void 0?void 0:A.mixStoreEnable){var At=this._getUrlType(F);return At===zi.s3&&this.mixStorePolicy.s3Policy&&(F=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",qe)),At===zi.nos&&this.mixStorePolicy.nosPolicy&&(F=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",qe)),F}var lr=this.config,fr=lr.downloadUrl,Sr=lr.downloadHostList,br=lr.nosCdnEnable,Er=this.config.cdn.cdnDomain,$r=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",jr=decodeURIComponent(qe),vn=pa(jr).call(jr,$r);if(Er&&vn>-1&&br)return""+xe+Er+"/"+Mo(jr).call(jr,vn);if(gs(Sr).call(Sr,z)&&gs(qe).call(qe,"/")){var Yr=pa(qe).call(qe,"/"),wn=qe.substring(0,Yr),Zr=qe.substring(Yr+1);return fr.replace("{bucket}",wn).replace("{object}",Zr)}var Qn=Yi(Sr).call(Sr,function(Do){return typeof z=="string"&&gs(z).call(z,Do)})[0],$n=Qn?z.replace(Qn,"").replace(/\W/g,""):null;return $n?fr.replace("{bucket}",$n).replace("{object}",qe):F},x.getOriginUrl=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:F}});case 2:return re=z.sent,z.abrupt("return",re.content.nosSafeUrlTag.originUrl);case 4:case"end":return z.stop()}},A,this)}))},x.getFileToken=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr=this;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(Wr({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},F),re=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,xe=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,re!==String(Ns.dontNeed)||xe!==String(Ns.dontNeed)){Sr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(F.type!==Ns.time){Sr.next=17;break}if(!(re&&pa(re).call(re,String(Ns.time))>=0||xe&&pa(xe).call(xe,String(Ns.time))>0)){Sr.next=13;break}return Sr.abrupt("return",this.getFileAuthToken(F));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:Sr.next=33;break;case 17:if(F.urls&&F.urls.length){Sr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(qe=[],At=[],In(z=F.urls).call(z,function(br){var Er=lr._getUrlType(br);Er===zi.nos&&At.push(br),Er===zi.s3&&qe.push(br)}),(!xe||qe.length!==0&&pa(xe).call(xe,String(Ns.urls))<0)&&(this.logger.warn("s3 url don't support url token"),qe=[]),(!re||At.length!==0&&pa(re).call(re,String(Ns.urls))<0)&&(this.logger.warn("nos url don't support url token"),At=[]),qe.length!==0||At.length!==0){Sr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(qe.length!==0&&At.length!==0){Sr.next=33;break}return F.urls=mo(F.urls),Sr.abrupt("return",this.getFileAuthToken(F));case 33:case"end":return Sr.stop()}},A,this)}))},x.getFileAuthToken=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:F});case 2:return re=z.sent,z.abrupt("return",re.content.mixStoreAuthTokenResTag);case 4:case"end":return z.stop()}},A,this)}))},x._getUrlType=function(F){var A,re;return this.mixStorePolicy.nosPolicy&&Ap(A=this.mixStorePolicy.nosPolicy.dlcdns).call(A,function(xe){return pa(F).call(F,xe)>=0})?zi.nos:this.mixStorePolicy.s3Policy&&Ap(re=this.mixStorePolicy.s3Policy.dlcdns).call(re,function(xe){return pa(F).call(F,xe)>=0})?zi.s3:null},x._addCircuitTimer=function(){var F=this,A=this.mixStorePolicy.providers,re=A[(pa(A).call(A,String(this.curProvider))+1)%A.length];if(re===A[0])throw new Error("uploadFile all policy fail");var xe=Wa(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(xe&&xe.retryNext&&re&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+re),this.curProvider=Lo(re),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var z=this.mixStorePolicy[this.curProvider===zi.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!z||z===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){F.logger.log("uploadFile:: upload policy will change,now policy:"+F.curProvider+" nextProvider:"+Lo(F.mixStorePolicy.providers[0])),F.curProvider=Lo(F.mixStorePolicy.providers[0]),F.core.timerManager.deleteTimer(F.circuitTimer)},1e3*z)}},x.process=function(F){var A=this[F.cmd+"Handler"];return typeof A=="function"?A.call(this,F):F.error&&!F.error.ignore?uo.reject(F.error):uo.resolve(F)},S}(),kd=Math.floor,$p=function(S,x){var $=S.length,F=kd($/2);return $<8?vy(S,x):bS(S,$p(mu(S,0,F),x),$p(mu(S,F),x),x)},vy=function(S,x){for(var $,F,A=S.length,re=1;re<A;){for(F=re,$=S[re];F&&x(S[F-1],$)>0;)S[F]=S[--F];F!==re++&&(S[F]=$)}return S},bS=function(S,x,$,F){for(var A=x.length,re=$.length,xe=0,z=0;xe<A||z<re;)S[xe+z]=xe<A&&z<re?F(x[xe],$[z])<=0?x[xe++]:$[z++]:xe<A?x[xe++]:$[z++];return S},zl=$p,yy=or.match(/firefox\/(\d+)/i),ic=!!yy&&+yy[1],ai=/MSIE|Trident/.test(or),by=or.match(/AppleWebKit\/(\d+)\./),Ty=!!by&&+by[1],sc=[],Kl=Ce(sc.sort),TS=Ce(sc.push),Sy=d(function(){sc.sort(void 0)}),SS=d(function(){sc.sort(null)}),My=Ui("sort"),bh=!d(function(){if(mr)return mr<70;if(!(ic&&ic>3)){if(ai)return!0;if(Ty)return Ty<603;var S,x,$,F,A="";for(S=65;S<76;S++){switch(x=String.fromCharCode(S),S){case 66:case 69:case 70:case 72:$=3;break;case 68:case 71:$=4;break;default:$=2}for(F=0;F<47;F++)sc.push({k:x+F,v:$})}for(sc.sort(function(re,xe){return xe.v-re.v}),F=0;F<sc.length;F++)x=sc[F].k.charAt(0),A.charAt(A.length-1)!==x&&(A+=x);return A!=="DGBEFHACIJK"}});Vr({target:"Array",proto:!0,forced:Sy||!SS||!My||!bh},{sort:function(x){x!==void 0&&Or(x);var $=jn(this);if(bh)return x===void 0?Kl($):Kl($,x);var F,A,re=[],xe=Ia($);for(A=0;A<xe;A++)A in $&&TS(re,$[A]);for(zl(re,function(z){return function(qe,At){return At===void 0?-1:qe===void 0?1:z!==void 0?+z(qe,At)||0:Oa(qe)>Oa(At)?1:-1}}(x)),F=Ia(re),A=0;A<F;)$[A]=re[A++];for(;A<xe;)xp($,A++);return $}});var Ic,Ts,Up,Bs=Uo("Array").sort,_d=Array.prototype,Wl=function(S){var x=S.sort;return S===_d||er(_d,S)&&x===_d.sort?Bs:x};(function(S){S[S.ASC=1]="ASC",S[S.DESC=2]="DESC"})(Ic||(Ic={})),function(S){S[S.reorderWeight=0]="reorderWeight",S[S.createTime=1]="createTime",S[S.totalMember=2]="totalMember"}(Ts||(Ts={})),function(S){S[S.square=1]="square",S[S.person=2]="person"}(Up||(Up={}));var gl=function(){function S(x,$){this.name=x,this.core=$,this.name=x,this.logger=$.logger,this.core=$}return S.prototype.process=function($){var F=this[$.cmd+"Handler"];return typeof F=="function"?F.call(this,$):$.error&&!$.error.ignore?uo.reject($.error):uo.resolve($)},S}(),wd={"24_15":"qchatSubscribe","24_27":"qchatGetUnreadInfo","24_48":"qchatCreateChannel","24_49":"qchatDeleteChannel","24_50":"qchatUpdateChannel","24_51":"qchatGetChannels","24_52":"qchatGetChannelsByPage","24_53":"qchatGetMembersByPage","24_54":"qchatUpdateWhiteBlackRole","24_55":"qchatGetWhiteBlackRolesPage","24_56":"qchatUpdateWhiteBlackMembers","24_57":"qchatGetWhiteBlackMembersPage","24_58":"qchatGetExistingWhiteBlackRoles","24_59":"qchatGetExistingWhiteBlackMembers","24_60":"qchatUpdateCategoryInfoOfChannel","24_109":"qchatCreateChannelCategory","24_110":"qchatRemoveChannelCategory","24_111":"qchatUpdateChannelCategory","24_112":"qchatGetChannelCategoriesByID","24_113":"qchatUpdateChannelCategoryWhiteBlackRole","24_114":"qchatGetChannelCategoryWhiteBlackRolesPage","24_115":"qchatUpdateChannelCategoryWhiteBlackMembers","24_116":"qchatGetChannelCategoryWhiteBlackMembersPage","24_117":"qchatGetChannelCategoryWhiteBlackRoles","24_118":"qchatGetChannelCategoryWhiteBlackMembers","24_119":"qchatGetChannelCategoriesPage","24_120":"qchatGetChannelCategoryChannelsPage","24_93":"qchatGetChannelSearchByPage","24_95":"qchatChannelMemberSearch","25_8":"qchatGetRoleIdsByServerId","25_9":"qchatSubscribeAsVisitor"},Th={serverId:1,channelId:2,ackTimestamp:3,unreadCount:4,mentionedCount:5,maxCount:6,lastMsgTime:7},Yo={channelInfo:{channelId:1,serverId:2,name:4,topic:5,ext:6,type:7,validFlag:8,createTime:9,updateTime:10,owner:11,viewMode:12,categoryId:13,syncMode:14,reorderWeight:15,visitorMode:16},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11},qchatSubReqTag:{type:1,opeType:2},qchatChannelIdInfoTag:{serverId:1,channelId:2},unreadInfo:Th,qchatGetChannelListPageTag:{serverId:1,timetag:2,limit:3},qchatGetMembersByPageTag:{serverId:1,channelId:2,timetag:3,limit:4},qchatUpdateWhiteBlackRoleTag:{serverId:1,channelId:2,type:3,opeType:4,roleId:5},qchatGetWhiteBlackRolesPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatUpdateWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,opeType:4,toAccids:5},qchatGetWhiteBlackMembersPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatGetExistingWhiteBlackRolesTag:{serverId:1,channelId:2,type:3,roleIds:4},qchatGetExistingWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,accids:4},QChatChannelCategoryInfo:{categoryId:1,serverId:2,name:4,ext:5,owner:6,viewMode:7,validFlag:8,createTime:9,updateTime:10,channelNumber:11},qchatUpdateChannelCategoryWhiteBlackRoleTag:{serverId:1,categoryId:2,type:3,opeType:4,roleId:5},qchatGetChannelCategoryWhiteBlackRolesPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatUpdateChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,opeType:4,toAccids:5},qchatGetChannelCategoryWhiteBlackMembersPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatGetChannelCategoryWhiteBlackRolesTag:{serverId:1,categoryId:2,type:3,roleIds:4},qchatGetChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,accids:4},qchatGetChannelCategoriesPageTag:{serverId:1,timetag:2,limit:3},qchatGetChannelCategoryChannelsPageTag:{serverId:1,categoryId:2,timetag:3,limit:4},qchatGetChannelSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverId:6,sort:7,cursor:8},qchatUpdateChannelTag:{channelId:1,name:4,topic:5,ext:6,viewMode:12,visitorMode:16},serverRoles:{serverId:1,roleIds:2,timeTag:3},qchatChannelMemberSearchTag:{serverId:1,channelId:2,keyword:3,limit:4},qchatChannelMemberInfo:{serverId:1,channelId:2,avatar:3,accid:4,nick:5,createTime:6,updateTime:7}},zo=Mc(Yo),Sh={qchatCreateChannel:{sid:24,cid:48,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Yo.channelInfo},{type:"Property",name:"antispamTag",reflectMapper:Yo.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatDeleteChannel:{sid:24,cid:49,service:"qchatChannel",params:[{type:"Long",name:"channelId"}]},qchatUpdateChannel:{sid:24,cid:50,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Yo.qchatUpdateChannelTag},{type:"Property",name:"antispamTag",reflectMapper:Yo.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatGetChannels:{sid:24,cid:51,service:"qchatChannel",params:[{type:"LongArray",name:"channelIds"}],response:[{type:"PropertyArray",name:"channelList",reflectMapper:zo.channelInfo}]},qchatGetChannelsByPage:{sid:24,cid:52,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelListPageTag",reflectMapper:Yo.qchatGetChannelListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatGetMembersByPage:{sid:24,cid:53,service:"qchatChannel",params:[{type:"Property",name:"qchatGetMembersByPageTag",reflectMapper:Yo.qchatGetMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatUpdateWhiteBlackRole:{sid:24,cid:54,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackRoleTag",reflectMapper:Yo.qchatUpdateWhiteBlackRoleTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetWhiteBlackRolesPage:{sid:24,cid:55,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackRolesPageTag",reflectMapper:Yo.qchatGetWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatUpdateWhiteBlackMembers:{sid:24,cid:56,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackMembersTag",reflectMapper:Yo.qchatUpdateWhiteBlackMembersTag}]},qchatGetWhiteBlackMembersPage:{sid:24,cid:57,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackMembersPageTag",reflectMapper:Yo.qchatGetWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetExistingWhiteBlackRoles:{sid:24,cid:58,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackRolesTag",reflectMapper:Yo.qchatGetExistingWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatGetExistingWhiteBlackMembers:{sid:24,cid:59,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackMembersTag",reflectMapper:Yo.qchatGetExistingWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatUpdateCategoryInfoOfChannel:{sid:24,cid:60,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateCategoryInfoOfChannelTag",reflectMapper:Yo.channelInfo}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatCreateChannelCategory:{sid:24,cid:109,service:"qchatChannel",params:[{type:"Property",name:"qchatCreateChannelCategoryTag",reflectMapper:Yo.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatRemoveChannelCategory:{sid:24,cid:110,service:"qchatChannel",params:[{type:"Long",name:"categoryId"}]},qchatUpdateChannelCategory:{sid:24,cid:111,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryTag",reflectMapper:Yo.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatGetChannelCategoriesByID:{sid:24,cid:112,service:"qchatChannel",params:[{type:"LongArray",name:"categoryIds"}],response:[{type:"PropertyArray",name:"channelCategoryList",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatUpdateChannelCategoryWhiteBlackRole:{sid:24,cid:113,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackRoleTag",reflectMapper:Yo.qchatUpdateChannelCategoryWhiteBlackRoleTag}]},qchatGetChannelCategoryWhiteBlackRolesPage:{sid:24,cid:114,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesPageTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatUpdateChannelCategoryWhiteBlackMembers:{sid:24,cid:115,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackMembersTag",reflectMapper:Yo.qchatUpdateChannelCategoryWhiteBlackMembersTag}]},qchatGetChannelCategoryWhiteBlackMembersPage:{sid:24,cid:116,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersPageTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetChannelCategoryWhiteBlackRoles:{sid:24,cid:117,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatGetChannelCategoryWhiteBlackMembers:{sid:24,cid:118,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetChannelCategoriesPage:{sid:24,cid:119,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoriesPageTag",reflectMapper:Yo.qchatGetChannelCategoriesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatGetChannelCategoryChannelsPage:{sid:24,cid:120,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryChannelsPageTag",reflectMapper:Yo.qchatGetChannelCategoryChannelsPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatSubscribe:{sid:24,cid:15,service:"qchatChannel",params:[{type:"Property",name:"qchatSubReqTag",reflectMapper:Yo.qchatSubReqTag},{type:"PropertyArray",name:"channels",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:zo.unreadInfo},{type:"PropertyArray",name:"failedChannels",reflectMapper:zo.qchatChannelIdInfoTag}]},qchatGetUnreadInfo:{sid:24,cid:27,service:"qchatChannel",params:[{type:"PropertyArray",name:"channels",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:zo.unreadInfo}]},qchatGetChannelSearchByPage:{sid:24,cid:93,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelSearchByPageTag",reflectMapper:Yo.qchatGetChannelSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatGetRoleIdsByServerId:{sid:25,cid:8,service:"qchatChannel",params:[{type:"Property",name:"qchatGetRoleIdsByServerIdTag",reflectMapper:{serverIdTimeTags:1}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:zo.serverRoles},{type:"LongArray",name:"failServerIds"}]},qchatChannelMemberSearch:{sid:24,cid:95,service:"qchatChannel",params:[{type:"Property",name:"qchatChannelMemberSearchTag",reflectMapper:Yo.qchatChannelMemberSearchTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.qchatChannelMemberInfo}]},qchatSubscribeAsVisitor:{sid:25,cid:9,service:"qchatChannel",params:[{type:"Property",name:"tag",reflectMapper:Yo.qchatSubReqTag},{type:"PropertyArray",name:"datas",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"failedArr",reflectMapper:zo.qchatChannelIdInfoTag}]}},Cy={"24_31":"qchatCreateServer","24_32":"qchatDeleteServer","24_33":"qchatUpdateServer","24_34":"qchatGetServers","24_35":"qchatGetServersByPage","24_36":"qchatInviteServerMembers","24_37":"qchatAcceptServerInvite","24_38":"qchatRejectInviteServer","24_39":"qchatApplyServerJoin","24_40":"qchatAcceptServerApply","24_41":"qchatRejectServerApply","24_42":"qchatKickServerMembers","24_43":"qchatLeaveServer","24_44":"qchatUpdateMyMemberInfo","24_45":"qchatUpdateServerMemberInfo","24_46":"qchatGetServerMembers","24_47":"qchatGetServerMembersByPage","24_104":"qchatUpdateServerMemberBan","24_105":"qchatGetBannedMembersByPage","24_91":"qchatServerSearchByPage","24_92":"qchatServerMemberSearchByPage","24_122":"qchatGenerateInviteCode","24_123":"qchatJoinByInviteCode","24_124":"qchatGetInviteApplyRecordOfServer","24_125":"qchatGetInviteApplyRecordOfSelf","25_5":"qchatClearServersUnread","25_7":"qchatSubscribeChannelsByServers","25_10":"qchatEnterAsVisitor","25_11":"qchatLeaveAsVisitor"},Ha={serverInfo:{serverId:1,name:3,icon:4,ext:5,owner:6,memberNumber:7,inviteMode:8,applyMode:9,validFlag:10,createTime:11,updateTime:12,channelNumber:13,categoryNumber:14,searchType:15,searchEnable:16,reorderWeight:17},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},otherMemberInfo:{serverId:1,accid:3,nick:4,avatar:5,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},getServerListPageTag:{timestamp:1,limit:2},getServerMemberListPageTag:{serverId:1,timetag:2,limit:3},updateServerMemberBanTag:{serverId:1,opeType:2,accid:3,ext:4},getBannedMembersByPageTag:{serverId:1,timetag:2,limit:3},serverMemberBanInfo:{serverId:1,appid:2,accid:3,ext:4,banTime:5,validFlag:6,createTime:7,updateTime:8},serverSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverType:6,searchType:7,sort:8,cursor:9},serverMemberSearchByPageTag:{serverId:1,keyword:3,limit:4},inviteRespParamTag:{requestId:1},applyRespParamTag:{requestId:1,expireTime:2},inviteApplyRecord:{accid:1,type:2,serverId:3,status:4,requestId:5,createTime:6,updateTime:7,expireTime:8,data:9,recordId:10},clearServersUnreadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},unreadInfo:Th},La=Mc(Ha),Ec={qchatCreateServer:{sid:24,cid:31,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:Ha.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:La.serverInfo}]},qchatDeleteServer:{sid:24,cid:32,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateServer:{sid:24,cid:33,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:Ha.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:La.serverInfo}]},qchatGetServers:{sid:24,cid:34,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"serverList",reflectMapper:La.serverInfo}]},qchatGetServersByPage:{sid:24,cid:35,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getServerListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverInfo}]},qchatInviteServerMembers:{sid:24,cid:36,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"StrArray",name:"failByOverAccids"},{type:"StrArray",name:"failByBanAccids"},{type:"Property",name:"record",reflectMapper:La.applyRespParamTag}]},qchatAcceptServerInvite:{sid:24,cid:37,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:Ha.inviteRespParamTag}]},qchatRejectInviteServer:{sid:24,cid:38,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:Ha.inviteRespParamTag}]},qchatApplyServerJoin:{sid:24,cid:39,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"Property",name:"data",reflectMapper:La.applyRespParamTag}]},qchatAcceptServerApply:{sid:24,cid:40,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:Ha.applyRespParamTag}]},qchatRejectServerApply:{sid:24,cid:41,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:Ha.applyRespParamTag}]},qchatKickServerMembers:{sid:24,cid:42,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"}]},qchatLeaveServer:{sid:24,cid:43,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateMyMemberInfo:{sid:24,cid:44,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:Ha.memberInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:La.memberInfo}]},qchatUpdateServerMemberInfo:{sid:24,cid:45,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:Ha.otherMemberInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:La.memberInfo}]},qchatGetServerMembers:{sid:24,cid:46,service:"qchatServer",params:[{type:"StrArray",name:"accids"}],response:[{type:"PropertyArray",name:"accidList",reflectMapper:La.memberInfo}]},qchatGetServerMembersByPage:{sid:24,cid:47,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getServerMemberListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.memberInfo}]},qchatUpdateServerMemberBan:{sid:24,cid:104,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.updateServerMemberBanTag}]},qchatGetBannedMembersByPage:{sid:24,cid:105,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getBannedMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverMemberBanInfo}]},qchatServerSearchByPage:{sid:24,cid:91,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.serverSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverInfo}]},qchatServerMemberSearchByPage:{sid:24,cid:92,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.serverMemberSearchByPageTag}],response:[{type:"PropertyArray",name:"members",reflectMapper:La.serverMemberBanInfo}]},qchatGenerateInviteCode:{sid:24,cid:122,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,ttl:2}}],response:[{type:"Property",name:"data",reflectMapper:{1:"serverId",2:"requestId",3:"inviteCode",4:"expireTime"}}]},qchatJoinByInviteCode:{sid:24,cid:123,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,inviteCode:2,ps:3}}]},qchatGetInviteApplyRecordOfServer:{sid:24,cid:124,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,fromTime:2,toTime:3,reverse:4,limit:5,cursor:6}}],response:[{type:"PropertyArray",name:"data",reflectMapper:La.inviteApplyRecord}]},qchatGetInviteApplyRecordOfSelf:{sid:24,cid:125,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{fromTime:1,toTime:2,reverse:3,limit:4,cursor:5}}],response:[{type:"PropertyArray",name:"data",reflectMapper:La.inviteApplyRecord}]},qchatClearServersUnread:{sid:25,cid:5,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"Property",name:"clearServersUnreadTag",reflectMapper:La.clearServersUnreadTag}]},qchatSubscribeChannelsByServers:{sid:25,cid:7,service:"qchatServer",params:[{type:"int",name:"type"},{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:La.unreadInfo},{type:"LongArray",name:"failServerIds"}]},qchatEnterAsVisitor:{sid:25,cid:10,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]},qchatLeaveAsVisitor:{sid:25,cid:11,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]}},ii=Function.prototype,MS=Object.prototype,ky=ii.toString,CS=MS.hasOwnProperty,kS=ky.call(Object),qp=function(x){if(!ui(x)||Ji(x)!="[object Object]")return!1;var $=uy(x);if($===null)return!0;var F=CS.call($,"constructor")&&$.constructor;return typeof F=="function"&&F instanceof F&&ky.call(F)==kS};function va(S,x){if(!qp(x))return{};var $=JSON.parse(mo(x)),F=_y(S,$);return JSON.parse(mo(Tn(Tn({},$),F)))}function _y(S,x){if(!qp(x))return{};var $={},F=na(S);return In(F).call(F,function(A){var re=S[A].type;if(typeof re!="string"){var xe=_y(S[A],x);na(xe).length>0&&($[A]=xe)}else{var z=S[A],qe=z.rawKey||A,At=_S[re](x,qe,z);At!==void 0&&(x[qe]=void 0,$[A]=At)}}),$}var _S={number:function(x,$){if(x[$]!==void 0)return+x[$]},string:function(x,$){if(x[$]!==void 0)return x[$]},boolean:function(x,$){return+x[$]>0||+x[$]!=0&&void 0},enum:function(x,$,F){return sp(F)[x[$]]},object:function(x,$){if(x[$]!==void 0)try{return JSON.parse(x[$])}catch{return{}}}};function Gl(S,x){if(!qp(x))return{};var $=JSON.parse(mo(x)),F=wy(S,$);return JSON.parse(mo(Tn(Tn({},$),F)))}function wy(S,x){var $;if(!qp(x))return Sc($=na(S)).call($,function(re,xe){return re[S[xe].rawKey||xe]=void 0,re},{});var F={},A=na(S);return In(A).call(A,function(re){var xe=S[re].type;if(typeof xe!="string"){var z=wy(S[re],x[re]);return Tn(F,z),void(x[re]=void 0)}var qe=S[re],At=qe.rawKey||re,lr=Vp[xe](x,re,qe);x[At]=void 0,F[At]=lr}),F}var Vp={number:function(x,$){return x[$]},string:function(x,$){return x[$]},boolean:function(x,$){return x[$]===!0?1:x[$]===!1?0:void 0},enum:function(x,$,F){return sp(F)[x[$]]},object:function(x,$){if(x[$]!==void 0)try{return mo(x[$])}catch{return""}}},Mh=Vp,xy={serverId:{type:"string"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"},owner:{type:"string"},memberNumber:{type:"number"},inviteMode:{type:"number"},applyMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"},categoryNumber:{type:"number"},searchType:{type:"number"},searchEnable:{type:"boolean"},reorderWeight:{type:"string"}},wS={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},xS={serverId:{type:"string"},appid:{type:"string"},accid:{type:"string"},ext:{type:"string"},banTime:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}};function xd(S){return va(xy,S)}function Ch(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return xd(x)}):[]}function Ql(S){return va(wS,S)}function cc(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return Ql(x)}):[]}function IS(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return function(F){return va(xS,F)}(x)}):[]}function Pc(S){var x,$,F;if(!S.antispamTag)return{};var A=Tn({},S.antispamTag);return!((x=S.antispamTag)===null||x===void 0)&&x.antiSpamBusinessId&&typeof(($=S.antispamTag)===null||$===void 0?void 0:$.antiSpamBusinessId)!="string"&&(A.antiSpamBusinessId=mo((F=S.antispamTag)===null||F===void 0?void 0:F.antiSpamBusinessId)),A}var ES={accid:{type:"string"},type:{type:"number"},serverId:{type:"string"},status:{type:"number"},requestId:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"},expireTime:{type:"number"},data:{type:"object"}};function Id(S){return va(ES,S)}function Iy(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return Id(x)}):[]}var Hp,ca,es,hl,PS={successServerIds:{type:"object"},failServerIds:{type:"object"},ackTimestamp:{type:"number"}};function vl(S){return va(PS,S)}(function(S){S[S.reorderWeight=0]="reorderWeight",S[S.createTime=1]="createTime"})(Hp||(Hp={})),function(S){S[S.white=1]="white",S[S.black=2]="black"}(ca||(ca={})),function(S){S[S.add=1]="add",S[S.remove=2]="remove"}(es||(es={})),function(S){S[S.message=0]="message",S[S.media=1]="media",S[S.ext=100]="ext"}(hl||(hl={}));var Ed={channelId:{type:"string"},serverId:{type:"string"},name:{type:"string"},topic:{type:"string"},ext:{type:"string"},type:{type:"enum",values:hl},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},viewMode:{type:"number"},categoryId:{type:"string"},syncMode:{type:"number"},visitorMode:{type:"number"},reorderWeight:{type:"string"}},AS={serverId:{type:"string"},channelId:{type:"string"},ackTimestamp:{type:"number"},unreadCount:{type:"number"},mentionedCount:{type:"number"},maxCount:{type:"number"},lastMsgTime:{type:"number"}},Ey={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:ca},opeType:{type:"enum",values:es},toAccids:{type:"object"}},zp={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:ca},opeType:{type:"enum",values:es},roleId:{type:"string"}},OS={categoryId:{type:"string"},serverId:{type:"string"},name:{type:"string"},ext:{type:"string"},owner:{type:"string"},viewMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"}},Py={serverId:{type:"string"},channelId:{type:"string"},accid:{type:"string"},avatar:{type:"string"},nick:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Pd(S){return va(zp,S)}function Ad(S){return va(Ed,S)}function Od(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return Ad(x)}):[]}function kh(S){return va(AS,S)}function Rd(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return kh(x)}):[]}function Nd(S){return va(OS,S)}function _h(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return Nd(x)}):[]}function RS(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return function(F){return va(Py,F)}(x)}):[]}function Bd(S){try{return JSON.parse(S)}catch{return[]}}var Kp=xs?xs.isConcatSpreadable:void 0,NS=function(x){return Rs(x)||Zg(x)||!!(Kp&&x&&x[Kp])},Ay=function S(x,$,F,A,re){var xe=-1,z=x.length;for(F||(F=NS),re||(re=[]);++xe<z;){var qe=x[xe];$>0&&F(qe)?$>1?S(qe,$-1,F,A,re):Oi(re,qe):A||(re[re.length]=qe)}return re},wh=Av(function(S,x){return En(S)?Ng(S,Ay(x,1,En,!0)):[]}),Wp=wh;function xh(S,x){var $,F=ga!==void 0&&Va(S)||S["@@iterator"];if(F)return Oo($=(F=F.call(S)).next).call($,F);if(ni(S)||(F=function(xe,z){var qe;if(xe){if(typeof xe=="string")return Ih(xe,z);var At=Mo(qe=Object.prototype.toString.call(xe)).call(qe,8,-1);if(At==="Object"&&xe.constructor&&(At=xe.constructor.name),At==="Map"||At==="Set")return _c(xe);if(At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At))return Ih(xe,z)}}(S))||x&&S&&typeof S.length=="number"){F&&(S=F);var A=0;return function(){return A>=S.length?{done:!0}:{done:!1,value:S[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ih(S,x){(x==null||x>S.length)&&(x=S.length);for(var $=0,F=new Array(x);$<x;$++)F[$]=S[$];return F}var Jl,Fd,yl,bl,BS=function(S){function x(F){var A;return(A=S.call(this,"qchatServer",F)||this).core=F,Ps({cmdMap:Cy,cmdConfig:Ec}),A}No(x,S);var $=x.prototype;return $.createServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatCreateServer",{serverInfo:Tn(Tn({},A),{searchEnable:A.searchEnable===!1?0:1}),antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",xd(xe.content.serverInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.deleteServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1}},A),z.next=3,this.core.sendCmd("qchatDeleteServer",A);case 3:case"end":return z.stop()}},re,this)}))},$.updateServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",min:1},icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateServer",{serverInfo:Tn(Tn({},A),{searchEnable:A.searchEnable===!1?0:1}),antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",xd(xe.content.serverInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.getServers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverIds:{type:"array",itemType:"string",min:1}},A),qe.next=3,this.core.sendCmd("qchatGetServers",A);case 3:return xe=qe.sent,qe.abrupt("return",Ch(xe.content.serverList));case 5:case"end":return qe.stop()}},re,this)}))},$.getServersByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({timestamp:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetServersByPage",{tag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:Ch(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.inviteServerMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},A),At.next=3,this.core.sendCmd("qchatInviteServerMembers",A);case 3:return xe=At.sent,z=xe.content.record||{},At.abrupt("return",{failByOverAccids:xe.content.failByOverAccids,failByBanAccids:xe.content.failByBanAccids,recordInfo:Id(z)});case 6:case"end":return At.stop()}},re,this)}))},$.acceptServerInvite=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},A),z.next=3,this.core.sendCmd("qchatAcceptServerInvite",A);case 3:case"end":return z.stop()}},re,this)}))},$.rejectInviteServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},A),z.next=3,this.core.sendCmd("qchatRejectInviteServer",A);case 3:case"end":return z.stop()}},re,this)}))},$.applyServerJoin=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},A),qe.next=3,this.core.sendCmd("qchatApplyServerJoin",A);case 3:return xe=qe.sent,qe.abrupt("return",Id(xe.content.data));case 5:case"end":return qe.stop()}},re,this)}))},$.acceptServerApply=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},accid:{type:"string",min:1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},A),z.next=3,this.core.sendCmd("qchatAcceptServerApply",A);case 3:case"end":return z.stop()}},re,this)}))},$.rejectServerApply=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},A),z.next=3,this.core.sendCmd("qchatRejectServerApply",A);case 3:case"end":return z.stop()}},re,this)}))},$.kickServerMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1}},A),z.next=3,this.core.sendCmd("qchatKickServerMembers",A);case 3:case"end":return z.stop()}},re,this)}))},$.leaveServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1}},A),z.next=3,this.core.sendCmd("qchatLeaveServer",A);case 3:case"end":return z.stop()}},re,this)}))},$.updateMyMemberInfo=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",min:1},accid:{type:"string",required:!1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1},ext:{type:"string",required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateMyMemberInfo",{memberInfo:A,antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",Ql(xe.content.memberInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.updateServerMemberInfo=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",min:1},accid:{type:"string",min:1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateServerMemberInfo",{memberInfo:A,antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",Ql(xe.content.memberInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.getServerMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(Wr({accids:{type:"array"}},A),xe=[],A.accids.length)for(z=xh(A.accids);!(qe=z()).done;)At=qe.value,xe.push(At.serverId+"|"+At.accid);return Sr.next=5,this.core.sendCmd("qchatGetServerMembers",{accids:xe});case 5:return lr=Sr.sent,Sr.abrupt("return",cc(lr.content.accidList));case 7:case"end":return Sr.stop()}},re,this)}))},$.getServerMembersByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetServerMembersByPage",{tag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:cc(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.subscribeServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Wr({type:{type:"number",min:4,max:4,required:!1},opeType:{type:"number",min:1,max:2}},A),A.type||(A.type=4),!A.servers.length){fr.next=10;break}return z=Tn(Tn({},A),{channels:ho(xe=A.servers).call(xe,function(Sr){return{serverId:Sr.serverId,channelId:""}})}),fr.next=6,this.core.qchatChannel.subscribeModuleService.subscribe(z);case 6:return qe=fr.sent,At=qe.failedChannels,this.core.qchatChannel.subscribeModuleService.cacheSubscribe(z),fr.abrupt("return",{failedServers:At});case 10:case"end":return fr.stop()}},re,this)}))},$.banServerMember=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},A),z.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Tn(Tn({},A),{opeType:1})});case 3:case"end":return z.stop()}},re,this)}))},$.unbanServerMember=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},A),z.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Tn(Tn({},A),{opeType:2})});case 3:case"end":return z.stop()}},re,this)}))},$.getBannedMembersByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetBannedMembersByPage",{tag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:IS(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.serverSearchByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Wr({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},serverType:{type:"array",itemType:"number",min:0,required:!1},order:{type:"enum",values:sa(Ic),required:!1},searchType:{type:"enum",values:sa(Up)},sort:{type:"enum",values:sa(Ts),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},A),!(A.startTime&&A.endTime&&A.startTime>=A.endTime)){fr.next=3;break}throw new al("startTime more than endTime",A,"timeRule");case 3:return fr.next=5,this.core.sendCmd("qchatServerSearchByPage",{tag:Tn(Tn({},A),{order:A.order&&Ic[A.order],searchType:Up[A.searchType],sort:Wl(A)&&Ts[Wl(A)],serverType:mo(A.serverType)})});case 5:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag),cursor:At.cursor},datas:Ch(qe)});case 8:case"end":return fr.stop()}},re,this)}))},$.serverMemberSearchByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatServerMemberSearchByPage",{tag:A});case 3:return xe=qe.sent,qe.abrupt("return",cc(xe.content.members));case 5:case"end":return qe.stop()}},re,this)}))},$.generateInviteCode=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},ttl:{type:"number",min:0,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGenerateInviteCode",{tag:A});case 3:return xe=qe.sent,qe.abrupt("return",va({expireTime:{type:"number"}},xe.content.data));case 5:case"end":return qe.stop()}},re,this)}))},$.joinByInviteCode=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},inviteCode:{type:"string",allowEmpty:!1},ps:{type:"string",required:!1}},A),z.next=3,this.core.sendCmd("qchatJoinByInviteCode",{tag:A});case 3:case"end":return z.stop()}},re,this)}))},$.getInviteApplyRecordOfServer=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfServer",{tag:Tn(Tn({},A),{reverse:kl(A)?1:0})});case 3:return xe=qe.sent,qe.abrupt("return",Iy(xe.content.data));case 5:case"end":return qe.stop()}},re,this)}))},$.getInviteApplyRecordOfSelf=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfSelf",{tag:Tn(Tn({},A),{reverse:kl(A)?1:0})});case 3:return xe=qe.sent,qe.abrupt("return",Iy(xe.content.data));case 5:case"end":return qe.stop()}},re,this)}))},$.markRead=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverIds:{type:"array",itemType:"string",required:!0}},A),fr.next=3,this.core.sendCmd("qchatClearServersUnread",A);case 3:return xe=fr.sent,z=vl(xe.content.clearServersUnreadTag),qe=z.successServerIds,At=z.ackTimestamp,this.logger.log("qchatServer::clearServersUnread:: begin auto clear servers unreadInfo"),this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",qe,At),fr.abrupt("return",z);case 9:case"end":return fr.stop()}},re,this)}))},$.subscribeAllChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({type:{type:"number",required:!0},serverIds:{type:"array",itemType:"string",required:!0,max:10}},A),lr.next=3,this.core.sendCmd("qchatSubscribeChannelsByServers",A,{timeout:3e4});case 3:return(z=lr.sent).content.unreadInfos=Rd(z.content.unreadInfos),z.content.failServerIds=Bd(z.content.failServerIds),qe={type:A.type,opeType:1,channels:ho(xe=z.content.unreadInfos).call(xe,function(fr){return{serverId:fr.serverId,channelId:fr.channelId}})},this.core.eventBus.emit("qchatChannel/cacheSubscribe",qe),this.core.eventBus.emit("qchatChannel/getRoleIdsByServerId",A.serverIds),this.core.eventBus.emit("qchatChannel/updateUnreads",z.content.unreadInfos),lr.abrupt("return",z.content);case 11:case"end":return lr.stop()}},re,this)}))},$.enterAsVisitor=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({serverIds:{type:"array",itemType:"string",min:1}},A),lr.next=3,this.core.sendCmd("qchatEnterAsVisitor",{tag:{serverIds:mo(A.serverIds)}});case 3:return xe=lr.sent,z=Bd(xe.content.failServerIds),qe=Wp(A.serverIds,z),this.core.qchatChannel.subscribeForVisitorService.cacheServer(qe),lr.abrupt("return",{failedServers:z});case 8:case"end":return lr.stop()}},re,this)}))},$.leaveAsVisitor=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At=this;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverIds:{type:"array",itemType:"string",min:1}},A),fr.next=3,this.core.sendCmd("qchatLeaveAsVisitor",{tag:{serverIds:mo(A.serverIds)}});case 3:return xe=fr.sent,z=Bd(xe.content.failServerIds),qe=Wp(A.serverIds,z),In(qe).call(qe,function(Sr){At.core.qchatChannel.subscribeForVisitorService.deleteServer(Sr)}),fr.abrupt("return",{failedServers:z});case 8:case"end":return fr.stop()}},re,this)}))},$.subscribeAsVisitor=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Wr({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},serverIds:{type:"array",itemType:"string",min:1}},A),!A.serverIds.length){z.next=5;break}return z.next=4,this.core.qchatChannel.subscribeForVisitorService.subscribeServerAsVisitor(A);case 4:return z.abrupt("return",z.sent);case 5:return z.abrupt("return",{failedServers:[]});case 6:case"end":return z.stop()}},re,this)}))},x}(gl);(function(S){S[S.everyone=1]="everyone",S[S.custom=2]="custom"})(Jl||(Jl={})),function(S){S[S.normal=0]="normal",S[S.owner=1]="owner"}(Fd||(Fd={})),function(S){S[S.ignore=0]="ignore",S[S.deny=-1]="deny",S[S.allow=1]="allow"}(yl||(yl={})),function(S){S[S.manageServer=1]="manageServer",S[S.manageChannel=2]="manageChannel",S[S.manageRole=3]="manageRole",S[S.sendMsg=4]="sendMsg",S[S.accountInfoSelf=5]="accountInfoSelf",S[S.inviteServer=6]="inviteServer",S[S.kickServer=7]="kickServer",S[S.accountInfoOther=8]="accountInfoOther",S[S.recallMsg=9]="recallMsg",S[S.deleteMsg=10]="deleteMsg",S[S.remindOther=11]="remindOther",S[S.remindEveryone=12]="remindEveryone",S[S.manageBlackWhiteList=13]="manageBlackWhiteList",S[S.banServerMember=14]="banServerMember",S[S.RTCChannelConnect=15]="RTCChannelConnect",S[S.RTCChannelDisconnectOther=16]="RTCChannelDisconnectOther",S[S.RTCChannelOpenMicrophone=17]="RTCChannelOpenMicrophone",S[S.RTCChannelOpenCamera=18]="RTCChannelOpenCamera",S[S.RTCChannelOpenCloseOtherMicrophone=19]="RTCChannelOpenCloseOtherMicrophone",S[S.RTCChannelOpenCloseOtherCamera=20]="RTCChannelOpenCloseOtherCamera",S[S.RTCChannelOpenCloseEveryoneMicrophone=21]="RTCChannelOpenCloseEveryoneMicrophone",S[S.RTCChannelOpenCloseEveryoneCamera=22]="RTCChannelOpenCloseEveryoneCamera",S[S.RTCChannelOpenShareScreen=23]="RTCChannelOpenShareScreen",S[S.RTCChannelCloseOtherShareScreen=24]="RTCChannelCloseOtherShareScreen",S[S.manageInviteApply=25]="manageInviteApply",S[S.manageInviteApplyHistory=26]="manageInviteApplyHistory",S[S.mentionedRole=27]="mentionedRole"}(bl||(bl={}));var Oy={type:{type:"enum",values:Jl},memberType:{type:"enum",values:Fd},createTime:{type:"number"},updateTime:{type:"number"},priority:{type:"number"},memberCount:{type:"number"},joinTime:{type:"number"}},FS={roleId:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},type:{type:"enum",values:Jl},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"}},LS={id:{type:"string"},accid:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},memberType:{type:"enum",values:Fd},joinTime:{type:"number"},inviter:{type:"string"}};function Ac(S){var x=Tn({},S),$=Gl(Oy,x);return $.auths&&($.auths=function(A){var re,xe=Sc(re=na(A)).call(re,function(z,qe){var At=bl[qe];return At?z[At]=yl[A[qe]]:z[qe]=yl[A[qe]],z},{});return mo(xe)}($.auths)),$}function Ss(S){var x;return Sc(x=na(S)).call(x,function($,F){var A=Bv(bl,F);return A?$[A]=yl[S[F]]:$[Lo(F)]=yl[S[F]],$},{})}function pi(S){var x=va(Oy,S);return S.auths&&(x.auths=Ss(JSON.parse(x.auths))),x.isMember&&delete x.isMember,x}function Ki(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return pi(x)}):[]}function Gp(S){return S.auths&&(S.auths=Ss(JSON.parse(S.auths))),va(FS,S)}function Yl(S){return S.auths&&(S.auths=Ss(JSON.parse(S.auths))),va(LS,S)}Qh("Set",function(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}},od);var Ry=nr.Set;Vr({target:"Set",stat:!0,forced:!0},{from:ag}),Vr({target:"Set",stat:!0,forced:!0},{of:Yh}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var x=Vn(this),$=Or(x.add),F=0,A=arguments.length;F<A;F++)de($,x,arguments[F]);return x}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:Xh});var Tl=Ws;Vr({target:"Set",proto:!0,real:!0,forced:!0},{every:function(x){var $=Vn(this),F=Tl($),A=jo(x,arguments.length>1?arguments[1]:void 0);return!lo(F,function(re,xe){if(!A(re,re,$))return xe()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(x){var $=Vn(this),F=new(Ci($,$e("Set")))($),A=Or(F.delete);return lo(x,function(re){de(A,F,re)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(x){var $=Vn(this),F=Tl($),A=jo(x,arguments.length>1?arguments[1]:void 0),re=new(Ci($,$e("Set"))),xe=Or(re.add);return lo(F,function(z){A(z,z,$)&&de(xe,re,z)},{IS_ITERATOR:!0}),re}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{find:function(x){var $=Vn(this),F=Tl($),A=jo(x,arguments.length>1?arguments[1]:void 0);return lo(F,function(re,xe){if(A(re,re,$))return xe(re)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(x){var $=Vn(this),F=new(Ci($,$e("Set"))),A=Or($.has),re=Or(F.add);return lo(x,function(xe){de(A,$,xe)&&de(re,F,xe)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(x){var $=Vn(this),F=Or($.has);return!lo(x,function(A,re){if(de(F,$,A)===!0)return re()},{INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(x){var $=Ws(this),F=Vn(x),A=F.has;return ae(A)||(F=new($e("Set"))(x),A=Or(F.has)),!lo($,function(re,xe){if(de(A,F,re)===!1)return xe()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(x){var $=Vn(this),F=Or($.has);return!lo(x,function(A,re){if(de(F,$,A)===!1)return re()},{INTERRUPTED:!0}).stopped}});var Ny=Ce([].join),jS=[].push;Vr({target:"Set",proto:!0,real:!0,forced:!0},{join:function(x){var $=Vn(this),F=Tl($),A=x===void 0?",":Oa(x),re=[];return lo(F,jS,{that:re,IS_ITERATOR:!0}),Ny(re,A)}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{map:function(x){var $=Vn(this),F=Tl($),A=jo(x,arguments.length>1?arguments[1]:void 0),re=new(Ci($,$e("Set"))),xe=Or(re.add);return lo(F,function(z){de(xe,re,A(z,z,$))},{IS_ITERATOR:!0}),re}});var By=TypeError;Vr({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(x){var $=Vn(this),F=Tl($),A=arguments.length<2,re=A?void 0:arguments[1];if(Or(x),lo(F,function(xe){A?(A=!1,re=xe):re=x(re,xe,xe,$)},{IS_ITERATOR:!0}),A)throw By("Reduce of empty set with no initial value");return re}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{some:function(x){var $=Vn(this),F=Tl($),A=jo(x,arguments.length>1?arguments[1]:void 0);return lo(F,function(re,xe){if(A(re,re,$))return xe()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(x){var $=Vn(this),F=new(Ci($,$e("Set")))($),A=Or(F.delete),re=Or(F.add);return lo(x,function(xe){de(A,F,xe)||de(re,F,xe)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{union:function(x){var $=Vn(this),F=new(Ci($,$e("Set")))($);return lo(x,Or(F.add),{that:F}),F}});var Qp,Ld,Ms,jd,Oc,Xo,lc,Xl=Ry;(function(S){S[S.sendTime=1]="sendTime"})(Qp||(Qp={})),function(S){S[S.text=0]="text",S[S.image=1]="image",S[S.audio=2]="audio",S[S.video=3]="video",S[S.geo=4]="geo",S[S.notification=5]="notification",S[S.file=6]="file",S[S.tip=10]="tip",S[S.robot=11]="robot",S[S.g2=12]="g2",S[S.custom=100]="custom"}(Ld||(Ld={})),function(S){S[S.sending=1]="sending",S[S.success=2]="success",S[S.failed=3]="failed"}(Ms||(Ms={})),function(S){S[S.notifyAll=1]="notifyAll",S[S.notifySubscribe=2]="notifySubscribe"}(jd||(jd={})),function(S){S[S.unknown=0]="unknown",S[S.server=1]="server",S[S.channel=2]="channel",S[S.serverAccids=3]="serverAccids",S[S.channelAccids=4]="channelAccids",S[S.accids=5]="accids"}(Oc||(Oc={})),function(S){S[S.serverMemberInvite=1]="serverMemberInvite",S[S.serverMemberInviteReject=2]="serverMemberInviteReject",S[S.serverMemberApply=3]="serverMemberApply",S[S.serverMemberApplyReject=4]="serverMemberApplyReject",S[S.serverCreate=5]="serverCreate",S[S.serverRemove=6]="serverRemove",S[S.serverUpdate=7]="serverUpdate",S[S.serverMemberInviteDone=8]="serverMemberInviteDone",S[S.serverMemberInviteAccept=9]="serverMemberInviteAccept",S[S.serverMemberApplyDone=10]="serverMemberApplyDone",S[S.serverMemberApplyAccept=11]="serverMemberApplyAccept",S[S.serverMemberKick=12]="serverMemberKick",S[S.serverMemberLeave=13]="serverMemberLeave",S[S.serverMemberUpdate=14]="serverMemberUpdate",S[S.channelCreate=15]="channelCreate",S[S.channelRemove=16]="channelRemove",S[S.channelUpdate=17]="channelUpdate",S[S.channelUpdateWhiteBlackIdentify=18]="channelUpdateWhiteBlackIdentify",S[S.channelUpdateWhiteBlackIdentifyUser=19]="channelUpdateWhiteBlackIdentifyUser",S[S.updateQuickComment=20]="updateQuickComment",S[S.channelCategoryCreate=21]="channelCategoryCreate",S[S.channelCategoryRemove=22]="channelCategoryRemove",S[S.channelCategoryUpdate=23]="channelCategoryUpdate",S[S.channelCategoryUpdateWhiteBlackIdentify=24]="channelCategoryUpdateWhiteBlackIdentify",S[S.channelCategoryUpdateWhiteBlackIdentifyUser=25]="channelCategoryUpdateWhiteBlackIdentifyUser",S[S.serverIdentifyAdd=26]="serverIdentifyAdd",S[S.serverIdentifyRemove=27]="serverIdentifyRemove",S[S.serverIdentifyUpdate=28]="serverIdentifyUpdate",S[S.channelIdentifyUpdate=29]="channelIdentifyUpdate",S[S.userIdentifyUpdate=30]="userIdentifyUpdate",S[S.channelVisibilityUpdate=31]="channelVisibilityUpdate",S[S.serverEnterLeave=32]="serverEnterLeave",S[S.serverMemberJoinByInviteCode=33]="serverMemberJoinByInviteCode",S[S.channelVisibilityToVisitorUpdate=34]="channelVisibilityToVisitorUpdate",S[S.myMemberInfoUpdated=35]="myMemberInfoUpdated",S[S.custom=100]="custom",S[S.msgTyping=101]="msgTyping"}(Xo||(Xo={})),function(S){S[S.reply=1]="reply",S[S.thread=2]="thread",S[S.all=3]="all"}(lc||(lc={}));var Eh=function(){return Hi.Date.now()},DS=/\s/,$S=function(x){for(var $=x.length;$--&&DS.test(x.charAt($)););return $},US=/^\s+/,qS=function(x){return x&&x.slice(0,$S(x)+1).replace(US,"")},VS=/^[-+]0x[0-9a-f]+$/i,HS=/^0b[01]+$/i,zS=/^0o[0-7]+$/i,KS=parseInt,Ph=function(x){if(typeof x=="number")return x;if(Fp(x))return NaN;if(fs(x)){var $=typeof x.valueOf=="function"?x.valueOf():x;x=fs($)?$+"":$}if(typeof x!="string")return x===0?x:+x;x=qS(x);var F=HS.test(x);return F||zS.test(x)?KS(x.slice(2),F?2:8):VS.test(x)?NaN:+x},WS=Math.max,Fy=Math.min,GS=function(x,$,F){var A,re,xe,z,qe,At,lr=0,fr=!1,Sr=!1,br=!0;if(typeof x!="function")throw new TypeError("Expected a function");function Er(Zr){var Qn=A,$n=re;return A=re=void 0,lr=Zr,z=x.apply($n,Qn)}function $r(Zr){return lr=Zr,qe=setTimeout(vn,$),fr?Er(Zr):z}function jr(Zr){var Qn=Zr-At;return At===void 0||Qn>=$||Qn<0||Sr&&Zr-lr>=xe}function vn(){var Zr=Eh();if(jr(Zr))return Yr(Zr);qe=setTimeout(vn,function($n){var Do=$-($n-At);return Sr?Fy(Do,xe-($n-lr)):Do}(Zr))}function Yr(Zr){return qe=void 0,br&&A?Er(Zr):(A=re=void 0,z)}function wn(){var Zr=Eh(),Qn=jr(Zr);if(A=arguments,re=this,At=Zr,Qn){if(qe===void 0)return $r(At);if(Sr)return clearTimeout(qe),qe=setTimeout(vn,$),Er(At)}return qe===void 0&&(qe=setTimeout(vn,$)),z}return $=Ph($)||0,fs(F)&&(fr=!!F.leading,xe=(Sr="maxWait"in F)?WS(Ph(F.maxWait)||0,$):xe,br="trailing"in F?!!F.trailing:br),wn.cancel=function(){qe!==void 0&&clearTimeout(qe),lr=0,A=At=re=qe=void 0},wn.flush=function(){return qe===void 0?z:Yr(Eh())},wn},Ah=function(x,$,F){var A=!0,re=!0;if(typeof x!="function")throw new TypeError("Expected a function");return fs(F)&&(A="leading"in F?!!F.leading:A,re="trailing"in F?!!F.trailing:re),GS(x,$,{leading:A,maxWait:$,trailing:re})},QS=function(x,$,F){var A=-1,re=x.length;$<0&&($=-$>re?0:re+$),(F=F>re?re:F)<0&&(F+=re),re=$>F?0:F-$>>>0,$>>>=0;for(var xe=Array(re);++A<re;)xe[A]=x[A+$];return xe},Zl=function(x,$,F){if(!fs(F))return!1;var A=typeof $;return!!(A=="number"?bp(F)&&yd($,F.length):A=="string"&&$ in F)&&cp(F[$],x)},uc=1/0,JS=function(x){return x?(x=Ph(x))===uc||x===-1/0?17976931348623157e292*(x<0?-1:1):x==x?x:0:x===0?x:0},YS=function(x){var $=JS(x),F=$%1;return $==$?F?$-F:$:0},Jp=Math.ceil,XS=Math.max,Dd,eu=function(x,$,F){$=(F?Zl(x,$,F):$===void 0)?1:XS(YS($),0);var A=x==null?0:x.length;if(!A||$<1)return[];for(var re=0,xe=0,z=Array(Jp(A/$));re<A;)z[xe++]=QS(x,re,re+=$);return z};(function(S){S[S.sub=1]="sub",S[S.unSub=2]="unSub"})(Dd||(Dd={}));var Oh,ZS=function(){function S($){var F=this;this.unreadCount={},this.autoSubscribeUnreadMap={},this.autoSubscribeServerMap={},this.autoSubscribeTypingMap={},this.unreadServerCount={},this.serverRoleIdsMap={},this._serverUnreadInfo=Ah(function(A){F.core.emit("serverUnreadInfo",F.getServerUnreadInfo(A))},100),this.core=$}var x=S.prototype;return x.changeCacheServerRoleIds=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr,fr,Sr=this;return ir.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(xe=F.attach.serverIdentifyInfo,z=xe.serverId,qe=xe.roleId,this.serverRoleIdsMap[z]){Er.next=4;break}return Er.next=4,this.getRoleIdsByServerId([z]);case 4:if(At=this.serverRoleIdsMap[z],!(F.time<At.timeTag)){Er.next=7;break}return Er.abrupt("return");case 7:if(F.type===Xo[Xo.serverIdentifyAdd]?At.roleIds.add(qe):At.roleIds.delete(qe),this.core.logger.debug("QChatChannel::qchatChannel/serverIdentifyChange::now "+z+" roleIds is",Vi(re=[]).call(re,At.roleIds)),lr=this.unreadServerCount[z]){Er.next=12;break}return Er.abrupt("return");case 12:fr=eu(na(lr),100),In(fr).call(fr,function($r){Sr.core.qchatChannel.getChannelUnreadInfos({channels:ho($r).call($r,function(jr){return{serverId:z,channelId:jr}})})});case 14:case"end":return Er.stop()}},A,this)}))},x.getRoleIdsByServerId=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At=this;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if((xe=Yi(F).call(F,function(Sr){return!At.serverRoleIdsMap[Sr]})).length){fr.next=3;break}return fr.abrupt("return");case 3:return z={serverIdTimeTags:xe},fr.next=6,this.core.sendCmd("qchatGetRoleIdsByServerId",{qchatGetRoleIdsByServerIdTag:z});case 6:qe=fr.sent,this.core.logger.debug("QChatChannel:: getRoleIdsByServerId, params is ",z,"result is",qe),In(re=qe.content.serverRoles).call(re,function(Sr){try{Sr.roleIds=JSON.parse(Sr.roleIds)}catch(br){At.core.logger.error("QChatChannel:: getRoleIdsByServerId JSON parse roleIds error",br)}At.serverRoleIdsMap[Sr.serverId]={roleIds:new Xl(Sr.roleIds),timeTag:Sr.timeTag}});case 9:case"end":return fr.stop()}},A,this)}))},x._unSubscribeChannel=function(F,A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(xe=F+"_"+A,z=this.autoSubscribeUnreadMap[xe]){At.next=4;break}return At.abrupt("return");case 4:this.subscribe({opeType:Dd.unSub,type:z,channels:[{serverId:F,channelId:A}]}),this.autoSubscribeUnreadMap[xe]=void 0;case 6:case"end":return At.stop()}},re,this)}))},x.subscribe=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At=this;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},F),fr.next=3,this.core.sendCmd("qchatSubscribe",{qchatSubReqTag:{type:F.type,opeType:F.opeType},channels:F.channels});case 3:return xe=fr.sent,z=new Xl,In(re=F.channels).call(re,function(Sr){return Cr(At,void 0,void 0,ir.mark(function br(){return ir.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:this.serverRoleIdsMap[Sr.serverId]||z.add(Sr.serverId);case 1:case"end":return $r.stop()}},br,this)}))}),qe=eu(_c(z),10),In(qe).call(qe,function(Sr){At.getRoleIdsByServerId(Sr)}),fr.abrupt("return",xe.content);case 9:case"end":return fr.stop()}},A,this)}))},x.resumeSubscribe=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr,fr,Sr=this;return ir.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(this.serverRoleIdsMap={},this.unreadServerCount={},this.unreadCount={},At=100,F.isAutoReconnect){Er.next=6;break}return Er.abrupt("return");case 6:return lr={},In(re=na(this.autoSubscribeUnreadMap)).call(re,function($r){var jr=Sr.autoSubscribeUnreadMap[$r];if(jr){var vn=$r.split("_"),Yr={serverId:vn[0],channelId:vn[1]};lr[jr]=lr[jr]||[],lr[jr].push(Yr)}}),lr[5]=[],In(xe=na(this.autoSubscribeTypingMap)).call(xe,function($r){return Cr(Sr,void 0,void 0,ir.mark(function jr(){var vn,Yr,wn,Zr;return ir.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:this.autoSubscribeTypingMap[$r]&&(vn=$r.split("_"),Yr=vn[0],wn=vn[1],Zr={serverId:Yr,channelId:wn},lr[5].push(Zr));case 2:case"end":return $n.stop()}},jr,this)}))}),lr[4]=[],In(z=na(this.autoSubscribeServerMap)).call(z,function($r){return Cr(Sr,void 0,void 0,ir.mark(function jr(){var vn;return ir.wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:this.autoSubscribeServerMap[$r]&&(vn={serverId:$r},lr[4].push(vn));case 2:case"end":return wn.stop()}},jr,this)}))}),fr=[],In(qe=na(lr)).call(qe,function($r){var jr=lr[$r];if(jr&&jr.length===0)return uo.resolve();if(jr.length>At){var vn=eu(jr,100);return In(vn).call(vn,function(Yr){fr.push(Sr.createSubscribePromise(Yr,$r))})}fr.push(Sr.createSubscribePromise(jr,$r))}),Er.next=16,uo.all(fr);case 16:case"end":return Er.stop()}},A,this)}))},x.createSubscribePromise=function(F,A){var re=this,xe={type:Lo(A),opeType:1,channels:F};return this.core.logger.debug("qchatChannel:: autoSubscribeUnread params",xe),this.subscribe(xe).then(function(z){var qe=z.unreadInfos;qe&&qe.length>0&&(qe=Rd(qe),re.cacheUnreadCount(qe))}).catch(function(z){re.core.logger.error("qchatChannel:: autoSubscribeUnread error ",z)})},x.cacheSubscribe=function(F){var A,re=this;In(A=F.channels).call(A,function(xe){var z=xe.channelId?xe.serverId+"_"+xe.channelId:""+xe.serverId,qe=F.type===5?re.autoSubscribeTypingMap:F.type===4?re.autoSubscribeServerMap:re.autoSubscribeUnreadMap;F.opeType===Dd.sub?qe[z]=F.type:F.opeType===Dd.unSub&&(qe[z]=void 0)})},x.cacheUnreadCount=function(F){var A=this;In(F).call(F,function(re){var xe=re.serverId+"_"+re.channelId;A.unreadCount[xe]=Tn({},re),A.unreadServerCount[re.serverId]||(A.unreadServerCount[re.serverId]={}),A.unreadServerCount[re.serverId][re.channelId]=!0})},x.getServerUnreadInfo=function(F){var A,re=this,xe={serverId:F,unreadCount:0,mentionedCount:0,maxCount:0},z=this.unreadServerCount[F];return z&&(In(A=na(z)).call(A,function(qe){var At=F+"_"+qe,lr=re.unreadCount[At];xe.unreadCount+=lr.unreadCount,xe.mentionedCount+=lr.mentionedCount,lr.maxCount!==void 0&&(xe.maxCount=lr.maxCount)}),xe.unreadCount=xe.unreadCount>xe.maxCount?xe.maxCount:xe.unreadCount,xe.mentionedCount=xe.mentionedCount>xe.maxCount?xe.maxCount:xe.mentionedCount),xe},x.getUnreadInfo=function(F){Wr({serverId:{type:"string"},channelId:{type:"string"}},F);var A=F.serverId+"_"+F.channelId;return this.unreadCount[A]?this.unreadCount[A]:null},x.shouldChangeUnread=function(F,A){if(!F.serverId||!F.channelId||this.core.qchatChannel.subscribeForVisitorService.isInSubscribeChannels(F.serverId,F.channelId)||F.historyEnable===!1||F.needBadge===!1||F.fromAccount===this.core.account||A&&(F==null?void 0:F.status)!==2)return!1;if(F.notifyReason&&F.notifyReason===Bv(jd,jd.notifySubscribe)){if(!F.serverId||!F.channelId)return!1;var re=this.getUnreadInfo({serverId:F.serverId,channelId:F.channelId}),xe=A?"ackTimestamp":"lastMsgTime";if(!re||F.time&&re[xe]&&re[xe]>F.time)return!1}return!0},x.shouldChangeMentionedUnread=function(F,A){return A===void 0&&(A=!1),Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(!F.accidsOfMentionedRoles||!gs(xe=F.accidsOfMentionedRoles).call(xe,this.core.account)){At.next=2;break}return At.abrupt("return",!0);case 2:if(!F.mentionRoleIds||!F.serverId){At.next=16;break}if(this.serverRoleIdsMap[F.serverId]){At.next=9;break}if(A){At.next=7;break}return this.handledRoleMsg(F),At.abrupt("return",!1);case 7:return At.next=9,this.getRoleIdsByServerId([F.serverId]);case 9:z=0;case 10:if(!(z<F.mentionRoleIds.length)){At.next=16;break}if(!this.serverRoleIdsMap[F.serverId].roleIds.has(F.mentionRoleIds[z])){At.next=13;break}return At.abrupt("return",!0);case 13:z++,At.next=10;break;case 16:return At.abrupt("return",!1);case 17:case"end":return At.stop()}},re,this)}))},x.handledRoleMsg=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr=this;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(F.mentionRoleIds){Sr.next=2;break}return Sr.abrupt("return");case 2:if(this.serverRoleIdsMap[F.serverId]){Sr.next=5;break}return Sr.next=5,this.getRoleIdsByServerId([F.serverId]);case 5:if(this.serverRoleIdsMap[F.serverId]){Sr.next=8;break}return this.core.logger.warn("QChatChannel::handledRoleMsg::can not get serverRoleIds,server id",F.serverId),Sr.abrupt("return");case 8:if(xe=!1,In(re=F.mentionRoleIds).call(re,function(br){lr.serverRoleIdsMap[F.serverId].roleIds.has(br)&&(xe=!0,lr.core.logger.debug("QChatChannel::handledRoleMsg::will update message mentionedCount，message is ",F))}),xe){Sr.next=12;break}return Sr.abrupt("return");case 12:if(z=this.unreadCount[F.serverId+"_"+F.channelId],qe=(F==null?void 0:F.status)===2,z.mentionedCount=qe?z.mentionedCount?z.mentionedCount-1:0:z.mentionedCount?z.mentionedCount+1:1,typeof z.maxCount!="number"){Sr.next=24;break}if(!((At=(At=z.mentionedCount)>z.maxCount?z.maxCount:At)>z.maxCount)){Sr.next=21;break}return this.core.logger.debug("QChatChannel::handledRoleMsg::tempUnreadCount more than maxCount"),Sr.abrupt("return");case 21:this.core.emit("unreadInfo",Tn(Tn({},z),{mentionedCount:At})),this.core.emit("unreadInfos",[Tn(Tn({},z),{mentionedCount:At})]),this._serverUnreadInfo(F.serverId);case 24:case"end":return Sr.stop()}},A,this)}))},x.getMentionedFlag=function(F,A){return A===void 0&&(A=!1),Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(!F.mentionAll){qe.next=4;break}return qe.abrupt("return",!0);case 4:if(!F.mentionRoleIds&&!F.accidsOfMentionedRoles){qe.next=10;break}return qe.next=7,this.shouldChangeMentionedUnread(F,A);case 7:return qe.abrupt("return",qe.sent);case 10:if(!F.mentionAccids||!gs(xe=F.mentionAccids).call(xe,this.core.account)){qe.next=12;break}return qe.abrupt("return",!0);case 12:return qe.abrupt("return",!1);case 13:case"end":return qe.stop()}},re,this)}))},x.changeUnread=function(F,A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr,fr,Sr;return ir.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(xe=F.serverId,z=F.channelId,qe=xe+"_"+z,this.shouldChangeUnread(F,A)){Er.next=6;break}return this.core.logger.debug("changeUnread: "+qe+" does not need to update unreadInfo"),Er.abrupt("return");case 6:if(this.unreadCount[qe]){Er.next=11;break}return Er.next=9,this.core.qchatChannel.getChannelUnreadInfos({channels:[{serverId:xe,channelId:z}]});case 9:return!this.serverRoleIdsMap[xe]&&F.mentionRoleIds&&this.getRoleIdsByServerId([xe]),Er.abrupt("return");case 11:return At=this.unreadCount[qe],lr=(F==null?void 0:F.status)===2,Er.next=15,this.getMentionedFlag(F);case 15:if(fr=Er.sent,lr?(At.unreadCount=At.unreadCount?At.unreadCount-1:0,fr&&(At.mentionedCount=At.mentionedCount?At.mentionedCount-1:0),delete At.lastMsgTime,this.core.logger.debug("changeUnread: "+qe+" unread reduce ",At)):(At.unreadCount=At.unreadCount?At.unreadCount+1:1,fr&&(At.mentionedCount=At.mentionedCount?At.mentionedCount+1:1),F.time&&(At.lastMsgTime=F.time),this.core.logger.debug("changeUnread: "+qe+" unread add ",At)),Sr=typeof At.maxCount=="number"?At.maxCount:100,!(At.unreadCount>Sr)){Er.next=21;break}return this.core.logger.debug("QChatChannel::subscribe::tempUnreadCount more than maxCount"),Er.abrupt("return");case 21:this.core.logger.warn("unreadInfo event will abandon,please use unreadInfos"),this.core.emit("unreadInfo",Tn(Tn({},At),{mentionedCount:At.mentionedCount>Sr?Sr:At.mentionedCount,unreadCount:At.unreadCount>Sr?Sr:At.unreadCount})),this.core.emit("unreadInfos",[Tn(Tn({},At),{mentionedCount:At.mentionedCount>Sr?Sr:At.mentionedCount,unreadCount:At.unreadCount>Sr?Sr:At.unreadCount})]),this._serverUnreadInfo(xe);case 25:case"end":return Er.stop()}},re,this)}))},x.updateUnreads=function(F){var A,re=this;if(F&&F.length>0){var xe=this.getServerUnreadInfo(F[0].serverId),z=this.unreadServerCount[F[0].serverId],qe=ho(A=Yi(F).call(F,function($r){var jr=$r.serverId+"_"+$r.channelId,vn=re.unreadCount[jr],Yr=Wa(vn,"ackTimestamp"),wn=Wa($r,"ackTimestamp");return!(Yr&&wn&&wn<Yr)&&(Wa(vn,"unreadCount")!==Wa($r,"unreadCount")||Wa(vn,"mentionedCount")!==Wa($r,"mentionedCount"))})).call(A,function($r){var jr=$r.serverId,vn=$r.channelId,Yr=jr+"_"+vn;return re.core.logger.debug("qchat channel updateUnread: ",$r),re.unreadCount[Yr]=Tn({},$r),re.unreadServerCount[jr]||(re.unreadServerCount[jr]={}),re.unreadServerCount[jr][vn]=!0,$r});if(qe.length>0){this.core.emit("unreadInfos",qe);var At=this.getServerUnreadInfo(F[0].serverId),lr=this.unreadServerCount[F[0].serverId],fr=xe.unreadCount!==At.unreadCount,Sr=!z||na(z).length===0,br=lr&&na(lr).length>0,Er=xe.mentionedCount!==At.mentionedCount;(fr||Er||Sr&&br)&&this._serverUnreadInfo(qe[0].serverId)}In(qe).call(qe,function($r){re.core.emit("unreadInfo",$r)})}},x.clearUnreadCountByServers=function(F,A){var re=this,xe=[];In(F).call(F,function(qe){var At;re.unreadServerCount[qe]&&In(At=na(re.unreadServerCount[qe])).call(At,function(lr){xe.push(qe+"_"+lr)})});var z=[];In(xe).call(xe,function(qe){z.push(Tn(Tn({},re.unreadCount[qe]),{unreadCount:0,mentionedCount:0,ackTimestamp:A}))}),this.updateUnreads(z)},S}(),eM=function(){function S($){this.limitForBatchEnter=10,this.limitForBatchSubscribe=100,this.autoServers=new Xl,this.autoVisitorSubscribeServer=new Xl,this.autoVisitorSubscribeChannel=new Xl,this.core=$}var x=S.prototype;return x.subscribeChannelAsVisitor=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At=this;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:F.type||6,opeType:F.opeType},datas:F.channels});case 2:return xe=fr.sent,z=xe.content.failedArr,qe=Yi(re=F.channels).call(re,function(Sr){return!Ap(z).call(z,function(br){return br.channelId===Sr.channelId&&br.serverId===Sr.serverId})}),In(qe).call(qe,function(Sr){F.opeType===1?At.autoVisitorSubscribeChannel.add(Sr.serverId+"&"+Sr.channelId):At.autoVisitorSubscribeChannel.delete(Sr.serverId+"&"+Sr.channelId)}),fr.abrupt("return",{failedChannels:z});case 7:case"end":return fr.stop()}},A,this)}))},x.subscribeServerAsVisitor=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr,fr=this;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return br.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:F.type||7,opeType:F.opeType},datas:ho(re=F.serverIds).call(re,function(Er){return{serverId:Er}})});case 2:return qe=br.sent,At=qe.content.failedArr,lr=Yi(xe=F.serverIds).call(xe,function(Er){return!Ap(At).call(At,function($r){return $r.serverId===Er})}),In(lr).call(lr,function(Er){F.opeType===1?fr.autoVisitorSubscribeServer.add(Er):fr.autoVisitorSubscribeServer.delete(Er)}),br.abrupt("return",{failedServers:ho(z=qe.content.failedArr).call(z,function(Er){return Er.serverId})});case 7:case"end":return br.stop()}},A,this)}))},x.deleteServer=function(F){var A;this.autoServers.delete(F),this.autoVisitorSubscribeServer.has(F)&&this.subscribeServerAsVisitor({opeType:2,serverIds:[F]});var re=[];In(A=this.autoVisitorSubscribeChannel).call(A,function(xe){if(pa(xe).call(xe,F)===0){var z=xe.replace(F+"&","");re.push({serverId:F,channelId:z})}}),re.length>0&&this.subscribeChannelAsVisitor({opeType:2,channels:re})},x.deleteAutoSetInServerId=function(F){var A,re=this;this.autoServers.delete(F),this.autoVisitorSubscribeServer.delete(F),In(A=this.autoVisitorSubscribeChannel).call(A,function(xe){pa(xe).call(xe,F)===0&&re.autoVisitorSubscribeChannel.delete(xe)})},x.deleteAutoSetInChannel=function(F,A){this.autoVisitorSubscribeChannel.delete(F+"&"+A)},x.unSubscribeChannel=function(F,A){this.subscribeChannelAsVisitor({opeType:2,channels:[{serverId:F,channelId:A}]})},x.isInSubscribeChannels=function(F,A){return this.autoVisitorSubscribeChannel.has(F+"&"+A)},x.isInAutoServers=function(F){return this.autoServers.has(F)},x.doAutoSubscribe=function(){var F=this,A=[],re=eu(_c(this.autoVisitorSubscribeServer),this.limitForBatchSubscribe);In(re).call(re,function(z){A.push(F.subscribeServerAsVisitor({opeType:1,serverIds:z}))});var xe=eu(_c(this.autoVisitorSubscribeChannel),this.limitForBatchSubscribe);return In(xe).call(xe,function(z){A.push(F.subscribeChannelAsVisitor({opeType:1,channels:ho(z).call(z,function(qe){var At=pa(qe).call(qe,"&");return{serverId:Mo(qe).call(qe,0,At),channelId:Mo(qe).call(qe,At+1)}})}))}),uo.all(A)},x.doAutoEnterServer=function(){return Cr(this,void 0,void 0,ir.mark(function F(){var A,re,xe,z=this;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return A=eu(_c(this.autoServers),this.limitForBatchEnter),re=[],In(A).call(A,function(lr){re.push(z.core.qchatServer.enterAsVisitor({serverIds:lr}))}),At.next=5,uo.all(re);case 5:xe=At.sent,In(xe).call(xe,function(lr){var fr;In(fr=lr.failedServers).call(fr,function(Sr){z.deleteAutoSetInServerId(Sr)})});case 7:case"end":return At.stop()}},F,this)}))},x.resumeSubscribe=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(!F.isAutoReconnect){xe.next=7;break}return xe.next=3,this.doAutoEnterServer();case 3:return xe.next=5,this.doAutoSubscribe();case 5:xe.next=10;break;case 7:this.autoServers.clear(),this.autoVisitorSubscribeChannel.clear(),this.autoVisitorSubscribeServer.clear();case 10:case"end":return xe.stop()}},A,this)}))},x.cacheServer=function(F){var A=this;In(F).call(F,function(re){return A.autoServers.add(re)})},S}();(function(S){S[S.sub=1]="sub",S[S.unSub=2]="unSub"})(Oh||(Oh={}));var tM=function(S){function x(F){var A,re,xe,z,qe,At;return(At=S.call(this,"qchatChannel",F)||this).core=F,Ps({cmdMap:wd,cmdConfig:Sh}),At.subscribeModuleService=new ZS(F),At.subscribeForVisitorService=new eM(F),At.core.eventBus.on("qchatChannel/changeUnread",Oo(A=At.subscribeModuleService.changeUnread).call(A,At.subscribeModuleService)),At.core.eventBus.on("qchatChannel/updateUnreads",Oo(re=At.subscribeModuleService.updateUnreads).call(re,At.subscribeModuleService)),At.core.eventBus.on("qchatChannel/cacheSubscribe",Oo(xe=At.subscribeModuleService.cacheSubscribe).call(xe,At.subscribeModuleService)),At.core.eventBus.on("qchatChannel/clearUnreadCountByServers",Oo(z=At.subscribeModuleService.clearUnreadCountByServers).call(z,At.subscribeModuleService)),At.core.eventBus.on("qchatChannel/getRoleIdsByServerId",Oo(qe=At.subscribeModuleService.getRoleIdsByServerId).call(qe,At.subscribeModuleService)),At.core.eventBus.on("logined",function(lr){At.subscribeModuleService.resumeSubscribe(lr),At.subscribeForVisitorService.resumeSubscribe(lr)}),At.core.eventBus.on("qchatChannel/autoUnSubscribe",function(lr){if(At.logger.log("QChatChannel::enter autoUnSubscribe sysMsg is",lr),lr.type===Xo[Xo.channelVisibilityUpdate])At.logger.log("QChatChannel::begin autoUnSubscribe channel key is",lr.serverId+"_"+lr.channelId),At.subscribeModuleService._unSubscribeChannel(lr.serverId,lr.channelId),At.logger.log("QChatChannel::autoUnSubscribe channel done key is",lr.serverId+"_"+lr.channelId);else if(lr.type===Xo[Xo.serverEnterLeave]){var fr;At.subscribeModuleService.autoSubscribeServerMap[lr.serverId]&&(At.logger.log("QChatChannel::begin autoUnSubscribe server key is",lr.serverId),At.subscribeModuleService.subscribe({type:4,opeType:Oh.unSub,channels:[{serverId:lr.serverId,channelId:""}]}),At.logger.log("QChatChannel::autoUnSubscribe server done key is",lr.serverId));var Sr=At.subscribeModuleService.unreadServerCount[lr.serverId];if(!Sr)return;At.logger.log("QChatChannel::begin autoUnSubscribe channels key is",na(Sr)),In(fr=na(Sr)).call(fr,function(br){At.subscribeModuleService._unSubscribeChannel(lr.serverId,br)}),At.logger.log("QChatChannel::autoUnSubscribe channels done key is",na(Sr))}}),At.core.eventBus.on("qchatChannel/serverIdentifyChange",function(lr){At.subscribeModuleService.changeCacheServerRoleIds(lr)}),At}No(x,S);var $=x.prototype;return $.createChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",min:1},type:{type:"enum",values:sa(hl)},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},A),qe.next=3,this.core.sendCmd("qchatCreateChannel",{channelInfo:Tn(Tn({},A),{type:hl[A.type]}),antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",Ad(xe.content.channelInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.deleteChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({channelId:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatDeleteChannel",A);case 3:case"end":return z.stop()}},re,this)}))},$.updateChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({channelId:{type:"string",min:1},serverId:{type:"string",required:!1},type:{type:"enum",values:sa(hl),required:!1},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},A),xe=A,A.type&&(xe.type=hl[A.type]),At.next=5,this.core.sendCmd("qchatUpdateChannel",{channelInfo:xe,antispamTag:Pc(A)});case 5:return z=At.sent,At.abrupt("return",Ad(z.content.channelInfo));case 7:case"end":return At.stop()}},re,this)}))},$.getChannels=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({channelIds:{type:"array",itemType:"string",min:1}},A),qe.next=3,this.core.sendCmd("qchatGetChannels",A);case 3:return xe=qe.sent,qe.abrupt("return",Od(xe.content.channelList));case 5:case"end":return qe.stop()}},re,this)}))},$.getChannelsByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetChannelsByPage",{qchatGetChannelListPageTag:Tn({limit:100},A)});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:Od(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.getMembersByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetMembersByPage",{qchatGetMembersByPageTag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:cc(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.updateWhiteBlackRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},roleId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},opeType:{type:"enum",values:sa(es)}},A),z.next=3,this.core.sendCmd("qchatUpdateWhiteBlackRole",{qchatUpdateWhiteBlackRoleTag:Tn(Tn({},A),{type:ca[A.type],opeType:es[A.opeType]})});case 3:case"end":return z.stop()}},re,this)}))},$.getWhiteBlackRolesPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetWhiteBlackRolesPage",{qchatGetWhiteBlackRolesPageTag:Tn(Tn({},A),{type:ca[A.type]})});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:Ki(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.updateWhiteBlackMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},opeType:{type:"enum",values:sa(es)},toAccids:{type:"array",itemType:"string",min:1}},A),z.next=3,this.core.sendCmd("qchatUpdateWhiteBlackMembers",{qchatUpdateWhiteBlackMembersTag:Tn(Tn({},A),{type:ca[A.type],opeType:es[A.opeType],toAccids:mo(A.toAccids)})});case 3:case"end":return z.stop()}},re,this)}))},$.getWhiteBlackMembersPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetWhiteBlackMembersPage",{qchatGetWhiteBlackMembersPageTag:Tn(Tn({limit:100},A),{type:ca[A.type]})});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:cc(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.getExistingWhiteBlackRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},roleIds:{type:"array",itemType:"string",min:1}},A),At.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackRoles",{qchatGetExistingWhiteBlackRolesTag:Tn(Tn({},A),{type:ca[A.type],roleIds:mo(A.roleIds)})});case 3:return xe=At.sent,z=xe.content.datas,At.abrupt("return",{datas:Ki(z)});case 6:case"end":return At.stop()}},re,this)}))},$.getExistingWhiteBlackMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:sa(ca)},accids:{type:"array",itemType:"string",min:1}},A),At.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackMembers",{qchatGetExistingWhiteBlackMembersTag:Tn(Tn({},A),{type:ca[A.type],accids:mo(A.accids)})});case 3:return xe=At.sent,z=xe.content.datas,At.abrupt("return",{datas:cc(z)});case 6:case"end":return At.stop()}},re,this)}))},$.updateCategoryInfoOfChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({channelId:{type:"string",min:1},categoryId:{type:"string",allowEmpty:!1,required:!1},syncMode:{type:"number",min:0,max:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateCategoryInfoOfChannel",{qchatUpdateCategoryInfoOfChannelTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Ad(xe.content.channelInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.createChannelCategory=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatCreateChannelCategory",{qchatCreateChannelCategoryTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Nd(xe.content.QChatChannelCategoryInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.removeChannelCategory=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatRemoveChannelCategory",A);case 3:case"end":return z.stop()}},re,this)}))},$.updateChannelCategory=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateChannelCategory",{qchatUpdateChannelCategoryTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Nd(xe.content.QChatChannelCategoryInfo));case 5:case"end":return qe.stop()}},re,this)}))},$.getChannelCategoriesByID=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({categoryIds:{type:"array",itemType:"string",min:1}},A),qe.next=3,this.core.sendCmd("qchatGetChannelCategoriesByID",A);case 3:return xe=qe.sent,qe.abrupt("return",_h(xe.content.channelCategoryList));case 5:case"end":return qe.stop()}},re,this)}))},$.updateChannelCategoryWhiteBlackRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},opeType:{type:"enum",values:sa(es)},roleId:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackRole",{qchatUpdateChannelCategoryWhiteBlackRoleTag:Tn(Tn({},A),{type:ca[A.type],opeType:es[A.opeType]})});case 3:case"end":return z.stop()}},re,this)}))},$.getChannelCategoryWhiteBlackRolesPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRolesPage",{qchatGetChannelCategoryWhiteBlackRolesPageTag:Tn(Tn({},A),{type:ca[A.type]})});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:Ki(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.updateChannelCategoryWhiteBlackMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},opeType:{type:"enum",values:sa(es)},toAccids:{type:"array",itemType:"string",min:1}},A),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackMembers",{qchatUpdateChannelCategoryWhiteBlackMembersTag:Tn(Tn({},A),{type:ca[A.type],opeType:es[A.opeType],toAccids:mo(A.toAccids)})});case 3:case"end":return z.stop()}},re,this)}))},$.getChannelCategoryWhiteBlackMembersPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembersPage",{qchatGetChannelCategoryWhiteBlackMembersPageTag:Tn(Tn({},A),{type:ca[A.type]})});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:cc(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.getChannelCategoryWhiteBlackRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},roleIds:{type:"array",itemType:"string",min:1}},A),At.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRoles",{qchatGetChannelCategoryWhiteBlackRolesTag:Tn(Tn({},A),{type:ca[A.type],roleIds:mo(A.roleIds)})});case 3:return xe=At.sent,z=xe.content.datas,At.abrupt("return",Ki(z));case 6:case"end":return At.stop()}},re,this)}))},$.getChannelCategoryWhiteBlackMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(ca)},accids:{type:"array",itemType:"string",min:1}},A),At.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembers",{qchatGetChannelCategoryWhiteBlackMembersTag:Tn(Tn({},A),{type:ca[A.type],accids:mo(A.accids)})});case 3:return xe=At.sent,z=xe.content.datas,At.abrupt("return",cc(z));case 6:case"end":return At.stop()}},re,this)}))},$.getChannelCategoriesPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetChannelCategoriesPage",{qchatGetChannelCategoriesPageTag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:_h(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.getChannelCategoryChannelsPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},A),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryChannelsPage",{qchatGetChannelCategoryChannelsPageTag:A});case 3:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag)},datas:Od(qe)});case 6:case"end":return fr.stop()}},re,this)}))},$.subscribeChannel=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},A),At.next=3,this.subscribeModuleService.subscribe(A);case 3:if((xe=At.sent).unreadInfos=Rd(xe.unreadInfos),A.opeType===1&&(A.channels=ho(z=xe.unreadInfos).call(z,function(lr){return{serverId:lr.serverId,channelId:lr.channelId}})),this.logger.debug("QChatChannel::subscribeChannel:: cacheSubscribe ",A),this.subscribeModuleService.cacheSubscribe(A),A.type!==5){At.next=10;break}return At.abrupt("return");case 10:return this.subscribeModuleService.updateUnreads(xe.unreadInfos),At.abrupt("return",xe);case 12:case"end":return At.stop()}},re,this)}))},$.getChannelUnreadInfos=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatGetUnreadInfo",A);case 2:return xe=At.sent,z=Rd(xe.content.unreadInfos),this.subscribeModuleService.updateUnreads(z),At.abrupt("return",z);case 6:case"end":return At.stop()}},re,this)}))},$.getChannelSearchByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Wr({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:1,required:!1},order:{type:"enum",values:sa(Ic),required:!1},limit:{type:"number",min:1,required:!1},serverId:{type:"string",required:!1},sort:{type:"enum",values:sa(Hp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},A),!(A.startTime&&A.endTime&&A.startTime>=A.endTime)){fr.next=3;break}throw new al("startTime more than endTime",A,"timeRule");case 3:return fr.next=5,this.core.sendCmd("qchatGetChannelSearchByPage",{qchatGetChannelSearchByPageTag:Tn(Tn({},A),{order:A.order&&Ic[A.order],sort:Wl(A)&&Hp[Wl(A)]})});case 5:return xe=fr.sent,z=xe.content,qe=z.datas,At=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+At.hasMore==1,nextTimetag:Lo(At.nextTimetag),cursor:At.cursor},datas:Od(qe)});case 8:case"end":return fr.stop()}},re,this)}))},$.channelMemberSearch=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatChannelMemberSearch",{qchatChannelMemberSearchTag:A});case 3:return xe=qe.sent,qe.abrupt("return",RS(xe.content.datas));case 5:case"end":return qe.stop()}},re,this)}))},$.subscribeAsVisitor=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},channels:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},min:1}},A),z.next=3,this.subscribeForVisitorService.subscribeChannelAsVisitor(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},x}(gl),Ly={"24_61":"qchatCreateServerRole","24_62":"qchatDeleteServerRole","24_63":"qchatUpdateServerRole","24_64":"qchatGetServerRoles","24_65":"qchatAddChannelRole","24_66":"qchatRemoveChannelRole","24_67":"qchatUpdateChannelRole","24_68":"qchatGetChannelRoles","24_69":"qchatAddMemberRole","24_70":"qchatRemoveMemberRole","24_71":"qchatUpdateMemberRole","24_72":"qchatGetMemberRoles","24_73":"qchatAddMembersToServerRole","24_74":"qchatRemoveMembersFromServerRole","24_75":"qchatGetMembersFromServerRole","24_76":"qchatGetServerRolesByAccid","24_77":"qchatGetExistingServerRolesByAccids","24_78":"qchatGetExistingChannelRolesByServerRoleIds","24_79":"qchatGetExistingAccidsOfMemberRoles","24_80":"qchatUpdateServerRolePriorities","24_81":"qchatGetExistingAccidsInServerRole","24_82":"qchatCheckPermission","24_83":"qchatAddChannelCategoryRole","24_84":"qchatRemoveChannelCategoryRole","24_85":"qchatUpdateChannelCategoryRole","24_86":"qchatGetChannelCategoryRole","24_87":"qchatAddChannelCategoryMemberRole","24_88":"qchatRemoveChannelCategoryMemberRole","24_89":"qchatUpdateChannelCategoryMemberRole","24_90":"qchatGetChannelCategoryMemberRole","24_126":"qchatCheckPermissions"},za={channelRole:{serverId:1,roleId:2,parentRoleId:3,channelId:4,name:5,icon:6,ext:7,auths:8,type:9,createTime:10,updateTime:11},memberRole:{serverId:1,id:2,accid:3,channelId:4,auths:5,createTime:6,updateTime:7,nick:8,avatar:9,ext:10,memberType:11,joinTime:12,inviter:13},antispamTag:{antiSpamBusinessId:1},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11,isMember:12},getRoleByPagesTag:{serverId:1,channelId:2,time:3,limit:4},checkPermissionTag:{serverId:1,channelId:2,auth:3},member:{serverId:1,roleId:2,accid:3,createTime:4,updateTime:5,nick:6,avatar:7,ext:8,type:9,joinTime:10,inviter:11},qchatAddChannelCategoryRoleTag:{categoryId:3,serverId:4,parentRoleId:5},channelCategoryRole:{roleId:1,categoryId:3,serverId:4,parentRoleId:5,type:6,validFlag:7,createTime:8,updateTime:9,auths:10,name:11,icon:12,ext:13},qchatGetChannelCategoryRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},channelCategoryMemberRole:{id:1,accid:3,categoryId:4,serverId:5,validFlag:6,createTime:7,updateTime:8,auths:9,nick:10,avatar:11,ext:12,memberType:13,joinTime:14,inviter:15},qchatGetChannelCategoryMemberRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},checkPermissionsTag:{serverId:1,channelId:2,auths:3}},la=Mc(za),rM={qchatCreateServerRole:{service:"qchatRole",sid:24,cid:61,params:[{type:"Property",name:"serverRole",reflectMapper:za.serverRole},{type:"Property",name:"antispamTag",reflectMapper:za.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:la.serverRole}]},qchatDeleteServerRole:{service:"qchatRole",sid:24,cid:62,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"}]},qchatUpdateServerRole:{service:"qchatRole",sid:24,cid:63,params:[{type:"Property",name:"updateServerRoleTag",reflectMapper:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,priority:7}},{type:"Property",name:"antispamTag",reflectMapper:za.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:la.serverRole}]},qchatGetServerRoles:{service:"qchatRole",sid:24,cid:64,params:[{type:"Property",name:"getServerRolesTag",reflectMapper:{serverId:1,timetag:2,limit:3,priority:4,channelId:5,categoryId:6}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatAddChannelRole:{service:"qchatRole",sid:24,cid:65,params:[{type:"Property",name:"channelRole",reflectMapper:za.channelRole}],response:[{type:"Property",name:"channelRole",reflectMapper:la.channelRole}]},qchatRemoveChannelRole:{service:"qchatRole",sid:24,cid:66,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelRole:{service:"qchatRole",sid:24,cid:67,params:[{type:"Property",name:"updateChannelRoleTag",reflectMapper:{serverId:1,roleId:2,channelId:3,auths:4}}],response:[{type:"Property",name:"channelRole",reflectMapper:la.channelRole}]},qchatGetChannelRoles:{service:"qchatRole",sid:24,cid:68,params:[{type:"Property",name:"getChannelRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:la.channelRole}]},qchatAddMemberRole:{service:"qchatRole",sid:24,cid:69,params:[{type:"Property",name:"memberRole",reflectMapper:za.memberRole}],response:[{type:"Property",name:"memberRole",reflectMapper:la.memberRole}]},qchatRemoveMemberRole:{service:"qchatRole",sid:24,cid:70,params:[{type:"Property",name:"memberRole",reflectMapper:za.memberRole}]},qchatUpdateMemberRole:{service:"qchatRole",sid:24,cid:71,params:[{type:"Property",name:"updateMemberRoleTag",reflectMapper:{serverId:1,accid:2,channelId:3,auths:4}}],response:[{type:"Property",name:"memberRole",reflectMapper:la.memberRole}]},qchatGetMemberRoles:{service:"qchatRole",sid:24,cid:72,params:[{type:"Property",name:"getMemberRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:la.memberRole}]},qchatAddMembersToServerRole:{service:"qchatRole",sid:24,cid:73,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatRemoveMembersFromServerRole:{service:"qchatRole",sid:24,cid:74,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatGetMembersFromServerRole:{service:"qchatRole",sid:24,cid:75,params:[{type:"Property",name:"getMembersFromServerRoleTag",reflectMapper:{serverId:1,roleId:2,timetag:3,accid:4,limit:5}}],response:[{type:"PropertyArray",name:"members",reflectMapper:la.member}]},qchatGetServerRolesByAccid:{service:"qchatRole",sid:24,cid:76,params:[{type:"Property",name:"getServerRolesByAccidTag",reflectMapper:{serverId:1,accid:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatGetExistingServerRolesByAccids:{service:"qchatRole",sid:24,cid:77,params:[{type:"Long",name:"serverId"},{type:"String",name:"accids"}],response:[{type:"String",name:"serverRoles"}]},qchatGetExistingChannelRolesByServerRoleIds:{service:"qchatRole",sid:24,cid:78,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"roleIds"}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:la.channelRole}]},qchatGetExistingAccidsOfMemberRoles:{service:"qchatRole",sid:24,cid:79,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:la.memberRole}]},qchatUpdateServerRolePriorities:{service:"qchatRole",sid:24,cid:80,params:[{type:"Long",name:"serverId"},{type:"PropertyArray",name:"serverRoles",reflectMapper:{serverId:1,roleId:2,priority:7}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatGetExistingAccidsInServerRole:{service:"qchatRole",sid:24,cid:81,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"members",reflectMapper:la.member}]},qchatCheckPermission:{service:"qchatRole",sid:24,cid:82,params:[{type:"Property",name:"checkPermissionTag",reflectMapper:za.checkPermissionTag}],response:[{type:"Boolean",name:"checked"}]},qchatAddChannelCategoryRole:{service:"qchatRole",sid:24,cid:83,params:[{type:"Property",name:"qchatAddChannelCategoryRoleTag",reflectMapper:za.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:la.channelCategoryRole}]},qchatRemoveChannelCategoryRole:{service:"qchatRole",sid:24,cid:84,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelCategoryRole:{service:"qchatRole",sid:24,cid:85,params:[{type:"Property",name:"qchatUpdateChannelCategoryRoleTag",reflectMapper:za.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:la.channelCategoryRole}]},qchatGetChannelCategoryRole:{service:"qchatRole",sid:24,cid:86,params:[{type:"Property",name:"qchatGetChannelCategoryRoleTag",reflectMapper:za.qchatGetChannelCategoryRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:la.channelCategoryRole}]},qchatAddChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:87,params:[{type:"Property",name:"qchatAddChannelCategoryMemberRoleTag",reflectMapper:za.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:la.channelCategoryMemberRole}]},qchatRemoveChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:88,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"String",name:"accid"}]},qchatUpdateChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:89,params:[{type:"Property",name:"qchatUpdateChannelCategoryMemberRoleTag",reflectMapper:za.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:la.channelCategoryMemberRole}]},qchatGetChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:90,params:[{type:"Property",name:"qchatGetChannelCategoryMemberRoleTag",reflectMapper:za.qchatGetChannelCategoryMemberRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:la.channelCategoryMemberRole}]},qchatCheckPermissions:{service:"qchatRole",sid:24,cid:126,params:[{type:"Property",name:"checkPermissionsTag",reflectMapper:za.checkPermissionsTag}],response:[{type:"PropertyArray",name:"checkPermissionsResult",reflectMapper:{1:"auth",2:"isAllow"}}]}},nM=function(){function S($){this.core=$}var x=S.prototype;return x.addChannelCategoryRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},F),z.next=3,this.core.sendCmd("qchatAddChannelCategoryRole",{qchatAddChannelCategoryRoleTag:F});case 3:return re=z.sent,z.abrupt("return",Gp(re.content.channelCategoryRole));case 5:case"end":return z.stop()}},A,this)}))},x.removeChannelCategoryRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},F),xe.next=3,this.core.sendCmd("qchatRemoveChannelCategoryRole",F);case 3:case"end":return xe.stop()}},A,this)}))},x.updateChannelCategoryRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object"}},F),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryRole",{qchatUpdateChannelCategoryRoleTag:Ac(F)});case 3:if((re=z.sent).raw.code!==406){z.next=6;break}throw new yo("No update required",{},406);case 6:return z.abrupt("return",Gp(re.content.channelCategoryRole));case 7:case"end":return z.stop()}},A,this)}))},x.getChannelCategoryRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},F),z.next=3,this.core.sendCmd("qchatGetChannelCategoryRole",{qchatGetChannelCategoryRoleTag:F});case 3:return re=z.sent,z.abrupt("return",(qe=re.content.list,ni(qe)&&qe.length>0?ho(qe).call(qe,function(At){return Gp(At)}):[]));case 5:case"end":return z.stop()}var qe},A,this)}))},x.addChannelCategoryMemberRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},F),z.next=3,this.core.sendCmd("qchatAddChannelCategoryMemberRole",{qchatAddChannelCategoryMemberRoleTag:F});case 3:return re=z.sent,z.abrupt("return",Yl(re.content.channelCategoryMemberRole));case 5:case"end":return z.stop()}},A,this)}))},x.removeChannelCategoryMemberRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},F),xe.next=3,this.core.sendCmd("qchatRemoveChannelCategoryMemberRole",F);case 3:case"end":return xe.stop()}},A,this)}))},x.updateChannelCategoryMemberRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object"}},F),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryMemberRole",{qchatUpdateChannelCategoryMemberRoleTag:Ac(F)});case 3:if((re=z.sent).raw.code!==406){z.next=6;break}throw new yo("No update required",{},406);case 6:return z.abrupt("return",Yl(re.content.channelCategoryMemberRole));case 7:case"end":return z.stop()}},A,this)}))},x.getChannelCategoryMemberRole=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},F),z.next=3,this.core.sendCmd("qchatGetChannelCategoryMemberRole",{qchatGetChannelCategoryMemberRoleTag:F});case 3:return re=z.sent,z.abrupt("return",(qe=re.content.list,ni(qe)&&qe.length>0?ho(qe).call(qe,function(At){return Yl(At)}):[]));case 5:case"end":return z.stop()}var qe},A,this)}))},S}(),oM=function(S){function x(F){var A;return(A=S.call(this,"qchatRole",F)||this).core=F,Ps({cmdMap:Ly,cmdConfig:rM}),A.category=new nM(F),A}No(x,S);var $=x.prototype;return $.createServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1},priority:{type:"number",min:1},icon:{type:"string",required:!1},ext:{type:"string",required:!1}},A),qe.next=3,this.core.sendCmd("qchatCreateServerRole",{serverRole:Tn(Tn({},Ac(A)),{type:Jl.custom}),antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",pi(xe.content.serverRole));case 5:case"end":return qe.stop()}},re,this)}))},$.updateServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},name:{type:"string",required:!1},icon:{type:"string",required:!1},ext:{type:"string",required:!1},priority:{type:"number",required:!1},auths:{type:"object",required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateServerRole",{updateServerRoleTag:Ac(A),antispamTag:Pc(A)});case 3:return xe=qe.sent,qe.abrupt("return",pi(xe.content.serverRole));case 5:case"end":return qe.stop()}},re,this)}))},$.deleteServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatDeleteServerRole",A);case 3:case"end":return z.stop()}},re,this)}))},$.getServerRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},categoryId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},priority:{type:"number",required:!1}},A),lr.next=3,this.core.sendCmd("qchatGetServerRoles",{getServerRolesTag:Ac(A)});case 3:return z=lr.sent,qe=Yi(xe=z.content.serverRoles).call(xe,function(fr){return Lo(fr.isMember)===1}),qe=ho(qe).call(qe,function(fr){return fr.roleId}),lr.abrupt("return",{roles:Ki(z.content.serverRoles),isMemberRoles:qe});case 7:case"end":return lr.stop()}},re,this)}))},$.addChannelRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},A),qe.next=3,this.core.sendCmd("qchatAddChannelRole",{channelRole:Ac(A)});case 3:return xe=qe.sent,qe.abrupt("return",pi(xe.content.channelRole));case 5:case"end":return qe.stop()}},re,this)}))},$.getChannelRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetChannelRoles",{getChannelRolesTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Ki(xe.content.channelRoles));case 5:case"end":return qe.stop()}},re,this)}))},$.removeChannelRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatRemoveChannelRole",A);case 3:case"end":return z.stop()}},re,this)}))},$.updateChannelRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateChannelRole",{updateChannelRoleTag:Ac(A)});case 3:if((xe=qe.sent).raw.code!==406){qe.next=6;break}throw new yo("No update required",{},406);case 6:return qe.abrupt("return",pi(xe.content.channelRole));case 7:case"end":return qe.stop()}},re,this)}))},$.addMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},A),qe.next=3,this.core.sendCmd("qchatAddMemberRole",{memberRole:A});case 3:return xe=qe.sent,qe.abrupt("return",pi(xe.content.memberRole));case 5:case"end":return qe.stop()}},re,this)}))},$.getMemberRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetMemberRoles",{getMemberRolesTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Ki(xe.content.memberRoles));case 5:case"end":return qe.stop()}},re,this)}))},$.removeMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatRemoveMemberRole",{memberRole:A});case 3:case"end":return z.stop()}},re,this)}))},$.updateMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},A),qe.next=3,this.core.sendCmd("qchatUpdateMemberRole",{updateMemberRoleTag:Ac(A)});case 3:if((xe=qe.sent).raw.code!==406){qe.next=6;break}throw new yo("No update required",{},406);case 6:return qe.abrupt("return",pi(xe.content.memberRole));case 7:case"end":return qe.stop()}},re,this)}))},$.addMembersToServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},A),lr.next=3,this.core.sendCmd("qchatAddMembersToServerRole",Tn(Tn({},A),{accids:mo(A.accids)}));case 3:return xe=lr.sent,z=Wa(xe,"content.accids.successAccids"),qe=Wa(xe,"content.accids.failedAccids"),lr.abrupt("return",{successAccids:z?JSON.parse(z):[],failedAccids:qe?JSON.parse(qe):[]});case 7:case"end":return lr.stop()}},re,this)}))},$.removeMembersFromServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},A),lr.next=3,this.core.sendCmd("qchatRemoveMembersFromServerRole",Tn(Tn({},A),{accids:mo(A.accids)}));case 3:return xe=lr.sent,z=Wa(xe,"content.accids.successAccids"),qe=Wa(xe,"content.accids.failedAccids"),lr.abrupt("return",{successAccids:z?JSON.parse(z):[],failedAccids:qe?JSON.parse(qe):[]});case 7:case"end":return lr.stop()}},re,this)}))},$.getMembersFromServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},accid:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetMembersFromServerRole",{getMembersFromServerRoleTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Ki(xe.content.members));case 5:case"end":return qe.stop()}},re,this)}))},$.getServerRolesByAccid=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},A),qe.next=3,this.core.sendCmd("qchatGetServerRolesByAccid",{getServerRolesByAccidTag:A});case 3:return xe=qe.sent,qe.abrupt("return",Ki(xe.content.serverRoles));case 5:case"end":return qe.stop()}},re,this)}))},$.getExistingServerRolesByAccids=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},A),lr.next=3,this.core.sendCmd("qchatGetExistingServerRolesByAccids",{serverId:A.serverId,accids:mo(A.accids)});case 3:return xe=lr.sent,lr.prev=4,qe=JSON.parse(xe.content.serverRoles),In(z=na(qe)).call(z,function(fr){var Sr;In(Sr=qe[fr]).call(Sr,function(br,Er){qe[fr][Er]=Ra(br,la.serverRole)}),qe[fr]=Ki(qe[fr])}),lr.abrupt("return",qe);case 10:throw lr.prev=10,lr.t0=lr.catch(4),this.logger.error("can not parse serverRolesGroupByAccid from "+A.serverId+" and "+A.accids,xe.content.serverRoles),lr.t0;case 14:case"end":return lr.stop()}},re,this,[[4,10]])}))},$.getExistingChannelRolesByServerRoleIds=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleIds:{type:"array",itemType:"string"}},A),qe.next=3,this.core.sendCmd("qchatGetExistingChannelRolesByServerRoleIds",{serverId:A.serverId,channelId:A.channelId,roleIds:mo(A.roleIds)});case 3:return xe=qe.sent,qe.abrupt("return",Ki(xe.content.channelRoles));case 5:case"end":return qe.stop()}},re,this)}))},$.getExistingAccidsOfMemberRoles=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},A),At.next=3,this.core.sendCmd("qchatGetExistingAccidsOfMemberRoles",{serverId:A.serverId,channelId:A.channelId,accids:mo(A.accids)});case 3:return xe=At.sent,z=xe.content.memberRoles,At.abrupt("return",z&&z.length>0?ho(z).call(z,function(lr){return lr.accid}):[]);case 6:case"end":return At.stop()}},re,this)}))},$.getExistingAccidsInServerRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},A),At.next=3,this.core.sendCmd("qchatGetExistingAccidsInServerRole",{serverId:A.serverId,roleId:A.roleId,accids:mo(A.accids)});case 3:return xe=At.sent,z=xe.content.members,At.abrupt("return",z&&z.length>0?ho(z).call(z,function(lr){return lr.accid}):[]);case 6:case"end":return At.stop()}},re,this)}))},$.updateServerRolePriorities=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},serverRoles:{type:"array"}},A),At.next=3,this.core.sendCmd("qchatUpdateServerRolePriorities",{serverId:A.serverId,serverRoles:ho(xe=A.serverRoles).call(xe,function(lr){return{serverId:lr.serverId,roleId:lr.roleId,priority:lr.priority}})});case 3:return z=At.sent,At.abrupt("return",Ki(z.content.serverRoles));case 5:case"end":return At.stop()}},re,this)}))},$.checkPermission=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auth:{type:"string"}},A),qe.next=3,this.core.sendCmd("qchatCheckPermission",{checkPermissionTag:Tn(Tn({},A),{auth:bl[A.auth]||A.auth})});case 3:return xe=qe.sent,qe.abrupt("return",xe.content.checked);case 5:case"end":return qe.stop()}},re,this)}))},$.addChannelCategoryRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.addChannelCategoryRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.removeChannelCategoryRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.removeChannelCategoryRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.updateChannelCategoryRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.updateChannelCategoryRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.getChannelCategoryRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.getChannelCategoryRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.addChannelCategoryMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.addChannelCategoryMemberRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.removeChannelCategoryMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.removeChannelCategoryMemberRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.updateChannelCategoryMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.updateChannelCategoryMemberRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.getChannelCategoryMemberRole=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.getChannelCategoryMemberRole(A);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},re,this)}))},$.checkPermissions=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auths:{type:"array",itemType:"string"}},A),this.core.logger.log("qchatRole::checkPermission options is",A),fr.next=4,this.core.sendCmd("qchatCheckPermissions",{checkPermissionsTag:Tn(Tn({},A),{auths:mo(ho(xe=A.auths).call(xe,function(Sr){return bl[Sr]||Sr}))})});case 4:return qe=fr.sent,this.core.logger.log("qchatRole::checkPermission result is",qe.content),At={},In(z=qe.content.checkPermissionsResult).call(z,function(Sr){At[Sr.auth]=Sr.isAllow}),this.core.logger.log("qchatRole::checkPermission auths is",At),fr.abrupt("return",Ss(At));case 10:case"end":return fr.stop()}},re,this)}))},x}(gl),Yp=function(x,$){return ly(x,$,function(F,A){return sy(x,A)})},aM=function(x){return x!=null&&x.length?Ay(x,1):[]},dc,Ri,Xp=function(x){return Pv(Iv(x,void 0,aM),x+"")}(function(S,x){return S==null?{}:Yp(S,x)}),Rh={"24_10":"qchatSendMsg","24_11":"qchatOnMsg","24_12":"qchatOnRecvUnreadInfo","24_13":"qchatSendCustomSysMsg","24_14":"qchatOnSysMsg","24_16":"qchatGetHistoryMsg","24_17":"qchatMarkMessageRead","24_18":"qchatMultiSyncMessageRead","24_22":"qchatUpdateSystemNotification","24_23":"qchatMultiSyncSystemNotificationUpdate","24_24":"qchatSyncSystemNotification","24_25":"qchatUpdateMessage","24_26":"qchatRecvMessageUpdate","24_28":"qchatMarkSysMsgRead","24_94":"qchatMessageSearchByPage","24_100":"qchatGetMessageHistoryByIds","24_101":"qchatGetThreadMessages","24_102":"qchatUpdateQuickComment","24_103":"qchatGetQuickComments","24_108":"qchatGetThreadRootMessagesMeta","24_121":"qchatGetLastMessageOfChannels","24_127":"qchatGetMentionedMeMessages","25_6":"qchatMultiSyncServersMessageRead"},fi={getHistoryMsgTag:{serverId:1,channelId:2,beginTime:3,endTime:4,excludeMsgId:5,limit:6,reverse:7},getThreadHistoryMsgTag:{beginTime:1,endTime:2,excludeMsgId:3,limit:4,reverse:5},qchatMsgTag:{serverId:1,channelId:2,fromAccount:3,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,updateTime:8,type:9,body:10,attach:11,ext:12,msgIdClient:13,msgIdServer:14,resendFlag:15,status:16,pushPayload:17,pushContent:18,mentionAccids:19,mentionAll:20,env:21,callbackExt:22,replyMsgFromAccount:23,replyMsgTime:24,replyMsgIdServer:25,replyMsgIdClient:26,threadMsgFromAccount:27,threadMsgTime:28,threadMsgIdServer:29,threadMsgIdClient:30,useCustomContent:31,antiSpamContent:32,antiSpamBusinessId:33,antiSpamUsingYidun:34,yidunCallback:35,yidunAntiCheating:36,yidunAntiSpamExt:37,yidunAntiSpamRes:38,mentionRoleIds:41,accidsOfMentionedRoles:42,updateContent:39,updateOperatorInfo:40,subType:61,historyEnable:100,pushEnable:101,needBadge:102,needPushNick:103,notifyReason:104,routeEnable:105,isAntispam:106},sysMsg:{toType:1,serverId:2,channelId:3,toAccids:4,fromAccount:5,fromClientType:6,fromDeviceId:7,fromNick:8,time:9,updateTime:10,type:11,msgIdClient:12,msgIdServer:13,body:14,attach:15,ext:16,resendFlag:17,status:18,pushPayload:19,pushContent:20,env:21,callbackExt:22,persistEnable:100,pushEnable:101,needBadge:102,needPushNick:103,routeEnable:104},qchatMsgUpdateTag:{operatorAccount:1,operatorClientType:2,ps:3,ext:4,pushContent:5,pushPayload:6,env:7,routeEnable:100},markMsgReadTag:{serverId:1,channelId:2,time:3},qchatQuickCommentRequestTag:{serverId:1,channelId:2,fromAccount:3,msgIdServer:4,time:5,type:6,opeType:7,opeAccid:8},qchatQuickCommentQueryTag:{serverId:1,channelId:2,msgIdServerList:3},qchatGetLastMessageOfChannelsTag:{serverId:1,channelIdList:2},qchatMultiSyncServersMessageReadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},qchatMessageSearchByPageTag:{keyword:1,serverId:2,channelId:3,fromAccid:4,fromTime:5,toTime:6,msgTypes:7,subTypes:8,includeSelf:9,order:10,limit:11,sort:12,cursor:13},qchatPageQueryTag:{hasMore:1,nextTimetag:2,cursor:3},unreadInfo:Th},fa=Mc(fi),iM={qchatSendMsg:{service:"qchatMsg",sid:24,cid:10,params:[{type:"Property",name:"qchatMsg",reflectMapper:fi.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatOnMsg:{service:"qchatMsg",sid:24,cid:11,response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatOnRecvUnreadInfo:{service:"qchatMsg",sid:24,cid:12,response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatSendCustomSysMsg:{service:"qchatMsg",sid:24,cid:13,params:[{type:"Property",name:"sysMsg",reflectMapper:fi.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatOnSysMsg:{service:"qchatMsg",sid:24,cid:14,response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatGetHistoryMsg:{service:"qchatMsg",sid:24,cid:16,params:[{type:"Property",name:"getHistoryMsgTag",reflectMapper:fi.getHistoryMsgTag}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatUpdateMessage:{service:"qchatMsg",sid:24,cid:25,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:fi.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:fi.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatRecvMessageUpdate:{service:"qchatMsg",sid:24,cid:26,response:[{type:"Property",name:"qchatMsgUpdateInfo",reflectMapper:fa.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatMarkMessageRead:{sid:24,cid:17,service:"qchatMsg",params:[{type:"Property",name:"markMsgReadTag",reflectMapper:fi.markMsgReadTag}],response:[{type:"Property",name:"unreadInfo",reflectMapper:fa.unreadInfo}]},qchatMultiSyncMessageRead:{sid:24,cid:18,service:"qchatMsg",response:[{type:"Property",name:"unreadInfo",reflectMapper:fa.unreadInfo}]},qchatUpdateSystemNotification:{service:"qchatMsg",sid:24,cid:22,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:fi.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:fi.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatMultiSyncSystemNotificationUpdate:{service:"qchatMsg",sid:24,cid:23,response:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:fa.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatSyncSystemNotification:{service:"qchatMsg",sid:24,cid:24,response:[{type:"PropertyArray",name:"systemNotifications",reflectMapper:fa.sysMsg}]},qchatMarkSysMsgRead:{service:"qchatMsg",sid:24,cid:28,params:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:fi.sysMsg}]},qchatMessageSearchByPage:{service:"qchatMsg",sid:24,cid:94,params:[{type:"Property",name:"qchatMessageSearchByPageTag",reflectMapper:fi.qchatMessageSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:fa.qchatMsgTag}]},qchatGetMessageHistoryByIds:{service:"qchatMsg",sid:24,cid:100,params:[{type:"Property",name:"channelInfo",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"messageReferList",reflectMapper:{msgIdServer:1,time:2}}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatGetThreadMessages:{service:"qchatMsg",sid:24,cid:101,params:[{type:"Property",name:"qchatMsg",reflectMapper:fi.qchatMsgTag},{type:"Property",name:"getThreadHistoryMsgTag",reflectMapper:fi.getThreadHistoryMsgTag}],response:[{type:"Property",name:"thread",reflectMapper:fa.qchatMsgTag},{type:"Property",name:"threadInfo",reflectMapper:{1:"messageCount",2:"lastMessageTimestamp"}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatUpdateQuickComment:{service:"qchatMsg",sid:24,cid:102,params:[{type:"Property",name:"tag",reflectMapper:fi.qchatQuickCommentRequestTag}]},qchatGetQuickComments:{service:"qchatMsg",sid:24,cid:103,params:[{type:"Property",name:"tag",reflectMapper:fi.qchatQuickCommentQueryTag}],response:[{type:"PropertyArray",name:"quickCommentResponse",reflectMapper:{1:"serverId",2:"channelId",3:"msgIdServer",4:"totalCount",5:"lastUpdateTime",6:"details"}}]},qchatGetThreadRootMessagesMeta:{service:"qchatMsg",sid:24,cid:108,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:{time:7,msgIdServer:14}}],response:[{type:"PropertyArray",name:"metas",reflectMapper:{1:"total",2:"timestamp",3:"msgIdServer",4:"msgTime"}}]},qchatGetLastMessageOfChannels:{service:"qchatMsg",sid:24,cid:121,params:[{type:"Property",name:"tag",reflectMapper:fi.qchatGetLastMessageOfChannelsTag}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:fa.qchatMsgTag}]},qchatMultiSyncServersMessageRead:{service:"qchatMsg",sid:25,cid:6,response:[{type:"Property",name:"qchatMultiSyncServersMessageReadTag",reflectMapper:fa.qchatMultiSyncServersMessageReadTag}]},qchatGetMentionedMeMessages:{service:"qchatMsg",sid:24,cid:127,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2,timestamp:3,limit:4}}],response:[{type:"Property",name:"page",reflectMapper:fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:fa.qchatMsgTag}]}};(function(S){S[S.Android=1]="Android",S[S.iOS=2]="iOS",S[S.PC=4]="PC",S[S.WindowsPhone=8]="WindowsPhone",S[S.Web=16]="Web",S[S.Server=32]="Server",S[S.Mac=64]="Mac"})(dc||(dc={}));var jy=["image","audio","video","file"],Zp={time:{type:"number"},updateTime:{type:"number"},resendFlag:{type:"boolean"},persistEnable:{type:"boolean"},routeEnable:{type:"boolean"},pushEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},type:{type:"enum",values:Xo},fromClientType:{type:"enum",values:dc},status:{type:"number"},toAccids:{type:"object"},toType:{type:"number"},attach:{type:"object"},pushPayload:{type:"object"}};function Nh(S,x){var $=Tn({},S),F=Tn({type:x||Xo.custom},Gl(Zp,$));return F.serverId&&F.channelId&&F.toAccids?F.toType=Oc.channelAccids:F.serverId&&F.toAccids?F.toType=Oc.serverAccids:F.serverId&&F.channelId?F.toType=Oc.channel:F.serverId?F.toType=Oc.server:F.toAccids?F.toType=Oc.accids:F.toType=Oc.unknown,F}function Dy(S){var x=Xp(S,["msgIdServer","type"]);return Gl(Zp,x)}var $y=((Ri={})[Xo.channelUpdateWhiteBlackIdentify]=function(S){return S.notify=Pd(Ra(S.notify,zo.qchatUpdateWhiteBlackRoleTag)),S},Ri[Xo.channelUpdateWhiteBlackIdentifyUser]=function(S){return S.notify=function($){return va(Ey,$)}(Ra(S.notify,zo.qchatUpdateWhiteBlackMembersTag)),S},Ri[Xo.updateQuickComment]=function(S){return S.notify=function($){return va(lM,$)}(Ra(S.notify,fa.qchatQuickCommentRequestTag)),S},Ri[Xo.channelCategoryCreate]=function(S){return S.categoryInfo=Nd(Ra(S.categoryInfo,zo.QChatChannelCategoryInfo)),S},Ri[Xo.channelCategoryUpdate]=function(S){return S.categoryInfo=Nd(Ra(S.categoryInfo,zo.QChatChannelCategoryInfo)),S},Ri[Xo.channelCategoryUpdateWhiteBlackIdentify]=function(S){return S.notify=Pd(Ra(S.notify,zo.qchatUpdateChannelCategoryWhiteBlackRoleTag)),S},Ri[Xo.channelCategoryUpdateWhiteBlackIdentifyUser]=function(S){return S.notify=Pd(Ra(S.notify,zo.qchatUpdateChannelCategoryWhiteBlackMembersTag)),S},Ri[Xo.serverIdentifyAdd]=function(S){return S.serverIdentifyInfo=pi(Ra(S.serverIdentifyInfo,la.serverRole)),S},Ri[Xo.serverIdentifyRemove]=function(S){return S.serverIdentifyInfo=pi(Ra(S.serverIdentifyInfo,la.serverRole)),S},Ri[Xo.serverIdentifyUpdate]=function(S){return S.serverIdentifyInfo=pi(Ra(S.serverIdentifyInfo,la.serverRole)),S},Ri[Xo.channelIdentifyUpdate]=function(S){return S.channelIdentifyInfo=pi(Ra(S.channelIdentifyInfo,la.channelRole)),S},Ri[Xo.userIdentifyUpdate]=function(S){return S.userIdentifyInfo=pi(Ra(S.userIdentifyInfo,la.memberRole)),S},Ri[Xo.myMemberInfoUpdated]=function(S){var x,$=Wa(S,"userInfo.name"),F=Wa(S,"userInfo.icon");return S.updatedInfos=ho(x=S.reuseServers).call(x,function(A){var re={serverId:A.serverId};return(1&A.bits)==1&&typeof $=="string"&&Tn(re,{nickChanged:!0,nick:$}),(2&A.bits)==2&&typeof F=="string"&&Tn(re,{avatarChanged:!0,avatar:F}),re}),delete S.userInfo,delete S.reuseServers,S},Ri);function $d(S,x){var $=va(Zp,S);if(!$.attach)return $;if($.attach.serverInfo&&($.attach.serverInfo=xd(Ra($.attach.serverInfo,La.serverInfo))),$.attach.channelInfo&&($.attach.channelInfo=Ad(Ra($.attach.channelInfo,zo.channelInfo))),$.attach.serverMember&&($.attach.serverMember=Ql(Ra($.attach.serverMember,La.memberInfo))),$y[$.attach.type]&&($.attach=$y[$.attach.type]($.attach)),$.attach.updateAuths)try{$.attach.updateAuths=Ss(JSON.parse($.attach.updateAuths))}catch(F){x.error("formatSystemNotification:JSON parse updateAuths error: ",F)}return $.attach.type&&($.attach.rawType=$.attach.type,$.attach.type=Xo[$.attach.type]),$}var ef={type:{type:"enum",values:Ld},fromClientType:{type:"enum",values:dc},status:{type:"number"},resendFlag:{type:"boolean"},mentionAll:{type:"boolean"},notifyReason:{type:"enum",values:jd},pushEnable:{type:"boolean"},historyEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},routeEnable:{type:"boolean"},time:{type:"number"},updateTime:{type:"number"},mentionAccids:{type:"object"},mentionRoleIds:{type:"object"},accidsOfMentionedRoles:{type:"object"},attach:{type:"object"},pushPayload:{type:"object"},isAntispam:{type:"boolean"},antiSpamInfo:{useCustomContent:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBusinessId:{type:"string"},antiSpamUsingYidun:{type:"boolean"},yidunCallback:{type:"string"},yidunAntiCheating:{type:"object"},yidunAntiSpamExt:{type:"object"},yidunAntiSpamRes:{type:"string"}},replyRefer:{fromAccount:{type:"string",rawKey:"replyMsgFromAccount"},time:{type:"number",rawKey:"replyMsgTime"},msgIdServer:{type:"string",rawKey:"replyMsgIdServer"},msgIdClient:{type:"string",rawKey:"replyMsgIdClient"}},threadRefer:{fromAccount:{type:"string",rawKey:"threadMsgFromAccount"},time:{type:"number",rawKey:"threadMsgTime"},msgIdServer:{type:"string",rawKey:"threadMsgIdServer"},msgIdClient:{type:"string",rawKey:"threadMsgIdClient"}}};function Bh(S){S.onSendBefore,S.onUploadStart,S.onUploadDone,S.onUploadProgress;var x=xl(S,["onSendBefore","onUploadStart","onUploadDone","onUploadProgress"]),$=Gl(ef,x);if($.msgIdClient=S.resendFlag?S.msgIdClient:$g(),!$.msgIdClient)throw new El("msgIdClient is required for resend a message","msgIdClient","required");return S.replyMessage&&S.replyMessage.msgIdServer&&($.replyMsgFromAccount=S.replyMessage.fromAccount,$.replyMsgTime=+S.replyMessage.time,$.replyMsgIdServer=S.replyMessage.msgIdServer,$.replyMsgIdClient=S.replyMessage.msgIdClient,S.replyMessage.threadRefer&&S.replyMessage.threadRefer.msgIdServer?($.threadMsgFromAccount=S.replyMessage.threadRefer.fromAccount,$.threadMsgTime=+S.replyMessage.threadRefer.time,$.threadMsgIdServer=S.replyMessage.threadRefer.msgIdServer,$.threadMsgIdClient=S.replyMessage.threadRefer.msgIdClient):($.threadMsgFromAccount=S.replyMessage.fromAccount,$.threadMsgTime=+S.replyMessage.time,$.threadMsgIdServer=S.replyMessage.msgIdServer,$.threadMsgIdClient=S.replyMessage.msgIdClient),delete $.replyMessage),$}function Uy(S){return va({operatorClientType:{type:"enum",values:dc},pushPayload:{type:"object"}},S)}function _i(S,x,$){var F,A;return x===void 0&&(x={}),Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return(xe=va(ef,S)).deliveryStatus=x.deliveryStatus?Ms[x.deliveryStatus]:Ms[Ms.success],x.time&&(xe.time=x.time),xe.updateContent&&(z=va({status:{type:"number"}},z=Ra(z=JSON.parse(xe.updateContent),fa.qchatMsgTag)),xe.updateContent=z),xe.updateOperatorInfo&&(qe=Uy(Ra(qe=JSON.parse(xe.updateOperatorInfo),fa.qchatMsgUpdateTag)),xe.updateOperatorInfo=qe),((F=xe==null?void 0:xe.threadRefer)===null||F===void 0?void 0:F.fromAccount)===""&&delete xe.threadRefer,((A=xe==null?void 0:xe.replyRefer)===null||A===void 0?void 0:A.fromAccount)===""&&delete xe.replyRefer,xe.attach&&x.attachUrl&&(xe.attach.url=x.attachUrl),lr.next=10,qy(xe,$);case 10:return lr.abrupt("return",lr.sent);case 11:case"end":return lr.stop()}},re)}))}function qy(S,x){return Cr(this,void 0,void 0,ir.mark(function $(){var F;return ir.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(gs(jy).call(jy,S.type)&&S.attach&&S.attach.url){re.next=2;break}return re.abrupt("return",S);case 2:if(x&&x.cloudStorage&&typeof x.cloudStorage.getPrivateUrl=="function"&&typeof x.cloudStorage.getOriginUrl=="function"){re.next=4;break}return re.abrupt("return",S);case 4:if(!(pa(F=S.attach.url).call(F,"_im_url=1")<0)){re.next=7;break}return S.attach.url=x.cloudStorage.getPrivateUrl(S.attach.url),re.abrupt("return",S);case 7:return re.prev=7,re.next=10,x.cloudStorage.getOriginUrl(S.attach.url);case 10:S.attach.url=re.sent,re.next=16;break;case 13:throw re.prev=13,re.t0=re.catch(7),new El('url "'+S.attach.url+'" parse error',"message.attach.url","parse error");case 16:return re.abrupt("return",S);case 17:case"end":return re.stop()}},$,null,[[7,13]])}))}function Fh(S,x,$){return x===void 0&&(x={}),Cr(this,void 0,void 0,ir.mark(function F(){var A;return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(ni(S)&&S.length>0){xe.next=2;break}return xe.abrupt("return",[]);case 2:return A=ho(S).call(S,function(z){return _i(z,x,$)}),xe.next=5,uo.all(A);case 5:return xe.abrupt("return",xe.sent);case 6:case"end":return xe.stop()}},F)}))}var sM={totalCount:{type:"number"},lastUpdateTime:{type:"number"},details:{type:"object"}};function cM(S){var x=ho(S).call(S,function(F){var A,re=va(sM,F);return re.details=ho(A=re.details).call(A,function(xe){return{count:xe.count,hasSelf:xe.self,severalAccids:xe.topN,type:xe.type}}),re}),$={};return In(x).call(x,function(F){return $[F.msgIdServer]=F}),$}var lM={type:{type:"number"},time:{type:"number"},opeType:{type:"number"}},Vy={includeSelf:{type:"number"},order:{type:"enum",values:Ic},sort:{type:"enum",values:Qp},msgTypes:{type:"object"},subTypes:{type:"object"}},uM={hasMore:{type:"boolean"},nextTimetag:{type:"number"},cursor:{type:"string"}},dM={6:function(x){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInServerId(x.serverId),!0},16:function(x){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInChannel(x.serverId,x.channelId),!0},26:function(x){var $=Wa(x,"attach.addAccids");return $&&gs($).call($,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",x),!0},27:function(x){var $=Wa(x,"attach.deleteAccids");return $&&gs($).call($,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",x),!0},31:function(x){return x.attach.event===2&&(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",x),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",x)),!0},32:function(x){return x.attach.event===2?(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",x),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",x)):x.attach.event===1&&this.core.qchatChannel.subscribeForVisitorService.deleteServer(x.serverId),!0},34:function(x){return x.attach.event===2&&this.core.qchatChannel.subscribeForVisitorService.unSubscribeChannel(x.serverId,x.channelId),!0},101:function(x){var $=Xp(x,["serverId","channelId","ext","fromAccount","fromNick","time"]);return this.logger.log("qchat on recvTypingEvent: ",$),this.core.emit("recvTypingEvent",$),!1}},pM=function(){function S($){this.core=$,this.logger=$.logger}var x=S.prototype;return x.sendSystemNotification=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Nh(F)});case 2:return re=qe.sent,xe=$d(re.content.sysMsg,this.logger),this.core.options.debugLevel==="debug"?this.logger.debug("sendCustomSysMsg success",xe):this.logger.log("sendCustomSysMsg success",xe.serverId,xe.channelId,xe.msgIdServer),qe.abrupt("return",xe);case 6:case"end":return qe.stop()}},A,this)}))},x.updateSystemNotification=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return re=F.systemNotification,xe=xl(F,["systemNotification"]),z=Xp(re,["msgIdServer","type","body","ext","status"]),qe=Nh(z),fr.next=5,this.core.sendCmd("qchatUpdateSystemNotification",{sysMsg:qe,qchatMsgUpdateTag:Tn(Tn({},xe),{operatorAccount:this.core.account,operatorClientType:dc.Web,pushPayload:mo(F.pushPayload),routeEnable:Mh.boolean(F,"routeEnable")})});case 5:return At=fr.sent,fr.abrupt("return",$d(At.content.sysMsg,this.logger));case 7:case"end":return fr.stop()}},A,this)}))},x.markSystemNotificationsRead=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("qchatMarkSysMsgRead",{sysMsgs:ho(re=F.systemNotifications).call(re,function(qe){return Dy(qe)})});case 2:case"end":return z.stop()}},A,this)}))},x.onSysMsg=function(F){var A=F.content.sysMsg;if(A){var re=$d(A,this.core.logger),xe=dM[Xo[re.type]];if(xe&&xe.call(this,re)===!1)return;var z={feature:"default",systemNotifications:[re]};this.logger.log("qchat on systemNotification: ",z),this.core.emit("systemNotification",z)}else this.core.logger.warn("No sysMsg in onSysMsg packet")},x.onMultiSysMsg=function(F){var A=F.content.sysMsg;if(A){var re=$d(A,this.logger);this.core.emit("systemNotificationUpdate",re)}},x.onSyncSysMsg=function(F){var A=this,re=F.content.systemNotifications;if(re&&re.length>0){var xe=ho(re).call(re,function(z){return $d(z,A.logger)});this.core.emit("systemNotification",{feature:"sync",systemNotifications:xe})}else this.logger.warn("sync system notification not exist")},S}(),Lh=["image","audio","video","file"],fM=function(){function S($){var F=this;this.markMessageRead=Ah(function(A){return Cr(F,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatMarkMessageRead",{markMsgReadTag:A});case 2:xe=At.sent,z=kh(xe.content.unreadInfo),this.core.eventBus.emit("qchatChannel/updateUnreads",[z]);case 5:case"end":return At.stop()}},re,this)}))},200),this.core=$,this.logger=$.logger}var x=S.prototype;return x.sendMessage=function(F){var A,re,xe,z;return Cr(this,void 0,void 0,ir.mark(function qe(){var At,lr,fr,Sr,br,Er;return ir.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(!(pa(Lh).call(Lh,F.type)>-1)){jr.next=4;break}return jr.next=3,this.doSendFile(F);case 3:F.attach=jr.sent;case 4:return At=Bh(Tn({fromAccount:this.core.account},F)),jr.next=7,_i(At,{time:new Date().getTime(),deliveryStatus:Ms.sending},this.core);case 7:lr=jr.sent;try{F.onSendBefore&&F.onSendBefore(lr)}catch(vn){this.logger.error("sendMsg: options.onSendBefore error",vn)}return jr.prev=9,jr.next=12,this.core.sendCmd("qchatSendMsg",{qchatMsg:At});case 12:fr=jr.sent,jr.next=22;break;case 15:return jr.prev=15,jr.t0=jr.catch(9),jr.next=19,_i(At,{time:new Date().getTime(),deliveryStatus:Ms.failed,attachUrl:(A=lr.attach)===null||A===void 0?void 0:A.url},this.core);case 19:throw Sr=jr.sent,jr.t0.msg=Sr,jr.t0;case 22:return br=fr.content,jr.next=25,_i(Tn({},br.qchatMsg),{deliveryStatus:Ms.success,attachUrl:(re=lr.attach)===null||re===void 0?void 0:re.url},this.core);case 25:if(!(Er=jr.sent).isAntispam){jr.next=29;break}throw{code:10403,msg:Er,message:((xe=Er==null?void 0:Er.antiSpamInfo)===null||xe===void 0?void 0:xe.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((z=Er==null?void 0:Er.antiSpamInfo)===null||z===void 0?void 0:z.yidunAntiSpamRes)||""};case 29:return jr.abrupt("return",Er);case 30:case"end":return jr.stop()}},qe,this,[[9,15]])}))},x.doSendFile=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re;return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Wr({type:{type:"enum",values:["image","audio","video","file"]},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},F),re=F.attach){z.next=23;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){z.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return z.prev=5,z.next=8,this.core.cloudStorage.uploadFile(F);case 8:re=z.sent,z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(5),this.logger.error("sendFile:: upload File error or abort",z.t0),z.t0;case 15:z.prev=15,F.onUploadDone&&F.onUploadDone(re),z.next=23;break;case 19:throw z.prev=19,z.t1=z.catch(15),this.logger.error("sendFile options.onUploadDone err",z.t1),z.t1;case 23:return z.abrupt("return",re);case 24:case"end":return z.stop()}},A,this,[[5,11],[15,19]])}))},x.resendMessage=function(F){var A,re;return Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe,At,lr,fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return(z=Bh(Tn(Tn({},F),{resendFlag:!0}))).deliveryStatus=Ms.sending,br.prev=2,br.next=5,this.core.sendCmd("qchatSendMsg",{qchatMsg:z});case 5:qe=br.sent,br.next=15;break;case 8:return br.prev=8,br.t0=br.catch(2),br.next=12,_i(z,{time:new Date().getTime(),deliveryStatus:Ms.failed},this.core);case 12:throw At=br.sent,br.t0.msg=At,br.t0;case 15:return lr=qe.content,br.next=18,_i(Tn({},lr.qchatMsg),{deliveryStatus:Ms.success},this.core);case 18:if(!(fr=br.sent).isAntispam){br.next=22;break}throw{code:10403,msg:fr,message:((A=fr==null?void 0:fr.antiSpamInfo)===null||A===void 0?void 0:A.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((re=fr==null?void 0:fr.antiSpamInfo)===null||re===void 0?void 0:re.yidunAntiSpamRes)||""};case 22:return br.abrupt("return",fr);case 23:case"end":return br.stop()}},xe,this,[[2,8]])}))},x.doUpdateMessage=function(F){var A,re;return Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe,At,lr,fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return z=F.message,qe=xl(F,["message"]),(At=Bh(z)).msgIdClient=void 0,At.time=z.time,br.next=6,this.core.sendCmd("qchatUpdateMessage",{qchatMsg:At,qchatMsgUpdateTag:Tn(Tn({},qe),{operatorAccount:this.core.account,operatorClientType:dc.Web,pushPayload:mo(F.pushPayload),routeEnable:Mh.boolean(F,"routeEnable")})});case 6:return lr=br.sent,br.next=9,_i(lr.content.qchatMsg,{},this.core);case 9:if(fr=br.sent,this.core.eventBus.emit("qchatChannel/changeUnread",fr,!0),!lr.content.qchatMsg.isAntispam){br.next=14;break}throw{code:10403,msg:At,message:((A=lr.content.qchatMsg)===null||A===void 0?void 0:A.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((re=lr.content.qchatMsg)===null||re===void 0?void 0:re.yidunAntiSpamRes)||""};case 14:return br.abrupt("return",fr);case 15:case"end":return br.stop()}},xe,this)}))},x.getHistoryMessage=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe=this;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.next=2,this.core.sendCmd("qchatGetHistoryMsg",{getHistoryMsgTag:Tn(Tn({},F),{reverse:kl(F)?1:0})});case 2:return xe=lr.sent,z=xe.content,lr.next=6,uo.all(ho(re=z.qchatMsgs).call(re,function(fr){return _i(fr,{},qe.core)}));case 6:return lr.abrupt("return",lr.sent);case 7:case"end":return lr.stop()}},A,this)}))},x.getMentionedMeMessages=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At,lr=this;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return Sr.next=2,this.core.sendCmd("qchatGetMentionedMeMessages",{tag:F});case 2:return xe=Sr.sent,z=xe.content,br=z.page,qe=va(uM,br),Sr.next=7,uo.all(ho(re=z.datas).call(re,function(Er){return _i(Er,{},lr.core)}));case 7:return At=Sr.sent,Sr.abrupt("return",{pageInfo:qe,messages:At});case 9:case"end":return Sr.stop()}var br},A,this)}))},x.areMentionedMeMessages=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:re={},xe=0;case 2:if(!(xe<F.length)){At.next=13;break}if((z=F[xe]).fromAccount!==this.core.account){At.next=7;break}return re[z.msgIdClient]=!1,At.abrupt("continue",10);case 7:return At.next=9,this.core.qchatChannel.subscribeModuleService.getMentionedFlag(z,!0);case 9:re[z.msgIdClient]=At.sent;case 10:xe++,At.next=2;break;case 13:return At.abrupt("return",re);case 14:case"end":return At.stop()}},A,this)}))},x.getLastMessageOfChannels=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatGetLastMessageOfChannels",{tag:F});case 2:return re=At.sent,xe=re.content.msgs,At.next=6,Fh(xe,{},this.core);case 6:return z=At.sent,At.abrupt("return",Sc(z).call(z,function(lr,fr){return lr[fr.channelId]=fr,lr},{}));case 8:case"end":return At.stop()}},A,this)}))},x.messageSearchByPage=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("qchatMessageSearchByPage",{qchatMessageSearchByPageTag:Tn(Tn({},(Sr=F,Gl(Vy,Sr))),{includeSelf:F.includeSelf?1:""})});case 2:return re=fr.sent,xe=re.content,z=xe.datas,qe=xe.listQueryTag,fr.next=6,Fh(z,{},this.core);case 6:return At=fr.sent,fr.abrupt("return",{listQueryTag:{hasMore:+qe.hasMore==1,nextTimetag:qe.nextTimetag?Lo(qe.nextTimetag):0,cursor:qe.cursor},datas:At});case 8:case"end":return fr.stop()}var Sr},A,this)}))},x.onMsg=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(re=F.content.qchatMsg){qe.next=4;break}return this.logger.warn("No qchatMsg in qchatMsg packet"),qe.abrupt("return");case 4:return qe.next=6,_i(re,{},this.core);case 6:xe=qe.sent,this.core.eventBus.emit("qchatChannel/changeUnread",xe,!1),this.core.emit("message",xe);case 9:case"end":return qe.stop()}},A,this)}))},x.onRecvUnreadInfo=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(re=F.content.qchatMsg){qe.next=3;break}return qe.abrupt("return");case 3:return qe.next=5,_i(re);case 5:xe=qe.sent,this.core.eventBus.emit("qchatChannel/changeUnread",xe,!1);case 7:case"end":return qe.stop()}},A,this)}))},x.onMultiSyncRead=function(F){var A=F.content.unreadInfo;if(A){var re=kh(A);this.core.eventBus.emit("qchatChannel/updateUnreads",[re])}},x.onMultiSyncServersRead=function(F){var A=F.content.qchatMultiSyncServersMessageReadTag;if(A){var re=vl(A),xe=re.successServerIds,z=re.ackTimestamp;this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",xe,z)}},x.onRecvMsgUpdate=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(re=F.content.qchatMsg,xe=F.content.qchatMsgUpdateInfo,re){lr.next=4;break}return lr.abrupt("return");case 4:return lr.next=6,_i(re,{},this.core);case 6:z=lr.sent,qe=Uy(xe),this.core.eventBus.emit("qchatChannel/changeUnread",z,!0),this.core.emit("messageUpdate",z,qe);case 10:case"end":return lr.stop()}},A,this)}))},S}(),mM=function(){function S($){var F=this;this._sendTypingEvent=Ah(function(A){return Cr(F,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Nh(Tn(Tn({},A),{resendFlag:!1,persistEnable:!1,routeEnable:!1,pushEnable:!1,needBadge:!1,needPushNick:!1}),Xo.msgTyping)});case 2:case"end":return z.stop()}},re,this)}))},3e3),this.core=$,this.logger=$.logger,this.lastChannelIdInTyping=""}var x=S.prototype;return x.getMessageHistoryByIds=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.sendCmd("qchatGetMessageHistoryByIds",{channelInfo:{serverId:F.serverId,channelId:F.channelId},messageReferList:F.messageReferList});case 2:return xe=qe.sent,qe.abrupt("return",uo.all(ho(re=xe.content.qchatMsgs).call(re,function(At){return _i(At)})));case 4:case"end":return qe.stop()}},A,this)}))},x.getReferMessages=function(F){var A,re;return Cr(this,void 0,void 0,ir.mark(function xe(){var z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(!((A=F.message.replyRefer)===null||A===void 0)&&A.msgIdServer&&(!((re=F.message.threadRefer)===null||re===void 0)&&re.msgIdServer)){At.next=2;break}throw new Error("Message has no reply");case 2:return At.next=4,this.getMessageHistoryByIds({serverId:F.message.serverId,channelId:F.message.channelId,messageReferList:[F.message.replyRefer,F.message.threadRefer]});case 4:if(z=At.sent,F.referType!==lc[lc.all]){At.next=9;break}return At.abrupt("return",{replyMessage:z[0],threadMessage:z[1]});case 9:if(F.referType!==lc[lc.reply]){At.next=13;break}return At.abrupt("return",{replyMessage:z[0]});case 13:if(F.referType!==lc[lc.thread]){At.next=15;break}return At.abrupt("return",{threadMessage:z[1]});case 15:return At.abrupt("return",{replyMessage:z[0],threadMessage:z[1]});case 16:case"end":return At.stop()}},xe,this)}))},x.getThreadMessages=function(F){var A;return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return z=!((A=F.message.threadRefer)===null||A===void 0)&&A.msgIdServer?Tn({serverId:F.message.serverId,channelId:F.message.channelId},F.message.threadRefer):F.message,Sr.next=3,this.core.sendCmd("qchatGetThreadMessages",{qchatMsg:z,getThreadHistoryMsgTag:Tn(Tn({},F.messageQueryOption),{reverse:Mh.boolean(F.messageQueryOption,"reverse")})});case 3:return qe=Sr.sent,Sr.next=6,_i(qe.content.thread);case 6:return At=Sr.sent,Sr.next=9,uo.all(ho(xe=qe.content.qchatMsgs).call(xe,function(br){return _i(br)}));case 9:return lr=Sr.sent,Sr.abrupt("return",{thread:At,threadInfo:{messageCount:+qe.content.threadInfo.messageCount,lastMessageTimestamp:+qe.content.threadInfo.lastMessageTimestamp},messages:lr});case 11:case"end":return Sr.stop()}},re,this)}))},x.getThreadRootMessagesMeta=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return re=F.threadRootMessages,xe=xl(F,["threadRootMessages"]),lr.next=3,this.core.sendCmd("qchatGetThreadRootMessagesMeta",{qchatMsgs:re,tag:xe});case 3:if(z=lr.sent,!((qe=z.content.metas)&&qe.length>0)){lr.next=7;break}return lr.abrupt("return",ho(qe).call(qe,function(fr){return Tn(Tn({},fr),{total:Lo(fr.total),timestamp:Lo(fr.timestamp),msgTime:Lo(fr.msgTime)})}));case 7:return lr.abrupt("return",[]);case 8:case"end":return lr.stop()}},A,this)}))},x.getQuickComments=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){var re,xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatGetQuickComments",{tag:{serverId:F.serverId,channelId:F.channelId,msgIdServerList:mo(ho(re=F.msgList).call(re,function(lr){return lr.msgIdServer}))}});case 2:return xe=At.sent,z=xe.content.quickCommentResponse,At.abrupt("return",cM(z));case 5:case"end":return At.stop()}},A,this)}))},x.updateQuickComment=function(F,A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr,fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Wr({type:{type:"number"},commentMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},F),xe=F.commentMessage,z=xe.serverId,qe=xe.channelId,At=xe.fromAccount,lr=xe.msgIdServer,fr=xe.time,br.next=4,this.core.sendCmd("qchatUpdateQuickComment",{tag:{serverId:z,channelId:qe,fromAccount:At,msgIdServer:lr,time:fr,type:F.type,opeType:A,opeAccid:this.core.account}});case 4:case"end":return br.stop()}},re,this)}))},x.sendTypingEvent=function(F){return Cr(this,void 0,void 0,ir.mark(function A(){return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(F.channelId!==this.lastChannelIdInTyping){xe.next=4;break}return this.logger.log("qchatMsg sendTypingEvent throttle"),this._sendTypingEvent(F),xe.abrupt("return");case 4:this.lastChannelIdInTyping=F.channelId,this._sendTypingEvent.flush(),this._sendTypingEvent(F);case 7:case"end":return xe.stop()}},A,this)}))},S}(),Hy=function(S){function x(F){var A;return(A=S.call(this,"qchatMsg",F)||this).core=F,A.lastChannelIdInMark="",Ps({cmdMap:Rh,cmdConfig:iM}),A.notificationModuleService=new pM(F),A.messageModuleService=new fM(F),A.extendModuleService=new mM(F),A}No(x,S);var $=x.prototype;return $.sendMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(Ld)},ext:{type:"string",required:!1},mentionAll:{type:"boolean",required:!1},mentionAccids:{type:"array",itemType:"string",required:!1},mentionRoleIds:{type:"array",itemType:"string",required:!1,min:1},historyEnable:{type:"boolean",required:!1},pushEnable:{type:"boolean",required:!1}},A),z.next=3,this.messageModuleService.sendMessage(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.updateMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Wr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0},body:{type:"string",required:!1},ext:{type:"string",required:!1}}}},A),!(typeof A.message.status=="number"&&A.message.status<1e4)){z.next=3;break}throw new yo("Status should be greater than or equal to 10000");case 3:return z.next=5,this.messageModuleService.doUpdateMessage(A);case 5:return z.abrupt("return",z.sent);case 6:case"end":return z.stop()}},re,this)}))},$.resendMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdClient:{type:"string",allowEmpty:!1}},A),z.next=3,this.messageModuleService.resendMessage(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.deleteMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},A),(xe=JSON.parse(mo(A))).message.status=2,qe.next=5,this.messageModuleService.doUpdateMessage(xe);case 5:return qe.abrupt("return",qe.sent);case 6:case"end":return qe.stop()}},re,this)}))},$.revokeMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},A),(xe=JSON.parse(mo(A))).message=Xp(xe.message,["serverId","channelId","msgIdServer","time"]),xe.message.status=1,qe.next=6,this.messageModuleService.doUpdateMessage(xe);case 6:return qe.abrupt("return",qe.sent);case 7:case"end":return qe.stop()}},re,this)}))},$.markMessageRead=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:Wr({serverId:{type:"string"},channelId:{type:"string"},time:{type:"number",min:0}},A),A.channelId!==this.lastChannelIdInMark&&this.messageModuleService.markMessageRead.flush(),this.lastChannelIdInMark=A.channelId,this.messageModuleService.markMessageRead(A);case 4:case"end":return z.stop()}},re,this)}))},$.replyMessage=function(A){Wr({replyMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},A);var re=A.replyMessage;if(A.serverId!==re.serverId||A.channelId!==re.channelId)throw new yo("Forbid replying to message from other server, channel");return this.sendMessage(A)},$.getMessageHistoryByIds=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},messageReferList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},A),z.next=3,this.extendModuleService.getMessageHistoryByIds(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.getReferMessages=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},referType:{type:"enum",values:sa(lc),required:!1}},A),z.next=3,this.extendModuleService.getReferMessages(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.getThreadMessages=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},messageQueryOption:{type:"object",rules:{beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},excludeMsgId:{type:"string",required:!1},limit:{type:"number",required:!1},reverse:{type:"boolean",required:!1}}}},A),z.next=3,this.extendModuleService.getThreadMessages(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.getThreadRootMessagesMeta=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},threadRootMessages:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},A),z.next=3,this.extendModuleService.getThreadRootMessagesMeta(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.sendSystemNotification=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},attach:{type:"object",required:!1}},A),z.next=3,this.notificationModuleService.sendSystemNotification(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.updateSystemNotification=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({systemNotification:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"enum",values:sa(Xo)},body:{type:"string",required:!1},ext:{type:"string",required:!1},status:{type:"number",required:!1}}}},A),z.next=3,this.notificationModuleService.updateSystemNotification(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.markSystemNotificationsRead=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({systemNotifications:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1}},min:1}},A),z.next=3,this.notificationModuleService.markSystemNotificationsRead(A);case 3:case"end":return z.stop()}},re,this)}))},$.getHistoryMessage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},beginTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},excludeMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},A),z.next=3,this.messageModuleService.getHistoryMessage(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.getMentionedMeMessages=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},A),z.next=3,this.messageModuleService.getMentionedMeMessages(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.areMentionedMeMessages=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(Wr({messages:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1}},min:1}},A),Al(xe=A.messages).call(xe,function(At){return A.messages[0].serverId===At.serverId})){qe.next=4;break}throw new yo("Different serverId",A,10414);case 4:if(!this.core.qchatChannel.subscribeForVisitorService.isInAutoServers(A.messages[0].serverId)){qe.next=7;break}throw new yo("Not allowed for visitor",A,10403);case 7:return qe.next=9,this.messageModuleService.areMentionedMeMessages(A.messages);case 9:return qe.abrupt("return",qe.sent);case 10:case"end":return qe.stop()}},re,this)}))},$.addQuickComment=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.extendModuleService.updateQuickComment(A,1);case 2:case"end":return z.stop()}},re,this)}))},$.removeQuickComment=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.extendModuleService.updateQuickComment(A,2);case 2:case"end":return z.stop()}},re,this)}))},$.getQuickComments=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1}},min:1}},A),z.next=3,this.extendModuleService.getQuickComments(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.sendTypingEvent=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},A),z.next=3,this.extendModuleService.sendTypingEvent(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.getLastMessageOfChannels=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelIdList:{type:"array",itemType:"string"}},A),z.next=3,this.messageModuleService.getLastMessageOfChannels(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.qchatOnMsgHandler=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onMsg(A);case 1:case"end":return z.stop()}},re,this)}))},$.qchatOnRecvUnreadInfoHandler=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onRecvUnreadInfo(A);case 1:case"end":return z.stop()}},re,this)}))},$.qchatOnSysMsgHandler=function(A){this.notificationModuleService.onSysMsg(A)},$.qchatMultiSyncMessageReadHandler=function(A){this.messageModuleService.onMultiSyncRead(A)},$.qchatMultiSyncSystemNotificationUpdateHandler=function(A){this.notificationModuleService.onMultiSysMsg(A)},$.qchatSyncSystemNotificationHandler=function(A){this.notificationModuleService.onSyncSysMsg(A)},$.qchatRecvMessageUpdateHandler=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onRecvMsgUpdate(A);case 1:case"end":return z.stop()}},re,this)}))},$.searchMsgByPage=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({keyword:{type:"string",allowEmpty:!1,required:!1},serverId:{type:"string",allowEmpty:!1,required:!0},channelId:{type:"string",allowEmpty:!1,required:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},fromTime:{type:"number",allowEmpty:!1,required:!1},toTime:{type:"number",allowEmpty:!1,required:!1},msgTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!0},subTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!1},includeSelf:{type:"boolean",allowEmpty:!1,required:!1},order:{type:"enum",values:sa(Ic),required:!1},limit:{type:"number",min:0,required:!1},sort:{type:"enum",values:sa(Qp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},A),z.next=3,this.messageModuleService.messageSearchByPage(A);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},re,this)}))},$.qchatMultiSyncServersMessageReadHandler=function(A){this.messageModuleService.onMultiSyncServersRead(A)},x}(gl);function jh(S,x){x===void 0&&(x=1);var $=va({clientPort:{type:"number"},clientType:{type:"enum",values:dc},customClientType:{type:"number"},loginTime:{type:"number"},hasTokenPreviously:{type:"boolean"},pushType:{type:"number"}},S);return Tn(Tn({},$),{account:$.account,connectionId:$.connectionId,deviceId:$.deviceId,ip:$.ip,mac:$.ip,os:$.os,clientType:$.clientType,time:$.time,online:x!==2})}var zy={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},Dh,wi,ya={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},gM=function(S){function x(F){var A;return(A=S.call(this,"qchatAuth",F)||this).syncTimeTag=0,A}No(x,S);var $=x.prototype;return $.doLogin=function(A){var re;return A===void 0&&(A=!1),Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe,At,lr,fr,Sr,br;return ir.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return z=this.core.options,qe=ta.getSystemInfo(),At=Tn(Tn({},z),{appLogin:A?0:1,clientType:16,clientSession:(re=this.core.socket)===null||re===void 0?void 0:re.sessionId,deviceId:this.core.config.deviceId,sdkVersion:91001,sdkType:ya[ta.platform]||0,userAgent:"Native/0.13.1",sdkHumanVersion:"0.13.1",os:qe.os,browser:qe.browser}),$r.next=5,this.core.sendCmd("qchatLogin",{qchatLoginReqTag:At});case 5:if(!(lr=$r.sent).error){$r.next=8;break}throw lr.error;case 8:return fr=lr.content,Sr=fr.qchatLoginResTag,br=fr.qchatMultiLoginResult,Sr.isAutoReconnect=A,$r.abrupt("return",{loginResult:jh(Sr),multiLoginResults:ho(br).call(br,function(jr){return jh(jr)})});case 11:case"end":return $r.stop()}},xe,this)}))},$.kick=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){var z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatKick",A);case 2:return z=At.sent,At.abrupt("return",(re=z.content)===null||re===void 0?void 0:re.deviceIds);case 4:case"end":return At.stop()}},xe,this)}))},$.sync=function(){return Cr(this,void 0,void 0,ir.mark(function A(){return ir.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,this.core.sendCmd("qchatSync",{qchatSyncTag:{systemNotification:this.syncTimeTag||0}});case 2:case"end":return xe.stop()}},A,this)}))},$.qchatSyncHandler=function(A){var re,xe;this.logger.log("sync: emit syncdone",(re=A.content)===null||re===void 0?void 0:re.timetag),this.core.emit("syncdone"),this.syncTimeTag=((xe=A.content)===null||xe===void 0?void 0:xe.timetag)||0},$.qchatMultiSpotLoginHandler=function(A){if(A.error)this.logger.error("qchatMultiPortLoginHandler:: error, ",A.error);else{var re=A.content,xe=jh(re.qchatLoginResTag,re.state);this.core.emit("multiSpotLogin",[xe])}},$.qchatBeKickedHandler=function(A){if(A.error)this.logger.error("qchatBeKickedHandler error, ",A.error);else{var re=function(z){var qe=va({clientType:{type:"enum",values:dc},customClientType:{type:"number"}},z),At=zy[qe.reason];return Tn(qe,At=At||{reason:"unknow",message:"Unknown reason"})}(A.content.beKickedTag);this.logger.warn("bekicked::",re),this.core.doDisconnect(di.KICKED,re)}},x}(gl);(function(S){S.UNKNOWN="UNKNOWN",S.LOGIN_STATE_ERROR="LOGIN_STATE_ERROR",S.CLOSE_BY_BACKEND="CLOSE_BY_BACKEND",S.ALL_MEMBERS_OUT="ALL_MEMBERS_OUT",S.END_OF_LIFE="END_OF_LIFE",S.CLOSE_BY_MEMBER="CLOSE_BY_MEMBER",S.KICK_OUT="KICK_OUT",S.SYNC_DATA_ERROR="SYNC_DATA_ERROR",S.LEAVE_BY_SELF="LEAVE_BY_SELF",S.kICK_BY_SELF="kICK_BY_SELF"})(Dh||(Dh={})),function(S){S.offNotAllowSelfOn="offNotAllowSelfOn",S.offAllowSelfOn="offAllowSelfOn",S.disable="disable"}(wi||(wi={}));var Rc={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},pc={limit:{type:"number"}};function fc(S){return ni(S)&&S.length>0?ho(S).call(S,function(x){return function(F){return va(Rc,F)}(x)}):[]}function hM(S){try{S.audio&&(S.audio=JSON.parse(S.audio))}catch{throw new al('result "audio" JSON parse error',{key:"audio"},"JSON parse error")}try{S.video&&(S.video=JSON.parse(S.video))}catch{throw new al('result "video" JSON parse error',{key:"video"},"JSON parse error")}return va(pc,S)}var Ud={"25_1":"qchatGetNeroomToken","25_2":"qchatUpdateRTCChannelConfig","25_3":"qchatGetRTCChannelConfig","25_4":"qchatGetRTCChannelMembers"},qd={QChatRTCChannelConfigTag:{serverId:1,channelId:2,limit:3,audio:4,video:5},QChatRTCChannelConfigResultTag:{limit:1,audio:2,video:3},QChatGetRTCParams:{serverId:1,channelId:2},qchatGetRTCChannelMembersTag:{serverId:1,channelId:2},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},QChatGetNeroomTokenResultTag:{token:1,expire:2},QChatGetNeroomTokenParams:{neroomDeviceId:1}},tf=Mc(qd),Vd={qchatGetNeroomToken:{sid:25,cid:1,service:"qchatMedia",params:[{type:"Property",name:"qchatGetNeroomTokenTag",reflectMapper:qd.QChatGetNeroomTokenParams}],response:[{type:"Property",name:"neroomToken",reflectMapper:tf.QChatGetNeroomTokenResultTag}]},qchatUpdateRTCChannelConfig:{sid:25,cid:2,service:"qchatMedia",params:[{type:"Property",name:"RTCChannelConfig",reflectMapper:qd.QChatRTCChannelConfigTag}]},qchatGetRTCChannelConfig:{sid:25,cid:3,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelConfigTag",reflectMapper:qd.QChatGetRTCParams}],response:[{type:"Property",name:"RTCChannelConfig",reflectMapper:tf.QChatRTCChannelConfigResultTag}]},qchatGetRTCChannelMembers:{sid:25,cid:4,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelMembersTag",reflectMapper:qd.QChatGetRTCParams}],response:[{type:"PropertyArray",name:"memberList",reflectMapper:tf.memberInfo}]}},vM=function(S){function x(F){var A;return(A=S.call(this,"qchatMedia",F)||this).tokenExpireTime=24e4,A.getTokenState=!1,A.core=F,Ps({cmdMap:Ud,cmdConfig:Vd}),A.core.on("disconnect",function(){return Cr(s(A),void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.roomContext){z.next=3;break}return z.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return z.stop()}},re,this)}))}),A.core.on("kicked",function(){return Cr(s(A),void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.roomContext){z.next=3;break}return z.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return z.stop()}},re,this)}))}),A.core.eventBus.on("qchatMedia/serverOrChannelLeave",function(re){return Cr(s(A),void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(!(re.type===Xo[Xo.channelVisibilityUpdate]&&re.channelId===this.channelId||re.type===Xo[Xo.serverEnterLeave]&&re.serverId===this.serverId)){qe.next=4;break}if(!this.roomContext||!this.roomContext.roomUuid){qe.next=4;break}return qe.next=4,this.disconnectChannel();case 4:case"end":return qe.stop()}},xe,this)}))}),A.tokenExpireTime=24e4,A.channelId="",A.serverId="",A}No(x,S);var $=x.prototype;return $.setNeroom=function(A){this.neroom=new A},$._checkPermission=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.qchatRole.checkPermission(A);case 2:return xe=qe.sent,qe.abrupt("return",xe);case 4:case"end":return qe.stop()}},re,this)}))},$._checkConnectState=function(){if(this.state!=="connect")throw new yo("QChatMedia::you should connect first")},$.kickMemberOut=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),qe.prev=2,qe.next=5,(re=this.roomContext)===null||re===void 0?void 0:re.kickMemberOut(A.accid);case 5:qe.next=11;break;case 7:throw qe.prev=7,qe.t0=qe.catch(2),this.logger.error("QChatMedia::kickMemberOut error params is "+mo(A),qe.t0),new yo("QChatMedia::kickMemberOut error",qe.t0);case 11:case"end":return qe.stop()}},xe,this,[[2,7]])}))},$.disconnectChannel=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),this.logger.debug("QChatMedia::disconnect begin disconnect"),z.prev=2,z.next=5,(A=this.roomContext)===null||A===void 0?void 0:A.leaveRoom();case 5:z.next=10;break;case 7:z.prev=7,z.t0=z.catch(2),this.logger.error("QChatMedia::disconnect error",z.t0);case 10:if(!this.authService){z.next=13;break}return z.next=13,this.authService.logout();case 13:this._setStateInit(),this.core.emit("qchatMediaDisconnect");case 15:case"end":return z.stop()}},re,this,[[2,7]])}))},$._setStateInit=function(){this.logger.debug("QChatMedia::disconnect end"),this.roomContext=void 0,this.rtcController=void 0,this.state="init",this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0),this.channelId="",this.serverId=""},$.muteAudio=function(A){var re,xe,z,qe,At;return Cr(this,void 0,void 0,ir.mark(function lr(){var fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),((re=this.roomContext)===null||re===void 0?void 0:re.localMember.uuid)!==A.accid){br.next=14;break}return br.prev=3,br.next=6,(xe=this.rtcController)===null||xe===void 0?void 0:xe.muteMyAudio();case 6:br.next=12;break;case 8:throw br.prev=8,br.t0=br.catch(3),this.logger.error("QChatMedia::muteAudio error",br.t0),new yo("QChatMedia::muteAudio error",br.t0);case 12:case 25:br.next=31;break;case 14:if(br.prev=14,!(fr=(z=this.roomContext)===null||z===void 0?void 0:z.roomProperties.audioOff)||((qe=fr.value)===null||qe===void 0?void 0:qe.split("_")[0])!==wi.offNotAllowSelfOn){br.next=23;break}return br.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 19:if(br.sent){br.next=23;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),br.abrupt("return");case 23:return br.next=25,(At=this.rtcController)===null||At===void 0?void 0:At.muteMemberAudio(A.accid);case 27:throw br.prev=27,br.t1=br.catch(14),this.logger.error("QChatMedia::muteAudio error params is "+mo(A),br.t1),new yo("QChatMedia::muteAudio error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[3,8],[14,27]])}))},$.unMuteAudio=function(A){var re,xe,z,qe,At;return Cr(this,void 0,void 0,ir.mark(function lr(){var fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),!(fr=(re=this.roomContext)===null||re===void 0?void 0:re.roomProperties.audioOff)||((xe=fr.value)===null||xe===void 0?void 0:xe.split("_")[0])!==wi.offNotAllowSelfOn){br.next=10;break}return br.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 6:if(br.sent){br.next=10;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),br.abrupt("return");case 10:if(((z=this.roomContext)===null||z===void 0?void 0:z.localMember.uuid)!==A.accid){br.next=22;break}return br.prev=11,br.next=14,(qe=this.rtcController)===null||qe===void 0?void 0:qe.unmuteMyAudio();case 14:br.next=20;break;case 16:throw br.prev=16,br.t0=br.catch(11),this.logger.error("QChatMedia::unMuteAudio error",br.t0),new yo("QChatMedia::unMuteAudio error",br.t0);case 20:case 25:br.next=31;break;case 22:return br.prev=22,br.next=25,(At=this.rtcController)===null||At===void 0?void 0:At.unmuteMemberAudio(A.accid);case 27:throw br.prev=27,br.t1=br.catch(22),this.logger.error("QChatMedia::unMuteAudio error params is "+mo(A),br.t1),new yo("QChatMedia::unMuteAudio error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[11,16],[22,27]])}))},$.muteVideo=function(A){var re,xe,z,qe,At;return Cr(this,void 0,void 0,ir.mark(function lr(){var fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),((re=this.roomContext)===null||re===void 0?void 0:re.localMember.uuid)!==A.accid){br.next=14;break}return br.prev=3,br.next=6,(xe=this.rtcController)===null||xe===void 0?void 0:xe.muteMyVideo();case 6:br.next=12;break;case 8:throw br.prev=8,br.t0=br.catch(3),this.logger.error("QChatMedia::muteVideo error",br.t0),new yo("QChatMedia::muteVideo error",br.t0);case 12:case 25:br.next=31;break;case 14:if(br.prev=14,!(fr=(z=this.roomContext)===null||z===void 0?void 0:z.roomProperties.videoOff)||((qe=fr.value)===null||qe===void 0?void 0:qe.split("_")[0])!==wi.offNotAllowSelfOn){br.next=23;break}return br.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 19:if(br.sent){br.next=23;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),br.abrupt("return");case 23:return br.next=25,(At=this.rtcController)===null||At===void 0?void 0:At.muteMemberVideo(A.accid);case 27:throw br.prev=27,br.t1=br.catch(14),this.logger.error("QChatMedia::muteVideo error params is "+mo(A),br.t1),new yo("QChatMedia::muteVideo error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[3,8],[14,27]])}))},$.unMuteVideo=function(A){var re,xe,z,qe,At;return Cr(this,void 0,void 0,ir.mark(function lr(){var fr;return ir.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),!(fr=(re=this.roomContext)===null||re===void 0?void 0:re.roomProperties.videoOff)||((xe=fr.value)===null||xe===void 0?void 0:xe.split("_")[0])!==wi.offNotAllowSelfOn){br.next=10;break}return br.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 6:if(br.sent){br.next=10;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),br.abrupt("return");case 10:if(((z=this.roomContext)===null||z===void 0?void 0:z.localMember.uuid)!==A.accid){br.next=22;break}return br.prev=11,br.next=14,(qe=this.rtcController)===null||qe===void 0?void 0:qe.unmuteMyVideo();case 14:br.next=20;break;case 16:throw br.prev=16,br.t0=br.catch(11),this.logger.error("QChatMedia::unMuteVideo error",br.t0),new yo("QChatMedia::unMuteVideo error",br.t0);case 20:br.next=30;break;case 22:br.prev=22,(At=this.rtcController)===null||At===void 0||At.unmuteMemberVideo(A.accid),br.next=30;break;case 26:throw br.prev=26,br.t1=br.catch(22),this.logger.error("QChatMedia::unMuteVideo error",br.t1),new yo("QChatMedia::unMuteVideo error",br.t1);case 30:case"end":return br.stop()}},lr,this,[[11,16],[22,26]])}))},$.startScreenShare=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this._checkConnectState(),z.prev=1,(A=this.rtcController)===null||A===void 0||A.startScreenShare(),z.next=9;break;case 5:throw z.prev=5,z.t0=z.catch(1),this.logger.error("QChatMedia::startScreenShare error",z.t0),new yo("QChatMedia::startScreenShare error",z.t0);case 9:case"end":return z.stop()}},re,this,[[1,5]])}))},$.stopScreenShare=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this._checkConnectState(),z.prev=1,(A=this.rtcController)===null||A===void 0||A.stopScreenShare(),z.next=9;break;case 5:throw z.prev=5,z.t0=z.catch(1),this.logger.error("QChatMedia::stopScreenShare error",z.t0),new yo("QChatMedia::stopScreenShare error",z.t0);case 9:case"end":return z.stop()}},re,this,[[1,5]])}))},$.stopMemberScreenShare=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),qe.prev=2,(re=this.rtcController)===null||re===void 0||re.stopMemberScreenShare(A.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::stopMemberScreenShare error",qe.t0),new yo("QChatMedia::stopMemberScreenShare error",qe.t0);case 10:case"end":return qe.stop()}},xe,this,[[2,6]])}))},$.subscribeRemoteVideoStream=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},A),qe.prev=2,(re=this.rtcController)===null||re===void 0||re.subscribeRemoteVideoStream(A.accid,A.streamType),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoStream error",qe.t0),new yo("QChatMedia::subscribeRemoteVideoStream error",qe.t0);case 10:case"end":return qe.stop()}},xe,this,[[2,6]])}))},$.unSubscribeRemoteVideoStream=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},A),qe.prev=2,(re=this.rtcController)===null||re===void 0||re.unsubscribeRemoteVideoStream(A.accid,A.streamType),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::unSubscribeRemoteVideoStream error",qe.t0),new yo("QChatMedia::unSubscribeRemoteVideoStream error",qe.t0);case 10:case"end":return qe.stop()}},xe,this,[[2,6]])}))},$.setupVideoCanvas=function(A){var re;if(this._checkConnectState(),((re=this.roomContext)===null||re===void 0?void 0:re.localMember.uuid)===A.accid)try{return this.rtcController.setupLocalVideoCanvas(A.videoView)}catch(xe){throw this.logger.error("QChatMedia::setupVideoCanvas error",xe),new yo("QChatMedia::setupVideoCanvas error",xe)}else try{return this.rtcController.setupRemoteVideoCanvas(A.videoView,A.accid)}catch(xe){throw this.logger.error("QChatMedia::setupVideoCanvas error",xe),new yo("QChatMedia::setupVideoCanvas error",xe)}},$.setupRemoteVideoSubStreamCanvas=function(A){this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A);try{return this.rtcController.setupRemoteVideoSubStreamCanvas(A.videoView,A.accid)}catch(re){throw this.logger.error("QChatMedia::setupRemoteVideoSubStreamCanvas error",re),new yo("QChatMedia::setupRemoteVideoSubStreamCanvas error",re)}},$.getScreenSharingUserUuid=function(){this._checkConnectState();try{return this.rtcController.getScreenSharingUserUuid()}catch(A){throw this.logger.error("QChatMedia::getScreenSharingUserUuid error",A),new yo("QChatMedia::getScreenSharingUserUuid error",A)}},$.initQChatMedia=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(this.neroom){z.next=3;break}return this.logger.warn("QChatMedia::init::you should import neroom SDK"),z.abrupt("return");case 3:if(this.state===void 0){z.next=6;break}return this.logger.error("QChatMedia::init::you already init QChatMedia"),z.abrupt("return");case 6:z.prev=6,this.neroom.initialize({appKey:this.core.options.appkey,serverConfig:A.serverConfig}),z.next=14;break;case 10:throw z.prev=10,z.t0=z.catch(6),this.logger.error("QChatMedia::initQChatMedia error",z.t0),new yo("QChatMedia::initQChatMedia error",z.t0);case 14:this.authService=this.neroom.authService,this.roomService=this.neroom.roomService,this.messageChannelService=this.neroom.messageChannelService,this.state="init";case 18:case"end":return z.stop()}},re,this,[[6,10]])}))},$.loginByIM=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z;return ir.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(this.state==="init"){At.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),At.abrupt("return");case 3:return xe=this.core.options,At.next=6,this._getToken();case 6:return z=At.sent,At.prev=7,At.next=10,(A=this.authService)===null||A===void 0?void 0:A.loginByIM(xe.account,z,xe.token);case 10:At.next=16;break;case 12:throw At.prev=12,At.t0=At.catch(7),this.logger.error("QChatMedia::loginByIM error",At.t0),new yo("QChatMedia::loginByIM error",At.t0);case 16:this.state="login";case 17:case"end":return At.stop()}},re,this,[[7,12]])}))},$._getToken=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){var xe,z,qe,At,lr=this;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return this.logger.log("QChatMedia::getToken begin getToken"),Sr.next=3,this.core.sendCmd("qchatGetNeroomToken",{qchatGetNeroomTokenTag:{neroomDeviceId:(A=this.neroom)===null||A===void 0?void 0:A.deviceId}});case 3:return xe=Sr.sent,z=xe.content.neroomToken,qe=z.token,At=z.expire,this.logger.log("QChatMedia::getToken success token is "+qe+",expire is "+At+" "),this.tokenTimer||(this.logger.debug("QChatMedia::getToken set token timer,expire is "+(1e3*At-this.tokenExpireTime)+" "),this.tokenTimer=this.core.timerManager.addTimer(function(){return Cr(lr,void 0,void 0,ir.mark(function br(){var Er;return ir.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return this.tokenTimer&&this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0,jr.next=4,this._getToken();case 4:Er=jr.sent,this.authService&&this.authService.renewToken(Er);case 6:case"end":return jr.stop()}},br,this)}))},1e3*At-this.tokenExpireTime)),Sr.abrupt("return",qe);case 8:case"end":return Sr.stop()}},re,this)}))},$.connectChannel=function(A){var re,xe;return Cr(this,void 0,void 0,ir.mark(function z(){var qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this.state!==void 0){lr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),lr.abrupt("return");case 3:if(this.state!=="init"){lr.next=6;break}return lr.next=6,this.loginByIM();case 6:return this.serverId=A.serverId,this.channelId=A.channelId,lr.prev=8,lr.next=11,(re=this.roomService)===null||re===void 0?void 0:re.joinRoom({roomUuid:A.channelId,role:"qchatAudience",userName:this.core.options.account,initialProperties:{}},{});case 11:lr.next=17;break;case 13:throw lr.prev=13,lr.t0=lr.catch(8),this.logger.error("QChatMedia::connectChannel error",lr.t0),new yo("QChatMedia::connectChannel error",lr.t0);case 17:if(!(qe=(xe=this.roomService)===null||xe===void 0?void 0:xe.getRoomContext(A.channelId))){lr.next=27;break}return this.roomContext=qe,this.rtcController=this.roomContext.rtcController,this.state="connect",lr.next=24,this.rtcController.joinRtcChannel();case 24:this.core.emit("connectChannel"),lr.next=28;break;case 27:this.logger.error("QChatMedia::connect room not exited");case 28:case"end":return lr.stop()}},z,this,[[8,13]])}))},$.updateRTCChannelInfo=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},limit:{type:"number",allowEmpty:!1}},A),z.next=3,this.core.sendCmd("qchatUpdateRTCChannelConfig",{RTCChannelConfig:Tn(Tn({},A),{audio:mo(A.audio),video:mo(A.video)})});case 3:case"end":return z.stop()}},re,this)}))},$.getRTCChannelInfo=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},A),qe.next=3,this.core.sendCmd("qchatGetRTCChannelConfig",{qchatGetRTCChannelConfigTag:A});case 3:return xe=qe.sent,qe.abrupt("return",hM(xe.content.RTCChannelConfig));case 5:case"end":return qe.stop()}},re,this)}))},$.getRTCChannelOnlineMembers=function(A){return Cr(this,void 0,void 0,ir.mark(function re(){var xe;return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Wr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},A),qe.next=3,this.core.sendCmd("qchatGetRTCChannelMembers",{qchatGetRTCChannelMembersTag:A});case 3:return xe=qe.sent,qe.abrupt("return",fc(xe.content.memberList));case 5:case"end":return qe.stop()}},re,this)}))},$.addRTCChannelListener=function(){var A,re,xe=this;this._checkConnectState();try{(A=this.authService)===null||A===void 0||A.addAuthListener({onAuthEvent:function(qe){return Cr(xe,void 0,void 0,ir.mark(function At(){var lr;return ir.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(qe!==1026||this.getTokenState){Sr.next=10;break}return this.logger.log("QChatMedia::loginByIM token expire,begin get new token "),this.getTokenState=!0,Sr.next=5,this._getToken();case 5:if(lr=Sr.sent,!this.authService){Sr.next=9;break}return Sr.next=9,this.authService.renewToken(lr);case 9:this.getTokenState=!1;case 10:case"end":return Sr.stop()}},At,this)}))}})}catch(z){throw this.getTokenState=!1,this.logger.error("QChatMedia::loginByIM addAuthListener error",z),new yo("QChatMedia::loginByIM addAuthListener error",z)}(re=this.roomContext)===null||re===void 0||re.addRoomListener({onRoomPropertiesChanged:function(qe){var At,lr,fr,Sr,br,Er;if(xe.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesChanged",qe),qe.audioOff){var $r=(At=qe.audioOff.value)===null||At===void 0?void 0:At.split("_")[0];$r!==wi.offNotAllowSelfOn&&$r!==wi.offAllowSelfOn||!((lr=xe.roomContext)===null||lr===void 0)&&lr.localMember.isAudioOn&&((fr=xe.rtcController)===null||fr===void 0||fr.muteMyAudio())}else if(qe.videoOff){var jr=(Sr=qe.videoOff.value)===null||Sr===void 0?void 0:Sr.split("_")[0];jr!==wi.offNotAllowSelfOn&&jr!==wi.offAllowSelfOn||!((br=xe.roomContext)===null||br===void 0)&&br.localMember.isVideoOn&&((Er=xe.rtcController)===null||Er===void 0||Er.muteMyVideo())}},onRoomPropertiesDeleted:function(qe){xe.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesDeleted",qe)},onMemberJoinRtcChannel:function(qe){xe.logger.log("QChatMedia::addRTCChannelListener::onMemberJoinRTCChannel",qe);var At=ho(qe).call(qe,function(lr){return lr.uuid});xe.core.emit("memberJoinRTCChannel",At)},onMemberLeaveRoom:function(qe){xe.logger.log("QChatMedia::addRTCChannelListener::onMemberLeaveRoom",qe);var At=ho(qe).call(qe,function(lr){return lr.uuid});xe.core.emit("memberLeaveRTCChannel",At)},onRoomEnded:function(qe){xe.authService&&xe.authService.logout(),xe._setStateInit(),xe.logger.log("QChatMedia::addRTCChannelListener::onRoomEnded",qe),xe.core.emit("RTCChannelEnded",qe)},onRtcChannelError:function(qe){xe.logger.log("QChatMedia::addRTCChannelListener::onRtcChannelError",qe),qe==="SOCKET_ERROR"&&xe.disconnectChannel(),xe.core.emit("RTCChannelError",qe)},onRtcAudioVolumeIndication:function(qe){xe.logger.log("QChatMedia::addRTCChannelListener::onRtcAudioVolumeIndication",qe),xe.core.emit("onRtcAudioVolumeIndication",qe)},onMemberAudioMuteChanged:function(qe,At,lr){xe.logger.log("QChatMedia::addRTCChannelListener::onMemberAudioMuteChanged",qe,At),xe.core.emit("memberAudioMuteChanged",{memberAccId:qe.uuid,mute:At,operateByAccId:lr.uuid})},onMemberScreenShareStateChanged:function(qe,At,lr){xe.logger.log("QChatMedia::addRTCChannelListener::onMemberScreenShareStateChanged",qe,At),xe.core.emit("memberScreenShareStateChanged",{memberAccId:qe.uuid,isSharing:At,operateByAccId:lr.uuid})},onMemberVideoMuteChanged:function(qe,At,lr){xe.logger.log("QChatMedia::addRTCChannelListener::onMemberVideoMuteChanged",qe,At),xe.core.emit("memberVideoMuteChanged",{memberAccId:qe.uuid,mute:At,operateByAccId:lr.uuid})}})},$.enumCameraDevices=function(){var A=this;return this._checkConnectState(),this.rtcController.enumCameraDevices().then(function(re){return re.data},function(re){throw A.logger.error("QChatMedia::enumCameraDevices error",re),new yo("QChatMedia::enumCameraDevices error",re)})},$.enumPlayoutDevices=function(){var A=this;return this._checkConnectState(),this.rtcController.enumPlayoutDevices().then(function(re){return re.data},function(re){throw A.logger.error("QChatMedia::enumPlayoutDevices error",re),new yo("QChatMedia::enumPlayoutDevices error",re)})},$.enumRecordDevices=function(){var A=this;return this._checkConnectState(),this.rtcController.enumRecordDevices().then(function(re){return re.data},function(re){throw A.logger.error("QChatMedia::enumRecordDevices error",re),new yo("QChatMedia::enumRecordDevices error",re)})},$.removeRTCChannelListener=function(){var A,re;this._checkConnectState(),(A=this.roomContext)===null||A===void 0||A.removeRoomListener({}),(re=this.authService)===null||re===void 0||re.removeAuthListener({})},$.setSelectedCameraDevice=function(A){var re=this;return this._checkConnectState(),Wr({deviceId:{type:"string",allowEmpty:!1}},A),this.rtcController.setSelectedCameraDevice(A.deviceId).then(function(xe){return xe.data},function(xe){throw re.logger.error("QChatMedia::setSelectedCameraDevice error",xe),new yo("QChatMedia::setSelectedCameraDevice error",xe)})},$.setSelectedPlayoutDevice=function(A){var re=this;return this._checkConnectState(),Wr({deviceId:{type:"string",allowEmpty:!1}},A),this.rtcController.setSelectedPlayoutDevice(A.deviceId).then(function(xe){return xe.data},function(xe){throw re.logger.error("QChatMedia::setSelectedPlayoutDevice error",xe),new yo("QChatMedia::setSelectedPlayoutDevice error",xe)})},$.setSelectedRecordDevice=function(A){var re=this;return this._checkConnectState(),Wr({deviceId:{type:"string",allowEmpty:!1}},A),this.rtcController.setSelectedRecordDevice(A.deviceId).then(function(xe){return xe.data},function(xe){throw re.logger.error("QChatMedia::setSelectedRecordDevice error",xe),new yo("QChatMedia::setSelectedRecordDevice error",xe)})},$.getRTCMembers=function(){var A,re;return this._checkConnectState(),ho(A=Yi(re=this.roomContext.remoteMembers).call(re,function(xe){return xe.isInRtcChannel})).call(A,function(xe){return{accid:xe.uuid,isAudioOn:!!xe.isAudioOn,isVideoOn:!!xe.isVideoOn,isSharingScreen:!!xe.isSharingScreen,properties:xe.properties}})},$.subscribeRemoteVideoSubStream=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),qe.prev=2,(re=this.rtcController)===null||re===void 0||re.subscribeRemoteVideoSubStream(A.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoSubStream error",qe.t0),new yo("QChatMedia::subscribeRemoteVideoSubStream error",qe.t0);case 10:case"end":return qe.stop()}},xe,this,[[2,6]])}))},$.unsubscribeRemoteVideoSubStream=function(A){var re;return Cr(this,void 0,void 0,ir.mark(function xe(){return ir.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Wr({accid:{type:"string",allowEmpty:!1}},A),qe.prev=2,(re=this.rtcController)===null||re===void 0||re.unsubscribeRemoteVideoSubStream(A.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::unsubscribeRemoteVideoSubStream error",qe.t0),new yo("QChatMedia::unsubscribeRemoteVideoSubStream error",qe.t0);case 10:case"end":return qe.stop()}},xe,this,[[2,6]])}))},$.muteAllAudio=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),z.abrupt("return");case 7:z.prev=7,(A=this.roomContext)===null||A===void 0||A.updateRoomProperty("audioOff",mo({value:wi.offNotAllowSelfOn+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::muteAllAudio error",z.t0),new yo("QChatMedia::muteAllAudio error",z.t0);case 15:case"end":return z.stop()}},re,this,[[7,11]])}))},$.muteAllVideo=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),z.abrupt("return");case 7:z.prev=7,(A=this.roomContext)===null||A===void 0||A.updateRoomProperty("videoOff",mo({value:wi.offNotAllowSelfOn+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::muteAllVideo error",z.t0),new yo("QChatMedia::muteAllVideo error",z.t0);case 15:case"end":return z.stop()}},re,this,[[7,11]])}))},$.unMuteAllAudio=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),z.abrupt("return");case 7:z.prev=7,(A=this.roomContext)===null||A===void 0||A.updateRoomProperty("audioOff",mo({value:wi.disable+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::unMuteAllAudio error",z.t0),new yo("QChatMedia::unMuteAllAudio error",z.t0);case 15:case"end":return z.stop()}},re,this,[[7,11]])}))},$.unMuteAllVideo=function(){var A;return Cr(this,void 0,void 0,ir.mark(function re(){return ir.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),z.abrupt("return");case 7:z.prev=7,(A=this.roomContext)===null||A===void 0||A.updateRoomProperty("videoOff",mo({value:wi.disable+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::unMuteAllVideo error",z.t0),new yo("QChatMedia::unMuteAllVideo error",z.t0);case 15:case"end":return z.stop()}},re,this,[[7,11]])}))},x}(gl),yM={"1_2":"heartbeat","24_2":"qchatLogin","24_4":"qchatExit","24_5":"qchatBeKicked","24_8":"qchatMultiSpotLogin","24_9":"qchatKick","24_19":"qchatSync"},Hd={qchatLoginTag:{appkey:1,account:2,authType:3,token:4,loginExt:5,clientType:6,clientSession:7,deviceId:8,sdkVersion:9,sdkType:10,userAgent:11,customTag:12,customClientType:13,sdkHumanVersion:14,pushTokenName:20,pushToken:21,pushkitTokenName:22,pushkitToken:23,deviceInfo:24,customPushContentType:25,os:30,mac:31,bundleId:32,simCarrierCode:33,simCountryCode:34,networkCode:35,browser:36,deviceModel:37,androidid:38,imei:39,idfv:40,openuuid:41,pushType:100,hasTokenPreviously:101,consid:102,clientIP:103,clientPort:104,loginTime:105}},Sl=Mc(Hd),bM={heartbeat:{sid:1,cid:2,service:"qchatAuth"},qchatLogin:{sid:24,cid:2,service:"qchatAuth",params:[{type:"Property",name:"qchatLoginReqTag",reflectMapper:Hd.qchatLoginTag}],response:[{type:"Property",name:"qchatLoginResTag",reflectMapper:Sl.qchatLoginTag},{type:"PropertyArray",name:"qchatMultiLoginResult",reflectMapper:Sl.qchatLoginTag}]},qchatExit:{sid:24,cid:4,service:"qchatAuth"},qchatBeKicked:{sid:24,cid:5,service:"qchatAuth",response:[{type:"Property",name:"beKickedTag",reflectMapper:{1:"clientType",2:"reason",3:"ext",4:"customClientType"}}]},qchatMultiSpotLogin:{sid:24,cid:8,service:"qchatAuth",response:[{type:"Number",name:"state"},{type:"Property",name:"qchatLoginResTag",reflectMapper:Sl.qchatLoginTag}]},qchatKick:{sid:24,cid:9,service:"qchatAuth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]},qchatSync:{sid:24,cid:19,service:"qchatAuth",isNoResponse:!0,params:[{type:"Property",name:"qchatSyncTag",reflectMapper:{systemNotification:1,pushConfig:2}}],response:[{type:"Number",name:"timetag"}]}},TM={debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},zd=function(S){function x(F,A){var re;return A===void 0&&(A={cloudStorageConfig:{}}),(re=S.call(this,F)||this).instanceName="QChat",re.account="",re.options={},re.qchatAuth={},re.qchatServer={},re.qchatChannel={},re.qchatMsg={},re.qchatRole={},re.qchatMedia={},re.cloudStorage={},re.setOptions(F),Ps({cmdMap:yM,cmdConfig:bM}),Ps({cmdMap:gy,cmdConfig:hh}),re.qchatAuth=new gM(s(re)),re.qchatServer=new BS(s(re)),re.qchatChannel=new tM(s(re)),re.qchatMsg=new Hy(s(re)),re.qchatRole=new oM(s(re)),re.qchatMedia=new vM(s(re)),re.cloudStorage=new hy(s(re),Tn({storageKeyPrefix:re.instanceName},A.cloudStorageConfig)),A&&re.setOtherOptions(A),x.instance=s(re),re}No(x,S),x.getInstance=function(A,re){if(!x.instance){if(A)return new x(A,re);throw new Error("Instance not exist, please input options")}if(A){if(x.instance.options.account===A.account&&x.instance.options.appkey===A.appkey)return x.instance.setOptions(A),re&&x.instance.setOtherOptions(re),x.instance;throw new Error("Unexpected login")}return x.instance};var $=x.prototype;return $.connect=function(A){A===void 0&&(A={});var re=Ja(null,{connect:{get:function(){return S.prototype.connect}}});return Cr(this,void 0,void 0,ir.mark(function xe(){var z,qe,At;return ir.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){fr.next=4;break}return z="QChat status is "+this.status+", and would not connect",this.logger.warn(z),fr.abrupt("return",uo.reject(z));case 4:return qe=A.isAutoReconnect||!1,fr.next=7,re.connect.call(this,{linkUrls:this.options.linkAddresses,isAutoReconnect:qe});case 7:return fr.prev=7,fr.next=10,this.qchatAuth.doLogin(qe);case 10:At=fr.sent,fr.next=21;break;case 13:if(fr.prev=13,fr.t0=fr.catch(7),this.logger.warn("qchat connect:: login failed",fr.t0),this.retryCount!==0){fr.next=19;break}throw this.doDisconnect(di.ACTIVE,"FailedToInitializeLogin"),fr.t0;case 19:return this.doDisconnect(di.OFFLINE,"ReconnectLoginFailed"),fr.abrupt("return");case 21:return this.status="logined",At.loginResult.appkey=this.options.appkey,this.eventBus.emit("logined",At.loginResult),this.emit("logined",At.loginResult),At.multiLoginResults&&At.multiLoginResults.length>0&&this.emit("multiSpotLogin",At.multiLoginResults),this.resetConnectStatus(),this.ping(),fr.prev=28,fr.next=31,this.cloudStorage.init();case 31:fr.next=36;break;case 33:fr.prev=33,fr.t1=fr.catch(28),this.logger.error("NIM:login cloudStorage init failed ",fr.t1);case 36:return fr.next=38,this.qchatAuth.sync();case 38:case"end":return fr.stop()}},xe,this,[[7,13],[28,33]])}))},$.login=function(A){return A===void 0&&(A={}),this.connect(A)},$.setOptions=function(A){Wr({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},linkAddresses:{type:"array",itemType:"string",min:1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:np,required:!1}},A),this.logger.log("QChat::setOptions options is",A),this.account=A.account,this.options=Tn(Tn({},TM),A)},$.setOtherOptions=function(A){var re;!((re=A==null?void 0:A.QChatMedia)===null||re===void 0)&&re.neroom&&this.qchatMedia.setNeroom(A.QChatMedia.neroom)},$.onMessage=function(A){var re,xe,z=S.prototype.onMessage.call(this,A);if(z){var qe=z.raw.ser,At=this.sendingCmdMap.get(qe);if(At&&At.cmd===z.cmd){var lr=At.callback,fr=At.timer,Sr=At.params;if(clearTimeout(fr),z.params=Sr,this.sendingCmdMap.delete(qe),z.cmd==="heartbeat")return void lr[0]();var br=(re=this[z.service])===null||re===void 0?void 0:re.process(z);br&&typeof br.then=="function"?br.then(function(Er){lr[0](Er)}).catch(function(Er){lr[1](Er)}):(this.logger.log("imsocket:: handlerFn without promise",z.service,z.cmd),lr[0]())}else(xe=this[z.service])===null||xe===void 0||xe.process(z)}},$.disconnect=function(){var A=this;switch(this.status){case"logined":return this.sendCmd("qchatExit").then(function(){S.prototype.doDisconnect.call(A,di.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return S.prototype.doDisconnect.call(this,di.ACTIVE,"UserActiveDisconnect"),uo.resolve();case"unconnected":case"destroyed":return uo.resolve()}},$.logout=function(){return this.disconnect()},$.destroy=function(){return x.instance=null,S.prototype.destroy.call(this)},$.kickOtherClients=function(A){return Wr({deviceIds:{type:"array",itemType:"string"}},A),this.qchatAuth.kick(A)},x}(hd);zd.instance=null;var SM=Math.min,$h=[].lastIndexOf,rf=!!$h&&1/[1].lastIndexOf(1,-0)<0,nf=Ui("lastIndexOf"),Ky=rf||!nf?function(x){if(rf)return T($h,this,arguments)||0;var $=ar(this),F=Ia($),A=F-1;for(arguments.length>1&&(A=SM(A,Ls(arguments[1]))),A<0&&(A=F+A);A>=0;A--)if(A in $&&$[A]===x)return A||0;return-1}:$h;Vr({target:"Array",proto:!0,forced:Ky!==[].lastIndexOf},{lastIndexOf:Ky});var MM=Uo("Array").lastIndexOf,Uh=Array.prototype,Wy=function(S){var x=S.lastIndexOf;return S===Uh||er(Uh,S)&&x===Uh.lastIndexOf?MM:x},Nc=o(function(S,x){(function(){var $={function:!0,object:!0}[typeof window]&&window||this,F=x,A=S&&!S.nodeType&&S,re=F&&A&&typeof e=="object"&&e;!re||re.global!==re&&re.window!==re&&re.self!==re||($=re);var xe=Math.pow(2,53)-1,z=/\bOpera/,qe=Object.prototype,At=qe.hasOwnProperty,lr=qe.toString;function fr(wn){return(wn=String(wn)).charAt(0).toUpperCase()+wn.slice(1)}function Sr(wn){return wn=vn(wn),/^(?:webOS|i(?:OS|P))/.test(wn)?wn:fr(wn)}function br(wn,Zr){for(var Qn in wn)At.call(wn,Qn)&&Zr(wn[Qn],Qn,wn)}function Er(wn){return wn==null?fr(wn):lr.call(wn).slice(8,-1)}function $r(wn){return String(wn).replace(/([ -])(?!$)/g,"$1?")}function jr(wn,Zr){var Qn=null;return function(Do,Dn){var wr=-1,xn=Do?Do.length:0;if(typeof xn=="number"&&xn>-1&&xn<=xe)for(;++wr<xn;)Dn(Do[wr],wr,Do);else br(Do,Dn)}(wn,function($n,Do){Qn=Zr(Qn,$n,Do,wn)}),Qn}function vn(wn){return String(wn).replace(/^ +| +$/g,"")}var Yr=function wn(Zr){var Qn=$,$n=Zr&&typeof Zr=="object"&&Er(Zr)!="String";$n&&(Qn=Zr,Zr=null);var Do=Qn.navigator||{},Dn=Do.userAgent||"";Zr||(Zr=Dn);var wr,xn,Rn=$n?!!Do.likeChrome:/\bChrome\b/.test(Zr)&&!/internal|\n/i.test(lr.toString()),Cn="Object",Xr=$n?Cn:"ScriptBridgingProxyObject",On=$n?Cn:"Environment",Un=$n&&Qn.java?"JavaPackage":Er(Qn.java),eo=$n?Cn:"RuntimeObject",ro=/\bJava/.test(Un)&&Qn.java,$o=ro&&Er(Qn.environment)==On,go=ro?"a":"α",Zo=ro?"b":"β",So=Qn.document||{},Io=Qn.operamini||Qn.opera,ea=z.test(ea=$n&&Io?Io["[[Class]]"]:Er(Io))?ea:Io=null,Cs=Zr,Eo=[],ks=null,ja=Zr==Dn,po=ja&&Io&&typeof Io.version=="function"&&Io.version(),Go=function(ka){return jr(ka,function(Qo,ma){return Qo||RegExp("\\b"+(ma.pattern||$r(ma))+"\\b","i").exec(Zr)&&(ma.label||ma)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),zn=function(ka){return jr(ka,function(Qo,ma){return Qo||RegExp("\\b"+(ma.pattern||$r(ma))+"\\b","i").exec(Zr)&&(ma.label||ma)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Bo=Qy([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Qa=function(ka){return jr(ka,function(Qo,ma,Kd){return Qo||(ma[Bo]||ma[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Bo)]||RegExp("\\b"+$r(Kd)+"(?:\\b|\\w*\\d)","i").exec(Zr))&&Kd})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Jn=function(ka){return jr(ka,function(Qo,ma){var Kd=ma.pattern||$r(ma);return!Qo&&(Qo=RegExp("\\b"+Kd+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Zr))&&(Qo=function(Wi,Wd,of){var Vh={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Wd&&of&&/^Win/i.test(Wi)&&!/^Windows Phone /i.test(Wi)&&(Vh=Vh[/[\d.]+$/.exec(Wi)])&&(Wi="Windows "+Vh),Wi=String(Wi),Wd&&of&&(Wi=Wi.replace(RegExp(Wd,"i"),of)),Sr(Wi.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Qo,Kd,ma.label||ma)),Qo})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Qy(Ii){return jr(Ii,function(ka,Qo){var ma=Qo.pattern||$r(Qo);return!ka&&(ka=RegExp("\\b"+ma+" *\\d+[.\\w_]*","i").exec(Zr)||RegExp("\\b"+ma+" *\\w+-[\\w]*","i").exec(Zr)||RegExp("\\b"+ma+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Zr))&&((ka=String(Qo.label&&!RegExp(ma,"i").test(Qo.label)?Qo.label:ka).split("/"))[1]&&!/[\d.]+/.test(ka[0])&&(ka[0]+=" "+ka[1]),Qo=Qo.label||Qo,ka=Sr(ka[0].replace(RegExp(ma,"i"),Qo).replace(RegExp("; *(?:"+Qo+"[_-])?","i")," ").replace(RegExp("("+Qo+")[-_.]?(\\w)","i"),"$1 $2"))),ka})}function qh(Ii){return jr(Ii,function(ka,Qo){return ka||(RegExp(Qo+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Zr)||0)[1]||null})}if(Go&&(Go=[Go]),/\bAndroid\b/.test(Jn)&&!Bo&&(wr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Zr))&&(Bo=vn(wr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Qa&&!Bo?Bo=Qy([Qa]):Qa&&Bo&&(Bo=Bo.replace(RegExp("^("+$r(Qa)+")[-_.\\s]","i"),Qa+" ").replace(RegExp("^("+$r(Qa)+")[-_.]?(\\w)","i"),Qa+" $2")),(wr=/\bGoogle TV\b/.exec(Bo))&&(Bo=wr[0]),/\bSimulator\b/i.test(Zr)&&(Bo=(Bo?Bo+" ":"")+"Simulator"),zn=="Opera Mini"&&/\bOPiOS\b/.test(Zr)&&Eo.push("running in Turbo/Uncompressed mode"),zn=="IE"&&/\blike iPhone OS\b/.test(Zr)?(Qa=(wr=wn(Zr.replace(/like iPhone OS/,""))).manufacturer,Bo=wr.product):/^iP/.test(Bo)?(zn||(zn="Safari"),Jn="iOS"+((wr=/ OS ([\d_]+)/i.exec(Zr))?" "+wr[1].replace(/_/g,"."):"")):zn=="Konqueror"&&/^Linux\b/i.test(Jn)?Jn="Kubuntu":Qa&&Qa!="Google"&&(/Chrome/.test(zn)&&!/\bMobile Safari\b/i.test(Zr)||/\bVita\b/.test(Bo))||/\bAndroid\b/.test(Jn)&&/^Chrome/.test(zn)&&/\bVersion\//i.test(Zr)?(zn="Android Browser",Jn=/\bAndroid\b/.test(Jn)?Jn:"Android"):zn=="Silk"?(/\bMobi/i.test(Zr)||(Jn="Android",Eo.unshift("desktop mode")),/Accelerated *= *true/i.test(Zr)&&Eo.unshift("accelerated")):zn=="UC Browser"&&/\bUCWEB\b/.test(Zr)?Eo.push("speed mode"):zn=="PaleMoon"&&(wr=/\bFirefox\/([\d.]+)\b/.exec(Zr))?Eo.push("identifying as Firefox "+wr[1]):zn=="Firefox"&&(wr=/\b(Mobile|Tablet|TV)\b/i.exec(Zr))?(Jn||(Jn="Firefox OS"),Bo||(Bo=wr[1])):!zn||(wr=!/\bMinefield\b/i.test(Zr)&&/\b(?:Firefox|Safari)\b/.exec(zn))?(zn&&!Bo&&/[\/,]|^[^(]+?\)/.test(Zr.slice(Zr.indexOf(wr+"/")+8))&&(zn=null),(wr=Bo||Qa||Jn)&&(Bo||Qa||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Jn))&&(zn=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Jn)?Jn:wr)+" Browser")):zn=="Electron"&&(wr=(/\bChrome\/([\d.]+)\b/.exec(Zr)||0)[1])&&Eo.push("Chromium "+wr),po||(po=qh(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",$r(zn),"(?:Firefox|Minefield|NetFront)"])),(wr=(Go=="iCab"&&parseFloat(po)>3?"WebKit":/\bOpera\b/.test(zn)&&(/\bOPR\b/.test(Zr)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(Zr)&&!/^(?:Trident|EdgeHTML)$/.test(Go)&&"WebKit"||!Go&&/\bMSIE\b/i.test(Zr)&&(Jn=="Mac OS"?"Tasman":"Trident")||Go=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(zn)&&"NetFront")&&(Go=[wr]),zn=="IE"&&(wr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Zr)||0)[1])?(zn+=" Mobile",Jn="Windows Phone "+(/\+$/.test(wr)?wr:wr+".x"),Eo.unshift("desktop mode")):/\bWPDesktop\b/i.test(Zr)?(zn="IE Mobile",Jn="Windows Phone 8.x",Eo.unshift("desktop mode"),po||(po=(/\brv:([\d.]+)/.exec(Zr)||0)[1])):zn!="IE"&&Go=="Trident"&&(wr=/\brv:([\d.]+)/.exec(Zr))&&(zn&&Eo.push("identifying as "+zn+(po?" "+po:"")),zn="IE",po=wr[1]),ja){if(function(ka,Qo){var ma=ka!=null?typeof ka[Qo]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(ma)||ma=="object"&&!ka[Qo])}(Qn,"global"))if(ro&&(Cs=(wr=ro.lang.System).getProperty("os.arch"),Jn=Jn||wr.getProperty("os.name")+" "+wr.getProperty("os.version")),$o){try{po=Qn.require("ringo/engine").version.join("."),zn="RingoJS"}catch{(wr=Qn.system)&&wr.global.system==Qn.system&&(zn="Narwhal",Jn||(Jn=wr[0].os||null))}zn||(zn="Rhino")}else typeof Qn.process=="object"&&!Qn.process.browser&&(wr=Qn.process)&&(typeof wr.versions=="object"&&(typeof wr.versions.electron=="string"?(Eo.push("Node "+wr.versions.node),zn="Electron",po=wr.versions.electron):typeof wr.versions.nw=="string"&&(Eo.push("Chromium "+po,"Node "+wr.versions.node),zn="NW.js",po=wr.versions.nw)),zn||(zn="Node.js",Cs=wr.arch,Jn=wr.platform,po=(po=/[\d.]+/.exec(wr.version))?po[0]:null));else Er(wr=Qn.runtime)==Xr?(zn="Adobe AIR",Jn=wr.flash.system.Capabilities.os):Er(wr=Qn.phantom)==eo?(zn="PhantomJS",po=(wr=wr.version||null)&&wr.major+"."+wr.minor+"."+wr.patch):typeof So.documentMode=="number"&&(wr=/\bTrident\/(\d+)/i.exec(Zr))?(po=[po,So.documentMode],(wr=+wr[1]+4)!=po[1]&&(Eo.push("IE "+po[1]+" mode"),Go&&(Go[1]=""),po[1]=wr),po=zn=="IE"?String(po[1].toFixed(1)):po[0]):typeof So.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(zn)&&(Eo.push("masking as "+zn+" "+po),zn="IE",po="11.0",Go=["Trident"],Jn="Windows");Jn=Jn&&Sr(Jn)}if(po&&(wr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(po)||/(?:alpha|beta)(?: ?\d)?/i.exec(Zr+";"+(ja&&Do.appMinorVersion))||/\bMinefield\b/i.test(Zr)&&"a")&&(ks=/b/i.test(wr)?"beta":"alpha",po=po.replace(RegExp(wr+"\\+?$"),"")+(ks=="beta"?Zo:go)+(/\d+\+?/.exec(wr)||"")),zn=="Fennec"||zn=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Jn))zn="Firefox Mobile";else if(zn=="Maxthon"&&po)po=po.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Bo))Bo=="Xbox 360"&&(Jn=null),Bo=="Xbox 360"&&/\bIEMobile\b/.test(Zr)&&Eo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(zn)&&(!zn||Bo||/Browser|Mobi/.test(zn))||Jn!="Windows CE"&&!/Mobi/i.test(Zr))if(zn=="IE"&&ja)try{Qn.external===null&&Eo.unshift("platform preview")}catch{Eo.unshift("embedded")}else(/\bBlackBerry\b/.test(Bo)||/\bBB10\b/.test(Zr))&&(wr=(RegExp(Bo.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Zr)||0)[1]||po)?(Jn=((wr=[wr,/BB10/.test(Zr)])[1]?(Bo=null,Qa="BlackBerry"):"Device Software")+" "+wr[0],po=null):this!=br&&Bo!="Wii"&&(ja&&Io||/Opera/.test(zn)&&/\b(?:MSIE|Firefox)\b/i.test(Zr)||zn=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Jn)||zn=="IE"&&(Jn&&!/^Win/.test(Jn)&&po>5.5||/\bWindows XP\b/.test(Jn)&&po>8||po==8&&!/\bTrident\b/.test(Zr)))&&!z.test(wr=wn.call(br,Zr.replace(z,"")+";"))&&wr.name&&(wr="ing as "+wr.name+((wr=wr.version)?" "+wr:""),z.test(zn)?(/\bIE\b/.test(wr)&&Jn=="Mac OS"&&(Jn=null),wr="identify"+wr):(wr="mask"+wr,zn=ea?Sr(ea.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(wr)&&(Jn=null),ja||(po=null)),Go=["Presto"],Eo.push(wr));else zn+=" Mobile";(wr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Zr)||0)[1])&&(wr=[parseFloat(wr.replace(/\.(\d)$/,".0$1")),wr],zn=="Safari"&&wr[1].slice(-1)=="+"?(zn="WebKit Nightly",ks="alpha",po=wr[1].slice(0,-1)):po!=wr[1]&&po!=(wr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Zr)||0)[1])||(po=null),wr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Zr)||0)[1],wr[0]==537.36&&wr[2]==537.36&&parseFloat(wr[1])>=28&&Go=="WebKit"&&(Go=["Blink"]),ja&&(Rn||wr[1])?(Go&&(Go[1]="like Chrome"),wr=wr[1]||((wr=wr[0])<530?1:wr<532?2:wr<532.05?3:wr<533?4:wr<534.03?5:wr<534.07?6:wr<534.1?7:wr<534.13?8:wr<534.16?9:wr<534.24?10:wr<534.3?11:wr<535.01?12:wr<535.02?"13+":wr<535.07?15:wr<535.11?16:wr<535.19?17:wr<536.05?18:wr<536.1?19:wr<537.01?20:wr<537.11?"21+":wr<537.13?23:wr<537.18?24:wr<537.24?25:wr<537.36?26:Go!="Blink"?"27":"28")):(Go&&(Go[1]="like Safari"),wr=(wr=wr[0])<400?1:wr<500?2:wr<526?3:wr<533?4:wr<534?"4+":wr<535?5:wr<537?6:wr<538?7:wr<601?8:wr<602?9:wr<604?10:wr<606?11:wr<608?12:"12"),Go&&(Go[1]+=" "+(wr+=typeof wr=="number"?".x":/[.+]/.test(wr)?"":"+")),zn=="Safari"&&(!po||parseInt(po)>45)?po=wr:zn=="Chrome"&&/\bHeadlessChrome/i.test(Zr)&&Eo.unshift("headless")),zn=="Opera"&&(wr=/\bzbov|zvav$/.exec(Jn))?(zn+=" ",Eo.unshift("desktop mode"),wr=="zvav"?(zn+="Mini",po=null):zn+="Mobile",Jn=Jn.replace(RegExp(" *"+wr+"$"),"")):zn=="Safari"&&/\bChrome\b/.exec(Go&&Go[1])?(Eo.unshift("desktop mode"),zn="Chrome Mobile",po=null,/\bOS X\b/.test(Jn)?(Qa="Apple",Jn="iOS 4.3+"):Jn=null):/\bSRWare Iron\b/.test(zn)&&!po&&(po=qh("Chrome")),po&&po.indexOf(wr=/[\d.]+$/.exec(Jn))==0&&Zr.indexOf("/"+wr+"-")>-1&&(Jn=vn(Jn.replace(wr,""))),Jn&&Jn.indexOf(zn)!=-1&&!RegExp(zn+" OS").test(Jn)&&(Jn=Jn.replace(RegExp(" *"+$r(zn)+" *"),"")),Go&&!/\b(?:Avant|Nook)\b/.test(zn)&&(/Browser|Lunascape|Maxthon/.test(zn)||zn!="Safari"&&/^iOS/.test(Jn)&&/\bSafari\b/.test(Go[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(zn)&&Go[1])&&(wr=Go[Go.length-1])&&Eo.push(wr),Eo.length&&(Eo=["("+Eo.join("; ")+")"]),Qa&&Bo&&Bo.indexOf(Qa)<0&&Eo.push("on "+Qa),Bo&&Eo.push((/^on /.test(Eo[Eo.length-1])?"":"on ")+Bo),Jn&&(wr=/ ([\d.+]+)$/.exec(Jn),xn=wr&&Jn.charAt(Jn.length-wr[0].length-1)=="/",Jn={architecture:32,family:wr&&!xn?Jn.replace(wr[0],""):Jn,version:wr?wr[1]:null,toString:function(){var Ii=this.version;return this.family+(Ii&&!xn?" "+Ii:"")+(this.architecture==64?" 64-bit":"")}}),(wr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Cs))&&!/\bi686\b/i.test(Cs)?(Jn&&(Jn.architecture=64,Jn.family=Jn.family.replace(RegExp(" *"+wr),"")),zn&&(/\bWOW64\b/i.test(Zr)||ja&&/\w(?:86|32)$/.test(Do.cpuClass||Do.platform)&&!/\bWin64; x64\b/i.test(Zr))&&Eo.unshift("32-bit")):Jn&&/^OS X/.test(Jn.family)&&zn=="Chrome"&&parseFloat(po)>=39&&(Jn.architecture=64),Zr||(Zr=null);var xi={};return xi.description=Zr,xi.layout=Go&&Go[0],xi.manufacturer=Qa,xi.name=zn,xi.prerelease=ks,xi.product=Bo,xi.ua=Zr,xi.version=zn&&po,xi.os=Jn||{architecture:null,family:null,version:null,toString:function(){return"null"}},xi.parse=wn,xi.toString=function(){return this.description||""},xi.version&&Eo.unshift(po),xi.name&&Eo.unshift(zn),Jn&&zn&&(Jn!=String(Jn).split(" ")[0]||Jn!=zn.split(" ")[0]&&!Bo)&&Eo.push(Bo?"("+Jn+")":"on "+Jn),Eo.length&&(xi.description=Eo.join(" ")),xi}();F&&A?br(Yr,function(wn,Zr){F[Zr]=wn}):$.platform=Yr}).call(e)}),Gy=o(function(S,x){S.exports=function(){var $={d:function(wr,xn){for(var Rn in xn)$.o(xn,Rn)&&!$.o(wr,Rn)&&Ks(wr,Rn,{enumerable:!0,get:xn[Rn]})},o:function(wr,xn){return Object.prototype.hasOwnProperty.call(wr,xn)}},F={};$.d(F,{default:function(){return Do}});var A=function Dn(wr){for(var xn in function(Rn,Cn){if(!(Rn instanceof Cn))throw new TypeError("Cannot call a class as a function")}(this,Dn),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(Rn){},this.onProgress=function(Rn){},this.onUploadProgress=function(Rn){},this.onComplete=function(Rn){},wr)this[xn]=wr[xn]};function re(Dn,wr){var xn=ga!==void 0&&Va(Dn)||Dn["@@iterator"];if(!xn){if(ni(Dn)||(xn=function(eo,ro){if(eo){var $o;if(typeof eo=="string")return xe(eo,ro);var go=Mo($o=Object.prototype.toString.call(eo)).call($o,8,-1);return go==="Object"&&eo.constructor&&(go=eo.constructor.name),go==="Map"||go==="Set"?_c(eo):go==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(go)?xe(eo,ro):void 0}}(Dn))||wr&&Dn&&typeof Dn.length=="number"){xn&&(Dn=xn);var Rn=0,Cn=function(){};return{s:Cn,n:function(){return Rn>=Dn.length?{done:!0}:{done:!1,value:Dn[Rn++]}},e:function(ro){throw ro},f:Cn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xr,On=!0,Un=!1;return{s:function(){xn=xn.call(Dn)},n:function(){var ro=xn.next();return On=ro.done,ro},e:function(ro){Un=!0,Xr=ro},f:function(){try{On||xn.return==null||xn.return()}finally{if(Un)throw Xr}}}}function xe(Dn,wr){(wr==null||wr>Dn.length)&&(wr=Dn.length);for(var xn=0,Rn=new Array(wr);xn<wr;xn++)Rn[xn]=Dn[xn];return Rn}var z=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(z={privateObj:{},setItem:function(wr,xn){z.privateObj[wr]=xn},getItem:function(wr){return z.privateObj[wr]},removeItem:function(wr){delete z.privateObj[wr]},getKeys:function(){return na(z.privateObj)}});var qe={getFileKey:function(wr){var xn=wr.size.toString(),Rn=wr.lastModified.toString();return"_NosUploader_"+wr.name+Mo(xn).call(xn,xn.length-5)+Mo(Rn).call(Rn,Rn.length-5)},getFileInfo:function(wr){var xn=z.getItem(wr);if(!xn)return null;try{return JSON.parse(xn)}catch{return null}},initFile:function(wr,xn,Rn){qe.clearExpiredInfo();var Cn=this.getFileKey(xn),Xr={ctx:wr.ctx!==void 0?wr.ctx:"",bucket:wr.bucketName,obj:wr.objectName,token:wr.token,modifyAt:ti(),end:!1};return wr.payload&&(Xr.payload=wr.payload),Rn&&z.setItem(Cn,mo(Xr)),Cn},setUploadContext:function(wr,xn,Rn){var Cn=this.getFileInfo(wr);Cn&&(Cn.ctx=xn,Rn&&z.setItem(wr,mo(Cn)))},setComplete:function(wr,xn){var Rn=this.getFileInfo(wr);Rn&&(Rn.modifyAt=ti(),Rn.end=!0,xn&&z.setItem(wr,mo(Rn)))},getUploadContext:function(wr){var xn=this.getFileInfo(wr);return xn?xn.ctx:""},removeFileInfo:function(wr){pa(wr).call(wr,"_NosUploader_")===0&&z.removeItem(wr)},clearExpiredInfo:function(){var wr,xn=typeof z.getKeys=="function"?z.getKeys():na(z),Rn=ti(),Cn=[],Xr=re(xn);try{for(Xr.s();!(wr=Xr.n()).done;){var On=wr.value;if(pa(On).call(On,"_NosUploader_")===0){var Un=qe.getFileInfo(On);Un===null||Rn-Un.modifyAt>Do.expireTime?z.removeItem(On):Cn.push({fileInfo:Un,key:On})}}}catch(So){Xr.e(So)}finally{Xr.f()}if(Cn.length>Do.maxFileCache){var eo,ro,$o=re(Mo(eo=Wl(Cn).call(Cn,function(So,Io){return Io.fileInfo.modifyAt-So.fileInfo.modifyAt})).call(eo,Do.maxFileCache));try{for($o.s();!(ro=$o.n()).done;){var go,Zo=ro.value;pa(go=Zo.key).call(go,"_NosUploader_")===0&&z.removeItem(Zo.key)}}catch(So){$o.e(So)}finally{$o.f()}}}},At=qe;function lr(Dn){return(lr=typeof ga=="function"&&typeof cm=="symbol"?function(wr){return typeof wr}:function(wr){return wr&&typeof ga=="function"&&wr.constructor===ga&&wr!==ga.prototype?"symbol":typeof wr})(Dn)}function fr(Dn,wr){return!wr||lr(wr)!=="object"&&typeof wr!="function"?function(xn){if(xn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xn}(Dn):wr}function Sr(Dn){var wr=typeof nl=="function"?new nl:void 0;return(Sr=function(Rn){var Cn,Xr;if(Rn===null||(Xr=Rn,pa(Cn=Function.toString.call(Xr)).call(Cn,"[native code]")===-1))return Rn;if(typeof Rn!="function")throw new TypeError("Super expression must either be null or a function");if(wr!==void 0){if(wr.has(Rn))return wr.get(Rn);wr.set(Rn,On)}function On(){return br(Rn,arguments,jr(this).constructor)}return On.prototype=Ja(Rn.prototype,{constructor:{value:On,enumerable:!1,writable:!0,configurable:!0}}),$r(On,Rn)})(Dn)}function br(Dn,wr,xn){return(br=Er()?tc:function(Rn,Cn,Xr){var On=[null];On.push.apply(On,Cn);var Un=new(Oo(Function).apply(Rn,On));return Xr&&$r(Un,Xr.prototype),Un}).apply(null,arguments)}function Er(){if(typeof Reflect>"u"||!tc||tc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(tc(Boolean,[],function(){})),!0}catch{return!1}}function $r(Dn,wr){return($r=Ni||function(xn,Rn){return xn.__proto__=Rn,xn})(Dn,wr)}function jr(Dn){return(jr=Ni?$i:function(wr){return wr.__proto__||$i(wr)})(Dn)}var vn=function(Dn){(function(Xr,On){if(typeof On!="function"&&On!==null)throw new TypeError("Super expression must either be null or a function");Xr.prototype=Ja(On&&On.prototype,{constructor:{value:Xr,writable:!0,configurable:!0}}),On&&$r(Xr,On)})(Cn,Dn);var wr,xn,Rn=(wr=Cn,xn=Er(),function(){var Xr,On=jr(wr);if(xn){var Un=jr(this).constructor;Xr=tc(On,arguments,Un)}else Xr=On.apply(this,arguments);return fr(this,Xr)});function Cn(Xr,On){var Un;return function(eo,ro){if(!(eo instanceof ro))throw new TypeError("Cannot call a class as a function")}(this,Cn),(Un=Rn.call(this,"NosUploadError:"+Xr)).errCode=On,Un.errMsg=Xr,Un}return Cn}(Sr(Error)),Yr=function Dn(wr,xn,Rn){if(wr.uploadState==="uploading"){var Cn=wr.config,Xr=wr.param,On=At.getUploadContext(wr.fileKey);if(!On)return Rn(0);var Un=new XMLHttpRequest,eo=Cn.directUploadAddr+"/".concat(Xr.bucketName)+"/".concat(encodeURIComponent(Xr.objectName))+"?uploadContext"+"&context=".concat(On)+"&version=".concat(Cn.version);Un.onreadystatechange=function(){var ro;if(wr.uploadState!=="abort"&&Un.readyState===4){var $o,go,Zo,So;try{So=JSON.parse(Un.responseText)}catch{So={errMsg:"JsonParseError in getOffset",errCode:500}}Un.status===200?So.errCode?wr.config.onError(new vn(So.errMsg,So.errCode)):Rn(So.offset):Un.status.toString().match(/^5/)?Dn(wr,xn-1,Rn):xn>0?(typeof((ro=Cn.logger)===null||ro===void 0?void 0:ro.error)=="function"&&Cn.logger.error(Vi($o="getOffset(".concat(eo,") error. retry after 3 seconds. ")).call($o,new Date().toTimeString())),ia(function(){Dn(wr,xn-1,Rn)},3500)):(At.removeFileInfo(wr.fileKey),Un.status?Cn.onError(new vn(Vi(go=Vi(Zo="getOffset(".concat(eo,") error: ")).call(Zo,Un.status," ")).call(go,Un.statusText))):Cn.onError(new vn("getOffset(".concat(eo,") error. no Error Code"))))}},Un.open("get",eo),Un.setRequestHeader("x-nos-token",Xr.token),Un.timeout=Cn.getOffsetTimeout,Un.send()}},wn=function Dn(wr,xn,Rn,Cn){if(wr.uploadState==="uploading"){var Xr=wr.param,On=wr.config,Un=Mo(File.prototype),eo=Xr.ctx!==void 0?Xr.ctx:"",ro=xn+On.trunkSize>wr.file.size,$o=ro?wr.file.size:xn+On.trunkSize,go=new XMLHttpRequest,Zo=On.directUploadAddr+"/".concat(Xr.bucketName)+"/".concat(encodeURIComponent(Xr.objectName));if(go.upload.onprogress=function(Io){if(wr.uploadState!=="abort"){var ea=0;Io.lengthComputable?(ea=(xn+Io.loaded)/wr.file.size,On.onProgress(ea),On.onUploadProgress({loaded:Io.loaded,total:wr.file.size,percentage:ea,percentageText:(100*ea).toFixed(2)+"%"})):On.onError(new vn("browser does not support query upload progress"))}},go.onreadystatechange=function(){var Io,ea;if(wr.uploadState!=="abort"&&go.readyState===4){var Cs,Eo,ks,ja;try{ja=JSON.parse(go.responseText)}catch(po){typeof((Io=On.logger)===null||Io===void 0?void 0:Io.error)=="function"&&On.logger.error("JsonParseError in uploadTrunk",po),ja={errMsg:"JsonParseError in uploadTrunk"}}go.status===200?(wr.setContext(ja.context),ro?(Cn(),wr.setComplete()):Dn(wr,ja.offset,On.retryCount,Cn)):go.status.toString().match(/^5/)?Rn>0?Dn(wr,xn,Rn-1,Cn):(At.removeFileInfo(wr.fileKey),On.onError(new vn(ja.errMsg,ja.errCode))):Rn>0?(typeof((ea=On.logger)===null||ea===void 0?void 0:ea.error)=="function"&&On.logger.error(Vi(Cs="uploadTrunk(".concat(Zo,") error. retry after 3 seconds. ")).call(Cs,new Date().toTimeString())),ia(function(){Dn(wr,xn,Rn-1,Cn)},3500)):(At.removeFileInfo(wr.fileKey),go.status?On.onError(new vn(Vi(Eo=Vi(ks="uploadTrunk(".concat(Zo,") error: ")).call(ks,go.status," ")).call(Eo,go.statusText))):On.onError(new vn("uploadTrunk(".concat(Zo,") error. no Error Code. Please check your network"))))}},go.open("post",Zo+"?offset=".concat(xn)+"&complete=".concat(ro)+"&context=".concat(eo)+"&version=".concat(On.version)),go.setRequestHeader("x-nos-token",Xr.token),wr.file.type&&go.setRequestHeader("content-type",wr.file.type),go.timeout=On.trunkUploadTimeout,typeof FileReader<"u"){var So=new FileReader;So.addEventListener("load",function(Io){var ea;!((ea=Io==null?void 0:Io.target)===null||ea===void 0)&&ea.result?go.send(Io.target.result):On.onError(new vn("Read ArrayBuffer failed"))}),So.addEventListener("error",function(Io){var ea=Io.target.error;On.onError(new vn("Read ArrayBuffer error. ".concat(ea.toString()),ea.code))}),So.readAsArrayBuffer(Un.call(wr.file,xn,$o))}else go.send(Un.call(wr.file,xn,$o))}};function Zr(Dn,wr){for(var xn=0;xn<wr.length;xn++){var Rn=wr[xn];Rn.enumerable=Rn.enumerable||!1,Rn.configurable=!0,"value"in Rn&&(Rn.writable=!0),Ks(Dn,Rn.key,Rn)}}var Qn=function(){function Dn(xn,Rn,Cn){(function(Xr,On){if(!(Xr instanceof On))throw new TypeError("Cannot call a class as a function")})(this,Dn),this.uploadState="paused",this.config=Cn,this.file=xn,this.param=Rn,this.fileKey=At.initFile(Rn,xn,this.config.enableCache),this.resume()}var wr;return(wr=[{key:"resume",value:function(){var Rn=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Cn=this.config;Yr(this,Cn.retryCount,function(Xr){wn(Rn,Xr,Cn.retryCount,function(){Rn.setUploadState("ended"),typeof Cn.onComplete=="function"&&Cn.onComplete(Rn.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),At.removeFileInfo(this.fileKey),this.config.onError(new vn("Upload Aborted",10499))}},{key:"setUploadState",value:function(Rn){Rn!==this.uploadState&&(this.uploadState=Rn)}},{key:"setContext",value:function(Rn){At.setUploadContext(this.fileKey,Rn,this.config.enableCache),this.param.ctx=Rn}},{key:"setComplete",value:function(){At.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&Zr(Dn.prototype,wr),Dn}(),$n={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(wr){var xn=At.getFileKey(wr),Rn=At.getFileInfo(xn);return Rn===null?null:ti()-Rn.modifyAt>$n.expireTime?(At.removeFileInfo(xn),null):{uploadInfo:Tn({bucketName:Rn.bucket,objectName:Rn.obj,token:Rn.token,ctx:Rn.ctx},Rn.payload?{payload:Rn.payload}:{}),complete:Rn.end}},setMaxFileCache:function(wr){$n.maxFileCache=wr},setExpireTime:function(wr){$n.expireTime=wr},printCaches:function(){for(var wr=0,xn=na(localStorage);wr<xn.length;wr++){var Rn=xn[wr],Cn=At.getFileInfo(Rn);Cn&&console.log(Cn,"modifiedAt",new Date(Cn.modifyAt).toTimeString())}},createConfig:function(wr){return new A(wr)},createTask:function(wr,xn,Rn){return new Qn(wr,xn,Rn)}},Do=$n;return F.default}()}),Ml=o(function(S,x){S.exports=function(){function $(xe){if(xe){var z,qe="";return In(z=na(xe)).call(z,function(At,lr){qe+=lr===0?"?":"&",qe+=At+"="+xe[At]}),qe}return""}function F(xe,z,qe,At){return Error.call(this,qe),this.source=xe,this.code=z,this.desc=qe,this.detail=At||{},this}function A(xe,z){var qe=Ja(z.prototype);qe.constructor=xe,xe.prototype=qe}function re(xe,z){z===void 0&&(z={dataType:"json",method:"GET",timeout:5e3});var qe=z.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",At=z.method==="GET"?$(z.params):"";return new uo(function(lr,fr){if(window.XMLHttpRequest){var Sr,br=new XMLHttpRequest;if(br.onreadystatechange=function(){if(br.readyState===4)if(br.status===200){try{Sr=JSON.parse(br.response||"{}")}catch{Sr=br.response}lr({status:br.status,data:Sr})}else fr(new F(1,br.status,br.statusText))},br.open(z.method,""+xe+At),br.timeout=z.timeout||5e3,br.setRequestHeader("Content-Type",qe),z.headers)for(var Er in z.headers)br.setRequestHeader(Er,z.headers[Er]);br.ontimeout=function($r){fr(new F(1,408,$r&&$r.message?$r.message:"request timeout"))},br.send(mo(z.data))}else fr(new F(2,10400,"request no suppout"))})}return A(F,Error),re}()}),tu=console,CM={setLogger:function(x){tu=x},platform:"BROWSER",localStorage:window.localStorage,request:Ml,WebSocket:window.WebSocket,uploadFile:function(x){return Cr(this,void 0,void 0,ir.mark(function $(){var F,A,re,xe,z,qe;return ir.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(x.fileInput||x.file){lr.next=2;break}throw new Error("File not exist");case 2:if(!x.file){lr.next=6;break}xe=x.file,lr.next=20;break;case 6:if(typeof x.fileInput!="string"){lr.next=15;break}if(!((z=document.getElementById(x.fileInput))&&z.files&&z.files[0])){lr.next=12;break}xe=z.files[0],lr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:lr.next=20;break;case 15:if(!(x.fileInput&&x.fileInput.files&&x.fileInput.files[0])){lr.next=19;break}xe=x.fileInput.files[0],lr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+x.fileInput);case 20:if(!(x.maxSize&&xe.size>x.maxSize)){lr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+x.maxSize+", get "+xe.size);case 22:return lr.next=24,new uo(function(fr,Sr){var br=Gy.createConfig({enableCache:!1,directUploadAddr:x.chunkUploadHost,onError:function(jr){Sr(jr)},onProgress:x.onUploadProgress||function(){},onComplete:function(jr){fr(jr)}}),Er=Gy.createTask(xe,{bucketName:x.nosToken.bucket,objectName:decodeURIComponent(x.nosToken.objectName),token:x.nosToken.token},br);try{x.onUploadStart&&x.onUploadStart(Er)}catch($r){tu.error("Adapter uploadFile: options.onUploadStart error",$r&&$r.message),Er.abort(),Sr($r)}});case 24:return(qe=lr.sent).name=xe.name,qe.size=xe.size,qe.type=xe.type,qe.ext=Wy(F=qe.name).call(F,".")>-1?Mo(A=qe.name).call(A,Wy(re=qe.name).call(re,".")+1).toLowerCase():"",lr.abrupt("return",qe);case 30:case"end":return lr.stop()}},$)}))},getSystemInfo:function(){var x,$;return{os:((x=Nc.os)===null||x===void 0?void 0:x.family)||"",osVer:(($=Nc.os)===null||$===void 0?void 0:$.version)||"",browser:Nc.name||"",browserVer:Nc.version||"",hostEnv:"BROWSER",hostEnvVer:Nc.version||"",hostInfo:Nc.ua||""}}};return zd.setAdapters(CM),zd})})(QCHAT_BROWSER_SDK);var QCHAT_BROWSER_SDKExports=QCHAT_BROWSER_SDK.exports;const QChatSDK=getDefaultExportFromCjs(QCHAT_BROWSER_SDKExports);var NIM_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function o(w){var M={exports:{}};return w(M,M.exports),M.exports}var i,a,s=n(o(function(w){w.exports=function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L},w.exports.__esModule=!0,w.exports.default=w.exports})),u=function(w){return w&&w.Math==Math&&w},c=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),d=function(w){try{return!!w()}catch{return!0}},m=!d(function(){var w=(function(){}).bind();return typeof w!="function"||w.hasOwnProperty("prototype")}),v=Function.prototype,g=v.apply,b=v.call,T=typeof Reflect=="object"&&Reflect.apply||(m?b.bind(g):function(){return b.apply(g,arguments)}),_=Function.prototype,y=_.bind,O=_.call,V=m&&y.bind(O,O),Ce=m?function(w){return w&&V(w)}:function(w){return w&&function(){return O.apply(w,arguments)}},ae=function(w){return typeof w=="function"},Fe=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),_e=Function.prototype.call,de=m?_e.bind(_e):function(){return _e.apply(_e,arguments)},oe={}.propertyIsEnumerable,he=Object.getOwnPropertyDescriptor,Ve={f:he&&!oe.call({1:2},1)?function(M){var L=he(this,M);return!!L&&L.enumerable}:oe},le=function(w,M){return{enumerable:!(1&w),configurable:!(2&w),writable:!(4&w),value:M}},ie=Ce({}.toString),Ie=Ce("".slice),pe=function(w){return Ie(ie(w),8,-1)},kt=Object,Ue=Ce("".split),Dt=d(function(){return!kt("z").propertyIsEnumerable(0)})?function(w){return pe(w)=="String"?Ue(w,""):kt(w)}:kt,tr=function(w){return w==null},dr=TypeError,pr=function(w){if(tr(w))throw dr("Can't call method on "+w);return w},ar=function(w){return Dt(pr(w))},hr=typeof document=="object"&&document.all,Ne=hr===void 0&&hr!==void 0?function(w){return typeof w=="object"?w!==null:ae(w)||w===hr}:function(w){return typeof w=="object"?w!==null:ae(w)},nr={},sr=function(w){return ae(w)?w:void 0},$e=function(w,M){return arguments.length<2?sr(nr[w])||sr(c[w]):nr[w]&&nr[w][M]||c[w]&&c[w][M]},er=Ce({}.isPrototypeOf),or=$e("navigator","userAgent")||"",ze=c.process,rr=c.Deno,Et=ze&&ze.versions||rr&&rr.version,Lt=Et&&Et.v8;Lt&&(a=(i=Lt.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!a&&or&&(!(i=or.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=or.match(/Chrome\/(\d+)/))&&(a=+i[1]);var cr,mr=a,vr=!!Object.getOwnPropertySymbols&&!d(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&mr&&mr<41}),Tr=vr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ir=Object,kr=Tr?function(w){return typeof w=="symbol"}:function(w){var M=$e("Symbol");return ae(M)&&er(M.prototype,Ir(w))},Ar=String,Nr=function(w){try{return Ar(w)}catch{return"Object"}},Mn=TypeError,Or=function(w){if(ae(w))return w;throw Mn(Nr(w)+" is not a function")},Pr=function(w,M){var L=w[M];return tr(L)?void 0:Or(L)},Rr=TypeError,Qr=Object.defineProperty,hn="__core-js_shared__",Ur=c[hn]||function(w,M){try{Qr(c,w,{value:M,configurable:!0,writable:!0})}catch{c[w]=M}return M}(hn,{}),qr=o(function(w){(w.exports=function(M,L){return Ur[M]||(Ur[M]=L!==void 0?L:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),Gn=Object,jn=function(w){return Gn(pr(w))},Jr=Ce({}.hasOwnProperty),Lr=Object.hasOwn||function(M,L){return Jr(jn(M),L)},Kn=0,vo=Math.random(),bo=Ce(1 .toString),so=function(w){return"Symbol("+(w===void 0?"":w)+")_"+bo(++Kn+vo,36)},co=qr("wks"),Ro=c.Symbol,An=Ro&&Ro.for,Aa=Tr?Ro:Ro&&Ro.withoutSetter||so,to=function(w){if(!Lr(co,w)||!vr&&typeof co[w]!="string"){var M="Symbol."+w;vr&&Lr(Ro,w)?co[w]=Ro[w]:co[w]=Tr&&An?An(M):Aa(M)}return co[w]},Br=TypeError,Gr=to("toPrimitive"),Bn=function(w,M){if(!Ne(w)||kr(w))return w;var L,D=Pr(w,Gr);if(D){if(M===void 0&&(M="default"),L=de(D,w,M),!Ne(L)||kr(L))return L;throw Br("Can't convert object to primitive value")}return M===void 0&&(M="number"),function(k,Y){var Oe,ue;if(Y==="string"&&ae(Oe=k.toString)&&!Ne(ue=de(Oe,k))||ae(Oe=k.valueOf)&&!Ne(ue=de(Oe,k))||Y!=="string"&&ae(Oe=k.toString)&&!Ne(ue=de(Oe,k)))return ue;throw Rr("Can't convert object to primitive value")}(w,M)},Xn=function(w){var M=Bn(w,"string");return kr(M)?M:M+""},_o=c.document,oo=Ne(_o)&&Ne(_o.createElement),Ma=function(w){return oo?_o.createElement(w):{}},si=!Fe&&!d(function(){return Object.defineProperty(Ma("div"),"a",{get:function(){return 7}}).a!=7}),ci=Object.getOwnPropertyDescriptor,Ei={f:Fe?ci:function(M,L){if(M=ar(M),L=Xn(L),si)try{return ci(M,L)}catch{}if(Lr(M,L))return le(!de(Ve.f,M,L),M[L])}},Wh=/#|\.prototype\./,xa=function(w,M){var L=Zy[Fs(w)];return L==tb||L!=eb&&(ae(M)?d(M):!!M)},Fs=xa.normalize=function(w){return String(w).replace(Wh,".").toLowerCase()},Zy=xa.data={},eb=xa.NATIVE="N",tb=xa.POLYFILL="P",af=xa,rb=Ce(Ce.bind),jo=function(w,M){return Or(w),M===void 0?w:m?rb(w,M):function(){return w.apply(M,arguments)}},sf=Fe&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nb=String,ob=TypeError,Vn=function(w){if(Ne(w))return w;throw ob(nb(w)+" is not an object")},ab=TypeError,ru=Object.defineProperty,ib=Object.getOwnPropertyDescriptor,sb="enumerable",cb="configurable",lb="writable",ua={f:Fe?sf?function(M,L,D){if(Vn(M),L=Xn(L),Vn(D),typeof M=="function"&&L==="prototype"&&"value"in D&&lb in D&&!D.writable){var k=ib(M,L);k&&k.writable&&(M[L]=D.value,D={configurable:cb in D?D.configurable:k.configurable,enumerable:sb in D?D.enumerable:k.enumerable,writable:!1})}return ru(M,L,D)}:ru:function(M,L,D){if(Vn(M),L=Xn(L),Vn(D),si)try{return ru(M,L,D)}catch{}if("get"in D||"set"in D)throw ab("Accessors not supported");return"value"in D&&(M[L]=D.value),M}},Jo=Fe?function(w,M,L){return ua.f(w,M,le(1,L))}:function(w,M,L){return w[M]=L,w},ub=Ei.f,db=function(w){var M=function(L,D,k){if(this instanceof M){switch(arguments.length){case 0:return new w;case 1:return new w(L);case 2:return new w(L,D)}return new w(L,D,k)}return T(w,this,arguments)};return M.prototype=w.prototype,M},Vr=function(w,M){var L,D,k,Y,Oe,ue,Pt,jt,ur=w.target,gr=w.global,yr=w.stat,Mr=w.proto,xr=gr?c:yr?c[ur]:(c[ur]||{}).prototype,Fr=gr?nr:nr[ur]||Jo(nr,ur,{})[ur],Dr=Fr.prototype;for(k in M)L=!af(gr?k:ur+(yr?".":"#")+k,w.forced)&&xr&&Lr(xr,k),Oe=Fr[k],L&&(ue=w.dontCallGetSet?(jt=ub(xr,k))&&jt.value:xr[k]),Y=L&&ue?ue:M[k],L&&typeof Oe==typeof Y||(Pt=w.bind&&L?jo(Y,c):w.wrap&&L?db(Y):Mr&&ae(Y)?Ce(Y):Y,(w.sham||Y&&Y.sham||Oe&&Oe.sham)&&Jo(Pt,"sham",!0),Jo(Fr,k,Pt),Mr&&(Lr(nr,D=ur+"Prototype")||Jo(nr,D,{}),Jo(nr[D],k,Y),w.real&&Dr&&!Dr[k]&&Jo(Dr,k,Y)))},pb=Math.ceil,fb=Math.floor,mb=Math.trunc||function(M){var L=+M;return(L>0?fb:pb)(L)},Ls=function(w){var M=+w;return M!=M||M===0?0:mb(M)},gb=Math.max,hb=Math.min,ns=function(w,M){var L=Ls(w);return L<0?gb(L+M,0):hb(L,M)},vb=Math.min,Ia=function(w){return(M=w.length)>0?vb(Ls(M),9007199254740991):0;var M},cf=function(w){return function(M,L,D){var k,Y=ar(M),Oe=Ia(Y),ue=ns(D,Oe);if(w&&L!=L){for(;Oe>ue;)if((k=Y[ue++])!=k)return!0}else for(;Oe>ue;ue++)if((w||ue in Y)&&Y[ue]===L)return w||ue||0;return!w&&-1}},nu={includes:cf(!0),indexOf:cf(!1)},os={},yb=nu.indexOf,lf=Ce([].push),uf=function(w,M){var L,D=ar(w),k=0,Y=[];for(L in D)!Lr(os,L)&&Lr(D,L)&&lf(Y,L);for(;M.length>k;)Lr(D,L=M[k++])&&(~yb(Y,L)||lf(Y,L));return Y},jc=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gi=Object.keys||function(M){return uf(M,jc)},bb=Fe&&!sf?Object.defineProperties:function(M,L){Vn(M);for(var D,k=ar(L),Y=gi(L),Oe=Y.length,ue=0;Oe>ue;)ua.f(M,D=Y[ue++],k[D]);return M},df={f:bb},ou=$e("document","documentElement"),pf=qr("keys"),Dc=function(w){return pf[w]||(pf[w]=so(w))},ff=Dc("IE_PROTO"),au=function(){},mf=function(w){return"<script>"+w+"<\/script>"},gf=function(w){w.write(mf("")),w.close();var M=w.parentWindow.Object;return w=null,M},$c=function(){try{cr=new ActiveXObject("htmlfile")}catch{}var w,M;$c=typeof document<"u"?document.domain&&cr?gf(cr):((M=Ma("iframe")).style.display="none",ou.appendChild(M),M.src="javascript:",(w=M.contentWindow.document).open(),w.write(mf("document.F=Object")),w.close(),w.F):gf(cr);for(var L=jc.length;L--;)delete $c.prototype[jc[L]];return $c()};os[ff]=!0;var Ea=Object.create||function(M,L){var D;return M!==null?(au.prototype=Vn(M),D=new au,au.prototype=null,D[ff]=M):D=$c(),L===void 0?D:df.f(D,L)};Vr({target:"Object",stat:!0,sham:!Fe},{create:Ea});var Tb=nr.Object,Ja=function(M,L){return Tb.create(M,L)},Sb=String,Mb=TypeError,js=Object.setPrototypeOf||("__proto__"in{}?function(){var w,M=!1,L={};try{(w=Ce(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(L,[]),M=L instanceof Array}catch{}return function(k,Y){return Vn(k),function(Oe){if(typeof Oe=="object"||ae(Oe))return Oe;throw Mb("Can't set "+Sb(Oe)+" as a prototype")}(Y),M?w(k,Y):k.__proto__=Y,k}}():void 0);Vr({target:"Object",stat:!0},{setPrototypeOf:js});var Ni=nr.Object.setPrototypeOf,hi=Ce([].slice),hf=Function,Cb=Ce([].concat),kb=Ce([].join),iu={},_b=function(w,M,L){if(!Lr(iu,M)){for(var D=[],k=0;k<M;k++)D[k]="a["+k+"]";iu[M]=hf("C,a","return new C("+kb(D,",")+")")}return iu[M](w,L)},su=m?hf.bind:function(M){var L=Or(this),D=L.prototype,k=hi(arguments,1),Y=function(){var ue=Cb(k,hi(arguments));return this instanceof Y?_b(L,ue.length,ue):L.apply(M,ue)};return Ne(D)&&(Y.prototype=D),Y};Vr({target:"Function",proto:!0,forced:Function.bind!==su},{bind:su});var Uo=function(w){return nr[w+"Prototype"]},wb=Uo("Function").bind,cu=Function.prototype,Oo=function(w){var M=w.bind;return w===cu||er(cu,w)&&M===cu.bind?wb:M},lu=o(function(w){function M(L,D){var k;return w.exports=M=Ni?Oo(k=Ni).call(k):function(Oe,ue){return Oe.__proto__=ue,Oe},w.exports.__esModule=!0,w.exports.default=w.exports,M(L,D)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),No=n(o(function(w){w.exports=function(L,D){L.prototype=Ja(D.prototype),L.prototype.constructor=L,lu(L,D)},w.exports.__esModule=!0,w.exports.default=w.exports})),Ya=Array.isArray||function(M){return pe(M)=="Array"},xb=TypeError,uu=function(w){if(w>9007199254740991)throw xb("Maximum allowed index exceeded");return w},Bi=function(w,M,L){var D=Xn(M);D in w?ua.f(w,D,le(0,L)):w[D]=L},vf={};vf[to("toStringTag")]="z";var du=String(vf)==="[object z]",Ib=to("toStringTag"),Eb=Object,Pb=pe(function(){return arguments}())=="Arguments",Fi=du?pe:function(w){var M,L,D;return w===void 0?"Undefined":w===null?"Null":typeof(L=function(k,Y){try{return k[Y]}catch{}}(M=Eb(w),Ib))=="string"?L:Pb?pe(M):(D=pe(M))=="Object"&&ae(M.callee)?"Arguments":D},Ab=Ce(Function.toString);ae(Ur.inspectSource)||(Ur.inspectSource=function(w){return Ab(w)});var yf=Ur.inspectSource,bf=function(){},Ob=[],Tf=$e("Reflect","construct"),pu=/^\s*(?:class|function)\b/,Rb=Ce(pu.exec),Nb=!pu.exec(bf),Ds=function(M){if(!ae(M))return!1;try{return Tf(bf,Ob,M),!0}catch{return!1}},Sf=function(M){if(!ae(M))return!1;switch(Fi(M)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nb||!!Rb(pu,yf(M))}catch{return!0}};Sf.sham=!0;var Uc=!Tf||d(function(){var w;return Ds(Ds.call)||!Ds(Object)||!Ds(function(){w=!0})||w})?Sf:Ds,Bb=to("species"),Mf=Array,fu=function(w,M){return new(function(L){var D;return Ya(L)&&(D=L.constructor,(Uc(D)&&(D===Mf||Ya(D.prototype))||Ne(D)&&(D=D[Bb])===null)&&(D=void 0)),D===void 0?Mf:D}(w))(M===0?0:M)},Fb=to("species"),$s=function(w){return mr>=51||!d(function(){var M=[];return(M.constructor={})[Fb]=function(){return{foo:1}},M[w](Boolean).foo!==1})},Cf=to("isConcatSpreadable"),Lb=mr>=51||!d(function(){var w=[];return w[Cf]=!1,w.concat()[0]!==w}),jb=$s("concat"),Db=function(w){if(!Ne(w))return!1;var M=w[Cf];return M!==void 0?!!M:Ya(w)};Vr({target:"Array",proto:!0,arity:1,forced:!Lb||!jb},{concat:function(M){var L,D,k,Y,Oe,ue=jn(this),Pt=fu(ue,0),jt=0;for(L=-1,k=arguments.length;L<k;L++)if(Db(Oe=L===-1?ue:arguments[L]))for(Y=Ia(Oe),uu(jt+Y),D=0;D<Y;D++,jt++)D in Oe&&Bi(Pt,jt,Oe[D]);else uu(jt+1),Bi(Pt,jt++,Oe);return Pt.length=jt,Pt}});var qc,Us,Vc,$b=String,Oa=function(w){if(Fi(w)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $b(w)},Ub=jc.concat("length","prototype"),qs={f:Object.getOwnPropertyNames||function(M){return uf(M,Ub)}},qb=Array,Vb=Math.max,mu=function(w,M,L){for(var D=Ia(w),k=ns(M,D),Y=ns(L===void 0?D:L,D),Oe=qb(Vb(Y-k,0)),ue=0;k<Y;k++,ue++)Bi(Oe,ue,w[k]);return Oe.length=ue,Oe},kf=qs.f,_f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gu={f:function(M){return _f&&pe(M)=="Window"?function(L){try{return kf(L)}catch{return mu(_f)}}(M):kf(ar(M))}},Vs={f:Object.getOwnPropertySymbols},vi=function(w,M,L,D){return D&&D.enumerable?w[M]=L:Jo(w,M,L),w},hu={f:to},Hb=ua.f,wo=function(w){var M=nr.Symbol||(nr.Symbol={});Lr(M,w)||Hb(M,w,{value:hu.f(w)})},wf=function(){var w=$e("Symbol"),M=w&&w.prototype,L=M&&M.valueOf,D=to("toPrimitive");M&&!M[D]&&vi(M,D,function(k){return de(L,this)},{arity:1})},zb=du?{}.toString:function(){return"[object "+Fi(this)+"]"},Kb=ua.f,xf=to("toStringTag"),Li=function(w,M,L,D){if(w){var k=L?w:w.prototype;Lr(k,xf)||Kb(k,xf,{configurable:!0,value:M}),D&&!du&&Jo(k,"toString",zb)}},If=c.WeakMap,Wb=ae(If)&&/native code/.test(String(If)),Ef="Object already initialized",vu=c.TypeError,Gb=c.WeakMap;if(Wb||Ur.state){var ji=Ur.state||(Ur.state=new Gb),Qb=Ce(ji.get),Pf=Ce(ji.has),Jb=Ce(ji.set);qc=function(w,M){if(Pf(ji,w))throw vu(Ef);return M.facade=w,Jb(ji,w,M),M},Us=function(w){return Qb(ji,w)||{}},Vc=function(w){return Pf(ji,w)}}else{var as=Dc("state");os[as]=!0,qc=function(w,M){if(Lr(w,as))throw vu(Ef);return M.facade=w,Jo(w,as,M),M},Us=function(w){return Lr(w,as)?w[as]:{}},Vc=function(w){return Lr(w,as)}}var Pa={set:qc,get:Us,has:Vc,enforce:function(w){return Vc(w)?Us(w):qc(w,{})},getterFor:function(w){return function(M){var L;if(!Ne(M)||(L=Us(M)).type!==w)throw vu("Incompatible receiver, "+w+" required");return L}}},Af=Ce([].push),yi=function(w){var M=w==1,L=w==2,D=w==3,k=w==4,Y=w==6,Oe=w==7,ue=w==5||Y;return function(Pt,jt,ur,gr){for(var yr,Mr,xr=jn(Pt),Fr=Dt(xr),Dr=jo(jt,ur),zr=Ia(Fr),Hr=0,Kr=gr||fu,kn=M?Kr(Pt,zr):L||Oe?Kr(Pt,0):void 0;zr>Hr;Hr++)if((ue||Hr in Fr)&&(Mr=Dr(yr=Fr[Hr],Hr,xr),w))if(M)kn[Hr]=Mr;else if(Mr)switch(w){case 3:return!0;case 5:return yr;case 6:return Hr;case 2:Af(kn,yr)}else switch(w){case 4:return!1;case 7:Af(kn,yr)}return Y?-1:D||k?k:kn}},bi={forEach:yi(0),map:yi(1),filter:yi(2),some:yi(3),every:yi(4),find:yi(5),findIndex:yi(6),filterReject:yi(7)},Hc=bi.forEach,da=Dc("hidden"),zc="Symbol",Yb=Pa.set,Of=Pa.getterFor(zc),Ba=Object.prototype,Di=c.Symbol,Hs=Di&&Di.prototype,Xb=c.TypeError,yu=c.QObject,Rf=Ei.f,Ti=ua.f,Nf=gu.f,Zb=Ve.f,Bf=Ce([].push),Xa=qr("symbols"),zs=qr("op-symbols"),e0=qr("wks"),bu=!yu||!yu.prototype||!yu.prototype.findChild,Tu=Fe&&d(function(){return Ea(Ti({},"a",{get:function(){return Ti(this,"a",{value:7}).a}})).a!=7})?function(w,M,L){var D=Rf(Ba,M);D&&delete Ba[M],Ti(w,M,L),D&&w!==Ba&&Ti(Ba,M,D)}:Ti,Su=function(w,M){var L=Xa[w]=Ea(Hs);return Yb(L,{type:zc,tag:w,description:M}),Fe||(L.description=M),L},Kc=function(M,L,D){M===Ba&&Kc(zs,L,D),Vn(M);var k=Xn(L);return Vn(D),Lr(Xa,k)?(D.enumerable?(Lr(M,da)&&M[da][k]&&(M[da][k]=!1),D=Ea(D,{enumerable:le(0,!1)})):(Lr(M,da)||Ti(M,da,le(1,{})),M[da][k]=!0),Tu(M,k,D)):Ti(M,k,D)},Mu=function(M,L){Vn(M);var D=ar(L),k=gi(D).concat(Df(D));return Hc(k,function(Y){Fe&&!de(Ff,D,Y)||Kc(M,Y,D[Y])}),M},Ff=function(M){var L=Xn(M),D=de(Zb,this,L);return!(this===Ba&&Lr(Xa,L)&&!Lr(zs,L))&&(!(D||!Lr(this,L)||!Lr(Xa,L)||Lr(this,da)&&this[da][L])||D)},Lf=function(M,L){var D=ar(M),k=Xn(L);if(D!==Ba||!Lr(Xa,k)||Lr(zs,k)){var Y=Rf(D,k);return!Y||!Lr(Xa,k)||Lr(D,da)&&D[da][k]||(Y.enumerable=!0),Y}},jf=function(M){var L=Nf(ar(M)),D=[];return Hc(L,function(k){Lr(Xa,k)||Lr(os,k)||Bf(D,k)}),D},Df=function(w){var M=w===Ba,L=Nf(M?zs:ar(w)),D=[];return Hc(L,function(k){!Lr(Xa,k)||M&&!Lr(Ba,k)||Bf(D,Xa[k])}),D};vr||(Di=function(){if(er(Hs,this))throw Xb("Symbol is not a constructor");var M=arguments.length&&arguments[0]!==void 0?Oa(arguments[0]):void 0,L=so(M),D=function(k){this===Ba&&de(D,zs,k),Lr(this,da)&&Lr(this[da],L)&&(this[da][L]=!1),Tu(this,L,le(1,k))};return Fe&&bu&&Tu(Ba,L,{configurable:!0,set:D}),Su(L,M)},Hs=Di.prototype,vi(Hs,"toString",function(){return Of(this).tag}),vi(Di,"withoutSetter",function(w){return Su(so(w),w)}),Ve.f=Ff,ua.f=Kc,df.f=Mu,Ei.f=Lf,qs.f=gu.f=jf,Vs.f=Df,hu.f=function(w){return Su(to(w),w)},Fe&&Ti(Hs,"description",{configurable:!0,get:function(){return Of(this).description}})),Vr({global:!0,constructor:!0,wrap:!0,forced:!vr,sham:!vr},{Symbol:Di}),Hc(gi(e0),function(w){wo(w)}),Vr({target:zc,stat:!0,forced:!vr},{useSetter:function(){bu=!0},useSimple:function(){bu=!1}}),Vr({target:"Object",stat:!0,forced:!vr,sham:!Fe},{create:function(M,L){return L===void 0?Ea(M):Mu(Ea(M),L)},defineProperty:Kc,defineProperties:Mu,getOwnPropertyDescriptor:Lf}),Vr({target:"Object",stat:!0,forced:!vr},{getOwnPropertyNames:jf}),wf(),Li(Di,zc),os[da]=!0;var $f=vr&&!!Symbol.for&&!!Symbol.keyFor,Cu=qr("string-to-symbol-registry"),t0=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!$f},{for:function(w){var M=Oa(w);if(Lr(Cu,M))return Cu[M];var L=$e("Symbol")(M);return Cu[M]=L,t0[L]=M,L}});var Uf=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!$f},{keyFor:function(M){if(!kr(M))throw TypeError(Nr(M)+" is not a symbol");if(Lr(Uf,M))return Uf[M]}});var Si=$e("JSON","stringify"),Wc=Ce(/./.exec),qf=Ce("".charAt),r0=Ce("".charCodeAt),n0=Ce("".replace),o0=Ce(1 .toString),a0=/[\uD800-\uDFFF]/g,Vf=/^[\uD800-\uDBFF]$/,Hf=/^[\uDC00-\uDFFF]$/,zf=!vr||d(function(){var w=$e("Symbol")();return Si([w])!="[null]"||Si({a:w})!="{}"||Si(Object(w))!="{}"}),Kf=d(function(){return Si("\uDF06\uD834")!=='"\\udf06\\ud834"'||Si("\uDEAD")!=='"\\udead"'}),i0=function(w,M){var L=hi(arguments),D=M;if((Ne(M)||w!==void 0)&&!kr(w))return Ya(M)||(M=function(k,Y){if(ae(D)&&(Y=de(D,this,k,Y)),!kr(Y))return Y}),L[1]=M,T(Si,null,L)},s0=function(w,M,L){var D=qf(L,M-1),k=qf(L,M+1);return Wc(Vf,w)&&!Wc(Hf,k)||Wc(Hf,w)&&!Wc(Vf,D)?"\\u"+o0(r0(w,0),16):w};Si&&Vr({target:"JSON",stat:!0,arity:3,forced:zf||Kf},{stringify:function(M,L,D){var k=hi(arguments),Y=T(zf?i0:Si,null,k);return Kf&&typeof Y=="string"?n0(Y,a0,s0):Y}});var c0=!vr||d(function(){Vs.f(1)});Vr({target:"Object",stat:!0,forced:c0},{getOwnPropertySymbols:function(M){var L=Vs.f;return L?L(jn(M)):[]}}),wo("asyncIterator"),wo("hasInstance"),wo("isConcatSpreadable"),wo("iterator"),wo("match"),wo("matchAll"),wo("replace"),wo("search"),wo("species"),wo("split"),wo("toPrimitive"),wf(),wo("toStringTag"),Li($e("Symbol"),"Symbol"),wo("unscopables"),Li(c.JSON,"JSON",!0);var Mi,Wf,Gf,l0=nr.Symbol,Za={},Qf=Function.prototype,u0=Fe&&Object.getOwnPropertyDescriptor,ku=Lr(Qf,"name"),d0={EXISTS:ku,PROPER:ku&&(function(){}).name==="something",CONFIGURABLE:ku&&(!Fe||Fe&&u0(Qf,"name").configurable)},Jf=!d(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype}),Yf=Dc("IE_PROTO"),_u=Object,p0=_u.prototype,is=Jf?_u.getPrototypeOf:function(w){var M=jn(w);if(Lr(M,Yf))return M[Yf];var L=M.constructor;return ae(L)&&M instanceof L?L.prototype:M instanceof _u?p0:null},wu=to("iterator"),Xf=!1;[].keys&&("next"in(Gf=[].keys())?(Wf=is(is(Gf)))!==Object.prototype&&(Mi=Wf):Xf=!0);var f0=!Ne(Mi)||d(function(){var w={};return Mi[wu].call(w)!==w});Mi=f0?{}:Ea(Mi),ae(Mi[wu])||vi(Mi,wu,function(){return this});var Zf={IteratorPrototype:Mi,BUGGY_SAFARI_ITERATORS:Xf},m0=Zf.IteratorPrototype,g0=function(){return this},h0=d0.PROPER,Gc=Zf.BUGGY_SAFARI_ITERATORS,xu=to("iterator"),em="keys",Qc="values",tm="entries",v0=function(){return this},Iu=function(w,M,L,D,k,Y,Oe){(function(zr,Hr,Kr,kn){var Yn=Hr+" Iterator";zr.prototype=Ea(m0,{next:le(+!kn,Kr)}),Li(zr,Yn,!1,!0),Za[Yn]=g0})(L,M,D);var ue,Pt,jt,ur=function(zr){if(zr===k&&Fr)return Fr;if(!Gc&&zr in Mr)return Mr[zr];switch(zr){case em:return function(){return new L(this,zr)};case Qc:return function(){return new L(this,zr)};case tm:return function(){return new L(this,zr)}}return function(){return new L(this)}},gr=M+" Iterator",yr=!1,Mr=w.prototype,xr=Mr[xu]||Mr["@@iterator"]||k&&Mr[k],Fr=!Gc&&xr||ur(k),Dr=M=="Array"&&Mr.entries||xr;if(Dr&&(ue=is(Dr.call(new w)))!==Object.prototype&&ue.next&&(Li(ue,gr,!0,!0),Za[gr]=v0),h0&&k==Qc&&xr&&xr.name!==Qc&&(yr=!0,Fr=function(){return de(xr,this)}),k)if(Pt={values:ur(Qc),keys:Y?Fr:ur(em),entries:ur(tm)},Oe)for(jt in Pt)(Gc||yr||!(jt in Mr))&&vi(Mr,jt,Pt[jt]);else Vr({target:M,proto:!0,forced:Gc||yr},Pt);return Oe&&Mr[xu]!==Fr&&vi(Mr,xu,Fr,{name:k}),Za[M]=Fr,Pt};ua.f;var rm="Array Iterator",y0=Pa.set,b0=Pa.getterFor(rm);Iu(Array,"Array",function(w,M){y0(this,{type:rm,target:ar(w),index:0,kind:M})},function(){var w=b0(this),M=w.target,L=w.kind,D=w.index++;return!M||D>=M.length?(w.target=void 0,{value:void 0,done:!0}):L=="keys"?{value:D,done:!1}:L=="values"?{value:M[D],done:!1}:{value:[D,M[D]],done:!1}},"values"),Za.Arguments=Za.Array;var nm=to("toStringTag");for(var Eu in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var om=c[Eu],Pu=om&&om.prototype;Pu&&Fi(Pu)!==nm&&Jo(Pu,nm,Eu),Za[Eu]=Za.Array}var T0=l0;wo("asyncDispose"),wo("dispose"),wo("matcher"),wo("metadataKey"),wo("observable"),wo("metadata"),wo("patternMatch"),wo("replaceAll");var ga=T0,S0=Ce("".charAt),am=Ce("".charCodeAt),M0=Ce("".slice),im=function(w){return function(M,L){var D,k,Y=Oa(pr(M)),Oe=Ls(L),ue=Y.length;return Oe<0||Oe>=ue?w?"":void 0:(D=am(Y,Oe))<55296||D>56319||Oe+1===ue||(k=am(Y,Oe+1))<56320||k>57343?w?S0(Y,Oe):D:w?M0(Y,Oe,Oe+2):k-56320+(D-55296<<10)+65536}},C0={codeAt:im(!1),charAt:im(!0)}.charAt,sm="String Iterator",k0=Pa.set,_0=Pa.getterFor(sm);Iu(String,"String",function(w){k0(this,{type:sm,string:Oa(w),index:0})},function(){var M,L=_0(this),D=L.string,k=L.index;return k>=D.length?{value:void 0,done:!0}:(M=C0(D,k),L.index+=M.length,{value:M,done:!1})});var cm=hu.f("iterator"),w0=o(function(w){function M(L){return w.exports=M=typeof ga=="function"&&typeof cm=="symbol"?function(D){return typeof D}:function(D){return D&&typeof ga=="function"&&D.constructor===ga&&D!==ga.prototype?"symbol":typeof D},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),lm=ua.f;Vr({target:"Object",stat:!0,forced:Object.defineProperty!==lm,sham:!Fe},{defineProperty:lm});var x0=o(function(w){var M=nr.Object,L=w.exports=function(k,Y,Oe){return M.defineProperty(k,Y,Oe)};M.defineProperty.sham&&(L.sham=!0)}),Ks=x0,I0=d(function(){is(1)});Vr({target:"Object",stat:!0,forced:I0,sham:!Jf},{getPrototypeOf:function(M){return is(jn(M))}});var $i=nr.Object.getPrototypeOf,Ui=function(w,M){var L=[][w];return!!L&&d(function(){L.call(null,M||function(){return 1},1)})},E0=bi.forEach,um=Ui("forEach")?[].forEach:function(M){return E0(this,M,arguments.length>1?arguments[1]:void 0)};Vr({target:"Array",proto:!0,forced:[].forEach!=um},{forEach:um});var P0=Uo("Array").forEach,Au=Array.prototype,A0={DOMTokenList:!0,NodeList:!0},In=function(w){var M=w.forEach;return w===Au||er(Au,w)&&M===Au.forEach||Lr(A0,Fi(w))?P0:M},O0=Ce([].concat),R0=$e("Reflect","ownKeys")||function(M){var L=qs.f(Vn(M)),D=Vs.f;return D?O0(L,D(M)):L},dm=Error,N0=Ce("".replace),B0=String(dm("zxcasd").stack),pm=/\n\s*at [^:]*:[^\n]*/,F0=pm.test(B0),L0=function(w,M){if(F0&&typeof w=="string"&&!dm.prepareStackTrace)for(;M--;)w=N0(w,pm,"");return w},j0=function(w,M){Ne(M)&&"cause"in M&&Jo(w,"cause",M.cause)},D0=to("iterator"),$0=Array.prototype,fm=function(w){return w!==void 0&&(Za.Array===w||$0[D0]===w)},U0=to("iterator"),Jc=function(w){if(!tr(w))return Pr(w,U0)||Pr(w,"@@iterator")||Za[Fi(w)]},q0=TypeError,Ws=function(w,M){var L=arguments.length<2?Jc(w):M;if(Or(L))return Vn(de(L,w));throw q0(Nr(w)+" is not iterable")},Ou=function(w,M,L){var D,k;Vn(w);try{if(!(D=Pr(w,"return"))){if(M==="throw")throw L;return L}D=de(D,w)}catch(Y){k=!0,D=Y}if(M==="throw")throw L;if(k)throw D;return Vn(D),L},V0=TypeError,Yc=function(w,M){this.stopped=w,this.result=M},mm=Yc.prototype,lo=function(w,M,L){var D,k,Y,Oe,ue,Pt,jt,ur=L&&L.that,gr=!(!L||!L.AS_ENTRIES),yr=!(!L||!L.IS_RECORD),Mr=!(!L||!L.IS_ITERATOR),xr=!(!L||!L.INTERRUPTED),Fr=jo(M,ur),Dr=function(Hr){return D&&Ou(D,"normal",Hr),new Yc(!0,Hr)},zr=function(Hr){return gr?(Vn(Hr),xr?Fr(Hr[0],Hr[1],Dr):Fr(Hr[0],Hr[1])):xr?Fr(Hr,Dr):Fr(Hr)};if(yr)D=w.iterator;else if(Mr)D=w;else{if(!(k=Jc(w)))throw V0(Nr(w)+" is not iterable");if(fm(k)){for(Y=0,Oe=Ia(w);Oe>Y;Y++)if((ue=zr(w[Y]))&&er(mm,ue))return ue;return new Yc(!1)}D=Ws(w,k)}for(Pt=yr?w.next:D.next;!(jt=de(Pt,D)).done;){try{ue=zr(jt.value)}catch(Hr){Ou(D,"throw",Hr)}if(typeof ue=="object"&&ue&&er(mm,ue))return ue}return new Yc(!1)},H0=function(w,M){return w===void 0?arguments.length<2?"":M:Oa(w)},z0=!d(function(){var w=Error("a");return!("stack"in w)||(Object.defineProperty(w,"stack",le(1,7)),w.stack!==7)}),K0=to("toStringTag"),Xc=Error,W0=[].push,Gs=function(M,L){var D,k=arguments.length>2?arguments[2]:void 0,Y=er(Ru,this);js?D=js(Xc(),Y?is(this):Ru):(D=Y?this:Ea(Ru),Jo(D,K0,"Error")),L!==void 0&&Jo(D,"message",H0(L)),z0&&Jo(D,"stack",L0(D.stack,1)),j0(D,k);var Oe=[];return lo(M,W0,{that:Oe}),Jo(D,"errors",Oe),D};js?js(Gs,Xc):function(w,M,L){for(var D=R0(M),k=ua.f,Y=Ei.f,Oe=0;Oe<D.length;Oe++){var ue=D[Oe];Lr(w,ue)||L&&Lr(L,ue)||k(w,ue,Y(M,ue))}}(Gs,Xc,{name:!0});var Ru=Gs.prototype=Ea(Xc.prototype,{constructor:le(1,Gs),message:le(1,""),name:le(1,"AggregateError")});Vr({global:!0,constructor:!0,arity:2},{AggregateError:Gs});var Qs,ss,gm,Nu,Ua=pe(c.process)=="process",hm=to("species"),vm=function(w){var M=$e(w),L=ua.f;Fe&&M&&!M[hm]&&L(M,hm,{configurable:!0,get:function(){return this}})},G0=TypeError,Bu=function(w,M){if(er(M,w))return w;throw G0("Incorrect invocation")},Q0=TypeError,Zc=function(w){if(Uc(w))return w;throw Q0(Nr(w)+" is not a constructor")},J0=to("species"),Ci=function(w,M){var L,D=Vn(w).constructor;return D===void 0||tr(L=Vn(D)[J0])?M:Zc(L)},Y0=TypeError,ym=function(w,M){if(w<M)throw Y0("Not enough arguments");return w},bm=/(?:ipad|iphone|ipod).*applewebkit/i.test(or),Fu=c.setImmediate,Lu=c.clearImmediate,X0=c.process,ju=c.Dispatch,Z0=c.Function,Tm=c.MessageChannel,e1=c.String,Du=0,Js={},t1="onreadystatechange";try{Qs=c.location}catch{}var $u=function(w){if(Lr(Js,w)){var M=Js[w];delete Js[w],M()}},Uu=function(w){return function(){$u(w)}},Sm=function(w){$u(w.data)},Mm=function(w){c.postMessage(e1(w),Qs.protocol+"//"+Qs.host)};Fu&&Lu||(Fu=function(M){ym(arguments.length,1);var L=ae(M)?M:Z0(M),D=hi(arguments,1);return Js[++Du]=function(){T(L,void 0,D)},ss(Du),Du},Lu=function(M){delete Js[M]},Ua?ss=function(w){X0.nextTick(Uu(w))}:ju&&ju.now?ss=function(w){ju.now(Uu(w))}:Tm&&!bm?(Nu=(gm=new Tm).port2,gm.port1.onmessage=Sm,ss=jo(Nu.postMessage,Nu)):c.addEventListener&&ae(c.postMessage)&&!c.importScripts&&Qs&&Qs.protocol!=="file:"&&!d(Mm)?(ss=Mm,c.addEventListener("message",Sm,!1)):ss=t1 in Ma("script")?function(w){ou.appendChild(Ma("script")).onreadystatechange=function(){ou.removeChild(this),$u(w)}}:function(w){setTimeout(Uu(w),0)});var Ys,qi,Xs,cs,qu,Vu,Hu,Cm,km={set:Fu,clear:Lu},r1=/ipad|iphone|ipod/i.test(or)&&c.Pebble!==void 0,n1=/web0s(?!.*chrome)/i.test(or),o1=Ei.f,zu=km.set,_m=c.MutationObserver||c.WebKitMutationObserver,wm=c.document,xm=c.process,el=c.Promise,Im=o1(c,"queueMicrotask"),Em=Im&&Im.value;Em||(Ys=function(){var w,M;for(Ua&&(w=xm.domain)&&w.exit();qi;){M=qi.fn,qi=qi.next;try{M()}catch(L){throw qi?cs():Xs=void 0,L}}Xs=void 0,w&&w.enter()},bm||Ua||n1||!_m||!wm?!r1&&el&&el.resolve?((Hu=el.resolve(void 0)).constructor=el,Cm=jo(Hu.then,Hu),cs=function(){Cm(Ys)}):Ua?cs=function(){xm.nextTick(Ys)}:(zu=jo(zu,c),cs=function(){zu(Ys)}):(qu=!0,Vu=wm.createTextNode(""),new _m(Ys).observe(Vu,{characterData:!0}),cs=function(){Vu.data=qu=!qu}));var Ku=Em||function(w){var M={fn:w,next:void 0};Xs&&(Xs.next=M),qi||(qi=M,cs()),Xs=M},ls=function(w){try{return{error:!1,value:w()}}catch(M){return{error:!0,value:M}}},Pm=function(){this.head=null,this.tail=null};Pm.prototype={add:function(w){var M={item:w,next:null};this.head?this.tail.next=M:this.head=M,this.tail=M},get:function(){var w=this.head;if(w)return this.head=w.next,this.tail===w&&(this.tail=null),w.item}};var Wu,Am,a1=Pm,ra=c.Promise,Om=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",i1=!Om&&!Ua&&typeof window=="object"&&typeof document=="object",Rm=ra&&ra.prototype,s1=to("species"),Nm=!1,Bm=ae(c.PromiseRejectionEvent),c1=af("Promise",function(){var w=yf(ra),M=w!==String(ra);if(!M&&mr===66||!Rm.catch||!Rm.finally)return!0;if(!mr||mr<51||!/native code/.test(w)){var L=new ra(function(k){k(1)}),D=function(k){k(function(){},function(){})};if((L.constructor={})[s1]=D,!(Nm=L.then(function(){})instanceof D))return!0}return!M&&(i1||Om)&&!Bm}),us={CONSTRUCTOR:c1,REJECTION_EVENT:Bm,SUBCLASSING:Nm},l1=TypeError,u1=function(w){var M,L;this.promise=new w(function(D,k){if(M!==void 0||L!==void 0)throw l1("Bad Promise constructor");M=D,L=k}),this.resolve=Or(M),this.reject=Or(L)},ei={f:function(w){return new u1(w)}},Fm=km.set,tl="Promise",Lm=us.CONSTRUCTOR,d1=us.REJECTION_EVENT,Gu=Pa.getterFor(tl),p1=Pa.set,f1=ra&&ra.prototype,Zs=ra,Qu=f1,jm=c.TypeError,Ju=c.document,Yu=c.process,Xu=ei.f,m1=Xu,g1=!!(Ju&&Ju.createEvent&&c.dispatchEvent),Dm="unhandledrejection",$m=function(w){var M;return!(!Ne(w)||!ae(M=w.then))&&M},Um=function(w,M){var L,D,k,Y=M.value,Oe=M.state==1,ue=Oe?w.ok:w.fail,Pt=w.resolve,jt=w.reject,ur=w.domain;try{ue?(Oe||(M.rejection===2&&v1(M),M.rejection=1),ue===!0?L=Y:(ur&&ur.enter(),L=ue(Y),ur&&(ur.exit(),k=!0)),L===w.promise?jt(jm("Promise-chain cycle")):(D=$m(L))?de(D,L,Pt,jt):Pt(L)):jt(Y)}catch(gr){ur&&!k&&ur.exit(),jt(gr)}},qm=function(w,M){w.notified||(w.notified=!0,Ku(function(){for(var L,D=w.reactions;L=D.get();)Um(L,w);w.notified=!1,M&&!w.rejection&&h1(w)}))},Vm=function(w,M,L){var D,k;g1?((D=Ju.createEvent("Event")).promise=M,D.reason=L,D.initEvent(w,!1,!0),c.dispatchEvent(D)):D={promise:M,reason:L},!d1&&(k=c["on"+w])?k(D):w===Dm&&function(Y,Oe){var ue=c.console;ue&&ue.error&&(arguments.length==1?ue.error(Y):ue.error(Y,Oe))}("Unhandled promise rejection",L)},h1=function(w){de(Fm,c,function(){var M,L=w.facade,D=w.value;if(Hm(w)&&(M=ls(function(){Ua?Yu.emit("unhandledRejection",D,L):Vm(Dm,L,D)}),w.rejection=Ua||Hm(w)?2:1,M.error))throw M.value})},Hm=function(w){return w.rejection!==1&&!w.parent},v1=function(w){de(Fm,c,function(){var M=w.facade;Ua?Yu.emit("rejectionHandled",M):Vm("rejectionhandled",M,w.value)})},ds=function(w,M,L){return function(D){w(M,D,L)}},ps=function(w,M,L){w.done||(w.done=!0,L&&(w=L),w.value=M,w.state=2,qm(w,!0))},Zu=function(w,M,L){if(!w.done){w.done=!0,L&&(w=L);try{if(w.facade===M)throw jm("Promise can't be resolved itself");var D=$m(M);D?Ku(function(){var k={done:!1};try{de(D,M,ds(Zu,k,w),ds(ps,k,w))}catch(Y){ps(k,Y,w)}}):(w.value=M,w.state=1,qm(w,!1))}catch(k){ps({done:!1},k,w)}}};Lm&&(Qu=(Zs=function(M){Bu(this,Qu),Or(M),de(Wu,this);var L=Gu(this);try{M(ds(Zu,L),ds(ps,L))}catch(D){ps(L,D)}}).prototype,(Wu=function(M){p1(this,{type:tl,done:!1,notified:!1,parent:!1,reactions:new a1,rejection:!1,state:0,value:void 0})}).prototype=vi(Qu,"then",function(M,L){var D=Gu(this),k=Xu(Ci(this,Zs));return D.parent=!0,k.ok=!ae(M)||M,k.fail=ae(L)&&L,k.domain=Ua?Yu.domain:void 0,D.state==0?D.reactions.add(k):Ku(function(){Um(k,D)}),k.promise}),Am=function(){var w=new Wu,M=Gu(w);this.promise=w,this.resolve=ds(Zu,M),this.reject=ds(ps,M)},ei.f=Xu=function(w){return w===Zs||w===void 0?new Am(w):m1(w)}),Vr({global:!0,constructor:!0,wrap:!0,forced:Lm},{Promise:Zs}),Li(Zs,tl,!1,!0),vm(tl);var zm=to("iterator"),Km=!1;try{var y1=0,Wm={next:function(){return{done:!!y1++}},return:function(){Km=!0}};Wm[zm]=function(){return this},Array.from(Wm,function(){throw 2})}catch{}var Gm=function(w,M){if(!M&&!Km)return!1;var L=!1;try{var D={};D[zm]=function(){return{next:function(){return{done:L=!0}}}},w(D)}catch{}return L},Qm=us.CONSTRUCTOR||!Gm(function(w){ra.all(w).then(void 0,function(){})});Vr({target:"Promise",stat:!0,forced:Qm},{all:function(M){var L=this,D=ei.f(L),k=D.resolve,Y=D.reject,Oe=ls(function(){var ue=Or(L.resolve),Pt=[],jt=0,ur=1;lo(M,function(gr){var yr=jt++,Mr=!1;ur++,de(ue,L,gr).then(function(xr){Mr||(Mr=!0,Pt[yr]=xr,--ur||k(Pt))},Y)}),--ur||k(Pt)});return Oe.error&&Y(Oe.value),D.promise}});var b1=us.CONSTRUCTOR;ra&&ra.prototype,Vr({target:"Promise",proto:!0,forced:b1,real:!0},{catch:function(w){return this.then(void 0,w)}}),Vr({target:"Promise",stat:!0,forced:Qm},{race:function(M){var L=this,D=ei.f(L),k=D.reject,Y=ls(function(){var Oe=Or(L.resolve);lo(M,function(ue){de(Oe,L,ue).then(D.resolve,k)})});return Y.error&&k(Y.value),D.promise}}),Vr({target:"Promise",stat:!0,forced:us.CONSTRUCTOR},{reject:function(M){var L=ei.f(this);return de(L.reject,void 0,M),L.promise}});var ed=function(w,M){if(Vn(w),Ne(M)&&M.constructor===w)return M;var L=ei.f(w);return(0,L.resolve)(M),L.promise},T1=us.CONSTRUCTOR,S1=$e("Promise"),M1=!T1;Vr({target:"Promise",stat:!0,forced:!0},{resolve:function(M){return ed(M1&&this===S1?ra:this,M)}}),Vr({target:"Promise",stat:!0},{allSettled:function(M){var L=this,D=ei.f(L),k=D.resolve,Y=D.reject,Oe=ls(function(){var ue=Or(L.resolve),Pt=[],jt=0,ur=1;lo(M,function(gr){var yr=jt++,Mr=!1;ur++,de(ue,L,gr).then(function(xr){Mr||(Mr=!0,Pt[yr]={status:"fulfilled",value:xr},--ur||k(Pt))},function(xr){Mr||(Mr=!0,Pt[yr]={status:"rejected",reason:xr},--ur||k(Pt))})}),--ur||k(Pt)});return Oe.error&&Y(Oe.value),D.promise}});var Jm="No one promise resolved";Vr({target:"Promise",stat:!0},{any:function(M){var L=this,D=$e("AggregateError"),k=ei.f(L),Y=k.resolve,Oe=k.reject,ue=ls(function(){var Pt=Or(L.resolve),jt=[],ur=0,gr=1,yr=!1;lo(M,function(Mr){var xr=ur++,Fr=!1;gr++,de(Pt,L,Mr).then(function(Dr){Fr||yr||(yr=!0,Y(Dr))},function(Dr){Fr||yr||(Fr=!0,jt[xr]=Dr,--gr||Oe(new D(jt,Jm)))})}),--gr||Oe(new D(jt,Jm))});return ue.error&&Oe(ue.value),k.promise}});var C1=ra&&ra.prototype,k1=!!ra&&d(function(){C1.finally.call({then:function(){}},function(){})});Vr({target:"Promise",proto:!0,real:!0,forced:k1},{finally:function(w){var M=Ci(this,$e("Promise")),L=ae(w);return this.then(L?function(D){return ed(M,w()).then(function(){return D})}:w,L?function(D){return ed(M,w()).then(function(){throw D})}:w)}});var _1=nr.Promise;Vr({target:"Promise",stat:!0,forced:!0},{try:function(w){var M=ei.f(this),L=ls(w);return(L.error?M.reject:M.resolve)(L.value),M.promise}});var uo=_1,w1=Ce([].reverse),Ym=[1,2];Vr({target:"Array",proto:!0,forced:String(Ym)===String(Ym.reverse())},{reverse:function(){return Ya(this)&&(this.length=this.length),w1(this)}});var x1=Uo("Array").reverse,td=Array.prototype,kl=function(w){var M=w.reverse;return w===td||er(td,w)&&M===td.reverse?x1:M},I1=$s("slice"),E1=to("species"),rd=Array,P1=Math.max;Vr({target:"Array",proto:!0,forced:!I1},{slice:function(M,L){var D,k,Y,Oe=ar(this),ue=Ia(Oe),Pt=ns(M,ue),jt=ns(L===void 0?ue:L,ue);if(Ya(Oe)&&(D=Oe.constructor,(Uc(D)&&(D===rd||Ya(D.prototype))||Ne(D)&&(D=D[E1])===null)&&(D=void 0),D===rd||D===void 0))return hi(Oe,Pt,jt);for(k=new(D===void 0?rd:D)(P1(jt-Pt,0)),Y=0;Pt<jt;Pt++,Y++)Pt in Oe&&Bi(k,Y,Oe[Pt]);return k.length=Y,k}});var A1=Uo("Array").slice,nd=Array.prototype,Mo=function(w){var M=w.slice;return w===nd||er(nd,w)&&M===nd.slice?A1:M},O1=o(function(w){var M=w0.default;function L(){w.exports=L=function(){return D},w.exports.__esModule=!0,w.exports.default=w.exports;var D={},k=Object.prototype,Y=k.hasOwnProperty,Oe=typeof ga=="function"?ga:{},ue=Oe.iterator||"@@iterator",Pt=Oe.asyncIterator||"@@asyncIterator",jt=Oe.toStringTag||"@@toStringTag";function ur(_n,bn,Nn){return Ks(_n,bn,{value:Nn,enumerable:!0,configurable:!0,writable:!0}),_n[bn]}try{ur({},"")}catch{ur=function(Nn,qn,no){return Nn[qn]=no}}function gr(_n,bn,Nn,qn){var no=bn&&bn.prototype instanceof xr?bn:xr,ao=Ja(no.prototype),Ko=new _r(qn||[]);return ao._invoke=function(Po,Da,Co){var Ao="suspendedStart";return function(oa,Lc){if(Ao==="executing")throw new Error("Generator is already running");if(Ao==="completed"){if(oa==="throw")throw Lc;return Fn()}for(Co.method=oa,Co.arg=Lc;;){var Fo=Co.delegate;if(Fo){var hc=Hn(Fo,Co);if(hc){if(hc===Mr)continue;return hc}}if(Co.method==="next")Co.sent=Co._sent=Co.arg;else if(Co.method==="throw"){if(Ao==="suspendedStart")throw Ao="completed",Co.arg;Co.dispatchException(Co.arg)}else Co.method==="return"&&Co.abrupt("return",Co.arg);Ao="executing";var Ka=yr(Po,Da,Co);if(Ka.type==="normal"){if(Ao=Co.done?"completed":"suspendedYield",Ka.arg===Mr)continue;return{value:Ka.arg,done:Co.done}}Ka.type==="throw"&&(Ao="completed",Co.method="throw",Co.arg=Ka.arg)}}}(_n,Nn,Ko),ao}function yr(_n,bn,Nn){try{return{type:"normal",arg:_n.call(bn,Nn)}}catch(qn){return{type:"throw",arg:qn}}}D.wrap=gr;var Mr={};function xr(){}function Fr(){}function Dr(){}var zr={};ur(zr,ue,function(){return this});var Hr=$i&&$i($i(Pn([])));Hr&&Hr!==k&&Y.call(Hr,ue)&&(zr=Hr);var Kr=Dr.prototype=xr.prototype=Ja(zr);function kn(_n){var bn;In(bn=["next","throw","return"]).call(bn,function(Nn){ur(_n,Nn,function(qn){return this._invoke(Nn,qn)})})}function Yn(_n,bn){function Nn(no,ao,Ko,Po){var Da=yr(_n[no],_n,ao);if(Da.type!=="throw"){var Co=Da.arg,Ao=Co.value;return Ao&&M(Ao)=="object"&&Y.call(Ao,"__await")?bn.resolve(Ao.__await).then(function(oa){Nn("next",oa,Ko,Po)},function(oa){Nn("throw",oa,Ko,Po)}):bn.resolve(Ao).then(function(oa){Co.value=oa,Ko(Co)},function(oa){return Nn("throw",oa,Ko,Po)})}Po(Da.arg)}var qn;this._invoke=function(no,ao){function Ko(){return new bn(function(Po,Da){Nn(no,ao,Po,Da)})}return qn=qn?qn.then(Ko,Ko):Ko()}}function Hn(_n,bn){var Nn=_n.iterator[bn.method];if(Nn===void 0){if(bn.delegate=null,bn.method==="throw"){if(_n.iterator.return&&(bn.method="return",bn.arg=void 0,Hn(_n,bn),bn.method==="throw"))return Mr;bn.method="throw",bn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Mr}var qn=yr(Nn,_n.iterator,bn.arg);if(qn.type==="throw")return bn.method="throw",bn.arg=qn.arg,bn.delegate=null,Mr;var no=qn.arg;return no?no.done?(bn[_n.resultName]=no.value,bn.next=_n.nextLoc,bn.method!=="return"&&(bn.method="next",bn.arg=void 0),bn.delegate=null,Mr):no:(bn.method="throw",bn.arg=new TypeError("iterator result is not an object"),bn.delegate=null,Mr)}function xo(_n){var bn={tryLoc:_n[0]};1 in _n&&(bn.catchLoc=_n[1]),2 in _n&&(bn.finallyLoc=_n[2],bn.afterLoc=_n[3]),this.tryEntries.push(bn)}function Ln(_n){var bn=_n.completion||{};bn.type="normal",delete bn.arg,_n.completion=bn}function _r(_n){this.tryEntries=[{tryLoc:"root"}],In(_n).call(_n,xo,this),this.reset(!0)}function Pn(_n){if(_n){var bn=_n[ue];if(bn)return bn.call(_n);if(typeof _n.next=="function")return _n;if(!isNaN(_n.length)){var Nn=-1,qn=function no(){for(;++Nn<_n.length;)if(Y.call(_n,Nn))return no.value=_n[Nn],no.done=!1,no;return no.value=void 0,no.done=!0,no};return qn.next=qn}}return{next:Fn}}function Fn(){return{value:void 0,done:!0}}return Fr.prototype=Dr,ur(Kr,"constructor",Dr),ur(Dr,"constructor",Fr),Fr.displayName=ur(Dr,jt,"GeneratorFunction"),D.isGeneratorFunction=function(_n){var bn=typeof _n=="function"&&_n.constructor;return!!bn&&(bn===Fr||(bn.displayName||bn.name)==="GeneratorFunction")},D.mark=function(_n){return Ni?Ni(_n,Dr):(_n.__proto__=Dr,ur(_n,jt,"GeneratorFunction")),_n.prototype=Ja(Kr),_n},D.awrap=function(_n){return{__await:_n}},kn(Yn.prototype),ur(Yn.prototype,Pt,function(){return this}),D.AsyncIterator=Yn,D.async=function(_n,bn,Nn,qn,no){no===void 0&&(no=uo);var ao=new Yn(gr(_n,bn,Nn,qn),no);return D.isGeneratorFunction(bn)?ao:ao.next().then(function(Ko){return Ko.done?Ko.value:ao.next()})},kn(Kr),ur(Kr,jt,"Generator"),ur(Kr,ue,function(){return this}),ur(Kr,"toString",function(){return"[object Generator]"}),D.keys=function(_n){var bn=[];for(var Nn in _n)bn.push(Nn);return kl(bn).call(bn),function qn(){for(;bn.length;){var no=bn.pop();if(no in _n)return qn.value=no,qn.done=!1,qn}return qn.done=!0,qn}},D.values=Pn,_r.prototype={constructor:_r,reset:function(bn){var Nn;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,In(Nn=this.tryEntries).call(Nn,Ln),!bn)for(var qn in this)qn.charAt(0)==="t"&&Y.call(this,qn)&&!isNaN(+Mo(qn).call(qn,1))&&(this[qn]=void 0)},stop:function(){this.done=!0;var bn=this.tryEntries[0].completion;if(bn.type==="throw")throw bn.arg;return this.rval},dispatchException:function(bn){if(this.done)throw bn;var Nn=this;function qn(Co,Ao){return Ko.type="throw",Ko.arg=bn,Nn.next=Co,Ao&&(Nn.method="next",Nn.arg=void 0),!!Ao}for(var no=this.tryEntries.length-1;no>=0;--no){var ao=this.tryEntries[no],Ko=ao.completion;if(ao.tryLoc==="root")return qn("end");if(ao.tryLoc<=this.prev){var Po=Y.call(ao,"catchLoc"),Da=Y.call(ao,"finallyLoc");if(Po&&Da){if(this.prev<ao.catchLoc)return qn(ao.catchLoc,!0);if(this.prev<ao.finallyLoc)return qn(ao.finallyLoc)}else if(Po){if(this.prev<ao.catchLoc)return qn(ao.catchLoc,!0)}else{if(!Da)throw new Error("try statement without catch or finally");if(this.prev<ao.finallyLoc)return qn(ao.finallyLoc)}}}},abrupt:function(bn,Nn){for(var qn=this.tryEntries.length-1;qn>=0;--qn){var no=this.tryEntries[qn];if(no.tryLoc<=this.prev&&Y.call(no,"finallyLoc")&&this.prev<no.finallyLoc){var ao=no;break}}ao&&(bn==="break"||bn==="continue")&&ao.tryLoc<=Nn&&Nn<=ao.finallyLoc&&(ao=null);var Ko=ao?ao.completion:{};return Ko.type=bn,Ko.arg=Nn,ao?(this.method="next",this.next=ao.finallyLoc,Mr):this.complete(Ko)},complete:function(bn,Nn){if(bn.type==="throw")throw bn.arg;return bn.type==="break"||bn.type==="continue"?this.next=bn.arg:bn.type==="return"?(this.rval=this.arg=bn.arg,this.method="return",this.next="end"):bn.type==="normal"&&Nn&&(this.next=Nn),Mr},finish:function(bn){for(var Nn=this.tryEntries.length-1;Nn>=0;--Nn){var qn=this.tryEntries[Nn];if(qn.finallyLoc===bn)return this.complete(qn.completion,qn.afterLoc),Ln(qn),Mr}},catch:function(bn){for(var Nn=this.tryEntries.length-1;Nn>=0;--Nn){var qn=this.tryEntries[Nn];if(qn.tryLoc===bn){var no=qn.completion;if(no.type==="throw"){var ao=no.arg;Ln(qn)}return ao}}throw new Error("illegal catch attempt")},delegateYield:function(bn,Nn,qn){return this.delegate={iterator:Pn(bn),resultName:Nn,nextLoc:qn},this.method==="next"&&(this.arg=void 0),Mr}},D}w.exports=L,w.exports.__esModule=!0,w.exports.default=w.exports}),rl=O1(),ir=rl;try{regeneratorRuntime=rl}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=rl:Function("r","regeneratorRuntime = r")(rl)}Vr({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Xm=9007199254740991,_l=d(function(){gi(1)});Vr({target:"Object",stat:!0,forced:_l},{keys:function(M){return gi(jn(M))}});var Vo=nr.Object.keys,wl=Object.assign,Zm=Object.defineProperty,Tn=Ce([].concat),xl=!wl||d(function(){if(Fe&&wl({b:1},wl(Zm({},"a",{enumerable:!0,get:function(){Zm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var w={},M={},L=Symbol(),D="abcdefghijklmnopqrst";return w[L]=7,D.split("").forEach(function(k){M[k]=k}),wl({},w)[L]!=7||gi(wl({},M)).join("")!=D})?function(M,L){for(var D=jn(M),k=arguments.length,Y=1,Oe=Vs.f,ue=Ve.f;k>Y;)for(var Pt,jt=Dt(arguments[Y++]),ur=Oe?Tn(gi(jt),Oe(jt)):gi(jt),gr=ur.length,yr=0;gr>yr;)Pt=ur[yr++],Fe&&!de(ue,jt,Pt)||(D[Pt]=jt[Pt]);return D}:wl;Vr({target:"Object",stat:!0,arity:2,forced:Object.assign!==xl},{assign:xl});var Cr=nr.Object.assign;nr.JSON||(nr.JSON={stringify:JSON.stringify});var Gh=function(M,L,D){return T(nr.JSON.stringify,null,arguments)},Wo=Gh,eg=nu.indexOf,tg=Ce([].indexOf),rg=!!tg&&1/tg([1],1,-0)<0,R1=Ui("indexOf");Vr({target:"Array",proto:!0,forced:rg||!R1},{indexOf:function(M){var L=arguments.length>1?arguments[1]:void 0;return rg?tg(this,M,L)||0:eg(this,M,L)}});var N1=Uo("Array").indexOf,ng=Array.prototype,Ca=function(w){var M=w.indexOf;return w===ng||er(ng,w)&&M===ng.indexOf?N1:M},Qh=Uo("Array").concat,Qd=Array.prototype,ki=function(w){var M=w.concat;return w===Qd||er(Qd,w)&&M===Qd.concat?Qh:M};function Pi(w,M){var L={};for(var D in w)Object.prototype.hasOwnProperty.call(w,D)&&M.indexOf(D)<0&&(L[D]=w[D]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function"){var k=0;for(D=Object.getOwnPropertySymbols(w);k<D.length;k++)M.indexOf(D[k])<0&&Object.prototype.propertyIsEnumerable.call(w,D[k])&&(L[D[k]]=w[D[k]])}return L}function Sn(w,M,L,D){return new(L||(L=Promise))(function(k,Y){function Oe(jt){try{Pt(D.next(jt))}catch(ur){Y(ur)}}function ue(jt){try{Pt(D.throw(jt))}catch(ur){Y(ur)}}function Pt(jt){jt.done?k(jt.value):function(gr){return gr instanceof L?gr:new L(function(yr){yr(gr)})}(jt.value).then(Oe,ue)}Pt((D=D.apply(w,M||[])).next())})}var Jd=d(function(){if(typeof ArrayBuffer=="function"){var w=new ArrayBuffer(8);Object.isExtensible(w)&&Object.defineProperty(w,"a",{value:8})}}),od=Object.isExtensible,og=d(function(){od(1)})||Jd?function(M){return!!Ne(M)&&(!Jd||pe(M)!="ArrayBuffer")&&(!od||od(M))}:od,Jh=!d(function(){return Object.isExtensible(Object.preventExtensions({}))}),ag=o(function(w){var M=ua.f,L=!1,D=so("meta"),k=0,Y=function(ue){M(ue,D,{value:{objectID:"O"+k++,weakData:{}}})},Oe=w.exports={enable:function(){Oe.enable=function(){},L=!0;var ue=qs.f,Pt=Ce([].splice),jt={};jt[D]=1,ue(jt).length&&(qs.f=function(ur){for(var gr=ue(ur),yr=0,Mr=gr.length;yr<Mr;yr++)if(gr[yr]===D){Pt(gr,yr,1);break}return gr},Vr({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gu.f}))},fastKey:function(ue,Pt){if(!Ne(ue))return typeof ue=="symbol"?ue:(typeof ue=="string"?"S":"P")+ue;if(!Lr(ue,D)){if(!og(ue))return"F";if(!Pt)return"E";Y(ue)}return ue[D].objectID},getWeakData:function(ue,Pt){if(!Lr(ue,D)){if(!og(ue))return!0;if(!Pt)return!1;Y(ue)}return ue[D].weakData},onFreeze:function(ue){return Jh&&L&&og(ue)&&!Lr(ue,D)&&Y(ue),ue}};os[D]=!0}),Yh=ua.f,Xh=bi.forEach,_s=Pa.set,B1=Pa.getterFor,Zh=function(w,M,L){for(var D in M)L&&L.unsafe&&w[D]?w[D]=M[D]:vi(w,D,M[D],L);return w},F1=ua.f,ev=ag.fastKey,ig=Pa.set,nl=Pa.getterFor,tv={getConstructor:function(w,M,L,D){var k=w(function(jt,ur){Bu(jt,Y),ig(jt,{type:M,index:Ea(null),first:void 0,last:void 0,size:0}),Fe||(jt.size=0),tr(ur)||lo(ur,jt[D],{that:jt,AS_ENTRIES:L})}),Y=k.prototype,Oe=nl(M),ue=function(jt,ur,gr){var yr,Mr,xr=Oe(jt),Fr=Pt(jt,ur);return Fr?Fr.value=gr:(xr.last=Fr={index:Mr=ev(ur,!0),key:ur,value:gr,previous:yr=xr.last,next:void 0,removed:!1},xr.first||(xr.first=Fr),yr&&(yr.next=Fr),Fe?xr.size++:jt.size++,Mr!=="F"&&(xr.index[Mr]=Fr)),jt},Pt=function(jt,ur){var gr,yr=Oe(jt),Mr=ev(ur);if(Mr!=="F")return yr.index[Mr];for(gr=yr.first;gr;gr=gr.next)if(gr.key==ur)return gr};return Zh(Y,{clear:function(){for(var ur=Oe(this),gr=ur.index,yr=ur.first;yr;)yr.removed=!0,yr.previous&&(yr.previous=yr.previous.next=void 0),delete gr[yr.index],yr=yr.next;ur.first=ur.last=void 0,Fe?ur.size=0:this.size=0},delete:function(jt){var ur=this,gr=Oe(ur),yr=Pt(ur,jt);if(yr){var Mr=yr.next,xr=yr.previous;delete gr.index[yr.index],yr.removed=!0,xr&&(xr.next=Mr),Mr&&(Mr.previous=xr),gr.first==yr&&(gr.first=Mr),gr.last==yr&&(gr.last=xr),Fe?gr.size--:ur.size--}return!!yr},forEach:function(ur){for(var gr,yr=Oe(this),Mr=jo(ur,arguments.length>1?arguments[1]:void 0);gr=gr?gr.next:yr.first;)for(Mr(gr.value,gr.key,this);gr&&gr.removed;)gr=gr.previous},has:function(ur){return!!Pt(this,ur)}}),Zh(Y,L?{get:function(ur){var gr=Pt(this,ur);return gr&&gr.value},set:function(ur,gr){return ue(this,ur===0?0:ur,gr)}}:{add:function(ur){return ue(this,ur=ur===0?0:ur,ur)}}),Fe&&F1(Y,"size",{get:function(){return Oe(this).size}}),k},setStrong:function(w,M,L){var D=M+" Iterator",k=nl(M),Y=nl(D);Iu(w,M,function(Oe,ue){ig(this,{type:D,target:Oe,state:k(Oe),kind:ue,last:void 0})},function(){for(var Oe=Y(this),ue=Oe.kind,Pt=Oe.last;Pt&&Pt.removed;)Pt=Pt.previous;return Oe.target&&(Oe.last=Pt=Pt?Pt.next:Oe.state.first)?ue=="keys"?{value:Pt.key,done:!1}:ue=="values"?{value:Pt.value,done:!1}:{value:[Pt.key,Pt.value],done:!1}:(Oe.target=void 0,{value:void 0,done:!0})},L?"entries":"values",!L,!0),vm(M)}};(function(w,M,L){var D,k=w.indexOf("Map")!==-1,Y=w.indexOf("Weak")!==-1,Oe=k?"set":"add",ue=c[w],Pt=ue&&ue.prototype,jt={};if(Fe&&ae(ue)&&(Y||Pt.forEach&&!d(function(){new ue().entries().next()}))){var ur=(D=M(function(yr,Mr){_s(Bu(yr,ur),{type:w,collection:new ue}),Mr!=null&&lo(Mr,yr[Oe],{that:yr,AS_ENTRIES:k})})).prototype,gr=B1(w);Xh(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(yr){var Mr=yr=="add"||yr=="set";!(yr in Pt)||Y&&yr=="clear"||Jo(ur,yr,function(xr,Fr){var Dr=gr(this).collection;if(!Mr&&Y&&!Ne(xr))return yr=="get"&&void 0;var zr=Dr[yr](xr===0?0:xr,Fr);return Mr?this:zr})}),Y||Yh(ur,"size",{configurable:!0,get:function(){return gr(this).collection.size}})}else D=L.getConstructor(M,w,k,Oe),ag.enable();Li(D,w,!1,!0),jt[w]=D,Vr({global:!0,forced:!0},jt),Y||L.setStrong(D,w,k)})("Map",function(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}},tv);var L1=nr.Map,ti=[].push;Vr({target:"Map",stat:!0,forced:!0},{from:function(M){var L,D,k,Y,Oe=arguments.length,ue=Oe>1?arguments[1]:void 0;return Zc(this),(L=ue!==void 0)&&Or(ue),tr(M)?new this:(D=[],L?(k=0,Y=jo(ue,Oe>2?arguments[2]:void 0),lo(M,function(Pt){de(ti,D,Y(Pt,k++))})):lo(M,ti,{that:D}),new this(D))}}),Vr({target:"Map",stat:!0,forced:!0},{of:function(){return new this(hi(arguments))}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var M,L=Vn(this),D=Or(L.delete),k=!0,Y=0,Oe=arguments.length;Y<Oe;Y++)M=de(D,L,arguments[Y]),k=k&&M;return!!k}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(M,L){var D,k,Y=Vn(this),Oe=Or(Y.get),ue=Or(Y.has),Pt=Or(Y.set);return de(ue,Y,M)?(D=de(Oe,Y,M),"update"in L&&(D=L.update(D,M,Y),de(Pt,Y,M,D)),D):(k=L.insert(M,Y),de(Pt,Y,M,k),k)}});var ws=Ws;Vr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0);return!lo(D,function(Y,Oe,ue){if(!k(Oe,Y,L))return ue()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0),Y=new(Ci(L,$e("Map"))),Oe=Or(Y.set);return lo(D,function(ue,Pt){k(Pt,ue,L)&&de(Oe,Y,ue,Pt)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Y}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0);return lo(D,function(Y,Oe,ue){if(k(Oe,Y,L))return ue(Oe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0);return lo(D,function(Y,Oe,ue){if(k(Oe,Y,L))return ue(Y)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var sg=Ce([].push);Vr({target:"Map",stat:!0,forced:!0},{groupBy:function(M,L){Or(L);var D=Ws(M),k=new this,Y=Or(k.has),Oe=Or(k.get),ue=Or(k.set);return lo(D,function(Pt){var jt=L(Pt);de(Y,k,jt)?sg(de(Oe,k,jt),Pt):de(ue,k,jt,[Pt])},{IS_ITERATOR:!0}),k}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(M){return lo(ws(Vn(this)),function(L,D,k){if((Y=D)===(Oe=M)||Y!=Y&&Oe!=Oe)return k();var Y,Oe},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",stat:!0,forced:!0},{keyBy:function(M,L){var D=new this;Or(L);var k=Or(D.set);return lo(M,function(Y){de(k,D,L(Y),Y)}),D}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(M){return lo(ws(Vn(this)),function(L,D,k){if(D===M)return k(L)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0),Y=new(Ci(L,$e("Map"))),Oe=Or(Y.set);return lo(D,function(ue,Pt){de(Oe,Y,k(Pt,ue,L),Pt)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Y}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0),Y=new(Ci(L,$e("Map"))),Oe=Or(Y.set);return lo(D,function(ue,Pt){de(Oe,Y,ue,k(Pt,ue,L))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Y}}),Vr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(M){for(var L=Vn(this),D=Or(L.set),k=arguments.length,Y=0;Y<k;)lo(arguments[Y++],D,{that:L,AS_ENTRIES:!0});return L}});var Vi=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(M){var L=Vn(this),D=ws(L),k=arguments.length<2,Y=k?void 0:arguments[1];if(Or(M),lo(D,function(Oe,ue){k?(k=!1,Y=ue):Y=M(Y,ue,Oe,L)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),k)throw Vi("Reduce of empty map with no initial value");return Y}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(M){var L=Vn(this),D=ws(L),k=jo(M,arguments.length>1?arguments[1]:void 0);return lo(D,function(Y,Oe,ue){if(k(Oe,Y,L))return ue()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var j1=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(M,L){var D=Vn(this),k=Or(D.get),Y=Or(D.has),Oe=Or(D.set),ue=arguments.length;Or(L);var Pt=de(Y,D,M);if(!Pt&&ue<3)throw j1("Updating absent value");var jt=Pt?de(k,D,M):Or(ue>2?arguments[2]:void 0)(M,D);return de(Oe,D,M,L(jt,M,D)),D}});var D1=TypeError,cg=function(M,L){var D,k=Vn(this),Y=Or(k.get),Oe=Or(k.has),ue=Or(k.set),Pt=arguments.length>2?arguments[2]:void 0;if(!ae(L)&&!ae(Pt))throw D1("At least one callback required");return de(Oe,k,M)?(D=de(Y,k,M),ae(L)&&(D=L(D),de(ue,k,M,D))):ae(Pt)&&(D=Pt(),de(ue,k,M,D)),D};Vr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:cg}),Vr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:cg});var ec=L1,lg=Date,rv=Ce(lg.prototype.getTime);Vr({target:"Date",stat:!0},{now:function(){return rv(new lg)}});var ia=nr.Date.now,$1=/MSIE .\./.test(or),mo=c.Function,nv=function(w){return $1?function(M,L){var D=ym(arguments.length,1)>2,k=ae(M)?M:mo(M),Y=D?hi(arguments,2):void 0;return w(D?function(){T(k,this,Y)}:k,L)}:w},ov={setTimeout:nv(c.setTimeout),setInterval:nv(c.setInterval)},av=ov.setInterval;Vr({global:!0,bind:!0,forced:c.setInterval!==av},{setInterval:av});var Yd=ov.setTimeout;Vr({global:!0,bind:!0,forced:c.setTimeout!==Yd},{setTimeout:Yd});var ho=nr.setTimeout,ug=bi.map,U1=$s("map");Vr({target:"Array",proto:!0,forced:!U1},{map:function(M){return ug(this,M,arguments.length>1?arguments[1]:void 0)}});var Il=Uo("Array").map,Xd=Array.prototype,To=function(w){var M=w.map;return w===Xd||er(Xd,w)&&M===Xd.map?Il:M},Hi=o(function(w){var M=Object.prototype.hasOwnProperty,L="~";function D(){}function k(Pt,jt,ur){this.fn=Pt,this.context=jt,this.once=ur||!1}function Y(Pt,jt,ur,gr,yr){if(typeof ur!="function")throw new TypeError("The listener must be a function");var Mr=new k(ur,gr||Pt,yr),xr=L?L+jt:jt;return Pt._events[xr]?Pt._events[xr].fn?Pt._events[xr]=[Pt._events[xr],Mr]:Pt._events[xr].push(Mr):(Pt._events[xr]=Mr,Pt._eventsCount++),Pt}function Oe(Pt,jt){--Pt._eventsCount==0?Pt._events=new D:delete Pt._events[jt]}function ue(){this._events=new D,this._eventsCount=0}Object.create&&(D.prototype=Object.create(null),new D().__proto__||(L=!1)),ue.prototype.eventNames=function(){var jt,ur,gr=[];if(this._eventsCount===0)return gr;for(ur in jt=this._events)M.call(jt,ur)&&gr.push(L?ur.slice(1):ur);return Object.getOwnPropertySymbols?gr.concat(Object.getOwnPropertySymbols(jt)):gr},ue.prototype.listeners=function(jt){var ur=L?L+jt:jt,gr=this._events[ur];if(!gr)return[];if(gr.fn)return[gr.fn];for(var yr=0,Mr=gr.length,xr=new Array(Mr);yr<Mr;yr++)xr[yr]=gr[yr].fn;return xr},ue.prototype.listenerCount=function(jt){var ur=L?L+jt:jt,gr=this._events[ur];return gr?gr.fn?1:gr.length:0},ue.prototype.emit=function(jt,ur,gr,yr,Mr,xr){var Fr=L?L+jt:jt;if(!this._events[Fr])return!1;var Dr,zr,Hr=this._events[Fr],Kr=arguments.length;if(Hr.fn){switch(Hr.once&&this.removeListener(jt,Hr.fn,void 0,!0),Kr){case 1:return Hr.fn.call(Hr.context),!0;case 2:return Hr.fn.call(Hr.context,ur),!0;case 3:return Hr.fn.call(Hr.context,ur,gr),!0;case 4:return Hr.fn.call(Hr.context,ur,gr,yr),!0;case 5:return Hr.fn.call(Hr.context,ur,gr,yr,Mr),!0;case 6:return Hr.fn.call(Hr.context,ur,gr,yr,Mr,xr),!0}for(zr=1,Dr=new Array(Kr-1);zr<Kr;zr++)Dr[zr-1]=arguments[zr];Hr.fn.apply(Hr.context,Dr)}else{var kn,Yn=Hr.length;for(zr=0;zr<Yn;zr++)switch(Hr[zr].once&&this.removeListener(jt,Hr[zr].fn,void 0,!0),Kr){case 1:Hr[zr].fn.call(Hr[zr].context);break;case 2:Hr[zr].fn.call(Hr[zr].context,ur);break;case 3:Hr[zr].fn.call(Hr[zr].context,ur,gr);break;case 4:Hr[zr].fn.call(Hr[zr].context,ur,gr,yr);break;default:if(!Dr)for(kn=1,Dr=new Array(Kr-1);kn<Kr;kn++)Dr[kn-1]=arguments[kn];Hr[zr].fn.apply(Hr[zr].context,Dr)}}return!0},ue.prototype.on=function(jt,ur,gr){return Y(this,jt,ur,gr,!1)},ue.prototype.once=function(jt,ur,gr){return Y(this,jt,ur,gr,!0)},ue.prototype.removeListener=function(jt,ur,gr,yr){var Mr=L?L+jt:jt;if(!this._events[Mr])return this;if(!ur)return Oe(this,Mr),this;var xr=this._events[Mr];if(xr.fn)xr.fn!==ur||yr&&!xr.once||gr&&xr.context!==gr||Oe(this,Mr);else{for(var Fr=0,Dr=[],zr=xr.length;Fr<zr;Fr++)(xr[Fr].fn!==ur||yr&&!xr[Fr].once||gr&&xr[Fr].context!==gr)&&Dr.push(xr[Fr]);Dr.length?this._events[Mr]=Dr.length===1?Dr[0]:Dr:Oe(this,Mr)}return this},ue.prototype.removeAllListeners=function(jt){var ur;return jt?(ur=L?L+jt:jt,this._events[ur]&&Oe(this,ur)):(this._events=new D,this._eventsCount=0),this},ue.prototype.off=ue.prototype.removeListener,ue.prototype.addListener=ue.prototype.on,ue.prefixed=L,ue.EventEmitter=ue,w.exports=ue}),xs=ol;function ol(w){w=w||{},this.ms=w.min||100,this.max=w.max||1e4,this.factor=w.factor||2,this.jitter=w.jitter>0&&w.jitter<=1?w.jitter:0,this.attempts=0}ol.prototype.duration=function(){var w=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var M=Math.random(),L=Math.floor(M*this.jitter*w);w=1&Math.floor(10*M)?w+L:w-L}return 0|Math.min(w,this.max)},ol.prototype.reset=function(){this.attempts=0},ol.prototype.setMin=function(w){this.ms=w},ol.prototype.setMax=function(w){this.max=w},ol.prototype.setJitter=function(w){this.jitter=w};var iv=typeof e=="object"&&e&&e.Object===Object&&e,q1=typeof self=="object"&&self&&self.Object===Object&&self,Ai=iv||q1||Function("return this")(),Qi=Ai.Symbol,sv=Object.prototype,V1=sv.hasOwnProperty,cv=sv.toString,Ji=Qi?Qi.toStringTag:void 0,fs=function(M){var L=V1.call(M,Ji),D=M[Ji];try{M[Ji]=void 0;var k=!0}catch{}var Y=cv.call(M);return k&&(L?M[Ji]=D:delete M[Ji]),Y},Zd=Object.prototype.toString,lv=function(M){return Zd.call(M)},uv=Qi?Qi.toStringTag:void 0,yc=function(M){return M==null?M===void 0?"[object Undefined]":"[object Null]":uv&&uv in Object(M)?fs(M):lv(M)},ms=function(M){var L=typeof M;return M!=null&&(L=="object"||L=="function")},ep=function(M){if(!ms(M))return!1;var L=yc(M);return L=="[object Function]"||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"},dv={deviceId:"",timeout:8e3},H1={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},pv="weblink.netease.im:443",z1=nu.includes,K1=d(function(){return!Array(1).includes()});Vr({target:"Array",proto:!0,forced:K1},{includes:function(M){return z1(this,M,arguments.length>1?arguments[1]:void 0)}});var W1=Uo("Array").includes,dg=to("match"),pg=TypeError,gs=function(w){if(function(M){var L;return Ne(M)&&((L=M[dg])!==void 0?!!L:pe(M)=="RegExp")}(w))throw pg("The method doesn't accept regular expressions");return w},G1=to("match"),Q1=Ce("".indexOf);Vr({target:"String",proto:!0,forced:!function(w){var M=/./;try{"/./"[w](M)}catch{try{return M[G1]=!1,"/./"[w](M)}catch{}}return!1}("includes")},{includes:function(M){return!!~Q1(Oa(pr(this)),Oa(gs(M)),arguments.length>1?arguments[1]:void 0)}});var fv=Uo("String").includes,fg=Array.prototype,ad=String.prototype,bc=function(w){var M=w.includes;return w===fg||er(fg,w)&&M===fg.includes?W1:typeof w=="string"||w===ad||er(ad,w)&&M===ad.includes?fv:M},J1=bi.findIndex,Y1="findIndex",tp=!0;Y1 in[]&&Array(1).findIndex(function(){tp=!1}),Vr({target:"Array",proto:!0,forced:tp},{findIndex:function(M){return J1(this,M,arguments.length>1?arguments[1]:void 0)}});var mv=Uo("Array").findIndex,mg=Array.prototype,X1=function(w){var M=w.findIndex;return w===mg||er(mg,w)&&M===mg.findIndex?mv:M},gg=o(function(w){function M(L){var D;return w.exports=M=Ni?Oo(D=$i).call(D):function(Y){return Y.__proto__||$i(Y)},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),pa=o(function(w){w.exports=function(L){var D;return Ca(D=Function.toString.call(L)).call(D,"[native code]")!==-1},w.exports.__esModule=!0,w.exports.default=w.exports}),hg=$e("Reflect","construct"),vg=Object.prototype,Z1=[].push,gv=d(function(){function w(){}return!(hg(function(){},[],w)instanceof w)}),yg=!d(function(){hg(function(){})}),bg=gv||yg;Vr({target:"Reflect",stat:!0,forced:bg,sham:bg},{construct:function(M,L){Zc(M),Vn(L);var D=arguments.length<3?M:Zc(arguments[2]);if(yg&&!gv)return hg(M,L,D);if(M==D){switch(L.length){case 0:return new M;case 1:return new M(L[0]);case 2:return new M(L[0],L[1]);case 3:return new M(L[0],L[1],L[2]);case 4:return new M(L[0],L[1],L[2],L[3])}var k=[null];return T(Z1,k,L),new(T(su,M,k))}var Y=D.prototype,Oe=Ea(Ne(Y)?Y:vg),ue=T(M,Oe,L);return Ne(ue)?ue:Oe}});var Is=nr.Reflect.construct,tc=o(function(w){w.exports=function(){if(typeof Reflect>"u"||!Is||Is.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Is(Boolean,[],function(){})),!0}catch{return!1}},w.exports.__esModule=!0,w.exports.default=w.exports}),eT=o(function(w){function M(L,D,k){var Y;return tc()?(w.exports=M=Oo(Y=Is).call(Y),w.exports.__esModule=!0,w.exports.default=w.exports):(w.exports=M=function(ue,Pt,jt){var ur=[null];ur.push.apply(ur,Pt);var gr=new(Oo(Function).apply(ue,ur));return jt&&lu(gr,jt.prototype),gr},w.exports.__esModule=!0,w.exports.default=w.exports),M.apply(null,arguments)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),tT=o(function(w){function M(L){var D=typeof ec=="function"?new ec:void 0;return w.exports=M=function(Y){if(Y===null||!pa(Y))return Y;if(typeof Y!="function")throw new TypeError("Super expression must either be null or a function");if(D!==void 0){if(D.has(Y))return D.get(Y);D.set(Y,Oe)}function Oe(){return eT(Y,arguments,gg(this).constructor)}return Oe.prototype=Ja(Y.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),lu(Oe,Y)},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),rc=function(w){function M(L,D,k){var Y;return D===void 0&&(D={}),k===void 0&&(k=400),(Y=w.call(this,L)||this).data=D,Y.code=k,Y.name="customError",Y}return No(M,w),M}(n(tT)(Error)),yo=function(w){function M(L,D,k){var Y;return D===void 0&&(D={}),(Y=w.call(this,L,D,414)||this).code=414,Y.name="validateError",Y.rules=k,Y}return No(M,w),M}(rc),al={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},rp=function(w){function M(L,D,k,Y,Oe){var ue;return k===void 0&&(k=""),Y===void 0&&(Y=new Date().getTime()),Oe===void 0&&(Oe={}),k=k||al[L],(ue=w.call(this,k,Oe,L)||this).name="cmdError",ue.cmd=D,ue.timetag=Y,ue}return No(M,w),M}(rc),Tg=function(w){function M(L,D,k){var Y;return(Y=w.call(this,L,{},412)||this).code=412,Y.name="formatError",Y.key=D,Y.reason=k,Y}return No(M,w),M}(rc),El=function(w){function M(L,D,k,Y,Oe){var ue;return(ue=w.call(this,L,{file:Oe},400)||this).name="uploadError",ue.rawError=D,ue.curProvider=k||1,ue.mixStorePolicy=Y,ue}return No(M,w),M}(rc),Tc=["error","warn","log","debug"],il=function(){},id=["off","error","warn","log","debug"],np=function(){function w(L,D){this.name=D,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=il,this.log=il,this.warn=il,this.error=il,this.name=D,w.instancesName.push(D),bc(id).call(id,L)||(L="off"),this.setLogFunc(L)}var M=w.prototype;return M.setLogFunc=function(D){var k=this,Y=X1(Tc).call(Tc,function(Oe){return Oe===D});In(Tc).call(Tc,function(Oe,ue){ue<=Y&&(k[Oe]=function(){var Pt=Mo(Array.prototype).call(arguments),jt=this.formatArgs(Pt,Oe);this.strategies[Oe](jt)})})},M.formatArgs=function(D,k){var Y=new Date,Oe=Y.getMonth()+1+"-"+Y.getDate()+" "+Y.getHours()+":"+Y.getMinutes()+":"+Y.getSeconds()+":"+Y.getMilliseconds();return"[NIM "+k+" "+this.name+" "+Oe+"] "+To(D).call(D,function(ue){return ue instanceof rc?ue.name+", "+ue.code+", "+ue.message:ue instanceof Error?ue&&ue.message?ue.message:ue:typeof ue=="object"?Wo(ue):ue}).join(" ")},w}();np.instancesName=[],Vr({global:!0},{globalThis:c});var hv=bi.filter,rT=$s("filter");Vr({target:"Array",proto:!0,forced:!rT},{filter:function(M){return hv(this,M,arguments.length>1?arguments[1]:void 0)}});var na=Uo("Array").filter,Sg=Array.prototype,li=function(w){var M=w.filter;return w===Sg||er(Sg,w)&&M===Sg.filter?na:M},nT=o(function(w,M){w.exports=function(){function L(jt,ur){if(!(jt instanceof ur))throw new TypeError("Cannot call a class as a function")}function D(jt,ur){for(var gr=0;gr<ur.length;gr++){var yr=ur[gr];yr.enumerable=yr.enumerable||!1,yr.configurable=!0,"value"in yr&&(yr.writable=!0),Ks(jt,yr.key,yr)}}function k(jt,ur,gr){return ur&&D(jt.prototype,ur),gr&&D(jt,gr),Ks(jt,"prototype",{writable:!1}),jt}var Y={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},Oe="https://statistic.live.126.net/dispatcher/req",ue=function(){},Pt=function(){function jt(ur){L(this,jt),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Y,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=ia(),this.timer=null,this.setConfig(ur),this.reportConfig.autoStart&&this.initUploadConfig()}return k(jt,[{key:"setConfig",value:function(gr){this.reportConfig=Cr({},this.reportConfig,gr)}},{key:"reportImmediately",value:function(gr,yr){var Mr=this;this.reportConfig.request(gr,Cr({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},yr)).catch(function(xr){var Fr,Dr;(Dr=(Fr=Mr.reportConfig)===null||Fr===void 0?void 0:Fr.logger)===null||Dr===void 0||Dr.warn("Reporter immediately upload failed",xr)})}},{key:"report",value:function(gr,yr){var Mr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(gr){var xr=ia();Mr?this.lowPriorityMsgList.push({module:gr,msg:yr,createTime:xr}):this.msgList.push({module:gr,msg:yr,createTime:xr}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(gr,yr){if(gr&&!this.traceMsgCache[gr]){var Mr=Cr(Cr({start_time:ia()},yr),{extension:[]});this.traceMsgCache[gr]=Mr}}},{key:"reportTraceUpdate",value:function(gr){}},{key:"reportTraceUpdateV2",value:function(gr,yr){if(this.traceMsgCache[gr]){var Mr=this.traceMsgCache[gr].extension.length,xr=new Date().getTime();yr.duration=Mr===0?xr-this.traceMsgCache[gr].start_time:xr-this.traceMsgCache[gr].extension[Mr-1].end_time,this.traceMsgCache[gr].extension.push(Cr({end_time:xr},yr))}}},{key:"reportTraceEnd",value:function(gr){var yr,Mr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[gr]&&(gr!=="nos"||Mr===!1?(typeof Mr=="boolean"?this.traceMsgCache[gr].succeed=!!Mr:this.traceMsgCache[gr].state=Mr,this.traceMsgCache[gr].duration=ia()-this.traceMsgCache[gr].start_time,In(yr=this.traceMsgCache[gr].extension).call(yr,function(xr){delete xr.end_time}),this.report(gr,this.traceMsgCache[gr]),this.traceMsgCache[gr]=null):this.traceMsgCache[gr]=null)}},{key:"reportTraceCancel",value:function(gr){this.traceMsgCache[gr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var gr,yr=this;In(gr=Vo(this.traceMsgCache)).call(gr,function(Mr){yr.reportTraceEnd(Mr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=ue,this.report=ue,this.reportTraceStart=ue,this.reportTraceUpdate=ue,this.reportTraceEnd=ue,this.pause=ue,this.restore=ue,this.destroy=ue,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var gr,yr,Mr=this;if(!this.loading){this.loading=!0;var xr=this.reportConfig.common||{};try{this.reportConfig.request(Oe,{method:"GET",dataType:"json",params:{deviceId:xr.dev_id,sdkVer:xr.sdk_ver,platform:xr.platform,appkey:xr.app_key},timeout:this.reportConfig.timeout}).then(function(Fr){var Dr,zr;if(!Mr.isDestroyed){if(Fr.status===200&&Fr.data&&Fr.data.code===200){var Hr=Fr.data.data||{};Mr.reportConfig.maxSize=Hr.maxSize>1e3?1e3:Hr.maxSize,Mr.reportConfig.maxInterval=Hr.maxInterval>1e4?1e4:Hr.maxInterval,Mr.reportConfig.maxInterval=Hr.maxInterval<10?10:Hr.maxInterval,Mr.reportConfig.minInterval=Hr.minInterval<2?2:Hr.minInterval,Mr.reportConfig.maxDelay=Hr.maxDelay||300,Mr.reportConfig.maxInterval=1e3*Mr.reportConfig.maxInterval,Mr.reportConfig.minInterval=1e3*Mr.reportConfig.minInterval,Mr.reportConfig.maxDelay=1e3*Mr.reportConfig.maxDelay,Mr.enable=!0,Mr.initConfigLoaded=!0,Mr.loading=!1,Mr.reportHeartBeat()}(zr=(Dr=Mr.reportConfig)===null||Dr===void 0?void 0:Dr.logger)===null||zr===void 0||zr.log("Get reporter upload config success")}}).catch(function(Fr){var Dr,zr;Mr.loading=!1,(zr=(Dr=Mr.reportConfig)===null||Dr===void 0?void 0:Dr.logger)===null||zr===void 0||zr.error("Get reporter upload config failed",Fr)})}catch(Fr){this.loading=!1,(yr=(gr=this.reportConfig)===null||gr===void 0?void 0:gr.logger)===null||yr===void 0||yr.error("Exec reporter request failed",Fr)}}}},{key:"reportHeartBeat",value:function(){var gr=this;this.isDestroyed||(this.timer=ho(function(){gr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var gr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;ia()-this.lastReportTime>=gr&&this.upload()}}},{key:"getUploadMsg",value:function(){var gr,yr,Mr,xr,Fr,Dr=this,zr={},Hr=ia();this.msgList=li(gr=this.msgList).call(gr,function(Pn){return Hr-Pn.createTime<Dr.reportConfig.maxDelay}),this.lowPriorityMsgList=li(yr=this.lowPriorityMsgList).call(yr,function(Pn){return Hr-Pn.createTime<Dr.reportConfig.maxDelay}),this.cacheMsgList=li(Mr=this.cacheMsgList).call(Mr,function(Pn){return Hr-Pn.createTime<Dr.reportConfig.maxDelay});var Kr=Mo(xr=this.msgList).call(xr,0,this.reportConfig.maxSize);if(this.msgList=Mo(Fr=this.msgList).call(Fr,Kr.length),Kr.length<this.reportConfig.maxSize){var kn,Yn,Hn=this.reportConfig.maxSize-Kr.length;Kr=ki(Kr).call(Kr,Mo(kn=this.lowPriorityMsgList).call(kn,0,Hn)),this.lowPriorityMsgList=Mo(Yn=this.lowPriorityMsgList).call(Yn,Hn)}if(Kr.length<this.reportConfig.maxSize){var xo,Ln,_r=this.reportConfig.maxSize-Kr.length;Kr=ki(Kr).call(Kr,Mo(xo=this.cacheMsgList).call(xo,0,_r)),this.cacheMsgList=Mo(Ln=this.cacheMsgList).call(Ln,_r)}return In(Kr).call(Kr,function(Pn){zr[Pn.module]?zr[Pn.module].push(Pn.msg):zr[Pn.module]=[Pn.msg]}),{uploadMsgArr:Kr,uploadMsg:zr}}},{key:"upload",value:function(){var gr,yr,Mr=this;if(this.enable&&!(this.lastReportTime&&ia()-this.lastReportTime<this.reportConfig.minInterval)){var xr=this.getUploadMsg(),Fr=xr.uploadMsgArr,Dr=xr.uploadMsg;if(Fr.length){this.lastReportTime=ia();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:Dr},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(zr){var Hr,Kr,kn,Yn;Mr.cacheMsgList=Mo(Hr=ki(Kr=Mr.cacheMsgList).call(Kr,Fr)).call(Hr,0,Mr.reportConfig.cacheMaxSize),(Yn=(kn=Mr.reportConfig)===null||kn===void 0?void 0:kn.logger)===null||Yn===void 0||Yn.warn("Reporter upload failed",zr)})}catch(zr){(yr=(gr=this.reportConfig)===null||gr===void 0?void 0:gr.logger)===null||yr===void 0||yr.warn("Exec reporter request failed",zr)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),jt}();return Pt}()}),Ho={setLogger:function(M){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function w(L,D){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var M=w.prototype;return M.close=function(D,k){throw new Error("Method not implemented.")},M.send=function(D){throw new Error("Method not implemented.")},M.onclose=function(D){throw new Error("Method not implemented.")},M.onerror=function(D){throw new Error("Method not implemented.")},M.onmessage=function(D){throw new Error("Method not implemented.")},M.onopen=function(D){throw new Error("Method not implemented.")},w}(),localStorage:{},request:function(M,L){throw new Error("Function not implemented.")},uploadFile:function(M){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},Yi=TypeError,vv=function(w){return function(M,L,D,k){Or(L);var Y=jn(M),Oe=Dt(Y),ue=Ia(Y),Pt=w?ue-1:0,jt=w?-1:1;if(D<2)for(;;){if(Pt in Oe){k=Oe[Pt],Pt+=jt;break}if(Pt+=jt,w?Pt<0:ue<=Pt)throw Yi("Reduce of empty array with no initial value")}for(;w?Pt>=0:ue>Pt;Pt+=jt)Pt in Oe&&(k=L(k,Oe[Pt],Pt,Y));return k}},ta={left:vv(!1),right:vv(!0)}.left,oT=Ui("reduce");Vr({target:"Array",proto:!0,forced:!oT||!Ua&&mr>79&&mr<83},{reduce:function(M){var L=arguments.length;return ta(this,M,L,L>1?arguments[1]:void 0)}});var yv=Uo("Array").reduce,Mg=Array.prototype,op=function(w){var M=w.reduce;return w===Mg||er(Mg,w)&&M===Mg.reduce?yv:M},bv=function(M){return M===void 0},Pl={},Sc={};function Tv(w,M){var L,D,k;try{k=JSON.parse(w)}catch(Mr){throw M.error("Parse command error: ",w),Mr}var Y=k.sid+"_"+k.cid,Oe=k.r;if(bc(L=["4_1","4_2","4_10","4_11"]).call(L,Y)){var ue=k.r[1].headerPacket;Y=ue.sid+"_"+ue.cid,Oe=k.r[1].body}var Pt,jt=Sc[Y],ur=Pl[jt],gr=function(xr,Fr){var Dr=al[xr];return Dr===null?null:new rp(xr,Fr,Dr,new Date().getTime())}(k.code,jt),yr={cmd:jt,raw:k,error:gr,service:ur==null?void 0:ur.service,content:{}};if(yr.error){if(yr.error.cmd=jt,yr.error.callFunc="parseCmd",!(!((D=ur==null?void 0:ur.ignoreErrCodes)===null||D===void 0)&&bc(D).call(D,k.code)))return yr;M.warn("parseCmd:: ignore error ",yr.error),yr.error.ignore=!0}return!jt||!ur?(yr.notFound=!0,yr):(ur.response&&In(Pt=ur.response).call(Pt,function(Mr,xr){var Fr=Oe[xr],Dr=Mr.type,zr=Mr.name,Hr=Mr.reflectMapper;if(!bv(Fr))switch(Dr){case"Property":yr.content[zr]=Hr?Es(Fr,Hr):Fr;break;case"PropertyArray":yr.content[zr]=To(Fr).call(Fr,function(Kr){return Hr?Es(Kr,Hr):Kr});break;case"long":case"Long":case"byte":case"Byte":case"Number":yr.content[zr]=+Fr;break;default:yr.content[zr]=Fr}}),yr)}function sd(w,M){var L={};for(var D in w)M[D]!==void 0&&(L[M[D]]=w[D]);return L}function Es(w,M){var L={};for(var D in w)M[D]!==void 0&&(L[M[D]]=w[D]);return L}function qa(w){Pl=Cr(Pl,w.cmdConfig),Sc=Cr(Sc,w.cmdMap)}function ri(w){var M;return op(M=Vo(w)).call(M,function(L,D){var k,Y=w[D];return L[D]=op(k=Vo(Y)).call(k,function(Oe,ue){return Oe[Y[ue]]=ue,Oe},{}),L},{})}var Ra=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],Ps=["transport not supported","client not handshaken","unauthorized"],Mc=["reconnect"],Cg=function(w){function M(D,k,Y){var Oe;return(Oe=w.call(this)||this).url=k,Oe.logger=Y,Oe.websocket=null,Oe.core=D,Oe.url=k,Oe.status="disconnected",Oe.logger=Y,Oe.connect(),Oe}No(M,w);var L=M.prototype;return L.connect=function(){var k=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+ia(),{method:"GET",dataType:"text",timeout:8e3}).then(function(Y){var Oe=Y.data.split(":"),ue=Oe[0],Pt=Oe[1];return k.sessionId=ue,k.closeTimeout=1e3*Pt,k._createWebsocket("wss://"+k.url+"/socket.io/1/websocket/"+ue)}).catch(function(Y){k.logger.error("imsocket::handshake fail. ",Y&&Y.message),k.status="disconnected",k.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},L.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(k){this.logger.warn("attempt to close websocket error",k)}this.clean()}},L.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},L.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},L._createWebsocket=function(k){var Y,Oe=this;this.websocket=new Ho.WebSocket(k),this.websocket.onmessage=Oo(Y=this.onMessage).call(Y,this),this.websocket.onclose=function(){Oe.logger.log("imsocket:: receive websocket onclose event, current status",Oe.status),Oe.clean()},this.websocket.onerror=function(ue){Oe.logger.error("imsocket:: onerror",ue)}},L.onMessage=function(k){var Y;this.resetCloseTimer();var Oe=this.decodePacket(k.data);if(Oe)switch(Oe.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",Oe.data);break;case"event":Oe.name&&this.emit(Oe.name,Oe.args);break;case"error":Oe.reason==="unauthorized"?this.emit("connect_failed",Oe.reason):this.emit("error",Oe.reason);break;case"heartbeat":(Y=this.websocket)===null||Y===void 0||Y.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",Oe.type)}},L.encodePacket=function(k){var Y,Oe,ue=k.type,Pt=k.id,jt=Pt===void 0?"":Pt,ur=k.endpoint,gr=ur===void 0?"":ur,yr=k.ack,Mr=null;if(!ue)return"";switch(ue){case"error":Y=k.reason?Ca(Ps).call(Ps,k.reason):"",Oe=k.advice?Ca(Mc).call(Mc,k.advice):"",Y===""&&Oe===""||(Mr=Y+(Oe!==""?"+"+Oe:""));break;case"message":k.data!==""&&(Mr=k.data);break;case"event":Y={name:k.name},Y=k.args&&k.args.length?{name:k.name,args:k.args}:{name:k.name},Mr=Wo(Y);break;case"json":Mr=Wo(k.data);break;case"connect":k.qs&&(Mr=k.qs);break;case"ack":Mr=k.ackId+(k.args&&k.args.length?"+"+Wo(k.args):"")}var xr=[Ca(Ra).call(Ra,ue),jt+(yr==="data"?"+":""),gr];return Mr!=null&&xr.push(Mr),xr.join(":")},L.decodePacket=function(k){if(k)if(k.charAt(0)!="�"){var Y=k.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(Y){var Oe,ue=Y[1],Pt=Y[2],jt=Y[3],ur=Y[4],gr=Y[5],yr={type:Ra[+ue],endpoint:ur};switch(Pt&&(yr.id=Pt,yr.ack=!jt||"data"),yr.type){case"error":Oe=gr.split("+"),yr.reason=Ps[+Oe[0]]||"";break;case"message":yr.data=gr||"";break;case"connect":yr.qs=gr||"";break;case"event":try{var Mr=JSON.parse(gr);yr.name=Mr.name,yr.args=Mr.args}catch(xr){this.logger.error("imsocket::parseData::type::event error",xr)}yr.args=yr.args||[];break;case"json":try{yr.data=JSON.parse(gr)}catch(xr){this.logger.error("imsocket::parseData::type::json error",xr)}break;case"ack":if((Oe=gr.match(/^([0-9]+)(\+)?(.*)/))&&(yr.ackId=Oe[1],yr.args=[],Oe[3]))try{yr.args=Oe[3]?JSON.parse(Oe[3]):[]}catch(xr){this.logger.error("imsocket::parseData::type::ack error",xr)}}return yr}}else this.logger.error("imsocket::unrecognize dataStr",Mo(k).call(k,0,20))},L.send=function(k){var Y,Oe={data:k,type:"message",endpoint:""};(Y=this.websocket)===null||Y===void 0||Y.send(this.encodePacket(Oe))},L.resetCloseTimer=function(){var k=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=ho(function(){k.close()},this.closeTimeout))},M}(Hi),kg=Uo("Array").values,ap=Array.prototype,aT={DOMTokenList:!0,NodeList:!0},ip=function(w){var M=w.values;return w===ap||er(ap,w)&&M===ap.values||Lr(aT,Fi(w))?kg:M};Vr({target:"Array",stat:!0},{isArray:Ya});var hs=nr.Array.isArray,iT=bi.every,sp=Ui("every");Vr({target:"Array",proto:!0,forced:!sp},{every:function(M){return iT(this,M,arguments.length>1?arguments[1]:void 0)}});var ni=Uo("Array").every,_g=Array.prototype,sT=function(w){var M=w.every;return w===_g||er(_g,w)&&M===_g.every?ni:M},vs=function(M){return M!=null&&typeof M=="object"},wg=function(M){return vs(M)&&yc(M)=="[object RegExp]"},Al=function(M){return function(L){return M(L)}},ui=o(function(w,M){var L=M&&!M.nodeType&&M,D=L&&w&&!w.nodeType&&w,k=D&&D.exports===L&&iv.process,Y=function(){try{var Oe=D&&D.require&&D.require("util").types;return Oe||k&&k.binding&&k.binding("util")}catch{}}();w.exports=Y}),Sv=ui&&ui.isRegExp,xg=Sv?Al(Sv):wg,Ol=Ai["__core-js_shared__"],Ig=function(){var w=/[^.]+$/.exec(Ol&&Ol.keys&&Ol.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),cT=function(M){return!!Ig&&Ig in M},Eg=Function.prototype.toString,Cc=function(M){if(M!=null){try{return Eg.call(M)}catch{}try{return M+""}catch{}}return""},lT=/^\[object .+?Constructor\]$/,uT=Function.prototype,sl=Object.prototype,dT=uT.toString,pT=sl.hasOwnProperty,fT=RegExp("^"+dT.call(pT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mT=function(M){return!(!ms(M)||cT(M))&&(ep(M)?fT:lT).test(Cc(M))},gT=function(M,L){return M==null?void 0:M[L]},cl=function(M,L){var D=gT(M,L);return mT(D)?D:void 0},cd=cl(Object,"create"),hT=function(){this.__data__=cd?cd(null):{},this.size=0},ll=function(M){var L=this.has(M)&&delete this.__data__[M];return this.size-=L?1:0,L},ld=Object.prototype.hasOwnProperty,vT=function(M){var L=this.__data__;if(cd){var D=L[M];return D==="__lodash_hash_undefined__"?void 0:D}return ld.call(L,M)?L[M]:void 0},yT=Object.prototype.hasOwnProperty,bT=function(M){var L=this.__data__;return cd?L[M]!==void 0:yT.call(L,M)},TT=function(M,L){var D=this.__data__;return this.size+=this.has(M)?0:1,D[M]=cd&&L===void 0?"__lodash_hash_undefined__":L,this};function Rl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var D=w[M];this.set(D[0],D[1])}}Rl.prototype.clear=hT,Rl.prototype.delete=ll,Rl.prototype.get=vT,Rl.prototype.has=bT,Rl.prototype.set=TT;var Mv=Rl,ST=function(){this.__data__=[],this.size=0},nc=function(M,L){return M===L||M!=M&&L!=L},ud=function(M,L){for(var D=M.length;D--;)if(nc(M[D][0],L))return D;return-1},MT=Array.prototype.splice,cp=function(M){var L=this.__data__,D=ud(L,M);return!(D<0)&&(D==L.length-1?L.pop():MT.call(L,D,1),--this.size,!0)},lp=function(M){var L=this.__data__,D=ud(L,M);return D<0?void 0:L[D][1]},CT=function(M){return ud(this.__data__,M)>-1},kT=function(M,L){var D=this.__data__,k=ud(D,M);return k<0?(++this.size,D.push([M,L])):D[k][1]=L,this};function Nl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var D=w[M];this.set(D[0],D[1])}}Nl.prototype.clear=ST,Nl.prototype.delete=cp,Nl.prototype.get=lp,Nl.prototype.has=CT,Nl.prototype.set=kT;var up=Nl,dd=cl(Ai,"Map"),Bl=function(){this.size=0,this.__data__={hash:new Mv,map:new(dd||up),string:new Mv}},dp=function(M){var L=typeof M;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?M!=="__proto__":M===null},kc=function(M,L){var D=M.__data__;return dp(L)?D[typeof L=="string"?"string":"hash"]:D.map},_T=function(M){var L=kc(this,M).delete(M);return this.size-=L?1:0,L},wT=function(M){return kc(this,M).get(M)},pp=function(M){return kc(this,M).has(M)},xT=function(M,L){var D=kc(this,M),k=D.size;return D.set(M,L),this.size+=D.size==k?0:1,this};function Fl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var D=w[M];this.set(D[0],D[1])}}Fl.prototype.clear=Bl,Fl.prototype.delete=_T,Fl.prototype.get=wT,Fl.prototype.has=pp,Fl.prototype.set=xT;var fp=Fl,IT=function(M){return this.__data__.set(M,"__lodash_hash_undefined__"),this},Ll=function(M){return this.__data__.has(M)};function ul(w){var M=-1,L=w==null?0:w.length;for(this.__data__=new fp;++M<L;)this.add(w[M])}ul.prototype.add=ul.prototype.push=IT,ul.prototype.has=Ll;var Pg=ul,Cv=function(M,L,D,k){for(var Y=M.length,Oe=D+(k?1:-1);k?Oe--:++Oe<Y;)if(L(M[Oe],Oe,M))return Oe;return-1},mp=function(M){return M!=M},Ag=function(M,L,D){for(var k=D-1,Y=M.length;++k<Y;)if(M[k]===L)return k;return-1},ET=function(M,L,D){return L==L?Ag(M,L,D):Cv(M,mp,D)},kv=function(M,L){return!!(M!=null&&M.length)&&ET(M,L,0)>-1},_v=function(M,L,D){for(var k=-1,Y=M==null?0:M.length;++k<Y;)if(D(L,M[k]))return!0;return!1},Og=function(M,L){for(var D=-1,k=M==null?0:M.length,Y=Array(k);++D<k;)Y[D]=L(M[D],D,M);return Y},gp=function(M,L){return M.has(L)},wv=function(M,L,D,k){var Y=-1,Oe=kv,ue=!0,Pt=M.length,jt=[],ur=L.length;if(!Pt)return jt;D&&(L=Og(L,Al(D))),k?(Oe=_v,ue=!1):L.length>=200&&(Oe=gp,ue=!1,L=new Pg(L));e:for(;++Y<Pt;){var gr=M[Y],yr=D==null?gr:D(gr);if(gr=k||gr!==0?gr:0,ue&&yr==yr){for(var Mr=ur;Mr--;)if(L[Mr]===yr)continue e;jt.push(gr)}else Oe(L,yr,k)||jt.push(gr)}return jt},jl=function(M){return M},Rg=function(M,L,D){switch(D.length){case 0:return M.call(L);case 1:return M.call(L,D[0]);case 2:return M.call(L,D[0],D[1]);case 3:return M.call(L,D[0],D[1],D[2])}return M.apply(L,D)},Ng=Math.max,hp=function(M,L,D){return L=Ng(L===void 0?M.length-1:L,0),function(){for(var k=arguments,Y=-1,Oe=Ng(k.length-L,0),ue=Array(Oe);++Y<Oe;)ue[Y]=k[L+Y];Y=-1;for(var Pt=Array(L+1);++Y<L;)Pt[Y]=k[Y];return Pt[L]=D(ue),Rg(M,this,Pt)}},xv=function(M){return function(){return M}},pd=function(){try{var w=cl(Object,"defineProperty");return w({},"",{}),w}catch{}}(),Iv=pd?function(w,M){return pd(w,"toString",{configurable:!0,enumerable:!1,value:xv(M),writable:!0})}:jl,PT=Date.now,vp=function(M){var L=0,D=0;return function(){var k=PT(),Y=16-(k-D);if(D=k,Y>0){if(++L>=800)return arguments[0]}else L=0;return M.apply(void 0,arguments)}},Ev=vp(Iv),Bg=function(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=9007199254740991},yp=function(M){return M!=null&&Bg(M.length)&&!ep(M)},Pv=function(M){return vs(M)&&yp(M)},Av=function(M,L){return Ev(hp(M,L,jl),M+"")}(function(w,M){return Pv(w)?wv(w,M):[]}),Fg=Av;function bp(w,M){return M instanceof RegExp?"__REGEXP "+M.toString():M}function En(w,M,L){var D;M===void 0&&(M={});var k={};return In(D=Vo(w)).call(D,function(Y){var Oe=w[Y].type,ue=L?"In "+L+", ":"";if(M[Y]===void 0){if(w[Y].required===!1)return void(k[Y]=M[Y]);throw new yo(ue+'param "'+Y+'" is required',{key:Y},"required")}var Pt=AT[Oe];if(Pt&&!Pt(M,Y,w[Y]))throw new yo(ue+'param "'+Y+'" expects '+Wo(w[Y],bp),{key:Y,value:M[Y]},Wo(w[Y]));k[Y]=M[Y]}),k}var AT={string:function(M,L,D){var k=D.allowEmpty,Y=D.max,Oe=D.min,ue=D.regExp,Pt=M[L];return typeof Pt=="string"&&(k!==!1||Pt!=="")&&!(typeof Y=="number"&&Pt.length>Y)&&!(typeof Oe=="number"&&Pt.length<Oe)&&!(xg(ue)&&!ue.test(Pt))},number:function(M,L,D){var k=D.min,Y=D.max,Oe=M[L];return typeof Oe=="number"&&!(typeof k=="number"&&Oe<k)&&!(typeof Y=="number"&&Oe>Y)},boolean:function(M,L){return typeof M[L]=="boolean"},enum:function(M,L,D){var k=ip(D),Y=M[L];return!k||Ca(k).call(k,Y)>-1},array:function(M,L,D){var k,Y=D.itemType,Oe=D.rules,ue=D.min,Pt=D.max,jt=ip(D),ur=M[L];return!!hs(ur)&&!(typeof Pt=="number"&&ur.length>Pt)&&!(typeof ue=="number"&&ur.length<ue)&&!(Y&&Y!=="enum"&&!sT(ur).call(ur,function(gr){return typeof gr===Y}))&&(Y!=="enum"||!jt||!Fg.apply(void 0,ki(k=[ur]).call(k,jt)).length)&&(Oe&&In(ur).call(ur,function(gr,yr){return En(Oe,gr,L+"["+yr+"]")}),!0)},object:function(M,L,D){var k=D.rules,Y=M[L];return k&&En(k,Y,L),!0}},Dl=cl(Ai,"Set"),OT=function(){},Wr=function(M){var L=-1,D=Array(M.size);return M.forEach(function(k){D[++L]=k}),D},RT=Dl&&1/Wr(new Dl([,-0]))[1]==1/0?function(w){return new Dl(w)}:OT,$l=RT,NT=function(M,L,D){var k=-1,Y=kv,Oe=M.length,ue=!0,Pt=[],jt=Pt;if(D)ue=!1,Y=_v;else if(Oe>=200){var ur=L?null:$l(M);if(ur)return Wr(ur);ue=!1,Y=gp,jt=new Pg}else jt=L?[]:Pt;e:for(;++k<Oe;){var gr=M[k],yr=L?L(gr):gr;if(gr=D||gr!==0?gr:0,ue&&yr==yr){for(var Mr=jt.length;Mr--;)if(jt[Mr]===yr)continue e;L&&jt.push(yr),Pt.push(gr)}else Y(jt,yr,D)||(jt!==Pt&&jt.push(yr),Pt.push(gr))}return Pt},Tp=function(M){return M&&M.length?NT(M):[]},Lg=`	
\v\f\r                　\u2028\u2029\uFEFF`,Ov=Ce("".replace),Sp="["+Lg+"]",BT=RegExp("^"+Sp+Sp+"*"),jg=RegExp(Sp+Sp+"*$"),Mp=function(w){return function(M){var L=Oa(pr(M));return 1&w&&(L=Ov(L,BT,"")),2&w&&(L=Ov(L,jg,"")),L}},Cp={start:Mp(1),end:Mp(2),trim:Mp(3)}.trim,fd=c.parseInt,Rv=c.Symbol,kp=Rv&&Rv.iterator,Nv=/^[+-]?0x/i,md=Ce(Nv.exec),Dg=fd(Lg+"08")!==8||fd(Lg+"0x16")!==22||kp&&!d(function(){fd(Object(kp))})?function(M,L){var D=Cp(Oa(M));return fd(D,L>>>0||(md(Nv,D)?16:10))}:fd;Vr({global:!0,forced:parseInt!=Dg},{parseInt:Dg});var As,ko=nr.parseInt,_p=(As=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return As()+As()+As()+As()+As()+As()+As()+As()});function ys(w){var M;return li(M=Vo(w)).call(M,function(L){return!(+L>=0)})}function Os(w,M){var L,D=li(L=Vo(w)).call(L,function(k){return w[k]==M});return D.length>0?D[0]:void 0}function Lo(w,M){if(M===void 0&&(M="-"),!w)throw new rc("No sessionId",{},400);var L=Ca(w).call(w,M);if(L===-1)throw new rc("Can not find conjunctions",{},400);var D=Mo(w).call(w,0,L);return{accid:Mo(w).call(w,L+1),scene:D==="super_team"?"superTeam":D}}var $g=TypeError,sa=Object.getOwnPropertyDescriptor,Bv=Fe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(w){return w instanceof TypeError}}()?function(w,M){if(Ya(w)&&!sa(w,"length").writable)throw $g("Cannot set read only .length");return w.length=M}:function(w,M){return w.length=M},FT=TypeError,wp=function(w,M){if(!delete w[M])throw FT("Cannot delete property "+Nr(M)+" of "+Nr(w))},LT=$s("splice"),jT=Math.max,xp=Math.min;Vr({target:"Array",proto:!0,forced:!LT},{splice:function(M,L){var D,k,Y,Oe,ue,Pt,jt=jn(this),ur=Ia(jt),gr=ns(M,ur),yr=arguments.length;for(yr===0?D=k=0:yr===1?(D=0,k=ur-gr):(D=yr-2,k=xp(jT(Ls(L),0),ur-gr)),uu(ur+D-k),Y=fu(jt,k),Oe=0;Oe<k;Oe++)(ue=gr+Oe)in jt&&Bi(Y,Oe,jt[ue]);if(Y.length=k,D<k){for(Oe=gr;Oe<ur-k;Oe++)Pt=Oe+D,(ue=Oe+k)in jt?jt[Pt]=jt[ue]:wp(jt,Pt);for(Oe=ur;Oe>ur-k+D;Oe--)wp(jt,Oe-1)}else if(D>k)for(Oe=ur-k;Oe>gr;Oe--)Pt=Oe+D-1,(ue=Oe+k-1)in jt?jt[Pt]=jt[ue]:wp(jt,Pt);for(Oe=0;Oe<D;Oe++)jt[Oe+gr]=arguments[Oe+2];return Bv(jt,ur-k+D),Y}});var DT=Uo("Array").splice,Ug=Array.prototype,qg=function(w){var M=w.splice;return w===Ug||er(Ug,w)&&M===Ug.splice?DT:M},$T=function(w,M,L,D){try{return D?M(Vn(L)[0],L[1]):M(L)}catch(k){Ou(w,"throw",k)}},Ip=Array,Fv=!Gm(function(w){Array.from(w)});Vr({target:"Array",stat:!0,forced:Fv},{from:function(M){var L=jn(M),D=Uc(this),k=arguments.length,Y=k>1?arguments[1]:void 0,Oe=Y!==void 0;Oe&&(Y=jo(Y,k>2?arguments[2]:void 0));var ue,Pt,jt,ur,gr,yr,Mr=Jc(L),xr=0;if(!Mr||this===Ip&&fm(Mr))for(ue=Ia(L),Pt=D?new this(ue):Ip(ue);ue>xr;xr++)yr=Oe?Y(L[xr],xr):L[xr],Bi(Pt,xr,yr);else for(gr=(ur=Ws(L,Mr)).next,Pt=D?new this:[];!(jt=de(gr,ur)).done;xr++)yr=Oe?$T(ur,Y,[jt.value,xr],!0):jt.value,Bi(Pt,xr,yr);return Pt.length=xr,Pt}});var Ep=nr.Array.from,gd=Jc;function Lv(w,M){var L,D=ga!==void 0&&gd(w)||w["@@iterator"];if(D)return Oo(L=(D=D.call(w)).next).call(L,D);if(hs(w)||(D=function(Oe,ue){var Pt;if(Oe){if(typeof Oe=="string")return _c(Oe,ue);var jt=Mo(Pt=Object.prototype.toString.call(Oe)).call(Pt,8,-1);if(jt==="Object"&&Oe.constructor&&(jt=Oe.constructor.name),jt==="Map"||jt==="Set")return Ep(Oe);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return _c(Oe,ue)}}(w))||M&&w&&typeof w.length=="number"){D&&(w=D);var k=0;return function(){return k>=w.length?{done:!0}:{done:!1,value:w[k++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _c(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,D=new Array(M);L<M;L++)D[L]=w[L];return D}var Va,jv=function(){function w(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var M=w.prototype;return M.addTimer=function(D,k,Y){k===void 0&&(k=0),Y===void 0&&(Y=1);var Oe=new Date().getTime(),ue=this.id;return this.timerList.push({id:ue,loop:Y,count:0,timeout:Oe+k,interval:k,callback:D}),this.id++,this.checkTimer(Oe),ue},M.checkTimer=function(D){if(D===void 0&&(D=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var k,Y,Oe=0,ue=Lv(this.timerList);!(k=ue()).done;){var Pt=k.value;(Oe===0||Oe>Pt.timeout)&&(Oe=Pt.timeout)}this.timerList.length!==0&&(this.timer===null||Oe<this.timeout||this.timeout<D)&&(this.timer=ho(Oo(Y=this.nowTime).call(Y,this),Oe-D),this.timeout=Oe)}},M.nowTime=function(){for(var D,k=new Date().getTime(),Y=Lv(this.timerList);!(D=Y()).done;){var Oe=D.value;k>=Oe.timeout&&(Oe.callback(),Oe.count++,Oe.timeout=k+Oe.interval)}this.clerTime(),this.checkTimer(k)},M.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},M.deleteTimer=function(D){for(var k=this.timerList.length-1;k>=0;k--){var Y;this.timerList[k].id===D&&qg(Y=this.timerList).call(Y,k,1)}},M.removeFinished=function(){for(var D=this.timerList.length-1;D>=0;D--){var k,Y=this.timerList[D];Y.loop>=0&&Y.count>=Y.loop&&qg(k=this.timerList).call(k,D,1)}},M.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},w}(),Dv=function(){function w(L){this.core=L}var M=w.prototype;return M.request=function(D,k){var Y=this,Oe=new Date().getTime();return Ho.request(D,k).catch(function(ue){var Pt,jt,ur=ue;throw Y.core.reporter.reportTraceStart("exceptions",{user_id:Y.core.options.account,trace_id:(jt=(Pt=Y.core)===null||Pt===void 0?void 0:Pt.socket)===null||jt===void 0?void 0:jt.sessionId,start_time:Oe,action:1}),Y.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof ur.code=="number"?ur.code:0,description:ur.message||""+ur.code,operation_type:0,target:D,context:k?Wo(k):""}),Y.core.reporter.reportTraceEnd("exceptions",1),ue})},M.uploadFile=function(D){var k=this,Y=new Date().getTime();return Ho.uploadFile(D).catch(function(Oe){var ue,Pt,jt=Oe;k.core.reporter.reportTraceStart("exceptions",{user_id:k.core.options.account,trace_id:(Pt=(ue=k.core)===null||ue===void 0?void 0:ue.socket)===null||Pt===void 0?void 0:Pt.sessionId,start_time:Y,action:1});var ur=Ho.platform==="BROWSER"?D.chunkUploadHost:D.commonUploadHost?D.commonUploadHost+"/"+(D.nosToken&&D.nosToken.bucket):"https://nos.netease.com/nim";throw k.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof jt.code=="number"?jt.code:0,description:jt.message||""+jt.code,operation_type:1,target:ur}),k.core.reporter.reportTraceEnd("exceptions",1),Oe})},w}();(function(w){w[w.ACTIVE=1]="ACTIVE",w[w.KICKED=2]="KICKED",w[w.OFFLINE=3]="OFFLINE"})(Va||(Va={}));var di=window&&ep(window.addEventListener)&&ep(window.removeEventListener),$v=function(w){function M(D,k){var Y;(Y=w.call(this)||this).status="unconnected",Y.linkUrls=[],Y.eventBus=new Hi,Y.packetSer=1,Y.retryCount=0,Y.reconnectTimer=0,Y.backoff=new xs({max:8e3,min:1600,jitter:.01}),Y.sendingCmdMap=new ec,Y.pingTimer=0,Y.config=dv,Y.abtInfo={},En({linkUrls:{type:"array",itemType:"string",required:!1}},D),Y.options=Cr(Cr({},H1),D),Y.adapters=new Dv(s(Y));var Oe=Ho.localStorage.getItem("__NIM_DEVC_ID__");Y.options.isFixedDeviceId?(Oe=Ho.localStorage.getItem("__NIM_DEVC_ID__")||_p(),Ho.localStorage.setItem("__NIM_DEVC_ID__",Oe)):Oe=_p(),Y.config=Cr(Cr(Cr({},dv),k),{deviceId:Oe}),Y.timerManager=new jv,Y.logger=new np(Y.options.debugLevel,Y.options.account);var ue=Ho.getSystemInfo();return Y.reporter=new nT({common:{app_key:D.appkey,dev_id:Oe,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:ue.os,os_ver:ue.osVer,model:ue.hostEnvVer,manufactor:ue.hostEnv,host_env:ue.hostEnv,host_info:ue.hostInfo,host_env_ver:ue.hostEnvVer},request:Ho.request,logger:Y.logger,autoStart:Ho.platform==="BROWSER"}),Ho.setLogger(Y.logger),Y.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",D.appkey),Y}No(M,w);var L=M.prototype;return L.emit=function(k){try{for(var Y,Oe,ue=ia(),Pt=arguments.length,jt=new Array(Pt>1?Pt-1:0),ur=1;ur<Pt;ur++)jt[ur-1]=arguments[ur];var gr=(Y=w.prototype.emit).call.apply(Y,ki(Oe=[this,k]).call(Oe,jt)),yr=ia()-ue;return yr>=10&&this.logger.warn("Core::emit event: "+k+" process takes: "+yr+"ms"),gr}catch(Mr){return this.logger.error("Core::emit event: "+k+". Error: "+Mr),!1}},L.connect=function(k,Y){return k===void 0&&(k={}),Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur,gr,yr;return ir.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(En({linkUrls:{type:"array",itemType:"string",required:!1}},k),/^(unconnected|waitReconnect)$/.test(this.status)){xr.next=5;break}return ue="Core socket status is "+this.status+", and would not connect",this.logger.warn(ue),xr.abrupt("return",uo.reject(ue));case 5:this.status="connecting",k.linkUrls&&k.linkUrls.length>0&&(this.linkUrls=ki(Pt=k.linkUrls).call(Pt,this.linkUrls),this.linkUrls=Tp(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push(pv),jt=0;case 9:if(!(jt<this.linkUrls.length)){xr.next=32;break}return ur=this.linkUrls[jt],gr=new Date().getTime(),xr.prev=12,xr.next=15,this.doConnect(ur);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+ur),this.abtRequest(),xr.abrupt("return",ur);case 21:xr.prev=21,xr.t0=xr.catch(12),yr=xr.t0,Y&&Y(yr,ur),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:gr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof yr.code=="number"?yr.code:0,description:yr.message||""+yr.code,operation_type:0,target:ur}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+ur,xr.t0);case 29:jt++,xr.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect(Va.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(Va.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return xr.stop()}},Oe,this,[[12,21]])}))},L.doConnect=function(k){var Y=this;return new uo(function(Oe,ue){var Pt;Y.socket=new Cg(Y,k,Y.logger),Y.socket.on("connect",function(){Y.logger.log("socket on connect",k),Oe()}),Y.socket.on("message",Oo(Pt=Y.onMessage).call(Pt,Y)),Y.socket.on("disconnect",function(jt){Y.logger.log("core:: socket on disconnect",jt),Y.doDisconnect(Va.OFFLINE,"SocketOnDisconnect")}),Y.socket.on("handshakeFailed",function(){Y.logger.warn("core:: socket handshake failed"),ue(new rc("handshake failed",{},408))})})},L.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},L.doDisconnect=function(k,Y){if(this.logger.log("doDisconnect: type "+k+", description "+Y),this.status!=="unconnected"){this.markAllCmdInvaild(new rc("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var Oe=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(k===Va.ACTIVE||Oe)this.logger.log("doDisconnect: emit disconnect, type "+k,Oe),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(k===Va.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var ue=typeof Y=="string"?{reason:"unknow",message:Y}:Y;this.eventBus.emit("kicked",ue),this.emit("kicked",ue),this.destroyOnlineListener()}else k===Va.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},L.attempToReconnect=function(){var k=this;if(this.status!=="waitReconnect"){var Y=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Y),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Y}),this.emit("willReconnect",{retryCount:this.retryCount,duration:Y}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=ho(function(){k.status==="waitReconnect"?k.connect({isAutoReconnect:!0}).catch(function(){k.logger.error("core::attempToReconnect failed "+k.retryCount)}):k.logger.warn("doDisconnect: reconnectTimer status is "+k.status+", would not go on reconnecting")},Y)}else this.logger.warn("doDisconnect: already is waiting reconnect")},L.sendCmd=function(k,Y,Oe){var ue=this;if(this.status!=="logined"&&k!=="login"&&k!=="chatroomLogin"&&k!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+k),uo.reject({cmd:k,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return uo.reject("No_socket");var Pt=k!=="heartbeat",jt=Pt?this.packetSer++:0,ur=function(zr,Hr,Kr,kn){var Yn=Pl[zr];if(!Yn)return Kr.error("createCmd:: can not find cmd config: ",zr),null;var Hn,xo={SER:Hr,SID:Yn.sid,CID:Yn.cid,Q:[]};return Yn.params&&kn&&In(Hn=Yn.params).call(Hn,function(Ln){var _r=kn[Ln.name];if(!bv(_r)){var Pn=Ln.type,Fn=Ln.reflectMapper;switch(Ln.type){case"PropertyArray":Pn="ArrayMable",_r=To(_r).call(_r,function(_n){return{t:"Property",v:Fn?sd(_n,Fn):_n}});break;case"Property":_r=Fn?sd(_r,Fn):_r;break;case"Bool":case"bool":_r=_r?"true":"false"}xo.Q.push({t:Pn,v:_r})}}),{packet:xo,isNoResponse:Yn.isNoResponse||!1}}(k,jt,this.logger,Y);if(!ur){var gr="SendCmd "+jt+" "+k+" error";return this.logger.error(gr),uo.reject(gr)}var yr=ur.packet,Mr=ur.isNoResponse,xr=Wo(yr);Pt&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",k,"ser:"+jt,xr):this.logger.log("core::sendCmd",k,"ser:"+jt));var Fr=new Date().getTime();return new uo(function(Dr,zr){ue.sendingCmdMap.set(jt,{cmd:k,params:Y,callback:[Dr,zr],timer:Mr?null:ho(function(){var Kr,kn=new rp(504,k,"Packet Timeout",new Date().getTime(),{message:"ser "+jt+" cmd "+k+" timeout"});kn.callFunc="sendCmd",ue.markCmdInvalid(jt,kn,k),ue.reporter.reportTraceStart("exceptions",{user_id:ue.options.account,trace_id:(Kr=ue.socket)===null||Kr===void 0?void 0:Kr.sessionId,start_time:Fr,action:2}),ue.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:yr.SID+"-"+yr.CID,context:""+yr.SER}),ue.reporter.reportTraceEnd("exceptions",1)},Oe&&Oe.timeout?Oe.timeout:ue.config.timeout)});try{ue.socket.send(xr)}catch(Kr){var Hr=new rp(415,k,Kr&&Kr.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Kr});Hr.callFunc="sendCmd",ue.markCmdInvalid(jt,Hr,k),zr(Kr)}})},L.onMessage=function(k){var Y=Tv(k,this.logger);if(Y){var Oe=Y.raw.ser;if(Y.error&&this.logger.error("core:onMessage packet error",Y.raw.sid+"_"+Y.raw.cid+", ser:"+Oe+",",Y.error),!Y.notFound)return Y.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+Oe,Y.cmd,Y.content):this.logger.log("imsocket::recvCmd ser:"+Oe,Y.cmd)),Y.__receiveTime=ia(),Y;this.logger.warn("core::onMessage packet not found",Y.raw.sid+"_"+Y.raw.cid+", ser:"+Oe)}},L.markCmdInvalid=function(k,Y,Oe){var ue=this.sendingCmdMap.get(k);if(ue){var Pt=ue.callback,jt=ue.timer;jt&&clearTimeout(jt),this.sendingCmdMap.delete(k),this.logger.warn("packet "+k+", "+Oe+" is invalid:",Y),Pt[1](Y)}},L.markAllCmdInvaild=function(k){var Y;this.logger.log("markAllCmdInvaild"),In(Y=this.sendingCmdMap).call(Y,function(Oe){var ue=Oe.callback,Pt=Oe.timer;Pt&&clearTimeout(Pt),ue[1](k)}),this.sendingCmdMap.clear()},L.ping=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y=this;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return clearTimeout(this.pingTimer),ue.prev=1,ue.next=4,this.sendCmd("heartbeat");case 4:ue.next=14;break;case 6:return ue.prev=6,ue.t0=ue.catch(1),ue.next=10,this.testHeartBeat5Timeout();case 10:if(!ue.sent){ue.next=14;break}return this.doDisconnect(Va.OFFLINE,"PingError"),ue.abrupt("return");case 14:this.pingTimer=ho(function(){Y.ping()},3e4);case 15:case"end":return ue.stop()}},k,this,[[1,6]])}))},L.testHeartBeat5Timeout=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:clearTimeout(this.pingTimer),Y=0;case 2:if(!(Y<5)){ue.next=15;break}return ue.prev=3,ue.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return ue.abrupt("return",!1);case 9:ue.prev=9,ue.t0=ue.catch(3),this.logger.debug("core:: test heartbeat "+Y+" Timeout");case 12:Y++,ue.next=2;break;case 15:return ue.abrupt("return",!0);case 16:case"end":return ue.stop()}},k,this,[[3,9]])}))},L.initOnlineListener=function(){var k,Y;this.onlineListener||(di?(this.onlineListener=Oo(k=function(){this.status==="logined"&&this.ping()}).call(k,this),this.offlineListener=Oo(Y=function(){this.logger.log("offline"),this.doDisconnect(Va.OFFLINE,"OfflineListener")}).call(Y,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},L.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},L.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(Va.ACTIVE,"UserActiveDisconnect"),uo.resolve();case"unconnected":case"destroyed":return uo.resolve()}},L.destroy=function(){var k=this;return this.disconnect().then(function(){k.status="destroyed",k.removeAllListeners(),k.eventBus.removeAllListeners(),k.reporter.destroy(),k.connect=function(){return uo.resolve()},k.disconnect=function(){return uo.resolve()},k.destroy=function(){return uo.resolve()}})},L.abtRequest=function(){var k,Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(this.options.isAbtestEnable){ur.next=2;break}return ur.abrupt("return");case 2:if(!this.abtInfo.experiments){ur.next=4;break}return ur.abrupt("return");case 4:if(this.options.abtestUrl){ur.next=6;break}return ur.abrupt("return");case 6:return ur.prev=6,ur.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:ue=ur.sent,ur.next=15;break;case 12:ur.prev=12,ur.t0=ur.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((Y=(k=ue==null?void 0:ue.data)===null||k===void 0?void 0:k.data)===null||Y===void 0?void 0:Y.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:To(Pt=this.abtInfo.experiments).call(Pt,function(gr){return{experimentKey:gr.experimentKey,schemeKey:gr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return ur.stop()}},Oe,this,[[6,12]])}))},M}(Hi);$v.setAdapters=function(M){Cr(Ho,M)};var Uv={"1_2":"heartbeat","2_3":"login","2_5":"kicked","2_6":"logout","2_7":"multiPortLogin","2_8":"kick"},qv={login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appkey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,sdkType:41,userAgent:42,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,customTag:38,connectionId:102,ip:103,time:109},aosPushInfo:{pushType:110,hasTokenPreviously:111}},hd=ri(qv),Vv={login:{sid:2,cid:3,service:"auth",params:[{type:"Property",name:"login",reflectMapper:qv.login}],response:[{type:"Property",name:"loginRes",reflectMapper:hd.loginRes},{type:"PropertyArray",name:"loginPorts",reflectMapper:hd.loginPort},{type:"Property",name:"aosPushInfo",reflectMapper:hd.aosPushInfo}]},logout:{sid:2,cid:6,service:"auth"},heartbeat:{sid:1,cid:2,service:"auth"},kicked:{sid:2,cid:5,service:"auth",response:[{type:"Number",name:"clientType"},{type:"Number",name:"reason"},{type:"String",name:"ext"},{type:"Number",name:"customClientType"}]},multiPortLogin:{sid:2,cid:7,service:"auth",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",reflectMapper:hd.loginPort}]},kick:{sid:2,cid:8,service:"auth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]}},bs=Array.isArray,Pp=function(M){return typeof M=="symbol"||vs(M)&&yc(M)=="[object Symbol]"},Vg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ap=/^\w*$/,Hg=function(M,L){if(bs(M))return!1;var D=typeof M;return!(D!="number"&&D!="symbol"&&D!="boolean"&&M!=null&&!Pp(M))||Ap.test(M)||!Vg.test(M)||L!=null&&M in Object(L)};function zg(w,M){if(typeof w!="function"||M!=null&&typeof M!="function")throw new TypeError("Expected a function");var L=function(){var D=arguments,k=M?M.apply(this,D):D[0],Y=L.cache;if(Y.has(k))return Y.get(k);var Oe=w.apply(this,D);return L.cache=Y.set(k,Oe)||Y,Oe};return L.cache=new(zg.Cache||fp),L}zg.Cache=fp;var UT=zg,qT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,VT=/\\(\\)?/g,Ul=function(M){var L=UT(M,function(k){return D.size===500&&D.clear(),k}),D=L.cache;return L}(function(w){var M=[];return w.charCodeAt(0)===46&&M.push(""),w.replace(qT,function(L,D,k,Y){M.push(k?Y.replace(VT,"$1"):D||L)}),M}),Op=Ul,Hv=Qi?Qi.prototype:void 0,Kg=Hv?Hv.toString:void 0,zv=function w(M){if(typeof M=="string")return M;if(bs(M))return Og(M,w)+"";if(Pp(M))return Kg?Kg.call(M):"";var L=M+"";return L=="0"&&1/M==-1/0?"-0":L},HT=function(M){return M==null?"":zv(M)},vd=function(M,L){return bs(M)?M:Hg(M,L)?[M]:Op(HT(M))},dl=function(M){if(typeof M=="string"||Pp(M))return M;var L=M+"";return L=="0"&&1/M==-1/0?"-0":L},Wg=function(M,L){for(var D=0,k=(L=vd(L,M)).length;M!=null&&D<k;)M=M[dl(L[D++])];return D&&D==k?M:void 0},Oi=function(M,L,D){var k=M==null?void 0:Wg(M,L);return k===void 0?D:k},Rs={debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,lbsUrls:["https://lbs.netease.im/lbs/webconf.jsp"],linkUrl:pv,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},Rp={},Fa=function(w){function M(D,k){var Y,Oe;k===void 0&&(k={serverConfig:{},syncOptions:{},sessionConfig:{}}),(Oe=w.call(this,D)||this).instanceName="NIM",Oe.account="",Oe.options={},Oe.auth={},Oe.offlinePush={},Oe.sync={},Oe.msg={},Oe.msgLog={},Oe.session={},Oe.cloudSession={},Oe.misc={},Oe.user={},Oe.friend={},Oe.systemMessage={},Oe.team={},Oe.event={},Oe.msgExtend={},Oe.cloudStorage={},Oe.passThrough={},Oe.superTeam={},Oe.plugin={},Oe.signaling={},Oe.setOptions(D),qa({cmdMap:Uv,cmdConfig:Vv});var ue=null;return In(Y=Vo(Rp)).call(Y,function(Pt){var jt=Rp[Pt];Pt==="sync"?ue=jt:Oe[Pt]=Pt==="session"?new jt(s(Oe),k.sessionConfig):Pt==="cloudStorage"?new jt(s(Oe),Cr({storageKeyPrefix:Oe.instanceName},k.serverConfig,k.cloudStorageConfig)):new jt(s(Oe))}),ue&&(Oe.sync=new ue(s(Oe),k.syncOptions)),M.instance=s(Oe),Oe}No(M,w),M.getInstance=function(k,Y){if(!M.instance){if(k)return new M(k,Y);throw new Error("Instance not exist, please input options")}if(k){if(M.instance.options.account===k.account&&M.instance.options.appkey===k.appkey)return M.instance.setOptions(k),M.instance;throw new Error("Unexpected login")}return M.instance};var L=M.prototype;return L.setOptions=function(k){En({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},k),this.logger.log("NIM::setOptions options is",k),this.account=k.account,this.options=Cr(Cr({},Rs),k)},L.connect=function(k){k===void 0&&(k={});var Y=Ja(null,{connect:{get:function(){return w.prototype.connect}}});return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt=this;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){gr.next=4;break}return ue="NIM status is "+this.status+", and would not connect",this.logger.warn(ue),gr.abrupt("return",uo.reject(ue));case 4:return this.reporter.reportTraceCancel("login"),this.reporter.reportTraceStart("login",{user_id:this.options.account,action:k.isAutoReconnect?"auto_login":"manual_login"}),this.reporter.reportTraceUpdateV2("login",{code:0,description:Wo(Cr(Cr({},this.options),{account:"***",token:"***"})),operation_type:"conf_init",succeed:!0,duration:0,target:""}),gr.next=9,this.getLbsInfos();case 9:return gr.prev=9,gr.next=12,Y.connect.call(this,k,function(yr,Mr){jt.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Mr,code:yr.code||408,description:"ws_handshake_failed:"+yr.message,succeed:!1})});case 12:(Pt=gr.sent)&&this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Pt,code:200,succeed:!0}),gr.next=20;break;case 16:throw gr.prev=16,gr.t0=gr.catch(9),this.reporter.reportTraceEnd("login",!1),gr.t0;case 20:return gr.next=22,this.login(k.isAutoReconnect);case 22:case"end":return gr.stop()}},Oe,this,[[9,16]])}))},L.login=function(k){return k===void 0&&(k=!1),Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.prev=0,jt.next=3,this.auth.doLogin(k);case 3:Oe=jt.sent,this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:200,succeed:!0}),this.reporter.reportTraceEnd("login",!0),this.status="logined",jt.next=20;break;case 9:if(jt.prev=9,jt.t0=jt.catch(0),ue=jt.t0,this.logger.warn("nim login:: login failed",jt.t0),this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:ue.code||0,succeed:!1,description:ue.message}),this.reporter.reportTraceEnd("login",!1),this.retryCount!==0){jt.next=18;break}throw this.doDisconnect(Va.ACTIVE,"FailedToInitializeLogin"),jt.t0;case 18:return this.doDisconnect(Va.OFFLINE,"ReconnectLoginFailed"),jt.abrupt("return");case 20:return jt.prev=20,jt.next=23,this.cloudStorage.init();case 23:jt.next=28;break;case 25:jt.prev=25,jt.t1=jt.catch(20),this.logger.error("NIM:login cloudStorage init failed ",jt.t1);case 28:if(this.eventBus.emit("logined",Oe),this.emit("logined",Oe),this.logger.log("login done"),this.resetConnectStatus(),!this.sync||!this.sync.doSync){jt.next=35;break}return jt.next=35,this.sync.doSync();case 35:this.ping();case 36:case"end":return jt.stop()}},Y,this,[[0,9],[20,25]])}))},L.onMessage=function(k){var Y,Oe,ue=w.prototype.onMessage.call(this,k);if(ue){var Pt=ue.raw.ser,jt=this.sendingCmdMap.get(Pt);if(jt&&jt.cmd===ue.cmd){var ur=jt.callback,gr=jt.timer,yr=jt.params;if(clearTimeout(gr),ue.params=yr,this.sendingCmdMap.delete(Pt),ue.cmd==="heartbeat")return void ur[0]();var Mr=(Y=this[ue.service])===null||Y===void 0?void 0:Y.process(ue);Mr&&typeof Mr.then=="function"?Mr.then(function(xr){ur[0](xr)}).catch(function(xr){ur[1](xr)}):(this.logger.log("imsocket:: handlerFn without promise",ue.service,ue.cmd),ur[0]())}else(Oe=this[ue.service])===null||Oe===void 0||Oe.process(ue)}},L.getLbsInfos=function(){var k;return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt,jt,ur,gr,yr,Mr,xr;return ir.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return Oe=this.options.lbsUrls[0],ue=Ca(Oe).call(Oe,"?")>-1?"&":"?",Pt=Oe+ue+"k="+this.options.appkey+"&id="+this.options.account+"&sv=180&pv=1&networkType=0",Dr.prev=3,this.logger.log("getLbsInfos ",Pt),Dr.next=7,this.adapters.request(Pt,{method:"GET",dataType:"json",timeout:1e4});case 7:if((ur=Dr.sent).status===200&&ur.data){Dr.next=11;break}throw this.logger.error("getLbsInfos::error status",ur.status,ur),new Error("getLbsInfos failed, status "+ur.status);case 11:this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Pt,code:200,succeed:!0}),gr=ur.data,yr=[this.options.linkUrl],Oi(gr,"common.link")&&(yr=ki(Mr=Oi(gr,"common.link")).call(Mr,yr)),Oi(gr,'common["link.default"]')&&(yr=ki(yr).call(yr,Oi(gr,'common["link.default"]'))),this.linkUrls=Tp(yr),ur.data["nos-chunk"]&&((k=this.cloudStorage)===null||k===void 0||k.setOptions({chunkUploadHost:ur.data["nos-chunk"]})),this.logger.log("getLbsInfos success, socket link:",Mo(jt=this.linkUrls).call(jt,0),"chunkUploadHost: ",ur.data["nos-chunk"]),Dr.next=27;break;case 21:Dr.prev=21,Dr.t0=Dr.catch(3),xr=Dr.t0,this.logger.error("getLbsInfos::error",xr),this.linkUrls=[this.options.linkUrl],this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Pt,description:xr.message,code:xr.code||0,succeed:!1});case 27:case"end":return Dr.stop()}},Y,this,[[3,21]])}))},L.disconnect=function(){var k=this;switch(this.status){case"logined":return this.sendCmd("logout",void 0,{timeout:1e3}).then(function(){w.prototype.doDisconnect.call(k,Va.ACTIVE,"UserActiveDisconnect")}).catch(function(Y){k.logger.error("NIM::disconnect sendCmd:logout error",Y),w.prototype.doDisconnect.call(k,Va.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return w.prototype.doDisconnect.call(this,Va.ACTIVE,"UserActiveDisconnect"),uo.resolve();case"unconnected":case"destroyed":return uo.resolve()}},L.destroy=function(){return M.instance=null,w.prototype.destroy.call(this)},L.kick=function(k){return En({deviceIds:{type:"array",itemType:"string"}},k),this.auth.kick(k)},M.registerService=function(k,Y){Rp[Y]=k},M}($v);Fa.instance=null;var Kv=Math.min,Gg=[].lastIndexOf,Qg=!!Gg&&1/[1].lastIndexOf(1,-0)<0,zT=Ui("lastIndexOf"),Jg=Qg||!zT?function(M){if(Qg)return T(Gg,this,arguments)||0;var L=ar(this),D=Ia(L),k=D-1;for(arguments.length>1&&(k=Kv(k,Ls(arguments[1]))),k<0&&(k=D+k);k>=0;k--)if(k in L&&L[k]===M)return k||0;return-1}:Gg;Vr({target:"Array",proto:!0,forced:Jg!==[].lastIndexOf},{lastIndexOf:Jg});var KT=Uo("Array").lastIndexOf,Np=Array.prototype,Yg=function(w){var M=w.lastIndexOf;return w===Np||er(Np,w)&&M===Np.lastIndexOf?KT:M},ql=o(function(w,M){(function(){var L={function:!0,object:!0}[typeof window]&&window||this,D=M,k=w&&!w.nodeType&&w,Y=D&&k&&typeof e=="object"&&e;!Y||Y.global!==Y&&Y.window!==Y&&Y.self!==Y||(L=Y);var Oe=Math.pow(2,53)-1,ue=/\bOpera/,Pt=Object.prototype,jt=Pt.hasOwnProperty,ur=Pt.toString;function gr(Kr){return(Kr=String(Kr)).charAt(0).toUpperCase()+Kr.slice(1)}function yr(Kr){return Kr=zr(Kr),/^(?:webOS|i(?:OS|P))/.test(Kr)?Kr:gr(Kr)}function Mr(Kr,kn){for(var Yn in Kr)jt.call(Kr,Yn)&&kn(Kr[Yn],Yn,Kr)}function xr(Kr){return Kr==null?gr(Kr):ur.call(Kr).slice(8,-1)}function Fr(Kr){return String(Kr).replace(/([ -])(?!$)/g,"$1?")}function Dr(Kr,kn){var Yn=null;return function(xo,Ln){var _r=-1,Pn=xo?xo.length:0;if(typeof Pn=="number"&&Pn>-1&&Pn<=Oe)for(;++_r<Pn;)Ln(xo[_r],_r,xo);else Mr(xo,Ln)}(Kr,function(Hn,xo){Yn=kn(Yn,Hn,xo,Kr)}),Yn}function zr(Kr){return String(Kr).replace(/^ +| +$/g,"")}var Hr=function Kr(kn){var Yn=L,Hn=kn&&typeof kn=="object"&&xr(kn)!="String";Hn&&(Yn=kn,kn=null);var xo=Yn.navigator||{},Ln=xo.userAgent||"";kn||(kn=Ln);var _r,Pn,Fn=Hn?!!xo.likeChrome:/\bChrome\b/.test(kn)&&!/internal|\n/i.test(ur.toString()),_n="Object",bn=Hn?_n:"ScriptBridgingProxyObject",Nn=Hn?_n:"Environment",qn=Hn&&Yn.java?"JavaPackage":xr(Yn.java),no=Hn?_n:"RuntimeObject",ao=/\bJava/.test(qn)&&Yn.java,Ko=ao&&xr(Yn.environment)==Nn,Po=ao?"a":"α",Da=ao?"b":"β",Co=Yn.document||{},Ao=Yn.operamini||Yn.opera,oa=ue.test(oa=Hn&&Ao?Ao["[[Class]]"]:xr(Ao))?oa:Ao=null,Lc=kn,Fo=[],hc=null,Ka=kn==Ln,fo=Ka&&Ao&&typeof Ao.version=="function"&&Ao.version(),aa=function(Na){return Dr(Na,function(ba,wa){return ba||RegExp("\\b"+(wa.pattern||Fr(wa))+"\\b","i").exec(kn)&&(wa.label||wa)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Wn=function(Na){return Dr(Na,function(ba,wa){return ba||RegExp("\\b"+(wa.pattern||Fr(wa))+"\\b","i").exec(kn)&&(wa.label||wa)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),qo=AM([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),mi=function(Na){return Dr(Na,function(ba,wa,Kh){return ba||(wa[qo]||wa[/^[a-z]+(?: +[a-z]+\b)*/i.exec(qo)]||RegExp("\\b"+Fr(Kh)+"(?:\\b|\\w*\\d)","i").exec(kn))&&Kh})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Zn=function(Na){return Dr(Na,function(ba,wa){var Kh=wa.pattern||Fr(wa);return!ba&&(ba=RegExp("\\b"+Kh+"(?:/[\\d.]+|[ \\w.]*)","i").exec(kn))&&(ba=function(Cl,xM,IM){var EM={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return xM&&IM&&/^Win/i.test(Cl)&&!/^Windows Phone /i.test(Cl)&&(EM=EM[/[\d.]+$/.exec(Cl)])&&(Cl="Windows "+EM),Cl=String(Cl),xM&&IM&&(Cl=Cl.replace(RegExp(xM,"i"),IM)),yr(Cl.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(ba,Kh,wa.label||wa)),ba})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function AM(rs){return Dr(rs,function(Na,ba){var wa=ba.pattern||Fr(ba);return!Na&&(Na=RegExp("\\b"+wa+" *\\d+[.\\w_]*","i").exec(kn)||RegExp("\\b"+wa+" *\\w+-[\\w]*","i").exec(kn)||RegExp("\\b"+wa+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(kn))&&((Na=String(ba.label&&!RegExp(wa,"i").test(ba.label)?ba.label:Na).split("/"))[1]&&!/[\d.]+/.test(Na[0])&&(Na[0]+=" "+Na[1]),ba=ba.label||ba,Na=yr(Na[0].replace(RegExp(wa,"i"),ba).replace(RegExp("; *(?:"+ba+"[_-])?","i")," ").replace(RegExp("("+ba+")[-_.]?(\\w)","i"),"$1 $2"))),Na})}function OM(rs){return Dr(rs,function(Na,ba){return Na||(RegExp(ba+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(kn)||0)[1]||null})}if(aa&&(aa=[aa]),/\bAndroid\b/.test(Zn)&&!qo&&(_r=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(kn))&&(qo=zr(_r[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),mi&&!qo?qo=AM([mi]):mi&&qo&&(qo=qo.replace(RegExp("^("+Fr(mi)+")[-_.\\s]","i"),mi+" ").replace(RegExp("^("+Fr(mi)+")[-_.]?(\\w)","i"),mi+" $2")),(_r=/\bGoogle TV\b/.exec(qo))&&(qo=_r[0]),/\bSimulator\b/i.test(kn)&&(qo=(qo?qo+" ":"")+"Simulator"),Wn=="Opera Mini"&&/\bOPiOS\b/.test(kn)&&Fo.push("running in Turbo/Uncompressed mode"),Wn=="IE"&&/\blike iPhone OS\b/.test(kn)?(mi=(_r=Kr(kn.replace(/like iPhone OS/,""))).manufacturer,qo=_r.product):/^iP/.test(qo)?(Wn||(Wn="Safari"),Zn="iOS"+((_r=/ OS ([\d_]+)/i.exec(kn))?" "+_r[1].replace(/_/g,"."):"")):Wn=="Konqueror"&&/^Linux\b/i.test(Zn)?Zn="Kubuntu":mi&&mi!="Google"&&(/Chrome/.test(Wn)&&!/\bMobile Safari\b/i.test(kn)||/\bVita\b/.test(qo))||/\bAndroid\b/.test(Zn)&&/^Chrome/.test(Wn)&&/\bVersion\//i.test(kn)?(Wn="Android Browser",Zn=/\bAndroid\b/.test(Zn)?Zn:"Android"):Wn=="Silk"?(/\bMobi/i.test(kn)||(Zn="Android",Fo.unshift("desktop mode")),/Accelerated *= *true/i.test(kn)&&Fo.unshift("accelerated")):Wn=="UC Browser"&&/\bUCWEB\b/.test(kn)?Fo.push("speed mode"):Wn=="PaleMoon"&&(_r=/\bFirefox\/([\d.]+)\b/.exec(kn))?Fo.push("identifying as Firefox "+_r[1]):Wn=="Firefox"&&(_r=/\b(Mobile|Tablet|TV)\b/i.exec(kn))?(Zn||(Zn="Firefox OS"),qo||(qo=_r[1])):!Wn||(_r=!/\bMinefield\b/i.test(kn)&&/\b(?:Firefox|Safari)\b/.exec(Wn))?(Wn&&!qo&&/[\/,]|^[^(]+?\)/.test(kn.slice(kn.indexOf(_r+"/")+8))&&(Wn=null),(_r=qo||mi||Zn)&&(qo||mi||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Zn))&&(Wn=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Zn)?Zn:_r)+" Browser")):Wn=="Electron"&&(_r=(/\bChrome\/([\d.]+)\b/.exec(kn)||0)[1])&&Fo.push("Chromium "+_r),fo||(fo=OM(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Fr(Wn),"(?:Firefox|Minefield|NetFront)"])),(_r=(aa=="iCab"&&parseFloat(fo)>3?"WebKit":/\bOpera\b/.test(Wn)&&(/\bOPR\b/.test(kn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(kn)&&!/^(?:Trident|EdgeHTML)$/.test(aa)&&"WebKit"||!aa&&/\bMSIE\b/i.test(kn)&&(Zn=="Mac OS"?"Tasman":"Trident")||aa=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Wn)&&"NetFront")&&(aa=[_r]),Wn=="IE"&&(_r=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(kn)||0)[1])?(Wn+=" Mobile",Zn="Windows Phone "+(/\+$/.test(_r)?_r:_r+".x"),Fo.unshift("desktop mode")):/\bWPDesktop\b/i.test(kn)?(Wn="IE Mobile",Zn="Windows Phone 8.x",Fo.unshift("desktop mode"),fo||(fo=(/\brv:([\d.]+)/.exec(kn)||0)[1])):Wn!="IE"&&aa=="Trident"&&(_r=/\brv:([\d.]+)/.exec(kn))&&(Wn&&Fo.push("identifying as "+Wn+(fo?" "+fo:"")),Wn="IE",fo=_r[1]),Ka){if(function(Na,ba){var wa=Na!=null?typeof Na[ba]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(wa)||wa=="object"&&!Na[ba])}(Yn,"global"))if(ao&&(Lc=(_r=ao.lang.System).getProperty("os.arch"),Zn=Zn||_r.getProperty("os.name")+" "+_r.getProperty("os.version")),Ko){try{fo=Yn.require("ringo/engine").version.join("."),Wn="RingoJS"}catch{(_r=Yn.system)&&_r.global.system==Yn.system&&(Wn="Narwhal",Zn||(Zn=_r[0].os||null))}Wn||(Wn="Rhino")}else typeof Yn.process=="object"&&!Yn.process.browser&&(_r=Yn.process)&&(typeof _r.versions=="object"&&(typeof _r.versions.electron=="string"?(Fo.push("Node "+_r.versions.node),Wn="Electron",fo=_r.versions.electron):typeof _r.versions.nw=="string"&&(Fo.push("Chromium "+fo,"Node "+_r.versions.node),Wn="NW.js",fo=_r.versions.nw)),Wn||(Wn="Node.js",Lc=_r.arch,Zn=_r.platform,fo=(fo=/[\d.]+/.exec(_r.version))?fo[0]:null));else xr(_r=Yn.runtime)==bn?(Wn="Adobe AIR",Zn=_r.flash.system.Capabilities.os):xr(_r=Yn.phantom)==no?(Wn="PhantomJS",fo=(_r=_r.version||null)&&_r.major+"."+_r.minor+"."+_r.patch):typeof Co.documentMode=="number"&&(_r=/\bTrident\/(\d+)/i.exec(kn))?(fo=[fo,Co.documentMode],(_r=+_r[1]+4)!=fo[1]&&(Fo.push("IE "+fo[1]+" mode"),aa&&(aa[1]=""),fo[1]=_r),fo=Wn=="IE"?String(fo[1].toFixed(1)):fo[0]):typeof Co.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Wn)&&(Fo.push("masking as "+Wn+" "+fo),Wn="IE",fo="11.0",aa=["Trident"],Zn="Windows");Zn=Zn&&yr(Zn)}if(fo&&(_r=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(fo)||/(?:alpha|beta)(?: ?\d)?/i.exec(kn+";"+(Ka&&xo.appMinorVersion))||/\bMinefield\b/i.test(kn)&&"a")&&(hc=/b/i.test(_r)?"beta":"alpha",fo=fo.replace(RegExp(_r+"\\+?$"),"")+(hc=="beta"?Da:Po)+(/\d+\+?/.exec(_r)||"")),Wn=="Fennec"||Wn=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Zn))Wn="Firefox Mobile";else if(Wn=="Maxthon"&&fo)fo=fo.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(qo))qo=="Xbox 360"&&(Zn=null),qo=="Xbox 360"&&/\bIEMobile\b/.test(kn)&&Fo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Wn)&&(!Wn||qo||/Browser|Mobi/.test(Wn))||Zn!="Windows CE"&&!/Mobi/i.test(kn))if(Wn=="IE"&&Ka)try{Yn.external===null&&Fo.unshift("platform preview")}catch{Fo.unshift("embedded")}else(/\bBlackBerry\b/.test(qo)||/\bBB10\b/.test(kn))&&(_r=(RegExp(qo.replace(/ +/g," *")+"/([.\\d]+)","i").exec(kn)||0)[1]||fo)?(Zn=((_r=[_r,/BB10/.test(kn)])[1]?(qo=null,mi="BlackBerry"):"Device Software")+" "+_r[0],fo=null):this!=Mr&&qo!="Wii"&&(Ka&&Ao||/Opera/.test(Wn)&&/\b(?:MSIE|Firefox)\b/i.test(kn)||Wn=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Zn)||Wn=="IE"&&(Zn&&!/^Win/.test(Zn)&&fo>5.5||/\bWindows XP\b/.test(Zn)&&fo>8||fo==8&&!/\bTrident\b/.test(kn)))&&!ue.test(_r=Kr.call(Mr,kn.replace(ue,"")+";"))&&_r.name&&(_r="ing as "+_r.name+((_r=_r.version)?" "+_r:""),ue.test(Wn)?(/\bIE\b/.test(_r)&&Zn=="Mac OS"&&(Zn=null),_r="identify"+_r):(_r="mask"+_r,Wn=oa?yr(oa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_r)&&(Zn=null),Ka||(fo=null)),aa=["Presto"],Fo.push(_r));else Wn+=" Mobile";(_r=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(kn)||0)[1])&&(_r=[parseFloat(_r.replace(/\.(\d)$/,".0$1")),_r],Wn=="Safari"&&_r[1].slice(-1)=="+"?(Wn="WebKit Nightly",hc="alpha",fo=_r[1].slice(0,-1)):fo!=_r[1]&&fo!=(_r[2]=(/\bSafari\/([\d.]+\+?)/i.exec(kn)||0)[1])||(fo=null),_r[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(kn)||0)[1],_r[0]==537.36&&_r[2]==537.36&&parseFloat(_r[1])>=28&&aa=="WebKit"&&(aa=["Blink"]),Ka&&(Fn||_r[1])?(aa&&(aa[1]="like Chrome"),_r=_r[1]||((_r=_r[0])<530?1:_r<532?2:_r<532.05?3:_r<533?4:_r<534.03?5:_r<534.07?6:_r<534.1?7:_r<534.13?8:_r<534.16?9:_r<534.24?10:_r<534.3?11:_r<535.01?12:_r<535.02?"13+":_r<535.07?15:_r<535.11?16:_r<535.19?17:_r<536.05?18:_r<536.1?19:_r<537.01?20:_r<537.11?"21+":_r<537.13?23:_r<537.18?24:_r<537.24?25:_r<537.36?26:aa!="Blink"?"27":"28")):(aa&&(aa[1]="like Safari"),_r=(_r=_r[0])<400?1:_r<500?2:_r<526?3:_r<533?4:_r<534?"4+":_r<535?5:_r<537?6:_r<538?7:_r<601?8:_r<602?9:_r<604?10:_r<606?11:_r<608?12:"12"),aa&&(aa[1]+=" "+(_r+=typeof _r=="number"?".x":/[.+]/.test(_r)?"":"+")),Wn=="Safari"&&(!fo||parseInt(fo)>45)?fo=_r:Wn=="Chrome"&&/\bHeadlessChrome/i.test(kn)&&Fo.unshift("headless")),Wn=="Opera"&&(_r=/\bzbov|zvav$/.exec(Zn))?(Wn+=" ",Fo.unshift("desktop mode"),_r=="zvav"?(Wn+="Mini",fo=null):Wn+="Mobile",Zn=Zn.replace(RegExp(" *"+_r+"$"),"")):Wn=="Safari"&&/\bChrome\b/.exec(aa&&aa[1])?(Fo.unshift("desktop mode"),Wn="Chrome Mobile",fo=null,/\bOS X\b/.test(Zn)?(mi="Apple",Zn="iOS 4.3+"):Zn=null):/\bSRWare Iron\b/.test(Wn)&&!fo&&(fo=OM("Chrome")),fo&&fo.indexOf(_r=/[\d.]+$/.exec(Zn))==0&&kn.indexOf("/"+_r+"-")>-1&&(Zn=zr(Zn.replace(_r,""))),Zn&&Zn.indexOf(Wn)!=-1&&!RegExp(Wn+" OS").test(Zn)&&(Zn=Zn.replace(RegExp(" *"+Fr(Wn)+" *"),"")),aa&&!/\b(?:Avant|Nook)\b/.test(Wn)&&(/Browser|Lunascape|Maxthon/.test(Wn)||Wn!="Safari"&&/^iOS/.test(Zn)&&/\bSafari\b/.test(aa[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Wn)&&aa[1])&&(_r=aa[aa.length-1])&&Fo.push(_r),Fo.length&&(Fo=["("+Fo.join("; ")+")"]),mi&&qo&&qo.indexOf(mi)<0&&Fo.push("on "+mi),qo&&Fo.push((/^on /.test(Fo[Fo.length-1])?"":"on ")+qo),Zn&&(_r=/ ([\d.+]+)$/.exec(Zn),Pn=_r&&Zn.charAt(Zn.length-_r[0].length-1)=="/",Zn={architecture:32,family:_r&&!Pn?Zn.replace(_r[0],""):Zn,version:_r?_r[1]:null,toString:function(){var rs=this.version;return this.family+(rs&&!Pn?" "+rs:"")+(this.architecture==64?" 64-bit":"")}}),(_r=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Lc))&&!/\bi686\b/i.test(Lc)?(Zn&&(Zn.architecture=64,Zn.family=Zn.family.replace(RegExp(" *"+_r),"")),Wn&&(/\bWOW64\b/i.test(kn)||Ka&&/\w(?:86|32)$/.test(xo.cpuClass||xo.platform)&&!/\bWin64; x64\b/i.test(kn))&&Fo.unshift("32-bit")):Zn&&/^OS X/.test(Zn.family)&&Wn=="Chrome"&&parseFloat(fo)>=39&&(Zn.architecture=64),kn||(kn=null);var Gi={};return Gi.description=kn,Gi.layout=aa&&aa[0],Gi.manufacturer=mi,Gi.name=Wn,Gi.prerelease=hc,Gi.product=qo,Gi.ua=kn,Gi.version=Wn&&fo,Gi.os=Zn||{architecture:null,family:null,version:null,toString:function(){return"null"}},Gi.parse=Kr,Gi.toString=function(){return this.description||""},Gi.version&&Fo.unshift(fo),Gi.name&&Fo.unshift(Wn),Zn&&Wn&&(Zn!=String(Zn).split(" ")[0]||Zn!=Wn.split(" ")[0]&&!qo)&&Fo.push(qo?"("+Zn+")":"on "+Zn),Fo.length&&(Gi.description=Fo.join(" ")),Gi}();D&&k?Mr(Hr,function(Kr,kn){D[kn]=Kr}):L.platform=Hr}).call(e)}),WT=Math.floor,Xg=function(w,M){var L=w.length,D=WT(L/2);return L<8?Zg(w,M):GT(w,Xg(mu(w,0,D),M),Xg(mu(w,D),M),M)},Zg=function(w,M){for(var L,D,k=w.length,Y=1;Y<k;){for(D=Y,L=w[Y];D&&M(w[D-1],L)>0;)w[D]=w[--D];D!==Y++&&(w[D]=L)}return w},GT=function(w,M,L,D){for(var k=M.length,Y=L.length,Oe=0,ue=0;Oe<k||ue<Y;)w[Oe+ue]=Oe<k&&ue<Y?D(M[Oe],L[ue])<=0?M[Oe++]:L[ue++]:Oe<k?M[Oe++]:L[ue++];return w},eh=Xg,Wv=or.match(/firefox\/(\d+)/i),yd=!!Wv&&+Wv[1],Ta=/MSIE|Trident/.test(or),Gv=or.match(/AppleWebKit\/(\d+)\./),th=!!Gv&&+Gv[1],oc=[],Qv=Ce(oc.sort),Jv=Ce(oc.push),QT=d(function(){oc.sort(void 0)}),Yv=d(function(){oc.sort(null)}),Xv=Ui("sort"),Zv=!d(function(){if(mr)return mr<70;if(!(yd&&yd>3)){if(Ta)return!0;if(th)return th<603;var w,M,L,D,k="";for(w=65;w<76;w++){switch(M=String.fromCharCode(w),w){case 66:case 69:case 70:case 72:L=3;break;case 68:case 71:L=4;break;default:L=2}for(D=0;D<47;D++)oc.push({k:M+D,v:L})}for(oc.sort(function(Y,Oe){return Oe.v-Y.v}),D=0;D<oc.length;D++)M=oc[D].k.charAt(0),k.charAt(k.length-1)!==M&&(k+=M);return k!=="DGBEFHACIJK"}});Vr({target:"Array",proto:!0,forced:QT||!Yv||!Xv||!Zv},{sort:function(M){M!==void 0&&Or(M);var L=jn(this);if(Zv)return M===void 0?Qv(L):Qv(L,M);var D,k,Y=[],Oe=Ia(L);for(k=0;k<Oe;k++)k in L&&Jv(Y,L[k]);for(eh(Y,function(ue){return function(Pt,jt){return jt===void 0?-1:Pt===void 0?1:ue!==void 0?+ue(Pt,jt)||0:Oa(Pt)>Oa(jt)?1:-1}}(M)),D=Ia(Y),k=0;k<D;)L[k]=Y[k++];for(;k<Oe;)wp(L,k++);return L}});var JT=Uo("Array").sort,rh=Array.prototype,wc=function(w){var M=w.sort;return w===rh||er(rh,w)&&M===rh.sort?JT:M},nh=o(function(w,M){w.exports=function(){var L={d:function(_r,Pn){for(var Fn in Pn)L.o(Pn,Fn)&&!L.o(_r,Fn)&&Ks(_r,Fn,{enumerable:!0,get:Pn[Fn]})},o:function(_r,Pn){return Object.prototype.hasOwnProperty.call(_r,Pn)}},D={};L.d(D,{default:function(){return xo}});var k=function Ln(_r){for(var Pn in function(Fn,_n){if(!(Fn instanceof _n))throw new TypeError("Cannot call a class as a function")}(this,Ln),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(Fn){},this.onProgress=function(Fn){},this.onUploadProgress=function(Fn){},this.onComplete=function(Fn){},_r)this[Pn]=_r[Pn]};function Y(Ln,_r){var Pn=ga!==void 0&&gd(Ln)||Ln["@@iterator"];if(!Pn){if(hs(Ln)||(Pn=function(no,ao){if(no){var Ko;if(typeof no=="string")return Oe(no,ao);var Po=Mo(Ko=Object.prototype.toString.call(no)).call(Ko,8,-1);return Po==="Object"&&no.constructor&&(Po=no.constructor.name),Po==="Map"||Po==="Set"?Ep(no):Po==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Po)?Oe(no,ao):void 0}}(Ln))||_r&&Ln&&typeof Ln.length=="number"){Pn&&(Ln=Pn);var Fn=0,_n=function(){};return{s:_n,n:function(){return Fn>=Ln.length?{done:!0}:{done:!1,value:Ln[Fn++]}},e:function(ao){throw ao},f:_n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bn,Nn=!0,qn=!1;return{s:function(){Pn=Pn.call(Ln)},n:function(){var ao=Pn.next();return Nn=ao.done,ao},e:function(ao){qn=!0,bn=ao},f:function(){try{Nn||Pn.return==null||Pn.return()}finally{if(qn)throw bn}}}}function Oe(Ln,_r){(_r==null||_r>Ln.length)&&(_r=Ln.length);for(var Pn=0,Fn=new Array(_r);Pn<_r;Pn++)Fn[Pn]=Ln[Pn];return Fn}var ue=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(ue={privateObj:{},setItem:function(_r,Pn){ue.privateObj[_r]=Pn},getItem:function(_r){return ue.privateObj[_r]},removeItem:function(_r){delete ue.privateObj[_r]},getKeys:function(){return Vo(ue.privateObj)}});var Pt={getFileKey:function(_r){var Pn=_r.size.toString(),Fn=_r.lastModified.toString();return"_NosUploader_"+_r.name+Mo(Pn).call(Pn,Pn.length-5)+Mo(Fn).call(Fn,Fn.length-5)},getFileInfo:function(_r){var Pn=ue.getItem(_r);if(!Pn)return null;try{return JSON.parse(Pn)}catch{return null}},initFile:function(_r,Pn,Fn){Pt.clearExpiredInfo();var _n=this.getFileKey(Pn),bn={ctx:_r.ctx!==void 0?_r.ctx:"",bucket:_r.bucketName,obj:_r.objectName,token:_r.token,modifyAt:ia(),end:!1};return _r.payload&&(bn.payload=_r.payload),Fn&&ue.setItem(_n,Wo(bn)),_n},setUploadContext:function(_r,Pn,Fn){var _n=this.getFileInfo(_r);_n&&(_n.ctx=Pn,Fn&&ue.setItem(_r,Wo(_n)))},setComplete:function(_r,Pn){var Fn=this.getFileInfo(_r);Fn&&(Fn.modifyAt=ia(),Fn.end=!0,Pn&&ue.setItem(_r,Wo(Fn)))},getUploadContext:function(_r){var Pn=this.getFileInfo(_r);return Pn?Pn.ctx:""},removeFileInfo:function(_r){Ca(_r).call(_r,"_NosUploader_")===0&&ue.removeItem(_r)},clearExpiredInfo:function(){var _r,Pn=typeof ue.getKeys=="function"?ue.getKeys():Vo(ue),Fn=ia(),_n=[],bn=Y(Pn);try{for(bn.s();!(_r=bn.n()).done;){var Nn=_r.value;if(Ca(Nn).call(Nn,"_NosUploader_")===0){var qn=Pt.getFileInfo(Nn);qn===null||Fn-qn.modifyAt>xo.expireTime?ue.removeItem(Nn):_n.push({fileInfo:qn,key:Nn})}}}catch(Co){bn.e(Co)}finally{bn.f()}if(_n.length>xo.maxFileCache){var no,ao,Ko=Y(Mo(no=wc(_n).call(_n,function(Co,Ao){return Ao.fileInfo.modifyAt-Co.fileInfo.modifyAt})).call(no,xo.maxFileCache));try{for(Ko.s();!(ao=Ko.n()).done;){var Po,Da=ao.value;Ca(Po=Da.key).call(Po,"_NosUploader_")===0&&ue.removeItem(Da.key)}}catch(Co){Ko.e(Co)}finally{Ko.f()}}}},jt=Pt;function ur(Ln){return(ur=typeof ga=="function"&&typeof cm=="symbol"?function(_r){return typeof _r}:function(_r){return _r&&typeof ga=="function"&&_r.constructor===ga&&_r!==ga.prototype?"symbol":typeof _r})(Ln)}function gr(Ln,_r){return!_r||ur(_r)!=="object"&&typeof _r!="function"?function(Pn){if(Pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pn}(Ln):_r}function yr(Ln){var _r=typeof ec=="function"?new ec:void 0;return(yr=function(Fn){var _n,bn;if(Fn===null||(bn=Fn,Ca(_n=Function.toString.call(bn)).call(_n,"[native code]")===-1))return Fn;if(typeof Fn!="function")throw new TypeError("Super expression must either be null or a function");if(_r!==void 0){if(_r.has(Fn))return _r.get(Fn);_r.set(Fn,Nn)}function Nn(){return Mr(Fn,arguments,Dr(this).constructor)}return Nn.prototype=Ja(Fn.prototype,{constructor:{value:Nn,enumerable:!1,writable:!0,configurable:!0}}),Fr(Nn,Fn)})(Ln)}function Mr(Ln,_r,Pn){return(Mr=xr()?Is:function(Fn,_n,bn){var Nn=[null];Nn.push.apply(Nn,_n);var qn=new(Oo(Function).apply(Fn,Nn));return bn&&Fr(qn,bn.prototype),qn}).apply(null,arguments)}function xr(){if(typeof Reflect>"u"||!Is||Is.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Is(Boolean,[],function(){})),!0}catch{return!1}}function Fr(Ln,_r){return(Fr=Ni||function(Pn,Fn){return Pn.__proto__=Fn,Pn})(Ln,_r)}function Dr(Ln){return(Dr=Ni?$i:function(_r){return _r.__proto__||$i(_r)})(Ln)}var zr=function(Ln){(function(bn,Nn){if(typeof Nn!="function"&&Nn!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Ja(Nn&&Nn.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),Nn&&Fr(bn,Nn)})(_n,Ln);var _r,Pn,Fn=(_r=_n,Pn=xr(),function(){var bn,Nn=Dr(_r);if(Pn){var qn=Dr(this).constructor;bn=Is(Nn,arguments,qn)}else bn=Nn.apply(this,arguments);return gr(this,bn)});function _n(bn,Nn){var qn;return function(no,ao){if(!(no instanceof ao))throw new TypeError("Cannot call a class as a function")}(this,_n),(qn=Fn.call(this,"NosUploadError:"+bn)).errCode=Nn,qn.errMsg=bn,qn}return _n}(yr(Error)),Hr=function Ln(_r,Pn,Fn){if(_r.uploadState==="uploading"){var _n=_r.config,bn=_r.param,Nn=jt.getUploadContext(_r.fileKey);if(!Nn)return Fn(0);var qn=new XMLHttpRequest,no=_n.directUploadAddr+"/".concat(bn.bucketName)+"/".concat(encodeURIComponent(bn.objectName))+"?uploadContext"+"&context=".concat(Nn)+"&version=".concat(_n.version);qn.onreadystatechange=function(){var ao;if(_r.uploadState!=="abort"&&qn.readyState===4){var Ko,Po,Da,Co;try{Co=JSON.parse(qn.responseText)}catch{Co={errMsg:"JsonParseError in getOffset",errCode:500}}qn.status===200?Co.errCode?_r.config.onError(new zr(Co.errMsg,Co.errCode)):Fn(Co.offset):qn.status.toString().match(/^5/)?Ln(_r,Pn-1,Fn):Pn>0?(typeof((ao=_n.logger)===null||ao===void 0?void 0:ao.error)=="function"&&_n.logger.error(ki(Ko="getOffset(".concat(no,") error. retry after 3 seconds. ")).call(Ko,new Date().toTimeString())),ho(function(){Ln(_r,Pn-1,Fn)},3500)):(jt.removeFileInfo(_r.fileKey),qn.status?_n.onError(new zr(ki(Po=ki(Da="getOffset(".concat(no,") error: ")).call(Da,qn.status," ")).call(Po,qn.statusText))):_n.onError(new zr("getOffset(".concat(no,") error. no Error Code"))))}},qn.open("get",no),qn.setRequestHeader("x-nos-token",bn.token),qn.timeout=_n.getOffsetTimeout,qn.send()}},Kr=function Ln(_r,Pn,Fn,_n){if(_r.uploadState==="uploading"){var bn=_r.param,Nn=_r.config,qn=Mo(File.prototype),no=bn.ctx!==void 0?bn.ctx:"",ao=Pn+Nn.trunkSize>_r.file.size,Ko=ao?_r.file.size:Pn+Nn.trunkSize,Po=new XMLHttpRequest,Da=Nn.directUploadAddr+"/".concat(bn.bucketName)+"/".concat(encodeURIComponent(bn.objectName));if(Po.upload.onprogress=function(Ao){if(_r.uploadState!=="abort"){var oa=0;Ao.lengthComputable?(oa=(Pn+Ao.loaded)/_r.file.size,Nn.onProgress(oa),Nn.onUploadProgress({loaded:Ao.loaded,total:_r.file.size,percentage:oa,percentageText:(100*oa).toFixed(2)+"%"})):Nn.onError(new zr("browser does not support query upload progress"))}},Po.onreadystatechange=function(){var Ao,oa;if(_r.uploadState!=="abort"&&Po.readyState===4){var Lc,Fo,hc,Ka;try{Ka=JSON.parse(Po.responseText)}catch(fo){typeof((Ao=Nn.logger)===null||Ao===void 0?void 0:Ao.error)=="function"&&Nn.logger.error("JsonParseError in uploadTrunk",fo),Ka={errMsg:"JsonParseError in uploadTrunk"}}Po.status===200?(_r.setContext(Ka.context),ao?(_n(),_r.setComplete()):Ln(_r,Ka.offset,Nn.retryCount,_n)):Po.status.toString().match(/^5/)?Fn>0?Ln(_r,Pn,Fn-1,_n):(jt.removeFileInfo(_r.fileKey),Nn.onError(new zr(Ka.errMsg,Ka.errCode))):Fn>0?(typeof((oa=Nn.logger)===null||oa===void 0?void 0:oa.error)=="function"&&Nn.logger.error(ki(Lc="uploadTrunk(".concat(Da,") error. retry after 3 seconds. ")).call(Lc,new Date().toTimeString())),ho(function(){Ln(_r,Pn,Fn-1,_n)},3500)):(jt.removeFileInfo(_r.fileKey),Po.status?Nn.onError(new zr(ki(Fo=ki(hc="uploadTrunk(".concat(Da,") error: ")).call(hc,Po.status," ")).call(Fo,Po.statusText))):Nn.onError(new zr("uploadTrunk(".concat(Da,") error. no Error Code. Please check your network"))))}},Po.open("post",Da+"?offset=".concat(Pn)+"&complete=".concat(ao)+"&context=".concat(no)+"&version=".concat(Nn.version)),Po.setRequestHeader("x-nos-token",bn.token),_r.file.type&&Po.setRequestHeader("content-type",_r.file.type),Po.timeout=Nn.trunkUploadTimeout,typeof FileReader<"u"){var Co=new FileReader;Co.addEventListener("load",function(Ao){var oa;!((oa=Ao==null?void 0:Ao.target)===null||oa===void 0)&&oa.result?Po.send(Ao.target.result):Nn.onError(new zr("Read ArrayBuffer failed"))}),Co.addEventListener("error",function(Ao){var oa=Ao.target.error;Nn.onError(new zr("Read ArrayBuffer error. ".concat(oa.toString()),oa.code))}),Co.readAsArrayBuffer(qn.call(_r.file,Pn,Ko))}else Po.send(qn.call(_r.file,Pn,Ko))}};function kn(Ln,_r){for(var Pn=0;Pn<_r.length;Pn++){var Fn=_r[Pn];Fn.enumerable=Fn.enumerable||!1,Fn.configurable=!0,"value"in Fn&&(Fn.writable=!0),Ks(Ln,Fn.key,Fn)}}var Yn=function(){function Ln(Pn,Fn,_n){(function(bn,Nn){if(!(bn instanceof Nn))throw new TypeError("Cannot call a class as a function")})(this,Ln),this.uploadState="paused",this.config=_n,this.file=Pn,this.param=Fn,this.fileKey=jt.initFile(Fn,Pn,this.config.enableCache),this.resume()}var _r;return(_r=[{key:"resume",value:function(){var Fn=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var _n=this.config;Hr(this,_n.retryCount,function(bn){Kr(Fn,bn,_n.retryCount,function(){Fn.setUploadState("ended"),typeof _n.onComplete=="function"&&_n.onComplete(Fn.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),jt.removeFileInfo(this.fileKey),this.config.onError(new zr("Upload Aborted",10499))}},{key:"setUploadState",value:function(Fn){Fn!==this.uploadState&&(this.uploadState=Fn)}},{key:"setContext",value:function(Fn){jt.setUploadContext(this.fileKey,Fn,this.config.enableCache),this.param.ctx=Fn}},{key:"setComplete",value:function(){jt.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&kn(Ln.prototype,_r),Ln}(),Hn={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(_r){var Pn=jt.getFileKey(_r),Fn=jt.getFileInfo(Pn);return Fn===null?null:ia()-Fn.modifyAt>Hn.expireTime?(jt.removeFileInfo(Pn),null):{uploadInfo:Cr({bucketName:Fn.bucket,objectName:Fn.obj,token:Fn.token,ctx:Fn.ctx},Fn.payload?{payload:Fn.payload}:{}),complete:Fn.end}},setMaxFileCache:function(_r){Hn.maxFileCache=_r},setExpireTime:function(_r){Hn.expireTime=_r},printCaches:function(){for(var _r=0,Pn=Vo(localStorage);_r<Pn.length;_r++){var Fn=Pn[_r],_n=jt.getFileInfo(Fn);_n&&console.log(_n,"modifiedAt",new Date(_n.modifyAt).toTimeString())}},createConfig:function(_r){return new k(_r)},createTask:function(_r,Pn,Fn){return new Yn(_r,Pn,Fn)}},xo=Hn;return D.default}()}),YT=o(function(w,M){w.exports=function(){function L(Oe){if(Oe){var ue,Pt="";return In(ue=Vo(Oe)).call(ue,function(jt,ur){Pt+=ur===0?"?":"&",Pt+=jt+"="+Oe[jt]}),Pt}return""}function D(Oe,ue,Pt,jt){return Error.call(this,Pt),this.source=Oe,this.code=ue,this.desc=Pt,this.detail=jt||{},this}function k(Oe,ue){var Pt=Ja(ue.prototype);Pt.constructor=Oe,Oe.prototype=Pt}function Y(Oe,ue){ue===void 0&&(ue={dataType:"json",method:"GET",timeout:5e3});var Pt=ue.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",jt=ue.method==="GET"?L(ue.params):"";return new uo(function(ur,gr){if(window.XMLHttpRequest){var yr,Mr=new XMLHttpRequest;if(Mr.onreadystatechange=function(){if(Mr.readyState===4)if(Mr.status===200){try{yr=JSON.parse(Mr.response||"{}")}catch{yr=Mr.response}ur({status:Mr.status,data:yr})}else gr(new D(1,Mr.status,Mr.statusText))},Mr.open(ue.method,""+Oe+jt),Mr.timeout=ue.timeout||5e3,Mr.setRequestHeader("Content-Type",Pt),ue.headers)for(var xr in ue.headers)Mr.setRequestHeader(xr,ue.headers[xr]);Mr.ontimeout=function(Fr){gr(new D(1,408,Fr&&Fr.message?Fr.message:"request timeout"))},Mr.send(Wo(ue.data))}else gr(new D(2,10400,"request no suppout"))})}return k(D,Error),Y}()}),ey=console,ac,$a,Vl,ha,Xi,ty={setLogger:function(M){ey=M},platform:"BROWSER",localStorage:window.localStorage,request:YT,WebSocket:window.WebSocket,uploadFile:function(M){return Sn(this,void 0,void 0,ir.mark(function L(){var D,k,Y,Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(M.fileInput||M.file){ur.next=2;break}throw new Error("File not exist");case 2:if(!M.file){ur.next=6;break}Oe=M.file,ur.next=20;break;case 6:if(typeof M.fileInput!="string"){ur.next=15;break}if(!((ue=document.getElementById(M.fileInput))&&ue.files&&ue.files[0])){ur.next=12;break}Oe=ue.files[0],ur.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:ur.next=20;break;case 15:if(!(M.fileInput&&M.fileInput.files&&M.fileInput.files[0])){ur.next=19;break}Oe=M.fileInput.files[0],ur.next=20;break;case 19:throw new Error("Can not get file from fileInput "+M.fileInput);case 20:if(!(M.maxSize&&Oe.size>M.maxSize)){ur.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+M.maxSize+", get "+Oe.size);case 22:return ur.next=24,new uo(function(gr,yr){var Mr=nh.createConfig({enableCache:!1,directUploadAddr:M.chunkUploadHost,onError:function(Dr){yr(Dr)},onProgress:M.onUploadProgress||function(){},onComplete:function(Dr){gr(Dr)}}),xr=nh.createTask(Oe,{bucketName:M.nosToken.bucket,objectName:decodeURIComponent(M.nosToken.objectName),token:M.nosToken.token},Mr);try{M.onUploadStart&&M.onUploadStart(xr)}catch(Fr){ey.error("Adapter uploadFile: options.onUploadStart error",Fr&&Fr.message),xr.abort(),yr(Fr)}});case 24:return(Pt=ur.sent).name=Oe.name,Pt.size=Oe.size,Pt.type=Oe.type,Pt.ext=Yg(D=Pt.name).call(D,".")>-1?Mo(k=Pt.name).call(k,Yg(Y=Pt.name).call(Y,".")+1).toLowerCase():"",ur.abrupt("return",Pt);case 30:case"end":return ur.stop()}},L)}))},getSystemInfo:function(){var M,L;return{os:((M=ql.os)===null||M===void 0?void 0:M.family)||"",osVer:((L=ql.os)===null||L===void 0?void 0:L.version)||"",browser:ql.name||"",browserVer:ql.version||"",hostEnv:"BROWSER",hostEnvVer:ql.version||"",hostInfo:ql.ua||""}}},oi=function(){function w(M,L){this.name=M,this.core=L,this.name=M,this.logger=L.logger,this.core=L}return w.prototype.process=function(L){var D=this[L.cmd+"Handler"];return typeof D=="function"?D.call(this,L):L.error&&!L.error.ignore?uo.reject(L.error):uo.resolve(L)},w}();(function(w){w[w.text=0]="text",w[w.image=1]="image",w[w.audio=2]="audio",w[w.video=3]="video",w[w.geo=4]="geo",w[w.notification=5]="notification",w[w.file=6]="file",w[w.tip=10]="tip",w[w.robot=11]="robot",w[w.g2=12]="g2",w[w.custom=100]="custom"})(ac||(ac={})),function(w){w[w.p2p=0]="p2p",w[w.team=1]="team",w[w.superTeam=5]="superTeam"}($a||($a={})),function(w){w[w.Android=1]="Android",w[w.iOS=2]="iOS",w[w.PC=4]="PC",w[w.WindowsPhone=8]="WindowsPhone",w[w.Web=16]="Web",w[w.Server=32]="Server",w[w.Mac=64]="Mac"}(Vl||(Vl={})),function(w){w[w.unread=1]="unread",w[w.read=2]="read",w[w.deleted=3]="deleted",w[w.sending=4]="sending",w[w.sendFailed=5]="sendFailed",w[w.sent=6]="sent",w[w.receipt=7]="receipt",w[w.refused=10]="refused"}(ha||(ha={})),function(w){w[w.default=0]="default",w[w.leave=1]="leave",w[w.roam=2]="roam"}(Xi||(Xi={}));var oh=function(M,L){return function(D){return M(L(D))}},ah=oh(Object.getPrototypeOf,Object),XT=Function.prototype,ZT=Object.prototype,ry=XT.toString,eS=ZT.hasOwnProperty,pl=ry.call(Object),bd=function(M){if(!vs(M)||yc(M)!="[object Object]")return!1;var L=ah(M);if(L===null)return!0;var D=eS.call(L,"constructor")&&L.constructor;return typeof D=="function"&&D instanceof D&&ry.call(D)==pl};function Zi(w,M){if(!bd(M))return{};var L=JSON.parse(Wo(M)),D=ih(w,L);return JSON.parse(Wo(Cr(Cr({},L),D)))}function ih(w,M){if(!bd(M))return{};var L={},D=Vo(w);return In(D).call(D,function(k){var Y=w[k].type;if(typeof Y!="string"){var Oe=ih(w[k],M);Vo(Oe).length>0&&(L[k]=Oe)}else{var ue=w[k],Pt=ue.rawKey||k,jt=Bp[Y](M,Pt,ue);jt!==void 0&&(M[Pt]=void 0,L[k]=jt)}}),L}var Bp={number:function(M,L){if(M[L]!==void 0)return+M[L]},string:function(M,L){if(M[L]!==void 0)return M[L]},boolean:function(M,L){return+M[L]>0||+M[L]!=0&&void 0},enum:function(M,L,D){return ip(D)[M[L]]},object:function(M,L){if(M[L]!==void 0)try{return JSON.parse(M[L])}catch{return{}}}};function Td(w,M){if(!bd(M))return{};var L=JSON.parse(Wo(M)),D=ny(w,L);return JSON.parse(Wo(Cr(Cr({},L),D)))}function ny(w,M){var L;if(!bd(M))return op(L=Vo(w)).call(L,function(Y,Oe){return Y[w[Oe].rawKey||Oe]=void 0,Y},{});var D={},k=Vo(w);return In(k).call(k,function(Y){var Oe=w[Y].type;if(typeof Oe!="string"){var ue=ny(w[Y],M[Y]);return Cr(D,ue),void(M[Y]=void 0)}var Pt=w[Y],jt=Pt.rawKey||Y,ur=sh[Oe](M,Y,Pt);M[jt]=void 0,D[jt]=ur}),D}var sh={number:function(M,L){return M[L]},string:function(M,L){return M[L]},boolean:function(M,L){return M[L]===!0?1:M[L]===!1?0:void 0},enum:function(M,L,D){return ip(D)[M[L]]},object:function(M,L){if(M[L]!==void 0)try{return Wo(M[L])}catch{return""}}},tS=sh,oy=function(M){return function(L,D,k){for(var Y=-1,Oe=Object(L),ue=k(L),Pt=ue.length;Pt--;){var jt=ue[M?Pt:++Y];if(D(Oe[jt],jt,Oe)===!1)break}return L}}(),rS=function(M,L){for(var D=-1,k=Array(M);++D<M;)k[D]=L(D);return k},ch=function(M){return vs(M)&&yc(M)=="[object Arguments]"},ay=Object.prototype,Fp=ay.hasOwnProperty,nS=ay.propertyIsEnumerable,oS=ch(function(){return arguments}())?ch:function(w){return vs(w)&&Fp.call(w,"callee")&&!nS.call(w,"callee")},Sd=oS,lh=function(){return!1},Lp=o(function(w,M){var L=M&&!M.nodeType&&M,D=L&&w&&!w.nodeType&&w,k=D&&D.exports===L?Ai.Buffer:void 0,Y=(k?k.isBuffer:void 0)||lh;w.exports=Y}),aS=/^(?:0|[1-9]\d*)$/,jp=function(M,L){var D=typeof M;return!!(L=L??9007199254740991)&&(D=="number"||D!="symbol"&&aS.test(M))&&M>-1&&M%1==0&&M<L},Sa={};Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Arguments]"]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object Boolean]"]=Sa["[object DataView]"]=Sa["[object Date]"]=Sa["[object Error]"]=Sa["[object Function]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa["[object Object]"]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object WeakMap]"]=!1;var iS=function(M){return vs(M)&&Bg(M.length)&&!!Sa[yc(M)]},uh=ui&&ui.isTypedArray,dh=uh?Al(uh):iS,sS=Object.prototype.hasOwnProperty,iy=function(M,L){var D=bs(M),k=!D&&Sd(M),Y=!D&&!k&&Lp(M),Oe=!D&&!k&&!Y&&dh(M),ue=D||k||Y||Oe,Pt=ue?rS(M.length,String):[],jt=Pt.length;for(var ur in M)!L&&!sS.call(M,ur)||ue&&(ur=="length"||Y&&(ur=="offset"||ur=="parent")||Oe&&(ur=="buffer"||ur=="byteLength"||ur=="byteOffset")||jp(ur,jt))||Pt.push(ur);return Pt},Dp=Object.prototype,fl=function(M){var L=M&&M.constructor;return M===(typeof L=="function"&&L.prototype||Dp)},ph=oh(Object.keys,Object),Wa=Object.prototype.hasOwnProperty,cS=function(M){if(!fl(M))return ph(M);var L=[];for(var D in Object(M))Wa.call(M,D)&&D!="constructor"&&L.push(D);return L},Md=function(M){return yp(M)?iy(M):cS(M)},sy=function(M,L){return M&&oy(M,L,Md)},lS=function(M,L,D,k){return sy(M,function(Y,Oe,ue){L(k,D(Y),Oe,ue)}),k},fh,uS=function(M,L){return function(D,k){return lS(D,M,L(k),{})}},dS=Object.prototype.toString,Ga=uS(function(w,M,L){M!=null&&typeof M.toString!="function"&&(M=dS.call(M)),w[M]=L},xv(jl)),pS=Ga({Android:1,iOS:2,PC:4,WindowsPhone:8,Web:16,Server:32,Mac:64}),mh={p2p:0,team:1,superTeam:5};function cy(w,M){return w&&w.length>0?To(w).call(w,function(L){return Cr(Cr({},L),{account:L.account,connectionId:L.connectionId,deviceId:L.deviceId,ip:L.ip,mac:L.mac,os:L.os,type:pS[L.type]||L.type,time:ko(L.time),online:M!==3})}):[]}Ga(mh),function(w){w[w.text=0]="text",w[w.image=1]="image",w[w.audio=2]="audio",w[w.video=3]="video",w[w.geo=4]="geo",w[w.notification=5]="notification",w[w.file=6]="file",w[w.tip=10]="tip",w[w.robot=11]="robot",w[w.g2=12]="g2",w[w.custom=100]="custom"}(fh||(fh={}));var fS={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},ly={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},uy=function(w){function M(D){var k;return k=w.call(this,"auth",D)||this,qa({cmdMap:Uv,cmdConfig:Vv}),k}No(M,w);var L=M.prototype;return L.doLogin=function(k){var Y,Oe;return k===void 0&&(k=!1),Sn(this,void 0,void 0,ir.mark(function ue(){var Pt,jt,ur,gr,yr,Mr,xr,Fr,Dr,zr;return ir.wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return Pt=this.core.options,jt=Ho.getSystemInfo(),ur=Cr(Cr({},Pt),{appLogin:k?0:1,appkey:Pt.appkey,account:Pt.account,token:Pt.token,deviceId:this.core.config.deviceId,clientType:16,protocolVersion:1,sdkVersion:91001,sdkHumanVersion:"0.13.1",os:jt.os,browser:jt.browser,session:(Y=this.core.socket)===null||Y===void 0?void 0:Y.sessionId,sdkType:ly[Ho.platform]||0,userAgent:"Native/0.13.1"}),gr=jt.os.toLowerCase(),Ho.platform!=="UNIAPP"||gr!=="ios"&&gr!=="android"||(ur.isReactNative=1,ur.clientType=gr==="ios"?2:1,jt.pushDeviceInfo&&jt.pushDeviceInfo.MANUFACTURER&&(ur.deviceInfo=Wo(jt.pushDeviceInfo))),this.logger.log("auth::do login ",Pt.account,(Oe=this.core.socket)===null||Oe===void 0?void 0:Oe.sessionId),Kr.next=8,this.core.sendCmd("login",{login:ur});case 8:if(!(yr=Kr.sent).error){Kr.next=11;break}throw yr.error;case 11:return Mr=yr.content,xr=Mr.loginRes,Fr=Mr.loginPorts,Dr=Mr.aosPushInfo,zr=cy(Fr,2),(zr=li(zr).call(zr,function(kn){return kn.connectionId!==xr.connectionId})).length>0&&this.core.emit("multiPortLogin",zr),Kr.abrupt("return",Cr(Cr({},xr),{aosPushInfo:Dr}));case 16:case"end":return Kr.stop()}},ue,this)}))},L.kick=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("kick",k);case 2:return ue=jt.sent,jt.abrupt("return",(Y=ue.content)===null||Y===void 0?void 0:Y.deviceIds);case 4:case"end":return jt.stop()}},Oe,this)}))},L.multiPortLoginHandler=function(k){if(k.error)this.logger.error("multiPortLoginHandler:: error, ",k.error);else{var Y=k.content,Oe=cy(Y.loginPorts,Y.state);Oe.length>0&&this.core.emit("multiPortLogin",Oe)}},L.kickedHandler=function(k){if(k.error)this.logger.error("kickedHandler:: error, ",k.error);else{var Y=function(ue){var Pt=Zi({clientType:{type:"enum",values:Vl},customClientType:{type:"number"}},ue),jt=fS[Pt.reason];return Cr(Pt,jt=jt||{reason:"unknow",message:"Unknown reason"})}(k.content);this.logger.warn("kicked::",Y),this.core.doDisconnect(Va.KICKED,Y)}},M}(oi);Vr({target:"Number",stat:!0},{isNaN:function(M){return M!=M}});var Cd,mS=nr.Number.isNaN,gS=Ga({none:0,normal:1,all:3}),dy={normal:0,advanced:1},hS=Ga(dy),vS=Ga({normal:0,owner:1,manager:2}),gh={noVerify:0,needVerify:1,rejectAll:2},py=Ga(gh),fy={needVerify:0,noVerify:1},gy=Ga(fy),Hl={manager:0,all:1},ml=Ga(Hl),hh={manager:0,all:1},zi=Ga(hh),Ns={manager:0,all:1},yS=Ga(Ns);function xc(w){var M,L=["teamId"],D=["level","memberNum","memberUpdateTime","createTime","updateTime"],k=["valid","validToCurrentUser","mute"],Y={type:hS,muteType:gS,joinMode:py,beInviteMode:gy,inviteMode:ml,updateTeamMode:zi,updateExtMode:yS};w.bits;var Oe=Pi(w,["bits"]);return In(L).call(L,function(ue){Oe[ue]&&(Oe[ue]=Oe[ue].toString())}),In(D).call(D,function(ue){Oe[ue]!==void 0&&(Oe[ue]=ko(Oe[ue]))}),In(k).call(k,function(ue){Oe[ue]!==void 0&&(Oe[ue]=ko(Oe[ue])===1)}),In(M=Vo(Y)).call(M,function(ue){Oe[ue]!==void 0&&(Oe[ue]=Y[ue][Oe[ue]]||Oe[ue])}),Oe}function vh(w){return w&&w.length>0?To(w).call(w,function(M){return xc(M)}):[]}function yh(w){var M,L=Cr({},w),D=["avatar","name","intro","announcement","ext"],k={type:dy,joinMode:gh,beInviteMode:fy,inviteMode:Hl,updateTeamMode:hh,updateExtMode:Ns};return In(D).call(D,function(Y){L[Y]!==void 0&&(L[Y]=L[Y].toString())}),In(M=Vo(k)).call(M,function(Y){L[Y]!==void 0&&(L[Y]=k[Y][L[Y]])}),L}function hy(w){var M=["teamId","ext","account","nickInTeam"],L={};return w.bitConfigMask!==void 0&&(L.bits=ko(w.bitConfigMask)),In(M).call(M,function(D){w[D]&&(L[D]=w[D].toString())}),L}function kd(w){var M,L=["teamId"],D=["joinTime","updateTime","bitConfigMask"],k=["active","valid","mute"],Y={type:vS},Oe=w.bits,ue=Pi(w,["bits"]);return Oe!==void 0&&(ue.muteTeam=ko(Oe)===1,ue.bitConfigMask=Oe),ue.id=ue.teamId+"-"+ue.account,In(L).call(L,function(Pt){ue[Pt]&&(ue[Pt]=ue[Pt].toString())}),In(D).call(D,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=ko(ue[Pt]))}),In(k).call(k,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=ko(ue[Pt])===1)}),In(M=Vo(Y)).call(M,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=Y[Pt][ue[Pt]]||ue[Pt])}),ue}function $p(w){return w&&w.length>0?To(w).call(w,function(M){return kd(M)}):[]}function vy(w,M,L){return L===void 0&&(L="normal"),{id:w.teamId+"-"+M,teamId:w.teamId,account:M,type:L,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:w.memberUpdateTime,updateTime:w.memberUpdateTime,active:!0,valid:!0}}function bS(w,M,L){return L===void 0&&(L="normal"),M&&M.length>0?To(M).call(M,function(D){return vy(w,D,L)}):[]}function zl(w){var M=Cr({},w);return M.createTime&&(M.createTime=+M.createTime),M.updateTime&&(M.updateTime=+M.updateTime),M.gender&&(M.gender=Cd[+M.gender]),M}(function(w){w[w.unknown=0]="unknown",w[w.male=1]="male",w[w.female=2]="female"})(Cd||(Cd={}));var yy={"8_1":"createTeam","8_5":"addTeamMembers","8_6":"removeTeamMembers","8_7":"updateTeamInfo","8_8":"leaveTeam","8_9":"getTeamInfo","8_10":"getTeams","8_11":"getTeamMembers","8_12":"dismissTeam","8_13":"applyTeam","8_14":"passTeamApply","8_15":"rejectTeamApply","8_16":"addTeamManagers","8_17":"removeTeamManagers","8_18":"transferTeam","8_19":"updateMyMemberInfo","8_20":"updateNickInTeam","8_21":"acceptTeamInvite","8_22":"rejectTeamInvite","8_25":"muteTeamMember","8_27":"getMutedTeamMembers","8_28":"sendTeamMsgReceipt","8_29":"getTeamMsgReads","8_30":"getTeamMsgReadAccounts","8_31":"notifyTeamMsgReceipts","8_32":"muteTeam","8_33":"getTeamMemberInvitorAccid","8_34":"getTeamsById","8_101":"syncCreateTeam","8_109":"syncTeams","8_119":"syncUpdateTeamMember","8_126":"syncMyTeamMembers"},ic={team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},teamMsgReceiptTag:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,ext:12,mute:13,invitorAccid:14}},ai=ri(ic),by={getTeamInfo:{sid:8,cid:9,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"team",reflectMapper:ai.team}]},getTeams:{sid:8,cid:10,service:"team",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:ai.team},{type:"Number",name:"timetag"}],ignoreErrCodes:[803]},createTeam:{sid:8,cid:1,service:"team",params:[{type:"Property",name:"team",reflectMapper:ic.team},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:ai.team},{type:"StrArray",name:"abortedAccidList"}]},sendTeamMsgReceipt:{sid:8,cid:28,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ai.teamMsgReceiptTag}]},getTeamMsgReads:{sid:8,cid:29,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ai.teamMsgReceiptTag}]},getTeamMsgReadAccounts:{sid:8,cid:30,service:"team",params:[{type:"Property",name:"teamMsgReceiptTag",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"Property",name:"teamMsgReceipt",reflectMapper:ai.teamMsgReceiptTag},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},notifyTeamMsgReceipts:{sid:8,cid:31,service:"team",response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ai.teamMsgReceiptTag}]},dismissTeam:{sid:8,cid:12,service:"team",params:[{type:"Long",name:"teamId"}]},leaveTeam:{sid:8,cid:8,service:"team",params:[{type:"Long",name:"teamId"}]},transferTeam:{sid:8,cid:18,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateTeamInfo:{sid:8,cid:7,service:"team",params:[{type:"Property",name:"team",reflectMapper:ic.team}],response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},getTeamsById:{sid:8,cid:34,service:"team",params:[{type:"LongArray",name:"teamIds"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:ai.team},{type:"StrArray",name:"tids"}],ignoreErrCodes:[816]},getTeamMembers:{sid:8,cid:11,service:"team",params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:ai.teamMember},{type:"Number",name:"timetag"}]},getMutedTeamMembers:{sid:8,cid:27,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:ai.teamMember}]},addTeamMembers:{sid:8,cid:5,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}],response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},removeTeamMembers:{sid:8,cid:6,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applyTeam:{sid:8,cid:13,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:ai.team}]},addTeamManagers:{sid:8,cid:16,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:8,cid:17,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateMyMemberInfo:{sid:8,cid:19,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:ic.teamMember}]},updateNickInTeam:{sid:8,cid:20,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:ic.teamMember}]},muteTeamMember:{sid:8,cid:25,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:8,cid:33,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}],response:[{type:"Object",name:"accountsMap"}]},muteTeam:{sid:8,cid:32,service:"team",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},passTeamApply:{sid:8,cid:14,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:8,cid:15,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptTeamInvite:{sid:8,cid:21,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:8,cid:22,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncTeams:{sid:8,cid:109,service:"team",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",reflectMapper:ai.team}]},syncCreateTeam:{sid:8,cid:101,service:"team",response:[{type:"Property",name:"team",reflectMapper:ai.team}]},syncUpdateTeamMember:{sid:8,cid:119,service:"team",response:[{type:"Property",name:"teamMember",reflectMapper:ai.teamMember}]},syncMyTeamMembers:{sid:8,cid:126,ext:"sync",service:"team",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember",reflectMapper:ai.teamMember},{type:"Number",name:"timetag"}]}},Ty={"3_7":"getUsersNameCardFromServer","3_10":"updateMyNameCard","3_109":"syncMyNameCard","3_110":"onUpdateMyNameCard","3_3":"setBlack","3_103":"onUpdateBlackList","3_5":"setMute","3_105":"onUpdateMuteList","3_8":"syncRelations"},sc={user:{account:1,nick:3,avatar:4,signature:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13},relationMember:{account:0,isMuted:1,isBlack:2,createTime:3,updateTime:4}},Kl=ri(sc),TS={syncMyNameCard:{sid:3,cid:109,service:"user",response:[{type:"Property",name:"user",reflectMapper:Kl.user},{type:"Number",name:"timetag"}]},setBlack:{service:"user",sid:3,cid:3,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateBlackList:{service:"user",sid:3,cid:103,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},setMute:{service:"user",sid:3,cid:5,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateMuteList:{service:"user",sid:3,cid:105,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},syncRelations:{service:"user",sid:3,cid:8,params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"list",reflectMapper:Kl.relationMember},{type:"Number",name:"timetag"}]},getUsersNameCardFromServer:{service:"user",sid:3,cid:7,params:[{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"users",reflectMapper:Kl.user}]},updateMyNameCard:{service:"user",sid:3,cid:10,params:[{type:"Property",name:"user",reflectMapper:sc.user}],response:[{type:"Number",name:"timetag"}]},onUpdateMyNameCard:{service:"user",sid:3,cid:110,response:[{type:"Property",name:"user",reflectMapper:Kl.user}]}},Sy={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1},needForcePush:{type:"boolean",required:!1},forcePushIDsList:{type:"string",allowEmpty:!1,required:!1},forcePushContent:{type:"string",allowEmpty:!1,required:!1}};function SS(w,M){var L,D=ga!==void 0&&gd(w)||w["@@iterator"];if(D)return Oo(L=(D=D.call(w)).next).call(L,D);if(hs(w)||(D=function(Oe,ue){var Pt;if(Oe){if(typeof Oe=="string")return My(Oe,ue);var jt=Mo(Pt=Object.prototype.toString.call(Oe)).call(Pt,8,-1);if(jt==="Object"&&Oe.constructor&&(jt=Oe.constructor.name),jt==="Map"||jt==="Set")return Ep(Oe);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return My(Oe,ue)}}(w))||M&&w&&typeof w.length=="number"){D&&(w=D);var k=0;return function(){return k>=w.length?{done:!0}:{done:!1,value:w[k++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function My(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,D=new Array(M);L<M;L++)D[L]=w[L];return D}var bh={subType:{type:"string"},setting:{resendFlag:{type:"boolean"},envConfig:{type:"string"},needSaveHistory:{type:"boolean"},needRoaming:{type:"boolean"},needOffline:{type:"boolean"},needSelfSync:{type:"boolean"},needRouted:{type:"boolean"},needUpdateSession:{type:"boolean"},isMuted:{type:"boolean"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBIZID:{type:"string"},clientAntispamHitting:{type:"boolean"},antiSpamUsingYidun:{type:"boolean"},yidunCallbackURL:{type:"string"},yidunAntiCheating:{type:"string"},yidunAntiSpamExtension:{type:"string"},yidunAntiSpamResult:{type:"string"}},pushInfo:Sy,teamSpecializationInfo:{needACK:{type:"boolean"},isACKSent:{type:"boolean"},ackSnapshot:{type:"number"}},threadMessageInfo:{replyMsgFromAccount:{type:"string"},replyMsgToAccount:{type:"string"},replyMsgTime:{type:"number"},replyMsgIdServer:{type:"string"},replyMsgIdClient:{type:"string"},threadMsgFromAccount:{type:"string"},threadMsgToAccount:{type:"string"},threadMsgTime:{type:"number"},threadMsgIdServer:{type:"string"},threadMsgIdClient:{type:"string"}}},Ic={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMemberMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function Ts(w,M){return $a[w.scene]+"-"+(w.to===M?w.from:w.to)}function Up(w,M){return w.from===M?w.to===M?"in":"out":"in"}function Bs(w,M){var L=M.account,D=M.featureValue,k=M.statusValue,Y=M.sessionAck,Oe=M.msgReceiptTime,ue=$a[w.scene],Pt=w.to===L?w.from:w.to,jt=Xi.default,ur=ha.unread;ko(w.isInBlackList)>0?(ur=ha.refused,delete w.isInBlackList):ur=w.from===L?Oe&&Oe>=+w.time?ha.receipt:ha.sent:Y&&Y>=+w.time?ha.read:ha.unread;var gr=Cr(Cr({},Zi(bh,w)),{scene:ue,type:ac[w.type],fromClientType:Vl[w.fromClientType],flow:Up(w,L),target:Pt,to:w.to,from:w.from,time:w.time?+w.time:void 0,userUpdateTime:w.userUpdateTime?+w.userUpdateTime:void 0,idClient:w.idClient,sessionId:ue+"-"+Pt,status:ha[k||ur],feature:Xi[D||jt]});if(typeof gr.attach=="string")try{gr.attach=JSON.parse(gr.attach)}catch{}return gr.type==="notification"&&(gr.attach=gr.attach?function(Mr){var xr,Fr={};if(Fr.type=Ic[Mr.id]||Mr.id,!Mr.data)return Fr;var Dr,zr={ids:"accounts",id:"account",attach:"custom",channel:"channelId",calltype:"netcallType",mute:"mute",duration:"duration",time:"time",from:"from",ext:"ext"},Hr=Mr.data;return In(xr=Vo(zr)).call(xr,function(Kr){Hr[Kr]!==void 0&&(Fr[zr[Kr]]=Hr[Kr])}),Hr.tinfo&&(Fr.team=xc(Es(Hr.tinfo,ai.team))),Hr.uinfos&&(Fr.users=To(Dr=Hr.uinfos).call(Dr,function(Kr){return zl(Es(Kr,Kl.user))})),Hr.mute!==void 0&&(Fr.mute=ko(Hr.mute)===1),Fr}(gr.attach):{}),gr}function _d(w,M){return w&&w.length>0?Wl(To(w).call(w,function(L){return Bs(L,M)})):[]}function Wl(w){for(var M,L,D={},k=SS(w);!(L=k()).done;){var Y=L.value,Oe=D[Y.idClient];Oe&&Oe.time>Y.time||(D[Y.idClient]=Y)}return To(M=Vo(D)).call(M,function(ue){return D[ue]})}function gl(w,M){M===void 0&&(M=!0);var L=Cr({},w);if(L.pushInfo&&M){for(var D in L.pushInfo)typeof L.pushInfo[D]=="boolean"?L[D]=L.pushInfo[D]?1:0:L[D]=L.pushInfo[D];delete L.pushInfo}return L.scene===$a.team&&L.needForcePush&&(L.forcePushContent=L.forcePushContent||L.pushContent,L.forcePushIDsList=L.forcePushIDsList?L.forcePushIDsList:"#%@all@%#"),L}function wd(w,M){return To(w).call(w,function(L){var D;return D=M||(mS(ko(L.scene))?L.scene:ko(L.scene)===1?"p2p":"team"),{deletedTime:ko(L.time),from:L.from,idClient:L.deletedIdClient||L.idClient,idServer:L.deletedIdServer||L.idServer,scene:D,time:ko(L.time),to:L.to}})}var Th=Array.prototype.reverse,Yo=function(M){return M==null?M:Th.call(M)},zo=function(){function w(M){this.core=M}return w.prototype.processBroadcastMsg=function(L){var D=To(L).call(L,function(k){return Cr(Cr({},k),{time:ko(k.time)})});return this.core.sendCmd("batchMarkRead",{sid:7,cid:17,ids:To(D).call(D,function(k){return k.id})}),D},w}(),Sh={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1}},Cy={pushContent:8,pushPayload:9,needPush:107,needPushBadge:109,needPushNick:110},Ha={"4_4":"syncOfflineMsgs","4_9":"syncRoamingMsgs","4_17":"syncRoamingMsgs","4_21":"syncDeleteSelfMsgs","7_1":"sendMsg","8_23":"getHistoryTeamMsgs","21_14":"getHistorySuperTeamMsgs","8_2":"sendTeamMsg","21_2":"sendSuperTeamMsg","7_11":"sendMsgReceipt","7_13":"recallMsg","7_24":"deleteSelfMsgs","21_17":"recallSuperTeamMsg","7_2":"onMsg","8_3":"onMsg","21_3":"onMsg","7_101":"onMsg","8_102":"onMsg","21_102":"onMsg","8_4":"nimOnTeamMsgs","4_16":"syncBroadcastMsg","7_17":"onBroadcastMsg","7_123":"onDeleteSelfMsg","7_124":"onDeleteSelfMsgs"},La=Cr({scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resendFlag:13,userUpdateTime:14,ext:15,needAntiSpam:21,antiSpamContent:22,antiSpamBIZID:23,clientAntispamHitting:24,antiSpamUsingYidun:25,needACK:26,yidunCallbackURL:27,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,isDeleted:39,callbackExt:40,subType:41,yidunAntiCheating:42,envConfig:43,yidunAntiSpamExtension:44,yidunAntiSpamResult:45,needSaveHistory:100,needRoaming:101,needSelfSync:102,isMuted:104,needRouted:105,isInBlackList:106,needOffline:108,isReplyMsg:111,ackSnapshot:112},{pushContent:17,pushPayload:16,forcePushIDsList:18,forcePushContent:19,needForcePush:20,needPush:107,needPushBadge:109,needPushNick:110}),Ec={msg:La,recallMsgTag:Cr({time:0,type:1,to:2,from:3,ps:4,attach:5,deletedIdClient:10,deletedIdServer:11,opeAccount:16,env:21},Cy),deleteSelfMsgTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,ext:8},msgReceiptTag:{to:1,from:2,time:7,idClient:11},broadcastMsg:{id:1,fromAccid:2,time:4,body:5}},ii=ri(Ec),MS={sendMsg:{sid:7,cid:1,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ii.msg}],ignoreErrCodes:[7101]},sendTeamMsg:{sid:8,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ii.msg}]},sendSuperTeamMsg:{sid:21,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ii.msg}]},onMsg:{sid:7,cid:2,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ii.msg}]},nimOnTeamMsgs:{sid:8,cid:4,service:"msg",response:[{type:"PropertyArray",name:"datas",reflectMapper:ii.msg}]},getHistoryTeamMsgs:{sid:8,cid:23,service:"msg",params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ii.msg}]},getHistorySuperTeamMsgs:{sid:21,cid:14,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ii.msg}],service:"msg"},recallMsg:{sid:7,cid:13,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:Ec.recallMsgTag}]},deleteSelfMsgs:{sid:7,cid:24,service:"msg",params:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ec.deleteSelfMsgTag}],response:[{type:"Long",name:"timetag"}]},recallSuperTeamMsg:{sid:21,cid:17,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:Ec.recallMsgTag}]},sendMsgReceipt:{sid:7,cid:11,service:"msg",params:[{type:"Property",name:"msgReceiptTag",reflectMapper:Ec.msgReceiptTag}],response:[{type:"Property",name:"msgReceiptTag",reflectMapper:ii.msgReceiptTag}]},batchMarkRead:{sid:4,cid:5,service:"msg",isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},syncMsgReceipts:{sid:4,cid:12,service:"msg",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:ii.msgReceiptTag},{type:"Number",name:"timetag"}]},syncOfflineMsgs:{sid:4,cid:4,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ii.msg}]},syncRoamingMsgs:{sid:4,cid:9,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ii.msg}]},syncBroadcastMsg:{sid:4,cid:16,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ii.broadcastMsg}]},onBroadcastMsg:{sid:7,cid:17,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ii.broadcastMsg}]},onDeleteSelfMsg:{sid:7,cid:123,service:"msg",response:[{type:"Property",name:"deletedMsg",reflectMapper:ii.deleteSelfMsgTag}]},onDeleteSelfMsgs:{sid:7,cid:124,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ii.deleteSelfMsgTag}]},syncDeleteSelfMsgs:{sid:4,cid:21,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ii.deleteSelfMsgTag}]}},ky=function(w){function M(D){var k;return(k=w.call(this,"msg",D)||this).service=new zo(D),qa({cmdMap:Ha,cmdConfig:MS}),k}No(M,w);var L=M.prototype;return L.sendTextMsg=function(k){return En({body:{type:"string",allowEmpty:!1}},k),this.sendMsg(Cr(Cr({},k),{type:"text"}))},L.sendTipMsg=function(k){return En({body:{type:"string",allowEmpty:!1}},k),this.sendMsg(Cr(Cr({},k),{type:"tip"}))},L.sendGeoLocationMsg=function(k){return En({attach:{type:"object",rules:{title:{type:"string",allowEmpty:!1},lat:{type:"number"},lng:{type:"number"}}}},k),this.sendMsg(Cr(Cr({},k),{type:"geo",attach:Wo(k.attach)}))},L.sendCustomMsg=function(k){return En({attach:{type:"string",allowEmpty:!1}},k),this.sendMsg(Cr(Cr({},k),{type:"custom"}))},L.sendMsg=function(k){var Y,Oe,ue=this;!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please send message after syncdone event"),En({scene:{type:"enum",values:ys($a)},type:{type:"enum",values:ys(ac)},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},setting:{type:"object",rules:{resendFlag:{type:"boolean",required:!1},needSaveHistory:{type:"boolean",required:!1},needRoaming:{type:"boolean",required:!1},needOffline:{type:"boolean",required:!1},needSelfSync:{type:"boolean",required:!1},needRouted:{type:"boolean",required:!1},needUpdateSession:{type:"boolean",required:!1}},required:!1},antiSpamInfo:{type:"object",required:!1,rules:{clientAntispamHitting:{type:"boolean",required:!1},antiSpamUsingYidun:{type:"boolean",required:!1}}},pushInfo:{type:"object",required:!1,rules:Sy},teamSpecializationInfo:{type:"object",required:!1,rules:{needACK:{type:"boolean",required:!1}}}},k);var Pt,jt=k.scene==="p2p"?"sendMsg":k.scene==="team"?"sendTeamMsg":"sendSuperTeamMsg",ur=function(Mr,xr,Fr,Dr){Mr.onSendBefore,Mr.onUploadStart,Mr.onUploadDone;var zr=Mr.replyMsg,Hr=Pi(Mr,["onSendBefore","onUploadStart","onUploadDone","replyMsg"]),Kr=Cr(Cr({},Td(bh,Hr)),{scene:$a[Mr.scene],type:ac[Mr.type],from:xr,fromClientType:16,fromDeviceId:Fr,fromNick:Dr==null?void 0:Dr.nick,userUpdateTime:Dr==null?void 0:Dr.updateTime,status:ha[ha.sending]});if(Kr.idClient=Kr.resendFlag?Mr.idClient:_p(),!Kr.idClient)throw new Tg("idClient is required to resend a message","idClient","required");return Kr=gl(Kr,!1),zr&&(Kr.replyMsgFromAccount=zr.from,Kr.replyMsgToAccount=zr.to,Kr.replyMsgTime=+zr.time,Kr.replyMsgIdServer=zr.idServer,Kr.replyMsgIdClient=zr.idClient,Kr.threadMsgFromAccount=zr.from,Kr.threadMsgToAccount=zr.to,Kr.threadMsgTime=+zr.time,Kr.threadMsgIdServer=zr.idServer,Kr.threadMsgIdClient=zr.idClient,zr.threadMessageInfo&&zr.threadMessageInfo.threadMsgIdServer&&(Kr.threadMsgFromAccount=zr.threadMessageInfo.threadMsgFromAccount,Kr.threadMsgToAccount=zr.threadMessageInfo.threadMsgToAccount,Kr.threadMsgTime=zr.threadMessageInfo.threadMsgTime,Kr.threadMsgIdServer=zr.threadMessageInfo.threadMsgIdServer,Kr.threadMsgIdClient=zr.threadMessageInfo.threadMsgIdClient)),Kr}(k,this.core.account,this.core.config.deviceId,(Oe=this.core.user)===null||Oe===void 0?void 0:Oe.myInfo),gr=Bs(Cr(Cr({},ur),{time:new Date().getTime()}),{account:this.core.account,featureValue:Xi.default,statusValue:ha.sending});try{k.onSendBefore&&k.onSendBefore(gr)}catch(yr){this.logger.error("sendMsg: options.onSendBefore error",yr)}return this.core.eventBus.emit("session/updateForNewMsg",gr),this.core.sendCmd(jt,{msg:ur}).then(function(yr){var Mr=yr.content,xr=yr.error;if(Pt=Mr.msg,xr)throw xr;var Fr=Bs(Cr(Cr({},ur),Mr.msg),{account:ue.core.account,featureValue:Xi.default,statusValue:ha.sent});return Fr.from===Fr.to&&ue.markMsgsAck([Fr]),ue.core.eventBus.emit("session/updateForNewMsg",Fr),ue.core.reporter.report("msgSend",{msgId:Fr.idServer,clientId:Fr.idClient,msgTime:Fr.time,fromAccid:k.scene==="p2p"?ue.core.account:"",toAccid:Fr.to,type:$a[Fr.scene],roomId:"",tid:k.scene==="p2p"?"":Fr.to,result:200,faiReason:"",rt:ia()-gr.time}),Fr}).catch(function(yr){var Mr=Bs(Cr(Cr(Cr({},ur),{time:new Date().getTime()}),Pt),{account:ue.core.account,featureValue:Xi.default,statusValue:yr.code===7101?ha.refused:ha.sendFailed});throw yr.msg=Mr,ue.core.eventBus.emit("session/updateForNewMsg",Mr),ue.core.reporter.report("msgSend",{msgId:Mr.idServer,clientId:Mr.idClient,msgTime:Mr.time,fromAccid:k.scene==="p2p"?ue.core.account:"",toAccid:Mr.to,type:$a[Mr.scene],roomId:"",tid:k.scene==="p2p"?"":Mr.to,result:yr==null?void 0:yr.code,faiReason:(yr==null?void 0:yr.message)||"",rt:ia()-gr.time}),yr})},L.resendMsg=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}}},k),Oe=k.msg,ue=Cr(Cr({},Oe),{attach:Oe.attach?Wo(Oe.attach):void 0,setting:{resendFlag:!0}}),Oe.from===this.core.account){jt.next=5;break}throw new Error("You can only resend messages that you sent: "+Oe.idClient);case 5:return jt.abrupt("return",this.sendMsg(ue));case 6:case"end":return jt.stop()}},Y,this)}))},L.forwardMsg=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}},scene:{type:"enum",values:ys($a)},to:{type:"string",allowEmpty:!1}},k),Oe=k.msg,ue=Cr(Cr({},Oe),{scene:k.scene,to:k.to,attach:Oe.attach?Wo(Oe.attach):void 0}),jt.abrupt("return",this.sendMsg(ue));case 4:case"end":return jt.stop()}},Y,this)}))},L.sendImageMsg=function(k){return this.doSendFile(Cr(Cr({},k),{type:"image"}))},L.sendFileMsg=function(k){return this.doSendFile(Cr(Cr({},k),{type:"file"}))},L.sendAudioMsg=function(k){return this.doSendFile(Cr(Cr({},k),{type:"audio"}))},L.sendVideoMsg=function(k){return this.doSendFile(Cr(Cr({},k),{type:"video"}))},L.doSendFile=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(En({scene:{type:"enum",values:ys($a)},to:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},k),Oe=k.attach){jt.next=28;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){jt.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return jt.prev=5,this.core.reporter.reportTraceStart("nos",{user_id:this.core.account,action:"upload"}),jt.next=9,this.core.cloudStorage.uploadFile(k);case 9:Oe=jt.sent,this.core.reporter.reportTraceEnd("nos",!0),jt.next=20;break;case 13:throw jt.prev=13,jt.t0=jt.catch(5),ue=jt.t0,this.core.reporter.reportTraceUpdateV2("nos",{operation_type:"transfer",description:ue.message,code:ue.code||0,target:"",succeed:!1}),this.core.reporter.reportTraceEnd("nos",!1),this.logger.error("sendFile:: upload File error or abort",jt.t0),jt.t0;case 20:jt.prev=20,k.onUploadDone&&k.onUploadDone(Oe),jt.next=28;break;case 24:throw jt.prev=24,jt.t1=jt.catch(20),this.logger.error("sendFile options.onUploadDone err",jt.t1),jt.t1;case 28:return jt.abrupt("return",this.sendMsg(Cr(Cr({},k),{attach:Wo(Oe),type:k.type})));case 29:case"end":return jt.stop()}},Y,this,[[5,13],[20,24]])}))},L.recallMsg=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call recallMsg after syncdone event"),En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},scene:{type:"enum",values:ys($a)},time:{type:"number"}}},pushInfo:{type:"object",required:!1,rules:Sh},ps:{type:"string",allowEmpty:!1,required:!1}},k),ue=k.msg,Pt={p2p:"recallMsg",team:"recallMsg",superTeam:"recallSuperTeamMsg"},jt={p2p:7,team:8,superTeam:12},gr.next=7,this.core.sendCmd(Pt[ue.scene],{recallMsgTag:gl({time:ue.time,type:jt[ue.scene],to:ue.to,from:ue.from,ps:k.ps,attach:k.attach,deletedIdClient:ue.idClient,deletedIdServer:ue.idServer,opeAccount:ue.from,env:k.env,pushInfo:k.pushInfo})});case 7:return this.core.eventBus.emit("session/updateForDeletedMsg",wd([ue])),gr.abrupt("return",ue);case 9:case"end":return gr.stop()}},Oe,this)}))},L.deleteSelfMsgs=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call deleteSelfMsgs after syncdone event"),En({msgs:{type:"array",rules:{scene:{type:"enum",values:["p2p","team"]},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},time:{type:"number",allowEmpty:!1}}},ext:{type:"string",allowEmpty:!1,required:!1}},k),ue=k.msgs,Pt=To(ue).call(ue,function(yr){return{scene:yr.scene==="p2p"?1:2,from:yr.from,to:yr.to,idServer:yr.idServer,idClient:yr.idClient,time:yr.time,ext:k.ext}}),gr.next=6,this.core.sendCmd("deleteSelfMsgs",{deletedMsgs:Pt});case 6:return jt=wd(Pt),this.core.eventBus.emit("session/updateForDeletedMsg",jt),gr.abrupt("return",jt);case 9:case"end":return gr.stop()}},Oe,this)}))},L.sendMsgReceipt=function(k){var Y,Oe,ue;return Sn(this,void 0,void 0,ir.mark(function Pt(){var jt,ur,gr,yr;return ir.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call sendMsgReceipt after syncdone event"),En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},target:{type:"string",allowEmpty:!1},time:{type:"number"}}}},k),(jt=k.msg).scene==="p2p"&&jt.flow==="in"){xr.next=6;break}return this.logger.warn("Msg scene: "+jt.scene+", flow: "+jt.flow+" is not allowed to send msg receipt"),xr.abrupt("return",void 0);case 6:return ur={to:jt.target,idClient:jt.idClient,time:jt.time},xr.next=9,this.core.sendCmd("sendMsgReceipt",{msgReceiptTag:ur});case 9:return gr=xr.sent,yr=ko((ue=(Oe=gr.content)===null||Oe===void 0?void 0:Oe.msgReceiptTag)===null||ue===void 0?void 0:ue.time),xr.abrupt("return",Cr(Cr({},ur),{time:yr?Math.min(yr,ur.time):ur.time}));case 12:case"end":return xr.stop()}},Pt,this)}))},L.sendTeamMsgReceipt=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call sendTeamMsgReceipt after syncdone event"),En({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}},max:50}},k),ue=k.teamMsgReceipts,this.core.sendCmd("sendTeamMsgReceipt",{teamMsgReceipts:ue}),jt.abrupt("return",void 0);case 5:case"end":return jt.stop()}},Oe,this)}))},L.getTeamMsgReads=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},k),ue=k.teamMsgReceipts,gr.next=4,this.core.sendCmd("getTeamMsgReads",{teamMsgReceipts:ue});case 4:return Pt=gr.sent,jt=(jt=(Y=Pt.content)===null||Y===void 0?void 0:Y.teamMsgReceipts)?To(jt).call(jt,function(yr){return Cr(Cr({},yr),{read:ko(yr.read),unread:ko(yr.unread)})}):[],gr.abrupt("return",jt);case 8:case"end":return gr.stop()}},Oe,this)}))},L.getTeamMsgReadAccounts=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamMsgReceipt:{type:"object",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},k),Oe=k.teamMsgReceipt,jt.next=4,this.core.sendCmd("getTeamMsgReadAccounts",{teamMsgReceiptTag:Oe});case 4:return ue=jt.sent,jt.abrupt("return",ue.content);case 6:case"end":return jt.stop()}},Y,this)}))},L.markMsgsAck=function(k){if(k&&k.length>0){var Y=[],Oe=[];In(k).call(k,function(ue){ue.scene==="p2p"&&ue.flow==="in"?Y.push(ue):ue.scene==="team"&&ue.flow==="in"&&Oe.push(ue)}),Y.length>0&&this.core.sendCmd("batchMarkRead",{sid:7,cid:2,ids:To(Y).call(Y,function(ue){return ue.idServer})}),Oe.length>0&&this.core.sendCmd("batchMarkRead",{sid:8,cid:3,ids:To(Oe).call(Oe,function(ue){return ue.idServer})})}},L.onMsgHandler=function(k){var Y;if(k.error)this.logger.error("msgHandler::recvError",k.error);else{var Oe=typeof Oi(k,"raw.r[0]")=="number"?""+k.raw.r[0]:void 0,ue=k.content.msg;ue.idServer=ue.idServer||Oe;var Pt=ia(),jt=Ts(ue,this.core.account),ur=(Y=this.core.session)===null||Y===void 0?void 0:Y.getSessionWithUncomplete({id:jt}),gr=Bs(ue,ur?{account:this.core.account,sessionAck:ur.ack,msgReceiptTime:ur.msgReceiptTime}:{account:this.core.account});if(this.core.options.debugLevel==="debug"?this.logger.debug("msgHandler::recvMsg",gr.idClient,gr.idServer,gr):this.logger.log("msgHandler::recvMsg",gr.idClient,gr.idServer),this.markMsgsAck([gr]),this.core.eventBus.emit("session/updateForNewMsg",gr),this.core.emit("msg",gr),gr.type==="notification")this.core.eventBus.emit("team/onNotification",gr);else if(gr.flow!=="out"){var yr=gr.scene==="p2p",Mr={msgId:gr.idServer,clientId:gr.idClient,receiveTime:k.__receiveTime,serverTime:gr.time,callbackTime:ia(),preHandleTime:Pt,fromAccid:gr.from,toAccid:this.core.account,type:$a[gr.scene],tid:yr?"":gr.to,result:200,failReason:"",rt:ia()-gr.time};this.core.reporter.report("msgReceive",Mr,!0)}}},L.nimOnTeamMsgsHandler=function(k){var Y,Oe=this;In(Y=k.content.datas).call(Y,function(ue){Oe.onMsgHandler(Cr({},k,{content:{msg:ue}}))})},L.syncRoamingMsgsHandler=function(k){var Y,Oe,ue=k.content.msgs||[];if(ue.length!==0){var Pt=Ts(ue[0],this.core.account),jt=(Y=this.core.session)===null||Y===void 0?void 0:Y.getSessionWithUncomplete({id:Pt}),ur=(ue=_d(ue,jt?{account:this.core.account,featureValue:Xi.roam,sessionAck:jt.ack,msgReceiptTime:jt.msgReceiptTime}:{account:this.core.account,featureValue:Xi.roam}))[0].time,gr={timetag:ur,sessionId:Pt,msgs:Yo(ue)};!((Oe=this.core.sync)===null||Oe===void 0)&&Oe.getSyncDoneFlag()||this.core.eventBus.emit("session/syncMsgs",gr),this.core.emit("syncRoamingMsgs",gr),this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:ur})}},L.syncOfflineMsgsHandler=function(k){var Y,Oe=this,ue=k.content.msgs||[];if(ue.length!==0){var Pt={},jt=[];In(ue).call(ue,function(gr){var yr=Ts(gr,Oe.core.account),Mr=Oe.core.session.getSessionWithUncomplete({id:yr}),xr=Bs(gr,Mr?{account:Oe.core.account,featureValue:Xi.leave,sessionAck:Mr.ack,msgReceiptTime:Mr.msgReceiptTime}:{account:Oe.core.account,featureValue:Xi.leave});jt.push(xr),Pt[xr.sessionId]?Pt[xr.sessionId].push(xr):Pt[xr.sessionId]=[xr]}),this.markMsgsAck(jt);var ur=0;In(Y=Vo(Pt)).call(Y,function(gr){var yr,Mr=wc(yr=Pt[gr]).call(yr,function(Fr,Dr){return Dr.time-Fr.time});(Mr=Wl(Mr))[0].time>ur&&(ur=Mr[0].time);var xr={timetag:Mr[0].time,sessionId:gr,msgs:Mr};Oe.core.eventBus.emit("session/syncMsgs",xr),Oe.core.emit("syncOfflineMsgs",xr)}),this.core.eventBus.emit("sync/updateTimetag",{offlineMsgs:ur})}},L.syncDeleteSelfMsgsHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.deletedMsgs;Oe&&Oe.length>0||this.logger.warn("syncDeleteSelfMsgs:: no msgs");var ue=Oe[Oe.length-1].time;this.core.eventBus.emit("sync/updateTimetag",{deleteSelfMsgs:ue})},L.onDeleteSelfMsgHandler=function(k){var Y=wd([k.content.deletedMsg]);this.core.eventBus.emit("session/updateForDeletedMsg",Y),this.core.emit("deleteSelfMsgs",Y)},L.onDeleteSelfMsgsHandler=function(k){var Y=wd(k.content.deletedMsgs);this.core.eventBus.emit("session/updateForDeletedMsg",Y),this.core.emit("deleteSelfMsgs",Y)},L.onBroadcastMsgHandler=function(k){var Y=k.content.msg,Oe=this.service.processBroadcastMsg([Y]);this.core.emit("broadcastMsgs",Oe)},L.syncBroadcastMsgHandler=function(k){var Y=k.content.msgs,Oe=this.service.processBroadcastMsg(Y);this.core.emit("broadcastMsgs",Oe)},M}(oi),CS={"5_1":"sync"},kS={sync:{sid:5,cid:1,service:"sync",isNoResponse:!0,params:[{type:"Property",name:"sync",reflectMapper:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,recallMsg:17,sessionAck:18,broadcastMsgs:20,signaling:21,superTeams:22,mySuperTeamMembers:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteSelfMsgs:27,stickTopSessions:28,sessionHistoryMsgsDelete:29}}],response:[{type:"Number",name:"timetag"}]}},qp=function(w){function M(D,k){var Y;return k===void 0&&(k={}),(Y=w.call(this,"sync",D)||this).options=k,Y.syncDoneFlag=!1,Y.options=Cr({myInfo:!!D.user.name,offlineMsgs:!!D.msg.name,teams:!!D.team.name,myTeamMembers:!!D.team.name,roamingMsgs:!!D.msg.name,relations:!!D.user.name,friends:!!D.friend.name,friendUsers:!!D.user.name,msgReceipts:!!D.msg.name,recallMsg:!!D.msg.name,sessionAck:!!D.session.name,superTeamSessionAck:!!D.session.name,superTeams:!!D.superTeam.name,mySuperTeamMembers:!!D.superTeam.name,superTeamRoamingMsgs:!!D.superTeam.name,deleteSuperTeamMsg:!!D.superTeam.name,deleteSelfMsgs:!!D.msg.name,sessionHistoryMsgsDelete:!!D.msgLog.name,signaling:!!D.signaling.name},k),Y.timetags={},Y.pArray=[],Y.initEventListeners(),qa({cmdMap:CS,cmdConfig:kS}),Y}No(M,w);var L=M.prototype;return L.getSyncDoneFlag=function(){return this.syncDoneFlag},L.doSync=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Y=this.genSyncParams(),this.logger.log("doSync: ",Y),ue.next=4,this.core.sendCmd("sync",{sync:Y});case 4:case"end":return ue.stop()}},k,this)}))},L.initEventListeners=function(){var k=this;this.core.eventBus.on("sync/updateTimetag",function(Y){var Oe;In(Oe=Vo(Y)).call(Oe,function(ue){Y[ue]>(k.timetags[ue]||0)&&(k.timetags[ue]=Y[ue])})}),this.core.eventBus.on("logined",function(){k.syncDoneFlag=!1})},L.genSyncParams=function(){var k,Y,Oe=this;return op(k=li(Y=Vo(this.options)).call(Y,function(ue){var Pt=ue;return Oe.options[Pt]})).call(k,function(ue,Pt){var jt=Pt;return ue[jt]=Oe.timetags[jt]||0,ue},{})},L.handleImmediate=function(k){var Y;this.core.session&&this.core.session.onSyncDone&&this.core.session.onSyncDone(),this.logger.log("sync: emit syncdone",(Y=k.content)===null||Y===void 0?void 0:Y.timetag),this.syncDoneFlag=!0,this.core.emit("syncdone")},L.syncHandler=function(k){var Y=this;(function(){return typeof tt<"u"&&tt.getSystemInfo?"TT":typeof swan<"u"&&swan.getSystemInfo?"BAIDU":typeof my<"u"&&my.getSystemInfo?"ALI":typeof wx<"u"&&wx.getSystemInfo?"WX":"unknow environment"})()==="ALI"?(this.logger.log("sync: emit ALIAPP sycnHandler, handle later"),ho(function(){Y.handleImmediate(k)},100)):this.handleImmediate(k)},M}(oi),va={"6_26":"getNosCdnHost"},_y={getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:ri({nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4}}).nosConfigTag}]}},_S=function(w){function M(L){var D;return(D=w.call(this,"misc",L)||this).core=L,D.nosCdnHostTimer=0,qa({cmdMap:va,cmdConfig:_y}),D}return No(M,w),M}(oi),Gl=function(M,L,D){L=="__proto__"&&pd?pd(M,L,{configurable:!0,enumerable:!0,value:D,writable:!0}):M[L]=D},wy=Object.prototype.hasOwnProperty,Vp=function(M,L,D){var k=M[L];wy.call(M,L)&&nc(k,D)&&(D!==void 0||L in M)||Gl(M,L,D)},Mh=function(M,L,D,k){if(!ms(M))return M;for(var Y=-1,Oe=(L=vd(L,M)).length,ue=Oe-1,Pt=M;Pt!=null&&++Y<Oe;){var jt=dl(L[Y]),ur=D;if(jt==="__proto__"||jt==="constructor"||jt==="prototype")return M;if(Y!=ue){var gr=Pt[jt];(ur=k?k(gr,jt,Pt):void 0)===void 0&&(ur=ms(gr)?gr:jp(L[Y+1])?[]:{})}Vp(Pt,jt,ur),Pt=Pt[jt]}return M},xy=function(M,L,D){for(var k=-1,Y=L.length,Oe={};++k<Y;){var ue=L[k],Pt=Wg(M,ue);D(Pt,ue)&&Mh(Oe,vd(ue,M),Pt)}return Oe},wS=function(M,L){return M!=null&&L in Object(M)},xS=function(M,L,D){for(var k=-1,Y=(L=vd(L,M)).length,Oe=!1;++k<Y;){var ue=dl(L[k]);if(!(Oe=M!=null&&D(M,ue)))break;M=M[ue]}return Oe||++k!=Y?Oe:!!(Y=M==null?0:M.length)&&Bg(Y)&&jp(ue,Y)&&(bs(M)||Sd(M))},xd=function(M,L){return M!=null&&xS(M,L,wS)},Ch=function(M,L){return xy(M,L,function(D,k){return xd(M,k)})},Ql=function(M,L){for(var D=-1,k=L.length,Y=M.length;++D<k;)M[Y+D]=L[D];return M},cc=Qi?Qi.isConcatSpreadable:void 0,IS=function(M){return bs(M)||Sd(M)||!!(cc&&M&&M[cc])},Pc=function w(M,L,D,k,Y){var Oe=-1,ue=M.length;for(D||(D=IS),Y||(Y=[]);++Oe<ue;){var Pt=M[Oe];L>0&&D(Pt)?L>1?w(Pt,L-1,D,k,Y):Ql(Y,Pt):k||(Y[Y.length]=Pt)}return Y},ES=function(M){return M!=null&&M.length?Pc(M,1):[]},Id=function(M){return Ev(hp(M,void 0,ES),M+"")}(function(w,M){return w==null?{}:Ch(w,M)}),Iy=function(w){function M(D){var k;return(k=w.call(this,"user",D)||this).myInfo=zl({}),qa({cmdMap:Ty,cmdConfig:TS}),k}No(M,w);var L=M.prototype;return L.setBlack=function(k){return En({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},k),this.core.sendCmd("setBlack",k).then(function(){})},L.setMute=function(k){return En({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},k),this.core.sendCmd("setMute",k).then(function(){})},L.getRelations=function(){return this.core.sendCmd("syncRelations",{timetag:0})},L.getBlackList=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Y=ue.sent,ue.abrupt("return",Y.blackList||[]);case 4:case"end":return ue.stop()}},k,this)}))},L.getMuteList=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Y=ue.sent,ue.abrupt("return",Y.muteList||[]);case 4:case"end":return ue.stop()}},k,this)}))},L.updatePushToken=function(){return Sn(this,void 0,void 0,ir.mark(function k(){return ir.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return Oe.stop()}},k,this)}))},L.updateAppBackground=function(){return Sn(this,void 0,void 0,ir.mark(function k(){return ir.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return Oe.stop()}},k,this)}))},L.getUsersNameCardFromServer=function(k){var Y=this;return En({accounts:{type:"array",max:150,itemType:"string"}},k),this.core.sendCmd("getUsersNameCardFromServer",Id(k,["accounts"])).then(function(Oe){var ue,Pt=Oe.content;return Y.logger.log("user:: getUsers done",k.accounts),Pt&&Pt.users?To(ue=Pt.users).call(ue,function(jt){return zl(jt)}):[]})},L.updateMyNameCard=function(k){var Y=this;if(En({nick:{type:"string",required:!1},avatar:{type:"string",required:!1},signature:{type:"string",required:!1},gender:{type:"enum",values:ys(Cd),required:!1},email:{type:"string",required:!1},birth:{type:"string",required:!1},tel:{type:"string",required:!1},ext:{type:"string",required:!1}},k),Vo(k).length===0)return uo.resolve(this.myInfo);var Oe=Id(k,["nick","avatar","signature","email","birth","tel","ext"]);return k.gender&&(Oe.gender=Cd[k.gender]),this.core.sendCmd("updateMyNameCard",{user:Oe}).then(function(ue){var Pt=ue.content;return Pt&&Pt.timetag&&Y.core.eventBus.emit("sync/updateTimetag",{myInfo:+Pt.timetag}),k.gender&&(Oe.gender=k.gender),Y.myInfo=Cr({},Y.myInfo,Oe),Y.myInfo})},L.onUpdateBlackListHandler=function(k){var Y=k.content;Y.account?this.core.emit("updateBlackList",Y):this.logger.warn("onUpdateBlackListHandler: no account")},L.onUpdateMuteListHandler=function(k){var Y=k.content;Y.account?this.core.emit("updateMuteList",Y):this.logger.warn("onUpdateBlackListHandler: no account")},L.syncRelationsHandler=function(k){var Y=k.content,Oe=Y.list,ue=Y.timetag,Pt={blackList:[],muteList:[]};return ue&&this.core.eventBus.emit("sync/updateTimetag",{relations:ue}),Oe&&Oe.length&&In(Oe).call(Oe,function(jt){var ur=function(yr){var Mr={account:yr.account,updateTime:+yr.updateTime,createTime:+yr.createTime};return yr.isMuted==="1"&&(Mr.isMuted=!0),yr.isBlack==="1"&&(Mr.isBlack=!0),Mr}(jt);ur.isBlack&&Pt.blackList.push(ur),ur.isMuted&&Pt.muteList.push(ur)}),this.core.emit("relations",Pt),uo.resolve(Pt)},L.syncMyNameCardHandler=function(k){k.content.user&&(this.myInfo=zl(k.content.user),this.core.emit("syncMyNameCard",this.myInfo),this.core.eventBus.emit("sync/updateTimetag",{myInfo:k.content.timetag}))},L.onUpdateMyNameCardHandler=function(k){var Y=k.content.user;Y?(Cr(this.myInfo,zl(Y)),this.core.emit("updateMyNameCard",this.myInfo)):this.logger.warn("onUpdateMyNameCardHandler no user info")},M}(oi),Hp=function(){this.__data__=new up,this.size=0},ca=function(M){var L=this.__data__,D=L.delete(M);return this.size=L.size,D},es=function(M){return this.__data__.get(M)},hl=function(M){return this.__data__.has(M)},PS=function(M,L){var D=this.__data__;if(D instanceof up){var k=D.__data__;if(!dd||k.length<199)return k.push([M,L]),this.size=++D.size,this;D=this.__data__=new fp(k)}return D.set(M,L),this.size=D.size,this};function vl(w){var M=this.__data__=new up(w);this.size=M.size}vl.prototype.clear=Hp,vl.prototype.delete=ca,vl.prototype.get=es,vl.prototype.has=hl,vl.prototype.set=PS;var Ed=vl,AS=function(M,L){for(var D=-1,k=M==null?0:M.length;++D<k;)if(L(M[D],D,M))return!0;return!1},Ey=function(M,L,D,k,Y,Oe){var ue=1&D,Pt=M.length,jt=L.length;if(Pt!=jt&&!(ue&&jt>Pt))return!1;var ur=Oe.get(M),gr=Oe.get(L);if(ur&&gr)return ur==L&&gr==M;var yr=-1,Mr=!0,xr=2&D?new Pg:void 0;for(Oe.set(M,L),Oe.set(L,M);++yr<Pt;){var Fr=M[yr],Dr=L[yr];if(k)var zr=ue?k(Dr,Fr,yr,L,M,Oe):k(Fr,Dr,yr,M,L,Oe);if(zr!==void 0){if(zr)continue;Mr=!1;break}if(xr){if(!AS(L,function(Hr,Kr){if(!gp(xr,Kr)&&(Fr===Hr||Y(Fr,Hr,D,k,Oe)))return xr.push(Kr)})){Mr=!1;break}}else if(Fr!==Dr&&!Y(Fr,Dr,D,k,Oe)){Mr=!1;break}}return Oe.delete(M),Oe.delete(L),Mr},zp=Ai.Uint8Array,OS=function(M){var L=-1,D=Array(M.size);return M.forEach(function(k,Y){D[++L]=[Y,k]}),D},Py=Qi?Qi.prototype:void 0,Pd=Py?Py.valueOf:void 0,Ad=function(M,L,D,k,Y,Oe,ue){switch(D){case"[object DataView]":if(M.byteLength!=L.byteLength||M.byteOffset!=L.byteOffset)return!1;M=M.buffer,L=L.buffer;case"[object ArrayBuffer]":return!(M.byteLength!=L.byteLength||!Oe(new zp(M),new zp(L)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nc(+M,+L);case"[object Error]":return M.name==L.name&&M.message==L.message;case"[object RegExp]":case"[object String]":return M==L+"";case"[object Map]":var Pt=OS;case"[object Set]":var jt=1&k;if(Pt||(Pt=Wr),M.size!=L.size&&!jt)return!1;var ur=ue.get(M);if(ur)return ur==L;k|=2,ue.set(M,L);var gr=Ey(Pt(M),Pt(L),k,Y,Oe,ue);return ue.delete(M),gr;case"[object Symbol]":if(Pd)return Pd.call(M)==Pd.call(L)}return!1},Od=function(M,L,D){var k=L(M);return bs(M)?k:Ql(k,D(M))},kh=function(M,L){for(var D=-1,k=M==null?0:M.length,Y=0,Oe=[];++D<k;){var ue=M[D];L(ue,D,M)&&(Oe[Y++]=ue)}return Oe},Rd=function(){return[]},Nd=Object.prototype.propertyIsEnumerable,_h=Object.getOwnPropertySymbols,RS=_h?function(w){return w==null?[]:(w=Object(w),kh(_h(w),function(M){return Nd.call(w,M)}))}:Rd,Bd=RS,Kp=function(M){return Od(M,Md,Bd)},NS=Object.prototype.hasOwnProperty,Ay=function(M,L,D,k,Y,Oe){var ue=1&D,Pt=Kp(M),jt=Pt.length;if(jt!=Kp(L).length&&!ue)return!1;for(var ur=jt;ur--;){var gr=Pt[ur];if(!(ue?gr in L:NS.call(L,gr)))return!1}var yr=Oe.get(M),Mr=Oe.get(L);if(yr&&Mr)return yr==L&&Mr==M;var xr=!0;Oe.set(M,L),Oe.set(L,M);for(var Fr=ue;++ur<jt;){var Dr=M[gr=Pt[ur]],zr=L[gr];if(k)var Hr=ue?k(zr,Dr,gr,L,M,Oe):k(Dr,zr,gr,M,L,Oe);if(!(Hr===void 0?Dr===zr||Y(Dr,zr,D,k,Oe):Hr)){xr=!1;break}Fr||(Fr=gr=="constructor")}if(xr&&!Fr){var Kr=M.constructor,kn=L.constructor;Kr==kn||!("constructor"in M)||!("constructor"in L)||typeof Kr=="function"&&Kr instanceof Kr&&typeof kn=="function"&&kn instanceof kn||(xr=!1)}return Oe.delete(M),Oe.delete(L),xr},wh=cl(Ai,"DataView"),Wp=cl(Ai,"Promise"),xh=cl(Ai,"WeakMap"),Ih="[object Map]",Jl="[object Promise]",Fd="[object Set]",yl="[object WeakMap]",bl="[object DataView]",BS=Cc(wh),Oy=Cc(dd),FS=Cc(Wp),LS=Cc(Dl),Ac=Cc(xh),Ss=yc;(wh&&Ss(new wh(new ArrayBuffer(1)))!=bl||dd&&Ss(new dd)!=Ih||Wp&&Ss(Wp.resolve())!=Jl||Dl&&Ss(new Dl)!=Fd||xh&&Ss(new xh)!=yl)&&(Ss=function(w){var M=yc(w),L=M=="[object Object]"?w.constructor:void 0,D=L?Cc(L):"";if(D)switch(D){case BS:return bl;case Oy:return Ih;case FS:return Jl;case LS:return Fd;case Ac:return yl}return M});var pi=Ss,Ki="[object Arguments]",Gp="[object Array]",Yl="[object Object]",Ry=Object.prototype.hasOwnProperty,Tl=function(M,L,D,k,Y,Oe){var ue=bs(M),Pt=bs(L),jt=ue?Gp:pi(M),ur=Pt?Gp:pi(L),gr=(jt=jt==Ki?Yl:jt)==Yl,yr=(ur=ur==Ki?Yl:ur)==Yl,Mr=jt==ur;if(Mr&&Lp(M)){if(!Lp(L))return!1;ue=!0,gr=!1}if(Mr&&!gr)return Oe||(Oe=new Ed),ue||dh(M)?Ey(M,L,D,k,Y,Oe):Ad(M,L,jt,D,k,Y,Oe);if(!(1&D)){var xr=gr&&Ry.call(M,"__wrapped__"),Fr=yr&&Ry.call(L,"__wrapped__");if(xr||Fr){var Dr=xr?M.value():M,zr=Fr?L.value():L;return Oe||(Oe=new Ed),Y(Dr,zr,D,k,Oe)}}return!!Mr&&(Oe||(Oe=new Ed),Ay(M,L,D,k,Y,Oe))},Ny=function w(M,L,D,k,Y){return M===L||(M==null||L==null||!vs(M)&&!vs(L)?M!=M&&L!=L:Tl(M,L,D,k,w,Y))},jS=function(M,L,D,k){var Y=D.length,Oe=Y,ue=!k;if(M==null)return!Oe;for(M=Object(M);Y--;){var Pt=D[Y];if(ue&&Pt[2]?Pt[1]!==M[Pt[0]]:!(Pt[0]in M))return!1}for(;++Y<Oe;){var jt=(Pt=D[Y])[0],ur=M[jt],gr=Pt[1];if(ue&&Pt[2]){if(ur===void 0&&!(jt in M))return!1}else{var yr=new Ed;if(k)var Mr=k(ur,gr,jt,M,L,yr);if(!(Mr===void 0?Ny(gr,ur,3,k,yr):Mr))return!1}}return!0},By=function(M){return M==M&&!ms(M)},Qp=function(M){for(var L=Md(M),D=L.length;D--;){var k=L[D],Y=M[k];L[D]=[k,Y,By(Y)]}return L},Ld=function(M,L){return function(D){return D!=null&&D[M]===L&&(L!==void 0||M in Object(D))}},Ms=function(M){var L=Qp(M);return L.length==1&&L[0][2]?Ld(L[0][0],L[0][1]):function(D){return D===M||jS(D,M,L)}},jd=function(M,L){return Hg(M)&&By(L)?Ld(dl(M),L):function(D){var k=Oi(D,M);return k===void 0&&k===L?xd(D,M):Ny(L,k,3)}},Oc=function(M){return function(L){return L==null?void 0:L[M]}},Xo=function(M){return function(L){return Wg(L,M)}},lc=function(M){return Hg(M)?Oc(dl(M)):Xo(M)},Xl=function(M){return typeof M=="function"?M:M==null?jl:typeof M=="object"?bs(M)?jd(M[0],M[1]):Ms(M):lc(M)},Eh=/\s/,DS=function(M){for(var L=M.length;L--&&Eh.test(M.charAt(L)););return L},$S=/^\s+/,US=function(M){return M&&M.slice(0,DS(M)+1).replace($S,"")},qS=/^[-+]0x[0-9a-f]+$/i,VS=/^0b[01]+$/i,HS=/^0o[0-7]+$/i,zS=parseInt,KS=function(M){if(typeof M=="number")return M;if(Pp(M))return NaN;if(ms(M)){var L=typeof M.valueOf=="function"?M.valueOf():M;M=ms(L)?L+"":L}if(typeof M!="string")return M===0?M:+M;M=US(M);var D=VS.test(M);return D||HS.test(M)?zS(M.slice(2),D?2:8):qS.test(M)?NaN:+M},Ph=1/0,WS=function(M){return M?(M=KS(M))===Ph||M===-1/0?17976931348623157e292*(M<0?-1:1):M==M?M:0:M===0?M:0},Fy=function(M){var L=WS(M),D=L%1;return L==L?D?L-D:L:0},GS=Math.max,Ah=function(M,L,D){var k=M==null?0:M.length;if(!k)return-1;var Y=D==null?0:Fy(D);return Y<0&&(Y=GS(k+Y,0)),Cv(M,Xl(L),Y)},QS={"4_12":"syncMsgReceipts","4_14":"syncSessionAck","4_20":"syncSuperTeamSessionAck","4_22":"nimSyncSessionsWithMoreRoaming","4_25":"syncSessionReliableInfo","7_12":"multiSyncMsgReceipt","7_16":"markSessionAck","7_25":"markMultSessionsAck","7_116":"syncMarkSessionAck","21_25":"markSuperTeamSessionAck","21_32":"markMultSuperTeamSessionsAck","21_125":"syncMarkSuperTeamSessionAck","4_23":"nimSyncStickTopSessions","23_12":"nimAddStickTopSession","23_13":"nimDeleteStickTopSession","23_14":"nimUpdateStickTopSession","23_112":"nimMultiSyncAddStickTopSession","23_113":"nimMultiSyncDeleteStickTopSession","23_114":"nimMultiSyncUpdateStickTopSession"},Zl={msgReceiptTag:{to:1,from:2,time:7,idClient:11},stickTopSessionTag:{id:1,ext:2,createTime:3,updateTime:4},sessionAckTag:{scene:1,to:2,timetag:3},sessionReliableSyncTag:{scene:1,sessionId:2,syncStatus:3,syncEndMsgId:4,syncEndMsgidClient:5,syncEndMsgTime:6,syncStartMsgid:7,syncStartMsgidClient:8,syncStartMsgTime:9,nextMsgid:10,nextMsgidClient:11,nextMsgTime:12,roamMsgSync:13,offlineMsgSync:14,netCallOfflineMsgSync:15}},uc=ri(Zl),JS={syncMsgReceipts:{sid:4,cid:12,service:"session",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:uc.msgReceiptTag},{type:"Number",name:"timetag"}]},syncSessionAck:{sid:4,cid:14,service:"session",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},syncSuperTeamSessionAck:{sid:4,cid:20,service:"session",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},multiSyncMsgReceipt:{sid:7,cid:12,service:"session",response:[{type:"Property",name:"msgReceiptTag",reflectMapper:uc.msgReceiptTag}]},markSessionAck:{sid:7,cid:16,service:"session",params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSessionAck:{sid:7,cid:116,service:"session",response:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSuperTeamSessionAck:{sid:21,cid:125,service:"session",response:[{type:"String",name:"to"},{type:"long",name:"timetag"}]},markMultSessionsAck:{sid:7,cid:25,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:Zl.sessionAckTag}]},markSuperTeamSessionAck:{sid:21,cid:25,service:"session",params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},nimAddStickTopSession:{sid:23,cid:12,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:uc.stickTopSessionTag}]},nimDeleteStickTopSession:{sid:23,cid:13,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Number",name:"timetag"}]},nimUpdateStickTopSession:{sid:23,cid:14,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:uc.stickTopSessionTag}]},nimMultiSyncAddStickTopSession:{sid:23,cid:112,service:"session",response:[{type:"Property",name:"data",reflectMapper:uc.stickTopSessionTag}]},nimMultiSyncDeleteStickTopSession:{sid:23,cid:113,service:"session",response:[{type:"Number",name:"timetag"},{type:"Property",name:"data",reflectMapper:uc.stickTopSessionTag}]},nimMultiSyncUpdateStickTopSession:{sid:23,cid:114,service:"session",response:[{type:"Property",name:"data",reflectMapper:uc.stickTopSessionTag}]},nimSyncStickTopSessions:{sid:4,cid:23,service:"session",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"isThereAnyChange"},{type:"PropertyArray",name:"datas",reflectMapper:uc.stickTopSessionTag}]},markMultSuperTeamSessionsAck:{sid:21,cid:32,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:Zl.sessionAckTag}]},nimSyncSessionsWithMoreRoaming:{sid:21,cid:22,service:"session",response:[{type:"PropertyArray",name:"datas",reflectMapper:{0:"scene",1:"to",2:"from",7:"time",12:"idServer"}}]},syncSessionReliableInfo:{sid:4,cid:25,service:"session",response:[{type:"Property",name:"context",reflectMapper:{1:"timetag",2:"type"}},{type:"PropertyArray",name:"datas",reflectMapper:uc.sessionReliableSyncTag}]}},YS={id:{type:"string"},ext:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Jp(w,M,L){L===void 0&&(L=!0);var D=Zi(YS,w);return D.isStickOnTop=L,D.id=M.id,Cr(Cr({},M),{stickTopInfo:M.stickTopInfo?Cr({},M.stickTopInfo,D):D})}var XS={scene:{type:"enum",values:$a},time:{type:"number"}},Dd=function(){function w(L){this.core=L}var M=w.prototype;return M.getSession=function(D){return this.core.session.getSessionWithUncomplete({id:D})||this.core.session.createSession(D)},M.addStickTopSession=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},D),Y=Lo(D.id),Oe=Y.scene,ue=Y.accid,yr.next=4,this.core.sendCmd("nimAddStickTopSession",{tag:{id:(Oe==="superTeam"?"super_team":Oe)+"|"+ue,ext:D.ext}});case 4:return Pt=yr.sent,jt=this.getSession(D.id),ur=Jp(Pt.content.data,jt),yr.abrupt("return",ur);case 8:case"end":return yr.stop()}},k,this)}))},M.deleteStickTopSession=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({id:{type:"string",allowEmpty:!1}},D),Y=Lo(D.id),Oe=Y.scene,ue=Y.accid,yr.next=4,this.core.sendCmd("nimDeleteStickTopSession",{tag:{id:(Oe==="superTeam"?"super_team":Oe)+"|"+ue}});case 4:return Pt=yr.sent,jt=this.getSession(D.id),ur=Jp({updateTime:Pt.content.timetag},jt,!1),yr.abrupt("return",ur);case 8:case"end":return yr.stop()}},k,this)}))},M.updateStickTopSession=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},D),Y=Lo(D.id),Oe=Y.scene,ue=Y.accid,yr.next=4,this.core.sendCmd("nimUpdateStickTopSession",{tag:{id:(Oe==="superTeam"?"super_team":Oe)+"|"+ue,ext:D.ext}});case 4:return Pt=yr.sent,jt=this.getSession(D.id),ur=Jp(Pt.content.data,jt),yr.abrupt("return",ur);case 8:case"end":return yr.stop()}},k,this)}))},M.stickTopSessionHandler=function(D,k){k===void 0&&(k=!0);var Y=Lo(D.id,"|"),Oe=Y.scene+"-"+Y.accid;return Jp(D,this.getSession(Oe),k)},w}(),eu=function(){function w(L){this.core=L,this.logger=L.logger}var M=w.prototype;return M.canSessionResetUnreadCount=function(D){var k=D.id;if(D.lastMsg===void 0)throw new Error("Session::canSessionResetUnreadCount: session "+k+" is not completly, lastMsg undefined");return D.lastMsg!==null||D.unread>0?!(D.ack&&D.lastMsg&&D.ack>=D.lastMsg.time)||(this.logger.log("Session::canSessionResetUnreadCount: session "+k+" reset failed, ack time is greater than last message time"),!1):(this.logger.log("Session::canSessionResetUnreadCount: session "+k+" doesn't need to be updated, lastMsg null and unread 0"),!1)},M.filterSessionForResetUnreadCount=function(D){var k=this,Y={cmd:"markMultSuperTeamSessionsAck",params:[]},Oe={cmd:"markMultSessionsAck",params:[]};return In(D).call(D,function(ue){var Pt;try{if(!k.canSessionResetUnreadCount(ue))return;var jt=Lo(ue.id),ur=jt.accid,gr=jt.scene,yr={to:ur,sessionId:ue.id,timetag:((Pt=ue==null?void 0:ue.lastMsg)===null||Pt===void 0?void 0:Pt.time)||ue.updateTime||0},Mr=function(Fr){return Td({scene:{type:"enum",values:$a}},Fr)}({scene:gr});gr==="superTeam"?Y.params.push(yr):Oe.params.push(Cr(Cr({},yr),Mr))}catch(xr){k.logger.warn(xr)}}),{superTeam:Y,p2pOrTeam:Oe}},w}(),Oh=function(M,L,D){var k=-1,Y=M.length;L<0&&(L=-L>Y?0:Y+L),(D=D>Y?Y:D)<0&&(D+=Y),Y=L>D?0:D-L>>>0,L>>>=0;for(var Oe=Array(Y);++k<Y;)Oe[k]=M[k+L];return Oe},ZS=function(M,L,D){if(!ms(D))return!1;var k=typeof L;return!!(k=="number"?yp(D)&&jp(L,D.length):k=="string"&&L in D)&&nc(D[L],M)},eM=Math.ceil,tM=Math.max,Ly=function(M,L,D){L=(D?ZS(M,L,D):L===void 0)?1:tM(Fy(L),0);var k=M==null?0:M.length;if(!k||L<1)return[];for(var Y=0,Oe=0,ue=Array(eM(k/L));Y<k;)ue[Oe++]=Oh(M,Y,Y+=L);return ue};function za(w,M){var L,D=ga!==void 0&&gd(w)||w["@@iterator"];if(D)return Oo(L=(D=D.call(w)).next).call(L,D);if(hs(w)||(D=function(Oe,ue){var Pt;if(Oe){if(typeof Oe=="string")return la(Oe,ue);var jt=Mo(Pt=Object.prototype.toString.call(Oe)).call(Pt,8,-1);if(jt==="Object"&&Oe.constructor&&(jt=Oe.constructor.name),jt==="Map"||jt==="Set")return Ep(Oe);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return la(Oe,ue)}}(w))||M&&w&&typeof w.length=="number"){D&&(w=D);var k=0;return function(){return k>=w.length?{done:!0}:{done:!1,value:w[k++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function la(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,D=new Array(M);L<M;L++)D[L]=w[L];return D}var rM=function(w){function M(D,k){var Y;return(Y=w.call(this,"session",D)||this).list=new ec,Y.unreadCountFilterFn=function(Oe){return!0},Y.lastMessageFilterFn=function(Oe){return!0},Y.initEventListeners(),qa({cmdMap:QS,cmdConfig:JS}),typeof(k==null?void 0:k.unreadCountFilterFn)=="function"&&(Y.unreadCountFilterFn=k.unreadCountFilterFn),typeof(k==null?void 0:k.lastMessageFilterFn)=="function"&&(Y.lastMessageFilterFn=k.lastMessageFilterFn),Y.stickTopService=new Dd(D),Y.unreadModule=new eu(D),Y}No(M,w);var L=M.prototype;return L.initEventListeners=function(){var k,Y,Oe,ue=this;this.core.eventBus.on("session/syncMsgs",Oo(k=this.onSyncMsgs).call(k,this)),this.core.eventBus.on("session/updateForNewMsg",Oo(Y=this.updateSessionWithMsg).call(Y,this)),this.core.eventBus.on("session/updateForClearMsg",function(Pt,jt){jt===void 0&&(jt=!0),Pt&&Pt.length>0&&In(Pt).call(Pt,function(ur){ue.updateSession({id:ur.sessionId,lastMsg:null,unread:0,unreadMsgs:[]},jt)})}),this.core.eventBus.on("session/updateForDeletedMsg",Oo(Oe=this.updateSessionForDeletedMsg).call(Oe,this))},L.createSession=function(k,Y){try{var Oe=Lo(k);return{id:k,scene:Oe.scene,to:Oe.accid,lastMsg:Y,updateTime:Y?Y.time:0,unread:0,unreadMsgs:[],ack:0}}catch(ue){throw this.logger.error("Failed to create session with "+k,ue),new Error("Failed to create session with "+k)}},L.getSession=function(k){En({id:{type:"string",allowEmpty:!1}},k);var Y=this.list.get(k.id);if(this.isSessionComplete(Y))return Y},L.getSessionWithUncomplete=function(k){return this.list.get(k.id)},L.getAllSessions=function(){for(var k,Y=[],Oe=za(this.list);!(k=Oe()).done;){var ue=k.value;ue[0];var Pt=ue[1];this.isSessionComplete(Pt)&&Y.push(Pt)}return Y},L.getSessions=function(k){En({limit:{type:"number",required:!1},lastSessionId:{type:"string",allowEmpty:!1,required:!1},desc:{type:"boolean",required:!1}},k);var Y=[],Oe=k.limit,ue=Oe===void 0?100:Oe,Pt=k.desc,jt=Pt===void 0||Pt,ur=k.lastSessionId,gr=0;if(jt){for(var yr,Mr,xr=za(this.list);!(Mr=xr()).done;){var Fr=Mr.value,Dr=Fr[0],zr=Fr[1];if(ur===Dr)break;this.isSessionComplete(zr)&&Y.push(zr)}return kl(yr=Mo(Y).call(Y,-ue)).call(yr)}for(var Hr,Kr=za(this.list);!(Hr=Kr()).done;){var kn=Hr.value,Yn=kn[0],Hn=kn[1];if(ur)Yn===ur&&(ur=void 0);else if(this.isSessionComplete(Hn)){if(++gr>ue)break;Y.push(Hn)}}return Y},L.resetSessionUnreadCount=function(k){var Y,Oe;return Sn(this,void 0,void 0,ir.mark(function ue(){var Pt,jt,ur,gr,yr,Mr,xr,Fr,Dr=this;return ir.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call resetSessionUnreadCount after syncdone event"),En({id:{type:"string",allowEmpty:!1}},k),En({id:{type:"string",allowEmpty:!1}},k),Pt=k.id,jt=this.list.get(Pt)){Hr.next=8;break}throw this.logger.warn("resetSessionUnreadCount: can not find session "+Pt),new Error("Session::canSessionResetUnreadCount: can not find session "+Pt);case 8:ur=!1;try{ur=this.unreadModule.canSessionResetUnreadCount(jt)}catch(Kr){this.logger.warn(Kr)}if(ur!==!1){Hr.next=12;break}return Hr.abrupt("return");case 12:return gr=Lo(Pt),yr=gr.accid,Mr=gr.scene,xr={to:yr,timetag:((Oe=jt==null?void 0:jt.lastMsg)===null||Oe===void 0?void 0:Oe.time)||jt.updateTime||0},Fr="markSuperTeamSessionAck",Mr!=="superTeam"&&(xr.scene=Mr==="p2p"?0:1,Fr="markSessionAck"),Hr.abrupt("return",this.core.sendCmd(Fr,xr).then(function(){var Kr=Dr.storeUnreadByAck(Pt,xr.timetag);Kr&&Dr.core.emit("updateSession",Kr)}));case 17:case"end":return Hr.stop()}},ue,this)}))},L.resetMultiSessionUnreadCount=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur,gr,yr,Mr,xr,Fr,Dr,zr,Hr,Kr,kn,Yn=this;return ir.wrap(function(xo){for(;;)switch(xo.prev=xo.next){case 0:!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call resetMultiSessionUnreadCount after syncdone event"),En({ids:{type:"array",itemType:"string",min:1}},k),jt=li(ue=To(Pt=k.ids).call(Pt,function(Ln){return Yn.list.get(Ln)})).call(ue,function(Ln,_r){return!!Ln||(Yn.logger.warn("Session::canSessionResetUnreadCount: can not find session "+k.ids[_r]),!1)}),ur=this.unreadModule.filterSessionForResetUnreadCount(jt),gr=ur.superTeam,yr=ur.p2pOrTeam,Mr=Ly(gr.params,10),xr=Ly(yr.params,10),Fr=za(Mr);case 7:if((Dr=Fr()).done){xo.next=14;break}return zr=Dr.value,xo.next=11,this.core.sendCmd(gr.cmd,{datas:zr});case 11:In(zr).call(zr,function(Ln){var _r=Yn.storeUnreadByAck(Ln.sessionId,Ln.timetag);_r&&Yn.core.emit("updateSession",_r)});case 12:xo.next=7;break;case 14:Hr=za(xr);case 15:if((Kr=Hr()).done){xo.next=22;break}return kn=Kr.value,xo.next=19,this.core.sendCmd(yr.cmd,{datas:kn});case 19:In(kn).call(kn,function(Ln){var _r=Yn.storeUnreadByAck(Ln.sessionId,Ln.timetag);_r&&Yn.core.emit("updateSession",_r)});case 20:xo.next=15;break;case 22:case"end":return xo.stop()}},Oe,this)}))},L.resetAllSessionsUnreadCount=function(){var k,Y;!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call resetAllSessionsUnreadCount after syncdone event");var Oe=[];return In(k=this.list).call(k,function(ue){Oe.push(ue.id)}),this.resetMultiSessionUnreadCount({ids:Oe})},L.deleteSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(En({id:{type:"string",allowEmpty:!1},isSyncToServer:{type:"boolean",required:!1}},k),this.list.delete(k.id),!this.core.msgLog||!k.isSyncToServer){ue.next=5;break}return ue.next=5,this.core.msgLog.deleteRoamingMsgs({ids:[k.id]});case 5:case"end":return ue.stop()}},Y,this)}))},L.deleteAllSessionsFromLocal=function(){this.list.clear()},L.addStickTopSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.stickTopService.addStickTopSession(k);case 2:return Oe=Pt.sent,this.list.set(Oe.id,Oe),Pt.abrupt("return",Oe);case 5:case"end":return Pt.stop()}},Y,this)}))},L.deleteStickTopSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.stickTopService.deleteStickTopSession(k);case 2:return Oe=Pt.sent,this.list.set(Oe.id,Oe),Pt.abrupt("return",Oe);case 5:case"end":return Pt.stop()}},Y,this)}))},L.updateStickTopSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.stickTopService.updateStickTopSession(k);case 2:return Oe=Pt.sent,this.list.set(Oe.id,Oe),Pt.abrupt("return",Oe);case 5:case"end":return Pt.stop()}},Y,this)}))},L.nimMultiSyncAddStickTopSessionHandler=function(k){var Y=this.stickTopService.stickTopSessionHandler(k.content.data);this.list.set(Y.id,Y),this.core.emit("updateSession",Y)},L.nimMultiSyncDeleteStickTopSessionHandler=function(k){var Y=this.stickTopService.stickTopSessionHandler({id:k.content.data.id,updateTime:k.content.timetag},!1);this.list.set(Y.id,Y),this.core.emit("updateSession",Y)},L.nimMultiSyncUpdateStickTopSessionHandler=function(k){var Y=this.stickTopService.stickTopSessionHandler(k.content.data);this.list.set(Y.id,Y),this.core.emit("updateSession",Y)},L.nimSyncStickTopSessionsHandler=function(k){var Y=this,Oe=k.content.datas;In(Oe).call(Oe,function(ue){var Pt=Y.stickTopService.stickTopSessionHandler(ue);Y.list.set(Pt.id,Pt)})},L.updateSessionWithMsg=function(k){var Y=!0,Oe=!0;try{Y=!!this.unreadCountFilterFn(k)}catch(ur){this.logger.error("session:updateSessionWithMsg, unreadCountFilterFn error",ur)}try{Oe=!!this.lastMessageFilterFn(k)}catch(ur){this.logger.error("session:updateSessionWithMsg, lastMessageFilterFn error",ur)}var ue=this.list.get(k.sessionId)||this.createSession(k.sessionId),Pt=!1;if(this.logger.log("session:updateSessionWithMsg, pending ",k.sessionId,k.idClient,k.idServer,Oe,Y),Oe&&(!ue.lastMsg||ue.lastMsg.time<k.time||k.status===ha[ha.sending]||ue.lastMsg.status===ha[ha.sending])&&(ue.lastMsg=k,ue.updateTime=k.time,Pt=!0),Y&&k.status===ha[ha.unread]&&k.time>(ue.ack||0)){ue.unread++;var jt=ue.unreadMsgs||[];jt.unshift(k),wc(jt).call(jt,function(ur,gr){return gr.time-ur.time}),Pt=!0}Pt&&(this.logger.log("session:updateSessionWithMsg updating ",ue.id,ue.unread,ue.lastMsg&&ue.lastMsg.idClient),this.list.set(ue.id,ue),this.core.emit("updateSession",ue))},L.storeUnreadByAck=function(k,Y){var Oe=this.list.get(k)||this.createSession(k);if(!(Oe.ack&&Y<Oe.ack)){var ue=Oe.unreadMsgs||[],Pt=[],jt=0;return Oe.unreadMsgs=[],ue.length>0&&(In(ue).call(ue,function(ur){ur.time>Y&&(jt++,Pt.push(ur))}),Oe.unreadMsgs=wc(Pt).call(Pt,function(ur,gr){return gr.time-ur.time})),Oe.ack=Y,Oe.unread=jt,Oe.lastMsg&&Oe.lastMsg.status==="unread"&&Y>=Oe.lastMsg.time&&(Oe.lastMsg.status="read"),this.list.set(k,Oe),Oe}this.logger.warn("storeUnreadByAck: not need update ack",k,Y,Oe.ack)},L.updateSession=function(k,Y){Y===void 0&&(Y=!0);var Oe=k.id,ue=this.list.get(Oe)||this.createSession(k.id),Pt=Cr(ue,k);return this.list.set(Oe,Pt),this.logger.log("updateSession: update",Y,Id(k,["id","ack","unread"]),Pt.lastMsg&&Pt.lastMsg.idClient),Y&&this.core.emit("updateSession",Pt),Pt},L.isSessionComplete=function(k){return!!k&&!!(k.id&&k.scene&&k.to)&&k.lastMsg!==void 0},L.syncSessionAckHandler=function(k){var Y,Oe,ue=this,Pt=k.content.p2p||{},jt=k.content.team.m_map||{};this.logger.log("syncSessionAck::",Pt,jt),In(Y=Vo(Pt)).call(Y,function(ur){ue.updateSession({id:"p2p-"+ur,ack:Pt[ur]},!1)}),In(Oe=Vo(jt)).call(Oe,function(ur){ue.updateSession({id:"team-"+ur,ack:jt[ur]},!1)})},L.syncSuperTeamSessionAckHandler=function(k){var Y,Oe=this,ue=k.content.superTeam.m_map;this.logger.log("syncSuperTeamSessionAck::",ue),In(Y=Vo(ue)).call(Y,function(Pt){Oe.updateSession({id:"superTeam-"+Pt,ack:ue[Pt]},!1)})},L.syncMarkSessionAckHandler=function(k){var Y=k.content,Oe=(Y.scene===0?"p2p":Y.scene===1?"team":"superTeam")+"-"+Y.to,ue=this.list.get(Oe);if(ue&&ue.ack&&Y.timetag<ue.ack)this.logger.warn("syncMarkSessionAckHandler: "+Oe+" do not need update ack",ue.ack,Y.timetag);else{var Pt=this.storeUnreadByAck(Oe,Y.timetag);Pt&&this.core.emit("updateSession",Pt)}},L.syncMarkSuperTeamSessionAckHandler=function(k){k.content.scene=5,this.syncMarkSessionAckHandler(k)},L.onSyncDone=function(){var k,Y,Oe,ue=this,Pt=[];In(k=this.list).call(k,function(jt,ur){Pt.push(ue.storeUnreadByAck(ur,jt.ack||0))}),this.list.clear(),In(Y=wc(Pt).call(Pt,function(jt,ur){return jt.updateTime-ur.updateTime})).call(Y,function(jt){ue.list.set(jt.id,jt)}),(Pt=wc(Oe=li(Pt).call(Pt,function(jt){return ue.isSessionComplete(jt)})).call(Oe,function(jt,ur){return ur.updateTime-jt.updateTime})).length>0&&this.core.emit("sessions",Pt)},L.onSyncMsgs=function(k){var Y,Oe=this,ue=this.list.get(k.sessionId),Pt=[];try{var jt;Pt=li(jt=k.msgs).call(jt,function(xr){return Oe.unreadCountFilterFn(JSON.parse(Wo(xr)))})}catch(xr){this.logger.error("session:onSyncMsgs, unreadCountFilterFn error ",xr)}var ur,gr=[];try{var yr;gr=li(yr=k.msgs).call(yr,function(xr){return Oe.lastMessageFilterFn(JSON.parse(Wo(xr)))})}catch(xr){this.logger.error("session:onSyncMsgs, lastMessageFilterFn error ",xr)}gr&&gr.length>0&&(ur=gr[gr.length-1],ur=gr[0].time>ur.time?gr[0]:ur);var Mr=ur?ur.time:0;ue||(ue=ur?this.createSession(k.sessionId,ur):this.createSession(k.sessionId)),ue.unreadMsgs=ue.unreadMsgs?li(Y=ki(Pt).call(Pt,ue.unreadMsgs)).call(Y,function(xr){return xr.status===ha[ha.unread]}):li(Pt).call(Pt,function(xr){return xr.status===ha[ha.unread]}),ue.updateTime&&ue.updateTime>=Mr||(ue.updateTime=Mr),ue.lastMsg&&ue.lastMsg.time>=Mr||(ue.lastMsg=ur),this.list.set(ue.id,ue)},L.updateSessionForDeletedMsg=function(k){var Y,Oe=this,ue={};In(k).call(k,function(Pt){var jt=Pt.to===Oe.core.account?Pt.from:Pt.to,ur=Pt.scene+"-"+jt,gr=Oe.list.get(ur);if(gr){if((gr.ack||0)<Pt.time&&Pt.from!==Oe.core.account&&gr.unread>0&&(gr.unread=gr.unread-1,gr.unreadMsgs&&gr.unreadMsgs.length>0)){var yr,Mr=Ah(gr.unreadMsgs,{idClient:Pt.idClient});Mr>=0&&qg(yr=gr.unreadMsgs).call(yr,Mr,1)}gr.lastMsg&&gr.lastMsg.idClient===Pt.idClient&&(gr.lastMsg=null),ue[gr.id]=!0}}),In(Y=Vo(ue)).call(Y,function(Pt){var jt=Oe.list.get(Pt);jt&&Oe.core.emit("updateSession",jt)})},L.multiSyncMsgReceiptHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.msgReceiptTag;if(Oe){this.updateSessionMsgReceiptTime([Oe],!0),Oe.msgReceiptTime=Oe.time,Oe.sessionId="p2p-"+Oe.from,Oe.time,Oe.from;var ue=Pi(Oe,["time","from"]);this.core.emit("msgReceipts",[ue])}},L.syncMsgReceiptsHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.msgReceipts;Oe&&this.updateSessionMsgReceiptTime(Oe,!1)},L.updateSessionMsgReceiptTime=function(k,Y){var Oe=this;Y===void 0&&(Y=!0),k&&k.length>0&&In(k).call(k,function(ue){var Pt=Oe.list.get("p2p-"+ue.from);Pt||(Pt=Oe.createSession("p2p-"+ue.from));var jt=ko(ue.time);Pt.msgReceiptTime&&Pt.msgReceiptTime>=jt||(Pt.msgReceiptTime=jt,Pt.lastMsg&&Pt.lastMsg.status==="sent"&&jt>=Pt.lastMsg.time&&(Pt.lastMsg.status="receipt"),Oe.logger.log("session: update session "+Pt.id+" msgReceiptTime: "+Pt.msgReceiptTime),Oe.list.set(Pt.id,Pt),Y&&Oe.core.emit("updateSession",Pt))})},L.nimSyncSessionsWithMoreRoamingHandler=function(k){var Y=function(ue,Pt){return To(ue).call(ue,function(jt){var ur=Zi(XS,jt);return ur.sessionId=Ts(jt,Pt),ur})}(k.content.datas,this.core.account);this.logger.log("session:syncSessionsWithMoreRoaming",Y)},M}(oi),nM=function(){function w(L){this.core=L}var M=w.prototype;return M.notifyAddTeamMembers=function(D,k){this.core.emit("addTeamMembers",{team:D,accounts:k,members:bS(D,k)})},M.notifyUpdateTeamManagers=function(D,k,Y,Oe){this.core.emit("updateTeamManagers",{team:{teamId:D,memberUpdateTime:Oe},accounts:k,isManager:Y,members:To(k).call(k,function(ue){return{id:D+"-"+ue,account:ue,type:"manager",updateTime:Oe}})})},M.notifyRemoveTeamMembers=function(D,k){this.core.emit("removeTeamMembers",{team:D,accounts:k})},M.notifyTransferTeam=function(D,k,Y){this.core.emit("transferTeam",{team:D,from:{id:D.teamId+"-"+k,type:"normal",account:k,updateTime:D.memberUpdateTime},to:{id:D.teamId+"-"+Y,type:"owner",account:Y,updateTime:D.memberUpdateTime}})},M.notifyUpdateTeamMembersMute=function(D,k,Y){this.core.emit("updateTeamMembersMute",{team:D,accounts:k,members:To(k).call(k,function(Oe){return{id:D.teamId+"-"+Oe,account:Oe,teamId:D.teamId,mute:Y,updateTime:D.memberUpdateTime}}),mute:Y})},w}(),oM=function(M,L){for(var D=-1,k=M==null?0:M.length;++D<k&&L(M[D],D,M)!==!1;);return M},Yp=function(M,L,D,k){var Y=!D;D||(D={});for(var Oe=-1,ue=L.length;++Oe<ue;){var Pt=L[Oe],jt=k?k(D[Pt],M[Pt],Pt,D,M):void 0;jt===void 0&&(jt=M[Pt]),Y?Gl(D,Pt,jt):Vp(D,Pt,jt)}return D},aM=function(M,L){return M&&Yp(L,Md(L),M)},dc=function(M){var L=[];if(M!=null)for(var D in Object(M))L.push(D);return L},Ri=Object.prototype.hasOwnProperty,Xp=function(M){if(!ms(M))return dc(M);var L=fl(M),D=[];for(var k in M)(k!="constructor"||!L&&Ri.call(M,k))&&D.push(k);return D},Rh=function(M){return yp(M)?iy(M,!0):Xp(M)},fi=function(M,L){return M&&Yp(L,Rh(L),M)},fa=o(function(w,M){var L=M&&!M.nodeType&&M,D=L&&w&&!w.nodeType&&w,k=D&&D.exports===L?Ai.Buffer:void 0,Y=k?k.allocUnsafe:void 0;w.exports=function(ue,Pt){if(Pt)return ue.slice();var jt=ue.length,ur=Y?Y(jt):new ue.constructor(jt);return ue.copy(ur),ur}}),iM=function(M,L){var D=-1,k=M.length;for(L||(L=Array(k));++D<k;)L[D]=M[D];return L},jy=function(M,L){return Yp(M,Bd(M),L)},Zp=Object.getOwnPropertySymbols?function(w){for(var M=[];w;)Ql(M,Bd(w)),w=ah(w);return M}:Rd,Nh=function(M,L){return Yp(M,Zp(M),L)},Dy=function(M){return Od(M,Rh,Zp)},$y=Object.prototype.hasOwnProperty,$d=function(M){var L=M.length,D=new M.constructor(L);return L&&typeof M[0]=="string"&&$y.call(M,"index")&&(D.index=M.index,D.input=M.input),D},ef=function(M){var L=new M.constructor(M.byteLength);return new zp(L).set(new zp(M)),L},Bh=function(M,L){var D=L?ef(M.buffer):M.buffer;return new M.constructor(D,M.byteOffset,M.byteLength)},Uy=/\w*$/,_i=function(M){var L=new M.constructor(M.source,Uy.exec(M));return L.lastIndex=M.lastIndex,L},qy=Qi?Qi.prototype:void 0,Fh=qy?qy.valueOf:void 0,sM=function(M){return Fh?Object(Fh.call(M)):{}},cM=function(M,L){var D=L?ef(M.buffer):M.buffer;return new M.constructor(D,M.byteOffset,M.length)},lM=function(M,L,D){var k=M.constructor;switch(L){case"[object ArrayBuffer]":return ef(M);case"[object Boolean]":case"[object Date]":return new k(+M);case"[object DataView]":return Bh(M,D);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cM(M,D);case"[object Map]":case"[object Set]":return new k;case"[object Number]":case"[object String]":return new k(M);case"[object RegExp]":return _i(M);case"[object Symbol]":return sM(M)}},Vy=Object.create,uM=function(){function w(){}return function(M){if(!ms(M))return{};if(Vy)return Vy(M);w.prototype=M;var L=new w;return w.prototype=void 0,L}}(),dM=function(M){return typeof M.constructor!="function"||fl(M)?{}:uM(ah(M))},pM=function(M){return vs(M)&&pi(M)=="[object Map]"},Lh=ui&&ui.isMap,fM=Lh?Al(Lh):pM,mM=function(M){return vs(M)&&pi(M)=="[object Set]"},Hy=ui&&ui.isSet,jh=Hy?Al(Hy):mM,zy="[object Arguments]",Dh="[object Function]",wi="[object Object]",ya={};ya[zy]=ya["[object Array]"]=ya["[object ArrayBuffer]"]=ya["[object DataView]"]=ya["[object Boolean]"]=ya["[object Date]"]=ya["[object Float32Array]"]=ya["[object Float64Array]"]=ya["[object Int8Array]"]=ya["[object Int16Array]"]=ya["[object Int32Array]"]=ya["[object Map]"]=ya["[object Number]"]=ya[wi]=ya["[object RegExp]"]=ya["[object Set]"]=ya["[object String]"]=ya["[object Symbol]"]=ya["[object Uint8Array]"]=ya["[object Uint8ClampedArray]"]=ya["[object Uint16Array]"]=ya["[object Uint32Array]"]=!0,ya["[object Error]"]=ya[Dh]=ya["[object WeakMap]"]=!1;var gM=function w(M,L,D,k,Y,Oe){var ue,Pt=1&L,jt=2&L,ur=4&L;if(D&&(ue=Y?D(M,k,Y,Oe):D(M)),ue!==void 0)return ue;if(!ms(M))return M;var gr=bs(M);if(gr){if(ue=$d(M),!Pt)return iM(M,ue)}else{var yr=pi(M),Mr=yr==Dh||yr=="[object GeneratorFunction]";if(Lp(M))return fa(M,Pt);if(yr==wi||yr==zy||Mr&&!Y){if(ue=jt||Mr?{}:dM(M),!Pt)return jt?Nh(M,fi(ue,M)):jy(M,aM(ue,M))}else{if(!ya[yr])return Y?M:{};ue=lM(M,yr,Pt)}}Oe||(Oe=new Ed);var xr=Oe.get(M);if(xr)return xr;Oe.set(M,ue),jh(M)?M.forEach(function(Dr){ue.add(w(Dr,L,D,Dr,M,Oe))}):fM(M)&&M.forEach(function(Dr,zr){ue.set(zr,w(Dr,L,D,zr,M,Oe))});var Fr=gr?void 0:(ur?jt?Dy:Kp:jt?Rh:Md)(M);return oM(Fr||M,function(Dr,zr){Fr&&(Dr=M[zr=Dr]),Vp(ue,zr,w(Dr,L,D,zr,M,Oe))}),ue},Rc,pc,fc=function(M){return gM(M,5)},hM=function(w){function M(D){var k;return(k=w.call(this,"team",D)||this).myTeamMembersMap=new ec,k.service=new nM(D),k.core.eventBus.on("team/onNotification",function(Y){return k.notificationHandler(Y)}),qa({cmdMap:yy,cmdConfig:by}),k}No(M,w);var L=M.prototype;return L.mergeMyTeamMembers=function(k){var Y=this;In(k).call(k,function(Oe){var ue=Oe.teamId,Pt=Y.myTeamMembersMap.get(ue),jt=Cr({},Pt,Oe);Y.myTeamMembersMap.set(ue,jt)})},L.getTeamInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),jt.next=3,this.core.sendCmd("getTeamInfo",{teamId:k.teamId});case 3:return Oe=jt.sent,ue=Oe.content.team,jt.abrupt("return",xc(ue));case 6:case"end":return jt.stop()}},Y,this)}))},L.getTeams=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getTeams",{timetag:0});case 2:return Y=Pt.sent,Oe=Y.content.teams,Pt.abrupt("return",vh(Oe));case 5:case"end":return Pt.stop()}},k,this)}))},L.getTeamsById=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamIds:{type:"array",itemType:"string"}},k),jt.next=3,this.core.sendCmd("getTeamsById",{teamIds:k.teamIds});case 3:return Oe=jt.sent,ue=vh(Oe.content.teams),jt.abrupt("return",{teams:ue,tids:Oe.content.tids});case 6:case"end":return jt.stop()}},Y,this)}))},L.createTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({type:{type:"enum",values:["advanced","normal"]},name:{type:"string",allowEmpty:!1},level:{type:"number",required:!1},accounts:{type:"array",itemType:"string",required:!1},ps:{type:"string",allowEmpty:!1,max:5e3,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},k),Oe=yh(k),ur.next=4,this.core.sendCmd("createTeam",{team:Oe,accounts:k.accounts||[],ps:k.ps||""});case 4:return ue=ur.sent,Pt=xc(ue.content.team),ur.abrupt("return",Pt);case 7:case"end":return ur.stop()}},Y,this)}))},L.dismissTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("dismissTeam",{teamId:k.teamId});case 3:case"end":return ue.stop()}},Y,this)}))},L.leaveTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("leaveTeam",{teamId:k.teamId});case 3:case"end":return ue.stop()}},Y,this)}))},L.transferTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("transferTeam",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.updateTeamInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},k),Oe=yh(k),Pt.next=4,this.core.sendCmd("updateTeamInfo",{team:Oe});case 4:return Pt.abrupt("return",xc(Oe));case 5:case"end":return Pt.stop()}},Y,this)}))},L.getTeamMembers=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",required:!1}},k),ur.next=3,this.core.sendCmd("getTeamMembers",{teamId:k.teamId,timetag:0});case 3:if(ue=ur.sent,Pt=$p((Y=ue.content)===null||Y===void 0?void 0:Y.teamMembers),k.accounts&&k.accounts.length>0){ur.next=7;break}return ur.abrupt("return",Pt);case 7:return ur.abrupt("return",li(Pt).call(Pt,function(gr){var yr;return(yr=k.accounts)===null||yr===void 0?void 0:bc(yr).call(yr,gr.account)}));case 8:case"end":return ur.stop()}},Oe,this)}))},L.getMutedTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),jt.next=3,this.core.sendCmd("getMutedTeamMembers",{teamId:k.teamId});case 3:return Oe=jt.sent,ue=Oe.content,jt.abrupt("return",$p(ue.teamMembers));case 6:case"end":return jt.stop()}},Y,this)}))},L.addTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("addTeamMembers",{teamId:k.teamId,accounts:k.accounts,ps:k.ps||"",attach:k.ext||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.removeTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},k),ue.next=3,this.core.sendCmd("removeTeamMembers",{teamId:k.teamId,accounts:k.accounts});case 3:case"end":return ue.stop()}},Y,this)}))},L.applyTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},k),Pt.next=3,this.core.sendCmd("applyTeam",{teamId:k.teamId,ps:k.ps||""});case 3:return Oe=Pt.sent,Pt.abrupt("return",xc(Oe.content.team));case 5:case"end":return Pt.stop()}},Y,this)}))},L.addTeamManagers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},k),ue.next=3,this.core.sendCmd("addTeamManagers",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.removeTeamManagers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},k),ue.next=3,this.core.sendCmd("removeTeamManagers",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.updateMyMemberInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},k),Oe=hy({teamId:k.teamId,nickInTeam:k.nickInTeam,bitConfigMask:k.bitConfigMask,ext:k.ext}),ur.next=4,this.core.sendCmd("updateMyMemberInfo",{teamMember:Oe});case 4:return ue=kd(Cr({updateTime:new Date().getTime(),account:this.core.account},Oe)),this.mergeMyTeamMembers([ue]),this.core.emit("updateTeamMember",ue),Pt=fc(this.myTeamMembersMap.get(ue.teamId)),this.core.emit("myTeamMembers",[Pt]),ur.abrupt("return",ue);case 10:case"end":return ur.stop()}},Y,this)}))},L.updateMemberNick=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},k),Oe=hy({teamId:k.teamId,nickInTeam:k.nickInTeam,account:k.account}),jt.next=4,this.core.sendCmd("updateNickInTeam",{teamMember:Oe});case 4:return ue=kd(Cr({updateTime:new Date().getTime()},Oe)),jt.abrupt("return",ue);case 6:case"end":return jt.stop()}},Y,this)}))},L.muteTeamMember=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},mute:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("muteTeamMember",{teamId:k.teamId,account:k.account,mute:k.mute?1:0});case 3:case"end":return ue.stop()}},Y,this)}))},L.getTeamMemberInvitorAccid=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:200}},k),ue={teamId:k.teamId},k.accounts&&k.accounts.length>0&&(ue.accounts=k.accounts),ur.next=5,this.core.sendCmd("getTeamMemberInvitorAccid",ue);case 5:return Pt=ur.sent,ur.abrupt("return",((Y=Pt.content)===null||Y===void 0?void 0:Y.accountsMap)||{});case 7:case"end":return ur.stop()}},Oe,this)}))},L.muteTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("muteTeam",{teamId:k.teamId,mute:k.mute?1:0});case 3:case"end":return ue.stop()}},Y,this)}))},L.passTeamApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("passTeamApply",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.rejectTeamApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("rejectTeamApply",{teamId:k.teamId,from:k.from,ps:k.ps||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.acceptTeamInvite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("acceptTeamInvite",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.rejectTeamInvite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("rejectTeamInvite",{teamId:k.teamId,from:k.from,ps:k.ps||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.notifyTeamMsgReceiptsHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.teamMsgReceipts;Oe&&Oe.length>0&&(this.core.emit("teamMsgReceipts",Oe),this.core.emit("msgReceipts",Oe))},L.syncTeamsHandler=function(k){var Y=k.content;this.core.eventBus.emit("sync/updateTimetag",{teams:ko(Y.timetag)});var Oe=Y==null?void 0:Y.teams;if(Oe&&Oe.length){var ue=vh(Oe);this.core.emit("teams",ue)}},L.syncCreateTeamHandler=function(k){var Y=k.content,Oe=xc(Y==null?void 0:Y.team),ue=vy(Oe,Oe.owner,"owner");this.core.emit("createTeam",Oe,ue)},L.syncUpdateTeamMemberHandler=function(k){var Y=k.content,Oe=kd(Y==null?void 0:Y.teamMember);Oe.updateTime||(Oe.updateTime=new Date().getTime()),this.mergeMyTeamMembers([Oe]),this.core.emit("updateTeamMember",Oe);var ue=fc(this.myTeamMembersMap.get(Oe.teamId));this.core.emit("myTeamMembers",[ue])},L.syncMyTeamMembersHandler=function(k){var Y,Oe=k.content;this.core.eventBus.emit("sync/updateTimetag",{myTeamMembers:ko(Oe.timetag)});var ue=Oe==null?void 0:To(Y=Oe.teamMembers).call(Y,function(Pt){return kd(Pt)});this.mergeMyTeamMembers(ue),this.core.emit("myTeamMembers",fc(ue))},L.notificationHandler=function(k){var Y=k.attach,Oe=k.scene,ue=k.from,Pt=k.to,jt=k.time,ur=k.idServer,gr=k.idClient,yr=Y.team,Mr=Y.account,xr=Y.accounts,Fr=Y.type;if(Oe==="team")switch(this.core.options.debugLevel==="debug"?this.logger.debug("team::recvNotification",ur,gr,Y):this.logger.log("team::recvNotification",ur,gr,Pt,Fr,Mr,xr),Fr){case"updateTeam":yr.updateTime=jt,this.core.emit("updateTeam",yr);break;case"addTeamMembers":this.service.notifyAddTeamMembers(yr,xr);break;case"acceptTeamInvite":this.service.notifyAddTeamMembers(yr,[ue]);break;case"passTeamApply":this.service.notifyAddTeamMembers(yr,[Mr]);break;case"addTeamManagers":this.service.notifyUpdateTeamManagers(Pt,xr,!0,jt);break;case"removeTeamManagers":this.service.notifyUpdateTeamManagers(Pt,xr,!1,jt);break;case"removeTeamMembers":this.service.notifyRemoveTeamMembers(yr,xr);break;case"leaveTeam":this.service.notifyRemoveTeamMembers(yr,[ue]);break;case"dismissTeam":this.core.emit("dismissTeam",{teamId:Pt});break;case"transferTeam":this.service.notifyTransferTeam(yr,ue,Mr);break;case"updateTeamMemberMute":this.service.notifyUpdateTeamMembersMute(yr,[Mr],Y.mute)}},M}(oi);(function(w){w[w.none=0]="none",w[w.pass=1]="pass",w[w.decline=2]="decline",w[w.read=3]="read",w[w.deleted=4]="deleted",w[w.invalid=5]="invalid"})(Rc||(Rc={})),function(w){w[w.default=0]="default",w[w.leave=1]="leave",w[w.roam=2]="roam"}(pc||(pc={}));var Ud={applyTeam:0,rejectTeamApply:1,teamInvite:2,rejectTeamInvite:3,friendRequest:5,deleteFriend:6,recallMsgP2p:7,recallMsgTeam:8,recallMsgSuperTeam:12,deleteMsgP2pOneWay:13,deleteMsgTeamOneWay:14,applySuperTeam:15,rejectSuperTeamApply:16,superTeamInvite:17,rejectSuperTeamInvite:18,customP2p:100,customTeam:101,customSuperTeam:103},qd={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},tf={setting:{needSaveOffline:{type:"boolean"},isRoutable:{type:"boolean"},envConfig:{type:"string"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"boolean"}},pushInfo:Sh,recallMessageInfo:{idClient:{type:"string",rawKey:"deletedIdClient"},idServer:{type:"string",rawKey:"deletedIdServer"},createTime:{type:"number",rawKey:"deletedMsgTime"},fromNick:{type:"string",rawKey:"deletedMsgFromNick"},opeAccount:{type:"string"}}};function Vd(w,M,L){var D=+w.type,k=Os(Ud,D);L=L||pc.default;var Y=Cr(Cr({},Zi(tf,w)),{type:k,time:+w.time,to:w.to,from:w.from,idServer:w.idServer,state:Rc[Rc.none],feature:pc[L]});if(typeof Y.attach=="string")try{Y.attach=JSON.parse(Y.attach)}catch(Oe){M.error("formatSystemMessage: "+Y.idServer+" parse attach error",Oe&&Oe.message)}return D===5&&Y.attach?(Y.attach.type=qd[+Y.attach.vt],Y.attach.type==="passFriendApply"?Y.state=Rc[Rc.pass]:Y.attach.type==="rejectFriendApply"&&(Y.state=Rc[Rc.decline])):D<=3&&Y.attach&&(Y.attach=function(ue){var Pt=ue.attach,jt=ue.tinfo,ur=Pi(ue,["attach","tinfo"]);return ur.ext=Pt,jt!==void 0&&(ur.team=xc(Es(ue.tinfo,ai.team))),ur}(Y.attach)),Y}function vM(w){var M=Cr({},w);return Cr(Cr({},Td(tf,M)),{type:Ud[M.type],to:M.to,attach:M.attach})}var yM={"4_6":"syncOfflineSysMsgs","4_18":"syncOfflineSysMsgs","4_19":"syncRecallMsgOfflineAndRoaming","4_101":"syncOfflineSysMsgs","7_3":"onSysMsg","7_7":"sendCustomSysMsg","7_14":"onRecallMsg","21_18":"onRecallMsg","21_117":"onRecallMsg","7_15":"syncRecallMsgOfflineAndRoaming","21_19":"onSysMsg","21_16":"sendSuperTeamCustomSysMsg","101_3":"onSysMsg","101_7":"sendFilterCustomSysMsg"},Hd={sysMsg:Cr({time:0,type:1,to:2,from:3,content:4,attach:5,idServer:6,needSaveOffline:7,deletedIdClient:10,deletedIdServer:11,needcAntiSpam:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,envConfig:21,callbackExt:22,isRoutable:105},Cy)},Sl=ri(Hd),bM={onSysMsg:{service:"systemMessage",sid:7,cid:3,response:[{type:"Property",name:"sysMsg",reflectMapper:Sl.sysMsg}]},sendCustomSysMsg:{service:"systemMessage",sid:7,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},sendSuperTeamCustomSysMsg:{service:"systemMessage",sid:21,cid:16,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},sendFilterCustomSysMsg:{service:"systemMessage",sid:101,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},batchMarkRead:{service:"systemMessage",sid:4,cid:5,isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},onRecallMsg:{sid:7,cid:14,service:"systemMessage",response:[{type:"Property",name:"sysMsg",reflectMapper:Sl.sysMsg}]},syncRecallMsgOfflineAndRoaming:{sid:7,cid:15,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Sl.sysMsg},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},syncOfflineSysMsgs:{sid:4,cid:9,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Sl.sysMsg}]}},TM=function(w){function M(D){var k;return(k=w.call(this,"systemMessage",D)||this).sysMsgUnread={total:0,friend:0,msg:0,team:0,superTeam:0},k.core.eventBus.on("logined",function(){k.initEventListeners()}),qa({cmdMap:yM,cmdConfig:bM}),k}No(M,w);var L=M.prototype;return L.initEventListeners=function(){var k=this;this.core.eventBus.on("systemMessage/passFriendApply",function(Y){k.core.emit("updateSystemMessages",[{idServer:Y.idServer,from:Y.account,state:"pass",type:"friendRequest"}])}),this.core.eventBus.on("systemMessage/rejectFriendApply",function(Y){k.core.emit("updateSystemMessages",[{idServer:Y.idServer,from:Y.account,state:"decline",type:"friendRequest"}])})},L.doMarkSysMsgAck=function(k){var Y=[],Oe=[],ue=["applySuperTeam","rejectSuperTeamApply","superTeamInvite","rejectSuperTeamInvite","customSuperTeam"];In(k).call(k,function(Pt){Pt.idServer&&(bc(ue).call(ue,Pt.type)?Oe.push(Pt.idServer):Y.push(Pt.idServer))}),Y.length>0&&this.core.sendCmd("batchMarkRead",{sid:"7",cid:"3",ids:Y}),Oe.length>0&&this.core.sendCmd("batchMarkRead",{sid:"21",cid:"19",ids:Oe})},L.sendCustomSysMsg=function(k){var Y=this;En({to:{type:"string",allowEmpty:!1},type:{type:"enum",values:["customP2p","customTeam","customSuperTeam"]},attach:{type:"string",allowEmpty:!1},setting:{type:"object",rules:{needSaveOffline:{type:"boolean",required:!1},env:{type:"string",allowEmpty:!1,required:!1}},required:!1},pushInfo:{type:"object",required:!1,rules:Sh}},k);var Oe=k.type==="customSuperTeam"?"sendSuperTeamCustomSysMsg":"sendCustomSysMsg";return this.core.sendCmd(Oe,{sysMsg:vM(k)}).then(function(){Y.logger.log("sendCustomSysMsg success")}).catch(function(ue){throw Y.logger.error("sendCustomSysMsg failed",ue.message),ue})},L.onSysMsgHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.sysMsg;if(Oe){var ue=typeof Oi(k,"raw.r[0]")=="number"?""+k.raw.r[0]:void 0;Oe.idServer=Oe.idServer||ue;var Pt=Vd(Oe,this.logger,pc.default);this.core.emit("sysMsg",Pt),this.doMarkSysMsgAck([Pt])}else this.logger.warn("onSysMsg no content.sysMsg")},L.syncOfflineSysMsgsHandler=function(k){var Y,Oe=this;if(k.content.sysMsgs&&k.content.sysMsgs.length>0){var ue=To(Y=k.content.sysMsgs).call(Y,function(Pt){return Vd(Pt,Oe.logger,pc.leave)});this.core.emit("syncSysMsgs",ue),this.doMarkSysMsgAck(ue)}},L.onRecallMsgHandler=function(k){var Y,Oe=(Y=k.content)===null||Y===void 0?void 0:Y.sysMsg;if(Oe){var ue=typeof Oi(k,"raw.r[0]")=="number"?""+k.raw.r[0]:void 0;Oe.idServer=Oe.idServer||ue;var Pt=wd([Oe],function(gr){return gr===Ud.recallMsgP2p?"p2p":gr===Ud.recallMsgTeam?"team":gr===Ud.recallMsgSuperTeam?"superTeam":""}(+Oe.type));this.core.eventBus.emit("session/updateForDeletedMsg",Pt);var jt=Vd(Oe,this.logger,pc.default);this.core.emit("sysMsg",jt),this.doMarkSysMsgAck([jt])}else this.logger.warn("onSysMsg no content.sysMsg")},L.syncRecallMsgOfflineAndRoamingHandler=function(k){var Y=this,Oe=k.content,ue=Oe.timetag,Pt=Oe.type,jt=Oe.sysMsgs,ur=ko(Pt),gr=ur===1?pc.leave:pc.roam,yr=To(jt).call(jt,function(Mr){return Vd(Mr,Y.logger,gr)});ur===1&&this.doMarkSysMsgAck(yr),this.core.eventBus.emit("sync/updateTimetag",{recallMsg:ue}),this.core.emit("syncSysMsgs",yr)},M}(oi);function zd(w){var M=["bitsExtension","createTime","updateTime","passRelationShip","relationShip","source"],L=Cr({},w);return In(M).call(M,function(D){L[D]!==void 0&&(L[D]=ko(L[D]))}),L.relationShip!==void 0&&(L.valid=L.relationShip===1),L}var SM={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},$h={"12_4":"getFriends","12_1":"friendReuqest","12_2":"deleteFriend","12_3":"updateFriend","12_5":"syncFriends","12_6":"syncFriendUsers","12_101":"syncFriendRequest","12_102":"syncDeleteFriend","12_103":"syncUpdateFriend"},rf={updateFriendTag:{account:4,alias:8,ext:10},delFriendParams:{delAlias:1},friendTag:{account:4,relationShip:5,passRelationShip:6,source:7,alias:8,bitsExtension:9,ext:10,createTime:11,updateTime:12,serverex:13},userTag:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13}},nf=ri(rf),Ky={getFriends:{sid:12,cid:4,service:"friend",params:[{type:"Long",name:"timetag"}],response:[{type:"PropertyArray",name:"friends",reflectMapper:nf.friendTag},{type:"Number",name:"timetag"}]},friendReuqest:{sid:12,cid:1,service:"friend",params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:12,cid:2,service:"friend",params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams",reflectMapper:rf.delFriendParams}]},updateFriend:{sid:12,cid:3,service:"friend",params:[{type:"Property",name:"updateFriendTag",reflectMapper:rf.updateFriendTag}]},syncFriends:{sid:12,cid:5,service:"friend",response:[{type:"PropertyArray",name:"friends",entity:"friendTag",reflectMapper:nf.friendTag},{type:"Number",name:"timetag"}]},syncFriendUsers:{sid:12,cid:6,service:"friend",response:[{type:"PropertyArray",name:"users",entity:"userTag",reflectMapper:nf.userTag},{type:"Number",name:"timetag"}]},syncFriendRequest:{sid:12,cid:101,service:"friend",params:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}],response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},syncDeleteFriend:{sid:12,cid:102,service:"friend",response:[{type:"String",name:"account"}]},syncUpdateFriend:{sid:12,cid:103,service:"friend",response:[{type:"Property",name:"friend",reflectMapper:nf.friendTag}]}},MM=function(w){function M(D){var k;return k=w.call(this,"friend",D)||this,qa({cmdMap:$h,cmdConfig:Ky}),k}No(M,w);var L=M.prototype;return L.getFriends=function(){var k;return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("getFriends",{timetag:0});case 2:return Oe=jt.sent,ue=((k=Oe.content)===null||k===void 0?void 0:k.friends)||[],ue=To(ue).call(ue,function(ur){return zd(ur)}),jt.abrupt("return",ue);case 6:case"end":return jt.stop()}},Y,this)}))},L.addFriend=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({account:{type:"string",allowEmpty:!1},ps:{type:"string",allowEmpty:!1,required:!1}},k),Pt.next=3,this.core.sendCmd("friendReuqest",{account:k.account,type:1,ps:k.ps||""});case 3:return Oe=new Date().getTime(),Pt.abrupt("return",{account:k.account,createTime:Oe,updateTime:Oe,valid:!0,source:0,passRelationShip:1,relationShip:1,bitsExtension:0});case 5:case"end":return Pt.stop()}},Y,this)}))},L.applyFriend=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({account:{type:"string",allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("friendReuqest",{account:k.account,type:2,ps:k.ps||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.passFriendApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe=this;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({account:{type:"string",allowEmpty:!1}},k),Pt.next=3,this.core.sendCmd("friendReuqest",{account:k.account,type:3,ps:k.ps||""}).then(function(jt){return Oe.core.eventBus.emit("systemMessage/passFriendApply",k),jt});case 3:case"end":return Pt.stop()}},Y,this)}))},L.rejectFriendApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe=this;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({account:{type:"string",allowEmpty:!1}},k),Pt.next=3,this.core.sendCmd("friendReuqest",{account:k.account,type:4,ps:k.ps||""}).then(function(jt){return Oe.core.eventBus.emit("systemMessage/rejectFriendApply",k),jt});case 3:case"end":return Pt.stop()}},Y,this)}))},L.deleteFriend=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({account:{type:"string",allowEmpty:!1},delAlias:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("deleteFriend",{account:k.account,delFriendParams:{delAlias:k.delAlias===!0?1:0}});case 3:case"end":return ue.stop()}},Y,this)}))},L.updateFriend=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({account:{type:"string",allowEmpty:!1},alias:{type:"string"},ext:{type:"string",required:!1}},k),ue.next=3,this.core.sendCmd("updateFriend",{updateFriendTag:k});case 3:case"end":return ue.stop()}},Y,this)}))},L.syncFriendRequestHandler=function(k){var Y=function(ue){var Pt=Cr({},ue);try{Pt.ps=Pt.ps&&JSON.parse(Pt.ps)}catch{}if(Pt.type=SM[Pt.type],Pt.type==="addFriend"||Pt.type==="passFriendApply"){var jt=new Date().getTime();Pt.friend={account:ue.account,alias:"",createTime:jt,ext:"",updateTime:jt,valid:!0}}return Pt}(k.content);this.core.emit("syncFriend",Y)},L.syncDeleteFriendHandler=function(k){var Y=k.content.account;this.logger.log("friend::emit syncFriendAction: deleteFriend "+Y),this.core.emit("syncFriend",{type:"deleteFriend",account:Y})},L.syncUpdateFriendHandler=function(k){var Y=zd(k.content.friend);this.logger.log("friend::emit syncFriendAction: updateFriend, ",Y==null?void 0:Y.account),this.core.emit("syncFriend",{type:"updateFriend",friend:Y})},L.syncFriendsHandler=function(k){var Y=k.content;this.core.eventBus.emit("sync/updateTimetag",{friends:ko(Y.timetag)});var Oe=Y==null?void 0:Y.friends;if(Oe&&Oe.length){var ue=To(Oe).call(Oe,function(Pt){return zd(Pt)});this.core.emit("friends",ue)}},L.syncFriendUsersHandler=function(k){var Y=k.content;this.core.eventBus.emit("sync/updateTimetag",{friendUsers:ko(Y.timetag)});var Oe=Y==null?void 0:Y.users;if(Oe&&Oe.length){var ue=To(Oe).call(Oe,function(Pt){return zl(Pt)});this.core.emit("users",ue)}},M}(oi),Uh={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"};function Wy(w){return w&&w.length>0?To(w).call(w,function(M){return function(D){var k=Cr({},D),Y=["subscribeTime","time"];return In(Y).call(Y,function(Oe){k[Oe]&&(k[Oe]=ko(k[Oe]))}),k}(M)}):[]}function Nc(w){if(!w)return w;var M=w.serverExt,L=Pi(w,["serverExt"]),D=["time","type","value"];if(In(D).call(D,function(k){L[k]&&(L[k]=ko(L[k]))}),L.clientType&&(L.clientType=Uh[L.clientType]||""),M)try{L.ext=JSON.parse(M),typeof L.ext[0]=="string"&&(L.ext=L.ext[0])}catch{}return L}var Gy={"14_1":"publishEvent","14_2":"pushEvent","14_3":"subscribeEvent","14_4":"unSubscribeEventsByAccounts","14_5":"unSubscribeEventsByType","14_6":"querySubscribeEventsByAccounts","14_7":"querySubscribeEventsByType","14_9":"pushEvents"},Ml={msgEvent:{type:1,value:2,idClient:3,ext:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverExt:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105}},tu=ri(Ml),CM={publishEvent:{sid:14,cid:1,service:"event",params:[{type:"Property",name:"msgEvent",reflectMapper:Ml.msgEvent}],response:[{type:"Property",name:"msgEvent",reflectMapper:tu.msgEvent}]},pushEvent:{sid:14,cid:2,service:"event",response:[{type:"Property",name:"msgEvent",reflectMapper:tu.msgEvent}]},subscribeEvent:{sid:14,cid:3,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ml.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:14,cid:4,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ml.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:14,cid:5,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ml.msgEventSubscribe}]},querySubscribeEventsByAccounts:{sid:14,cid:6,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ml.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:tu.msgEventSubscribe}]},querySubscribeEventsByType:{sid:14,cid:7,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ml.msgEventSubscribe}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:tu.msgEventSubscribe}]},pushEvents:{sid:14,cid:9,service:"event",response:[{type:"PropertyArray",name:"msgEvents",reflectMapper:tu.msgEvent}]}},S=function(w){function M(D){var k;return k=w.call(this,"event",D)||this,qa({cmdMap:Gy,cmdConfig:CM}),k}No(M,w);var L=M.prototype;return L.publishEvent=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({type:{type:"number"},value:{type:"number"},ext:{type:"string",required:!1},validTime:{type:"number",min:60,max:2592e3,required:!1},broadcastType:{type:"number",required:!1},sync:{type:"boolean",required:!1}},k),ue=Cr(Cr({validTime:604800},k),{idClient:_p(),sync:k.sync===!0?1:0}),gr.next=4,this.core.sendCmd("publishEvent",{msgEvent:ue});case 4:return Pt=gr.sent,jt=((Y=Pt.content)===null||Y===void 0?void 0:Y.msgEvent)||{},gr.abrupt("return",Nc(jt));case 7:case"end":return gr.stop()}},Oe,this)}))},L.subscribeEvent=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100},subscribeTime:{type:"number",min:60,max:2592e3,required:!1}},k),ue=Cr(Cr({subscribeTime:2592e3},k),{sync:k.sync===!0?1:0}),gr.next=4,this.core.sendCmd("subscribeEvent",{msgEventSubscribe:ue,accounts:k.accounts});case 4:return Pt=gr.sent,jt=((Y=Pt.content)===null||Y===void 0?void 0:Y.accounts)||[],gr.abrupt("return",{failedAccounts:jt});case 7:case"end":return gr.stop()}},Oe,this)}))},L.unSubscribeEvents=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},k),ue={type:k.type},!(k.accounts&&k.accounts.length>0)){gr.next=9;break}return gr.next=5,this.core.sendCmd("unSubscribeEventsByAccounts",{msgEventSubscribe:ue,accounts:k.accounts});case 5:jt=gr.sent,Pt=((Y=jt.content)===null||Y===void 0?void 0:Y.accounts)||[],gr.next=12;break;case 9:return gr.next=11,this.core.sendCmd("unSubscribeEventsByType",{msgEventSubscribe:ue});case 11:Pt=[];case 12:return gr.abrupt("return",{failedAccounts:Pt});case 13:case"end":return gr.stop()}},Oe,this)}))},L.querySubscribeEvents=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},k),!(k.accounts&&k.accounts.length>0)){jt.next=7;break}return jt.next=4,this.core.sendCmd("querySubscribeEventsByAccounts",{msgEventSubscribe:{type:k.type},accounts:k.accounts});case 4:ue=jt.sent,jt.next=10;break;case 7:return jt.next=9,this.core.sendCmd("querySubscribeEventsByType",{msgEventSubscribe:{type:k.type}});case 9:ue=jt.sent;case 10:return jt.abrupt("return",Wy((Y=ue.content)===null||Y===void 0?void 0:Y.msgEventSubscribes));case 11:case"end":return jt.stop()}},Oe,this)}))},L.pushEventHandler=function(k){var Y,Oe=((Y=k.content)===null||Y===void 0?void 0:Y.msgEvent)||{};this.core.emit("pushEvents",[Nc(Oe)])},L.pushEventsHandler=function(k){var Y,Oe=((Y=k.content)===null||Y===void 0?void 0:Y.msgEvents)||{};this.core.emit("pushEvents",function(Pt){return hs(Pt)&&Pt.length>0?To(Pt).call(Pt,function(jt){return Nc(jt)}):[]}(Oe))},M}(oi);function x(w){var M={scene:mh[w.scene],from:w.threadMsgFromAccount,to:w.threadMsgToAccount,time:w.threadMsgTime,idServer:w.threadMsgIdServer},L={limit:w.limit<100?w.limit:100,beginTime:typeof w.beginTime=="number"?w.beginTime:0,reverse:kl(w)===!0?1:0};return w.lastMsgId&&(L.lastMsgId=w.lastMsgId),{msg:M,threadMsgReq:L}}var $,F={"23_1":"getThreadMsgs","23_2":"getMsgsByIdServer"},A={msg:La,threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2}},re=ri(A),xe={getThreadMsgs:{sid:23,cid:1,service:"msgExtend",params:[{type:"Property",name:"msg",reflectMapper:A.msg},{type:"Property",name:"threadMsgReq",reflectMapper:A.threadMsgReq}],response:[{type:"Property",name:"threadMsg",reflectMapper:re.msg},{type:"Property",name:"threadMsgsMeta",reflectMapper:re.threadMsgsMeta},{type:"PropertyArray",name:"msgs",reflectMapper:re.msg}]},getMsgsByIdServer:{sid:23,cid:2,service:"msgExtend",params:[{type:"PropertyArray",name:"reqMsgs",reflectMapper:A.msg}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:re.msg}]}},z=function(w){function M(D){var k;return k=w.call(this,"msgExtend",D)||this,qa({cmdMap:F,cmdConfig:xe}),k}No(M,w);var L=M.prototype;return L.getThreadMsgs=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur,gr,yr,Mr;return ir.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return En({scene:{type:"enum",values:ys($a)},threadMsgFromAccount:{type:"string",allowEmpty:!1},threadMsgIdServer:{type:"string",allowEmpty:!1},threadMsgTime:{type:"number"},threadMsgToAccount:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},lastMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1}},k),Fr.next=3,this.core.sendCmd("getThreadMsgs",x(k));case 3:return ue=Fr.sent,Pt=ue.content,jt=Pt.msgs,ur=Pt.threadMsg,gr=ue.content.threadMsgsMeta,yr=Ts(ur,this.core.account),Mr=(Y=this.core.session)===null||Y===void 0?void 0:Y.getSessionWithUncomplete({id:yr}),jt=_d(jt,Mr?{account:this.core.account,sessionAck:Mr.ack,msgReceiptTime:Mr.msgReceiptTime}:{account:this.core.account}),ur=Bs(ur,Mr?{account:this.core.account,sessionAck:Mr.ack,msgReceiptTime:Mr.msgReceiptTime}:{account:this.core.account}),Fr.abrupt("return",{msgs:jt,threadMsg:ur,total:ko(gr.total),timetag:ko(gr.lastMsgTime)});case 11:case"end":return Fr.stop()}},Oe,this)}))},L.getMsgsByIdServer=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt,jt,ur=this;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({reqMsgs:{type:"array",rules:{scene:{type:"enum",values:ys($a)},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},time:{type:"number"}},min:1,max:100}},k),yr.next=3,this.core.sendCmd("getMsgsByIdServer",{reqMsgs:To(Oe=k.reqMsgs).call(Oe,function(Mr){return Cr(Cr({},Mr),{scene:Os($a,Mr.scene)})})});case 3:return Pt=yr.sent,jt=To(ue=Pt.content.msgs).call(ue,function(Mr){var xr,Fr=Ts(Mr,ur.core.account),Dr=(xr=ur.core.session)===null||xr===void 0?void 0:xr.getSessionWithUncomplete({id:Fr});return Bs(Mr,Dr?{account:ur.core.account,sessionAck:Dr.ack,msgReceiptTime:Dr.msgReceiptTime}:{account:ur.core.account})}),yr.abrupt("return",jt);case 6:case"end":return yr.stop()}},Y,this)}))},M}(oi);(function(w){w[w.ASC=1]="ASC",w[w.DESC=2]="DESC"})($||($={}));var qe,At={"7_6":"getHistoryMsgs","7_9":"deleteRoamingMsgs","4_24":"syncClearServerHistoryMsgs","7_18":"clearHistoryMsgsFromServer","7_118":"multiSyncClearServerHistoryMsgs","7_26":"nimFtsCloudMsgLogsAggWithSession","7_27":"nimFtsCloudMsgLogs"},lr={msg:La,clearHistoryMsgsFromServerReqTag:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,ext:7},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},ftsReqTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msglogsLimit:5,orderRule:6,p2pSessionList:7,teamSessionList:8,senderList:9,msgTypeList:10,msgSubTypeList:11}},fr=ri(lr),Sr={deleteRoamingMsgs:{sid:7,cid:9,service:"msgLog",params:[{type:"StrArray",name:"ids"}]},getHistoryMsgs:{sid:7,cid:6,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:fr.msg}],service:"msgLog"},clearHistoryMsgsFromServer:{sid:7,cid:18,params:[{type:"Property",name:"clearHistoryMsgsFromServerReqTag",reflectMapper:lr.clearHistoryMsgsFromServerReqTag}],response:[{type:"Long",name:"timetag"}],service:"msgLog"},multiSyncClearServerHistoryMsgs:{sid:7,cid:118,response:[{type:"Property",name:"data",reflectMapper:fr.clearMsgsParamsWithSync}],service:"msgLog"},syncClearServerHistoryMsgs:{sid:4,cid:24,service:"msgLog",response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.clearMsgsParamsWithSync}]},nimFtsCloudMsgLogsAggWithSession:{sid:7,cid:26,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:lr.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.msg}]},nimFtsCloudMsgLogs:{sid:7,cid:27,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:lr.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.msg}]}};(function(w){w[w.p2p=1]="p2p",w[w.team=2]="team"})(qe||(qe={}));var br={type:{type:"enum",values:qe},isDeleteRoam:{type:"boolean"},isSyncSelf:{type:"boolean"},time:{type:"number"}};function Er(w){var M=Zi(br,w);return{sessionId:M.type==="p2p"?"p2p-"+M.otherAccid:"team-"+M.toTid,time:M.time}}var $r={orderRule:{type:"enum",values:$}};function jr(w){var M,L=Zi($r,w);hs(L.msgTypeList)&&(L.msgTypeList=To(M=L.msgTypeList).call(M,function(k){return ac[k]}).join(","));var D=["p2pSessionList","teamSessionList","senderList","msgSubTypeList"];return In(D).call(D,function(k){hs(L[k])&&(L[k]=L[k].join(","))}),L}var vn=function(w){function M(D){var k;return k=w.call(this,"msgLog",D)||this,qa({cmdMap:At,cmdConfig:Sr}),k}No(M,w);var L=M.prototype;return L.deleteRoamingMsgs=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:En({ids:{type:"array",itemType:"string"}},k),Oe=[],jt.prev=2,Oe=To(ue=k.ids).call(ue,function(ur){var gr=Lo(ur);return gr.scene+"|"+gr.accid}),jt.next=10;break;case 6:throw jt.prev=6,jt.t0=jt.catch(2),this.logger.error("Failed to delete roaming msgs with "+k.ids,jt.t0),new Error("Failed to create session with "+k.ids);case 10:return jt.next=12,this.core.sendCmd("deleteRoamingMsgs",{ids:Oe});case 12:case"end":return jt.stop()}},Y,this,[[2,6]])}))},L.getHistoryMsgs=function(k){var Y,Oe;return Sn(this,void 0,void 0,ir.mark(function ue(){var Pt,jt,ur,gr,yr,Mr,xr;return ir.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return!((Y=this.core.sync)===null||Y===void 0)&&Y.getSyncDoneFlag()||this.logger.warn("Please call getHistoryMsgs after syncdone event"),En({scene:{type:"enum",values:Vo(mh)},to:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1},lastMsgId:{type:"string",required:!1,allowEmpty:!1},asc:{type:"boolean",required:!1},msgTypes:{type:"array",itemType:"string",required:!1}},k),jt=k.scene==="p2p"?"getHistoryMsgs":k.scene==="team"?"getHistoryTeamMsgs":"getHistorySuperTeamMsgs",Dr.next=5,this.core.sendCmd(jt,Cr(Cr({beginTime:0,endTime:0,lastMsgId:0,limit:100,reverse:!1},k),{msgTypes:k.msgTypes?To(Pt=k.msgTypes).call(Pt,function(zr){return fh[zr]}):[]}));case 5:if(ur=Dr.sent,(gr=ur.content).msgs&&gr.msgs.length>0){Dr.next=9;break}return Dr.abrupt("return",[]);case 9:if(yr=Ts(gr.msgs[0],this.core.account),Mr=(Oe=this.core.session)===null||Oe===void 0?void 0:Oe.getSessionWithUncomplete({id:yr}),xr=_d(gr.msgs,Mr?{account:this.core.account,sessionAck:Mr.ack,msgReceiptTime:Mr.msgReceiptTime}:{account:this.core.account}),k.asc!==!0){Dr.next=14;break}return Dr.abrupt("return",wc(xr).call(xr,function(zr,Hr){return zr.time-Hr.time}));case 14:return Dr.abrupt("return",xr);case 15:case"end":return Dr.stop()}},ue,this)}))},L.clearHistoryMsgsFromServer=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({scene:{type:"enum",values:["p2p","team"]},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},isSyncSelf:{type:"boolean",required:!1}},k),(Oe=Cr(Cr({isDeleteRoam:1},k),{type:k.scene==="team"?2:1,isSyncSelf:k.isSyncSelf===!0?1:0}))[Oe.type===2?"toTid":"otherAccid"]=k.to,ur.next=5,this.core.sendCmd("clearHistoryMsgsFromServer",{clearHistoryMsgsFromServerReqTag:Oe});case 5:return ue=ur.sent,Pt=ue.content,this.core.eventBus.emit("session/updateForClearMsg",[{sessionId:k.scene+"-"+k.to}],!0),ur.abrupt("return",Pt);case 9:case"end":return ur.stop()}},Y,this)}))},L.multiSyncClearServerHistoryMsgsHandler=function(k){var Y=Er(k.content.data);this.core.eventBus.emit("session/updateForClearMsg",[Y],!0),this.core.emit("clearServerHistoryMsgs",[Y])},L.ftsCloudMsgLogs=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",this.baseFtsCloudMsgLogs(k,"nimFtsCloudMsgLogs"));case 1:case"end":return ue.stop()}},Y,this)}))},L.ftsCloudMsgLogsAggWithSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",this.baseFtsCloudMsgLogs(k,"nimFtsCloudMsgLogsAggWithSession"));case 1:case"end":return ue.stop()}},Y,this)}))},L.baseFtsCloudMsgLogs=function(k,Y){return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur=this;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(En({keyword:{type:"string",allowEmpty:!1},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",required:!1},msglogsLimit:{type:"number",required:!1},orderRule:{type:"enum",values:ys($),required:!1},p2pSessionList:{type:"array",itemType:"string",required:!1},teamSessionList:{type:"array",itemType:"string",required:!1},senderList:{type:"array",itemType:"string",required:!1},msgTypeList:{type:"array",itemType:"enum",values:ys(ac),required:!1},msgSubTypeList:{type:"array",itemType:"number",required:!1}},k),!(k.fromTime&&k.toTime&&k.toTime<k.fromTime)){yr.next=3;break}throw new yo("Request parameter error: toTime should be greater than fromTime",k,"");case 3:return Pt=jr(k),yr.next=6,this.core.sendCmd(Y,{tag:Pt});case 6:return jt=yr.sent,yr.abrupt("return",To(ue=jt.content.datas).call(ue,function(Mr){var xr,Fr=Ts(Mr,ur.core.account),Dr=(xr=ur.core.session)===null||xr===void 0?void 0:xr.getSessionWithUncomplete({id:Fr});return Bs(Mr,Dr?{account:ur.core.account,sessionAck:Dr.ack,msgReceiptTime:Dr.msgReceiptTime}:{account:ur.core.account})}));case 8:case"end":return yr.stop()}},Oe,this)}))},L.syncClearServerHistoryMsgsHandler=function(k){var Y=function(ue){return hs(ue)&&ue.length>0?To(ue).call(ue,function(Pt){return Er(Pt)}):[]}(k.content.datas);this.core.emit("clearServerHistoryMsgs",Y)},M}(oi),Yr={"22_1":"requestProxy","22_2":"onRequestProxy"},wn={requestProxyTag:{zone:1,path:2,method:3,header:4,body:5},requestProxyMsgTag:{from:1,body:2,time:3}},Zr=ri(wn),Qn={requestProxy:{sid:22,cid:1,service:"passThrough",params:[{type:"Property",name:"requestProxyTag",reflectMapper:wn.requestProxyTag}],response:[{type:"Property",name:"requestProxyTag",reflectMapper:Zr.requestProxyTag}]},onRequestProxy:{sid:22,cid:2,service:"passThrough",response:[{type:"Property",name:"proxyMsg",reflectMapper:Zr.requestProxyMsgTag}]}},$n=function(w){function M(D){var k;return(k=w.call(this,"passThrough",D)||this).core=D,qa({cmdMap:Yr,cmdConfig:Qn}),k}No(M,w);var L=M.prototype;return L.request=function(k){return En({path:{type:"string",allowEmpty:!1}},k),this.core.sendCmd("requestProxy",{requestProxyTag:k}).then(function(Y){return Y.content.proxyTag})},L.onRequestProxyHandler=function(k){var Y=k.content.proxyMsg;Y&&Y.time&&(Y.time=+Y.time),this.core.emit("proxyMsg",Y)},M}(oi),Do=bi.some,Dn=Ui("some");Vr({target:"Array",proto:!0,forced:!Dn},{some:function(M){return Do(this,M,arguments.length>1?arguments[1]:void 0)}});var wr=Uo("Array").some,xn=Array.prototype,Rn=function(w){var M=w.some;return w===xn||er(xn,w)&&M===xn.some?wr:M},Cn,Xr,On=function(M,L){if(M==null)return{};var D=Og(Dy(M),function(k){return[k]});return L=Xl(L),xy(M,D,function(k,Y){return L(k,Y[0])})},Un={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},eo={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},ro=ri(eo),$o={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:ro.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:eo.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:ro.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:eo.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:ro.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:ro.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:ro.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:eo.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:ro.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:eo.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:ro.mixStoreAuthTokenResTag}]}};(function(w){w[w.nos=1]="nos",w[w.s3=2]="s3"})(Cn||(Cn={})),function(w){w[w.dontNeed=-1]="dontNeed",w[w.time=2]="time",w[w.urls=3]="urls"}(Xr||(Xr={}));var go,Zo,So={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},Io={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},ea={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function Cs(w){return w===void 0&&(w="file"),Wo(Io[w]||{}).replace(/"/gi,'\\"')}(function(w){w[w.nos=1]="nos",w[w.s3=2]="s3"})(go||(go={})),function(w){w[w.dontNeed=-1]="dontNeed",w[w.time=2]="time",w[w.urls=3]="urls"}(Zo||(Zo={}));var Eo=function(){function w(L,D){D===void 0&&(D={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=go.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=L.logger,this.core=L,qa({cmdMap:Un,cmdConfig:$o}),this.setOptions(D)}var M=w.prototype;return M.setOptions=function(D){D===void 0&&(D={});var k=D.storageKeyPrefix||"NIMClient";this.GRAYKEY=k+"-AllGrayscaleConfig",this.MIXSTOREKEY=k+"-AllMixStorePolicy";var Y=D.s3,Oe=Pi(D,["s3"]),ue=Cr({},So,this.config);if(Oe&&Object.prototype.hasOwnProperty.call(Oe,"cdn")){var Pt={cdn:Cr(Cr({},ue.cdn),Oe.cdn)};this.config=Cr({},ue,Oe,Pt)}else this.config=Cr({},ue,Oe);Y&&(this.s3=Y)},M.init=function(){return Sn(this,void 0,void 0,ir.mark(function D(){return ir.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=go.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){Y.next=9;break}return Y.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return Y.next=9,this.getNosCdnHost();case 9:case"end":return Y.stop()}},D,this)}))},M.uploadFile=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(En({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},D),D.fileInput||D.file||D.filePath){jt.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!D.type||D.type==="file"){jt.next=7;break}if(typeof(Y=Oi(D,"file.type"))!="string"||Ca(Y).call(Y,D.type)!==-1){jt.next=7;break}throw new Error('The meta type "'+Y+'" does not match "'+D.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){jt.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),jt.abrupt("return",this.nosUpload(D));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=go.nos),Oe=ea,jt.prev=13,jt.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:Cs(D.type)}});case 16:ue=jt.sent,Oe=ue.content.mixStoreTokenResTag,jt.next=24;break;case 20:throw jt.prev=20,jt.t0=jt.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",jt.t0),new El("getMixStoreToken error",jt.t0,this.curProvider,this.mixStorePolicy);case 24:return jt.abrupt("return",this.curProvider===go.s3?this.s3Upload(D,Oe):this.nosUpload(D,Oe));case 25:case"end":return jt.stop()}},k,this,[[13,20]])}))},M.nosUpload=function(D,k){var Y,Oe;return Sn(this,void 0,void 0,ir.mark(function ue(){var Pt,jt,ur,gr,yr,Mr,xr,Fr,Dr,zr,Hr,Kr,kn;return ir.wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:if(Pt=Oi(this.core,"config.cdn.bucket"),jt={tag:D.nosScenes||Pt||"nim",expireSec:D.nosSurvivalTime},k){Hn.next=13;break}return Hn.prev=3,Hn.next=6,this.core.sendCmd("getNosToken",{responseBody:Cs(D.type),nosToken:jt});case 6:ur=Hn.sent,Hn.next=13;break;case 9:throw Hn.prev=9,Hn.t0=Hn.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Hn.t0),new El("getNosToken error",Hn.t0,1);case 13:return Hn.prev=13,yr=ur?ur.content.nosToken:k,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:yr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Ho.platform}),Hn.next=18,this.core.adapters.uploadFile(Cr(Cr({},D),{nosToken:yr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:D.maxSize||this.config.chunkMaxSize}));case 18:gr=Hn.sent,Hn.next=42;break;case 21:if(Hn.prev=21,Hn.t1=Hn.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",Hn.t1),!k){Hn.next=41;break}if(this.nosErrorCount!==0){Hn.next=37;break}Hn.prev=26,this._addCircuitTimer(),Hn.next=33;break;case 30:throw Hn.prev=30,Hn.t2=Hn.catch(26),new El("upload file error",Hn.t2,this.curProvider,this.mixStorePolicy,D.file||D.filePath);case 33:return this.nosErrorCount=(Y=this.mixStorePolicy.nosPolicy)===null||Y===void 0?void 0:Y.uploadConfig.retryPolicy.retry,Hn.abrupt("return",this.uploadFile(D));case 37:return this.nosErrorCount--,Hn.abrupt("return",this.nosUpload(D,k));case 39:Hn.next=42;break;case 41:throw new El("nos uploadFile error",Hn.t1,1);case 42:if(Mr=gr==null?void 0:gr.type,xr=Mr&&Ca(Mr).call(Mr,"/")>-1?Mo(Mr).call(Mr,0,Ca(Mr).call(Mr,"/")):"",Fr={image:"imageInfo",video:"vinfo",audio:"vinfo"},Dr=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",ur?ur.content.nosToken.objectName:k==null?void 0:k.objectName),k&&k.shortUrl&&(Dr=k.shortUrl),Fr[xr]){Hn.next=49;break}return Hn.abrupt("return",Cr({url:Dr},gr));case 49:if(Hn.prev=49,!(Ca(Dr).call(Dr,"_im_url=1")<0)){Hn.next=54;break}return Hn.next=53,this.core.adapters.request(Dr+"?"+Fr[xr],{method:"GET",dataType:"json",timeout:5e3});case 53:zr=Hn.sent;case 54:Hn.next=60;break;case 56:return Hn.prev=56,Hn.t3=Hn.catch(49),this.core.logger.error("uploadFile:: fetch file info error",Hn.t3),Hn.abrupt("return",Cr({url:Dr},gr));case 60:if(!zr){Hn.next=67;break}return Hr=zr.data,Kr=Fr[xr]==="imageInfo"?Hr:(Oe=Hr==null?void 0:Hr.GetVideoInfo)===null||Oe===void 0?void 0:Oe.VideoInfo,kn={url:Dr,name:gr.name,size:gr.size,ext:gr.ext,w:Kr.Width,h:Kr.Height,orientation:Kr.Orientation,dur:Kr.Duration,audioCodec:Kr.AudioCodec,videoCodec:Kr.VideoCodec,container:Kr.Container},Hn.abrupt("return",On(kn,function(xo,Ln){return Ln!==void 0}));case 67:return Hn.abrupt("return",Cr({url:Dr},gr));case 68:case"end":return Hn.stop()}},ue,this,[[3,9],[13,21],[26,30],[49,56]])}))},M.getNosCdnHost=function(){var D;return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt=this;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return ur.prev=0,ur.next=3,this.core.sendCmd("getNosCdnHost");case 3:Y=ur.sent,ur.next=10;break;case 6:return ur.prev=6,ur.t0=ur.catch(0),this.logger.error("getNosCdnHost::error",ur.t0),ur.abrupt("return");case 10:if(Y){ur.next=12;break}return ur.abrupt("return");case 12:Oe=(D=Y==null?void 0:Y.content)===null||D===void 0?void 0:D.nosConfigTag,(ue=ko(Oe==null?void 0:Oe.expire))!==0&&Oe.cdnDomain?ue===-1?(this.config.cdn.bucket=Oe.bucket,this.config.cdn.cdnDomain=Oe.cdnDomain,this.config.cdn.objectNamePrefix=Oe.objectNamePrefix):(this.config.cdn.bucket=Oe.bucket,this.config.cdn.cdnDomain=Oe.cdnDomain,this.config.cdn.objectNamePrefix=Oe.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){Pt.getNosCdnHost()},1e3*ue)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return ur.stop()}},k,this,[[0,6]])}))},M.getGrayscaleConfig=function(D){var k;return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Ho.localStorage)try{Ho.localStorage.getItem&&Ho.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Ho.localStorage.getItem(this.GRAYKEY))[D])}catch(ur){Ho.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",ur)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){jt.next=17;break}return jt.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(Oe=jt.sent).content||!Oe.content.grayConfigTag){jt.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(Oe.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(Oe.content.grayConfigTag.ttl)}catch(ur){this.logger.error("getGrayscaleConfig error",ur)}if(this.grayConfig){jt.next=10;break}return jt.abrupt("return");case 10:ue=Ho.localStorage.getItem(this.GRAYKEY)?JSON.parse(Ho.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),ue[D]=this.grayConfig,Ho.localStorage.setItem(this.GRAYKEY,Wo(ue)),jt.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",Oe.content);case 17:if(!(!((k=this.grayConfig)===null||k===void 0)&&k.mixStoreEnable)){jt.next=20;break}return jt.next=20,this._getMixStorePolicy(D);case 20:case"end":return jt.stop()}},Y,this)}))},M._getMixStorePolicy=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt,ur,gr;return ir.wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:if(Y=new Date().getTime(),Ho.localStorage)try{this.mixStorePolicy=JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY))[D],this.curProvider=ko(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>Y&&(ue=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-Y,this.core.timerManager.addTimer(Oo(Oe=this._getMixStorePolicy).call(Oe,this,D),ue))}catch(xr){Ho.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY))[D]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",xr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=Y)){Mr.next=30;break}return Mr.prev=3,Mr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:jt=Mr.sent,ur=jt.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(ur.ttl),this.mixStorePolicy.providers=ur.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=ko(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=ur.nosPolicy?JSON.parse(ur.nosPolicy):null,this.mixStorePolicy.s3Policy=ur.s3Policy?JSON.parse(ur.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Oo(Pt=this._getMixStorePolicy).call(Pt,this,D),1e3*this.mixStorePolicy.ttl),gr=Ho.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),gr[D]=this.mixStorePolicy,Ho.localStorage.setItem(this.MIXSTOREKEY,Wo(gr)),Mr.next=30;break;case 23:if(Mr.prev=23,Mr.t0=Mr.catch(3),this.logger.error("getMixStorePolicy error",Mr.t0),this.mixStoreErrorCount!==0){Mr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(D),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Mr.stop()}},k,this,[[3,23]])}))},M.s3Upload=function(D,k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt,jt,ur,gr,yr,Mr,xr,Fr,Dr=this;return ir.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(!D.file){Hr.next=4;break}Oe=D.file,Hr.next=19;break;case 4:if(typeof D.fileInput!="string"){Hr.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((ue=document.getElementById(D.fileInput))&&ue.files&&ue.files[0])){Hr.next=11;break}Oe=ue.files[0],Hr.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Hr.next=19;break;case 14:if(!(D.fileInput&&D.fileInput.files&&D.fileInput.files[0])){Hr.next=18;break}Oe=D.fileInput.files[0],Hr.next=19;break;case 18:throw new Error("Can not get file from fileInput "+D.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Hr.next=21;break}throw new Error("dont get s3 policy");case 21:return Pt={accessKeyId:k.accessKeyId,secretAccessKey:k.secretAccessKey,sessionToken:k.sessionToken,region:k.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},jt=this.s3,(ur=new jt).config.update(Pt),gr=decodeURIComponent(k.bucket),yr=decodeURIComponent(k.objectName),xr={Bucket:gr,Key:yr,Body:Mr=Oe,Metadata:{token:k.token},ContentType:Mr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",xr),Fr=ur.upload(xr),Hr.abrupt("return",new uo(function(Kr){var kn=new Date().getTime();Fr.send(function(Yn,Hn){var xo,Ln;if(Yn){Dr.logger.error("uploadFile:","api::s3:upload file failed",Yn),Dr.core.reporter.reportTraceStart("exceptions",{user_id:Dr.core.options.account,trace_id:(Ln=(xo=Dr.core)===null||xo===void 0?void 0:xo.socket)===null||Ln===void 0?void 0:Ln.sessionId,start_time:kn,action:1}),Dr.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Yn.status=="number"?Yn.status:typeof Yn.code=="number"?Yn.code:0,description:Yn.message||""+Yn.code,operation_type:1,target:Yn.hostname}),Dr.core.reporter.reportTraceEnd("exceptions",1);try{Dr._addCircuitTimer()}catch(Pn){throw new El("upload file error",Pn,Dr.curProvider,Dr.mixStorePolicy,D.file||D.filePath)}Kr(Dr.uploadFile(D))}else{var _r=Dr.mixStorePolicy.s3Policy.cdnSchema;_r=(_r=_r.replace("{cdnDomain}",Dr.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Hn.Key),Kr({size:Mr.size,name:Mr.name,url:k.shortUrl?k.shortUrl:_r,ext:Mr.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return Hr.stop()}},Y,this)}))},M.getPrivateUrl=function(D){var k;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(D))return this.logger.error("illegal file url:"+D),"";var Y=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(D);Y[0];var Oe=Y[1];Y[2];var ue=Y[3];Y[4];var Pt=Y[5];if(Y[6],Y[7],(k=this.grayConfig)===null||k===void 0?void 0:k.mixStoreEnable){var jt=this._getUrlType(D);return jt===go.s3&&this.mixStorePolicy.s3Policy&&(D=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",Pt)),jt===go.nos&&this.mixStorePolicy.nosPolicy&&(D=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",Pt)),D}var ur=this.config,gr=ur.downloadUrl,yr=ur.downloadHostList,Mr=ur.nosCdnEnable,xr=this.config.cdn.cdnDomain,Fr=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Dr=decodeURIComponent(Pt),zr=Ca(Dr).call(Dr,Fr);if(xr&&zr>-1&&Mr)return""+Oe+xr+"/"+Mo(Dr).call(Dr,zr);if(bc(yr).call(yr,ue)&&bc(Pt).call(Pt,"/")){var Hr=Ca(Pt).call(Pt,"/"),Kr=Pt.substring(0,Hr),kn=Pt.substring(Hr+1);return gr.replace("{bucket}",Kr).replace("{object}",kn)}var Yn=li(yr).call(yr,function(xo){return typeof ue=="string"&&bc(ue).call(ue,xo)})[0],Hn=Yn?ue.replace(Yn,"").replace(/\W/g,""):null;return Hn?gr.replace("{bucket}",Hn).replace("{object}",Pt):D},M.getOriginUrl=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:D}});case 2:return Y=ue.sent,ue.abrupt("return",Y.content.nosSafeUrlTag.originUrl);case 4:case"end":return ue.stop()}},k,this)}))},M.getFileToken=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt,ur=this;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(En({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},D),Y=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,Oe=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,Y!==String(Zo.dontNeed)||Oe!==String(Zo.dontNeed)){yr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(D.type!==Zo.time){yr.next=17;break}if(!(Y&&Ca(Y).call(Y,String(Zo.time))>=0||Oe&&Ca(Oe).call(Oe,String(Zo.time))>0)){yr.next=13;break}return yr.abrupt("return",this.getFileAuthToken(D));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:yr.next=33;break;case 17:if(D.urls&&D.urls.length){yr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(Pt=[],jt=[],In(ue=D.urls).call(ue,function(Mr){var xr=ur._getUrlType(Mr);xr===go.nos&&jt.push(Mr),xr===go.s3&&Pt.push(Mr)}),(!Oe||Pt.length!==0&&Ca(Oe).call(Oe,String(Zo.urls))<0)&&(this.logger.warn("s3 url don't support url token"),Pt=[]),(!Y||jt.length!==0&&Ca(Y).call(Y,String(Zo.urls))<0)&&(this.logger.warn("nos url don't support url token"),jt=[]),Pt.length!==0||jt.length!==0){yr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(Pt.length!==0&&jt.length!==0){yr.next=33;break}return D.urls=Wo(D.urls),yr.abrupt("return",this.getFileAuthToken(D));case 33:case"end":return yr.stop()}},k,this)}))},M.getFileAuthToken=function(D){return Sn(this,void 0,void 0,ir.mark(function k(){var Y;return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:D});case 2:return Y=ue.sent,ue.abrupt("return",Y.content.mixStoreAuthTokenResTag);case 4:case"end":return ue.stop()}},k,this)}))},M._getUrlType=function(D){var k,Y;return this.mixStorePolicy.nosPolicy&&Rn(k=this.mixStorePolicy.nosPolicy.dlcdns).call(k,function(Oe){return Ca(D).call(D,Oe)>=0})?go.nos:this.mixStorePolicy.s3Policy&&Rn(Y=this.mixStorePolicy.s3Policy.dlcdns).call(Y,function(Oe){return Ca(D).call(D,Oe)>=0})?go.s3:null},M._addCircuitTimer=function(){var D=this,k=this.mixStorePolicy.providers,Y=k[(Ca(k).call(k,String(this.curProvider))+1)%k.length];if(Y===k[0])throw new Error("uploadFile all policy fail");var Oe=Oi(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(Oe&&Oe.retryNext&&Y&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+Y),this.curProvider=ko(Y),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var ue=this.mixStorePolicy[this.curProvider===go.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!ue||ue===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){D.logger.log("uploadFile:: upload policy will change,now policy:"+D.curProvider+" nextProvider:"+ko(D.mixStorePolicy.providers[0])),D.curProvider=ko(D.mixStorePolicy.providers[0]),D.core.timerManager.deleteTimer(D.circuitTimer)},1e3*ue)}},M.process=function(D){var k=this[D.cmd+"Handler"];return typeof k=="function"?k.call(this,D):D.error&&!D.error.ignore?uo.reject(D.error):uo.resolve(D)},w}(),ks=Ga({none:0,normal:1,all:3}),ja=Ga({normal:0,advanced:1}),po=Ga({normal:0,owner:1,manager:2}),Go={noVerify:0,needVerify:1,rejectAll:2},zn=Ga(Go),Bo={needVerify:0,noVerify:1},Qa=Ga(Bo),Jn={manager:0,all:1},Qy=Ga(Jn),qh={manager:0,all:1},xi=Ga(qh),Ii={manager:0,all:1},ka=Ga(Ii);function Qo(w){var M,L=["teamId"],D=["level","memberNum","memberUpdateTime","createTime","updateTime"],k=["valid","validToCurrentUser","mute"],Y={type:ja,muteType:ks,joinMode:zn,beInviteMode:Qa,inviteMode:Qy,updateTeamMode:xi,updateExtMode:ka};w.bits;var Oe=Pi(w,["bits"]);return In(L).call(L,function(ue){Oe[ue]&&(Oe[ue]=Oe[ue].toString())}),In(D).call(D,function(ue){Oe[ue]!==void 0&&(Oe[ue]=ko(Oe[ue]))}),In(k).call(k,function(ue){Oe[ue]!==void 0&&(Oe[ue]=ko(Oe[ue])===1)}),In(M=Vo(Y)).call(M,function(ue){Oe[ue]!==void 0&&(Oe[ue]=Y[ue][Oe[ue]]||Oe[ue])}),Oe}function ma(w){return w&&w.length>0?To(w).call(w,function(M){return Qo(M)}):[]}function Kd(w){var M,L=Cr({},w),D=["avatar","name","intro","announcement","ext"],k={joinMode:Go,beInviteMode:Bo,inviteMode:Jn,updateTeamMode:qh,updateExtMode:Ii};return In(D).call(D,function(Y){L[Y]!==void 0&&(L[Y]=L[Y].toString())}),In(M=Vo(k)).call(M,function(Y){L[Y]!==void 0&&(L[Y]=k[Y][L[Y]])}),L}function kM(w){var M=["teamId","ext","account","nickInTeam"],L={};return w.bitConfigMask!==void 0&&(L.bits=ko(w.bitConfigMask)),In(M).call(M,function(D){w[D]&&(L[D]=w[D].toString())}),L}function Wi(w){var M,L=["teamId"],D=["joinTime","updateTime","bitConfigMask"],k=["active","valid","mute"],Y={type:po},Oe=w.bits,ue=Pi(w,["bits"]);return Oe!==void 0&&(ue.muteTeam=ko(Oe)===1,ue.bitConfigMask=Oe),ue.id=ue.teamId+"-"+ue.account,In(L).call(L,function(Pt){ue[Pt]&&(ue[Pt]=ue[Pt].toString())}),In(D).call(D,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=ko(ue[Pt]))}),In(k).call(k,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=ko(ue[Pt])===1)}),In(M=Vo(Y)).call(M,function(Pt){ue[Pt]!==void 0&&(ue[Pt]=Y[Pt][ue[Pt]]||ue[Pt])}),ue}function Wd(w){return w&&w.length>0?To(w).call(w,function(M){return Wi(M)}):[]}function of(w,M,L){return L===void 0&&(L="normal"),{id:w.teamId+"-"+M,teamId:w.teamId,account:M,type:L,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:w.memberUpdateTime,updateTime:w.memberUpdateTime,active:!0,valid:!0}}function Vh(w,M,L){return L===void 0&&(L="normal"),M&&M.length>0?To(M).call(M,function(D){return of(w,D,L)}):[]}var RM=function(){function w(L){this.core=L}var M=w.prototype;return M.notifyAddSuperTeamMembers=function(D,k){this.core.emit("addSuperTeamMembers",{team:D,accounts:k,members:Vh(D,k)})},M.notifyUpdateSuperTeamManagers=function(D,k,Y,Oe){this.core.emit("updateSuperTeamManagers",{team:{teamId:D,memberUpdateTime:Oe},accounts:k,isManager:Y,members:To(k).call(k,function(ue){return{id:D+"-"+ue,type:"manager",account:ue,updateTime:Oe}})})},M.notifyRemoveSuperTeamMembers=function(D,k){this.core.emit("removeSuperTeamMembers",{team:D,accounts:k})},M.notifyTransferSuperTeam=function(D,k,Y){this.core.emit("transferSuperTeam",{team:D,from:{id:D.teamId+"-"+k,account:k,type:"normal",updateTime:D.memberUpdateTime},to:{id:D.teamId+"-"+Y,account:Y,type:"owner",updateTime:D.memberUpdateTime}})},M.notifyUpdateSuperTeamMembersMute=function(D,k,Y){this.core.emit("updateSuperTeamMembersMute",{team:D,accounts:k,members:To(k).call(k,function(Oe){return{id:D.teamId+"-"+Oe,account:Oe,teamId:D.teamId,mute:Y,updateTime:D.memberUpdateTime}}),mute:Y})},w}(),NM={"21_5":"addSuperTeamMembers","21_6":"removeSuperTeamMembers","21_7":"leaveSuperTeam","21_8":"updateSuperTeamInfo","21_9":"getSuperTeamInfo","21_12":"getSuperTeams","21_15":"getSuperTeamMembers","21_10":"updateMySuperTeamMemberInfo","21_20":"applySuperTeam","21_21":"passSuperTeamApply","21_22":"rejectSuperTeamApply","21_23":"acceptSuperTeamInvite","21_24":"rejectSuperTeamInvite","21_26":"addSuperTeamManagers","21_27":"removeSuperTeamManagers","21_28":"muteSuperTeam","21_29":"muteSuperTeamMembers","21_30":"updateSuperTeamMemberNick","21_31":"transferSuperTeam","21_33":"getSuperTeamMembersByAccounts","21_34":"queryMuteSuperTeamMembers","21_101":"syncCreateSuperTeam","21_109":"syncSuperTeams","21_110":"syncUpdateSuperTeamMember","21_111":"syncMySuperTeamMembers"},Jy={superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,updateTime:11,ext:12,mute:13,invitorAccid:14,joinTime:15}},Bc=ri(Jy),BM={getSuperTeamInfo:{sid:21,cid:9,service:"superTeam",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},getSuperTeams:{sid:21,cid:12,service:"superTeam",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"superTeams",reflectMapper:Bc.superTeam},{type:"Number",name:"timetag"}]},updateSuperTeamInfo:{sid:21,cid:8,service:"superTeam",params:[{type:"Property",name:"superTeam",reflectMapper:Jy.superTeam}],response:[{type:"Number",name:"time"}]},addSuperTeamMembers:{sid:21,cid:5,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"time"}]},removeSuperTeamMembers:{sid:21,cid:6,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},addSuperTeamManagers:{sid:21,cid:26,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:21,cid:27,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applySuperTeam:{sid:21,cid:20,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},transferSuperTeam:{sid:21,cid:31,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},muteSuperTeam:{sid:21,cid:28,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},muteSuperTeamMembers:{sid:21,cid:29,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateSuperTeamMemberNick:{sid:21,cid:30,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Jy.superTeamMember}]},updateMySuperTeamMemberInfo:{sid:21,cid:10,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Jy.superTeamMember}]},getSuperTeamMembersByAccounts:{sid:21,cid:33,service:"superTeam",params:[{type:"StrArray",name:"memberIds"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},getSuperTeamMembers:{sid:21,cid:15,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},queryMuteSuperTeamMembers:{sid:21,cid:34,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},leaveSuperTeam:{sid:21,cid:7,service:"superTeam",params:[{type:"Long",name:"teamId"}]},passSuperTeamApply:{sid:21,cid:21,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:21,cid:22,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:21,cid:23,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:21,cid:24,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncSuperTeams:{sid:21,cid:109,service:"superTeam",response:[{type:"PropertyArray",name:"teams",reflectMapper:Bc.superTeam},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},syncCreateSuperTeam:{sid:21,cid:101,service:"superTeam",response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},syncUpdateSuperTeamMember:{sid:21,cid:110,service:"superTeam",response:[{type:"Property",name:"teamMember",reflectMapper:Bc.superTeamMember}]},syncMySuperTeamMembers:{sid:21,cid:111,ext:"sync",service:"superTeam",response:[{type:"PropertyArray",name:"teamMembers",reflectMapper:Bc.superTeamMember},{type:"Number",name:"timetag"}]}},FM=function(w){function M(D){var k;return(k=w.call(this,"superTeam",D)||this).mySuperTeamMembersMap=new ec,k.service=new RM(D),qa({cmdMap:NM,cmdConfig:BM}),k.core.eventBus.on("team/onNotification",function(Y){return k.notificationHandler(Y)}),k}No(M,w);var L=M.prototype;return L.mergeMySuperTeamMembers=function(k){var Y=this;In(k).call(k,function(Oe){var ue=Oe.teamId,Pt=Y.mySuperTeamMembersMap.get(ue),jt=Cr({},Pt,Oe);Y.mySuperTeamMembersMap.set(ue,jt)})},L.getSuperTeamInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),jt.next=3,this.core.sendCmd("getSuperTeamInfo",{teamId:k.teamId});case 3:return Oe=jt.sent,ue=Oe.content.superTeam,jt.abrupt("return",Qo(ue));case 6:case"end":return jt.stop()}},Y,this)}))},L.getSuperTeams=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getSuperTeams",{timetag:0});case 2:return Y=Pt.sent,Oe=Y.content.superTeams,Pt.abrupt("return",ma(Oe));case 5:case"end":return Pt.stop()}},k,this)}))},L.updateSuperTeamInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},k),Oe=Kd(k),Pt.next=4,this.core.sendCmd("updateSuperTeamInfo",{superTeam:Oe});case 4:return Pt.abrupt("return",Qo(Oe));case 5:case"end":return Pt.stop()}},Y,this)}))},L.addSuperTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("addSuperTeamMembers",{teamId:k.teamId,accounts:k.accounts,ps:k.ps||"",attach:k.ext||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.removeSuperTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},k),ue.next=3,this.core.sendCmd("removeSuperTeamMembers",{teamId:k.teamId,accounts:k.accounts});case 3:case"end":return ue.stop()}},Y,this)}))},L.addSuperTeamManagers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},k),ue.next=3,this.core.sendCmd("addSuperTeamManagers",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.removeSuperTeamManagers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},k),ue.next=3,this.core.sendCmd("removeSuperTeamManagers",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.applySuperTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},k),Pt.next=3,this.core.sendCmd("applySuperTeam",{teamId:k.teamId,ps:k.ps||""});case 3:return Oe=Pt.sent,Pt.abrupt("return",Qo(Oe.content.superTeam));case 5:case"end":return Pt.stop()}},Y,this)}))},L.transferSuperTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("transferSuperTeam",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.muteSuperTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("muteSuperTeam",{teamId:k.teamId,mute:k.mute?1:0});case 3:case"end":return ue.stop()}},Y,this)}))},L.muteSuperTeamMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string"},mute:{type:"boolean"}},k),ue.next=3,this.core.sendCmd("muteSuperTeamMembers",{teamId:k.teamId,accounts:k.accounts,mute:k.mute?1:0});case 3:case"end":return ue.stop()}},Y,this)}))},L.updateMemberNick=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},k),Oe=kM({teamId:k.teamId,nickInTeam:k.nickInTeam,account:k.account}),jt.next=4,this.core.sendCmd("updateSuperTeamMemberNick",{teamMember:Oe});case 4:return ue=Wi(Cr({updateTime:new Date().getTime()},Oe)),jt.abrupt("return",ue);case 6:case"end":return jt.stop()}},Y,this)}))},L.updateMyMemberInfo=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},k),Oe=kM({teamId:k.teamId,nickInTeam:k.nickInTeam,bitConfigMask:k.bitConfigMask,ext:k.ext}),ur.next=4,this.core.sendCmd("updateMySuperTeamMemberInfo",{teamMember:Oe});case 4:return ue=Wi(Cr({updateTime:new Date().getTime(),account:this.core.account},Oe)),this.mergeMySuperTeamMembers([ue]),this.core.emit("updateSuperTeamMember",ue),Pt=fc(this.mySuperTeamMembersMap.get(ue.teamId)),this.core.emit("mySuperTeamMembers",[Pt]),ur.abrupt("return",ue);case 10:case"end":return ur.stop()}},Y,this)}))},L.getSuperTeamMembersByAccounts=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:20,min:1}},k),Pt=To(ue=k.accounts).call(ue,function(yr){return k.teamId+"|"+yr}),gr.next=4,this.core.sendCmd("getSuperTeamMembersByAccounts",{memberIds:Pt});case 4:return jt=gr.sent,gr.abrupt("return",Wd((Y=jt.content)===null||Y===void 0?void 0:Y.superTeamMembers));case 6:case"end":return gr.stop()}},Oe,this)}))},L.getSuperTeamMembers=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,max:1e3,required:!1},reverse:{type:"boolean",required:!1}},k),jt.next=3,this.core.sendCmd("getSuperTeamMembers",Cr({joinTime:0,limit:100,reverse:!1},k));case 3:return ue=jt.sent,jt.abrupt("return",Wd((Y=ue.content)===null||Y===void 0?void 0:Y.superTeamMembers));case 5:case"end":return jt.stop()}},Oe,this)}))},L.queryMuteMembers=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},k),jt.next=3,this.core.sendCmd("queryMuteSuperTeamMembers",Cr({limit:100,joinTime:0,reverse:!1},k));case 3:return Oe=jt.sent,ue=Oe.content,jt.abrupt("return",Wd(ue.superTeamMembers));case 6:case"end":return jt.stop()}},Y,this)}))},L.leaveSuperTeam=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("leaveSuperTeam",{teamId:k.teamId});case 3:case"end":return ue.stop()}},Y,this)}))},L.passSuperTeamApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("passSuperTeamApply",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.rejectSuperTeamApply=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("rejectSuperTeamApply",{teamId:k.teamId,from:k.from,ps:k.ps||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.acceptSuperTeamInvite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},k),ue.next=3,this.core.sendCmd("acceptSuperTeamInvite",k);case 3:case"end":return ue.stop()}},Y,this)}))},L.rejectSuperTeamInvite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},k),ue.next=3,this.core.sendCmd("rejectSuperTeamInvite",{teamId:k.teamId,from:k.from,ps:k.ps||""});case 3:case"end":return ue.stop()}},Y,this)}))},L.syncSuperTeamsHandler=function(k){var Y=k.content;this.core.eventBus.emit("sync/updateTimetag",{superTeams:ko(Y.timetag)});var Oe=Y==null?void 0:Y.superTeams;if(Oe&&Oe.length){var ue=ma(Oe);this.core.emit("superTeams",ue)}},L.syncCreateSuperTeamHandler=function(k){var Y=k.content,Oe=Qo(Y==null?void 0:Y.superTeam),ue=of(Oe,Oe.owner,"owner");this.core.emit("createSuperTeam",Oe,ue)},L.syncUpdateSuperTeamMemberHandler=function(k){var Y=k.content,Oe=Wi(Y==null?void 0:Y.teamMember);Oe.updateTime||(Oe.updateTime=new Date().getTime()),this.mergeMySuperTeamMembers([Oe]),this.core.emit("updateSuperTeamMember",Oe);var ue=fc(this.mySuperTeamMembersMap.get(Oe.teamId));this.core.emit("mySuperTeamMembers",[ue])},L.syncMySuperTeamMembersHandler=function(k){var Y,Oe=k.content;this.core.eventBus.emit("sync/updateTimetag",{mySuperTeamMembers:ko(Oe.timetag)});var ue=Oe==null?void 0:To(Y=Oe.teamMembers).call(Y,function(Pt){return Wi(Pt)});this.mergeMySuperTeamMembers(ue),this.core.emit("mySuperTeamMembers",fc(ue))},L.notificationHandler=function(k){var Y=k.attach,Oe=k.scene,ue=k.from,Pt=k.to,jt=k.time,ur=k.idServer,gr=k.idClient,yr=Y.team,Mr=Y.account,xr=Y.accounts,Fr=Y.type;if(Oe==="superTeam")switch(this.core.options.debugLevel==="debug"?this.logger.debug("superTeam::recvNotification",ur,gr,Y):this.logger.log("superTeam::recvNotification",ur,gr,Pt,Fr,Mr,xr),Fr){case"updateSuperTeam":yr.updateTime=jt,this.core.emit("updateSuperTeam",yr);break;case"addSuperTeamMembers":this.service.notifyAddSuperTeamMembers(yr,xr);break;case"acceptSuperTeamInvite":this.service.notifyAddSuperTeamMembers(yr,[ue]);break;case"passSuperTeamApply":this.service.notifyAddSuperTeamMembers(yr,[Mr]);break;case"addSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(Pt,xr,!0,jt);break;case"removeSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(Pt,xr,!1,jt);break;case"removeSuperTeamMembers":this.service.notifyRemoveSuperTeamMembers(yr,xr);break;case"leaveSuperTeam":this.service.notifyRemoveSuperTeamMembers(yr,[ue]);break;case"dismissSuperTeam":this.core.emit("dismissSuperTeam",{teamId:Pt});break;case"transferSuperTeam":this.service.notifyTransferSuperTeam(yr,ue,Mr);break;case"updateSuperTeamMembersMute":this.service.notifyUpdateSuperTeamMembersMute(yr,xr,Y.mute)}},M}(oi),LM={"13_1":"getChatroomAddress","24_1":"getQChatAddress"},jM={getChatroomAddress:{sid:13,cid:1,service:"plugin",params:[{type:"Long",name:"chatroomId"},{type:"Boolean",name:"isWeixinApp"},{type:"Number",name:"ipType"}],response:[{type:"StrArray",name:"address"}]},getQChatAddress:{sid:24,cid:1,service:"plugin",params:[{type:"Property",name:"getQChatAddressTag",reflectMapper:{ipType:1}}],response:[{type:"StrArray",name:"address"}]}},DM=function(w){function M(D){var k;return(k=w.call(this,"plugin",D)||this).core=D,qa({cmdMap:LM,cmdConfig:jM}),k}No(M,w);var L=M.prototype;return L.getChatroomAddress=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({chatroomId:{type:"string",allowEmpty:!1},ipType:{type:"number",required:!1}},k),Pt.next=3,this.core.sendCmd("getChatroomAddress",{chatroomId:k.chatroomId,isWeixinApp:Ho.platform==="WXAPP",ipType:k.ipType||0});case 3:return Oe=Pt.sent,Pt.abrupt("return",Oe.content.address);case 5:case"end":return Pt.stop()}},Y,this)}))},L.getQChatAddress=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe;return ir.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return En({ipType:{type:"number",required:!1}},k),Pt.next=3,this.core.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:(k==null?void 0:k.ipType)||0}});case 3:return Oe=Pt.sent,Pt.abrupt("return",Oe.content.address);case 5:case"end":return Pt.stop()}},Y,this)}))},M}(oi),$M={"7_19":"nimQueryCloudSessionList","7_20":"nimQueryCloudSession","7_21":"nimUpdateCloudSession","7_22":"nimDeleteCloudSessionList","7_121":"nimMultiSyncUpdateCloudSession"},Hh={sessionReqTag:{minTimestamp:1,maxTimestamp:2,includedLastMsg:3,limit:4,hasMore:5},sessionTag:{sessionId:1,updateTime:2,ext:3,lastMsg:4,lastMsgType:5}},Yy=ri(Hh),UM={nimQueryCloudSessionList:{sid:7,cid:19,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionReqTag}],response:[{type:"Property",name:"tag",reflectMapper:Yy.sessionReqTag},{type:"PropertyArray",name:"sessions",reflectMapper:Yy.sessionTag}]},nimQueryCloudSession:{sid:7,cid:20,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionTag}],response:[{type:"Property",name:"session",reflectMapper:Yy.sessionTag}]},nimUpdateCloudSession:{sid:7,cid:21,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionTag}]},nimDeleteCloudSessionList:{sid:7,cid:22,service:"cloudSession",params:[{type:"PropertyArray",name:"tags",reflectMapper:Hh.sessionTag}]},nimMultiSyncUpdateCloudSession:{sid:7,cid:121,service:"cloudSession",response:[{type:"Property",name:"session",reflectMapper:Yy.sessionTag}]}},qM={sessionId:{type:"string"},updateTime:{type:"number"},ext:{type:"string"},lastMsg:{type:"object"},lastMsgType:{type:"number"}};function _M(w,M,L){var D=Zi(qM,w),k=Lo(D.sessionId,"|"),Y=k.accid,Oe=k.scene;if(D.sessionId=Oe+"-"+Y,D.lastMsg){var ue=D.lastMsgType===1;D.lastMsgInfo=ue?{isLastMsgRecalled:ue,revokedMsg:Vd(Es(D.lastMsg,Sl.sysMsg),L)}:{isLastMsgRecalled:ue,lastMsg:Bs(Es(D.lastMsg,ii.msg),{account:M})}}return delete D.lastMsg,delete D.lastMsgType,D}function VM(w,M,L){return w&&w.length>0?To(w).call(w,function(D){return _M(D,M,L)}):[]}var PM,Fc,zh,HM=function(w){function M(D){var k;return k=w.call(this,"cloudSession",D)||this,qa({cmdMap:$M,cmdConfig:UM}),k}No(M,w);var L=M.prototype;return L.queryCloudSessionList=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({minTimestamp:{type:"number",min:0,required:!1},maxTimestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},includedLastMsg:{type:"boolean",required:!1}},k),(ue=Cr({limit:100,includedLastMsg:!0},k)).includedLastMsg=tS.boolean(k,"includedLastMsg"),yr.next=5,this.core.sendCmd("nimQueryCloudSessionList",{tag:ue});case 5:return Pt=yr.sent,jt=((Y=Pt.content)===null||Y===void 0?void 0:Y.tag)||{},ur=Pt.content.sessions,yr.abrupt("return",{hasMore:+jt.hasMore>0,sessionList:VM(ur,this.core.account,this.logger)});case 9:case"end":return yr.stop()}},Oe,this)}))},L.queryCloudSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({sessionId:{type:"string",allowEmpty:!1}},k),Oe=Lo(k.sessionId,"-"),ue=Oe.accid,Pt=Oe.scene,gr.next=4,this.core.sendCmd("nimQueryCloudSession",{tag:{sessionId:Pt==="superTeam"?"super_team|"+ue:Pt+"|"+ue}});case 4:return jt=gr.sent,gr.abrupt("return",_M(jt.content.session,this.core.account,this.logger));case 6:case"end":return gr.stop()}},Y,this)}))},L.updateCloudSession=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({sessionId:{type:"string",allowEmpty:!1},ext:{type:"string",allowEmpty:!1,required:!1}},k),Oe=Lo(k.sessionId,"-"),ue=Oe.accid,Pt=Oe.scene,ur.next=4,this.core.sendCmd("nimUpdateCloudSession",{tag:{sessionId:Pt==="superTeam"?"super_team|"+ue:Pt+"|"+ue,ext:k.ext}});case 4:case"end":return ur.stop()}},Y,this)}))},L.deleteCloudSessionList=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({sessionIdList:{type:"array",itemType:"string"}},k),ue=To(Oe=k.sessionIdList).call(Oe,function(ur){var gr=Lo(ur,"-"),yr=gr.accid,Mr=gr.scene;return{sessionId:Mr==="superTeam"?"super_team|"+yr:Mr+"|"+yr}}),jt.next=4,this.core.sendCmd("nimDeleteCloudSessionList",{tags:ue});case 4:case"end":return jt.stop()}},Y,this)}))},L.nimMultiSyncUpdateCloudSessionHandler=function(k){var Y=_M(k.content.session,this.core.account,this.logger);this.core.emit("multiSyncUpdateCloudSession",Y)},M}(oi);(function(w){w[w.audio=1]="audio",w[w.video=2]="video",w[w.custom=3]="custom"})(PM||(PM={})),function(w){w[w.kClose=1]="kClose",w[w.kJoin=2]="kJoin",w[w.kInvite=3]="kInvite",w[w.kCancelInvite=4]="kCancelInvite",w[w.kReject=5]="kReject",w[w.kAccept=6]="kAccept",w[w.kLeave=7]="kLeave",w[w.kCustom=8]="kCustom"}(Fc||(Fc={})),function(w){w[w.kDefault=0]="kDefault",w[w.kLeave=1]="kLeave",w[w.kSelfSync=3]="kSelfSync"}(zh||(zh={}));var wM={needPush:{type:"boolean",required:!1},pushTitle:{type:"string",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needPushBadge:{type:"boolean",required:!1}},zM={"15_1":"signalingCreate","15_2":"signalingDelay","15_3":"signalingClose","15_4":"signalingJoin","15_5":"signalingLeave","15_6":"signalingInvite","15_7":"signalingCancelInvite","15_8":"signalingReject","15_9":"signalingAccept","15_10":"signalingSendCustomCommand","15_11":"signalingRecvNotification","15_12":"signalingMultiSyncNotification","15_13":"signalingSyncNotification","15_14":"singalingSyncChannels","15_15":"signalingQueryInfo","15_16":"signalingCallEx","15_17":"signalingJoinAndAccept"},ts={avSignalTag:Cr({type:1,name:2,channelId:3,createTime:4,expireTime:5,creatorAccid:6,ext:7,invalid:8,fromAccid:10,toAccid:11,requestId:12,members:18,attach:19,attachExt:20,needOffline:21,msgId:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},{needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needPushBadge:17})},mc=ri(ts),KM={signalingCreate:{sid:15,cid:1,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingDelay:{sid:15,cid:2,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingClose:{sid:15,cid:3,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingJoin:{sid:15,cid:4,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingLeave:{sid:15,cid:5,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingInvite:{sid:15,cid:6,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingCancelInvite:{sid:15,cid:7,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingReject:{sid:15,cid:8,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingAccept:{sid:15,cid:9,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingSendCustomCommand:{sid:15,cid:10,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}]},signalingRecvNotification:{sid:15,cid:11,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingMultiSyncNotification:{sid:15,cid:12,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingSyncNotification:{sid:15,cid:13,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:mc.avSignalTag}]},singalingSyncChannels:{sid:15,cid:14,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:mc.avSignalTag}]},signalingQueryInfo:{sid:15,cid:15,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingCallEx:{sid:15,cid:16,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingJoinAndAccept:{sid:15,cid:17,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ts.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:mc.avSignalTag}]},signalingBatchMarkRead:{sid:4,cid:5,isNoResponse:!0,service:"signaling",params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]}},Xy={type:{type:"number"},createTime:{type:"number"},expireTime:{type:"number"},invalid:{type:"boolean"},pushInfo:wM,pluginSetting:{nertcInfo:{nertcChannelName:{type:"string"},nertcTokenTtl:{type:"number"},nertcToken:{type:"string"},nertcJoinRoomQueryParamMap:{type:"string"},callStatus:{type:"number"}}},attach:{type:"object"},members:{type:"object"},needOffline:{type:"boolean"},uid:{type:"number"},time:{type:"number"}};function Gd(w){var M,L=Zi(Xy,w),D=[];return L.members&&L.members.length>0&&(D=To(M=L.members).call(M,function(k){return function(Oe){return Zi(Xy,Es(Oe,{1:"accid",2:"uid",3:"createTime",4:"expireTime"}))}(k)}),delete L.members),D.length>0?{channelInfo:L,memberList:D}:{channelInfo:L}}function gc(w){return Td(Xy,w)}var WM=function(w){function M(D){var k;return(k=w.call(this)||this).timer=0,k.pollingInterval=12e4,k.name="signaling",k.logger=D.logger,k.core=D,k.channels={},qa({cmdMap:zM,cmdConfig:KM}),k}No(M,w);var L=M.prototype;return L.callEx=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({type:{type:"number"},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:wM},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},k),yr.next=3,this.core.sendCmd("signalingCallEx",{tag:gc(k)});case 3:return ue=yr.sent,Pt=((Y=ue.content)===null||Y===void 0?void 0:Y.data)||{},jt=Gd(Pt),this.channels[jt.channelInfo.channelId]=fc(jt.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(ur=this.aotoDelay).call(ur,this),this.pollingInterval,-1)),yr.abrupt("return",jt);case 9:case"end":return yr.stop()}},Oe,this)}))},L.joinAndAccept=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur,gr,yr;return ir.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},uid:{type:"number",required:!1},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},k),ue=k.fromAccid,(Pt=Pi(k,["fromAccid"])).toAccid=ue,xr.next=5,this.core.sendCmd("signalingJoinAndAccept",{tag:gc(Pt)});case 5:return jt=xr.sent,ur=((Y=jt.content)===null||Y===void 0?void 0:Y.data)||{},gr=Gd(ur),this.channels[gr.channelInfo.channelId]=fc(gr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(yr=this.aotoDelay).call(yr,this),this.pollingInterval,-1)),xr.abrupt("return",gr);case 11:case"end":return xr.stop()}},Oe,this)}))},L.create=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({type:{type:"number"},ext:{type:"string",required:!1}},k),ur.next=3,this.core.sendCmd("signalingCreate",{tag:gc(k)});case 3:return ue=ur.sent,Pt=((Y=ue.content)===null||Y===void 0?void 0:Y.data)||{},ur.abrupt("return",Gd(Pt));case 6:case"end":return ur.stop()}},Oe,this)}))},L.close=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},k),ue.next=3,this.core.sendCmd("signalingClose",{tag:gc(k)});case 3:case"end":return ue.stop()}},Y,this)}))},L.queryInfo=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt;return ir.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return En({name:{type:"string",allowEmpty:!1}},k),ur.next=3,this.core.sendCmd("signalingQueryInfo",{tag:k});case 3:return ue=ur.sent,Pt=((Y=ue.content)===null||Y===void 0?void 0:Y.data)||{},ur.abrupt("return",Gd(Pt));case 6:case"end":return ur.stop()}},Oe,this)}))},L.join=function(k){var Y;return Sn(this,void 0,void 0,ir.mark(function Oe(){var ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},uid:{type:"number",min:0,required:!1},needOffline:{type:"boolean",required:!1}},k),yr.next=3,this.core.sendCmd("signalingJoin",{tag:gc(k)});case 3:return ue=yr.sent,Pt=((Y=ue.content)===null||Y===void 0?void 0:Y.data)||{},jt=Gd(Pt),this.channels[jt.channelInfo.channelId]=fc(jt.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(ur=this.aotoDelay).call(ur,this),this.pollingInterval,-1)),yr.abrupt("return",jt);case 9:case"end":return yr.stop()}},Oe,this)}))},L.aotoDelay=function(){return Sn(this,void 0,void 0,ir.mark(function k(){var Y,Oe,ue,Pt,jt;return ir.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if((Y=Vo(this.channels)).length!==0){gr.next=4;break}return this.timer&&this.core.timerManager.deleteTimer(this.timer),gr.abrupt("return");case 4:this.logger.log("signling:autoDelay",Y),Oe=0;case 6:if(!(Oe<Y.length)){gr.next=23;break}return ue=Y[Oe],gr.prev=8,gr.next=11,this.core.sendCmd("signalingDelay",{tag:{channelId:ue}});case 11:Pt=gr.sent,jt=Gd(Pt.content.data),this.channels[ue]=jt.channelInfo,gr.next=20;break;case 16:gr.prev=16,gr.t0=gr.catch(8),this.logger.warn("signling:autoDelay "+ue+" failed",gr.t0),delete this.channels[ue];case 20:Oe++,gr.next=6;break;case 23:case"end":return gr.stop()}},k,this,[[8,16]])}))},L.leave=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},k),ue.next=3,this.core.sendCmd("signalingLeave",{tag:gc(k)});case 3:delete this.channels[k.channelId];case 4:case"end":return ue.stop()}},Y,this)}))},L.invite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:wM}},k),ue.next=3,this.core.sendCmd("signalingInvite",{tag:gc(k)});case 3:case"end":return ue.stop()}},Y,this)}))},L.cancelInvite=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},k),ue.next=3,this.core.sendCmd("signalingCancelInvite",{tag:gc(k)});case 3:case"end":return ue.stop()}},Y,this)}))},L.reject=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue;return ir.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},k),Oe=k.fromAccid,(ue=Pi(k,["fromAccid"])).toAccid=Oe,jt.next=5,this.core.sendCmd("signalingReject",{tag:gc(ue)});case 5:case"end":return jt.stop()}},Y,this)}))},L.accept=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){var Oe,ue,Pt,jt,ur;return ir.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},autoJoin:{type:"boolean",required:!1},uid:{type:"number",min:0,required:!1},joinAttachExt:{type:"string",required:!1}},k),Oe=k.autoJoin,ue=k.joinAttachExt,Pt=k.fromAccid,(jt=Pi(k,["autoJoin","joinAttachExt","fromAccid"])).toAccid=Pt,yr.next=5,this.core.sendCmd("signalingAccept",{tag:gc(jt)});case 5:if(this.logger.log("Signaling:accept, accept success, autoJoin "+k.autoJoin),!Oe){yr.next=10;break}return ur={channelId:k.channelId,needOffline:k.needOffline,attachExt:ue,uid:k.uid},yr.next=10,this.join(ur);case 10:case"end":return yr.stop()}},Y,this)}))},L.sendCustomCommand=function(k){return Sn(this,void 0,void 0,ir.mark(function Y(){return ir.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},attachExt:{type:"string",required:!1}},k),ue.next=3,this.core.sendCmd("signalingSendCustomCommand",{tag:gc(k)});case 3:case"end":return ue.stop()}},Y,this)}))},L.signalingRecvNotificationHandler=function(k){var Y=typeof Oi(k,"raw.r[0]")=="number"?""+k.raw.r[0]:void 0;k.content.data.msgId=Y,this.doNotify(k.content.data),Y&&ko(Y)&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:[Y]})},L.signalingMultiSyncNotificationHandler=function(k){this.doNotify(k.content.data,zh.kSelfSync)},L.doNotify=function(k,Y){Y===void 0&&(Y=zh.kDefault);var Oe=function(Dr,zr){zr===void 0&&(zr=zh.kDefault);var Hr=Zi(Xy,Dr),Kr=Hr.attach,kn=Hr.time,Yn=Hr.msgId;Hr.fromAccid,Hr.toAccid,Hr.members,Hr.requestId,Hr.pushInfo;var Hn=Pi(Hr,["attach","time","msgId","fromAccid","toAccid","members","requestId","pushInfo"]),xo=Kr.type,Ln=Hr.ext;return delete Hr.attach,{metaData:{eventType:xo,channelInfo:Hn,feature:zr,ext:Ln,time:kn,msgId:Yn},rawData:Hr}}(k,Y),ue=Oe.metaData,Pt=Oe.rawData,jt=Pt.fromAccid,ur=Pt.toAccid,gr=Pt.members,yr=Pt.requestId,Mr=Pt.pushInfo,xr=Pt.msgId;switch(ue.eventType){case Fc.kClose:this.emit("signalingClose",{fromAccid:jt,metaData:ue});break;case Fc.kJoin:this.emit("signalingJoin",{member:gr,metaData:ue});break;case Fc.kInvite:this.emit("signalingInvite",{fromAccid:jt,toAccid:ur,requestId:yr,pushInfo:Mr,metaData:ue});break;case Fc.kCancelInvite:this.emit("signalingCancelInvite",{fromAccid:jt,toAccid:ur,requestId:yr,metaData:ue});break;case Fc.kReject:this.emit("signalingReject",{toAccid:ur,requestId:yr,metaData:ue});break;case Fc.kAccept:this.emit("signalingAccept",{toAccid:ur,requestId:yr,metaData:ue});break;case Fc.kLeave:this.emit("signalingLeave",{fromAccid:jt,metaData:ue});break;case Fc.kCustom:this.emit("signalingCustomCommand",{fromAccid:jt,metaData:ue});break;default:this.logger.warn("signaling:notification, no such a type "+ue.eventType,Pt)}return xr},L.signalingSyncNotificationHandler=function(k){var Y,Oe,ue=this;if(k.content.datas&&k.content.datas.length>0){var Pt=li(Y=To(Oe=k.content.datas).call(Oe,function(jt){return ue.doNotify(jt)})).call(Y,function(jt){return jt});Pt.length>0&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:Pt})}},L.singalingSyncChannelsHandler=function(k){var Y;if(this.timer=0,this.channels={},k.content.datas&&k.content.datas.length>0){var Oe=To(Y=k.content.datas).call(Y,function(ue){return Gd(ue)});this.emit("singalingSyncChannels",Oe)}},L.process=function(k){var Y=this[k.cmd+"Handler"];return typeof Y=="function"?(Y.call(this,k),uo.resolve(k)):k.error&&!k.error.ignore?uo.reject(k.error):uo.resolve(k)},M}(Hi.EventEmitter);return Fa.setAdapters(ty),Fa.registerService(uy,"auth"),Fa.registerService(ky,"msg"),Fa.registerService(_S,"misc"),Fa.registerService(Iy,"user"),Fa.registerService(rM,"session"),Fa.registerService(hM,"team"),Fa.registerService(TM,"systemMessage"),Fa.registerService(MM,"friend"),Fa.registerService(S,"event"),Fa.registerService(z,"msgExtend"),Fa.registerService(vn,"msgLog"),Fa.registerService($n,"passThrough"),Fa.registerService(Eo,"cloudStorage"),Fa.registerService(FM,"superTeam"),Fa.registerService(qp,"sync"),Fa.registerService(DM,"plugin"),Fa.registerService(HM,"cloudSession"),Fa.registerService(WM,"signaling"),Fa})})(NIM_BROWSER_SDK);var NIM_BROWSER_SDKExports=NIM_BROWSER_SDK.exports;const NIMSDK=getDefaultExportFromCjs(NIM_BROWSER_SDKExports);var NIM_Web_SDK={exports:{}};/*!
 * 
 * VERSION: 9.13.0
 * Git Hash: b7e3ed4d45a88d8c78898efb66610b01c72f8323
 * 
 * Create At: 2023/9/5 下午6:28:51
 * 
 * Target: NIM_Web_SDK
 */(function(module,exports){(function(t,r){module.exports=r()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(n,o,i){e.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:i})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,o){if(1&o&&(n=e(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var a in n)e.d(i,a,(function(s){return n[s]}).bind(null,a));return i},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="",e(e.s=910)}([function(t,r,e){var n=e(58),o=e(2),i=e(6),a=e(15),s=e(5),u=e(171),c=e(69),d=e(138),m=e(32),v=e(7),g=e(8),b=e(10),T=e(197),_=e(139),y=e(23),O=e(17),V=e(463),Ce=e(3),ae=e(85),Fe=e(86),_e=e(70),de=e(59),oe=e(60),he=e(61),Ve=e(62),le=e(47),ie=e(26);function Ie(ze,rr){var Et=s(ze);if(de){var Lt=de(ze);rr&&(Lt=O(Lt).call(Lt,function(cr){return oe(ze,cr).enumerable})),Et.push.apply(Et,Lt)}return Et}function pe(ze,rr){var Et=Fe!==void 0&&_e(ze)||ze["@@iterator"];if(!Et){if(m(ze)||(Et=function(Ir,kr){var Ar;if(Ir){if(typeof Ir=="string")return kt(Ir,kr);var Nr=a(Ar=Object.prototype.toString.call(Ir)).call(Ar,8,-1);if(Nr==="Object"&&Ir.constructor&&(Nr=Ir.constructor.name),Nr==="Map"||Nr==="Set")return ae(Ir);if(Nr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nr))return kt(Ir,kr)}}(ze))||rr&&ze&&typeof ze.length=="number"){Et&&(ze=Et);var Lt=0,cr=function(){};return{s:cr,n:function(){return Lt>=ze.length?{done:!0}:{done:!1,value:ze[Lt++]}},e:function(Ir){throw Ir},f:cr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mr,vr=!0,Tr=!1;return{s:function(){Et=Et.call(ze)},n:function(){var Ir=Et.next();return vr=Ir.done,Ir},e:function(Ir){Tr=!0,mr=Ir},f:function(){try{vr||Et.return==null||Et.return()}finally{if(Tr)throw mr}}}}function kt(ze,rr){(rr==null||rr>ze.length)&&(rr=ze.length);for(var Et=0,Lt=new Array(rr);Et<rr;Et++)Lt[Et]=ze[Et];return Lt}var Ue=e(255),Dt=e(198);function tr(ze){ie(ze)==="object"?(this.callFunc=ze.callFunc||null,this.message=ze.message||"UNKNOW ERROR"):this.message=ze,this.time=new Date,this.timetag=+this.time}e(486);var dr,pr,ar=e(54),hr=ar.getGlobal(),Ne=/\s+/;ar.deduplicate=function(ze){var rr=[];return o(ze).call(ze,function(Et){i(rr).call(rr,Et)===-1&&rr.push(Et)}),rr},ar.capFirstLetter=function(ze){return ze?a(ze=""+ze).call(ze,0,1).toUpperCase()+a(ze).call(ze,1):""},ar.guid=(dr=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return dr()+dr()+dr()+dr()+dr()+dr()+dr()+dr()}),ar.extend=function(ze,rr,Et){for(var Lt in rr)ze[Lt]!==void 0&&Et!==!0||(ze[Lt]=rr[Lt])},ar.filterObj=function(ze,rr){var Et={};return ar.isString(rr)&&(rr=rr.split(Ne)),o(rr).call(rr,function(Lt){ze.hasOwnProperty(Lt)&&(Et[Lt]=ze[Lt])}),Et},ar.copy=function(ze,rr){var Et;return rr=rr||{},ze&&o(Et=s(ze)).call(Et,function(Lt){ar.exist(ze[Lt])&&(rr[Lt]=ze[Lt])}),rr},ar.copyWithNull=function(ze,rr){var Et;return rr=rr||{},ze&&o(Et=s(ze)).call(Et,function(Lt){(ar.exist(ze[Lt])||ar.isnull(ze[Lt]))&&(rr[Lt]=ze[Lt])}),rr},ar.findObjIndexInArray=function(ze,rr){ze=ze||[];var Et=rr.keyPath||"id",Lt=-1;return u(ze).call(ze,function(cr,mr){if(Dt(cr,Et)===rr.value)return Lt=mr,!0}),Lt},ar.findObjInArray=function(ze,rr){var Et=ar.findObjIndexInArray(ze,rr);return Et===-1?null:ze[Et]},ar.mergeObjArray=function(){var ze=[],rr=a([]).call(arguments,0,-1),Et=arguments[arguments.length-1];ar.isArray(Et)&&(rr.push(Et),Et={});var Lt,cr=Et.keyPath=Et.keyPath||"id";for(Et.sortPath=Et.sortPath||cr;!ze.length&&rr.length;)ze=rr.shift()||[],ze=a(ze).call(ze,0);return o(rr).call(rr,function(mr){mr&&o(mr).call(mr,function(vr){(Lt=ar.findObjIndexInArray(ze,{keyPath:cr,value:Dt(vr,cr)}))!==-1?ze[Lt]=ar.merge({},ze[Lt],vr):ze.push(vr)})}),Et.notSort||(ze=ar.sortObjArray(ze,Et)),ze},ar.cutObjArray=function(ze){var rr=a(ze).call(ze,0),Et=arguments.length,Lt=a([]).call(arguments,1,Et-1),cr=arguments[Et-1];ar.isObject(cr)||(Lt.push(cr),cr={});var mr,vr=cr.keyPath=cr.keyPath||"id";return o(Lt).call(Lt,function(Tr){ar.isArray(Tr)||(Tr=[Tr]),o(Tr).call(Tr,function(Ir){Ir&&(cr.value=Dt(Ir,vr),(mr=ar.findObjIndexInArray(rr,cr))!==-1&&c(rr).call(rr,mr,1))})}),rr},ar.sortObjArray=function(ze,rr){var Et=(rr=rr||{}).sortPath||"id";Ue.insensitive=!!rr.insensitive;var Lt,cr,mr,vr=!!rr.desc;return mr=ar.isFunction(rr.compare)?rr.compare:function(Tr,Ir){return Lt=Dt(Tr,Et),cr=Dt(Ir,Et),vr?Ue(cr,Lt):Ue(Lt,cr)},d(ze).call(ze,mr)},ar.emptyFunc=function(){},ar.isEmptyFunc=function(ze){return ze===ar.emptyFunc},ar.notEmptyFunc=function(ze){return ze!==ar.emptyFunc},ar.splice=function(ze,rr,Et){return c([]).call(ze,rr,Et)},ar.reshape2d=function(ze,rr){if(m(ze)){ar.verifyParamType("type",rr,"number","util::reshape2d");var Et=ze.length;if(Et<=rr)return[ze];for(var Lt=Math.ceil(Et/rr),cr=[],mr=0;mr<Lt;mr++)cr.push(a(ze).call(ze,mr*rr,(mr+1)*rr));return cr}return ze},ar.flatten2d=function(ze){if(m(ze)){var rr=[];return o(ze).call(ze,function(Et){rr=v(rr).call(rr,Et)}),rr}return ze},ar.dropArrayDuplicates=function(ze){if(m(ze)){for(var rr={},Et=[];ze.length>0;)rr[ze.shift()]=!0;for(var Lt in rr)rr[Lt]===!0&&Et.push(Lt);return Et}return ze},ar.onError=function(ze){throw new tr(ze)},ar.verifyParamPresent=function(ze,rr,Et,Lt){Et=Et||"";var cr=!1;switch(ar.typeOf(rr)){case"undefined":case"null":cr=!0;break;case"string":rr===""&&(cr=!0);break;case"StrStrMap":case"object":s(rr).length||(cr=!0);break;case"array":rr.length?u(rr).call(rr,function(mr){if(ar.notexist(mr))return cr=!0,!0}):cr=!0}cr&&ar.onParamAbsent(Et+ze,Lt)},ar.onParamAbsent=function(ze,rr){ar.onParamError("缺少参数 ".concat(ze,", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined"),rr)},ar.verifyParamAbsent=function(ze,rr,Et,Lt){Et=Et||"",rr!==void 0&&ar.onParamPresent(Et+ze,Lt)},ar.onParamPresent=function(ze,rr){ar.onParamError("多余的参数 ".concat(ze),rr)},ar.verifyParamType=function(ze,rr,Et,Lt){var cr=ar.typeOf(rr).toLowerCase();ar.isArray(Et)||(Et=[Et]),Et=g(Et).call(Et,function(vr){return vr.toLowerCase()});var mr=!0;switch(i(Et).call(Et,cr)===-1&&(mr=!1),cr){case"number":isNaN(rr)&&(mr=!1);break;case"string":Et.join("")==="numeric or numeric string"&&(mr=!!/^[0-9]+$/.test(rr))}mr||ar.onParamInvalidType(ze,Et,"",Lt)},ar.onParamInvalidType=function(ze,rr,Et,Lt){Et=Et||"",rr=ar.isArray(rr)?(rr=g(rr).call(rr,function(cr){return'"'+cr+'"'})).join(", "):'"'+rr+'"',ar.onParamError('参数"'+Et+ze+'"类型错误, 合法的类型包括: ['+rr+"]",Lt)},ar.verifyParamValid=function(ze,rr,Et,Lt){ar.isArray(Et)||(Et=[Et]),i(Et).call(Et,rr)===-1&&ar.onParamInvalidValue(ze,Et,Lt)},ar.onParamInvalidValue=function(ze,rr,Et){var Lt;ar.isArray(rr)||(rr=[rr]),rr=g(rr).call(rr,function(cr){return'"'+cr+'"'}),ar.isArray(rr)&&(rr=rr.join(", ")),ar.onParamError(v(Lt="参数 ".concat(ze,"值错误, 合法的值包括: [")).call(Lt,b(rr),"]"),Et)},ar.verifyParamMin=function(ze,rr,Et,Lt){rr<Et&&ar.onParamError("参数"+ze+"的值不能小于"+Et,Lt)},ar.verifyParamMax=function(ze,rr,Et,Lt){rr>Et&&ar.onParamError("参数"+ze+"的值不能大于"+Et,Lt)},ar.verifyArrayMax=function(ze,rr,Et,Lt){rr.length>Et&&ar.onParamError("参数"+ze+"的长度不能大于"+Et,Lt)},ar.verifyEmail=(pr=/^\S+@\S+$/,function(ze,rr,Et){pr.test(rr)||ar.onParamError("参数"+ze+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符",Et)}),ar.verifyTel=function(){var ze=/^[+\-()\d]+$/;return function(rr,Et,Lt){ze.test(Et)||ar.onParamError("参数"+rr+"电话号码格式错误, 合法字符包括+、-、英文括号和数字",Lt)}}(),ar.verifyBirth=function(){var ze=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(rr,Et,Lt){ze.test(Et)||ar.onParamError("参数"+rr+'生日格式错误, 合法为"yyyy-MM-dd"',Lt)}}(),ar.onParamError=function(ze,rr){ar.onError({message:ze,callFunc:rr})},ar.verifyOptions=function(ze,rr,Et,Lt,cr){if(ze=ze||{},rr&&(ar.isString(rr)&&(rr=rr.split(Ne)),ar.isArray(rr))){typeof Et!="boolean"&&(cr=Et||null,Et=!0,Lt="");var mr=Et?ar.verifyParamPresent:ar.verifyParamAbsent;o(rr).call(rr,function(vr){mr.call(ar,vr,ze[vr],Lt,cr)})}return ze},ar.verifyParamAtLeastPresentOne=function(ze,rr,Et){rr&&(ar.isString(rr)&&(rr=rr.split(Ne)),ar.isArray(rr)&&(u(rr).call(rr,function(Lt){return ar.exist(ze[Lt])})||ar.onParamError("以下参数["+rr.join(", ")+"]至少需要传入一个",Et)))},ar.verifyParamPresentJustOne=function(ze,rr,Et){rr&&(ar.isString(rr)&&(rr=rr.split(Ne)),ar.isArray(rr)&&T(rr).call(rr,function(Lt,cr){return ar.exist(ze[cr])&&Lt++,Lt},0)!==1&&ar.onParamError("以下参数["+rr.join(", ")+"]必须且只能传入一个",Et))},ar.verifyBooleanWithDefault=function(ze,rr,Et,Lt,cr){ar.undef(Et)&&(Et=!0),Ne.test(rr)&&(rr=rr.split(Ne)),ar.isArray(rr)?o(rr).call(rr,function(mr){ar.verifyBooleanWithDefault(ze,mr,Et,Lt,cr)}):ze[rr]===void 0?ze[rr]=Et:ar.isBoolean(ze[rr])||ar.onParamInvalidType(rr,"boolean",Lt,cr)},ar.verifyFileInput=function(ze,rr){var Et;return ar.verifyParamPresent("fileInput",ze,"",rr),ar.isString(ze)&&((ze=typeof document>"u"?void 0:document.getElementById(ze))||ar.onParamError("找不到要上传的文件对应的input, 请检查fileInput id ".concat(ze),rr)),ze.tagName&&ze.tagName.toLowerCase()==="input"&&ze.type.toLowerCase()==="file"||ar.onParamError(v(Et="请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:".concat(ze.tagName,", filetype:")).call(Et,ze.type),rr),ze},ar.verifyFileType=function(ze,rr){ar.verifyParamValid("type",ze,ar.validFileTypes,rr)},ar.verifyCallback=function(ze,rr,Et){Ne.test(rr)&&(rr=rr.split(Ne)),ar.isArray(rr)?o(rr).call(rr,function(Lt){ar.verifyCallback(ze,Lt,Et)}):ze[rr]?ar.isFunction(ze[rr])||ar.onParamInvalidType(rr,"function","",Et):ze[rr]=ar.emptyFunc},ar.verifyFileUploadCallback=function(ze,rr){ar.verifyCallback(ze,"uploadprogress uploaddone uploaderror uploadcancel",rr)},ar.validFileTypes=["image","audio","video","file"],ar.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},ar.filterFiles=function(ze,rr){var Et,Lt,cr=(rr=rr.toLowerCase())==="file",mr=[];return o([]).call(ze,function(vr){var Tr,Ir;if(cr)mr.push(vr);else if(Et=a(Tr=vr.name).call(Tr,_(Ir=vr.name).call(Ir,".")+1),(Lt=vr.type.split("/"))[0]&&Lt[1]){var kr,Ar=!1;Lt[0].toLowerCase()===rr?Ar=!0:Ar=i(kr=ar.validFileExts[rr]).call(kr,Et)!==-1,Ar&&mr.push(vr)}}),mr};var nr,sr,$e=ar.supportFormData=ar.notundef(hr.FormData);ar.getFileName=function(ze){return ze=ar.verifyFileInput(ze),$e?ze.files[0].name:a(rr=ze.value).call(rr,_(Et=ze.value).call(Et,"\\")+1);var rr,Et},ar.getFileInfo=(nr={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(ze){var rr={};if(!(ze=ar.verifyFileInput(ze)).files)return rr;var Et=ze.files[0];return $e&&(rr.name=Et.name,rr.size=Et.size,rr.type=Et.name.match(/\.(\w+)$/),rr.type=rr.type&&rr.type[1].toLowerCase(),rr.transcodeType=nr[rr.type]||0),rr}),ar.sizeText=(sr=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(ze){var rr,Et=0;do rr=(ze=Math.floor(100*ze)/100)+sr[Et],ze/=1024,Et++;while(ze>1);return rr}),ar.promises2cmds=function(ze){return g(ze).call(ze,function(rr){return rr.cmd})},ar.objs2accounts=function(ze){return g(ze).call(ze,function(rr){return rr.account})},ar.teams2ids=function(ze){return g(ze).call(ze,function(rr){return rr.teamId})},ar.objs2ids=function(ze){return g(ze).call(ze,function(rr){return rr.id})},ar.getMaxUpdateTime=function(ze){var rr=g(ze).call(ze,function(Et){return+Et.updateTime});return Math.max.apply(Math,rr)},ar.genCheckUniqueFunc=function(ze){return ze=ze||"id",function(rr){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[ze]=this.uniqueSet[ze]||{};var Et=this.uniqueSet[ze],Lt=rr[ze];return!Et[Lt]&&(Et[Lt]=!0,!0)}},ar.fillPropertyWithDefault=function(ze,rr,Et){return!!ar.undef(ze[rr])&&(ze[rr]=Et,!0)},ar.throttle=function(ze,rr,Et,Lt){var cr,mr,vr=null,Tr=0;Et||(Et={});var Ir=function(){Tr=Et.leading===!1?0:new Date().getTime(),vr=null,ze.apply(cr,mr),vr||(cr=mr=null)};return function(){var kr=new Date().getTime();Tr||Et.leading!==!1||(Tr=kr);var Ar=rr-(kr-Tr);return cr=this,mr=arguments,Ar<=0||Ar>rr?(clearTimeout(vr),vr=null,Tr=kr,ze.apply(cr,mr),vr||(cr=mr=null)):vr||Et.trailing===!1?vr&&Lt&&Lt.apply(cr,mr):(vr=y(Ir,Ar),Lt&&Lt.apply(cr,mr)),vr}},ar.get=function(ze,rr){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(ie(ze)!=="object")return Et;var Lt,cr=rr.replace(/\[(\d+)\]/g,".$1").split("."),mr=ze,vr=pe(cr);try{for(vr.s();!(Lt=vr.n()).done;){var Tr=Lt.value;if((mr=Object(mr)[Tr])===void 0)return Et}}catch(Ir){vr.e(Ir)}finally{vr.f()}return mr},ar.pickAsString=function(ze,rr){var Et;return ze?g(Et=O(rr).call(rr,function(Lt){return ze[Lt]!==void 0})).call(Et,function(Lt){var cr;return v(cr="".concat(Lt,"=")).call(cr,ze[Lt])}).join(","):""},ar.omitAsString=function(ze,rr){var Et,Lt;if(!ze)return"";var cr={};return o(rr).call(rr,function(mr){cr[mr]=!0}),g(Et=O(Lt=s(ze)).call(Lt,function(mr){return!cr[mr]})).call(Et,function(mr){var vr;return v(vr="".concat(mr,"=")).call(vr,ze[mr])}).join(",")};var er={session:function(ze){var rr=function(Lt){for(var cr=1;cr<arguments.length;cr++){var mr,vr,Tr=arguments[cr]!=null?arguments[cr]:{};cr%2?o(mr=Ie(Object(Tr),!0)).call(mr,function(Ir){n(Lt,Ir,Tr[Ir])}):he?Ve(Lt,he(Tr)):o(vr=Ie(Object(Tr))).call(vr,function(Ir){le(Lt,Ir,oe(Tr,Ir))})}return Lt}({},ze),Et=["topCustom","localCustom","extra"];return o(Et).call(Et,function(Lt){rr[Lt]&&(rr[Lt]="***")}),rr.lastMsg&&(rr.lastMsg={idServer:rr.lastMsg.idServer,idClient:rr.lastMsg.idClient}),rr}};ar.secureOutput=function(ze,rr){m(rr)||(rr=[rr]);var Et=er[ze];return(rr=g(rr).call(rr,function(Lt){return Et(Lt)})).length===1?rr[0]:rr};var or={string:function(ze,rr,Et){var Lt=Et.required,cr=Et.allowEmpty,mr=ze[rr];return Lt===!1&&mr===void 0||typeof mr=="string"&&!(!cr&&mr==="")},number:function(ze,rr,Et){var Lt=Et.required,cr=Et.min,mr=ze[rr];return Lt===!1&&mr===void 0||typeof mr=="number"&&!(mr<cr)},enum:function(ze,rr,Et){var Lt=Et.required,cr=V(Et),mr=ze[rr];return Lt===!1&&mr===void 0||i(cr).call(cr,mr)>-1},array:function(ze,rr,Et){var Lt=Et.required,cr=ze[rr];return Lt===!1&&cr===void 0||!!m(cr)}};ar.validate=function(ze,rr,Et){var Lt,cr={};return o(Lt=s(ze)).call(Lt,function(mr){var vr,Tr=ze[mr].type,Ir=or[Tr];Ir&&!Ir(rr,mr,ze[mr])?ar.onError({message:v(vr="Error in parameter verification, ".concat(mr," expected value is ")).call(vr,b(ze[mr])),callFunc:Et}):cr[mr]=rr[mr]}),cr},ar.asyncPool=function(ze,rr,Et){if(typeof ze!="number"||typeof Et!="function"||!rr||!rr.length)return Ce.resolve();var Lt=0,cr=[],mr=[];return function vr(){if(Lt===rr.length)return Ce.resolve();var Tr=rr[Lt++],Ir=Ce.resolve().then(function(){return Et(Tr,rr)});cr.push(Ir);var kr=Ce.resolve();if(ze<=rr.length){var Ar=Ir.then(function(){return c(mr).call(mr,i(mr).call(mr,Ar),1)});mr.push(Ar),mr.length>=ze&&(kr=Ce.race(mr))}return kr.then(function(){return vr()})}().then(function(){return Ce.all(cr)})},ar.getIdArray=function(ze){if(!ze||typeof ze!="string")throw new Error("id type error");var rr=i(ze).call(ze,"-");if(rr<0||rr===ze.length-1)throw new Error("id format error");return[a(ze).call(ze,0,rr),a(ze).call(ze,rr+1)]},t.exports=ar},function(t,r,e){var n=e(14),o=e(76),i=e(156),a=e(16),s=e(90).f,u=e(210),c=e(12),d=e(34),m=e(53),v=e(29),g=function(b){var T=function(_,y,O){if(this instanceof T){switch(arguments.length){case 0:return new b;case 1:return new b(_);case 2:return new b(_,y)}return new b(_,y,O)}return o(b,this,arguments)};return T.prototype=b.prototype,T};t.exports=function(b,T){var _,y,O,V,Ce,ae,Fe,_e,de,oe=b.target,he=b.global,Ve=b.stat,le=b.proto,ie=he?n:Ve?n[oe]:(n[oe]||{}).prototype,Ie=he?c:c[oe]||m(c,oe,{})[oe],pe=Ie.prototype;for(V in T)y=!(_=u(he?V:oe+(Ve?".":"#")+V,b.forced))&&ie&&v(ie,V),ae=Ie[V],y&&(Fe=b.dontCallGetSet?(de=s(ie,V))&&de.value:ie[V]),Ce=y&&Fe?Fe:T[V],y&&typeof ae==typeof Ce||(_e=b.bind&&y?d(Ce,n):b.wrap&&y?g(Ce):le&&a(Ce)?i(Ce):Ce,(b.sham||Ce&&Ce.sham||ae&&ae.sham)&&m(_e,"sham",!0),m(Ie,V,_e),le&&(v(c,O=oe+"Prototype")||m(c,O,{}),m(c[O],V,Ce),b.real&&pe&&(_||!pe[V])&&m(pe,V,Ce)))}},function(t,r,e){t.exports=e(229)},function(t,r,e){t.exports=e(231)},function(t,r){t.exports=function(e){try{return!!e()}catch{return!0}}},function(t,r,e){t.exports=e(230)},function(t,r,e){t.exports=e(206)},function(t,r,e){t.exports=e(324)},function(t,r,e){t.exports=e(441)},function(t,r,e){t.exports=e(275)},function(t,r,e){t.exports=e(385)},function(t,r,e){var n=e(107),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(s){return function(){return i.apply(s,arguments)}}},function(t,r){t.exports={}},function(t,r,e){var n=e(6),o=e(7),i=!1;try{typeof localStorage.setItem=="function"&&typeof localStorage.getItem=="function"&&(localStorage.setItem("nim_localstorage_exist_test","1"),i=localStorage.getItem("nim_localstorage_exist_test")==="1",localStorage.removeItem("nim_localstorage_exist_test"))}catch{i=!1}var a={nodeEnv:"production",info:{hash:"b7e3ed4d45a88d8c78898efb66610b01c72f8323",shortHash:"b7e3ed4d",version:"9.13.0",sdkVersion:"91300",sdkHumanVersion:"9.13.0",protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",needToXHR:!0,connectTimeout:1e4,xhrTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:i?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:i,privateConf:{isABTestEnable:!0,isDataReportEnable:!0,isMixStoreEnable:!0,reportConfigUrl:"https://statistic.live.126.net/dispatcher/req",reportUrl:"https://statistic.live.126.net/statics/report/common/form"},getDefaultLinkUrl:function(s){var u,c;a.ipVersion===1?(u=a.optionIpv6DefaultLinkUrl,c=a.ipv6DefaultLinkUrl):(u=a.optionDefaultLinkUrl,c=a.defaultLinkUrl);var d=u||(a.isWeixinApp?a.wxDefaultLinkUrl:c);if(!d)return!1;var m=s?"https":"http",v=s?"443":"80",g=d;return n(d).call(d,"http")===-1&&(g=m+"://"+g),n(d).call(d,":")===-1&&(g=g+":"+v),g},ipProbeAddr:{ipv4:"https://check-ipv4.netease.im/test/",ipv6:"https://check-ipv6.netease.im/test/"},formatSocketUrl:function(s){var u=s.url,c=s.secure?"https":"http";return n(u).call(u,"http")===-1?c+"://"+u:u},uploadUrl:"https://nos.netease.com",chunkUploadUrl:"https://wanproxy-web.127.net",commonMaxSize:104857600,chunkSize:4194304,chunkMaxSize:4194304e4,replaceUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHost:"nos.netease.com",downloadHostList:["nos.netease.com"],downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",nosCdnEnable:!0,httpsEnabled:!1,threshold:0,nosLbsUrls:[],edgeList:["https://wanproxy-web.127.net","https://nosup-hz1.127.net"],genUploadUrl:function(s){return a.uploadUrl+"/"+s},genChunkUploadUrl:function(s){return a.chunkUploadUrl?a.chunkUploadUrl+"/"+s.bucket+"/"+s.objectName:""},genDownloadUrl:function(s,u,c){var d,m,v,g,b,T=s.bucket,_=s.expireSec,y=+new Date,O=_?"&survivalTime=".concat(_):"";if(c)return o(v=o(g=o(b="https://".concat(c,"/")).call(b,u,"?createTime=")).call(g,y)).call(v,O);var V=o(d=o(m="".concat(a.replaceUrl,"?createTime=")).call(m,y)).call(d,O);return(V=a.genNosProtocolUrl(V)).replace("{bucket}",T).replace("{object}",u)},genFileUrl:function(s){var u=s.bucket,c=s.objectName;return a.genNosProtocolUrl(a.replaceUrl).replace("{bucket}",u).replace("{object}",c)},genNosProtocolUrl:function(s){return/^http/.test(s)?a.httpsEnabled&&n(s).call(s,"https://")!==0&&(s=s.replace("http","https")):s=a.httpsEnabled?"https://".concat(s):"http://".concat(s),s}};a.hostEnv="BROWSER",t.exports=a},function(t,r,e){(function(n){var o=function(i){return i&&i.Math==Math&&i};t.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof n=="object"&&n)||function(){return this}()||Function("return this")()}).call(this,e(56))},function(t,r,e){t.exports=e(250)},function(t,r,e){var n=e(207),o=n.all;t.exports=n.IS_HTMLDDA?function(i){return typeof i=="function"||i===o}:function(i){return typeof i=="function"}},function(t,r,e){t.exports=e(459)},function(t,r,e){t.exports=e(215)},function(t,r,e){var n=e(107),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},function(t,r,e){var n=e(14),o=e(109),i=e(29),a=e(127),s=e(92),u=e(208),c=o("wks"),d=n.Symbol,m=d&&d.for,v=u?d:d&&d.withoutSetter||a;t.exports=function(g){if(!i(c,g)||!s&&typeof c[g]!="string"){var b="Symbol."+g;s&&i(d,g)?c[g]=d[g]:c[g]=u&&m?m(b):v(b)}return c[g]}},function(t,r,e){var n=e(11);t.exports=n({}.isPrototypeOf)},function(t,r,e){var n=e(12),o=e(29),i=e(133),a=e(38).f;t.exports=function(s){var u=n.Symbol||(n.Symbol={});o(u,s)||a(u,s,{value:i.f(s)})}},function(t,r,e){t.exports=e(455)},function(t,r,e){var n=e(58),o=e(57),i=e(7),a=e(23),s=e(10),u=e(32),c=e(5),d=e(59),m=e(17),v=e(60),g=e(2),b=e(61),T=e(62),_=e(47),y=e(15),O=e(85),V=e(86),Ce=e(70);function ae(ie,Ie){var pe=V!==void 0&&Ce(ie)||ie["@@iterator"];if(!pe){if(u(ie)||(pe=function(pr,ar){var hr;if(pr){if(typeof pr=="string")return Fe(pr,ar);var Ne=y(hr=Object.prototype.toString.call(pr)).call(hr,8,-1);if(Ne==="Object"&&pr.constructor&&(Ne=pr.constructor.name),Ne==="Map"||Ne==="Set")return O(pr);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Fe(pr,ar)}}(ie))||Ie&&ie&&typeof ie.length=="number"){pe&&(ie=pe);var kt=0,Ue=function(){};return{s:Ue,n:function(){return kt>=ie.length?{done:!0}:{done:!1,value:ie[kt++]}},e:function(pr){throw pr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt,tr=!0,dr=!1;return{s:function(){pe=pe.call(ie)},n:function(){var pr=pe.next();return tr=pr.done,pr},e:function(pr){dr=!0,Dt=pr},f:function(){try{tr||pe.return==null||pe.return()}finally{if(dr)throw Dt}}}}function Fe(ie,Ie){(Ie==null||Ie>ie.length)&&(Ie=ie.length);for(var pe=0,kt=new Array(Ie);pe<Ie;pe++)kt[pe]=ie[pe];return kt}function _e(ie,Ie){var pe=c(ie);if(d){var kt=d(ie);Ie&&(kt=m(kt).call(kt,function(Ue){return v(ie,Ue).enumerable})),pe.push.apply(pe,kt)}return pe}function de(ie){for(var Ie=1;Ie<arguments.length;Ie++){var pe,kt,Ue=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?g(pe=_e(Object(Ue),!0)).call(pe,function(Dt){n(ie,Dt,Ue[Dt])}):b?T(ie,b(Ue)):g(kt=_e(Object(Ue))).call(kt,function(Dt){_(ie,Dt,v(Ue,Dt))})}return ie}var oe=e(44),he=e(0);function Ve(ie){return he.get(ie,"code")||he.get(ie,"msg.code")||he.get(ie,"statusCode")||he.get(ie,"event.code")||0}function le(ie){var Ie,pe,kt=typeof ie=="string"?ie:he.get(ie,"msg")||he.get(ie,"message")||he.get(ie,"error")||he.get(ie,"event.msg")||he.get(ie,"event.message")||he.get(ie,"event")||"unknown",Ue="",Dt="";ie&&typeof ie.toString=="function"&&(Ue=ie.toString());try{Dt=s(ie)}catch{}return i(Ie=i(pe=`
errMsg: `.concat(kt,`
errStr: `)).call(pe,Ue,`
errJsonStr: `)).call(Ie,Dt,`
  `)}t.exports={reportAPI:function(ie){var Ie=ie.instance,pe=ie.className,kt=ie.funcName,Ue=ie.hasCallback,Dt=Ue===void 0||Ue,tr=ie.done;if(!function(ar){if(!ar||!u(ar.experiments))return!1;var hr,Ne=ae(ar.experiments);try{for(Ne.s();!(hr=Ne.n()).done;){var nr=hr.value;if(nr.experimentKey==="api_trace_collection"&&nr.schemeKey==="open_flow"&&u(nr.variates)){var sr,$e=ae(nr.variates);try{for($e.s();!(sr=$e.n()).done;){var er=sr.value;if(er.key==="open"&&er.value===!0)return!0}}catch(or){$e.e(or)}finally{$e.f()}}}}catch(or){Ne.e(or)}finally{Ne.f()}return!1}(Ie.abtInfo)||!Ie.reporter||!Ie.reporter.isUploadEnable)return tr;var dr,pr={user_id:he.get(Ie,"options.account")||"",trace_id:he.get(Ie,"socket.socket.sessionid"),class_name:pe,api_name:kt,action:Dt?1:0,active_id:oe.deviceId,start_time:o()};return Dt?(dr=a(function(){Ie&&Ie.logger&&Ie.logger.warn("API 数据上报回调函数未调用",pr),Ie&&Ie.reporter&&Ie.reporter.report("nim_api_trace",de(de({},pr),{},{state:1,error_code:408,error_msg:"API回调函数未被调用",duration:o()-pr.start_time}))},1e4),function(ar){if(clearTimeout(dr),typeof tr=="function"){for(var hr,Ne=arguments.length,nr=new Array(Ne>1?Ne-1:0),sr=1;sr<Ne;sr++)nr[sr-1]=arguments[sr];tr.apply(void 0,i(hr=[ar]).call(hr,nr))}try{if(!Ie||!Ie.reporter)return;ar?Ie.reporter.report("nim_api_trace",de(de({},pr),{},{state:1,error_code:Ve(ar),error_msg:le(ar),duration:o()-pr.start_time})):Ie.reporter.report("nim_api_trace",de(de({},pr),{},{state:0,duration:o()-pr.start_time}))}catch($e){Ie&&Ie.logger&&Ie.logger.error("api report error",$e)}}):(Ie.reporter.report("nim_api_trace",de(de({},pr),{},{state:0,duration:1})),tr)}}},function(t,r,e){t.exports=e(272)},function(t,r,e){var n=e(153),o=e(366);function i(a){return t.exports=i=typeof n=="function"&&typeof o=="symbol"?function(s){return typeof s}:function(s){return s&&typeof n=="function"&&s.constructor===n&&s!==n.prototype?"symbol":typeof s},t.exports.__esModule=!0,t.exports.default=t.exports,i(a)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(4);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,r,e){var n=e(16),o=e(207),i=o.all;t.exports=o.IS_HTMLDDA?function(a){return typeof a=="object"?a!==null:n(a)||a===i}:function(a){return typeof a=="object"?a!==null:n(a)}},function(t,r,e){var n=e(11),o=e(42),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(a,s){return i(o(a),s)}},function(t,r,e){var n=e(12);t.exports=function(o){return n[o+"Prototype"]}},function(t,r,e){var n=e(16),o=e(78),i=TypeError;t.exports=function(a){if(n(a))return a;throw i(o(a)+" is not a function")}},function(t,r,e){t.exports=e(299)},function(t,r,e){var n=e(12),o=e(14),i=e(16),a=function(s){return i(s)?s:void 0};t.exports=function(s,u){return arguments.length<2?a(n[s])||a(o[s]):n[s]&&n[s][u]||o[s]&&o[s][u]}},function(t,r,e){var n=e(156),o=e(31),i=e(107),a=n(n.bind);t.exports=function(s,u){return o(s),u===void 0?s:i?a(s,u):function(){return s.apply(u,arguments)}}},function(t,r,e){var n=e(18),o=e(25),i=e(3),a=e(71),s=e(75),u=e(13),c=e(0),d=e(290),m=c.undef,v=e(309),g=e(147),b=e(151),T=e(779);function _(V){var Ce,ae,Fe,_e=this;c.verifyOptions(V,"appKey account token","protocol::IMProtocol"),c.verifyCallback(V,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),Ce=typeof c.get(V,"privateConf.isDataReportEnable")=="boolean"?V.privateConf.isDataReportEnable:u.privateConf.isDataReportEnable,ae=typeof c.get(V,"privateConf.reportConfigUrl")=="string"?V.privateConf.reportConfigUrl:u.privateConf.reportConfigUrl,Fe=typeof c.get(V,"privateConf.reportUrl")=="string"?V.privateConf.reportUrl:u.privateConf.reportUrl,_e.reporter=d.initReporter({isDataReportEnable:Ce,reportConfigUrl:ae,reportUrl:Fe,appKey:V.appKey,logger:_e.logger}),_e.db=V.api.db=new a({logger:V.logger,reporter:_e.reporter,account:V.account,core:_e,notifyError:function(de){_e.notifyError&&_e.notifyError("DB error",de)}}),s.call(_e,V)}var y=s.fn,O=_.fn=_.prototype=n(y);O.init=function(){var V,Ce;y.init.call(this),g.IM.setProtocol(this),this.parser=g.IM,o(V=this.sendCmd).call(V,this),this.socketUrls=[],this.syncing=!0,this.canHandleDeletedMsgInSyncing=!1,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=b.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=i.resolve(),this.sysMsgPromise=i.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=v.getDefaultConfig(),this.msgAckBufferManager=new T({processFn:o(Ce=this.handleMsgsAck).call(Ce,this),throttleTime:500})},O.reset=function(){y.reset.call(this);var V=this.options;this.db.reset(V.db),m(V.lbsUrl)&&(V.lbsUrl=u.lbsUrl),this.autoconnect=!!V.autoconnect,this.resetAutoMarkRead()},O.resetAutoMarkRead=function(){var V=this.options;c.verifyBooleanWithDefault(V,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},O.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},O.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unhandledSysMsgsForDeletedMsgs=[],this.unupdatedSysMsgs=[]},O.packetFromSync=function(V){return!V.obj||!!V.obj.sync},t.exports=_,e(780),e(781),e(782),e(802),e(804),e(805),e(806),e(807),e(808),e(809),e(810),e(815),e(816),e(817),e(818),e(822),e(823),e(824),e(825),e(826),e(827)},function(t,r,e){var n=e(28),o=String,i=TypeError;t.exports=function(a){if(n(a))return a;throw i(o(a)+" is not an object")}},function(t,r,e){var n=e(78);t.exports=function(o){if(typeof o=="object"&&"size"in o&&"has"in o&&"get"in o&&"set"in o&&"delete"in o&&"entries"in o)return o;throw TypeError(n(o)+" is not a map")}},function(t,r,e){var n=e(27),o=e(209),i=e(211),a=e(36),s=e(125),u=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor;r.f=n?i?function(m,v,g){if(a(m),v=s(v),a(g),typeof m=="function"&&v==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var b=d(m,v);b&&b.writable&&(m[v]=g.value,g={configurable:"configurable"in g?g.configurable:b.configurable,enumerable:"enumerable"in g?g.enumerable:b.enumerable,writable:!1})}return c(m,v,g)}:c:function(m,v,g){if(a(m),v=s(v),a(g),o)try{return c(m,v,g)}catch{}if("get"in g||"set"in g)throw u("Accessors not supported");return"value"in g&&(m[v]=g.value),m}},function(t,r,e){var n=e(18),o=e(73),i=e(35),a=e(13),s=e(828),u=e(147).IM,c=e(154);function d(v){var g=c(v);return this.subType="im",this.nosScene=g.nosScene||"im",this.nosSurvivalTime=g.nosSurvivalTime,g.Protocol=i,g.Message=s,g.constructor=d,this.init(g)}d.Protocol=i,d.parser=u,d.use=o.use,d.getInstance=o.getInstance,d.rmAllInstances=o.rmAllInstances,d.genInstanceName=function(v){return"NIM-account-"+v.account};var m=d.fn=d.prototype=n(o.prototype);d.info=m.info=a.info,t.exports=d,e(839),e(840),e(841),e(842),e(843),e(844),e(845),e(846),e(847),e(857),e(868),e(869),e(870),e(871),e(872),e(873),e(874),e(875),e(876),e(879),e(880)},function(t,r,e){var n=e(18),o=e(2),i=e(26);function a(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=this;v.message=c||m.message||"",i(d)==="object"?(v.event=d,v.code="Other_Error"):d!==void 0&&(v.code=d),v.timetag=+new Date,m!==void 0&&(v.event=m),v.event&&(v.callFunc=v.event.callFunc||null,delete v.event.callFunc)}a.prototype=n(Error.prototype),a.prototype.name="NIMError";var s={201:"客户端版本不对, 需升级sdk",302:"用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",403:"非法操作或没有权限",404:"对象(用户/群/聊天室)不存在",405:"参数长度过长",408:"客户端请求超时",414:"参数错误",415:"服务不可用/没有聊天室服务器可分配",416:"频率控制",417:"重复操作",422:"帐号被禁用",500:"服务器内部错误",501:"数据库操作失败",503:"服务器繁忙",508:"删除有效期过了",509:"已失效",7101:"被拉黑",700:"批量操作部分失败",801:"群人数达到上限",802:"没有权限",803:"群不存在或未发生变化",804:"用户不在群里面",805:"群类型不匹配",806:"创建群数量达到限制",807:"群成员状态不对",809:"已经在群里",811:"强推列表中帐号数量超限",812:"群被禁言",813:"因群数量限制，部分拉人成功",814:"禁止使用群组消息已读服务",815:"群管理员人数上限",816:"批量操作部分失败",997:"协议已失效",998:"解包错误",999:"打包错误",9102:"通道失效",9103:"已经在其他端接听/拒绝过这通电话",11001:"对方离线, 通话不可送达",13002:"聊天室状态异常",13003:"在黑名单中",13004:"在禁言名单中",13006:"聊天室处于整体禁言状态,只有管理员能发言",Connect_Failed:"无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下",Error_Internet_Disconnected:"网断了",Error_Connection_is_not_Established:"连接未建立",Error_Connection_Socket_State_not_Match:"socket状态不对",Error_Timeout:"超时",Param_Error:"参数错误",No_File_Selected:"请选择文件",Wrong_File_Type:"文件类型错误",File_Too_Large:"文件过大",Cross_Origin_Iframe:"不能获取跨域Iframe的内容",Not_Support:"不支持",NO_DB:"无数据库",DB:"数据库错误",Still_In_Team:"还在群里",Session_Exist:"会话已存在",Session_Not_Exist:"会话不存在",Error_Unknown:"未知错误",Operation_Canceled:"操作取消",Sync_Error:"同步数据失败"},u=[200,406,808,810];o(u).call(u,function(c){s[c]=null}),a.genError=function(c){var d=s[c];return d===void 0&&(d="操作失败"),d===null?null:new a(d,c)},a.multiInstance=function(c){return new a("不允许初始化多个实例","Not_Allow_Multi_Instance",c)},a.newNetworkError=function(c){var d="Error_Internet_Disconnected";return new a(s[d],d,c)},a.newConnectError=function(c){var d="Connect_Failed";return new a(s[d]||null,d,c)},a.newConnectionError=function(c){var d="Error_Connection_is_not_Established";return new a(s[d],d,c)},a.newSocketStateError=function(c){var d="Error_Connection_Socket_State_not_Match";return new a(s[d],d,c)},a.newTimeoutError=function(c){var d="Error_Timeout";return new a(s[d],d,c)},a.newFrequencyControlError=function(c){var d=new a(s[416],416,c);return d.from="local",d},a.newParamError=function(c,d){return new a(c||s.Param_Error,"Param_Error",d)},a.newNoFileError=function(c,d){var m="No_File_Selected";return new a(c||s[m],m,d)},a.newWrongFileTypeError=function(c,d){var m="Wrong_File_Type";return new a(c||s[m],m,d)},a.newFileTooLargeError=function(c,d){var m="File_Too_Large";return new a(c||s[m],m,d)},a.newCORSIframeError=function(c){var d="Cross_Origin_Iframe";return new a(s[d],d,c)},a.newSupportError=function(c,d,m){return new a("不支持"+c,"Not_Support_"+d,m)},a.newSupportDBError=function(c){return a.newSupportError("数据库","DB",c)},a.noDBError=function(c){return new a(s.NO_DB,"NO_DB",c)},a.newDBError=function(c){return new a(s.DB,"DB",c)},a.newUnknownError=function(c){var d="Error_Unknown";return new a(s[d],d,c)},a.stillInTeamError=function(c){var d="Still_In_Team";return new a(s[d],d,c)},a.sessionExist=function(c){var d="Session_Exist";return new a(s[d],d,c)},a.sessionNotExist=function(c){var d="Session_Not_Exist";return new a(s[d],d,c)},a.cancel=function(c){var d="Operation_Canceled";return new a(s[d],d,c)},a.syncError=function(c){return new a(s.Sync_Error,"Sync_Error",c)},a.customError=function(c,d){c=c||"Other_Error";var m="";return(d=d||{}).message||(m=s[c]||c),i(c)!=="object"?new a(m,c,d):new a(m,"Other_Error",d===void 0?c:d)},t.exports=a},function(t,r,e){t.exports=e(304)},function(t,r,e){var n=e(108),o=Object;t.exports=function(i){return o(n(i))}},function(t,r,e){var n=e(124),o=e(108);t.exports=function(i){return n(o(i))}},function(t,r,e){var n=e(0),o={init:function(){o.deviceId=n.guid()}};o.init(),o.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"},o.db={open:function(){}},o.rnfs=null,t.exports=o},function(t,r,e){var n=e(323);t.exports=function(o){return n(o.length)}},function(t,r,e){var n=e(34),o=e(19),i=e(36),a=e(78),s=e(234),u=e(45),c=e(21),d=e(235),m=e(136),v=e(236),g=TypeError,b=function(_,y){this.stopped=_,this.result=y},T=b.prototype;t.exports=function(_,y,O){var V,Ce,ae,Fe,_e,de,oe,he=O&&O.that,Ve=!(!O||!O.AS_ENTRIES),le=!(!O||!O.IS_RECORD),ie=!(!O||!O.IS_ITERATOR),Ie=!(!O||!O.INTERRUPTED),pe=n(y,he),kt=function(Dt){return V&&v(V,"normal",Dt),new b(!0,Dt)},Ue=function(Dt){return Ve?(i(Dt),Ie?pe(Dt[0],Dt[1],kt):pe(Dt[0],Dt[1])):Ie?pe(Dt,kt):pe(Dt)};if(le)V=_.iterator;else if(ie)V=_;else{if(!(Ce=m(_)))throw g(a(_)+" is not iterable");if(s(Ce)){for(ae=0,Fe=u(_);Fe>ae;ae++)if((_e=Ue(_[ae]))&&c(T,_e))return _e;return new b(!1)}V=d(_,Ce)}for(de=le?_.next:V.next;!(oe=o(de,V)).done;){try{_e=Ue(oe.value)}catch(Dt){v(V,"throw",Dt)}if(typeof _e=="object"&&_e&&c(T,_e))return _e}return new b(!1)}},function(t,r,e){t.exports=e(248)},function(t,r){t.exports=!0},function(t,r,e){var n=e(65),o=String;t.exports=function(i){if(n(i)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(i)}},function(t,r,e){var n=e(257),o=typeof self=="object"&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,r,e){var n=e(716);t.exports=function(o,i,a){return a?n(o.entries(),function(s){return i(s[1],s[0])}):o.forEach(i)}},function(t,r,e){t.exports=e(559)},function(t,r,e){var n=e(27),o=e(38),i=e(77);t.exports=n?function(a,s,u){return o.f(a,s,i(1,u))}:function(a,s,u){return a[s]=u,a}},function(t,r,e){(function(n){var o=e(15),i=e(23),a=e(6),s=e(139),u=e(2),c=e(10),d=e(5),m=e(138),v=e(3),g=e(85),b=e(86),T=e(70),_=e(32);function y(Et,Lt){var cr=b!==void 0&&T(Et)||Et["@@iterator"];if(!cr){if(_(Et)||(cr=function(Ar,Nr){var Mn;if(Ar){if(typeof Ar=="string")return O(Ar,Nr);var Or=o(Mn=Object.prototype.toString.call(Ar)).call(Mn,8,-1);if(Or==="Object"&&Ar.constructor&&(Or=Ar.constructor.name),Or==="Map"||Or==="Set")return g(Ar);if(Or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Or))return O(Ar,Nr)}}(Et))||Lt&&Et&&typeof Et.length=="number"){cr&&(Et=cr);var mr=0,vr=function(){};return{s:vr,n:function(){return mr>=Et.length?{done:!0}:{done:!1,value:Et[mr++]}},e:function(Ar){throw Ar},f:vr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Tr,Ir=!0,kr=!1;return{s:function(){cr=cr.call(Et)},n:function(){var Ar=cr.next();return Ir=Ar.done,Ar},e:function(Ar){kr=!0,Tr=Ar},f:function(){try{Ir||cr.return==null||cr.return()}finally{if(kr)throw Tr}}}}function O(Et,Lt){(Lt==null||Lt>Et.length)&&(Lt=Et.length);for(var cr=0,mr=new Array(Lt);cr<Lt;cr++)mr[cr]=Et[cr];return mr}var V=e(154);function Ce(){return typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{}}function ae(Et){var Lt;return o(Lt=Object.prototype.toString.call(Et)).call(Lt,8,-1)}function Fe(Et){return ae(Et).toLowerCase()}function _e(Et){return Fe(Et)==="string"}function de(Et){return Fe(Et)==="number"}function oe(Et){return Fe(Et)==="array"}function he(Et){return typeof Et=="function"}function Ve(Et){return Fe(Et)==="date"}function le(Et){return Et===null}function ie(Et){return Et!==null}function Ie(Et){return Et===void 0}function pe(Et){return Et!==void 0}function kt(Et){return pe(Et)&&ie(Et)}function Ue(Et){return Ie(Et)||le(Et)}function Dt(Et){return kt(Et)&&Fe(Et)==="object"}var tr=function(Et,Lt,cr){Et.addEventListener?Et.addEventListener(Lt,cr,!1):Et.attachEvent&&Et.attachEvent("on"+Lt,cr)},dr=tr,pr=function(Et,Lt,cr){Et.removeEventListener?Et.removeEventListener(Lt,cr,!1):Et.detachEvent&&Et.detachEvent("on"+Lt,cr)},ar=pr;function hr(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},cr=arguments.length>2?arguments[2]:void 0;for(var mr in Et)Et.hasOwnProperty(mr)&&Lt.call(cr,mr,Et[mr])}function Ne(Et,Lt){hr(Lt,function(cr,mr){Et[cr]=mr})}var nr,sr=(nr=0,function(){return""+nr++});function $e(Et){return _e(Et)&&a(Et).call(Et,"{")===0&&s(Et).call(Et,"}")===Et.length-1}function er(Et,Lt,cr){if(!Et)return"";var mr=[];return hr(Et,function(vr,Tr){he(Tr)||(Ve(Tr)?Tr=Tr.getTime():oe(Tr)?Tr=Tr.join(","):Dt(Tr)&&(Tr=c(Tr)),cr&&(Tr=encodeURIComponent(Tr)),mr.push(encodeURIComponent(vr)+"="+Tr))}),mr.join(Lt||",")}var or,ze=(or=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(Et){return or.test(Et||"")?RegExp.$1.toLowerCase():""});function rr(Et){var Lt=Ce();return Et.tagName&&Et.tagName.toUpperCase()==="INPUT"||Lt.Blob&&Et instanceof Lt.Blob}t.exports={o:{},emptyObj:{},f:function(){},emptyFunc:function(){},regBlank:/\s+/gi,regWhiteSpace:/\s+/gi,getGlobal:Ce,getClass:ae,typeOf:Fe,isString:_e,isNumber:de,isInt:function(Et){return de(Et)&&Et%1==0},isBoolean:function(Et){return Fe(Et)==="boolean"},isArray:oe,isFunction:he,isDate:Ve,isRegExp:function(Et){return Fe(Et)==="regexp"},isError:function(Et){return Fe(Et)==="error"},isnull:le,notnull:ie,undef:Ie,notundef:pe,exist:kt,notexist:Ue,isObject:Dt,isEmpty:function(Et){return Ue(Et)||(_e(Et)||oe(Et))&&Et.length===0},remove:function(Et){Et.parentNode&&Et.parentNode.removeChild(Et)},dataset:function(Et,Lt,cr){if(!kt(cr))return Et.getAttribute("data-"+Lt);Et.setAttribute("data-"+Lt,cr)},addEventListener:tr,on:dr,removeEventListener:pr,off:ar,target:function(Et){return Et.target||Et.srcElement},createIframe:function(Et){if(typeof document<"u"){var Lt;if((Et=Et||{}).name)try{(Lt=document.createElement('<iframe name="'+Et.name+'"></iframe>')).frameBorder=0}catch{(Lt=document.createElement("iframe")).name=Et.name}else Lt=document.createElement("iframe");Et.visible||(Lt.style.display="none"),he(Et.onload)&&dr(Lt,"load",function mr(vr){Lt.src&&(Et.multi||ar(Lt,"load",mr),Et.onload(vr))}),(Et.parent||document.body).appendChild(Lt);var cr=Et.src||"about:blank";return i(function(){Lt.src=cr},0),Lt}},html2node:function(Et){if(typeof document<"u"){var Lt=document.createElement("div");Lt.innerHTML=Et;var cr,mr,vr=[];if(Lt.children)for(cr=0,mr=Lt.children.length;cr<mr;cr++)vr.push(Lt.children[cr]);else for(cr=0,mr=Lt.childNodes.length;cr<mr;cr++){var Tr=Lt.childNodes[cr];Tr.nodeType===1&&vr.push(Tr)}return vr.length>1?Lt:vr[0]}},forOwn:hr,mixin:Ne,uniqueID:sr,isJSON:$e,parseJSON:function Et(Lt){try{$e(Lt)&&(Lt=JSON.parse(Lt)),Dt(Lt)&&hr(Lt,function(cr,mr){switch(Fe(mr)){case"string":case"object":Lt[cr]=Et(mr)}})}catch{}return Lt},simpleClone:function(Et){return V(Et)},merge:function(){for(var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=arguments.length,cr=new Array(Lt>1?Lt-1:0),mr=1;mr<Lt;mr++)cr[mr-1]=arguments[mr];return u(cr).call(cr,function(vr){Ne(Et,vr)}),Et},fillUndef:function(Et,Lt){return hr(Lt,function(cr,mr){Ie(Et[cr])&&(Et[cr]=mr)}),Et},checkWithDefault:function(Et,Lt,cr){var mr=Et[Lt]||Et[Lt.toLowerCase()];return Ue(mr)&&(mr=cr,Et[Lt]=mr),mr},fetch:function(Et,Lt){return hr(Et,function(cr){kt(Lt[cr])&&(Et[cr]=Lt[cr])}),Et},string2object:function(){var Et,Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",",mr={};return u(Et=Lt.split(cr)).call(Et,function(vr){var Tr=vr.split("="),Ir=Tr.shift();Ir&&(mr[decodeURIComponent(Ir)]=decodeURIComponent(Tr.join("=")))}),mr},object2string:er,genUrlSep:function(Et){return a(Et).call(Et,"?")<0?"?":"&"},object2query:function(Et){return er(Et,"&",!0)},url2origin:ze,isFileInput:rr,getKeys:function(Et,Lt){var cr=d(Et);return Lt&&m(cr).call(cr,function(mr,vr){var Tr=rr(Et[mr]);return Tr===rr(Et[vr])?0:Tr?1:-1}),cr},_get:function(Et,Lt){var cr,mr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,vr=Lt.replace(/\[(\d+)\]/g,".$1").split("."),Tr=Et,Ir=y(vr);try{for(Ir.s();!(cr=Ir.n()).done;){var kr=cr.value;if((Tr=Object(Tr)[kr])===void 0)return mr}}catch(Ar){Ir.e(Ar)}finally{Ir.f()}return Tr},getPromiseWithAbort:function(Et){var Lt={},cr=new v(function(mr,vr){Lt.abort=vr});return Lt.promise=v.race([Et,cr]),Lt}}}).call(this,e(56))},function(t,r,e){var n=e(33),o=e(713),i=n("Map");t.exports={Map:i,set:o("set",2),get:o("get",1),has:o("has",1),remove:o("delete",1),proto:i.prototype}},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,r,e){t.exports=e(581)},function(t,r,e){var n=e(137),o=e(249);t.exports=function(i,a,s){return(a=o(a))in i?n(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(254)},function(t,r,e){t.exports=e(477)},function(t,r,e){t.exports=e(480)},function(t,r,e){t.exports=e(483)},function(t,r,e){var n=e(11),o=n({}.toString),i=n("".slice);t.exports=function(a){return i(o(a),8,-1)}},function(t,r,e){var n=e(33);t.exports=n("navigator","userAgent")||""},function(t,r,e){var n=e(162),o=e(16),i=e(63),a=e(20)("toStringTag"),s=Object,u=i(function(){return arguments}())=="Arguments";t.exports=n?i:function(c){var d,m,v;return c===void 0?"Undefined":c===null?"Null":typeof(m=function(g,b){try{return g[b]}catch{}}(d=s(c),a))=="string"?m:u?i(d):(v=i(d))=="Object"&&o(d.callee)?"Arguments":v}},function(t,r,e){var n=e(53);t.exports=function(o,i,a,s){return s&&s.enumerable?o[i]=a:n(o,i,a),o}},function(t,r,e){e(82);var n=e(357),o=e(14),i=e(65),a=e(53),s=e(99),u=e(20)("toStringTag");for(var c in n){var d=o[c],m=d&&d.prototype;m&&i(m)!==u&&a(m,u,c),s[c]=s.Array}},function(t,r,e){var n=e(31),o=TypeError,i=function(a){var s,u;this.promise=new a(function(c,d){if(s!==void 0||u!==void 0)throw o("Bad Promise constructor");s=c,u=d}),this.resolve=n(s),this.reject=n(u)};t.exports.f=function(a){return new i(a)}},function(t,r,e){t.exports=e(428)},function(t,r,e){t.exports=e(471)},function(t,r,e){var n=e(766);n.fn=n.prototype,t.exports=n,e(768),e(769),e(770),e(771),e(772),e(773),e(774),e(775),e(776),e(777),e(778)},function(t,r,e){var n=e(26),o=e(5),i=e(10),a=e(17),s=e(2),u=e(8),c=e(15),d=e(85),m=e(86),v=e(70),g=e(32);function b(le,ie){var Ie=m!==void 0&&v(le)||le["@@iterator"];if(!Ie){if(g(le)||(Ie=function(dr,pr){var ar;if(dr){if(typeof dr=="string")return T(dr,pr);var hr=c(ar=Object.prototype.toString.call(dr)).call(ar,8,-1);if(hr==="Object"&&dr.constructor&&(hr=dr.constructor.name),hr==="Map"||hr==="Set")return d(dr);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return T(dr,pr)}}(le))||ie&&le&&typeof le.length=="number"){Ie&&(le=Ie);var pe=0,kt=function(){};return{s:kt,n:function(){return pe>=le.length?{done:!0}:{done:!1,value:le[pe++]}},e:function(dr){throw dr},f:kt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue,Dt=!0,tr=!1;return{s:function(){Ie=Ie.call(le)},n:function(){var dr=Ie.next();return Dt=dr.done,dr},e:function(dr){tr=!0,Ue=dr},f:function(){try{Dt||Ie.return==null||Ie.return()}finally{if(tr)throw Ue}}}}function T(le,ie){(ie==null||ie>le.length)&&(ie=le.length);for(var Ie=0,pe=new Array(ie);Ie<ie;Ie++)pe[Ie]=le[Ie];return pe}var _=e(0),y=_.undef,O=_.notundef,V=_.exist,Ce=e(193),ae=e(296),Fe={p2p:0,team:1,superTeam:5},_e={0:"p2p",1:"team",5:"superTeam"},de=o(Fe),oe=ae.typeMap,he=ae.validTypes;function Ve(le){_.verifyOptions(le,"scene to type","msg::Message"),_.verifyParamValid("scene",le.scene,de,"msg::Message"),this.scene=Fe[le.scene],this.to=""+le.to,this.type=oe[le.type],this.resend=le.resend?1:0,le.resend?(_.verifyOptions(le,"idClient","msg::Message"),this.idClient=le.idClient):this.idClient=_.guid(),O(le.subType)&&(_.isInt(+le.subType)&&+le.subType>0?this.subType=+le.subType:_.onParamError("subType只能是大于0的整数","msg::Message"));var ie=le.replyMsg;ie&&ie.idServer&&ie.from&&ie.to&&ie.time&&(this.replyMsgFromAccount=ie.from,this.replyMsgToAccount=ie.to,this.replyMsgTime=ie.time,this.replyMsgIdServer=ie.idServer,this.replyMsgIdClient=ie.idClient,ie.threadMsgFromAccount&&ie.threadMsgIdServer&&ie.threadMsgTime&&ie.threadMsgToAccount?(this.threadMsgFromAccount=ie.threadMsgFromAccount,this.threadMsgToAccount=ie.threadMsgToAccount,this.threadMsgTime=ie.threadMsgTime,this.threadMsgIdServer=ie.threadMsgIdServer,this.threadMsgIdClient=ie.threadMsgIdClient):(this.threadMsgFromAccount=ie.from,this.threadMsgToAccount=ie.to,this.threadMsgTime=ie.time,this.threadMsgIdServer=ie.idServer,this.threadMsgIdClient=ie.idClient)),O(le.text)&&(this.body=""+le.text),O(le.custom)&&(n(le.custom)==="object"?this.custom=i(le.custom):this.custom=""+le.custom),O(le.body)&&(this.body=""+le.body),O(le.pushContent)&&(this.pushContent=""+le.pushContent),O(le.pushPayload)&&(this.pushPayload=""+le.pushPayload);var Ie=le.apns;if(O(Ie)&&le.scene==="team"){var pe=Ie.accounts;O(pe)&&_.verifyParamType("apns.accounts",pe,"array","msg::Message"),this.apnsAccounts=pe?i(pe):"#%@all@%#",this.apnsContent=Ie.content||le.pushContent||"",_.verifyBooleanWithDefault(Ie,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=Ie.forcePush?1:0}var kt=le.robotInfo;O(kt)&&(le.scene==="team"&&_.verifyOptions(le.robotInfo,"account","msg::Message::robotInfo scene === team"),kt.function&&(this.robotInfoFunction=kt.function),kt.topic&&(this.robotInfoTopic=kt.topic),kt.customContent&&(this.robotInfoCustomContent=kt.customContent),kt.account&&(this.robotInfoAccount=kt.account)),O(le.isHistoryable)&&(this.isHistoryable=le.isHistoryable?1:0),O(le.isRoamingable)&&(this.isRoamingable=le.isRoamingable?1:0),O(le.isSyncable)&&(this.isSyncable=le.isSyncable?1:0),O(le.cc)&&(this.cc=le.cc?1:0),O(le.env)&&(this.env=le.env),O(le.isPushable)&&(this.isPushable=le.isPushable?1:0),O(le.isOfflinable)&&(this.isOfflinable=le.isOfflinable?1:0),O(le.isUnreadable)&&(this.isUnreadable=le.isUnreadable?1:0),O(le.needPushNick)&&(this.needPushNick=le.needPushNick?1:0),O(le.needMsgReceipt)&&(this.needMsgReceipt=le.needMsgReceipt?1:0),O(le.yidunEnable)&&(this.yidunEnable=le.yidunEnable?1:0),this.needUpdateSession=le.needUpdateSession===!1?0:1,O(le.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=le.antiSpamUsingYidun?1:0),O(le.clientAntiSpam)&&(this.clientAntiSpam=le.clientAntiSpam?1:0),O(le.antiSpamContent)&&(n(le.antiSpamContent)==="object"?this.antiSpamContent=i(le.antiSpamContent):this.antiSpamContent=""+le.antiSpamContent),O(le.antiSpamBusinessId)&&(n(le.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=i(le.antiSpamBusinessId):this.antiSpamBusinessId=""+le.antiSpamBusinessId),O(le.yidunAntiCheating)&&(this.yidunAntiCheating=le.yidunAntiCheating),O(le.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=le.yidunAntiSpamExt)}_.merge(Ve.prototype,ae.prototype),Ve.prototype.getScene=function(){return _e[this.scene]},Ve.getType=ae.getType,Ve.setFlow=ae.setFlow,Ve.reverse=function(le){var ie,Ie=_e[le.scene];if(ie=le.delete==="1"?{delete:!0,scene:Ie||le.scene,from:le.from,time:+le.time,to:""+le.to}:{scene:Ie||le.scene,from:le.from,fromNick:le.fromNick,fromClientType:Ce.reverseType(le.fromClientType),fromDeviceId:le.fromDeviceId,to:""+le.to,time:+le.time,type:Ve.getType(le),text:V(le.body)?le.body:le.text||"",isHistoryable:y(le.isHistoryable)||+le.isHistoryable==1,isRoamingable:y(le.isRoamingable)||+le.isRoamingable==1,isSyncable:y(le.isSyncable)||+le.isSyncable==1,cc:y(le.cc)||+le.cc==1,isPushable:y(le.isPushable)||+le.isPushable==1,isOfflinable:y(le.isOfflinable)||+le.isOfflinable==1,isUnreadable:y(le.isUnreadable)||+le.isUnreadable==1,isReplyMsg:y(le.isReplyMsg)||+le.isReplyMsg==1,needPushNick:y(le.needPushNick)||+le.needPushNick==1,needMsgReceipt:+le.needMsgReceipt==1,isLocal:!1},le.isInBlackList&&(ie.isInBlackList=+le.isInBlackList==1,ie.isInBlackList&&(le.status="fail")),O(le.isMuted)&&(ie.isMuted=+le.isMuted==1),O(le.resend)&&(ie.resend=+le.resend==1),O(le.idClient)&&(ie.idClient=le.idClient),O(le.idServer)&&(ie.idServer=""+le.idServer),O(le.userUpdateTime)&&(ie.userUpdateTime=+le.userUpdateTime),O(le.custom)&&(ie.custom=le.custom),O(le.callbackExt)&&(ie.callbackExt=le.callbackExt),O(le.subType)&&(ie.subType=+le.subType),O(le.pushContent)&&(ie.pushContent=le.pushContent),O(le.pushPayload)&&(ie.pushPayload=le.pushPayload),O(le.tempTeamMemberCount)&&(ie.tempTeamMemberCount=+le.tempTeamMemberCount),O(le.yidunAntiSpamRes)&&(ie.yidunAntiSpamRes=le.yidunAntiSpamRes),O(le.apnsAccounts)){if(ie.apns={},le.apnsAccounts!=="#%@all@%#"){var pe=le.apnsAccounts;try{ie.apns.accounts=JSON.parse(pe)}catch{ie.apns.accounts=[]}}ie.apns.content=le.apnsContent||"",ie.apns.forcePush=+le.apnsForcePush==1}if(O(le.robotInfoFunction)&&(ie.robotInfo=ie.robotInfo||{},le.robotInfoFunction&&(ie.robotInfo.function=le.robotInfoFunction)),O(le.robotInfoCustomContent)&&(ie.robotInfo=ie.robotInfo||{},le.robotInfoCustomContent&&(ie.robotInfo.customContent=le.robotInfoCustomContent)),O(le.robotInfoTopic)&&(ie.robotInfo=ie.robotInfo||{},le.robotInfoTopic&&(ie.robotInfo.topic=le.robotInfoTopic)),O(le.robotInfoAccount)&&(ie.robotInfo=ie.robotInfo||{},le.robotInfoAccount&&(ie.robotInfo.account=le.robotInfoAccount)),O(le.needUpdateSession)&&(ie.needUpdateSession=+le.needUpdateSession==1),ie.status=le.status||"success",O(a(le))&&(ie.filter=a(le)),le.replyMsgIdServer&&le.threadMsgIdServer){var kt=["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"];s(kt).call(kt,function(Ue){ie[Ue]=le[Ue]}),ie.replyMsgTime=+ie.replyMsgTime,ie.threadMsgTime=+ie.threadMsgTime}return ie},Ve.setExtra=function(le,ie){le.target=Ve.getMsgTarget(le,ie),le.sessionId=le.scene+"-"+le.target,ae.setFlow(le,ie)},Ve.getMsgTarget=function(le,ie){return le.scene==="p2p"?le.to===ie?le.from:le.to:le.scene==="team"||le.scene==="superTeam"?le.to:void 0},Ve.deduplication=function(le){var ie,Ie,pe={},kt=b(le);try{for(kt.s();!(Ie=kt.n()).done;){var Ue=Ie.value,Dt=pe[Ue.idClient];Dt&&Dt.time>Ue.time||(pe[Ue.idClient]=Ue)}}catch(tr){kt.e(tr)}finally{kt.f()}return u(ie=o(pe)).call(ie,function(tr){return pe[tr]})},Ve.sortMsgs=function(le){return le=c(le).call(le,0),_.sortObjArray(le,{sortPath:"time"}),le},Ve.getLastMsg=function(le){return(le=Ve.sortMsgs(le))[le.length-1]},Ve.getLastNotIgnoredMsg=function(le){for(var ie=null,Ie=(le=Ve.sortMsgs(le)).length-1;Ie>=0;Ie--)if(!(ie=le[Ie]).ignore)return ie;return null},Ve.getMaxTimetag=function(le){return Ve.getLastMsg(le).time},Ve.validScenes=de,Ve.validTypes=he,Ve.sceneMap=Fe,Ve.sceneReverseMap=_e,t.exports=Ve},function(t,r,e){var n=e(26),o=e(18),i=e(32),a=e(2),s=e(379),u=e(6),c=e(5),d=e(10),m=e(3),v=e(170),g=e(0),b=g.notundef,T=e(554),_=e(13),y=(e(184),e(44)),O=e(580).wrapSafeCallback,V=e(24).reportAPI,Ce=e(154);function ae(){}var Fe={};ae.getInstance=function(he){he=de(he),g.verifyOptions(he,"account","api::Base.getInstance");var Ve=this.genInstanceName(he),le=Fe[Ve];return le?ae.updateInstance(le,he):le=Fe[Ve]=new this(he),le},ae.updateInstance=function(he,Ve){he.setOptions(Ve),he.connect()};var _e=ae.fn=ae.prototype=o(new v),de=function(he){return he.nosSurvivalTime?(g.verifyParamType("nosSurvivalTime",he.nosSurvivalTime,"number","api::Base.getInstance"),g.verifyParamMin("nosSurvivalTime",he.nosSurvivalTime,86400,"api::Base.getInstance")):he.nosSurvivalTime=1/0,he};_e.updatePrivateConf=function(he){if(V({instance:this,className:"ApiBaseFn",funcName:"updatePrivateConf",hasCallback:!1}),he&&n(he.privateConf)==="object"){var Ve=he.privateConf;typeof Ve.lbs_web=="string"&&(he.lbsUrl=Ve.lbs_web),typeof Ve.link_ssl_web=="boolean"&&(he.secure=Ve.link_ssl_web),typeof Ve.https_enabled=="boolean"&&(he.httpsEnabled=Ve.https_enabled),he.uploadUrl=Ve.nos_uploader_web?Ve.nos_uploader_web:null,he.chunkUploadUrl=Ve.nos_uploader_web?Ve.nos_uploader_web:null,he.replaceUrl=Ve.nos_downloader?Ve.nos_downloader:null,he.downloadUrl=Ve.nos_accelerate?Ve.nos_accelerate:null,he.downloadHost=Ve.nos_accelerate_host?Ve.nos_accelerate_host:null,he.downloadHostList=Ve.nos_accelerate_host_list||[],he.downloadHost&&he.downloadHostList.push(he.downloadHost),he.nosCdnEnable=Ve.nos_cdn_enable!==!1,he.ntServerAddress=Ve.nt_server||null,he.kibanaServer=Ve.kibana_server,he.statisticServer=Ve.statistic_server,he.reportGlobalServer=Ve.report_global_server,he.ipVersion=Ve.ip_protocol_version||he.ipVersion,he.defaultLink=Ve.link_web||he.defaultLink,he.ipv6DefaultLink=Ve.link_ipv6_web||he.ipv6DefaultLink,typeof Ve.nos_lbs=="string"?he.nosLbsUrls=[Ve.nos_lbs]:he.nosLbsUrls=[],i(Ve.nos_edge_list)&&(he.edgeList=Ve.nos_edge_list)}return he.ntServerAddress===null||he.ntServerAddress===""?_.ntServerAddress=null:_.ntServerAddress=he.ntServerAddress,_.uploadUrl=he.uploadUrl||_.uploadUrl,_.chunkUploadUrl=he.chunkUploadUrl||_.chunkUploadUrl,_.downloadUrl=he.downloadUrl||_.downloadUrl,_.downloadHost=he.downloadHost||_.downloadHost,_.downloadHostList=he.downloadHostList&&he.downloadHostList.length>0?he.downloadHostList:_.downloadHostList,_.nosCdnEnable=he.nosCdnEnable!==!1,_.replaceUrl=he.replaceUrl||_.replaceUrl,_.httpsEnabled=he.httpsEnabled||_.httpsEnabled,he.probe_ipv4_url&&(_.ipProbeAddr.ipv4=he.probe_ipv4_url),he.probe_ipv6_url&&(_.ipProbeAddr.ipv6=he.probe_ipv6_url),he},_e.init=function(he){g.verifyOptions(he,"account","api::Base.init"),he=this.updatePrivateConf(he),g.verifyBooleanWithDefault(he,"exifOrientation",!0,"","api::Base.init"),he.lbsBackup=he.lbsBackup===void 0||he.lbsBackup;var Ve=this.account=he.account=he.account+"",le=he.constructor.genInstanceName(he),ie=Fe[le];if(he._disableSingleton&&(ie=null),ie)return ae.updateInstance(ie,he),ie;this.logger=he.logger=new T({debug:he.debug,logFunc:he.logFunc,prefix:this.subType,dbLog:he.dbLog!==!1,account:he.account,expire:he.expire,logLevel:he.logLevel}),this.options=O(he,this),he.api=this;var Ie=this.protocol=new he.Protocol(he);return Ie.name="Protocol-"+le,Ie.account=Ve,Ie.api=this,Ie.message=this.message=new he.Message({account:Ve}),this.reporter=Ie.reporter,this.statusProtector=Ie.statusProtector,this.reporterHook=Ie.reporterHook,this.abtInfo={},(typeof g.get(he,"privateConf.isABTestEnable")=="boolean"?he.privateConf.isABTestEnable:_.privateConf.isABTestEnable)&&this.abTestConfigRequset(),this.name=le,Fe[le]=this,this},_e.destroy=function(he){var Ve=this;(he=he||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"destroy",done:he.done});var le=this;if(!le.__beginDestroy){var ie;le.__beginDestroy=!0,he=he||{};var Ie,pe=this.name;if(this.logger.warn("destroy::start"),!pe)return this.logger&&this.logger.warn&&this.logger.warn("destroy::no instanceName"),void(le.__beginDestroy=void 0);this.protocol&&(ie=this.protocol.connectTimer),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.eventNames&&typeof this.eventNames=="function"&&a(Ie=this.eventNames()).call(Ie,function(kt){delete Ve._events[kt]}),this.disconnect({done:function(kt){var Ue,Dt,tr;le.logger.warn(`ApiBase::destroy: instance destroyed ...

`),le.__beginDestroy=void 0,le.reporter.destroy(),le.statusProtector.destroy(),le.reporterHook.destroy(),a(Ue=s(le.options)).call(Ue,function(pr){u(pr).call(pr,"on")===0&&(le.options[pr]=function(){},le.protocol.options[pr]=function(){},le.protocol.api.options[pr]=function(){})}),le.logger.destroy(),n(le.protocol.sessionSet)==="object"&&a(Dt=c(le.protocol.sessionSet)).call(Dt,function(pr){le.protocol.sessionSet[pr].unreadMsgs=[],le.protocol.sessionSet[pr]=void 0}),le.protocol.syncResult={},le.db&&le.db.close();var dr=le.protocol;a(tr=s(le)).call(tr,function(pr){le[pr]=void 0}),Fe&&(Fe[pe]=null,clearTimeout(ie)),dr&&(dr.__destroyed=!0),he.done instanceof Function&&he.done(kt)}})}},_e.setOptions=function(he){var Ve=Ce(he);Ve=O(Ve,this),this.protocol.setOptions(Ve)},_e.abTestConfigRequset=function(){var he=this,Ve=he.options.abTestUrl||"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",le={projectKey:"im1_sdk_abtest_web",appKey:he.options.appKey,osType:"Web",sdkVersion:he.info.version,deviceId:y.deviceId},ie=d({clientInfo:le});this.protocol.adaptersRequest(Ve,{method:"POST",timeout:5e3,headers:{"Content-Type":"application/json"},data:ie,onload:function(Ie){var pe=JSON.parse(Ie);he.abtInfo=pe.data.abtInfo||{},he.logger&&he.logger.info("abTestConfigRequset::success",he.abtInfo)},onerror:function(){he.logger&&he.logger.info("abTestConfigRequset::fail")}},{exception_service:7})},_e.processCallback=function(he,Ve){oe(he,Ve)},_e.processCallbackPromise=function(he,Ve){return new m(function(le,ie){oe(he,Ve,!0,le,ie)})};var oe=function(he,Ve,le,ie,Ie){var pe="api::processCallback";le&&(pe="api::processCallbackPromise"),g.verifyCallback(he,"done",pe),he.callback=function(kt,Ue,Dt){var tr=he.callback.options;if(Ue=Ue||tr,Ve&&(Ue=tr),g.isFunction(he.cbaop)){var dr=he.cbaop(kt,Ue);b(dr)&&(Ue=dr)}var pr=he.done;g.isObject(Ue)&&(delete Ue.done,delete Ue.cb,delete Ue.callback),le?kt?Ie({message:"生成接口回调错误",callFunc:pe,event:kt}):ie(Ue):pr(kt,Ue,Dt)},he.callback.options=g.copy(he)};_e.processPs=function(he){g.notexist(he.ps)&&(he.ps=""),g.verifyArrayMax("ps",he.ps,5e3)},_e.processCustom=function(he){g.notexist(he.custom)&&(he.custom="")},_e.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},_e.sendCmdWithResp=function(he,Ve,le){this.sendCmd(he,Ve,function(ie,Ie,pe){g.isFunction(le)&&(ie?le(ie,Ie):le(null,pe))})},_e.cbAndSendCmd=function(he,Ve){var le=this.processCallbackPromise(Ve);return this.sendCmd(he,Ve),le},_e.sendCmdUsePromise=function(he,Ve){var le=this,ie=V({instance:this,className:"ApiBaseFn",funcName:he,hasCallback:!0});return new m(function(Ie,pe){le.sendCmd(he,Ve,function(kt,Ue,Dt){if(kt)typeof ie=="function"&&ie(kt),pe(kt);else{var tr=g.merge({},Ue,Dt);typeof ie=="function"&&ie(void 0),Ie(tr)}})})},ae.use=function(he,Ve){he&&he.install&&g.isFunction(he.install)&&he.install(this,Ve)},ae.rmAllInstances=function(){for(var he in Fe)Fe[he].destroy();Fe={}},_e.logout=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he.callback=V({instance:this,className:"ApiBaseFn",funcName:"logout",done:he.callback}),he=he||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(he),this.sendCmd("logout",he,he.callback),this.protocol.statusProtector.emit("auth/loginLifeCycleLogout")},t.exports=ae,e(584),e(585),e(627),e(628),e(638),e(642)},function(t,r,e){(function(n){var o=e(15),i=e(6),a=e(302),s=e(52),u=e(26),c=function(){var d=(n===void 0?"undefined":u(n))==="object"?n:window,m=Math.pow(2,53)-1,v=/\bOpera/,g=Object.prototype,b=g.hasOwnProperty,T=g.toString;function _(_e){return(_e=String(_e)).charAt(0).toUpperCase()+o(_e).call(_e,1)}function y(_e){return _e=Fe(_e),/^(?:webOS|i(?:OS|P))/.test(_e)?_e:_(_e)}function O(_e,de){for(var oe in _e)b.call(_e,oe)&&de(_e[oe],oe,_e)}function V(_e){var de;return _e==null?_(_e):o(de=T.call(_e)).call(de,8,-1)}function Ce(_e){return String(_e).replace(/([ -])(?!$)/g,"$1?")}function ae(_e,de){var oe=null;return function(he,Ve){var le=-1,ie=he?he.length:0;if(typeof ie=="number"&&ie>-1&&ie<=m)for(;++le<ie;)Ve(he[le],le,he);else O(he,Ve)}(_e,function(he,Ve){oe=de(oe,he,Ve,_e)}),oe}function Fe(_e){return String(_e).replace(/^ +| +$/g,"")}return function _e(de){var oe=d,he=de&&u(de)==="object"&&V(de)!="String";he&&(oe=de,de=null);var Ve=oe.navigator||{},le=Ve.userAgent||"";de||(de=le);var ie,Ie,pe,kt,Ue,Dt=he?!!Ve.likeChrome:/\bChrome\b/.test(de)&&!/internal|\n/i.test(T.toString()),tr=he?"Object":"ScriptBridgingProxyObject",dr=he?"Object":"Environment",pr=he&&oe.java?"JavaPackage":V(oe.java),ar=he?"Object":"RuntimeObject",hr=/\bJava/.test(pr)&&oe.java,Ne=hr&&V(oe.environment)==dr,nr=hr?"a":"α",sr=hr?"b":"β",$e=oe.document||{},er=oe.operamini||oe.opera,or=v.test(or=he&&er?er["[[Class]]"]:V(er))?or:er=null,ze=de,rr=[],Et=null,Lt=de==le,cr=Lt&&er&&typeof er.version=="function"&&er.version(),mr=ae([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(Pr,Rr){return Pr||RegExp("\\b"+(Rr.pattern||Ce(Rr))+"\\b","i").exec(de)&&(Rr.label||Rr)}),vr=function(Pr){return ae(Pr,function(Rr,Qr){return Rr||RegExp("\\b"+(Qr.pattern||Ce(Qr))+"\\b","i").exec(de)&&(Qr.label||Qr)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Tr=Ar([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Ir=function(Pr){return ae(Pr,function(Rr,Qr,hn){return Rr||(Qr[Tr]||Qr[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Tr)]||RegExp("\\b"+Ce(hn)+"(?:\\b|\\w*\\d)","i").exec(de))&&hn})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),kr=function(Pr){return ae(Pr,function(Rr,Qr){var hn=Qr.pattern||Ce(Qr);return!Rr&&(Rr=RegExp("\\b"+hn+"(?:/[\\d.]+|[ \\w.]*)","i").exec(de))&&(Rr=function(Ur,qr,Gn){var jn={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return qr&&Gn&&/^Win/i.test(Ur)&&!/^Windows Phone /i.test(Ur)&&(jn=jn[/[\d.]+$/.exec(Ur)])&&(Ur="Windows "+jn),Ur=String(Ur),qr&&Gn&&(Ur=Ur.replace(RegExp(qr,"i"),Gn)),Ur=y(Ur.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Rr,hn,Qr.label||Qr)),Rr})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Ar(Pr){return ae(Pr,function(Rr,Qr){var hn=Qr.pattern||Ce(Qr);return!Rr&&(Rr=RegExp("\\b"+hn+" *\\d+[.\\w_]*","i").exec(de)||RegExp("\\b"+hn+" *\\w+-[\\w]*","i").exec(de)||RegExp("\\b"+hn+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(de))&&((Rr=String(Qr.label&&!RegExp(hn,"i").test(Qr.label)?Qr.label:Rr).split("/"))[1]&&!/[\d.]+/.test(Rr[0])&&(Rr[0]+=" "+Rr[1]),Qr=Qr.label||Qr,Rr=y(Rr[0].replace(RegExp(hn,"i"),Qr).replace(RegExp("; *(?:"+Qr+"[_-])?","i")," ").replace(RegExp("("+Qr+")[-_.]?(\\w)","i"),"$1 $2"))),Rr})}if(mr&&(mr=[mr]),Ir&&!Tr&&(Tr=Ar([Ir])),(ie=/\bGoogle TV\b/.exec(Tr))&&(Tr=ie[0]),/\bSimulator\b/i.test(de)&&(Tr=(Tr?Tr+" ":"")+"Simulator"),vr=="Opera Mini"&&/\bOPiOS\b/.test(de)&&rr.push("running in Turbo/Uncompressed mode"),vr=="IE"&&/\blike iPhone OS\b/.test(de)?(Ir=(ie=_e(de.replace(/like iPhone OS/,""))).manufacturer,Tr=ie.product):/^iP/.test(Tr)?(vr||(vr="Safari"),kr="iOS"+((ie=/ OS ([\d_]+)/i.exec(de))?" "+ie[1].replace(/_/g,"."):"")):vr!="Konqueror"||/buntu/i.test(kr)?Ir&&Ir!="Google"&&(/Chrome/.test(vr)&&!/\bMobile Safari\b/i.test(de)||/\bVita\b/.test(Tr))||/\bAndroid\b/.test(kr)&&/^Chrome/.test(vr)&&/\bVersion\//i.test(de)?(vr="Android Browser",kr=/\bAndroid\b/.test(kr)?kr:"Android"):vr=="Silk"?(/\bMobi/i.test(de)||(kr="Android",rr.unshift("desktop mode")),/Accelerated *= *true/i.test(de)&&rr.unshift("accelerated")):vr=="PaleMoon"&&(ie=/\bFirefox\/([\d.]+)\b/.exec(de))?rr.push("identifying as Firefox "+ie[1]):vr=="Firefox"&&(ie=/\b(Mobile|Tablet|TV)\b/i.exec(de))?(kr||(kr="Firefox OS"),Tr||(Tr=ie[1])):!vr||(ie=!/\bMinefield\b/i.test(de)&&/\b(?:Firefox|Safari)\b/.exec(vr))?(vr&&!Tr&&/[\/,]|^[^(]+?\)/.test(o(de).call(de,i(de).call(de,ie+"/")+8))&&(vr=null),(ie=Tr||Ir||kr)&&(Tr||Ir||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(kr))&&(vr=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(kr)?kr:ie)+" Browser")):vr=="Electron"&&(ie=(/\bChrome\/([\d.]+)\b/.exec(de)||0)[1])&&rr.push("Chromium "+ie):kr="Kubuntu",cr||(cr=ae(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",Ce(vr),"(?:Firefox|Minefield|NetFront)"],function(Pr,Rr){return Pr||(RegExp(Rr+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(de)||0)[1]||null})),(ie=(mr=="iCab"&&a(cr)>3?"WebKit":/\bOpera\b/.test(vr)&&(/\bOPR\b/.test(de)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(de)&&!/^(?:Trident|EdgeHTML)$/.test(mr)&&"WebKit"||!mr&&/\bMSIE\b/i.test(de)&&(kr=="Mac OS"?"Tasman":"Trident")||mr=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(vr)&&"NetFront")&&(mr=[ie]),vr=="IE"&&(ie=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(de)||0)[1])?(vr+=" Mobile",kr="Windows Phone "+(/\+$/.test(ie)?ie:ie+".x"),rr.unshift("desktop mode")):/\bWPDesktop\b/i.test(de)?(vr="IE Mobile",kr="Windows Phone 8.x",rr.unshift("desktop mode"),cr||(cr=(/\brv:([\d.]+)/.exec(de)||0)[1])):vr!="IE"&&mr=="Trident"&&(ie=/\brv:([\d.]+)/.exec(de))&&(vr&&rr.push("identifying as "+vr+(cr?" "+cr:"")),vr="IE",cr=ie[1]),Lt){if(kt="global",Ue=(pe=oe)!=null?u(pe[kt]):"number",/^(?:boolean|number|string|undefined)$/.test(Ue)||Ue=="object"&&!pe[kt])V(ie=oe.runtime)==tr?(vr="Adobe AIR",kr=ie.flash.system.Capabilities.os):V(ie=oe.phantom)==ar?(vr="PhantomJS",cr=(ie=ie.version||null)&&ie.major+"."+ie.minor+"."+ie.patch):typeof $e.documentMode=="number"&&(ie=/\bTrident\/(\d+)/i.exec(de))?(cr=[cr,$e.documentMode],(ie=+ie[1]+4)!=cr[1]&&(rr.push("IE "+cr[1]+" mode"),mr&&(mr[1]=""),cr[1]=ie),cr=vr=="IE"?String(cr[1].toFixed(1)):cr[0]):typeof $e.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(vr)&&(rr.push("masking as "+vr+" "+cr),vr="IE",cr="11.0",mr=["Trident"],kr="Windows");else if(hr&&(ze=(ie=hr.lang.System).getProperty("os.arch"),kr=kr||ie.getProperty("os.name")+" "+ie.getProperty("os.version")),Ne){try{cr=oe.require("ringo/engine").version.join("."),vr="RingoJS"}catch{(ie=oe.system)&&ie.global.system==oe.system&&(vr="Narwhal",kr||(kr=ie[0].os||null))}vr||(vr="Rhino")}else u(oe.process)==="object"&&!oe.process.browser&&(ie=oe.process)&&(u(ie.versions)==="object"&&(typeof ie.versions.electron=="string"?(rr.push("Node "+ie.versions.node),vr="Electron",cr=ie.versions.electron):typeof ie.versions.nw=="string"&&(rr.push("Chromium "+cr,"Node "+ie.versions.node),vr="NW.js",cr=ie.versions.nw)),vr||(vr="Node.js",ze=ie.arch,kr=ie.platform,cr=(cr=/[\d.]+/.exec(ie.version))?cr[0]:null));kr=kr&&y(kr)}if(cr&&(ie=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(cr)||/(?:alpha|beta)(?: ?\d)?/i.exec(de+";"+(Lt&&Ve.appMinorVersion))||/\bMinefield\b/i.test(de)&&"a")&&(Et=/b/i.test(ie)?"beta":"alpha",cr=cr.replace(RegExp(ie+"\\+?$"),"")+(Et=="beta"?sr:nr)+(/\d+\+?/.exec(ie)||"")),vr=="Fennec"||vr=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(kr))vr="Firefox Mobile";else if(vr=="Maxthon"&&cr)cr=cr.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Tr))Tr=="Xbox 360"&&(kr=null),Tr=="Xbox 360"&&/\bIEMobile\b/.test(de)&&rr.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(vr)&&(!vr||Tr||/Browser|Mobi/.test(vr))||kr!="Windows CE"&&!/Mobi/i.test(de))if(vr=="IE"&&Lt)try{oe.external===null&&rr.unshift("platform preview")}catch{rr.unshift("embedded")}else(/\bBlackBerry\b/.test(Tr)||/\bBB10\b/.test(de))&&(ie=(RegExp(Tr.replace(/ +/g," *")+"/([.\\d]+)","i").exec(de)||0)[1]||cr)?(kr=((ie=[ie,/BB10/.test(de)])[1]?(Tr=null,Ir="BlackBerry"):"Device Software")+" "+ie[0],cr=null):this!=O&&Tr!="Wii"&&(Lt&&er||/Opera/.test(vr)&&/\b(?:MSIE|Firefox)\b/i.test(de)||vr=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(kr)||vr=="IE"&&(kr&&!/^Win/.test(kr)&&cr>5.5||/\bWindows XP\b/.test(kr)&&cr>8||cr==8&&!/\bTrident\b/.test(de)))&&!v.test(ie=_e.call(O,de.replace(v,"")+";"))&&ie.name&&(ie="ing as "+ie.name+((ie=ie.version)?" "+ie:""),v.test(vr)?(/\bIE\b/.test(ie)&&kr=="Mac OS"&&(kr=null),ie="identify"+ie):(ie="mask"+ie,vr=or?y(or.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(ie)&&(kr=null),Lt||(cr=null)),mr=["Presto"],rr.push(ie));else vr+=" Mobile";if(ie=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(de)||0)[1]){var Nr,Mn;ie=[a(ie.replace(/\.(\d)$/,".0$1")),ie],vr=="Safari"&&o(Nr=ie[1]).call(Nr,-1)=="+"?(vr="WebKit Nightly",Et="alpha",cr=o(Mn=ie[1]).call(Mn,0,-1)):cr!=ie[1]&&cr!=(ie[2]=(/\bSafari\/([\d.]+\+?)/i.exec(de)||0)[1])||(cr=null),ie[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(de)||0)[1],ie[0]==537.36&&ie[2]==537.36&&a(ie[1])>=28&&mr=="WebKit"&&(mr=["Blink"]),Lt&&(Dt||ie[1])?(mr&&(mr[1]="like Chrome"),ie=ie[1]||((ie=ie[0])<530?1:ie<532?2:ie<532.05?3:ie<533?4:ie<534.03?5:ie<534.07?6:ie<534.1?7:ie<534.13?8:ie<534.16?9:ie<534.24?10:ie<534.3?11:ie<535.01?12:ie<535.02?"13+":ie<535.07?15:ie<535.11?16:ie<535.19?17:ie<536.05?18:ie<536.1?19:ie<537.01?20:ie<537.11?"21+":ie<537.13?23:ie<537.18?24:ie<537.24?25:ie<537.36?26:mr!="Blink"?"27":"28")):(mr&&(mr[1]="like Safari"),ie=(ie=ie[0])<400?1:ie<500?2:ie<526?3:ie<533?4:ie<534?"4+":ie<535?5:ie<537?6:ie<538?7:ie<601?8:"8"),mr&&(mr[1]+=" "+(ie+=typeof ie=="number"?".x":/[.+]/.test(ie)?"":"+")),vr=="Safari"&&(!cr||s(cr)>45)&&(cr=ie)}vr=="Opera"&&(ie=/\bzbov|zvav$/.exec(kr))?(vr+=" ",rr.unshift("desktop mode"),ie=="zvav"?(vr+="Mini",cr=null):vr+="Mobile",kr=kr.replace(RegExp(" *"+ie+"$"),"")):vr=="Safari"&&/\bChrome\b/.exec(mr&&mr[1])&&(rr.unshift("desktop mode"),vr="Chrome Mobile",cr=null,/\bOS X\b/.test(kr)?(Ir="Apple",kr="iOS 4.3+"):kr=null),cr&&i(cr).call(cr,ie=/[\d.]+$/.exec(kr))==0&&i(de).call(de,"/"+ie+"-")>-1&&(kr=Fe(kr.replace(ie,""))),mr&&!/\b(?:Avant|Nook)\b/.test(vr)&&(/Browser|Lunascape|Maxthon/.test(vr)||vr!="Safari"&&/^iOS/.test(kr)&&/\bSafari\b/.test(mr[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(vr)&&mr[1])&&(ie=mr[mr.length-1])&&rr.push(ie),rr.length&&(rr=["("+rr.join("; ")+")"]),Ir&&Tr&&i(Tr).call(Tr,Ir)<0&&rr.push("on "+Ir),Tr&&rr.push((/^on /.test(rr[rr.length-1])?"":"on ")+Tr),kr&&(ie=/ ([\d.+]+)$/.exec(kr),Ie=ie&&kr.charAt(kr.length-ie[0].length-1)=="/",kr={architecture:32,family:ie&&!Ie?kr.replace(ie[0],""):kr,version:ie?ie[1]:null,toString:function(){var Pr=this.version;return this.family+(Pr&&!Ie?" "+Pr:"")+(this.architecture==64?" 64-bit":"")}}),(ie=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ze))&&!/\bi686\b/i.test(ze)?(kr&&(kr.architecture=64,kr.family=kr.family.replace(RegExp(" *"+ie),"")),vr&&(/\bWOW64\b/i.test(de)||Lt&&/\w(?:86|32)$/.test(Ve.cpuClass||Ve.platform)&&!/\bWin64; x64\b/i.test(de))&&rr.unshift("32-bit")):kr&&/^OS X/.test(kr.family)&&vr=="Chrome"&&a(cr)>=39&&(kr.architecture=64),de||(de=null);var Or={};return Or.description=de,Or.layout=mr&&mr[0],Or.manufacturer=Ir,Or.name=vr,Or.prerelease=Et,Or.product=Tr,Or.ua=de,Or.version=vr&&cr,Or.os=kr||{architecture:null,family:null,version:null,toString:function(){return"null"}},Or.parse=_e,Or.toString=function(){return this.description||""},Or.version&&rr.unshift(cr),Or.name&&rr.unshift(vr),kr&&vr&&(kr!=String(kr).split(" ")[0]||kr!=vr.split(" ")[0]&&!Tr)&&rr.push(Tr?"("+kr+")":"on "+kr),rr.length&&(Or.description=rr.join(" ")),Or}()}();t.exports=c}).call(this,e(56))},function(t,r,e){var n=e(87),o=e(32),i=e(5),a=e(17),s=e(201),u=e(6),c=e(69),d=e(7),m=e(2),v=e(10),g=e(23),b=e(57),T=e(25),_=e(0),y=_.undef,O=e(13),V=e(40),Ce=e(155),ae=Ce.StatusProtector,Fe=(Ce.V2NIMLoginStatus,e(105)),_e=Fe.ReporterHook,de=Fe.EMSyncType,oe=e(643),he=e(644);function Ve(ie){_.undef(ie.secure)&&(ie.secure=!0),this.options=ie,this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var Ie=ie.defaultLink||ie.defaultLinkUrl;_.notundef(Ie)&&_.isString(Ie)&&(O.optionDefaultLinkUrl=n(Ie).call(Ie)),_.notundef(ie.ipv6DefaultLink)&&_.isString(ie.ipv6DefaultLink)&&(O.optionIpv6DefaultLinkUrl=ie.ipv6DefaultLink),typeof ie.heartbeatInterval=="number"&&(O.heartbeatInterval=ie.heartbeatInterval),o(ie.nosLbsUrls)&&(O.nosLbsUrls=ie.nosLbsUrls);var pe=this.options.socketConcurrent;pe=typeof pe=="number"&&pe>=1&&pe<=3?pe:1,this.options.socketConcurrent=pe,this.options.rollbackDelMsgUnread!==void 0&&typeof this.options.rollbackDelMsgUnread=="boolean"||(this.options.rollbackDelMsgUnread=!0),this.init(),this.connect()}var le=Ve.fn=Ve.prototype;le.init=function(){var ie=this;this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.cmdTaskArray=[],this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset(),this.statusProtector=new ae(this),this.reporterHook=new _e(this,this.options.reporterHookConfig),this.promiseAbortManager=new oe,this.imsocket=new he(this,{socketConcurrent:this.options.socketConcurrent}),this.statusProtector.on("auth/loginLifeCycleLogout",function(){ie.promiseAbortManager.clear()}),this.statusProtector.on("auth/loginLifeCycleLoginSucc",function(){ie.reporterHook.reset(),ie.reporterHook.setOriginTimetick()})},le.reset=function(){y(this.options.thumbnailToStatic)&&(this.options.thumbnailToStatic=!0),this.resetConnect()},le.setOptions=function(ie){var Ie=this.options,pe=i(Ie),kt=i(ie),Ue=["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],Dt=a(kt).call(kt,function(dr){return s(Ue).call(Ue,dr)}),tr=u(pe).call(pe,"account");_.verifyCallback(ie,Dt,"protocol::IMProtocol"),this.logger.info("setOptions::",_.omitAsString(ie,["appKey","token","loginExt","customTag"])),tr!==-1&&c(pe).call(pe,tr,1),ie=_.filterObj(ie,pe),this.options=_.merge(Ie,ie),this.reset()},le.sendCmd=function(ie){var Ie,pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",kt=arguments.length>2?arguments[2]:void 0,Ue=this;Ue.heartbeat();var Dt,tr=ie,dr=(ie=Ue.parser.createCmd(ie,pe)).SER;pe=pe||{},Ue.cmdContentMap[dr]=pe,pe.single&&(delete pe.single,(Dt=i(pe)).length===1&&(Ue.cmdContentMap[dr]=pe[Dt[0]])),pe.__exceptionInfo={target:d(Ie="".concat(ie.SID,"-")).call(Ie,ie.CID),context:dr,startTime:Ue.reporterHook.getSafeClock()},pe.NOTSTORE&&(Dt=pe.NOTSTORE.split(" "),m(Dt).call(Dt,function(pr){delete pe[pr]}),delete pe.NOTSTORE),(kt=kt||pe.callback)&&(Ue.cmdCallbackMap[dr]=kt),Ue.cmdTaskArray.push({cmdName:tr,cmd:v(ie)}),Ue.startCmdTaskTimer()},le.startCmdTaskTimer=function(){var ie=this;ie.cmdTaskTimer||(ie.cmdTaskTimer=g(function(){var Ie=ie.cmdTaskArray.shift();ie.cmdTaskTimer=null,Ie&&ie.executeCmdTask(Ie),ie.cmdTaskArray.length&&ie.startCmdTaskTimer()},0))},le.executeCmdTask=function(ie){var Ie=ie.cmdName,pe=ie.cmd,kt=(pe=JSON.parse(pe)).SER;this.isFrequencyControlled(Ie)?(this.logger.warn("protocol::executeCmdTask: ".concat(Ie," hit freq control")),this.markCallbackInvalid(kt,V.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:"".concat(Ie," hit freq control")}))):this.hasLogin?(Ie!=="heartbeat"&&(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(ie.cmd)):this.logger.info("protocol::sendCmd: ".concat(Ie))),this.doSendCmd(pe)):Ie==="login"&&this.isConnected()?(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(ie.cmd)):this.logger.info("protocol::sendCmd: ".concat(Ie)),this.doSendCmd(pe)):(this.logger.warn("protocol::executeCmdTask: ".concat(Ie," not connected or login")),this.markCallbackInvalid(kt,V.newSocketStateError({callFunc:"protocol::executeCmdTask",message:"".concat(Ie," not connected or not login")})))},le.isFrequencyControlled=function(ie){var Ie=this.frequencyControlMap&&this.frequencyControlMap[ie];if(Ie){if(b()<Ie.from+Ie.duration)return!0;delete this.frequencyControlMap[ie]}},le.doSendCmd=function(ie){var Ie=this,pe=ie.SER,kt=pe===0?O.hbCmdTimeout:O.cmdTimeout,Ue=new Date().getTime(),Dt=Ie.cmdContentMap[pe];function tr(){Ie.markCallbackInvalid(pe,V.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser ".concat(pe," socketSendJson Error")})),Ie.onDisconnect("protocol::doSendCmd:socketSendJson","broken")}Dt&&Dt.__exceptionInfo&&(Dt.__exceptionInfo.startTime=b()),ie.isAwaitable&&(Ie.timerMap[pe]=g(function(){var dr;Ie.markCallbackInvalid(pe,V.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser ".concat(pe," Timeout Error")})),Ie.reporter.reportTraceStart("exceptions",{user_id:_.get(Ie,"options.account")||"",trace_id:_.get(Ie,"socket.socket.sessionid"),start_time:Ue,action:2,exception_service:6}),Ie.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:d(dr="".concat(ie.SID,"-")).call(dr,ie.CID),context:"".concat(ie.SER),net_connect:Ie.checkNetworkAvailable()}),Ie.reporter.reportTraceEnd("exceptions",1)},kt));try{Ie.socket&&Ie.socket.send?Ie.socket.send(v(ie)):tr()}catch{tr()}},le.getObjWithSer=function(ie){var Ie=this.cmdContentMap[ie];return Ie&&!Ie.isImSyncDataObj&&delete this.cmdContentMap[ie],Ie&&_.copy(Ie)},le.getCallbackWithSer=function(ie){var Ie=this.cmdCallbackMap[ie];return Ie&&!Ie.isImSyncDataCb&&delete this.cmdCallbackMap[ie],Ie},le.getTimerWithSer=function(ie){var Ie=this.timerMap[ie];return delete this.timerMap[ie],Ie},le.clearTimerWithSer=function(ie){var Ie=this.getTimerWithSer(ie);Ie&&clearTimeout(Ie)},le.markCallbackInvalid=function(ie,Ie){this.getObjWithSer(ie),this.clearTimerWithSer(ie);var pe=this.getCallbackWithSer(ie);if(pe){var kt=pe.options;g(function(){pe(Ie||V.newUnknownError({ser:ie}),kt)},0)}},le.markAllCallbackInvalid=function(ie){var Ie,pe,kt=this;m(Ie=i(this.cmdCallbackMap)).call(Ie,function(Ue){var Dt=kt.getObjWithSer(Ue);if(Dt.__exceptionInfo){var tr=Dt.__exceptionInfo.target,dr=Dt.__exceptionInfo.context,pr=_.get(ie,"event.uploadCode")||ie&&ie.code;pr=typeof pr!="number"?415:pr;var ar=_.get(ie,"event.disconnectReason"),hr=ar?v({disconnect_reason:ar}):ie&&ie.message||"send cmd failed";kt.reporter.reportTraceStart("exceptions",{user_id:_.get(kt,"options.account")||"",trace_id:_.get(kt,"socket.socket.sessionid"),start_time:kt.reporterHook.getNTPTime(Dt.__exceptionInfo.startTime),action:2,exception_service:6}),kt.reporter.reportTraceUpdateV2("exceptions",{code:pr,description:hr,operation_type:1,target:tr,context:dr,net_connect:kt.checkNetworkAvailable()}),kt.reporter.reportTraceEnd("exceptions",1),delete Dt.__exceptionInfo}}),m(pe=i(this.cmdCallbackMap)).call(pe,function(Ue){kt.markCallbackInvalid(Ue,ie)}),kt.cmdTaskArray=[]},le.getPacketObj=function(ie){var Ie=null;if(ie&&ie.raw){var pe=ie.raw.ser;_.notundef(pe)&&(Ie=this.getObjWithSer(pe))}return Ie},le.callPacketAckCallback=function(ie){var Ie=this;if(ie&&ie.raw){var pe=ie.raw.ser;if(_.notundef(pe)){Ie.clearTimerWithSer(pe);var kt=Ie.getCallbackWithSer(pe);if(kt){var Ue;kt.originUrl&&ie.obj&&ie.obj.file&&(ie.obj.file._url_safe=ie.obj.file.url,ie.obj.file.url=kt.originUrl,ie.obj.type==="audio"&&(ie.obj.file.mp3Url=kt.originUrl+(~u(Ue=kt.originUrl).call(Ue,"?")?"&":"?")+"audioTrans&type=mp3")),ie.promise?ie.promise.then(function(){kt(ie.error,ie.obj)},function(Dt){var tr,dr;Dt.callFunc="protocol::callPacketAckCallback",Dt.message=d(tr=d(dr="Resp Promoise Error: cmd: ".concat(ie.cmd,", ser: ")).call(dr,pe,", reason: ")).call(tr,Dt.message);var pr=V.customError("CALLBACK_ACK_ERR",Dt);Ie.logger.error(`protocol::callPacketAckCallback error stack: 
`.concat(Dt.stack||Dt.event&&Dt.event.stack)),kt(pr,ie.obj,ie.content)}):kt(ie.error,ie.obj,ie.content)}}}},le.onMessage=function(ie){var Ie=this;Ie.heartbeat(),Ie.parser.parseResponse(ie).then(function(pe){var kt;if(pe.notFound&&Ie.logger.warn("protocol::onMessage: packet not found ".concat(v(pe))),pe.error){var Ue,Dt;pe.error.message=d(Ue="".concat(pe.cmd," error: ")).call(Ue,pe.error.message),Ie.logger.error(d(Dt="protocol::onMessage: packet error ".concat(v(pe.error),"，raw cmd ")).call(Dt,pe.rawStr));var tr=pe.raw||{};tr.code!==408&&tr.code!==415&&tr.code!==500||Ie.reporter.report("nimErrEvent",{code:tr.code,module:pe.cmd,accid:Ie.account})}pe.__receiveTime=Ie.reporterHook.getSafeClock();var dr=de[d(kt="kSyncType".concat(pe.raw.sid,"_")).call(kt,pe.raw.cid)];if(dr){var pr=_.get(pe,"raw.r"),ar=1;if(pr&&pr.length>0){var hr=a(pr).call(pr,function(ze){return o(ze)}),Ne=_.get(hr,"0.length");ar=typeof Ne=="number"?Ne:1}Ie.reporterHook.emit("reporter/syncItem",dr,ar)}pe.frequencyControlDuration&&(Ie.logger.error("protocol::onMessage: server freq control ".concat(v(pe.cmd))),Ie.frequencyControlMap=Ie.frequencyControlMap||{},Ie.frequencyControlMap[pe.cmd]={from:+new Date,duration:pe.frequencyControlDuration}),pe.obj=Ie.getPacketObj(pe),pe.obj&&pe.obj.__exceptionInfo&&delete pe.obj.__exceptionInfo,pe.cmd!=="heartbeat"&&(Ie.logger.debugEnable?Ie.logger.debug("protocol::recvCmd: ".concat(pe.rawStr)):Ie.logger.log("protocol::recvCmd: ".concat(pe.cmd)));var nr="process"+_.capFirstLetter(pe.service);if(Ie[nr])if(pe.cmd==="syncDone"){if(Ie.cmdCallbackMap[pe.raw.ser]&&Ie.cmdCallbackMap[pe.raw.ser].isImSyncDataCb){var sr;Ie.cmdCallbackMap[pe.raw.ser].isImSyncDataCb=!1;var $e=T(sr=function(ze,rr){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[ze](rr):g($e,300)}).call(sr,Ie,nr,pe);g(function(){$e.call(Ie,nr,pe)},10)}}else try{Ie[nr](pe)}catch(ze){var er,or;Ie.logger.warn(d(er=d(or="protocol::onMessage: ".concat(nr,".")).call(or,pe.cmd," excute failed ")).call(er,pe.obj?"":", maybe the packet timed out",": "),ze.message)}else Ie.logger.warn("protocol::onMessage: ".concat(nr," not found"));Ie.callPacketAckCallback(pe)})},le.onMiscError=function(ie,Ie,pe){Ie&&this.notifyError(ie,Ie,pe)},le.onCustomError=function(ie,Ie){var pe=V.customError(ie,Ie),kt=Ie.message||"未知错误";this.onMiscError(kt,pe)},le.notifyError=function(ie,Ie,pe){var kt;this.isConnected()&&(this.logger.error(d(kt="".concat(ie||""," ")).call(kt,this.name),Ie,pe),this.options.onerror(Ie,pe))},le.emitAPI=function(ie){var Ie=ie.type,pe=ie.obj;this.api.emit(Ie,pe)},t.exports=Ve,e(664),e(680),e(681),e(682),e(683),e(684)},function(t,r,e){var n=e(107),o=Function.prototype,i=o.apply,a=o.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},function(t,r){t.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(t,r){var e=String;t.exports=function(n){try{return e(n)}catch{return"Object"}}},function(t,r,e){var n=e(63);t.exports=Array.isArray||function(o){return n(o)=="Array"}},function(t,r,e){var n,o=e(36),i=e(163),a=e(164),s=e(112),u=e(217),c=e(159),d=e(130),m=d("IE_PROTO"),v=function(){},g=function(_){return"<script>"+_+"<\/script>"},b=function(_){_.write(g("")),_.close();var y=_.parentWindow.Object;return _=null,y},T=function(){try{n=new ActiveXObject("htmlfile")}catch{}var _,y;T=typeof document<"u"?document.domain&&n?b(n):((y=c("iframe")).style.display="none",u.appendChild(y),y.src="javascript:",(_=y.contentWindow.document).open(),_.write(g("document.F=Object")),_.close(),_.F):b(n);for(var O=a.length;O--;)delete T.prototype[a[O]];return T()};s[m]=!0,t.exports=Object.create||function(_,y){var O;return _!==null?(v.prototype=o(_),O=new v,v.prototype=null,O[m]=_):O=T(),y===void 0?O:i.f(O,y)}},function(t,r,e){var n=e(162),o=e(38).f,i=e(53),a=e(29),s=e(335),u=e(20)("toStringTag");t.exports=function(c,d,m,v){if(c){var g=m?c:c.prototype;a(g,u)||o(g,u,{configurable:!0,value:d}),v&&!n&&i(g,"toString",s)}}},function(t,r,e){var n=e(43),o=e(196),i=e(99),a=e(97),s=e(38).f,u=e(166),c=e(167),d=e(48),m=e(27),v=a.set,g=a.getterFor("Array Iterator");t.exports=u(Array,"Array",function(T,_){v(this,{type:"Array Iterator",target:n(T),index:0,kind:_})},function(){var T=g(this),_=T.target,y=T.kind,O=T.index++;return!_||O>=_.length?(T.target=void 0,c(void 0,!0)):c(y=="keys"?O:y=="values"?_[O]:[O,_[O]],!1)},"values");var b=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!d&&m&&b.name!=="values")try{s(b,"name",{value:"values"})}catch{}},function(t,r,e){var n=e(499),o=e(504);t.exports=function(i,a){var s=o(i,a);return n(s)?s:void 0}},function(t,r,e){var n=e(34),o=e(11),i=e(124),a=e(42),s=e(45),u=e(161),c=o([].push),d=function(m){var v=m==1,g=m==2,b=m==3,T=m==4,_=m==6,y=m==7,O=m==5||_;return function(V,Ce,ae,Fe){for(var _e,de,oe=a(V),he=i(oe),Ve=n(Ce,ae),le=s(he),ie=0,Ie=Fe||u,pe=v?Ie(V,le):g||y?Ie(V,0):void 0;le>ie;ie++)if((O||ie in he)&&(de=Ve(_e=he[ie],ie,oe),m))if(v)pe[ie]=de;else if(de)switch(m){case 3:return!0;case 5:return _e;case 6:return ie;case 2:c(pe,_e)}else switch(m){case 4:return!1;case 7:c(pe,_e)}return _?-1:b||T?T:pe}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(t,r,e){t.exports=e(300)},function(t,r,e){t.exports=e(218)},function(t,r,e){t.exports=e(573)},function(t,r){t.exports=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}},function(t,r,e){(function(n){var o;t.exports=(o=o||function(i,a){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&n!==void 0&&n.crypto&&(s=n.crypto),!s)try{s=e(886)}catch{}var u=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function Ce(){}return function(ae){var Fe;return Ce.prototype=ae,Fe=new Ce,Ce.prototype=null,Fe}}(),d={},m=d.lib={},v=m.Base={extend:function(Ce){var ae=c(this);return Ce&&ae.mixIn(Ce),ae.hasOwnProperty("init")&&this.init!==ae.init||(ae.init=function(){ae.$super.init.apply(this,arguments)}),ae.init.prototype=ae,ae.$super=this,ae},create:function(){var Ce=this.extend();return Ce.init.apply(Ce,arguments),Ce},init:function(){},mixIn:function(Ce){for(var ae in Ce)Ce.hasOwnProperty(ae)&&(this[ae]=Ce[ae]);Ce.hasOwnProperty("toString")&&(this.toString=Ce.toString)},clone:function(){return this.init.prototype.extend(this)}},g=m.WordArray=v.extend({init:function(Ce,ae){Ce=this.words=Ce||[],this.sigBytes=ae??4*Ce.length},toString:function(Ce){return(Ce||T).stringify(this)},concat:function(Ce){var ae=this.words,Fe=Ce.words,_e=this.sigBytes,de=Ce.sigBytes;if(this.clamp(),_e%4)for(var oe=0;oe<de;oe++){var he=Fe[oe>>>2]>>>24-oe%4*8&255;ae[_e+oe>>>2]|=he<<24-(_e+oe)%4*8}else for(var Ve=0;Ve<de;Ve+=4)ae[_e+Ve>>>2]=Fe[Ve>>>2];return this.sigBytes+=de,this},clamp:function(){var Ce=this.words,ae=this.sigBytes;Ce[ae>>>2]&=4294967295<<32-ae%4*8,Ce.length=i.ceil(ae/4)},clone:function(){var Ce=v.clone.call(this);return Ce.words=this.words.slice(0),Ce},random:function(Ce){for(var ae=[],Fe=0;Fe<Ce;Fe+=4)ae.push(u());return new g.init(ae,Ce)}}),b=d.enc={},T=b.Hex={stringify:function(Ce){for(var ae=Ce.words,Fe=Ce.sigBytes,_e=[],de=0;de<Fe;de++){var oe=ae[de>>>2]>>>24-de%4*8&255;_e.push((oe>>>4).toString(16)),_e.push((15&oe).toString(16))}return _e.join("")},parse:function(Ce){for(var ae=Ce.length,Fe=[],_e=0;_e<ae;_e+=2)Fe[_e>>>3]|=parseInt(Ce.substr(_e,2),16)<<24-_e%8*4;return new g.init(Fe,ae/2)}},_=b.Latin1={stringify:function(Ce){for(var ae=Ce.words,Fe=Ce.sigBytes,_e=[],de=0;de<Fe;de++){var oe=ae[de>>>2]>>>24-de%4*8&255;_e.push(String.fromCharCode(oe))}return _e.join("")},parse:function(Ce){for(var ae=Ce.length,Fe=[],_e=0;_e<ae;_e++)Fe[_e>>>2]|=(255&Ce.charCodeAt(_e))<<24-_e%4*8;return new g.init(Fe,ae)}},y=b.Utf8={stringify:function(Ce){try{return decodeURIComponent(escape(_.stringify(Ce)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ce){return _.parse(unescape(encodeURIComponent(Ce)))}},O=m.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(Ce){typeof Ce=="string"&&(Ce=y.parse(Ce)),this._data.concat(Ce),this._nDataBytes+=Ce.sigBytes},_process:function(Ce){var ae,Fe=this._data,_e=Fe.words,de=Fe.sigBytes,oe=this.blockSize,he=de/(4*oe),Ve=(he=Ce?i.ceil(he):i.max((0|he)-this._minBufferSize,0))*oe,le=i.min(4*Ve,de);if(Ve){for(var ie=0;ie<Ve;ie+=oe)this._doProcessBlock(_e,ie);ae=_e.splice(0,Ve),Fe.sigBytes-=le}return new g.init(ae,le)},clone:function(){var Ce=v.clone.call(this);return Ce._data=this._data.clone(),Ce},_minBufferSize:0}),V=(m.Hasher=O.extend({cfg:v.extend(),init:function(Ce){this.cfg=this.cfg.extend(Ce),this.reset()},reset:function(){O.reset.call(this),this._doReset()},update:function(Ce){return this._append(Ce),this._process(),this},finalize:function(Ce){return Ce&&this._append(Ce),this._doFinalize()},blockSize:16,_createHelper:function(Ce){return function(ae,Fe){return new Ce.init(Fe).finalize(ae)}},_createHmacHelper:function(Ce){return function(ae,Fe){return new V.HMAC.init(Ce,Fe).finalize(ae)}}}),d.algo={});return d}(Math),o)}).call(this,e(56))},function(t,r,e){var n=e(27),o=e(19),i=e(148),a=e(77),s=e(43),u=e(125),c=e(29),d=e(209),m=Object.getOwnPropertyDescriptor;r.f=n?m:function(v,g){if(v=s(v),g=u(g),d)try{return m(v,g)}catch{}if(c(v,g))return a(!o(i.f,v,g),v[g])}},function(t,r){t.exports=function(e){return e==null}},function(t,r,e){var n=e(93),o=e(4);t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,r,e){var n,o,i=e(14),a=e(64),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,d=c&&c.v8;d&&(o=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},function(t,r,e){var n=e(4);t.exports=function(o,i){var a=[][o];return!!a&&n(function(){a.call(null,i||function(){return 1},1)})}},function(t,r,e){var n=e(125),o=e(38),i=e(77);t.exports=function(a,s,u){var c=n(s);c in a?o.f(a,c,i(0,u)):a[c]=u}},function(t,r){},function(t,r,e){var n,o,i,a=e(336),s=e(14),u=e(28),c=e(53),d=e(29),m=e(158),v=e(130),g=e(112),b=s.TypeError,T=s.WeakMap;if(a||m.state){var _=m.state||(m.state=new T);_.get=_.get,_.has=_.has,_.set=_.set,n=function(O,V){if(_.has(O))throw b("Object already initialized");return V.facade=O,_.set(O,V),V},o=function(O){return _.get(O)||{}},i=function(O){return _.has(O)}}else{var y=v("state");g[y]=!0,n=function(O,V){if(d(O,y))throw b("Object already initialized");return V.facade=O,c(O,y,V),V},o=function(O){return d(O,y)?O[y]:{}},i=function(O){return d(O,y)}}t.exports={set:n,get:o,has:i,enforce:function(O){return i(O)?o(O):n(O,{})},getterFor:function(O){return function(V){var Ce;if(!u(V)||(Ce=o(V)).type!==O)throw b("Incompatible receiver, "+O+" required");return Ce}}}},function(t,r,e){var n=e(11);t.exports=n([].slice)},function(t,r){t.exports={}},function(t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}}},function(t,r,e){var n=e(14);t.exports=n.Promise},function(t,r,e){var n=e(645)();t.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){var n=e(287);function o(i,a,s,u,c,d,m){try{var v=i[d](m),g=v.value}catch(b){return void s(b)}v.done?a(g):n.resolve(g).then(u,c)}t.exports=function(i){return function(){var a=this,s=arguments;return new n(function(u,c){var d=i.apply(a,s);function m(g){o(d,u,c,m,v,"next",g)}function v(g){o(d,u,c,m,v,"throw",g)}m(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(e){return e!=null&&typeof e=="object"}},function(t,r,e){var n=e(278),o=e(57),i=e(3),a=e(23),s=e(25),u=e(7),c=e(52),d=e(17),m=e(2),v=e(5),g=e(8),b=e(197),T=e(41),_=e(121),y=e(122),O=e(280),V=e(281),Ce=e(190);function ae(Ie){var pe=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var kt,Ue=Ce(Ie);if(pe){var Dt=Ce(this).constructor;kt=n(Ue,arguments,Dt)}else kt=Ue.apply(this,arguments);return V(this,kt)}}var Fe=e(170),_e=e(0),de=e(13).heartbeatInterval,oe=e(155).V2NIMLoginStatus,he=e(13),Ve={kSyncAction5_1:0,kSyncAction5_2:1,kSyncAction5_3:2},le={kKnown:-1,kSucceed:0,kFailed:1,kAborted:2,kCanceled:3},ie=function(Ie){O(kt,Ie);var pe=ae(kt);function kt(Ue){var Dt,tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _(this,kt),(Dt=pe.call(this)).clientProto=Ue,Dt.logger=Ue.logger,Dt.reporter=Ue.reporter,Dt.timer=null,Dt.setClientOrigin(),Dt.serverOrigin={timeStamp:null,rtt:null,baseTimeStamp:null},Dt.tolerantRTT=tr.tolerantRTT||3e3,Dt.bestRTT=tr.bestRTT||100,Dt.maxChances=tr.maxChances||10,Dt.isSettingNTP=!1,Dt.currentChance=0,Dt.syncTraceData={},Dt.syncTraceMap={},Dt.syncTraceLastItem={},Dt.uploadTraceData={},Dt.setMonitorForSync(),Dt.setMonitorForResources(),Dt}return y(kt,[{key:"hasOriginTimetick",value:function(){return!!this.serverOrigin.timeStamp}},{key:"setOriginTimetick",value:function(){var Ue=this,Dt=this.clientProto.options;if((typeof _e.get(Dt,"privateConf.isDataReportEnable")=="boolean"?Dt.privateConf.isDataReportEnable:he.privateConf.isDataReportEnable)&&he.isBrowser&&performance&&performance.now&&!(this.isSettingNTP||this.currentChance>=this.maxChances)){this.isSettingNTP=!0,this.currentChance++,clearTimeout(this.timer),this.timer=null;var tr="ReporterHook::setOriginTimetick:",dr=o();return this.logger.info("".concat(tr," getServerTime start, times ").concat(this.currentChance)),new i(function(pr){Ue.clientProto.sendCmd("getServerTime",{},function(ar,hr){if(Ue.isSettingNTP=!1,ar){var Ne;Ue.logger.warn("".concat(tr," Calculate Delay time, getServerTime error"),ar),Ue.clientProto.statusProtector.getLoginStatus()===oe.V2NIM_LOGIN_STATUS_LOGINED&&(Ue.timer=a(s(Ne=Ue.setOriginTimetick).call(Ne,Ue),de)),pr()}else{if(!hr)return Ue.logger.warn("".concat(tr," Calculate Delay time, getServerTime not correct")),void pr();var nr,sr=o()-dr;if(sr>Ue.tolerantRTT)Ue.logger.warn("".concat(tr," Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(sr)),Ue.timer=a(s(nr=Ue.setOriginTimetick).call(nr,Ue),de);else if(sr>Ue.bestRTT){var $e,er,or;Ue.serverOrigin.rtt&&sr>=Ue.serverOrigin.rtt?Ue.logger.info("".concat(tr," Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(sr)):(Ue.setServerOrigin(sr,hr),Ue.logger.info(u(er=u(or="".concat(tr," Accept within maximum tolerance range of RTT: ").concat(sr,", ntpTimestamp: ")).call(or,Ue.serverOrigin.timeStamp,", localClock: ")).call(er,Ue.serverOrigin.baseTimeStamp))),Ue.timer=a(s($e=Ue.setOriginTimetick).call($e,Ue),de)}else{var ze,rr;Ue.setServerOrigin(sr,hr),Ue.logger.info(u(ze=u(rr="".concat(tr," Accept within best RTT: ").concat(sr,", ntpTimestamp: ")).call(rr,Ue.serverOrigin.timeStamp,", localClock: ")).call(ze,Ue.serverOrigin.baseTimeStamp))}pr()}})})}}},{key:"getNTPTime",value:function(Ue){if(typeof Ue!="number"&&(Ue=this.getSafeClock()),this.serverOrigin.timeStamp){var Dt=c(Ue-this.serverOrigin.baseTimeStamp);return this.serverOrigin.timeStamp+Dt}var tr=c(Ue-this.clientOrigin.baseTimeStamp);return this.clientOrigin.timeStamp+tr}},{key:"getSafeClock",value:function(){return he.isBrowser&&performance&&performance.now?performance.now():o()}},{key:"setMonitorForSync",value:function(){var Ue=this,Dt="ReporterHook::setMonitorForSync:";this.on("reporter/syncStart",function(){Ue.logger.info("".concat(Dt," sync start")),Ue.syncTraceData={user_id:Ue.clientProto.account,trace_id:_e.get(Ue.clientProto,"socket.socket.sessionid"),action:Ve.kSyncAction5_1,sync_begin_time:Ue.getSafeClock(),sync_end_time:0,sync_duration:0,overall_duration:0,extension:[]}}),this.on("reporter/syncRecv",function(){Ue.syncTraceData.user_id&&(Ue.logger.info("".concat(Dt," sync receive packet")),Ue.syncTraceData.sync_end_time=Ue.getSafeClock(),Ue.syncTraceData.sync_duration=c(Ue.syncTraceData.sync_end_time-Ue.syncTraceData.sync_begin_time))}),this.on("reporter/syncItem",function(tr,dr){var pr;if(typeof tr=="number"&&Ue.syncTraceData.user_id){Ue.logger.info(u(pr="".concat(Dt," receive sync item: ").concat(tr,", total: ")).call(pr,dr));var ar=Ue.getSafeClock();Ue.syncTraceMap[tr]=Ue.syncTraceMap[tr]?Ue.syncTraceMap[tr]:{sync_type:tr,times:0,total:0,sync_duration:0,proc_duration:0,description:"",items:[]};var hr={total:dr,pre_item_recv_time:Ue.syncTraceLastItem.cur_item_recv_time?Ue.syncTraceLastItem.cur_item_recv_time:Ue.syncTraceData.sync_begin_time,cur_item_recv_time:ar};Ue.syncTraceMap[tr].items.push(hr),Ue.syncTraceLastItem=hr}}),this.on("reporter/syncItemComplete",function(tr){var dr;if(typeof tr=="number"&&Ue.syncTraceData.user_id){var pr=Ue.syncTraceMap[tr];if(pr){Ue.logger.info("".concat(Dt," sync item ").concat(tr," callback done"));var ar=d(dr=pr.items).call(dr,function(hr){return!hr.callback_time});ar.length!==0&&(ar[0].callback_time=Ue.getSafeClock())}}}),this.on("reporter/syncComplete",function(){var tr;Ue.syncTraceData.user_id&&(Ue.logger.info("".concat(Dt," sync complete")),m(tr=v(Ue.syncTraceMap)).call(tr,function(dr){var pr,ar=g(pr=Ue.syncTraceMap[dr].items).call(pr,function(Ne){return{total:Ne.total,pre_item_recv_time:Ue.getNTPTime(Ne.pre_item_recv_time),cur_item_recv_time:Ue.getNTPTime(Ne.cur_item_recv_time),callback_time:Ue.getNTPTime(Ne.callback_time)}}),hr=b(ar).call(ar,function(Ne,nr){return Ne.times+=1,Ne.total+=nr.total,Ne.sync_duration+=nr.cur_item_recv_time-nr.pre_item_recv_time,Ne.proc_duration+=nr.callback_time-nr.cur_item_recv_time,Ne},{times:0,total:0,sync_duration:0,proc_duration:0});Ue.syncTraceMap[dr].items=ar,T(Ue.syncTraceMap[dr],hr),Ue.syncTraceData.extension.push(Ue.syncTraceMap[dr])}),Ue.syncTraceData.sync_begin_time=Ue.getNTPTime(Ue.syncTraceData.sync_begin_time),Ue.syncTraceData.sync_end_time=Ue.getNTPTime(Ue.syncTraceData.sync_end_time),Ue.syncTraceData.overall_duration=Ue.getNTPTime()-Ue.syncTraceData.sync_begin_time,Ue.reporter.report("nim_sdk_sync",Ue.syncTraceData),Ue.syncTraceData={},Ue.syncTraceMap={})})}},{key:"setMonitorForResources",value:function(){var Ue=this,Dt="ReporterHook::setMonitorForResources:";this.on("reporter/uploadStart",function(){Ue.logger.info("".concat(Dt," upload start")),Ue.uploadTraceData={user_id:Ue.clientProto.account,trace_id:_e.get(Ue.clientProto,"socket.socket.sessionid"),action:0,duration:0,start_time:Ue.getSafeClock(),offset:0,full_size:0,transferred_size:0}}),this.on("reporter/uploadUpdate",function(){var tr,dr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue.uploadTraceData.user_id&&(Ue.logger.info("".concat(Dt," upload update"),dr),m(tr=v(dr)).call(tr,function(pr){Ue.uploadTraceData[pr]=dr[pr]}))}),this.on("reporter/uploadEnd",function(){var tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:le.kKnown;Ue.uploadTraceData.user_id&&(Ue.logger.info("".concat(Dt," upload end cause of ").concat(tr)),Ue.uploadTraceData.state=tr,Ue.uploadTraceData.start_time=Ue.getNTPTime(Ue.uploadTraceData.start_time),Ue.uploadTraceData.duration=Ue.getNTPTime(Ue.getSafeClock())-Ue.uploadTraceData.start_time,Ue.reporter.report("nim_sdk_resources",Ue.uploadTraceData),Ue.uploadTraceData={})})}},{key:"destroy",value:function(){this.reset(),this.removeAllListeners(),this.logger.info("ReporterHook::destroy: complete")}},{key:"reset",value:function(){this.logger.info("ReporterHook::reset"),this.serverOrigin={},this.setClientOrigin(),this.currentChance=0,this.timer&&clearTimeout(this.timer),this.syncTraceData={},this.syncTraceMap={},this.syncTraceLastItem={},this.uploadTraceData={}}},{key:"setClientOrigin",value:function(){this.clientOrigin={timeStamp:o(),baseTimeStamp:this.getSafeClock()}}},{key:"setServerOrigin",value:function(Ue,Dt){this.serverOrigin={timeStamp:Dt+c(Ue/2),rtt:Ue,baseTimeStamp:this.getSafeClock()}}}]),kt}(Fe);t.exports={EMSyncAction:Ve,EMSyncType:{kSyncType3_8:30008,kSyncType3_109:30109,kSyncType4_4:40004,kSyncType4_6:40006,kSyncType4_9:40009,kSyncType4_12:40012,kSyncType4_13:40013,kSyncType4_14:40014,kSyncType4_16:40016,kSyncType4_17:40017,kSyncType4_18:40018,kSyncType4_19:40019,kSyncType4_20:40020,kSyncType4_21:40021,kSyncType4_23:40023,kSyncType4_24:40024,kSyncType4_100:40100,kSyncType4_101:40101,kSyncType7_15:70015,kSyncType8_109:80109,kSyncType8_126:80126,kSyncType12_5:12005,kSyncType12_6:12006,kSyncType15_13:15013,kSyncType21_109:21109,kSyncType21_111:21111},ReporterHook:ie,EMExceptionState:le,EMResourceUploadWay:{kResourceUploadWayNOS:0,kResourceUploadWayAWSPlugin:1,kResourceUploadWayNOSPlugin:2}}},function(t,r,e){var n=e(6),o=e(15),i=e(2),a=e(7),s=e(201),u=e(17),c=e(85),d=e(86),m=e(70),v=e(32);function g(y,O){var V=d!==void 0&&m(y)||y["@@iterator"];if(!V){if(v(y)||(V=function(oe,he){var Ve;if(oe){if(typeof oe=="string")return b(oe,he);var le=o(Ve=Object.prototype.toString.call(oe)).call(Ve,8,-1);if(le==="Object"&&oe.constructor&&(le=oe.constructor.name),le==="Map"||le==="Set")return c(oe);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return b(oe,he)}}(y))||O&&y&&typeof y.length=="number"){V&&(y=V);var Ce=0,ae=function(){};return{s:ae,n:function(){return Ce>=y.length?{done:!0}:{done:!1,value:y[Ce++]}},e:function(oe){throw oe},f:ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,_e=!0,de=!1;return{s:function(){V=V.call(y)},n:function(){var oe=V.next();return _e=oe.done,oe},e:function(oe){de=!0,Fe=oe},f:function(){try{_e||V.return==null||V.return()}finally{if(de)throw Fe}}}}function b(y,O){(O==null||O>y.length)&&(O=y.length);for(var V=0,Ce=new Array(O);V<O;V++)Ce[V]=y[V];return Ce}var T=e(13),_={genUrlSep:function(y){return n(y=""+y).call(y,"?")===-1?"?imageView&":"&"},urlQuery2Object:function(y){if(Object.prototype.toString.call(y)!=="[object String]"||y==="")return{};var O=n(y).call(y,"?");if(O!==-1){var V=o(y).call(y,O+1).split("&"),Ce={};return i(V).call(V,function(ae){if(~n(ae).call(ae,"=")){var Fe=ae.split("=");Ce[Fe[0]]=decodeURIComponent(Fe[1])}else Ce[ae]=""}),Ce}},url2object:function(y){Object.prototype.toString.call(y)!=="[object String]"&&(y="");var O=n(y=y||"").call(y,"https")>=0?"https://":"http://",V=y.replace(O,"");n(V).call(V,"?")>=0&&(V=V.substring(0,n(V).call(V,"?")));var Ce=V.split("/");V=Ce[0];var ae="";if(Ce.length>0&&(ae=o(Ce).call(Ce,1).join("/")),n(y).call(y,"?")===-1)return{protocol:O,hostname:V,path:ae,query:{}};var Fe=y.substr(n(y).call(y,"?")+1).split("&"),_e={};return i(Fe).call(Fe,function(de){if(n(de).call(de,"=")>0){var oe=de.split("=");_e[oe[0]]=decodeURIComponent(oe[1])}else _e[de]=""}),{protocol:O,hostname:V,path:ae,query:_e}},object2url:function(y){var O,V=y.protocol,Ce=y.hostname,ae=y.path,Fe=y.query;V=V||"http://",Ce=Ce||"",ae&&(Ce=a(O="".concat(Ce,"/")).call(O,ae)),Fe=Fe||{};var _e,de,oe,he=[];for(var Ve in Fe){var le;Ve!=="imageView"&&he.push(a(le="".concat(Ve,"=")).call(le,encodeURIComponent(Fe[Ve])))}return he.length>0?a(_e=a(de="".concat(V)).call(de,Ce,"?imageView&")).call(_e,he.join("&")):a(oe="".concat(V)).call(oe,Ce)},genPrivateUrl:function(y,O,V){if(O&&O.length){var Ce,ae=g(O);try{for(ae.s();!(Ce=ae.n()).done;){var Fe=Ce.value;if(n(y).call(y,Fe)>=0)return Fe!==V&&(y=y.replace(Fe,V)),y;if(n(y).call(y,Fe)>=0&&Fe===V)return y}}catch(Ne){ae.e(Ne)}finally{ae.f()}}var _e,de,oe=_.url2object(y),he=oe.hostname,Ve=oe.path,le=T.downloadUrl,ie=T.downloadHostList,Ie=T.nosCdnEnable,pe=T.serverNosConfig.cdnDomain,kt=decodeURIComponent(T.serverNosConfig.objectPrefix),Ue=decodeURIComponent(Ve),Dt=n(Ue).call(Ue,kt);if(pe&&Dt>-1&&Ie)return a(_e=a(de="".concat(oe.protocol)).call(de,pe,"/")).call(_e,o(Ue).call(Ue,Dt));if(s(ie).call(ie,he)&&s(Ve).call(Ve,"/")){var tr=n(Ve).call(Ve,"/"),dr=Ve.substring(0,tr),pr=Ve.substring(tr+1);return le.replace("{bucket}",dr).replace("{object}",pr)}var ar=u(ie).call(ie,function(Ne){return typeof he=="string"&&s(he).call(he,Ne)})[0],hr=ar?he.replace(ar,"").replace(/\W/g,""):null;return hr?le.replace("{bucket}",hr).replace("{object}",Ve):y}};t.exports=_},function(t,r,e){var n=e(4);t.exports=!n(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},function(t,r,e){var n=e(91),o=TypeError;t.exports=function(i){if(n(i))throw o("Can't call method on "+i);return i}},function(t,r,e){var n=e(48),o=e(158);(t.exports=function(i,a){return o[i]||(o[i]=a!==void 0?a:{})})("versions",[]).push({version:"3.27.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,r,e){var n=e(322);t.exports=function(o){var i=+o;return i!=i||i===0?0:n(i)}},function(t,r,e){var n=e(4),o=e(20),i=e(93),a=o("species");t.exports=function(s){return i>=51||!n(function(){var u=[];return(u.constructor={})[a]=function(){return{foo:1}},u[s](Boolean).foo!==1})}},function(t,r){t.exports={}},function(t,r,e){var n=e(372).charAt,o=e(49),i=e(97),a=e(166),s=e(167),u=i.set,c=i.getterFor("String Iterator");a(String,"String",function(d){u(this,{type:"String Iterator",string:o(d),index:0})},function(){var d,m=c(this),v=m.string,g=m.index;return g>=v.length?s(void 0,!0):(d=n(v,g),m.index+=d.length,s(d,!1))})},function(t,r,e){var n=e(63),o=e(14);t.exports=n(o.process)=="process"},function(t,r,e){var n=e(14),o=e(101),i=e(16),a=e(210),s=e(214),u=e(20),c=e(401),d=e(242),m=e(48),v=e(93),g=o&&o.prototype,b=u("species"),T=!1,_=i(n.PromiseRejectionEvent),y=a("Promise",function(){var O=s(o),V=O!==String(o);if(!V&&v===66||m&&(!g.catch||!g.finally))return!0;if(!v||v<51||!/native code/.test(O)){var Ce=new o(function(Fe){Fe(1)}),ae=function(Fe){Fe(function(){},function(){})};if((Ce.constructor={})[b]=ae,!(T=Ce.then(function(){})instanceof ae))return!0}return!V&&(c||d)&&!_});t.exports={CONSTRUCTOR:y,REJECTION_EVENT:_,SUBCLASSING:T}},function(t,r,e){var n=e(25),o=e(54),i=e(570),a=e(572),s=e(578),u={},c=o.f;function d(_){var y=_.upload=(_.headers||o.o)["Content-Type"]==="multipart/form-data",O=!1;try{O=(location.protocol+"//"+location.host).toLowerCase()!==o.url2origin(_.url)}catch{}return _.cors=O,y||O||_.mode?function(V){var Ce=V.mode,ae=i,Fe=o.getGlobal();return!Fe.FormData&&Fe.document&&(Ce="iframe"),Ce==="iframe"&&(ae=V.upload?a:s),new ae(V)}(_):new i(_)}function m(_,y,O){var V=u[_];if(V){y==="onload"&&V.result&&(O=function(ae,Fe){Fe={data:Fe};var _e=ae.result.headers;return _e&&(Fe.headers=ae.req.header(_e)),Fe}(V,O)),function(ae){var Fe=u[ae];Fe&&(Fe.req.destroy(),delete u[ae])}(_);var Ce={type:y,result:O};c(Ce),Ce.stopped||V[y](Ce.result)}}function v(_,y){m(_,"onload",y)}function g(_,y){m(_,"onerror",y)}function b(_,y){var O=o.genUrlSep(_);return y=y||"",o.isObject(y)&&(y=o.object2query(y)),y&&(_+=O+y),_}function T(_,y){y=y||{};var O=o.uniqueID(),V={result:y.result,onload:y.onload||o.f,onerror:y.onerror||o.f};u[O]=V,y.onload=n(v).call(v,null,O),y.onerror=n(g).call(g,null,O),y.query&&(_=b(_,y.query));var Ce=y.method||"";return Ce&&!/get/i.test(Ce)||!y.data||(_=b(_,y.data),y.data=null),y.url=_,V.req=d(y),O}T.filter=function(_){o.isFunction(_)&&(c=_)},T.abort=function(_){var y=u[_];y&&y.req&&y.req.abort()},t.exports=T},function(t,r,e){var n=e(10),o=e(302),i=e(26),a=e(106).genPrivateUrl,s=e(0),u=s.notundef,c=s.exist,d=e(193),m=e(296),v=m.typeMap;function g(b){b.resend?(s.verifyOptions(b,"idClient","msg::Message"),this.idClient=b.idClient):this.idClient=s.guid(),this.type=v[b.type],this.resend=b.resend?1:0,u(b.subType)&&(s.isInt(+b.subType)&&+b.subType>0?this.subType=+b.subType:s.onParamError("subType只能是大于0的整数","msg::Message")),u(b.custom)&&(i(b.custom)==="object"?this.custom=n(b.custom):this.custom=""+b.custom),u(b.text)&&(this.body=""+b.text),u(b.body)&&(this.body=""+b.body),u(b.yidunEnable)&&(this.yidunEnable=b.yidunEnable?1:0),u(b.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=b.antiSpamUsingYidun?1:0),u(b.antiSpamContent)&&(i(b.antiSpamContent)==="object"?this.antiSpamContent=n(b.antiSpamContent):this.antiSpamContent=""+b.antiSpamContent),u(b.antiSpamBusinessId)&&(i(b.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=n(b.antiSpamBusinessId):this.antiSpamBusinessId=""+b.antiSpamBusinessId),u(b.yidunAntiCheating)&&(this.yidunAntiCheating=b.yidunAntiCheating+""),u(b.skipHistory)&&(this.skipHistory=b.skipHistory?1:0),u(b.highPriority)&&(this.highPriority=b.highPriority?1:0),u(b.clientAntiSpam)&&(this.clientAntiSpam=b.clientAntiSpam?1:0),u(b.env)&&(this.env=b.env),u(b.notifyTargetTags)&&(this.notifyTargetTags=b.notifyTargetTags),u(b.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=b.yidunAntiSpamExt),(u(b.loc_x)||u(b.loc_y)||u(b.loc_z))&&(this.loc_x=b.loc_x,this.loc_y=b.loc_y,this.loc_z=b.loc_z)}g.validTypes=m.validTypes,s.merge(g.prototype,m.prototype),g.getType=m.getType,g.setFlow=m.setFlow,g.reverse=function(b){var T=s.filterObj(b,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return u(T.fromAvatar)&&(T.fromAvatar=a(T.fromAvatar)),T=s.merge(T,{fromClientType:d.reverseType(b.fromClientType),time:+b.time,type:g.getType(b),text:c(b.body)?b.body:b.text||"",resend:+b.resend==1}),u(T.userUpdateTime)&&(T.userUpdateTime=+T.userUpdateTime),u(b.callbackExt)&&(T.callbackExt=b.callbackExt),u(b.subType)&&(T.subType=+b.subType),u(b.yidunAntiSpamRes)&&(T.yidunAntiSpamRes=b.yidunAntiSpamRes),u(b.loc_x)&&(T.x=o(b.loc_x),T.y=o(b.loc_y),T.z=o(b.loc_z)),u(b.toAccids)&&(T.toAccids=b.toAccids),T.status=T.status||"success",T},g.setExtra=function(b,T){m.setFlow(b,T)},t.exports=g},function(t,r,e){var n=e(216),o=e(164);t.exports=Object.keys||function(i){return n(i,o)}},function(t,r,e){var n=e(173),o=e(500),i=e(501),a=n?n.toStringTag:void 0;t.exports=function(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":a&&a in Object(s)?o(s):i(s)}},function(t,r,e){var n=e(592),o=e(186),i=e(599);t.exports=function(a,s){if(a==null)return{};var u,c,d=i(a,s);if(n){var m=n(a);for(c=0;c<m.length;c++)u=m[c],o(s).call(s,u)>=0||Object.prototype.propertyIsEnumerable.call(a,u)&&(d[u]=a[u])}return d},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(137),o=e(249);function i(a,s){for(var u=0;u<s.length;u++){var c=s[u];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),n(a,o(c.key),c)}}t.exports=function(a,s,u){return s&&i(a.prototype,s),u&&i(a,u),n(a,"prototype",{writable:!1}),a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(566)},function(t,r,e){var n=e(11),o=e(4),i=e(63),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return i(u)=="String"?s(u,""):a(u)}:a},function(t,r,e){var n=e(319),o=e(126);t.exports=function(i){var a=n(i,"string");return o(a)?a:a+""}},function(t,r,e){var n=e(33),o=e(16),i=e(21),a=e(208),s=Object;t.exports=a?function(u){return typeof u=="symbol"}:function(u){var c=n("Symbol");return o(c)&&i(c.prototype,s(u))}},function(t,r,e){var n=e(11),o=0,i=Math.random(),a=n(1 .toString);t.exports=function(s){return"Symbol("+(s===void 0?"":s)+")_"+a(++o+i,36)}},function(t,r,e){var n=e(110),o=Math.max,i=Math.min;t.exports=function(a,s){var u=n(a);return u<0?o(u+s,0):i(u,s)}},function(t,r,e){var n=e(11),o=e(4),i=e(16),a=e(65),s=e(33),u=e(214),c=function(){},d=[],m=s("Reflect","construct"),v=/^\s*(?:class|function)\b/,g=n(v.exec),b=!v.exec(c),T=function(y){if(!i(y))return!1;try{return m(c,d,y),!0}catch{return!1}},_=function(y){if(!i(y))return!1;switch(a(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return b||!!g(v,u(y))}catch{return!0}};_.sham=!0,t.exports=!m||o(function(){var y;return T(T.call)||!T(Object)||!T(function(){y=!0})||y})?_:T},function(t,r,e){var n=e(109),o=e(127),i=n("keys");t.exports=function(a){return i[a]||(i[a]=o(a))}},function(t,r,e){var n=e(216),o=e(164).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(i){return n(i,o)}},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,e){var n=e(20);r.f=n},function(t,r,e){var n=e(29),o=e(16),i=e(42),a=e(130),s=e(228),u=a("IE_PROTO"),c=Object,d=c.prototype;t.exports=s?c.getPrototypeOf:function(m){var v=i(m);if(n(v,u))return v[u];var g=v.constructor;return o(g)&&v instanceof g?g.prototype:v instanceof c?d:null}},function(t,r,e){var n=e(11),o=e(36),i=e(356);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,s=!1,u={};try{(a=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(u,[]),s=u instanceof Array}catch{}return function(c,d){return o(c),i(d),s?a(c,d):c.__proto__=d,c}}():void 0)},function(t,r,e){var n=e(65),o=e(157),i=e(91),a=e(99),s=e(20)("iterator");t.exports=function(u){if(!i(u))return o(u,s)||o(u,"@@iterator")||a[n(u)]}},function(t,r,e){t.exports=e(408)},function(t,r,e){t.exports=e(433)},function(t,r,e){t.exports=e(450)},function(t,r,e){var n=e(489),o=e(490),i=e(491),a=e(492),s=e(493);function u(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var v=c[d];this.set(v[0],v[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,r,e){var n=e(199);t.exports=function(o,i){for(var a=o.length;a--;)if(n(o[a][0],i))return a;return-1}},function(t,r,e){var n=e(83)(Object,"create");t.exports=n},function(t,r,e){var n=e(513);t.exports=function(o,i){var a=o.__data__;return n(i)?a[typeof i=="string"?"string":"hash"]:a.map}},function(t,r,e){var n=e(260),o=e(261);t.exports=function(i,a,s,u){var c=!s;s||(s={});for(var d=-1,m=a.length;++d<m;){var v=a[d],g=u?u(s[v],i[v],v,s,i):void 0;g===void 0&&(g=i[v]),c?o(s,v,g):n(s,v,g)}return s}},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r){t.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(t,r,e){var n,o=e(18),i=e(2),a=e(8),s=e(3),u=e(7),c=e(6),d=e(25),m=e(10),v=e(106).urlQuery2Object,g=e(0),b=e(40),T=e(739),_=e(740),y=e(741),O=e(742),V=e(743),Ce=e(744);function ae(oe){this.mixin(oe)}ae.prototype=o((function(){}).prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),ae.prototype.setProtocol=function(oe){this.protocol=oe},ae.prototype.mixin=function(oe){var he,Ve,le=this;this.configMap=this.configMap||{},i(he=["idMap","cmdConfig","packetConfig"]).call(he,function(ie){le.configMap[ie]=g.merge({},le.configMap[ie],oe.configMap&&oe.configMap[ie])}),i(Ve=["serializeMap","unserializeMap"]).call(Ve,function(ie){le[ie]=g.merge({},le[ie],oe[ie])})},ae.prototype.createCmd=(n=1,function(oe,he){var Ve,le=this,ie=this.configMap.cmdConfig[oe],Ie=this.configMap.packetConfig[ie.sid+"_"+ie.cid],pe=oe==="heartbeat"?0:n++;return pe>32767&&(pe=1,n=2),oe={SID:ie.sid,CID:ie.cid,SER:pe,isAwaitable:typeof ie.isAwaitable=="boolean"?ie.isAwaitable:!(!Ie||!Ie.response)},ie.params&&(oe.Q=[],i(Ve=ie.params).call(Ve,function(kt){var Ue=kt.type,Dt=kt.name,tr=kt.entity,dr=he[Dt];if(!g.undef(dr)){switch(Ue){case"PropertyArray":Ue="ArrayMable",dr=a(dr).call(dr,function(pr){return{t:"Property",v:le.serialize(pr,tr)}});break;case"Property":dr=le.serialize(dr,Dt);break;case"bool":dr=dr?"true":"false"}oe.Q.push({t:Ue,v:dr})}})),oe}),ae.prototype.parseResponse=function(oe){var he=this;return new s(function(Ve){var le=JSON.parse(oe),ie={raw:le,rawStr:oe,error:b.genError(le.code)},Ie=he.configMap.packetConfig[le.sid+"_"+le.cid];if(!Ie)return ie.notFound={sid:le.sid,cid:le.cid},void Ve(ie);var pe=le.r,kt=Ie.service==="notify"&&!Ie.cmd;if(ie.isNotify=kt,kt){var Ue=le.r[1].headerPacket;if(Ie=he.configMap.packetConfig[Ue.sid+"_"+Ue.cid],pe=le.r[1].body,!Ie)return ie.notFound={sid:Ue.sid,cid:Ue.cid},void Ve(ie)}if(ie.service=Ie.service,ie.cmd=Ie.cmd,ie.error){var Dt,tr,dr=u(Dt="".concat(le.sid,"_")).call(Dt,le.cid);if(kt&&(dr=u(tr="".concat(Ue.sid,"_")).call(tr,Ue.cid)),ie.error.cmd=ie.cmd,ie.error.callFunc="protocol::parseResponse: ".concat(dr),ie.error.code===416){var pr=pe[0];pr&&(ie.frequencyControlDuration=1e3*pr)}}var ar,hr=!1;ie.error&&Ie.trivialErrorCodes&&(hr=c(ar=Ie.trivialErrorCodes).call(ar,ie.error.code)!==-1);var Ne=[];if((!ie.error||hr)&&Ie.response){var nr;ie.content={};var sr=function($e,er,or,ze){if($e&&ze==="msg"||ze==="sysMsg"){var rr=or.content[ze];g.isObject(rr)&&!rr.idServer&&(rr.idServer=""+er.r[0])}};i(nr=Ie.response).call(nr,function($e,er){var or,ze=pe[er];if(!g.undef(ze)){var rr=$e.type,Et=$e.name,Lt=$e.entity||Et;switch(rr){case"Property":Ne.push(he.unserialize(ze,Lt).then(d(or=function(cr,mr,vr,Tr,Ir){vr.content[Tr]=Ir,sr(cr,mr,vr,Tr)}).call(or,this,kt,le,ie,Et)));break;case"PropertyArray":ie.content[Et]=[],i(ze).call(ze,function(cr,mr){var vr;Ne.push(he.unserialize(cr,Lt).then(d(vr=function(Tr,Ir,kr){Tr.content[Ir][mr]=kr}).call(vr,this,ie,Et)))});break;case"KVArray":ie.content[Et]=ze,sr(kt,le,ie,Et);break;case"long":case"Long":case"byte":case"Byte":case"Number":ie.content[Et]=+ze;break;default:ie.content[Et]=ze,sr(kt,le,ie,Et)}}})}s.all(Ne).then(function(){Ve(ie)})})},ae.prototype.serialize=function(oe,he){var Ve=this.serializeMap[he],le={};for(var ie in Ve)oe.hasOwnProperty(ie)&&(le[Ve[ie]]=oe[ie]);return le},ae.prototype.matchNosSafeUrl=function(oe){if(!g.isString(oe)||!~c(oe).call(oe,"_im_url=1"))return!1;var he=v(oe);return!(!he||!he._im_url||he._im_url!=1)},ae.prototype.getOneNosOriginUrl=function(oe,he,Ve){var le=this;return new s(function(ie){le.protocol.getNosOriginUrlReqNum++,le.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:oe}},function(Ie,pe,kt){le.protocol.getNosOriginUrlReqNum--,Ie?le.protocol.logger.warn("error: get nos originUrl failed",Ie):(he["_"+Ve+"_safe"]=he[Ve],he[Ve]=kt.nosFileUrlTag&&kt.nosFileUrlTag.originUrl),ie()})})},ae.prototype.checkObjSafeUrl=function(oe,he,Ve){var le=this;for(var ie in oe)if(oe.hasOwnProperty(ie)){var Ie=oe[ie];if(g.isString(Ie)){if(this.matchNosSafeUrl(Ie)){var pe=this.getOneNosOriginUrl(Ie,oe,ie);he.push(pe),Ve.push(pe)}}else g.isObject(Ie)?this.checkObjSafeUrl(Ie,he,Ve):g.isArray(Ie)&&i(Ie).call(Ie,function(kt){g.isObject(kt)&&le.checkObjSafeUrl(kt,he,Ve)})}};var Fe=["url","avatar","fromAvatar","chatroomAvatar"];ae.prototype.unserialize=function(oe,he){var Ve=this;return new s(function(le){var ie=Ve.unserializeMap[he],Ie={},pe=[];if(oe)for(var kt in ie){var Ue,Dt=[];if(oe.hasOwnProperty(kt)&&(Ie[ie[kt]]=oe[kt],Ve.protocol.hasLogin&&!Ve.protocol.keepNosSafeUrl))if(ie[kt]==="attach"&&oe[kt]&&c(oe[kt])&&~c(Ue=oe[kt]).call(Ue,"_im_url=1"))try{var tr,dr=JSON.parse(oe[kt]);dr.isS3||Ve.checkObjSafeUrl(dr,Dt,pe),s.all(Dt).then(d(tr=function(pr,ar){pr.attach=m(ar)}).call(tr,Ve,Ie,dr))}catch(pr){Ve.logger.warn("unserialize",pr&&pr.message)}else~c(Fe).call(Fe,ie[kt])&&oe[kt]&&Ve.matchNosSafeUrl(oe[kt])&&pe.push(Ve.getOneNosOriginUrl(oe[kt],Ie,ie[kt]))}s.all(pe).then(function(){le(Ie)})})},ae.prototype.syncUnserialize=function(oe,he){var Ve=this.unserializeMap[he],le={};if(oe)for(var ie in Ve)oe.hasOwnProperty(ie)&&(le[Ve[ie]]=oe[ie]);return le};var _e=new ae({configMap:T,serializeMap:_,unserializeMap:y}),de=new ae({configMap:O,serializeMap:V,unserializeMap:Ce});t.exports={IM:_e,Chatroom:de}},function(t,r,e){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);r.f=i?function(a){var s=o(this,a);return!!s&&s.enumerable}:n},function(t,r,e){t.exports=e(618)},function(t,r,e){var n=e(8),o=e(9),i=e(0),a=i.notundef,s=i.fillPropertyWithDefault,u={0:"normal",1:"owner",2:"manager"};function c(d){i.verifyOptions(d,"teamId","team::TeamMember"),i.verifyParamAtLeastPresentOne(d,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=d.teamId,a(d.account)&&(this.account=d.account),a(d.nickInTeam)&&(this.nickInTeam=d.nickInTeam),a(d.muteNotiType)?this.bits=d.muteNotiType:a(d.muteTeam)&&(this.bits=0,d.muteTeam&&(this.bits+=1)),a(d.mute)&&(this.mute=d.mute?1:0),a(d.custom)&&(this.custom=""+d.custom)}c.reverse=function(d){var m=i.copy(d);if(a(m.teamId)&&(m.teamId=""+m.teamId),a(m.type)&&(m.type=u[m.type]),a(m.active)&&(m.active=+m.active==1),a(m.valid)&&(m.valid=+m.valid==1),a(m.mute)&&(m.mute=+m.mute==1),a(m.joinTime)&&(m.joinTime=+m.joinTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),a(m.bits)){var v=m.bits;delete m.bits,m.muteTeam=!!(1&v),m.muteNotiType=v}return a(m.teamId)&&a(m.account)&&(m.id=c.genId(m.teamId,m.account)),m},c.reverseMembers=function(d){return n(d).call(d,function(m){return o(c).call(c,m)})},c.fillProperties=function(d){var m=s(d,"mute",!1),v=s(d,"custom","");return m||v},c.genId=function(d,m){return d+"-"+m},c.accounts2ids=function(d,m){return n(m).call(m,function(v){return c.genId(d,v)})},c.assembleMembers=function(d,m){return i.isArray(m)||(m=[m]),n(m).call(m,function(v){return c.assembleMember(d,v)})},c.assembleMember=function(d,m){return{id:c.genId(d.teamId,m),account:m,teamId:d.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:d.memberUpdateTime,updateTime:d.memberUpdateTime,active:!0,valid:!0,invitorAccid:""}},c.assembleOwner=function(d){var m=c.assembleMember(d,d.owner);return m.type="owner",m},t.exports=c},function(t,r,e){var n,o=e(26),i=e(6),a=e(10),s=e(7),u=e(5),c=e(15),d=e(9),m=e(17),v=e(8),g=e(2),b=e(0),T=b.undef,_=b.notundef,y=e(147).IM,O=e(192),V=e(150),Ce={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},ae={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},Fe={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},_e=["team","superTeam","friend","msg"],de={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function oe(he){var Ve,le;b.verifyOptions(he,"type to","sysmsg::SystemMessage"),b.verifyParamValid("type",he.type,oe.validTypes,"sysmsg::SystemMessage"),i(Ve=he.type).call(Ve,"custom")!==-1&&(b.verifyOptions(he,"content","sysmsg::SystemMessage"),this.attach=he.content,_(he.apnsText)&&(this.apnsText=""+he.apnsText),_(he.pushPayload)&&(o(he.pushPayload)==="object"?this.pushPayload=a(he.pushPayload):this.pushPayload=""+he.pushPayload),_(he.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=he.sendToOnlineUsersOnly?0:1),_(he.cc)&&(this.cc=he.cc?1:0),_(he.isPushable)&&(this.isPushable=he.isPushable?1:0),_(he.isUnreadable)&&(this.isUnreadable=he.isUnreadable?1:0),_(he.needPushNick)&&(this.needPushNick=he.needPushNick?1:0)),i(le=he.type).call(le,"deleteMsg")===0&&(he.apnsText&&(this.apnsText=he.apnsText),he.pushPayload&&(this.pushPayload=he.pushPayload),he.attach&&(this.attach=he.attach)),this.time=he.time||+new Date,this.type=Ce[he.type],this.to=he.to,_(he.from)&&(this.from=he.from),_(he.ps)&&(this.ps=he.ps),_(he.deletedIdClient)&&(this.deletedIdClient=he.deletedIdClient),_(he.deletedIdServer)&&(this.deletedIdServer=he.deletedIdServer),_(he.opeAccount)&&(this.opeAccount=he.opeAccount),_(he.yidunEnable)&&(this.yidunEnable=he.yidunEnable?1:0),_(he.antiSpamContent)&&(o(he.antiSpamContent)==="object"?this.antiSpamContent=a(he.antiSpamContent):this.antiSpamContent=""+he.antiSpamContent),_(he.antiSpamBusinessId)&&(o(he.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=a(he.antiSpamBusinessId):this.antiSpamBusinessId=""+he.antiSpamBusinessId),_(he.env)&&(this.env=he.env),this.idClient=he.idClient||b.guid()}oe.validTypes=s(n=u(Ce)).call(n,u(de)),oe.validCategories=["team","friend"],oe.isCustom=function(he){return he.type==="custom"},oe.reverse=function(he){var Ve,le,ie={time:+he.time,to:he.to,type:ae[he.type]};if(_(he.from)&&(ie.from=he.from),_(he.idClient)&&(ie.idClient=he.idClient),_(he.idServer)&&(ie.idServer=""+he.idServer),_(he.deletedIdClient)&&(ie.deletedIdClient=he.deletedIdClient),_(he.deletedIdServer)&&(ie.deletedIdServer=""+he.deletedIdServer),_(he.deletedMsgTime)&&(ie.deletedMsgTime=+he.deletedMsgTime),_(he.deletedMsgFromNick)&&(ie.deletedMsgFromNick=""+he.deletedMsgFromNick),_(he.opeAccount)&&(ie.opeAccount=he.opeAccount),_(he.ps)&&(ie.ps=he.ps),_(he.callbackExt)&&(ie.callbackExt=he.callbackExt),he.attach=he.attach?""+he.attach:"",ie.type==="customP2p"||ie.type==="customTeam"||ie.type==="customSuperTeam")ie.content=he.attach,_(he.apnsText)&&(ie.apnsText=he.apnsText),_(he.pushPayload)&&(ie.pushPayload=he.pushPayload),b.merge(ie,{sendToOnlineUsersOnly:T(he.sendToOnlineUsersOnly)||+he.sendToOnlineUsersOnly==0,cc:T(he.cc)||+he.cc==1,isPushable:T(he.isPushable)||+he.isPushable==1,isUnreadable:T(he.isUnreadable)||+he.isUnreadable==1,needPushNick:_(he.needPushNick)&&+he.needPushNick==1}),ie.scene=c(le=ie.type).call(le,6).toLowerCase(),ie.type="custom";else if(i(Ve=ie.type).call(Ve,"deleteMsg")===0){he.apnsText&&(ie.apnsText=he.apnsText),he.pushPayload&&(ie.pushPayload=he.pushPayload),he.attach&&(ie.attach=he.attach);var Ie=ie.type.toLowerCase();i(Ie).call(Ie,"p2p")>-1?ie.scene="p2p":i(Ie).call(Ie,"superteam")>-1?ie.scene="superTeam":i(Ie).call(Ie,"team")>-1&&(ie.scene="team"),ie.type="deleteMsg"}else{if(he.attach){ie.attach={};var pe=JSON.parse(he.attach);_(pe.vt)?(ie.type=Fe[pe.vt],pe.serverex&&pe.serverex[0]===1&&(ie.serverex=pe.serverex[1]),delete ie.attach):(_(pe.tinfo)&&(ie.attach.team=d(O).call(O,y.syncUnserialize(pe.tinfo,"team"))),_(pe.tlist)&&(ie.attach.member=d(V).call(V,y.syncUnserialize(pe.tlist,"teamMember"))),_(pe.attach)&&(ie.attach.custom=pe.attach))}ie.category=de[ie.type],ie.read=!1,ie.state="init"}return _(he.cc)&&(ie.cc=+he.cc==1),ie.status=he.status||"success",_(m(he))&&(ie.filter=m(he)),ie},oe.reverseSysMsgs=function(he,Ve){var le=(Ve=Ve||{}).mapper,ie=b.isFunction(le);return v(he).call(he,function(Ie){return Ie=d(oe).call(oe,Ie),ie&&(Ie=le(Ie)),Ie})},oe.completeUnread=function(he){var Ve,le;return he=he||{},g(_e).call(_e,function(ie){delete he[ie]}),g(Ve=u(de)).call(Ve,function(ie){he[ie]=he[ie]||0,he[ie]<0&&(he[ie]=0),he[le=de[ie]]=he[le]||0,he[le]=he[le]+he[ie]}),he.total=0,g(_e).call(_e,function(ie){he.total+=he[ie]}),he},t.exports=oe},function(t,r,e){var n=e(120),o=["unreadMsgs"],i=e(0);function a(){}a.parse=function(s){var u=s.split("|");return{scene:u[0],to:u[1]}},a.genSessionByMsg=function(s){return{id:s.sessionId,scene:s.scene,to:s.target,updateTime:s.time,lastMsg:s}},a.appendLastMsg=function(s){var u=s.lastMsg;s["last"+i.capFirstLetter(u.type)+"Msg"]=u,s["last"+i.capFirstLetter(u.flow)+"Msg"]=u},a.genSessionByMsgs=function(s,u){var c=s.getLastNotIgnoredMsg(u);return c?a.genSessionByMsg(c):null},a.trim=function(s){var u=s=i.simpleClone(s);return u.unreadMsgs,n(u,o)},a.isComplete=function(s){return s.id&&s.scene&&s.to},t.exports=a},function(t,r,e){t.exports=e(330)},function(t,r,e){var n=e(487);t.exports=function(o){return n(o,5)}},function(t,r,e){var n=e(18),o=e(170),i={V2NIM_LOGIN_STATUS_LOGOUT:0,V2NIM_LOGIN_STATUS_LOGINED:1,V2NIM_LOGIN_STATUS_LOGINING:2},a={V2NIM_CONNECT_STATUS_DISCONNECTED:0,V2NIM_CONNECT_STATUS_CONNECTED:1,V2NIM_CONNECT_STATUS_CONNECTING:2,V2NIM_CONNECT_STATUS_WAITING:3};function s(u){this.loginStatus=i.V2NIM_LOGIN_STATUS_LOGOUT,this.connectStatus=a.V2NIM_CONNECT_STATUS_DISCONNECTED,this.logger=u.logger,this.setMonitor()}s.prototype=n(new o),s.prototype.setMonitor=function(){var u=this;this.on("auth/loginLifeCycleAddressing",function(){u.logger.log("auth::life cycle addressing"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGINING),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnect",function(){u.logger.log("auth::life cycle connecting"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGINING),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnectSucc",function(){u.logger.log("auth::life cycle connect success"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGINING),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTED)}),this.on("auth/loginLifeCycleConnectFail",function(c){u.logger.log("auth::life cycle connect fail"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_DISCONNECTED,c)}),this.on("auth/loginLifeCycleDisconnected",function(c){u.logger.log("auth::life cycle disconnected:",c&&c.message),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_DISCONNECTED,c)}),this.on("auth/loginLifeCycleLoginSucc",function(){u.logger.log("auth::life cycle login success, verify authentication success"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGINED)}),this.on("auth/loginLifeCycleLoginFail",function(c){u.logger.log("auth::life cycle login fail due to verify authentication failed:",c),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT,c)}),this.on("auth/loginLifeCycleLogout",function(){u.logger.log("auth::life cycle logout"),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleKicked",function(c){u.logger.log("auth::life cycle kicked",c),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleWaiting",function(){u.logger.log("auth::life cycle waiting to reconnect"),u.getConnectStatus(),u.setLoginStatus(i.V2NIM_LOGIN_STATUS_LOGOUT),u.setConnectStatus(a.V2NIM_CONNECT_STATUS_WAITING)})},s.prototype.getConnectStatus=function(){return this.connectStatus},s.prototype.getLoginStatus=function(){return this.loginStatus},s.prototype.setLoginStatus=function(u,c){if(u!==this.loginStatus){var d=this.loginStatus;this.loginStatus=u,this.emit("loginStatus",u),this.delegateLoginEvent(d,u,c)}},s.prototype.delegateLoginEvent=function(u,c,d){u===i.V2NIM_LOGIN_STATUS_LOGINING&&c===i.V2NIM_LOGIN_STATUS_LOGOUT&&this.emit("loginFailed",d)},s.prototype.setConnectStatus=function(u,c){if(u!==this.connectStatus){var d=this.connectStatus;this.connectStatus=u,this.emit("connectStatus",u),this.delegateConnectEvent(d,u,c)}},s.prototype.delegateConnectEvent=function(u,c,d){u===a.V2NIM_CONNECT_STATUS_CONNECTED&&c===a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("disconnected",d),u===a.V2NIM_CONNECT_STATUS_CONNECTING&&c===a.V2NIM_CONNECT_STATUS_CONNECTED&&this.emit("connectSuccess"),u===a.V2NIM_CONNECT_STATUS_CONNECTING&&c===a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("connectFailed",d),u!==a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.connectStatus!==a.V2NIM_CONNECT_STATUS_WAITING||c!==a.V2NIM_CONNECT_STATUS_CONNECTING||this.emit("connecting")},s.prototype.destroy=function(){this.removeAllListeners()},t.exports={V2NIMLoginStatus:i,V2NIMConnectStatus:a,StatusProtector:s}},function(t,r,e){var n=e(63),o=e(11);t.exports=function(i){if(n(i)==="Function")return o(i)}},function(t,r,e){var n=e(31),o=e(91);t.exports=function(i,a){var s=i[a];return o(s)?void 0:n(s)}},function(t,r,e){var n=e(14),o=e(321),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,r,e){var n=e(14),o=e(28),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(s){return a?i.createElement(s):{}}},function(t,r,e){var n=e(43),o=e(128),i=e(45),a=function(s){return function(u,c,d){var m,v=n(u),g=i(v),b=o(d,g);if(s&&c!=c){for(;g>b;)if((m=v[b++])!=m)return!0}else for(;g>b;b++)if((s||b in v)&&v[b]===c)return s||b||0;return!s&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,r,e){var n=e(327);t.exports=function(o,i){return new(n(o))(i===0?0:i)}},function(t,r,e){var n={};n[e(20)("toStringTag")]="z",t.exports=String(n)==="[object z]"},function(t,r,e){var n=e(27),o=e(211),i=e(38),a=e(36),s=e(43),u=e(118);r.f=n&&!o?Object.defineProperties:function(c,d){a(c);for(var m,v=s(d),g=u(d),b=g.length,T=0;b>T;)i.f(c,m=g[T++],v[m]);return c}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r,e){var n=e(63),o=e(43),i=e(131).f,a=e(220),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(u){return s&&n(u)=="Window"?function(c){try{return i(c)}catch{return a(s)}}(u):i(o(u))}},function(t,r,e){var n=e(1),o=e(19),i=e(48),a=e(226),s=e(16),u=e(355),c=e(134),d=e(135),m=e(81),v=e(53),g=e(66),b=e(20),T=e(99),_=e(227),y=a.PROPER,O=a.CONFIGURABLE,V=_.IteratorPrototype,Ce=_.BUGGY_SAFARI_ITERATORS,ae=b("iterator"),Fe=function(){return this};t.exports=function(_e,de,oe,he,Ve,le,ie){u(oe,de,he);var Ie,pe,kt,Ue=function(Ne){if(Ne===Ve&&ar)return ar;if(!Ce&&Ne in dr)return dr[Ne];switch(Ne){case"keys":case"values":case"entries":return function(){return new oe(this,Ne)}}return function(){return new oe(this)}},Dt=de+" Iterator",tr=!1,dr=_e.prototype,pr=dr[ae]||dr["@@iterator"]||Ve&&dr[Ve],ar=!Ce&&pr||Ue(Ve),hr=de=="Array"&&dr.entries||pr;if(hr&&(Ie=c(hr.call(new _e)))!==Object.prototype&&Ie.next&&(i||c(Ie)===V||(d?d(Ie,V):s(Ie[ae])||g(Ie,ae,Fe)),m(Ie,Dt,!0,!0),i&&(T[Dt]=Fe)),y&&Ve=="values"&&pr&&pr.name!=="values"&&(!i&&O?v(dr,"name","values"):(tr=!0,ar=function(){return o(pr,this)})),Ve)if(pe={values:Ue("values"),keys:le?ar:Ue("keys"),entries:Ue("entries")},ie)for(kt in pe)(Ce||tr||!(kt in dr))&&g(dr,kt,pe[kt]);else n({target:de,proto:!0,forced:Ce||tr},pe);return i&&!ie||dr[ae]===ar||g(dr,ae,ar,{name:Ve}),T[de]=ar,pe}},function(t,r){t.exports=function(e,n){return{value:e,done:n}}},function(t,r,e){var n=e(21),o=TypeError;t.exports=function(i,a){if(n(a,i))return i;throw o("Incorrect invocation")}},function(t,r,e){var n=e(129),o=e(78),i=TypeError;t.exports=function(a){if(n(a))return a;throw i(o(a)+" is not a constructor")}},function(t,r,e){var n=Object.prototype.hasOwnProperty,o="~";function i(){}function a(d,m,v){this.fn=d,this.context=m,this.once=v||!1}function s(d,m,v,g,b){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new a(v,g||d,b),_=o?o+m:m;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],T]:d._events[_].push(T):(d._events[_]=T,d._eventsCount++),d}function u(d,m){--d._eventsCount==0?d._events=new i:delete d._events[m]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(o=!1)),c.prototype.eventNames=function(){var d,m,v=[];if(this._eventsCount===0)return v;for(m in d=this._events)n.call(d,m)&&v.push(o?m.slice(1):m);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(d)):v},c.prototype.listeners=function(d){var m=o?o+d:d,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var g=0,b=v.length,T=new Array(b);g<b;g++)T[g]=v[g].fn;return T},c.prototype.listenerCount=function(d){var m=o?o+d:d,v=this._events[m];return v?v.fn?1:v.length:0},c.prototype.emit=function(d,m,v,g,b,T){var _=o?o+d:d;if(!this._events[_])return!1;var y,O,V=this._events[_],Ce=arguments.length;if(V.fn){switch(V.once&&this.removeListener(d,V.fn,void 0,!0),Ce){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,m),!0;case 3:return V.fn.call(V.context,m,v),!0;case 4:return V.fn.call(V.context,m,v,g),!0;case 5:return V.fn.call(V.context,m,v,g,b),!0;case 6:return V.fn.call(V.context,m,v,g,b,T),!0}for(O=1,y=new Array(Ce-1);O<Ce;O++)y[O-1]=arguments[O];V.fn.apply(V.context,y)}else{var ae,Fe=V.length;for(O=0;O<Fe;O++)switch(V[O].once&&this.removeListener(d,V[O].fn,void 0,!0),Ce){case 1:V[O].fn.call(V[O].context);break;case 2:V[O].fn.call(V[O].context,m);break;case 3:V[O].fn.call(V[O].context,m,v);break;case 4:V[O].fn.call(V[O].context,m,v,g);break;default:if(!y)for(ae=1,y=new Array(Ce-1);ae<Ce;ae++)y[ae-1]=arguments[ae];V[O].fn.apply(V[O].context,y)}}return!0},c.prototype.on=function(d,m,v){return s(this,d,m,v,!1)},c.prototype.once=function(d,m,v){return s(this,d,m,v,!0)},c.prototype.removeListener=function(d,m,v,g){var b=o?o+d:d;if(!this._events[b])return this;if(!m)return u(this,b),this;var T=this._events[b];if(T.fn)T.fn!==m||g&&!T.once||v&&T.context!==v||u(this,b);else{for(var _=0,y=[],O=T.length;_<O;_++)(T[_].fn!==m||g&&!T[_].once||v&&T[_].context!==v)&&y.push(T[_]);y.length?this._events[b]=y.length===1?y[0]:y:u(this,b)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=o?o+d:d,this._events[m]&&u(this,m)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,r,e){t.exports=e(424)},function(t,r,e){var n=e(83)(e(50),"Map");t.exports=n},function(t,r,e){var n=e(50).Symbol;t.exports=n},function(t,r,e){var n=e(262),o=e(526),i=e(200);t.exports=function(a){return i(a)?n(a):o(a)}},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){t.exports=function(e){return function(n){return e(n)}}},function(t,r,e){(function(n){var o=e(257),i=r&&!r.nodeType&&r,a=i&&typeof n=="object"&&n&&!n.nodeType&&n,s=a&&a.exports===i&&o.process,u=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();n.exports=u}).call(this,e(145)(t))},function(t,r){var e=Object.prototype;t.exports=function(n){var o=n&&n.constructor;return n===(typeof o=="function"&&o.prototype||e)}},function(t,r,e){var n=e(262),o=e(529),i=e(200);t.exports=function(a){return i(a)?n(a,!0):o(a)}},function(t,r,e){var n=e(534),o=e(266),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),n(a(u),function(c){return i.call(u,c)}))}:o;t.exports=s},function(t,r,e){var n=e(538),o=e(172),i=e(539),a=e(271),s=e(540),u=e(119),c=e(258),d=c(n),m=c(o),v=c(i),g=c(a),b=c(s),T=u;(n&&T(new n(new ArrayBuffer(1)))!="[object DataView]"||o&&T(new o)!="[object Map]"||i&&T(i.resolve())!="[object Promise]"||a&&T(new a)!="[object Set]"||s&&T(new s)!="[object WeakMap]")&&(T=function(_){var y=u(_),O=y=="[object Object]"?_.constructor:void 0,V=O?c(O):"";if(V)switch(V){case d:return"[object DataView]";case m:return"[object Map]";case v:return"[object Promise]";case g:return"[object Set]";case b:return"[object WeakMap]"}return y}),t.exports=T},function(t,r,e){var n=e(543);t.exports=function(o){var i=new o.constructor(o.byteLength);return new n(i).set(new n(o)),i}},function(t,r,e){var n=e(11),o=e(108),i=e(49),a=e(146),s=n("".replace),u="["+a+"]",c=RegExp("^"+u+u+"*"),d=RegExp(u+u+"*$"),m=function(v){return function(g){var b=i(o(g));return 1&v&&(b=s(b,c,"")),2&v&&(b=s(b,d,"")),b}};t.exports={start:m(1),end:m(2),trim:m(3)}},function(t,r,e){var n=e(116),o=e(579);n.json=o,t.exports=n},function(t,r,e){var n=e(18),o=e(23),i=e(6),a=e(2),s=e(54),u=s.f,c=e(571);function d(v){v.onload&&this.once("load",v.onload),v.onerror&&this.once("error",v.onerror),v.onbeforesend&&this.once("beforesend",v.onbeforesend),v.onaftersend&&this.once("aftersend",v.onaftersend);var g=(v=this.options=s.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},v)).headers;s.notexist(g["Content-Type"])&&(g["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var m=d.prototype=n(c.prototype);m.send=function(){var v=this,g=v.options;o(function(){try{try{v.emit("beforesend",g)}catch{}v.doSend()}catch(b){v.onError("serverError","请求失败:"+b.message)}},0)},m.doSend=u,m.afterSend=function(){var v=this;o(function(){v.emit("aftersend",v.options)},0)},m.onLoad=function(v){var g,b=this.options,T=v.status,_=v.result;if(typeof T!="number"||T!==0)if(i(g=""+T).call(g,"2")===0){if(b.type==="json")try{_=JSON.parse(_)}catch{return void this.onError("parseError",_)}this.emit("load",_)}else this.onError("serverError","服务器返回异常状态",{status:T,result:_,date:v.date});else this.onError("netError","网络错误",{status:408})},m.onError=function(v,g,b){var T=s.isObject(b)?b:{};T.code=v||"error",T.message=g||"发生错误",this.emit("error",T)},m.onTimeout=function(){this.onError("timeout","请求超时")},m.abort=function(){this.onError("abort","客户端中止")},m.header=function(v){var g=this;if(!s.isArray(v))return g.getResponseHeader(v||"");var b={};return a(v).call(v,function(T){b[T]=g.header(T)}),b},m.getResponseHeader=u,m.destroy=u,t.exports=d},function(t,r,e){t.exports=e(596)},function(t,r,e){t.exports=e(609)},function(t,r,e){var n=e(189),o=e(149);function i(a,s){var u;return t.exports=i=n?o(u=n).call(u):function(c,d){return c.__proto__=d,c},t.exports.__esModule=!0,t.exports.default=t.exports,i(a,s)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(612)},function(t,r,e){var n=e(189),o=e(149),i=e(282);function a(s){var u;return t.exports=a=n?o(u=i).call(u):function(c){return c.__proto__||i(c)},t.exports.__esModule=!0,t.exports.default=t.exports,a(s)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){var e={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26,getGrayscaleConfig:27,getMixStorePolicy:28,getMixStoreToken:29,getBackSourceToken:30,uploadDetect:32},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15,signalingCallEx:16,signalingJoinAndAccept:17}},n={heartbeat:{sid:e.link.id,cid:e.link.heartbeat},negotiateTransport:{sid:e.link.id,cid:e.link.negotiateTransport,params:[{type:"int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:e.link.id,cid:e.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getGrayscaleConfig:{sid:e.misc.id,cid:e.misc.getGrayscaleConfig,params:[{type:"Property",name:"providers"}]},getMixStorePolicy:{sid:e.misc.id,cid:e.misc.getMixStorePolicy,params:[{type:"LongArray",name:"providers"}]},getMixStoreToken:{sid:e.misc.id,cid:e.misc.getMixStoreToken,params:[{type:"Property",name:"mixTokenReq"}]},getBackSourceToken:{sid:e.misc.id,cid:e.misc.getBackSourceToken,params:[{type:"Property",name:"mixAuthTokenReq"}]},uploadDetect:{sid:e.misc.id,cid:e.misc.uploadDetect,isAwaitable:!1,params:[{type:"Property",name:"notifyDetectTag"}]},getSimpleNosToken:{sid:e.misc.id,cid:e.misc.getSimpleNosToken,params:[{type:"int",name:"num"}]},getNosToken:{sid:e.misc.id,cid:e.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:e.misc.id,cid:e.misc.uploadSdkLogUrl,params:[{type:"string",name:"url"}]},audioToText:{sid:e.misc.id,cid:e.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:e.misc.id,cid:e.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:e.misc.id,cid:e.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:e.misc.id,cid:e.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:e.misc.id,cid:e.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:e.misc.id,cid:e.misc.getServerTime,params:[]},getNosAccessToken:{sid:e.misc.id,cid:e.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:e.misc.id,cid:e.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:e.misc.id,cid:e.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:e.misc.id,cid:e.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:e.misc.id,cid:e.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:e.misc.id,cid:e.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:e.misc.id,cid:e.misc.getNosCdnHost,params:[]},signalingCreate:{sid:e.avSignal.id,cid:e.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:e.avSignal.id,cid:e.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:e.avSignal.id,cid:e.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:e.avSignal.id,cid:e.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:e.avSignal.id,cid:e.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:e.avSignal.id,cid:e.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:e.avSignal.id,cid:e.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:e.avSignal.id,cid:e.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:e.avSignal.id,cid:e.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:e.avSignal.id,cid:e.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]},signalingCallEx:{sid:e.avSignal.id,cid:e.avSignal.signalingCallEx,params:[{type:"Property",name:"avSignalTag"}]},signalingJoinAndAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingJoinAndAccept,params:[{type:"Property",name:"avSignalTag"}]}};t.exports={idMap:e,cmdConfig:n,packetConfig:{"1_2":{service:"link",cmd:"heartbeat"},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Number",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Number",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"6_27":{service:"misc",cmd:"getGrayscaleConfig",response:[{type:"Property",name:"appGrayConfigTag"}]},"6_28":{service:"misc",cmd:"getMixStorePolicy",response:[{type:"Property",name:"mixStorePolicyTag"}]},"6_29":{service:"misc",cmd:"getMixStoreToken",response:[{type:"Property",name:"mixStoreTokenTag"}]},"6_30":{service:"misc",cmd:"getBackSourceToken",response:[{type:"Property",name:"backSourceTokenTag"}]},"6_31":{service:"link",cmd:"notifyDetect",response:[{type:"Property",name:"notifyDetectTag"}]},"6_32":{service:"link",cmd:"uploadDetect",response:[]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]},"15_16":{service:"avSignal",cmd:"signalingCallEx",response:[{type:"Property",name:"avSignalTag"}]},"15_17":{service:"avSignal",cmd:"signalingJoinAndAccept",response:[{type:"Property",name:"avSignalTag"}]}}}},function(t,r,e){var n=e(5),o=e(2),i=e(25),a=e(0),s=a.notundef,u=a.fillPropertyWithDefault,c=n,d={},m={},v=[],g={},b={normal:0,advanced:1},T={0:"normal",1:"advanced"},_=c(b),y=d.joinMode={noVerify:0,needVerify:1,rejectAll:2};m.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},v.push("join"),g.joinMode=c(y);var O=d.beInviteMode={needVerify:0,noVerify:1};m.beInviteMode={0:"needVerify",1:"noVerify"},v.push("beInvite"),g.beInviteMode=c(O);var V=d.inviteMode={manager:0,all:1};m.inviteMode={0:"manager",1:"all"},v.push("invite"),g.inviteMode=c(V);var Ce=d.updateTeamMode={manager:0,all:1};m.updateTeamMode={0:"manager",1:"all"},v.push("updateTeam"),g.updateTeamMode=c(Ce);var ae=d.updateCustomMode={manager:0,all:1};function Fe(de){var oe;switch(a.verifyOptions(de,"action","team::Team"),de.action){case"create":a.verifyOptions(de,"teamId",!1,"team::Team"),a.verifyOptions(de,"type name","team::Team"),a.verifyParamValid("type",de.type,_,"team::Team"),s(de.level)&&(a.verifyParamType("level",de.level,"number","team::Team"),this.level=de.level);break;case"update":a.verifyOptions(de,"teamId","team::Team"),a.verifyOptions(de,"type",!1,"team::Team")}s(de.teamId)&&(this.teamId=de.teamId),s(de.type)&&(this.type=b[de.type]),s(de.avatar)&&(this.avatar=""+de.avatar),s(de.name)&&(this.name=""+de.name),s(de.intro)&&(this.intro=""+de.intro),s(de.announcement)&&(this.announcement=""+de.announcement),o(v).call(v,i(oe=this.setMode).call(oe,this,de)),s(de.custom)&&(this.custom=""+de.custom)}function _e(de,oe){s(de[oe+="Mode"])&&(de[oe]=m[oe][de[oe]])}m.updateCustomMode={0:"manager",1:"all"},v.push("updateCustom"),g.updateCustomMode=c(ae),Fe.prototype.setMode=function(de,oe){s(de[oe+="Mode"])&&(a.verifyParamValid(oe,de[oe],g[oe],"team::Team"),this[oe]=d[oe][de[oe]])},Fe.reverse=function(de,oe){var he=a.copy(de);if(s(he.teamId)&&(he.teamId=""+he.teamId),s(he.type)&&(he.type=T[he.type]),s(he.level)&&(he.level=+he.level),s(he.valid)&&(he.valid=+he.valid==1),s(he.memberNum)&&(he.memberNum=+he.memberNum),s(he.memberUpdateTime)&&(he.memberUpdateTime=+he.memberUpdateTime),s(he.createTime)&&(he.createTime=+he.createTime),s(he.updateTime)&&(he.updateTime=+he.updateTime),s(he.validToCurrentUser)&&(he.validToCurrentUser=he.validToCurrentUser==="1"),s(he.mute)&&(he.mute=he.mute==="1"),s(he.muteType))switch(he.muteType){case"0":he.mute=!1,he.muteType="none";break;case"1":he.mute=!0,he.muteType="normal";break;case"3":he.mute=!0,he.muteType="all"}else s(he.mute)&&(he.mute===1?(he.mute=!0,he.muteType="normal"):(he.mute=!1,he.muteType="none"));return o(v).call(v,i(_e).call(_e,null,he)),delete he.bits,oe||Fe.fillProperties(he),he},Fe.fillProperties=function(de){var oe=u(de,"beInviteMode","needVerify"),he=u(de,"inviteMode","manager"),Ve=u(de,"updateTeamMode","manager"),le=u(de,"updateCustomMode","manager"),ie=u(de,"avatar","");return oe||he||Ve||le||ie},t.exports=Fe},function(t,r,e){var n=e(44).clientTypeMap;function o(){}o.reverse=function(i){var a=i;return a.type=n[a.type],a},o.reverseType=function(i){return n[i]||i},t.exports=o},function(t,r,e){var n=e(18),o=e(41),i=e(10),a=e(73),s=e(195),u=e(13),c=e(762),d=e(894),m=e(0),v=m.verifyOptions,g=m.verifyParamType,b=e(24).reportAPI,T=e(147).Chatroom,_=e(154);function y(V){var Ce=_(V);return this.subType="chatroom",this.nosScene=Ce.nosScene||"chatroom",this.nosSurvivalTime=Ce.nosSurvivalTime,Ce.Protocol=s,Ce.Message=d,Ce.constructor=y,Ce.isAnonymous&&(Ce.account=Ce.account||"nimanon_".concat(m.guid()),Ce.isAnonymous=1,m.verifyOptions(Ce,"chatroomNick","api::Chatroom"),Ce.chatroomAvatar=Ce.chatroomAvatar||" "),this.init(Ce)}y.Protocol=s,y.parser=T,y.use=a.use,y.getInstance=function(V){return V.isAnonymous&&(V.account=V.account||"nimanon_".concat(m.guid()),V.isAnonymous=1,m.verifyOptions(V,"chatroomNick","api::Chatroom.getInstance"),V.chatroomAvatar=V.chatroomAvatar||" "),a.getInstance.call(this,V)},y.genInstanceName=function(V){return m.verifyOptions(V,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+V.account+"-chatroomId-"+V.chatroomId};var O=y.fn=y.prototype=n(a.prototype);y.info=O.info=u.info,O.getChatroom=function(V){(V=V||{}).done=b({instance:this,className:"ChatroomFn",funcName:"getChatroom",done:V.done}),this.processCallback(V),this.sendCmd("getChatroom",V)},O.updateChatroom=function(V){(V=V||{}).done=b({instance:this,className:"ChatroomFn",funcName:"updateChatroom",done:V.done}),v(V,"chatroom needNotify","api::updateChatroom"),g("needNotify",V.needNotify,"boolean"),this.processCustom(V),this.processCallback(V),V.chatroom=new c(V.chatroom),V.antispamTag={antiSpamBusinessId:V.antiSpamBusinessId},this.sendCmd("updateChatroom",V)},O.closeChatroom=function(V){(V=V||{}).done=b({instance:this,className:"ChatroomFn",funcName:"closeChatroom",done:V.done}),this.processCustom(V),this.processCallback(V),this.sendCmd("closeChatroom",V)},O.updateTags=function(V){(V=V||{}).done=b({instance:this,className:"ChatroomFn",funcName:"updateTags",done:V.done}),m.validate({tags:{type:"array",required:!1},notifyTargetTags:{type:"string",allowEmpty:!0,required:!1},needNotify:{type:"boolean",required:!1}},V,"chatroom::updateTags");var Ce=o({},V);this.processCallback(Ce),Ce.tags&&(Ce.tags=i(Ce.tags)),Ce.needNotify&&(Ce.needNotify=Ce.needNotify?1:0),this.sendCmd("updateChatroomTags",{chatRoomTagsUpdateTag:Ce},Ce.done)},t.exports=y,e(904),e(905),e(906),e(907)},function(t,r,e){var n=e(18),o=e(25),i=e(8),a=e(9),s=e(75),u=e(0),c=u.undef,d=u.notundef,m=e(290),v=e(13),g=e(147),b=e(762),T=e(311);function _(V){var Ce,ae,Fe;u.verifyOptions(V,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),V.isAnonymous||u.verifyOptions(V,"token","protocol::ChatroomProtocol"),u.verifyParamType("chatroomAddresses",V.chatroomAddresses,"array","protocol::ChatroomProtocol"),u.verifyCallback(V,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),Ce=typeof u.get(V,"privateConf.isDataReportEnable")=="boolean"?V.privateConf.isDataReportEnable:v.privateConf.isDataReportEnable,ae=typeof u.get(V,"privateConf.reportConfigUrl")=="string"?V.privateConf.reportConfigUrl:v.privateConf.reportConfigUrl,Fe=typeof u.get(V,"privateConf.reportUrl")=="string"?V.privateConf.reportUrl:v.privateConf.reportUrl,this.reporter=m.initReporter({isDataReportEnable:Ce,reportConfigUrl:ae,reportUrl:Fe,appKey:V.appKey,logger:this.logger}),s.call(this,V)}var y=s.fn,O=_.fn=_.prototype=n(y);O.init=function(){var V;y.init.call(this),g.Chatroom.setProtocol(this),this.parser=g.Chatroom,o(V=this.sendCmd).call(V,this),this.syncResult={},this.timetags={},this.msgBuffer=[]},O.reset=function(){var V=this;y.reset.call(V);var Ce,ae=V.options;V.autoconnect=!!ae.autoconnect,c(ae.msgBufferInterval)&&(ae.msgBufferInterval=300),u.verifyParamType("msgBufferInterval",ae.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),c(ae.msgBufferSize)&&(ae.msgBufferSize=500),u.verifyParamType("msgBufferSize",ae.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),d(ae.chatroomAddresses)&&(V.socketUrlsBackup=i(Ce=ae.chatroomAddresses).call(Ce,function(Fe){return v.formatSocketUrl({url:Fe,secure:V.options.secure})}))},O.processChatroom=function(V){switch(V.cmd){case"login":V.error||(V.obj={chatroom:a(b).call(b,V.content.chatroom),member:a(T).call(T,V.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(V.content.chatroomCdnInfo));break;case"kicked":this.onKicked(V);break;case"logout":break;case"sendMsg":this.onSendMsg(V);break;case"msg":this.onMsg(V),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+V.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(V);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(V);break;case"getHistoryMsgs":case"getHistoryMsgsByTags":this.onHistoryMsgs(V);break;case"markChatroomMember":this.onMarkChatroomMember(V);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(V);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete V.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(V);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":V.error||(V.obj=V.content);break;case"syncRobot":this.onSyncRobot(V);break;case"notifyCdnInfo":this.onCdnMsgInfo(V.content&&V.content.chatroomCdnInfo);break;case"updateChatroomTag":this.onTagsUpdate(V.content)}},O.onChatroom=function(V){V.error||(V.obj.chatroom=a(b).call(b,V.content.chatroom))},O.onTagsUpdate=function(V){if(this.logger.info("onTagsUpdate:: ",V),this.options.onTagsUpdate&&typeof this.options.onTagsUpdate=="function"){var Ce=V.updateTags&&V.updateTags.currentTags;try{Ce=JSON.parse(Ce)}catch(ae){this.logger.error("onTagsUpdate:: parse tags failed",ae)}this.options.onTagsUpdate(Ce)}},t.exports=_,e(882),e(883),e(884),e(893)},function(t,r){t.exports=function(){}},function(t,r,e){t.exports=e(445)},function(t,r){t.exports=function(e,n){for(var o=n.split(".");o.length;){var i=o.shift(),a=!1;if(i[i.length-1]=="?"&&(i=i.slice(0,-1),a=!0),!(e=e[i])&&a)return e}return e}},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(256),o=e(264);t.exports=function(i){return i!=null&&o(i.length)&&!n(i)}},function(t,r,e){t.exports=e(629)},function(t,r,e){var n=e(8),o=e(9),i=e(0),a=i.notundef,s=i.fillPropertyWithDefault,u={0:"normal",1:"owner",2:"manager"};function c(d){i.verifyOptions(d,"teamId","superTeam::TeamMember"),i.verifyParamAtLeastPresentOne(d,"nickInTeam muteTeam custom muteNotiType","superTeam::SuperTeamMember"),this.teamId=d.teamId,a(d.account)&&(this.account=d.account),a(d.nickInTeam)&&(this.nickInTeam=d.nickInTeam),a(d.muteNotiType)?this.bits=d.muteNotiType:a(d.muteTeam)&&(this.bits=0,d.muteTeam&&(this.bits+=1)),a(d.mute)&&(this.mute=d.mute?1:0),a(d.custom)&&(this.custom=""+d.custom)}c.reverse=function(d){var m=i.copy(d);if(a(m.teamId)&&(m.teamId=""+m.teamId),a(m.type)&&(m.type=u[m.type]),a(m.active)&&(m.active=+m.active==1),a(m.valid)&&(m.valid=+m.valid==1),a(m.mute)&&(m.mute=+m.mute==1),a(m.joinTime)&&(m.joinTime=+m.joinTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),a(m.bits)){var v=m.bits;delete m.bits,m.muteTeam=!!(1&v),m.muteNotiType=v}return a(m.teamId)&&a(m.account)&&(m.id=c.genId(m.teamId,m.account)),m},c.reverseMembers=function(d){return n(d).call(d,function(m){return o(c).call(c,m)})},c.fillProperties=function(d){var m=s(d,"mute",!1),v=s(d,"custom","");return m||v},c.genId=function(d,m){return d+"-"+m},c.accounts2ids=function(d,m){return n(m).call(m,function(v){return c.genId(d,v)})},c.assembleMembers=function(d,m){return i.isArray(m)||(m=[m]),n(m).call(m,function(v){return c.assembleMember(d,v)})},c.assembleMember=function(d,m){return{id:c.genId(d.teamId,m),account:m,teamId:d.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:d.memberUpdateTime,updateTime:d.memberUpdateTime,active:!0,valid:!0}},c.assembleOwner=function(d){var m=c.assembleMember(d,d.owner);return m.type="owner",m},t.exports=c},function(t,r,e){var n=e(8),o=e(9),i=e(5),a=e(106).genPrivateUrl,s=e(0),u={unknown:0,male:1,female:2},c={0:"unknown",1:"male",2:"female"};function d(m){s.merge(this,m),s.notundef(this.gender)&&(s.verifyParamValid("gender",this.gender,d.validGenders,"user::User"),this.gender=u[this.gender]),s.notundef(this.email)&&this.email!==""&&s.verifyEmail("email",this.email,"user::User"),s.notundef(this.birth)&&this.birth!==""&&s.verifyBirth("birth",this.birth,"user::User"),s.notundef(this.tel)&&this.tel!==""&&s.verifyTel("tel",this.tel,"user::User")}d.reverse=function(m,v,g){var b=s.filterObj(m,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return s.notundef(b.avatar)&&(b.avatar=a(b.avatar,v,g)),s.notundef(b.gender)&&(b.gender=c[b.gender]),s.notundef(b.createTime)&&(b.createTime=+b.createTime),s.notundef(b.updateTime)&&(b.updateTime=+b.updateTime),b},d.reverseUsers=function(m){return n(m).call(m,function(v){return o(d).call(d,v)})},d.validGenders=i(u),t.exports=d},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(6),s=e(106).genPrivateUrl,u=e(72),c=e(0),d=e(13);function m(T,_){switch(c.notundef(T.type)?c.verifyFileType(T.type,"msg::FileMessage"):T.type="file",c.verifyOptions(T,"file","msg::FileMessage"),c.verifyOptions(T.file,"url ext size",!0,"file.","msg::FileMessage"),T.type){case"image":v.verifyFile(T.file,"msg::FileMessage");break;case"audio":g.verifyFile(T.file,"msg::FileMessage");break;case"video":b.verifyFile(T.file,"msg::FileMessage")}u.call(this,T),_&&(this.idClient=_),this.attach=n(T.file)}m.prototype=o(u.prototype),m.reverse=function(T){var _=i(u).call(u,T);if(T.attach=T.attach?""+T.attach:"",T.attach&&(_.file=JSON.parse(T.attach),!_.file.isS3)){var y,O;_.file.url=s(_.file.url)||"",_.type==="audio"&&_.file.url&&!_.file.mp3Url&&(_.file.mp3Url=_.file.url+(~a(O=_.file.url).call(O,"?")?"&":"?")+"audioTrans&type=mp3"),d.httpsEnabled&&a(y=_.file.url).call(y,"https://")!==0&&(_.file.url=_.file.url.replace("http","https"))}return _},t.exports=m;var v=e(830),g=e(831),b=e(832)},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(6),s=e(106).genPrivateUrl,u=e(117),c=e(0),d=e(13);function m(T,_){switch(c.notundef(T.type)?c.verifyFileType(T.type,"msg::FileMessage"):T.type="file",c.verifyOptions(T,"file","msg::FileMessage"),c.verifyOptions(T.file,"url ext size",!0,"file.","msg::FileMessage"),T.type){case"image":v.verifyFile(T.file,"msg::FileMessage");break;case"audio":g.verifyFile(T.file,"msg::FileMessage");break;case"video":b.verifyFile(T.file,"msg::FileMessage")}u.call(this,T),_&&(this.idClient=_),this.attach=n(T.file)}m.prototype=o(u.prototype),m.reverse=function(T){var _=i(u).call(u,T);if(T.attach=T.attach?""+T.attach:"",T.attach&&(_.file=JSON.parse(T.attach),!_.file.isS3)){var y,O;_.file.url=s(_.file.url)||"",_.type==="audio"&&_.file.url&&!_.file.mp3Url&&(_.file.mp3Url=_.file.url+(~a(O=_.file.url).call(O,"?")?"&":"?")+"audioTrans&type=mp3"),d.httpsEnabled&&a(y=_.file.url).call(y,"https://")!==0&&(_.file.url=_.file.url.replace("http","https"))}return _},t.exports=m;var v=e(896),g=e(897),b=e(898)},function(t,r,e){var n=e(316);t.exports=n},function(t,r){var e=typeof document=="object"&&document.all,n=e===void 0&&e!==void 0;t.exports={all:e,IS_HTMLDDA:n}},function(t,r,e){var n=e(92);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,r,e){var n=e(27),o=e(4),i=e(159);t.exports=!n&&!o(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},function(t,r,e){var n=e(4),o=e(16),i=/#|\.prototype\./,a=function(m,v){var g=u[s(m)];return g==d||g!=c&&(o(v)?n(v):!!v)},s=a.normalize=function(m){return String(m).replace(i,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",d=a.POLYFILL="P";t.exports=a},function(t,r,e){var n=e(27),o=e(4);t.exports=n&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(t,r,e){var n=e(1),o=e(4),i=e(79),a=e(28),s=e(42),u=e(45),c=e(213),d=e(95),m=e(161),v=e(111),g=e(20),b=e(93),T=g("isConcatSpreadable"),_=b>=51||!o(function(){var V=[];return V[T]=!1,V.concat()[0]!==V}),y=v("concat"),O=function(V){if(!a(V))return!1;var Ce=V[T];return Ce!==void 0?!!Ce:i(V)};n({target:"Array",proto:!0,arity:1,forced:!_||!y},{concat:function(V){var Ce,ae,Fe,_e,de,oe=s(this),he=m(oe,0),Ve=0;for(Ce=-1,Fe=arguments.length;Ce<Fe;Ce++)if(O(de=Ce===-1?oe:arguments[Ce]))for(_e=u(de),c(Ve+_e),ae=0;ae<_e;ae++,Ve++)ae in de&&d(he,Ve,de[ae]);else c(Ve+1),d(he,Ve++,de);return he.length=Ve,he}})},function(t,r){var e=TypeError;t.exports=function(n){if(n>9007199254740991)throw e("Maximum allowed index exceeded");return n}},function(t,r,e){var n=e(11),o=e(16),i=e(158),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(s){return a(s)}),t.exports=i.inspectSource},function(t,r,e){var n=e(328);t.exports=n},function(t,r,e){var n=e(11),o=e(29),i=e(43),a=e(160).indexOf,s=e(112),u=n([].push);t.exports=function(c,d){var m,v=i(c),g=0,b=[];for(m in v)!o(s,m)&&o(v,m)&&u(b,m);for(;d.length>g;)o(v,m=d[g++])&&(~a(b,m)||u(b,m));return b}},function(t,r,e){var n=e(33);t.exports=n("document","documentElement")},function(t,r,e){var n=e(333);e(67),t.exports=n},function(t,r,e){e(334),e(337),e(338),e(223),e(339)},function(t,r,e){var n=e(128),o=e(45),i=e(95),a=Array,s=Math.max;t.exports=function(u,c,d){for(var m=o(u),v=n(c,m),g=n(d===void 0?m:d,m),b=a(s(g-v,0)),T=0;v<g;v++,T++)i(b,T,u[v]);return b.length=T,b}},function(t,r,e){var n=e(19),o=e(33),i=e(20),a=e(66);t.exports=function(){var s=o("Symbol"),u=s&&s.prototype,c=u&&u.valueOf,d=i("toPrimitive");u&&!u[d]&&a(u,d,function(m){return n(c,this)},{arity:1})}},function(t,r,e){var n=e(92);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},function(t,r,e){var n=e(1),o=e(33),i=e(76),a=e(19),s=e(11),u=e(4),c=e(79),d=e(16),m=e(28),v=e(126),g=e(98),b=e(92),T=o("JSON","stringify"),_=s(/./.exec),y=s("".charAt),O=s("".charCodeAt),V=s("".replace),Ce=s(1 .toString),ae=/[\uD800-\uDFFF]/g,Fe=/^[\uD800-\uDBFF]$/,_e=/^[\uDC00-\uDFFF]$/,de=!b||u(function(){var le=o("Symbol")();return T([le])!="[null]"||T({a:le})!="{}"||T(Object(le))!="{}"}),oe=u(function(){return T("\uDF06\uD834")!=='"\\udf06\\ud834"'||T("\uDEAD")!=='"\\udead"'}),he=function(le,ie){var Ie=g(arguments),pe=ie;if((m(ie)||le!==void 0)&&!v(le))return c(ie)||(ie=function(kt,Ue){if(d(pe)&&(Ue=a(pe,this,kt,Ue)),!v(Ue))return Ue}),Ie[1]=ie,i(T,null,Ie)},Ve=function(le,ie,Ie){var pe=y(Ie,ie-1),kt=y(Ie,ie+1);return _(Fe,le)&&!_(_e,kt)||_(_e,le)&&!_(Fe,pe)?"\\u"+Ce(O(le,0),16):le};T&&n({target:"JSON",stat:!0,arity:3,forced:de||oe},{stringify:function(le,ie,Ie){var pe=g(arguments),kt=i(de?he:T,null,pe);return oe&&typeof kt=="string"?V(kt,ae,Ve):kt}})},function(t,r,e){e(22)("iterator")},function(t,r,e){var n=e(22),o=e(221);n("toPrimitive"),o()},function(t,r,e){var n=e(27),o=e(29),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&(function(){}).name==="something",c=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},function(t,r,e){var n,o,i,a=e(4),s=e(16),u=e(28),c=e(80),d=e(134),m=e(66),v=e(20),g=e(48),b=v("iterator"),T=!1;[].keys&&("next"in(i=[].keys())?(o=d(d(i)))!==Object.prototype&&(n=o):T=!0),!u(n)||a(function(){var _={};return n[b].call(_)!==_})?n={}:g&&(n=c(n)),s(n[b])||m(n,b,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:T}},function(t,r,e){var n=e(4);t.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(t,r,e){e(67);var n=e(65),o=e(29),i=e(21),a=e(375),s=Array.prototype,u={DOMTokenList:!0,NodeList:!0};t.exports=function(c){var d=c.forEach;return c===s||i(s,c)&&d===s.forEach||o(u,n(c))?a:d}},function(t,r,e){var n=e(383);t.exports=n},function(t,r,e){var n=e(387);e(67),t.exports=n},function(t,r,e){e(388)},function(t,r,e){var n=e(33),o=e(11),i=e(131),a=e(132),s=e(36),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(c){var d=i.f(s(c)),m=a.f;return m?u(d,m(c)):d}},function(t,r,e){var n=e(20),o=e(99),i=n("iterator"),a=Array.prototype;t.exports=function(s){return s!==void 0&&(o.Array===s||a[i]===s)}},function(t,r,e){var n=e(19),o=e(31),i=e(36),a=e(78),s=e(136),u=TypeError;t.exports=function(c,d){var m=arguments.length<2?s(c):d;if(o(m))return i(n(m,c));throw u(a(c)+" is not iterable")}},function(t,r,e){var n=e(19),o=e(36),i=e(157);t.exports=function(a,s,u){var c,d;o(a);try{if(!(c=i(a,"return"))){if(s==="throw")throw u;return u}c=n(c,a)}catch(m){d=!0,c=m}if(s==="throw")throw u;if(d)throw c;return o(c),u}},function(t,r,e){var n=e(33),o=e(38),i=e(20),a=e(27),s=i("species");t.exports=function(u){var c=n(u),d=o.f;a&&c&&!c[s]&&d(c,s,{configurable:!0,get:function(){return this}})}},function(t,r,e){var n=e(36),o=e(169),i=e(91),a=e(20)("species");t.exports=function(s,u){var c,d=n(s).constructor;return d===void 0||i(c=n(d)[a])?u:o(c)}},function(t,r,e){var n,o,i,a,s=e(14),u=e(76),c=e(34),d=e(16),m=e(29),v=e(4),g=e(217),b=e(98),T=e(159),_=e(240),y=e(241),O=e(114),V=s.setImmediate,Ce=s.clearImmediate,ae=s.process,Fe=s.Dispatch,_e=s.Function,de=s.MessageChannel,oe=s.String,he=0,Ve={};try{n=s.location}catch{}var le=function(kt){if(m(Ve,kt)){var Ue=Ve[kt];delete Ve[kt],Ue()}},ie=function(kt){return function(){le(kt)}},Ie=function(kt){le(kt.data)},pe=function(kt){s.postMessage(oe(kt),n.protocol+"//"+n.host)};V&&Ce||(V=function(kt){_(arguments.length,1);var Ue=d(kt)?kt:_e(kt),Dt=b(arguments,1);return Ve[++he]=function(){u(Ue,void 0,Dt)},o(he),he},Ce=function(kt){delete Ve[kt]},O?o=function(kt){ae.nextTick(ie(kt))}:Fe&&Fe.now?o=function(kt){Fe.now(ie(kt))}:de&&!y?(a=(i=new de).port2,i.port1.onmessage=Ie,o=c(a.postMessage,a)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&n&&n.protocol!=="file:"&&!v(pe)?(o=pe,s.addEventListener("message",Ie,!1)):o="onreadystatechange"in T("script")?function(kt){g.appendChild(T("script")).onreadystatechange=function(){g.removeChild(this),le(kt)}}:function(kt){setTimeout(ie(kt),0)}),t.exports={set:V,clear:Ce}},function(t,r){var e=TypeError;t.exports=function(n,o){if(n<o)throw e("Not enough arguments");return n}},function(t,r,e){var n=e(64);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,r){t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},function(t,r,e){var n=e(101),o=e(244),i=e(115).CONSTRUCTOR;t.exports=i||!o(function(a){n.all(a).then(void 0,function(){})})},function(t,r,e){var n=e(20)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch{}t.exports=function(s,u){if(!u&&!o)return!1;var c=!1;try{var d={};d[n]=function(){return{next:function(){return{done:c=!0}}}},s(d)}catch{}return c}},function(t,r,e){var n=e(36),o=e(28),i=e(68);t.exports=function(a,s){if(n(a),o(s)&&s.constructor===a)return s;var u=i.f(a);return(0,u.resolve)(s),u.promise}},function(t,r,e){var n=e(1),o=e(19),i=e(31),a=e(68),s=e(100),u=e(46);n({target:"Promise",stat:!0},{allSettled:function(c){var d=this,m=a.f(d),v=m.resolve,g=m.reject,b=s(function(){var T=i(d.resolve),_=[],y=0,O=1;u(c,function(V){var Ce=y++,ae=!1;O++,o(T,d,V).then(function(Fe){ae||(ae=!0,_[Ce]={status:"fulfilled",value:Fe},--O||v(_))},function(Fe){ae||(ae=!0,_[Ce]={status:"rejected",reason:Fe},--O||v(_))})}),--O||v(_)});return b.error&&g(b.value),m.promise}})},function(t,r,e){var n=e(1),o=e(19),i=e(31),a=e(33),s=e(68),u=e(100),c=e(46);n({target:"Promise",stat:!0},{any:function(d){var m=this,v=a("AggregateError"),g=s.f(m),b=g.resolve,T=g.reject,_=u(function(){var y=i(m.resolve),O=[],V=0,Ce=1,ae=!1;c(d,function(Fe){var _e=V++,de=!1;Ce++,o(y,m,Fe).then(function(oe){de||ae||(ae=!0,b(oe))},function(oe){de||ae||(de=!0,O[_e]=oe,--Ce||T(new v(O,"No one promise resolved")))})}),--Ce||T(new v(O,"No one promise resolved"))});return _.error&&T(_.value),g.promise}})},function(t,r,e){var n=e(411);t.exports=n},function(t,r,e){var n=e(26).default,o=e(413);t.exports=function(i){var a=o(i,"string");return n(a)==="symbol"?a:String(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(421);t.exports=n},function(t,r,e){var n=e(78),o=TypeError;t.exports=function(i,a){if(!delete i[a])throw o("Cannot delete property "+n(a)+" of "+n(i))}},function(t,r,e){e(456),e(458)},function(t,r,e){var n,o=e(14),i=e(76),a=e(16),s=e(457),u=e(64),c=e(98),d=e(240),m=o.Function,v=/MSIE .\./.test(u)||s&&((n=o.Bun.version.split(".")).length<3||n[0]==0&&(n[1]<3||n[1]==3&&n[2]==0));t.exports=function(g,b){var T=b?2:1;return v?function(_,y){var O=d(arguments.length,1)>T,V=a(_)?_:m(_),Ce=O?c(arguments,T):[],ae=O?function(){i(V,this,Ce)}:V;return b?g(ae,y):g(ae)}:g}},function(t,r,e){var n=e(476);t.exports=n},function(t,r){t.exports=function e(n,o){var i,a,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,u=/(^[ ]*|[ ]*$)/g,c=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,m=/^0/,v=function(ae){return e.insensitive&&(""+ae).toLowerCase()||""+ae},g=v(n).replace(u,"")||"",b=v(o).replace(u,"")||"",T=g.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=b.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=parseInt(g.match(d),16)||T.length!==1&&g.match(c)&&Date.parse(g),O=parseInt(b.match(d),16)||y&&b.match(c)&&Date.parse(b)||null;if(O){if(y<O)return-1;if(y>O)return 1}for(var V=0,Ce=Math.max(T.length,_.length);V<Ce;V++){if(i=!(T[V]||"").match(m)&&parseFloat(T[V])||T[V]||0,a=!(_[V]||"").match(m)&&parseFloat(_[V])||_[V]||0,isNaN(i)!==isNaN(a))return isNaN(i)?1:-1;if(typeof i!=typeof a&&(i+="",a+=""),i<a)return-1;if(i>a)return 1}return 0}},function(t,r,e){var n=e(119),o=e(88);t.exports=function(i){if(!o(i))return!1;var a=n(i);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"}},function(t,r,e){(function(n){var o=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=o}).call(this,e(56))},function(t,r){var e=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,r,e){var n=e(505),o=e(512),i=e(514),a=e(515),s=e(516);function u(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var v=c[d];this.set(v[0],v[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,r,e){var n=e(261),o=e(199),i=Object.prototype.hasOwnProperty;t.exports=function(a,s,u){var c=a[s];i.call(a,s)&&o(c,u)&&(u!==void 0||s in a)||n(a,s,u)}},function(t,r,e){var n=e(518);t.exports=function(o,i,a){i=="__proto__"&&n?n(o,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[i]=a}},function(t,r,e){var n=e(520),o=e(521),i=e(175),a=e(263),s=e(301),u=e(524),c=Object.prototype.hasOwnProperty;t.exports=function(d,m){var v=i(d),g=!v&&o(d),b=!v&&!g&&a(d),T=!v&&!g&&!b&&u(d),_=v||g||b||T,y=_?n(d.length,String):[],O=y.length;for(var V in d)!m&&!c.call(d,V)||_&&(V=="length"||b&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||s(V,O))||y.push(V);return y}},function(t,r,e){(function(n){var o=e(50),i=e(523),a=r&&!r.nodeType&&r,s=a&&typeof n=="object"&&n&&!n.nodeType&&n,u=s&&s.exports===a?o.Buffer:void 0,c=(u?u.isBuffer:void 0)||i;n.exports=c}).call(this,e(145)(t))},function(t,r){t.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(t,r){t.exports=function(e,n){return function(o){return e(n(o))}}},function(t,r){t.exports=function(){return[]}},function(t,r,e){var n=e(268),o=e(269),i=e(180),a=e(266),s=Object.getOwnPropertySymbols?function(u){for(var c=[];u;)n(c,i(u)),u=o(u);return c}:a;t.exports=s},function(t,r){t.exports=function(e,n){for(var o=-1,i=n.length,a=e.length;++o<i;)e[a+o]=n[o];return e}},function(t,r,e){var n=e(265)(Object.getPrototypeOf,Object);t.exports=n},function(t,r,e){var n=e(268),o=e(175);t.exports=function(i,a,s){var u=a(i);return o(i)?u:n(u,s(i))}},function(t,r,e){var n=e(83)(e(50),"Set");t.exports=n},function(t,r,e){var n=e(567);t.exports=n},function(t,r,e){var n=e(11),o=e(31),i=e(28),a=e(29),s=e(98),u=e(107),c=Function,d=n([].concat),m=n([].join),v={},g=function(b,T,_){if(!a(v,T)){for(var y=[],O=0;O<T;O++)y[O]="a["+O+"]";v[T]=c("C,a","return new C("+m(y,",")+")")}return v[T](b,_)};t.exports=u?c.bind:function(b){var T=o(this),_=T.prototype,y=s(arguments,1),O=function(){var V=d(y,s(arguments));return this instanceof O?g(T,V.length,V):T.apply(b,V)};return i(_)&&(O.prototype=_),O}},function(t,r,e){var n=e(87),o=e(6),i=e(69),a=e(123),s=e(10),u=e(54),c=u.getGlobal(),d={},m=c.name||"_parent",v=[],g=[];d.addMsgListener=function(Fe){v.push(Fe)};var b,T,_,y,O=(b=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(Fe){return Fe=Fe||"",b.test(Fe)?RegExp.$1:"*"}),V=function(){var Fe,_e,de=n(Fe=unescape(c.name||"")).call(Fe);if(de&&o(de).call(de,"MSG|")===0){c.name="";var oe=u.string2object(de.replace("MSG|",""),"|"),he=(oe.origin||"").toLowerCase();he&&he!=="*"&&o(_e=location.href.toLowerCase()).call(_e,he)!==0||function(Ve){for(var le=0,ie=v.length;le<ie;le++)try{v[le].call(null,Ve)}catch{}}({data:JSON.parse(oe.data||"null"),source:c.frames[oe.self]||oe.self,origin:O(oe.ref||(typeof document>"u"?"":document.referrer))})}},Ce=(_=function(Fe,_e){for(var de=0,oe=Fe.length;de<oe;de++)if(Fe[de]===_e)return!0;return!1},function(){if(g.length){T=[];for(var Fe,_e=g.length-1;_e>=0;_e--)Fe=g[_e],_(T,Fe.w)||(T.push(Fe.w),i(g).call(g,_e,1),Fe.w.name=Fe.d);T=null}}),ae=d.startTimer=(y=!1,function(){y||(y=!0,c.postMessage||(a(Ce,100),a(V,20)))});d.postMessage=function(Fe){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(u.fillUndef(_e,{origin:"*",source:m}),c.postMessage){var de=_e.data;c.FormData||(de=s(de)),Fe.postMessage(de,_e.origin)}else{if(ae(),u.isObject(_e)){var oe={};oe.origin=_e.origin||"",oe.ref=location.href,oe.self=_e.source,oe.data=s(_e.data),_e="MSG|"+u.object2string(oe,"|",!0)}g.unshift({w:Fe,d:escape(_e)})}},t.exports=d},function(t,r,e){var n=e(589);t.exports=n},function(t,r,e){var n=e(0),o={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},i={genResponseBody:function(a){return o[a=a||"file"]},parseResponse:function(a,s){n.notundef(a.size)&&(a.size=+a.size),n.notundef(a.w)&&(a.w=+a.w),n.notundef(a.h)&&(a.h=+a.h),n.notundef(a.dur)&&(a.dur=+a.dur);var u=a.orientation;if(n.notundef(u)&&(delete a.orientation,s&&(u==="right, top"||u==="left, bottom"))){var c=a.w;a.w=a.h,a.h=c}return a}};t.exports=i},function(t,r,e){var n=e(120),o=e(15),i=e(6),a=e(57),s=e(23),u=["Code","code","Message","message"],c=e(13),d=e(0),m=e(40),v=e(605),g=e(606),b=e(105),T=b.EMResourceUploadWay,_=b.EMExceptionState,y=e(184).abort,O=d.supportFormData;function V(ae,Fe){var _e=this,de=ae.uploadprogress,oe=ae.uploaddone,he=ae.beginupload;return{beginupload:typeof he=="function"?function(Ve){try{he(Ve,Fe)}catch(le){_e.logger.error("Upload::options.beginupload execute error",le)}}:function(){},uploadprogress:typeof de=="function"?function(Ve){_e.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Ve.loaded});try{de(Ve,Fe)}catch(le){_e.logger.error("Upload::options.uploadprogress execute error",le)}}:function(Ve){_e.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Ve.loaded})},uploaddone:function(Ve,le){Ve?_e.reporterHook.emit("reporter/uploadEnd",Ve.code==="RequestAbortedError"||Ve.code==="abort"?_.kCanceled:_.kFailed):_e.reporterHook.emit("reporter/uploadEnd",_.kSucceed);try{oe(Ve,le,null,Fe)}catch(ie){_e.logger.error("Upload::options.uploaddone execute error",ie)}}}}function Ce(ae,Fe,_e){var de=this;de.options=d.copy(ae),ae=de.options,d.verifyOptions(ae,"url fileName"),d.verifyParamPresentJustOne(ae,"blob fileInput"),d.verifyCallback(ae,"beginupload uploadprogress uploaddone"),de.reporterHook=Fe.reporterHook,de.logger=Fe.logger,de.message=_e;var oe=V.call(this,ae,_e),he=oe.beginupload,Ve=oe.uploadprogress,le=oe.uploaddone;de.options.beginupload=he,de.options.uploadprogress=Ve,de.options.uploaddone=le,ae.fileInput&&(ae.fileInput=d.verifyFileInput(ae.fileInput)),ae.type&&d.verifyFileType(ae.type),ae.timeout?d.verifyParamType("timeout",ae.timeout,"number"):ae.timeout=6e5,d.verifyFileUploadCallback(ae),ae.data={},ae.params&&d.merge(ae.data,ae.params);var ie,Ie,pe=ae.fileName,kt=ae.fileInput;if(O){if(kt){if(!(Ie=ae.type?d.filterFiles(kt.files,ae.type):o([]).call(kt.files,0))||!Ie.length)return void ae.uploaddone(m.newWrongFileTypeError("未读取到"+ae.type+"类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了"+ae.type+"类型的文件"));ae.data[pe]=Ie[0],ie=kt.files[0].size}else if(ae.blob){var Ue;if(ae.data[pe]=ae.blob,ae.type!=="file"&&ae.blob.type&&i(Ue=ae.blob.type).call(Ue,ae.type)===-1)return void ae.uploaddone(m.newWrongFileTypeError("未读取到"+ae.type+"类型的文件, 请确保选择了"+ae.type+"类型的文件"));ie=ae.blob.size}if(de.reporterHook.emit("reporter/uploadUpdate",{full_size:ie}),ae.maxSize&&ie>ae.maxSize)return void ae.uploaddone(m.newFileTooLargeError("上传文件大小超过".concat(ae.maxSize,"限制")))}function Dt(){if(de.logger.info("Upload:enter aws upload"),ie){if(ie>c.chunkMaxSize)ae.uploaddone(m.newFileTooLargeError("直传文件大小超过".concat(c.commonMaxSize,"限制")));else if(ae.s3Policy&&ae.s3Policy.uploadConfig&&ae.s3Policy.uploadConfig.retryPolicy){var pr=ae.s3Policy.uploadConfig.retryPolicy,ar={accessKeyId:ae.mixStoreToken.accessKeyId,secretAccessKey:ae.mixStoreToken.secretAccessKey,sessionToken:ae.mixStoreToken.sessionToken,region:ae.mixStoreToken.region,maxRetries:pr.retry},hr=new ae.s3;hr.config.update(ar);var Ne=de.reporterHook.getNTPTime();hr.config.systemClockOffset=Ne-a();var nr=decodeURIComponent(ae.mixStoreToken.bucket),sr=decodeURIComponent(ae.mixStoreToken.objectName),$e=ae.data[pe],er=hr.upload({Bucket:nr,Key:sr,Body:$e,Metadata:{token:ae.mixStoreToken.token},ContentType:$e.type||"application/octet-stream"});er.on("httpUploadProgress",function(or){var ze=Math.floor(1e4*or.loaded/or.total)/100,rr={docId:ae.docId,total:or.total,loaded:or.loaded,percentage:ze,percentageText:ze+"%"};ae.fileInput&&(rr.fileInput=ae.fileInput),ae.blob&&(rr.blob=ae.blob),ae.uploadprogress(rr)}),er.send(function(or,ze){if(ae.errorHook({bucket:nr,object:sr},{provider:"s3"}),ae.docId&&(ze.docId=ae.docId),or&&or.code==="RequestAbortedError")de.logger.error("uploadFile:","api::s3:upload file abort",or),de.onError(or);else if(or){var rr;ae.logger.error("error:","api::s3:upload file failed",or);var Et=ae.providers[(i(rr=ae.providers).call(rr,ae.curProvider)+1)%ae.providers.length];pr.retryNext&&Et?(de.addCircuitTimer(ae,Et),Et===1&&ae.getMixStoreToken(1,function(cr){ae.mixStoreToken=cr,tr()})):de.onError(ze),ae.errorHook(or,{provider:"s3"})}else{var Lt=de.options.s3Policy.cdnSchema;Lt=(Lt=Lt.replace("{cdnDomain}",de.options.s3Policy.dlcdn)).replace("{objectName}",ze.Key),ae.uploaddone(null,{size:$e.size,name:$e.name,url:Lt,ext:$e.name.split(".")[1]||"unknown",_url_safe:ae.mixStoreToken.shortUrl,isS3:!0}),ae.logger.info("s3 Upload done: fileObj is",{size:$e.size,name:$e.name,url:Lt,ext:$e.name.split(".")[1]||"unknown",_url_safe:ae.mixStoreToken.shortUrl,isS3:!0})}}),typeof ae.beginupload=="function"&&ae.beginupload(er)}}else ae.uploaddone(m.newFileTooLargeError("Browser version is too low"))}function tr(){if(de.logger.info("Upload:enter nos upload"),ie&&!ae.commonUpload)return de.logger.info("Upload:use chunk upload, url ".concat(ae.url)),ie>c.chunkMaxSize?void ae.uploaddone(m.newFileTooLargeError("直传文件大小超过".concat(c.chunkMaxSize,"限制"))):void(de.sn=g(ae,pe,de,-1));if(de.logger.info("Upload:use common upload, url ".concat(ae.url)),ie&&ie>c.commonMaxSize)ae.uploaddone(m.newFileTooLargeError("普通上传文件大小超过".concat(c.commonMaxSize,"限制")));else{ie||(d.dataset(kt,"name",pe),ae.data.input=kt);var pr={data:ae.data,onaftersend:function(){ae.beginupload(de,de.message)},onuploading:function(ar){var hr=Math.floor(1e4*ar.loaded/ar.total)/100,Ne={docId:ae.docId,total:ar.total,loaded:ar.loaded,percentage:hr,percentageText:hr+"%"};ae.fileInput&&(Ne.fileInput=ae.fileInput),ae.blob&&(Ne.blob=ae.blob),ae.uploadprogress(Ne)},onload:function(ar){var hr;if(ae.docId&&(ar.docId=ae.docId),!ar.Error)return ae.uploaddone(null,ar),void ae.logger.info("nos Upload done: fileObj is",ar);if(ae.mixEnable&&ae.curProvider===1){var Ne=ae.nosPolicy.uploadConfig.retryPolicy,nr=ae.providers[(i(hr=ae.providers).call(hr,ae.curProvider)+1)%ae.providers.length];Ne.retryNext&&nr?(de.addCircuitTimer(ae,nr),nr===2&&ae.getMixStoreToken(2,function(sr){ae.mixStoreToken=sr,Dt()})):de.onError(ar)}else de.onError(ar)},onerror:function(ar){var hr;if(ae.mixEnable&&ae.curProvider===1){var Ne,nr=ae.nosPolicy.uploadConfig.retryPolicy,sr=ae.providers[(i(Ne=ae.providers).call(Ne,ae.curProvider)+1)%ae.providers.length];if(nr.retryNext&&sr)de.addCircuitTimer(ae,sr),sr===2&&ae.getMixStoreToken(2,function($e){ae.mixStoreToken=$e,Dt()});else try{hr=ar.result?JSON.parse(ar.result):ar,de.onError(hr)}catch{ae.uploaddone(new m(ar.message,ar.code),de.options)}}else try{hr=ar.result?JSON.parse(ar.result):ar,de.onError(hr)}catch{ae.uploaddone(new m(ar.message,ar.code),de.options)}ae.errorHook(ar,{provider:"nos"})}};O||(pr.mode="iframe"),pr.putFileAtEnd=!0,de.sn=v(ae.url,pr)}}if(ae.mixEnable&&ae.curProvider===2){var dr=de.options.s3Policy.cdnSchema;dr=dr.replace("{cdnDomain}",de.options.s3Policy.dlcdn),de.reporterHook.emit("reporter/uploadUpdate",{remote_addr:dr,operation_type:T.kResourceUploadWayAWSPlugin}),Dt()}else ae.mixEnable&&ae.curProvider===1?(de.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ae.url,operation_type:T.kResourceUploadWayNOSPlugin}),tr()):(de.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ae.url,operation_type:T.kResourceUploadWayNOS}),tr())}Ce.prototype.addCircuitTimer=function(ae,Fe){var _e=this;if(ae.curProvider=Fe,ae.s3Policy&&ae.nosPolicy){var de=ae[ae.curProvider===1?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!de||de===0)return;_e.circuitTimer&&clearTimeout(_e.circuitTimer),_e.circuitTimer=s(function(){ae.curProvider=ae.providers[0],_e.circuitTimer=void 0},1e3*de)}},Ce.prototype.onError=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=this,_e=Fe.options,de=ae.Error||ae||{},oe=de.Code,he=de.code,Ve=de.Message,le=de.message,ie=n(de,u),Ie=oe||he||"unknown",pe=Ve||le||"未知错误";_e.uploaddone(new m(Ie+"("+pe+")",Ie,ie))},Ce.prototype.abort=function(){y(this.sn)},t.exports=Ce},function(t,r,e){t.exports=e(279)},function(t,r,e){var n=e(607);t.exports=n},function(t,r,e){var n=e(187),o=e(137),i=e(188);t.exports=function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=n(s&&s.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o(a,"prototype",{writable:!1}),s&&i(a,s)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(26).default,o=e(621);t.exports=function(i,a){if(a&&(n(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(622)},function(t,r,e){var n=e(625);t.exports=n},function(t,r,e){var n=e(6),o=e(0),i={fromDataURL:function(a){var s,u,c=o.getGlobal();u=n(s=a.split(",")[0]).call(s,"base64")>=0?c.atob(a.split(",")[1]):c.decodeURIComponent(a.split(",")[1]);for(var d=a.split(",")[0].split(":")[1].split(";")[0],m=new Uint8Array(u.length),v=0;v<u.length;v++)m[v]=u.charCodeAt(v);return new c.Blob([m],{type:d})}};t.exports=i},function(t,r,e){var n=e(5),o=e(8),i=e(9),a=e(0),s={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},u={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function c(d){a.verifyOptions(d,"type","image::ImageOp"),a.verifyParamValid("type",d.type,c.validTypes,"image::ImageOp"),a.merge(this,d),this.type=s[d.type]}c.validTypes=n(s),c.reverse=function(d){var m=a.copy(d);return m.type=u[m.type],m},c.reverseImageOps=function(d){return o(d).call(d,function(m){return i(c).call(c,m)})},t.exports=c},function(t,r,e){var n=e(2),o=e(5),i={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},a={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},s={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};t.exports={parseAvSignalType:function(u){return i[u]||u},parseAvSignalMember:function(u){var c,d={};return n(c=o(u)).call(c,function(m){d[a[m]]=u[m]}),d},parseAvSignalError:function(u){return u.message=s[u.code]||u.message||u,u}}},function(t,r,e){t.exports=e(650)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */function getGlobal(){return typeof window<"u"?window:typeof self<"u"?self:global!==void 0?global:{}}var root=getGlobal(),io=module.exports;root.location===void 0&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){(function(t,r){var e=t;e.version="0.9.11",e.protocol=1,e.transports=[],e.j=[],e.sockets={},e.connect=function(n,o){var i,a,s=e.util.parseUri(n);r&&r.location&&(s.protocol=s.protocol||r.location.protocol.slice(0,-1),s.host=s.host||(r.document?r.document.domain:r.location.hostname),s.port=s.port||r.location.port),i=e.util.uniqueUri(s);var u={host:s.ipv6uri?"["+s.host+"]":s.host,secure:s.protocol==="https",port:s.port||(s.protocol==="https"?443:80),query:s.query||""};return e.util.merge(u,o),!u["force new connection"]&&e.sockets[i]||(a=new e.Socket(u)),!u["force new connection"]&&a&&(e.sockets[i]=a),(a=a||e.sockets[i]).of(s.path.length>1?s.path:"")}})(module.exports,root),function(t,r){var e=t.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(a){var s=a,u=a.indexOf("["),c=a.indexOf("]");u!=-1&&c!=-1&&(a=a.substring(0,u)+a.substring(u,c).replace(/:/g,";")+a.substring(c,a.length));for(var d=n.exec(a||""),m={},v=14;v--;)m[o[v]]=d[v]||"";return u!=-1&&c!=-1&&(m.source=s,m.host=m.host.substring(1,m.host.length-1).replace(/;/g,":"),m.authority=m.authority.replace("[","").replace("]","").replace(/;/g,":"),m.ipv6uri=!0),m},e.uniqueUri=function(a){var s=a.protocol,u=a.host,c=a.port;return"document"in r&&r.document?(u=u||document.domain,c=c||(s=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(u=u||"localhost",c||s!="https"||(c=443)),(s||"http")+"://"+u+":"+(c||80)},e.query=function(a,s){var u=e.chunkQuery(a||""),c=[];for(var d in e.merge(u,e.chunkQuery(s||"")),u)u.hasOwnProperty(d)&&c.push(d+"="+u[d]);return c.length?"?"+c.join("&"):""},e.chunkQuery=function(a){for(var s,u={},c=a.split("&"),d=0,m=c.length;d<m;++d)(s=c[d].split("="))[0]&&(u[s[0]]=s[1]);return u};var i=!1;e.load=function(a){if(typeof document<"u"&&document&&document.readyState==="complete"||i)return a();e.on(r,"load",a,!1)},e.on=function(a,s,u,c){a.attachEvent?a.attachEvent("on"+s,u):a.addEventListener&&a.addEventListener(s,u,c)},e.request=function(a){if(a&&typeof XDomainRequest<"u"&&!e.ua.hasCORS)return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!a||e.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},root!==void 0&&e.load(function(){i=!0}),e.defer=function(a){if(!e.ua.webkit||typeof importScripts<"u")return a();e.load(function(){setTimeout(a,100)})},e.merge=function(a,s,u,c){var d,m=c||[],v=u===void 0?2:u;for(d in s)s.hasOwnProperty(d)&&e.indexOf(m,d)<0&&(typeof a[d]=="object"&&v?e.merge(a[d],s[d],v-1,m):(a[d]=s[d],m.push(s[d])));return a},e.mixin=function(a,s){e.merge(a.prototype,s.prototype)},e.inherit=function(a,s){function u(){}u.prototype=s.prototype,a.prototype=new u},e.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},e.intersect=function(a,s){for(var u=[],c=a.length>s.length?a:s,d=a.length>s.length?s:a,m=0,v=d.length;m<v;m++)~e.indexOf(c,d[m])&&u.push(d[m]);return u},e.indexOf=function(a,s,u){var c=a.length;for(u=u<0?u+c<0?0:u+c:u||0;u<c&&a[u]!==s;u++);return c<=u?-1:u},e.toArray=function(a){for(var s=[],u=0,c=a.length;u<c;u++)s.push(a[u]);return s},e.ua={},e.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var a=new XMLHttpRequest}catch{return!1}return a.withCredentials!=null}(),e.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent),e.ua.iDevice=typeof navigator<"u"&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,root),function(t,r){function e(){}t.EventEmitter=e,e.prototype.on=function(n,o){return this.$events||(this.$events={}),this.$events[n]?r.util.isArray(this.$events[n])?this.$events[n].push(o):this.$events[n]=[this.$events[n],o]:this.$events[n]=o,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(n,o){var i=this;function a(){i.removeListener(n,a),o.apply(this,arguments)}return a.listener=o,this.on(n,a),this},e.prototype.removeListener=function(n,o){if(this.$events&&this.$events[n]){var i=this.$events[n];if(r.util.isArray(i)){for(var a=-1,s=0,u=i.length;s<u;s++)if(i[s]===o||i[s].listener&&i[s].listener===o){a=s;break}if(a<0)return this;i.splice(a,1),i.length||delete this.$events[n]}else(i===o||i.listener&&i.listener===o)&&delete this.$events[n]}return this},e.prototype.removeAllListeners=function(n){return n===void 0?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},e.prototype.removeAllListenersX=function(n){if(n===void 0)return this.$events={},this;for(let o in this.$events)o!==n&&(this.$events[o]=null);return this},e.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},e.prototype.emit=function(n){if(!this.$events)return!1;var o=this.$events[n];if(!o)return!1;var i=Array.prototype.slice.call(arguments,1);if(typeof o=="function")o.apply(this,i);else{if(!r.util.isArray(o))return!1;for(var a=o.slice(),s=0,u=a.length;s<u;s++)a[s].apply(this,i)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,r){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(r){var e=meta[r];return typeof e=="string"?e:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,r){var e,n,o,i,a,s=gap,u=r[t];switch(u instanceof Date&&(u=date(t)),typeof rep=="function"&&(u=rep.call(r,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],Object.prototype.toString.apply(u)==="[object Array]"){for(i=u.length,e=0;e<i;e+=1)a[e]=str(e,u)||"null";return o=a.length===0?"[]":gap?`[
`+gap+a.join(`,
`+gap)+`
`+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&typeof rep=="object")for(i=rep.length,e=0;e<i;e+=1)typeof rep[e]=="string"&&(o=str(n=rep[e],u))&&a.push(quote(n)+(gap?": ":":")+o);else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(o=str(n,u))&&a.push(quote(n)+(gap?": ":":")+o);return o=a.length===0?"{}":gap?`{
`+gap+a.join(`,
`+gap)+`
`+s+"}":"{"+a.join(",")+"}",gap=s,o}}JSON.stringify=function(t,r,e){var n;if(gap="",indent="",typeof e=="number")for(n=0;n<e;n+=1)indent+=" ";else typeof e=="string"&&(indent=e);if(rep=r,r&&typeof r!="function"&&(typeof r!="object"||typeof r.length!="number"))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,r){var e,n,o=t[r];if(o&&typeof o=="object")for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&((n=walk(o,e))!==void 0?o[e]=n:delete o[e]);return reviver.call(t,r,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(io!==void 0?io:module.exports,typeof JSON<"u"?JSON:void 0),function(t,r){var e=t.parser={},n=e.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],o=e.reasons=["transport not supported","client not handshaken","unauthorized"],i=e.advice=["reconnect"],a=r.JSON,s=r.util.indexOf;e.encodePacket=function(c){var d=s(n,c.type),m=c.id||"",v=c.endpoint||"",g=c.ack,b=null;switch(c.type){case"error":var T=c.reason?s(o,c.reason):"",_=c.advice?s(i,c.advice):"";T===""&&_===""||(b=T+(_!==""?"+"+_:""));break;case"message":c.data!==""&&(b=c.data);break;case"event":var y={name:c.name};c.args&&c.args.length&&(y.args=c.args),b=a.stringify(y);break;case"json":b=a.stringify(c.data);break;case"connect":c.qs&&(b=c.qs);break;case"ack":b=c.ackId+(c.args&&c.args.length?"+"+a.stringify(c.args):"")}var O=[d,m+(g=="data"?"+":""),v];return b!=null&&O.push(b),O.join(":")},e.encodePayload=function(c){var d="";if(c.length==1)return c[0];for(var m=0,v=c.length;m<v;m++)d+="�"+c[m].length+"�"+c[m];return d};var u=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function(c){if(!(v=c.match(u)))return{};var d=v[2]||"",m=(c=v[5]||"",{type:n[v[1]],endpoint:v[4]||""});switch(d&&(m.id=d,v[3]?m.ack="data":m.ack=!0),m.type){case"error":var v=c.split("+");m.reason=o[v[0]]||"",m.advice=i[v[1]]||"";break;case"message":m.data=c||"";break;case"event":try{var g=a.parse(c);m.name=g.name,m.args=g.args}catch{}m.args=m.args||[];break;case"json":try{m.data=a.parse(c)}catch{}break;case"connect":m.qs=c||"";break;case"ack":if((v=c.match(/^([0-9]+)(\+)?(.*)/))&&(m.ackId=v[1],m.args=[],v[3]))try{m.args=v[3]?a.parse(v[3]):[]}catch{}}return m},e.decodePayload=function(c){var d=function(_,y){for(var O=0,V=_;V<y.length;V++){if(y.charAt(V)=="�")return O;O++}return O};if(c.charAt(0)=="�"){for(var m=[],v=1,g="";v<c.length;v++)if(c.charAt(v)=="�"){var b=c.substr(v+1).substr(0,g);if(c.charAt(v+1+Number(g))!="�"&&v+1+Number(g)!=c.length){var T=Number(g);l=d(v+T+1,c),b=c.substr(v+1).substr(0,T+l),v+=l}m.push(e.decodePacket(b)),v+=Number(g)+1,g=""}else g+=c.charAt(v);return m}return[e.decodePacket(c)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r){function e(n,o){this.socket=n,this.sessid=o}t.Transport=e,r.util.mixin(e,r.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(n){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""){var o=r.parser.decodePayload(n);if(o&&o.length)for(var i=0,a=o.length;i<a;i++)this.onPacket(o[i])}return this},e.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.socket&&n.socket.publish("info","socket disconnected by setCloseTimeout"),n.onDisconnect()},this.socket.closeTimeout)}},e.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect():this.socket.setBuffer(!1),this):this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(n){this.send(r.parser.encodePacket(n))},e.prototype.onHeartbeat=function(n){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.socket.publish("info","transport onClose"),this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect(),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},e.prototype.onDisconnectDone=function(){},e.prototype.onConnectionOver=function(){},e.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+r.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(n,o){o.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(i){if(this.options={port:80,secure:!1,document:"document"in e&&document,resource:"socket.io",transports:i.transports||r.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,needToXHR:!0,manualFlush:!1},r.util.merge(this.options,i),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||r.util.ua.hasCORS)){var a=this;r.util.on(e,"beforeunload",function(){a.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function o(){}t.Socket=n,r.util.mixin(n,r.EventEmitter),n.prototype.of=function(i){return this.namespaces[i]||(this.namespaces[i]=new r.SocketNamespace(this,i),i!==""&&this.namespaces[i].packet({type:"connect"})),this.namespaces[i]},n.prototype.publish=function(){var i;for(var a in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(a)&&(i=this.of(a)).$emit.apply(i,arguments)},n.prototype.guid=function(){var i=root.crypto||root.msCrypto;if(i){var a=new Uint8Array(16);i.getRandomValues(a),a[6]&=15,a[6]|=64,a[8]&=63,a[8]|=128;for(var s="",u=0;u<a.length;u++){var c=a[u].toString(16);c.length===1&&(c="0"+c),s+=c}return s.substring(0,8)+"-"+s.substring(8,12)+"-"+s.substring(12,16)+"-"+s.substring(16,20)+"-"+s.substring(20)}},n.prototype.handshake=function(i){var a=this,s=this.options;if(!this.options.needToXHR&&this.options.transports.length===1&&this.options.transports[0]==="websocket"){var u=this.guid();if(u)return void setTimeout(function(){a.publish("info","xhr, skip and get:"+u),i.apply(null,[u,"90","60","websocket"])},0)}function c(b){b instanceof Error?(a.connecting=!1,a.publish("info","xhr, status:200, but got error:",b),a.onError("xhr, status:200, but got error:"+b.message,b)):i.apply(null,b.split(":"))}var d=["http"+(s.secure?"s":"")+":/",s.host+":"+s.port,s.resource,r.protocol,r.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!r.util.ua.hasCORS&&typeof document<"u"&&document){var m=document.getElementsByTagName("script")[0],v=document.createElement("script");v.src=d+"&jsonp="+r.j.length,v.onreadystatechange=function(){this.readyState=="loaded"&&v.parentNode&&(v.parentNode.removeChild(v),a.connecting=!1,a.publish("info","xhr, jsonp:Server down or port not open"),!a.reconnecting&&a.onError("Server down or port not open",new Error("xhr, jsonp:server down or port not open")),a.publish("handshake_failed"))},m.parentNode.insertBefore(v,m),r.j.push(function(b){c(b),v.parentNode.removeChild(v)})}else{var g=r.util.request();g.open("GET",d,!0),g.timeout=8e3,this.isXDomain()&&(g.withCredentials=!0),g.onreadystatechange=function(){a.publish("info","xhr, readyState:"+g.readyState+" status:"+g.status),g.readyState==4&&(a.publish("info","xhr, responseText:"+g.responseText),g.onreadystatechange=o,g.status==200?c(g.responseText):g.status==403?(a.connecting=!1,a.onError(g.responseText,new Error("xhr, status:403"+g.responseText)),a.publish("handshake_failed")):(a.connecting=!1,!a.reconnecting&&a.onError(g.responseText,new Error("xhr, status:"+g.status+" "+g.responseText)),a.publish("handshake_failed")))},g.ontimeout=function(b){a.publish("info","xhr, timeout"),a.connecting=!1,!a.reconnecting&&a.onError(g.responseText,new Error("xhr, timeout")),a.publish("handshake_failed")},g.send(null)}},n.prototype.connect=function(i){if(this.connecting)return this;var a=this;return a.connecting=!0,this.handshake(function(s,u,c,d){a.publish("info","SocketIO handshake parameter: sid: "+s+", transports: "+d+", close: "+c+", heartbeat: "+u),a.sessionid=s,a.closeTimeout=1e3*c,a.heartbeatTimeout=1e3*u,a.transports||(a.transports=a.origTransports=d?r.util.intersect(d.split(","),a.options.transports):a.options.transports),a.setHeartbeatTimeout(),a.once("connect",function(){a.publish("info","tcp, clear connect timeout due to recv connect event"),clearTimeout(a.connectTimeoutTimer),a.connectTimeoutTimer=null,i&&typeof i=="function"&&i()}),a.doConnect()}),this},n.prototype.doConnect=function(){var i=this;if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(i.transports),!i.transport)return i.publish("connect_failed");i.transport.ready(i,function(){i.connecting=!0,i.publish("info","tcp, connecting, transport ready in "+i.transport.name),i.publish("connecting",i.transport.name),i.transport.open(),i.options["connect timeout"]&&(i.connectTimeoutTimer&&clearTimeout(i.connectTimeoutTimer),i.publish("info","set new connect timeout"),i.connectTimeoutTimer=setTimeout(function(){i.publish("info","trigger connect timeout due to setTimeout"),i.transport.close(),i.tryNextTransport()},i.options["connect timeout"]))})},n.prototype.getTransport=function(i){const a=this;for(var s,u=i||this.transports,c=0;s=u[c];c++)if(a.publish("info","check transport: "+s),r.Transport[s]&&r.Transport[s].check(this)&&(!this.isXDomain()||r.Transport[s].xdomainCheck(this)))return a.publish("info","use transport: "+s),new r.Transport[s](this,this.sessionid);return null},n.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var i=this.transports;i.length>0&&i.splice(0,1)[0]!=this.transport.name;);i.length?this.doConnect():this.publish("connect_failed")}},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var i=this;this.heartbeatTimeoutTimer=setTimeout(function(){i.transport&&(i.publish("info","transport closed by setHeartbeatTimeout"),i.transport.onClose())},this.heartbeatTimeout)}},n.prototype.packet=function(i){return this.connected&&!this.doBuffer?this.transport.packet(i):this.buffer.push(i),this},n.prototype.setBuffer=function(i){this.doBuffer=i,!i&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.publish("info","socket disconnected by IM SDK"),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var i=r.util.request(),a=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,r.protocol,"",this.sessionid].join("/")+"/?disconnect=1";i.open("GET",a,!1),i.send(null),this.publish("info","socket disconnected by disconnectSync before page unload"),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var i=e&&e.location||{},a=i.port||(i.protocol=="https:"?443:80);return this.options.host!==i.hostname||this.options.port!=a},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.publish("info","tcp, websocket onOpen"),this.open=!0},n.prototype.onClose=function(){this.publish("info","tcp, websocket onClose"),this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(i){this.of(i.endpoint).onPacket(i)},n.prototype.onError=function(i,a){i&&i.advice&&i.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",i&&i.reason?i.reason:i,a)},n.prototype.onDisconnect=function(i){var a=this.connected,s=this.connecting;this.publish("info",i?"tcp, onDisconnect reason:"+i:"tcp, onDisconnect"),this.connected=!1,this.connecting=!1,this.open=!1,(a||s)&&this.transport&&(this.transport.close(),this.transport.clearTimeouts(),a&&(this.publish("disconnect",i),i!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),s&&(this.connectTimeoutTimer&&(this.publish("info","clear connect timeout due to onDisconnect"),clearTimeout(this.connectTimeoutTimer)),this.tryNextTransport()))},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var i=this,a=this.options["max reconnection attempts"],s=this.options["try multiple transports"],u=this.options["reconnection limit"];function c(){if(i.connected){for(var m in i.namespaces)i.namespaces.hasOwnProperty(m)&&m!==""&&i.namespaces[m].packet({type:"connect"});i.publish("reconnect",i.transport.name,i.reconnectionAttempts)}clearTimeout(i.reconnectionTimer),i.removeListener("connect_failed",d),i.removeListener("connect",d),i.reconnecting=!1,delete i.reconnectionAttempts,delete i.reconnectionDelay,delete i.reconnectionTimer,delete i.redoTransports,i.options["try multiple transports"]=s}function d(){if(i.reconnecting)return i.connected?c():i.connecting&&i.reconnecting?i.reconnectionTimer=setTimeout(d,1e3):void(i.reconnectionAttempts++>=a?i.redoTransports?(i.publish("reconnect_failed"),c()):(i.on("connect_failed",d),i.options["try multiple transports"]=!0,i.transports=i.origTransports,i.transport=i.getTransport(),i.redoTransports=!0,i.connect()):(i.reconnectionDelay<u&&(i.reconnectionDelay*=2),i.connect(),i.publish("reconnecting",i.reconnectionDelay,i.reconnectionAttempts),i.reconnectionTimer=setTimeout(d,i.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(d,this.reconnectionDelay),this.on("connect",d)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r){function e(o,i){this.socket=o,this.name=i||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(o,i){this.namespace=o,this.name=i}t.SocketNamespace=e,r.util.mixin(e,r.EventEmitter),e.prototype.$emit=r.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(o){return o.endpoint=this.name,this.socket.packet(o),this.flags={},this},e.prototype.send=function(o,i){var a={type:this.flags.json?"json":"message",data:o};return typeof i=="function"&&(a.id=++this.ackPackets,a.ack=!0,this.acks[a.id]=i),this.packet(a)},e.prototype.emit=function(o){var i=Array.prototype.slice.call(arguments,1),a=i[i.length-1],s={type:"event",name:o};return typeof a=="function"&&(s.id=++this.ackPackets,s.ack="data",this.acks[s.id]=a,i=i.slice(0,i.length-1)),s.args=i,this.packet(s)},e.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(o){var i=this;function a(){i.packet({type:"ack",args:r.util.toArray(arguments),ackId:o.id})}switch(o.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?(this.socket.publish("info","socket disconnected by SocketNameSpace.onPacket"),this.socket.onDisconnect(o.reason||"booted")):this.$emit("disconnect",o.reason);break;case"message":case"json":var s=["message",o.data];o.ack=="data"?s.push(a):o.ack&&this.packet({type:"ack",ackId:o.id}),this.$emit.apply(this,s);break;case"event":s=[o.name].concat(o.args),o.ack=="data"&&s.push(a),this.$emit.apply(this,s);break;case"ack":this.acks[o.ackId]&&(this.acks[o.ackId].apply(this,o.args),delete this.acks[o.ackId]);break;case"error":this.socket.publish("info","packet, type:error",o),o.advice?this.socket.onError(o,new Error("packet, type:error and advice is "+o.advice)):o.reason==="unauthorized"?this.$emit("connect_failed",o.reason):this.$emit("error",o.reason,new Error("packet, type:error and reason is "+o.reason))}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(o){r.Transport.apply(this,arguments)}t.websocket=n,r.util.inherit(n,r.Transport),n.prototype.name="websocket",n.prototype.open=function(){var o,i=r.util.query(this.socket.options.query),a=this;return o||(o=e.MozWebSocket||e.WebSocket),this.websocket=new o(this.prepareUrl()+i),this.websocket.onopen=function(){a.onOpen(),a.socket.setBuffer(!1)},this.websocket.onmessage=function(s){a.onData(s.data)},this.websocket.onclose=function(){a.socket.setBuffer(!0),a.onClose()},this.websocket.onerror=function(s){var u="";s&&s.message?u=s.message:s.target&&(u=s.target.readyState?"websocket, readyState:"+s.target.readyState:"websocket event"),a.onError(u,s)},this},r.util.ua.iDevice?n.prototype.send=function(o){var i=this;return setTimeout(function(){i.websocket.send(o)},0),this}:n.prototype.send=function(o){return this.websocket.send(o),this},n.prototype.payload=function(o){for(var i=0,a=o.length;i<a;i++)this.packet(o[i]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(o,i){this.socket.publish("info","tcp, onError",o,i),this.socket.onError(o,i)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e},n.xdomainCheck=function(){return!0},r.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(i){i&&(r.Transport.apply(this,arguments),this.sendBuffer=[])}function o(){}t.XHR=n,r.util.inherit(n,r.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(i){for(var a=[],s=0,u=i.length;s<u;s++)a.push(r.parser.encodePacket(i[s]));this.send(r.parser.encodePayload(a))},n.prototype.send=function(i){return this.post(i),this},n.prototype.post=function(i){var a=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),e.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=o,a.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=o,a.posting=!1,this.status==200?a.socket.setBuffer(!1):a.onClose())},this.sendXHR.send(i)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(i){var a=r.util.request(this.socket.isXDomain()),s=r.util.query(this.socket.options.query,"t="+ +new Date);if(a.open(i||"GET",this.prepareUrl()+s,!0),i=="POST")try{a.setRequestHeader?a.setRequestHeader("Content-type","text/plain;charset=UTF-8"):a.contentType="text/plain"}catch{}return a},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(i,a){try{var s=r.util.request(a),u=e.XDomainRequest&&s instanceof XDomainRequest,c=i&&i.options&&i.options.secure?"https:":"http:",d=e.location&&c!=e.location.protocol;if(s&&(!u||!d))return!0}catch{}return!1},n.xdomainCheck=function(i){return n.check(i,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(){r.Transport.XHR.apply(this,arguments)}function o(){}t["xhr-polling"]=n,r.util.inherit(n,r.Transport.XHR),r.util.merge(n,r.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return r.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.isOpen){var i=this;this.xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=o,this.onerror=o,i.retryCounter=1,i.onData(this.responseText),i.get()},this.xhr.onerror=function(){i.retryCounter++,!i.retryCounter||i.retryCounter>3?i.onClose():i.get()}):this.xhr.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=o,this.status==200?(i.onData(this.responseText),i.get()):i.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(r.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=o;try{this.xhr.abort()}catch{}this.xhr=null}},n.prototype.ready=function(i,a){var s=this;r.util.defer(function(){a.call(s)})},r.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return io}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===void 0||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(56),__webpack_require__(145)(module))},function(t,r){t.exports=function(e){var n=-1,o=Array(e.size);return e.forEach(function(i){o[++n]=i}),o}},function(t,r,e){var n,o=e(25),i=e(44),a=e(13),s=e(74),u=e(685),c=e(692),d={initReporter:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v={app_key:m.appKey,platform:"Web",dev_id:i.deviceId,sdk_ver:a.info.version,env:"online",os_name:s.os?s.os.family:"",os_ver:s.os?s.os.version:"",model:s.version,manufactor:a.hostEnv,host_env:a.hostEnv,host_info:s.ua,host_env_ver:s.version};a.isBrowser||(m.isDataReportEnable=!1);var g=new u({isDataReportEnable:m.isDataReportEnable,reportConfigUrl:m.reportConfigUrl,reportUrl:m.reportUrl,common:v,request:c,logger:m.logger,autoStart:a.isBrowser});return g}};d.sendBeacon=navigator&&navigator.sendBeacon&&o(n=navigator.sendBeacon).call(n,navigator)||function(m,v){var g=new XMLHttpRequest;g.open("POST",m,!0),g.send(v)},t.exports=d},function(t,r,e){t.exports=e(686)},function(t,r,e){var n=e(1),o=e(14);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},function(t,r,e){var n=e(1),o=e(11),i=e(112),a=e(28),s=e(29),u=e(38).f,c=e(131),d=e(165),m=e(703),v=e(127),g=e(705),b=!1,T=v("meta"),_=0,y=function(V){u(V,T,{value:{objectID:"O"+_++,weakData:{}}})},O=t.exports={enable:function(){O.enable=function(){},b=!0;var V=c.f,Ce=o([].splice),ae={};ae[T]=1,V(ae).length&&(c.f=function(Fe){for(var _e=V(Fe),de=0,oe=_e.length;de<oe;de++)if(_e[de]===T){Ce(_e,de,1);break}return _e},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(V,Ce){if(!a(V))return typeof V=="symbol"?V:(typeof V=="string"?"S":"P")+V;if(!s(V,T)){if(!m(V))return"F";if(!Ce)return"E";y(V)}return V[T].objectID},getWeakData:function(V,Ce){if(!s(V,T)){if(!m(V))return!0;if(!Ce)return!1;y(V)}return V[T].weakData},onFreeze:function(V){return g&&b&&m(V)&&!s(V,T)&&y(V),V}};i[T]=!0},function(t,r,e){var n=e(19),o=e(31),i=e(16),a=e(36),s=TypeError;t.exports=function(u,c){var d,m=a(this),v=o(m.get),g=o(m.has),b=o(m.set),T=arguments.length>2?arguments[2]:void 0;if(!i(c)&&!i(T))throw s("At least one callback required");return n(g,m,u)?(d=n(v,m,u),i(c)&&(d=c(d),n(b,m,u,d))):i(T)&&(d=T(),n(b,m,u,d)),d}},function(t,r,e){t.exports=e(735)},function(t,r,e){var n=e(5);e(44);function o(){}o.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var i=o.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};o.validTypes=n(o.typeMap),o.setFlow=function(a,s){a.flow=a.from===s?a.to===s?"in":"out":"in",a.type==="robot"&&a.content&&a.content.msgOut&&(a.flow="in")},o.getType=function(a){var s=a.type;return i[s]||s},t.exports=o},function(t,r,e){t.exports=function(n,o,i,a){var s=self||window;try{try{var u;try{u=new s.Blob([n])}catch{(u=new(s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder)).append(n),u=u.getBlob()}var c=s.URL||s.webkitURL,d=c.createObjectURL(u),m=new s[o](d,i);return c.revokeObjectURL(d),m}catch{return new s[o]("data:application/javascript,".concat(encodeURIComponent(n)),i)}}catch{if(!a)throw Error("Inline worker is not supported");return new s[o](a,i)}}},function(t,r,e){e(314).polyfill(),e(13).isBrowser=!0},function(t,r,e){var n=e(373);t.exports=n},function(t,r,e){var n=e(467);t.exports=n},function(t,r){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(n,o){var i=typeof n;return!!(o=o??9007199254740991)&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<o}},function(t,r,e){t.exports=e(555)},function(t,r,e){(function(n){var o,i=e(26),a=e(3),s=e(123),u=e(15),c=e(32),d=e(2),m=e(47),v=e(7),g=e(5),b=e(17);(function(T,_){var y,O=(T=T!==void 0?T:typeof self<"u"?self:n!==void 0?n:{}).IDBKeyRange||T.webkitIDBKeyRange,V="readonly",Ce="readwrite",ae=Object.prototype.hasOwnProperty,Fe=function(){if(!y&&!(y=T.indexedDB||T.webkitIndexedDB||T.mozIndexedDB||T.oIndexedDB||T.msIndexedDB||(T.indexedDB===null&&T.shimIndexedDB?T.shimIndexedDB:void 0)))throw"IndexedDB required";return y},_e=!1,de=navigator&&!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent),oe=function(dr){return dr},he=function(dr){var pr;return u(pr=Object.prototype.toString.call(dr)).call(pr,8,-1).toLowerCase()},Ve=function(dr){return typeof dr=="function"},le=function(dr){return he(dr)==="number"},ie=function(dr){return he(dr)==="array"},Ie=function(dr){return dr===void 0},pe=function(dr,pr){var ar=this,hr=!1;this.name=pr,this.getIndexedDB=function(){return dr},this.add=function(sr){if(hr)throw"Database has been closed";for(var $e=[],er=0,or=0;or<arguments.length-1;or++)if(c(arguments[or+1]))for(var ze=0;ze<arguments[or+1].length;ze++)$e[er]=arguments[or+1][ze],er++;else $e[er]=arguments[or+1],er++;var rr=dr.transaction(sr,Ce),Et=rr.objectStore(sr);return new a(function(Lt,cr){d($e).call($e,function(mr){var vr;if(mr.item&&mr.key){var Tr=mr.key;mr=mr.item,vr=Et.add(mr,Tr)}else vr=Et.add(mr);vr.onsuccess=function(Ir){var kr=Ir.target,Ar=kr.source.keyPath;Ar===null&&(Ar="__id__"),m(mr,Ar,{value:kr.result,enumerable:!0})}}),rr.oncomplete=function(){Lt($e,ar)},rr.onerror=function(mr){mr.preventDefault(),cr(mr)},rr.onabort=function(mr){cr(mr)}})},this.updateAndDelete=function(sr,$e,er){if(hr)throw"Database has been closed";var or=dr.transaction(sr,Ce),ze=or.objectStore(sr),rr=ze.keyPath;return new a(function(Et,Lt){d($e).call($e,function(cr){if(cr.item&&cr.key){var mr=cr.key;cr=cr.item,ze.put(cr,mr)}else ze.put(cr)}),d(er).call(er,function(cr){ze.delete(cr[rr])}),or.oncomplete=function(){Et([$e,er])},or.onerror=function(cr){Lt(cr)}})},this.update=function(sr){if(hr)throw"Database has been closed";for(var $e,er=[],or=1;or<arguments.length;or++)c($e=arguments[or])?er=v(er).call(er,$e):er.push($e);var ze=dr.transaction(sr,Ce),rr=ze.objectStore(sr);return rr.keyPath,new a(function(Et,Lt){d(er).call(er,function(cr){var mr;if(cr.item&&cr.key){var vr=cr.key;cr=cr.item,mr=rr.put(cr,vr)}else mr=rr.put(cr);mr.onsuccess=function(Tr){},mr.onerror=function(Tr){}}),ze.oncomplete=function(){Et(er,ar)},ze.onerror=function(cr){Lt(cr)},ze.onabort=function(cr){Lt(cr)}})},this.remove=function(sr,$e,er,or,ze,rr,Et){if(hr)throw"Database has been closed";var Lt=dr.transaction(sr,Ce),cr=Lt.objectStore(sr);return new a(function(mr,vr){function Tr(kr){return kr==null}var Ir;Tr(or)&&(or=-1/0),Tr(ze)&&(ze=1/0),$e===null||c($e)||($e=[$e]),Tr(er)?$e!==null?d($e).call($e,function(kr){cr.delete(kr)}):cr.delete(range=O.bound(or,ze,rr,Et)):(Ir=$e!==null?O.only($e[0]):O.bound(or,ze,rr,Et),cr.index(er).openCursor(Ir).onsuccess=function(kr){var Ar=kr.target.result;Ar&&(Ar.delete(),Ar.continue())}),Lt.oncomplete=function(){mr()},Lt.onerror=function(kr){vr(kr)},Lt.onabort=function(kr){vr(kr)}})},this.clear=function(sr){if(hr)throw"Database has been closed";var $e=dr.transaction(sr,Ce);return $e.objectStore(sr).clear(),new a(function(er,or){$e.oncomplete=function(){er()},$e.onerror=function(ze){or(ze)}})},this.close=function(){hr||(dr.close(),hr=!0,delete Dt[pr])},this.get=function(sr,$e){if(hr)throw"Database has been closed";var er=dr.transaction(sr),or=er.objectStore(sr).get($e);return new a(function(ze,rr){or.onsuccess=function(Et){ze(Et.target.result)},er.onerror=function(Et){rr(Et)}})},this.query=function(sr,$e){if(hr)throw"Database has been closed";return new kt(sr,dr,$e)},this.count=function(sr,$e){if(hr)throw"Database has been closed";dr.transaction(sr).objectStore(sr)};for(var Ne=0,nr=dr.objectStoreNames.length;Ne<nr;Ne++)(function(sr){for(var $e in ar[sr]={},ar)ae.call(ar,$e)&&$e!=="close"&&(ar[sr][$e]=function(er){return function(){var or,ze=v(or=[sr]).call(or,u([]).call(arguments,0));return ar[er].apply(ar,ze)}}($e))})(dr.objectStoreNames[Ne])},kt=function(dr,pr,ar){var hr,Ne=this,nr=!1,sr=!1,$e=function(or,ze,rr,Et,Lt,cr,mr){return new a(function(vr,Tr){var Ir=nr||sr?Ce:V,kr=pr.transaction(dr,Ir),Ar=kr.objectStore(dr),Nr=ar?Ar.index(ar):Ar,Mn=or?O[or].apply(null,ze):null,Or=[],Pr=[Mn],Rr=0;Lt=Lt||null,cr=cr||[],rr!=="count"&&Pr.push(Et||"next");var Qr=!!nr&&g(nr);Nr[rr].apply(Nr,Pr).onsuccess=function(hn){var Ur=hn.target.result;if(i(Ur)===i(0))Or=Ur;else if(Ur){if(Lt!==null&&Lt[0]>Rr)Rr=Lt[0],Ur.advance(Lt[0]);else if(!(Lt!==null&&Rr>=Lt[0]+Lt[1])){var qr=!0,Gn="value"in Ur?Ur.value:Ur.key;d(cr).call(cr,function(jn){jn&&jn.length&&(jn.length===2?qr=qr&&Gn[jn[0]]===jn[1]:Ve(jn[0])&&(qr=qr&&jn[0].apply(void 0,[Gn])))}),qr&&(Rr++,Or.push(mr(Gn)),sr?Ur.delete():nr&&(Gn=function(jn){for(var Jr=0;Jr<Qr.length;Jr++){var Lr=Qr[Jr],Kn=nr[Lr];Kn instanceof Function&&(Kn=Kn(jn)),jn[Lr]=Kn}return jn}(Gn),Ur.update(Gn))),Ur.continue()}}},kr.oncomplete=function(){vr(Or)},kr.onerror=function(hn){Tr(hn)},kr.onabort=function(hn){Tr(hn)}})},er=function(or,ze){var rr="next",Et="openCursor",Lt=[],cr=null,mr=oe,vr=!1,Tr=function(){return $e(or,ze,Et,vr?rr+"unique":rr,cr,Lt,mr)},Ir=function(){return rr=null,Et="count",{execute:Tr}},kr=function Ur(){return(cr=ie(arguments[0])?arguments[0]:u(Array.prototype).call(arguments,0,2)).length==1&&cr.unshift(0),le(cr[1])||(cr=null),{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:Ur,map:Qr,remove:hn}},Ar=function Ur(qr){return(qr=!!Ie(qr)||!!qr)&&(Et="openKeyCursor"),{execute:Tr,keys:Ur,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:hn}},Nr=function Ur(){return Lt.push(u(Array.prototype).call(arguments,0,2)),{execute:Tr,count:Ir,keys:Ar,filter:Ur,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:hn}},Mn=function Ur(qr){return qr=!!Ie(qr)||!!qr,rr=qr?"next":"prev",{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Ur,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:hn}},Or=function Ur(qr){return qr=!!Ie(qr)||!!qr,rr=qr?"prev":"next",{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Ur,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:hn}},Pr=function Ur(qr){return qr=!!Ie(qr)||!!qr,vr=qr,{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Ur,modify:Rr,limit:kr,map:Qr,remove:hn}},Rr=function Ur(qr){return nr=qr,{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Ur,limit:kr,map:Qr,remove:hn}},Qr=function Ur(qr){return Ve(qr)&&(mr=qr),{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Ur,remove:hn}},hn=function Ur(qr){return qr=!!Ie(qr)||!!qr,sr=qr,{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:Ur}};return{execute:Tr,count:Ir,keys:Ar,filter:Nr,asc:Mn,desc:Or,distinct:Pr,modify:Rr,limit:kr,map:Qr,remove:hn}};d(hr="only bound upperBound lowerBound".split(" ")).call(hr,function(or){Ne[or]=function(){return new er(or,arguments)}}),this.filter=function(){var or=new er(null,null);return b(or).apply(or,arguments)},this.all=function(){var or;return b(or=this).call(or)}},Ue=function(dr,pr,ar,hr){var Ne=dr.target.result,nr=new pe(Ne,pr);return Dt[pr]=Ne,a.resolve(nr)},Dt={},tr={version:"0.10.2",open:function(dr){var pr;return new a(function(ar,hr){var Ne;Dt[dr.server]?Ue({target:{result:Dt[dr.server]}},dr.server,dr.version,dr.schema).then(ar,hr):(_e?a.resolve():de&&Fe().databases?new a(function(nr){var sr=function(){return Fe().databases().finally(nr)};Ne=s(sr,100),sr()}).finally(function(){_e=!0,clearInterval(Ne)}):(_e=!0,a.resolve())).then(function(){try{pr=Fe().open(dr.server,dr.version)}catch(nr){hr(nr)}pr.onsuccess=function(nr){Ue(nr,dr.server,dr.version,dr.schema).then(ar,hr)},pr.onupgradeneeded=function(nr){(function(sr,$e,er){for(var or in typeof $e=="function"&&($e=$e()),$e){var ze,rr=$e[or];for(var Et in ze=!ae.call($e,or)||er.objectStoreNames.contains(or)?sr.currentTarget.transaction.objectStore(or):er.createObjectStore(or,rr.key),rr.indexes){var Lt=rr.indexes[Et];try{ze.index(Et)}catch{ze.createIndex(Et,Lt.key||Et,g(Lt).length?Lt:{unique:!1})}}}})(nr,dr.schema,nr.target.result)},pr.onerror=function(nr){hr(nr)}})})},remove:function(dr){return new a(function(pr,ar){if(!dr)return pr();var hr,Ne;i(dr)===pe&&(dr=dr.name),typeof dr=="string"&&(hr=Dt[dr]),hr&&typeof hr.close=="function"&&hr.close();try{Ne=Fe().deleteDatabase(dr)}catch(nr){ar(nr)}Ne.onsuccess=function(nr){delete Dt[dr],pr(dr)},Ne.onerror=function(nr){ar(nr)},Ne.onblocked=function(nr){ar(nr)}})}};t.exports!==void 0?t.exports=tr:(o=(function(){return tr}).call(r,e,r,t))===void 0||(t.exports=o)})(void 0)}).call(this,e(56))},function(t,r,e){var n=e(586);t.exports=n},function(t,r,e){t.exports=e(639)},function(t,r){var e={set:function(n,o,i){e[n]=o,i&&(i.support=o)}};t.exports=e},function(t,r,e){var n=e(5),o=e(2),i=e(25),a=e(0),s=a.notundef,u=a.fillPropertyWithDefault,c=n,d={},m={},v={},g=[],b={normal:0,advanced:1},T={manager:0,all:1};d.inviteMode=d.updateCustomMode=d.updateTeamMode=T;var _={0:"normal",1:"advanced"},y=d.joinMode={noVerify:0,needVerify:1,rejectAll:2};m.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},v.joinMode=c(y),g.push("join");var O=d.beInviteMode={needVerify:0,noVerify:1};function V(ae){var Fe;a.verifyOptions(ae,"action","superTeam::SuperTeam"),a.verifyOptions(ae,"teamId","superTeam::SuperTeam"),s(ae.teamId)&&(this.teamId=ae.teamId),s(ae.type)&&(this.type=b[ae.type]),s(ae.avatar)&&(this.avatar=""+ae.avatar),s(ae.name)&&(this.name=""+ae.name),s(ae.intro)&&(this.intro=""+ae.intro),s(ae.announcement)&&(this.announcement=""+ae.announcement),s(ae.custom)&&(this.custom=""+ae.custom),s(ae.inviteMode)&&(this.inviteMode=T[ae.inviteMode]),s(ae.updateCustomMode)&&(this.updateCustomMode=T[ae.updateCustomMode]),s(ae.updateTeamMode)&&(this.updateTeamMode=T[ae.updateTeamMode]),o(g).call(g,i(Fe=this.setMode).call(Fe,this,ae))}function Ce(ae,Fe){s(ae[Fe+="Mode"])&&(ae[Fe]=m[Fe][ae[Fe]])}m.beInviteMode={0:"needVerify",1:"noVerify"},g.push("beInvite"),m.inviteMode=m.updateCustomMode=m.updateTeamMode={0:"manager",1:"all"},g.push("invite"),g.push("updateCustom"),g.push("updateTeam"),v.inviteMode=v.updateCustomMode=v.updateTeamMode=c(T),v.beInviteMode=c(O),V.prototype.setMode=function(ae,Fe){s(ae[Fe+="Mode"])&&(a.verifyParamValid(Fe,ae[Fe],v[Fe],"Superteam::Team"),this[Fe]=d[Fe][ae[Fe]])},V.reverse=function(ae,Fe){var _e=a.copy(ae);if(s(_e.teamId)&&(_e.teamId=""+_e.teamId),s(_e.type)&&(_e.type=_[_e.type]),s(_e.level)&&(_e.level=+_e.level),s(_e.valid)&&(_e.valid=+_e.valid==1),s(_e.memberNum)&&(_e.memberNum=+_e.memberNum),s(_e.memberUpdateTime)&&(_e.memberUpdateTime=+_e.memberUpdateTime),s(_e.createTime)&&(_e.createTime=+_e.createTime),s(_e.updateTime)&&(_e.updateTime=+_e.updateTime),s(_e.validToCurrentUser)&&(_e.validToCurrentUser=_e.validToCurrentUser==="1"),s(_e.mute)&&(_e.mute=_e.mute==="1"),s(_e.muteType))switch(_e.muteType){case"0":_e.mute=!1,_e.muteType="none";break;case"1":_e.mute=!0,_e.muteType="normal";break;case"3":_e.mute=!0,_e.muteType="all"}else s(_e.mute)&&(_e.mute===1?(_e.mute=!0,_e.muteType="normal"):(_e.mute=!1,_e.muteType="none"));return o(g).call(g,i(Ce).call(Ce,null,_e)),delete _e.bits,Fe||V.fillProperties(_e),_e},V.fillProperties=function(ae){return u(ae,"avatar","")},t.exports=V},function(t,r,e){t.exports=e(661)},function(t,r,e){var n=e(0).notundef;function o(i){n(i.shouldPushNotificationWhenPCOnline)&&(this.open=i.shouldPushNotificationWhenPCOnline?2:1)}o.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},o.reverse=function(i){return{shouldPushNotificationWhenPCOnline:+i.open!=1}},t.exports=o},function(t,r,e){var n=e(74),o=e(755),i=e(288),a=e(255),s=e(198),u=e(0),c=e(306),d=e(284),m=e(184),v=e(760),g=e(761);t.exports=function(b){u.merge(b,{platform:n,xhr:o,io:i,naturalSort:a,deepAccess:s,util:u,support:c,blob:d,ajax:m,LoggerPlugin:v,usePlugin:g})}},function(t,r,e){var n=e(8),o=e(9),i=e(5),a=e(106).genPrivateUrl,s=e(0),u=s.notundef,c={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function d(m){u(m.nick)&&(this.nick=""+m.nick),u(m.avatar)&&(this.avatar=""+m.avatar),u(m.custom)&&(this.custom=""+m.custom)}d.reverse=function(m){var v=s.copy(m);return u(v.chatroomId)&&(v.chatroomId=""+v.chatroomId),u(v.avatar)&&(v.avatar=a(v.avatar)),u(v.type)&&(v.type=c[v.type]),u(v.level)&&(v.level=+v.level),u(v.online)&&(v.online=+v.online==1),u(v.enterTime)&&(v.enterTime=+v.enterTime),u(v.guest)&&(v.guest=+v.guest==1),u(v.blacked)&&(v.blacked=+v.blacked==1),u(v.gaged)&&(v.gaged=+v.gaged==1),u(v.valid)&&(v.valid=+v.valid==1),u(v.updateTime)&&(v.updateTime=+v.updateTime),u(v.tempMuted)?v.tempMuted=+v.tempMuted==1:v.tempMuted=!1,u(v.tempMuteDuration)?v.tempMuteDuration=+v.tempMuteDuration:v.tempMuteDuration=0,v.online||delete v.enterTime,v.guest&&(v.type="guest",delete v.valid),v.type!=="common"&&delete v.level,delete v.guest,v},d.reverseMembers=function(m){return n(m).call(m,function(v){return o(d).call(d,v)})},d.validTypes=i(c),d.typeReverseMap=c,t.exports=d},function(t,r,e){var n,o,i,a,s,u,c,d,m,v,g,b,T,_,y,O,V,Ce,ae;t.exports=(n=e(89),e(764),void(n.lib.Cipher||(o=n,i=o.lib,a=i.Base,s=i.WordArray,u=i.BufferedBlockAlgorithm,c=o.enc,c.Utf8,d=c.Base64,m=o.algo.EvpKDF,v=i.Cipher=u.extend({cfg:a.extend(),createEncryptor:function(Fe,_e){return this.create(this._ENC_XFORM_MODE,Fe,_e)},createDecryptor:function(Fe,_e){return this.create(this._DEC_XFORM_MODE,Fe,_e)},init:function(Fe,_e,de){this.cfg=this.cfg.extend(de),this._xformMode=Fe,this._key=_e,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(Fe){return this._append(Fe),this._process()},finalize:function(Fe){return Fe&&this._append(Fe),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Fe(_e){return typeof _e=="string"?ae:V}return function(_e){return{encrypt:function(de,oe,he){return Fe(oe).encrypt(_e,de,oe,he)},decrypt:function(de,oe,he){return Fe(oe).decrypt(_e,de,oe,he)}}}}()}),i.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),g=o.mode={},b=i.BlockCipherMode=a.extend({createEncryptor:function(Fe,_e){return this.Encryptor.create(Fe,_e)},createDecryptor:function(Fe,_e){return this.Decryptor.create(Fe,_e)},init:function(Fe,_e){this._cipher=Fe,this._iv=_e}}),T=g.CBC=function(){var Fe=b.extend();function _e(de,oe,he){var Ve,le=this._iv;le?(Ve=le,this._iv=void 0):Ve=this._prevBlock;for(var ie=0;ie<he;ie++)de[oe+ie]^=Ve[ie]}return Fe.Encryptor=Fe.extend({processBlock:function(de,oe){var he=this._cipher,Ve=he.blockSize;_e.call(this,de,oe,Ve),he.encryptBlock(de,oe),this._prevBlock=de.slice(oe,oe+Ve)}}),Fe.Decryptor=Fe.extend({processBlock:function(de,oe){var he=this._cipher,Ve=he.blockSize,le=de.slice(oe,oe+Ve);he.decryptBlock(de,oe),_e.call(this,de,oe,Ve),this._prevBlock=le}}),Fe}(),_=(o.pad={}).Pkcs7={pad:function(Fe,_e){for(var de=4*_e,oe=de-Fe.sigBytes%de,he=oe<<24|oe<<16|oe<<8|oe,Ve=[],le=0;le<oe;le+=4)Ve.push(he);var ie=s.create(Ve,oe);Fe.concat(ie)},unpad:function(Fe){var _e=255&Fe.words[Fe.sigBytes-1>>>2];Fe.sigBytes-=_e}},i.BlockCipher=v.extend({cfg:v.cfg.extend({mode:T,padding:_}),reset:function(){var Fe;v.reset.call(this);var _e=this.cfg,de=_e.iv,oe=_e.mode;this._xformMode==this._ENC_XFORM_MODE?Fe=oe.createEncryptor:(Fe=oe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Fe?this._mode.init(this,de&&de.words):(this._mode=Fe.call(oe,this,de&&de.words),this._mode.__creator=Fe)},_doProcessBlock:function(Fe,_e){this._mode.processBlock(Fe,_e)},_doFinalize:function(){var Fe,_e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(_e.pad(this._data,this.blockSize),Fe=this._process(!0)):(Fe=this._process(!0),_e.unpad(Fe)),Fe},blockSize:4}),y=i.CipherParams=a.extend({init:function(Fe){this.mixIn(Fe)},toString:function(Fe){return(Fe||this.formatter).stringify(this)}}),O=(o.format={}).OpenSSL={stringify:function(Fe){var _e=Fe.ciphertext,de=Fe.salt;return(de?s.create([1398893684,1701076831]).concat(de).concat(_e):_e).toString(d)},parse:function(Fe){var _e,de=d.parse(Fe),oe=de.words;return oe[0]==1398893684&&oe[1]==1701076831&&(_e=s.create(oe.slice(2,4)),oe.splice(0,4),de.sigBytes-=16),y.create({ciphertext:de,salt:_e})}},V=i.SerializableCipher=a.extend({cfg:a.extend({format:O}),encrypt:function(Fe,_e,de,oe){oe=this.cfg.extend(oe);var he=Fe.createEncryptor(de,oe),Ve=he.finalize(_e),le=he.cfg;return y.create({ciphertext:Ve,key:de,iv:le.iv,algorithm:Fe,mode:le.mode,padding:le.padding,blockSize:Fe.blockSize,formatter:oe.format})},decrypt:function(Fe,_e,de,oe){return oe=this.cfg.extend(oe),_e=this._parse(_e,oe.format),Fe.createDecryptor(de,oe).finalize(_e.ciphertext)},_parse:function(Fe,_e){return typeof Fe=="string"?_e.parse(Fe,this):Fe}}),Ce=(o.kdf={}).OpenSSL={execute:function(Fe,_e,de,oe){oe||(oe=s.random(8));var he=m.create({keySize:_e+de}).compute(Fe,oe),Ve=s.create(he.words.slice(_e),4*de);return he.sigBytes=4*_e,y.create({key:he,iv:Ve,salt:oe})}},ae=i.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:Ce}),encrypt:function(Fe,_e,de,oe){var he=(oe=this.cfg.extend(oe)).kdf.execute(de,Fe.keySize,Fe.ivSize);oe.iv=he.iv;var Ve=V.encrypt.call(this,Fe,_e,he.key,oe);return Ve.mixIn(he),Ve},decrypt:function(Fe,_e,de,oe){oe=this.cfg.extend(oe),_e=this._parse(_e,oe.format);var he=oe.kdf.execute(de,Fe.keySize,Fe.ivSize,_e.salt);return oe.iv=he.iv,V.decrypt.call(this,Fe,_e,he.key,oe)}}))))},function(t,r,e){t.exports=e(283)},function(t,r,e){(function(n,o){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var i;i=function(){function a(nr){return typeof nr=="function"}var s=Array.isArray?Array.isArray:function(nr){return Object.prototype.toString.call(nr)==="[object Array]"},u=0,c=void 0,d=void 0,m=function(nr,sr){O[u]=nr,O[u+1]=sr,(u+=2)===2&&(d?d(V):de())},v=typeof window<"u"?window:void 0,g=v||{},b=g.MutationObserver||g.WebKitMutationObserver,T=typeof self>"u"&&n!==void 0&&{}.toString.call(n)==="[object process]",_=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function y(){var nr=setTimeout;return function(){return nr(V,1)}}var O=new Array(1e3);function V(){for(var nr=0;nr<u;nr+=2)(0,O[nr])(O[nr+1]),O[nr]=void 0,O[nr+1]=void 0;u=0}var Ce,ae,Fe,_e,de=void 0;function oe(nr,sr){var $e=this,er=new this.constructor(le);er[Ve]===void 0&&ar(er);var or=$e._state;if(or){var ze=arguments[or-1];m(function(){return dr(or,er,ze,$e._result)})}else Dt($e,er,nr,sr);return er}function he(nr){if(nr&&typeof nr=="object"&&nr.constructor===this)return nr;var sr=new this(le);return Ie(sr,nr),sr}T?de=function(){return n.nextTick(V)}:b?(ae=0,Fe=new b(V),_e=document.createTextNode(""),Fe.observe(_e,{characterData:!0}),de=function(){_e.data=ae=++ae%2}):_?((Ce=new MessageChannel).port1.onmessage=V,de=function(){return Ce.port2.postMessage(0)}):de=v===void 0?function(){try{var nr=Function("return this")().require("vertx");return(c=nr.runOnLoop||nr.runOnContext)!==void 0?function(){c(V)}:y()}catch{return y()}}():y();var Ve=Math.random().toString(36).substring(2);function le(){}function ie(nr,sr,$e){sr.constructor===nr.constructor&&$e===oe&&sr.constructor.resolve===he?function(er,or){or._state===1?kt(er,or._result):or._state===2?Ue(er,or._result):Dt(or,void 0,function(ze){return Ie(er,ze)},function(ze){return Ue(er,ze)})}(nr,sr):$e===void 0?kt(nr,sr):a($e)?function(er,or,ze){m(function(rr){var Et=!1,Lt=function(cr,mr,vr,Tr){try{cr.call(mr,vr,Tr)}catch(Ir){return Ir}}(ze,or,function(cr){Et||(Et=!0,or!==cr?Ie(rr,cr):kt(rr,cr))},function(cr){Et||(Et=!0,Ue(rr,cr))},rr._label);!Et&&Lt&&(Et=!0,Ue(rr,Lt))},er)}(nr,sr,$e):kt(nr,sr)}function Ie(nr,sr){if(nr===sr)Ue(nr,new TypeError("You cannot resolve a promise with itself"));else if(or=typeof(er=sr),er===null||or!=="object"&&or!=="function")kt(nr,sr);else{var $e=void 0;try{$e=sr.then}catch(ze){return void Ue(nr,ze)}ie(nr,sr,$e)}var er,or}function pe(nr){nr._onerror&&nr._onerror(nr._result),tr(nr)}function kt(nr,sr){nr._state===void 0&&(nr._result=sr,nr._state=1,nr._subscribers.length!==0&&m(tr,nr))}function Ue(nr,sr){nr._state===void 0&&(nr._state=2,nr._result=sr,m(pe,nr))}function Dt(nr,sr,$e,er){var or=nr._subscribers,ze=or.length;nr._onerror=null,or[ze]=sr,or[ze+1]=$e,or[ze+2]=er,ze===0&&nr._state&&m(tr,nr)}function tr(nr){var sr=nr._subscribers,$e=nr._state;if(sr.length!==0){for(var er=void 0,or=void 0,ze=nr._result,rr=0;rr<sr.length;rr+=3)er=sr[rr],or=sr[rr+$e],er?dr($e,er,or,ze):or(ze);nr._subscribers.length=0}}function dr(nr,sr,$e,er){var or=a($e),ze=void 0,rr=void 0,Et=!0;if(or){try{ze=$e(er)}catch(Lt){Et=!1,rr=Lt}if(sr===ze)return void Ue(sr,new TypeError("A promises callback cannot return that same promise."))}else ze=er;sr._state!==void 0||(or&&Et?Ie(sr,ze):Et===!1?Ue(sr,rr):nr===1?kt(sr,ze):nr===2&&Ue(sr,ze))}var pr=0;function ar(nr){nr[Ve]=pr++,nr._state=void 0,nr._result=void 0,nr._subscribers=[]}var hr=function(){function nr(sr,$e){this._instanceConstructor=sr,this.promise=new sr(le),this.promise[Ve]||ar(this.promise),s($e)?(this.length=$e.length,this._remaining=$e.length,this._result=new Array(this.length),this.length===0?kt(this.promise,this._result):(this.length=this.length||0,this._enumerate($e),this._remaining===0&&kt(this.promise,this._result))):Ue(this.promise,new Error("Array Methods must be provided an Array"))}return nr.prototype._enumerate=function(sr){for(var $e=0;this._state===void 0&&$e<sr.length;$e++)this._eachEntry(sr[$e],$e)},nr.prototype._eachEntry=function(sr,$e){var er=this._instanceConstructor,or=er.resolve;if(or===he){var ze=void 0,rr=void 0,Et=!1;try{ze=sr.then}catch(cr){Et=!0,rr=cr}if(ze===oe&&sr._state!==void 0)this._settledAt(sr._state,$e,sr._result);else if(typeof ze!="function")this._remaining--,this._result[$e]=sr;else if(er===Ne){var Lt=new er(le);Et?Ue(Lt,rr):ie(Lt,sr,ze),this._willSettleAt(Lt,$e)}else this._willSettleAt(new er(function(cr){return cr(sr)}),$e)}else this._willSettleAt(or(sr),$e)},nr.prototype._settledAt=function(sr,$e,er){var or=this.promise;or._state===void 0&&(this._remaining--,sr===2?Ue(or,er):this._result[$e]=er),this._remaining===0&&kt(or,this._result)},nr.prototype._willSettleAt=function(sr,$e){var er=this;Dt(sr,void 0,function(or){return er._settledAt(1,$e,or)},function(or){return er._settledAt(2,$e,or)})},nr}(),Ne=function(){function nr(sr){this[Ve]=pr++,this._result=this._state=void 0,this._subscribers=[],le!==sr&&(typeof sr!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof nr?function($e,er){try{er(function(or){Ie($e,or)},function(or){Ue($e,or)})}catch(or){Ue($e,or)}}(this,sr):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return nr.prototype.catch=function(sr){return this.then(null,sr)},nr.prototype.finally=function(sr){var $e=this.constructor;return a(sr)?this.then(function(er){return $e.resolve(sr()).then(function(){return er})},function(er){return $e.resolve(sr()).then(function(){throw er})}):this.then(sr,sr)},nr}();return Ne.prototype.then=oe,Ne.all=function(nr){return new hr(this,nr).promise},Ne.race=function(nr){var sr=this;return s(nr)?new sr(function($e,er){for(var or=nr.length,ze=0;ze<or;ze++)sr.resolve(nr[ze]).then($e,er)}):new sr(function($e,er){return er(new TypeError("You must pass an array to race."))})},Ne.resolve=he,Ne.reject=function(nr){var sr=new this(le);return Ue(sr,nr),sr},Ne._setScheduler=function(nr){d=nr},Ne._setAsap=function(nr){m=nr},Ne._asap=m,Ne.polyfill=function(){var nr=void 0;if(o!==void 0)nr=o;else if(typeof self<"u")nr=self;else try{nr=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var sr=nr.Promise;if(sr){var $e=null;try{$e=Object.prototype.toString.call(sr.resolve())}catch{}if($e==="[object Promise]"&&!sr.cast)return}nr.Promise=Ne},Ne.Promise=Ne,Ne},t.exports=i()}).call(this,e(315),e(56))},function(t,r){var e,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(_){if(e===setTimeout)return setTimeout(_,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(_,0);try{return e(_,0)}catch{try{return e.call(null,_,0)}catch{return e.call(this,_,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:i}catch{e=i}try{n=typeof clearTimeout=="function"?clearTimeout:a}catch{n=a}})();var u,c=[],d=!1,m=-1;function v(){d&&u&&(d=!1,u.length?c=u.concat(c):m=-1,c.length&&g())}function g(){if(!d){var _=s(v);d=!0;for(var y=c.length;y;){for(u=c,c=[];++m<y;)u&&u[m].run();m=-1,y=c.length}u=null,d=!1,function(O){if(n===clearTimeout)return clearTimeout(O);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(O);try{n(O)}catch{try{return n.call(null,O)}catch{return n.call(this,O)}}}(_)}}function b(_,y){this.fun=_,this.array=y}function T(){}o.nextTick=function(_){var y=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)y[O-1]=arguments[O];c.push(new b(_,y)),c.length!==1||d||s(g)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=T,o.addListener=T,o.once=T,o.off=T,o.removeListener=T,o.removeAllListeners=T,o.emit=T,o.prependListener=T,o.prependOnceListener=T,o.listeners=function(_){return[]},o.binding=function(_){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(_){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,r,e){var n=e(21),o=e(317),i=Array.prototype;t.exports=function(a){var s=a.indexOf;return a===i||n(i,a)&&s===i.indexOf?o:s}},function(t,r,e){e(318);var n=e(30);t.exports=n("Array").indexOf},function(t,r,e){var n=e(1),o=e(156),i=e(160).indexOf,a=e(94),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0,c=a("indexOf");n({target:"Array",proto:!0,forced:u||!c},{indexOf:function(d){var m=arguments.length>1?arguments[1]:void 0;return u?s(this,d,m)||0:i(this,d,m)}})},function(t,r,e){var n=e(19),o=e(28),i=e(126),a=e(157),s=e(320),u=e(20),c=TypeError,d=u("toPrimitive");t.exports=function(m,v){if(!o(m)||i(m))return m;var g,b=a(m,d);if(b){if(v===void 0&&(v="default"),g=n(b,m,v),!o(g)||i(g))return g;throw c("Can't convert object to primitive value")}return v===void 0&&(v="number"),s(m,v)}},function(t,r,e){var n=e(19),o=e(16),i=e(28),a=TypeError;t.exports=function(s,u){var c,d;if(u==="string"&&o(c=s.toString)&&!i(d=n(c,s))||o(c=s.valueOf)&&!i(d=n(c,s))||u!=="string"&&o(c=s.toString)&&!i(d=n(c,s)))return d;throw a("Can't convert object to primitive value")}},function(t,r,e){var n=e(14),o=Object.defineProperty;t.exports=function(i,a){try{o(n,i,{value:a,configurable:!0,writable:!0})}catch{n[i]=a}return a}},function(t,r){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(o){var i=+o;return(i>0?n:e)(i)}},function(t,r,e){var n=e(110),o=Math.min;t.exports=function(i){return i>0?o(n(i),9007199254740991):0}},function(t,r,e){var n=e(325);t.exports=n},function(t,r,e){var n=e(21),o=e(326),i=Array.prototype;t.exports=function(a){var s=a.concat;return a===i||n(i,a)&&s===i.concat?o:s}},function(t,r,e){e(212);var n=e(30);t.exports=n("Array").concat},function(t,r,e){var n=e(79),o=e(129),i=e(28),a=e(20)("species"),s=Array;t.exports=function(u){var c;return n(u)&&(c=u.constructor,(o(c)&&(c===s||n(c.prototype))||i(c)&&(c=c[a])===null)&&(c=void 0)),c===void 0?s:c}},function(t,r,e){e(329);var n=e(12).Object;t.exports=function(o,i){return n.create(o,i)}},function(t,r,e){e(1)({target:"Object",stat:!0,sham:!e(27)},{create:e(80)})},function(t,r,e){t.exports=e(331)},function(t,r,e){var n=e(332);e(359),e(360),e(361),e(362),e(363),e(364),e(365),t.exports=n},function(t,r,e){var n=e(218);e(358),t.exports=n},function(t,r,e){e(212),e(96),e(219),e(340),e(341),e(342),e(343),e(224),e(344),e(345),e(346),e(347),e(348),e(349),e(225),e(350),e(351),e(352),e(353),e(354);var n=e(12);t.exports=n.Symbol},function(t,r,e){var n=e(1),o=e(14),i=e(19),a=e(11),s=e(48),u=e(27),c=e(92),d=e(4),m=e(29),v=e(21),g=e(36),b=e(43),T=e(125),_=e(49),y=e(77),O=e(80),V=e(118),Ce=e(131),ae=e(165),Fe=e(132),_e=e(90),de=e(38),oe=e(163),he=e(148),Ve=e(66),le=e(109),ie=e(130),Ie=e(112),pe=e(127),kt=e(20),Ue=e(133),Dt=e(22),tr=e(221),dr=e(81),pr=e(97),ar=e(84).forEach,hr=ie("hidden"),Ne=pr.set,nr=pr.getterFor("Symbol"),sr=Object.prototype,$e=o.Symbol,er=$e&&$e.prototype,or=o.TypeError,ze=o.QObject,rr=_e.f,Et=de.f,Lt=ae.f,cr=he.f,mr=a([].push),vr=le("symbols"),Tr=le("op-symbols"),Ir=le("wks"),kr=!ze||!ze.prototype||!ze.prototype.findChild,Ar=u&&d(function(){return O(Et({},"a",{get:function(){return Et(this,"a",{value:7}).a}})).a!=7})?function(Ur,qr,Gn){var jn=rr(sr,qr);jn&&delete sr[qr],Et(Ur,qr,Gn),jn&&Ur!==sr&&Et(sr,qr,jn)}:Et,Nr=function(Ur,qr){var Gn=vr[Ur]=O(er);return Ne(Gn,{type:"Symbol",tag:Ur,description:qr}),u||(Gn.description=qr),Gn},Mn=function(Ur,qr,Gn){Ur===sr&&Mn(Tr,qr,Gn),g(Ur);var jn=T(qr);return g(Gn),m(vr,jn)?(Gn.enumerable?(m(Ur,hr)&&Ur[hr][jn]&&(Ur[hr][jn]=!1),Gn=O(Gn,{enumerable:y(0,!1)})):(m(Ur,hr)||Et(Ur,hr,y(1,{})),Ur[hr][jn]=!0),Ar(Ur,jn,Gn)):Et(Ur,jn,Gn)},Or=function(Ur,qr){g(Ur);var Gn=b(qr),jn=V(Gn).concat(hn(Gn));return ar(jn,function(Jr){u&&!i(Pr,Gn,Jr)||Mn(Ur,Jr,Gn[Jr])}),Ur},Pr=function(Ur){var qr=T(Ur),Gn=i(cr,this,qr);return!(this===sr&&m(vr,qr)&&!m(Tr,qr))&&(!(Gn||!m(this,qr)||!m(vr,qr)||m(this,hr)&&this[hr][qr])||Gn)},Rr=function(Ur,qr){var Gn=b(Ur),jn=T(qr);if(Gn!==sr||!m(vr,jn)||m(Tr,jn)){var Jr=rr(Gn,jn);return!Jr||!m(vr,jn)||m(Gn,hr)&&Gn[hr][jn]||(Jr.enumerable=!0),Jr}},Qr=function(Ur){var qr=Lt(b(Ur)),Gn=[];return ar(qr,function(jn){m(vr,jn)||m(Ie,jn)||mr(Gn,jn)}),Gn},hn=function(Ur){var qr=Ur===sr,Gn=Lt(qr?Tr:b(Ur)),jn=[];return ar(Gn,function(Jr){!m(vr,Jr)||qr&&!m(sr,Jr)||mr(jn,vr[Jr])}),jn};c||(Ve(er=($e=function(){if(v(er,this))throw or("Symbol is not a constructor");var Ur=arguments.length&&arguments[0]!==void 0?_(arguments[0]):void 0,qr=pe(Ur),Gn=function(jn){this===sr&&i(Gn,Tr,jn),m(this,hr)&&m(this[hr],qr)&&(this[hr][qr]=!1),Ar(this,qr,y(1,jn))};return u&&kr&&Ar(sr,qr,{configurable:!0,set:Gn}),Nr(qr,Ur)}).prototype,"toString",function(){return nr(this).tag}),Ve($e,"withoutSetter",function(Ur){return Nr(pe(Ur),Ur)}),he.f=Pr,de.f=Mn,oe.f=Or,_e.f=Rr,Ce.f=ae.f=Qr,Fe.f=hn,Ue.f=function(Ur){return Nr(kt(Ur),Ur)},u&&(Et(er,"description",{configurable:!0,get:function(){return nr(this).description}}),s||Ve(sr,"propertyIsEnumerable",Pr,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:$e}),ar(V(Ir),function(Ur){Dt(Ur)}),n({target:"Symbol",stat:!0,forced:!c},{useSetter:function(){kr=!0},useSimple:function(){kr=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(Ur,qr){return qr===void 0?O(Ur):Or(O(Ur),qr)},defineProperty:Mn,defineProperties:Or,getOwnPropertyDescriptor:Rr}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:Qr}),tr(),dr($e,"Symbol"),Ie[hr]=!0},function(t,r,e){var n=e(162),o=e(65);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,r,e){var n=e(14),o=e(16),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,r,e){var n=e(1),o=e(33),i=e(29),a=e(49),s=e(109),u=e(222),c=s("string-to-symbol-registry"),d=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{for:function(m){var v=a(m);if(i(c,v))return c[v];var g=o("Symbol")(v);return c[v]=g,d[g]=v,g}})},function(t,r,e){var n=e(1),o=e(29),i=e(126),a=e(78),s=e(109),u=e(222),c=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{keyFor:function(d){if(!i(d))throw TypeError(a(d)+" is not a symbol");if(o(c,d))return c[d]}})},function(t,r,e){var n=e(1),o=e(92),i=e(4),a=e(132),s=e(42);n({target:"Object",stat:!0,forced:!o||i(function(){a.f(1)})},{getOwnPropertySymbols:function(u){var c=a.f;return c?c(s(u)):[]}})},function(t,r,e){e(22)("asyncIterator")},function(t,r){},function(t,r,e){e(22)("hasInstance")},function(t,r,e){e(22)("isConcatSpreadable")},function(t,r,e){e(22)("match")},function(t,r,e){e(22)("matchAll")},function(t,r,e){e(22)("replace")},function(t,r,e){e(22)("search")},function(t,r,e){e(22)("species")},function(t,r,e){e(22)("split")},function(t,r,e){var n=e(33),o=e(22),i=e(81);o("toStringTag"),i(n("Symbol"),"Symbol")},function(t,r,e){e(22)("unscopables")},function(t,r,e){var n=e(14);e(81)(n.JSON,"JSON",!0)},function(t,r){},function(t,r){},function(t,r,e){var n=e(227).IteratorPrototype,o=e(80),i=e(77),a=e(81),s=e(99),u=function(){return this};t.exports=function(c,d,m,v){var g=d+" Iterator";return c.prototype=o(n,{next:i(+!v,m)}),a(c,g,!1,!0),s[g]=u,c}},function(t,r,e){var n=e(16),o=String,i=TypeError;t.exports=function(a){if(typeof a=="object"||n(a))return a;throw i("Can't set "+o(a)+" as a prototype")}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,e){e(22)("dispose")},function(t,r,e){e(22)("asyncDispose")},function(t,r,e){e(22)("matcher")},function(t,r,e){e(22)("metadataKey")},function(t,r,e){e(22)("observable")},function(t,r,e){e(22)("metadata")},function(t,r,e){e(22)("patternMatch")},function(t,r,e){e(22)("replaceAll")},function(t,r,e){t.exports=e(367)},function(t,r,e){t.exports=e(368)},function(t,r,e){var n=e(369);t.exports=n},function(t,r,e){var n=e(370);t.exports=n},function(t,r,e){var n=e(371);e(67),t.exports=n},function(t,r,e){e(82),e(96),e(113),e(224);var n=e(133);t.exports=n.f("iterator")},function(t,r,e){var n=e(11),o=e(110),i=e(49),a=e(108),s=n("".charAt),u=n("".charCodeAt),c=n("".slice),d=function(m){return function(v,g){var b,T,_=i(a(v)),y=o(g),O=_.length;return y<0||y>=O?m?"":void 0:(b=u(_,y))<55296||b>56319||y+1===O||(T=u(_,y+1))<56320||T>57343?m?s(_,y):b:m?c(_,y,y+2):T-56320+(b-55296<<10)+65536}};t.exports={codeAt:d(!1),charAt:d(!0)}},function(t,r,e){e(374);var n=e(12);t.exports=n.Array.isArray},function(t,r,e){e(1)({target:"Array",stat:!0},{isArray:e(79)})},function(t,r,e){var n=e(376);t.exports=n},function(t,r,e){e(377);var n=e(30);t.exports=n("Array").forEach},function(t,r,e){var n=e(1),o=e(378);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,r,e){var n=e(84).forEach,o=e(94)("forEach");t.exports=o?[].forEach:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)}},function(t,r,e){t.exports=e(380)},function(t,r,e){var n=e(381);t.exports=n},function(t,r,e){e(382);var n=e(12).Object;t.exports=function(o){return n.getOwnPropertyNames(o)}},function(t,r,e){var n=e(1),o=e(4),i=e(165).f;n({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},function(t,r,e){e(384);var n=e(12);t.exports=n.Object.keys},function(t,r,e){var n=e(1),o=e(42),i=e(118);n({target:"Object",stat:!0,forced:e(4)(function(){i(1)})},{keys:function(a){return i(o(a))}})},function(t,r,e){var n=e(386);t.exports=n},function(t,r,e){e(223);var n=e(12),o=e(76);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(i,a,s){return o(n.JSON.stringify,null,arguments)}},function(t,r,e){e(232),e(82),e(96),e(394),e(246),e(247),e(407),e(113);var n=e(12);t.exports=n.Promise},function(t,r,e){var n=e(1),o=e(21),i=e(134),a=e(135),s=e(389),u=e(80),c=e(53),d=e(77),m=e(390),v=e(391),g=e(46),b=e(392),T=e(20),_=e(393),y=T("toStringTag"),O=Error,V=[].push,Ce=function(Fe,_e){var de,oe=arguments.length>2?arguments[2]:void 0,he=o(ae,this);a?de=a(O(),he?i(this):ae):(de=he?this:u(ae),c(de,y,"Error")),_e!==void 0&&c(de,"message",b(_e)),_&&c(de,"stack",m(de.stack,1)),v(de,oe);var Ve=[];return g(Fe,V,{that:Ve}),c(de,"errors",Ve),de};a?a(Ce,O):s(Ce,O,{name:!0});var ae=Ce.prototype=u(O.prototype,{constructor:d(1,Ce),message:d(1,""),name:d(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:Ce})},function(t,r,e){var n=e(29),o=e(233),i=e(90),a=e(38);t.exports=function(s,u,c){for(var d=o(u),m=a.f,v=i.f,g=0;g<d.length;g++){var b=d[g];n(s,b)||c&&n(c,b)||m(s,b,v(u,b))}}},function(t,r,e){var n=e(11),o=Error,i=n("".replace),a=String(o("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,u=s.test(a);t.exports=function(c,d){if(u&&typeof c=="string"&&!o.prepareStackTrace)for(;d--;)c=i(c,s,"");return c}},function(t,r,e){var n=e(28),o=e(53);t.exports=function(i,a){n(a)&&"cause"in a&&o(i,"cause",a.cause)}},function(t,r,e){var n=e(49);t.exports=function(o,i){return o===void 0?arguments.length<2?"":i:n(o)}},function(t,r,e){var n=e(4),o=e(77);t.exports=!n(function(){var i=Error("a");return!("stack"in i)||(Object.defineProperty(i,"stack",o(1,7)),i.stack!==7)})},function(t,r,e){e(395),e(402),e(403),e(404),e(405),e(406)},function(t,r,e){var n,o,i,a=e(1),s=e(48),u=e(114),c=e(14),d=e(19),m=e(66),v=e(135),g=e(81),b=e(237),T=e(31),_=e(16),y=e(28),O=e(168),V=e(238),Ce=e(239).set,ae=e(396),Fe=e(399),_e=e(100),de=e(400),oe=e(97),he=e(101),Ve=e(115),le=e(68),ie=Ve.CONSTRUCTOR,Ie=Ve.REJECTION_EVENT,pe=Ve.SUBCLASSING,kt=oe.getterFor("Promise"),Ue=oe.set,Dt=he&&he.prototype,tr=he,dr=Dt,pr=c.TypeError,ar=c.document,hr=c.process,Ne=le.f,nr=Ne,sr=!!(ar&&ar.createEvent&&c.dispatchEvent),$e=function(Tr){var Ir;return!(!y(Tr)||!_(Ir=Tr.then))&&Ir},er=function(Tr,Ir){var kr,Ar,Nr,Mn=Ir.value,Or=Ir.state==1,Pr=Or?Tr.ok:Tr.fail,Rr=Tr.resolve,Qr=Tr.reject,hn=Tr.domain;try{Pr?(Or||(Ir.rejection===2&&Lt(Ir),Ir.rejection=1),Pr===!0?kr=Mn:(hn&&hn.enter(),kr=Pr(Mn),hn&&(hn.exit(),Nr=!0)),kr===Tr.promise?Qr(pr("Promise-chain cycle")):(Ar=$e(kr))?d(Ar,kr,Rr,Qr):Rr(kr)):Qr(Mn)}catch(Ur){hn&&!Nr&&hn.exit(),Qr(Ur)}},or=function(Tr,Ir){Tr.notified||(Tr.notified=!0,ae(function(){for(var kr,Ar=Tr.reactions;kr=Ar.get();)er(kr,Tr);Tr.notified=!1,Ir&&!Tr.rejection&&rr(Tr)}))},ze=function(Tr,Ir,kr){var Ar,Nr;sr?((Ar=ar.createEvent("Event")).promise=Ir,Ar.reason=kr,Ar.initEvent(Tr,!1,!0),c.dispatchEvent(Ar)):Ar={promise:Ir,reason:kr},!Ie&&(Nr=c["on"+Tr])?Nr(Ar):Tr==="unhandledrejection"&&Fe("Unhandled promise rejection",kr)},rr=function(Tr){d(Ce,c,function(){var Ir,kr=Tr.facade,Ar=Tr.value;if(Et(Tr)&&(Ir=_e(function(){u?hr.emit("unhandledRejection",Ar,kr):ze("unhandledrejection",kr,Ar)}),Tr.rejection=u||Et(Tr)?2:1,Ir.error))throw Ir.value})},Et=function(Tr){return Tr.rejection!==1&&!Tr.parent},Lt=function(Tr){d(Ce,c,function(){var Ir=Tr.facade;u?hr.emit("rejectionHandled",Ir):ze("rejectionhandled",Ir,Tr.value)})},cr=function(Tr,Ir,kr){return function(Ar){Tr(Ir,Ar,kr)}},mr=function(Tr,Ir,kr){Tr.done||(Tr.done=!0,kr&&(Tr=kr),Tr.value=Ir,Tr.state=2,or(Tr,!0))},vr=function(Tr,Ir,kr){if(!Tr.done){Tr.done=!0,kr&&(Tr=kr);try{if(Tr.facade===Ir)throw pr("Promise can't be resolved itself");var Ar=$e(Ir);Ar?ae(function(){var Nr={done:!1};try{d(Ar,Ir,cr(vr,Nr,Tr),cr(mr,Nr,Tr))}catch(Mn){mr(Nr,Mn,Tr)}}):(Tr.value=Ir,Tr.state=1,or(Tr,!1))}catch(Nr){mr({done:!1},Nr,Tr)}}};if(ie&&(dr=(tr=function(Tr){O(this,dr),T(Tr),d(n,this);var Ir=kt(this);try{Tr(cr(vr,Ir),cr(mr,Ir))}catch(kr){mr(Ir,kr)}}).prototype,(n=function(Tr){Ue(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new de,rejection:!1,state:0,value:void 0})}).prototype=m(dr,"then",function(Tr,Ir){var kr=kt(this),Ar=Ne(V(this,tr));return kr.parent=!0,Ar.ok=!_(Tr)||Tr,Ar.fail=_(Ir)&&Ir,Ar.domain=u?hr.domain:void 0,kr.state==0?kr.reactions.add(Ar):ae(function(){er(Ar,kr)}),Ar.promise}),o=function(){var Tr=new n,Ir=kt(Tr);this.promise=Tr,this.resolve=cr(vr,Ir),this.reject=cr(mr,Ir)},le.f=Ne=function(Tr){return Tr===tr||Tr===void 0?new o(Tr):nr(Tr)},!s&&_(he)&&Dt!==Object.prototype)){i=Dt.then,pe||m(Dt,"then",function(Tr,Ir){var kr=this;return new tr(function(Ar,Nr){d(i,kr,Ar,Nr)}).then(Tr,Ir)},{unsafe:!0});try{delete Dt.constructor}catch{}v&&v(Dt,dr)}a({global:!0,constructor:!0,wrap:!0,forced:ie},{Promise:tr}),g(tr,"Promise",!1,!0),b("Promise")},function(t,r,e){var n,o,i,a,s,u,c,d,m=e(14),v=e(34),g=e(90).f,b=e(239).set,T=e(241),_=e(397),y=e(398),O=e(114),V=m.MutationObserver||m.WebKitMutationObserver,Ce=m.document,ae=m.process,Fe=m.Promise,_e=g(m,"queueMicrotask"),de=_e&&_e.value;de||(n=function(){var oe,he;for(O&&(oe=ae.domain)&&oe.exit();o;){he=o.fn,o=o.next;try{he()}catch(Ve){throw o?a():i=void 0,Ve}}i=void 0,oe&&oe.enter()},T||O||y||!V||!Ce?!_&&Fe&&Fe.resolve?((c=Fe.resolve(void 0)).constructor=Fe,d=v(c.then,c),a=function(){d(n)}):O?a=function(){ae.nextTick(n)}:(b=v(b,m),a=function(){b(n)}):(s=!0,u=Ce.createTextNode(""),new V(n).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=de||function(oe){var he={fn:oe,next:void 0};i&&(i.next=he),o||(o=he,a()),i=he}},function(t,r,e){var n=e(64),o=e(14);t.exports=/ipad|iphone|ipod/i.test(n)&&o.Pebble!==void 0},function(t,r,e){var n=e(64);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,r,e){var n=e(14);t.exports=function(o,i){var a=n.console;a&&a.error&&(arguments.length==1?a.error(o):a.error(o,i))}},function(t,r){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},t.exports=e},function(t,r,e){var n=e(242),o=e(114);t.exports=!n&&!o&&typeof window=="object"&&typeof document=="object"},function(t,r,e){var n=e(1),o=e(19),i=e(31),a=e(68),s=e(100),u=e(46);n({target:"Promise",stat:!0,forced:e(243)},{all:function(c){var d=this,m=a.f(d),v=m.resolve,g=m.reject,b=s(function(){var T=i(d.resolve),_=[],y=0,O=1;u(c,function(V){var Ce=y++,ae=!1;O++,o(T,d,V).then(function(Fe){ae||(ae=!0,_[Ce]=Fe,--O||v(_))},g)}),--O||v(_)});return b.error&&g(b.value),m.promise}})},function(t,r,e){var n=e(1),o=e(48),i=e(115).CONSTRUCTOR,a=e(101),s=e(33),u=e(16),c=e(66),d=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(v){return this.then(void 0,v)}}),!o&&u(a)){var m=s("Promise").prototype.catch;d.catch!==m&&c(d,"catch",m,{unsafe:!0})}},function(t,r,e){var n=e(1),o=e(19),i=e(31),a=e(68),s=e(100),u=e(46);n({target:"Promise",stat:!0,forced:e(243)},{race:function(c){var d=this,m=a.f(d),v=m.reject,g=s(function(){var b=i(d.resolve);u(c,function(T){o(b,d,T).then(m.resolve,v)})});return g.error&&v(g.value),m.promise}})},function(t,r,e){var n=e(1),o=e(19),i=e(68);n({target:"Promise",stat:!0,forced:e(115).CONSTRUCTOR},{reject:function(a){var s=i.f(this);return o(s.reject,void 0,a),s.promise}})},function(t,r,e){var n=e(1),o=e(33),i=e(48),a=e(101),s=e(115).CONSTRUCTOR,u=e(245),c=o("Promise"),d=i&&!s;n({target:"Promise",stat:!0,forced:i||s},{resolve:function(m){return u(d&&this===c?a:this,m)}})},function(t,r,e){var n=e(1),o=e(48),i=e(101),a=e(4),s=e(33),u=e(16),c=e(238),d=e(245),m=e(66),v=i&&i.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a(function(){v.finally.call({then:function(){}},function(){})})},{finally:function(b){var T=c(this,s("Promise")),_=u(b);return this.then(_?function(y){return d(T,b()).then(function(){return y})}:b,_?function(y){return d(T,b()).then(function(){throw y})}:b)}}),!o&&u(i)){var g=s("Promise").prototype.finally;v.finally!==g&&m(v,"finally",g,{unsafe:!0})}},function(t,r,e){t.exports=e(409)},function(t,r,e){var n=e(410);t.exports=n},function(t,r,e){var n=e(248);t.exports=n},function(t,r,e){e(412);var n=e(12).Object,o=t.exports=function(i,a,s){return n.defineProperty(i,a,s)};n.defineProperty.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(27),i=e(38).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,r,e){var n=e(414),o=e(26).default;t.exports=function(i,a){if(o(i)!=="object"||i===null)return i;var s=i[n];if(s!==void 0){var u=s.call(i,a||"default");if(o(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(415)},function(t,r,e){t.exports=e(416)},function(t,r,e){var n=e(417);t.exports=n},function(t,r,e){var n=e(418);t.exports=n},function(t,r,e){var n=e(419);t.exports=n},function(t,r,e){e(420),e(225);var n=e(133);t.exports=n.f("toPrimitive")},function(t,r){},function(t,r,e){var n=e(21),o=e(422),i=Array.prototype;t.exports=function(a){var s=a.slice;return a===i||n(i,a)&&s===i.slice?o:s}},function(t,r,e){e(423);var n=e(30);t.exports=n("Array").slice},function(t,r,e){var n=e(1),o=e(79),i=e(129),a=e(28),s=e(128),u=e(45),c=e(43),d=e(95),m=e(20),v=e(111),g=e(98),b=v("slice"),T=m("species"),_=Array,y=Math.max;n({target:"Array",proto:!0,forced:!b},{slice:function(O,V){var Ce,ae,Fe,_e=c(this),de=u(_e),oe=s(O,de),he=s(V===void 0?de:V,de);if(o(_e)&&(Ce=_e.constructor,(i(Ce)&&(Ce===_||o(Ce.prototype))||a(Ce)&&(Ce=Ce[T])===null)&&(Ce=void 0),Ce===_||Ce===void 0))return g(_e,oe,he);for(ae=new(Ce===void 0?_:Ce)(y(he-oe,0)),Fe=0;oe<he;oe++,Fe++)oe in _e&&d(ae,Fe,_e[oe]);return ae.length=Fe,ae}})},function(t,r,e){var n=e(425);t.exports=n},function(t,r,e){var n=e(21),o=e(426),i=Array.prototype;t.exports=function(a){var s=a.some;return a===i||n(i,a)&&s===i.some?o:s}},function(t,r,e){e(427);var n=e(30);t.exports=n("Array").some},function(t,r,e){var n=e(1),o=e(84).some;n({target:"Array",proto:!0,forced:!e(94)("some")},{some:function(i){return o(this,i,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(429);t.exports=n},function(t,r,e){var n=e(21),o=e(430),i=Array.prototype;t.exports=function(a){var s=a.splice;return a===i||n(i,a)&&s===i.splice?o:s}},function(t,r,e){e(431);var n=e(30);t.exports=n("Array").splice},function(t,r,e){var n=e(1),o=e(42),i=e(128),a=e(110),s=e(45),u=e(432),c=e(213),d=e(161),m=e(95),v=e(251),g=e(111)("splice"),b=Math.max,T=Math.min;n({target:"Array",proto:!0,forced:!g},{splice:function(_,y){var O,V,Ce,ae,Fe,_e,de=o(this),oe=s(de),he=i(_,oe),Ve=arguments.length;for(Ve===0?O=V=0:Ve===1?(O=0,V=oe-he):(O=Ve-2,V=T(b(a(y),0),oe-he)),c(oe+O-V),Ce=d(de,V),ae=0;ae<V;ae++)(Fe=he+ae)in de&&m(Ce,ae,de[Fe]);if(Ce.length=V,O<V){for(ae=he;ae<oe-V;ae++)_e=ae+O,(Fe=ae+V)in de?de[_e]=de[Fe]:v(de,_e);for(ae=oe;ae>oe-V+O;ae--)v(de,ae-1)}else if(O>V)for(ae=oe-V;ae>he;ae--)_e=ae+O-1,(Fe=ae+V-1)in de?de[_e]=de[Fe]:v(de,_e);for(ae=0;ae<O;ae++)de[ae+he]=arguments[ae+2];return u(de,oe-V+O),Ce}})},function(t,r,e){var n=e(27),o=e(79),i=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();t.exports=s?function(u,c){if(o(u)&&!a(u,"length").writable)throw i("Cannot set read only .length");return u.length=c}:function(u,c){return u.length=c}},function(t,r,e){var n=e(434);t.exports=n},function(t,r,e){var n=e(21),o=e(435),i=Array.prototype;t.exports=function(a){var s=a.sort;return a===i||n(i,a)&&s===i.sort?o:s}},function(t,r,e){e(436);var n=e(30);t.exports=n("Array").sort},function(t,r,e){var n=e(1),o=e(11),i=e(31),a=e(42),s=e(45),u=e(251),c=e(49),d=e(4),m=e(437),v=e(94),g=e(438),b=e(439),T=e(93),_=e(440),y=[],O=o(y.sort),V=o(y.push),Ce=d(function(){y.sort(void 0)}),ae=d(function(){y.sort(null)}),Fe=v("sort"),_e=!d(function(){if(T)return T<70;if(!(g&&g>3)){if(b)return!0;if(_)return _<603;var de,oe,he,Ve,le="";for(de=65;de<76;de++){switch(oe=String.fromCharCode(de),de){case 66:case 69:case 70:case 72:he=3;break;case 68:case 71:he=4;break;default:he=2}for(Ve=0;Ve<47;Ve++)y.push({k:oe+Ve,v:he})}for(y.sort(function(ie,Ie){return Ie.v-ie.v}),Ve=0;Ve<y.length;Ve++)oe=y[Ve].k.charAt(0),le.charAt(le.length-1)!==oe&&(le+=oe);return le!=="DGBEFHACIJK"}});n({target:"Array",proto:!0,forced:Ce||!ae||!Fe||!_e},{sort:function(de){de!==void 0&&i(de);var oe=a(this);if(_e)return de===void 0?O(oe):O(oe,de);var he,Ve,le=[],ie=s(oe);for(Ve=0;Ve<ie;Ve++)Ve in oe&&V(le,oe[Ve]);for(m(le,function(Ie){return function(pe,kt){return kt===void 0?-1:pe===void 0?1:Ie!==void 0?+Ie(pe,kt)||0:c(pe)>c(kt)?1:-1}}(de)),he=s(le),Ve=0;Ve<he;)oe[Ve]=le[Ve++];for(;Ve<ie;)u(oe,Ve++);return oe}})},function(t,r,e){var n=e(220),o=Math.floor,i=function(u,c){var d=u.length,m=o(d/2);return d<8?a(u,c):s(u,i(n(u,0,m),c),i(n(u,m),c),c)},a=function(u,c){for(var d,m,v=u.length,g=1;g<v;){for(m=g,d=u[g];m&&c(u[m-1],d)>0;)u[m]=u[--m];m!==g++&&(u[m]=d)}return u},s=function(u,c,d,m){for(var v=c.length,g=d.length,b=0,T=0;b<v||T<g;)u[b+T]=b<v&&T<g?m(c[b],d[T])<=0?c[b++]:d[T++]:b<v?c[b++]:d[T++];return u};t.exports=i},function(t,r,e){var n=e(64).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(64);t.exports=/MSIE|Trident/.test(n)},function(t,r,e){var n=e(64).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(442);t.exports=n},function(t,r,e){var n=e(21),o=e(443),i=Array.prototype;t.exports=function(a){var s=a.map;return a===i||n(i,a)&&s===i.map?o:s}},function(t,r,e){e(444);var n=e(30);t.exports=n("Array").map},function(t,r,e){var n=e(1),o=e(84).map;n({target:"Array",proto:!0,forced:!e(111)("map")},{map:function(i){return o(this,i,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(446);t.exports=n},function(t,r,e){var n=e(21),o=e(447),i=Array.prototype;t.exports=function(a){var s=a.reduce;return a===i||n(i,a)&&s===i.reduce?o:s}},function(t,r,e){e(448);var n=e(30);t.exports=n("Array").reduce},function(t,r,e){var n=e(1),o=e(449).left,i=e(94),a=e(93),s=e(114);n({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(u){var c=arguments.length;return o(this,u,c,c>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(31),o=e(42),i=e(124),a=e(45),s=TypeError,u=function(c){return function(d,m,v,g){n(m);var b=o(d),T=i(b),_=a(b),y=c?_-1:0,O=c?-1:1;if(v<2)for(;;){if(y in T){g=T[y],y+=O;break}if(y+=O,c?y<0:_<=y)throw s("Reduce of empty array with no initial value")}for(;c?y>=0:_>y;y+=O)y in T&&(g=m(g,T[y],y,b));return g}};t.exports={left:u(!1),right:u(!0)}},function(t,r,e){var n=e(451);t.exports=n},function(t,r,e){var n=e(21),o=e(452),i=Array.prototype;t.exports=function(a){var s=a.lastIndexOf;return a===i||n(i,a)&&s===i.lastIndexOf?o:s}},function(t,r,e){e(453);var n=e(30);t.exports=n("Array").lastIndexOf},function(t,r,e){var n=e(1),o=e(454);n({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},function(t,r,e){var n=e(76),o=e(43),i=e(110),a=e(45),s=e(94),u=Math.min,c=[].lastIndexOf,d=!!c&&1/[1].lastIndexOf(1,-0)<0,m=s("lastIndexOf"),v=d||!m;t.exports=v?function(g){if(d)return n(c,this,arguments)||0;var b=o(this),T=a(b),_=T-1;for(arguments.length>1&&(_=u(_,i(arguments[1]))),_<0&&(_=T+_);_>=0;_--)if(_ in b&&b[_]===g)return _||0;return-1}:c},function(t,r,e){e(252);var n=e(12);t.exports=n.setTimeout},function(t,r,e){var n=e(1),o=e(14),i=e(253)(o.setInterval,!0);n({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,r){t.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},function(t,r,e){var n=e(1),o=e(14),i=e(253)(o.setTimeout,!0);n({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,r,e){var n=e(460);t.exports=n},function(t,r,e){var n=e(21),o=e(461),i=Array.prototype;t.exports=function(a){var s=a.filter;return a===i||n(i,a)&&s===i.filter?o:s}},function(t,r,e){e(462);var n=e(30);t.exports=n("Array").filter},function(t,r,e){var n=e(1),o=e(84).filter;n({target:"Array",proto:!0,forced:!e(111)("filter")},{filter:function(i){return o(this,i,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){t.exports=e(464)},function(t,r,e){e(67);var n=e(65),o=e(29),i=e(21),a=e(465),s=Array.prototype,u={DOMTokenList:!0,NodeList:!0};t.exports=function(c){var d=c.values;return c===s||i(s,c)&&d===s.values||o(u,n(c))?a:d}},function(t,r,e){var n=e(466);t.exports=n},function(t,r,e){e(82),e(96);var n=e(30);t.exports=n("Array").values},function(t,r,e){e(113),e(468);var n=e(12);t.exports=n.Array.from},function(t,r,e){var n=e(1),o=e(469);n({target:"Array",stat:!0,forced:!e(244)(function(i){Array.from(i)})},{from:o})},function(t,r,e){var n=e(34),o=e(19),i=e(42),a=e(470),s=e(234),u=e(129),c=e(45),d=e(95),m=e(235),v=e(136),g=Array;t.exports=function(b){var T=i(b),_=u(this),y=arguments.length,O=y>1?arguments[1]:void 0,V=O!==void 0;V&&(O=n(O,y>2?arguments[2]:void 0));var Ce,ae,Fe,_e,de,oe,he=v(T),Ve=0;if(!he||this===g&&s(he))for(Ce=c(T),ae=_?new this(Ce):g(Ce);Ce>Ve;Ve++)oe=V?O(T[Ve],Ve):T[Ve],d(ae,Ve,oe);else for(de=(_e=m(T,he)).next,ae=_?new this:[];!(Fe=o(de,_e)).done;Ve++)oe=V?a(_e,O,[Fe.value,Ve],!0):Fe.value,d(ae,Ve,oe);return ae.length=Ve,ae}},function(t,r,e){var n=e(36),o=e(236);t.exports=function(i,a,s,u){try{return u?a(n(s)[0],s[1]):a(s)}catch(c){o(i,"throw",c)}}},function(t,r,e){t.exports=e(472)},function(t,r,e){var n=e(473);t.exports=n},function(t,r,e){var n=e(474);t.exports=n},function(t,r,e){var n=e(475);e(67),t.exports=n},function(t,r,e){e(82),e(113);var n=e(136);t.exports=n},function(t,r,e){e(219);var n=e(12);t.exports=n.Object.getOwnPropertySymbols},function(t,r,e){var n=e(478);t.exports=n},function(t,r,e){e(479);var n=e(12).Object,o=t.exports=function(i,a){return n.getOwnPropertyDescriptor(i,a)};n.getOwnPropertyDescriptor.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(4),i=e(43),a=e(90).f,s=e(27),u=o(function(){a(1)});n({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(c,d){return a(i(c),d)}})},function(t,r,e){var n=e(481);t.exports=n},function(t,r,e){e(482);var n=e(12);t.exports=n.Object.getOwnPropertyDescriptors},function(t,r,e){var n=e(1),o=e(27),i=e(233),a=e(43),s=e(90),u=e(95);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(c){for(var d,m,v=a(c),g=s.f,b=i(v),T={},_=0;b.length>_;)(m=g(v,d=b[_++]))!==void 0&&u(T,d,m);return T}})},function(t,r,e){var n=e(484);t.exports=n},function(t,r,e){e(485);var n=e(12).Object,o=t.exports=function(i,a){return n.defineProperties(i,a)};n.defineProperties.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(27),i=e(163).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!o},{defineProperties:i})},function(t,r,e){var n=e(13);typeof window<"u"&&(window.console||n.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(t,r,e){var n=e(488),o=e(517),i=e(260),a=e(519),s=e(528),u=e(531),c=e(532),d=e(533),m=e(535),v=e(536),g=e(537),b=e(181),T=e(541),_=e(542),y=e(548),O=e(175),V=e(263),Ce=e(550),ae=e(88),Fe=e(552),_e=e(174),de=e(179),oe={};oe["[object Arguments]"]=oe["[object Array]"]=oe["[object ArrayBuffer]"]=oe["[object DataView]"]=oe["[object Boolean]"]=oe["[object Date]"]=oe["[object Float32Array]"]=oe["[object Float64Array]"]=oe["[object Int8Array]"]=oe["[object Int16Array]"]=oe["[object Int32Array]"]=oe["[object Map]"]=oe["[object Number]"]=oe["[object Object]"]=oe["[object RegExp]"]=oe["[object Set]"]=oe["[object String]"]=oe["[object Symbol]"]=oe["[object Uint8Array]"]=oe["[object Uint8ClampedArray]"]=oe["[object Uint16Array]"]=oe["[object Uint32Array]"]=!0,oe["[object Error]"]=oe["[object Function]"]=oe["[object WeakMap]"]=!1,t.exports=function he(Ve,le,ie,Ie,pe,kt){var Ue,Dt=1&le,tr=2&le,dr=4&le;if(ie&&(Ue=pe?ie(Ve,Ie,pe,kt):ie(Ve)),Ue!==void 0)return Ue;if(!ae(Ve))return Ve;var pr=O(Ve);if(pr){if(Ue=T(Ve),!Dt)return c(Ve,Ue)}else{var ar=b(Ve),hr=ar=="[object Function]"||ar=="[object GeneratorFunction]";if(V(Ve))return u(Ve,Dt);if(ar=="[object Object]"||ar=="[object Arguments]"||hr&&!pe){if(Ue=tr||hr?{}:y(Ve),!Dt)return tr?m(Ve,s(Ue,Ve)):d(Ve,a(Ue,Ve))}else{if(!oe[ar])return pe?Ve:{};Ue=_(Ve,ar,Dt)}}kt||(kt=new n);var Ne=kt.get(Ve);if(Ne)return Ne;kt.set(Ve,Ue),Fe(Ve)?Ve.forEach(function(sr){Ue.add(he(sr,le,ie,sr,Ve,kt))}):Ce(Ve)&&Ve.forEach(function(sr,$e){Ue.set($e,he(sr,le,ie,$e,Ve,kt))});var nr=pr?void 0:(dr?tr?g:v:tr?de:_e)(Ve);return o(nr||Ve,function(sr,$e){nr&&(sr=Ve[$e=sr]),i(Ue,$e,he(sr,le,ie,$e,Ve,kt))}),Ue}},function(t,r,e){var n=e(140),o=e(494),i=e(495),a=e(496),s=e(497),u=e(498);function c(d){var m=this.__data__=new n(d);this.size=m.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,r){t.exports=function(){this.__data__=[],this.size=0}},function(t,r,e){var n=e(141),o=Array.prototype.splice;t.exports=function(i){var a=this.__data__,s=n(a,i);return!(s<0)&&(s==a.length-1?a.pop():o.call(a,s,1),--this.size,!0)}},function(t,r,e){var n=e(141);t.exports=function(o){var i=this.__data__,a=n(i,o);return a<0?void 0:i[a][1]}},function(t,r,e){var n=e(141);t.exports=function(o){return n(this.__data__,o)>-1}},function(t,r,e){var n=e(141);t.exports=function(o,i){var a=this.__data__,s=n(a,o);return s<0?(++this.size,a.push([o,i])):a[s][1]=i,this}},function(t,r,e){var n=e(140);t.exports=function(){this.__data__=new n,this.size=0}},function(t,r){t.exports=function(e){var n=this.__data__,o=n.delete(e);return this.size=n.size,o}},function(t,r){t.exports=function(e){return this.__data__.get(e)}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(140),o=e(172),i=e(259);t.exports=function(a,s){var u=this.__data__;if(u instanceof n){var c=u.__data__;if(!o||c.length<199)return c.push([a,s]),this.size=++u.size,this;u=this.__data__=new i(c)}return u.set(a,s),this.size=u.size,this}},function(t,r,e){var n=e(256),o=e(502),i=e(88),a=e(258),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,d=u.toString,m=c.hasOwnProperty,v=RegExp("^"+d.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(g){return!(!i(g)||o(g))&&(n(g)?v:s).test(a(g))}},function(t,r,e){var n=e(173),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(u){var c=i.call(u,s),d=u[s];try{u[s]=void 0;var m=!0}catch{}var v=a.call(u);return m&&(c?u[s]=d:delete u[s]),v}},function(t,r){var e=Object.prototype.toString;t.exports=function(n){return e.call(n)}},function(t,r,e){var n,o=e(503),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(a){return!!i&&i in a}},function(t,r,e){var n=e(50)["__core-js_shared__"];t.exports=n},function(t,r){t.exports=function(e,n){return e==null?void 0:e[n]}},function(t,r,e){var n=e(506),o=e(140),i=e(172);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(t,r,e){var n=e(507),o=e(508),i=e(509),a=e(510),s=e(511);function u(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var v=c[d];this.set(v[0],v[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,r,e){var n=e(142);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,r){t.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(t,r,e){var n=e(142),o=Object.prototype.hasOwnProperty;t.exports=function(i){var a=this.__data__;if(n){var s=a[i];return s==="__lodash_hash_undefined__"?void 0:s}return o.call(a,i)?a[i]:void 0}},function(t,r,e){var n=e(142),o=Object.prototype.hasOwnProperty;t.exports=function(i){var a=this.__data__;return n?a[i]!==void 0:o.call(a,i)}},function(t,r,e){var n=e(142);t.exports=function(o,i){var a=this.__data__;return this.size+=this.has(o)?0:1,a[o]=n&&i===void 0?"__lodash_hash_undefined__":i,this}},function(t,r,e){var n=e(143);t.exports=function(o){var i=n(this,o).delete(o);return this.size-=i?1:0,i}},function(t,r){t.exports=function(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}},function(t,r,e){var n=e(143);t.exports=function(o){return n(this,o).get(o)}},function(t,r,e){var n=e(143);t.exports=function(o){return n(this,o).has(o)}},function(t,r,e){var n=e(143);t.exports=function(o,i){var a=n(this,o),s=a.size;return a.set(o,i),this.size+=a.size==s?0:1,this}},function(t,r){t.exports=function(e,n){for(var o=-1,i=e==null?0:e.length;++o<i&&n(e[o],o,e)!==!1;);return e}},function(t,r,e){var n=e(83),o=function(){try{var i=n(Object,"defineProperty");return i({},"",{}),i}catch{}}();t.exports=o},function(t,r,e){var n=e(144),o=e(174);t.exports=function(i,a){return i&&n(a,o(a),i)}},function(t,r){t.exports=function(e,n){for(var o=-1,i=Array(e);++o<e;)i[o]=n(o);return i}},function(t,r,e){var n=e(522),o=e(104),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(c){return o(c)&&a.call(c,"callee")&&!s.call(c,"callee")};t.exports=u},function(t,r,e){var n=e(119),o=e(104);t.exports=function(i){return o(i)&&n(i)=="[object Arguments]"}},function(t,r){t.exports=function(){return!1}},function(t,r,e){var n=e(525),o=e(176),i=e(177),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},function(t,r,e){var n=e(119),o=e(264),i=e(104),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(s){return i(s)&&o(s.length)&&!!a[n(s)]}},function(t,r,e){var n=e(178),o=e(527),i=Object.prototype.hasOwnProperty;t.exports=function(a){if(!n(a))return o(a);var s=[];for(var u in Object(a))i.call(a,u)&&u!="constructor"&&s.push(u);return s}},function(t,r,e){var n=e(265)(Object.keys,Object);t.exports=n},function(t,r,e){var n=e(144),o=e(179);t.exports=function(i,a){return i&&n(a,o(a),i)}},function(t,r,e){var n=e(88),o=e(178),i=e(530),a=Object.prototype.hasOwnProperty;t.exports=function(s){if(!n(s))return i(s);var u=o(s),c=[];for(var d in s)(d!="constructor"||!u&&a.call(s,d))&&c.push(d);return c}},function(t,r){t.exports=function(e){var n=[];if(e!=null)for(var o in Object(e))n.push(o);return n}},function(t,r,e){(function(n){var o=e(50),i=r&&!r.nodeType&&r,a=i&&typeof n=="object"&&n&&!n.nodeType&&n,s=a&&a.exports===i?o.Buffer:void 0,u=s?s.allocUnsafe:void 0;n.exports=function(c,d){if(d)return c.slice();var m=c.length,v=u?u(m):new c.constructor(m);return c.copy(v),v}}).call(this,e(145)(t))},function(t,r){t.exports=function(e,n){var o=-1,i=e.length;for(n||(n=Array(i));++o<i;)n[o]=e[o];return n}},function(t,r,e){var n=e(144),o=e(180);t.exports=function(i,a){return n(i,o(i),a)}},function(t,r){t.exports=function(e,n){for(var o=-1,i=e==null?0:e.length,a=0,s=[];++o<i;){var u=e[o];n(u,o,e)&&(s[a++]=u)}return s}},function(t,r,e){var n=e(144),o=e(267);t.exports=function(i,a){return n(i,o(i),a)}},function(t,r,e){var n=e(270),o=e(180),i=e(174);t.exports=function(a){return n(a,i,o)}},function(t,r,e){var n=e(270),o=e(267),i=e(179);t.exports=function(a){return n(a,i,o)}},function(t,r,e){var n=e(83)(e(50),"DataView");t.exports=n},function(t,r,e){var n=e(83)(e(50),"Promise");t.exports=n},function(t,r,e){var n=e(83)(e(50),"WeakMap");t.exports=n},function(t,r){var e=Object.prototype.hasOwnProperty;t.exports=function(n){var o=n.length,i=new n.constructor(o);return o&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}},function(t,r,e){var n=e(182),o=e(544),i=e(545),a=e(546),s=e(547);t.exports=function(u,c,d){var m=u.constructor;switch(c){case"[object ArrayBuffer]":return n(u);case"[object Boolean]":case"[object Date]":return new m(+u);case"[object DataView]":return o(u,d);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(u,d);case"[object Map]":return new m;case"[object Number]":case"[object String]":return new m(u);case"[object RegExp]":return i(u);case"[object Set]":return new m;case"[object Symbol]":return a(u)}}},function(t,r,e){var n=e(50).Uint8Array;t.exports=n},function(t,r,e){var n=e(182);t.exports=function(o,i){var a=i?n(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.byteLength)}},function(t,r){var e=/\w*$/;t.exports=function(n){var o=new n.constructor(n.source,e.exec(n));return o.lastIndex=n.lastIndex,o}},function(t,r,e){var n=e(173),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(a){return i?Object(i.call(a)):{}}},function(t,r,e){var n=e(182);t.exports=function(o,i){var a=i?n(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.length)}},function(t,r,e){var n=e(549),o=e(269),i=e(178);t.exports=function(a){return typeof a.constructor!="function"||i(a)?{}:n(o(a))}},function(t,r,e){var n=e(88),o=Object.create,i=function(){function a(){}return function(s){if(!n(s))return{};if(o)return o(s);a.prototype=s;var u=new a;return a.prototype=void 0,u}}();t.exports=i},function(t,r,e){var n=e(551),o=e(176),i=e(177),a=i&&i.isMap,s=a?o(a):n;t.exports=s},function(t,r,e){var n=e(181),o=e(104);t.exports=function(i){return o(i)&&n(i)=="[object Map]"}},function(t,r,e){var n=e(553),o=e(176),i=e(177),a=i&&i.isSet,s=a?o(a):n;t.exports=s},function(t,r,e){var n=e(181),o=e(104);t.exports=function(i){return o(i)&&n(i)=="[object Set]"}},function(t,r,e){var n=e(2),o=e(5),i=e(6),a=e(69),s=e(10),u=e(15),c=e(7),d=e(3),m=e(74),v=e(0),g=e(13),b=e(44),T={};function _(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};!Fe.logLevel&&Fe.debug&&(Fe.logLevel="debug"),v.merge(this,{options:Fe,debugEnable:!1,api:"log",style:"color:blue;",logLevel:Fe.logLevel&&Fe.logLevel.toLowerCase()||"off",debug:v.emptyFunc,log:v.emptyFunc,info:v.emptyFunc,warn:v.emptyFunc,error:v.emptyFunc}),this.prefix=Fe.prefix||"",this.localEnable=T.enable&&Fe.dbLog&&Fe.account,this.setDebug(Fe.debug),this.localEnable&&(this._local=new T(Fe.account,Fe.expire),this._local.logError=this.error)}T=e(563);var y=_.prototype,O=["Chrome","Safari","Firefox"],V={debug:1e3,log:2e3,info:3e3,warn:4e3,error:5e3,off:6e3};function Ce(Fe){var _e,de=[];return n(_e=o(V)).call(_e,function(oe){V[oe]>=V[Fe]&&de.push(oe)}),de}y.setDebug=function(){var Fe=arguments.length>0&&arguments[0]!==void 0&&arguments[0],_e=this;if(_e.debugEnable=Fe||_e.logLevel==="debug",Fe.style&&(_e.style=Fe.style),v.exist(console)){if(_e.logLevel!=="off"){var de=console,oe=Ce(_e.logLevel);n(oe).call(oe,function(Ve){_e[Ve]=function(){var le=_e.formatArgsAndSave(arguments,Ve);i(O).call(O,m.name)!==-1&&v.isString(le[0])&&(le[0]="%c"+le[0],a(le).call(le,1,0,_e.style)),_e._log(Ve,le)}}),_e.options.logFunc?_e._log=function(){}:_e._log=function(Ve,le){if(Ve==="debug"&&(Ve="log"),de[Ve])try{de[Ve].apply?_e.chrome(Ve,le):_e.ie(Ve,le)}catch{}},_e.chrome=function(Ve,le){i(O).call(O,m.name)!==-1?de[Ve].apply(de,le):_e.ie(Ve,le)},_e.ie=function(Ve,le){n(le).call(le,function(ie){de[Ve](s(ie,null,4))})}}else if(g.isRN||this.localEnable||this.options.logFunc){var he=!g.isRN&&!this.localEnable;_e.log=function(){_e.formatArgsAndSave(arguments,"log",he)},_e.info=function(){_e.formatArgsAndSave(arguments,"info",he)},_e.warn=function(){_e.formatArgsAndSave(arguments,"warn",he)},_e.error=function(){_e.formatArgsAndSave(arguments,"error",he)},_e.debug=function(){_e.formatArgsAndSave(arguments,"error",he)}}}},y.destroy=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.debug=function(){},this._local&&this._local.destroy()},y.formatArgsAndSave=function(Fe,_e,de){var oe,he;Fe=u([]).call(Fe,0);var Ve=new Date,le=ae(Ve.getMonth()+1)+"-"+ae(Ve.getDate())+" "+ae(Ve.getHours())+":"+ae(Ve.getMinutes())+":"+ae(Ve.getSeconds())+":"+ae(Ve.getMilliseconds(),3),ie=c(oe=c(he="[NIM ".concat(_e.toUpperCase()," ")).call(he,le," ")).call(oe,this.prefix.toUpperCase(),"]  "),Ie="";v.isString(Fe[0])?Fe[0]=ie+Fe[0]:a(Fe).call(Fe,0,0,ie),n(Fe).call(Fe,function(kt,Ue){v.isArray(kt)||v.isObject(kt)?(Fe[Ue]=v.simpleClone(kt),Ie+=s(Fe[Ue])+" "):Ie+=kt+" "});var pe=this.options.logFunc;return pe&&v.isFunction(pe[_e])&&pe[_e].apply(pe,Fe),!de&&this.writeLocalLog(Ie,_e,+Ve),Fe},y.writeLocalLog=function(Fe,_e,de){return g.isRN?this.writeLocalLogRN(Fe,_e,de):g.isBrowser?this.writeLocalLogBrowser(Fe,_e,de):void 0};var ae=function(Fe,_e){_e=_e||2;for(var de=""+Fe;de.length<_e;)de="0"+de;return de};y.writeLocalLogBrowser=function(Fe,_e,de){this._local&&this._local.saveLog({log:Fe,level:_e,time:de})},y.writeLocalLogRN=function(Fe,_e){if(b.rnfs&&b.rnfs.writeFile&&b.rnfs.appendFile&&b.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(_e)){var de,oe=b.rnfs,he=oe.size/2-256;Fe+=`\r
`,oe.nimPromise=oe.nimPromise.then(function(){return de=Ve(oe.nimIndex),oe.exists(de)}).then(function(le){return le?oe.appendFile(de,Fe):oe.writeFile(de,Fe)}).then(function(){return oe.stat(de)}).then(function(le){if(le.size>he)return oe.nimIndex++,oe.nimIndex>1&&(oe.nimIndex=oe.nimIndex%2),oe.unlink(Ve(oe.nimIndex)).catch(function(){return d.resolve()})}).catch(function(){})}function Ve(le){return b.rnfs.DocumentDirectoryPath+"/nimlog_"+le+".log"}},t.exports=_},function(t,r,e){var n=e(556);t.exports=n},function(t,r,e){e(557);var n=e(12);t.exports=n.parseFloat},function(t,r,e){var n=e(1),o=e(558);n({global:!0,forced:parseFloat!=o},{parseFloat:o})},function(t,r,e){var n=e(14),o=e(4),i=e(11),a=e(49),s=e(183).trim,u=e(146),c=i("".charAt),d=n.parseFloat,m=n.Symbol,v=m&&m.iterator,g=1/d(u+"-0")!=-1/0||v&&!o(function(){d(Object(v))});t.exports=g?function(b){var T=s(a(b)),_=d(T);return _===0&&c(T,0)=="-"?-0:_}:d},function(t,r,e){var n=e(560);t.exports=n},function(t,r,e){e(561);var n=e(12);t.exports=n.parseInt},function(t,r,e){var n=e(1),o=e(562);n({global:!0,forced:parseInt!=o},{parseInt:o})},function(t,r,e){var n=e(14),o=e(4),i=e(11),a=e(49),s=e(183).trim,u=e(146),c=n.parseInt,d=n.Symbol,m=d&&d.iterator,v=/^[+-]?0x/i,g=i(v.exec),b=c(u+"08")!==8||c(u+"0x16")!==22||m&&!o(function(){c(Object(m))});t.exports=b?function(T,_){var y=s(a(T));return c(y,_>>>0||(g(v,y)?16:10))}:c},function(t,r,e){var n=e(15),o=e(23),i=e(3),a=e(564),s=e(565),u=e(0).getGlobal(),c=e(74).name,d=typeof a=="function",m=u.indexedDB&&!/^(IE)$/.test(c);function v(b,T){this.logWorker=null,this.db=null,this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.saveLogTimer=void 0,this.initLogLocal({name:b,expire:T})}var g=v.prototype;v.enable=!0,g.saveLog=function(b){var T=this;try{if(!v.enable)return;var _,y=this.logQueue.length,O=this.logQueue[y-1];if(b.time===this.preTime&&O)return void(O.log+=`\r
`+b.log);this.logQueue.length>50||b.time-this.lastTime>3e3&&this.logQueue.length>0?(this.doSaveLog(n(_=this.logQueue).call(_,0)),this.lastTime=O.time,this.logQueue=[],clearTimeout(this.saveLogTimer)):(clearTimeout(this.saveLogTimer),this.saveLogTimer=o(function(){var V;T.logQueue.length>0&&(O=T.logQueue[T.logQueue.length-1],T.doSaveLog(n(V=T.logQueue).call(V,0)),T.lastTime=O.time,T.logQueue=[])},3e3-(b.time-this.lastTime))),this.logQueue.push(b),this.preTime=b.time}catch(V){console.error("saveLog Error",V)}},g.destroy=function(){if(this.logQueue.length>0){var b,T=this.logQueue[this.logQueue.length-1];this.doSaveLog(n(b=this.logQueue).call(b,0)),this.lastTime=T.time,this.logQueue=[]}clearTimeout(this.saveLogTimer)},g.doSaveLog=function(){},g.initLogLocal=function(){},g.fetchLog=function(){},g.deleteLogs=function(){},g.logError=function(){},m?d?(g.doSaveLog=function(b){this.logWorker.postMessage(b)},g.initLogLocal=function(b){var T=this;this.logWorker=new a({}),this.logWorker.onmessage=function(_){var y=_.data||{};switch(y.type){case"fetchDone":T.fetchLogDone(y.code,y.msg);break;case"error":T.logError(y.msg)}},this.logWorker.postMessage({type:"init",msg:b})},g.fetchLog=function(){var b=this;return new i(function(T,_){b.callbackList.length===0&&b.logWorker.postMessage({type:"fetch"}),b.callbackList.push(T),b.callbackList.push(_)})},g.fetchLogDone=function(b,T){for(var _=b===200?0:1,y=0;y<this.callbackList.length/2;y++)this.callbackList[2*y+_](T);this.callbackList=[]},g.deleteLogs=function(b){return this.logWorker.postMessage({type:"delete",msg:b}),i.resolve()}):(g.doSaveLog=function(b){var T=this;this.db.putLog(b).catch(function(_){T.logError({msg:"putLog error",error:_})})},g.initLogLocal=function(b){var T=this;this.db=new s(b),this.db.init().catch(function(_){T.logError({msg:"dbLog init error",error:_})})},g.fetchLog=function(){return this.db.getAllLogs()},g.deleteLogs=function(b){return this.db.deleteLogs(b)}):v.enable=!1,t.exports=v},function(t,r,e){e.r(r),e.d(r,"default",function(){return i});var n=e(297),o=e.n(n);function i(){return o()(`/*!
 * 
 * VERSION: 9.13.0
 * Git Hash: b7e3ed4d45a88d8c78898efb66610b01c72f8323
 * 
 * Create At: 2023/9/5 下午6:28:51
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169),u={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var f=a.prototype;f.init=function(){var t=this;if(!this.server)return c.open({server:"nim-log-"+this.name,version:1,schema:u}).then((function(n){t.server=n}))},f.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},f.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},f.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=a},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),q=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},V=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=q(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)V(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=q(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){V(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=v.add(t,r)}else n=v.add(t);n.onsuccess=function(n){var r=n.target,e=r.source.keyPath;null===e&&(e="__id__"),p(t,e,{value:r.result,enumerable:!0})}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){var n=t.target.result;n&&(n.delete(),n.continue())});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,q=o.Symbol,V=q&&q.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(V);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(V=(q=function(){if(l(V,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(q,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(V,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:q}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(q,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`,"Worker",void 0,void 0)}},function(t,r,e){var n=e(3),o=e(15),i=e(8),a=e(303),s={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function u(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.server=null,this.expire=d.expire||72,this.name=d.name}var c=u.prototype;c.init=function(){var d=this;if(!this.server)return a.open({server:"nim-log-"+this.name,version:1,schema:s}).then(function(m){d.server=m})},c.putLog=function(d){var m=this;if(!this.server)return n.reject("no db server");var v=o(d).call(d,-1)[0].time-36e5*this.expire;return this.deleteLogs(v).then(function(){return m.server.add("log",d)})},c.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function(d){var m={},v=o(d).call(d,-1)[0];return m.logs=i(d).call(d,function(g){return g.log}).join(`\r
`),m.time=v&&v.time,m}):n.reject("no db server")},c.deleteLogs=function(d){return this.server?this.server.remove("log",null,"time",0,d):n.reject("no db server")},t.exports=u},function(t,r,e){e(252);var n=e(12);t.exports=n.setInterval},function(t,r,e){var n=e(21),o=e(568),i=Function.prototype;t.exports=function(a){var s=a.bind;return a===i||n(i,a)&&s===i.bind?o:s}},function(t,r,e){e(569);var n=e(30);t.exports=n("Function").bind},function(t,r,e){var n=e(1),o=e(273);n({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},function(t,r,e){var n=e(18),o=e(25),i=e(2),a=e(23),s=e(5),u=e(54),c=e(185);function d(g){g.onuploading&&this.on("uploading",g.onuploading),c.call(this,g)}var m=c.prototype,v=d.prototype=n(m);v.doSend=function(){var g,b,T,_=this.options,y=_.headers,O=this.xhr=new XMLHttpRequest;if(y["Content-Type"]==="multipart/form-data"){var V,Ce;delete y["Content-Type"],O.upload.onprogress=o(V=this.onProgress).call(V,this),O.upload.onload=o(Ce=this.onProgress).call(Ce,this);var ae,Fe=_.data;_.data=new window.FormData,Fe&&i(ae=u.getKeys(Fe,_.putFileAtEnd)).call(ae,function(oe){var he=Fe[oe];he.tagName&&he.tagName.toUpperCase()==="INPUT"?he.type==="file"&&i([]).call(he.files,function(Ve){_.data.append(u.dataset(he,"name")||he.name||Ve.name||"file-"+u.uniqueID(),Ve)}):_.data.append(oe,he)})}else if(y["x-nos-token"]){var _e,de;O.upload.onprogress=o(_e=this.onProgress).call(_e,this),O.upload.onload=o(de=this.onProgress).call(de,this)}O.onreadystatechange=o(g=this.onStateChange).call(g,this),_.timeout!==0&&(this.timer=a(o(T=this.onTimeout).call(T,this),_.timeout)),O.open(_.method,_.url,!_.sync),i(b=s(y)).call(b,function(oe){O.setRequestHeader(oe,y[oe])}),_.cookie&&"withCredentials"in O&&(O.withCredentials=!0),O.send(_.data),this.afterSend()},v.onProgress=function(g){g.lengthComputable&&g.loaded<=g.total&&this.emit("uploading",g)},v.onStateChange=function(){var g,b=this.xhr;b.readyState===4&&(g={status:b.status,result:b.responseText||""},this.onLoad(g))},v.getResponseHeader=function(g){var b=this.xhr;return b?b.getResponseHeader(g):""},v.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=u.f,this.xhr.abort()}catch{}m.destroy.call(this)},t.exports=d},function(t,r,e){var n;/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(o){function i(){}var a=i.prototype,s=o.EventEmitter;function u(d,m){for(var v=d.length;v--;)if(d[v].listener===m)return v;return-1}function c(d){return function(){return this[d].apply(this,arguments)}}a.getListeners=function(d){var m,v,g=this._getEvents();if(d instanceof RegExp)for(v in m={},g)g.hasOwnProperty(v)&&d.test(v)&&(m[v]=g[v]);else m=g[d]||(g[d]=[]);return m},a.flattenListeners=function(d){var m,v=[];for(m=0;m<d.length;m+=1)v.push(d[m].listener);return v},a.getListenersAsObject=function(d){var m,v=this.getListeners(d);return v instanceof Array&&((m={})[d]=v),m||v},a.addListener=function(d,m){if(!function T(_){return typeof _=="function"||_ instanceof RegExp||!(!_||typeof _!="object")&&T(_.listener)}(m))throw new TypeError("listener must be a function");var v,g=this.getListenersAsObject(d),b=typeof m=="object";for(v in g)g.hasOwnProperty(v)&&u(g[v],m)===-1&&g[v].push(b?m:{listener:m,once:!1});return this},a.on=c("addListener"),a.addOnceListener=function(d,m){return this.addListener(d,{listener:m,once:!0})},a.once=c("addOnceListener"),a.defineEvent=function(d){return this.getListeners(d),this},a.defineEvents=function(d){for(var m=0;m<d.length;m+=1)this.defineEvent(d[m]);return this},a.removeListener=function(d,m){var v,g,b=this.getListenersAsObject(d);for(g in b)b.hasOwnProperty(g)&&(v=u(b[g],m))!==-1&&b[g].splice(v,1);return this},a.off=c("removeListener"),a.addListeners=function(d,m){return this.manipulateListeners(!1,d,m)},a.removeListeners=function(d,m){return this.manipulateListeners(!0,d,m)},a.manipulateListeners=function(d,m,v){var g,b,T=d?this.removeListener:this.addListener,_=d?this.removeListeners:this.addListeners;if(typeof m!="object"||m instanceof RegExp)for(g=v.length;g--;)T.call(this,m,v[g]);else for(g in m)m.hasOwnProperty(g)&&(b=m[g])&&(typeof b=="function"?T.call(this,g,b):_.call(this,g,b));return this},a.removeEvent=function(d){var m,v=typeof d,g=this._getEvents();if(v==="string")delete g[d];else if(d instanceof RegExp)for(m in g)g.hasOwnProperty(m)&&d.test(m)&&delete g[m];else delete this._events;return this},a.removeAllListeners=c("removeEvent"),a.emitEvent=function(d,m){var v,g,b,T,_=this.getListenersAsObject(d);for(T in _)if(_.hasOwnProperty(T))for(v=_[T].slice(0),b=0;b<v.length;b++)(g=v[b]).once===!0&&this.removeListener(d,g.listener),g.listener.apply(this,m||[])===this._getOnceReturnValue()&&this.removeListener(d,g.listener);return this},a.trigger=c("emitEvent"),a.emit=function(d){var m=Array.prototype.slice.call(arguments,1);return this.emitEvent(d,m)},a.setOnceReturnValue=function(d){return this._onceReturnValue=d,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return o.EventEmitter=s,i},(n=(function(){return i}).call(o,e,o,t))===void 0||(t.exports=n)})(typeof window<"u"?window:this||{})},function(t,r,e){var n=e(18),o=e(6),i=e(2),a=e(25),s=e(87),u=e(54),c=e(185),d=e(274),m="NEJ-UPLOAD-RESULT:",v={};function g(_){this.init(),c.call(this,_)}var b=c.prototype,T=g.prototype=n(b);T.init=function(){var _=!1;function y(O){var V=O.data;if(o(V).call(V,m)===0){var Ce=(V=JSON.parse(V.replace(m,""))).key,ae=v[Ce];ae&&(delete v[Ce],V.result=decodeURIComponent(V.result||""),ae.onLoad(V.result))}}return function(){(function(){if(!_){_=!0;var O=u.getGlobal();O.postMessage?u.on(O,"message",y):(d.addMsgListener(y),d.startTimer())}})()}}(),T.doSend=function(){var _=this,y=_.options,O=_.key="zoro-ajax-upload-iframe-"+u.uniqueID();v[O]=_;var V=_.form=u.html2node('<form style="display:none;"></form>');typeof document>"u"||document.body.appendChild(V),V.target=O,V.method="POST",V.enctype="multipart/form-data",V.encoding="multipart/form-data";var Ce=y.url,ae=u.genUrlSep(Ce);V.action=Ce+ae+"_proxy_=form";var Fe,_e=y.data,de=[],oe=[];_e&&i(Fe=u.getKeys(_e,y.putFileAtEnd)).call(Fe,function(le){var ie=_e[le];if(ie.tagName&&ie.tagName.toUpperCase()==="INPUT"){if(ie.type==="file"){var Ie=ie,pe=Ie.cloneNode(!0);Ie.parentNode.insertBefore(pe,Ie);var kt=u.dataset(Ie,"name");kt&&(Ie.name=kt),V.appendChild(Ie),u.isFunction(Ie.setAttribute)&&(Ie.setAttribute("form",""),Ie.removeAttribute("form")),de.push(ie),oe.push(pe)}}else{var Ue=u.html2node('<input type="hidden"/>');Ue.name=le,Ue.value=ie,V.appendChild(Ue)}});function he(){i(de).call(de,function(le,ie){var Ie=oe[ie];Ie.parentNode&&(le.name=Ie.name,u.isFunction(le.setAttribute)&&le.setAttribute("form",Ie.getAttribute("form")),Ie.parentNode.replaceChild(le,Ie))})}var Ve=_.iframe=u.createIframe({name:O,onload:function(){var le;_.aborted?he():(u.on(Ve,"load",a(le=_.checkResult).call(le,_)),V.submit(),he(),_.afterSend())}})},T.checkResult=function(){var _,y;try{var O,V;if(_=this.iframe.contentWindow.document.body,y=s(O=_.innerText||_.textContent||"").call(O),o(y).call(y,m)>=0||o(V=_.innerHTML).call(V,m)>=0)return}catch{return}this.onLoad(y)},T.onLoad=function(_){b.onLoad.call(this,{status:200,result:_}),u.remove(this.form),u.remove(this.iframe),b.destroy.call(this)},T.destroy=function(){u.remove(this.iframe),u.remove(this.form)},T.abort=function(){this.aborted=!0,delete v[this.key],b.abort.call(this)},t.exports=g},function(t,r,e){var n=e(574);t.exports=n},function(t,r,e){var n=e(21),o=e(575),i=String.prototype;t.exports=function(a){var s=a.trim;return typeof a=="string"||a===i||n(i,a)&&s===i.trim?o:s}},function(t,r,e){e(576);var n=e(30);t.exports=n("String").trim},function(t,r,e){var n=e(1),o=e(183).trim;n({target:"String",proto:!0,forced:e(577)("trim")},{trim:function(){return o(this)}})},function(t,r,e){var n=e(226).PROPER,o=e(4),i=e(146);t.exports=function(a){return o(function(){return!!i[a]()||"​᠎"[a]()!=="​᠎"||n&&i[a].name!==a})}},function(t,r,e){var n=e(18),o=e(6),i=e(25),a=e(2),s=e(54),u=e(274),c=e(185),d={};function m(b){this.init(),c.call(this,b)}var v=c.prototype,g=m.prototype=n(v);g.init=function(){var b="NEJ-AJAX-DATA:",T=!1;function _(y){var O=y.data;if(o(O).call(O,b)===0){var V=(O=JSON.parse(O.replace(b,""))).key,Ce=d[V];Ce&&(delete d[V],O.result=decodeURIComponent(O.result||""),Ce.onLoad(O))}}return function(){(function(){if(!T){T=!0;var y=s.getGlobal();y.postMessage?s.on(y,"message",_):u.addMsgListener(_)}})()}}(),g.doSend=function(){var b=this.options,T=s.url2origin(b.url),_=b.proxyUrl||T+"/res/nej_proxy_frame.html",y=d[_];if(s.isArray(y)){var O;y.push(i(O=this.doSend).call(O,this,b))}else{var V;if(!y)return d[_]=[i(V=this.doSend).call(V,this,b)],void s.createIframe({src:_,onload:function(Fe){var _e=d[_];d[_]=s.target(Fe).contentWindow,a(_e).call(_e,function(de){try{de()}catch{}})}});if(!this.aborted){var Ce=this.key=s.uniqueID();d[Ce]=this;var ae=s.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},b);ae.key=Ce,u.postMessage(y,{data:ae}),this.afterSend()}}},g.abort=function(){this.aborted=!0,delete d[this.key],v.abort.call(this)},t.exports=m},function(t,r,e){var n,o,i=e(10),a=e(54),s=e(116),u=(n=/json/i,o=/post/i,function(c,d){var m=(d=d||{}).data=d.data||{},v=d.headers=d.headers||{},g=a.checkWithDefault(v,"Accept","application/json"),b=a.checkWithDefault(v,"Content-Type","application/json");return n.test(g)&&(d.type="json"),o.test(d.method)&&n.test(b)&&(d.data=i(m)),s(c,d)});t.exports=u},function(t,r,e){var n=e(5),o=e(17),i=e(6),a=e(2),s=e(7),u=e(15),c=e(23);t.exports={wrapSafeCallback:function(d,m){if(d.__wrapSafeCallback__)return d;d.__wrapSafeCallback__=!0;var v=n(d);return v=o(v).call(v,function(g){return i(g).call(g,"on")===0&&Object.prototype.toString.call(d[g])==="[object Function]"}),a(v).call(v,function(g){var b=d[g];d[g]=function(){var T=this;try{var _;return b.call.apply(b,s(_=[this]).call(_,u(Array.prototype).call(arguments)))}catch(O){var y;this.logger.error(s(y="wrapSafeCallback. CallbackName: ".concat(g,". Error: ")).call(y,O)),c(function(){var V;throw T.logger.error(s(V="wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(g,". Error: ")).call(V,O)),O},0),m.logger&&m.logger.error("userOption:".concat(g," function error"),O)}}}),d}}},function(t,r,e){var n=e(582);t.exports=n},function(t,r,e){e(583);var n=e(12);t.exports=n.Date.now},function(t,r,e){var n=e(1),o=e(11),i=Date,a=o(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new i)}})},function(t,r,e){var n=e(73).fn,o=e(24).reportAPI;n.isConnected=function(){return o({instance:this,className:"ApiBaseFn",funcName:"isConnected",hasCallback:!1}),!!this.protocol&&this.protocol.isConnected()},n.connect=function(){o({instance:this,className:"ApiBaseFn",funcName:"connect",hasCallback:!1}),this.protocol.connect()},n.disconnect=function(){}},function(t,r,e){var n=e(26),o=e(10),i=e(25),a=e(8),s=e(41),u=e(15),c=e(139),d=e(87),m=e(6),v=e(52),g=e(23),b=e(9),T=e(32),_=e(2),y=e(7),O=e(5),V=e(59),Ce=e(17),ae=e(60),Fe=e(61),_e=e(62),de=e(47),oe=e(58),he=e(120),Ve=["loc_x","loc_y","loc_z"];function le(Ne,nr){var sr=O(Ne);if(V){var $e=V(Ne);nr&&($e=Ce($e).call($e,function(er){return ae(Ne,er).enumerable})),sr.push.apply(sr,$e)}return sr}function ie(Ne){for(var nr=1;nr<arguments.length;nr++){var sr,$e,er=arguments[nr]!=null?arguments[nr]:{};nr%2?_(sr=le(Object(er),!0)).call(sr,function(or){oe(Ne,or,er[or])}):Fe?_e(Ne,Fe(er)):_($e=le(Object(er))).call($e,function(or){de(Ne,or,ae(er,or))})}return Ne}var Ie=e(73).fn,pe=e(0),kt=e(604),Ue=e(40),Dt=e(13),tr=e(276),dr=e(277),pr=e(284),ar=e(105).EMExceptionState,hr=e(24).reportAPI;Ie.sendText=function(Ne){(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendText",async:!0,done:Ne.done});var nr=Ne,sr=nr.loc_x,$e=nr.loc_y,er=nr.loc_z,or=he(nr,Ve);return sr===void 0||$e===void 0||er===void 0?Ne=ie({},or):(typeof Ne.loc_x!="number"&&(Ne.loc_x=0),typeof Ne.loc_y!="number"&&(Ne.loc_y=0),typeof Ne.loc_z!="number"&&(Ne.loc_z=0)),this.processCallback(Ne),Ne.msg=new this.message.TextMessage(Ne),this.sendMsg(Ne)},Ie.previewFile=function(Ne,nr){var sr;(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"previewFile",done:Ne.done});var $e=this,er=$e.protocol.appGrayConfig;if(er&&er.grayConfig&&er.grayConfig.mixStoreEnable&&(Ne.mixEnable=!0),pe.verifyOptions(Ne,"done","msg::previewFile"),Ne.type||(Ne.type="file"),pe.verifyParamPresentJustOne(Ne,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),pe.exist(Ne.maxSize)&&pe.verifyParamType("maxSize",Ne.maxSize,"number","api::previewFile"),pe.exist(Ne.commonUpload)&&pe.verifyParamType("commonUpload",Ne.commonUpload,"boolean","api::previewFile"),Ne.nosSurvivalTime?(pe.verifyParamType("nosSurvivalTime",Ne.nosSurvivalTime,"number","api::Base.getInstance"),pe.verifyParamMin("nosSurvivalTime",Ne.nosSurvivalTime,86400,"api::Base.getInstance")):Ne.nosSurvivalTime=this.nosSurvivalTime,Ne.filePath=Ne.filePath||Ne.wxFilePath,delete Ne.wxFilePath,Ne.dataURL)Ne.blob=pr.fromDataURL(Ne.dataURL);else if(!Ne.blob){if(Ne.fileInput){if(Ne.fileInput=pe.verifyFileInput(Ne.fileInput,"msg::previewFile"),Ne.fileInput.files){if(!Ne.fileInput.files.length)return void Ne.done(Ue.newNoFileError("请选择"+Ne.type+"文件",{callFunc:"msg::previewFile",fileInput:Ne.fileInput}),Ne);Ne.fileSize=Ne.fileInput.files[0].size}Ne.fileInputName=pe.getFileName(Ne.fileInput)}}this.processCallback(Ne);var or=o(tr.genResponseBody(Ne.type)||{}).replace(/"/gi,'\\"'),ze=null,rr=Ne.transcode?"getNosTokenTrans":"getNosToken";if(Ne.transcode){pe.verifyOptions(Ne,"fileInput","msg::previewFile");var Et=pe.getFileInfo(Ne.fileInput);ze={transToken:{name:Et.name,type:Et.transcodeType,transType:Ne.transcode==="png"?11:10,size:Et.size,body:or}}}else ze=or;this[rr]({responseBody:ze,nosToken:{nosScene:Ne.nosScene||this.nosScene,nosSurvivalTime:Ne.nosSurvivalTime},callback:i(sr=function(Lt,cr){if(Lt)Ne.done(Lt);else if(Ne.transcode?(Ne.nosToken=cr.nosToken,Ne.docId=cr.docId):Ne.nosToken=cr,Ne.logger=$e.logger,Ne.mixEnable){var mr,vr;if(!this.protocol.mixStorePolicy)try{this.protocol.mixStorePolicy=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey]}catch(Tr){$e.logger.error("error:","get last mixStorePolicy failed",Tr)}if(!this.protocol.mixStorePolicy)return void $e.logger.error("error:","get mixStorePolicy failed");Ne.providers=a(mr=this.protocol.mixStorePolicy.providers||[]).call(mr,function(Tr){return Number(Tr)}),Ne.curProvider=Ne.providers[0]?Number(Ne.providers[0]):1,Ne.nosPolicy=this.protocol.mixStorePolicy.nosPolicy,Ne.s3Policy=this.protocol.mixStorePolicy.s3Policy,$e.getMixStoreToken({curProvider:Ne.curProvider,responseBody:ze,callback:i(vr=function(Tr,Ir){Tr?Ne.done(Tr):(Ne.mixStoreToken=Ir,Ne.getMixStoreToken=function(kr,Ar){$e.getMixStoreToken({curProvider:kr,responseBody:ze,callback:function(Nr,Mn){Nr?Ne.done(Nr):Ar(Mn)}})},Ne.curProvider===1&&(Ne.nosToken=Ir),$e._doPreviewFile(Ne,nr))}).call(vr,$e)})}else this._doPreviewFile(Ne,nr)}).call(sr,this)})},Ie._doPreviewFile=function(Ne,nr){var sr=this;Ne=pe.merge(Ne,sr.options.providers);var $e=Dt.genUploadUrl(Ne.nosToken.bucket);Ne.mixEnable&&Ne.curProvider===1&&($e=Dt.genUploadUrl(Ne.mixStoreToken.bucket));var er,or=Dt.chunkUploadUrl;sr.logger.info("_doPreviewFile: start upload"),Ne.commonUpload||!or||Dt.isWeixinApp||Dt.isNodejs||Dt.isRN?(Ne.commonUpload=!0,er=$e):(er=or,Ne.nosLbsUrls=Dt.nosLbsUrls,sr.options.edgeList?Ne.edgeList=sr.options.edgeList:Ne.updateNosEdgeList=function(cr){sr.options.edgeList=cr}),sr.protocol.reporterHook.emit("reporter/uploadStart");var ze=this.assembleUploadParams(Ne.nosToken);Ne.mixEnable&&Ne.curProvider===1&&(ze=this.assembleUploadParams(Ne.mixStoreToken));function rr(cr,mr,vr,Tr){if(cr){var Ir=pe.get(cr,"msg.message")||pe.get(cr,"message")||"Unknown error message",kr=pe.get(cr,"msg.code")||pe.get(cr,"code")||"Unknown error code";sr.logger.warn("_doPreviewFile: upload done, failed ",kr,Ir),sr.protocol.reporterHook.emit("reporter/uploadEnd",cr.code==="RequestAbortedError"||cr.code==="abort"?ar.kCanceled:ar.kFailed);var Ar=s({},Tr||nr,{status:"fail"}),Nr=ie(ie({},Ne.callback.options),{},{msg:Ar});return Ne.uploaddone&&Ne.uploaddone(cr,Nr,Ar),void Ne.done(cr,Ne.callback.options)}if(sr.logger.info("_doPreviewFile: upload done, success"),sr.protocol.reporterHook.emit("reporter/uploadEnd",ar.kSucceed),Ne.uploaddone&&Ne.uploaddone(null,pe.copy(mr),Tr||nr),mr=tr.parseResponse(mr,sr.options.exifOrientation),vr||mr.isS3||(mr.url=Dt.genDownloadUrl(Ne.nosToken,ze.Object,Dt.serverNosConfig.cdnDomain),Ne.nosToken.shortUrl&&(mr._url_safe=Ne.nosToken.shortUrl)),pe.exist(Ne.fileInputName))mr.name=Ne.fileInputName;else if(Ne.blob){var Mn=Ne.blob.name;if(mr.name=Mn||"blob-"+mr.md5,!Mn){var Or=Ne.blob.type;mr.ext=u(Or).call(Or,c(Or).call(Or,"/")+1)}}else Ne.filePath?mr.name=Ne.filePath:Ne.fileObject&&(mr.name=Ne.fileObject.fileName);if(!mr.ext){var Pr,Rr,Qr=c(Pr=mr.name).call(Pr,".");Qr===-1?mr.ext="unknown":mr.ext=u(Rr=mr.name).call(Rr,Qr+1)}mr.size=mr.size||0,mr.isS3&&mr._url_safe?sr.getNosOriginUrl({safeShortUrl:mr._url_safe,done:function(hn,Ur){hn?sr.logger.error("error:","getNosOriginUrl failed",hn):(mr.url=Ur,Ne.done(null,pe.copy(mr)))}}):Ne.done(null,pe.copy(mr))}if(Dt.isWeixinApp)pe.verifyOptions(Ne,"filePath","msg::_doPreviewFile"),sr.fileQuickTransfer(Ne,rr,function(){var cr=wx.uploadFile({url:er,filePath:Ne.filePath,name:"file",formData:ze,fail:function(mr){rr({code:"FAILED",msg:mr}),sr.logger.error("error:","api::msg:upload file failed",mr)},success:function(mr){if(mr.statusCode===200)try{rr(null,JSON.parse(mr.data))}catch(vr){sr.logger.error("error:","parse wx upload file res error",vr),rr({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:mr.data,msg:mr.errMsg})}else rr({code:mr.statusCode,msg:mr.errMsg})}});typeof Ne.uploadprogress=="function"&&cr&&(Ne.beginupload(cr,nr),sr.logger.info("_doPreviewFile::mini uploadprogress"),cr.onProgressUpdate(function(mr){Ne.uploadprogress({total:mr.totalBytesExpectedToSend,loaded:mr.totalBytesSent,percentage:mr.progress,percentageText:mr.progress+"%"},nr)}))});else if(Dt.isNodejs){var Et={url:er,name:"file",formData:ze,success:function(cr){if(cr.statusCode===200)try{rr(null,JSON.parse(cr.data))}catch(mr){sr.protocol.logger.error("error:","parse nodejs upload file res error",mr),rr({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:cr.data,msg:cr.errMsg})}else rr({code:cr.statusCode,msg:cr.errMsg})},fail:function(cr){rr({code:"FAILED",msg:cr}),sr.protocol.logger.error("error:","api::msg:upload file failed",cr)}};if(Ne.filePath)Et.filePath=Ne.filePath;else{if(n(Ne.fileObject)!=="object")throw new Ue("Nodejs上传fileObject参数类型应如 {fileName:..,fileData:..} ");Et.fileData=Ne.fileObject.fileData}sr.fileQuickTransfer(Ne,rr,function(){dr.uploadFile(Et)})}else if(Dt.isRN){var Lt={url:er,name:"file",formData:ze,filePath:Ne.filePath,success:function(cr){if(cr.ok&&cr.status===200)try{var mr=a(cr.headers)&&a(cr.headers).etag;cr.md5=mr?typeof mr=="string"?mr:mr[0]:"UNKNOWN",rr(null,cr)}catch(vr){sr.protocol.logger.error("error:","parse React Native upload file res error",vr),rr({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:cr})}else rr({code:cr.status,msg:cr.statusText})},fail:function(cr){rr({code:"FAILED",msg:cr}),sr.protocol.logger.error("error:","api::msg:upload file failed",cr)}};sr.fileQuickTransfer(Ne,rr,function(){dr.uploadFile(Lt)})}else Ne.url=er,Ne.params=ze,Ne.fileName="file",sr.fileQuickTransfer(Ne,rr,function(){return sr.protocol.adaptersUploadFile(s({},Ne,{uploaddone:rr}),nr)})},Ie.fileQuickTransfer=function(Ne,nr,sr){var $e,er=this;Ne=Ne||{},nr instanceof Function||(nr=function(){}),sr instanceof Function||(sr=function(){});var or=Ne.fastPass;if(or)try{or=JSON.parse(or),Ne.fastPass=or}catch{er.protocol.logger.error("快传参数解析失败")}var ze=Ne.fileInputName||Ne.name||Ne.blob&&Ne.blob.name||"",rr=Ne.fileSize||Ne.size||Ne.blob&&Ne.blob.size||0,Et=or?d($e=(or.md5||Ne.digest||"")+"").call($e):"",Lt=Ne.type||Ne.blob&&Ne.blob.type;if(Et&&rr>=Dt.threshold){var cr=!0,mr={name:ze,md5:Et,ext:u(ze).call(ze,c(ze).call(ze,".")+1),type:Lt};switch(Lt){case"image":or&&or.w&&or.h?(mr.w=or.w,mr.h=or.h):(cr=!1,er.protocol.logger.error("快传 image 文件缺少参数 w 或 h"));break;case"video":or&&or.w&&or.h&&or.dur?(mr.w=or.w,mr.h=or.h,mr.dur=or.dur):(cr=!1,er.protocol.logger.error("快传 video 文件缺少参数 w 或 h 或 dur"));break;case"audio":or&&or.dur?mr.dur=or.dur:(cr=!1,er.protocol.logger.error("快传 audio 文件缺少参数 dur"))}if(!cr)return void sr();var vr={fileQuickTransfer:{md5:Et}};return rr&&(vr.fileQuickTransfer.size=rr),this.protocol.sendCmd("fileQuickTransfer",vr,function(Tr,Ir,kr){!Tr&&kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.url||(er.protocol.logger.error("misc::fileQuickTransfer: not found",Tr,Ir),sr()),kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.threshold&&(Dt.threshold=kr.fileQuickTransfer.threshold||0),kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.url&&(mr.size=rr||kr.fileQuickTransfer.size,mr.url=kr.fileQuickTransfer.url,kr.fileQuickTransfer._url_safe&&(mr._url_safe=kr.fileQuickTransfer._url_safe),nr(Tr,mr,!0))})}sr()},Ie.sendFile=function(Ne){if((Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendFile",done:Ne.done}),Ne.type||(Ne.type="file"),Ne=pe.merge(Ne,this.options.providers),pe.verifyParamPresentJustOne(Ne,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),pe.exist(Ne.maxSize)&&pe.verifyParamType("maxSize",Ne.maxSize,"number","api::previewFile"),pe.exist(Ne.commonUpload)&&pe.verifyParamType("commonUpload",Ne.commonUpload,"boolean","api::previewFile"),this.processCallback(Ne),Ne.filePath=Ne.filePath||Ne.wxFilePath,delete Ne.wxFilePath,Ne.dataURL)return this._previewAndSendFile(Ne);if(Ne.blob)return this._previewAndSendFile(Ne);if(Ne.fileInput)return Ne.fileInput=pe.verifyFileInput(Ne.fileInput,"msg::sendFile"),Ne.fileInput.files&&!Ne.fileInput.files.length?void Ne.done(Ue.newNoFileError("请选择"+Ne.type+"文件",{callFunc:"msg::sendFile",fileInput:Ne.fileInput}),Ne.callback.options):this._previewAndSendFile(Ne);if(Ne.filePath||Ne.fileObject)return this._previewAndSendFile(Ne);if(Ne.file){var nr,sr=Ne.file._url_safe;return sr&&(nr=Ne.file.url,Ne.file.url=sr,delete Ne.file._url_safe),Ne.msg=new this.message.FileMessage(Ne),this.sendMsg(Ne,nr)}},Ie._previewAndSendFile=function(Ne){var nr=this;pe.verifyCallback(Ne,"uploaddone beforesend","msg::_previewAndSendFile");var sr=ie({},Ne),$e=new nr.message.Message(sr);$e.type=Ne.type;var er=nr.formatReturnMsg($e),or=nr.protocol.reporterHook.getSafeClock(),ze={apiCallingTime:nr.protocol.reporterHook.getNTPTime(or),attachUploadDuration:0},rr=Ne.done;return Ne.done=function(Et,Lt){if(Ne.done=rr,Et){var cr=s({},er,{status:"fail"}),mr=ie(ie({},Ne.callback.options),{},{msg:cr});Ne.done(Et,mr)}else{if(ze.attachUploadDuration=nr.protocol.reporterHook.getSafeClock()-or,/chatroom/.test(Ne.scene))return;var vr,Tr=Lt._url_safe;Tr&&!Lt.isS3&&(vr=Lt.url,Lt.url=Tr,delete Lt._url_safe),Ne.file=Lt,Ne.msg=new nr.message.FileMessage(Ne,$e.idClient),Ne.beforesend(nr.sendMsg(Ne,vr,ze))}},nr.previewFile(Ne,er),er},Ie.assembleUploadParams=function(Ne){return Ne?{Object:decodeURIComponent(Ne.objectName),"x-nos-token":Ne.token,"x-nos-entity-type":"json"}:null},Ie.deleteFile=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"deleteFile",hasCallback:!1}),pe.verifyParamPresentJustOne(Ne,"docId","msg::deleteFile"),this.removeFile({docId:Ne.docId,callback:function(nr,sr){nr?Ne.error&&Ne.error(nr,sr):Ne.success&&Ne.success(sr)}})},Ie.getFile=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"getFile",hasCallback:!1}),pe.verifyParamPresentJustOne(Ne,"docId","msg::getFile"),this.fetchFile({docId:Ne.docId,callback:function(nr,sr){nr?Ne.error&&Ne.error(nr,sr):Ne.success&&Ne.success(sr.info)}})},Ie.getFileList=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"getFileList",hasCallback:!1});var nr=Ne.fromDocId,sr=nr===void 0?"":nr,$e=Ne.limit,er=$e===void 0?10:$e,or={limit:er};sr&&(or.fromDocId=sr),this.fetchFileList({fileListParam:or,callback:function(ze,rr){ze?(er>30&&(ze.message=ze.message+"::文档条数超过限制:30"),Ne.error&&Ne.error(ze,rr)):Ne.success&&Ne.success(rr)}})},Ie.sendGeo=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendGeo",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.GeoMessage(Ne),this.sendMsg(Ne)},Ie.sendTipMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendTipMsg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.TipMessage(Ne),this.sendMsg(Ne)},Ie.sendCustomMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendCustomMsg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.CustomMessage(Ne),this.sendMsg(Ne)},Ie.sendRobotMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendRobotMsg",done:Ne.done}),this.logger.warn("this api will be abandon"),this.processCallback(Ne),Ne.msg=new this.message.RobotMessage(Ne),this.sendMsg(Ne)},Ie.sendMsg=function(Ne,nr,sr){var $e=this,er=$e.protocol,or=Ne.msg,ze={};sr=sr||{apiCallingTime:er.reporterHook.getNTPTime(),attachUploadDuration:0};var rr,Et=!!Ne.isLocal;if(this.logger.warn("sendMsg::start: "+or.idClient),Et&&(Ne.time&&(or.time=Ne.time),Ne.idClient&&(or.idClient=Ne.idClient),Ne.localFrom&&(rr=Ne.localFrom+"")),Ne.resend&&(Ne.flow!=="out"||Ne.status!=="fail"))return pe.onError("只能重发发送失败的消息");Ne.callback.options.idClient=or.idClient,$e.beforeSendMsg(Ne,ze);var Lt=Ne.rtnMsg=$e.formatReturnMsg(or,rr);if(nr&&!$e.options.keepNosSafeUrl&&Lt.file&&(Lt.file._url_safe=Lt.file.url,Lt.file.url=nr,Lt.type==="audio"&&(Lt.file.mp3Url=nr+(~m(nr).call(nr,"?")?"&":"?")+"audioTrans&type=mp3")),Lt.hasOwnProperty("chatroomId")&&!Lt.chatroomId)return pe.onError("聊天室未连接");if(Et&&(Lt.status="success",Lt.isLocal=!0),er.storeSendMsg&&(ze.promise=er.storeSendMsg(Lt)),Ne.cbaop=function(mr,vr){if(mr)return mr.code===7101&&(Lt.isInBlackList=!0,Lt.idServer=vr.idServer,Lt.time=vr.time),mr.from!=="server"?(Lt.status="fail",er.updateSendMsgError&&er.updateSendMsgError(Lt),Lt):void 0},!Et){nr&&!$e.options.keepNosSafeUrl&&Ne.callback&&(Ne.callback.originUrl=nr),Ne.toAccids&&Ne.toAccids.length&&(or.toAccids=o(Ne.toAccids)),ze.msg=or,sr.sendTime=er.reporterHook.getNTPTime(),er.reporterHook.hasOriginTimetick()&&(ze.msg.__clientExt=o({statistics:sr}));var cr=or;$e.sendCmd(Ne.cmd,ze,function(){if(Dt.isBrowser){var mr=arguments[0],vr=arguments[1]||{},Tr=$e.subType==="chatroom",Ir=cr.scene===0,kr=er.reporterHook.getNTPTime(),Ar={msgId:vr.idServer,clientId:cr.idClient,msgTime:vr.time||0,fromAccid:$e.account,toAccid:Ir?cr.to:"",type:Tr?4:cr.scene,roomId:Tr?$e.options.chatroomId:"",tid:Tr||Ir?"":cr.to,result:mr?mr.code:200,failReason:mr?mr.message:"",rt:v(kr-sr.apiCallingTime),apiCallingTime:sr.apiCallingTime,sendTime:sr.sendTime,attachUploadDuration:sr.attachUploadDuration,apiCallbackTime:kr};$e.reporter&&$e.reporter.report("msgSend",Ar)}Ne.callback&&Ne.callback.apply($e,arguments);var Nr=arguments[0],Mn=arguments[1];!Nr&&Mn&&Mn.from===Mn.to&&$e.protocol.markMsgRead(Mn)})}return $e.afterSendMsg(Ne),Et&&g(function(){Lt=pe.simpleClone(Lt),Ne.done(null,Lt)},0),pe.copy(Lt)},Ie.beforeSendMsg=function(){},Ie.afterSendMsg=function(){},Ie.formatReturnMsg=function(Ne,nr){var sr;return Ne=pe.copy(Ne),this.protocol.completeMsg(Ne),Ne.status="sending",nr&&(Ne.from=nr),Ne=b(sr=this.message).call(sr,Ne),Ne=this.protocol.amendMsg(Ne)},Ie.resendMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"resendMsg",done:Ne.done}),pe.verifyOptions(Ne,"msg","msg::resendMsg"),this.trimMsgFlag(Ne),Ne.resend=!0,this._sendMsgByType(Ne)},Ie.forwardMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"forwardMsg",done:Ne.done}),pe.verifyOptions(Ne,"msg","msg::forwardMsg"),this.trimMsgFlag(Ne),this.beforeForwardMsg(Ne),Ne.forward=!0,Ne.msg.idClient=pe.guid(),this._sendMsgByType(Ne)},Ie.trimMsgFlag=function(Ne){Ne&&Ne.msg&&(Ne.msg=pe.copy(Ne.msg),delete Ne.msg.resend,delete Ne.msg.forward)},Ie.beforeForwardMsg=function(){},Ie._sendMsgByType=function(Ne){switch(pe.verifyOptions(Ne,"msg","msg::_sendMsgByType"),pe.verifyParamValid("msg.type",Ne.msg.type,this.message.validTypes,"msg::_sendMsgByType"),pe.merge(Ne,Ne.msg),Ne.type){case"text":return this.sendText(Ne);case"image":case"audio":case"video":case"file":return this.sendFile(Ne);case"geo":return this.sendGeo(Ne);case"custom":return this.sendCustomMsg(Ne);case"tip":return this.sendTipMsg(Ne);default:throw new Ue("不能发送类型为 "+Ne.type+" 的消息")}},Ie.parseRobotTemplate=function(Ne){if(this.logger.warn("this api will be abandon"),/<template[^>/]+\/>/.test(Ne))return{raw:Ne,json:[{type:"text",name:"",text:""}]};if(!/<template[^>/]+>/.test(Ne))return{raw:Ne,json:[{type:"text",name:"",text:Ne}]};var nr=new kt({escapeMode:!1});Ne=Ne.replace(/<template [^>]+>/,"<template>");var sr=nr.xml2js(Ne);sr=sr.template.LinearLayout,T(sr)||(sr=[sr]);var $e=[];return sr=_(sr).call(sr,function(ze){ze.image&&($e=y($e).call($e,or(ze))),ze.text&&($e=y($e).call($e,er(ze))),ze.link&&($e=y($e).call($e,function(rr){if(rr.link){var Et=rr.link;T(Et)||(Et=[Et]),Et=a(Et).call(Et,function(Lt){return Lt.image&&(Lt.image=or(Lt)),Lt.text&&(Lt.text=er(Lt)),Lt._type==="url"?(Lt.type="url",Lt.style=Lt._style||"",Lt.target=Lt._target,delete Lt._target,delete Lt._style):Lt._type==="block"&&(Lt.type="block",Lt.style=Lt._style||"",Lt.params=Lt._params||"",Lt.target=Lt._target,delete Lt._params,delete Lt._target,delete Lt._style),delete Lt._type,Lt}),rr.link=Et}return rr.link}(ze)))}),{raw:Ne,json:$e};function er(ze){var rr;return T(ze.text)||(ze.text=[ze.text]),ze.text=a(rr=ze.text).call(rr,function(Et){return{type:"text",name:Et._name,text:Et.__text}}),ze.text}function or(ze){var rr;return T(ze.image)||(ze.image=[ze.image]),ze.image=a(rr=ze.image).call(rr,function(Et){return{type:"image",name:Et._name,url:Et._url}}),ze.image}}},function(t,r,e){e(587);var n=e(12);t.exports=n.Object.assign},function(t,r,e){var n=e(1),o=e(588);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},function(t,r,e){var n=e(27),o=e(11),i=e(19),a=e(4),s=e(118),u=e(132),c=e(148),d=e(42),m=e(124),v=Object.assign,g=Object.defineProperty,b=o([].concat);t.exports=!v||a(function(){if(n&&v({b:1},v(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var T={},_={},y=Symbol();return T[y]=7,"abcdefghijklmnopqrst".split("").forEach(function(O){_[O]=O}),v({},T)[y]!=7||s(v({},_)).join("")!="abcdefghijklmnopqrst"})?function(T,_){for(var y=d(T),O=arguments.length,V=1,Ce=u.f,ae=c.f;O>V;)for(var Fe,_e=m(arguments[V++]),de=Ce?b(s(_e),Ce(_e)):s(_e),oe=de.length,he=0;oe>he;)Fe=de[he++],n&&!i(ae,_e,Fe)||(y[Fe]=_e[Fe]);return y}:v},function(t,r,e){var n=e(21),o=e(590),i=Array.prototype;t.exports=function(a){var s=a.reverse;return a===i||n(i,a)&&s===i.reverse?o:s}},function(t,r,e){e(591);var n=e(30);t.exports=n("Array").reverse},function(t,r,e){var n=e(1),o=e(11),i=e(79),a=o([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},function(t,r,e){t.exports=e(593)},function(t,r,e){t.exports=e(594)},function(t,r,e){var n=e(595);t.exports=n},function(t,r,e){var n=e(254);t.exports=n},function(t,r,e){t.exports=e(597)},function(t,r,e){var n=e(598);t.exports=n},function(t,r,e){var n=e(206);t.exports=n},function(t,r,e){var n=e(600),o=e(186);t.exports=function(i,a){if(i==null)return{};var s,u,c={},d=n(i);for(u=0;u<d.length;u++)s=d[u],o(a).call(a,s)>=0||(c[s]=i[s]);return c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(601)},function(t,r,e){t.exports=e(602)},function(t,r,e){var n=e(603);t.exports=n},function(t,r,e){var n=e(230);t.exports=n},function(t,r,e){var n,o,i;(function(a,s){o=[],(i=typeof(n=function(u){return function(c){(c=c||{}).arrayAccessForm=c.arrayAccessForm||"none",c.emptyNodeForm=c.emptyNodeForm||"text",c.jsAttributeFilter=c.jsAttributeFilter,c.jsAttributeConverter=c.jsAttributeConverter,c.attributeConverters=c.attributeConverters||[],c.datetimeAccessFormPaths=c.datetimeAccessFormPaths||[],c.arrayAccessFormPaths=c.arrayAccessFormPaths||[],c.xmldomOptions=c.xmldomOptions||{},c.enableToStringFunc===void 0&&(c.enableToStringFunc=!0),c.skipEmptyTextNodesForObj===void 0&&(c.skipEmptyTextNodesForObj=!0),c.stripWhitespaces===void 0&&(c.stripWhitespaces=!0),c.useDoubleQuotes===void 0&&(c.useDoubleQuotes=!0),c.ignoreRoot===void 0&&(c.ignoreRoot=!1),c.escapeMode===void 0&&(c.escapeMode=!0),c.attributePrefix===void 0&&(c.attributePrefix="_"),c.selfClosingElements===void 0&&(c.selfClosingElements=!0),c.keepCData===void 0&&(c.keepCData=!1),c.keepText===void 0&&(c.keepText=!1),c.jsDateUTC===void 0&&(c.jsDateUTC=!1),function(){function Ie(pe){var kt=String(pe);return kt.length===1&&(kt="0"+kt),kt}typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),typeof Date.prototype.toISOString!="function"&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+Ie(this.getUTCMonth()+1)+"-"+Ie(this.getUTCDate())+"T"+Ie(this.getUTCHours())+":"+Ie(this.getUTCMinutes())+":"+Ie(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var d=1,m=3,v=4,g=8,b=9;function T(Ie){var pe=Ie.localName;return pe==null&&(pe=Ie.baseName),pe!=null&&pe!==""||(pe=Ie.nodeName),pe}function _(Ie){return typeof Ie=="string"?Ie.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):Ie}function y(Ie,pe,kt){switch(c.arrayAccessForm){case"property":Ie[pe]instanceof Array?Ie[pe+"_asArray"]=Ie[pe]:Ie[pe+"_asArray"]=[Ie[pe]]}if(!(Ie[pe]instanceof Array)&&c.arrayAccessFormPaths.length>0){for(var Ue=!1,Dt=0;Dt<c.arrayAccessFormPaths.length;Dt++){var tr=c.arrayAccessFormPaths[Dt];if(typeof tr=="string"){if(tr===kt){Ue=!0;break}}else if(tr instanceof RegExp){if(tr.test(kt)){Ue=!0;break}}else if(typeof tr=="function"&&tr(pe,kt)){Ue=!0;break}}Ue&&(Ie[pe]=[Ie[pe]])}}function O(Ie){var pe=Ie.split(/[-T:+Z]/g),kt=new Date(pe[0],pe[1]-1,pe[2]),Ue=pe[5].split(".");if(kt.setHours(pe[3],pe[4],Ue[0]),Ue.length>1&&kt.setMilliseconds(Ue[1]),pe[6]&&pe[7]){var Dt=60*pe[6]+Number(pe[7]);Dt=0+((/\d\d-\d\d:\d\d$/.test(Ie)?"-":"+")=="-"?-1*Dt:Dt),kt.setMinutes(kt.getMinutes()-Dt-kt.getTimezoneOffset())}else Ie.indexOf("Z",Ie.length-1)!==-1&&(kt=new Date(Date.UTC(kt.getFullYear(),kt.getMonth(),kt.getDate(),kt.getHours(),kt.getMinutes(),kt.getSeconds(),kt.getMilliseconds())));return kt}function V(Ie,pe){for(var kt={__cnt:0},Ue=Ie.childNodes,Dt=0;Dt<Ue.length;Dt++){var tr=Ue.item(Dt),dr=T(tr);tr.nodeType!==g&&(kt.__cnt++,kt[dr]==null?(kt[dr]=Ce(tr,pe+"."+dr),y(kt,dr,pe+"."+dr)):(kt[dr]instanceof Array||(kt[dr]=[kt[dr]],y(kt,dr,pe+"."+dr)),kt[dr][kt[dr].length]=Ce(tr,pe+"."+dr)))}for(var pr=0;pr<Ie.attributes.length;pr++){var ar=Ie.attributes.item(pr);kt.__cnt++;for(var hr=ar.value,Ne=0;Ne<c.attributeConverters.length;Ne++){var nr=c.attributeConverters[Ne];nr.test.call(null,ar.name,ar.value)&&(hr=nr.convert.call(null,ar.name,ar.value))}kt[c.attributePrefix+ar.name]=hr}var sr=Ie.prefix;return sr&&(kt.__cnt++,kt.__prefix=sr),kt["#text"]&&(kt.__text=kt["#text"],kt.__text instanceof Array&&(kt.__text=kt.__text.join(`
`)),c.escapeMode&&(kt.__text=kt.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),c.stripWhitespaces&&(kt.__text=kt.__text.trim()),delete kt["#text"],c.arrayAccessForm==="property"&&delete kt["#text_asArray"],kt.__text=function($e,er,or){if(c.datetimeAccessFormPaths.length>0)for(var ze=or.split(".#")[0],rr=0;rr<c.datetimeAccessFormPaths.length;rr++){var Et=c.datetimeAccessFormPaths[rr];if(typeof Et=="string"){if(Et===ze)return O($e)}else if(Et instanceof RegExp){if(Et.test(ze))return O($e)}else if(typeof Et=="function"&&Et(ze))return O($e)}return $e}(kt.__text,0,pe+".#text")),kt.hasOwnProperty("#cdata-section")&&(kt.__cdata=kt["#cdata-section"],delete kt["#cdata-section"],c.arrayAccessForm==="property"&&delete kt["#cdata-section_asArray"]),kt.__cnt===1&&kt.__text&&!c.keepText?kt=kt.__text:kt.__cnt===0&&c.emptyNodeForm==="text"?kt="":kt.__cnt>1&&kt.__text!==void 0&&c.skipEmptyTextNodesForObj&&(c.stripWhitespaces&&kt.__text===""||kt.__text.trim()==="")&&delete kt.__text,delete kt.__cnt,c.keepCData||kt.hasOwnProperty("__text")||!kt.hasOwnProperty("__cdata")||Object.keys(kt).length!==1?(c.enableToStringFunc&&(kt.__text||kt.__cdata)&&(kt.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),kt):kt.__cdata?kt.__cdata:""}function Ce(Ie,pe){return Ie.nodeType===b?function(kt){for(var Ue={},Dt=kt.childNodes,tr=0;tr<Dt.length;tr++){var dr=Dt.item(tr);if(dr.nodeType===d){var pr=T(dr);c.ignoreRoot?Ue=Ce(dr,pr):Ue[pr]=Ce(dr,pr)}}return Ue}(Ie):Ie.nodeType===d?V(Ie,pe):Ie.nodeType===m||Ie.nodeType===v?Ie.nodeValue:null}function ae(Ie,pe,kt,Ue){var Dt="<"+(Ie&&Ie.__prefix?Ie.__prefix+":":"")+pe;if(kt)for(var tr=0;tr<kt.length;tr++){var dr=kt[tr],pr=Ie[dr];c.escapeMode&&(pr=_(pr)),Dt+=" "+dr.substr(c.attributePrefix.length)+"=",c.useDoubleQuotes?Dt+='"'+pr+'"':Dt+="'"+pr+"'"}return Dt+=Ue?" />":">"}function Fe(Ie,pe){return"</"+(Ie&&Ie.__prefix?Ie.__prefix+":":"")+pe+">"}function _e(Ie,pe){return c.arrayAccessForm==="property"&&(kt=pe.toString(),Ue="_asArray",kt.indexOf(Ue,kt.length-Ue.length)!==-1)||pe.toString().indexOf(c.attributePrefix)===0||pe.toString().indexOf("__")===0||Ie[pe]instanceof Function;var kt,Ue}function de(Ie){var pe=0;if(Ie instanceof Object)for(var kt in Ie)_e(Ie,kt)||pe++;return pe}function oe(Ie){var pe=[];if(Ie instanceof Object)for(var kt in Ie)kt.toString().indexOf("__")===-1&&kt.toString().indexOf(c.attributePrefix)===0&&pe.push(kt);return pe}function he(Ie){var pe="";return Ie instanceof Object?pe+=function(kt){var Ue="";return kt.__cdata&&(Ue+="<![CDATA["+kt.__cdata+"]]>"),(kt.__text||typeof kt.__text=="number"||typeof kt.__text=="boolean")&&(c.escapeMode?Ue+=_(kt.__text):Ue+=kt.__text),Ue}(Ie):Ie!==null&&(c.escapeMode?pe+=_(Ie):pe+=Ie),pe}function Ve(Ie,pe,kt){var Ue="";return c.jsAttributeFilter&&c.jsAttributeFilter.call(null,pe,Ie)||(c.jsAttributeConverter&&(Ie=c.jsAttributeConverter.call(null,pe,Ie)),Ie!=null&&Ie!==""||!c.selfClosingElements?typeof Ie=="object"?Object.prototype.toString.call(Ie)==="[object Array]"?Ue+=function(Dt,tr,dr){var pr="";if(Dt.length===0)pr+=ae(Dt,tr,dr,!0);else for(var ar=0;ar<Dt.length;ar++)pr+=Ve(Dt[ar],tr,oe(Dt[ar]));return pr}(Ie,pe,kt):Ie instanceof Date?(Ue+=ae(Ie,pe,kt,!1),Ue+=c.jsDateUTC?Ie.toUTCString():Ie.toISOString(),Ue+=Fe(Ie,pe)):de(Ie)>0||typeof Ie.__text=="number"||typeof Ie.__text=="boolean"||Ie.__text||Ie.__cdata?(Ue+=ae(Ie,pe,kt,!1),Ue+=le(Ie),Ue+=Fe(Ie,pe)):c.selfClosingElements?Ue+=ae(Ie,pe,kt,!0):(Ue+=ae(Ie,pe,kt,!1),Ue+=Fe(Ie,pe)):(Ue+=ae(Ie,pe,kt,!1),Ue+=he(Ie),Ue+=Fe(Ie,pe)):Ue+=ae(Ie,pe,kt,!0)),Ue}function le(Ie){var pe="";if(de(Ie)>0){for(var kt in Ie)if(!_e(Ie,kt)){var Ue=Ie[kt];pe+=Ve(Ue,kt,oe(Ue))}}return pe+=he(Ie)}function ie(Ie){if(Ie===void 0||typeof Ie!="string")return null;var pe=null,kt=null;if(u)kt=(pe=new u(c.xmldomOptions)).parseFromString(Ie,"text/xml");else if(window&&window.DOMParser){pe=new window.DOMParser;var Ue=null;if(!(window.ActiveXObject||"ActiveXObject"in window)&&document.all&&!document.addEventListener)try{Ue=pe.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{Ue=null}try{kt=pe.parseFromString(Ie,"text/xml"),Ue!==null&&kt.getElementsByTagNameNS(Ue,"parsererror").length>0&&(kt=null)}catch{kt=null}}else Ie.indexOf("<?")===0&&(Ie=Ie.substr(Ie.indexOf("?>")+2)),(kt=new ActiveXObject("Microsoft.XMLDOM")).async="false",kt.loadXML(Ie);return kt}this.asArray=function(Ie){return Ie==null?[]:Ie instanceof Array?Ie:[Ie]},this.toXmlDateTime=function(Ie){return Ie instanceof Date?Ie.toISOString():typeof Ie=="number"?new Date(Ie).toISOString():null},this.asDateTime=function(Ie){return typeof Ie=="string"?O(Ie):Ie},this.xml2dom=function(Ie){return ie(Ie)},this.dom2js=function(Ie){return Ce(Ie,null)},this.js2dom=function(Ie){return ie(this.js2xml(Ie))},this.xml2js=function(Ie){var pe=ie(Ie);return pe!=null?this.dom2js(pe):null},this.js2xml=function(Ie){return le(Ie)},this.getVersion=function(){return"3.4.4"}}})=="function"?n.apply(r,o):n)===void 0||(t.exports=i)})()},function(t,r,e){var n=e(116);t.exports=function(o,i){return i.method="POST",i.headers=i.headers||{},i.headers["Content-Type"]="multipart/form-data",i.timeout=0,i.type=i.type||"json",n(o,i)}},function(t,r,e){var n=e(15),o=e(52),i=e(6),a=e(3),s=e(13),u=s.chunkSize,c=e(116),d={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};t.exports=function m(v,g,b,T){var _={file:v.data[g],fileSize:v.data[g].size,fileUploadedSize:0,percentage:0},y=v.url;function O(Ve){var le=_.fileUploadedSize+Ve.loaded,ie=Math.floor(1e4*le/_.fileSize)/100;if(o(ie)>=100&&(ie=100,O=function(){}),_.percentage!==ie){_.percentage=ie;var Ie={docId:v.docId,total:_.fileSize,loaded:le,percentage:ie,percentageText:ie+"%"};v.fileInput&&(Ie.fileInput=v.fileInput),v.blob&&(Ie.blob=v.blob),v.uploadprogress(Ie)}}function V(Ve){try{Ve=JSON.parse(Ve)}catch(Ie){return void b.onError(Ie)}if(Ve.errMsg||Ve.errCode)b.onError(Ve);else if(Ve.offset<_.fileSize)delete _e.onaftersend,_.fileUploadedSize=Ve.offset,function(Ie,pe,kt,Ue){var Dt=Ie.offset,tr=Ie.offset+u;if(typeof FileReader<"u"){var dr,pr=new FileReader;pr.readAsArrayBuffer(n(dr=Ue.file).call(dr,Dt,tr)),pr.addEventListener("load",function(hr){pe.data=hr.target.result,pe.query.offset=Ie.offset,pe.query.complete=tr>=Ue.fileSize,pe.query.context=Ie.context,pe.onuploading=O,pe.onload=V,pe.onerror=Ce,b.sn=c(y,pe)}),pr.addEventListener("error",function(hr){pe.onerror(hr.target.error)})}else{var ar;pe.data=n(ar=Ue.file).call(ar,Dt,tr),pe.query.offset=Ie.offset,pe.query.complete=tr>=Ue.fileSize,pe.query.context=Ie.context,pe.onuploading=O,pe.onload=V,pe.onerror=Ce,b.sn=c(y,pe)}}(Ve,_e,0,_);else{var le=s.genFileUrl(v.nosToken);v.type==="image"?c(le+"?imageInfo",{onload:function(Ie){try{Ie=JSON.parse(Ie),v.uploaddone(null,{docId:Ve.docId,w:Ie.Width,h:Ie.Height,orientation:Ie.Orientation||"",type:Ie.Type,size:Ie.Size||_.fileSize})}catch(pe){ie(pe)}},onerror:function(Ie){if(typeof Image<"u"){var pe=new Image;pe.src=le,pe.onload=function(){v.uploaddone(null,{docId:Ve.docId,w:pe.width,h:pe.height,size:_.fileSize})},pe.onerror=function(kt){ie(kt)}}else ie(Ie)}}):v.type==="video"||v.type==="audio"?c(le+"?vinfo",{onload:function(Ie){try{(Ie=JSON.parse(Ie)).GetVideoInfo&&Ie.GetVideoInfo.VideoInfo&&(Ie=Ie.GetVideoInfo.VideoInfo),v.uploaddone(null,{docId:Ve.docId,w:Ie.Width,h:Ie.Height,dur:Ie.Duration,orientation:Ie.Rotate,audioCodec:Ie.AudioCodec,videoCodec:Ie.VideoCodec,container:Ie.Container,size:Ie.Size||_.fileSize})}catch(pe){ie(pe)}},onerror:ie}):v.uploaddone(null,{docId:Ve.docId,size:_.fileSize})}function ie(Ie){b.onError(Ie)}}function Ce(Ve){v.errorHook(Ve,{url:y,provider:"nos"});var le=Ve&&Ve.code;function ie(){try{if(Ve.result)var Ie=JSON.parse(Ve.result);else Ie=Ve;b.onError(Ie)}catch(pe){b.onError(pe)}}_.fileUploadedSize===0&&le!=="abort"?v.edgeList?T<v.edgeList.length-1?m(v,g,b,T+1):ie():v.nosLbsUrls&&v.nosLbsUrls.length>0?function(Ie,pe,kt,Ue,Dt){return new a(function(tr){function dr(){Dt.adaptersRequest(kt[Ie],{query:{version:"1.0",bucketname:pe},method:"GET",onerror:pr,onload:function(ar){try{(ar=JSON.parse(ar))&&ar.upload&&ar.upload.length?tr(ar.upload):pr()}catch{pr()}}},{exception_service:3})}function pr(){Ue.onLbsUrlFail(kt[Ie]),Ie<kt.length-1?(Ie++,dr()):tr([])}dr()})}(0,v.nosToken.bucket,v.nosLbsUrls,b,v).then(function(Ie){Ie.length>0?(v.edgeList=Ie,v.updateNosEdgeList&&v.updateNosEdgeList(Ie),m(v,g,b,T+1)):ie()}):(v.edgeList=s.edgeList,m(v,g,b,T+1)):ie()}typeof T!="number"&&(T=-1),v.edgeList&&v.edgeList.length&&(T=T>0?T:0,y=v.edgeList[T]),y+="/"+v.nosToken.bucket+"/"+v.nosToken.objectName;var ae=v.data.file&&v.data.file.type;if(!ae||i(ae).call(ae,"/")<0){var Fe=(v.fileInputName||"").split(".").pop();v.type==="image"?ae="image/"+(Fe==="jpg"?"jpeg":Fe):v.type!=="audio"&&v.type!=="video"||(ae=d[Fe])}var _e={query:{offset:0,complete:u>=_.fileSize,version:"1.0"},headers:{"Content-Type":ae||"application/octet-stream","x-nos-token":v.nosToken.token},method:"POST",timeout:0,onaftersend:function(){v.beginupload(b)},onuploading:O,onload:V,onerror:Ce};if(typeof FileReader<"u"){var de,oe=new FileReader;oe.addEventListener("load",function(Ve){_e.data=Ve.target.result,b.sn=c(y,_e)}),oe.addEventListener("error",function(Ve){_e.onerror(Ve.target.error)}),oe.readAsArrayBuffer(n(de=_.file).call(de,0,u))}else{var he;_e.data=n(he=_.file).call(he,0,u),b.sn=c(y,_e)}}},function(t,r,e){e(608);var n=e(12);t.exports=n.Reflect.construct},function(t,r,e){var n=e(1),o=e(33),i=e(76),a=e(273),s=e(169),u=e(36),c=e(28),d=e(80),m=e(4),v=o("Reflect","construct"),g=Object.prototype,b=[].push,T=m(function(){function O(){}return!(v(function(){},[],O)instanceof O)}),_=!m(function(){v(function(){})}),y=T||_;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(O,V){s(O),u(V);var Ce=arguments.length<3?O:s(arguments[2]);if(_&&!T)return v(O,V,Ce);if(O==Ce){switch(V.length){case 0:return new O;case 1:return new O(V[0]);case 2:return new O(V[0],V[1]);case 3:return new O(V[0],V[1],V[2]);case 4:return new O(V[0],V[1],V[2],V[3])}var ae=[null];return i(b,ae,V),new(i(a,O,ae))}var Fe=Ce.prototype,_e=d(c(Fe)?Fe:g),de=i(O,_e,V);return c(de)?de:_e}})},function(t,r,e){t.exports=e(610)},function(t,r,e){var n=e(611);t.exports=n},function(t,r,e){var n=e(215);t.exports=n},function(t,r,e){t.exports=e(613)},function(t,r,e){var n=e(614);t.exports=n},function(t,r,e){var n=e(615);t.exports=n},function(t,r,e){var n=e(616);t.exports=n},function(t,r,e){e(617);var n=e(12);t.exports=n.Object.setPrototypeOf},function(t,r,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(135)})},function(t,r,e){t.exports=e(619)},function(t,r,e){var n=e(620);t.exports=n},function(t,r,e){var n=e(272);t.exports=n},function(t,r){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(623)},function(t,r,e){var n=e(624);t.exports=n},function(t,r,e){var n=e(283);t.exports=n},function(t,r,e){e(626);var n=e(12);t.exports=n.Object.getPrototypeOf},function(t,r,e){var n=e(1),o=e(4),i=e(42),a=e(134),s=e(228);n({target:"Object",stat:!0,forced:o(function(){a(1)}),sham:!s},{getPrototypeOf:function(u){return a(i(u))}})},function(t,r,e){var n,o=e(139),i=e(6),a=e(10),s=e(25),u=e(8),c=e(15),d=e(5),m=e(0),v=e(73).fn,g=e(285),b=e(276),T=e(40),_=e(24).reportAPI;v.transDoc=function(y){var O;m.verifyOptions(y,"fileInput done","nos::transDoc");try{var V=y.fileInput.files[0],Ce=["ppt","pdf","pptx","doc","docx"],ae=y.fileInputName=V.name,Fe={ppt:1,pptx:2,pdf:3,doc:6,docx:7},_e=ae.substring(o(ae).call(ae,".")+1);if(i(Ce).call(Ce,_e)<0)return void y.done(T.newNoFileError("请上传正确格式的文件【ppt, pptx, pdf, doc, docx】",{callFunc:"nos: transDoc",fileInput:y.fileInput}),y)}catch{return void y.done(T.newNoFileError("请上传正确的文件节点",{callFunc:"msg::previewFile",fileInput:y.fileInput}),y)}var de=a(b.genResponseBody("file")||{}).replace(/"/gi,'\\"'),oe={transToken:{name:ae,type:Fe[_e],transType:y.transcode==="png"?11:10,size:V.size,body:de}};this.getNosTokenTrans({responseBody:oe,nosToken:{nosScene:y.nosScene||this.nosScene,nosSurvivalTime:y.nosSurvivalTime},callback:s(O=function(he,Ve){he?y.done(he):(y.nosToken=Ve.nosToken,y.docId=Ve.docId,this._doPreviewFile(y))}).call(O,this)})},v.getSimpleNosToken=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y.num=1,m.verifyOptions(y),this.cbAndSendCmd("getSimpleNosToken",y)},v.getNosToken=function(y){var O=y.callback,V=y.nosToken,Ce=y.responseBody,ae={tag:V.nosScene};V.nosSurvivalTime&&V.nosSurvivalTime!==1/0&&(ae.expireSec=V.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:Ce,nosToken:ae},O)},v.getNosTokenTrans=function(y){this.sendCmd("getNosTokenTrans",y.responseBody,y.callback)},v.getMixStoreToken=function(y){this.sendCmd("getMixStoreToken",{mixTokenReq:{provider:y.curProvider,tokenCount:y.tokenCount||1,tag:"im",returnBody:y.responseBody}},y.callback)},v.packFileDownloadName=function(y){_({instance:this,className:"ApiBaseFn",funcName:"packFileDownloadName",hasCallback:!1}),m.verifyOptions(y,"url name",!0,"","nos::packFileDownloadName");var O=y.url;return O+m.genUrlSep(O)+"download="+encodeURIComponent(y.name)},v.audioToMp3=function(y){_({instance:this,className:"ApiBaseFn",funcName:"audioToMp3",hasCallback:!1}),m.verifyOptions(y,"url","nos::audioToMp3");var O=y.url;return O+m.genUrlSep(O)+"audioTrans&type=mp3"},v.removeFile=function(y){this.sendCmd("removeFile",y,y.callback)},v.fetchFile=function(y){this.sendCmd("fetchFile",y,y.callback)},v.fetchFileList=function(y){this.sendCmd("fetchFileList",y,y.callback)},v.stripImageMeta=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"stripImageMeta",hasCallback:!1}),this.beforeProcessImage(y,"stripmeta")},v.qualityImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"qualityImage",hasCallback:!1}),this.beforeProcessImage(y,"quality")},v.interlaceImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"interlaceImage",hasCallback:!1}),this.beforeProcessImage(y,"interlace")},v.rotateImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"rotateImage",hasCallback:!1}),this.beforeProcessImage(y,"rotate")},v.blurImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"blurImage",hasCallback:!1}),this.beforeProcessImage(y,"blur")},v.cropImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"cropImage",hasCallback:!1}),this.beforeProcessImage(y,"crop")},v.thumbnailImage=function(y){return _({instance:this,className:"ApiBaseFn",funcName:"thumbnailImage",hasCallback:!1}),this.beforeProcessImage(y,"thumbnail")},v.beforeProcessImage=function(y,O){var V=m.copy(y);return V.type=O,y.ops=[V],this.processImage(y)},v.processImage=function(y){var O;y.callback=_({instance:this,className:"ApiBaseFn",funcName:"processImage",done:y.callback});var V=this;m.verifyOptions(y,"url ops",!0,"","nos::processImage"),m.verifyParamType("ops",y.ops,"array","nos::processImage");var Ce=u(O=y.ops).call(O,function(ae){var Fe,_e;return m.verifyOptions(ae,"type",!0,"","nos::processImage"),m.verifyParamValid("type",ae.type,g.validTypes,"nos::processImage"),V["gen"+c(Fe=ae.type).call(Fe,0,1).toUpperCase()+c(_e=ae.type).call(_e,1)+"Op"](ae)});V.processCallback(y),V.sendCmd("processImage",{url:y.url,imageOps:Ce},y.callback)},v.genStripmetaOp=function(y){return new g({type:y.type,stripmeta:y.strip?1:0})},v.genQualityOp=function(y){m.verifyOptions(y,"quality",!0,"","nos::genQualityOp"),m.verifyParamType("quality",y.quality,"number","nos::genQualityOp"),m.verifyParamMin("quality",y.quality,0,"nos::genQualityOp"),m.verifyParamMax("quality",y.quality,100,"nos::genQualityOp");var O=Math.round(y.quality);return new g({type:y.type,qualityQuality:O})},v.genInterlaceOp=function(y){return new g({type:y.type})},v.genRotateOp=function(y){for(m.verifyOptions(y,"angle",!0,"","nos::genRotateOp"),m.verifyParamType("angle",y.angle,"number","nos::genRotateOp");y.angle<0;)y.angle=y.angle+360;y.angle=y.angle%360;var O=Math.round(y.angle);return new g({type:y.type,rotateAngle:O})},v.genBlurOp=function(y){m.verifyOptions(y,"radius sigma","nos::genBlurOp"),m.verifyParamType("radius",y.radius,"number","nos::genBlurOp"),m.verifyParamMin("radius",y.radius,1,"nos::genBlurOp"),m.verifyParamMax("radius",y.radius,50,"nos::genBlurOp"),m.verifyParamType("sigma",y.sigma,"number","nos::genBlurOp"),m.verifyParamMin("sigma",y.sigma,0,"nos::genBlurOp");var O=Math.round(y.radius),V=Math.round(y.sigma);return new g({type:y.type,blurRadius:O,blurSigma:V})},v.genCropOp=function(y){m.verifyOptions(y,"x y width height","nos::genCropOp"),m.verifyParamType("x",y.x,"number","nos::genCropOp"),m.verifyParamMin("x",y.x,0,"nos::genCropOp"),m.verifyParamType("y",y.y,"number","nos::genCropOp"),m.verifyParamMin("y",y.y,0,"nos::genCropOp"),m.verifyParamType("width",y.width,"number","nos::genCropOp"),m.verifyParamMin("width",y.width,0,"nos::genCropOp"),m.verifyParamType("height",y.height,"number","nos::genCropOp"),m.verifyParamMin("height",y.height,0,"nos::genCropOp");var O=Math.round(y.x),V=Math.round(y.y),Ce=Math.round(y.width),ae=Math.round(y.height);return new g({type:y.type,cropX:O,cropY:V,cropWidth:Ce,cropHeight:ae})},v.genThumbnailOp=(n={cover:"z",contain:"x",crop:"y"},function(y){m.verifyOptions(y,"mode","nos::genThumbnailOp"),m.verifyParamValid("mode",y.mode,d(n),"nos::genThumbnailOp"),y.mode==="contain"?m.verifyParamAtLeastPresentOne(y,"width height","nos::genThumbnailOp"):m.verifyOptions(y,"width height","nos::genThumbnailOp"),m.undef(y.width)&&(y.width=0),m.undef(y.height)&&(y.height=0),m.verifyParamType("width",y.width,"number","nos::genThumbnailOp"),m.verifyParamMin("width",y.width,0,"nos::genThumbnailOp"),m.verifyParamType("height",y.height,"number","nos::genThumbnailOp"),m.verifyParamMin("height",y.height,0,"nos::genThumbnailOp");var O=Math.round(y.width),V=Math.round(y.height),Ce=new g({type:y.type,thumbnailMode:n[y.mode],thumbnailWidth:O,thumbnailHeight:V});if(y.mode==="crop"&&m.notundef(y.axis)){m.undef(y.axis.x)&&(y.axis.x=5),m.undef(y.axis.y)&&(y.axis.y=5),m.verifyParamMin("axis.x",y.axis.x,0,"nos::genThumbnailOp"),m.verifyParamMax("axis.x",y.axis.x,10,"nos::genThumbnailOp"),m.verifyParamMin("axis.y",y.axis.y,0,"nos::genThumbnailOp"),m.verifyParamMax("axis.y",y.axis.y,10,"nos::genThumbnailOp");var ae=Math.round(y.axis.x),Fe=Math.round(y.axis.y);Ce.thumbnailAxisX=ae,Ce.thumbnailAxisY=Fe}return m.notundef(y.enlarge)&&(m.verifyParamType("enlarge",y.enlarge,"boolean","nos::genThumbnailOp"),y.enlarge&&(Ce.thumbnailEnlarge=1)),Ce.thumbnailToStatic=this.options.thumbnailToStatic?1:0,Ce}),v.getNosOriginUrl=function(y){var O;(y=y||{}).done=_({instance:this,className:"ApiBaseFn",funcName:"getNosOriginUrl",done:y.done}),m.verifyOptions(y,"safeShortUrl",!0,"","nos::getNosOriginUrl"),m.verifyParamType("safeShortUrl",y.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(y.safeShortUrl)&&~i(O=y.safeShortUrl).call(O,"im_url=1")?(this.processCallback(y),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:y.safeShortUrl}},y.callback)):y.done(new T("参数 “safeShortUrl” 内容非文件安全短链",{callFunc:"nos: getNosOriginUrl"}),y)}},function(t,r,e){var n,o=e(7),i=e(6),a=e(5),s=e(26),u=e(106),c=u.genUrlSep,d=u.url2object,m=u.object2url,v=e(0),g=e(73).fn,b=e(24).reportAPI;g.viewImageSync=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageSync",hasCallback:!1});var _=this.options;v.verifyOptions(T,"url","nos::viewImageSync");var y=T.url,O=d(y),V=O.protocol,Ce=O.hostname,ae=O.path,Fe=O.query;if(typeof T.strip=="boolean"&&(Fe.stripmeta=T.strip?1:0),typeof T.quality=="number"&&(v.verifyParamMin("quality",T.quality,0,"nos::viewImageSync"),v.verifyParamMax("quality",T.quality,100,"nos::viewImageSync"),Fe.quality=Math.round(T.quality)),typeof T.interlace=="boolean"&&(Fe.interlace=T.interlace?1:0),typeof T.rotate=="number"&&(Fe.rotate=Math.round(T.rotate)),s(T.thumbnail)==="object"){var _e=T.thumbnail.mode||"crop",de=T.thumbnail.width,oe=T.thumbnail.height;if(de>=0&&oe>=0&&de<4096&&oe<4096&&(de>0||oe>0)){var he,Ve;switch(_e){case"crop":_e="y";break;case"contain":_e="x";break;case"cover":_e="z";break;default:_e="x"}Fe.thumbnail=o(he=o(Ve="".concat(de)).call(Ve,_e)).call(he,oe)}}if(_.downloadUrl){var le=d(T.url),ie=_.downloadUrl,Ie=le.path,pe=i(Ie).call(Ie,"/");if(pe!==-1){var kt=Ie.substring(0,pe),Ue=Ie.substring(pe+1);ie=ie.replace("{bucket}",kt).replace("{object}",Ue)}var Dt=d(ie);return m({protocol:Dt.protocol,hostname:Dt.hostname,path:Dt.path,query:v.merge(Dt.query,Fe)})}return m({protocol:V,hostname:Ce,path:ae,query:Fe})},g.viewImageStripMeta=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageStripMeta",hasCallback:!1}),v.verifyOptions(T,"url strip","nos::viewImageStripMeta"),v.verifyParamType("strip",T.strip,"boolean","nos::viewImageStripMeta");var _="stripmeta="+(T.strip?1:0),y=c(T.url);return T.url+y+_},g.viewImageQuality=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageQuality",hasCallback:!1}),v.verifyOptions(T,"url quality","nos::viewImageQuality"),v.verifyParamType("quality",T.quality,"number","nos::viewImageQuality"),v.verifyParamMin("quality",T.quality,0,"nos::viewImageQuality"),v.verifyParamMax("quality",T.quality,100,"nos::viewImageQuality");var _="quality="+Math.round(T.quality),y=c(T.url);return T.url+y+_},g.viewImageInterlace=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageInterlace",hasCallback:!1}),v.verifyOptions(T,"url","nos::viewImageInterlace");var _=c(T.url);return T.url+_+"interlace=1"},g.viewImageRotate=function(T){for(b({instance:this,className:"ApiBaseFn",funcName:"viewImageRotate",hasCallback:!1}),v.verifyOptions(T,"url angle","nos::viewImageRotate"),v.verifyParamType("angle",T.angle,"number","nos::viewImageRotate");T.angle<0;)T.angle=T.angle+360;T.angle=T.angle%360;var _="rotate="+Math.round(T.angle),y=c(T.url);return T.url+y+_},g.viewImageBlur=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageBlur",hasCallback:!1}),v.verifyOptions(T,"url radius sigma","nos::viewImageBlur"),v.verifyParamType("radius",T.radius,"number","nos::viewImageBlur"),v.verifyParamMin("radius",T.radius,1,"nos::viewImageBlur"),v.verifyParamMax("radius",T.radius,50,"nos::viewImageBlur"),v.verifyParamType("sigma",T.sigma,"number","nos::viewImageBlur"),v.verifyParamMin("sigma",T.sigma,0,"nos::viewImageBlur");var _="blur="+Math.round(T.radius)+"x"+Math.round(T.sigma),y=c(T.url);return T.url+y+_},g.viewImageCrop=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageCrop",hasCallback:!1}),v.verifyOptions(T,"url x y width height","nos::viewImageCrop"),v.verifyParamType("x",T.x,"number","nos::viewImageCrop"),v.verifyParamMin("x",T.x,0,"nos::viewImageCrop"),v.verifyParamType("y",T.y,"number","nos::viewImageCrop"),v.verifyParamMin("y",T.y,0,"nos::viewImageCrop"),v.verifyParamType("width",T.width,"number","nos::viewImageCrop"),v.verifyParamMin("width",T.width,0,"nos::viewImageCrop"),v.verifyParamType("height",T.height,"number","nos::viewImageCrop"),v.verifyParamMin("height",T.height,0,"nos::viewImageCrop");var _="crop="+Math.round(T.x)+"_"+Math.round(T.y)+"_"+Math.round(T.width)+"_"+Math.round(T.height),y=c(T.url);return T.url+y+_},g.viewImageThumbnail=(n={cover:"z",contain:"x",crop:"y"},function(T){v.verifyOptions(T,"url mode","nos::viewImageThumbnail"),v.verifyParamValid("mode",T.mode,a(n),"nos::viewImageThumbnail"),T.mode==="contain"?v.verifyParamAtLeastPresentOne(T,"width height","nos::viewImageThumbnail"):v.verifyOptions(T,"width height","nos::viewImageThumbnail"),v.undef(T.width)&&(T.width=0),v.undef(T.height)&&(T.height=0),v.verifyParamType("width",T.width,"number","nos::viewImageThumbnail"),v.verifyParamMin("width",T.width,0,"nos::viewImageThumbnail"),v.verifyParamType("height",T.height,"number","nos::viewImageThumbnail"),v.verifyParamMin("height",T.height,0,"nos::viewImageThumbnail");var _=Math.round(T.width),y=Math.round(T.height),O="thumbnail="+_+n[T.mode]+y;T.mode==="crop"&&v.notundef(T.axis)&&(v.undef(T.axis.x)&&(T.axis.x=5),v.undef(T.axis.y)&&(T.axis.y=5),v.verifyParamMin("axis.x",T.axis.x,0,"nos::viewImageThumbnail"),v.verifyParamMax("axis.x",T.axis.x,10,"nos::viewImageThumbnail"),v.verifyParamMin("axis.y",T.axis.y,0,"nos::viewImageThumbnail"),v.verifyParamMax("axis.y",T.axis.y,10,"nos::viewImageThumbnail"),O=O+"&axis="+Math.round(T.axis.x)+"_"+Math.round(T.axis.y)),v.notundef(T.enlarge)&&(v.verifyParamType("enlarge",T.enlarge,"boolean","nos::viewImageThumbnail"),T.enlarge&&(O+="&enlarge=1"));var V=c(T.url);return T.url+V+O})},function(t,r,e){var n=e(630);t.exports=n},function(t,r,e){var n=e(21),o=e(631),i=e(633),a=Array.prototype,s=String.prototype;t.exports=function(u){var c=u.includes;return u===a||n(a,u)&&c===a.includes?o:typeof u=="string"||u===s||n(s,u)&&c===s.includes?i:c}},function(t,r,e){e(632);var n=e(30);t.exports=n("Array").includes},function(t,r,e){var n=e(1),o=e(160).includes,i=e(4),a=e(196);n({target:"Array",proto:!0,forced:i(function(){return!Array(1).includes()})},{includes:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(t,r,e){e(634);var n=e(30);t.exports=n("String").includes},function(t,r,e){var n=e(1),o=e(11),i=e(635),a=e(108),s=e(49),u=e(637),c=o("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(d){return!!~c(s(a(this)),s(i(d)),arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(636),o=TypeError;t.exports=function(i){if(n(i))throw o("The method doesn't accept regular expressions");return i}},function(t,r,e){var n=e(28),o=e(63),i=e(20)("match");t.exports=function(a){var s;return n(a)&&((s=a[i])!==void 0?!!s:o(a)=="RegExp")}},function(t,r,e){var n=e(20)("match");t.exports=function(o){var i=/./;try{"/./"[o](i)}catch{try{return i[n]=!1,"/./"[o](i)}catch{}}return!1}},function(t,r,e){var n=e(26),o=e(10),i=e(6),a=e(305),s=e(0),u=e(73).fn,c=e(13),d=e(24).reportAPI;function m(g,b,T,_){var y=!1,O="";if(T===1?i(g).call(g,b)>=0&&(y=!0,O=b):T===2&&(O=new RegExp(b,"g")).test(g)&&(y=!0),y&&O!=="")switch(_){case 1:return g.replace(O,"**");case 2:return{code:2};case 3:return{code:3}}return g}function v(g,b){for(var T=b.match,_=b.operate,y=g,O=0;O<a(b).length;O++){var V=a(b)[O],Ce=V.match||T,ae=V.operate||_;try{if(y=m(y,V.key,Ce,ae),n(y)==="object")return y}catch(Fe){this.logger.warn("misc::filterContent: js cannot parse this regexp ",Fe)}}return y}u.uploadSdkLogUrl=function(g){return s.verifyOptions(g,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",g)},u.getClientAntispamLexicon=function(g){var b=this;(g=g||{}).done=d({instance:this,className:"ApiBaseFn",funcName:"getClientAntispamLexicon",done:g.done});var T=(g=g||{}).done;T instanceof Function||(T=function(){}),g={clientAntispam:{version:0}};var _=this;if(c.hasLocalStorage&&localStorage.getItem("antispamLexicon")&&localStorage.getItem("antispamLexicon")!=="{}")try{_.antispamLexicon=JSON.parse(localStorage.getItem("antispamLexicon"))}catch(y){this.logger.error("JSON parse antispamLexicon error",y)}_.antispamLexicon&&T.call(this,null,{clientAntispam:_.antispamLexicon}),this.protocol.sendCmd("getClientAntispam",g,function(y,O,V){y?(_.protocol.logger.error("misc::getClientAntispamLexicon:",y),T.call(b,y,{})):(c.hasLocalStorage&&localStorage.setItem("antispamLexicon",o(V.clientAntispam)),_.antispamLexicon||T.call(b,null,V),_.antispamLexicon=V.clientAntispam||{})})},u.filterClientAntispam=function(g){d({instance:this,className:"ApiBaseFn",funcName:"filterClientAntispam",hasCallback:!1});var b=g.content;if(!b)return{code:404,errmsg:"待反垃圾文本content不存在"};var T=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!T)return{code:404,errmsg:"没有反垃圾词库或者词库格式不合法"};try{T=JSON.parse(T).thesaurus}catch{return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:"反垃圾词库格式不合法"}}for(var _=b,y=0;y<T.length;y++)if(_=v.call(this,_,T[y]),n(_)==="object"){if(_.code===2)return{code:200,type:2,errmsg:"建议拒绝发送",content:b,result:""};if(_.code===3)return{code:200,type:3,errmsg:"建议服务器处理反垃圾，发消息带上字段clientAntiSpam",content:b,result:b}}return _===b?{code:200,type:0,errmsg:"",content:b,result:_}:{code:200,type:1,errmsg:"已对特殊字符做了过滤",content:b,result:_}},u.getServerTime=function(g){(g=g||{}).done=d({instance:this,className:"ApiBaseFn",funcName:"getServerTime",done:g.done}),this.processCallback(g),this.sendCmd("getServerTime",{},g.callback)},u.getNosAccessToken=function(g){(g=g||{}).done=d({instance:this,className:"ApiBaseFn",funcName:"getNosAccessToken",done:g.done}),s.verifyOptions(g,"url","misc::getNosAccessToken"),this.processCallback(g);var b={url:g.url};g.userAgent&&(b.userAgent=g.userAgent),g.ext&&(b.ext=g.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:b},function(T,_,y){var O=y&&y.nosAccessTokenTag&&y.nosAccessTokenTag.token,V=g.url,Ce=O?{token:O,resUrl:i(V).call(V,"?")!==-1?V+"&token="+O:V+"?token="+O}:{};g.done(T,Ce)})},u.deleteNosAccessToken=function(g){(g=g||{}).done=d({instance:this,className:"ApiBaseFn",funcName:"deleteNosAccessToken",done:g.done}),s.verifyOptions(g,"token","misc::deleteNosAccessToken"),this.processCallback(g),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:g.token}},g.callback)}},function(t,r,e){e(67);var n=e(65),o=e(29),i=e(21),a=e(640),s=Array.prototype,u={DOMTokenList:!0,NodeList:!0};t.exports=function(c){var d=c.keys;return c===s||i(s,c)&&d===s.keys||o(u,n(c))?a:d}},function(t,r,e){var n=e(641);t.exports=n},function(t,r,e){e(82),e(96);var n=e(30);t.exports=n("Array").keys},function(t,r,e){var n=e(26),o=e(3),i=e(8),a=e(10),s=e(73).fn,u=e(0),c=e(191),d=e(286),m=e(24).reportAPI;s.signalingCreate=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.type,b=v.channelName,T=v.ext;return u.verifyOptions(v,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:g,channelName:b,ext:T}}).then(function(_){var y=_.avSignalTag;return o.resolve(y)}).catch(function(_){return o.reject(d.parseAvSignalError(_))})},s.signalingDelay=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return u.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:v}).then(function(g){var b=g.avSignalTag;return o.resolve(b)}).catch(function(g){return o.reject(d.parseAvSignalError(g))})},s.signalingClose=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return u.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:u.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T=b.avSignalTag;return T.offlineEnabled=T.isSave===1,delete T.isSave,o.resolve(T)}).catch(function(b){return o.reject(d.parseAvSignalError(b))})},s.signalingJoin=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return u.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:u.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T,_=b.avSignalTag,y=_.members;return typeof _.members=="string"&&(y=i(T=JSON.parse(_.members)).call(T,function(O){return d.parseAvSignalMember(O)})),_.members=y,o.resolve(_)}).catch(function(b){return o.reject(d.parseAvSignalError(b))})},s.signalingLeave=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return u.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:u.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T=b.avSignalTag;return T.offlineEnabled=T.isSave===1,delete T.isSave,o.resolve(T)}).catch(function(b){return o.reject(d.parseAvSignalError(b))})},s.signalingGetChannelInfo=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.channelName;return u.verifyOptions(v,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:g}}).then(function(b){var T,_=b.avSignalTag,y=_.members;return typeof _.members=="string"&&(y=i(T=JSON.parse(_.members)).call(T,function(O){return d.parseAvSignalMember(O)})),_.members=y,o.resolve(_)}).catch(function(b){return o.reject(d.parseAvSignalError(b))})},s.signalingInvite=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.account,b=v.offlineEnabled,T=v.pushInfo,_=T===void 0?{}:T;u.verifyOptions(v,"channelId requestId account","api::signalling"),n(_.pushPayload)==="object"&&(_.pushPayload=a(_.pushPayload));var y=u.merge(v,_,{to:g,isSave:b===!0?1:0,needPush:_.needPush===!0?1:0,needBadge:_.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:y}).then(function(O){var V=O.avSignalTag;return V.offlineEnabled=V.isSave===1,V.needBadge=V.needBadge===1,V.needPush=V.needPush===1,delete V.isSave,o.resolve(V)}).catch(function(O){return o.reject(d.parseAvSignalError(O))})},s.signalingCancel=function(v){var g=v.account,b=v.offlineEnabled;return u.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:u.merge(v,{to:g,isSave:b===!0?1:0})}).then(function(T){var _=T.avSignalTag;return _.offlineEnabled=_.isSave===1,delete _.isSave,o.resolve(_)}).catch(function(T){return o.reject(d.parseAvSignalError(T))})},s.signalingCreateAndJoin=function(v){var g=this,b=m({instance:this,className:"ApiBaseFn",funcName:"signalingCreateAndJoin",hasCallback:!0}),T=v.channelName,_=v.uid,y=_===void 0?0:_,O=v.offlineEnabled,V=O===void 0||O,Ce=v.attachExt,ae=Ce===void 0?"":Ce;return this.signalingCreate(v).catch(function(Fe){return Fe.code===10405?(g.logger.warn("api::avSignal:signalingCall room already exists:",Fe),g.signalingGetChannelInfo({channelName:T})):o.reject(Fe)}).then(function(Fe){var _e={channelId:Fe.channelId,offlineEnabled:V,attachExt:ae,nertcChannelName:v.nertcChannelName,nertcTokenTtl:v.nertcTokenTtl,nertcJoinRoomQueryParamMap:v.nertcJoinRoomQueryParamMap};return y&&u.merge(_e,{uid:y}),g.signalingJoin(_e)}).then(function(Fe){return typeof b=="function"&&b(void 0),Fe}).catch(function(Fe){throw typeof b=="function"&&b(Fe),Fe})},s.signalingCall=function(v){var g=this,b=m({instance:this,className:"ApiBaseFn",funcName:"signalingCall",hasCallback:!0}),T=v.account,_=v.offlineEnabled,y=v.requestId;u.verifyOptions(v,"type requestId account","api::signalling");var O="";return this.signalingCreateAndJoin(v).then(function(V){O=V.channelId||O,g.logger.info("api::avSignal:signalingCall join:",O);var Ce={channelId:O,account:T,requestId:y,offlineEnabled:_,attachExt:v.attachExt||"",pushInfo:v.pushInfo||{},nertcTokenTtl:V.nertcTokenTtl,nertcToken:V.nertcToken};return g.signalingInvite(Ce)}).then(function(V){return typeof b=="function"&&b(void 0),V}).catch(function(V){throw typeof b=="function"&&b(V),V})},s.signalingReject=function(v){var g=v.account,b=v.offlineEnabled;return u.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:u.merge(v,{to:g,isSave:b===!0?1:0})}).then(function(T){var _=T.avSignalTag;return _.offlineEnabled=_.isSave===1,delete _.isSave,o.resolve(_)}).catch(function(T){return o.reject(d.parseAvSignalError(T))})},s.signalingAccept=function(v){var g=this,b=v.account,T=v.offlineEnabled;return u.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:u.merge(v,{to:b,isSave:T===!0?1:0})}).then(function(_){var y=_.avSignalTag;return y.offlineEnabled=y.isSave===1,delete y.isSave,o.resolve(y)}).catch(function(_){return o.reject(d.parseAvSignalError(_))}).then(function(_){if(v.autoJoin){var y={channelId:v.channelId,offlineEnabled:v.offlineEnabled,attachExt:v.joinAttachExt,uid:v.uid,nertcChannelName:v.nertcChannelName,nertcTokenTtl:v.nertcTokenTtl,nertcJoinRoomQueryParamMap:v.nertcJoinRoomQueryParamMap};return g.signalingJoin(y)}return _})},s.signalingControl=function(v){var g=v.account;return u.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:u.merge(v,g?{to:g}:{})}).then(function(b){var T=b.avSignalTag;return o.resolve(T)}).catch(function(b){return o.reject(d.parseAvSignalError(b))})},s.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then(function(v){var g=v.avSignalTag;return o.resolve(g)}).catch(function(v){return o.reject(d.parseAvSignalError(v))})},s.signalingMarkMsgRead=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m({instance:this,className:"ApiBaseFn",funcName:"signalingMarkMsgRead",hasCallback:!1}),u.verifyOptions(v,"msgid","api::signalling");var g,b=c.idMap.avSignal;return g=typeof v.msgid=="string"?[v.msgid]:v.msgid,this.sendCmd("batchMarkRead",{sid:b.id,cid:b.signalingNotify,ids:g})},s.signalingCallEx=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.account,b=v.offlineEnabled,T=v.pushInfo,_=T===void 0?{}:T;n(_.pushPayload)==="object"&&(_.pushPayload=a(_.pushPayload)),u.verifyOptions(v,"type","api::signalling"),u.verifyOptions(v,"account","api::signalling");var y=u.merge(v,_,{to:g,isSave:b===!0?1:0,needPush:_.needPush===!0?1:0,needBadge:_.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingCallEx",{avSignalTag:y}).then(function(O){var V,Ce=O.avSignalTag,ae=Ce.members;return typeof Ce.members=="string"&&(ae=i(V=JSON.parse(Ce.members)).call(V,function(Fe){return d.parseAvSignalMember(Fe)})),Ce.members=ae,o.resolve(Ce)}).catch(function(O){return o.reject(d.parseAvSignalError(O))})},s.signalingJoinAndAccept=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.channelId,b=v.attachExt,T=v.offlineEnabled,_=v.uid,y=v.account,O=v.requestId,V=v.nertcChannelName,Ce=v.nertcTokenTtl,ae=v.nertcJoinRoomQueryParamMap;return u.verifyOptions(v,"channelId","api::signalling"),u.verifyOptions(v,"account","api::signalling"),u.verifyOptions(v,"requestId","api::signalling"),this.sendCmdUsePromise("signalingJoinAndAccept",{avSignalTag:{channelId:g,attachExt:b,isSave:T===!0?1:0,uid:_,to:y,requestId:O,nertcChannelName:V,nertcTokenTtl:Ce,nertcJoinRoomQueryParamMap:ae}}).then(function(Fe){var _e,de=Fe.avSignalTag,oe=de.members;return typeof de.members=="string"&&(oe=i(_e=JSON.parse(de.members)).call(_e,function(he){return d.parseAvSignalMember(he)})),de.members=oe,o.resolve(de)}).catch(function(Fe){return o.reject(d.parseAvSignalError(Fe))})}},function(t,r,e){var n=e(2),o=e(121),i=e(122),a=e(54).getPromiseWithAbort,s=function(){function u(){o(this,u),this.abortFns=[]}return i(u,[{key:"add",value:function(c){var d=a(c);return this.abortFns.push(d.abort),d.promise}},{key:"clear",value:function(){var c;n(c=this.abortFns).call(c,function(d){return d("Request aborted")}),this.abortFns=[]}},{key:"destroy",value:function(){this.clear()}}]),u}();t.exports=s},function(t,r,e){var n=e(102),o=e(103),i=e(2),a=e(69),s=e(3),u=e(8),c=e(57),d=e(15),m=e(7),v=e(10),g=e(25),b=e(121),T=e(122),_=e(0),y=e(13),O=e(74),V=e(288),Ce=e(40);t.exports=function(){function ae(_e){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{socketConcurrent:1};b(this,ae),this.clientProto=_e,this.logger=_e.logger,this.urls=[],this.sockets=[],this.config=de}var Fe;return T(ae,[{key:"setConfig",value:function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{socketConcurrent:1};this.config=_e}},{key:"setUrls",value:function(_e){this.urls=_e}},{key:"resetSockets",value:function(){var _e;i(_e=this.sockets).call(_e,function(de){de&&(de.removeAllListenersX("info"),de.disconnect())}),this.sockets=[]}},{key:"connect",value:(Fe=o(n.mark(function _e(){var de,oe,he,Ve=this;return n.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(this.clientProto.statusProtector.emit("auth/loginLifeCycleConnect"),(oe=a(de=this.urls).call(de,0,this.config.socketConcurrent)).length!==0){le.next=4;break}throw new Ce("no_socket_url",408,{});case 4:return le.prev=4,le.next=7,s.any(u(oe).call(oe,function(ie,Ie){return Ve.doConnect(ie,Ie)}));case 7:return le.abrupt("return",le.sent);case 10:throw le.prev=10,le.t0=le.catch(4),i(he=le.t0.errors).call(he,function(ie,Ie){Ve.logger.warn("imsocket::connect failed ".concat(Ie),ie)}),le.t0;case 14:case"end":return le.stop()}},_e,this,[[4,10]])})),function(){return Fe.apply(this,arguments)})},{key:"success",value:function(_e){var de;return i(de=this.sockets).call(de,function(oe,he){_e!==he&&oe&&(oe.removeAllListenersX("info"),oe.disconnect())}),this.sockets[_e]}},{key:"failed",value:function(_e){var de=this.sockets[_e];de&&(de.removeAllListenersX("info"),de.disconnect())}},{key:"getTransport",value:function(_e){var de=_.getGlobal();if(typeof window>"u"){var oe=_e.split(":");return de&&!de.location&&oe.length>1&&(de.location={protocol:oe.shift(),port:oe.pop(),hostname:oe.join("")}),["websocket"]}return this.clientProto.options.transports?this.clientProto.options.transports:O.name!=="IE"||de.WebSocket?["websocket"]:["xhr-polling"]}},{key:"doConnect",value:function(_e,de){var oe=this;if(this.clientProto&&this.clientProto.__destroyed===!0)return s.reject("instance has been destroyed");var he=this.getTransport(_e),Ve=c();return new s(function(le,ie){var Ie,pe,kt,Ue;try{Ue=V.connect(_e,{transports:d(he).call(he),reconnect:!1,"force new connection":!0,"connect timeout":y.connectTimeout,needToXHR:typeof oe.clientProto.options.needToXHR=="boolean"?oe.clientProto.options.needToXHR:y.needToXHR}),oe.sockets[de]=Ue}catch(tr){var Dt;return oe.logger.warn(m(Dt="link::connectToUrl ".concat(de,":io.connect caught exception: ")).call(Dt,tr&&tr.message),tr),void ie(new Ce("socket_error",408,{startTime:Ve,url:_e,reason:tr.message,rawError:tr}))}oe.logger.info(m(Ie=m(pe="link::connectToUrl ".concat(de,": socket url: ")).call(pe,_e,", transports: ")).call(Ie,v(he))),Ue.on("connect",function(){oe.logger.info("link::connectToUrl ".concat(de," success")),oe.success(de),oe.clientProto.url=_e,le(Ue)}),Ue.on("handshake_failed",function(){oe.failed(de),ie(new Ce("handshake_failed",408,{startTime:Ve,url:_e}))}),Ue.on("connect_failed",function(tr){oe.failed(de),ie(new Ce("connect_failed",408,{startTime:Ve,url:_e,reason:tr}))}),Ue.on("error",function(){var tr,dr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",pr=arguments.length>1?arguments[1]:void 0,ar=pr&&pr.message||dr;oe.logger.warn(m(tr="link::onSocketError ".concat(de,": reason is ")).call(tr,ar,", error is "),pr),ie(new Ce("socket_error",408,{startTime:Ve,url:_e,reason:ar,rawError:pr}))}),Ue.on("info",function(tr,dr){var pr,ar;dr?oe.logger.info(m(pr="link::onSocketInfo ".concat(de,": ")).call(pr,tr,", extraInfo:"),dr):oe.logger.info(m(ar="link::onSocketInfo ".concat(de,": ")).call(ar,tr,"."))}),Ue.on("message",g(kt=oe.clientProto.onMessage).call(kt,oe.clientProto)),Ue.on("disconnect",function(tr){oe.logger.warn("link::onSocketDisconnect: socket url: ".concat(_e,", disconnected"),tr),oe.clientProto.hasLogin=!1,oe.clientProto.doLogout?oe.clientProto.logout():oe.clientProto.onDisconnect("link::socketDisconnect"),oe.clientProto.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to internal reasons"))})})}},{key:"destroy",value:function(){this.urls=[],this.resetSockets()}}]),ae}()},function(t,r,e){var n=e(26).default,o=e(137),i=e(153),a=e(187),s=e(282),u=e(646),c=e(189),d=e(287),m=e(657),v=e(308);function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=g=function(){return b},t.exports.__esModule=!0,t.exports.default=t.exports;var b={},T=Object.prototype,_=T.hasOwnProperty,y=o||function(nr,sr,$e){nr[sr]=$e.value},O=typeof i=="function"?i:{},V=O.iterator||"@@iterator",Ce=O.asyncIterator||"@@asyncIterator",ae=O.toStringTag||"@@toStringTag";function Fe(nr,sr,$e){return o(nr,sr,{value:$e,enumerable:!0,configurable:!0,writable:!0}),nr[sr]}try{Fe({},"")}catch{Fe=function(sr,$e,er){return sr[$e]=er}}function _e(nr,sr,$e,er){var or=sr&&sr.prototype instanceof he?sr:he,ze=a(or.prototype),rr=new ar(er||[]);return y(ze,"_invoke",{value:Dt(nr,$e,rr)}),ze}function de(nr,sr,$e){try{return{type:"normal",arg:nr.call(sr,$e)}}catch(er){return{type:"throw",arg:er}}}b.wrap=_e;var oe={};function he(){}function Ve(){}function le(){}var ie={};Fe(ie,V,function(){return this});var Ie=s&&s(s(hr([])));Ie&&Ie!==T&&_.call(Ie,V)&&(ie=Ie);var pe=le.prototype=he.prototype=a(ie);function kt(nr){var sr;u(sr=["next","throw","return"]).call(sr,function($e){Fe(nr,$e,function(er){return this._invoke($e,er)})})}function Ue(nr,sr){var $e;y(this,"_invoke",{value:function(er,or){function ze(){return new sr(function(rr,Et){(function Lt(cr,mr,vr,Tr){var Ir=de(nr[cr],nr,mr);if(Ir.type!=="throw"){var kr=Ir.arg,Ar=kr.value;return Ar&&n(Ar)=="object"&&_.call(Ar,"__await")?sr.resolve(Ar.__await).then(function(Nr){Lt("next",Nr,vr,Tr)},function(Nr){Lt("throw",Nr,vr,Tr)}):sr.resolve(Ar).then(function(Nr){kr.value=Nr,vr(kr)},function(Nr){return Lt("throw",Nr,vr,Tr)})}Tr(Ir.arg)})(er,or,rr,Et)})}return $e=$e?$e.then(ze,ze):ze()}})}function Dt(nr,sr,$e){var er="suspendedStart";return function(or,ze){if(er==="executing")throw new Error("Generator is already running");if(er==="completed"){if(or==="throw")throw ze;return Ne()}for($e.method=or,$e.arg=ze;;){var rr=$e.delegate;if(rr){var Et=tr(rr,$e);if(Et){if(Et===oe)continue;return Et}}if($e.method==="next")$e.sent=$e._sent=$e.arg;else if($e.method==="throw"){if(er==="suspendedStart")throw er="completed",$e.arg;$e.dispatchException($e.arg)}else $e.method==="return"&&$e.abrupt("return",$e.arg);er="executing";var Lt=de(nr,sr,$e);if(Lt.type==="normal"){if(er=$e.done?"completed":"suspendedYield",Lt.arg===oe)continue;return{value:Lt.arg,done:$e.done}}Lt.type==="throw"&&(er="completed",$e.method="throw",$e.arg=Lt.arg)}}}function tr(nr,sr){var $e=sr.method,er=nr.iterator[$e];if(er===void 0)return sr.delegate=null,$e==="throw"&&nr.iterator.return&&(sr.method="return",sr.arg=void 0,tr(nr,sr),sr.method==="throw")||$e!=="return"&&(sr.method="throw",sr.arg=new TypeError("The iterator does not provide a '"+$e+"' method")),oe;var or=de(er,nr.iterator,sr.arg);if(or.type==="throw")return sr.method="throw",sr.arg=or.arg,sr.delegate=null,oe;var ze=or.arg;return ze?ze.done?(sr[nr.resultName]=ze.value,sr.next=nr.nextLoc,sr.method!=="return"&&(sr.method="next",sr.arg=void 0),sr.delegate=null,oe):ze:(sr.method="throw",sr.arg=new TypeError("iterator result is not an object"),sr.delegate=null,oe)}function dr(nr){var sr={tryLoc:nr[0]};1 in nr&&(sr.catchLoc=nr[1]),2 in nr&&(sr.finallyLoc=nr[2],sr.afterLoc=nr[3]),this.tryEntries.push(sr)}function pr(nr){var sr=nr.completion||{};sr.type="normal",delete sr.arg,nr.completion=sr}function ar(nr){this.tryEntries=[{tryLoc:"root"}],u(nr).call(nr,dr,this),this.reset(!0)}function hr(nr){if(nr){var sr=nr[V];if(sr)return sr.call(nr);if(typeof nr.next=="function")return nr;if(!isNaN(nr.length)){var $e=-1,er=function or(){for(;++$e<nr.length;)if(_.call(nr,$e))return or.value=nr[$e],or.done=!1,or;return or.value=void 0,or.done=!0,or};return er.next=er}}return{next:Ne}}function Ne(){return{value:void 0,done:!0}}return Ve.prototype=le,y(pe,"constructor",{value:le,configurable:!0}),y(le,"constructor",{value:Ve,configurable:!0}),Ve.displayName=Fe(le,ae,"GeneratorFunction"),b.isGeneratorFunction=function(nr){var sr=typeof nr=="function"&&nr.constructor;return!!sr&&(sr===Ve||(sr.displayName||sr.name)==="GeneratorFunction")},b.mark=function(nr){return c?c(nr,le):(nr.__proto__=le,Fe(nr,ae,"GeneratorFunction")),nr.prototype=a(pe),nr},b.awrap=function(nr){return{__await:nr}},kt(Ue.prototype),Fe(Ue.prototype,Ce,function(){return this}),b.AsyncIterator=Ue,b.async=function(nr,sr,$e,er,or){or===void 0&&(or=d);var ze=new Ue(_e(nr,sr,$e,er),or);return b.isGeneratorFunction(sr)?ze:ze.next().then(function(rr){return rr.done?rr.value:ze.next()})},kt(pe),Fe(pe,ae,"Generator"),Fe(pe,V,function(){return this}),Fe(pe,"toString",function(){return"[object Generator]"}),b.keys=function(nr){var sr=Object(nr),$e=[];for(var er in sr)$e.push(er);return m($e).call($e),function or(){for(;$e.length;){var ze=$e.pop();if(ze in sr)return or.value=ze,or.done=!1,or}return or.done=!0,or}},b.values=hr,ar.prototype={constructor:ar,reset:function(nr){var sr;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,u(sr=this.tryEntries).call(sr,pr),!nr)for(var $e in this)$e.charAt(0)==="t"&&_.call(this,$e)&&!isNaN(+v($e).call($e,1))&&(this[$e]=void 0)},stop:function(){this.done=!0;var nr=this.tryEntries[0].completion;if(nr.type==="throw")throw nr.arg;return this.rval},dispatchException:function(nr){if(this.done)throw nr;var sr=this;function $e(Lt,cr){return ze.type="throw",ze.arg=nr,sr.next=Lt,cr&&(sr.method="next",sr.arg=void 0),!!cr}for(var er=this.tryEntries.length-1;er>=0;--er){var or=this.tryEntries[er],ze=or.completion;if(or.tryLoc==="root")return $e("end");if(or.tryLoc<=this.prev){var rr=_.call(or,"catchLoc"),Et=_.call(or,"finallyLoc");if(rr&&Et){if(this.prev<or.catchLoc)return $e(or.catchLoc,!0);if(this.prev<or.finallyLoc)return $e(or.finallyLoc)}else if(rr){if(this.prev<or.catchLoc)return $e(or.catchLoc,!0)}else{if(!Et)throw new Error("try statement without catch or finally");if(this.prev<or.finallyLoc)return $e(or.finallyLoc)}}}},abrupt:function(nr,sr){for(var $e=this.tryEntries.length-1;$e>=0;--$e){var er=this.tryEntries[$e];if(er.tryLoc<=this.prev&&_.call(er,"finallyLoc")&&this.prev<er.finallyLoc){var or=er;break}}or&&(nr==="break"||nr==="continue")&&or.tryLoc<=sr&&sr<=or.finallyLoc&&(or=null);var ze=or?or.completion:{};return ze.type=nr,ze.arg=sr,or?(this.method="next",this.next=or.finallyLoc,oe):this.complete(ze)},complete:function(nr,sr){if(nr.type==="throw")throw nr.arg;return nr.type==="break"||nr.type==="continue"?this.next=nr.arg:nr.type==="return"?(this.rval=this.arg=nr.arg,this.method="return",this.next="end"):nr.type==="normal"&&sr&&(this.next=sr),oe},finish:function(nr){for(var sr=this.tryEntries.length-1;sr>=0;--sr){var $e=this.tryEntries[sr];if($e.finallyLoc===nr)return this.complete($e.completion,$e.afterLoc),pr($e),oe}},catch:function(nr){for(var sr=this.tryEntries.length-1;sr>=0;--sr){var $e=this.tryEntries[sr];if($e.tryLoc===nr){var er=$e.completion;if(er.type==="throw"){var or=er.arg;pr($e)}return or}}throw new Error("illegal catch attempt")},delegateYield:function(nr,sr,$e){return this.delegate={iterator:hr(nr),resultName:sr,nextLoc:$e},this.method==="next"&&(this.arg=void 0),oe}},b}t.exports=g,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(647)},function(t,r,e){t.exports=e(648)},function(t,r,e){var n=e(649);t.exports=n},function(t,r,e){var n=e(229);t.exports=n},function(t,r,e){t.exports=e(651)},function(t,r,e){var n=e(652);e(653),e(654),e(655),e(656),t.exports=n},function(t,r,e){var n=e(231);t.exports=n},function(t,r,e){e(232)},function(t,r,e){e(246)},function(t,r,e){var n=e(1),o=e(68),i=e(100);n({target:"Promise",stat:!0,forced:!0},{try:function(a){var s=o.f(this),u=i(a);return(u.error?s.reject:s.resolve)(u.value),s.promise}})},function(t,r,e){e(247)},function(t,r,e){t.exports=e(658)},function(t,r,e){t.exports=e(659)},function(t,r,e){var n=e(660);t.exports=n},function(t,r,e){var n=e(275);t.exports=n},function(t,r,e){t.exports=e(662)},function(t,r,e){var n=e(663);t.exports=n},function(t,r,e){var n=e(250);t.exports=n},function(t,r,e){var n=e(102),o=e(103),i=e(2),a=e(7),s=e(15),u=e(69),c=e(23),d=e(3),m=e(25),v=e(75).fn,g=e(40),b=e(665),T=e(13),_=e(0),y=e(666);function O(){this.logger.log("offlineListener enter"),this.forceDisconnect(),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to network offline")),this.options.ondisconnect&&this.options.ondisconnect({code:"offlineListener",callFunc:"link::offlineListener",message:"offlineListener disconnect"}),this.onDisconnect("link::offlineListener","broken")}function V(){var Ce=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,function(ae){if(ae){Ce.logger.info("onlineListener heartbeat detect error",ae);try{Ce.forceDisconnect(),Ce.onDisconnect("link::onHeartbeat","broken")}catch(Fe){Ce.logger.info("onlineListener heartbeat websocket.onclose",Fe)}}else Ce.logger.log("onlineListener heartbeat detect success")})):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}v.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},v.resetConnect=function(){var Ce=this.options;_.notundef(Ce.needReconnect)?(_.verifyParamType("needReconnect",Ce.needReconnect,"boolean","link::resetConnect"),this.needReconnect=Ce.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)),_.notundef(Ce.reconnectionAttempts)&&_.verifyParamType("reconnectionAttempts",Ce.reconnectionAttempts,"number","link::resetConnect"),_.notundef(Ce.noCacheLinkUrl)&&_.verifyParamType("noCacheLinkUrl",Ce.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts=typeof Ce.reconnectionAttempts=="number"?Ce.reconnectionAttempts:1/0,this.backoff=new b({min:T.reconnectionDelay,max:T.reconnectionDelayMax,jitter:T.reconnectionJitter})},v.reportTCPException=function(Ce){var ae=this;i(Ce).call(Ce,function(Fe,_e){var de,oe=Fe.event,he=oe===void 0?{}:oe,Ve=Fe.message,le=he.startTime,ie=he.code,Ie=he.reason,pe=he.url,kt="";Ve==="handshake_failed"?kt="handshake_failed":Ve==="connect_failed"?kt=Ie?"connect_failed:".concat(Ie):"connect_failed":Ve==="socket_error"&&(kt=Ie?"socket.io error:".concat(Ie):"socket.io error"),ae.logger.warn(a(de="connect::failed ".concat(_e,", ")).call(de,kt),Fe),ae.reporter.reportTraceStart("exceptions",{user_id:ae.options.account,trace_id:_.get(self,"socket.socket.sessionid"),start_time:le,action:0,exception_service:6}),ae.reporter.reportTraceUpdateV2("exceptions",{code:ie,description:Ve,operation_type:0,target:pe}),ae.reporter.reportTraceEnd("exceptions",1)})},v.connect=o(n.mark(function Ce(){var ae,Fe,_e,de,oe;return n.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(_e=this,clearTimeout(_e.connectTimer),!_e.isConnected()){he.next=5;break}return _e.logger.warn("link::connect: already connected"),he.abrupt("return");case 5:if(!_e.connecting){he.next=8;break}return _e.logger.warn("link::connect: already connecting"),he.abrupt("return");case 8:if(_e.connecting=!0,_e.hasNotifyDisconnected=!1,_e.shouldReconnect=!0,_e.socket&&_e.forceDisconnect(),_e.logger.info("link::connect: connect to new socket, autoconnect is "+_e.autoconnect),typeof _e.options.socketUrl=="string"&&(_e.logger.info("link::connect: try to options.socketUrl ",_e.options.socketUrl),_e.socketUrls=[_e.options.socketUrl]),he.prev=14,_e.socketUrls&&_e.socketUrls.length>0){he.next=20;break}return he.next=18,_e.refreshSocketUrl();case 18:_e.socketUrls=y(_e.socketUrls),_e.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(_e.imsocket.config.socketConcurrent),_e.socketUrls);case 20:he.next=28;break;case 22:return he.prev=22,he.t0=he.catch(14),_e.logger.warn("connect::refreshSocketUrl: catch exception,",he.t0&&he.t0.message),_e.connecting=!1,this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"refresh socket url fail"}),he.abrupt("return");case 28:return _e.imsocket.resetSockets(),_e.imsocket.setUrls(s(ae=_e.socketUrls).call(ae,0)),u(Fe=_e.socketUrls).call(Fe,0,_e.imsocket.config.socketConcurrent),he.prev=31,he.next=34,_e.imsocket.connect();case 34:_e.socket=he.sent,_e.onConnect(),he.next=46;break;case 38:he.prev=38,he.t1=he.catch(31),oe="",he.t1.errors&&(_e.reportTCPException(he.t1.errors),de=he.t1.errors[0]),de.message==="handshake_failed"?(_e.onHandshakeFailed(de.event.startTime,de.event.url),oe="link::onHandshakeFailed"):de.message==="connect_failed"?(_e.onConnectFailed(de.event.reason,de.event.startTime,de.event.url),oe="link::onConnectFailed"):de.message==="socket_error"?(_e.onSocketError(de.event.reason,de.event.startTime,de.event.url),oe="link::onSocketError"):(oe="link::otherFailed",_e.logger.warn("link::otherFailed",de)),this.statusProtector.emit("auth/loginLifeCycleConnectFail",new Error("".concat(oe," 408"))),_e.connecting=!1,_e.willReconnect()?_e.onDisconnect(oe):this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"init connect fail"});case 46:case"end":return he.stop()}},Ce,this,[[14,22],[31,38]])})),v.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},v.disconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},ae=this;function Fe(_e){clearTimeout(ae.disconnectCallbackTimer),ae.msgAckBufferManager&&ae.msgAckBufferManager.clear(),ae.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to active action")),ae.statusProtector.emit("auth/loginLifeCycleLogout"),c(function(){Ce(_e)},0)}clearTimeout(ae.connectTimer),ae.disconnectCallbackTimer=c(function(){Ce.call(ae,"mark disconnected due to timeout")},1e4),ae.mixStorePolicy=null,ae.appGrayConfig=null,ae.resetReconnectStatus(),clearTimeout(ae.mixStorePolicyClock),this.onlineListener&&typeof window<"u"&&_.isFunction(window.removeEventListener)&&(window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener),this.onlineListener=null,this.offlineListener=null),ae.isConnected()?(ae.logger.warn("link::disconnect: start disconnecting"),ae.logout()):ae.connecting?(ae.logger.warn("link::disconnect: abort connecting"),ae.disconnectSocket()):(ae.logger.warn("link::disconnect: already disconnected"),ae.connecting=!1,ae.shouldReconnect=!1,ae.socket=null,ae.autoconnect=!1,ae.options.ondisconnect({code:"alreadyDisconnected",callFunc:"link::disconnect",message:"manually disconnect status"})),ae.socket&&ae.socket.socket&&ae.socket.socket.transport?ae.socket.socket.transport.onDisconnectDone=function(_e){ae.logger.warn("link::disconnect: invoke [done] when socket closed",_e),Fe(_e)}:(ae.logger.warn("link::disconnect: invoke [done]"),Fe(null))},v.resetReconnectStatus=function(){this.backoff&&(this.backoff.setMin(T.reconnectionDelay),this.backoff.setMax(T.reconnectionDelayMax),this.backoff.reset()),this.retryCount=0,this.autoconnect=!0,this.logger.info("link::resetReconnectStatus: reset retryCount and backoff")},v.onConnect=function(){this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect success"),this.statusProtector.emit("auth/loginLifeCycleConnectSucc"),this.login()},v.onDisconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ae=arguments.length>1?arguments[1]:void 0,Fe=this;this.logger.warn("socket::onDisconnect: "+Ce),Fe.connecting=!1,Fe.markAllCallbackInvalid(g.newNetworkError({callFunc:Ce,uploadCode:415,disconnectReason:ae})),Fe.msgAckBufferManager&&Fe.msgAckBufferManager.clear(),Fe.stopHeartbeat(),Fe.reconnect()},v.willReconnect=function(){return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts},v.reconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.__destroyed)if(this.willReconnect()){if(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.socketUrls.length===0&&!this.options.socketUrl&&typeof Ce.allFailedCB=="function")return this.logger.log("reconnect: All socket links have been polled, trigger hooks"),void Ce.allFailedCB();this.doReconnect()}else this.notifyDisconnect({code:"allAttemptsFailed",message:"All attempts failed"})},v.doReconnect=function(){var Ce,ae=this;ae.socket=null,ae.retryCount++,ae.hasLogin=!1;var Fe,_e=ae.backoff.duration();ae.logger.info(a(Ce="link::reconnect: will retry after ".concat(_e,"ms, retryCount ")).call(Ce,ae.retryCount)),Fe=ae.options.onwillreconnect({retryCount:ae.retryCount,duration:_e}),ae.statusProtector.emit("auth/loginLifeCycleWaiting"),clearTimeout(ae.connectTimer),ae.connectTimer=c(function(){+ae.options.authType==1&&Fe instanceof d?(ae.logger.info("link::reconnect: wait onwillreconnect promise"),Fe.finally(function(){return ae.connect()})):ae.connect()},_e)},v.notifyConnectError=function(Ce){var ae=g.newConnectError({message:Ce,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",ae),this.options.onerror(ae)},v.notifyDisconnect=function(Ce){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(Ce=Ce||new g).retryCount=this.retryCount,Ce.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.autoconnect=!1,this.logger.info("link::notifyDisconnect: ondisconnected",Ce),this.options.ondisconnect(Ce),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},v.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket&&this.socket.disconnect()}catch(Ce){this.socket&&typeof this.socket.removeAllListenersX=="function"&&this.socket.removeAllListenersX("info"),this.logger.info("link::disconnectSocket: disconnect failed, error ",Ce&&Ce.message)}}},v.initOnlineListener=function(){this.needReconnect&&this.options&&this.options.quickReconnect?typeof window<"u"&&_.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=m(V).call(V,this),this.offlineListener=m(O).call(O,this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},v.forceDisconnect=function(){var Ce=this.socket||{};this.socket=null;try{typeof Ce.removeAllListenersX=="function"&&Ce.removeAllListenersX("info"),typeof Ce.disconnect=="function"&&Ce.disconnect()}catch(ae){this.logger.error("forceDisconnect:: oldSocket error",ae||ae.message)}this.hasLogin=!1}},function(t,r){function e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),i=Math.floor(o*this.jitter*n);n=1&Math.floor(10*o)?n+i:n-i}return 0|Math.min(n,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(n){this.ms=n},e.prototype.setMax=function(n){this.max=n},e.prototype.setJitter=function(n){this.jitter=n}},function(t,r,e){var n=e(667);t.exports=function(o){return o&&o.length?n(o):[]}},function(t,r,e){var n=e(668),o=e(671),i=e(676),a=e(677),s=e(678),u=e(289);t.exports=function(c,d,m){var v=-1,g=o,b=c.length,T=!0,_=[],y=_;if(m)T=!1,g=i;else if(b>=200){var O=d?null:s(c);if(O)return u(O);T=!1,g=a,y=new n}else y=d?[]:_;e:for(;++v<b;){var V=c[v],Ce=d?d(V):V;if(V=m||V!==0?V:0,T&&Ce==Ce){for(var ae=y.length;ae--;)if(y[ae]===Ce)continue e;d&&y.push(Ce),_.push(V)}else g(y,Ce,m)||(y!==_&&y.push(Ce),_.push(V))}return _}},function(t,r,e){var n=e(259),o=e(669),i=e(670);function a(s){var u=-1,c=s==null?0:s.length;for(this.__data__=new n;++u<c;)this.add(s[u])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(672);t.exports=function(o,i){return!!(o!=null&&o.length)&&n(o,i,0)>-1}},function(t,r,e){var n=e(673),o=e(674),i=e(675);t.exports=function(a,s,u){return s==s?i(a,s,u):n(a,o,u)}},function(t,r){t.exports=function(e,n,o,i){for(var a=e.length,s=o+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}},function(t,r){t.exports=function(e){return e!=e}},function(t,r){t.exports=function(e,n,o){for(var i=o-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}},function(t,r){t.exports=function(e,n,o){for(var i=-1,a=e==null?0:e.length;++i<a;)if(o(n,e[i]))return!0;return!1}},function(t,r){t.exports=function(e,n){return e.has(n)}},function(t,r,e){var n=e(271),o=e(679),i=e(289),a=n&&1/i(new n([,-0]))[1]==1/0?function(s){return new n(s)}:o;t.exports=a},function(t,r){t.exports=function(){}},function(t,r,e){var n,o=e(75).fn,i=e(40),a=e(193),s=e(0),u=e(13),c=e(44),d=e(74),m=s.notundef;o.genSessionKey=(n={},function(){var v=this.name;return n[v]=n[v]||s.guid()}),o.afterLogin=s.emptyFunc,o.assembleIMLogin=function(){var v=this.options,g=v.account;this.sdkSession=this.genSessionKey();var b={appLogin:this.autoconnect?0:1,appKey:v.appKey,account:g,token:v.token,sdkVersion:u.info.sdkVersion,sdkHumanVersion:u.info.sdkHumanVersion,protocolVersion:u.info.protocolVersion,os:d.os.toString()==="[object Object]"?d.os.family:d.os.toString(),browser:d.name+" "+d.version,clientType:u.CLIENTTYPE||16,session:this.sdkSession,deviceId:c.deviceId,isReactNative:u.isRN?1:0,customTag:v.customTag||"",sdkType:0};return b.userAgent="Native/".concat(u.info.sdkHumanVersion),u.isBrowser?b.sdkType=0:u.isRN?b.sdkType=2:u.isWeixinApp&&(b.sdkType=6),v.customClientType&&(b.customClientType=+v.customClientType),v.authType&&(b.authType=+v.authType),v.loginExt&&(b.loginExt=v.loginExt),b},o.notifyLogin=function(v){this.logger.info("link::notifyLogin: on connect",v),this.options.onconnect(v)},o.logout=function(){if(this.doLogout)return this.doLogout=!1,void this.onAuthError(new i("done logout","logout",{disconnectReason:"close",uploadCode:415}),"link::logout");this.isConnected()&&this.onAuthError(new i("done disconnect","logout",{disconnectReason:"close",uploadCode:415}),"link::logout")},o.onKicked=function(v){var g=v.content,b=g.from,T=g.reason,_=g.custom,y=g.customClientType,O={reason:this.kickedReasons[T]||"unknown",message:this.kickedMessages[T]||"未知原因"};m(b)&&(O.from=a.reverseType(b)),m(_)&&(O.custom=_),+y>0&&(O.customClientType=y),this.logger.warn("link::onKicked:",O);var V=new i("被踢了","kicked",{disconnectReason:"kicked",uploadCode:415});s.merge(V,O),this.onAuthError(V,"link::onKicked"),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to kicked")),this.statusProtector.emit("auth/loginLifeCycleKicked",O)},o.onAuthError=function(v,g){var b=v&&v.code;if(this.logger.error("onAuthError ",g,b),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(b))return this.forceDisconnect(),void this.onDisconnect("link::onAuthError::"+b,"broken");(v=v||i.newConnectionError({callFunc:g,uploadCode:415,disconnectReason:"close"})).callFunc=v.callFunc||g||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(v),this.notifyDisconnect(v)}},function(t,r,e){var n=e(23),o=e(25),i=e(26),a=e(75).fn,s=e(13),u=e(0);a.processLink=function(c){switch(c.cmd){case"heartbeat":this.startHeartbeat();break;case"notifyDetect":i(u._get(c,"content.notifyDetectTag"))==="object"&&(c.content.notifyDetectTag.t3=new Date().getTime(),this.startDetect(c))}},a.startHeartbeat=function(){var c=this;c.stopHeartbeat(),c.heartbeatTimer=n(function(){var d;c.sendCmd("heartbeat",null,o(d=c.onHeartbeat).call(d,c))},s.heartbeatInterval)},a.startDetect=function(c){var d=c.content.notifyDetectTag;d.t4=new Date().getTime(),this.sendCmd("uploadDetect",{notifyDetectTag:d})},a.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},a.onHeartbeat=function(c){if(c){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();var d;c.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",c),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",c.code,c),c.code==="Error_Timeout"&&(this.checkNetworkAvailable()!==!1?this.heartbeatFail>1?(this.forceDisconnect(),this.onDisconnect("link::onHeartbeat","broken")):this.sendCmd("heartbeat",null,o(d=this.onHeartbeat).call(d,this)):this.startHeartbeat())}else this.heartbeatFail=0},a.checkNetworkAvailable=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?function(){return navigator.onLine}:function(){},a.heartbeat=function(){}},function(t,r,e){var n=e(3),o=e(6),i=e(23),a=e(52),s=e(75).fn,u=e(285),c=e(13),d=e(44);s.processMisc=function(m){switch(m.cmd){case"getSimpleNosToken":m.error||(m.obj=m.content.nosTokens[0]);break;case"getNosToken":m.error||(m.obj=m.content.nosToken);break;case"getGrayscaleConfig":m.error||(m.obj=m.content.appGrayConfigTag);break;case"getMixStorePolicy":m.error||(m.obj=m.content.mixStorePolicyTag);break;case"getMixStoreToken":m.error||(m.obj=m.content.mixStoreTokenTag);break;case"getBackSourceToken":m.error||(m.obj=m.content.backSourceTokenTag);break;case"uploadSdkLogUrl":m.error?this.logger.error("uploadSdkLogUrl::error",m.error):this.logger.info("uploadSdkLogUrl::success",m.obj&&m.obj.url);break;case"notifyUploadLog":m.error||(c.isRN?this.uploadLocalLogRN():c.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":m.error||(m.obj.text=m.content.text);break;case"processImage":m.obj.imageOps=u.reverseImageOps(m.obj.imageOps),m.error||(m.obj={url:m.content.url});break;case"getNosTokenTrans":m.error||(m.obj={nosToken:m.content.nosToken,docId:m.content.docId});break;case"getNosOriginUrl":m.error||(m.obj=m.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":m.error||this.emitAPI({type:"notifyTransLog",obj:m.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":m.error||(m.obj=m.content);break;case"getServerTime":m.obj=m.content&&m.content.time;break;case"getNosCdnHost":this.getNosCdnHost(m)}},s.uploadLocalLogRN=function(){if(c.isRN&&d.rnfs){var m=d.rnfs,v=this,g=m.nimIndex,b=(m.nimIndex+1)%2;m.nimPromise=m.nimPromise.then(function(){return n.all([m.exists(T(g)),m.exists(T(b))])}).then(function(_){return _&&(_[0]||_[1])?_[0]&&_[1]?m.copyFile(T(b),T(2)).then(function(){return m.readFile(T(g))}).then(function(y){return m.appendFile(T(2),y)}):_[0]?m.copyFile(T(g),T(2)):void(_[1]&&m.copyFile(T(b),T(2))):n.reject()}).then(function(){return new n(function(_){v.api.previewFile({filePath:T(2),done:function(y,O){if(n.all([m.unlink(T(2)),m.unlink(T(1)),m.unlink(T(0))]).finally(function(){_()}),y)v.logger.error("nim::uploadLocalLogRN:previewFile:error",y);else{var V=O.url;o(V).call(V,"?")>0?V+="&":V+="?",V+="download="+new Date().getTime()+"_rn.log",v.api.uploadSdkLogUrl({url:V})}}})})}).catch(function(_){m.unlink(T(2)).catch(function(){}),v.logger.error("nim::protocol::uploadLocalLogRN",_)})}function T(_){return m.DocumentDirectoryPath+"/nimlog_"+_+".log"}},s.uploadLocalLogWeb=function(){var m=this;this.options.dbLog!==!1&&this.logger._local?this.logger._local.fetchLog().then(function(v){m.api.previewFile({blob:new Blob([v.logs],{type:"text/plain"}),done:function(g,b){if(g)m.logger.error("uploadLocalLogWeb::previewFile:error",g);else{m.logger.log("uploadLocalLogWeb::previewFile:success",b);var T=b.url;T+=(o(T).call(T,"?")>0?"&":"?")+"download="+new Date().getTime()+"_web.log",m.api.uploadSdkLogUrl({url:T}),m.logger._local.deleteLogs(v.time).then(function(){m.logger.log("uploadLocalLogWeb::deleteLogs success")}).catch(function(_){return m.logger.error("uploadLocalLogWeb::deleteLogs:error ,",_)})}}})}).catch(function(v){m.logger.error("uploadLocalLogWeb::fetchLog:error",v)}):this.logger.warn("uploadLocalLogWeb::no dbLog")},s.getNosCdnHost=function(m){var v=this,g=m.error;if(g&&(g.callFunc="events::getNosCdnHost",v.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",g)),m.content&&m.content.nosConfigTag){var b=m.content.nosConfigTag,T="",_="";b.expire!==0&&b.cdnDomain?b.expire===-1?(T=b.cdnDomain,_=b.objectNamePrefix):(T=b.cdnDomain,_=b.objectNamePrefix,v.nosCdnHostTimer&&clearTimeout(v.nosCdnHostTimer),v.nosCdnHostTimer=i(function(){v.sendCmd("getNosCdnHost",{})},800*a(b.expire))):(T="",_=""),c.serverNosConfig.cdnDomain=T,c.serverNosConfig.objectPrefix=_,c.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",T),localStorage.setItem("nim_object_prefix",_))}}},function(t,r,e){var n=e(8),o=e(32),i=e(75).fn,a=e(0),s=e(286),u=e(105).EMSyncType;i.processAvSignal=function(d){switch(d.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":case"signalingCallEx":break;case"signalingNotify":this.onSignalingNotify(d);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(d);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(d);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(d);break;default:this.logger.warn("avSignal::unhandled cmd:",d.cmd)}};var c=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(d.needPush&&(d.needPush=d.needPush==="1"),d.needBadge&&(d.needBadge=d.needBadge==="1"),d.channelInValid&&(d.channelInValid=d.channelInValid==="1"),d.attach){var m=JSON.parse(d.attach);d.eventType=s.parseAvSignalType(m.type)}if(d.members){var v=JSON.parse(d.members);d.members=n(v).call(v,function(g){return s.parseAvSignalMember(g)})}return d};i.onSignalingNotify=function(d){if(d.error){var m=d.error;this.logger.error("protocal::avSignal:onSignalingNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{d.raw&&d.raw.r&&d.raw.r.length&&d.content&&d.content.avSignalTag&&(d.content.avSignalTag.msgid=d.raw.r[0]);var v=d.content.avSignalTag;v=o(v)?n(v).call(v,function(g){return c(g)}):c(v),this.emitAPI({type:"signalingNotify",obj:v}),a.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(v)}},i.onSignalingMutilClientSyncNotify=function(d){if(d.error){var m=d.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=d.content.avSignalTag;v=o(v)?n(v).call(v,function(g){return c(g)}):c(v),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:v}),a.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(v)}},i.onSignalingUnreadMessageSyncNotify=function(d){if(d.error){var m=d.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=d.content.avSignalTag;o(v)&&(v=n(v).call(v,function(g){return c(g)})),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:v}),this.reporterHook.emit("reporter/syncItemComplete",u.kSyncType15_13),a.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(v)}},i.onSignalingMembersSyncNotify=function(d){if(d.error){var m=d.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=d.content.avSignalTag;o(v)||(v=[v]),v=n(v).call(v,function(g){return c(g)}),this.emitAPI({type:"signalingChannelsSyncNotify",obj:v}),a.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(v)}}},function(t,r,e){var n=e(10),o=e(25),i=e(0),a=e(75).fn,s=e(116),u=e(277);a.adaptersRequest=function(c){var d=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2?arguments[2]:void 0,g=m.onerror||function(){},b=new Date().getTime(),T=i.get(v,"exception_service")||0;return m.onerror=function(){g.apply(void 0,arguments);var _=arguments.length<=0?void 0:arguments[0];d.reporter.reportTraceStart("exceptions",{user_id:d.account,trace_id:i.get(self,"socket.socket.sessionid"),start_time:b,action:1,exception_service:T}),d.reporter.reportTraceUpdateV2("exceptions",{code:typeof _.status=="number"?_.status:typeof _.code=="number"?_.code:0,description:_.message||"".concat(_.code),operation_type:0,target:c,context:m?n(m):"",net_connect:d.checkNetworkAvailable()}),d.reporter.reportTraceEnd("exceptions",1)},s(c,m)},a.adaptersUploadFile=function(c,d){var m,v=this;c.adaptersRequest=o(m=a.adaptersRequest).call(m,this);var g=new Date().getTime();return c.errorHook=function(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b){v.reporter.reportTraceStart("exceptions",{user_id:v.account,trace_id:i.get(self,"socket.socket.sessionid"),start_time:g,action:1,exception_service:T.provider==="s3"?4:3});var _=T.url||c.url;b.bucket&&(_=n(b)),v.reporter.reportTraceUpdateV2("exceptions",{code:typeof b.status=="number"?b.status:typeof b.code=="number"?b.code:0,description:b.message||"".concat(b.code),operation_type:1,target:_,net_connect:v.checkNetworkAvailable()}),v.reporter.reportTraceEnd("exceptions",1)}},new u(c,this,d)}},function(t,r,e){e(291);var n,o,i,a=e(47),s=e(57),u=e(41),c=e(2),d=e(3),m=e(5),v=e(23),g=e(17),b=e(15),T=e(7),_=e(26);i=function(){function y(Ce,ae){for(var Fe=0;Fe<ae.length;Fe++){var _e=ae[Fe];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),a(Ce,_e.key,_e)}}var O={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},V=function(){};return function(){function Ce(_e){(function(de,oe){if(!(de instanceof oe))throw new TypeError("Cannot call a class as a function")})(this,Ce),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=O,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=s(),this.timer=null,this.setConfig(_e),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}var ae,Fe;return ae=Ce,(Fe=[{key:"setConfig",value:function(_e){this.reportConfig=u({},this.reportConfig,_e),this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(_e,de){var oe=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(_e,u({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},de)).catch(function(he){var Ve,le;(le=(Ve=oe.reportConfig)===null||Ve===void 0?void 0:Ve.logger)===null||le===void 0||le.warn("Reporter immediately upload failed",he)})}},{key:"report",value:function(_e,de){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(oe.priority||(oe.priority=this.getEventPriority(_e,de)),this.reportConfig.isDataReportEnable&&_e){var he=s();oe.priority==="HIGH"?this.highPriorityMsgList.push({module:_e,msg:de,createTime:he}):oe.priority==="NORMAL"?this.msgList.push({module:_e,msg:de,createTime:he}):oe.priority==="LOW"&&this.lowPriorityMsgList.push({module:_e,msg:de,createTime:he}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(_e,de){if(this.reportConfig.isDataReportEnable&&_e&&!this.traceMsgCache[_e]){var oe=u(u({start_time:s()},de),{extension:[]});this.traceMsgCache[_e]=oe}}},{key:"reportTraceUpdate",value:function(_e){}},{key:"reportTraceUpdateV2",value:function(_e,de,oe){var he,Ve=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[_e]){var le=this.traceMsgCache[_e].extension.length,ie=new Date().getTime();de.duration=le===0?ie-this.traceMsgCache[_e].start_time:ie-this.traceMsgCache[_e].extension[le-1].end_time,this.traceMsgCache[_e].extension.push(u({end_time:ie},de)),oe!=null&&oe.asyncParams&&((he=this.traceMsgCache[_e]).asyncPromiseArray||(he.asyncPromiseArray=[]),this.traceMsgCache[_e].asyncPromiseArray.push(oe.asyncParams.then(function(Ie){var pe=Ve.traceMsgCache[_e].extension.length-1;u(Ve.traceMsgCache[_e].extension[pe],Ie)})))}}},{key:"reportTraceEnd",value:function(_e){var de,oe=this,he=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[_e])if(_e!=="nos"||he===!1)if(typeof he=="boolean"?this.traceMsgCache[_e].succeed=!!he:this.traceMsgCache[_e].state=he,this.traceMsgCache[_e].duration=s()-this.traceMsgCache[_e].start_time,c(de=this.traceMsgCache[_e].extension).call(de,function(le){delete le.end_time}),this.traceMsgCache[_e].asyncPromiseArray){var Ve=this.traceMsgCache[_e];d.all(this.traceMsgCache[_e].asyncPromiseArray).finally(function(){Ve===oe.traceMsgCache[_e]&&(delete oe.traceMsgCache[_e].asyncPromiseArray,oe.report(_e,oe.traceMsgCache[_e],{priority:oe.getEventPriority(_e,oe.traceMsgCache[_e])}),oe.traceMsgCache[_e]=null)})}else this.report(_e,this.traceMsgCache[_e],{priority:this.getEventPriority(_e,this.traceMsgCache[_e])}),this.traceMsgCache[_e]=null;else this.traceMsgCache[_e]=null}},{key:"getEventPriority",value:function(_e,de){if(_e==="exceptions"){if(de.action===0||de.action===2||de.action===1&&de.exception_service!==0)return"HIGH"}else if(_e==="msgReceive"||_e==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(_e){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[_e]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var _e,de=this;this.reportConfig.isDataReportEnable&&(c(_e=m(this.traceMsgCache)).call(_e,function(oe){de.reportTraceEnd(oe,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=V,this.report=V,this.reportTraceStart=V,this.reportTraceUpdate=V,this.reportTraceEnd=V,this.pause=V,this.restore=V,this.destroy=V,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var _e,de,oe=this;if(!this.loading){this.loading=!0;var he=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:he.dev_id,sdkVer:he.sdk_ver,platform:he.platform,appkey:he.app_key},timeout:this.reportConfig.timeout}).then(function(Ve){var le,ie;if(!oe.isDestroyed){if(Ve.status===200&&Ve.data&&Ve.data.code===200){var Ie=Ve.data.data||{};oe.reportConfig.maxSize=Ie.maxSize>1e3?1e3:Ie.maxSize,oe.reportConfig.maxInterval=Ie.maxInterval>1e4?1e4:Ie.maxInterval,oe.reportConfig.maxInterval=Ie.maxInterval<10?10:Ie.maxInterval,oe.reportConfig.minInterval=Ie.minInterval<2?2:Ie.minInterval,oe.reportConfig.maxDelay=Ie.maxDelay||300,oe.reportConfig.maxInterval=1e3*oe.reportConfig.maxInterval,oe.reportConfig.minInterval=1e3*oe.reportConfig.minInterval,oe.reportConfig.maxDelay=1e3*oe.reportConfig.maxDelay,oe.isUploadEnable=!0,oe.initConfigLoaded=!0,oe.loading=!1,oe.reportHeartBeat()}(ie=(le=oe.reportConfig)===null||le===void 0?void 0:le.logger)===null||ie===void 0||ie.log("Get reporter upload config success")}}).catch(function(Ve){var le,ie;oe.loading=!1,(ie=(le=oe.reportConfig)===null||le===void 0?void 0:le.logger)===null||ie===void 0||ie.error("Get reporter upload config failed",Ve)})}catch(Ve){this.loading=!1,(de=(_e=this.reportConfig)===null||_e===void 0?void 0:_e.logger)===null||de===void 0||de.error("Exec reporter request failed",Ve)}}}},{key:"reportHeartBeat",value:function(){var _e=this;this.isDestroyed||(this.timer=v(function(){_e.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var _e=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;s()-this.lastReportTime>=_e&&this.upload()}}},{key:"getUploadMsg",value:function(){var _e,de,oe,he,Ve,le,ie=this,Ie={},pe=s();this.highPriorityMsgList=g(_e=this.highPriorityMsgList).call(_e,function(sr){return pe-sr.createTime<ie.reportConfig.maxDelay}),this.msgList=g(de=this.msgList).call(de,function(sr){return pe-sr.createTime<ie.reportConfig.maxDelay}),this.lowPriorityMsgList=g(oe=this.lowPriorityMsgList).call(oe,function(sr){return pe-sr.createTime<ie.reportConfig.maxDelay}),this.cacheMsgList=g(he=this.cacheMsgList).call(he,function(sr){return pe-sr.createTime<ie.reportConfig.maxDelay});var kt=b(Ve=this.highPriorityMsgList).call(Ve,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=b(le=this.highPriorityMsgList).call(le,kt.length),kt.length<this.reportConfig.maxSize){var Ue,Dt,tr=this.reportConfig.maxSize-kt.length;kt=T(kt).call(kt,b(Ue=this.msgList).call(Ue,0,tr)),this.msgList=b(Dt=this.msgList).call(Dt,tr)}if(kt.length<this.reportConfig.maxSize){var dr,pr,ar=this.reportConfig.maxSize-kt.length;kt=T(kt).call(kt,b(dr=this.lowPriorityMsgList).call(dr,0,ar)),this.lowPriorityMsgList=b(pr=this.lowPriorityMsgList).call(pr,ar)}if(kt.length<this.reportConfig.maxSize){var hr,Ne,nr=this.reportConfig.maxSize-kt.length;kt=T(kt).call(kt,b(hr=this.cacheMsgList).call(hr,0,nr)),this.cacheMsgList=b(Ne=this.cacheMsgList).call(Ne,nr)}return c(kt).call(kt,function(sr){Ie[sr.module]?Ie[sr.module].push(sr.msg):Ie[sr.module]=[sr.msg]}),{uploadMsgArr:kt,uploadMsg:Ie}}},{key:"upload",value:function(){var _e,de,oe=this;if(this.isUploadEnable&&!(this.lastReportTime&&s()-this.lastReportTime<this.reportConfig.minInterval)){var he=this.getUploadMsg(),Ve=he.uploadMsgArr,le=he.uploadMsg;if(Ve.length){this.lastReportTime=s();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:le},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(ie){var Ie,pe,kt,Ue;oe.cacheMsgList=b(Ie=T(pe=oe.cacheMsgList).call(pe,Ve)).call(Ie,0,oe.reportConfig.cacheMaxSize),(Ue=(kt=oe.reportConfig)===null||kt===void 0?void 0:kt.logger)===null||Ue===void 0||Ue.warn("Reporter upload failed",ie)})}catch(ie){(de=(_e=this.reportConfig)===null||_e===void 0?void 0:_e.logger)===null||de===void 0||de.warn("Exec reporter request failed",ie)}clearTimeout(this.timer),this.reportHeartBeat()}}}}])&&y(ae.prototype,Fe),a(ae,"prototype",{writable:!1}),Ce}()},_(r)==="object"&&t!==void 0?t.exports=i():(o=typeof(n=i)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=o)},function(t,r,e){t.exports=e(687)},function(t,r,e){e(688);var n=e(689);t.exports=n},function(t,r,e){e(292)},function(t,r,e){var n=e(690);t.exports=n},function(t,r,e){var n=e(691);t.exports=n},function(t,r,e){e(292),t.exports=e(14)},function(t,r,e){var n,o,i,a=e(122),s=e(121),u=e(280),c=e(281),d=e(190),m=e(693),v=(e(291),e(2)),g=e(5),b=e(7),T=e(3),_=e(23),y=e(10),O=e(278),V=e(26);function Ce(ae){var Fe=function(){if(typeof Reflect>"u"||!O||O.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(O(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var _e,de=d(ae);if(Fe){var oe=d(this).constructor;_e=O(de,arguments,oe)}else _e=de.apply(this,arguments);return c(this,_e)}}i=function(){function ae(_e){if(_e){var de,oe="";return v(de=g(_e)).call(de,function(he,Ve){var le;oe+=Ve===0?"?":"&",oe+=b(le="".concat(he,"=")).call(le,_e[he])}),oe}return""}var Fe=function(_e){u(oe,_e);var de=Ce(oe);function oe(he,Ve,le,ie){var Ie;return s(this,oe),(Ie=de.call(this,le)).source=he,Ie.code=Ve,Ie.desc=le,Ie.detail=ie||{},Ie}return a(oe)}(m(Error));return function(_e){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{dataType:"json",method:"GET",timeout:5e3},oe=de.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",he=de.method==="GET"?ae(de.params):"";return new T(function(Ve,le){if(window.XMLHttpRequest){var ie,Ie,pe=new XMLHttpRequest;if(pe.onreadystatechange=function(){if(pe.readyState===4)if(pe.status===200){try{Ie=JSON.parse(pe.response||"{}")}catch{Ie=pe.response}Ve({status:pe.status,data:Ie})}else _(function(){var Ue;le(new Fe(1,pe.status,b(Ue="readyState: ".concat(pe.readyState,"; statusText: ")).call(Ue,pe.statusText)))},0)},pe.open(de.method,b(ie="".concat(_e)).call(ie,he)),pe.timeout=de.timeout||5e3,pe.setRequestHeader("Content-Type",oe),de.headers)for(var kt in de.headers)pe.setRequestHeader(kt,de.headers[kt]);pe.ontimeout=function(Ue){le(new Fe(1,408,Ue&&Ue.message?Ue.message:"request timeout"))},pe.send(y(de.data))}else le(new Fe(2,10400,"request no suppout"))})}},V(r)==="object"&&t!==void 0?t.exports=i():(o=typeof(n=i)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=o)},function(t,r,e){var n=e(694),o=e(187),i=e(190),a=e(188),s=e(733),u=e(734);function c(d){var m=typeof n=="function"?new n:void 0;return t.exports=c=function(v){if(v===null||!s(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(v))return m.get(v);m.set(v,g)}function g(){return u(v,arguments,i(this).constructor)}return g.prototype=o(v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),a(g,v)},t.exports.__esModule=!0,t.exports.default=t.exports,c(d)}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(695)},function(t,r,e){t.exports=e(696)},function(t,r,e){var n=e(697);e(708),e(710),e(712),e(714),e(715),e(717),e(718),e(719),e(720),e(721),e(723),e(724),e(725),e(726),e(727),e(728),e(729),e(730),e(731),e(732),t.exports=n},function(t,r,e){var n=e(698);t.exports=n},function(t,r,e){var n=e(699);e(67),t.exports=n},function(t,r,e){e(82),e(700),e(96),e(113);var n=e(12);t.exports=n.Map},function(t,r,e){e(701)},function(t,r,e){e(702)("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},e(706))},function(t,r,e){var n=e(1),o=e(14),i=e(293),a=e(4),s=e(53),u=e(46),c=e(168),d=e(16),m=e(28),v=e(81),g=e(38).f,b=e(84).forEach,T=e(27),_=e(97),y=_.set,O=_.getterFor;t.exports=function(V,Ce,ae){var Fe,_e=V.indexOf("Map")!==-1,de=V.indexOf("Weak")!==-1,oe=_e?"set":"add",he=o[V],Ve=he&&he.prototype,le={};if(T&&d(he)&&(de||Ve.forEach&&!a(function(){new he().entries().next()}))){var ie=(Fe=Ce(function(pe,kt){y(c(pe,ie),{type:V,collection:new he}),kt!=null&&u(kt,pe[oe],{that:pe,AS_ENTRIES:_e})})).prototype,Ie=O(V);b(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(pe){var kt=pe=="add"||pe=="set";!(pe in Ve)||de&&pe=="clear"||s(ie,pe,function(Ue,Dt){var tr=Ie(this).collection;if(!kt&&de&&!m(Ue))return pe=="get"&&void 0;var dr=tr[pe](Ue===0?0:Ue,Dt);return kt?this:dr})}),de||g(ie,"size",{configurable:!0,get:function(){return Ie(this).collection.size}})}else Fe=ae.getConstructor(Ce,V,_e,oe),i.enable();return v(Fe,V,!1,!0),le[V]=Fe,n({global:!0,forced:!0},le),de||ae.setStrong(Fe,V,_e),Fe}},function(t,r,e){var n=e(4),o=e(28),i=e(63),a=e(704),s=Object.isExtensible,u=n(function(){});t.exports=u||a?function(c){return!!o(c)&&(!a||i(c)!="ArrayBuffer")&&(!s||s(c))}:s},function(t,r,e){var n=e(4);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},function(t,r,e){var n=e(4);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,r,e){var n=e(38).f,o=e(80),i=e(707),a=e(34),s=e(168),u=e(91),c=e(46),d=e(166),m=e(167),v=e(237),g=e(27),b=e(293).fastKey,T=e(97),_=T.set,y=T.getterFor;t.exports={getConstructor:function(O,V,Ce,ae){var Fe=O(function(Ve,le){s(Ve,_e),_(Ve,{type:V,index:o(null),first:void 0,last:void 0,size:0}),g||(Ve.size=0),u(le)||c(le,Ve[ae],{that:Ve,AS_ENTRIES:Ce})}),_e=Fe.prototype,de=y(V),oe=function(Ve,le,ie){var Ie,pe,kt=de(Ve),Ue=he(Ve,le);return Ue?Ue.value=ie:(kt.last=Ue={index:pe=b(le,!0),key:le,value:ie,previous:Ie=kt.last,next:void 0,removed:!1},kt.first||(kt.first=Ue),Ie&&(Ie.next=Ue),g?kt.size++:Ve.size++,pe!=="F"&&(kt.index[pe]=Ue)),Ve},he=function(Ve,le){var ie,Ie=de(Ve),pe=b(le);if(pe!=="F")return Ie.index[pe];for(ie=Ie.first;ie;ie=ie.next)if(ie.key==le)return ie};return i(_e,{clear:function(){for(var Ve=de(this),le=Ve.index,ie=Ve.first;ie;)ie.removed=!0,ie.previous&&(ie.previous=ie.previous.next=void 0),delete le[ie.index],ie=ie.next;Ve.first=Ve.last=void 0,g?Ve.size=0:this.size=0},delete:function(Ve){var le=de(this),ie=he(this,Ve);if(ie){var Ie=ie.next,pe=ie.previous;delete le.index[ie.index],ie.removed=!0,pe&&(pe.next=Ie),Ie&&(Ie.previous=pe),le.first==ie&&(le.first=Ie),le.last==ie&&(le.last=pe),g?le.size--:this.size--}return!!ie},forEach:function(Ve){for(var le,ie=de(this),Ie=a(Ve,arguments.length>1?arguments[1]:void 0);le=le?le.next:ie.first;)for(Ie(le.value,le.key,this);le&&le.removed;)le=le.previous},has:function(Ve){return!!he(this,Ve)}}),i(_e,Ce?{get:function(Ve){var le=he(this,Ve);return le&&le.value},set:function(Ve,le){return oe(this,Ve===0?0:Ve,le)}}:{add:function(Ve){return oe(this,Ve=Ve===0?0:Ve,Ve)}}),g&&n(_e,"size",{get:function(){return de(this).size}}),Fe},setStrong:function(O,V,Ce){var ae=V+" Iterator",Fe=y(V),_e=y(ae);d(O,V,function(de,oe){_(this,{type:ae,target:de,state:Fe(de),kind:oe,last:void 0})},function(){for(var de=_e(this),oe=de.kind,he=de.last;he&&he.removed;)he=he.previous;return de.target&&(de.last=he=he?he.next:de.state.first)?m(oe=="keys"?he.key:oe=="values"?he.value:[he.key,he.value],!1):(de.target=void 0,m(void 0,!0))},Ce?"entries":"values",!Ce,!0),v(V)}}},function(t,r,e){var n=e(66);t.exports=function(o,i,a){for(var s in i)a&&a.unsafe&&o[s]?o[s]=i[s]:n(o,s,i[s],a);return o}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{from:e(709)})},function(t,r,e){var n=e(34),o=e(19),i=e(31),a=e(169),s=e(91),u=e(46),c=[].push;t.exports=function(d){var m,v,g,b,T=arguments.length,_=T>1?arguments[1]:void 0;return a(this),(m=_!==void 0)&&i(_),s(d)?new this:(v=[],m?(g=0,b=n(_,T>2?arguments[2]:void 0),u(d,function(y){o(c,v,b(y,g++))})):u(d,c,{that:v}),new this(v))}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{of:e(711)})},function(t,r,e){var n=e(98);t.exports=function(){return new this(n(arguments))}},function(t,r,e){var n=e(1),o=e(37),i=e(55).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var a,s=o(this),u=!0,c=0,d=arguments.length;c<d;c++)a=i(s,arguments[c]),u=u&&a;return!!u}})},function(t,r){t.exports=function(e,n){return n==1?function(o,i){return o[e](i)}:function(o,i,a){return o[e](i,a)}}},function(t,r,e){var n=e(1),o=e(37),i=e(55),a=i.get,s=i.has,u=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(c,d){var m,v,g=o(this);return s(g,c)?(m=a(g,c),"update"in d&&(m=d.update(m,c,g),u(g,c,m)),m):(v=d.insert(c,g),u(g,c,v),v)}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(s){var u=i(this),c=o(s,arguments.length>1?arguments[1]:void 0);return a(u,function(d,m){if(!c(d,m,u))return!1},!0)!==!1}})},function(t,r,e){var n=e(19);t.exports=function(o,i,a){for(var s,u,c=a||o.next;!(s=n(c,o)).done;)if((u=i(s.value))!==void 0)return u}},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(55),s=e(51),u=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(d){var m=i(this),v=o(d,arguments.length>1?arguments[1]:void 0),g=new u;return s(m,function(b,T){v(b,T,m)&&c(g,T,b)}),g}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(s){var u=i(this),c=o(s,arguments.length>1?arguments[1]:void 0),d=a(u,function(m,v){if(c(m,v,u))return{value:m}},!0);return d&&d.value}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(s){var u=i(this),c=o(s,arguments.length>1?arguments[1]:void 0),d=a(u,function(m,v){if(c(m,v,u))return{key:v}},!0);return d&&d.key}})},function(t,r,e){var n=e(1),o=e(19),i=e(11),a=e(16),s=e(31),u=e(46),c=e(55).Map,d=i([].push);n({target:"Map",stat:!0,forced:!0},{groupBy:function(m,v){var g=new(a(this)?this:c);s(v);var b=s(g.has),T=s(g.get),_=s(g.set);return u(m,function(y){var O=v(y);o(b,g,O)?d(o(T,g,O),y):o(_,g,O,[y])}),g}})},function(t,r,e){var n=e(1),o=e(722),i=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(s){return a(i(this),function(u){if(o(u,s))return!0},!0)===!0}})},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(1),o=e(19),i=e(46),a=e(16),s=e(31),u=e(55).Map;n({target:"Map",stat:!0,forced:!0},{keyBy:function(c,d){var m=new(a(this)?this:u);s(d);var v=s(m.set);return i(c,function(g){o(v,m,d(g),g)}),m}})},function(t,r,e){var n=e(1),o=e(37),i=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(a){var s=i(o(this),function(u,c){if(u===a)return{key:c}},!0);return s&&s.key}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(55),s=e(51),u=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(d){var m=i(this),v=o(d,arguments.length>1?arguments[1]:void 0),g=new u;return s(m,function(b,T){c(g,v(b,T,m),b)}),g}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(55),s=e(51),u=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(d){var m=i(this),v=o(d,arguments.length>1?arguments[1]:void 0),g=new u;return s(m,function(b,T){c(g,T,v(b,T,m))}),g}})},function(t,r,e){var n=e(1),o=e(37),i=e(46),a=e(55).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(s){for(var u=o(this),c=arguments.length,d=0;d<c;)i(arguments[d++],function(m,v){a(u,m,v)},{AS_ENTRIES:!0});return u}})},function(t,r,e){var n=e(1),o=e(31),i=e(37),a=e(51),s=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(u){var c=i(this),d=arguments.length<2,m=d?void 0:arguments[1];if(o(u),a(c,function(v,g){d?(d=!1,m=v):m=u(m,v,g,c)}),d)throw s("Reduce of empty map with no initial value");return m}})},function(t,r,e){var n=e(1),o=e(34),i=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(s){var u=i(this),c=o(s,arguments.length>1?arguments[1]:void 0);return a(u,function(d,m){if(c(d,m,u))return!0},!0)===!0}})},function(t,r,e){var n=e(1),o=e(31),i=e(37),a=e(55),s=TypeError,u=a.get,c=a.has,d=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(m,v){var g=i(this),b=arguments.length;o(v);var T=c(g,m);if(!T&&b<3)throw s("Updating absent value");var _=T?u(g,m):o(b>2?arguments[2]:void 0)(m,g);return d(g,m,v(_,m,g)),g}})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:e(294)})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:e(294)})},function(t,r,e){var n=e(186);t.exports=function(o){var i;return n(i=Function.toString.call(o)).call(i,"[native code]")!==-1},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(149),o=e(295),i=e(188),a=e(738);function s(u,c,d){var m;return a()?(t.exports=s=n(m=o).call(m),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=s=function(v,g,b){var T=[null];T.push.apply(T,g);var _=new(n(Function).apply(v,T));return b&&i(_,b.prototype),_},t.exports.__esModule=!0,t.exports.default=t.exports),s.apply(null,arguments)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(736)},function(t,r,e){var n=e(737);t.exports=n},function(t,r,e){var n=e(279);t.exports=n},function(t,r,e){var n=e(295);t.exports=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(17),o=e(0),i=e(191),a=o.merge({},i.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24,syncSessionReliableInfo:25},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,msgFtsInServerByTiming:27,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2},qchat:{id:24,getQChatAddress:1}}),s=o.merge({},i.cmdConfig,{login:{sid:a.auth.id,cid:a.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:a.auth.id,cid:a.auth.logout},kick:{sid:a.auth.id,cid:a.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:a.user.id,cid:a.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"int",name:"pushkit"}]},appBackground:{sid:a.user.id,cid:a.user.appBackground,params:[{type:"bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:a.user.id,cid:a.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getBlacklist:{sid:a.user.id,cid:a.user.getBlacklist,params:[{type:"long",name:"time"}]},markInMutelist:{sid:a.user.id,cid:a.user.markInMutelist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getMutelist:{sid:a.user.id,cid:a.user.getMutelist,params:[{type:"long",name:"time"}]},getRelations:{sid:a.user.id,cid:a.user.getRelations,params:[{type:"long",name:"timetag"}]},getUsers:{sid:a.user.id,cid:a.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:a.user.id,cid:a.user.updateMyInfo,params:[{type:"Property",name:"user"},{type:"Property",name:"antispamTag"}]},updateDonnop:{sid:a.user.id,cid:a.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:a.notify.id,cid:a.notify.markRead,params:[{type:"long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:a.notify.id,cid:a.notify.batchMarkRead,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:a.sync.id,cid:a.sync.sync,isAwaitable:!1,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:a.sync.id,cid:a.sync.syncTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},syncSuperTeamMembers:{sid:a.sync.id,cid:a.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:a.msg.id,cid:a.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:a.msg.id,cid:a.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:a.msg.id,cid:a.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:a.msg.id,cid:a.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSessions:{sid:a.msg.id,cid:a.msg.getSessions,params:[{type:"long",name:"time"}]},deleteSessions:{sid:a.msg.id,cid:a.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:a.msg.id,cid:a.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:a.msg.id,cid:a.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:a.msg.id,cid:a.msg.markSessionAck,params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},markSessionAckBatch:{sid:a.msg.id,cid:a.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:a.msg.id,cid:a.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},msgFtsInServerByTiming:{sid:a.msg.id,cid:a.msg.msgFtsInServerByTiming,params:[{type:"Property",name:"msgTimingFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs},getServerSessions:{sid:a.msg.id,cid:a.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:a.msg.id,cid:a.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:a.msg.id,cid:a.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:a.msg.id,cid:a.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:a.msg.id,cid:a.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.leaveSuperTeam,params:[{type:"long",name:"teamId"}]},updateSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},getSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeam,params:[{type:"long",name:"teamId"}]},getSuperTeams:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeams,params:[{type:"long",name:"timetag"}]},getSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},updateInfoInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},getSuperTeamHistoryMsgs:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:a.superTeam.id,cid:a.superTeam.applySuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.passSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.acceptSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionAck,params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},addSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMute,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},updateSuperTeamMembersMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMembersMute,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"int",name:"mute"}]},updateNickInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.transferSuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMutedSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:a.team.id,cid:a.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"Property",name:"antispamTag"}]},sendTeamMsg:{sid:a.team.id,cid:a.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:a.team.id,cid:a.team.addTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:a.team.id,cid:a.team.removeTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:a.team.id,cid:a.team.updateTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},leaveTeam:{sid:a.team.id,cid:a.team.leaveTeam,params:[{type:"long",name:"teamId"}]},getTeam:{sid:a.team.id,cid:a.team.getTeam,params:[{type:"long",name:"teamId"}]},getTeams:{sid:a.team.id,cid:a.team.getTeams,params:[{type:"long",name:"timetag"}]},getTeamsById:{sid:a.team.id,cid:a.team.getTeamsById,params:[{type:"longArray",name:"teamIds"}]},getTeamMembers:{sid:a.team.id,cid:a.team.getTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},dismissTeam:{sid:a.team.id,cid:a.team.dismissTeam,params:[{type:"long",name:"teamId"}]},applyTeam:{sid:a.team.id,cid:a.team.applyTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:a.team.id,cid:a.team.passTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:a.team.id,cid:a.team.rejectTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:a.team.id,cid:a.team.addTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:a.team.id,cid:a.team.removeTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:a.team.id,cid:a.team.transferTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateInfoInTeam:{sid:a.team.id,cid:a.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"}]},updateNickInTeam:{sid:a.team.id,cid:a.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:a.team.id,cid:a.team.acceptTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:a.team.id,cid:a.team.rejectTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:a.team.id,cid:a.team.getTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:a.team.id,cid:a.team.searchTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},updateMuteStateInTeam:{sid:a.team.id,cid:a.team.updateMuteStateInTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"int",name:"mute"}]},getMyTeamMembers:{sid:a.team.id,cid:a.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:a.team.id,cid:a.team.getMutedTeamMembers,params:[{type:"long",name:"teamId"}]},sendTeamMsgReceipt:{sid:a.team.id,cid:a.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:a.team.id,cid:a.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:a.team.id,cid:a.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:a.team.id,cid:a.team.muteTeamAll,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:a.team.id,cid:a.team.getTeamMemberInvitorAccid,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:a.friend.id,cid:a.friend.friendRequest,params:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:a.friend.id,cid:a.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:a.friend.id,cid:a.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:a.friend.id,cid:a.friend.getFriends,params:[{type:"long",name:"timetag"}]},getChatroomAddress:{sid:a.chatroom.id,cid:a.chatroom.getChatroomAddress,params:[{type:"long",name:"chatroomId"},{type:"bool",name:"isWeixinApp"},{type:"number",name:"type"}]},sendFilterMsg:{sid:n(a).id,cid:n(a).sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:n(a).id,cid:n(a).sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:a.eventService.id,cid:a.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:a.eventService.id,cid:a.eventService.pushEvent},subscribeEvent:{sid:a.eventService.id,cid:a.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:a.eventService.id,cid:a.eventService.pushEvents},getThreadMsgs:{sid:a.msgExtend.id,cid:a.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:a.msgExtend.id,cid:a.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:a.msgExtend.id,cid:a.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:a.msgExtend.id,cid:a.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:a.msgExtend.id,cid:a.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:a.msgExtend.id,cid:a.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:a.proxyService.id,cid:a.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]},getQChatAddress:{sid:a.qchat.id,cid:a.qchat.getQChatAddress,params:[{type:"Property",name:"getQChatAddressTag"}]}}),u=o.merge({},i.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Number",name:"from"},{type:"Number",name:"reason"},{type:"String",name:"custom"},{type:"Number",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Number",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Number",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Number",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Number",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Number",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Number",name:"timetag"},{type:"boolean",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_25":{service:"notify",cmd:"syncSessionReliableInfo",response:[{type:"Property",name:"context",entity:"sessionReliableSyncContextTag"},{type:"PropertyArray",name:"datas",entity:"sessionReliableSyncTag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Number",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_27":{service:"msg",cmd:"msgFtsInServerByTiming",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Number",name:"scene"},{type:"String",name:"to"},{type:"Number",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Number",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Number",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Number",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Number",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Number",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Number",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Number",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Number",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Number",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers"},"21_7":{service:"superTeam",cmd:"leaveSuperTeam"},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam"},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Number",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam"},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"object",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"StrArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Number",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"24_1":{service:"qchat",cmd:"getQChatAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});t.exports={idMap:a,cmdConfig:s,packetConfig:u}},function(t,r){t.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38,customClientType:39},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,yidunAntiSpamExt:44,yidunAntiSpamRes:45,__clientExt:46,robotInfoFunction:47,robotInfoTopic:48,robotInfoCustomContent:49,robotInfoAccount:50,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,idClient:23,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},antispamTag:{antiSpamBusinessId:1},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},msgTimingFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3},mixTokenReq:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},mixAuthTokenReq:{type:1,urls:2},notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105},getQChatAddressTag:{ipType:1}}},function(t,r){t.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},appGrayConfigTag:{0:"grayConfig",1:"ttl"},mixStorePolicyTag:{0:"providers",1:"ttl",2:"mixEnable",3:"nosPolicy",4:"s3Policy"},mixStoreTokenTag:{0:"provider",1:"accessKeyId",2:"secretAccessKey",3:"sessionToken",4:"token",5:"expireAt",6:"bucket",7:"objectName",8:"fileExpireSec",9:"tag",10:"shortUrl",11:"region"},notifyDetectTag:{1:"type",2:"params",3:"result",100:"t1",101:"t2",102:"t3",103:"t4",104:"t5",105:"t6"},backSourceTokenTag:{1:"type",2:"tokens",3:"token",4:"ttl"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",39:"customClientType",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",44:"yidunAntiSpamExt",45:"yidunAntiSpamRes",46:"__clientExt",47:"robotInfoFunction",48:"robotInfoTopic",49:"robotInfoCustomContent",50:"robotInfoAccount",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",23:"idClient",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"},sessionReliableSyncTag:{1:"scene",2:"sessionId",3:"syncStatus",4:"syncEndMsgId",5:"syncEndMsgidClient",6:"syncEndMsgTime",7:"syncStartMsgid",8:"syncStartMsgidClient",9:"syncStartMsgTime",10:"nextMsgid",11:"nextMsgidClient",12:"nextMsgTime",13:"roamMsgSync",14:"offlineMsgSync",15:"netCallOfflineMsgSync"},sessionReliableSyncContextTag:{1:"timetag",2:"type"}}},function(t,r,e){var n=e(0),o=e(191),i=n.merge({},o.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,updateCoordinate:33,updateChatroomTags:34,sendChatroomMsgAck:35,getHistoryMsgsByTags:36,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),a=n.merge({},o.cmdConfig,{login:{sid:i.chatroom.id,cid:i.chatroom.login,params:[{type:"byte",name:"type"},{type:"Property",name:"login"},{type:"Property",name:"imLogin"}]},logout:{sid:i.chatroom.id,cid:i.chatroom.logout},sendMsg:{sid:i.chatroom.id,cid:i.chatroom.sendMsg,params:[{type:"Property",name:"msg"}]},getChatroomMembers:{sid:i.chatroom.id,cid:i.chatroom.getChatroomMembers,params:[{type:"byte",name:"type"},{type:"long",name:"time"},{type:"int",name:"limit"}]},getHistoryMsgs:{sid:i.chatroom.id,cid:i.chatroom.getHistoryMsgs,params:[{type:"long",name:"timetag"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},markChatroomMember:{sid:i.chatroom.id,cid:i.chatroom.markChatroomMember,params:[{type:"string",name:"account"},{type:"int",name:"type"},{type:"bool",name:"isAdd"},{type:"int",name:"level"},{type:"string",name:"custom"}]},closeChatroom:{sid:i.chatroom.id,cid:i.chatroom.closeChatroom,params:[{type:"string",name:"custom"}]},getChatroom:{sid:i.chatroom.id,cid:i.chatroom.getChatroom},updateChatroom:{sid:i.chatroom.id,cid:i.chatroom.updateChatroom,params:[{type:"Property",name:"chatroom"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"Property",name:"antispamTag"}]},updateMyChatroomMemberInfo:{sid:i.chatroom.id,cid:i.chatroom.updateMyChatroomMemberInfo,params:[{type:"Property",name:"chatroomMember"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"bool",name:"needSave"},{type:"Property",name:"antispamTag"}]},getChatroomMembersInfo:{sid:i.chatroom.id,cid:i.chatroom.getChatroomMembersInfo,params:[{type:"StrArray",name:"accounts"}]},kickChatroomMember:{sid:i.chatroom.id,cid:i.chatroom.kickChatroomMember,params:[{type:"string",name:"account"},{type:"string",name:"custom"}]},updateChatroomMemberTempMute:{sid:i.chatroom.id,cid:i.chatroom.updateChatroomMemberTempMute,params:[{type:"String",name:"account"},{type:"long",name:"duration"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"}]},queueOffer:{sid:i.chatroom.id,cid:i.chatroom.queueOffer,params:[{type:"string",name:"elementKey"},{type:"string",name:"elementValue"},{type:"bool",name:"transient"},{type:"string",name:"elementAccount"}]},queuePoll:{sid:i.chatroom.id,cid:i.chatroom.queuePoll,params:[{type:"string",name:"elementKey"}]},queueList:{sid:i.chatroom.id,cid:i.chatroom.queueList},peak:{sid:i.chatroom.id,cid:i.chatroom.peak},queueDrop:{sid:i.chatroom.id,cid:i.chatroom.queueDrop},queueInit:{sid:i.chatroom.id,cid:i.chatroom.queueInit,params:[{type:"int",name:"limit"}]},queueChange:{sid:i.chatroom.id,cid:i.chatroom.queueChange,params:[{type:"StrStrMap",name:"elementMap"},{type:"bool",name:"needNotify"},{type:"string",name:"notifyExt"}]},updateTagMembersTempMute:{sid:i.chatroom.id,cid:i.chatroom.updateTagMembersTempMute,params:[{type:"Property",name:"tagMuteReq"}]},updateCoordinate:{sid:i.chatroom.id,cid:i.chatroom.updateCoordinate,params:[{type:"Property",name:"coordinateReq"}]},getChatroomMemberCountByTag:{sid:i.chatroom.id,cid:i.chatroom.getChatroomMemberCountByTag,params:[{type:"String",name:"tag"}]},getChatroomMembersByTag:{sid:i.chatroom.id,cid:i.chatroom.getChatroomMembersByTag,params:[{type:"Property",name:"tagMemberReq"}]},updateChatroomTags:{sid:i.chatroom.id,cid:i.chatroom.updateChatroomTags,params:[{type:"Property",name:"chatRoomTagsUpdateTag"}]},sendChatroomMsgAck:{sid:i.chatroom.id,cid:i.chatroom.sendChatroomMsgAck,params:[{type:"Property",name:"chatRoomMsgAckTag"}]},getHistoryMsgsByTags:{sid:i.chatroom.id,cid:i.chatroom.getHistoryMsgsByTags,params:[{type:"Property",name:"chatRoomTagHistoryMsgRequestTag"}]},notifyCdnInfo:{sid:i.chatroom.id,cid:i.chatroom.notifyCdnInfo},syncRobot:{sid:i.user.id,cid:i.user.syncRobot,params:[{type:"long",name:"timetag"}]}}),s=n.merge({},o.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:"Property",name:"chatroom"},{type:"Property",name:"chatroomMember"},{type:"Property",name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:"Number",name:"reason"},{type:"String",name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:"Property",name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:"Property",name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:"Property",name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:"Property",name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute"},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:"KVArray",name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:"StrArray",name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute"},"13_33":{service:"chatroom",cmd:"updateCoordinate"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:"long",name:"count"}]},"13_34":{service:"chatroom",cmd:"updateChatroomTags"},"13_36":{service:"chatroom",cmd:"getHistoryMsgsByTags",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:"Property",name:"chatroomCdnInfo"}]},"13_101":{service:"chatroom",cmd:"updateChatroomTag",response:[{type:"Property",name:"updateTags"}]}});t.exports={idMap:i,cmdConfig:a,packetConfig:s}},function(t,r){t.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,isReactNative:112,authType:115,loginExt:116,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40,loginAuthType:41,loginExt:42,loc_x:43,loc_y:44,loc_z:45,distance:46,antiSpamBusinessId:47},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31,yidunAntiSpamExt:32,yidunAntiSpamRes:33,loc_x:34,loc_y:35,loc_z:36,toAccids:37,needHighPriorityMsgAck:38,__clientExt:39},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5},coordinateReq:{x:1,y:2,z:3,distance:4},chatRoomTagsUpdateTag:{tags:1,notifyTargetTags:2,needNotify:3,ext:4},chatRoomMsgAckTag:{idClient:1,chatroomId:2},chatRoomTagHistoryMsgRequestTag:{tags:1,types:2,fromTime:3,toTime:4,limit:5,reverse:6}}},function(t,r){t.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",41:"sdkType",42:"userAgent",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",41:"loginAuthType",42:"loginExt",43:"loc_x",44:"loc_y",45:"loc_z",46:"distance",47:"antiSpamBusinessId",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",32:"yidunAntiSpamExt",33:"yidunAntiSpamRes",34:"loc_x",35:"loc_y",36:"loc_z",37:"toAccids",38:"needHighPriorityMsgAck",39:"__clientExt",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},updateTags:{1:"currentTags"}}},function(t,r,e){t.exports=e(785)},function(t,r){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,i=new Array(n);o<n;o++)i[o]=e[o];return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(789)},function(t,r,e){var n=e(308),o=e(747),i=e(746);t.exports=function(a,s){var u;if(a){if(typeof a=="string")return i(a,s);var c=n(u=Object.prototype.toString.call(a)).call(u,8,-1);return c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set"?o(a):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?i(a,s):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(793)},function(t,r,e){var n=e(5),o=e(41),i=e(0),a=i.notundef,s={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},u={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function c(d){i.verifyOptions(d,"account","friend::Friend"),i.verifyParamAtLeastPresentOne(d,"alias custom","friend::Friend"),this.account=d.account,a(d.alias)&&(this.alias=d.alias),a(d.custom)&&(this.custom=d.custom)}c.reverse=function(d){var m=i.filterObj(d,"account alias custom createTime updateTime serverex");return a(d.flag)&&(m.valid=d.flag==="1"),a(m.createTime)&&(m.createTime=+m.createTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),m},c.validTypes=function(){return n(s)},c.getByteFromType=function(d){return s[d]},c.getTypeFromByte=function(d){return u[d]},c.assembleFriend=function(d){var m=+new Date;return o({},d,{alias:"",createTime:m,custom:"",updateTime:m,valid:!0})},t.exports=c},function(t,r,e){var n=e(752),o=e(41),i=e(0),a=i.notundef;function s(u,c){n(u.body)||i.onParamError("body只能是整数",c),this.body=u.body,this.from=u.from||"",this.custom=u.custom||"",a(u.pushTitle)&&(this.pushTitle=u.pushTitle),a(u.apnsText)&&(this.apnsText=u.apnsText),a(u.pushPayload)&&(this.pushPayload=u.pushPayload),a(u.needPush)&&(this.needPush=u.needPush===!0?1:0),a(u.needBadge)&&(this.needBadge=u.needBadge===!0?1:0)}s.reverse=function(u){var c=o({},u);return a(u.needBadge)&&(c.needBadge=+u.needBadge==1),a(u.needPush)&&(c.needPush=+u.needPush==1),c.body=+u.body,c.time=+u.time,c},t.exports=s},function(t,r,e){t.exports=e(811)},function(t,r,e){var n=e(752),o=e(41),i=e(0);function a(s,u){n(s.type)||i.onParamError("Collect.type只能是整数",u),i.notundef(s.uniqueId)&&(this.uniqueId=s.uniqueId),this.type=s.type,this.data=s.data||"",this.custom=s.custom||""}a.reverse=function(s){var u=o({},s);return u.type=+u.type,u.createTime=+u.createTime,u.updateTime=+u.updateTime,u},t.exports=a},function(t,r,e){var n=e(819),o=e(820),i=e(748),a=e(821);t.exports=function(s,u){return n(s)||o(s,u)||i(s,u)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(756),o=e(757),i=e(758),a=e(759);function s(d,m,v){var g=d;return o(m)?(v=m,typeof d=="string"&&(g={uri:d})):g=a(m,{uri:d}),g.callback=v,g}function u(d,m,v){return c(m=s(d,m,v))}function c(d){if(d.callback===void 0)throw new Error("callback argument missing");var m=!1,v=function(Ve,le,ie){m||(m=!0,d.callback(Ve,le,ie))};function g(){var Ve=void 0;if(Ve=O.response?O.response:O.responseText||function(le){try{if(le.responseType==="document")return le.responseXML;var ie=le.responseXML&&le.responseXML.documentElement.nodeName==="parsererror";if(le.responseType===""&&!ie)return le.responseXML}catch{}return null}(O),oe)try{Ve=JSON.parse(Ve)}catch{}return Ve}function b(Ve){return clearTimeout(V),Ve instanceof Error||(Ve=new Error(""+(Ve||"Unknown XMLHttpRequest Error"))),Ve.statusCode=0,v(Ve,he)}function T(){if(!y){var Ve;clearTimeout(V),Ve=d.useXDR&&O.status===void 0?200:O.status===1223?204:O.status;var le=he,ie=null;return Ve!==0?(le={body:g(),statusCode:Ve,method:ae,headers:{},url:Ce,rawRequest:O},O.getAllResponseHeaders&&(le.headers=i(O.getAllResponseHeaders()))):ie=new Error("Internal XMLHttpRequest Error"),v(ie,le,le.body)}}var _,y,O=d.xhr||null;O||(O=d.cors||d.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var V,Ce=O.url=d.uri||d.url,ae=O.method=d.method||"GET",Fe=d.body||d.data,_e=O.headers=d.headers||{},de=!!d.sync,oe=!1,he={body:void 0,headers:{},statusCode:0,method:ae,url:Ce,rawRequest:O};if("json"in d&&d.json!==!1&&(oe=!0,_e.accept||_e.Accept||(_e.Accept="application/json"),ae!=="GET"&&ae!=="HEAD"&&(_e["content-type"]||_e["Content-Type"]||(_e["Content-Type"]="application/json"),Fe=JSON.stringify(d.json===!0?Fe:d.json))),O.onreadystatechange=function(){O.readyState===4&&setTimeout(T,0)},O.onload=T,O.onerror=b,O.onprogress=function(){},O.onabort=function(){y=!0},O.ontimeout=b,O.open(ae,Ce,!de,d.username,d.password),de||(O.withCredentials=!!d.withCredentials),!de&&d.timeout>0&&(V=setTimeout(function(){if(!y){y=!0,O.abort("timeout");var Ve=new Error("XMLHttpRequest timeout");Ve.code="ETIMEDOUT",b(Ve)}},d.timeout)),O.setRequestHeader)for(_ in _e)_e.hasOwnProperty(_)&&O.setRequestHeader(_,_e[_]);else if(d.headers&&!function(Ve){for(var le in Ve)if(Ve.hasOwnProperty(le))return!1;return!0}(d.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in d&&(O.responseType=d.responseType),"beforeSend"in d&&typeof d.beforeSend=="function"&&d.beforeSend(O),O.send(Fe||null),O}t.exports=u,t.exports.default=u,u.XMLHttpRequest=n.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:n.XDomainRequest,function(d,m){for(var v=0;v<d.length;v++)m(d[v])}(["get","put","post","patch","head","delete"],function(d){u[d==="delete"?"del":d]=function(m,v,g){return(v=s(m,v,g)).method=d.toUpperCase(),c(v)}})},function(t,r,e){(function(n){var o;o=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},t.exports=o}).call(this,e(56))},function(t,r){t.exports=function(n){if(!n)return!1;var o=e.call(n);return o==="[object Function]"||typeof n=="function"&&o!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var e=Object.prototype.toString},function(t,r){var e=function(n){return n.replace(/^\s+|\s+$/g,"")};t.exports=function(n){if(!n)return{};for(var o,i={},a=e(n).split(`
`),s=0;s<a.length;s++){var u=a[s],c=u.indexOf(":"),d=e(u.slice(0,c)).toLowerCase(),m=e(u.slice(c+1));i[d]===void 0?i[d]=m:(o=i[d],Object.prototype.toString.call(o)==="[object Array]"?i[d].push(m):i[d]=[i[d],m])}return i}},function(t,r){t.exports=function(){for(var n={},o=0;o<arguments.length;o++){var i=arguments[o];for(var a in i)e.call(i,a)&&(n[a]=i[a])}return n};var e=Object.prototype.hasOwnProperty},function(t,r,e){var n=e(26),o=e(123),i=e(7),a=e(10);function s(u){var c=this,d=u.url||null;c.level={debug:0,log:1,info:2,warn:3,error:4}[u.level]||0,c.logCache=[],c.logNum=1,c.timeInterval=5e3,window.onerror=function(m,v,g,b,T){c.error(T)},o(function(){c.logCache.length>0&&d&&c.postLogs(d,c.logCache)},c.timeInterval)}s.prototype.debug=function(){var u;this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,i(u=["[degbug]"]).call(u,arguments)))},s.prototype.log=function(){var u;this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,i(u=["[log]"]).call(u,arguments)))},s.prototype.info=function(){var u;this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,i(u=["[info]"]).call(u,arguments)))},s.prototype.warn=function(){var u;this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,i(u=["[warn]"]).call(u,arguments)))},s.prototype.error=function(){var u;this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,i(u=["[error]"]).call(u,arguments)))},s.prototype.cacheLogs=function(u,c){for(var d=[],m=0;m<c.length;m++){var v=c[m];n(v)==="object"?d.push(a(v)):d.push(v)}var g=this.logNum+++" "+u+" "+d.join("; ");this.logCache.push(g.replace("%c",""))},s.prototype.postLogs=function(u,c){var d=this,m=new XMLHttpRequest;m.onreadystatechange=function(){m.readyState===4&&(m.status===200?(console.info("LoggerPlugin::日志上报完成"),d.logCache=[],d.timeInterval=5e3):d.timeInterval+=5e3)},m.open("POST",u),m.setRequestHeader("Content-Type","plain/text;charset=utf-8"),m.timeout=360,m.send(c.join(`
`))},t.exports=s},function(t,r,e){var n=e(3),o=e(44);t.exports=function(i){var a,s,u,c;i.db&&(o.db=i.db),i.rnfs&&(o.rnfs=i.rnfs,o.rnfs.size||(o.rnfs.size=1048576),o.rnfs.nimPromise=(a=o.rnfs,s=a.size/2-256,c=0,u=o.rnfs.DocumentDirectoryPath+"/nimlog_"+c+".log",a.exists(u).then(function(d){return d?a.stat(u):n.reject(0)}).then(function(d){return d&&d.size>s?n.reject(1):n.reject(0)}).catch(function(d){return typeof d=="number"&&(a.nimIndex=d),n.resolve()})))}},function(t,r,e){var n=e(52),o=e(0),i=o.notundef,a=o.undef;function s(u){i(u.name)&&(this.name=""+u.name),i(u.announcement)&&(this.announcement=""+u.announcement),i(u.broadcastUrl)&&(this.broadcastUrl=""+u.broadcastUrl),i(u.custom)&&(this.custom=""+u.custom),i(u.queuelevel)&&(this.queuelevel=n(u.queuelevel))}s.reverse=function(u){var c=o.copy(u);return a(c.announcement)&&(c.announcement=""),a(c.broadcastUrl)&&(c.broadcastUrl=""),a(c.custom)&&(c.custom=""),i(c.createTime)&&(c.createTime=+c.createTime),i(c.updateTime)&&(c.updateTime=+c.updateTime),i(c.onlineMemberNum)&&(c.onlineMemberNum=+c.onlineMemberNum),i(c.mute)&&(c.mute=c.mute==="1"),c},t.exports=s},function(t,r,e){var n,o,i;t.exports=(i=e(89),o=(n=i).lib.WordArray,n.enc.Base64={stringify:function(a){var s=a.words,u=a.sigBytes,c=this._map;a.clamp();for(var d=[],m=0;m<u;m+=3)for(var v=(s[m>>>2]>>>24-m%4*8&255)<<16|(s[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|s[m+2>>>2]>>>24-(m+2)%4*8&255,g=0;g<4&&m+.75*g<u;g++)d.push(c.charAt(v>>>6*(3-g)&63));var b=c.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(a){var s=a.length,u=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var d=0;d<u.length;d++)c[u.charCodeAt(d)]=d}var m=u.charAt(64);if(m){var v=a.indexOf(m);v!==-1&&(s=v)}return function(g,b,T){for(var _=[],y=0,O=0;O<b;O++)if(O%4){var V=T[g.charCodeAt(O-1)]<<O%4*2,Ce=T[g.charCodeAt(O)]>>>6-O%4*2,ae=V|Ce;_[y>>>2]|=ae<<24-y%4*8,y++}return o.create(_,y)}(a,s,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)},function(t,r,e){var n,o,i,a,s,u,c,d;t.exports=(d=e(89),e(888),e(889),o=(n=d).lib,i=o.Base,a=o.WordArray,s=n.algo,u=s.MD5,c=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:u,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var g,b=this.cfg,T=b.hasher.create(),_=a.create(),y=_.words,O=b.keySize,V=b.iterations;y.length<O;){g&&T.update(g),g=T.update(m).finalize(v),T.reset();for(var Ce=1;Ce<V;Ce++)g=T.finalize(g),T.reset();_.concat(g)}return _.sigBytes=4*O,_}}),n.EvpKDF=function(m,v,g){return c.create(g).compute(m,v)},d.EvpKDF)},function(t,r,e){e(298);var n=e(39);e(310)(n),t.exports=n},function(t,r,e){var n=e(52),o=e(3),i=e(15),a=e(10),s=e(2),u=e(7),c=e(305),d=e(8),m=e(17),v=e(74),g=e(198),b=e(303),T=e(767),_=e(0),y=e(306),O=e(40),V=O.newSupportDBError,Ce=O.noDBError,ae=!1;function Fe(oe){ae=oe,y.set("db",oe,b)}if(Fe(!!_.getGlobal().indexedDB),v.name==="IE"&&Fe(!1),v.name==="Microsoft Edge"&&Fe(!1),v.name==="Safari")try{n(v.version.split(".")[0],10)<10&&Fe(!1)}catch{}function _e(oe){this.concurrency=0,this.pendingTasks=[],this.queue=o.resolve(),this.logger=oe.logger,this.reporter=oe.reporter,this.core=oe.core,this.account=oe.account,this.notifyError=oe.notifyError}var de=_e.prototype;de.reset=_.emptyFunc,ae&&(de.reset=function(oe){this.enable=oe!==!1}),de.addTask=function(oe){var he=this;return new o(function(Ve,le){function ie(Ie){he.concurrency--;var pe=he.pendingTasks.shift();pe&&he.addTask(pe),Ie()}if(he.concurrency<100)return he.concurrency++,oe().then(function(Ie){ie(function(){Ve(Ie),oe.resolve&&oe.resolve(Ie)})},function(Ie){ie(function(){var pe=(Ie=Ie||{}).event||Ie,kt={event:pe,callFunc:Ie.callFunc||"db::addTask"};he.logger.error("db::error event is",pe,_.get(pe,"target.error")),le(kt),oe.reject&&oe.reject(kt)})});oe.resolve||(oe.resolve=Ve,oe.reject=le),he.pendingTasks.push(oe)})},de.reportError=function(oe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ve=arguments.length>2?arguments[2]:void 0;this.reporter.reportTraceStart("exceptions",{user_id:this.account,trace_id:_.get(this.core,"socket.socket.sessionid"),action:4,exception_service:0});var le,ie=he.context||"";if(Ve)try{var Ie;le=i(Ie=a(Ve)).call(Ie,0,100),ie+=". ".concat(le)}catch{le=""}var pe=_.get(oe,"code")||_.get(oe,"target.error.code")||0,kt=_.get(oe,"message")||_.get(oe,"target.error.message")||"unknown";this.reporter.reportTraceUpdateV2("exceptions",{code:pe,description:kt,operation_type:he.operation_type,target:he.target||this.name,context:ie}),this.reporter.reportTraceEnd("exceptions",1)},de.init=function(oe){var he=this;return he.addTask(function(){return he.enable?he.server?o.resolve():(he.name="nim-"+oe,b.open({server:he.name,version:T.version,schema:T.schema}).then(function(Ve){he.logger.info("db::init: ".concat(he.name)),he.server=Ve},function(Ve){throw Fe(!1),he.server=null,he.name=null,Ve}).catch(function(Ve){throw he.reportError(Ve,{operation_type:0,context:"version ".concat(T.version),target:"nim-"+oe}),Ve})):o.reject(V({callFunc:"db::init"}))})},de.destroy=function(){var oe=this;return oe.addTask(function(){if(!oe.enable)return o.reject(V({callFunc:"db::destroy"}));if(!oe.server)return o.resolve();try{return b.remove(oe.name).then(function(){oe.logger.info("db::destroy: ".concat(oe.name)),oe.server=null,oe.name=null}).catch(function(he){throw oe.reportError(he,{operation_type:1,context:"remove database failed"}),he})}catch(he){throw oe.reportError(he,{operation_type:1,context:"remove database failed"}),he}})},de.clear=function(){var oe=this;return oe.addTask(function(){return oe.enable?oe.server?oe.server.clear("timetag").then(function(){var he=i([]).call(oe.server.getIndexedDB().objectStoreNames),Ve=[];if(s(he).call(he,function(le){Ve.push(oe.server.clear(le).catch(function(ie){throw oe.reportError(ie,{operation_type:3,context:"tableName: ".concat(le,". clear table failed")}),ie}))}),Ve.length)return o.all(Ve).then(function(){oe.logger.info("db::clear: ".concat(oe.name))}).catch(function(le){return oe.logger.error("db::clear: ",le),o.reject(le)})}):o.resolve():o.reject(V({callFunc:"db::clear"}))})},de.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},de.remove=function(oe,he,Ve,le,ie,Ie,pe){var kt=this;return kt.addTask(function(){kt.checkDB();try{return kt.server.remove(oe,he,Ve,le,ie,Ie,pe).then(function(){var Ue;kt.logger.info(u(Ue="db::delete: ".concat(oe," ")).call(Ue,he||Ve))}).catch(function(Ue){throw kt.reportError(Ue,{operation_type:3,context:"tableName: ".concat(oe,", remove failed")},{name:oe,keys:he,keyName:Ve,lowerBound:le,upperBound:ie,lowerOpen:Ie,upperOpen:pe}),kt.logger.error("db::remove::server.remove error",Ue),Ue})}catch(Ue){throw kt.reportError(Ue,{operation_type:3,context:"tableName: ".concat(oe,", remove failed")},{name:oe,keys:he,keyName:Ve,lowerBound:le,upperBound:ie,lowerOpen:Ie,upperOpen:pe}),kt.logger.error("db::remove::server.remove error",Ue),Ue}})},de.put=function(oe,he){var Ve=this;return Ve.addTask(function(){Ve.checkDB(),_.isArray(he)||(he=[he]);try{return Ve.server.update(oe,he).then(function(le){var ie=[oe],Ie=T.keyPath(oe),pe=[];return Ie&&(s(le).call(le,function(kt){pe.push(g(kt,Ie))}),ie.push(pe.length===1?pe[0]:pe)),ie.unshift("db::put:"),oe==="timetag"&&ie.push(le[0]),Ve.logger.log.apply(Ve.logger.log,ie),le}).catch(function(le){throw Ve.reportError(le,{operation_type:3,context:"tableName: ".concat(oe,". put failed")},he),le})}catch(le){throw Ve.reportError(le,{operation_type:3,context:"tableName: ".concat(oe,". put failed")},he),le}})},de.get=function(oe,he){var Ve=this;return Ve.addTask(function(){Ve.checkDB();try{return Ve.server.get(oe,he).catch(function(ie){var Ie;throw Ve.reportError(ie,{operation_type:3,context:u(Ie="tableName: ".concat(oe,". get failed with key ")).call(Ie,he)}),ie})}catch(ie){var le;throw Ve.reportError(ie,{operation_type:3,context:u(le="tableName: ".concat(oe,". get failed with key ")).call(le,he)}),ie}})},de.modifyOrPut=function(oe){var he=this,Ve=oe.table,le=_.copy(oe.obj),ie=oe.key,Ie=oe.modifyObjWhenPut,pe=_.copy(le);return delete pe[ie],he.getOne(Ve,null,le[ie],{modifyObj:pe}).then(function(kt){return kt?(pe.idClient?pe={idClient:pe.idClient,server:pe.server,pinFrom:pe.pinFrom}:(pe.lastMsg=pe.lastMsg&&pe.lastMsg.idServer+"_"+pe.lastMsg.idClient,pe.localCustom=pe.localCustom&&"***",pe.topCustom=pe.topCustom&&"***"),he.logger.log("db::modifyOrPut: update table ".concat(Ve),pe),kt):(le=_.merge(le,Ie),he.put(Ve,le).then(function(Ue){return Ue[0]}))})},de.updateAndDelete=function(oe,he,Ve){var le=this;return le.addTask(function(){le.checkDB();try{return le.server.updateAndDelete(oe,he,Ve).catch(function(ie){throw le.reportError(ie,{operation_type:3,context:"tableName: ".concat(oe,". updateAndDelete failed")},{updates:he,deletes:Ve}),ie})}catch(ie){throw le.reportError(ie,{operation_type:3,context:"tableName: ".concat(oe,". updateAndDelete failed")},{updates:he,deletes:Ve}),ie}})},de.getAll=function(oe,he){var Ve=this;return Ve.addTask(function(){Ve.checkDB(),(he=he||{}).keys=c(he)===!0,he.desc=he.desc===!0,he.distinct=he.distinct===!0;try{var le,ie,Ie;return d(le=c(ie=m(Ie=Ve.server.query(oe,he.index)).call(Ie,m(he))).call(ie,c(he)).desc(he.desc).limit(he.limit).distinct(he.distinct)).call(le,he.mapper).modify(he.modifyObj).execute().catch(function(pe){throw Ve.reportError(pe,{operation_type:3,context:"tableName: ".concat(oe,". getAll failed")},he),pe})}catch(pe){throw Ve.reportError(pe,{operation_type:3,context:"tableName: ".concat(oe,". getAll failed")},he),pe}})},de.getOnly=function(oe,he,Ve,le){var ie=this;return ie.addTask(function(){ie.checkDB(),(le=le||{}).keys=c(le)===!0,le.desc=le.desc===!0,le.distinct=le.distinct===!0,le.remove=le.remove===!0;try{var Ie,pe,kt;return d(Ie=c(pe=m(kt=ie.server.query(oe,he).only(Ve)).call(kt,m(le))).call(pe,c(le)).desc(le.desc).limit(le.limit).distinct(le.distinct)).call(Ie,le.mapper).modify(le.modifyObj).remove(le.remove).execute().catch(function(tr){var dr,pr;throw ie.reportError(tr,{operation_type:3,context:u(dr=u(pr="tableName: ".concat(oe,". getOnly failed with index: ")).call(pr,he,", matchValue: ")).call(dr,Ve)},le),tr})}catch(tr){var Ue,Dt;throw ie.reportError(tr,{operation_type:3,context:u(Ue=u(Dt="tableName: ".concat(oe,". getOnly failed with index: ")).call(Dt,he,", matchValue: ")).call(Ue,Ve)},le),tr}})},de.getOne=function(){var oe=this;return oe.getOnly.apply(oe,arguments).then(function(he){return he[0]})},de.clearTable=function(oe){var he=this;return he.addTask(function(){he.checkDB();try{return he.server.clear(oe).catch(function(Ve){throw he.reportError(Ve,{operation_type:3,context:"tableName: ".concat(oe,". clearTable failed")},options),Ve})}catch(Ve){throw he.reportError(Ve,{operation_type:3,context:"tableName: ".concat(oe,". clearTable failed")},options),Ve}})},de.checkDB=function(){if(!this.enable)throw V({callFunc:"db::checkDB"});if(!this.server)throw Ce({callFunc:"db::checkDB"})},t.exports=_e},function(t,r){var e={version:12},n={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};e.keyPath=function(o){return n[o].key.keyPath},e.schema=function(){return window._nimForceSyncIM=!0,n},t.exports=e},function(t,r,e){var n=e(71).fn;n.setKey=function(o,i){return this.put("kv",{key:o,value:i})},n.getKey=function(o){return this.get("kv",o).then(function(i){return i&&i.value})},n.setDonnop=function(o){return this.setKey("donnop",o)},n.getDonnop=function(){return this.getKey("donnop")}},function(t,r,e){var n=e(6),o=e(52),i=e(71).fn;i.getTimetags=function(a){var s={};return this.getAll("timetag",{filter:a,mapper:function(u){var c;return n(c=u.name).call(c,"team-")!==-1?s[u.name]=0:s[u.name]=u.value,u}}).then(function(){return s})},i.getTeamMemberTimetags=function(){return this.getTimetags(function(a){var s;return n(s=a.name).call(s,"team-")!==-1})},i.getTimetag=function(a){return this.getOne("timetag",null,a).then(function(s){return(s=s||{value:0}).value})},i.getTeamMemberTimetag=function(){return 0},i.updateTimetag=function(a,s){var u=this,c={name:a,value:s};return this.put("timetag",c).catch(function(d){u.notifyError&&u.notifyError(d)})},i.updateMyInfoTimetag=function(a){return this.updateTimetag("myInfo",a)},i.updateRelationTimetag=function(a){return this.updateTimetag("relations",a)},i.getRelationsTimetag=function(){return this.getTimetag("relations")},i.updateFriendTimetag=function(a){return this.updateTimetag("friends",a)},i.getFriendsTimetag=function(){return this.getTimetag("friends")},i.updateFriendUserTimetag=function(a){return this.updateTimetag("friendUsers",a)},i.updateTeamTimetag=function(a){return this.updateTimetag("teams",a)},i.getTeamsTimetag=function(){return this.getTimetag("teams")},i.updateSuperTeamTimetag=function(a){return this.updateTimetag("superTeams",a)},i.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},i.updateTeamMemberTimetag=function(a,s){return this.updateTimetag("team-"+a,s)},i.getTeamMembersTimetag=function(a){return this.getTimetag("team-"+a)},i.updateSuperTeamMemberTimetag=function(a,s){return this.updateTimetag("superTeam-"+a,s)},i.getSuperTeamMembersTimetag=function(a){return this.getTimetag("superTeam-"+a)},i.updateMyTeamMembersTimetag=function(a){return this.updateTimetag("myTeamMembers",a)},i.updateMySuperTeamMembersTimetag=function(a){return this.updateTimetag("myInfoInSuperTeams",a)},i.getBroadcastMsgTimetag=function(){return this.getTimetag("broadcastMsg")},i.updateBroadcastMsgTimetag=function(a){return this.updateTimetag("broadcastMsg",o(a))},i.updateRoamingMsgTimetag=function(a){return this.updateTimetag("roamingMsgs",a)},i.updateSuperTeamRoamingMsgTimetag=function(a){return this.updateTimetag("superTeamRoamingMsgs",a)},i.updateMsgReceiptsTimetag=function(a){return this.updateTimetag("msgReceipts",a)},i.updateDonnopTimetag=function(a){return this.updateTimetag("donnop",a)},i.updateSessionAck=function(a){return this.updateTimetag("sessionAck",a)},i.updateDeleteMsgSelf=function(a){return this.updateTimetag("deleteMsgSelf",a)},i.updateSuperTeamSessionAck=function(a){return this.updateTimetag("superTeamSessionAck",a)},i.deleteTimetag=function(a){return this.remove("timetag",a)},i.deleteTeamMemberTimetag=function(a){return this.deleteTimetag("team-"+a)},i.deleteSuperTeamMemberTimetag=function(a){return this.deleteTimetag("superTeam-"+a)}},function(t,r,e){var n=e(3),o=e(71).fn,i=e(0);o.mergeRelations=function(a,s,u,c,d){var m=this,v=m.updateAndDelete("blacklist",a,s),g=m.updateAndDelete("mutelist",u,c);return n.all([v,g]).then(function(){return m.logger.info("db::mergeRelations: timetag ".concat(d)),m.updateRelationTimetag(d),[a,s,u,c,d]})},o.getRelations=function(){var a=this.getAll("blacklist"),s=this.getAll("mutelist");return n.all([a,s])},o.markInBlacklist=function(a){if((a=i.copy(a)).isAdd){var s=a.record;return this.put("blacklist",s)}var u=a.account;return this.remove("blacklist",u)},o.markInMutelist=function(a){if((a=i.copy(a)).isAdd){var s=a.record;return this.put("mutelist",s)}var u=a.account;return this.remove("mutelist",u)}},function(t,r,e){var n=e(8),o=e(3),i=e(71).fn,a=e(0);i.mergeFriends=function(s,u,c){var d=this;return d.updateAndDelete("friend",s,u).then(function(){return d.logger.log("db::mergeFriends: updateAndDelete done",s&&n(s).call(s,function(m){return m.account}).join(",")),c&&d.updateFriendTimetag(c),[s,u,c]})},i.putFriend=function(s){return this.put("friend",s)},i.updateFriend=function(s){var u=this,c=(s=a.copy(s)).account;return this.getOne("friend",null,c,{modifyObj:s}).then(function(d){return d?u.logger.log("db::updateFriend: ".concat(c)):u.logger.warn("db::updateFriend: no record ".concat(c)),d})},i.deleteFriend=function(s){var u=this.remove("friend",s),c=this.deleteUser(s);return o.all([u,c])},i.getFriends=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=function(c){return s.updateTime!==void 0?c.valid&&c.updateTime>s.updateTime:c.valid};return this.getAll("friend",{filter:u})},i.getFriend=function(s){return this.getOne("friend",null,s)},i.getUserFromBlackList=function(s){return this.getOne("blacklist",null,s)}},function(t,r,e){var n=e(3),o=e(2),i=e(7),a=e(8),s=e(71).fn,u=e(0),c=e(40),d=e(192),m=e(150);function v(T){return T.valid&&T.validToCurrentUser}function g(T){return T&&T.valid}function b(T){return T&&u.fillUndef(T,{mute:!1,custom:""}),T}s.mergeTeams=function(T,_,y){var O=this,V=O.put("team",T),Ce=O.leaveTeams(_,y);return n.all([V,Ce]).then(function(){return O.logger.log("db::mergeTeams:"),O.updateTeamTimetag(y),[T,_,y]})},s.putTeam=function(T){if(T)return u.isArray(T)||(T=[T]),o(T).call(T,function(_){_.validToCurrentUser=!0}),this.put("team",T)},s.updateTeam=function(T){var _=this,y=(T=u.copy(T)).teamId;return _.getOne("team",null,y,{modifyObj:T}).then(function(O){if(O)_.logger.log("db::updateTeam: ".concat(y));else if(_.logger.warn("db::updateTeam: no record ".concat(y)),T.validToCurrentUser)return _.putTeam(T);return O})},s.transferTeam=function(T,_,y){var O=this,V=T.teamId,Ce=T.memberUpdateTime,ae={teamId:V,account:_,type:"normal",updateTime:Ce},Fe={teamId:V,account:y,type:"owner",updateTime:Ce};return O.updateTeamMembers([ae,Fe]).then(function(){return O.putTeam(T).then(function(){var _e,de;return O.logger.info(i(_e=i(de="db::transferTeam: ".concat(T.teamId," ")).call(de,_," -> ")).call(_e,y)),[T,_,y]})})},s.leaveTeam=function(T){var _=this;return _.updateTeam({teamId:T,validToCurrentUser:!1}).then(function(){return _.removeAllTeamMembers(T)})},s.dismissTeam=function(T,_){var y=this,O={teamId:T,valid:!1,validToCurrentUser:!1,updateTime:_};return y.updateTeam(O).then(function(){return y.removeAllTeamMembers(T)})},s.leaveTeams=function(T,_){var y,O=this,V=[];return o(T).call(T,function(Ce){y=O.leaveTeam(Ce.teamId,_),V.push(y)}),n.all(V)},s.getTeamsByTeamIds=function(T){var _,y=this,O=[];return o(T).call(T,function(V){_=y.getTeam(V),O.push(_)}),n.all(O)},s.getTeam=function(T){T=""+T;var _=this;return _.getOne("team",null,T).then(function(y){return y?(_.updateTeamProperties([y]),y):null})},s.getTeams=function(){var T=this;return T.getAll("team",{filter:v}).then(function(_){return T.updateTeamProperties(_),_})},s.updateTeamProperties=function(T){o(T).call(T,function(_){_&&d.fillProperties(_)})},s.mergeTeamMembers=function(T,_,y,O){var V=this,Ce=V.putTeamMembers(_),ae=V.updateTeamMembers(y);return n.all([Ce,ae]).then(function(){return V.logger.log("db::mergeTeamMembers: ".concat(T)),V.updateTeamMemberTimetag(T,O)})},s.putTeamMembers=function(T){return this.put("teamMember",T)},s.getTeamMembersByAccount=function(T){return this.getOnly("teamMember","account",T,{filter:g,mapper:b}).then()},s.getTeamMembers=function(T){var _=this;return T=""+T,_.getOnly("teamMember","teamId",T,{filter:function(y){return y.valid},mapper:b}).then(function(y){return _.updateTeamMemberProperties(y).then(function(){return y})})},s.updateTeamMemberProperties=function(T){var _,y=this,O=[];return o(T).call(T,function(V){m.fillProperties(V)&&(_=y.updateTeamMember(V),O.push(_))}),n.all(O)},s.getInvalidTeamMembers=function(T,_){var y=this;T=""+T;var O,V=[];return o(_).call(_,function(Ce){O=y.getOne("teamMember",null,m.genId(T,Ce)).then(function(ae){return b(ae)}),V.push(O)}),n.all(V)},s.updateTeamMember=function(T){var _=this,y=T.teamId,O=T.account,V=m.genId(y,O),Ce=u.filterObj(T,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("teamMember",null,V,{modifyObj:Ce,mapper:b}).then(function(ae){var Fe,_e;return ae?_.logger.log(i(Fe="db::updateTeamMember: ".concat(y," ")).call(Fe,O),u.pickAsString(Ce,["muteTeam","mute","updateTime","type","valid"])):_.logger.warn(i(_e="db::updateTeam: no record ".concat(y," ")).call(_e,O)),ae})},s.updateTeamMembers=function(T){var _=this;if(!T.length)return n.resolve();var y,O=[];return o(T).call(T,function(V){y=_.updateTeamMember(V),O.push(y)}),n.all(O)},s.updateTeamManagers=function(T,_,y,O){var V=a(_).call(_,function(Ce){return{teamId:T,account:Ce,type:y?"manager":"normal",updateTime:O}});return this.updateTeamMembers(V)},s.removeTeamMembersByAccounts=function(T,_){var y=a(_).call(_,function(O){return{teamId:T,account:O,valid:!1}});return this.updateTeamMembers(y)},s.removeAllTeamMembers=function(T){var _=this;return _.getOnly("teamMember","teamId",T,{modifyObj:{valid:!1}}).then(function(){return _.logger.warn("db::removeAllTeamMembers: ".concat(T)),_.deleteTeamMemberTimetag(T)})},s.deleteTeamMembers=function(T){var _=this;return _.getOnly("teamMember","teamId",T,{remove:!0}).then(function(){_.logger.warn("db::deleteTeamMembers: ".concat(T)),_.deleteTeamMemberTimetag(T)})},s.deleteTeam=function(T){var _,y=this,O=[];return u.isArray(T)||(T=[T]),o(T).call(T,function(V){V=""+V,_=y.get("team",V).then(function(Ce){if(Ce&&v(Ce))throw c.stillInTeamError({callFunc:"team::deleteTeam",team:Ce});var ae=y.remove("team",V),Fe=y.deleteTeamMembers(V);return n.all([ae,Fe])}),O.push(_)}),O.length===1?O[0]:n.all(O)}},function(t,r,e){var n=e(3),o=e(2),i=e(9),a=e(7),s=e(8),u=e(71).fn,c=e(0),d=e(40),m=e(307),v=e(202);function g(_){return _.valid&&_.validToCurrentUser}function b(_){return _&&_.valid}function T(_){return _&&c.fillUndef(_,{mute:!1,custom:""}),_}u.mergeSuperTeams=function(_,y,O){var V=this,Ce=V.put("superTeam",_),ae=V.leaveTeams(y,O);return n.all([Ce,ae]).then(function(){return V.logger.log("db::mergeSuperTeams:"),V.updateSuperTeamTimetag(O),[_,y,O]})},u.putSuperTeam=function(_){if(_)return c.isArray(_)||(_=[_]),o(_).call(_,function(y){y.validToCurrentUser=!0}),this.put("superTeam",_)},u.updateSuperTeam=function(_){var y=this,O=(_=c.copy(_)).teamId;return y.getOne("superTeam",null,O,{modifyObj:_}).then(function(V){return V?(y.logger.info("db::updateSuperTeam: ".concat(O)),V):(y.logger.warn("db::updateSuperTeam: no record ".concat(O)),y.putSuperTeam(_))})},u.leaveSuperTeam=function(_){var y=this;return y.updateSuperTeam({teamId:_,validToCurrentUser:!1}).then(function(){return y.removeAllSuperTeamMembers(_)})},u.dismissSuperTeam=function(_,y){var O=this,V={teamId:_,valid:!1,validToCurrentUser:!1,updateTime:y};return O.updateSuperTeam(V).then(function(){return O.removeAllSuperTeamMembers(_)})},u.leaveSuperTeams=function(_,y){var O,V=this,Ce=[];return o(_).call(_,function(ae){O=V.leaveSuperTeam(ae.teamId,y),Ce.push(O)}),n.all(Ce)},u.getSuperTeamsByTeamIds=function(_){var y,O=this,V=[];return o(_).call(_,function(Ce){y=O.getSuperTeam(Ce),V.push(y)}),n.all(V)},u.getSuperTeam=function(_){_=""+_;var y=this;return y.getOne("superTeam",null,_).then(function(O){return O?(y.updateSuperTeamProperties([O]),O):null})},u.getSuperTeams=function(){var _=this;return _.getAll("superTeam",{filter:g}).then(function(y){return _.updateSuperTeamProperties(y),y})},u.updateSuperTeamProperties=function(_){o(_).call(_,function(y){y&&m.fillProperties(y)})},u.mergeSuperTeamMembers=function(_,y,O,V){var Ce=this,ae=Ce.putSuperTeamMembers(y),Fe=Ce.updateSuperTeamMembers(O);return n.all([ae,Fe]).then(function(){return Ce.logger.log("db::mergeSuperTeamMembers: ".concat(_)),V!=null?Ce.updateSuperTeamMemberTimetag(_,V):n.resolve()})},u.putSuperTeamMembers=function(_){return this.put("superTeamMember",_)},u.getSuperTeamMemberById=function(_){return this.get("superTeamMember",_)},u.getSuperTeamMembers=function(_,y){var O=this;_=""+_;var V={filter:function(Ce){return Ce.valid},mapper:T};if(y){if(typeof y.joinTime!="number")return void O.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",y.joinTime);y.limit&&(V.limit=y.limit),i(y)?V.filter=function(Ce){return Ce.valid&&Ce.joinTime<=y.joinTime}:V.filter=function(Ce){return Ce.valid&&Ce.joinTime>=y.joinTime}}return O.getOnly("superTeamMember","teamId",_,V).then(function(Ce){return O.updateSuperTeamMemberProperties(Ce).then(function(){return Ce})})},u.getSuperTeamMembersByAccount=function(_){return this.getOnly("superTeamMember","account",_,{filter:b,mapper:T}).then()},u.updateSuperTeamMemberProperties=function(_){var y,O=this,V=[];return o(_).call(_,function(Ce){v.fillProperties(Ce)&&(y=O.updateSuperTeamMember(Ce),V.push(y))}),n.all(V)},u.getInvalidSuperTeamMembers=function(_,y){var O=this;_=""+_;var V,Ce=[];return o(y).call(y,function(ae){V=O.getOne("superTeamMember","id",v.genId(_,ae)).then(function(Fe){return T(Fe)}),Ce.push(V)}),n.all(Ce)},u.updateSuperTeamMember=function(_){var y=this,O=_.teamId,V=_.account,Ce=v.genId(O,V),ae=c.filterObj(_,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("superTeamMember","id",Ce,{modifyObj:ae,mapper:T}).then(function(Fe){var _e,de;return Fe?y.logger.log(a(_e="db::updateSuperTeamMember: ".concat(O," ")).call(_e,V),c.pickAsString(ae,["muteTeam","mute","updateTime","type","valid"])):y.logger.warn(a(de="db::updateSuperTeam: no record ".concat(O," ")).call(de,V)),Fe})},u.updateSuperTeamMembers=function(_){var y=this;if(!_.length)return n.resolve();var O,V=[];return o(_).call(_,function(Ce){O=y.updateSuperTeamMember(Ce),V.push(O)}),n.all(V)},u.removeSuperTeamMembersByAccounts=function(_,y){var O=s(y).call(y,function(V){return{teamId:_,account:V,valid:!1}});return this.updateSuperTeamMembers(O)},u.removeAllSuperTeamMembers=function(_){var y=this;return y.getOnly("superTeamMember","teamId",_,{modifyObj:{valid:!1}}).then(function(){return y.logger.warn("db::removeAllSuperTeamMembers: ".concat(_)),y.deleteSuperTeamMemberTimetag(_)})},u.deleteSuperTeamMembers=function(_){var y=this;return y.getOnly("superTeamMember","teamId",_,{remove:!0}).then(function(){y.logger.warn("db::deleteSuperTeamMembers: ".concat(_)),y.deleteSuperTeamMemberTimetag(_)})},u.deleteSuperTeam=function(_){var y,O=this,V=[];return c.isArray(_)||(_=[_]),o(_).call(_,function(Ce){Ce=""+Ce,y=O.get("superTeam",Ce).then(function(ae){if(ae&&g(ae))throw d.stillInTeamError({callFunc:"team::deleteTeam",team:ae});var Fe=O.remove("superTeam",Ce),_e=O.deleteSuperTeamMembers(Ce);return n.all([Fe,_e])}),V.push(y)}),V.length===1?V[0]:n.all(V)},u.transferSuperTeam=function(_,y,O){var V=this;return V.updateSuperTeamMembers([y,O]).then(function(){return V.putSuperTeam(_).then(function(){var Ce,ae;return V.logger.info(a(Ce=a(ae="db::transferSuperTeam: ".concat(_.teamId," ")).call(ae,y.account," -> ")).call(Ce,O.account)),[_,y,O]})})}},function(t,r,e){var n=e(2),o=e(3),i=e(6),a=e(71).fn,s=e(0);a.mergeMyInfo=function(u,c){var d=this;return d.put("user",u).then(function(){return c?d.updateMyInfoTimetag(u.updateTime):u})},a.mergeFriendUsers=function(u,c){var d=this;return d.putUsers(u).then(function(){d.updateFriendUserTimetag(c)})},a.putUsers=function(u){return this.put("user",u)},a.putUser=function(u){return this.put("user",u)},a.updateUser=function(u){var c=this,d=(u=s.copy(u)).account;return this.getOne("user",null,d,{modifyObj:u}).then(function(m){return m?c.logger.log("db::updateUser: ".concat(d)):c.logger.warn("db::updateUser: no record ".concat(d)),m})},a.putUsersIfIsFriend=function(u){var c,d=this,m=[],v=[];return n(u).call(u,function(g){c=d.getFriend(g.account).then(function(b){return b&&(c=d.putUser(g),v.push(c)),b}),m.push(c)}),o.all(m).then(function(){return o.all(v).then(function(g){return g})})},a.deleteUser=function(u){return this.remove("user",u)},a.getUser=function(u){return this.getOne("user",null,u)},a.getUsers=function(u){return this.getAll("user",{filter:function(c){return i(u).call(u,c.account)!==-1}})},a.getAllUsers=function(){return this.getAll("user")}},function(t,r,e){var n=e(17),o=e(3),i=e(7),a=e(2),s=e(41),u=e(32),c=e(6),d=e(8),m=e(71).fn,v=e(0),g=e(13);m.putMsg=function(b){var T=this;return v.isArray(b)||(b=[b]),!b.length||n(b[0])?o.resolve():(b=n(b).call(b,function(_){return!_.ignore}),T.put("msg1",b).catch(function(_){return T.notifyError&&T.notifyError(_),o.resolve(b,_)}))},m.putMsgReadDetail=function(b){var T=this;if(b.idClient)return this.put("msgReadDetail",b).catch(function(_){T.logger.error("putMsgReadDetail error",_)})},m.getMsgReadDetail=function(b){return this.getOne("msgReadDetail",null,b)},m.updateMsg=function(b){var T=this;if(!n(b)){var _=b.idClient,y=v.filterObj(b,"resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");return T.getOne("msg1",null,_,{modifyObj:y}).then(function(O){var V,Ce,ae;return O?T.logger.info(i(V=i(Ce=i(ae="db::updateMsg: ".concat(_,"，idServer: ")).call(ae,y.idServer,"，status: ")).call(Ce,y.status,"，time: ")).call(V,y.time)):T.logger.warn("db::updateMsg: no record ".concat(_)),O}).catch(function(O){return T.notifyError&&T.notifyError(O),o.resolve(b)})}},m.updateMsgBatch=function(b){var T=this;if(g.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var _=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");a(b).call(b,function(y){if(y.idClient){var O=_.get(y.idClient);O.onerror=function(V){T.logger.error("updateMsgBatch::store.get:error",V)},O.onsuccess=function(){var V=O.result||y;_.put(s({},V,y)).onerror=function(Ce){T.logger.error("updateMsgBatch::store.put:error",Ce)}}}})}},m.getMsgs=function(b){return g.isBrowser?this.getMsgsIndexedDB(b):g.isRN?this.getMsgsRN(b):o.resolve()},m.getMsgsRN=function(b){var T={};return typeof b.start=="number"&&(T.lowerBound=["time",b.start]),typeof b.end=="number"&&b.end!==1/0&&(T.upperBound=["time",b.end]),T.desc=!1,T.index="time",typeof b.desc=="boolean"&&(T.desc=b.desc),typeof b.limit=="number"&&(T.limit=b.limit),T.searchIndex=[],b.sessionId&&T.searchIndex.push(["sessionId",b.sessionId]),typeof b.type=="string"&&T.searchIndex.push(["type",b.type]),this.getAll("msg1",T)},m.getMsgsIndexedDB=function(b){var T,_=this;_.checkDB();var y="time",O=!1,V=!1,Ce=(b=b||{}).sessionId||[],ae=b.sessionIds||[];v.isString(Ce)?Ce=[Ce]:u(Ce)||(Ce=[]),v.isString(ae)?ae=[ae]:u(ae)||(ae=[]);var Fe=i(Ce).call(Ce,ae);Fe.length===1?(O=!0,y="sessionTime",Ce=Fe[0]):Fe.length>1&&(O=!0,V=!0,ae=Fe);var _e=b.start||0,de=b.end||1/0,oe=_e,he=de;O&&!V&&(oe=[Ce,_e],he=[Ce,de]);var Ve=b.desc!==!1,le=b.limit||100,ie=!1,Ie=!1,pe=b.type||[],kt=b.types||[];v.isString(pe)?pe=[pe]:u(pe)||(pe=[]),v.isString(kt)?kt=[kt]:u(kt)||(kt=[]);var Ue=i(pe).call(pe,kt);Ue.length===1?(ie=!0,pe=Ue[0]):Ue.length>1&&(ie=!0,Ie=!0,kt=Ue);var Dt,tr=b.subTypes&&b.subTypes.length,dr=b.keyword||"",pr=b.filterFunc;return(V||ie||dr||tr||v.isFunction(pr))&&(Dt=function(ar){var hr;if(V&&c(ae).call(ae,ar.sessionId)===-1)return!1;if(ie){if(Ie){if(c(kt).call(kt,ar.type)===-1)return!1}else if(pe!==ar.type)return!1}if(tr&&c(hr=b.subTypes).call(hr,ar.subType)===-1)return!1;if(dr){var Ne=ar.text||ar.tip||"";if(c(Ne).call(Ne,dr)===-1)return!1}return!pr||pr(ar)}),n(T=_.server.query("msg1",y).bound(oe,he,!0,!0).desc(Ve).limit(le)).call(T,Dt).execute().catch(function(ar){throw _.reportError(ar,{operation_type:3,context:"tableName: ".concat("msg1",", index ").concat(y,", getMsgsIndexedDB error")},b),ar})},m.getMsgCountAfterAck=function(b){return g.isBrowser?this.getMsgCountAfterAckIndexedDB(b):g.isRN?this.getMsgCountAfterAckRN(b):o.resolve()},m.getMsgCountAfterAckRN=function(b){var T=this,_=b=b||{},y=_.sessionId,O=_.ack;return T.checkDB(),T.getAll("msg1",{searchIndex:["sessionId",y],lowerBound:["time",O]}).then(function(V){var Ce=n(V).call(V,function(ae){if(ae.flow==="out"||ae.isUnreadable===!1)return!1;if(ae.type==="notification")try{return b.shouldCountNotifyUnread(ae)}catch(Fe){throw T.logger.error("userOption:shouldCountNotifyUnread function error",Fe),Fe}return!0});return o.resolve(Ce.length)})},m.getMsgCountAfterAckIndexedDB=function(b){var T=this,_=(b=b||{}).sessionId;return T.checkDB(),T.server.query("msg1","sessionTime").bound([_,b.ack],[_,1/0],!0,!0).execute().then(function(y){var O=n(y).call(y,function(V){if(V.flow==="out"||V.isUnreadable===!1)return!1;if(V.type==="notification")try{return b.shouldCountNotifyUnread(V)}catch(Ce){throw T.logger.error("userOption:shouldCountNotifyUnread function error",Ce),Ce}return!0});return o.resolve(O.length)}).catch(function(y){throw T.reportError(y,{operation_type:3,context:"tableName: ".concat("msg1",", IndexSessionTime ").concat("sessionTime",", getMsgCountAfterAckIndexedDB error")},b),y})},m.amendMsg=function(b){return b?(v.notexist(b.text)&&(b.text=""),b):null},m.getMsgByIdClient=function(b){var T=this;return T.getOne("msg1",null,b).then(function(_){return T.amendMsg(_)})},m.getMsgsByIdClients=function(b){var T,_=this,y=[];return a(b).call(b,function(O){T=_.getMsgByIdClient(O),y.push(T)}),o.all(y)},m.clearSendingMsgs=function(){var b=this;return b.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then(function(T){b.logger.info("db::clearSendingMsgs: msgs send failed",T&&d(T).call(T,function(_){return _.idClient}).join(","))})},m.deleteMsg=function(b){var T,_=this,y=[];return v.isArray(b)||(b=[b]),a(b).call(b,function(O){T=_.getOne("msg1",null,O,{remove:!0}).then(function(V){return _.logger.info("db::deleteMsg done",O,V&&V.idClient),V}).catch(function(V){throw _.logger.error("db::deleteMsg failed",O,V),V}),y.push(T)}),y.length===1?y[0]:o.all(y)},m.deleteMsgsBySessionId=function(b){var T=this,_=null,y=b.start,O=b.end;return y!==void 0&&O!==void 0?_=function(V){return V>y&&V<O}:y!==void 0?_=function(V){return V>y}:O!==void 0&&(_=function(V){return V<O}),_?T.getOnly("msg1","sessionId",b.sessionId).then(function(V){var Ce=[];return d(V=V||[]).call(V,function(ae){_(ae.time)&&Ce.push(ae.idClient)}),T.logger.info("db::deleteMsgsBySessionId: session results",Ce),T.deleteMsg(Ce)}):T.getOnly("msg1","sessionId",b.sessionId,{remove:!0})},m.deleteMsgsByTime=function(b){return this.remove("msg1",null,"time",b.start,b.end,!0,!0)},m.getDeletedMsgsCountByTime=function(b){this.checkDB();var T=this.server.getIndexedDB().transaction(["msg1"],"readonly").objectStore("msg1").index("time"),_=IDBKeyRange.bound(b.start,b.end,!0,!0),y=T.count(_);return new o(function(O,V){y.onsuccess=function(Ce){O(Ce.target.result)},y.onerror=function(Ce){this.logger.error("countDeletedMsgsByTime::index.count:error",Ce),V(Ce)}})},m.deleteAllMsgs=function(){var b=this.clearTable("msg1"),T=this.clearTable("session");return o.all([b,T])},m.getMsgPins=function(b){return this.getOnly("msgPin","sessionId",b)},m.deleteMsgPins=function(b){return this.getOnly("msgPin","sessionId",b,{remove:!0})},m.putMsgPin=function(b){var T=this;return this.modifyOrPut({table:"msgPin",obj:b,key:"idClient"}).catch(function(_){T.notifyError&&T.notifyError(_)})},m.putMsgPins=function(b){return this.put("msgPin",b)},m.deleteMsgPin=function(b){var T=this;return this.getOne("msgPin",null,b.idClient,{remove:!0}).then(function(_){return T.logger.info("db::deleteMsgPin:",_.idClient),_})}},function(t,r,e){var n=e(3),o=e(17),i=e(2),a=e(9),s=e(5),u=e(71).fn,c=e(0),d=c.notundef;u.putSysMsg=function(m){var v=this;return new n(function(g){if(c.isArray(m)||(m=[m]),!o(m[0])){var b=[],T=m.length;i(m).call(m,function(y){y=c.copy(y),v.put("sysMsg",y).then(function(O){b.push(O[0]),_()},_)})}function _(){--T===0&&g(b)}})},u.getSysMsgs=function(m){var v=!a(m=m||{}),g=m.limit||100,b=null,T=null;m.category&&(b="category",T=m.category),m.type&&(b="type",T=m.type);var _,y=m.lastIdServer,O=!1,V=m.read;return(d(y)||d(V))&&(_=function(Ce){return d(y)?(y=""+y,O?ae():(Ce.idServer===y&&(O=!0),!1)):ae();function ae(){return!d(V)||Ce.read===V}}),m={filter:_,desc:v,limit:g},b?this.getOnly("sysMsg",b,T,m):this.getAll("sysMsg",m)},u.getSysMsgByIdServer=function(m){return this.getOne("sysMsg","idServer",m)},u.updateSysMsg=function(m){var v=this;if(!o(m)){var g=""+m.idServer,b=c.filterObj(m,"read state error localCustom");return this.getOne("sysMsg","idServer",g,{modifyObj:b}).then(function(T){return T?v.logger.log("db::updateSysMsg: ".concat(g),c.pickAsString(b,["read","state","error"])):v.logger.warn("db::updateSession: ".concat(g)),T})}},u.markSysMsgRead=function(m){var v=this;return new n(function(g,b){c.isArray(m)||(m=[m]);var T,_,y=[],O=[];i(m).call(m,function(V){T=v.getSysMsgByIdServer(V.idServer).then(function(Ce){Ce&&!Ce.read&&(_=v.updateSysMsg({idServer:Ce.idServer,read:!0}),O.push(_))},b),y.push(T)}),n.all(y).then(function(){n.all(O).then(function(V){g(V)},b)},b)})},u.deleteSysMsg=function(m){var v,g=this,b=[];return c.isArray(m)||(m=[m]),i(m).call(m,function(T){T=""+T,v=g.getOne("sysMsg","idServer",T,{remove:!0}),b.push(v)}),b.length===1?b[0]:n.all(b)},u.deleteAllSysMsgs=function(){var m=this.clearTable("sysMsg"),v=this.clearTable("sysMsgUnread");return n.all([m,v])},u.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then(function(m){var v={};return i(m).call(m,function(g){v[g.type]=g.num}),v})},u.updateSysMsgUnread=function(m){var v,g=this;m=c.copy(m);var b=[];return i(v=s(m)).call(v,function(T){b.push({type:T,num:m[T]})}),this.put("sysMsgUnread",b).then(function(){return g.logger.info("db::updateSysMsgUnread: ",m),m})}},function(t,r,e){var n=e(3),o=e(2),i=e(71).fn,a=e(0);i.putBroadcastMsg=function(s){var u=this;return new n(function(c){a.isArray(s)||(s=[s]);var d=[],m=s.length;function v(){--m===0&&c(d)}o(s).call(s,function(g){g=a.copy(g),u.put("broadcastMsg",g).then(function(b){d.push(b[0]),v()},v)})})},i.getBroadcastMsgs=function(s){return s=s||{},this.getAll("broadcastMsg",s)}},function(t,r,e){var n=e(3),o=e(9),i=e(7),a=e(32),s=e(2),u=e(71).fn,c=e(0),d=c.notundef;u.putSession=function(m){var v=this,g=m.unread;return(m=c.merge({},m)).updateTime===void 0&&m.lastMsg&&m.lastMsg.time&&(m.updateTime=m.lastMsg.time),(m.lastMsg||!m.ack&&!m.msgReceiptTime)&&(m.isDeleted=!1),delete m.unread,this.modifyOrPut({table:"session",obj:m,key:"id",modifyObjWhenPut:{unread:0}}).catch(function(b){return v.notifyError&&v.notifyError(b),m.unread=g,n.resolve(m)})},u.getAllSessions=function(){return this.getAll("session",{index:"updateTime",desc:!0}).catch(function(m){self.notifyError&&self.notifyError(m)})},u.getSessions=function(m){var v=!o(m=m||{}),g=m.limit||100,b=m.lastSessionId,T=m.sessionId,_=!1,y=this,O=function(){return!0},V=function(){return!0};return d(T)?this.getSession(T,m.isDeleted):(d(b)&&(O=function(Ce){return Ce.id===b&&(_=!0),_}),m.includeDeleted||(V=function(Ce){return!Ce.isDeleted}),this.getAll("session",{index:"updateTime",desc:v,limit:g,filter:function(Ce){return O(Ce)&&V(Ce)}}).catch(function(Ce){y.notifyError&&y.notifyError(Ce)}))},u.getSession=function(m,v){var g=this;return this.get("session",m).then(function(b){return n.resolve(!v&&b&&b.isDeleted?void 0:b)}).catch(function(b){throw g.notifyError&&g.notifyError(b),b})},u.updateSession=function(m){var v=this,g=m.id,b=c.filterObj(m,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return m.lastMsg&&(b.lastMsg=m.lastMsg),this.getOne("session",null,g,{modifyObj:b}).then(function(T){if(T){var _,y=i(_="db::updateSession: ".concat(g," ")).call(_,c.pickAsString(b,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]));y+=b.lastMsg?" lastMsg.idClient:".concat(c.get(b,"lastMsg.idClient")):"",v.logger.info(y)}else v.logger.warn("db::updateSession: no record ".concat(g));return T}).catch(function(T){v.notifyError&&v.notifyError(T)})},u.getStickTopSessions=function(){var m=this;return this.getAll("session",{filter:function(v){return v&&v.isTop}}).catch(function(v){m.notifyError&&m.notifyError(v)})},u.deleteSession=function(m,v){var g=v&&v.scene||"";return g==="superTeam"?this.updateSuperTeamSessionAck(0):(g==="p2p"||g==="team"||this.updateSuperTeamSessionAck(0),this.updateSessionAck(0)),this.updateMsgReceiptsTimetag(0),this.remove("session",m)},u.deleteSessionLogic=function(m){var v=this;if(!a(m))return this.getOne("session",null,m,{modifyObj:{isDeleted:!0}});var g=[];return s(m).call(m,function(b){g.push(v.getOne("session",null,b,{modifyObj:{isDeleted:!0}}))}),n.all(g)},u.putSessionsWithMoreRoaming=function(m){return this.put("sessionsWithMoreRoaming",m)},u.updateSessionsWithMoreRoaming=function(m){var v=m.id;return delete m.id,this.getOne("sessionsWithMoreRoaming",null,v,{modifyObj:m})},u.deleteSessionsWithMoreRoaming=function(m){return this.remove("sessionsWithMoreRoaming",m)},u.getSessionsWithMoreRoaming=function(m){return m?this.get("sessionsWithMoreRoaming",m):this.getAll("sessionsWithMoreRoaming")}},function(t,r,e){var n=e(7),o=e(121),i=e(122),a=e(0).throttle,s=function(){function u(c){o(this,u),this.arr=[],this.timer=null,this.maxLength=c.maxLength||100,this.throttleTime=c.throttleTime||5e3,this.processFn=c.processFn||function(){},this.throttleFn=c.processFn||function(){},c.processFn&&(this.throttleFn=a(function(d){c.processFn(d),d.length=0},this.throttleTime,{leading:!1}))}return i(u,[{key:"add",value:function(c){var d;Object.prototype.toString.call(c)==="[object Array]"?this.arr=n(d=this.arr).call(d,c):this.arr.push(c),this.arr.length>=this.maxLength&&(this.processFn(this.arr),this.arr=[]),this.timer=this.throttleFn(this.arr)}},{key:"destroy",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer),this.processFn=function(){},this.throttleFn=function(){}}},{key:"clear",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer)}}]),u}();t.exports=s},function(t,r,e){var n=e(26),o=e(58),i=e(57),a=e(10),s=e(313),u=e(7),c=e(3),d=e(23),m=e(17),v=e(6),g=e(15),b=e(25),T=e(2),_=e(123),y=e(5),O=e(59),V=e(60),Ce=e(61),ae=e(62),Fe=e(47);function _e(Ue,Dt){var tr=y(Ue);if(O){var dr=O(Ue);Dt&&(dr=m(dr).call(dr,function(pr){return V(Ue,pr).enumerable})),tr.push.apply(tr,dr)}return tr}function de(Ue){for(var Dt=1;Dt<arguments.length;Dt++){var tr,dr,pr=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?T(tr=_e(Object(pr),!0)).call(tr,function(ar){o(Ue,ar,pr[ar])}):Ce?ae(Ue,Ce(pr)):T(dr=_e(Object(pr))).call(dr,function(ar){Fe(Ue,ar,V(pr,ar))})}return Ue}var oe=e(35).fn,he=e(0),Ve=e(13),le=e(155).V2NIMConnectStatus;function ie(Ue,Dt){var tr,dr,pr,ar,hr=this,Ne=Ve.getDefaultLinkUrl(hr.options.secure);hr.socketUrls=[Ne],hr.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Dt,code:200,net_connect:hr.checkNetworkAvailable(),succeed:!0}),hr.msgStatEnable=!!Ue.common["msg.stat.enable"],hr.msgStatEnable&&(hr.msgDelayTimer=d(b(dr=hr.doReportMsgDelay).call(dr,hr),1e4)),Ue.common&&Ue.common.link&&T(pr=Ue.common.link).call(pr,function($e){hr.socketUrls.unshift(Ve.formatSocketUrl({url:$e,secure:hr.options.secure}))}),Ue.common&&Ue.common["link.default"]&&T(ar=Ue.common["link.default"]).call(ar,function($e){var er,or;$e=Ve.formatSocketUrl({url:$e,secure:hr.options.secure}),v(er=hr.socketUrls).call(er,$e)===-1&&(hr.socketUrls=u(or=hr.socketUrls).call(or,$e))}),hr.socketUrls=m(tr=hr.socketUrls).call(tr,function($e,er,or){return v(or).call(or,$e)===er});try{Ve.uploadUrl=Ue.nosup[0]}catch{}if(Ve.chunkUploadUrl=Ue["nos-chunk"]||Ve.chunkUploadUrl||"",hr.logger.info("link::refreshSocketUrl: ".concat(Dt," ajax load , got socket urls "),hr.socketUrls),Ve.hasLocalStorage){Ue.common["lbs.backup"]&&hr.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",a(Ue.common["lbs.backup"]));var nr=he.get(Ue,"common.report.apierror.on");Ue.common.report&&localStorage.setItem("nim_lbs_fail_report_on",nr===!1?"0":"1")}if(Ue.common.socketConcurrent){var sr=Ue.common.socketConcurrent;typeof sr=="number"&&sr>=1&&sr<=3&&(hr.options.socketConcurrent=sr,hr.imsocket.setConfig({socketConcurrent:sr}))}}function Ie(Ue,Dt){if(this.statusProtector.getConnectStatus()===le.V2NIM_CONNECT_STATUS_DISCONNECTED)return c.reject(new Error("already disconnected"));if(Ue>=Dt){this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var tr=Ve.getDefaultLinkUrl(this.options.secure);return this.logger.warn("doRequestBackupLbsUrls: use default socket link",tr),this.socketUrls=[tr],c.resolve()}return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"),c.reject(new Error("lbs request failed"))}function pe(Ue,Dt){var tr=Dt.status||10001,dr=typeof Dt=="string"?Dt:Dt&&Dt.message?Dt.message:"Unknown error";this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Ue,code:tr,description:dr,net_connect:this.checkNetworkAvailable(),succeed:!1})}function kt(Ue){var Dt=this;if(!(Ue&&Ue.length>0))throw new Error("No  lbs url to try");var tr=0,dr=0,pr=!1,ar=null;Dt.logger.log("doRequestBackupLbsUrls: use lbs url in index ",tr,Ue);var hr=function(){var Ne=Ue[tr++],nr=new Date().getTime();return Dt.promiseAbortManager.add(Dt.doRequestLbs(Ne)).then(function(sr){if(ar&&clearInterval(ar),pr===!1)return ie.call(Dt,sr,Ne),pr=!0,c.resolve()}).catch(function(sr){return dr+=1,Dt.logger.warn("doRequestBackupLbsUrls: ".concat(Ne," ajax lbs error"),sr),pe.call(Dt,Ne,sr,nr),Ie.call(Dt,dr,Ue.length)})};return new c(function(Ne,nr){ar=_(function(){if(!(tr>=Ue.length))return Dt.statusProtector.getConnectStatus()===le.V2NIM_CONNECT_STATUS_DISCONNECTED?(ar&&clearInterval(ar),void nr(new Error("already disconnected"))):void hr().then(function(){ar&&clearInterval(ar),Ne()}).catch(function(){});ar&&clearInterval(ar)},2e3),hr().then(function(){ar&&clearInterval(ar),Ne()}).catch(function(){})})}oe.connect=function(){if(this.checkNetworkAvailable()===!1&&this.autoconnect)return this.logger.info("connect::skip this reconnection attempt because network is offline"),void this.reconnect();Ve.isBrowser&&this.reporter.restore(),this.createConnectTime=i(),this.reporter.reportTraceCancel("login"),this.reporter.reportTraceStart("login",{user_id:this.options.account,action:this.autoconnect?"auto_login":"manual_login"}),this.reporter.reportTraceUpdateV2("login",{code:0,description:a(de(de({},this.options),{},{account:"***",token:"***"}),function(Ue,Dt){return Ue===""||typeof Dt!="function"&&n(Dt)!=="object"?Dt:void 0}),operation_type:"conf_init",succeed:!0,target:""}),s(oe).connect.call(this)},oe.onConnect=function(){this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:this.url,code:200,net_connect:this.checkNetworkAvailable(),succeed:!0}),s(oe).onConnect.call(this)},oe.onHandshakeFailed=function(Ue,Dt){var tr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Dt,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_handshake_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(u(tr="link::onHandshakeFailed: shandshake failed, startTime: ".concat(Ue,", targetUrl: ")).call(tr,Dt))},oe.onConnectFailed=function(Ue,Dt,tr){var dr,pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:tr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_connect_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(u(dr=u(pr="link::onConnectFailed: connect failed due to ".concat(Ue,", startTime: ")).call(pr,Dt,", targetUrl: ")).call(dr,tr))},oe.onSocketError=function(Ue,Dt,tr){var dr,pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:tr,description:"ws_onerror:"+Ue,code:0,succeed:!1}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(u(dr=u(pr="link::onSocketError: due to ".concat(Ue,", startTime: ")).call(pr,Dt,", targetUrl: ")).call(dr,tr))},oe.probeIp=function(){var Ue=this,Dt=Ve.ipProbeAddr;return new c(function(tr){var dr=0,pr=-1;function ar(){++dr===2&&(dr=-1,tr(pr))}Ue.adaptersRequest(Dt.ipv4,{timeout:2e3,onerror:ar,onload:function(hr){pr++,ar()}}),Ue.adaptersRequest(Dt.ipv6,{timeout:2e3,onerror:ar,onload:function(hr){pr+=2,ar()}}),d(function(){dr||pr===-1||(dr=-1,tr(pr))},100)})},oe.refreshSocketUrl=function(){var Ue=this;return this.statusProtector.emit("auth/loginLifeCycleAddressing"),Ve.isWeixinApp?this.doRefreshSocketUrl(2):this.options.ipVersion===2?this.probeIp().then(function(Dt){return Ue.doRefreshSocketUrl(Dt)}):this.doRefreshSocketUrl(this.options.ipVersion)},oe.doRefreshSocketUrl=function(Ue){var Dt,tr,dr=this.options.lbsUrl||Ve.lbsUrl;Ue!==1&&Ue!==2&&(Ue=0),Ve.ipVersion=Ue;var pr=this.options.lbsBackupUrlsCustomer||[],ar=[];this.options.lbsBackup&&Ve.hasLocalStorage&&(ar=(ar=localStorage.getItem("nim_lbs_backup"))?JSON.parse(ar):[]);var hr=u(Dt=u(tr=[dr]).call(tr,ar)).call(Dt,pr);return hr=m(hr).call(hr,function(Ne,nr,sr){return v(sr).call(sr,Ne)===nr}),kt.call(this,hr)},oe.doRequestLbs=function(Ue){var Dt=this,tr=this.options,dr=Ve.info;Ue=Ue+he.genUrlSep(Ue)+"id="+tr.account+"&sv="+dr.sdkVersion+"&pv="+dr.protocolVersion+"&networkType="+Ve.ipVersion+"&hostEnv="+Ve.hostEnv+"&k="+tr.appKey,this.logger.info("doRequestLbs ".concat(g(Ue).call(Ue,0,-32)));var pr=this;return new c(function(ar,hr){Ve.isWeixinApp?wx.request({url:Ue,success:function(Ne){var nr=Ne&&Ne.statusCode,sr=Ne&&Ne.data;nr===200?ar(sr):hr(sr)},fail:function(Ne){hr(Ne)}}):Dt.adaptersRequest(Ue,{proxyUrl:he.url2origin(Ue)+"/lbs/res/cors/nej_proxy_frame.html",timeout:Ve.xhrTimeout,onload:function(Ne){try{var nr=JSON.parse(Ne);ar(nr)}catch(sr){pr.logger.warn("doRequestLbs parse JSON Error. request lbs failed"),hr(sr)}},onerror:function(Ne){hr(Ne)}},{exception_service:1})})},oe.disconnect=function(){var Ue=this,Dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void d(function(){s(oe).disconnect.call(Ue,Dt)},0);this.connecting?this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==le.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect"):this.logger.warn("IMProtocolFn api disconnect:: other logic entered");var tr=s(oe);tr.disconnect.call(this,Dt)},oe.notifyDisconnect=function(Ue){s(oe).notifyDisconnect.call(this,Ue)}},function(t,r,e){var n=e(102),o=e(58),i=e(103),a=e(3),s=e(10),u=e(23),c=e(25),d=e(6),m=e(2),v=e(17),g=e(5),b=e(59),T=e(60),_=e(61),y=e(62),O=e(47);function V(Ie,pe){var kt=g(Ie);if(b){var Ue=b(Ie);pe&&(Ue=v(Ue).call(Ue,function(Dt){return T(Ie,Dt).enumerable})),kt.push.apply(kt,Ue)}return kt}function Ce(Ie){for(var pe=1;pe<arguments.length;pe++){var kt,Ue,Dt=arguments[pe]!=null?arguments[pe]:{};pe%2?m(kt=V(Object(Dt),!0)).call(kt,function(tr){o(Ie,tr,Dt[tr])}):_?y(Ie,_(Dt)):m(Ue=V(Object(Dt))).call(Ue,function(tr){O(Ie,tr,T(Dt,tr))})}return Ie}var ae=e(35).fn,Fe=e(193),_e=e(13),de="NIM-AllGrayscaleConfig",oe="NIM-AllMixStorePolicy",he=e(0);function Ve(){var Ie=this;if(_e.hasLocalStorage&&localStorage.getItem(de)){var pe=null;try{pe=JSON.parse(localStorage.getItem(de))[Ie.options.appKey]}catch(kt){Ie.logger.error("appGrayConfig error",kt)}pe&&(Ie.appGrayConfig=pe.timeStamp+1e3*pe.ttl>new Date().getTime()?pe:null,Ie.appGrayConfig&&le.apply(Ie))}Ie.appGrayConfig||Ie.sendCmd("getGrayscaleConfig",{providers:""},function(kt,Ue){if(kt)Ie.logger.error("Calculate Delay time, getGrayscaleConfig error",kt);else if(Ue){var Dt=Ue;if(Dt.grayConfig=JSON.parse(Dt.grayConfig),Dt.ttl=Number(Dt.ttl),Dt.timeStamp=new Date().getTime(),Ie.appGrayConfig=Dt,_e.hasLocalStorage){var tr=localStorage.getItem(de)?JSON.parse(localStorage.getItem(de)):{};tr[Ie.options.appKey]=Dt,localStorage.setItem(de,s(tr))}le.apply(Ie)}else Ie.logger.error("Calculate Delay time, getGrayscaleConfig error",Ue)})}function le(){var Ie=this;if(_e.hasLocalStorage&&localStorage.getItem(oe)){var pe=null;try{pe=JSON.parse(localStorage.getItem(oe))[Ie.options.appKey]}catch(kt){Ie.logger.error("mixStorePolicy error",kt)}pe&&(Ie.mixStorePolicy=pe.timeStamp+1e3*pe.ttl>new Date().getTime()?pe:null,Ie.mixStorePolicy&&pe.ttl&&pe.ttl!==0&&(Ie.mixStorePolicyClock=u(c(le).call(le,Ie),1e3*pe.ttl)))}Ie.mixStorePolicy||Ie.sendCmd("getMixStorePolicy",{providers:Ie.options.providers&&Ie.options.providers.s3?[1,2]:[1]},function(kt,Ue){if(kt){Ie.logger.error("Calculate Delay time, getMixStorePolicy error",kt);try{Ue=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[Ie.options.appKey]}catch(dr){Ie.logger.error("error:","get last mixStorePolicy failed",dr)}}else if(Ue){var Dt=Ue;if(Dt.ttl=Number(Dt.ttl),Dt.providers=Dt.providers.split(","),Dt.nosPolicy=Dt.nosPolicy?JSON.parse(Dt.nosPolicy):null,Dt.s3Policy=Dt.s3Policy?JSON.parse(Dt.s3Policy):null,Dt.timeStamp=new Date().getTime(),Ie.mixStorePolicy=Dt,Dt.ttl&&Dt.ttl!==0&&(Ie.mixStorePolicyClock=u(c(le).call(le,Ie),1e3*Dt.ttl)),_e.hasLocalStorage){var tr=localStorage.getItem(oe)?JSON.parse(localStorage.getItem(oe)):{};tr[Ie.options.appKey]=Dt,localStorage.setItem(oe,s(tr))}}else Ie.logger.error("Calculate Delay time, mixStorePolicy error",Ue)})}function ie(Ie){var pe=this,kt=this;Ie.code===399?(this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"),kt.forceDisconnect(),kt.doRefreshSocketUrl(_e.ipVersion).then(function(){kt.reconnect()}).catch(function(){pe.logger.warn("pendingLoginFailed:399, refresh LBS url failed")})):Ie.code===398?(this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),kt.backoff.setMin(5e3),kt.reconnect()):(this.logger.error("pendingLoginFailed: ",Ie.code,Ie),kt.onAuthError(Ie,"link::onLogin"))}ae.assembleLogin=function(){var Ie=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(Ie):a.resolve({login:Ie})},ae.login=i(n.mark(function Ie(){var pe,kt,Ue,Dt=this;return n.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return pe=this,tr.next=3,pe.assembleLogin();case 3:if(kt=tr.sent,!(Ue=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){tr.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[Ue]){tr.next=10;break}return this.logger.warn("onConnect::repeat login",Ue),tr.abrupt("return");case 10:this.socketIds[Ue]=!0,tr.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+Ue+" appLogin is "+kt.login.appLogin),pe.sendCmd("login",Ce({},kt),function(dr,pr){if(dr){var ar=he.get(dr,"event.uploadCode")||dr&&dr.code;ar=typeof ar!="number"?408:ar;var hr=he.get(dr,"event.disconnectReason"),Ne=hr?s({disconnect_reason:hr}):dr&&dr.message||"login failed";pe.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:ar,description:Ne,net_connect:pe.checkNetworkAvailable(),succeed:!1}),pe.reporter.reportTraceEnd("login",!1),ie.call(pe,dr),pe.statusProtector.emit("auth/loginLifeCycleLoginFail",dr)}else pe.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",succeed:!0,net_connect:pe.checkNetworkAvailable(),code:200}),pe.reporter.reportTraceEnd("login",!0),pe.resetReconnectStatus(),Dt.heartbeatFail=0,Dt.hasLogin=!0,Dt.autoconnect=!0,pe.startHeartbeat(),pe.initOnlineListener(),pe.statusProtector.emit("auth/loginLifeCycleLoginSucc"),pe.afterLogin(pr)});case 16:case"end":return tr.stop()}},Ie,this)})),ae.afterLogin=function(Ie){var pe=this;this.sendCmd("getNosCdnHost",{}),(typeof he.get(this.options,"privateConf.isMixStoreEnable")=="boolean"?this.options.privateConf.isMixStoreEnable:_e.privateConf.isMixStoreEnable)&&Ve.apply(this),this.initPush instanceof Function&&this.initPush();var kt=this.db;if(kt.enable){var Ue=this.account;this.options.appendAppKeyForDBName&&(Ue+="-"+this.options.appKey),this.db.init(Ue).then(function(){pe.notifyLogin(Ie),pe.syncData()},function(Dt){pe.logger.warn("link::afterLogin: no db",Dt),kt.reset(!1),pe.notifyLogin(Ie),pe.syncData()})}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(Ie),this.syncData()},ae.getFileAuthToken=function(Ie){var pe=this,kt=pe.mixStorePolicy.nosPolicy.authPolicy.policyType;kt!==-1?d(kt).call(kt,Ie.type)<0?pe.logger.error("this type Token error not support"):Ie.type!=3||Ie.urls&&Ie.urls.length?pe.sendCmd("getBackSourceToken",{mixAuthTokenReq:Ie},function(Ue,Dt){if(Ue)return pe.logger.error("getBackSourceToken error",Ue),Ue;Ie.done&&Ie.done(Dt)}):pe.logger.error("urls is Required when type 3"):pe.logger.error("don't need token")},ae.processAuth=function(Ie){switch(Ie.cmd){case"login":Ie.error||(Ie.content=Ie.content||{},this.loginAndroidPush&&this.loginAndroidPush(Ie.content.aosPushInfo||{}),Ie.obj=Ie.content.loginRes,this.connectionId=Ie.content.loginRes.connectionId,this.onLoginPortsChange(Ie,2));break;case"kicked":return void this.onKicked(Ie);case"multiPortLogin":this.onLoginPortsChange(Ie,Ie.content.state);break;case"kick":Ie.error||(Ie.obj.deviceIds=Ie.content.deviceIds)}},ae.onLoginPortsChange=function(Ie,pe){var kt=this,Ue=Ie.content.loginPorts;if(Ue&&Ue.length){var Dt=!0;switch(pe){case 2:Dt=!0;break;case 3:Dt=!1}m(Ue).call(Ue,function(tr){tr.type=Fe.reverseType(tr.type),tr.customClientType&&(tr.customClientType=+tr.customClientType),tr.time=+tr.time,tr.online=Dt}),(Ue=v(Ue).call(Ue,function(tr){return tr.connectionId!==kt.connectionId})).length&&(kt.logger.info("link::onLoginPortsChange:",Ue),kt.options.onloginportschange(Ue))}},ae.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],ae.kickedMessages=["","不允许同一个帐号在多个地方同时登录","被服务器踢了","被其它端踢了","悄悄被踢"]},function(t,r,e){var n=e(783),o=e(3),i=e(25),a=e(7),s=e(749),u=e(41),c=e(2),d=e(5),m=e(138),v=e(17),g=e(6),b=e(8),T=e(797),_=e(69),y=e(23),O=e(32),V=e(87),Ce=e(35).fn,ae=e(0),Fe=e(40),_e=ae.undef,de=ae.objs2ids,oe=ae.objs2accounts,he=ae.teams2ids,Ve=e(152),le=ae.getGlobal(),ie=e(105).EMSyncType;Ce.beforeSync=function(){var Ie=this.db;return Ie.enable?Ie.clearSendingMsgs():o.resolve()},Ce.syncData=function(){var Ie=this,pe=Ie.db,kt=Ie.options,Ue=pe.enable;function Dt(tr){var dr;Ie.syncPromiseArray=[],Ie.syncResult={},Ie.syncTeamMembersPromiseArray=[],Ie.syncSuperTeamMembersPromiseArray=[],Ie.syncTeamMembersResult={},Ie.checkNosReqNum=0,Ie.getNosOriginUrlReqNum=0,ae.verifyBooleanWithDefault(kt,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal",!0,"","sync::syncData"),ae.verifyBooleanWithDefault(kt,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var pr={};tr=tr||{},le._nimForceSyncIM&&(Ie.logger.warn("sync::syncData: nimForceSyncIM"),delete tr.teams,le._nimForceSyncIM=!1),pr.myInfo=tr.myInfo||0,pr.deleteMsgSelf=tr.deleteMsgSelf||0,pr.offlineMsgs=0,kt.syncRelations&&(pr.relations=tr.relations||0),kt.syncFriends&&(pr.friends=tr.friends||0),kt.syncFriendUsers&&(pr.friendUsers=tr.friendUsers||0),kt.syncRobots&&(pr.robots=tr.robots||0),kt.syncTeams&&(pr.teams=tr.teams||0),kt.syncSuperTeams&&(pr.superTeams=tr.superTeams||0),kt.syncStickTopSessions&&(pr.stickTopSessions=tr.stickTopSessions||0),kt.syncSessionUnread&&(pr.sessionAck=Ue&&tr.sessionAck||0,pr.superTeamSessionAck=Ue&&tr.superTeamSessionAck||0),kt.syncRoamingMsgs&&(pr.roamingMsgs=Ue&&tr.roamingMsgs||tr.roamingMsgs||0),kt.syncSuperTeamRoamingMsgs&&(pr.superTeamRoamingMsgs=Ue&&tr.superTeamRoamingMsgs||0),kt.syncMsgReceipts&&(pr.msgReceipts=tr.msgReceipts||0),kt.syncExtraTeamInfo&&(pr.myTeamMembers=tr.myTeamMembers||0),kt.syncExtraSuperTeamInfo&&(pr.myInfoInSuperTeams=tr.myInfoInSuperTeams||0),kt.syncBroadcastMsgs&&(pr.broadcastMsgs=tr.broadcastMsg||0),pr.donnop=tr.donnop||0,pr.deleteMsg=tr.deleteMsg||0,pr.deleteSuperTeamMsg=tr.deleteSuperTeamMsg||0,pr.sessionHistoryMsgsDelete=tr.sessionHistoryMsgsDelete||0,pr.netcallMsgs=0,kt.syncFilter&&(pr.filterMsgs=0),kt.syncAvSignal&&(pr.avSignal=0);var ar=i(dr=Ie.onSyncData).call(dr,Ie);ar.isImSyncDataCb=!0,Ie.logger.info("syncData:: start sync",pr),Ie.reporterHook.emit("reporter/syncStart"),Ie.sendCmd("sync",{sync:pr,isImSyncDataObj:!0},ar)}Ie.syncing=!0,Ue?Ie.beforeSync().then(function(){return Ie.db.getTimetags()}).then(function(tr){Dt(tr)},function(){Dt()}):Dt(Ie.timetags)},Ce.onSyncData=function(Ie){Ie&&(Ie.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",Ie))},Ce.processSync=function(Ie){switch(this.logger.log("sync::processSync cmd: ".concat(Ie.cmd)),Ie.cmd){case"syncDone":if(Ie.error){var pe,kt=ae.get(Ie.error,"message"),Ue=ae.get(Ie.error,"code");this.logger.error(a(pe="sync::processSync syncDoneError errMsg: ".concat(kt,", errCode: ")).call(pe,Ue)),this.logger.error("sync::processSync disconnect because syncDone failed");var Dt=Fe.syncError({errMsg:kt,errCode:Ue});this.shouldReconnect=!1,this.markAllCallbackInvalid(Dt),this.notifyDisconnect(Dt)}else this.timetags.sync=Ie.content.timetag,this.reporterHook.emit("reporter/syncRecv"),this.onSyncDone();break;case"syncTeamMembersDone":this.onSyncTeamMembersDone()}},Ce.onSyncDone=function(){var Ie,pe,kt,Ue,Dt,tr,dr,pr,ar,hr,Ne,nr,sr,$e,er,or,ze,rr,Et,Lt,cr,mr,vr,Tr,Ir,kr,Ar,Nr,Mn,Or,Pr=this,Rr=Pr.db,Qr=Rr.enable,hn=Pr.options,Ur=Pr.syncPromiseArray,qr=Pr.syncResult;function Gn(){if(Ur){Pr.logger.info("sync::onSyncDone: after sync",ae.promises2cmds(Ur)),Ur=[],pe=qr.blacklist||[],kt=qr.invalidBlacklist||[],Ue=qr.mutelist||[],Dt=qr.invalidMutelist||[],tr=qr.friends,ar=qr.myTeamMembers,hr=qr.mySuperTeamMembers,dr=qr.invalidFriends||[],pr=qr.myInfo,Ne=qr.users,sr=qr.superTeams,er=qr.invalidSuperTeams,nr=qr.teams,$e=qr.invalidTeams||[],or=qr.sessions||{},ze=s(u({},Pr.sessionSet)),rr=qr.ackMap,qr.msgReceipts,Et=qr.roamingMsgs,Lt=qr.offlineMsgs,cr=qr.offlineFilterMsgs,vr=qr.offlineSysMsgs,Tr=qr.offlineCustomSysMsgs,Ir=qr.offlineFilterSysMsgs,kr=qr.offlineFilterCustomSysMsgs,Ar=qr.sysMsgUnread,Nr=qr.sessionsWithMoreRoaming,Or=qr.clearServerHistoryMsgs||[];var bo=o.resolve();(function(){if(Qr){var so,co=[jn()];or&&c(so=d(or)).call(so,function(to){co.push(Rr.putSession(or[to]))}),bo=o.all(co).then(function(){var to,Br=a(to=[]).call(to,n(d(rr||{})),n(d(or||{})));Br=v(Br).call(Br,function(Bn,Xn,_o){return g(_o).call(_o,Bn)===Xn});var Gr=[];return c(Br).call(Br,function(Bn){var Xn,_o=or[Bn];(_o.lastMsg||_o.ack)&&(Xn=(Xn=_o.ack?o.resolve(_o):Rr.getSession(_o.id)).then(function(oo){var Ma=oo.ack||0;return Rr.getMsgCountAfterAck({shouldCountNotifyUnread:Pr.options.shouldCountNotifyUnread,sessionId:Bn,ack:Ma}).then(function(si){return oo.unread=si||0,or[Bn]=Pr.mergeSession(oo),Rr.updateSession(oo)})}),Gr.push(Xn))}),o.all(Gr)}).then(function(){var to=[];return Pr.saveAck.p2pTeam&&to.push(Rr.updateSessionAck(Pr.saveAck.p2pTeam).catch(function(Br){return Pr.logger.error("sessionAck::syncSessionAck::updatetimetag db",Br),o.reject(Br)})),Pr.saveAck.superTeam&&to.push(Rr.updateSuperTeamSessionAck(Pr.saveAck.superTeam).catch(function(Br){return Pr.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",Br),o.reject(Br)})),o.all(to)})}else if(or){var Ro,An,Aa;c(Ro=[Et,Lt]).call(Ro,function(to){to&&c(to).call(to,function(Br){var Gr;(An=or[Br.sessionId]).unread=An.unread||0,An.unreadMsgs=An.unreadMsgs||[],Aa=An.ack||0,c(Gr=Br.msgs).call(Gr,function(Bn){if(!(Aa>=Bn.time))if(Bn.type==="notification"){var Xn;try{Xn=Pr.options.shouldCountNotifyUnread(Bn)}catch(_o){throw Pr.logger.error("userOption:shouldCountNotifyUnread function error",_o),_o}Xn&&An.unread++}else Bn.flow==="in"&&Bn.isUnreadable!==!1&&(An.unread++,An.unreadMsgs.push(Bn))}),Pr.mergeSession(An)})})}})(),bo.then(function(){if(Qr&&!Pr.hasSynced)Pr.hasSynced=!0,function(){hn.syncRelations&&(Ie=Rr.getRelations().then(function(An){pe=An[0],Ue=An[1],pe.invalid=kt,Ue.invalid=Dt}).catch(function(An){return An._msg="on relations error",Pr.logger.error("sync::syncRelation: ",An),o.reject(An)}),Ur.push(Ie)),hn.syncFriends&&(Ie=Rr.getFriends().then(function(An){(tr=An).invalid=dr}).catch(function(An){return An._msg="on friends error",Pr.logger.error("sync::syncFriends: ",An),o.reject(An)}),Ur.push(Ie)),_e(pr)&&(Ie=Rr.getUser(Pr.account).then(function(An){pr=An}).catch(function(An){return An._msg="on myInfo error",Pr.logger.error("sync::syncMyInfo: ",An),o.reject(An)}),Ur.push(Ie)),hn.syncFriendUsers&&(Ie=Rr.getFriends().then(function(An){return b(An).call(An,function(Aa){return Aa.account})}).then(function(An){return Rr.getUsers(An)}).then(function(An){Ne=An}).catch(function(An){return An._msg="on users error",Pr.logger.error("sync::syncFriendUser: ",An),o.reject(An)}),Ur.push(Ie)),hn.syncTeams&&(Ie=Rr.getTeams().then(function(An){(nr=An).invalid=$e}).catch(function(An){return An._msg="on teams error",Pr.logger.error("sync::syncTeams: ",An),o.reject(An)}),Ur.push(Ie)),hn.syncSuperTeams&&(Ie=Rr.getSuperTeams().then(function(An){(sr=An).invalid=er}).catch(function(An){return An._msg="on superteams error",Pr.logger.error("sync::syncSuperTeams: ",An),o.reject(An)}),Ur.push(Ie)),Ie=Rr.getTeamMembersByAccount(Pr.account).then(function(An){ar=An,Pr.mergeMyTeamMembers(An)}).catch(function(An){return Pr.logger.error("sync::getTeamMembersByAccount: ",An),o.reject(An)}),Ur.push(Ie),Ie=Rr.getSuperTeamMembersByAccount(Pr.account).then(function(An){hr=An,Pr.mergeMySuperTeamMembers(An)}).catch(function(An){return Pr.logger.error("sync::getSuperTeamMembersByAccount: ",An),o.reject(An)}),Ur.push(Ie),Ie=Rr.getDonnop().then(function(An){Pr.mergeDonnop(An)}).catch(function(An){return Pr.logger.error("sync::donnop: ",An),o.reject(An)}),Ur.push(Ie),Ie=Rr.getAllSessions().then(function(An){or=An}).catch(function(An){return Pr.logger.error("sync::getSession: ",An),o.reject(An)}),Ur.push(Ie),Ie=Rr.getSysMsgUnread().then(function(An){Ar=An}).catch(function(An){return An._msg="on sysMsgUnread error",Pr.logger.error("sync::getSysMsgUnread: ",An),o.reject(An)}),Ur.push(Ie),Ur.push(Rr.getSessionsWithMoreRoaming().then(function(An){Nr=An}))}();else{var so,co,Ro=[];c(so=d(or)).call(so,function(An){(co=or[An]).lastMsg&&Ro.push(co)}),or=m(Ro).call(Ro,function(An,Aa){return Aa.updateTime-An.updateTime})}o.all(Ur).then(Jr).then(Lr,function(An){Pr.logger.error("taskAfterSync syncDBDataPromise error:",An),An.callFunc="sync::onSyncDone",An.message="taskAfterSync syncDBDataPromise 出错",Pr.onCustomError("SYNC_SESSION_ACK_ERROR",An)})})}else Pr.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function jn(){var bo=[];return Et&&c(Et).call(Et,function(so){var co;bo=a(co=[]).call(co,n(bo),n(so.msgs))}),Lt&&c(Lt).call(Lt,function(so){var co;bo=a(co=[]).call(co,n(bo),n(so.msgs))}),bo.length?Rr.putMsg(bo).then(function(){return bo}):o.resolve(bo)}function Jr(){Pr.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(qr.deleteMsgSysMsgs){var so,co={};Et&&c(Et).call(Et,function(Gr){co[Gr.sessionId]=Gr});var Ro={};Lt&&c(Lt).call(Lt,function(Gr){Ro[Gr.sessionId]=Gr});var An=Pr.api;if(c(so=qr.deleteMsgSysMsgs).call(so,function(Gr){var Bn;c(Bn=Gr.sysMsgs).call(Bn,function(Xn){var _o=Xn.msg,oo=_o.sessionId;Gr.type==="roaming"&&co[oo]?co[oo].msgs=An.cutMsgs(co[oo].msgs,_o):Ro[oo]&&(Ro[oo].msgs=An.cutMsgs(Ro[oo].msgs,_o))})}),!Rr.enable){var Aa,to=a(Aa=[]).call(Aa,n(Et||[]),n(Lt||[]));c(to).call(to,function(Gr){if(Gr.msgs.length){var Bn=Pr.genSessionByMsgs(Gr.msgs);Pr.cacheSyncedSession(Bn),or.unshift(Bn)}else{var Xn=T(or).call(or,function(_o){return _o.id===Gr.sessionId});_(or).call(or,Xn,1)}});var Br={};c(or).call(or,function(Gr){if(Br[Gr.id]){var Bn=Gr.lastMsg.time>Br[Gr.id].lastMsg.time?Gr.lastMsg:Br[Gr.id].lastMsg;Br[Gr.id]=Gr,Br[Gr.id].lastMsg=Bn}else Br[Gr.id]=Gr}),or=s(Br),or=m(or).call(or,function(Gr,Bn){return Bn.updateTime-Gr.updateTime})}}}(),Mn=Pr.syncResult.stickTopSessions||[],c(Mn).call(Mn,function(so,co){Mn[co]=Pr.mergeSession(so)}),c(or).call(or,function(so){var co=Pr.sessionSet[so.id];co&&co.isTop&&(so.isTop=!0)});var bo=[Pr.deleteMsgOfflineRoaming(qr.deleteMsgSysMsgs,or)];return Or&&c(Or).call(Or,function(so){bo.push(function(co,Ro){var An;Pr.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(co)),Ro=Ro||new Date().getTime();var Aa=v(or).call(or,function(Bn){return Bn.id===co}),to=Pr.getSessionInCache(co);An=to||Aa[0];var Br=hn.rollbackClearMsgsUnread!==!1,Gr=[];return Rr.enable&&Gr.push(Rr.deleteMsgsBySessionId({sessionId:co,end:Ro})),Br&&An&&(An.lastMsg=null,An.unread=0,An=Pr.mergeSession(An),Rr.enable&&Gr.push(Rr.updateSession(An))),o.all(Gr)}(so.sessionId,so.time))}),o.all(bo)}function Lr(){y(Kn,0)}function Kn(){var bo,so,co=[],Ro=[];if(pe&&pe.length&&(Pr.logger.info("sync::notifyDataAsync: on blacklist",oe(pe)),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType3_8),hn.onblacklist(pe)),Ue&&Ue.length&&(Pr.logger.info("sync::notifyDataAsync: on mutelist",oe(Ue)),hn.onmutelist(Ue)),tr&&(Pr.logger.info("sync::notifyDataAsync: on friends",oe(tr)),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType12_5),hn.onfriends(tr)),pr&&(Pr.logger.info("sync::notifyDataAsync: on myInfo"),Pr.myInfo=pr,Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType3_109),hn.onmyinfo(ae.copy(pr))),ar){Pr.logger.info("sync::notifyDataAsync: on myTeamMembers",ar),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType8_126);var An=ae.simpleClone(ar);O(An)||(An=[An]),hn.onMyTeamMembers(An)}if(hr){Pr.logger.info("sync::notifyDataAsync: on mySuperTeamMembers",hr),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType21_111);var Aa=ae.simpleClone(hr);O(Aa)||(Aa=[Aa]),hn.onMySuperTeamMembers(Aa)}Ne&&(c(Ne).call(Ne,function(oo){Pr.mergeUser(oo)}),Pr.logger.info("sync::notifyDataAsync: on users",oe(Ne)),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType12_6),hn.onusers(Ne)),nr&&(Pr.logger.info("sync::notifyDataAsync: on teams",he(nr)),hn.onteams(nr),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType8_109)),sr&&(Pr.logger.info("sync::notifyDataAsync: onSuperTeams",he(sr)),hn.onSuperTeams(sr),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType21_109)),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_12),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_14),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_20),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_21),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType7_15),or&&or.length?(or=b(or).call(or,function(oo){return Pr.mergeSession(oo),V(Ve).call(Ve,oo)}),or=v(or).call(or,function(oo){return!oo.isDeleted}),Pr.logger.info("sync::notifyDataAsync: on sessions",de(or),ae.secureOutput("session",or)),!Qr&&Pr.timetags&&Pr.timetags.roamingMsgs?hn.onsessions(v(ze).call(ze,function(oo){return Ve.isComplete(oo)})):hn.onsessions(or)):!Qr&&ze.length&&(Pr.logger.info("sync::notifyDataAsync: on sessions",de(or),ae.secureOutput("session",or)),hn.onsessions(v(ze).call(ze,function(oo){return Ve.isComplete(oo)}))),Mn&&Mn.length&&(Mn=b(Mn).call(Mn,function(oo){return oo=Pr.mergeSession(oo),V(Ve).call(Ve,oo)}),Pr.logger.info("sync::notifyDataAsync: onStickTopSessions",de(Mn),ae.secureOutput("session",Mn)),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_23),hn.onStickTopSessions(Mn)),Et&&c(Et).call(Et,function(oo){oo.scene==="superTeam"?Ro.push(oo.timetag):co.push(oo.timetag),(so=oo.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on roaming msgs",oo.sessionId,so.length),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_9),hn.onroamingmsgs(oo))}),Lt&&(Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_4),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_17),c(Lt).call(Lt,function(oo){oo.scene==="superTeam"?Ro.push(oo.timetag):co.push(oo.timetag),(so=oo.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on offline msgs",oo.sessionId,so.length,b(so).call(so,function(Ma){return Ma.idServer})),hn.onofflinemsgs(oo))})),cr&&(Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_100),c(cr).call(cr,function(oo){co.push(oo.timetag),(so=oo.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on offline filter msgs",oo.sessionId,so.length),hn.onofflinefiltermsgs(so))})),Nr&&(Pr.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",de(Nr),Nr),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_22),hn.onSessionsWithMoreRoaming(Nr));var to,Br=[],Gr=[];qr.deleteMsgSysMsgs&&c(to=qr.deleteMsgSysMsgs).call(to,function(oo){oo.type==="roaming"?Br=a(Br).call(Br,oo.sysMsgs):Gr=a(Gr).call(Gr,oo.sysMsgs)}),Br.length&&(mr=a(mr=mr||[]).call(mr,Br)),Gr.length&&(vr=a(vr=vr||[]).call(vr,Gr)),mr&&(Pr.logger.info("sync::notifyDataAsync: on roaming sys msgs",mr.length),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_19),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_15),hn.onroamingsysmsgs(mr)),vr&&(Pr.logger.info("sync::notifyDataAsync: on offline sys msgs",vr.length),hn.onofflinesysmsgs(vr)),Ir&&(Pr.logger.info("sync::notifyDataAsync: on offline filter sys msgs",Ir.length),hn.onofflinefiltersysmsgs(Ir)),Tr&&(Pr.logger.info("sync::notifyDataAsync: on offline custom sys msgs",Tr.length),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_6),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_18),hn.onofflinecustomsysmsgs(Tr)),kr&&(Pr.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",kr.length),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_101),hn.onofflinefiltercustomsysmsgs(kr)),Ar&&(Ar=ae.merge({},Pr.sysMsgUnread,Ar),Pr.sysMsgUnread=ae.merge({},Ar),Pr.logger.info("sync::notifyDataAsync: on sysMsgUnread",Ar),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_6),hn.onsysmsgunread(Ar));var Bn=Pr.getPushNotificationMultiportConfig();Pr.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",Bn),Pr.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_13),hn.onPushNotificationMultiportConfig(Bn);var Xn=Ro.length&&Math.max.apply(Math,Ro);if(bo=co.length&&Math.max.apply(Math,co),Rr.enable){var _o=[];Xn&&_o.push(Pr.db.updateSuperTeamRoamingMsgTimetag(Xn)),bo&&_o.push(Pr.db.updateRoamingMsgTimetag(bo)),o.all(_o).then(vo).catch(vo)}else Pr.timetags.superTeamRoamingMsgs=Xn,Pr.timetags.roamingMsgs=bo||Pr.timetags.roamingMsgs,vo();Pr.syncPromiseArray=[],Pr.syncResult={}}function vo(){if(Pr.processUnsettledMsgs(),Pr.msgPromise.then(function(){Pr.canHandleDeletedMsgInSyncing=!0,y(function(){Pr.processUnsettledSysMsgs()},0)}),Pr.syncing&&hn.onsyncdone(),Pr.syncing=!1,Pr.reporterHook.emit("reporter/syncComplete"),hn.syncTeamMembers&&nr&&nr.length)throw new Fe("sync team members api deprecated!")}Ur&&Ur.length?o.all(Ur).then(Gn).catch(function(bo){Gn(),Pr.logger.error(bo),bo.callFunc="sync::onSyncDone",bo.message="afterSync syncNormalPromise 出错",Pr.onCustomError("SYNC_promiseArray_ERROR",bo)}):Gn()},Ce.syncTeamMembers=function(Ie){var pe,kt,Ue=this;Ue.timetags,kt={},c(Ie).call(Ie,function(Dt){kt[Dt.teamId]=0},Ue),Ue.sendCmd("syncTeamMembers",{sync:kt},i(pe=Ue.onSyncTeamMembers).call(pe,Ue))},Ce.onSyncTeamMembers=function(Ie){Ie.callFunc="sync::onSyncTeamMembers",Ie.message="同步群成员错误",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",Ie)},Ce.onSyncTeamMembersDone=function(){var Ie,pe=this,kt=pe.db,Ue=pe.options,Dt=pe.syncTeamMembersResult,tr=pe.syncTeamMembersPromiseArray;function dr(){pe.logger.log("sync::onSyncTeamMembersDone: afterSync",ae.promises2cmds(tr)),tr=[],kt.enable&&!pe.hasSyncedTeamMembers?(pe.hasSyncedTeamMembers=!0,function(){if(!Ue.syncTeams||!Ue.syncTeamMembers)return hr();kt.getTeams().then(function(Ne){c(Ne).call(Ne,function(nr){var sr=nr.teamId;Ie=new o(function($e,er){pe.api.getTeamMembers({teamId:sr,done:function(or,ze){or&&er({callFunc:"sync::getTeamMembers: teamId-".concat(sr),message:"sync team members error"}),Dt[sr]=ze.members||[],$e()}})}),tr.push(Ie)}),tr.length?o.all(tr).then(pr,function(nr){nr.callFunc="sync::onSyncTeamMembersDone",nr.message="pullFullData promiseArray notifyData 错误",pe.onCustomError("SYNC_TEAM_MEMBERS_ERROR",nr)}):pr()},function(Ne){Ne.callFunc="sync::onSyncTeamMembersDone",Ne.message="pullFullData getTeams 错误",pe.onCustomError("SYNC_TEAM_MEMBERS_ERROR",Ne)})}()):pr()}function pr(){y(ar,0)}function ar(){var Ne,nr,sr;c(Ne=d(Dt)).call(Ne,function($e){g($e).call($e,"invalid")===-1&&(nr=Dt[$e],sr=Dt[$e+"-invalid"]||[],nr.invalid=sr,function(er,or){pe.logger.info("sync::onSyncTeamMembersDone: onTeamMembers",er,oe(or),or),Ue.onteammembers({teamId:er,members:or})}($e,nr))}),hr()}function hr(){pe.logger.info("sync::onSyncTeamMembersDone: bingo"),Ue.onsyncteammembersdone(),pe.syncTeamMembersResult=null,pe.syncTeamMembersPromiseArray=null}tr.length?o.all(tr).then(dr,function(Ne){Ne.callFunc="sync::onSyncTeamMembersDone",Ne.message="同步群成员 syncTeamMembersPromiseArray 错误",pe.onCustomError("SYNC_TEAM_MEMBERS_ERROR",Ne)}).catch(function(Ne){pe.logger.log("sync::onSyncTeamMembersDone: syncTeamMembersPromiseArray promise ",Ne),dr()}):dr()}},function(t,r,e){var n=e(784),o=e(788),i=e(748),a=e(792);t.exports=function(s){return n(s)||o(s)||i(s)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(745),o=e(746);t.exports=function(i){if(n(i))return o(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(786)},function(t,r,e){var n=e(787);t.exports=n},function(t,r,e){var n=e(299);t.exports=n},function(t,r,e){var n=e(153),o=e(70),i=e(747);t.exports=function(a){if(n!==void 0&&o(a)!=null||a["@@iterator"]!=null)return i(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(790)},function(t,r,e){var n=e(791);t.exports=n},function(t,r,e){var n=e(300);t.exports=n},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(794);t.exports=n},function(t,r,e){e(795);var n=e(12);t.exports=n.Object.values},function(t,r,e){var n=e(1),o=e(796).values;n({target:"Object",stat:!0},{values:function(i){return o(i)}})},function(t,r,e){var n=e(27),o=e(11),i=e(118),a=e(43),s=o(e(148).f),u=o([].push),c=function(d){return function(m){for(var v,g=a(m),b=i(g),T=b.length,_=0,y=[];T>_;)v=b[_++],n&&!s(g,v)||u(y,d?[v,g[v]]:g[v]);return y}};t.exports={entries:c(!0),values:c(!1)}},function(t,r,e){t.exports=e(798)},function(t,r,e){var n=e(799);t.exports=n},function(t,r,e){var n=e(21),o=e(800),i=Array.prototype;t.exports=function(a){var s=a.findIndex;return a===i||n(i,a)&&s===i.findIndex?o:s}},function(t,r,e){e(801);var n=e(30);t.exports=n("Array").findIndex},function(t,r,e){var n=e(1),o=e(84).findIndex,i=e(196),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),n({target:"Array",proto:!0,forced:a},{findIndex:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(t,r,e){var n=e(8),o=e(9),i=e(3),a=e(2),s=e(35).fn,u=e(0),c=u.objs2accounts,d=e(803),m=e(203);s.processUser=function(v){var g,b=this,T=b.db,_=v.obj,y=v.error,O=v.content;switch(v.cmd){case"markInBlacklist":y||b.markInBlacklist(_);break;case"syncMarkInBlacklist":b.markInBlacklist(O,!0);break;case"markInMutelist":y||b.markInMutelist(_);break;case"syncMarkInMutelist":b.markInMutelist(O,!0);break;case"getRelations":y||b.onRelations(v);break;case"syncMyInfo":b.onMyInfo(v,!0);break;case"updateMyInfo":y||(_.user.updateTime=O.timetag,b.onUpdateMyInfo(v,_.user));break;case"syncUpdateMyInfo":b.onUpdateMyInfo(v,O.user,!0);break;case"getUsers":var V;y||(g=n(V=O.users).call(V,function(Ce){return Ce=o(m).call(m,Ce,b.mixStorePolicy&&b.mixStorePolicy.s3Policy?b.mixStorePolicy.s3Policy.dlcdns:[],b.mixStorePolicy&&b.mixStorePolicy.s3Policy?b.mixStorePolicy.s3Policy.dlcdn:""),b.mergeUser(Ce),Ce}),v.obj=g,T.enable&&T.putUsers(g));break;case"updateDonnop":b.onUpdateDonnop(v);break;case"syncUpdateDonnop":b.onDonnop(v,!1)}},s.onMyInfo=function(v){var g,b=this,T=b.db,_=v.error,y=v.content,O=new i(function(Ce,ae){var Fe,_e;_?(_&&(_.callFunc="user::onMyInfo"),Ce(_),b.syncData()):(g=o(m).call(m,y.user),T.enable?(Fe=Ce,_e=ae,T.mergeMyInfo(g,!0).then(function(){V(),Fe()}).then(void 0,function(de){de.message="db.mergeMyInfo error",de.callFunc="user::onMyInfo",_e(de)})):(V(),Ce()))}).catch(function(Ce){return b.logger.error("user::onMyInfo: ",Ce),i.reject(Ce)});function V(){b.timetags.myInfo=g.updateTime,b.syncResult.myInfo=g}O.cmd="myInfo",b.syncPromiseArray.push(O)},s.onUpdateMyInfo=function(v,g,b){var T=this.db,_=o(m).call(m,g),y=u.merge(this.myInfo,_);this.myInfo=y,b?(this.logger.info("user::onUpdateMyInfo:",y&&y.account),this.options.onupdatemyinfo(y)):v.obj=y,T.enable&&(_.account=this.account,T.updateUser(_))},s.onRelations=function(v){var g,b=this,T=b.db,_=v.error,y=b.packetFromSync(v),O=v.content.specialRelations,V=!0,Ce=[],ae=[],Fe=[],_e=[],de=new i(function(he,Ve){var le,ie;_?y&&(he(_),b.syncData()):(a(O).call(O,function(Ie){var pe={account:(Ie=d.parse(Ie)).account,createTime:Ie.createTime,updateTime:Ie.updateTime};Ie.isBlacked?Ce.push(pe):ae.push(pe),Ie.isMuted?Fe.push(pe):_e.push(pe)}),b.logger.info("user::onRelations: parse blacklist",c(Ce),Ce,"delete",c(ae),ae),b.logger.info("user::onRelations: parse mutelist",c(Fe),Fe,"delete",c(_e),_e),O.length?(V=!0,g=v.content.timetag):V=!1,T.enable?(le=he,ie=Ve,v.promise=new i(function(Ie,pe){function kt(){y?(oe(),Ie(),le()):T.getRelations().then(function(Ue){Ce=Ue[0],Fe=Ue[1],oe(),Ie(),le()}).then(void 0,function(Ue){Ue.message="db.getRelations error",Ue.callFunc="user::onRelations",pe(Ue),ie(Ue)})}V?T.mergeRelations(Ce,ae,Fe,_e,g).then(function(){kt()}).then(void 0,function(Ue){Ue.message="db.mergeRelations error",Ue.callFunc="user::onRelations",pe(Ue),ie(Ue)}):(b.logger.warn("user::onRelations: no relations need merge"),kt())}).then(void 0,function(Ie){throw Ie.message="merge relations data error",Ie.callFunc="user::onRelations",ie(Ie),Ie})):(oe(),he()))}).catch(function(he){return b.logger.error("user::onRelations: ",he),i.reject(he)});function oe(){b.timetags.relations=g,Ce.invalid=ae,Fe.invalid=_e,y?(b.syncResult.blacklist=Ce,b.syncResult.mutelist=Fe,b.syncResult.invalidBlacklist=ae,b.syncResult.invalidMutelist=_e):(b.logger.info("user::onRelations: get relations",Ce,Fe),v.obj.blacklist=Ce,v.obj.mutelist=Fe)}y&&(de.cmd="relations",b.syncPromiseArray.push(de))},s.markInBlacklist=function(v,g){var b=this.db;v.record={account:v.account,updateTime:+new Date},b.enable&&b.markInBlacklist(v),g&&(this.logger.info("user::markInBlacklist:",v),this.options.onsyncmarkinblacklist(v))},s.markInMutelist=function(v,g){var b=this.db;v.record={account:v.account,updateTime:+new Date},b.enable&&b.markInMutelist(v),g&&(this.logger.info("user::markInMutelist:",v),this.options.onsyncmarkinmutelist(v))},s.mergeUser=function(v){this.userSet[v.account]=v}},function(t,r,e){var n=e(0);function o(){}o.parse=function(i){var a=n.copy(i);return a.isBlacked=a.isBlacked==="1",a.isMuted=a.isMuted==="1",a.createTime=+a.createTime,a.updateTime=+a.updateTime,a},t.exports=o},function(t,r,e){var n=e(120),o=e(2),i=e(9),a=e(3),s=e(7),u=e(8),c=["type"],d=e(35).fn,m=e(0),v=m.objs2accounts,g=e(750),b=e(203);d.processFriend=function(T){var _=T.obj,y=T.content,O=T.error;switch(T.cmd){case"friendRequest":this.updateFriendSysMsg(T),O||this.onFriendRequest(_);break;case"syncFriendRequest":this.onFriendRequest(y,!0);break;case"deleteFriend":O||this.onDeleteFriend(_);break;case"syncDeleteFriend":this.onDeleteFriend(y,!0);break;case"updateFriend":O||this.onUpdateFriend(_);break;case"syncUpdateFriend":this.onUpdateFriend(y.friend,!0);break;case"getFriends":this.getFriends(T);break;case"syncFriends":this.onFriends(T);break;case"syncFriendUsers":this.onFriendUsers(T)}},d.getFriends=function(T){var _=T.content.friends,y=[],O=[];o(_).call(_,function(V){(V=i(g).call(g,V)).valid?y.push(V):O.push(V)}),y.invalid=O,T.obj=y},d.onFriends=function(T){var _,y=this,O=y.db,V=T.error,Ce=T.content.friends,ae=!0,Fe=[],_e=[],de=new a(function(he,Ve){var le,ie;V?Ve(V):(function(){ae&&o(Ce).call(Ce,function(Ie){(Ie=i(g).call(g,Ie)).valid?Fe.push(Ie):_e.push(Ie)}),y.logger.info("friend::onFriends: parse friends",v(Fe),"delete",v(_e)),Ce.length?(ae=!0,_=T.content.timetag):ae=!1}(),O.enable?(le=he,ie=Ve,T.promise=new a(function(Ie,pe){function kt(){oe(),Ie(),le()}ae?O.mergeFriends(Fe,_e,_).then(function(){kt()}).then(void 0,function(Ue){Ue._msg="merge friends error",pe(Ue),ie(Ue)}):(y.logger.info("friend::onFriends: no merge friends"),kt())}).then(void 0,function(Ie){throw Ie._msg="merge friends data error",ie(Ie),Ie})):(oe(),he()))}).catch(function(he){return y.logger.error("friend::onFriends: ",he),a.reject(he)});function oe(){var he,Ve;y.timetags.friends=_,Fe.invalid=_e,y.syncResult.friends=s(he=y.syncResult.friends||[]).call(he,Fe||[]),y.syncResult.invalidFriends=s(Ve=y.syncResult.invalidFriends||[]).call(Ve,_e||[])}de.cmd="friends",y.syncPromiseArray.push(de)},d.onFriendRequest=function(T,_){var y=a.resolve(),O=this.db,V=T.type,Ce=n(T,c);if((V=T.type=g.getTypeFromByte(V)||V)==="addFriend"||V==="passFriendApply"){var ae=T.friend=g.assembleFriend(Ce);O.enable&&(y=O.putFriend(ae))}return _&&this.onSyncFriendAction(T),y},d.onSyncFriendAction=function(T){this.logger.info("friend::onSyncFriendActionon: ".concat(T.type,", "),T.account),this.options.onsyncfriendaction(T)},d.onDeleteFriend=function(T,_){var y=a.resolve(),O=this.db;return O.enable&&(y=O.deleteFriend(T.account)),_&&(T.type="deleteFriend",this.onSyncFriendAction(T)),y},d.onUpdateFriend=function(T,_){var y=this.db,O=i(g).call(g,T);y.enable&&y.updateFriend(O),_&&this.onSyncFriendAction({type:"updateFriend",friend:O})},d.onFriendUsers=function(T){var _,y,O=this.db,V=T.content,Ce=u(_=V.users).call(_,function(_e){return i(b).call(b,_e)});this.logger.info("friend::onFriendUsers: parse users",v(Ce));var ae=V.timetag,Fe=a.resolve();O.enable&&(Fe=O.mergeFriendUsers(Ce,ae)),this.timetags.friendUsers=ae,Fe.cmd="friendUsers",this.syncPromiseArray.push(Fe),this.syncResult.users=s(y=this.syncResult.users||[]).call(y,Ce||[]),this.syncing||this.onSyncDone()},d.updateFriendSysMsg=function(T){var _,y,O=T.obj,V=T.error;if(T.obj.idServer){if(V)_="error",V=m.filterObj(V,"code message");else{var Ce=O.type;switch(Ce=g.getTypeFromByte(Ce)||Ce){case"passFriendApply":_="passed";break;case"rejectFriendApply":_="rejected"}}y={idServer:O.idServer,state:_,from:O.account,type:"applyFriend"},V&&(y.error=V),this.updateSysMsg(y)}}},function(t,r,e){var n=e(32),o=e(17),i=e(35).fn,a=e(0);i.onRobots=function(s){var u=s.content;if(a.isFunction(this.options.onrobots)&&n(u.robots)){var c,d=o(c=u.robots).call(c,function(m){return!!m.botid});d.length>0&&this.options.onrobots(d||[])}}},function(t,r,e){var n=e(9),o=e(2),i=e(23),a=e(171),s=e(3),u=e(8),c=e(17),d=e(5),m=e(35).fn,v=e(0),g=v.objs2accounts,b=v.teams2ids,T=e(192),_=e(150);m.processTeam=function(y){var O,V,Ce,ae=y.error;switch(y.obj===void 0&&(y.obj={}),y.cmd){case"createTeam":O=y.obj.team,ae||(O=y.content.team),O=n(T).call(T,O),y.obj.team=O,Ce=_.assembleOwner(O),y.obj.owner=Ce,ae||(this.logger.info("team::processTeam: create team ",O&&O.teamId,Ce&&Ce.account),this.onCreateTeam(O,Ce));break;case"syncCreateTeam":O=n(T).call(T,y.content.team),Ce=_.assembleOwner(O),this.logger.info("team::processTeam: sync createTeam",O&&O.teamId,Ce&&Ce.account),this.options.onsynccreateteam(O,Ce),this.onCreateTeam(O,Ce);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(y);break;case"teamMsg":this.onMsg(y);break;case"teamMsgs":this.onMsgs(y);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":ae||((V=y.obj).account=this.account,V.id=_.genId(V.teamId,V.account),V=n(_).call(_,V),y.obj=V,this.mergeMyTeamMembers(V),this.onUpdateTeamMember(V));break;case"updateNickInTeam":y.obj=n(_).call(_,y.obj);break;case"updateTeam":y.obj=n(T).call(T,y.obj,!0);break;case"applyTeam":y.error||(y.obj=n(T).call(T,y.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(y,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(y,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(y,"passed"),y.error||(y.obj=n(T).call(T,y.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(y,"rejected");break;case"getTeam":y.error||(y.obj=n(T).call(T,y.content.team));break;case"getTeams":this.onTeams(y);break;case"getTeamMembers":this.onTeamMembers(y);break;case"syncTeams":this.onTeams(y);break;case"syncTeamMembers":this.onTeamMembers(y);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(y);break;case"syncSendTeamMsg":this.onMsg(y);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(y);break;case"syncUpdateTeamMember":(V=n(_).call(_,y.content.teamMember)).account===this.account&&this.mergeMyTeamMembers(V),this.onUpdateTeamMember(V);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":y.error||(y.obj=_.reverseMembers(y.content.teamMembers));break;case"getMutedTeamMembers":y.error||(y.obj={teamId:y.obj.teamId,members:_.reverseMembers(y.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(y);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(y);break;case"getTeamMsgReads":this.getTeamMsgReads(y);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(y);break;case"getTeamsById":this.getTeamsById(y)}},m.getTeamMsgReads=function(y){var O=this;if(y.error)this.logger.error("team::sendTeamMsgReceipt: ",y.error);else{var V=v._get(y,"content.teamMsgReceipts")||[];if(this.db.enable){var Ce=[];o(V).call(V,function(ae){ae.idClient&&Ce.push({idClient:ae.idClient,unread:+ae.unread,read:+ae.read})}),Ce.length>0&&i(function(){return O.db.updateMsgBatch(Ce)},0)}}},m.getTeamMsgReadAccounts=function(y){if(y.error)this.logger.error("team::getTeamMsgReadAccounts: ",y.error);else{var O=v._get(y,"content.readAccounts")||[],V=v._get(y,"content.unreadAccounts")||[],Ce=v._get(y,"content.teamMsgReceipt.idClient")||[];this.db.enable&&this.db.putMsgReadDetail({idClient:Ce,readAccounts:O,unreadAccounts:V})}},m.sendTeamMsgReceipt=function(y){var O=this;if(y.error)this.logger.error("team::sendTeamMsgReceipt: ",y.error);else{var V=v._get(y,"obj.teamMsgReceipts")||[],Ce=v._get(y,"content.teamMsgReceipts")||[];if(this.db.enable){var ae=[];o(V).call(V,function(Fe){a(Ce).call(Ce,function(_e){return Fe.idServer===_e.idServer})||ae.push({idClient:Fe.idClient,hasRead:!0})}),ae.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),i(function(){return O.db.updateMsgBatch(ae)},0))}}},m.onCreateTeam=function(y,O){var V=this.db;V.enable&&(V.putTeam(y),V.putTeamMembers(O)),this.options.onCreateTeam(y,O)},m.onTeams=function(y){y.content=y.content||{};var O,V=this,Ce=V.db,ae=V.packetFromSync(y),Fe=y.content.teams||[],_e=!0,de=[],oe=[];if(y.error)switch(y.error.code){case 803:y.error=null,_e=!1}var he=new s(function(le,ie){var Ie,pe;y.error?ae&&ie(y.error):(function(){_e&&o(Fe).call(Fe,function(kt){(kt=n(T).call(T,kt)).validToCurrentUser?de.push(kt):oe.push(kt)}),Fe.length?(_e=!0,O=y.content.timetag):_e=!1}(),Ce.enable?(Ie=le,pe=ie,y.promise=new s(function(kt,Ue){function Dt(){ae?(Ve(),kt(),Ie()):Ce.getTeams().then(function(tr){de=tr,Ve(),kt(),Ie()}).catch(function(tr){tr.message="db.getTeams error",tr.callFunc="team::afterMergeData",Ue(tr),pe(tr)})}_e?Ce.mergeTeams(de,oe,O).then(function(){Dt()}).catch(function(tr){var dr={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:tr};Ue(dr),pe(dr)}):(V.logger.warn("team::onTeams:mergeData: no teams need merge"),Dt())}).then(void 0,function(kt){throw kt.message="merge teams data error",kt.callFunc="team::mergeData",pe(kt),kt})):(Ve(),le()))}).catch(function(le){return V.logger.error("team::onTeams: ",le),s.reject(le)});function Ve(){V.timetags.teams=O,de.invalid=oe,ae?(V.syncResult.teams=de,V.syncResult.invalidTeams=oe,V.syncing||V.onSyncDone()):(V.logger.info("team::onTeams: not in syncing, get teams",b(de)),y.obj=de)}ae&&(he.cmd="teams",V.syncPromiseArray.push(he))},m.getTeamsById=function(y){var O;if(y.error){if(y.error.code!==816)return;this.logger.error("team::getTeamsById: ",y.error),y.error=null}y.content.teams=u(O=y.content.teams).call(O,function(V){return n(T).call(T,V)}),y.obj=y.content},m.onTeamMembers=function(y){y.content=y.content||{};var O,V,Ce=this,ae=Ce.packetFromSync(y),Fe=y.content.members||[],_e=!0,de=[],oe=[];if(y.obj&&(V=y.obj.teamId),V||(V=y.content.teamId),V=""+V,y.error)switch(y.error.code){case 406:y.error=null,_e=!1}var he=new s(function(Ve,le){y.error?ae&&(Ce.logger.error("team::onTeamMember: team error:",V,y.error),le({callFunc:"team::onTeamMembers",event:y.error,message:"teamId-".concat(V," 获取群成员错误")})):(function(){_e&&o(Fe).call(Fe,function(ie){(ie=n(_).call(_,ie)).valid?de.push(ie):oe.push(ie)}),Fe.length?(_e=!0,O=y.content.timetag):_e=!1}(),de.invalid=oe,ae?(Ce.syncTeamMembersResult[V]=de,Ce.syncTeamMembersResult[V+"-invalid"]=oe,Ce.timetags["team-"+V]=O):(Ce.logger.info("team::onTeamMembers: not syncing, get members",V,g(de)),y.obj={teamId:V,members:de}),Ve())});ae&&(he.cmd=V,Ce.syncTeamMembersPromiseArray.push(he))},m.onUpdateTeamMember=function(y){if(y.updateTime||(y.updateTime=+new Date),this.logger.info("team::onUpdateTeamMember: ",y&&y.account),this.options.onupdateteammember(v.simpleClone(y)),this.account===y.account){var O=this.myTeamMembersMap[y.teamId];this.logger.info("team::onMyTeamMembers: ",[O]),this.options.onMyTeamMembers(v.simpleClone([O]))}var V={teamId:y.teamId,memberUpdateTime:y.updateTime};this.onUpdateTeam(V);var Ce=this.db;Ce.enable&&Ce.updateTeamMember(y)},m.onUpdateTeam=function(y){this.logger.info("team::onUpdateTeam:",y&&y.teamId),this.options.onUpdateTeam(v.simpleClone(y));var O=this.db;O.enable&&O.updateTeam(y)},m.onSyncMyTeamMembers=function(y){var O=this,V=O.db,Ce=_.reverseMembers(y.content.teamMembers);if(V.enable){var ae=V.putTeamMembers(Ce).then(function(){return V.updateMyTeamMembersTimetag(y.content.timetag)}).catch(function(Fe){return O.logger.error("team::syncMyTeamMember: ",Fe),s.reject(Fe)});ae.cmd="myTeamMembers",O.syncTeamMembersPromiseArray.push(ae),O.syncPromiseArray.push(ae)}else O.syncResult.myTeamMembers=Ce;O.mergeMyTeamMembers(Ce)},m.mergeMyTeamMembers=function(y){v.isArray(y)||(y=[y]);var O=this.myTeamMembersMap=this.myTeamMembersMap||{};o(y).call(y,function(V){var Ce=V.teamId;O[Ce]=v.merge(O[Ce],V)})},m.notifyForNewTeamMsg=function(y){v.isArray(y)||(y=[y]);var O=this,V=this.myTeamMembersMap||{},Ce={},ae=[];o(y).call(y,function(_e){v.exist(V[_e])?Ce[_e]=V[_e].muteNotiType:ae.push(_e)});var Fe=s.resolve({map:Ce});return ae.length&&(Fe=O.api.getMyTeamMembers({teamIds:ae,promise:!0}).then(function(_e){O.mergeMyTeamMembers(_e),o(_e).call(_e,function(oe){Ce[oe.teamId]=oe.muteNotiType});var de=c(y).call(y,function(oe){return!Ce[oe]});return s.resolve({map:Ce,miss:de})}).catch(function(_e){return d(Ce).length>0?s.resolve({map:Ce,miss:ae,error:_e}):s.reject(_e)})),Fe},m.updateTeamSysMsgState=function(y,O){var V,Ce=y.error;Ce&&(O="error",Ce=v.filterObj(Ce,"code message")),V={idServer:y.obj.idServer,state:O,from:y.obj.from,type:y.obj.type},Ce&&(V.error=Ce),this.updateSysMsg(V)},m.onTeamMsgReceipt=function(y){var O=y.content,V=y.error;V&&this.logger.error("team::onTeamMsgReceipt:",V),O&&O.teamMsgReceipts&&(this.options.onTeamMsgReceipt(O),this.options.onMsgReceipts(O.teamMsgReceipts))}},function(t,r,e){var n=e(9),o=e(3),i=e(2),a=e(35).fn,s=e(0),u=s.teams2ids,c=e(307),d=e(202);a.processSuperTeam=function(m){var v,g,b,T=m.error;switch(m.obj===void 0&&(m.obj={}),m.cmd){case"sendSuperTeamMsg":this.onSendMsg(m);break;case"superTeamMsg":this.onMsg(m);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(m);break;case"superTeamCustomSysMsg":this.onSysMsg(m);break;case"syncSuperTeams":this.onSuperTeams(m);break;case"syncCreateSuperTeam":v=n(c).call(c,m.content.team),b=d.assembleOwner(v),this.logger.info("team::processTeam: sync createTeam",v&&v.teamId,b&&b.account),this.options.onSyncCreateSuperTeam(v,b),this.onCreateSuperTeam(v,b);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(m);break;case"syncSendSuperTeamMsg":this.onMsg(m);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":T||((g=m.obj).account=this.account,g.id=d.genId(g.teamId,g.account),g=n(d).call(d,g),m.obj=g,this.mergeMySuperTeamMembers(g),this.onUpdateSuperTeamMember(g));break;case"updateNickInTeam":m.obj=n(d).call(d,m.obj);break;case"syncUpdateSuperTeamMember":(g=n(d).call(d,m.content.teamMember)).account===this.account&&this.mergeMySuperTeamMembers(g),this.onUpdateSuperTeamMember(g);break;case"updateSuperTeam":m.obj=n(c).call(c,m.obj,!0);break;case"getSuperTeam":m.error||(m.obj=n(c).call(c,m.content.team));break;case"getSuperTeams":this.onSuperTeams(m);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(m);break;case"syncMySuperTeamMembers":this.onSyncMySuperTeamMembers(m);break;case"getSuperTeamMembers":m.error||this.onGetAllSuperTeamMembers(m);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":m.error||this.onSuperTeamMembers(m);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(m);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(m,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(m);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(m);break;case"passSuperTeamApply":this.updateSuperTeamSysMsgState(m,"passed");break;case"rejectSuperTeamApply":this.updateTeamSysMsgState(m,"rejected");break;case"acceptSuperTeamInvite":this.updateTeamSysMsgState(m,"passed");break;case"rejectSuperTeamInvite":this.updateSuperTeamSysMsgState(m,"rejected")}},a.onSuperTeams=function(m){m.content=m.content||{};var v,g=this,b=g.db,T=g.packetFromSync(m),_=m.content.teams||[],y=!0,O=[],V=[];if(m.error)switch(m.error.code){case 803:m.error=null,y=!1}var Ce=new o(function(Fe,_e){var de,oe;m.error?T&&_e(m.error):(function(){y&&i(_).call(_,function(he){(he=n(c).call(c,he)).validToCurrentUser?O.push(he):V.push(he)}),_.length?(y=!0,v=m.content.timetag):y=!1}(),b.enable?(de=Fe,oe=_e,m.promise=new o(function(he,Ve){function le(){T?(ae(),he(),de()):b.getSuperTeams().then(function(ie){O=ie,ae(),he(),de()}).then(void 0,function(ie){ie.message="db.getSuperTeams error",ie.callFunc="superTeam::afterMergeData",Ve(ie),oe(ie)})}y?b.mergeSuperTeams(O,V,v).then(function(){le()}).then(void 0,function(ie){var Ie={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:ie};Ve(Ie),oe(Ie)}):(g.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),le())}).then(void 0,function(he){throw he.message="merge teams data error",he.callFunc="superTeam::mergeData",oe(he),he})):(ae(),Fe()))}).catch(function(Fe){return g.logger.error("superTeam::onSuperTeams: ",Fe),o.reject(Fe)});function ae(){g.timetags.superTeams=v,O.invalid=V,T?(g.syncResult.superTeams=O,g.syncResult.invalidSuperTeams=V):(g.logger.info("superTeam::onSuperTeams: not in syncing, get teams",u(O)),m.obj=O)}T&&(Ce.cmd="superteams",g.syncPromiseArray.push(Ce))},a.onCreateSuperTeam=function(m,v){var g=this.db;g.enable&&(g.putSuperTeam(m),g.putSuperTeamMembers(v))},a.onGetAllSuperTeamMembers=function(m){var v=this,g=this.db,b=m.raw.ser,T=this.superTeamMembersData[b]||{},_=T.teamId||m.obj&&m.obj.teamId;if(g.enable){var y=m.content&&m.content.timetag,O=m.raw.code===200?o.all(T.pArr):o.resolve();m.promise=O.then(function(){return g.getSuperTeamMembers(_).then(function(V){y&&g.updateSuperTeamMemberTimetag(_,y),m.obj={members:V,invalid:[],teamId:_}})}).catch(function(V){return v.logger.error(V)})}else m.obj={members:T.members,invalid:T.invalid,teamId:_};this.superTeamMembersData[b]=void 0},a.onSyncSuperTeamMembers=function(m){var v,g=this.db,b=[],T=[],_=m.content.members||[],y=m.raw.ser;if(m.obj&&(v=m.obj.teamId),v||(v=m.content.teamId),i(_).call(_,function(Ce){(Ce=n(d).call(d,Ce)).valid?T.push(Ce):b.push(Ce)}),g.enable){this.superTeamMembersData[y]=this.superTeamMembersData[y]||{teamId:v,pArr:[]};var O=o.resolve();m.content&&m.content.isAll&&(O=g.deleteSuperTeamMembers(v));var V=O.then(function(){return g.mergeSuperTeamMembers(v,T,b)}).then(function(){return o.resolve()});this.superTeamMembersData[y].pArr.push(V)}else this.superTeamMembersData[y]=this.superTeamMembersData[y]||{teamId:v,members:[],invalid:[]},T.length&&(this.superTeamMembersData[y].members=this.api.mergeTeamMembers(this.superTeamMembersData[y].members,T)),b.length&&(this.superTeamMembersData[y].invalid=this.api.mergeTeamMembers(this.superTeamMembersData[y].invalid,b));m.raw=void 0},a.onSyncMySuperTeamMembers=function(m){var v=this,g=v.db,b=d.reverseMembers(m.content.teamMembers);if(g.enable){var T=g.putSuperTeamMembers(b).then(function(){return g.updateMySuperTeamMembersTimetag(m.content.timetag)}).catch(function(_){return v.logger.error("superTeam::syncMySuperTeamMember: ",_),o.reject(_)});v.syncPromiseArray.push(T)}else v.syncResult.mySuperTeamMembers=b;v.mergeMySuperTeamMembers(b)},a.onSuperTeamMembers=function(m,v){var g,b=this.db,T=[],_=[],y=m.content.members||[];i(y).call(y,function(O){(O=n(d).call(d,O)).valid?_.push(O):T.push(O)}),m.obj&&(g=m.obj.teamId),g||(g=m.content.teamId||_[0]&&_[0].teamId),b.enable&&!v&&b.mergeSuperTeamMembers(g,_,T),m.obj={members:_,invalid:T,teamId:g}},a.onUpdateSuperTeamMember=function(m){if(m.updateTime||(m.updateTime=+new Date),this.logger.info("superTeam::onUpdateSuperTeamMember: ",m&&m.account),this.options.onUpdateSuperTeamMember(s.simpleClone(m)),this.account===m.account){var v=this.mySuperTeamMembersMap[m.teamId];this.logger.info("superTeam::onMySuperTeamMembers: ",[v]),this.options.onMySuperTeamMembers(s.simpleClone([v]))}var g={teamId:m.teamId,memberUpdateTime:m.updateTime};this.onUpdateSuperTeam(g);var b=this.db;b.enable&&b.updateSuperTeamMember(m)},a.onUpdateSuperTeam=function(m){this.logger.info("superteam::onUpdateSuperTeam:",m&&m.teamId),this.options.onUpdateSuperTeam(s.simpleClone(m));var v=this.db;v.enable&&v.updateSuperTeam(m)},a.mergeMySuperTeamMembers=function(m){s.isArray(m)||(m=[m]);var v=this.mySuperTeamMembersMap=this.mySuperTeamMembersMap||{};i(m).call(m,function(g){var b=g.teamId;v[b]=s.merge(v[b],g)})},a.updateSuperTeamSysMsgState=function(m,v){var g,b=m.error;b&&(v="error",b=s.filterObj(b,"code message")),g={idServer:m.obj.idServer,state:v,from:m.obj.from,type:m.obj.type},b&&(g.error=b),this.updateSysMsg(g)}},function(t,r,e){var n=e(9),o=e(3),i=e(23),a=e(35).fn,s=e(0),u=e(309);a.processNotify=function(c){switch(c.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs(c);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs(c);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs(c);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs(c,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs(c,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts(c);break;case"syncDonnop":this.onDonnop(c,!0);break;case"syncSessionAck":this.syncSessionAck(c);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck(c);break;case"syncRobots":this.onRobots(c);break;case"syncBroadcastMsgs":this.onBroadcastMsgs(c);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(c);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf(c);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming(c);break;case"syncStickTopSessions":this.syncStickTopSessions(c);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete(c)}},a.onDonnop=function(c,d){if(!c.error){var m=this,v=m.db,g=n(u).call(u,c.content.donnop);m.mergeDonnop(g);var b=m.dbDonnop();if(d){var T=c.content.timetag;m.timetags.donnop=T,v.enable&&(b=b.then(function(){return m.db.updateDonnopTimetag(T)}).catch(function(_){return m.logger.error("notify::onDonnop: ",_),o.reject(_)})),b.cmd="donnop",m.syncPromiseArray.push(b)}else m.onPushNotificationMultiportConfigUpdate()}},a.onUpdateDonnop=function(c){if(!c.error){var d=c.obj;d&&(this.mergeDonnop(s.filterObj(d,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},a.getPushNotificationMultiportConfig=function(){return s.merge({},this.pushNotificationMultiportConfig)},a.mergeDonnop=function(c){this.pushNotificationMultiportConfig=s.merge({},this.pushNotificationMultiportConfig,c)},a.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):o.resolve()},a.onPushNotificationMultiportConfigUpdate=function(){var c=this;i(function(){var d=c.getPushNotificationMultiportConfig();c.logger.info("link::onPushNotificationMultiportConfigUpdate:",d),c.options.onPushNotificationMultiportConfigUpdate(d)})}},function(t,r,e){var n=e(58),o=e(2),i=e(17),a=e(3),s=e(8),u=e(5),c=e(6),d=e(10),m=e(9),v=e(138),g=e(7),b=e(23),T=e(25),_=e(52),y=e(41),O=e(59),V=e(60),Ce=e(61),ae=e(62),Fe=e(47),_e=e(15),de=e(85),oe=e(86),he=e(70),Ve=e(32);function le($e,er){var or=oe!==void 0&&he($e)||$e["@@iterator"];if(!or){if(Ve($e)||(or=function(mr,vr){var Tr;if(mr){if(typeof mr=="string")return ie(mr,vr);var Ir=_e(Tr=Object.prototype.toString.call(mr)).call(Tr,8,-1);if(Ir==="Object"&&mr.constructor&&(Ir=mr.constructor.name),Ir==="Map"||Ir==="Set")return de(mr);if(Ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ir))return ie(mr,vr)}}($e))||er&&$e&&typeof $e.length=="number"){or&&($e=or);var ze=0,rr=function(){};return{s:rr,n:function(){return ze>=$e.length?{done:!0}:{done:!1,value:$e[ze++]}},e:function(mr){throw mr},f:rr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et,Lt=!0,cr=!1;return{s:function(){or=or.call($e)},n:function(){var mr=or.next();return Lt=mr.done,mr},e:function(mr){cr=!0,Et=mr},f:function(){try{Lt||or.return==null||or.return()}finally{if(cr)throw Et}}}}function ie($e,er){(er==null||er>$e.length)&&(er=$e.length);for(var or=0,ze=new Array(er);or<er;or++)ze[or]=$e[or];return ze}function Ie($e,er){var or=u($e);if(O){var ze=O($e);er&&(ze=i(ze).call(ze,function(rr){return V($e,rr).enumerable})),or.push.apply(or,ze)}return or}var pe=e(35).fn,kt=e(0),Ue=kt.undef,Dt=e(44),tr=e(150),dr=e(202),pr=e(152),ar=e(290),hr=e(13),Ne=e(74),nr=e(72);function sr($e,er,or){var ze=this,rr=ze.message.Message,Et=or?"offlineFilterMsgs":"offlineMsgs";if(!(er&&er.length>0))return a.resolve();var Lt=rr.getMaxTimetag(er),cr=er[0].scene,mr=er[0].target;ze.markMsgRead(er),er=rr.deduplication(er),er=rr.sortMsgs(er);var vr=ze.genSessionByMsgs(er);ze.cacheSyncedSession(vr);var Tr=ze.putMsg(er,"offlineMsgs").then(function(Ir){var kr=Ir;(kr=ze.filterIgnore(kr)).length&&(ze.logger.info("msg::onOfflineMsgs： toreLastSession",Et,$e,kr.length),ze.syncResult[Et]=ze.syncResult[Et]||[],ze.syncResult[Et].push({sessionId:$e,scene:cr,to:mr,msgs:kr,timetag:Lt}))}).catch(function(Ir){return ze.logger.error("msg::onOfflineMsgs: ",Ir),a.reject(Ir)});return Tr.cmd="offlineMsgs-"+$e,Tr}pe.processMsg=function($e){switch($e.cmd){case"sendMsg":this.onSendMsg($e);break;case"msg":this.onMsg($e);break;case"sysMsg":this.onSysMsg($e);break;case"broadcastMsg":this.onBroadcastMsg($e);break;case"sendCustomSysMsg":this.onSendSysMsg($e);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs($e);break;case"msgFtsInServer":case"msgFtsInServerByTiming":this.onmsgFtsInServer($e);break;case"syncSendMsg":this.onMsg($e);break;case"deleteSessions":this.onDeleteSessions($e);break;case"sendMsgReceipt":this.onSendMsgReceipt($e);break;case"msgReceipt":this.onMsgReceipt($e);break;case"onDeleteMsg":this.onDeleteMsg($e);break;case"onMsgDeleted":this.onMsgDeleted($e);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming($e);break;case"onMarkSessionAck":this.onMarkSessionAck($e);break;case"syncMarkSessionAck":this.syncMarkSessionAck($e);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession($e);break;case"deleteMsgSelf":this.deleteMsgSelf($e);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch($e);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf($e);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch($e);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs($e);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs($e)}},pe.checkIgnore=function($e){var er=this;o($e).call($e,function(or){if(!or.ignore){try{er.options.shouldIgnoreMsg(or)&&(or.ignore=!0)}catch(rr){throw er.logger.error("userOption:shouldIgnoreMsg function error",rr),rr}var ze;try{ze=er.options.shouldIgnoreNotification(or)}catch(rr){throw er.logger.error("userOption:shouldIgnoreNotification function error",rr),rr}or.type==="notification"&&ze&&(or.ignore=!0)}})},pe.filterIgnore=function($e){return i($e).call($e,function(er){return!er.ignore})},pe.genSessionByMsgs=function($e){return this.checkIgnore($e),pr.genSessionByMsgs(this.message.Message,$e)},pe.onRoamingMsgs=function($e){var er=this,or=er.message,ze=or.Message,rr=ze.getMaxTimetag,Et=or.reverseMsgs($e.content.msgs),Lt=rr(Et);Et=ze.deduplication(Et);var cr=(Et=ze.sortMsgs(Et))[0],mr=cr.sessionId,vr=er.genSessionByMsgs(Et);er.cacheSyncedSession(vr);var Tr=er.putMsg(Et,"roamingMsgs").then(function(Ir){var kr=(Et=Ir).length,Ar=(Et=er.filterIgnore(Et)).length;kr!==Ar&&er.logger.info("msg::onRoamingMsgs msg length before filter: "+kr+" after filter: "+Ar),Et.length&&(er.logger.info("msg::onRoamingMsgs: putRoamingMsgs",mr,Et.length),er.syncResult.roamingMsgs=er.syncResult.roamingMsgs||[],er.syncResult.roamingMsgs.push({sessionId:mr,scene:cr.scene,to:cr.target,msgs:Et,timetag:Lt}),er.syncing||er.onSyncDone())}).catch(function(Ir){return er.logger.error("msg::onRoamingMsgs: ",Ir),a.reject(Ir)});Tr.cmd="roamingMsgs-"+mr,er.syncPromiseArray.push(Tr)},pe.onOfflineMsgs=function($e,er){var or,ze=this,rr=this.message,Et=null;er&&(Et={filter:!0});var Lt=rr.reverseMsgs($e.content.msgs,{modifyObj:Et});Lt=nr.deduplication(Lt);var cr={};o(Lt).call(Lt,function(Tr){cr[Tr.sessionId]=cr[Tr.sessionId]||[],cr[Tr.sessionId].push(Tr)});var mr=s(or=u(cr)).call(or,function(Tr){return{sessionId:Tr,msgs:cr[Tr]}}),vr=kt.asyncPool(50,mr,function(Tr){return sr.call(ze,Tr.sessionId,Tr.msgs,er)});this.syncPromiseArray.push(vr)},pe.completeMsg=function($e){return $e.from=this.account,$e.fromNick=this.myInfo&&this.myInfo.nick,$e.fromClientType="Web",$e.fromDeviceId=Dt.deviceId,$e.time||($e.time=+new Date),$e},pe.amendMsg=function($e){if($e.scene==="team"){var er=kt.get(this.myTeamMembersMap,$e.to+".nickInTeam");er&&($e.fromNick=er)}else if($e.scene==="superTeam"){var or=kt.get(this.mySuperTeamMembersMap,$e.to+".nickInTeam");or&&($e.fromNick=or)}return $e},pe.onMsgs=function($e){var er=this,or=er.reporterHook.getSafeClock(),ze=er.message.reverseMsgs($e.content.msgs,{mapper:function(rr){var Et=function(Lt){for(var cr=1;cr<arguments.length;cr++){var mr,vr,Tr=arguments[cr]!=null?arguments[cr]:{};cr%2?o(mr=Ie(Object(Tr),!0)).call(mr,function(Ir){n(Lt,Ir,Tr[Ir])}):Ce?ae(Lt,Ce(Tr)):o(vr=Ie(Object(Tr))).call(vr,function(Ir){Fe(Lt,Ir,V(Tr,Ir))})}return Lt}({},rr);if(Et.__receiveTime=$e.__receiveTime,Et.__handleTime=or,Et.__clientExt)try{Et.__clientExt=JSON.parse(Et.__clientExt)}catch{er.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(Et.__clientExt))}return er.handleMsg(Et),Et}});er.pushMsgDelay(ze)},pe.onMsg=function($e,er){var or;if($e.content.msg.attach){var ze=null;try{ze=JSON.parse($e.content.msg.attach)}catch{}if(ze&&ze.url&&kt.get(this.mixStorePolicy,"s3Policy.dlcdns")){var rr,Et=le(this.mixStorePolicy.s3Policy.dlcdns);try{for(Et.s();!(rr=Et.n()).done;){var Lt,cr=rr.value;c(Lt=ze.url).call(Lt,cr)>=0&&(ze.isS3=!0,cr!==this.mixStorePolicy.s3Policy.dlcdn&&(ze.url=ze.url.replace(cr,this.mixStorePolicy.s3Policy.dlcdn)))}}catch(vr){Et.e(vr)}finally{Et.f()}}$e.content.msg.attach=d(ze)}var mr=m(or=this.message).call(or,$e.content.msg);if(mr.__receiveTime=$e.__receiveTime,mr.__handleTime=this.reporterHook.getSafeClock(),kt.get($e,"content.msg.__clientExt"))try{mr.__clientExt=JSON.parse($e.content.msg.__clientExt)}catch{this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat($e.content.msg.__clientExt))}er&&(mr.filter=!0),$e.cmd!=="syncSendMsg"||mr.from!==mr.to?(this.pushMsgDelay([mr]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:mr})):this.handleMsg(mr)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",mr.idClient,mr.idServer)},pe.onBroadcastMsgs=function($e){var er=$e.content.broadcastMsgs;er=v(er).call(er,function(or,ze){return or.broadcastId-ze.broadcastId}),this.putBroadcastMsgs(er)},pe.onBroadcastMsg=function($e){var er=$e.content.broadcastMsg;er.time=er.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:er}):er&&this.putBroadcastMsg(er)},pe.pushMsgTask=function($e){this.msgPromise=this.msgPromise.then(function(){return $e()})},pe.pushMsgDelay=function($e){if($e&&$e.length>0){var er=this;if(er.msgStatEnable&&!hr.isWeixinApp){var or,ze=s($e).call($e,function(rr){return{appkey:er.options.appKey,accid:rr.to,fromAccid:rr.from,msgId:rr.idServer,serverTime:rr.time,receiveTime:er.reporterHook.getNTPTime(),sessionId:er.sdkSession,platform:"web",sdk_ver:hr.info.version,manufactor:Ne.name+" "+Ne.version}});er.msgDelayArr=g(or=er.msgDelayArr).call(or,ze),er.msgDelayArr.length>5&&er.doReportMsgDelay()}}},pe.doReportMsgDelay=function(){var $e,er=d(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(ar.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",er),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=b(T($e=this.doReportMsgDelay).call($e,this),1e4))},pe.handleMsg=function($e){var er=this,or=er.db,ze=$e.time;er.markMsgRead($e),er.msgPromise=er.msgPromise.then(function(){return er.putMsg($e,"onMsg")}).then(function(){var rr;return er.logger.info(g(rr="msg::handleMsg:putMsg: done ".concat($e.idServer," ")).call(rr,$e.idClient)),or.enable?$e.scene==="superTeam"?or.updateSuperTeamRoamingMsgTimetag(ze):or.updateRoamingMsgTimetag(ze):(er.timetags[$e.scene==="superTeam"?"superTeamRoamingMsgs":"roamingMsgs"]=ze,a.resolve())}).then(function(){if($e)return er.checkUserUpdate($e)}).then(function(){if($e){var rr=$e.type;switch(er.logger.info("msg::handleMsg:checkUserUpdate: "+$e.scene+" "+rr+" msg"+(rr==="notification"?" "+$e.attach.type:"")),rr){case"notification":return er.onTeamNotificationMsg($e)}}}).then(function(){$e&&!$e.ignore&&(er.logger.info("msg::handleMsg:onmsg: ",$e.idClient,$e.idServer),b(function(){var rr=$e.scene==="p2p";if(hr.isBrowser&&$e.flow!=="out"){var Et={msgId:$e.idServer,clientId:$e.idClient,receiveTime:er.reporterHook.getNTPTime($e.__receiveTime),serverTime:$e.time,callbackTime:er.reporterHook.getNTPTime(),preHandleTime:er.reporterHook.getNTPTime($e.__handleTime),fromAccid:$e.from,toAccid:er.options.account,type:er.message.sceneMap[$e.scene],tid:rr?"":$e.to,result:200,failReason:"",rt:_(er.reporterHook.getSafeClock()-$e.__receiveTime)},Lt=kt.get($e,"__clientExt.statistics.apiCallingTime"),cr=kt.get($e,"__clientExt.statistics.sendTime");Lt&&cr&&(Et.apiCallingTime=Lt,Et.sendTime=cr,Et.attachUploadDuration=kt.get($e,"__clientExt.statistics.attachUploadDuration")||0),er.reporter&&er.reporter.report("msgReceive",Et)}delete $e.__receiveTime,delete $e.__handleTime,delete $e.__clientExt,er.options.onmsg(kt.copy($e))},0))}).catch(function(rr){rr.callFunc="msg::handleMsg",er.onCustomError("消息处理错误",rr)})},pe.putMsg=function($e,er){if(kt.isArray($e)||($e=[$e]),i($e[0]))return a.resolve($e);var or,ze=this,rr=ze.db,Et=rr.enable,Lt=a.resolve(),cr=ze.message.Message.getLastMsg($e),mr=cr.flow,vr=ze.genSessionByMsgs($e);Ir(vr);var Tr=[];function Ir(kr){er!=="roamingMsgs"&&er!=="offlineMsgs"||ze.cacheSyncedSession(kr)}return Lt=(Lt=(Lt=Lt.then(function(){var kr;return Et||ze.options.autoMarkRead||er==="roamingMsgs"||!vr||(ze.sessionUnreadMsgs=ze.sessionUnreadMsgs||{},ze.sessionUnreadMsgs[vr.id]=ze.sessionUnreadMsgs[vr.id]||[],ze.sessionUnreadMsgs[vr.id]=g(kr=ze.sessionUnreadMsgs[vr.id]).call(kr,i($e).call($e,function(Ar){try{return ze.options.shouldCountNotifyUnread(Ar)}catch(Nr){throw ze.logger.error("userOption:shouldCountNotifyUnread function error",Nr),Nr}}))),er==="offlineMsgs"||er==="roamingMsgs"?a.reject($e):Et?rr.putMsg($e):$e}).then(function(kr){var Ar=[];return o($e).call($e,function(Nr){ze.checkMsgUnique(Nr)&&Ar.push(Nr)}),$e=Ar,Tr=Et?kr:$e,a.resolve($e)})).then(function(kr){return kr.length&&Et&&vr?new a(function(Ar){rr.getSessions({sessionId:vr.id}).then(function(Nr){if(Nr&&Nr.lastMsg){var Mn=Nr.lastMsg;vr.lastMsg&&vr.lastMsg.time<Mn.time&&(vr.lastMsg=Mn)}Tr&&Tr.length?vr?rr.putSession(vr).then(function(Or){Ar(Or)}):Ar(Nr):(Tr=kr,Ar(Nr))})}):a.resolve(vr)})).then(function(kr){if(vr&&Tr.length){or=cr.sessionId!==ze.currSessionId;var Ar=er==="roamingMsgs",Nr=ze.options.syncSessionUnread,Mn=vr.id,Or=ze.getSessionInCache(Mn,!0)||{},Pr=Or.ack||0;if(er==="offlineMsgs"||Ar&&Nr||er==="onMsg"&&mr==="in"&&or){var Rr;if(Et&&kr){var Qr=Or.unread||0;(vr=kr).unread=Qr,Pr=Pr||vr.ack||0}else(kr=Or)&&(vr.unread=kr.unread||0);Ir(vr),vr.unread=vr.unread||0;var hn=0;o(Tr).call(Tr,function(qr){var Gn;try{Gn=ze.options.shouldCountNotifyUnread(qr)}catch(Lr){throw ze.logger.error("userOption:shouldCountNotifyUnread function error",Lr),Lr}var jn=(qr.type!=="notification"||qr.type==="notification"&&Gn)&&(Ue(qr.isUnreadable)||qr.isUnreadable);if(jn&&Nr&&(jn=qr.time>Pr&&qr.flow!=="out"),jn&&(hn++,Nr&&!Et)){var Jr=Or.unreadMsgs||[];Jr.push(qr),vr.unreadMsgs=Jr}}),vr.unread+=hn;var Ur=kt.secureOutput("session",vr);if(Ur.unreadMsgs&&(Ur.unreadMsgs=s(Rr=Ur.unreadMsgs).call(Rr,function(qr){return qr&&qr.idServer})),ze.logger.info("msg::putMsg:updateSession: ",Ur),Ir(vr),Et)return rr.updateSession({id:vr.id,unread:vr.unread})}}}),er==="onMsg"&&(Lt=Lt.then(function(){$e.length&&vr&&(ze.onUpdateSession(vr),ze.options.syncSessionUnread&&!or&&ze.api.resetSessionUnread(ze.currSessionId))})),Lt.then(function(){return a.resolve($e)}).catch(function(kr){return kr&&kr.length?a.resolve(kr):a.reject(kr)})},pe.putBroadcastMsgs=function($e){var er=this,or=er.db,ze=$e.length;if(ze>0){if(er.doMarkBroadcastMsgsRead($e),or.enable){var rr=$e[ze-1].broadcastId;return or.updateBroadcastMsgTimetag(rr),or.putBroadcastMsg($e).then(function(){return b(function(){er.doMarkMsgsRead(),er.options.onbroadcastmsgs(kt.copy($e))},0),a.resolve($e)})}b(function(){er.options.onbroadcastmsgs(kt.copy($e))},0)}return $e},pe.putBroadcastMsg=function($e){var er=this,or=er.db;return er.doMarkBroadcastMsgsRead([$e]),or.enable?($e.broadcastId&&or.updateBroadcastMsgTimetag($e.broadcastId),or.putBroadcastMsg($e).then(function(){return b(function(){er.options.onbroadcastmsg(kt.copy($e))},0),a.resolve($e)})):(b(function(){er.options.onbroadcastmsg(kt.copy($e))},0),$e)},pe.doMarkBroadcastMsgsRead=function($e){$e=s($e).call($e,function(er){return er.broadcastId}),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:$e})},pe.cacheSyncedSession=function($e){if($e&&this.syncResult){$e=y({},$e),this.syncResult.sessions=this.syncResult.sessions||{};var er=$e.id,or=this.syncResult.sessions[er]||{};or&&or.ack>$e.ack&&($e.ack=void 0),or&&or.msgReceiptTime>$e.msgReceiptTime&&($e.msgReceiptTime=void 0);var ze=kt.get(or,"lastMsg.time"),rr=kt.get($e,"lastMsg.time");ze&&rr&&ze>rr&&($e.lastMsg=or.lastMsg),this.syncResult.sessions[er]=y(or,$e),this.syncResult.sessions[er]=y({},this.mergeSession(this.syncResult.sessions[er]))}},pe.checkMsgUnique=kt.genCheckUniqueFunc("idClient"),pe.revokeMsgUniqueCheck=function($e){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[$e]=!1)},pe.storeSendMsg=function($e){if(!this.syncing){var er=this.putMsg($e,"sendMsg");return this.msgPromise=this.msgPromise.then(function(){return er}),er}this.unhandledMsgs.push({type:"sendMsg",msg:$e})},pe.updateSendMsgError=function($e){if(!this.syncing){var er=this.updateMsg($e);return this.msgPromise=this.msgPromise.then(function(){return er}),er}this.unupdatedMsgs.push($e)},pe.onSendMsg=function($e,er){var or,ze,rr=this,Et=$e.content&&$e.content.msg,Lt=$e.obj&&$e.obj.msg||Et;if(Lt)if(this.logger.warn(g(or=g(ze="sendMsg::end: ".concat(Et&&Et.idServer," ")).call(ze,Lt.idClient," ")).call(or,$e&&$e.raw&&$e.raw.ser)),$e.obj)mr();else{var cr=rr.db;cr&&cr.enable&&cr.getMsgByIdClient(Lt.idClient).then(function(vr){vr&&(Lt=vr,mr(!1))}).catch(function(){return mr()})}else this.logger.error("sendMsg::error::get msg failed, msg empty");function mr(){var vr,Tr=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];rr.completeMsg(Lt);var Ir=$e.error&&$e.error.code===7101;$e.error&&!Ir||(Lt.idServer=Et.idServer,Lt.time=+Et.time,Et.yidunAntiSpamRes&&(Lt.yidunAntiSpamRes=Et.yidunAntiSpamRes),Et.callbackExt&&(Lt.callbackExt=Et.callbackExt)),Ir&&(Lt.isInBlackList=!0),$e.error?Lt.status="fail":Lt.status="success",Lt=Tr?m(vr=rr.message).call(vr,Lt):Lt,Lt=rr.amendMsg(Lt),er&&(Lt.filter=!0),$e.obj=Lt,rr.syncing?rr.unupdatedMsgs.push(Lt):rr.msgPromise=a.all([rr.msgPromise,$e.obj.promise]).then(function(kr){return kr.length||(Lt.resend=!0),rr.updateMsg(Lt).then(function(){return rr.options.syncSessionUnread&&rr.currSessionId===Lt.sessionId&&rr.api.resetSessionUnread(rr.currSessionId),rr.resolveMsgReceiptTask(Lt),Lt})}).catch(function(kr){rr.logger.error("onSendMsg::dealMsg error",kr)})}},pe.updateLocalMsg=function($e){var er=this.updateMsg($e);return this.msgPromise=this.msgPromise.then(function(){return er}),er},pe.updateMsg=function($e){if(i($e)||this.options.shouldIgnoreMsg($e))return a.resolve($e);var er=this,or=er.db,ze=$e.status==="success",rr=pr.genSessionByMsg($e),Et=!!$e.isLocal;return er.onUpdateSession(rr),or.enable?or.updateMsg($e).then(function(Lt){var cr=or.updateSession(rr),mr=a.resolve();return ze&&Lt&&!Et&&(mr=$e.scene==="superTeam"?or.updateSuperTeamRoamingMsgTimetag(Lt.time):or.updateRoamingMsgTimetag(Lt.time)),a.all([cr,mr])}).catch(function(Lt){er.logger.error("updateMsg error",Lt)}):(ze&&!Et&&(er.timetags.roamingMsgs=$e.time),a.resolve($e))},pe.updateRoamingMsgTimetag=function($e){var er=this.db;return er.enable?er.updateRoamingMsgTimetag($e):(this.timetags.roamingMsgs=$e,a.resolve($e))},pe.checkUserUpdate=function($e){var er=this,or=$e.from;return er.logger.info("handleMsg::checkUserUpdate: ",or,er.account),or===er.account?a.resolve():new a(function(ze){var rr=er.userSet[or];if(rr){var Et=+rr.updateTime,Lt=+$e.userUpdateTime;!isNaN(Et)&&!isNaN(Lt)&&kt.isNumber(Et)&&kt.isNumber(Lt)&&Et<Lt?cr():ze()}else cr();function cr(){er.api.getUser({account:or,sync:!0,done:function(mr,vr){mr||b(function(){er.logger.log("user::checkUserUpdate: onupdateuser",vr&&vr.account),er.options.onupdateuser(vr)},0),ze()}})}})},pe.processUnsettledMsgs=function(){var $e,er,or=this;o($e=or.unhandledMsgs).call($e,function(ze){var rr=ze.msg;switch(ze.type){case"onMsg":or.handleMsg(rr);break;case"sendMsg":or.msgPromise=or.msgPromise.then(function(){return or.putMsg(rr)});break;case"onBroadcastMsg":or.msgPromise=or.msgPromise.then(function(){return or.putBroadcastMsg(rr)})}}),o(er=or.unupdatedMsgs).call(er,function(ze){or.msgPromise=or.msgPromise.then(function(){return or.updateMsg(ze)})}),or.resetUnsettledMsgs()},pe.onTeamNotificationMsg=function($e){var er=$e.attach,or=er.type,ze=$e.from,rr=$e.to,Et=$e.time,Lt=er.team,cr=er.account,mr=er.accounts;switch(or){case"updateTeam":return Lt.updateTime=Et,this.onUpdateTeam(Lt);case"addTeamMembers":return this.onAddTeamMembers($e,Lt,mr);case"removeTeamMembers":return this.onRemoveTeamMembers(Lt,rr,mr);case"acceptTeamInvite":return this.onAddTeamMembers($e,Lt,[ze]);case"passTeamApply":return this.onAddTeamMembers($e,Lt,[cr]);case"addTeamManagers":return this.updateTeamManagers($e,rr,mr,!0,Et);case"removeTeamManagers":return this.updateTeamManagers($e,rr,mr,!1,Et);case"leaveTeam":return this.onRemoveTeamMembers(Lt,rr,[ze]);case"dismissTeam":return this.onDismissTeam(rr,Et);case"transferTeam":return this.transferTeam($e,Lt,ze,cr);case"updateTeamMute":return this.onUpdateTeamMembersMute($e,Lt,[cr],er.mute);case"updateSuperTeam":return Lt.updateTime=Et,this.onUpdateSuperTeam(Lt);case"acceptSuperTeamInvite":return this.onAddSuperTeamMembers($e,Lt,[$e.from]);case"addSuperTeamMembers":return this.onAddSuperTeamMembers($e,Lt,mr);case"passSuperTeamApply":return this.onAddSuperTeamMembers($e,Lt,[cr]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(Lt,rr,mr);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(Lt,rr,[ze]);case"dismissSuperTeam":return this.onDismissSuperTeam(rr,Et);case"transferSuperTeam":return this.transferSuperTeam($e,Lt,ze,cr);case"addSuperTeamManagers":return this.updateSuperTeamManagers($e,rr,mr,!0,Et);case"removeSuperTeamManagers":return this.updateSuperTeamManagers($e,rr,mr,!1,Et);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute($e,Lt,mr,er.mute)}},pe.onAddSuperTeamMembers=function($e,er,or){var ze=this.db,rr=dr.assembleMembers(er,or);$e.attach.members=rr;var Et={team:er,accounts:or,members:rr};if(this.logger.info("team::onAddSuperTeamMembers: ".concat(Et.team.teamId,", "),Et.accounts),this.options.onAddSuperTeamMembers(kt.simpleClone(Et)),ze.enable){var Lt=ze.putSuperTeamMembers(rr),cr=ze.putSuperTeam(er);return a.all([Lt,cr])}},pe.onRemoveSuperTeamMembers=function($e,er,or){var ze=this.db,rr={team:$e,teamId:er,accounts:or};if(this.logger.info("team::onRemoveSuperTeamMembers: ".concat(er,", "),rr.accounts),this.options.onRemoveSuperTeamMembers&&this.options.onRemoveSuperTeamMembers(kt.simpleClone(rr)),$e&&ze.enable){if(c(or).call(or,this.account)===-1){var Et=ze.removeSuperTeamMembersByAccounts(er,or),Lt=a.resolve();return $e&&(Lt=ze.putSuperTeam($e)),a.all([Et,Lt])}return ze.leaveSuperTeam(er)}},pe.onDismissSuperTeam=function($e,er){var or=this.db,ze={teamId:$e};if(this.logger.info("team::onDismissSuperTeam:",$e),this.options.onDismissSuperTeam(ze),or.enable)return or.dismissSuperTeam($e,er)},pe.onAddTeamMembers=function($e,er,or){var ze=this,rr=ze.db,Et=er.teamId,Lt=tr.assembleMembers(er,or);$e.attach.members=Lt;var cr={team:er,accounts:or,members:Lt};if(ze.logger.info("team::onAddTeamMembers: ",Et,or),ze.options.onAddTeamMembers(kt.simpleClone(cr)),rr.enable){var mr,vr=rr.putTeam(er);return c(or).call(or,ze.account)===-1?mr=rr.putTeamMembers(Lt):(ze.logger.log("team::onAddTeamMembers: user join team",Et),vr=new a(function(Tr){ze.api.getTeamMembers({teamId:Et,sync:!0,done:function(){Tr()}})})),a.all([mr,vr])}},pe.onRemoveTeamMembers=function($e,er,or){var ze=this.db,rr={team:$e,teamId:er,accounts:or};if(this.logger.info("team::onRemoveTeamMembers: ".concat(er),or),this.options.onRemoveTeamMembers(kt.simpleClone(rr)),$e&&ze.enable){if(c(or).call(or,this.account)===-1){var Et=ze.removeTeamMembersByAccounts(er,or),Lt=a.resolve();return $e&&(Lt=ze.putTeam($e)),a.all([Et,Lt])}return ze.leaveTeam(er)}},pe.updateTeamManagers=function($e,er,or,ze,rr){var Et=this.db,Lt=$e.attach.members=s(or).call(or,function(Ir){return{id:tr.genId(er,Ir),type:ze?"manager":"normal",updateTime:rr,account:Ir}}),cr={teamId:""+er,memberUpdateTime:rr};$e.attach.team=cr;var mr={team:cr,accounts:or,isManager:ze,members:Lt};if(this.logger.info("team::updateTeamManagers:",er,or,ze),this.options.onUpdateTeamManagers(kt.simpleClone(mr)),Et.enable){var vr=Et.updateTeam(cr),Tr=Et.updateTeamManagers(er,or,ze,rr);return a.all([vr,Tr])}},pe.updateSuperTeamManagers=function($e,er,or,ze,rr){var Et=this.db,Lt=$e.attach.members=s(or).call(or,function(Ir){return{id:tr.genId(er,Ir),teamId:er,account:Ir,type:ze?"manager":"normal",updateTime:rr}}),cr={teamId:""+er,memberUpdateTime:rr};$e.attach.team=cr;var mr={team:cr,accounts:or,isManager:ze,members:Lt};if(this.logger.info("team::updateSuperTeamManagers:",er,or,ze),this.options.onUpdateSuperTeamManagers(kt.simpleClone(mr)),Et.enable){var vr=Et.updateSuperTeam(cr),Tr=Et.updateSuperTeamMembers(Lt);return a.all([vr,Tr])}},pe.onDismissTeam=function($e,er){var or=this.db,ze={teamId:$e};if(this.logger.info("team::onDismissTeam:",$e),this.options.onDismissTeam(ze),or.enable)return or.dismissTeam($e,er)},pe.transferTeam=function($e,er,or,ze){var rr=this.db,Et=er.teamId,Lt=er.memberUpdateTime,cr={id:tr.genId(Et,or),type:"normal",updateTime:Lt},mr={id:tr.genId(Et,ze),type:"owner",updateTime:Lt};$e.attach.members=[cr,mr];var vr={team:er,from:cr,to:mr};if(this.logger.info("team::transferTeam: from to",Et,or,ze),this.options.onTransferTeam(kt.simpleClone(vr)),rr.enable)return rr.transferTeam(er,or,ze)},pe.transferSuperTeam=function($e,er,or,ze){var rr=this.db,Et=er.teamId,Lt=er.memberUpdateTime,cr={teamId:Et,type:"normal",account:or,updateTime:Lt},mr={teamId:Et,type:"owner",account:ze,updateTime:Lt};$e.attach.members=[cr,mr];var vr={team:er,from:cr,to:mr};if(this.logger.info("team::transferSuperTeam: from to ",Et,or,ze),this.options.onTransferSuperTeam(kt.simpleClone(vr)),rr.enable)return rr.transferSuperTeam(er,cr,mr)},pe.onUpdateTeamMembersMute=function($e,er,or,ze){var rr=this.db,Et=s(or).call(or,function(vr){return{id:tr.genId(er.teamId,vr),account:vr,teamId:er.teamId,mute:ze,updateTime:er.memberUpdateTime}});$e.attach.members=Et;var Lt={team:er,accounts:or,members:Et,mute:ze};if(this.logger.info("team::onUpdateTeamMembersMute:",er.teamId,or,ze),this.options.onUpdateTeamMembersMute(kt.simpleClone(Lt)),rr.enable){var cr=rr.updateTeamMembers(Et),mr=rr.putTeam(er);return a.all([cr,mr])}},pe.onUpdateSuperTeamMembersMute=function($e,er,or,ze){var rr=this.db,Et=s(or).call(or,function(vr){return{id:dr.genId(er.teamId,vr),account:vr,teamId:er.teamId,mute:ze,updateTime:er.memberUpdateTime}});$e.attach.members=Et;var Lt={team:er,accounts:or,members:Et,mute:ze};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",er.teamId,or,ze),this.options.onUpdateSuperTeamMembersMute(kt.simpleClone(Lt)),rr.enable){var cr=rr.updateSuperTeamMembers(Et),mr=rr.putSuperTeam(er);return a.all([cr,mr])}},pe.onHistoryMsgs=function($e){$e.error||($e.obj.msgs=this.message.reverseMsgs($e.content.msgs))},pe.onmsgFtsInServer=function($e){if(!$e.error){var er=this.message.reverseMsgs($e.content.msgs);$e.obj.msgs=er,$e.content.msgs=er}},pe.isFilterMsgs=function($e){return!!i($e[0])},pe.splitMsgs=function($e,er,or,ze){o($e).call($e,function(rr){if(i(rr))ze.push(rr);else switch(rr.scene){case"p2p":er.push(rr);break;case"team":or.push(rr)}})},pe.markMsgRead=function($e,er){if(kt.isArray($e)||($e=[$e]),this.db.enable||this.options.autoMarkRead||er){var or=s($e).call($e,function(ze){return{flag:"msg",idServer:ze.idServer,scene:ze.scene,filter:i(ze),type:ze.type,attachType:ze.attach&&ze.attach.type}});this.msgAckBufferManager.add(or)}},pe.markSysMsgRead=function($e,er){if(kt.isArray($e)||($e=[$e]),this.db.enable||this.options.autoMarkRead||er){var or=s($e).call($e,function(ze){return{flag:"systemMsg",idServer:ze.idServer,scene:ze.scene,filter:i(ze),type:ze.type}});this.msgAckBufferManager.add(or)}},pe.handleMsgsAck=function($e){var er,or=this,ze={p2pSysMsgs:{sid:7,cid:3,msgs:[]},p2pMsgs:{sid:7,cid:2,msgs:[]},superTeamSysMsgs:{sid:21,cid:19,msgs:[]},teamMsgs:{sid:8,cid:3,msgs:[]},filterSysMsgs:{sid:101,cid:3,msgs:[]},filterMsgs:{sid:101,cid:2,msgs:[]},netcallMsgs:{sid:9,cid:11,msgs:[]}};o($e).call($e,function(rr){/^(netcallBill|netcallMiss|netcallReject)$/.test(rr.attachType)?ze.netcallMsgs.msgs.push(rr):i(rr)?rr.flag==="systemMsg"?ze.filterSysMsgs.msgs.push(rr):ze.filterMsgs.msgs.push(rr):rr.flag!=="systemMsg"?rr.scene==="p2p"?ze.p2pMsgs.msgs.push(rr):rr.scene==="team"&&ze.teamMsgs.msgs.push(rr):rr.scene==="superTeam"?ze.superTeamSysMsgs.msgs.push(rr):ze.p2pSysMsgs.msgs.push(rr)}),o(er=u(ze)).call(er,function(rr){return or.doMarkMsgsRead(ze[rr].sid,ze[rr].cid,ze[rr].msgs)})},pe.doMarkMsgsRead=function($e,er,or){or&&or.length&&(this.logger.log("markMsgRead::batchMarkRead",$e,er,or),this.sendCmd("batchMarkRead",{sid:$e,cid:er,ids:s(or).call(or,function(ze){return ze.idServer})}))}},function(t,r,e){var n=e(58),o=e(9),i=e(2),a=e(5),s=e(17),u=e(3),c=e(41),d=e(59),m=e(60),v=e(61),g=e(62),b=e(47);function T(Fe,_e){var de=a(Fe);if(d){var oe=d(Fe);_e&&(oe=s(oe).call(oe,function(he){return m(Fe,he).enumerable})),de.push.apply(de,oe)}return de}function _(Fe){for(var _e=1;_e<arguments.length;_e++){var de,oe,he=arguments[_e]!=null?arguments[_e]:{};_e%2?i(de=T(Object(he),!0)).call(de,function(Ve){n(Fe,Ve,he[Ve])}):v?g(Fe,v(he)):i(oe=T(Object(he))).call(oe,function(Ve){b(Fe,Ve,m(he,Ve))})}return Fe}var y=e(35).fn,O=e(751),V=e(753);function Ce(Fe,_e,de){var oe=this,he=this.timetags&&this.timetags.sync;this.db.enable&&he&&_e&&this.db.getMsgByIdClient(Fe).then(function(Ve){if(Ve&&!(Ve.commentTimetag&&Ve.commentTimetag<=he&&Ve.time<=he)){if(Ve.commentTimetag=_e.time,Ve.comments=Ve.comments||[],de){var le;Ve.comments=s(le=Ve.comments).call(le,function(kt){return kt.body!==_e.body||kt.from!==_e.from})}else{for(var ie,Ie=0;Ie<Ve.comments.length;Ie++)if(Ve.comments[Ie].from===_e.from&&Ve.comments[Ie].body===_e.body){Ve.comments[Ie]=_e,ie=!0;break}ie||Ve.comments.push(_e)}var pe={idClient:Ve.idClient,comments:Ve.comments,commentTimetag:Ve.commentTimetag};oe.db.updateMsg(pe)}})}function ae(Fe){Fe.scene=this.message.sceneReverseMap[+Fe.scene]||Fe.scene,Fe.time=+Fe.time}y.processMsgExtend=function(Fe){switch(Fe.cmd){case"getThreadMsgs":this.onGetThreadMsgs(Fe);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer(Fe);break;case"addQuickComment":this.changeQuickComment(Fe);break;case"deleteQuickComment":this.changeQuickComment(Fe,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment(Fe);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment(Fe,!0);break;case"getQuickComments":this.getQuickComments(Fe);break;case"addCollect":case"updateCollect":this.addCollect(Fe);break;case"deleteCollects":this.deleteCollects(Fe);break;case"getCollects":this.getCollects(Fe);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession(Fe,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession(Fe,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession(Fe,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange(Fe,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange(Fe,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange(Fe,"delete");break;case"getMsgPins":this.getMsgPins(Fe)}},y.onGetThreadMsgs=function(Fe){if(!Fe.error){var _e;Fe.obj.msgs=this.message.reverseMsgs(Fe.content.msgs),Fe.obj.threadMsg=o(_e=this.message).call(_e,Fe.content.threadMsg);var de=Fe.content.threadMsgsMeta||{};Fe.obj.total=de.total,Fe.obj.timetag=de.lastMsgTime}},y.onGetMsgsByIdServer=function(Fe){Fe.error||(Fe.obj.msgs=this.message.reverseMsgs(Fe.content.msgs))},y.changeQuickComment=function(Fe,_e){Fe.error||(Fe.obj.comment.time=Fe.content.timetag,Fe.obj.comment=o(O).call(O,Fe.obj.comment),ae.call(this,Fe.obj.msg),Ce.call(this,Fe.obj.msg.idClient,Fe.obj.comment,_e))},y.onQuickComment=function(Fe,_e){if(Fe.content){var de=Fe.content,oe=de.comment,he=de.msg;oe&&he&&(ae.call(this,he),oe=o(O).call(O,oe),_e?this.options.onDeleteQuickComment(Fe.content.msg,oe):this.options.onQuickComment(Fe.content.msg,oe),Ce.call(this,he.idClient,oe,_e))}},y.getQuickComments=function(Fe){var _e,de=this;if(!Fe.error){var oe=Fe.obj.idMap,he=Fe.obj.indexMap,Ve=Fe.content&&Fe.content.commentRes||[];i(Ve).call(Ve,function(le){var ie=[],Ie=de.parser.unserializeMap.comment;if(+le.modify==1)try{ie=JSON.parse(le.detail)}catch(kt){de.logger.warn("getQuickComments parse detail error",kt)}if(i(ie).call(ie,function(kt,Ue){var Dt,tr={};i(Dt=a(kt)).call(Dt,function(dr){tr[Ie[dr]]=kt[dr]}),tr=o(O).call(O,tr),ie[Ue]=tr}),le.timestamp=+le.timestamp,oe[le.idClient]){var pe={idClient:le.idClient,commentTimetag:le.timestamp};oe[le.idClient].commentTimetag=le.timestamp,+le.modify==1&&(oe[le.idClient].comments=ie,pe.comments=ie),de.db.enable&&de.db.updateMsg(pe)}else oe[le.idClient]={idServer:le.idServer,idClient:le.idClient,comments:ie,commentTimetag:le.timestamp,scene:de.message.sceneReverseMap[le.scene]||le.scene}}),Fe.obj=[],i(_e=a(he)).call(_e,function(le){Fe.obj[he[le]]=oe[le]})}},y.addCollect=function(Fe){Fe.error||(Fe.obj.collect=o(V).call(V,Fe.content.collect))},y.deleteCollects=function(Fe){Fe.error||(Fe.obj.deleteNum=Fe.content.deleteNum)},y.getCollects=function(Fe){if(!Fe.error){var _e=[],de=Fe.content.collectList||[];i(de).call(de,function(oe){_e.push(o(V).call(V,oe))}),Fe.obj.collectList=_e,Fe.obj.total=Fe.content.total}},y.onChangeStickTopSession=function(Fe,_e){var de=this;if(!Fe.error){var oe=Fe.content.stickTopSession||Fe.obj.stickTopSession||{},he=Fe.content.timetag||+oe.updateTime,Ve=oe.id.split("|");Ve[0]==="super_team"&&(Ve[0]="superTeam"),oe={id:Ve.join("-"),scene:Ve[0],to:Ve[1],topCustom:oe.topCustom||""},_e==="delete"?oe.isTop=!1:_e==="add"&&(oe.isTop=!0),oe=this.onUpdateSession(oe),Fe.obj&&(Fe.obj.stickTopSession=oe),this.db.enable&&(this.db.updateSession(oe).then(function(le){le||de.db.putSession(oe)}),this.db.updateTimetag("stickTopSessions",he))}},y.pinMsgChange=function(Fe,_e){var de=this;if(!Fe.error){Fe.content=Fe.content||{};var oe=this,he=this.db,Ve=Fe.obj&&Fe.obj.msg,le=Fe.content.msg||Ve||{},ie=Fe.content.pinTag||Fe.obj.pinTag,Ie=Fe.content.timetag||+ie.updateTime,pe=u.resolve();ae.call(this,le),he.enable&&(pe=he.getMsgByIdClient(le.idClient)),ie.createTime&&(ie.createTime=+ie.createTime),ie.updateTime&&(ie.updateTime=+ie.updateTime),pe.then(function(kt){return le=kt||le,kt?le=kt:le.sessionId=le.scene+"-"+de.message.Message.getMsgTarget(le,de.account),Ve?(Fe.obj.msg=le,Fe.obj.pinTag=ie):de.options.onPinMsgChange({msg:le,pinTag:ie},_e),function(){he.enable&&he[_e==="delete"?"deleteMsgPin":"putMsgPin"](_(_({},le),{},{pinFrom:ie.pinFrom,pinCustom:ie.pinCustom})).then(function(){var Ue="pin-"+le.sessionId,Dt=oe.timetags.sync;return he.getTimetag(Ue).then(function(tr){return tr>Dt?he.updateTimetag(Ue,Ie):u.resolve()})}).catch(function(Ue){oe.logger.error("msgExtend::pinMsgChange:error",Ue)})}(),u.resolve}).then(function(){}),Fe.promise=pe}},y.getMsgPins=function(Fe){var _e=this;if(!Fe.error){var de=this.db,oe=Fe.content||{};if(oe.pins=oe.pins||[],oe.modify){var he,Ve=[];de.enable&&(de.updateTimetag("pin-"+Fe.obj.id,oe.timetag),i(he=oe.pins).call(he,function(le){le.sessionId=Fe.obj.id,Ve.push(de.getMsgByIdClient(le.idClient))})),Fe.promise=u.all(Ve).then(function(le){var ie;i(ie=oe.pins).call(ie,function(Ie,pe){le[pe]?c(Ie,le[pe]):(Ie.sessionId=Fe.obj.id,ae.call(_e,Ie))}),Fe.obj.pins=oe.pins,de.enable&&de.deleteMsgPins(Fe.obj.id).then(function(){return de.putMsgPins(oe.pins)}).catch(function(Ie){_e.logger.error("msgExtend::getMsgPins:change db error",Ie)})})}else de.enable?(de.updateTimetag("pin-"+Fe.obj.id,oe.timetag),Fe.promise=de.getMsgPins(Fe.obj.id).then(function(le){Fe.obj.pins=le||[]})):Fe.obj.pins=[]}}},function(t,r,e){var n=e(812);t.exports=n},function(t,r,e){e(813);var n=e(12);t.exports=n.Number.isInteger},function(t,r,e){e(1)({target:"Number",stat:!0},{isInteger:e(814)})},function(t,r,e){var n=e(28),o=Math.floor;t.exports=Number.isInteger||function(i){return!n(i)&&isFinite(i)&&o(i)===i}},function(t,r,e){var n=e(120),o=e(3),i=e(2),a=e(7),s=["time","from"],u=e(35).fn,c=e(0);u.onOfflineMsgReceipts=function(d){var m,v=this,g=v.db,b=d.content.msgReceipts,T=[],_=o.resolve();this.logger.info("onOfflineMsgReceipts",b),i(b).call(b,function(y){m={id:"p2p-"+y.from,msgReceiptTime:+y.time},v.cacheSyncedSession(m)}),v.syncResult.msgReceipts=T,g.enable&&(_=g.updateMsgReceiptsTimetag(d.content.timetag)),_.cmd=T,v.syncPromiseArray.push(_)},u.shouldUpdateSessionFromMsgReceipt=function(d,m){return!d||!d.msgReceiptServerTime||m.time>d.msgReceiptServerTime},u.genSessionFromMsgReceipt=function(d,m){var v=m.time,g={id:m.sessionId,msgReceiptTime:v,msgReceiptServerTime:v};return d&&d.id===m.sessionId&&(g=c.merge({},d,g)),d&&d.updateTime||(g.updateTime=v),g},u.onMsgReceipt=function(d){var m=this,v=m.db,g=d.content.msgReceipt;g.time=+g.time;var b=g.idClient,T=o.resolve();v.enable&&b&&(T=v.getMsgByIdClient(b)),this.logger.info("onMsgReceipt::",g),T.then(function(_){if(_){if(!_.idServer)return void(m.msgReceiptTasks[b]=g);_.time}else g.time;g.msgReceiptTime=g.time,g.sessionId="p2p-".concat(g.from),m.updateSessionMsgReceiptTime(g),g.time,g.from;var y=n(g,s);m.options.onMsgReceipts([y])})},u.resolveMsgReceiptTask=function(d){var m=this.msgReceiptTasks[d.idClient];m&&(m.msgReceiptTime=d.time,this.updateSessionMsgReceiptTime(m))},u.updateSessionMsgReceiptTime=function(d){var m=this.db,v={id:"p2p-"+d.from,msgReceiptTime:d.msgReceiptTime,msgReceiptServerTime:d.time};(this.getSessionInCache(v.id)||{}).msgReceiptTime>=v.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",d):(m.enable&&m.putSession(v),this.onUpdateSession(v))},u.onSendMsgReceipt=function(d){var m;if(!d.error)if(d.obj&&d.obj.msgReceipt){var v=d.obj.msgReceipt,g=+v.time,b=+d.content.msgReceipt.time,T=this.getSessionInCache("p2p-"+v.to);T?(this.logger.info(a(m="sendMsgReceipt on:: param time ".concat(g,", res time ")).call(m,b)),T.msgReceiptSendTime=Math.min(g,b)):this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt")}else this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout")},u.shouldSendMsgReceipt=function(d){if(d&&d.scene==="p2p"&&d.status==="success"){var m=this.getSessionInCache(d.sessionId);if(m){var v=m.msgReceiptSendTime;return!v||v<d.time}}return!1},u.isMsgRemoteRead=function(d){if(d&&d.scene==="p2p"&&d.flow==="out"&&d.status==="success"){var m=this.getSessionInCache(d.sessionId);if(m&&m.msgReceiptTime)return d.time<=m.msgReceiptTime}return!1}},function(t,r,e){var n=e(102),o=e(103),i=e(57),a=e(9),s=e(2),u=e(7),c=e(8),d=e(3),m=e(87),v=e(197),g=e(5),b=e(17),T=e(52),_=e(15),y=e(25),O=e(201),V=e(85),Ce=e(86),ae=e(70),Fe=e(32);function _e(Ue,Dt){var tr=Ce!==void 0&&ae(Ue)||Ue["@@iterator"];if(!tr){if(Fe(Ue)||(tr=function(nr,sr){var $e;if(nr){if(typeof nr=="string")return de(nr,sr);var er=_($e=Object.prototype.toString.call(nr)).call($e,8,-1);if(er==="Object"&&nr.constructor&&(er=nr.constructor.name),er==="Map"||er==="Set")return V(nr);if(er==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(er))return de(nr,sr)}}(Ue))||Dt&&Ue&&typeof Ue.length=="number"){tr&&(Ue=tr);var dr=0,pr=function(){};return{s:pr,n:function(){return dr>=Ue.length?{done:!0}:{done:!1,value:Ue[dr++]}},e:function(nr){throw nr},f:pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar,hr=!0,Ne=!1;return{s:function(){tr=tr.call(Ue)},n:function(){var nr=tr.next();return hr=nr.done,nr},e:function(nr){Ne=!0,ar=nr},f:function(){try{hr||tr.return==null||tr.return()}finally{if(Ne)throw ar}}}}function de(Ue,Dt){(Dt==null||Dt>Ue.length)&&(Dt=Ue.length);for(var tr=0,dr=new Array(Dt);tr<Dt;tr++)dr[tr]=Ue[tr];return dr}var oe=e(35).fn,he=e(151),Ve=e(152),le=e(0),ie=e(105).EMSyncType;function Ie(Ue,Dt){return pe.apply(this,arguments)}function pe(){return(pe=o(n.mark(function Ue(Dt,tr){var dr,pr,ar,hr,Ne,nr,sr,$e,er,or,ze,rr,Et,Lt=this;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(ar=(pr=this).db,hr=[],s(Dt).call(Dt,function(mr){Lt.revokeMsgUniqueCheck(mr.idClient),hr.push(mr.idClient)}),pr.options.rollbackDelMsgUnread){cr.next=14;break}return cr.next=7,ar.deleteMsg(hr);case 7:if(cr.t0=cr.sent,cr.t0){cr.next=10;break}cr.t0=[];case 10:return Ne=cr.t0,Ne=Object.prototype.toString.call(Ne)==="[object Array]"?Ne:[Ne],pr.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(Ne.length," rows")),cr.abrupt("return");case 14:return nr=!1,sr=pr.options.cbUpdateSession||y(dr=pr.updateSessionInDbWithNotify).call(dr,pr),$e=pr.getSessionInCache(tr)||{id:tr},er=$e.lastMsg||{},O(hr).call(hr,er.idClient)&&(nr=!0),pr.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",tr,nr,$e.unread),cr.next=22,ar.deleteMsg(hr);case 22:if(cr.t1=cr.sent,cr.t1){cr.next=25;break}cr.t1=[];case 25:if(or=cr.t1,or=Object.prototype.toString.call(or)==="[object Array]"?or:[or],pr.logger.info("msg::_deleteMsgSelfBatchInDb affect:",or.length," rows"),!nr){cr.next=34;break}return cr.next=31,ar.getMsgs({sessionId:tr,limit:1});case 31:ze=cr.sent,er=ze&&ze[0]?ze[0]:null,$e.lastMsg=er;case 34:if(rr=!1,$e&&$e.unread&&(Et=$e&&$e.ack||0,s(or).call(or,function(mr){var vr=!0;if(mr.type==="notification")try{vr=pr.options.shouldCountNotifyUnread(mr)}catch(Tr){throw pr.logger.error("userOption:shouldCountNotifyUnread function error",Tr),Tr}vr&&Et<mr.time&&mr.flow==="in"&&($e.unread=$e.unread>0?$e.unread-1:0,rr=!0)})),!nr&&!rr){cr.next=39;break}return pr.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",tr,$e.unread),cr.abrupt("return",sr($e));case 39:case"end":return cr.stop()}},Ue,this)}))).apply(this,arguments)}function kt(Ue,Dt){Dt=Dt||new Date().getTime();var tr=this.db,dr=this.getSessionInCache(Ue),pr=this.options.rollbackClearMsgsUnread!==!1,ar=[];return tr.enable&&ar.push(tr.deleteMsgsBySessionId({sessionId:Ue,end:Dt})),pr&&dr&&(dr=this.mergeSession({id:dr.id,unread:0,lastMsg:null,unreadMsgs:[]}),dr=this.onUpdateSession(dr)),tr.enable&&pr&&dr&&ar.push(tr.updateSession(dr)),d.all(ar)}oe.onDeleteMsg=function(Ue){var Dt=this.db;if(delete Ue.obj.sysMsg,!Ue.error){var tr=Ue.obj.msg;Ue.promise=this.deleteLocalMsg(tr).then(function(){if(Dt.enable){var dr=tr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";Dt.getTimetag(dr).then(function(pr){pr=pr||0,i()+1>=pr&&Dt.updateTimetag(dr,i()+1)})}})}},oe.onMsgDeleted=function(Ue,Dt){var tr=this;if(!tr.canHandleDeletedMsgInSyncing)return tr.logger.info("msg::onMsgDeleted:is in syncing ..."),void tr.unhandledSysMsgsForDeletedMsgs.push({packet:Ue,isSuperTeam:Dt});if(!Ue.error){var dr=tr.db,pr=a(he).call(he,Ue.content.sysMsg);pr=tr.processDeleteMsgSysMsg(pr),Dt||tr.markSysMsgRead(pr),tr.deleteLocalMsg(pr.msg).then(function(){if(dr.enable){var ar=Dt?"deleteSuperTeamMsg":"deleteMsg";dr.updateTimetag(ar,pr.time+1)}tr.handleSysMsg(pr)})}},oe.processDeleteMsgSysMsg=function(Ue){var Dt;return Ue.msg={},s(Dt=["scene","from","to"]).call(Dt,function(tr){Ue.msg[tr]=Ue[tr]}),Ue.msg.idClient=Ue.deletedIdClient,Ue.msg.idServer=Ue.deletedIdServer,Ue.msg.time=Ue.deletedMsgTime,Ue.msg.fromNick=Ue.deletedMsgFromNick,Ue.opeAccount=Ue.opeAccount||Ue.from,Ue.msg.opeAccount=Ue.opeAccount,this.message.Message.setExtra(Ue.msg,this.account),Ue},oe.onDeleteMsgOfflineRoaming=function(Ue){if(!Ue.error){var Dt,tr=this,dr=+Ue.content.type==1?"offline":"roaming",pr=he.reverseSysMsgs(Ue.content.sysMsgs,{mapper:function(nr){return tr.processDeleteMsgSysMsg(nr)}}),ar=pr&&pr[0]&&pr[0].scene==="superTeam";tr.logger.info(u(Dt="msg::onDeleteMsgOfflineRoaming: on delete ".concat(dr," ")).call(Dt,ar?"superTeam":""," idServer deletedIdClient deletedIdClient="),c(pr).call(pr,function(nr){var sr,$e;return u(sr=u($e="".concat(nr.idServer,"-")).call($e,nr.deletedIdServer,"-")).call(sr,nr.deletedIdClient)})),dr==="offline"&&tr.markSysMsgRead(pr);var hr=Ue.content.timetag;ar?(tr.timetags.deleteSuperTeamMsg=hr,tr.syncResult.deleteSuperTeamMsgTimetag=hr):(tr.timetags.deleteMsg=hr,tr.syncResult.deleteMsgTimetag=hr);var Ne=tr.putSysMsg(pr,"offlineSysMsgs").catch(function(nr){return tr.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",nr),d.reject(nr)});Ne.cmd="deleteMsgSysMsgs "+dr,tr.syncPromiseArray.push(Ne),tr.syncResult.deleteMsgSysMsgs=tr.syncResult.deleteMsgSysMsgs||[],tr.syncResult.deleteMsgSysMsgs.push({type:dr,sysMsgs:pr})}},oe.deleteMsgOfflineRoaming=function(Ue,Dt){if(!Ue)return d.resolve();var tr=this;tr.logger.info("msg::deleteMsgOfflineRoaming: ",c(Ue).call(Ue,function(ar){var hr;return ar.type+" "+c(hr=ar.sysMsgs).call(hr,function(Ne){var nr,sr;return u(nr=u(sr="".concat(Ne.idServer,"-")).call(sr,Ne.deletedIdServer,"-")).call(nr,Ne.deletedIdClient)})}),le.secureOutput("session",Dt));var dr=tr.db,pr=[];return s(Ue).call(Ue,function(ar){var hr;s(hr=ar.sysMsgs).call(hr,function(Ne){var nr=tr.deleteLocalMsg(Ne.msg,{cbUpdateSession:function(sr){sr=tr.mergeSession(sr),sr=m(Ve).call(Ve,sr);var $e=le.findObjIndexInArray(Dt,{value:sr.id});if($e!==-1&&(Dt[$e]=le.merge({},Dt[$e],sr)),dr.enable)return dr.updateSession(sr)}});pr.push(nr)})}),d.all(pr).then(function(){dr.enable&&(tr.syncResult.deleteMsgTimetag&&dr.updateTimetag("deleteMsg",tr.syncResult.deleteMsgTimetag),tr.syncResult.deleteSuperTeamMsgTimetag&&dr.updateTimetag("deleteSuperTeamMsg",tr.syncResult.deleteSuperTeamMsgTimetag))})},oe.deleteMsgSelf=function(Ue){if(!Ue.error){var Dt=this.db,tr=Ue.obj&&Ue.obj.deleteMsgSelfTag;if(tr){var dr=Ue.content&&Ue.content.timetag;tr.scene=tr.scene+""=="1"?"p2p":"team";var pr=[this.deleteLocalMsg(tr)];dr<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=dr,Dt.enable&&pr.push(Dt.updateDeleteMsgSelf(dr))),Ue.promise=d.all(pr)}}},oe.deleteMsgSelfBatch=function(){var Ue=o(n.mark(function Dt(tr){var dr,pr,ar,hr,Ne,nr,sr,$e;return n.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:if(!tr.error){er.next=2;break}return er.abrupt("return");case 2:if(pr=this,ar=this.db,(hr=tr.obj&&tr.obj.deleteMsgSelfTags)&&hr.length>0){er.next=7;break}return er.abrupt("return");case 7:if(Ne=v(hr).call(hr,function(or,ze){var rr=ze.sessionId;if(or[rr]=or[rr]||[],or[rr].push(ze),!ar.enable){var Et=pr.getSessionInCache(rr);Et&&Et.lastMsg&&ze&&Et.lastMsg.idClient===ze.idClient&&(Et.lastMsg=null,pr.onUpdateSession(Et))}return or},{}),ar.enable){er.next=11;break}return s(nr=g(Ne)).call(nr,function(or){var ze=Ne[or],rr=pr.getSessionInCache(or);if(pr.options.rollbackDelMsgUnread&&rr){var Et=rr.ack||0,Lt=b(ze).call(ze,function(cr){var mr=!0;if(cr.type==="notification")try{mr=pr.options.shouldCountNotifyUnread(cr)}catch(vr){throw pr.logger.error("userOption:shouldCountNotifyUnread function error",vr),vr}return pr.message.Message.setFlow(cr,pr.account),mr&&Et<cr.time&&cr.flow==="in"});Lt.length>0&&rr.unread&&(rr.unread=rr.unread-Lt.length>=0?rr.unread-Lt.length:0,pr.onUpdateSession(rr))}}),er.abrupt("return",d.resolve());case 11:sr=c(dr=g(Ne)).call(dr,function(or){var ze=Ne[or];return Ie.call(pr,ze,or)}),($e=tr.content&&tr.content.timetag)<=pr.timetags.deleteMsgSelf||(pr.timetags.deleteMsgSelf=$e,sr.push(ar.updateDeleteMsgSelf($e))),tr.promise=d.all(sr);case 15:case"end":return er.stop()}},Dt,this)}));return function(Dt){return Ue.apply(this,arguments)}}(),oe.onDeleteMsgSelf=function(Ue){var Dt=this,tr=this.db,dr=Ue.content.deleteMsgSelfTag;dr.scene=dr.scene+""=="1"?"p2p":"team",Dt.options.onDeleteMsgSelf([dr]),Dt.deleteLocalMsg(dr).then(function(){var pr=dr.deletedTime;return pr<=Dt.timetags.deleteMsgSelf||!tr.enable?d.resolve():(Dt.timetags.deleteMsgSelf=pr,tr.updateDeleteMsgSelf(pr))}).catch(function(pr){Dt.logger.error("onDeleteMsgSelf error",pr)})},oe.onDeleteMsgSelfBatch=function(Ue){var Dt=this;if(!Ue.error){var tr={1:"p2p",2:"team"},dr=le.get(Ue,"content.deleteMsgSelfTags")||[];s(dr).call(dr,function(ar){var hr;ar.scene=tr[ar.scene],ar.sessionId=u(hr="".concat(ar.scene,"-")).call(hr,Dt.message.Message.getMsgTarget(ar,Dt.account)),ar.deletedTime=T(ar.deletedTime),ar.time=T(ar.time)});var pr=le.get(Ue,"content.deleteMsgSelfTags[0].deletedTime");pr=T(pr)||0,this.options.onDeleteMsgSelf(dr),this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:dr},content:{timetag:pr}})}},oe.clearServerHistoryMsgs=function(Ue){if(!Ue.error){var Dt=this.db,tr=Ue.obj&&Ue.obj.clearMsgsParamsWithSync;if(tr){var dr=(tr.type&&tr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(tr.otherAccid):"team-".concat(tr.toTid),pr=Ue.content&&T(Ue.content.timetag);pr&&pr>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=pr,Dt.enable&&Dt.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),kt.call(this,dr,pr)}}},oe.onClearServerHistoryMsgs=function(Ue){if(!Ue.error){var Dt=this.db,tr=Ue.content&&Ue.content.sessionHistoryMsgsDeleteTag;if(tr){var dr=(tr.type&&tr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(tr.otherAccid):"team-".concat(tr.toTid),pr=tr.ext,ar=T(tr.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:dr,time:ar,ext:pr}]),ar<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=ar,Dt.enable&&Dt.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),kt.call(this,dr,ar)}}},oe.syncSessionHistoryMsgsDelete=function(Ue){if(!Ue.error){var Dt=this.db,tr=Ue.content&&Ue.content.sessionHistoryMsgsDeleteTags;if(tr&&tr.length>0){var dr=c(tr).call(tr,function(ar){return{sessionId:(ar.type&&ar.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(ar.otherAccid):"team-".concat(ar.toTid),time:T(ar.time)}});this.reporterHook.emit("reporter/syncItemComplete",ie.kSyncType4_24),this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(dr),this.syncResult.clearServerHistoryMsgs=dr;var pr=0;s(dr).call(dr,function(ar){ar.time>pr&&(pr=ar.time)}),Dt.enable&&Dt.updateTimetag("sessionHistoryMsgsDelete",pr)}}},oe.syncDeleteMsgSelf=function(Ue){var Dt=this,tr=this.db,dr=Ue.content.deletedMsgs;if(dr&&dr.length!==0){var pr=[];s(dr).call(dr,function(ar){ar.scene=ar.scene==="1"?"p2p":"team",ar.deletedTime=+ar.deletedTime,ar.time=+ar.time,pr.push(Dt.deleteLocalMsg(ar))}),Dt.options.onDeleteMsgSelf(dr),d.all(pr).then(function(){var ar=_(dr).call(dr,-1)[0].deletedTime;if(!(Dt.timetags.deleteMsgSelf>=ar))return Dt.timetags.deleteMsgSelf=ar,tr.enable?tr.updateDeleteMsgSelf(ar):void 0}).catch(function(ar){Dt.logger.error("syncDeleteMsgSelf error",ar)})}},oe.deleteLocalMsg=function(){var Ue=o(n.mark(function Dt(tr,dr){var pr,ar,hr,Ne,nr,sr,$e,er,or,ze,rr,Et;return n.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(tr){Lt.next=2;break}return Lt.abrupt("return");case 2:if(hr=(ar=this).db,Ne=(dr=dr||{}).cbUpdateSession||y(pr=ar.updateSessionInDbWithNotify).call(pr,ar),this.revokeMsgUniqueCheck(tr&&tr.idClient),nr=tr.sessionId||tr.scene+"-"+this.message.Message.getMsgTarget(tr,this.account),sr=!1,$e=ar.getSessionInCache(nr),er=!0,tr.type!=="notification"){Lt.next=20;break}Lt.prev=12,er=ar.options.shouldCountNotifyUnread(tr),Lt.next=20;break;case 16:throw Lt.prev=16,Lt.t0=Lt.catch(12),ar.logger.error("userOption:shouldCountNotifyUnread function error",Lt.t0),Lt.t0;case 20:if(ar.options.rollbackDelMsgUnread&&$e&&(or=$e.ack||0,er&&$e&&or<tr.time&&tr.from!==ar.account&&$e.unread&&(ar.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread",$e.id,$e.unread),$e.unread=$e.unread-1,sr=!0)),$e&&$e.lastMsg&&$e.lastMsg.idClient==tr.idClient&&(ar.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg",$e.id,$e.unread),$e.lastMsg=null,sr=!0),!hr.enable){Lt.next=49;break}return ze=null,Lt.next=26,hr.getMsgByIdClient(tr.idClient);case 26:return Lt.sent||ar.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB",tr),ar.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ",tr.idClient),Lt.next=31,hr.deleteMsg(tr.idClient);case 31:if(!$e||$e.lastMsg!==null){Lt.next=36;break}return Lt.next=34,hr.getMsgs({sessionId:nr,limit:1});case 34:(rr=Lt.sent)&&rr[0]&&(ze=rr[0]);case 36:if($e||!ar.options.rollbackDelMsgUnread){Lt.next=46;break}return ar.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB",nr),Lt.next=40,hr.getSession(nr);case 40:if(Et=Lt.sent){Lt.next=43;break}return Lt.abrupt("return");case 43:or=($e=Et).ack||0,er&&$e&&or<tr.time&&tr.flow==="in"&&$e.unread&&(ar.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",Et.id,Et.unread),$e.unread=$e.unread-1,sr=!0);case 46:if($e&&$e.lastMsg===null&&ze&&(ar.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg",nr,ze),$e.lastMsg=ze||null,sr=!0),!sr){Lt.next=49;break}return Lt.abrupt("return",Ne($e));case 49:if(hr.enable||!sr){Lt.next=52;break}return ar.onUpdateSession($e),Lt.abrupt("return");case 52:case"end":return Lt.stop()}},Dt,this,[[12,16]])}));return function(Dt,tr){return Ue.apply(this,arguments)}}(),oe.deleteLocalMsgs=function(Ue){var Dt=this,tr=Dt.db;return new d(function(dr,pr){if(function(ar){var hr=Dt.getSessionInCache(Ue.sessionId);if(hr&&Ue.updateSession){var Ne=hr.lastMsg;Ne&&(!Ue.start&&!Ue.end||Ne.time>Ue.start&&Ne.time<Ue.end)&&(hr.lastMsg=null,Dt.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is",Ue),tr.enable||(Dt.onUpdateSession(hr),ar()))}}(dr),tr.enable)return tr.deleteMsgsBySessionId(Ue).then(function(){Ue.updateSession&&Dt.checkAndUpdateLocalSessionByMsg(Ue.sessionId),dr()},function(ar){return pr(ar)})})},oe.deleteLocalMsgsByTime=function(){var Ue=o(n.mark(function Dt(tr){var dr,pr,ar,hr,Ne,nr,sr,$e,er,or,ze,rr,Et,Lt;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return pr=(dr=this).db,cr.next=4,pr.getDeletedMsgsCountByTime(tr);case 4:return ar=cr.sent,hr=0,Ne=[],cr.next=9,pr.deleteMsgsByTime(tr);case 9:return tr.deletedone&&tr.deletedone({deletedMsgCount:ar}),cr.next=12,pr.getAllSessions();case 12:nr=cr.sent,sr=_e(nr),cr.prev=14,sr.s();case 16:if(($e=sr.n()).done){cr.next=47;break}return er=$e.value,or=er.id,ze=!1,cr.next=22,pr.getSession(or);case 22:if(rr=cr.sent){cr.next=25;break}return cr.abrupt("continue",45);case 25:return cr.next=27,pr.getMsgCountAfterAck({shouldCountNotifyUnread:dr.options.shouldCountNotifyUnread,sessionId:or,ack:rr.ack||0});case 27:if(Et=cr.sent,rr.unread!==Et&&(rr.unread=Et,ze=!0),!(rr.lastMsg&&rr.lastMsg.time>tr.start&&rr.lastMsg.time<tr.end)){cr.next=39;break}if(tr.start!==0){cr.next=34;break}rr.lastMsg=null,cr.next=38;break;case 34:return cr.next=36,pr.getMsgs({sessionId:or,limit:1});case 36:Lt=cr.sent,rr.lastMsg=Lt&&Lt[0]?Lt[0]:null;case 38:ze=!0;case 39:if(!ze){cr.next=45;break}return cr.next=42,pr.updateSession(rr);case 42:dr.sessionSet[or]&&Ne.push(rr),hr++;case 45:cr.next=16;break;case 47:cr.next=52;break;case 49:cr.prev=49,cr.t0=cr.catch(14),sr.e(cr.t0);case 52:return cr.prev=52,sr.f(),cr.finish(52);case 55:return dr.onUpdateSessions(Ne),cr.abrupt("return",d.resolve({deletedMsgCount:ar,sessionUpdateCount:hr}));case 57:case"end":return cr.stop()}},Dt,this,[[14,49,52,55]])}));return function(Dt){return Ue.apply(this,arguments)}}()},function(t,r,e){var n=e(69),o=e(8),i=e(9),a=e(7),s=e(3),u=e(23),c=e(17),d=e(2),m=e(35).fn,v=e(0),g=e(151);m.splitSysMsgs=function(b,T){for(var _,y=b.length-1;y>=0;y--)_=b[y],g.isCustom(_)&&(n(b).call(b,y,1),T.push(_))},m.onOfflineSysMsgs=function(b,T){var _,y=this,O=o(_=b.content.sysMsgs).call(_,function(de){return de=i(g).call(g,de),T&&(de.filter=!0),de});O=i(O).call(O),y.markSysMsgRead(O);var V=[];y.splitSysMsgs(O,V);var Ce,ae=T?"offlineFilterSysMsgs":"offlineSysMsgs",Fe=T?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(O.length){var _e=y.putSysMsg(O,"offlineSysMsgs").then(function(de){var oe;(O=de).length&&(y.logger.info("sysmsg::onOfflineSysMsgs: ",ae,O.length,O&&o(O).call(O,function(he){return he.idServer})),y.syncResult[ae]=y.syncResult[ae]||[],y.syncResult[ae]=a(oe=y.syncResult[ae]).call(oe,O))}).catch(function(de){return y.logger.error("sysMsg::onOfflineSysMsgs: ",de),s.reject(de)});_e.cmd="sysMsgs",y.syncPromiseArray.push(_e)}V.length&&(y.logger.info("sysmsg::onOfflineSysMsgs: ",Fe,o(V).call(V,function(de){return de.idServer})),y.syncResult[Fe]=y.syncResult[Fe]||[],y.syncResult[Fe]=a(Ce=y.syncResult[Fe]).call(Ce,V))},m.onSendSysMsg=function(b,T){var _=b.obj||{};_?(this.completeSysMsg(_),b.error?_.status="fail":_.status="success",_=i(g).call(g,_),T&&(b.obj.filter=!0),b.obj=_):this.logger.warn("onSendSysMsg::no obj")},m.completeSysMsg=function(b){return b.from=this.account,b},m.onSysMsg=function(b,T){var _=i(g).call(g,b.content.sysMsg);T&&(_.filter=!0),this.markSysMsgRead(_),g.isCustom(_)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(_)):this.syncing?(this.logger.info("sysmsg::onSysMsg:is in syncing ..."),this.unhandledSysMsgs.push(_)):this.handleSysMsg(_)},m.handleSysMsg=function(b){var T=this,_=b.type,y=b.from,O=b.serverex;T.sysMsgPromise=T.sysMsgPromise.then(function(){return T.putSysMsg(b,"onSysMsg")}).then(function(V){b=V[0]}).then(function(){if(b){var V,Ce=s.resolve();switch(_){case"addFriend":V={type:"addFriend",account:y},O&&(V.serverex=O),Ce=T.onFriendRequest(V);break;case"passFriendApply":V={type:"passFriendApply",account:y},Ce=T.onFriendRequest(V);break;case"deleteFriend":Ce=T.onDeleteFriend({account:y})}return V&&V.friend&&(b.friend=V.friend),Ce}}).then(function(){b&&(T.logger.info("sysmsg::handleSysMsg: ",_,v.pickAsString(b,["idServer","deletedIdClient","deletedIdServer"])),u(function(){T.options.onsysmsg(b)},0))})},m.putSysMsg=function(b,T){if(v.isArray(b)||(b=[b]),c(b[0]))return s.resolve(b);var _=this,y=_.db,O=y.enable,V=s.resolve(),Ce=[];return(V=(V=V.then(function(){return O?y.putSysMsg(b):b}).then(function(ae){var Fe=[];d(b).call(b,function(_e){_.checkSysMsgUnique(_e)&&Fe.push(_e)}),b=Fe,Ce=O?ae:b})).then(function(){return _.getSysMsgUnread().then(function(ae){return Ce.length||((Ce=b).backward=!0),_.updateSysMsgUnread(Ce,ae,1).then(function(Fe){T==="offlineSysMsgs"&&(_.syncResult.sysMsgUnread=Fe),T==="onSysMsg"&&_.onUpdateSysMsgUnread(Fe)})})})).then(function(){return b})},m.checkSysMsgUnique=v.genCheckUniqueFunc("idServer"),m.getSysMsgUnread=function(){var b=this,T=b.db;return new s(function(_){T.enable?T.getSysMsgUnread().then(function(y){_(y)},function(){_(b.sysMsgUnread)}):_(b.sysMsgUnread)})},m.updateSysMsgUnread=function(b,T,_){if(v.isArray(b)||(b=[b]),!b.length)return s.resolve(T);T=T||{};var y,O=this.db;return d(b).call(b,function(V){(_>0&&!V.read||_<0&&V.read)&&(y=V.type,T[y]=(T[y]||0)+_)}),T=g.completeUnread(T),this.sysMsgUnread=T,O.enable&&!b.backward?O.updateSysMsgUnread(T):s.resolve(T)},m.reduceSysMsgUnread=function(b){var T=this;return T.getSysMsgUnread().then(function(_){return T.updateSysMsgUnread(b,_,-1)}).then(function(_){T.onUpdateSysMsgUnread(_)})},m.onUpdateSysMsgUnread=function(b){var T=this;u(function(){T.logger.info("sysmsg::onUpdateSysMsgUnread:",b),T.options.onupdatesysmsgunread(b)},0)},m.updateSysMsg=function(b){var T=this,_=T.db;(_.enable?_.updateSysMsg(b):s.resolve(b)).then(function(y){T.onUpdateSysMsg(y)})},m.onUpdateSysMsg=function(b){var T=this;u(function(){v.isArray(b)||(b=[b]),d(b).call(b,function(_){T.logger.info("sysmsg::onUpdateSysMsg:",_.idServer),T.options.onupdatesysmsg(_)})},0)},m.processUnsettledSysMsgs=function(){var b,T,_=this;d(b=_.unhandledSysMsgs).call(b,function(y){_.handleSysMsg(y)}),d(T=_.unhandledSysMsgsForDeletedMsgs).call(T,function(y){_.onMsgDeleted(y.packet,y.isSuperTeam)}),_.resetUnsettledSysMsgs()}},function(t,r,e){var n=e(754),o=e(58),i=e(2),a=e(6),s=e(15),u=e(9),c=e(3),d=e(8),m=e(87),v=e(17),g=e(41),b=e(5),T=e(7),_=e(59),y=e(60),O=e(61),V=e(62),Ce=e(47);function ae(le,ie){var Ie=b(le);if(_){var pe=_(le);ie&&(pe=v(pe).call(pe,function(kt){return y(le,kt).enumerable})),Ie.push.apply(Ie,pe)}return Ie}function Fe(le){for(var ie=1;ie<arguments.length;ie++){var Ie,pe,kt=arguments[ie]!=null?arguments[ie]:{};ie%2?i(Ie=ae(Object(kt),!0)).call(Ie,function(Ue){o(le,Ue,kt[Ue])}):O?V(le,O(kt)):i(pe=ae(Object(kt))).call(pe,function(Ue){Ce(le,Ue,y(kt,Ue))})}return le}var _e=e(35).fn,de=e(0),oe=e(152),he=e(40),Ve=e(151);_e.processSession=function(le){if(!le.error)switch(le.cmd){case"getServerSessions":this.onGetServerSessions(le);break;case"getServerSession":this.onGetServerSession(le);break;case"updateServerSession":this.onUpdateServerSession(le)}},_e.onGetServerSessions=function(le){var ie=this,Ie=le.content&&le.content.sessionReqTag,pe=le.content&&le.content.sessionList,kt=[];i(pe).call(pe,function(Ue){var Dt,tr;if(Ue.id=Ue.id.split("|").join("-"),a(Dt=Ue.id).call(Dt,"super_team")===0&&(Ue.id="superTeam"+s(tr=Ue.id).call(tr,10)),Ue.updateTime=+Ue.updateTime,Ue.lastMsg){var dr=Ue.lastMsgType==="1"?"sysMsg":"msg";kt.push(ie.parser.unserialize(JSON.parse(Ue.lastMsg),dr).then(function(pr){var ar;Ue.lastMsg=dr==="msg"?u(ar=ie.message).call(ar,pr):u(Ve).call(Ve,pr)}))}}),le.promise=c.all(kt).then(function(){le.obj={sessionList:pe,hasMore:Ie.hasMore==="1"},Ie.minTimestamp&&(le.obj.minTimestamp=+Ie.minTimestamp)})},_e.onGetServerSession=function(le){var ie,Ie=this,pe=le.content&&le.content.session;if(pe){var kt;if(pe.id=pe.id.split("|").join("-"),a(ie=pe.id).call(ie,"super_team")===0&&(pe.id="superTeam"+s(kt=pe.id).call(kt,10)),pe.updateTime=+pe.updateTime,pe.lastMsg){var Ue=le.content.session&&le.content.session.lastMsgType==="1"?"sysMsg":"msg";le.promise=Ie.parser.unserialize(JSON.parse(pe.lastMsg),Ue).then(function(Dt){var tr;pe.lastMsg=Ue==="msg"?u(tr=Ie.message).call(tr,Dt):u(Ve).call(Ve,Dt),le.obj=pe})}else le.obj=pe}},_e.onUpdateServerSession=function(le){le.obj={}},_e.onSyncUpdateServerSession=function(le){var ie,Ie=this,pe=this,kt=le.content&&le.content.session;if(kt){var Ue;kt.id=kt.id.split("|").join("-"),a(ie=kt.id).call(ie,"super_team")===0&&(kt.id="superTeam"+s(Ue=kt.id).call(Ue,10)),kt.updateTime=+kt.updateTime,kt.lastMsg?pe.parser.unserialize(JSON.parse(kt.lastMsg),"msg").then(function(Dt){var tr;kt.lastMsg=u(tr=pe.message).call(tr,Dt),Ie.options.onSyncUpdateServerSession(de.simpleClone(kt))}):this.options.onSyncUpdateServerSession(de.simpleClone(kt))}},_e.mergeSession=function(le){le=de.copyWithNull(le);var ie=this.sessionSet,Ie=le.id,pe=ie[Ie]||{},kt=!1;return oe.isComplete(le)?delete pe.isDeleted:pe.isDeleted&&(kt=!0),ie[Ie]=de.merge(pe,le),le=kt?le:ie[Ie],de.undef(le.unread)&&(le.unread=0),le},_e.mergeSessions=function(le){var ie=this;return d(le=le||[]).call(le,function(Ie){return ie.mergeSession(Ie)})},_e.onDeleteSessions=function(le){var ie;le.obj=d(ie=le.obj.sessions).call(ie,function(Ie){return oe.parse(Ie)})},_e.onUpdateSession=function(le){if(le){if(le=this.mergeSession(le),le=m(oe).call(oe,le),oe.isComplete(le))return this.logger.info("session::onUpdateSession: ".concat(le.id),le.id,de.secureOutput("session",le)),this.options.onupdatesessions?this.options.onupdatesessions([le]):this.options.onupdatesession(le),le;this.logger.warn("session::onUpdateSession::session is not complete",de.secureOutput("session",le))}},_e.onUpdateSessions=function(le){var ie=this;if(le){le=ie.mergeSessions(le),le=d(le).call(le,function(kt){return m(oe).call(oe,kt)});var Ie=v(le).call(le,function(kt){return oe.isComplete(kt)}),pe=v(le).call(le,function(kt){return!oe.isComplete(kt)});if(pe&&pe.length>0&&ie.logger.warn("session::onUpdateSessions::sessions is not complete",d(pe).call(pe,function(kt){return kt.id}),de.secureOutput("session",pe)),Ie.length!==0)return ie.logger.info("session::onUpdateSessions:",de.secureOutput("session",Ie)),ie.options.onupdatesessions?ie.options.onupdatesessions(Ie):i(Ie).call(Ie,function(kt){ie.options.onupdatesession(kt)}),Ie;ie.logger.warn("session::onUpdateSessions::completeSessions is empty")}},_e.setCurrSession=function(le){le=""+le,this.currSessionId=le,this.logger.info("session::setCurrSession:",le)},_e.resetSessionUnread=function(le){var ie=le.id;this.db.enable&&this.db.updateSession({id:ie,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[ie]&&(this.markMsgRead(this.sessionUnreadMsgs[ie],!0),this.sessionUnreadMsgs[ie]=[]),this.getSessionInCache(ie)?this.onUpdateSession({id:ie,unread:0}):this.onUpdateSession(Fe(Fe({},le),{},{unread:0}))},_e.resetSessionsUnread=function(le){var ie=this,Ie=this.db;Ie.enable&&d(le).call(le,function(kt){Ie.updateSession({id:kt.id,unread:0})});var pe=!this.options.autoMarkRead&&this.sessionUnreadMsgs;le=d(le).call(le,function(kt){return pe&&ie.sessionUnreadMsgs[kt.id]&&(ie.markMsgRead(ie.sessionUnreadMsgs[kt.id],!0),ie.sessionUnreadMsgs[kt.id]=[]),ie.getSessionInCache(kt.id)?{id:kt.id,unread:0}:Fe(Fe({},kt),{},{unread:0})}),this.onUpdateSessions(le)},_e.insertLocalSession=function(le){var ie=this,Ie=ie.db,pe=le.scene+"-"+le.to,kt=ie.getSessionInCache(pe);return kt&&oe.isComplete(kt)?c.reject(he.sessionExist({callFunc:"session::insertLocalSession",session:kt})):(Ie.enable?Ie.getMsgs({sessionId:pe,limit:1}):c.resolve()).then(function(Ue){if(de.isArray(Ue)&&Ue.length===1){var Dt=Ue[0];(kt=oe.genSessionByMsg(Dt)).updateTime=Dt.time}else kt={id:pe,scene:le.scene,to:le.to,updateTime:+le.updateTime||+new Date,lastMsg:null};return ie.onUpdateSession(kt),Ie.enable?Ie.putSession(kt):c.resolve(kt)})},_e.checkAndUpdateLocalSessionByMsg=function(le){var ie,Ie=this.db,pe=this,kt=this.options.syncSessionUnread&&le!==this.currSessionId,Ue=Ie.getMsgs({sessionId:le,limit:1}),Dt=Ie.getSession(le).then(function(tr){if(tr)return ie=g({},tr),tr.ack=tr.ack||0,kt?Ie.getMsgs({sessionId:le,start:tr.ack}):c.resolve();pe.logger.error("can't find session that sessionId = ".concat(le))});return c.all([Ue,Dt]).then(function(tr){var dr,pr,ar=n(tr,2),hr=ar[0],Ne=ar[1],nr={id:le};if(!ie)return pe.logger.error("checkAndUpdateLocalSessionByMsg:can not find session",le),c.resolve(200);if(dr=ie&&!ie.lastMsg?null:ie.lastMsg.idClient,hr&&hr[0]?pr=(hr=hr[0]).idClient:(pr=null,hr=null),dr!==pr&&(nr.lastMsg=hr),Ne!==void 0){var sr=0;i(Ne=Ne||[]).call(Ne,function($e){var er;try{er=pe.options.shouldCountNotifyUnread($e)}catch(or){throw pe.logger.error("userOption:shouldCountNotifyUnread function error",or),or}$e.isUnreadable&&$e.flow==="in"&&($e.type!=="notification"||er)&&sr++}),sr!==ie.unread&&(nr.unread=sr)}return b(nr).length>1?(pe.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",de.secureOutput("session",nr)),Ie.updateSession(nr).then(function(){return pe.onUpdateSession(nr)})):c.resolve(200)})},_e.syncSessionsWithMoreRoaming=function(le){var ie=this,Ie=le&&le.content&&le.content.sessions;if(Ie&&Ie.length){var pe={0:"p2p",1:"team",5:"superTeam"};if(i(Ie).call(Ie,function(Ue){var Dt,tr=Ue.to===ie.options.account?Ue.from:Ue.to;Ue.scene=pe[Ue.scene],Ue.id=T(Dt="".concat(Ue.scene,"-")).call(Dt,tr),Ue.time=+Ue.time}),this.db.enable){var kt=this.db.putSessionsWithMoreRoaming(Ie);kt.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(kt)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=Ie:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},_e.syncStickTopSessions=function(le){var ie=this,Ie=this.db,pe=[],kt=[],Ue=c.resolve(),Dt=le.content.sessions||[];this.syncing&&this.syncResult?(i(Dt).call(Dt,function(tr){var dr=tr.id.split("|");dr[0]==="super_team"&&(dr[0]="superTeam"),tr.id=dr.join("-"),tr.scene=dr[0],tr.to=dr[1],tr.isTop=!0,pe.push(dr.join("-")),delete tr.createTime,delete tr.updateTime,Ie.enable&&kt.push(Ie.putSession(tr))}),Ie.enable&&(Ue=Ie.updateTimetag("stickTopSessions",le.content.timetag)),Ue.then(function(){return Ie.enable?Ie.getStickTopSessions():[]}).then(function(tr){if(le.content.modify){var dr=[];i(tr).call(tr,function(pr){a(pe).call(pe,pr.id)>-1||(dr.push(pr.id),pr.isTop=!1,pr.topCustom="",kt.push(Ie.putSession(pr)))})}else ie.syncResult.stickTopSessions=tr;return c.all(kt)}),this.syncResult.stickTopSessions=Dt,Ue.cmd="syncStickTopSessions",this.syncPromiseArray.push(Ue)):this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")},_e.getSessionInCache=function(le,ie){var Ie=this.sessionSet[le];return!Ie||Ie.isDeleted&&!ie?void 0:Ie},_e.deleteSessionInCache=function(le,ie){var Ie=this;de.isArray(le)||(le=[le]),ie?i(le).call(le,function(pe){Ie.sessionSet[pe]&&(Ie.sessionSet[pe].isDeleted=!0)}):i(le).call(le,function(pe){return delete Ie.sessionSet[pe]}),this.logger.info("sessions::deleteSessionInCache::delete session done",le,ie)},_e.updateSessionInCache=function(le){return this.logger.info("session::updateSessionInCache: ".concat(le.id),le.id,le),this.getSessionInCache(le.id)?le=this.mergeSession(le):(this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(le.id)),null)},_e.updateSessionInDbWithNotify=function(le,ie){var Ie=this;return new c(function(pe,kt){var Ue=Ie.db;if(Ie.getSessionInCache(le.id)){var Dt=c.resolve(),tr=de.filterObj(le,"id lastMsg localCustom unread");Ue.enable&&(Dt=Ue.updateSession(tr)),Dt.then(function(dr){return Ie.onUpdateSession(dr,ie)}).then(pe,function(dr){kt({callFunc:"session::updateLocalSession",event:dr})})}else kt(he.sessionNotExist({sessionId:le.id,callFunc:"session::updateLocalSession"}))})}},function(t,r,e){var n=e(745);t.exports=function(o){if(n(o))return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(153),o=e(70);t.exports=function(i,a){var s=i==null?null:n!==void 0&&o(i)||i["@@iterator"];if(s!=null){var u,c,d,m,v=[],g=!0,b=!1;try{if(d=(s=s.call(i)).next,a===0){if(Object(s)!==s)return;g=!1}else for(;!(g=(u=d.call(s)).done)&&(v.push(u.value),v.length!==a);g=!0);}catch(T){b=!0,c=T}finally{try{if(!g&&s.return!=null&&(m=s.return(),Object(m)!==m))return}finally{if(b)throw c}}return v}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(2),o=e(5),i=e(7),a=e(41),s=e(35).fn,u=e(0);s.syncSessionAck=function(c){var d,m=this;if(this.logger.info("syncSessionAck::",c.content),m.syncing&&m.syncResult){m.saveAck.p2pTeam=c.content.timetag;var v={};n(d=[[c.content.p2p,"p2p"],[c.content.team.m_map,"team"]]).call(d,function(g){var b,T=g[0],_=g[1];n(b=o(T)).call(b,function(y){var O,V;v[i(O="".concat(_,"-")).call(O,y)]=T[y];var Ce={id:i(V="".concat(_,"-")).call(V,y),ack:T[y]};m.cacheSyncedSession(Ce)})}),m.syncResult.ackMap?m.syncResult.ackMap=a(m.syncResult.ackMap,v):m.syncResult.ackMap=v}else m.logger.warn("syncSessionAck: not in syncing or no syncResult",m.syncing,!!m.syncResult)},s.syncSuperTeamSessionAck=function(c){var d,m=this;if(m.syncResult){m.saveAck.superTeam=c.content.timetag;var v={},g=c.content.superTeam.m_map;n(d=o(g)).call(d,function(b){v["superTeam-".concat(b)]=g[b];var T={id:"superTeam-".concat(b),ack:g[b]};m.cacheSyncedSession(T)}),m.syncResult.ackMap?m.syncResult.ackMap=a(m.syncResult.ackMap,v):m.syncResult.ackMap=v}},s.onMarkSessionAck=function(c){c.error||this.storeSessionAck(c.obj)},s.syncMarkSessionAck=function(c){this.storeSessionAck(c.content,!0)},s.storeSessionAck=function(c,d){var m;if(this.options.syncSessionUnread&&c){var v;switch(c.scene){case 0:v="p2p";break;case 1:v="team";break;case void 0:default:v="superTeam"}var g=i(m="".concat(v,"-")).call(m,c.to),b=c.timetag;if(b<=((this.getSessionInCache(g)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",b);else{var T={id:g,ack:b};this.mergeSession(T),this.logger.info("session::storeSessionAck:",u.secureOutput("session",T)),this.markUnreadBySessionAck({sessionId:g,ack:T.ack},d)}}},s.markUnreadBySessionAck=function(c,d){var m=c.sessionId,v=c.ack,g=this,b=g.db;if(b.enable)g.pushMsgTask(function(){return b.getMsgCountAfterAck({shouldCountNotifyUnread:g.options.shouldCountNotifyUnread,sessionId:m,ack:v}).then(function(ae){var Fe={id:m,unread:ae,ack:v};return g.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",Fe),g.syncing?g.cacheSyncedSession(Fe):d&&g.onUpdateSession(Fe),b.updateSession(Fe)}).catch(function(ae){g.logger.error("markUnreadBySessionAck::error",ae)})});else{var T=g.getSessionInCache(m);if(T){var _=T.unreadMsgs;if(_&&_.length){for(var y=0,O=[],V=_.length-1;V>=0;V--){var Ce=_[V];if(!(Ce.time>v))break;y++,O.push(Ce)}T.unreadMsgs=O,T.unread=y,g.logger.info("session::markUnreadBySessionAck: unread ".concat(y)),g.syncing?g.cacheSyncedSession(T):d&&g.onUpdateSession(T)}}}}},function(t,r,e){var n=e(35).fn;n.processChatroom=function(o){switch(o.cmd){case"getChatroomAddress":this.onChatroomAddress(o)}},n.onChatroomAddress=function(o){o.error||(o.obj.address=o.content.address)}},function(t,r,e){var n=e(35).fn;n.processQchat=function(o){switch(o.cmd){case"getQChatAddress":this.onQChatAddress(o)}},n.onQChatAddress=function(o){o.error||(o.obj.address=o.content.address)}},function(t,r,e){e(35).fn.processFilter=function(n){switch(n.cmd){case"sendFilterMsg":this.onSendMsg(n,!0);break;case"filterMsg":this.onMsg(n,!0);break;case"filterSysMsg":this.onSysMsg(n,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(n,!0)}}},function(t,r,e){var n=e(8),o=e(44),i=e(35).fn,a=e(0),s=o.clientTypeMap;function u(c){c=c||{};var d=a.copy(c);return d.clientType&&(d.clientType=s[d.clientType]||""),d.serverCustom&&(d.custom=JSON.parse(d.serverCustom),typeof d.custom[0]=="string"&&(d.custom=d.custom[0]),delete d.serverCustom),d}i.processEventService=function(c){var d=c.content,m=c.error,v=this.options||{};switch(m&&(m.callFunc="events::processsEventService",this.onCustomError("事件服务解包失败","EVENT_SERVICE_ERROR",m)),c.cmd){case"pushEvent":if(a.isFunction(v.onpushevents)){var g={msgEvents:[u(d.msgEvent)]};v.onpushevents(g)}break;case"pushEvents":if(a.isFunction(v.onpushevents)){var b=d.msgEvents;b={msgEvents:n(b).call(b,function(T){return u(T)})},v.onpushevents(b)}}}},function(t,r,e){var n=e(35).fn,o=e(0);n.processProxyService=function(i){var a=i.error;switch(a&&(a.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",a)),i.cmd){case"onProxyMsg":if(o.isFunction(this.options.onProxyMsg)){var s=i.content.proxyMsg||{};s.time&&(s.time=+s.time),this.options.onProxyMsg(s)}break;case"httpProxy":i.obj=i.content&&i.content.proxyTag}}},function(t,r,e){var n=e(9),o=e(8),i=e(0),a=function(y){this.account=y.account},s=a.prototype,u=s.Message=e(72),c=s.TextMessage=e(829),d=s.FileMessage=e(204),m=s.GeoMessage=e(833),v=s.NotificationMessage=e(834),g=s.CustomMessage=e(835),b=s.TipMessage=e(836),T=s.RobotMessage=e(837),_=s.G2Message=e(838);s.validScenes=u.validScenes,s.validTypes=u.validTypes,s.sceneMap=u.sceneMap,s.sceneReverseMap=u.sceneReverseMap,s.reverse=function(y){var O;switch(u.getType(y)){case"text":O=n(c).call(c,y);break;case"image":case"audio":case"video":case"file":O=n(d).call(d,y);break;case"geo":O=n(m).call(m,y);break;case"notification":O=n(v).call(v,y);break;case"custom":O=n(g).call(g,y);break;case"tip":O=n(b).call(b,y);break;case"g2":O=n(_).call(_,y);break;case"robot":O=n(T).call(T,y);break;default:O=n(u).call(u,y)}return u.setExtra(O,this.account),O},s.reverseMsgs=function(y,O){var V,Ce,ae=this;return o(y).call(y,function(Fe){return Fe=n(ae).call(ae,Fe),O&&((V=O.modifyObj)&&(Fe=i.merge(Fe,V)),Ce=O.mapper,i.isFunction(Ce)&&(Fe=Ce(Fe))),Fe})},t.exports=a},function(t,r,e){var n=e(18),o=e(9),i=e(72),a=e(0);function s(u){a.verifyOptions(u,"text","msg::TextMessage"),u.type="text",i.call(this,u)}s.prototype=n(i.prototype),s.reverse=function(u){return o(i).call(i,u)},t.exports=s},function(t,r,e){var n=e(18),o=e(204);function i(){}i.prototype=n(o.prototype),i.verifyFile=function(a,s){return!0},t.exports=i},function(t,r,e){var n=e(18),o=e(204);function i(){}i.prototype=n(o.prototype),i.verifyFile=function(){},t.exports=i},function(t,r,e){var n=e(18),o=e(204);function i(){}i.prototype=n(o.prototype),i.verifyFile=function(){},t.exports=i},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(72),s=e(0);function u(c){c.type="geo",s.verifyOptions(c,"geo","msg::GeoMessage"),s.verifyOptions(c.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),s.verifyParamType("geo.lng",c.geo.lng,"number","msg::GeoMessage"),s.verifyParamType("geo.lat",c.geo.lat,"number","msg::GeoMessage"),s.verifyParamType("geo.title",c.geo.title,"string","msg::GeoMessage"),a.call(this,c),this.attach=n(c.geo)}u.prototype=o(a.prototype),u.reverse=function(c){var d=i(a).call(a,c);return c.attach=c.attach?""+c.attach:"",d.geo=c.attach?JSON.parse(c.attach):{},d},t.exports=u},function(t,r,e){var n=e(18),o=e(9),i=e(8),a=e(171),s=e(0).notundef,u=e(72),c=e(147).IM,d=e(192),m=e(203),v={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function g(){}g.prototype=n(u.prototype),g.reverse=function(b){var T=o(u).call(u,b);if(b.attach=b.attach?""+b.attach:"",b.attach){var _=JSON.parse(b.attach);if(T.attach={type:v[_.id]||_.id},s(_.data)){var y,O,V=_.data;s(V.tinfo)&&(T.attach.team=o(d).call(d,c.syncUnserialize(V.tinfo,"team"),!0)),s(V.ids)&&(T.attach.accounts=V.ids),s(V.id)&&(T.attach.account=V.id),s(V.uinfos)&&(T.attach.users=i(y=V.uinfos).call(y,function(Ce){return o(m).call(m,c.syncUnserialize(Ce,"user"))})),s(V.mute)&&(T.attach.mute=+V.mute==1),s(V.attach)&&(T.attach.custom=V.attach),s(V.channel)&&(T.attach.channelId=V.channel),s(V.calltype)&&(T.attach.netcallType=V.calltype),s(V.duration)&&(T.attach.duration=V.duration),s(V.time)&&(T.attach.time=V.time),s(V.from)&&(T.attach.from=V.from),s(V.ext)&&(T.attach.ext=V.ext),T.attach.accounts&&T.attach.accounts.length<=2&&T.from===T.to&&a(O=T.attach.accounts).call(O,function(Ce){if(Ce!==T.to)return T.to=Ce,!0})}}else T.attach={};return T},t.exports=g},function(t,r,e){var n=e(18),o=e(9),i=e(72),a=e(0);function s(u){a.verifyOptions(u,"content","msg::CustomMessage"),u.type="custom",i.call(this,u),this.attach=u.content}s.prototype=n(i.prototype),s.reverse=function(u){var c=o(i).call(i,u);return c.content=u.attach,c},t.exports=s},function(t,r,e){var n=e(18),o=e(9),i=e(72),a=e(0);function s(u){a.verifyOptions(u,"tip","msg::TipMessage"),u.type="tip",i.call(this,u),this.body=u.tip}s.prototype=n(i.prototype),s.reverse=function(u){var c=o(i).call(i,u);return c.text="",c.tip=u.body,u.attach&&(c.attach=u.attach),c},t.exports=s},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(8),s=e(72),u=e(0),c={welcome:"00",text:"01",link:"03"},d={"01":"text","02":"image","03":"answer",11:"template"};function m(v){u.verifyOptions(v,"content","msg::RobotMessage"),u.undef(v.robotAccid)&&(v.robotAccid=v.to);var g=v.content;switch(g.type){case"welcome":u.undef(v.body)&&(this.body="欢迎消息");break;case"text":u.verifyOptions(g,"content","msg::RobotMessage"),u.undef(v.body)&&(this.body=g.content);break;case"link":u.verifyOptions(g,"target","msg::RobotMessage")}g.type&&(g.type=c[g.type]),g={param:g,robotAccid:v.robotAccid},this.attach=n(g),v.type="robot",s.call(this,v)}m.prototype=o(s.prototype),m.reverse=function(v){var g=i(s).call(s,v);if(g.type==="robot"){var b=JSON.parse(v.attach);if(b.param&&(b.param.type=d[b.param.type]||"unknown"),b.robotMsg){var T=(b=u.merge(b,b.robotMsg)).message;b.flag==="bot"?b.message=a(T).call(T,function(_){return _.type=d[_.type]||"unknown",_}):b.flag,delete b.robotMsg}g.content=b}return g},t.exports=m},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(72),s=e(0);function u(c){s.verifyOptions(c,"attach","msg::G2Message"),c.type="g2",a.call(this,c),this.attach=n(c.attach)}u.prototype=o(a.prototype),u.reverse=function(c){var d=i(a).call(a,c);return c.attach&&(d.attach=JSON.parse(c.attach)),d},t.exports=u},function(t,r,e){var n=e(58),o=e(102),i=e(26),a=e(103),s=e(8),u=e(17),c=e(6),d=e(3),m=e(2),v=e(41),g=e(5),b=e(59),T=e(60),_=e(61),y=e(62),O=e(47);function V(oe,he){var Ve=g(oe);if(b){var le=b(oe);he&&(le=u(le).call(le,function(ie){return T(oe,ie).enumerable})),Ve.push.apply(Ve,le)}return Ve}function Ce(oe){for(var he=1;he<arguments.length;he++){var Ve,le,ie=arguments[he]!=null?arguments[he]:{};he%2?m(Ve=V(Object(ie),!0)).call(Ve,function(Ie){n(oe,Ie,ie[Ie])}):_?y(oe,_(ie)):m(le=V(Object(ie))).call(le,function(Ie){O(oe,Ie,T(ie,Ie))})}return oe}var ae=e(39).fn,Fe=e(0),_e=Fe.isArray,de=e(150);ae.mergeObjArray=function(oe,he,Ve){return oe||(oe=[]),he?(_e(he)||(he=[he]),he.length?(Ve=Ve||{},Fe.mergeObjArray(oe,he,Ve)):oe):oe},ae.cutObjArray=function(oe,he,Ve){return oe&&he?(_e(he)||(he=[he]),he.length?(Ve=Ve||{},Fe.cutObjArray(oe,he,Ve)):oe):oe},ae.mergeLoginPorts=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"deviceId"})},ae.cutLoginPorts=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"deviceId",sortPath:"type"})},ae.mergeRelations=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"account"})},ae.cutRelations=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"account"})},ae.findRelation=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"account",value:he})},ae.mergeFriends=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"account"})},ae.cutFriends=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"account"})},ae.cutFriendsByAccounts=function(oe,he){_e(he)||(he=[he]);var Ve=s(he).call(he,function(le){return{account:le}});return this.cutFriends(oe,Ve)},ae.findFriend=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"account",value:he})},ae.mergeUsers=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"account"})},ae.findUser=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"account",value:he})},ae.mergeTeams=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"teamId"})},ae.cutTeams=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"teamId"})},ae.findTeam=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"teamId",value:he})},ae.assembleTeamOwner=de.assembleOwner,ae.assembleTeamMembers=de.assembleMembers,ae.genTeamMemberId=de.genId,ae.mergeTeamMembers=function(oe,he){return this.mergeObjArray(oe,he)},ae.cutTeamMembers=function(oe,he){return this.cutObjArray(oe,he)},ae.cutTeamMembersByAccounts=function(oe,he,Ve){_e(Ve)||(Ve=[Ve]);var le=de.assembleMembers({teamId:he},Ve);return this.cutTeamMembers(oe,le)},ae.findTeamMember=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"id",value:he})},ae.mergeSessions=function(oe,he){return this.mergeObjArray(oe,he,{sortPath:"updateTime",desc:!0})},ae.cutSessions=function(oe,he){return this.cutObjArray(oe,he)},ae.cutSessionsByIds=function(oe,he){_e(he)||(he=[he]);var Ve=s(he).call(he,function(le){return{id:le}});return this.cutSessions(oe,Ve)},ae.findSession=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"id",value:he})},ae.mergeMsgs=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"idClient",sortPath:"time"})},ae.cutMsgs=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"idClient"})},ae.cutMsgsByIdClients=function(oe,he){_e(he)||(he=[he]);var Ve=s(he).call(he,function(le){return{idClient:le}});return this.cutMsgs(oe,Ve)},ae.findMsg=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"idClient",value:he})},ae.mergeSysMsgs=function(oe,he){return this.mergeObjArray(oe,he,{keyPath:"idServer",desc:!0})},ae.cutSysMsgs=function(oe,he){return this.cutObjArray(oe,he,{keyPath:"idServer"})},ae.cutSysMsgsByIdServers=function(oe,he){_e(he)||(he=[he]);var Ve=s(he).call(he,function(le){return{idServer:le}});return this.cutSysMsgs(oe,Ve)},ae.findSysMsg=function(oe,he){return Fe.findObjInArray(oe,{keyPath:"idServer",value:he})},ae.searchLocal=function(oe){if(Fe.verifyOptions(oe,"keyword","searchLocal"),this.db.enable){var he,Ve=this,le=this.db,ie=oe.keyword+"",Ie=["account","nick","alias"],pe=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],kt="",Ue=oe.keyPath;switch(Ue?(kt=(Ue=(Ue+"").split(".")).shift(),Ue=Ue.join(".")):kt="all",kt){case"user":Ue&&(Ie=u(Ie).call(Ie,function(sr){return sr===Ue||c(sr).call(sr,Ue+".")===0})),dr(Ie).then(function(sr){oe.done(null,{sessions:[],users:sr})});break;case"session":Ue&&(pe=u(pe).call(pe,function(sr){return sr===Ue||c(sr).call(sr,Ue+".")===0})),Dt(pe,!Ue||c(Ue).call(Ue,"target")>-1).then(function(sr){oe.done(null,{sessions:sr,users:[]})});break;case"all":ar().then(function(){d.all([Dt(pe,!0),dr(Ie)]).then(function(sr){oe.done(null,{sessions:sr[0],users:sr[1]})})});break;default:oe.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else oe.done(null,{sessions:[],users:[],msg:"no db"});function Dt(sr,$e){return tr.apply(this,arguments)}function tr(){return(tr=a(o.mark(function sr($e,er){var or;return o.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return or=er?[le.getSessions(),ar(),le.getTeams(),le.getSuperTeams()]:[le.getSessions()],ze.abrupt("return",d.all(or).then(function(rr){var Et,Lt=rr[0]||[],cr={p2p:rr[1]||[],team:rr[2]||[],superTeam:rr[3]||[]},mr={};return er&&(m(Et=g(cr)).call(Et,function(vr){var Tr;m(Tr=cr[vr]).call(Tr,function(Ir){var kr=Ir.teamId||Ir.account;mr[vr+"-"+kr]=Ir})}),m(Lt).call(Lt,function(vr){vr.target=mr[vr.id]})),Ne($e,Lt)}));case 2:case"end":return ze.stop()}},sr)}))).apply(this,arguments)}function dr(sr){return pr.apply(this,arguments)}function pr(){return(pr=a(o.mark(function sr($e){var er;return o.wrap(function(or){for(;;)switch(or.prev=or.next){case 0:return or.next=2,ar();case 2:return er=or.sent,or.abrupt("return",Ne($e,er));case 4:case"end":return or.stop()}},sr)}))).apply(this,arguments)}function ar(){return hr.apply(this,arguments)}function hr(){return(hr=a(o.mark(function sr(){var $e,er;return o.wrap(function(or){for(;;)switch(or.prev=or.next){case 0:if(!he){or.next=2;break}return or.abrupt("return",he);case 2:return or.next=4,Ve.db.getFriends();case 4:if(or.t0=or.sent,or.t0){or.next=7;break}or.t0=[];case 7:return $e=or.t0,er=Ve.protocol.userSet||{},he=s($e).call($e,function(ze){return Ce(Ce({},ze),er[ze.account])}),or.abrupt("return",he);case 11:case"end":return or.stop()}},sr)}))).apply(this,arguments)}function Ne(sr,$e){var er=[];return m($e).call($e,function(or){for(var ze=0;ze<sr.length;ze++){var rr=nr(or,sr[ze].split("."));if(rr&&c(rr).call(rr,ie)>-1){er.push(v({},or));break}}}),er}function nr(sr,$e){if(i(sr)==="object"&&sr)return $e.length===1?sr[$e[0]]:nr(sr[$e.shift()],$e)}}},function(t,r,e){var n=e(15),o=e(39).fn,i=e(0),a=e(24).reportAPI;o.kick=function(s){var u;(s=s||{}).done=a({instance:this,className:"NIMFn",funcName:"kick",done:s.done}),i.verifyOptions(s,"deviceIds","link::kick"),this.processCallback(s),this.sendCmd("kick",{deviceIds:n(u=s.deviceIds).call(u,0)},s.callback)},o.disconnect=function(s){(s=s||{}).done=a({instance:this,className:"NIMFn",funcName:"disconnect",done:s.done}),s=s||{},this.protocol.disconnect(s.done)}},function(t,r,e){var n=e(39).fn,o=e(0),i=e(24).reportAPI;n.markInBlacklist=function(a){(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"markInBlacklist",done:a.done}),o.verifyOptions(a,"account isAdd","relation::markInBlacklist"),o.verifyParamType("isAdd",a.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(a),this.sendCmd("markInBlacklist",{account:a.account,isAdd:a.isAdd},a.callback)},n.addToBlacklist=function(a){return(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"addToBlacklist",done:a.done}),a.isAdd=!0,this.markInBlacklist(a)},n.removeFromBlacklist=function(a){return(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"removeFromBlacklist",done:a.done}),a.isAdd=!1,this.markInBlacklist(a)},n.markInMutelist=function(a){(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"markInMutelist",done:a.done}),o.verifyOptions(a,"account","relation::markInMutelist"),o.verifyParamType("isAdd",a.isAdd,"boolean","relation::markInMutelist"),this.processCallback(a),this.sendCmd("markInMutelist",{account:a.account,isAdd:a.isAdd},a.callback)},n.addToMutelist=function(a){return(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"addToMutelist",done:a.done}),a.isAdd=!0,this.markInMutelist(a)},n.removeFromMutelist=function(a){return(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"removeFromMutelist",done:a.done}),a.isAdd=!1,this.markInMutelist(a)},n.getRelations=function(a){(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"getRelations",done:a.done});var s=this,u=s.db,c=0;function d(){s.sendCmd("getRelations",{timetag:c,NOTSTORE:"timetag"},a.callback)}a=o.verifyOptions(a),s.processCallback(a),u.enable?u.getRelationsTimetag().then(function(m){c=m,d()},d):d()}},function(t,r,e){var n=e(7),o=e(2),i=e(6),a=e(39).fn,s=e(0),u=s.objs2accounts,c=e(203),d=e(24).reportAPI;a.updateMyInfo=function(m){(m=m||{}).done=d({instance:this,className:"NIMFn",funcName:"updateMyInfo",done:m.done}),s.verifyOptions(m),this.processCallback(m),m.user=new c(m),delete m.user.account,this.sendCmd("updateMyInfo",{user:m.user,antispamTag:{antiSpamBusinessId:m.antiSpamBusinessId},single:!0},m.callback)},a.getMyInfo=function(m){return(m=m||{}).done=d({instance:this,className:"NIMFn",funcName:"getMyInfo",done:m.done}),(m=m||{}).account=this.account,this.getUser(m)},a.getUser=function(m){(m=m||{}).done=d({instance:this,className:"NIMFn",funcName:"getUser",done:m.done});var v,g=this,b=g.db;function T(){g.sendCmd("getUsers",{accounts:[v],single:!0},m.callback)}s.verifyOptions(m,"account","user::getUser"),g.processCallback(m),m.cbaop=function(_,y){if(!_)return y=y[0]||null,g.logger.info("api::getUser: cbaop ".concat(v)),y},v=m.account,m.sync?T():b.enable?b.getUser(v).then(function(_){_?m.done(null,_):T()},T):T()},a.getUsers=function(m){(m=m||{}).done=d({instance:this,className:"NIMFn",funcName:"getUsers",done:m.done});var v,g=this,b=g.db,T=[];function _(){g.sendCmd("getUsers",{accounts:v,single:!0},m.callback)}s.verifyOptions(m,"accounts","user::getUsers"),s.verifyParamType("accounts",m.accounts,"array","user::getUsers"),g.processCallback(m),m.cbaop=function(y,O){if(!y)return O=n(O).call(O,T),g.logger.info("api::getUsers: cbaop ".concat(v)),O},v=s.deduplicate(m.accounts),s.verifyArrayMax("accounts",m.accounts,150,"user::getUsers"),m.sync?_():b.enable?b.getUsers(v).then(function(y){if(y&&y.length===v.length)m.done(null,y);else{T=y;var O=u(y),V=[];o(v).call(v,function(Ce){i(O).call(O,Ce)===-1&&V.push(Ce)}),v=V,_()}},_):_()}},function(t,r,e){var n=e(138),o=e(39).fn,i=e(0),a=i.notundef,s=e(750),u=e(24).reportAPI;o.friendRequest=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"friendRequest",done:c.done}),i.verifyOptions(c,"type account","friend::friendRequest"),i.verifyParamValid("type",c.type,s.validTypes(),"friend::friendRequest"),this.processPs(c),this.processCallback(c);var d={account:c.account,type:s.getByteFromType(c.type),ps:c.ps};a(c.idServer)&&(d.idServer=c.idServer),this.sendCmd("friendRequest",d,c.callback)},o.addFriend=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"addFriend",done:c.done}),c.type="addFriend",this.friendRequest(c)},o.applyFriend=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"applyFriend",done:c.done}),c.type="applyFriend",this.friendRequest(c)},o.passFriendApply=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"passFriendApply",done:c.done}),i.verifyOptions(c,"idServer","friend::passFriendApply"),c.type="passFriendApply",this.friendRequest(c)},o.rejectFriendApply=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"rejectFriendApply",done:c.done}),i.verifyOptions(c,"idServer","friend::rejectFriendApply"),c.type="rejectFriendApply",this.friendRequest(c)},o.deleteFriend=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"deleteFriend",done:c.done}),i.verifyOptions(c,"account","friend::deleteFriend");var d=c.delAlias===!0;this.processCallback(c),this.sendCmd("deleteFriend",{account:c.account,delFriendParams:{delAlias:d?1:0}},c.callback)},o.updateFriend=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"updateFriend",done:c.done}),this.processCallback(c);var d=new s(c);this.sendCmd("updateFriend",{friend:d,single:!0},c.callback)},o.getFriends=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"getFriends",done:c.done});var d=this.db;i.validate({timetag:{type:"number",required:!1}},c,"friend::getFriends"),this.processCallback(c),d.enable?d.getFriends({updateTime:c.updateTime||0}).then(function(m){(m=n(m).call(m,function(v,g){return v.updateTime-g.updateTime})).invalid=[],c.done(null,m)}):this.sendCmd("getFriends",{timetag:c.updateTime||0,NOTSTORE:"timetag"},c.callback)},o.isMyFriend=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"isMyFriend",done:c.done});var d=this.db;i.validate({account:{type:"string",allowEmpty:!1,require:!0}},c),this.processCallback(c),d.enable||c.done(null,!1),d.getFriend(c.account).then(function(m){m&&m.valid===!0?c.done(null,!0):c.done(null,!1)})},o.isUserInBlackList=function(c){(c=c||{}).done=u({instance:this,className:"NIMFn",funcName:"isUserInBlackList",done:c.done});var d=this.db;i.validate({account:{type:"string",allowEmpty:!1,require:!0}},c),this.processCallback(c),d.enable||c.done(null,!1),d.getUserFromBlackList(c.account).then(function(m){m&&m.account?c.done(null,!0):c.done(null,!1)})}},function(t,r,e){var n=e(39).fn,o=e(24).reportAPI;n.getRobots=function(i){(i=i||{}).done=o({instance:this,className:"NIMFn",funcName:"getRobots",done:i.done}),this.logger.warn("this api will be abandon"),(i=i||{}).type="getRobots",this.processCallback(i),this.sendCmd("sync",{sync:{robots:0}},i.callback)}},function(t,r,e){var n=e(15),o=e(8),i=e(17),a=e(3),s=e(39).fn,u=e(0),c=u.undef,d=e(192),m=e(150),v=e(24).reportAPI;s.createTeam=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"createTeam",done:g.done}),u.verifyOptions(g,"type name","team::createTeam"),c(g.accounts)?g.accounts=[]:u.verifyParamType("accounts",g.accounts,"array","team::createTeam"),g.action="create",this.processPs(g),this.processCallback(g),g.team=new d(g);var T={team:g.team,accounts:n(b=g.accounts).call(b,0),ps:g.ps,antispamTag:{antiSpamBusinessId:g.antiSpamBusinessId}};this.sendCmd("createTeam",T,g.callback)},s.updateTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateTeam",done:g.done}),u.verifyOptions(g,"teamId","team::updateTeam"),g.action="update",this.processCallback(g),g.team=new d(g),this.sendCmd("updateTeam",{team:g.team,antispamTag:{antiSpamBusinessId:g.antiSpamBusinessId},single:!0},g.callback)},s.addTeamMembers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"addTeamMembers",done:g.done}),u.verifyOptions(g,"teamId accounts","team::addTeamMembers"),u.verifyParamType("accounts",g.accounts,"array","team::addTeamMembers"),this.processPs(g),u.notexist(g.custom)&&(g.custom=""),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0),ps:g.ps,attach:g.custom};this.sendCmd("addTeamMembers",T,g.callback)},s.removeTeamMembers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"removeTeamMembers",done:g.done}),u.verifyOptions(g,"teamId accounts","team::removeTeamMembers"),u.verifyParamType("accounts",g.accounts,"array","team::removeTeamMembers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("removeTeamMembers",T,g.callback)},s.acceptTeamInvite=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"acceptTeamInvite",done:g.done}),u.verifyOptions(g,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,type:"teamInvite"};this.sendCmd("acceptTeamInvite",b,g.callback)},s.rejectTeamInvite=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"rejectTeamInvite",done:g.done}),u.verifyOptions(g,"idServer teamId from","team::rejectTeamInvite"),this.processPs(g),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,ps:g.ps,type:"teamInvite"};this.sendCmd("rejectTeamInvite",b,g.callback)},s.applyTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"applyTeam",done:g.done}),u.verifyOptions(g,"teamId","team::applyTeam"),this.processPs(g),this.processCallback(g);var b={teamId:g.teamId,ps:g.ps};this.sendCmd("applyTeam",b,g.callback)},s.passTeamApply=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"passTeamApply",done:g.done}),u.verifyOptions(g,"idServer teamId from","team::passTeamApply"),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,type:"applyTeam"};this.sendCmd("passTeamApply",b,g.callback)},s.rejectTeamApply=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"rejectTeamApply",done:g.done}),u.verifyOptions(g,"idServer teamId from","team::rejectTeamApply"),this.processPs(g),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,ps:g.ps,type:"applyTeam"};this.sendCmd("rejectTeamApply",b,g.callback)},s.addTeamManagers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"addTeamManagers",done:g.done}),u.verifyOptions(g,"teamId accounts","team::addTeamManagers"),u.verifyParamType("accounts",g.accounts,"array","team::addTeamManagers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("addTeamManagers",T,g.callback)},s.removeTeamManagers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"removeTeamManagers",done:g.done}),u.verifyOptions(g,"teamId accounts","team::removeTeamManagers"),u.verifyParamType("accounts",g.accounts,"array","team::removeTeamManagers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("removeTeamManagers",T,g.callback)},s.updateInfoInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateInfoInTeam",done:g.done}),u.verifyOptions(g,"teamId","team::updateInfoInTeam"),this.processCallback(g),this.sendCmd("updateInfoInTeam",{teamMember:new m(g),single:!0},g.callback)},s.updateNickInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateNickInTeam",done:g.done}),u.verifyOptions(g,"teamId account","team::updateNickInTeam"),this.processCallback(g),this.sendCmd("updateNickInTeam",{teamMember:new m(g),single:!0},g.callback)},s.updateMuteStateInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateMuteStateInTeam",done:g.done}),u.verifyOptions(g,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(g),g.mute=g.mute?1:0,this.sendCmd("updateMuteStateInTeam",g)},s.getMutedTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getMutedTeamMembers",done:g.done}),u.verifyOptions(g,"teamId","team::getMutedTeamMembers"),this.processCallback(g),this.sendCmd("getMutedTeamMembers",g)},s.leaveTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"leaveTeam",done:g.done}),u.verifyOptions(g,"teamId","team::leaveTeam"),this.processCallback(g);var b={teamId:g.teamId};this.sendCmd("leaveTeam",b,g.callback)},s.transferTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"transferTeam",done:g.done}),u.verifyOptions(g,"teamId account leave","team::transferTeam"),u.verifyParamType("leave",g.leave,"boolean","team::transferTeam"),this.processCallback(g);var b={teamId:g.teamId,account:g.account,leave:g.leave};this.sendCmd("transferTeam",b,g.callback)},s.dismissTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"dismissTeam",done:g.done}),u.verifyOptions(g,"teamId","team::dismissTeam"),this.processCallback(g);var b={teamId:g.teamId};this.sendCmd("dismissTeam",b,g.callback)},s.getTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeam",done:g.done});var b,T=this,_=T.db;function y(){T.sendCmd("getTeam",{teamId:g.teamId},g.callback)}u.verifyOptions(g,"teamId","team::getTeam"),T.processCallback(g),g.cbaop=function(O){O||T.logger.info("api::getTeam: cbaop ".concat(b))},b=g.teamId,_.enable&&!g.sync?_.getTeam(b).then(function(O){O&&O.validToCurrentUser?(T.logger.log("api::getTeam: db.getTeam ".concat(b)),g.done(null,O)):y()},y):y()},s.getTeams=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeams",done:g.done});var b=this,T=b.db,_=0;function y(){b.sendCmd("getTeams",{timetag:_,NOTSTORE:"timetag"},g.callback)}u.verifyOptions(g),b.processCallback(g),T.enable?T.getTeamsTimetag().then(function(O){_=O,y()},y):y()},s.getTeamsById=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamsById",done:g.done}),u.verifyOptions(g,"teamIds","teams::getTeamsById"),this.processCallback(g),this.sendCmd("getTeamsById",{teamIds:g.teamIds},g.callback)},s.getTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMembers",done:g.done});var b=this;u.verifyOptions(g,"teamId","team::getTeamMembers"),b.processCallback(g),b.sendCmd("getTeamMembers",{teamId:g.teamId,timetag:0,NOTSTORE:"timetag"},g.callback)},s.getTeamMemberByTeamIdAndAccount=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMemberByTeamIdAndAccount",done:g.done});var b=this;u.verifyParamType("teamId",g.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),u.verifyOptions(g,"account","team::getTeamMemberByTeamIdAndAccount"),b.processCallback(g),b.sendCmd("getTeamMembers",{teamId:g.teamId,timetag:0,NOTSTORE:"timetag"},function(T,_,y){var O={};if(_&&_.members&&_.members.length){for(var V=0;V<_.members.length;V++)if(_.members[V].account===g.account){O[g.account]=_.members[V];break}}g.callback(T,O,y)})},s.getTeamMemberInvitorAccid=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMemberInvitorAccid",done:g.done}),u.verifyParamType("teamId",g.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),c(g.accounts)||(u.verifyParamType("accounts",g.accounts,"array","team::getTeamMemberInvitorAccid"),g.accounts.length>200&&u.onParamError("accounts 参数数组长度不能超过200","team::getTeamMemberInvitorAccid"));var b,T={teamId:g.teamId};g.accounts.length&&(T.accounts=n(b=g.accounts).call(b,0)),this.processCallback(g),this.sendCmd("getTeamMemberInvitorAccid",T,function(_,y,O){g.callback(_,O&&O.accountsMap||{})})},s.notifyForNewTeamMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"notifyForNewTeamMsg",done:g.done}),u.verifyOptions(g,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(g.teamIds).then(function(b){g.done(b.error||null,o(b),b.miss)},function(b){g.done(b)})},s.getMyTeamMembers=function(g){v({instance:this,className:"NIMFn",funcName:"getMyTeamMembers",hasCallback:!1}),u.verifyOptions(g,"teamIds","team::getMyTeamMembers");var b=this.processCallbackPromise(g);return this.sendCmd("getMyTeamMembers",g),b},s.getLocalTeams=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalTeams",done:g.done});var b,T=this.db,_=[];function y(){g.teams=_,g.done(b,g)}u.verifyOptions(g,"teamIds","team::getLocalTeams"),u.verifyParamType("teamIds",g.teamIds,"array","team::getLocalTeams"),this.processCallback(g),T.enable?T.getTeamsByTeamIds(g.teamIds).then(function(O){_=i(O).call(O,function(V){return!!V}),y()},function(O){b=O,y()}):y()},s.getLocalTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalTeamMembers",done:g.done});var b,T=this.db,_=[];function y(){g.members=_,g.done(b,g)}u.verifyOptions(g,"teamId accounts","team::getLocalTeamMembers"),u.verifyParamType("accounts",g.accounts,"array","team::getLocalTeamMembers"),this.processCallback(g),T.enable?T.getInvalidTeamMembers(g.teamId,g.accounts).then(function(O){_=i(O).call(O,function(V){return!!V}),y()},function(O){b=O,y()}):y()},s.deleteLocalTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteLocalTeam",done:g.done});var b,T=this.db;function _(){g.done(b,g)}u.verifyOptions(g,"teamId","team::deleteLocalTeam"),this.processCallback(g),T.enable?T.deleteTeam(g.teamId).then(function(){_()},function(y){b=y,_()}):_()},s.muteTeamAll=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"muteTeamAll",done:g.done}),u.verifyOptions(g,"teamId mute","team::muteTeamAll"),g.mute=g.mute?1:0,this.processCallback(g),this.sendCmd("muteTeamAll",g)},s.sendTeamMsgReceipt=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"sendTeamMsgReceipt",done:g.done}),u.verifyOptions(g,"teamMsgReceipts","team::sendTeamMsgReceipt"),g.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceipt：teamMsgReceipts length over 50"):(this.processCallback(g),this.sendCmd("sendTeamMsgReceipt",g))},s.getTeamMsgReads=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMsgReads",done:g.done}),u.verifyOptions(g,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(g),this.sendCmd("getTeamMsgReads",g)},s.getTeamMsgReadAccounts=function(g){var b=this;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMsgReadAccounts",done:g.done});var T,_=this;u.verifyOptions(g,"teamMsgReceipt","team::getTeamMsgReadAccounts"),g.callback=function(y,O,V){y&&T?(O=O||{teamMsgReceipt:g.teamMsgReceipt},g.done(y,O,{teamMsgReceipt:g.teamMsgReceipt,unreadAccounts:T.unreadAccounts,readAccounts:T.readAccounts})):g.done(y,O,V)},this.db.enable&&g.teamMsgReceipt.idClient?this.db.getMsgReadDetail(g.teamMsgReceipt.idClient).then(function(y){if(T=y,!y)return a.reject("no record");if(y.unreadAccounts&&y.unreadAccounts.length>0)return a.reject("unreadAccounts.length > 0");var O={teamMsgReceipt:g.teamMsgReceipt,unreadAccounts:y.unreadAccounts,readAccounts:y.readAccounts};_.logger.info("getTeamMsgReadAccounts from db"),g.done(null,{teamMsgReceipt:g.teamMsgReceipt},O)}).catch(function(y){b.logger.warn("db.getMsgReadDetail invalid",y),_.sendCmd("getTeamMsgReadAccounts",g)}):_.sendCmd("getTeamMsgReadAccounts",g)}},function(t,r,e){var n=e(754),o=e(3),i=e(9),a=e(25),s=e(15),u=e(8),c=e(2),d=e(7),m=e(39).fn,v=e(0),g=v.undef,b=e(307),T=e(202),_=e(24).reportAPI;function y(O){var V=this.db;if(!V.enable)return o.resolve({valid:!1});var Ce=V.getSuperTeam(O),ae=V.getSuperTeamMembersTimetag(O);return o.all([Ce,ae]).then(function(Fe){var _e=n(Fe,2),de=_e[0],oe=_e[1],he=de&&de.memberUpdateTime,Ve={timetag:oe=oe||0};return he&&oe>=he&&(Ve.valid=!0),o.resolve(Ve)}).catch(function(){return o.resolve({timetag:0})})}m.addSuperTeamMembers=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"addSuperTeamMembers",done:O.done}),v.verifyOptions(O,"teamId accounts","superTeam::addSuperTeamMembers"),v.verifyParamType("accounts",O.accounts,"array","superTeam::addSuperTeamMembers");var V=v.deduplicate(O.accounts);this.processPs(O),this.processCallback(O);var Ce={teamId:O.teamId,accounts:V,ps:O.ps};this.sendCmd("addSuperTeamMembers",Ce,O.callback)},m.removeSuperTeamMembers=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembers",done:O.done}),v.verifyOptions(O,"teamId accounts","team::removeSuperTeamMembers"),v.verifyParamType("accounts",O.accounts,"array","team::removeSuperTeamMembers");var V=v.deduplicate(O.accounts);this.processCallback(O);var Ce={teamId:O.teamId,accounts:V};this.sendCmd("removeSuperTeamMembers",Ce,O.callback)},m.leaveSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"leaveSuperTeam",done:O.done}),v.verifyOptions(O,"teamId","superTeam::leaveSuperTeam"),this.processCallback(O);var V={teamId:O.teamId};this.sendCmd("leaveSuperTeam",V,O.callback)},m.getSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getSuperTeam",done:O.done});var V,Ce=this,ae=Ce.db;function Fe(){Ce.sendCmd("getSuperTeam",{teamId:O.teamId},O.callback)}v.verifyOptions(O,"teamId","team::getSuperTeam"),Ce.processCallback(O),O.cbaop=function(_e){_e||Ce.logger.info("api::getSuperTeam: cbaop ".concat(V))},V=O.teamId,ae.enable&&!O.sync?ae.getSuperTeam(V).then(function(_e){_e&&_e.validToCurrentUser?(Ce.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(V)),O.done(null,_e)):Fe()}).catch(function(){Fe()}):Fe()},m.getSuperTeams=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getSuperTeams",done:O.done});var V=this,Ce=V.db,ae=0;function Fe(){V.sendCmd("getSuperTeams",{timetag:ae,NOTSTORE:"timetag"},O.callback)}v.verifyOptions(O),V.processCallback(O),Ce.enable?Ce.getSuperTeamsTimetag().then(function(_e){ae=_e,Fe()},Fe):Fe()},m.updateSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"updateSuperTeam",done:O.done}),v.verifyOptions(O,"teamId","superTeam::updateSuperTeam"),O.action="update",this.processCallback(O),O.team=new b(O),this.sendCmd("updateSuperTeam",{team:O.team,antispamTag:{antiSpamBusinessId:O.antiSpamBusinessId},single:!0},O.callback)},m.updateInfoInSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"updateInfoInSuperTeam",done:O.done}),v.verifyOptions(O,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(O),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new T(O),single:!0},O.callback)},m.getSuperTeamMembersByJoinTime=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByJoinTime",done:O.done});var V=this,Ce=O,ae=Ce.joinTime,Fe=i(Ce),_e=Ce.limit,de=Ce.teamId;Fe=!!Fe,g(ae)&&(ae=0),g(_e)&&(_e=100),v.verifyOptions(O,"teamId","superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("joinTime",ae,"number","api::superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("limit",_e,"number","api::superTeam::getSuperTeamMembersByJoinTime"),V.processCallback(O),V.sendCmd("getSuperTeamMembersByJoinTime",{teamId:de,limit:_e,joinTime:ae,reverse:Fe,timetag:0,NOTSTORE:"timetag"},O.callback)},m.getAllSuperTeamMembers=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getAllSuperTeamMembers",done:O.done});var V=this,Ce=this.db;function ae(Fe){Fe=Fe||0,V.sendCmd("getSuperTeamMembers",{teamId:O.teamId,timetag:Fe,NOTSTORE:"timetag"},O.callback)}v.verifyOptions(O,"teamId","superTeam::getAllSuperTeamMembers"),V.processCallback(O),a(y).call(y,this)(O.teamId).then(function(Fe){var _e=Fe.valid,de=Fe.timetag;_e?(V.logger.info("getAllSuperTeamMembers from local db"),Ce.getSuperTeamMembers(O.teamId).then(function(oe){var he={teamId:O.teamId,members:oe};O.done(null,he)},function(){return ae()})):ae(de)})},m.applySuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"applySuperTeam",done:O.done}),v.verifyOptions(O,"teamId","team::applySuperTeam"),v.verifyOptions(O,"teamId","team::applySuperTeam"),this.processPs(O),this.processCallback(O);var V={teamId:O.teamId,ps:O.ps};this.sendCmd("applySuperTeam",V,O.callback)},m.passSuperTeamApply=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"passSuperTeamApply",done:O.done}),v.verifyOptions(O,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(O);var V={idServer:O.idServer,teamId:O.teamId,from:O.from};this.sendCmd("passSuperTeamApply",V,O.callback)},m.rejectSuperTeamApply=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"rejectSuperTeamApply",done:O.done}),v.verifyOptions(O,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(O),this.processCallback(O);var V={idServer:O.idServer,teamId:O.teamId,from:O.from,ps:O.ps};this.sendCmd("rejectSuperTeamApply",V,O.callback)},m.acceptSuperTeamInvite=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"acceptSuperTeamInvite",done:O.done}),v.verifyOptions(O,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(O);var V={idServer:O.idServer,teamId:O.teamId,from:O.from};this.sendCmd("acceptSuperTeamInvite",V,O.callback)},m.rejectSuperTeamInvite=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"rejectSuperTeamInvite",done:O.done}),v.verifyOptions(O,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(O),this.processCallback(O);var V={idServer:O.idServer,teamId:O.teamId,from:O.from,ps:O.ps};this.sendCmd("rejectSuperTeamInvite",V,O.callback)},m.addSuperTeamManagers=function(O){var V;(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"addSuperTeamManagers",done:O.done}),v.verifyOptions(O,"teamId accounts","team::addSuperTeamManagers"),v.verifyParamType("accounts",O.accounts,"array","team::addSuperTeamManagers"),this.processCallback(O);var Ce={teamId:O.teamId,accounts:s(V=O.accounts).call(V,0)};this.sendCmd("addSuperTeamManagers",Ce,O.callback)},m.removeSuperTeamManagers=function(O){var V;(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"removeSuperTeamManagers",done:O.done}),v.verifyOptions(O,"teamId accounts","team::removeSuperTeamManagers"),v.verifyParamType("accounts",O.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(O);var Ce={teamId:O.teamId,accounts:s(V=O.accounts).call(V,0)};this.sendCmd("removeSuperTeamManagers",Ce,O.callback)},m.updateSuperTeamMembersMute=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"updateSuperTeamMembersMute",done:O.done}),v.verifyOptions(O,"teamId accounts mute","team::updateSuperTeamMembersMute"),v.verifyParamType("accounts",O.accounts,"array","team::updateSuperTeamMembersMute"),v.verifyArrayMax("accounts",O.accounts,10),this.processCallback(O),O.mute=O.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",O)},m.updateSuperTeamMute=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"updateSuperTeamMute",done:O.done}),v.verifyOptions(O,"teamId mute","team::updateSuperTeamMute"),O.mute=O.mute?1:0,this.processCallback(O),this.sendCmd("updateSuperTeamMute",O)},m.updateNickInSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"updateNickInSuperTeam",done:O.done}),v.verifyOptions(O,"teamId account","team::updateNickInSuperTeam"),this.processCallback(O),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new T(O),single:!0},O.callback)},m.transferSuperTeam=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"transferSuperTeam",done:O.done}),v.verifyOptions(O,"teamId account leave","team::transferSuperTeam"),v.verifyParamType("leave",O.leave,"boolean","team::transferSuperTeam"),this.processCallback(O);var V={teamId:O.teamId,account:O.account,leave:O.leave};this.sendCmd("transferSuperTeam",V,O.callback)},m.getSuperTeamMembersByAccounts=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByAccounts",done:O.done});var V=this,Ce=this.db,ae=O,Fe=ae.teamId,_e=ae.accounts;if(v.verifyOptions(O,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),v.verifyParamType("accounts",_e,"array","superTeam::getSuperTeamMembersByAccounts"),v.verifyArrayMax("accounts",_e,20),_e.length<=0)return v.onParamError("参数accounts不能为空数组","superTeam::getSuperTeamMembersByAccounts");function de(){var oe=u(_e).call(_e,function(he){return Fe+"|"+he});V.processCallback(O),V.sendCmd("getSuperTeamMembersByAccounts",{memberIds:oe},function(he,Ve){O.done(null,{accounts:_e,members:Ve.members,invaldAccounts:Ve.invalid})})}y.call(this,Fe).then(function(oe){var he,Ve,le;return oe.valid?(he=[],Ve=[],le=[],c(_e).call(_e,function(ie){var Ie,pe=Ce.getSuperTeamMemberById(d(Ie="".concat(Fe,"-")).call(Ie,ie)).then(function(kt){Ve.push(kt)}).catch(function(){le.push(ie)});he.push(pe)}),void o.all(he).then(function(){O.done(null,{accounts:_e,members:Ve,invaldAccounts:le})})):de()}).catch(function(){return de()})},m.getMutedSuperTeamMembers=function(O){(O=O||{}).done=_({instance:this,className:"NIMFn",funcName:"getMutedSuperTeamMembers",done:O.done});var V=this,Ce=O,ae=Ce.joinTime,Fe=i(Ce),_e=Ce.limit,de=Ce.teamId;Fe=!!Fe,g(ae)&&(ae=0),g(_e)&&(_e=100),v.verifyOptions(O,"teamId","superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("joinTime",ae,"number","api::superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("limit",_e,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(O),V.sendCmd("getMutedSuperTeamMembers",{teamId:de,limit:_e,joinTime:ae,reverse:Fe},O.callback)}},function(t,r,e){var n=e(102),o=e(8),i=e(3),a=e(2),s=e(7),u=e(9),c=e(749),d=e(41),m=e(15),v=e(87),g=e(32),b=e(17),T=e(6),_=e(85),y=e(86),O=e(70),V=e(103);function Ce(pe,kt){var Ue=y!==void 0&&O(pe)||pe["@@iterator"];if(!Ue){if(g(pe)||(Ue=function(hr,Ne){var nr;if(hr){if(typeof hr=="string")return ae(hr,Ne);var sr=m(nr=Object.prototype.toString.call(hr)).call(nr,8,-1);if(sr==="Object"&&hr.constructor&&(sr=hr.constructor.name),sr==="Map"||sr==="Set")return _(hr);if(sr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sr))return ae(hr,Ne)}}(pe))||kt&&pe&&typeof pe.length=="number"){Ue&&(pe=Ue);var Dt=0,tr=function(){};return{s:tr,n:function(){return Dt>=pe.length?{done:!0}:{done:!1,value:pe[Dt++]}},e:function(hr){throw hr},f:tr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dr,pr=!0,ar=!1;return{s:function(){Ue=Ue.call(pe)},n:function(){var hr=Ue.next();return pr=hr.done,hr},e:function(hr){ar=!0,dr=hr},f:function(){try{pr||Ue.return==null||Ue.return()}finally{if(ar)throw dr}}}}function ae(pe,kt){(kt==null||kt>pe.length)&&(kt=pe.length);for(var Ue=0,Dt=new Array(kt);Ue<kt;Ue++)Dt[Ue]=pe[Ue];return Dt}var Fe=e(39).fn,_e=e(0),de=_e.undef,oe=_e.notundef,he=e(296),Ve=e(152),le=e(24).reportAPI,ie=e(848);function Ie(pe,kt){var Ue=this,Dt=[],tr=[],dr=this.db,pr=this;return dr.enable?(a(pe).call(pe,function(hr){var Ne=Ue.protocol.getSessionInCache(hr);Ne?ar(Ne,hr):tr.push(dr.getSession(hr).then(function(nr){return ar(nr,hr)}))}),i.all(tr).then(function(){return Dt})):(a(pe).call(pe,function(hr){return ar(Ue.protocol.getSessionInCache(hr),hr)}),i.resolve(Dt));function ar(hr,Ne){var nr,sr,$e,er;hr?hr.lastMsg?hr.scene&&hr.to?hr.ack>=hr.lastMsg.time?pr.logger.warn(s(nr="".concat(kt," not need ack ")).call(nr,hr.id)):Dt.push(hr):pr.logger.warn(s(sr="".concat(kt," session.scene|to undefined ")).call(sr,hr.id)):pr.logger.warn(s($e="".concat(kt," session.lastMsg undefined ")).call($e,hr.id)):pr.logger.warn(s(er="".concat(kt," session undefined ")).call(er,Ne))}}Fe.setCurrSession=function(pe){le({instance:this,className:"NIMFn",funcName:"setCurrSession",hasCallback:!1}),this.resetSessionUnread(pe),this.protocol.setCurrSession(pe)},Fe.resetAllSessionUnread=function(){le({instance:this,className:"NIMFn",funcName:"resetAllSessionUnread",hasCallback:!1});for(var pe in this.protocol.sessionSet)this.protocol.sessionSet[pe].unread>0&&this.resetSessionUnread(pe)},Fe.resetSessionsUnread=function(){var pe=V(n.mark(function kt(Ue){var Dt,tr,dr,pr,ar,hr,Ne,nr,sr=arguments;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Dt=sr.length>1&&sr[1]!==void 0?sr[1]:function(){},Dt=le({instance:this,className:"NIMFn",funcName:"resetSessionsUnread",done:Dt}),(tr=this).logger.info("resetSessionsUnread::",Ue),$e.next=6,Ie.call(this,Ue,"api::resetSessionsUnread");case 6:if(dr=$e.sent,tr.protocol.resetSessionsUnread(dr),tr.options.syncSessionUnread&&dr.length!==0){$e.next=11;break}return Dt(),$e.abrupt("return");case 11:pr=o(dr).call(dr,function(er){return{scene:er.scene==="p2p"?0:1,to:er.to,timetag:er.lastMsg.time}}),ar=ie(pr,50),hr=Ce(ar),$e.prev=14,nr=n.mark(function er(){var or;return n.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return or=Ne.value,ze.next=3,new i(function(rr,Et){tr.sendCmd("markSessionAckBatch",{sessionAckTags:or},function(Lt){Lt?(Dt(Lt),Et(Lt)):rr()})});case 3:case"end":return ze.stop()}},er)}),hr.s();case 17:if((Ne=hr.n()).done){$e.next=21;break}return $e.delegateYield(nr(),"t0",19);case 19:$e.next=17;break;case 21:$e.next=26;break;case 23:$e.prev=23,$e.t1=$e.catch(14),hr.e($e.t1);case 26:return $e.prev=26,hr.f(),$e.finish(26);case 29:Dt(null);case 30:case"end":return $e.stop()}},kt,this,[[14,23,26,29]])}));return function(kt){return pe.apply(this,arguments)}}(),Fe.resetSuperTeamSessionsUnread=function(){var pe=V(n.mark(function kt(Ue){var Dt,tr,dr,pr,ar,hr,Ne,nr,sr=arguments;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Dt=sr.length>1&&sr[1]!==void 0?sr[1]:function(){},Dt=le({instance:this,className:"NIMFn",funcName:"resetSuperTeamSessionsUnread",done:Dt}),(tr=this).logger.info("resetSuperTeamSessionsUnread::",Ue),$e.next=6,Ie.call(this,Ue,"api::resetSuperTeamSessionsUnread");case 6:if(dr=$e.sent,tr.protocol.resetSessionsUnread(dr),tr.options.syncSessionUnread&&dr.length!==0){$e.next=11;break}return Dt(),$e.abrupt("return");case 11:pr=o(dr).call(dr,function(er){return{to:er.to,timetag:er.lastMsg.time}}),ar=ie(pr,50),hr=Ce(ar),$e.prev=14,nr=n.mark(function er(){var or;return n.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return or=Ne.value,ze.next=3,new i(function(rr,Et){tr.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:or},function(Lt){Lt?(Dt(Lt),Et(Lt)):rr()})});case 3:case"end":return ze.stop()}},er)}),hr.s();case 17:if((Ne=hr.n()).done){$e.next=21;break}return $e.delegateYield(nr(),"t0",19);case 19:$e.next=17;break;case 21:$e.next=26;break;case 23:$e.prev=23,$e.t1=$e.catch(14),hr.e($e.t1);case 26:return $e.prev=26,hr.f(),$e.finish(26);case 29:Dt(null);case 30:case"end":return $e.stop()}},kt,this,[[14,23,26,29]])}));return function(kt){return pe.apply(this,arguments)}}(),Fe.resetSessionUnread=function(pe){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};kt=le({instance:this,className:"NIMFn",funcName:"resetSessionUnread",done:kt});var Ue=this,Dt=Ue.options.resetUnreadMode!==!1,tr=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;hr?kt(hr,pe):kt(null)};Ue.logger.info("resetSessionUnread::use reset mode",Dt);var dr=Ue.protocol.getSessionInCache(pe),pr=!dr&&this.db.enable?Ue.db.getSession(pe):i.resolve(dr);function ar(hr){if(!hr.lastMsg&&!hr.updateTime)return Ue.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(pe)),tr();if(!hr.scene||!hr.to)return Ue.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(pe)),tr();var Ne;if(Ne=hr.lastMsg?hr.lastMsg.time:hr.updateTime,hr&&hr.ack&&hr.ack>=Ne)return Ue.logger.warn("api::resetSessionUnread: session ack not needs ".concat(pe)),tr();var nr={done:function($e){$e?(Ue.logger.error({message:$e||"mark ack failed",callFunc:"resetSessionUnread"}),tr($e||"mark ack failed")):(Dt||Ue.protocol.resetSessionUnread(hr),tr())}};if(Ue.processCallback(nr),hr.scene==="superTeam")Ue.sendCmd("markSuperTeamSessionAck",{to:hr.to,timetag:Ne},nr.callback);else{var sr={scene:hr.scene==="p2p"?0:1,to:hr.to,timetag:Ne};Ue.sendCmd("markSessionAck",sr,nr.callback)}}pr.then(function(hr){return hr?Ue.options.syncSessionUnread?(Dt&&Ue.protocol.resetSessionUnread(hr),void ar(hr)):(Ue.protocol.resetSessionUnread(hr),tr()):(Ue.logger.warn("api::resetSessionUnread: session undefined ".concat(pe)),tr())})},Fe.resetCurrSession=function(){le({instance:this,className:"NIMFn",funcName:"resetCurrSession",hasCallback:!1}),this.protocol.setCurrSession("")},Fe.insertLocalSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"insertLocalSession",done:pe.done});var kt,Ue;function Dt(){pe.session=Ue,pe.done(kt,pe)}_e.verifyOptions(pe,"scene to","scene::insertLocalSession"),_e.verifyParamValid("scene",pe.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(pe).then(function(tr){Ue=tr,Dt()},function(tr){kt=tr,Dt()})},Fe.getLocalSessions=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getLocalSessions",done:pe.done});var kt=[];_e.verifyOptions(pe),de(pe.limit)&&(pe.limit=100),_e.verifyParamType("limit",pe.limit,"number","scene::getLocalSessions"),oe(u(pe))?_e.verifyParamType("reverse",u(pe),"boolean","scene::getLocalSessions"):pe.reverse=!1,this.processCallback(pe);var Ue=c(this.protocol.sessionSet),Dt=0,tr=pe.lastSessionId;if(u(pe)){var dr,pr=Ce(Ue);try{for(pr.s();!(dr=pr.n()).done;){var ar=dr.value,hr=ar.id;if(tr)hr===tr&&(tr=void 0);else if(ar.lastMsg!==void 0&&!ar.isDeleted){if(++Dt>pe.limit)break;kt.push(d({},ar))}}}catch(er){pr.e(er)}finally{pr.f()}}else{var Ne,nr,sr=Ce(Ue);try{for(sr.s();!(nr=sr.n()).done;){var $e=nr.value;if(tr===$e.id)break;$e.lastMsg===void 0||$e.isDeleted||kt.push($e)}}catch(er){sr.e(er)}finally{sr.f()}kt=u(Ne=m(kt).call(kt,-pe.limit)).call(Ne)}this.logger.debug("getLocalSessions::sessions is",kt),kt=o(kt).call(kt,function(er){return v(Ve).call(Ve,er)}),pe.sessions=kt,delete pe.callback,pe.done(void 0,pe)},Fe.getLocalSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getLocalSession",done:pe.done});var kt=this,Ue=kt.db,Dt=null;if(_e.verifyOptions(pe,"sessionId","scene::getLocalSession"),_e.verifyParamType("sessionId",pe.sessionId,"string","scene::getLocalSession"),Dt=kt.protocol.getSessionInCache(pe.sessionId),kt.logger.debug("getLocalSession::cache session is",Dt),!Dt&&Ue.enable)return kt.processCallback(pe),void Ue.getSession(pe.sessionId).then(function(tr){tr&&(Dt=tr,kt.logger.debug("getLocalSession::db session is",Dt)),pe.done(null,Dt)}).catch(function(tr){pe.done(tr)});pe.done(null,v(Ve).call(Ve,Dt))},Fe.getLocalSessionsByMsgType=function(pe){var kt;(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getLocalSessionsByMsgType",done:pe.done});var Ue=this.db,Dt=pe.exclude,tr=[],dr=m(kt=he.validTypes).call(kt,0);if(oe(Dt)){if(typeof Dt=="string")Dt=[Dt];else if(!g(Dt))return void _e.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");Dt=b(Dt).call(Dt,function(pr){return T(dr).call(dr,pr)>-1}),dr=b(dr).call(dr,function(pr){return T(Dt).call(Dt,pr)===-1})}this.processCallback(pe),Ue.enable?Ue.getSessions().then(function(pr){Dt&&Dt.length!==0?dr&&dr.length!==0?(a(pr).call(pr,function(ar,hr){var Ne,nr,sr;ar.lastMsg&&T(Dt).call(Dt,ar.lastMsg.type)>-1&&(Ne=hr,nr=ar.id,sr=Ue.getMsgs({sessionId:nr,limit:1,types:dr}).then(function($e){return $e&&$e[0]?pr[Ne].lastMsg=$e[0]:pr[Ne].lastMsg=null,i.resolve()}),tr.push(sr))}),i.all(tr).then(function(){pe.done(null,{exclude:Dt,sessions:pr})})):pe.done(null,{exclude:Dt,sessions:o(pr).call(pr,function(ar){ar.lastMsg=null})}):pe.done(null,{exclude:Dt,sessions:pr})}):pe.done(null,{exclude:Dt,sessions:[]})},Fe.updateLocalSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateLocalSession",done:pe.done});var kt,Ue=this,Dt=Ue.db;_e.verifyOptions(pe,"id","scene::updateLocalSession"),Ue.processCallback(pe);var tr=_e.filterObj(pe,"id localCustom");function dr(){pe.needNotify!==!1&&Ue.protocol.onUpdateSession(tr),pe.session=tr,pe.done(kt,pe)}tr=Ue.protocol.updateSessionInCache(pe),Dt.enable&&tr?Dt.updateSession(tr).then(function(pr){tr=pr,dr()},function(pr){kt=pr,dr()}):dr()},Fe.deleteLocalSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteLocalSession",done:pe.done});var kt,Ue=this,Dt=Ue.db;_e.verifyOptions(pe,"id","session::deleteLocalSession"),Ue.processCallback(pe);var tr=Ue.protocol.getSessionInCache(pe.id);if(Ue.protocol.deleteSessionInCache(pe.id,pe.isLogic),Dt.enable?(pe.isLogic?Dt.deleteSessionLogic(pe.id):Dt.deleteSession(pe.id,tr)).then(function(){Ue.logger.info("sessions::deleteSessionInDb::delete session done",pe.id),pr()},function(ar){kt=ar,pr()}):pr(),pe.isDeleteRoaming){var dr=typeof pe.id=="string"?[pe.id]:pe.id;dr=o(dr).call(dr,function(ar){return ar.replace("-","|")}),this.sendCmd("deleteSessions",{sessions:dr},function(){})}function pr(){pe.done(kt,pe)}},Fe.deleteSession=function(pe,kt){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteSession",done:pe.done}),kt||this.logger.warn('this api will be abandon,please use "deleteLocalSession"'),_e.verifyOptions(pe,"scene to","session::deleteSession"),this.processCallback(pe),pe.sessions=[{scene:pe.scene,to:pe.to}],this.deleteSessions(pe)},Fe.deleteRoamingMsgBySession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteRoamingMsgBySession",done:pe.done}),this.deleteSession(pe,!0)},Fe.deleteSessions=function(pe){var kt,Ue;(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteSessions",done:pe.done}),_e.verifyOptions(pe,"sessions","session::deleteSessions"),_e.verifyParamType("sessions",pe.sessions,"array","session::deleteSessions"),a(kt=pe.sessions).call(kt,function(Dt,tr){_e.verifyOptions(Dt,"scene to",!0,"sessions["+tr+"].","session::deleteSessions")}),this.processCallback(pe),this.sendCmd("deleteSessions",{sessions:o(Ue=pe.sessions).call(Ue,function(Dt){return Dt.scene+"|"+Dt.to})},pe.callback)},Fe.getServerSessions=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getServerSessions",done:pe.done}),oe(pe.minTimestamp)&&_e.verifyParamType("minTimestamp",pe.minTimestamp,"number","session::deleteSessions"),oe(pe.maxTimestamp)&&_e.verifyParamType("maxTimestamp",pe.maxTimestamp,"number","session::deleteSessions"),oe(pe.needLastMsg)&&(pe.needLastMsg=pe.needLastMsg===!1?0:1),oe(pe.limit)&&(_e.verifyParamType("limit",pe.limit,"number","session::deleteSessions"),_e.verifyParamMax("limit",pe.limit,100,"scene::getLocalSessions")),this.processCallback(pe),this.sendCmd("getServerSessions",{sessionReqTag:pe},pe.callback)},Fe.getServerSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getServerSession",done:pe.done}),_e.verifyOptions(pe,"scene to","scene::getServerSession"),_e.verifyParamValid("scene",pe.scene,this.message.validScenes,"scene::getServerSession"),_e.verifyParamType("to",pe.to,"string","to::getServerSession");var kt=pe.scene+"|"+pe.to;pe.scene==="superTeam"&&(kt="super_team|"+pe.to),this.processCallback(pe),this.sendCmd("getServerSession",{session:{id:kt}},pe.callback)},Fe.updateServerSession=function(pe){(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateServerSession",done:pe.done}),_e.verifyOptions(pe,"scene to","scene::updateServerSession"),_e.verifyParamValid("scene",pe.scene,this.message.validScenes,"scene::updateServerSession"),_e.verifyParamType("to",pe.to,"string","to::updateServerSession"),oe(pe.extra)&&_e.verifyParamType("extra",pe.extra,"string","extra::updateServerSession");var kt=pe.scene+"|"+pe.to;pe.scene==="superTeam"&&(kt="super_team|"+pe.to),this.processCallback(pe),this.sendCmd("updateServerSession",{session:{id:kt,ext:pe.extra||""}},pe.callback)},Fe.deleteServerSessions=function(pe){var kt,Ue=this;(pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteServerSessions",done:pe.done}),_e.verifyOptions(pe,"sessions","scene::deleteServerSessions"),_e.verifyParamType("sessions",pe.sessions,"array","sessions::deleteServerSessions");var Dt=[];a(kt=pe.sessions).call(kt,function(tr){_e.verifyParamValid("scene",tr.scene,Ue.message.validScenes,"scene::deleteServerSessions"),_e.verifyParamType("to",tr.to,"string","to::deleteServerSessions");var dr=tr.scene+"|"+tr.to;tr.scene==="superTeam"&&(dr="super_team|"+tr.to),Dt.push({id:dr})}),this.processCallback(pe),this.sendCmd("deleteServerSessions",{sessions:Dt},pe.callback)},Fe.updateSessionsWithMoreRoaming=function(pe){var kt;if((pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateSessionsWithMoreRoaming",done:pe.done}),_e.verifyOptions(pe,"msg","session::updateSessionsWithMoreRoaming"),_e.verifyCallback(pe,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return pe.done(null,"db is disable");var Ue={time:pe.msg.time,idServer:pe.msg.idServer,to:pe.msg.to,from:pe.msg.from};_e.verifyParamType("msg.time",pe.msg.time,"number","time::updateSessionsWithMoreRoaming"),_e.verifyParamType("msg.idServer",pe.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),_e.verifyParamType("msg.from",pe.msg.from,"string","from::updateSessionsWithMoreRoaming"),_e.verifyParamType("msg.to",pe.msg.to,"string","to::updateSessionsWithMoreRoaming"),_e.verifyParamValid("scene",pe.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var Dt=Ue.to===this.account?Ue.from:Ue.to;Ue.id=s(kt="".concat(pe.msg.scene,"-")).call(kt,Dt),this.db.updateSessionsWithMoreRoaming(Ue).then(function(tr){pe.done(null,tr)}).catch(function(tr){pe.done(tr)})},Fe.deleteSessionsWithMoreRoaming=function(pe){if((pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteSessionsWithMoreRoaming",done:pe.done}),_e.verifyOptions(pe,"id","session::deleteSessionsWithMoreRoaming"),_e.verifyCallback(pe,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return pe.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(pe.id).then(function(kt){pe.done(null,kt)}).catch(function(kt){pe.done(kt)})},Fe.getSessionsWithMoreRoaming=function(pe){if((pe=pe||{}).done=le({instance:this,className:"NIMFn",funcName:"getSessionsWithMoreRoaming",done:pe.done}),_e.verifyCallback(pe,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return pe.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(pe.id).then(function(kt){pe.done(null,kt)}).catch(function(kt){pe.done(kt)})}},function(t,r,e){var n=e(849),o=e(850),i=e(851),a=Math.ceil,s=Math.max;t.exports=function(u,c,d){c=(d?o(u,c,d):c===void 0)?1:s(i(c),0);var m=u==null?0:u.length;if(!m||c<1)return[];for(var v=0,g=0,b=Array(a(m/c));v<m;)b[g++]=n(u,v,v+=c);return b}},function(t,r){t.exports=function(e,n,o){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(o=o>a?a:o)<0&&(o+=a),a=n>o?0:o-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}},function(t,r,e){var n=e(199),o=e(200),i=e(301),a=e(88);t.exports=function(s,u,c){if(!a(c))return!1;var d=typeof u;return!!(d=="number"?o(c)&&i(u,c.length):d=="string"&&u in c)&&n(c[u],s)}},function(t,r,e){var n=e(852);t.exports=function(o){var i=n(o),a=i%1;return i==i?a?i-a:i:0}},function(t,r,e){var n=e(853);t.exports=function(o){return o?(o=n(o))===1/0||o===-1/0?17976931348623157e292*(o<0?-1:1):o==o?o:0:o===0?o:0}},function(t,r,e){var n=e(854),o=e(88),i=e(856),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(d){if(typeof d=="number")return d;if(i(d))return NaN;if(o(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=o(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=n(d);var v=s.test(d);return v||u.test(d)?c(d.slice(2),v?2:8):a.test(d)?NaN:+d}},function(t,r,e){var n=e(855),o=/^\s+/;t.exports=function(i){return i&&i.slice(0,n(i)+1).replace(o,"")}},function(t,r){var e=/\s/;t.exports=function(n){for(var o=n.length;o--&&e.test(n.charAt(o)););return o}},function(t,r,e){var n=e(119),o=e(104);t.exports=function(i){return typeof i=="symbol"||o(i)&&n(i)=="[object Symbol]"}},function(t,r,e){var n=e(120),o=e(858),i=e(859),a=e(102),s=e(103),u=e(58),c=e(17),d=e(15),m=e(2),v=e(32),g=e(171),b=e(8),T=e(7),_=e(9),y=e(10),O=e(864),V=e(5),Ce=e(59),ae=e(60),Fe=e(61),_e=e(62),de=e(47),oe=["callback","done"];function he(Ne,nr){var sr=V(Ne);if(Ce){var $e=Ce(Ne);nr&&($e=c($e).call($e,function(er){return ae(Ne,er).enumerable})),sr.push.apply(sr,$e)}return sr}function Ve(Ne){for(var nr=1;nr<arguments.length;nr++){var sr,$e,er=arguments[nr]!=null?arguments[nr]:{};nr%2?m(sr=he(Object(er),!0)).call(sr,function(or){u(Ne,or,er[or])}):Fe?_e(Ne,Fe(er)):m($e=he(Object(er))).call($e,function(or){de(Ne,or,ae(er,or))})}return Ne}var le=e(39).fn,ie=e(0),Ie=ie.undef,pe=ie.notundef,kt=e(44),Ue=e(152),Dt=e(151),tr=e(40),dr=e(72),pr=e(24).reportAPI,ar=e(13);le.sendG2Msg=function(Ne){return(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"sendG2Msg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.G2Message(Ne),this.sendMsg(Ne)},le.beforeSendMsg=function(Ne){var nr,sr=this.protocol,$e=Ne.msg;switch($e.to===this.account&&($e.fromDeviceId=kt.deviceId),$e.userUpdateTime=sr.myInfo&&sr.myInfo.updateTime,$e.getScene()){case"p2p":nr="sendMsg";break;case"team":nr="sendTeamMsg";break;case"superTeam":nr="sendSuperTeamMsg"}c(Ne)&&(nr="sendFilterMsg",$e.filter=!0),Ne.cmd=nr},le.afterSendMsg=function(Ne){var nr=Ne.rtnMsg;if(!nr||!nr.ignore){var sr=this.protocol.getSessionInCache(nr.sessionId);Ne.isLocal&&sr&&sr.lastMsg&&nr.time<sr.lastMsg.time||this.protocol.onUpdateSession(Ue.genSessionByMsg(nr))}},le.beforeForwardMsg=function(Ne){ie.verifyOptions(Ne,"msg scene to","msg::beforeForwardMsg"),Ne.msg.scene=Ne.scene,Ne.msg.to=Ne.to},le.markMsgRead=function(Ne){var nr=this.protocol;!Ne||this.db.enable||nr.options.autoMarkRead?this.logger.warn("api::markMsgRead: 不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)"):nr.markMsgRead(Ne,!0)},le.sendMsgReceipt=function(Ne){if((Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"sendMsgReceipt",done:Ne.done}),ie.verifyOptions(Ne),this.processCallback(Ne),Ne.msg){ie.verifyOptions(Ne,"msg","msg::sendMsgReceipt");var nr=Ne.msg;ie.verifyOptions(nr,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(nr)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:nr.target,idClient:nr.idClient,time:nr.time}},Ne.callback):Ne.done()}else Ne.done()},le.isMsgRemoteRead=function(Ne){return pr({instance:this,className:"NIMFn",funcName:"isMsgRemoteRead",hasCallback:!1}),this.protocol.isMsgRemoteRead(Ne)},le.recallMsg=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"recallMsg",done:Ne.done}),this.deleteMsg(Ne,!0)},le.deleteMsg=function(Ne,nr){var sr;(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsg",done:Ne.done}),nr||this.logger.warn("this api will be abandon,please use “recallMsg”"),ie.verifyOptions(Ne,"msg","msg::deleteMsg");var $e=Ne.msg;if($e.scene!=="team"&&$e.from!==this.account||$e.status!=="success"||$e.isLocal)return Ne.done(tr.newParamError("只能删除自己发的, 并且发送成功的消息，且不能是本地消息",{callFunc:"msg::deleteMsg"}),Ne);ie.verifyOptions($e,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),ie.verifyParamValid("msg.scene",$e.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(Ne),this.processCallback(Ne);var er={deletedIdClient:$e.idClient,deletedIdServer:$e.idServer,time:$e.time,from:$e.from,to:$e.to,opeAccount:$e.from},or=$e.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";er.type="deleteMsg"+$e.scene[0].toUpperCase()+d(sr=$e.scene).call(sr,1);var ze=["ps","apnsText","pushPayload","env","opeAccount","attach"];m(ze).call(ze,function(rr){Ne[rr]&&(er[rr]=Ne[rr])}),er=new Dt(er),this.sendCmd(or,{sysMsg:er,msg:$e},Ne.callback)},le.deleteMsgSelf=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelf",done:Ne.done}),ie.verifyOptions(Ne,"msg","msg::deleteMsgSelf");var nr=Ne.msg;if(nr.scene==="superTeam")return Ne.done(tr.newParamError("单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelf"}),Ne);ie.verifyOptions(nr,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),ie.verifyParamValid("msg.scene",nr.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(Ne);var sr={scene:nr.scene==="p2p"?1:2,from:nr.from,to:nr.to,time:nr.time,idClient:nr.idClient,idServer:nr.idServer,custom:Ne.custom,type:nr.type};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:sr},Ne.callback)},le.deleteMsgSelfBatch=function(Ne){var nr,sr,$e,er=this;if((Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelfBatch",done:Ne.done}),ie.verifyOptions(Ne,"msgs","msg::deleteMsgSelfBatch"),(!v(Ne.msgs)||Ne.msgs.length===0||Ne.msgs.length>100)&&ie.onParamError("msgs应该是数组且数据长度应大于0小于等于100","msg::deleteMsgSelfBatch"),g(nr=Ne.msgs).call(nr,function(ze){return ze.scene==="superTeam"}))return Ne.done(tr.newParamError("消息列表中存在超大群消息，单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelfBatch"}),Ne);m(sr=Ne.msgs).call(sr,function(ze){ie.verifyOptions(ze,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),ie.verifyParamValid("msg.scene",ze.scene,er.message.validScenes,"msg::deleteMsgSelfBatch")}),this.processCallback(Ne);var or=b($e=Ne.msgs).call($e,function(ze){var rr;return{scene:ze.scene==="p2p"?1:2,from:ze.from,to:ze.to,time:ze.time,idClient:ze.idClient,idServer:ze.idServer,sessionId:ze.sessionId||T(rr="".concat(ze.scene,"-")).call(rr,ze.to),custom:Ne.custom,type:ze.type}});this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:or},Ne.callback)};var hr={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};le.getHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getHistoryMsgs",done:Ne.done}),this.protocol.syncing&&this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"),ie.verifyOptions(Ne,"scene to","msg::getHistoryMsgs"),ie.verifyParamValid("scene",Ne.scene,this.message.validScenes,"msg::getHistoryMsgs"),Ne.beginTime===void 0&&(Ne.beginTime=0);var nr,sr=this.protocol.getSessionInCache(Ne.scene+"-"+Ne.to),$e=sr&&sr.lastEmptyTime;if($e>Ne.beginTime&&(Ne.beginTime=$e),ie.verifyParamType("beginTime",Ne.beginTime,"number","msg::getHistoryMsgs"),Ne.endTime===void 0&&(Ne.endTime=0),ie.verifyParamType("endTime",Ne.endTime,"number","msg::getHistoryMsgs"),Ne.lastMsgId=Ne.lastMsgId&&+Ne.lastMsgId?Ne.lastMsgId:"0",Ne.limit===void 0&&(Ne.limit=100),ie.verifyParamType("limit",Ne.limit,"number","msg::getHistoryMsgs"),ie.verifyParamMax("limit",Ne.limit,100,"msg::getHistoryMsgs"),pe(_(Ne))?ie.verifyParamType("reverse",_(Ne),"boolean","msg::getHistoryMsgs"):Ne.reverse=!1,pe(Ne.asc)?ie.verifyParamType("asc",Ne.asc,"boolean","msg::getHistoryMsgs"):Ne.asc=!1,Ie(Ne.msgTypes))Ne.msgTypes=[];else if(v(Ne.msgTypes)){var er,or;Ne.msgTypes=b(er=Ne.msgTypes).call(er,function(rr){return hr[rr]}),Ne.msgTypes=c(or=Ne.msgTypes).call(or,function(rr){return typeof rr=="number"})}else typeof hr[Ne.msgTypes]=="number"?Ne.msgTypes=[hr[Ne.msgTypes]]:Ne.msgTypes=[];switch(this.processCallback(Ne),Ne.cbaop=function(rr,Et){if(!rr){var Lt;Ne.asc&&(Et.msgs=_(Lt=Et.msgs).call(Lt)),Et.msgs=dr.deduplication(Et.msgs)}},Ne.scene){case"p2p":nr="getHistoryMsgs";break;case"team":nr="getTeamHistoryMsgs";break;case"superTeam":nr="getSuperTeamHistoryMsgs"}var ze={scene:Ne.scene,to:Ne.to,beginTime:Ne.beginTime,endTime:Ne.endTime,lastMsgId:Ne.lastMsgId,limit:Ne.limit,reverse:_(Ne),msgTypes:Ne.msgTypes};this.sendCmd(nr,ze,Ne.callback)},le.searchHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"searchHistoryMsgs",done:Ne.done}),ie.verifyOptions(Ne,"scene to keyword","msg::searchHistoryMsgs"),ie.verifyParamValid("scene",Ne.scene,this.message.validScenes,"msg::searchHistoryMsgs"),Ne.beginTime===void 0&&(Ne.beginTime=0);var nr,sr=this.protocol.getSessionInCache(Ne.scene+"-"+Ne.to),$e=sr&&sr.lastEmptyTime;switch($e>Ne.beginTime&&(Ne.beginTime=$e),ie.verifyParamType("beginTime",Ne.beginTime,"number","msg::searchHistoryMsgs"),Ne.endTime===void 0&&(Ne.endTime=0),ie.verifyParamType("endTime",Ne.endTime,"number","msg::searchHistoryMsgs"),Ne.limit===void 0&&(Ne.limit=100),ie.verifyParamType("limit",Ne.limit,"number","msg::searchHistoryMsgs"),ie.verifyParamMax("limit",Ne.limit,100,"msg::searchHistoryMsgs"),pe(_(Ne))?ie.verifyParamType("reverse",_(Ne),"boolean","msg::searchHistoryMsgs"):Ne.reverse=!1,pe(Ne.asc)?ie.verifyParamType("asc",Ne.asc,"boolean","msg::searchHistoryMsgs"):Ne.asc=!1,this.processCallback(Ne),Ne.asc&&(Ne.cbaop=function(or,ze){var rr;or||(ze.msgs=_(rr=ze.msgs).call(rr))}),Ne.scene){case"p2p":nr="searchHistoryMsgs";break;case"team":nr="searchTeamHistoryMsgs"}var er=ie.filterObj(Ne,"scene to beginTime endTime keyword limit reverse");this.sendCmd(nr,er,Ne.callback)},le.getLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgs",done:Ne.done});var nr=this,sr=nr.db,$e=[];ie.verifyOptions(Ne);var er=!1;pe(Ne.start)&&(er=!0,ie.verifyParamType("start",Ne.start,"number","msg::getLocalMsgs"));var or=!1;if(pe(Ne.end)&&(or=!0,ie.verifyParamType("end",Ne.end,"number","msg::getLocalMsgs")),er&&or&&Ne.end<=Ne.start&&ie.onParamError("参数 end 必须晚于 start"),pe(Ne.subTypes)&&ie.verifyParamType("subTypes",Ne.subTypes,"array","msg::getLocalMsgs"),Ie(Ne.limit)&&(Ne.limit=100),ie.verifyParamType("limit",Ne.limit,"number","msg::getLocalMsgs"),ie.verifyParamMin("limit",Ne.limit,1,"msg::getLocalMsgs"),nr.processCallback(Ne),sr.enable){var ze=new Date().getTime();sr.getMsgs(Ne).then(function(Et){var Lt;$e=Et,nr.logger.info(T(Lt="api::getLocalMsgs: query db cost ".concat(new Date().getTime()-ze," ms and the conditions is ")).call(Lt,y(Ne))),rr()},function(Et){(Et=Et||{}).message=Et.message||"msg::getLocalMsgs:db error",rr()})}else rr();function rr(){var Et=ie.simpleClone(Ne);Et.msgs=$e,delete Et.callback,delete Et.done,Ne.done(null,Et)}},le.getLocalMsgsInUnread=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsInUnread",done:Ne.done});var nr=this;ie.validate({sessionId:{type:"string",allowEmpty:!1}},Ne),this.getLocalSession({sessionId:Ne.sessionId,done:function(sr,$e){sr?Ne.done&&Ne.done(sr):$e?($e.ack=$e.ack||0,nr.getLocalMsgs(Ve({sessionId:Ne.sessionId,start:$e.ack,limit:O,filterFunc:function(er){return er.flow==="in"&&er.isUnreadable===!0},done:function(){}},Ne))):Ne.done&&Ne.done(new Error("session ".concat(Ne.sessionId," not exist")))}})},le.getLocalMsgByIdClient=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgByIdClient",done:Ne.done});var nr=this.db,sr=null,$e=null;function er(){Ne.msg=$e,Ne.done(sr,Ne)}ie.verifyOptions(Ne,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(Ne),nr.enable?nr.getMsgByIdClient(Ne.idClient).then(function(or){or&&($e=or),er()},function(or){sr=or,er()}):(this.logger.warn("because db is false,error is null"),er())},le.getLocalMsgsByIdClients=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsByIdClients",done:Ne.done});var nr,sr=this.db,$e=[];function er(){Ne.msgs=$e,Ne.done(nr,Ne)}ie.verifyOptions(Ne,"idClients","msg::getLocalMsgByIdClients"),ie.verifyParamType("idClients",Ne.idClients,"array","msg::getLocalMsgByIdClients"),this.processCallback(Ne),sr.enable?sr.getMsgsByIdClients(Ne.idClients).then(function(or){$e=c(or).call(or,function(ze){return!!ze}),er()},function(or){nr=or,er()}):er()},le.updateLocalMsg=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"updateLocalMsg",done:Ne.done});var nr,sr=this.db,$e=null;if(ie.verifyOptions(Ne,"idClient","msg::updateLocalMsg"),this.processCallback(Ne),sr.enable){var er=ie.filterObj(Ne,"idClient localCustom");sr.updateMsg(er).then(function(ze){$e=ze,or()},function(ze){nr=ze,or()})}else or();function or(){Ne.msg=$e,Ne.done(nr,Ne)}},le.deleteLocalMsg=function(){var Ne=s(a.mark(function nr(sr){var $e,er,or,ze;return a.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return ze=function(){sr.done(er,sr)},(sr=sr||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsg",done:sr.done}),$e=this,ie.verifyOptions(sr,"msg","msg::deleteLocalMsg"),or=sr.msg,ie.verifyOptions(or,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),$e.processCallback(sr),rr.prev=8,rr.next=11,$e.protocol.deleteLocalMsg(or);case 11:ze(),rr.next=18;break;case 14:rr.prev=14,rr.t0=rr.catch(8),er=rr.t0,ze();case 18:case"end":return rr.stop()}},nr,this,[[8,14]])}));return function(nr){return Ne.apply(this,arguments)}}(),le.deleteLocalMsgsBySession=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgsBySession",done:Ne.done});var nr,sr=this,$e=sr.db;ie.verifyOptions(Ne,"scene to","msg::deleteLocalMsgsBySession"),ie.verifyParamValid("scene",Ne.scene,sr.message.validScenes,"msg::deleteLocalMsgsBySession"),Ne.sessionId=Ne.scene+"-"+Ne.to,Ne.delLastMsg=Ne.delLastMsg===!0,Ne.isTag=Ne.isTag===!0;var er=new Date().getTime();function or(){Ne.done(nr,Ne)}sr.processCallback(Ne);var ze={id:Ne.sessionId};Ne.delLastMsg&&(ze.lastMsg=null),Ne.isTag&&(ze.lastEmptyTime=er),$e.enable?$e.deleteMsgsBySessionId(Ne).then(function(){Ne.delLastMsg||Ne.isTag?$e.updateSession(ze).then(function(rr){sr.protocol.onUpdateSession(rr),Ne.session=rr,or()}):or()}).catch(function(rr){nr=rr,or()}):(this.logger.warn("because db is false,error is null"),or(),(Ne.delLastMsg||Ne.isTag)&&sr.protocol.onUpdateSession(ze))},le.deleteLocalMsgsByTime=function(Ne){var nr=this.db;ar.isBrowser&&nr.enable&&(pe((Ne=Ne||{}).start)?ie.verifyParamType("start",Ne.start,"number","msg::deleteLocalMsgsByTime"):Ne.start=0,pe(Ne.end)?ie.verifyParamType("end",Ne.end,"number","msg::deleteLocalMsgsByTime"):Ne.end=1/0,pe(Ne.end)&&pe(Ne.start)&&Ne.end<=Ne.start&&ie.onParamError("参数 end 必须大于 start"),this.processCallback(Ne),this.protocol.deleteLocalMsgsByTime(Ne).then(function(sr){Ne.done(null,sr)},function(sr){Ne.done(sr,null)}))},le.deleteLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgs",done:Ne.done});var nr;function sr(){Ne.done(nr,Ne)}Ne.updateSession=Ne.updateSession!==!1,ie.verifyOptions(Ne,"sessionId","msg::deleteLocalMsgsBySession"),pe(Ne.start)&&ie.verifyParamType("start",Ne.start,"number","msg::deleteLocalMsgs"),pe(Ne.end)&&ie.verifyParamType("end",Ne.end,"number","msg::deleteLocalMsgs"),pe(Ne.end)&&pe(Ne.start)&&Ne.end<=Ne.start&&ie.onParamError("参数 end 必须大于 start"),this.processCallback(Ne),this.protocol.deleteLocalMsgs(Ne).then(function(){sr()},function($e){nr=$e,sr()})},le.deleteAllLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteAllLocalMsgs",done:Ne.done});var nr,sr=this.db;function $e(){Ne.done(nr,Ne)}this.processCallback(Ne),this.protocol.sessionSet={},sr.enable?sr.deleteAllMsgs().then(function(){$e()},function(er){nr=er,$e()}):(this.logger.warn("because db is false,error is null"),$e())},le.saveMsgsToLocal=function(Ne){var nr;(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"saveMsgsToLocal",done:Ne.done}),this.db.enable||(this.logger.warn("because db is false,error is null"),Ne.done(null,[])),ie.verifyOptions(Ne,"msgs done","msg::saveMsgsToLocal"),ie.verifyParamType("msgs",Ne.msgs,"Array","msg::saveMsgsToLocal");var sr=b(nr=Ne.msgs).call(nr,function($e){var er=Ve({},$e);return er.hasOwnProperty("needUpdateSession")||(er.needUpdateSession=!0),er});this.db.putMsg(sr).then(function($e,er){er?Ne.done(er):Ne.done(null,$e)})},le.clearServerHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgs",done:Ne.done}),ie.verifyOptions(Ne,"account","msg::clearServerHistoryMsgs");var nr=Ne.delRoam!==!1;this.processCallback(Ne),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:Ne.account,delRoam:nr?1:0}},Ne.callback)},le.clearServerHistoryMsgsWithSync=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgsWithSync",done:Ne.done}),ie.verifyOptions(Ne,"scene to","msg::clearServerHistoryMsgsWithSync");var nr=Ne.isDeleteRoam===void 0||Ne.isDeleteRoam===!0,sr={type:Ne.scene==="team"?2:1,isDeleteRoam:nr?1:0,isSyncSelf:Ne.isSyncSelf===!0?1:0};sr[sr.type===2?"toTid":"otherAccid"]=Ne.to,Ne.ext!==void 0&&(sr.ext=Ne.ext),this.processCallback(Ne),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:sr},Ne.callback)},le.msgFtsInServer=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"msgFtsInServer",done:Ne.done}),this.processCallback(Ne);var nr=Ne,sr=i({},(o(nr),nr));ie.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},sr,"msg::msgFtsInServer"),pe(sr.toTime)&&pe(sr.fromTime)&&sr.toTime<sr.fromTime&&ie.onParamError("Options error: toTime should be greater than fromTime");var $e,er={ASC:1,DESC:2};sr.order&&er[sr.order]&&(sr.order=er[sr.order]),sr.msgTypeList&&(sr.msgTypeList=b($e=sr.msgTypeList).call($e,function(ze){return hr[ze]}));var or=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];m(or).call(or,function(ze){v(sr[ze])&&(sr[ze]=sr[ze].join(","))}),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:sr},Ne.callback)},le.msgFtsInServerByTiming=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"msgFtsInServerByTiming",done:Ne.done}),this.processCallback(Ne);var nr=Ne,sr=(nr.callback,nr.done,n(nr,oe));ie.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},sr,"msg::msgFtsInServerByTimeSort"),pe(sr.toTime)&&pe(sr.fromTime)&&sr.toTime<sr.fromTime&&ie.onParamError("Options error: toTime should be greater than fromTime");var $e,er={ASC:1,DESC:2};sr.msgLimit===void 0&&(sr.msgLimit=20),sr.order&&er[sr.order]&&(sr.order=er[sr.order]),sr.msgTypeList&&(sr.msgTypeList=b($e=sr.msgTypeList).call($e,function(ze){return hr[ze]}));var or=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];m(or).call(or,function(ze){v(sr[ze])&&(sr[ze]=sr[ze].join(","))}),this.sendCmd("msgFtsInServerByTiming",{msgTimingFullSearchRequestTag:sr},Ne.callback)}},function(t,r){t.exports=function(e){if(e==null)throw new TypeError("Cannot destructure "+e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(860),o=e(149);function i(){var a;return t.exports=i=n?o(a=n).call(a):function(s){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s},t.exports.__esModule=!0,t.exports.default=t.exports,i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(861)},function(t,r,e){t.exports=e(862)},function(t,r,e){var n=e(863);t.exports=n},function(t,r,e){var n=e(304);t.exports=n},function(t,r,e){t.exports=e(865)},function(t,r,e){var n=e(866);t.exports=n},function(t,r,e){e(867),t.exports=9007199254740991},function(t,r,e){e(1)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,r,e){var n=e(9),o=e(32),i=e(15),a=e(2),s=e(10),u=e(5),c=e(17),d=e(39).fn,m=e(0),v=e(751),g=e(753),b=(e(72),m.notundef),T=e(24).reportAPI;function _(y,O,V,Ce){V=V||"",m.verifyParamType(V+"from",y.from,"string",O),m.verifyParamType(V+"to",y.to,"string",O),m.verifyParamType(V+"idServer",y.idServer,"string",O),m.verifyParamType(V+"time",y.time,"number",O),m.verifyParamValid(V+"scene",y.scene,this.message.validScenes,O),Ce||m.verifyParamType(V+"idClient",y.idClient,"string",O)}d.getThreadMsgs=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getThreadMsgs",done:y.done}),m.verifyCallback(y,"done","msg::getThreadMsgs"),m.verifyOptions(y,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),m.verifyParamType("threadMsgFromAccount",y.threadMsgFromAccount,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgToAccount",y.threadMsgToAccount,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgIdServer",y.threadMsgIdServer,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgTime",y.threadMsgTime,"number","msg::getThreadMsgs"),m.verifyParamValid("scene",y.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(y);var O={scene:this.message.sceneMap[y.scene],from:y.threadMsgFromAccount,to:y.threadMsgToAccount,time:y.threadMsgTime,idServer:y.threadMsgIdServer},V={limit:y.limit<100?y.limit:100,beginTime:typeof y.beginTime=="number"?y.beginTime:0,reverse:n(y)===!0?1:0};typeof y.endTime=="number"&&(V.endTime=y.endTime,V.endTime<=V.beginTime&&m.onParamError("endTime应该大于beginTime","msg::getThreadMsgs")),y.lastMsgId&&(V.lastMsgId=y.lastMsgId),this.sendCmd("getThreadMsgs",{msg:O,threadMsgReq:V,NOTSTORE:"msg threadMsgReq"},y.callback)},d.getMsgsByIdServer=function(y){var O,V,Ce=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getMsgsByIdServer",done:y.done});var ae=this,Fe="msg::getMsgsByIdServer";m.verifyCallback(y,"done",Fe),(!o(y.reqMsgs)||y.reqMsgs.length===0||y.reqMsgs.length>100)&&m.onParamError("reqMsgs应该是数组且数据长度应大于0小于等于100",Fe),y.reqMsgs=i(O=y.reqMsgs).call(O,0),a(V=y.reqMsgs).call(V,function(_e,de){_.call(ae,_e,Fe,"reqMsgs[".concat(de,"]."),!0),_e.scene=Ce.message.sceneMap[_e.scene]}),this.processCallback(y),this.sendCmd("getMsgsByIdServer",{reqMsgs:y.reqMsgs},y.callback)},d.addQuickComment=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addQuickComment",done:y.done}),m.verifyOptions(y,"msg body","msg::addQuickComment"),_.call(this,y.msg,"msg::addQuickComment");var O=new v(y,"msg::addQuickComment");O.from=this.account;var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("addQuickComment",{msg:V,comment:O},y.callback)},d.deleteQuickComment=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteQuickComment",done:y.done}),m.verifyOptions(y,"msg body","msg::deleteQuickComment"),_.call(this,y.msg,"msg::deleteQuickComment");var O=new v(y,"msg::addQuickComment");O.from=this.account;var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("deleteQuickComment",{msg:V,comment:O},y.callback)},d.getQuickComments=function(y){var O=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getQuickComments",done:y.done});var V="msg::getQuickComments",Ce=this,ae={},Fe={};m.verifyOptions(y,"msgs","msg::getQuickComments"),(!o(y.msgs)||y.msgs.length===0||y.msgs.length>20)&&m.onParamError("msgs应该是数组且数据长度应大于0小于等于20",V);var _e=[];try{_e=JSON.parse(s(y.msgs))}catch{m.onParamError("msgs 不是合法的对象",V)}a(_e).call(_e,function(de,oe){_.call(Ce,de,V,"msgs[".concat(oe,"]."),!0),de.scene=O.message.sceneMap[de.scene],ae[de.idClient]=null,Fe[de.idClient]=oe}),this.processCallback(y),this.getLocalMsgsByIdClients({idClients:u(ae),done:function(de,oe){var he,Ve=Ce.protocol.timetags.sync;!de&&oe.msgs&&oe.msgs.length&&Ve&&(a(he=oe.msgs).call(he,function(le){ae[le.idClient]=le}),_e=c(_e).call(_e,function(le){var ie=ae[le.idClient];return!ie||(ie.commentTimetag&&(le.timestamp=ie.commentTimetag),!(ie.commentTimetag>Ve))})),Ce.sendCmd("getQuickComments",{commentReq:_e,idMap:ae,indexMap:Fe},y.callback)}})},d.addCollect=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addCollect",done:y.done}),m.verifyOptions(y,"type data","msg::addCollect");var O=new g(y,"msg::addCollect");this.processCallback(y),this.sendCmd("addCollect",{collect:O},y.callback)},d.deleteCollects=function(y){var O;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteCollects",done:y.done}),m.verifyOptions(y,"collectList","msg::deleteCollects"),(!o(y.collectList)||y.collectList.length===0||y.collectList.length>100)&&m.onParamError("collectList应该是数组且数据长度应大于0小于等于100","msg::deleteCollects"),a(O=y.collectList).call(O,function(V,Ce){m.verifyParamType("collectList[".concat(Ce,"].id"),V.id,"string","msg::deleteCollects"),m.verifyParamType("collectList[".concat(Ce,"].createTime"),V.createTime,"number","msg::deleteCollects")}),this.processCallback(y),this.sendCmd("deleteCollects",{collectList:y.collectList},y.callback)},d.updateCollect=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateCollect",done:y.done}),m.verifyOptions(y,"collect","msg::updateCollect"),m.verifyParamType("collect.id",y.collect.id,"string","msg::updateCollect"),m.verifyParamType("collect.createTime",y.collect.createTime,"number","msg::updateCollect"),this.processCallback(y),this.sendCmd("updateCollect",{collect:y.collect},y.callback)},d.getCollects=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getCollects",done:y.done}),m.verifyCallback(y,"done","msg::getCollects");var O={},V=["type","beginTime","endTime","limit"];a(V).call(V,function(Ce){b(y[Ce])&&(m.verifyParamType(Ce,y[Ce],"number","msg::getCollects"),O[Ce]=y[Ce])}),y.limit>100&&m.onParamError("limit不能大于100","msg::getCollects"),y.beginTime>y.endTime&&m.onParamError("beginTime不能大于endTime","msg::getCollects"),b(y.lastId)&&(m.verifyParamType("lastId",y.lastId,"string","msg::getCollects"),O.lastMsgId=y.lastId),b(n(y))&&(O.reverse=n(y)===!0?1:0),this.processCallback(y),this.sendCmd("getCollects",{collectQuery:O,NOTSTORE:"collectQuery"},y.callback)},d.addStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::addStickTopSession");var O=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",O[0],this.message.validScenes,"msg::addStickTopSession"),m.verifyParamType("id的后半部分",O[1],"string","msg::addStickTopSession"),O[0]==="superTeam"&&(O[0]="super_team");var V={id:O=O.join("|")};y.topCustom&&(m.verifyParamType("topCustom",y.topCustom,"string","msg::addStickTopSession"),V.topCustom=y.topCustom),this.processCallback(y),this.sendCmd("addStickTopSession",{stickTopSession:V},y.callback)},d.deleteStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::deleteStickTopSession");var O=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",O[0],this.message.validScenes,"msg::deleteStickTopSession"),m.verifyParamType("id的后半部分",O[1],"string","msg::deleteStickTopSession"),O[0]==="superTeam"&&(O[0]="super_team"),O=O.join("|"),this.processCallback(y),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:O}},y.callback)},d.updateStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::updateStickTopSession");var O=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",O[0],this.message.validScenes,"msg::updateStickTopSession"),m.verifyParamType("id的后半部分",O[1],"string","msg::updateStickTopSession"),O[0]==="superTeam"&&(O[0]="super_team");var V={id:O=O.join("|")};y.topCustom&&(m.verifyParamType("topCustom",y.topCustom,"string","msg::updateStickTopSession"),V.topCustom=y.topCustom),this.processCallback(y),this.sendCmd("updateStickTopSession",{stickTopSession:V},y.callback)},d.getStickTopSessions=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getStickTopSessions",done:y.done}),m.verifyOptions(y,"done","msg::getStickTopSessions"),this.processCallback(y);var O,V=this.protocol.sessionSet,Ce=[];for(var ae in V)(O=this.protocol.getSessionInCache(ae,y.findDelete))&&O.isTop&&Ce.push(V[ae]);y.callback(null,Ce)},d.addMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::addMsgPin"),_.call(this,y.msg,"msg::addMsgPin");var O={pinFrom:this.account};b(y.pinCustom)&&(m.verifyParamType("pinCustom",y.pinCustom,"string","msg::addMsgPin"),O.pinCustom=y.pinCustom);var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("addMsgPin",{msg:V,pinTag:O},y.callback)},d.updateMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::updateMsgPin"),_.call(this,y.msg,"msg::updateMsgPin");var O={pinFrom:this.account};b(y.pinCustom)&&(m.verifyParamType("pinCustom",y.pinCustom,"string","msg::updateMsgPin"),O.pinCustom=y.pinCustom);var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("updateMsgPin",{msg:V,pinTag:O},y.callback)},d.deleteMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::deleteMsgPin"),_.call(this,y.msg,"msg::deleteMsgPin");var O={pinFrom:this.account},V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("deleteMsgPin",{msg:V,pinTag:O},y.callback)},d.getMsgPins=function(y){var O=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getMsgPins",done:y.done}),m.verifyOptions(y,"id","msg::getMsgPins");var V=this.db,Ce=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",Ce[0],this.message.validScenes,"msg::getMsgPins"),m.verifyParamType("id的后半部分",Ce[1],"string","msg::getMsgPins"),Ce[0]==="superTeam"&&(Ce[0]="super_team");var ae={sessionId:Ce=Ce.join("|"),timetag:0};if(this.processCallback(y),V.enable){var Fe=this.protocol.timetags.sync;V.getTimetag("pin-"+y.id).then(function(de){de>Fe?V.getMsgPins(y.id).then(function(oe){return y.callback(null,{pins:oe||[]})}).catch(function(oe){return y.callback(oe)}):(ae.timetag=de,_e.call(O))})}else _e.call(this);function _e(){this.sendCmd("getMsgPins",{msgPinReq:ae,id:y.id,NOTSTORE:"msgPinReq"},y.callback)}}},function(t,r,e){var n=e(3),o=e(17),i=e(2),a=e(9),s=e(39).fn,u=e(0),c=u.undef,d=u.notundef,m=e(151),v=e(24).reportAPI;s.markSysMsgRead=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"markSysMsgRead",done:g.done});var b,T=this.db,_=n.resolve(),y=this.protocol;u.verifyOptions(g,"sysMsgs","sysmsg::markSysMsgRead");var O=g.sysMsgs;function V(){g.done(b,g)}u.isArray(O)||(O=[O]),T.enable?_=T.markSysMsgRead(O).then(function(Ce){O=Ce,y.onUpdateSysMsg(Ce)}):(O=o(O).call(O,function(Ce){return!Ce.read})).length&&(y.options.autoMarkRead||y.markSysMsgRead(O,!0),i(O).call(O,function(Ce){Ce.read=!0}),y.onUpdateSysMsg(O)),_.then(function(){return y.reduceSysMsgUnread(O)}).then(V,function(Ce){b=Ce,V()})},s.sendCustomSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"sendCustomSysMsg",done:g.done}),u.verifyOptions(g,"scene to content","sysmsg::sendCustomSysMsg"),u.verifyParamValid("scene",g.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(g);var b="sendCustomSysMsg";return g.scene==="p2p"?g.type="customP2p":g.scene==="superTeam"?(g.type="customSuperTeam",b="sendSuperTeamCustomSysMsg"):g.type="customTeam",g.sysMsg=new m(g),o(g)&&(b="sendFilterCustomSysMsg"),this.sendCmd(b,{sysMsg:g.sysMsg,single:!0},g.callback),this.formatReturnSysMsg(g.sysMsg)},s.formatReturnSysMsg=function(g){return g=u.copy(g),this.protocol.completeSysMsg(g),g.status="sending",g=a(m).call(m,g)},s.getLocalSysMsgs=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalSysMsgs",done:g.done});var b,T=this.db,_=[];function y(){g.sysMsgs=_,g.done(b,g)}u.verifyOptions(g),g.category&&u.verifyParamValid("category",g.category,m.validCategories,"sysmsg::getLocalSysMsgs"),g.type&&u.verifyParamValid("type",g.type,m.validTypes,"sysmsg::getLocalSysMsgs"),c(g.limit)&&(g.limit=100),u.verifyParamType("limit",g.limit,"number","sysmsg::getLocalSysMsgs"),u.verifyParamMax("limit",g.limit,100,"sysmsg::getLocalSysMsgs"),d(a(g))?u.verifyParamType("reverse",a(g),"boolean","sysmsg::getLocalSysMsgs"):g.reverse=!1,this.processCallback(g),T.enable?T.getSysMsgs(g).then(function(O){_=O,y()},function(O){b=O,y()}):y()},s.updateLocalSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateLocalSysMsg",done:g.done});var b,T=this.db,_=null;if(u.verifyOptions(g,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(g),T.enable){var y=u.filterObj(g,"idServer state localCustom");T.updateSysMsg(y).then(function(V){_=V,O()},function(V){b=V,O()})}else O();function O(){g.sysMsg=_,g.done(b,g)}},s.deleteLocalSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteLocalSysMsg",done:g.done});var b,T=this.db;function _(){g.done(b,g)}u.verifyOptions(g,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(g),T.enable?T.deleteSysMsg(g.idServer).then(function(){_()},function(y){b=y,_()}):_()},s.deleteAllLocalSysMsgs=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteAllLocalSysMsgs",done:g.done});var T=this,_=T.db;function y(){T.protocol.onUpdateSysMsgUnread({}),g.done(b,g)}T.processCallback(g),_.enable?_.deleteAllSysMsgs().then(function(){y()},function(O){b=O,y()}):y()}},function(t,r,e){var n=e(39).fn,o=e(0),i=e(13),a=e(24).reportAPI;n.getChatroomAddress=function(s){(s=s||{}).done=a({instance:this,className:"NIMFn",funcName:"getChatroomAddress",done:s.done}),o.verifyOptions(s,"chatroomId","chatroom::getChatroomAddress"),s.isWeixinApp=i.isWeixinApp,s.type=i.ipVersion,this.processCallback(s),this.sendCmd("getChatroomAddress",s)}},function(t,r){},function(t,r){},function(t,r,e){var n=e(39).fn,o=e(0),i=e(24).reportAPI;n.audioToText=function(a){(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"audioToText",done:a.done}),o.verifyOptions(a,"url","audio::audioToText"),a.audioToText=o.filterObj(a,"url"),this.processCallback(a),this.sendCmd("audioToText",a)}},function(t,r,e){var n=e(39).fn;n.clearDB=function(o){var i=this.db;this.processCallback(o);var a=o.done;i.enable?i.clear().then(a,a):a()},n.removeDB=function(o){var i=this.db;this.processCallback(o);var a=o.done;i.enable?i.destroy().then(a,a):a()},n.closeDB=function(o){var i=this.db;this.processCallback(o);var a=o.done;i.enable?i.close().then(a,a):a()}},function(t,r,e){var n=e(39).fn,o=e(309),i=e(0),a=i.undef,s=e(24).reportAPI;n.getPushNotificationMultiportConfig=function(){return s({instance:this,className:"NIMFn",funcName:"getPushNotificationMultiportConfig",hasCallback:!1}),this.protocol.getPushNotificationMultiportConfig()},n.updatePushNotificationMultiportConfig=function(u){(u=u||{}).done=s({instance:this,className:"NIMFn",funcName:"updatePushNotificationMultiportConfig",done:u.done}),i.verifyOptions(u),a(u.shouldPushNotificationWhenPCOnline)&&(u.shouldPushNotificationWhenPCOnline=!0),u.donnop=new o(u),this.processCallback(u),this.sendCmd("updateDonnop",u)}},function(t,r,e){var n=e(2),o=e(3),i=e(7),a=e(26),s=e(39).fn,u=e(0),c=e(877),d=e(878),m=e(24).reportAPI;function v(g){return a(g)==="object"&&(g.msgEventSubscribes?g=g.msgEventSubscribes:g.msgEventSubscribe?g=g.msgEventSubscribe:g.accounts?g=g.accounts:g.msgEvent&&(g=g.msgEvent).time&&(g.time=+g.time),g.sync===1?g.sync=!0:g.sync===0&&(g.sync=!1)),g}s.batchSendEventsCmds=function(g,b,T){var _=this,y=u.dropArrayDuplicates(b.accounts);y=u.reshape2d(y,100);var O=[];n(y).call(y,function(V){O.push(new o(function(Ce,ae){var Fe=u.simpleClone(b);Fe.accounts=V,_.sendCmdWithResp(g,Fe,function(_e,de){_e?ae(_e):Ce(v(de))})}))}),o.all(O).then(function(V){var Ce=null;if(V.length>0)if(V[0].msgEventSubscribe){var ae=V[0].msgEventSubscribe;ae=v(ae);var Fe=[];n(V).call(V,function(_e){Fe=i(Fe).call(Fe,_e.accounts)}),Ce={accounts:Fe,msgEventSubscribe:ae}}else Ce=[],n(V).call(V,function(_e){Ce=i(Ce).call(Ce,_e)});T(null,Ce)},function(V){T(V,null)})},s.publishEvent=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"publishEvent",done:g.done});var b=new c(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("publishEvent",{msgEvent:b},function(T,_){T||(_=v(_)),g.callback(T,_)})},s.subscribeEvent=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"subscribeEvent",done:g.done}),u.verifyOptions(g,"accounts","event::subscribeEvent");var b=new d(g);u.verifyParamType("accounts",g.accounts,"array","event::subscribeEvent"),this.processCallback(g),b=b.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:b,accounts:g.accounts},function(T,_){!T&&_&&(_={failedAccounts:_}),g.callback(T,_)})},s.unSubscribeEventsByAccounts=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByAccounts",done:g.done}),u.verifyOptions(g,"accounts","event::unSubscribeEventsByAccounts"),u.verifyParamType("accounts",g.accounts,"array","event::unSubscribeEventsByAccounts");var b=new d(g);b=b.assembleEvent(),this.processCallback(g),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:b,accounts:g.accounts},function(T,_){!T&&_&&(_={failedAccounts:_}),g.callback(T,_)})},s.unSubscribeEventsByType=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByType",done:g.done});var b=new d(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:b},function(T,_){g.callback(T,_)})},s.querySubscribeEventsByAccounts=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByAccounts",done:g.done}),u.verifyOptions(g,"accounts","event::querySubscribeEventsByAccounts"),u.verifyParamType("accounts",g.accounts,"array","event::querySubscribeEventsByAccounts");var b=new d(g);b=b.assembleEvent(),this.processCallback(g),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:b,accounts:g.accounts},function(T,_){!T&&_&&(_={msgEventSubscribes:_}),g.callback(T,_)})},s.querySubscribeEventsByType=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByType",done:g.done});var b=new d(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:b},function(T,_){T||(_={msgEventSubscribes:v(_)}),g.callback(T,_)})}},function(t,r,e){var n=e(6),o=e(0),i=o.notundef,a=e(40);function s(u){if(o.verifyOptions(u,"type value","event::MsgEvent"),o.verifyParamType("type",u.type,"number","event::MsgEvent"),o.verifyParamType("value",u.value,"number","event::MsgEvent"),this.type=u.type,this.value=u.value,this.idClient=o.guid(),i(u.custom)&&(this.custom=""+u.custom),this.validTime=u.validTime||604800,o.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),o.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),o.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),i(u.broadcastType)){var c;if(o.verifyParamType("broadcastType",u.broadcastType,"number","event::MsgEvent"),n(c=[1,2]).call(c,u.broadcastType)<0)throw new a('参数错误"broadcastType":只能为1或2');this.broadcastType=u.broadcastType}else this.broadcastType=2;i(u.sync)?(o.verifyParamType("sync",u.sync,"boolean","event::MsgEvent"),this.sync=u.sync):this.sync=!1}s.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:this.sync===!0?1:0}},t.exports=s},function(t,r,e){var n=e(0),o=n.notundef;function i(a){n.verifyOptions(a,"type","event::MsgEventSubscribe"),n.verifyParamType("type",a.type,"number","event::MsgEventSubscribe"),n.findObjIndexInArray([1,2,3],a.type)<0&&n.verifyParamMin("type",a.type,1e5,"event::MsgEventSubscribe"),this.type=a.type,o(a.subscribeTime)?(n.verifyParamType("subscribeTime",a.subscribeTime,"number","event::MsgEventSubscribe"),n.verifyParamMin("subscribeTime",a.subscribeTime,60,"event::MsgEventSubscribe"),n.verifyParamMax("subscribeTime",a.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=a.subscribeTime):this.subscribeTime=2592e3,o(a.sync)?(n.verifyParamType("sync",a.sync,"boolean","event::MsgEventSubscribe"),this.sync=a.sync):this.sync=!0}i.prototype.assembleEvent=function(){return{type:this.type,subscribeTime:this.subscribeTime,sync:this.sync===!0?1:0}},t.exports=i},function(t,r,e){var n=e(41),o=e(39).fn,i=e(0),a=e(24).reportAPI;o.httpRequestProxy=function(s){(s=s||{}).done=a({instance:this,className:"NIMFn",funcName:"httpRequestProxy",done:s.done}),i.verifyOptions(s,"path","misc::httpRequestProxy");var u=n({},s);delete u.done,this.processCallback(s),this.sendCmd("httpProxy",{proxyTag:u},s.callback)}},function(t,r,e){var n=e(39).fn,o=e(13),i=e(24).reportAPI;n.getQChatAddress=function(a){(a=a||{}).done=i({instance:this,className:"NIMFn",funcName:"getQChatAddress",done:a.done}),this.processCallback(a),this.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:o.ipVersion}},a.done)}},function(t,r,e){e(298);var n=e(194);e(310)(n),t.exports=n},function(t,r,e){var n=e(313),o=e(15),i=e(3),a=e(57),s=e(7),u=e(23),c=e(195).fn,d=e(13),m=e(155).V2NIMConnectStatus;c.connect=function(){if(this.checkNetworkAvailable()===!1&&this.autoconnect)return this.logger.info("connect::skip this reconnection attempt because network is offline"),void this.reconnect();d.isBrowser&&this.reporter.restore(),n(c).connect.call(this)},c.refreshSocketUrl=function(){var v;return this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=o(v=this.socketUrlsBackup).call(v,0),this.logger.info("link::refreshSocketUrl"),this.statusProtector.emit("auth/loginLifeCycleAddressing"),i.resolve(this.socketUrls)},c.onHandshakeFailed=function(v,g){var b;this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:g,rt:a()-v,result:408,failReason:"ws_handshake_failed",time:a()}),this.logger.warn(s(b="link::onHandshakeFailed: shandshake failed, startTime: ".concat(v,", targetUrl: ")).call(b,g))},c.onConnectFailed=function(v,g,b){var T,_,y=typeof v=="string"?"connect_failed:".concat(v):"connect_failed";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:b,rt:a()-g,result:408,failReason:"ws_".concat(y),time:a()}),this.logger.warn(s(T=s(_="link::onConnectFailed: connect failed due to ".concat(v,", startTime: ")).call(_,g,", targetUrl: ")).call(T,b))},c.onSocketError=function(v,g,b){var T,_,y=typeof v=="string"?"socket.io error:".concat(v):"socket.io error";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:b,rt:a()-g,result:408,failReason:"ws_".concat(y),time:a()}),this.logger.warn(s(T=s(_="link::onSocketError: due to ".concat(v,", startTime: ")).call(_,g,", targetUrl: ")).call(T,b))},c.notifyDisconnect=function(v){n(c).notifyDisconnect.call(this,v)},c.disconnect=function(){var v=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void u(function(){n(c).disconnect.call(v,g)},0);this.connecting?this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==m.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively"):this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");var b=n(c);b.disconnect.call(this,g)}},function(t,r,e){var n=e(102),o=e(58),i=e(103),a=e(10),s=e(57),u=e(3),c=e(25),d=e(5),m=e(59),v=e(17),g=e(60),b=e(2),T=e(61),_=e(62),y=e(47);function O(de,oe){var he=d(de);if(m){var Ve=m(de);oe&&(Ve=v(Ve).call(Ve,function(le){return g(de,le).enumerable})),he.push.apply(he,Ve)}return he}function V(de){for(var oe=1;oe<arguments.length;oe++){var he,Ve,le=arguments[oe]!=null?arguments[oe]:{};oe%2?b(he=O(Object(le),!0)).call(he,function(ie){o(de,ie,le[ie])}):T?_(de,T(le)):b(Ve=O(Object(le))).call(Ve,function(ie){y(de,ie,g(le,ie))})}return de}var Ce=e(195).fn,ae=e(44),Fe=e(0);function _e(de){var oe=this;if(de.code===398)return this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),oe.forceDisconnect(),oe.backoff.setMin(5e3),void(oe.retryCount===0?oe.refreshSocketUrl():u.resolve()).then(function(){var he;oe.reconnect({allFailedCB:c(he=function(Ve){this.logger.error("pendingLoginFailed: ",Ve.code,Ve),this.onAuthError(Ve,"link::onLoginReconnectFailed")}).call(he,oe,de)})});this.logger.error("pendingLoginFailed: ",de.code,de),oe.onAuthError(de,"link::onLogin")}Ce.assembleLogin=function(){var de=this.options;this.sdkSession=this.genSessionKey();var oe={appKey:de.appKey,account:de.account,deviceId:ae.deviceId,chatroomId:de.chatroomId,session:this.sdkSession,appLogin:this.autoconnect?1:0},he=!0;if(de.loc_x===void 0||de.loc_y===void 0||de.loc_z===void 0?he=!1:(typeof de.loc_x!="number"&&(de.loc_x=0),typeof de.loc_y!="number"&&(de.loc_y=0),typeof de.loc_z!="number"&&(de.loc_z=0)),de.authType=de.loginAuthType,oe=Fe.merge(oe,Fe.filterObj(de,he?"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId":"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")),de.tags&&de.tags.length>0)try{oe.tags=a(de.tags)}catch(Ve){this.logger.error("assembleLogin::format tags error",de.tags,Ve)}return{type:1,login:oe,imLogin:this.assembleIMLogin()}},Ce.login=i(n.mark(function de(){var oe,he,Ve,le=this;return n.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return oe=this,ie.next=3,oe.assembleLogin();case 3:if(he=ie.sent,!(Ve=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){ie.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[Ve]){ie.next=10;break}return this.logger.warn("onConnect::repeat login",Ve),ie.abrupt("return");case 10:this.socketIds[Ve]=!0,ie.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+Ve+" appLogin is "+he.login.appLogin),oe.createLoginTime=s(),oe.sendCmd("login",V({},he),function(Ie,pe){if(Ie)oe.reporter.report("chatroomLogin",{accid:oe.account,roomId:oe.options&&oe.options.chatroomId,serverIps:oe.options&&oe.options.chatroomAddresses&&oe.options.chatroomAddresses.join(","),currentServerIp:oe.url,rt:s()-oe.createLoginTime,result:Ie?Ie.code:408,failReason:Ie?Ie.message:"",time:s()}),_e.call(oe,Ie),oe.statusProtector.emit("auth/loginLifeCycleLoginFail",Ie);else if(oe.reporter.report("chatroomLogin",{accid:oe.account,roomId:oe.options&&oe.options.chatroomId,serverIps:oe.options&&oe.options.chatroomAddresses&&oe.options.chatroomAddresses.join(","),currentServerIp:oe.url,rt:s()-oe.createLoginTime,result:200,failReason:"",time:s()}),oe.resetReconnectStatus(),le.heartbeatFail=0,le.hasLogin=!0,le.autoconnect=!0,oe.startHeartbeat(),oe.initOnlineListener(),oe.statusProtector.emit("auth/loginLifeCycleLoginSucc"),oe.keepNosSafeUrl)oe.afterLogin(pe);else{var kt=[];oe.parser.checkObjSafeUrl(pe,kt,[]),u.all(kt).then(function(){oe.afterLogin(pe)}).catch(function(){oe.afterLogin(pe)})}});case 17:case"end":return ie.stop()}},de,this)})),Ce.afterLogin=function(de){var oe=de.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=oe,this.notifyLogin(de)},Ce.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],Ce.kickedMessages=["","聊天室关闭了","被房主或者管理员踢出","不允许同一个帐号在多个地方同时登录","悄悄被踢","被拉黑了"]},function(t,r,e){var n=e(9),o=e(23),i=e(69),a=e(2),s=e(52),u=e(41),c=e(15),d=e(32),m=e(123),v=e(5),g=e(195).fn,b=e(0),T=e(13),_=e(885),y=e(763),O=e(890),V=e(891),Ce=e(892);g.completeMsg=function(ae){ae.chatroomId=this.chatroom&&this.chatroom.id,ae.from=this.options.account,ae.fromClientType="Web",ae.time||(ae.time=+new Date)},g.amendMsg=function(ae){return ae},g.onMsg=function(ae){var Fe,_e=n(Fe=this.message).call(Fe,ae.content.msg);if(this.checkMsgUnique(_e)){if(_e.__handleTime=this.reporterHook.getSafeClock(),_e.__receiveTime=ae.__receiveTime,b.get(ae,"content.msg.__clientExt"))try{_e.__clientExt=JSON.parse(ae.content.msg.__clientExt)}catch{this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(ae.content.msg.__clientExt))}this.msgBuffer.push(_e),this.msgFlushTimer||this.startMsgFlushTimer(),ae&&ae.content&&ae.content.msg&&ae.content.msg.needHighPriorityMsgAck==="1"&&this.sendCmd("sendChatroomMsgAck",{chatRoomMsgAckTag:{idClient:_e.idClient,chatroomId:_e.chatroomId}})}else this.logger.warn("onMsg::msg::repeat",_e.idClient)},g.startMsgFlushTimer=function(){var ae=this,Fe=ae.options;ae.msgFlushTimer=o(function(){var _e,de=i(_e=ae.msgBuffer).call(_e,0,Fe.msgBufferSize);if(T.isBrowser){var oe=ae.reporterHook.getSafeClock();a(de).call(de,function(he){if(he.flow!=="out"){var Ve={msgId:he.idServer,clientId:he.idClient,receiveTime:ae.reporterHook.getNTPTime(he.__receiveTime),serverTime:he.time,callbackTime:ae.reporterHook.getNTPTime(oe),preHandleTime:ae.reporterHook.getNTPTime(he.__handleTime),fromAccid:he.from,toAccid:ae.options.account,type:4,tid:"",roomId:he.chatroomId,result:200,failReason:"",rt:s(oe-he.__receiveTime)},le=b.get(he,"__clientExt.statistics.apiCallingTime"),ie=b.get(he,"__clientExt.statistics.sendTime");le&&ie&&(Ve.apiCallingTime=le,Ve.sendTime=ie,Ve.attachUploadDuration=b.get(he,"__clientExt.statistics.attachUploadDuration")||0),ae.reporter&&ae.reporter.report("msgReceive",Ve)}delete he.__handleTime,delete he.__receiveTime,delete he.__clientExt})}ae.options.onmsgs(de),ae.msgBuffer.length?ae.startMsgFlushTimer():delete ae.msgFlushTimer},Fe.msgBufferInterval)},g.checkMsgUnique=b.genCheckUniqueFunc("idClient"),g.onSendMsg=function(ae){var Fe,_e=ae.obj.msg;ae.error?_e.status="fail":(_e=ae.content.msg).status="success",u(_e,ae.obj.msg),_e=n(Fe=this.message).call(Fe,_e),this.checkMsgUnique(_e),ae.obj=_e},g.onHistoryMsgs=function(ae){ae.error||(ae.obj||(ae.obj={}),ae.obj.msgs=this.message.reverseMsgs(ae.content.msgs))},g.onCdnMsgInfo=function(ae){if(ae){ae.cdnUrls&&(ae.cdnUrls=ae.cdnUrls.split("|")),ae.interval&&(ae.interval=1e3*s(ae.interval)),ae.timeout&&(ae.timeout=+ae.timeout),ae.enable&&(ae.enable=+ae.enable),ae.timestamp&&(ae.timestamp=+ae.timestamp,this.correctCdnTime(ae.timestamp));var Fe=!this.cdnInfo.enable&&ae.enable;u(this.cdnInfo,ae),Fe&&this.queryCdnMsgs()}},g.correctCdnTime=function(ae){ae&&typeof ae=="number"&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=ae,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",ae,this.cdnInfo.localTime,new Date(ae),new Date(this.cdnInfo.localTime)))},g.queryCdnMsgs=function(ae){var Fe,_e=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=o(function(){return _e.queryCdnMsgs()},this.cdnInfo.interval);var de=+new Date;if(de=de-this.cdnInfo.localTime+this.cdnInfo.timestamp,de-=de%this.cdnInfo.interval,this.cdnInfo.lastNow!==de&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var oe=this,he=this.cdnInfo.decryptKey,Ve=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),le=c(Fe=this.cdnInfo.cdnUrls).call(Fe,0);ae=ae||0,function ie(){if(ae>=3)return void oe.finalFail++;if(le.length){var Ie=le.shift().replace("#time",de),pe=Ie.split("/")[2],kt=+new Date;oe.adaptersRequest(Ie,{timeout:Ve,onload:function(Ue){if(oe.cdnInfo.lastNow>de)oe.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",oe.cdnInfo.lastNow,de,Ue);else{oe.cdnInfo.lastNow=de,oe.afterQueryCdn(pe,+new Date-kt,!0);try{Ue=JSON.parse(Ue)}catch(pr){oe.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",pr)}if(Ue&&Ue.data){Ue.ptm&&(oe.cdnInfo.timeout=Ue.ptm),Ue.pis&&(oe.cdnInfo.interval=1e3*Ue.pis);var Dt,tr,dr=Ue.e===!0?(Dt=Ue.data,tr=he,_.decrypt(Dt,y.parse(tr),{mode:O,padding:V}).toString(Ce)):Ue.data;oe.onCdnMsgsSmoothly(dr,de,1e3*Ue.c)}}},onerror:function(Ue){if(ae++,oe.afterQueryCdn(pe,+new Date-kt,!1),Ue.status===404){var Dt;try{var tr=JSON.parse(Ue.result);tr.code===404&&tr.timestamp&&(Dt=tr.timestamp)}catch(dr){oe.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",dr,Ue)}!Dt&&Ue.date&&(Dt=+new Date(Ue.date)),Dt&&(oe.correctCdnTime(Dt),clearTimeout(oe.queryCdnTimer),oe.queryCdnMsgs(ae))}else ie()}},{exception_service:8})}}()}}},g.onCdnMsgsSmoothly=function(ae,Fe,_e){try{ae=JSON.parse(ae)}catch(le){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",le)}if(this.logger.info("receive cdn msgs "+ae.length+" and request time is "+new Date(Fe)),d(ae)&&ae.length){var de=this,oe=this.options.msgBufferInterval,he=Math.ceil(ae.length*oe/_e);Ve(),clearInterval(de.cdnSmoothTimer),de.cdnSmoothTimer=m(function(){return Ve()},oe)}function Ve(){if(de.isConnected()){var le=i(ae).call(ae,0,he);a(le).call(le,function(ie){var Ie=de.parser.syncUnserialize(ie,"msg");de.onMsg({content:{msg:Ie}})}),ae.length||clearInterval(de.cdnSmoothTimer)}}},g.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},g.initCdnData=function(){this.resetCdnData(),b.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(ae,Fe,_e){var de,oe=this;this.cdnData[ae]||(this.cdnData[ae]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),_e?(this.cdnData[ae].success++,this.cdnData[ae].sr+=Fe,Fe>this.cdnData[ae].smr&&(this.cdnData[ae].smr=Fe)):(this.cdnData[ae].fail++,this.cdnData[ae].fr+=Fe,Fe>this.cdnData[ae].fmr&&(this.cdnData[ae].fmr=Fe)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(a(de=v(this.cdnData)).call(de,function(he){oe.cdnData[he].sr=oe.cdnData[he].sr/oe.cdnData[he].success||0,oe.cdnData[he].fr=oe.cdnData[he].fr/oe.cdnData[he].fail||0}),this.options.onCdnRequestData(u({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(t,r,e){var n;t.exports=(n=e(89),e(763),e(887),e(764),e(312),function(){var o=n,i=o.lib.BlockCipher,a=o.algo,s=[],u=[],c=[],d=[],m=[],v=[],g=[],b=[],T=[],_=[];(function(){for(var V=[],Ce=0;Ce<256;Ce++)V[Ce]=Ce<128?Ce<<1:Ce<<1^283;var ae=0,Fe=0;for(Ce=0;Ce<256;Ce++){var _e=Fe^Fe<<1^Fe<<2^Fe<<3^Fe<<4;_e=_e>>>8^255&_e^99,s[ae]=_e,u[_e]=ae;var de=V[ae],oe=V[de],he=V[oe],Ve=257*V[_e]^16843008*_e;c[ae]=Ve<<24|Ve>>>8,d[ae]=Ve<<16|Ve>>>16,m[ae]=Ve<<8|Ve>>>24,v[ae]=Ve,Ve=16843009*he^65537*oe^257*de^16843008*ae,g[_e]=Ve<<24|Ve>>>8,b[_e]=Ve<<16|Ve>>>16,T[_e]=Ve<<8|Ve>>>24,_[_e]=Ve,ae?(ae=de^V[V[V[he^de]]],Fe^=V[V[Fe]]):ae=Fe=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],O=a.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var V=this._keyPriorReset=this._key,Ce=V.words,ae=V.sigBytes/4,Fe=4*((this._nRounds=ae+6)+1),_e=this._keySchedule=[],de=0;de<Fe;de++)de<ae?_e[de]=Ce[de]:(Ve=_e[de-1],de%ae?ae>6&&de%ae==4&&(Ve=s[Ve>>>24]<<24|s[Ve>>>16&255]<<16|s[Ve>>>8&255]<<8|s[255&Ve]):(Ve=s[(Ve=Ve<<8|Ve>>>24)>>>24]<<24|s[Ve>>>16&255]<<16|s[Ve>>>8&255]<<8|s[255&Ve],Ve^=y[de/ae|0]<<24),_e[de]=_e[de-ae]^Ve);for(var oe=this._invKeySchedule=[],he=0;he<Fe;he++){if(de=Fe-he,he%4)var Ve=_e[de];else Ve=_e[de-4];oe[he]=he<4||de<=4?Ve:g[s[Ve>>>24]]^b[s[Ve>>>16&255]]^T[s[Ve>>>8&255]]^_[s[255&Ve]]}}},encryptBlock:function(V,Ce){this._doCryptBlock(V,Ce,this._keySchedule,c,d,m,v,s)},decryptBlock:function(V,Ce){var ae=V[Ce+1];V[Ce+1]=V[Ce+3],V[Ce+3]=ae,this._doCryptBlock(V,Ce,this._invKeySchedule,g,b,T,_,u),ae=V[Ce+1],V[Ce+1]=V[Ce+3],V[Ce+3]=ae},_doCryptBlock:function(V,Ce,ae,Fe,_e,de,oe,he){for(var Ve=this._nRounds,le=V[Ce]^ae[0],ie=V[Ce+1]^ae[1],Ie=V[Ce+2]^ae[2],pe=V[Ce+3]^ae[3],kt=4,Ue=1;Ue<Ve;Ue++){var Dt=Fe[le>>>24]^_e[ie>>>16&255]^de[Ie>>>8&255]^oe[255&pe]^ae[kt++],tr=Fe[ie>>>24]^_e[Ie>>>16&255]^de[pe>>>8&255]^oe[255&le]^ae[kt++],dr=Fe[Ie>>>24]^_e[pe>>>16&255]^de[le>>>8&255]^oe[255&ie]^ae[kt++],pr=Fe[pe>>>24]^_e[le>>>16&255]^de[ie>>>8&255]^oe[255&Ie]^ae[kt++];le=Dt,ie=tr,Ie=dr,pe=pr}Dt=(he[le>>>24]<<24|he[ie>>>16&255]<<16|he[Ie>>>8&255]<<8|he[255&pe])^ae[kt++],tr=(he[ie>>>24]<<24|he[Ie>>>16&255]<<16|he[pe>>>8&255]<<8|he[255&le])^ae[kt++],dr=(he[Ie>>>24]<<24|he[pe>>>16&255]<<16|he[le>>>8&255]<<8|he[255&ie])^ae[kt++],pr=(he[pe>>>24]<<24|he[le>>>16&255]<<16|he[ie>>>8&255]<<8|he[255&Ie])^ae[kt++],V[Ce]=Dt,V[Ce+1]=tr,V[Ce+2]=dr,V[Ce+3]=pr},keySize:8});o.AES=i._createHelper(O)}(),n.AES)},function(t,r){},function(t,r,e){var n;t.exports=(n=e(89),function(o){var i=n,a=i.lib,s=a.WordArray,u=a.Hasher,c=i.algo,d=[];(function(){for(var _=0;_<64;_++)d[_]=4294967296*o.abs(o.sin(_+1))|0})();var m=c.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,y){for(var O=0;O<16;O++){var V=y+O,Ce=_[V];_[V]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)}var ae=this._hash.words,Fe=_[y+0],_e=_[y+1],de=_[y+2],oe=_[y+3],he=_[y+4],Ve=_[y+5],le=_[y+6],ie=_[y+7],Ie=_[y+8],pe=_[y+9],kt=_[y+10],Ue=_[y+11],Dt=_[y+12],tr=_[y+13],dr=_[y+14],pr=_[y+15],ar=ae[0],hr=ae[1],Ne=ae[2],nr=ae[3];ar=v(ar,hr,Ne,nr,Fe,7,d[0]),nr=v(nr,ar,hr,Ne,_e,12,d[1]),Ne=v(Ne,nr,ar,hr,de,17,d[2]),hr=v(hr,Ne,nr,ar,oe,22,d[3]),ar=v(ar,hr,Ne,nr,he,7,d[4]),nr=v(nr,ar,hr,Ne,Ve,12,d[5]),Ne=v(Ne,nr,ar,hr,le,17,d[6]),hr=v(hr,Ne,nr,ar,ie,22,d[7]),ar=v(ar,hr,Ne,nr,Ie,7,d[8]),nr=v(nr,ar,hr,Ne,pe,12,d[9]),Ne=v(Ne,nr,ar,hr,kt,17,d[10]),hr=v(hr,Ne,nr,ar,Ue,22,d[11]),ar=v(ar,hr,Ne,nr,Dt,7,d[12]),nr=v(nr,ar,hr,Ne,tr,12,d[13]),Ne=v(Ne,nr,ar,hr,dr,17,d[14]),ar=g(ar,hr=v(hr,Ne,nr,ar,pr,22,d[15]),Ne,nr,_e,5,d[16]),nr=g(nr,ar,hr,Ne,le,9,d[17]),Ne=g(Ne,nr,ar,hr,Ue,14,d[18]),hr=g(hr,Ne,nr,ar,Fe,20,d[19]),ar=g(ar,hr,Ne,nr,Ve,5,d[20]),nr=g(nr,ar,hr,Ne,kt,9,d[21]),Ne=g(Ne,nr,ar,hr,pr,14,d[22]),hr=g(hr,Ne,nr,ar,he,20,d[23]),ar=g(ar,hr,Ne,nr,pe,5,d[24]),nr=g(nr,ar,hr,Ne,dr,9,d[25]),Ne=g(Ne,nr,ar,hr,oe,14,d[26]),hr=g(hr,Ne,nr,ar,Ie,20,d[27]),ar=g(ar,hr,Ne,nr,tr,5,d[28]),nr=g(nr,ar,hr,Ne,de,9,d[29]),Ne=g(Ne,nr,ar,hr,ie,14,d[30]),ar=b(ar,hr=g(hr,Ne,nr,ar,Dt,20,d[31]),Ne,nr,Ve,4,d[32]),nr=b(nr,ar,hr,Ne,Ie,11,d[33]),Ne=b(Ne,nr,ar,hr,Ue,16,d[34]),hr=b(hr,Ne,nr,ar,dr,23,d[35]),ar=b(ar,hr,Ne,nr,_e,4,d[36]),nr=b(nr,ar,hr,Ne,he,11,d[37]),Ne=b(Ne,nr,ar,hr,ie,16,d[38]),hr=b(hr,Ne,nr,ar,kt,23,d[39]),ar=b(ar,hr,Ne,nr,tr,4,d[40]),nr=b(nr,ar,hr,Ne,Fe,11,d[41]),Ne=b(Ne,nr,ar,hr,oe,16,d[42]),hr=b(hr,Ne,nr,ar,le,23,d[43]),ar=b(ar,hr,Ne,nr,pe,4,d[44]),nr=b(nr,ar,hr,Ne,Dt,11,d[45]),Ne=b(Ne,nr,ar,hr,pr,16,d[46]),ar=T(ar,hr=b(hr,Ne,nr,ar,de,23,d[47]),Ne,nr,Fe,6,d[48]),nr=T(nr,ar,hr,Ne,ie,10,d[49]),Ne=T(Ne,nr,ar,hr,dr,15,d[50]),hr=T(hr,Ne,nr,ar,Ve,21,d[51]),ar=T(ar,hr,Ne,nr,Dt,6,d[52]),nr=T(nr,ar,hr,Ne,oe,10,d[53]),Ne=T(Ne,nr,ar,hr,kt,15,d[54]),hr=T(hr,Ne,nr,ar,_e,21,d[55]),ar=T(ar,hr,Ne,nr,Ie,6,d[56]),nr=T(nr,ar,hr,Ne,pr,10,d[57]),Ne=T(Ne,nr,ar,hr,le,15,d[58]),hr=T(hr,Ne,nr,ar,tr,21,d[59]),ar=T(ar,hr,Ne,nr,he,6,d[60]),nr=T(nr,ar,hr,Ne,Ue,10,d[61]),Ne=T(Ne,nr,ar,hr,de,15,d[62]),hr=T(hr,Ne,nr,ar,pe,21,d[63]),ae[0]=ae[0]+ar|0,ae[1]=ae[1]+hr|0,ae[2]=ae[2]+Ne|0,ae[3]=ae[3]+nr|0},_doFinalize:function(){var _=this._data,y=_.words,O=8*this._nDataBytes,V=8*_.sigBytes;y[V>>>5]|=128<<24-V%32;var Ce=o.floor(O/4294967296),ae=O;y[15+(V+64>>>9<<4)]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8),y[14+(V+64>>>9<<4)]=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),_.sigBytes=4*(y.length+1),this._process();for(var Fe=this._hash,_e=Fe.words,de=0;de<4;de++){var oe=_e[de];_e[de]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8)}return Fe},clone:function(){var _=u.clone.call(this);return _._hash=this._hash.clone(),_}});function v(_,y,O,V,Ce,ae,Fe){var _e=_+(y&O|~y&V)+Ce+Fe;return(_e<<ae|_e>>>32-ae)+y}function g(_,y,O,V,Ce,ae,Fe){var _e=_+(y&V|O&~V)+Ce+Fe;return(_e<<ae|_e>>>32-ae)+y}function b(_,y,O,V,Ce,ae,Fe){var _e=_+(y^O^V)+Ce+Fe;return(_e<<ae|_e>>>32-ae)+y}function T(_,y,O,V,Ce,ae,Fe){var _e=_+(O^(y|~V))+Ce+Fe;return(_e<<ae|_e>>>32-ae)+y}i.MD5=u._createHelper(m),i.HmacMD5=u._createHmacHelper(m)}(Math),n.MD5)},function(t,r,e){var n,o,i,a,s,u,c,d;t.exports=(d=e(89),o=(n=d).lib,i=o.WordArray,a=o.Hasher,s=n.algo,u=[],c=s.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,v){for(var g=this._hash.words,b=g[0],T=g[1],_=g[2],y=g[3],O=g[4],V=0;V<80;V++){if(V<16)u[V]=0|m[v+V];else{var Ce=u[V-3]^u[V-8]^u[V-14]^u[V-16];u[V]=Ce<<1|Ce>>>31}var ae=(b<<5|b>>>27)+O+u[V];ae+=V<20?1518500249+(T&_|~T&y):V<40?1859775393+(T^_^y):V<60?(T&_|T&y|_&y)-1894007588:(T^_^y)-899497514,O=y,y=_,_=T<<30|T>>>2,T=b,b=ae}g[0]=g[0]+b|0,g[1]=g[1]+T|0,g[2]=g[2]+_|0,g[3]=g[3]+y|0,g[4]=g[4]+O|0},_doFinalize:function(){var m=this._data,v=m.words,g=8*this._nDataBytes,b=8*m.sigBytes;return v[b>>>5]|=128<<24-b%32,v[14+(b+64>>>9<<4)]=Math.floor(g/4294967296),v[15+(b+64>>>9<<4)]=g,m.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}}),n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c),d.SHA1)},function(t,r,e){var n,o,i,a;t.exports=(n=e(89),i=(o=n).lib.Base,a=o.enc.Utf8,void(o.algo.HMAC=i.extend({init:function(s,u){s=this._hasher=new s.init,typeof u=="string"&&(u=a.parse(u));var c=s.blockSize,d=4*c;u.sigBytes>d&&(u=s.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),v=this._iKey=u.clone(),g=m.words,b=v.words,T=0;T<c;T++)g[T]^=1549556828,b[T]^=909522486;m.sigBytes=v.sigBytes=d,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(s){var u=this._hasher,c=u.finalize(s);return u.reset(),u.finalize(this._oKey.clone().concat(c))}})))},function(t,r,e){var n,o;t.exports=(o=e(89),e(312),o.mode.ECB=((n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(i,a){this._cipher.encryptBlock(i,a)}}),n.Decryptor=n.extend({processBlock:function(i,a){this._cipher.decryptBlock(i,a)}}),n),o.mode.ECB)},function(t,r,e){var n;t.exports=(n=e(89),e(312),n.pad.Pkcs7)},function(t,r,e){var n;t.exports=(n=e(89),n.enc.Utf8)},function(t,r,e){var n=e(9),o=e(195).fn,i=e(311);o.onChatroomMembersInfo=o.onChatroomMembers=function(a){a.error||(a.obj.members=i.reverseMembers(a.content.members))},o.onGetChatroomMemberCountByTag=function(a){a.error||(a.obj=a.content)},o.onMarkChatroomMember=function(a){a.error||(a.obj.member=n(i).call(i,a.content.chatroomMember))},o.onSyncRobot=function(a){!a.error&&this.options.onrobots?this.options.onrobots(null,a.content):this.ontions.onrobots(a.error,{})}},function(t,r,e){var n=e(9),o=e(8),i=e(0),a=function(_){this.account=_.account},s=a.prototype,u=s.Message=e(117),c=s.TextMessage=e(895),d=s.FileMessage=e(205),m=s.GeoMessage=e(899),v=s.NotificationMessage=e(900),g=s.CustomMessage=e(901),b=s.TipMessage=e(902),T=s.RobotMessage=e(903);s.validTypes=u.validTypes,s.reverse=function(_){var y;switch(u.getType(_)){case"text":y=n(c).call(c,_);break;case"image":case"audio":case"video":case"file":y=n(d).call(d,_);break;case"geo":y=n(m).call(m,_);break;case"notification":y=n(v).call(v,_);break;case"custom":y=n(g).call(g,_);break;case"tip":y=n(b).call(b,_);break;case"robot":y=n(T).call(T,_);break;default:y=n(u).call(u,_)}return u.setExtra(y,this.account),y},s.reverseMsgs=function(_,y){var O,V,Ce=this;return o(_).call(_,function(ae){return ae=n(Ce).call(Ce,ae),y&&((O=y.modifyObj)&&(ae=i.merge(ae,O)),V=y.mapper,i.isFunction(V)&&(ae=V(ae))),ae})},t.exports=a},function(t,r,e){var n=e(18),o=e(9),i=e(117),a=e(0);function s(u){a.verifyOptions(u,"text","msg::TextMessage"),u.type="text",i.call(this,u),this.attach=u.text,this.body=""}s.prototype=n(i.prototype),s.reverse=function(u){var c=o(i).call(i,u);return c.text=u.attach,c},t.exports=s},function(t,r,e){var n=e(18),o=e(0),i=e(205);function a(){}a.prototype=n(i.prototype),a.verifyFile=function(s,u){o.verifyOptions(s,"w h",!0,"file.",u)},t.exports=a},function(t,r,e){var n=e(18),o=e(205),i=e(0);function a(){}a.prototype=n(o.prototype),a.verifyFile=function(s,u){i.verifyOptions(s,"dur",!0,"file.",u)},t.exports=a},function(t,r,e){var n=e(18),o=e(205),i=e(0);function a(){}a.prototype=n(o.prototype),a.verifyFile=function(s,u){i.verifyOptions(s,"dur w h",!0,"file.",u)},t.exports=a},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(117),s=e(0);function u(c){c.type="geo",s.verifyOptions(c,"geo","msg::GeoMessage"),s.verifyOptions(c.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),s.verifyParamType("geo.lng",c.geo.lng,"number","msg::GeoMessage"),s.verifyParamType("geo.lat",c.geo.lat,"number","msg::GeoMessage"),s.verifyParamType("geo.title",c.geo.title,"string","msg::GeoMessage"),a.call(this,c),this.attach=n(c.geo)}u.prototype=o(a.prototype),u.reverse=function(c){var d=i(a).call(a,c);return c.attach=c.attach?""+c.attach:"",d.geo=c.attach?JSON.parse(c.attach):{},d},t.exports=u},function(t,r,e){var n=e(18),o=e(9),i=e(52),a=e(0).notundef,s=e(117),u={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag",324:"batchQueueOffer",323:"deleteChatroomMsg",325:"updateChatroomTags"};function c(){}c.prototype=n(s.prototype),c.reverse=function(d){var m=o(s).call(s,d);if(d.attach=d.attach?""+d.attach:"",d.attach){var v=JSON.parse(d.attach);if(m.attach={type:u[v.id]},a(v.data)){var g=v.data;if(a(g.operator)&&(m.attach.from=g.operator),a(g.opeNick)&&(m.attach.fromNick=g.opeNick),a(g.target)&&(m.attach.to=g.target),a(g.tarNick)&&(m.attach.toNick=g.tarNick),a(g.muteDuration)&&(m.attach.duration=i(g.muteDuration,10)),a(g.tags)&&(m.attach.tags=g.tags),m.attach.type==="memberEnter"&&(a(g.muted)?m.attach.gaged=+g.muted==1:m.attach.gaged=!1,a(g.tempMuted)?m.attach.tempMuted=+g.tempMuted==1:m.attach.tempMuted=!1,a(g.muteTtl)?m.attach.tempMuteDuration=+g.muteTtl:m.attach.tempMuteDuration=0),m.attach.type==="deleteChatroomMsg"&&(m.attach.msgId=g.msgId,m.attach.msgTime=g.msgTime),a(g.ext)&&(m.attach.custom=g.ext),a(g.queueChange)){var b=JSON.parse(g.queueChange);switch(b._e){case"OFFER":m.attach.queueChange={type:"OFFER",elementKey:b.key,elementValue:b.content};break;case"POLL":m.attach.queueChange={type:"POLL",elementKey:b.key,elementValue:b.content};break;case"DROP":m.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":m.attach.queueChange={type:b._e,elementKv:b.kvObject};break;case"BATCH_OFFER":m.attach.queueChange={type:b._e,elements:b.elements}}}}}else m.attach={};return m},t.exports=c},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(117),s=e(0);function u(c){s.verifyOptions(c,"content","msg::CustomMessage"),c.type="custom",a.call(this,c),typeof c.content!="string"&&(c.content=n(c.content)),this.attach=c.content}u.prototype=o(a.prototype),u.reverse=function(c){var d=i(a).call(a,c);return d.content=c.attach,d},t.exports=u},function(t,r,e){var n=e(18),o=e(9),i=e(117),a=e(0);function s(u){a.verifyOptions(u,"tip","msg::TipMessage"),u.type="tip",i.call(this,u),this.attach=u.tip}s.prototype=n(i.prototype),s.reverse=function(u){var c=o(i).call(i,u);return c.tip=u.attach,c},t.exports=s},function(t,r,e){var n=e(10),o=e(18),i=e(9),a=e(8),s=e(117),u=e(0),c={welcome:"00",text:"01",link:"03"},d={"01":"text","02":"image","03":"answer",11:"template"};function m(v){u.verifyOptions(v,"content","msg::RobotMessage");var g=v.content;switch(g.type){case"welcome":u.undef(v.body)&&(this.body="欢迎消息");break;case"text":u.verifyOptions(g,"content","msg::RobotMessage"),u.undef(v.body)&&(this.body=g.content);break;case"link":u.verifyOptions(g,"target","msg::RobotMessage")}g.type&&(g.type=c[g.type]),g={param:g,robotAccid:v.robotAccid},this.attach=n(g),v.type="robot",s.call(this,v)}m.prototype=o(s.prototype),m.reverse=function(v){var g=i(s).call(s,v);if(g.type==="robot"){var b=JSON.parse(v.attach);if(b.param&&(b.param.type=d[b.param.type]||"unknown"),b.robotMsg){var T=(b=u.merge(b,b.robotMsg)).message;b.flag==="bot"?b.message=a(T).call(T,function(_){return _.type=d[_.type]||"unknown",_}):b.flag,delete b.robotMsg}g.content=b}return g},t.exports=m},function(t,r,e){var n=e(9),o=e(32),i=e(8),a=e(17),s=e(10),u=e(0),c=u.undef,d=e(194).fn,m=e(24).reportAPI;d.beforeSendMsg=function(g){g.cmd="sendMsg"};var v={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};d.getHistoryMsgs=function(g){if((g=g||{}).done=m({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgs",done:g.done}),u.verifyOptions(g),c(g.timetag)?g.timetag=0:u.verifyParamType("timetag",g.timetag,"number","msg::getHistoryMsgs"),c(g.limit)?g.limit=100:u.verifyParamType("limit",g.limit,"number","msg::getHistoryMsgs"),c(n(g))?g.reverse=!1:u.verifyParamType("reverse",n(g),"boolean","msg::getHistoryMsgs"),c(g.msgTypes))g.msgTypes=[];else if(o(g.msgTypes)){var b,T;g.msgTypes=i(b=g.msgTypes).call(b,function(_){return v[_]}),g.msgTypes=a(T=g.msgTypes).call(T,function(_){return typeof _=="number"})}else typeof v[g.msgTypes]=="number"?g.msgTypes=[v[g.msgTypes]]:g.msgTypes=[];this.processCallback(g),this.sendCmd("getHistoryMsgs",g,function(_,y,O){o(O)&&(O=i(O).call(O,function(V){return v[V.type]&&(V.type=v[V.type]),V})),g.callback(_,y,O)})},d.getHistoryMsgsByTags=function(g){if((g=g||{}).done=m({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgsByTags",done:g.done}),u.verifyOptions(g,"tags","api::msg::getHistoryMsgsByTags"),u.verifyParamType("tags",g.tags,"array","api::msg::getHistoryMsgsByTags"),c(g.fromTime)?g.fromTime=0:u.verifyParamType("fromTime",g.fromTime,"number","api::msg::getHistoryMsgsByTags"),c(g.toTime)?g.toTime=0:u.verifyParamType("toTime",g.toTime,"number","api::msg::getHistoryMsgsByTags"),c(g.limit)?g.limit=100:u.verifyParamType("limit",g.limit,"number","msg::getHistoryMsgs"),c(n(g))?g.reverse=0:u.verifyParamType("reverse",n(g),"number","msg::getHistoryMsgs"),c(g.types))g.types=[];else if(o(g.types)){var b,T;g.types=i(b=g.types).call(b,function(_){return v[_]}),g.types=a(T=g.types).call(T,function(_){return typeof _=="number"})}else typeof v[g.types]=="number"?g.types=[v[g.types]]:g.types=[];this.processCallback(g),g.types=s(g.types),g.tags=s(g.tags),this.sendCmd("getHistoryMsgsByTags",{chatRoomTagHistoryMsgRequestTag:g},g.callback)}},function(t,r,e){var n=e(194).fn,o=e(24).reportAPI;n.disconnect=function(i){(i=i||{}).done=o({instance:this,className:"ChatroomFn",funcName:"disconnect",done:i.done}),this.protocol.disconnect(i.done)}},function(t,r,e){var n=e(0),o=n.undef,i=n.verifyOptions,a=n.verifyParamType,s=e(311),u=e(194).fn,c=e(24).reportAPI;u.updateMyChatroomMemberInfo=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"updateMyChatroomMemberInfo",done:d.done}),i(d,"member needNotify","member::updateMyChatroomMemberInfo"),a("needNotify",d.needNotify,"boolean","member::updateMyChatroomMemberInfo"),d.needSave=d.needSave||!1,a("needSave",d.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(d),this.processCallback(d),d.chatroomMember=new s(d.member),d.antispamTag={antiSpamBusinessId:d.antiSpamBusinessId},this.sendCmd("updateMyChatroomMemberInfo",d)},u.getChatroomMembers=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"getChatroomMembers",done:d.done}),i(d,"guest","member::getChatroomMembers"),a("guest",d.guest,"boolean","member::getChatroomMembers"),o(d.time)?d.time=0:a("time",d.time,"number","member::getChatroomMembers"),o(d.limit)?d.limit=100:a("limit",d.limit,"number","member::getChatroomMembers"),this.processCallback(d),d.guest?d.type=d.desc===!1?3:1:d.type=d.onlyOnline?2:0,this.sendCmd("getChatroomMembers",d)},u.getChatroomMembersByTag=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersByTag",done:d.done}),i(d,"tag","getChatroomMembersByTag::rag"),o(d.time)?d.time=0:a("time",d.time,"number","getChatroomMembersByTag::time"),o(d.limit)?d.limit=100:a("limit",d.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(d),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:n.filterObj(d,"tag limit time"),callback:d.callback})},u.getChatroomMemberCountByTag=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"getChatroomMemberCountByTag",done:d.done}),i(d,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(d),this.sendCmd("getChatroomMemberCountByTag",d)},u.getChatroomMembersInfo=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersInfo",done:d.done}),i(d,"accounts","member::getChatroomMembersInfo"),a("accounts",d.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(d),this.sendCmd("getChatroomMembersInfo",d)},u.markChatroomIdentity=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomIdentity",done:d.done}),i(d,"identity","member::markChatroomIdentity"),d.type={manager:1,common:2,black:-1,mute:-2}[d.identity],delete d.identity,isNaN(d.type)?i(d,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(d)},u.markChatroomManager=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomManager",done:d.done}),d.type=1,this.markChatroomMember(d)},u.markChatroomCommonMember=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomCommonMember",done:d.done}),d.type=2,this.markChatroomMember(d)},u.markChatroomBlacklist=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomBlacklist",done:d.done}),d.type=-1,this.markChatroomMember(d)},u.markChatroomGaglist=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomGaglist",done:d.done}),d.type=-2,this.markChatroomMember(d)},u.markChatroomMember=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"markChatroomMember",done:d.done}),i(d,"account type isAdd","member::markChatroomMember"),a("isAdd",d.isAdd,"boolean","member::markChatroomMember"),o(d.level)?d.level=0:a("level",d.level,"number","member::markChatroomMember"),this.processCustom(d),this.processCallback(d),this.sendCmd("markChatroomMember",d)},u.kickChatroomMember=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"kickChatroomMember",done:d.done}),i(d,"account","member::kickChatroomMember"),this.processCustom(d),this.processCallback(d),this.sendCmd("kickChatroomMember",d)},u.updateChatroomMemberTempMute=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"updateChatroomMemberTempMute",done:d.done}),i(d,"account duration needNotify","member::updateChatroomMemberTempMute"),a("duration",d.duration,"number","member::updateChatroomMemberTempMute"),a("needNotify",d.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(d),this.processCallback(d),this.sendCmd("updateChatroomMemberTempMute",d)},u.updateTagMembersTempMute=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"updateTagMembersTempMute",done:d.done}),i(d,"tag duration needNotify","member::updateTagMembersTempMute"),a("duration",d.duration,"number","member::updateTagMembersTempMute"),a("needNotify",d.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(d),this.processCallback(d);var m=n.filterObj(d,"tag duration custom notifyTargetTags");m.needNotify=d.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:m,callback:d.callback})},u.updateCoordinate=n.throttle(function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"updateCoordinate",done:d.done});var m=!0;d.x===void 0||d.y===void 0||d.z===void 0?m=!1:(typeof d.x!="number"&&(d.x=0),typeof d.y!="number"&&(d.y=0),typeof d.z!="number"&&(d.z=0)),this.processCallback(d);var v=n.filterObj(d,m?"x y z distance":"distance");this.sendCmd("updateCoordinate",{coordinateReq:v,callback:d.callback})},300,{},function(d){d&&d.done&&d.done({code:416,chatroomId:this.options.chatroomId})}),u.getRobotList=function(d){(d=d||{}).done=c({instance:this,className:"ChatroomFn",funcName:"getRobotList",done:d.done}),this.logger.warn("this api will be abandon"),o(d.timetag)&&(d.timetag=0),this.processCallback(d),this.sendCmd("syncRobot",d)}},function(t,r,e){var n=e(194).fn,o=e(0),i=e(24).reportAPI;n.queueOffer=function(a){(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"queueOffer",done:a.done}),o.verifyOptions(a,"elementKey elementValue","msg::queueOffer");var s={elementKey:a.elementKey,elementValue:a.elementValue,transient:!!a.transient};a.elementAccount&&(s.elementAccount=a.elementAccount),this.processCallback(a),this.sendCmd("queueOffer",s,a.callback)},n.queuePoll=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"queuePoll",done:a.done}),a.elementKey=a.elementKey||"",this.processCallback(a),this.sendCmd("queuePoll",a,a.callback)},n.queueList=function(a){(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"queueList",done:a.done}),this.processCallback(a),this.sendCmd("queueList",a,a.callback)},n.peak=function(a){(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"peak",done:a.done}),this.processCallback(a),this.sendCmd("peak",a,a.callback)},n.queueDrop=function(a){(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"queueDrop",done:a.done}),this.processCallback(a),this.sendCmd("queueDrop",a,a.callback)},n.queueChange=function(a){(a=a||{}).done=i({instance:this,className:"ChatroomFn",funcName:"queueChange",done:a.done}),o.verifyOptions(a,"elementMap","msg::queueOffer"),a.needNotify?(a.needNotify=!0,o.verifyOptions(a,"notifyExt","msg::queueOffer")):a.needNotify=!1,this.processCallback(a),this.sendCmd("queueChange",a,a.callback)}},,,function(t,r,e){t.exports=e(911)},function(t,r,e){e(298);var n={NIM:e(765),Chatroom:e(881)};e(310)(n),t.exports=n}])})})(NIM_Web_SDK);var NIM_Web_SDKExports=NIM_Web_SDK.exports;const NIM_SDK=getDefaultExportFromCjs(NIM_Web_SDKExports);class NimChatroomSocket{constructor(r){vc(this,"liveId");vc(this,"nimChatroomSocket");vc(this,"onMessage");vc(this,"handleRoomSocketMessage",r=>{this.onMessage(this,r)});vc(this,"onConnet",r=>{console.log("进入小偶像的直播间成功。")});vc(this,"handleRoomSocketError",(r,e)=>{console.log("发生错误",r,e)});vc(this,"handleRoomSocketDisconnect",r=>{console.log("连接断开",r)});this.liveId=r.liveId,this.onMessage=r.onMessage}init(r){this.nimChatroomSocket=NIM_SDK.Chatroom.getInstance({appKey:atob(r),chatroomId:this.liveId,chatroomAddresses:["chatweblink01.netease.im:443"],onconnect:this.onConnet,onmsgs:this.handleRoomSocketMessage,onerror:this.handleRoomSocketError,ondisconnect:this.handleRoomSocketDisconnect,isAnonymous:!0,chatroomNick:this.uuid(),chatroomAvatar:"",db:!1,dbLog:!1})}disconnect(){var r,e;(e=(r=this.nimChatroomSocket)==null?void 0:r.disconnect)==null||e.call(r,{done(){}}),this.nimChatroomSocket=void 0}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}}class PocketMessage{constructor(){vc(this,"content");vc(this,"url");vc(this,"type")}add(r){return this.content=r,this.type=1,this}addImg(r,e){return this.content=r,this.url=e,this.type=2,this}addVoice(r,e){return this.content=r,this.url=e,this.type=3,this}addVideo(r,e){return this.content=r,this.url=e,this.type=4,this}}const _hoisted_1$2=createBaseVNode("span",{style:{color:"red"}},"(不启用QQ机器人无需配置)",-1),_hoisted_2$2=createBaseVNode("h3",{style:{"margin-left":"40%"}},"即时消息及日志",-1),_hoisted_3$2={style:{height:"530px",overflow:"auto"},id:"textArae"},_hoisted_4$2={style:{margin:"5px"}},_hoisted_5$2={key:0},_hoisted_6$1={style:{height:"530px",overflow:"auto"}},_hoisted_7$1=createBaseVNode("tr",null,[createBaseVNode("th",{width:"300px"},"图片"),createBaseVNode("th",null,"操作")],-1),_hoisted_8$1={align:"center"},_hoisted_9$1=createBaseVNode("span",{title:"点击复制",style:{position:"absolute",right:"10px",bottom:"0",color:"rgb(194, 191, 191)","font-size":"15px"}},"如发现问题，反馈QQ：1615842006",-1),_sfc_main$3=defineComponent({__name:"Index",setup(t){const r=ref({}),e=ref({}),n=ref(!1),o=ref(!1),i=useRouter(),a=ref(),s=ref(),u=ref(),c=ref(new Array),d=ref(new Array),m=ref(),v=ref(!1);watch(c.value,(Ve,le)=>{Ve.length>=100&&c.value.splice(0,1);var ie=document.getElementById("textArae");ie!==null&&(ie.scrollTop=ie.scrollHeight)});const g=async()=>{await axios$1({url:"http://parkerbot.api/api/StartAliYunApi"})},b=async()=>{var Ve=await axios$1({url:"http://parkerbot.api/api/StartMiraiConsole"});Ve.data||ElMessage({showClose:!0,message:"Mirai目录不存在或路径错误，请检查后重试！",type:"error"}),Ve.data&&ElMessage({showClose:!0,message:"已为您打开Mirai控制台！",type:"success"})},T=async()=>{a.value&&a.value.destroy(),s.value&&s.value.destroy();const Ve=await _e();r.value=Ve.data.config;const le=Ve.data.config.KD;var ie=!1;if(Ve.data.enable.forEach(kt=>{kt.key=="KD"&&(ie=JSON.parse(kt.value))}),ie)a.value=new NIMSDK({appkey:atob(le.appKey),account:le.account,token:le.token}),await a.value.connect(),s.value=new QChatSDK({appkey:atob(le.appKey),account:le.account,token:le.token,linkAddresses:await a.value.plugin.getQChatAddress({ipType:2})}),s.value.on("logined",_),s.value.on("message",y),s.value.on("disconnect",V),await s.value.login();else{var Ie="机器人启动中！";c.value.push(new PocketMessage().add(Ie)),Ie="";var pe=await axios$1({url:"http://parkerbot.api/api/start"});n.value&&(pe.data.mirai?Ie+="QQ机器人启动成功。":Ie+="QQ机器人启动失败。"),setTimeout(()=>{Ie&&c.value.push(new PocketMessage().add(Ie)),c.value.push(new PocketMessage().add("机器人已启动"))},500)}},_=async function(){var Ve=`口袋登录成功。订阅小偶像${r.value.KD.name}的房间。`;if(c.value.push(new PocketMessage().add(Ve)),s.value==null)throw"聊天室未成功实例化";if((await s.value.qchatServer.subscribeAllChannel({type:1,serverIds:[r.value.KD.serverId]})).failServerIds.length){Ve=`小偶像${r.value.KD.name}的房间订阅失败。请检查配置后重试，如仍有问题，请联系开发者。`,c.value.push(new PocketMessage().add(Ve));return}Ve=`小偶像${r.value.KD.name}的房间订阅成功。`,c.value.push(new PocketMessage().add(Ve)),u.value=new NimChatroomSocket({liveId:r.value.KD.liveRoomId,onMessage:O}),u.value.init(r.value.KD.appKey);var ie=await axios$1({url:"http://parkerbot.api/api/start"});m.value=new window.WebSocket("ws://localhost:6001"),m.value.onopen=()=>{v.value=!0,c.value.push(new PocketMessage().add("连接消息推送服务器成功。"))},m.value.onclose=()=>{v.value=!1,c.value.push(new PocketMessage().add("连接消息推送服务器失败，请尝试再次启动机器人。请检查配置后重试，如仍有问题，请联系开发者。"))},n.value&&(ie.data.mirai?Ve="QQ机器人启动成功。":Ve="QQ机器人启动失败，请尝试再次启动机器人。请检查配置后重试，如仍有问题，请联系开发者。",c.value.push(new PocketMessage().add(Ve)))},y=async function(Ve){var ie,Ie,pe,kt;if(Ve.fromType=1,Ve.ext=JSON.parse(Ve.ext),Ve.channelName=await Ce(Ve.channelId),Ve.time=dayjs(Ve.time).format("YYYY-MM-DD HH:mm:ss"),v.value&&((ie=m.value)==null||ie.send(JSON.stringify(Ve))),Ve.type=="text"){var le=`【${Ve.channelName}|${Ve.time}】${Ve.ext.user.nickName}:${Ve.body}`;c.value.push(new PocketMessage().add(le))}else Ve.type=="image"?c.value.push(new PocketMessage().addImg(`【${Ve.channelName}|${Ve.time}】${Ve.ext.user.nickName}:`,(Ie=Ve==null?void 0:Ve.attach)==null?void 0:Ie.url)):Ve.type=="video"?c.value.push(new PocketMessage().addVideo(`【${Ve.channelName}|${Ve.time}】${Ve.ext.user.nickName}:`,(pe=Ve==null?void 0:Ve.attach)==null?void 0:pe.url)):Ve.type=="audio"?c.value.push(new PocketMessage().addVoice(`【${Ve.channelName}|${Ve.time}】${Ve.ext.user.nickName}:`,(kt=Ve==null?void 0:Ve.attach)==null?void 0:kt.url)):Ve.type=="custom"&&c.value.push(new PocketMessage().add(`【${Ve.channelName}|${Ve.time}】${Ve.ext.user.nickName}:发送了一条特殊消息！`))},O=function(Ve,le){le.forEach(ie=>{var Ie;v.value&&(ie.fromType=2,(Ie=m.value)==null||Ie.send(JSON.stringify(ie)))})},V=function(...Ve){c.value.push(new PocketMessage().add("登录连接状态已断开。"))},Ce=async function(Ve){if(s.value==null)throw"聊天室未成功实例化。";const le=await s.value.qchatChannel.getChannels({channelIds:[`${Ve}`]});return le?le[0].name:""},ae=()=>{a.value&&a.value.destroy(),s.value&&s.value.destroy(),u.value&&u.value.disconnect(),i.push("/config")},Fe=()=>{a.value&&a.value.destroy(),s.value&&s.value.destroy(),u.value&&u.value.disconnect(),i.push("mirai")},_e=async()=>{var Ve=await axios$1({url:"http://parkerbot.api/api/GetBaseConfig"});return Ve};onMounted(async()=>{const Ve=await _e();r.value=Ve.data.config,e.value=Ve.data.mirai,n.value=Ve.data.mirai.useMirai,Ve.data.enable.forEach(le=>{le.key==="BD"&&JSON.parse(le.value)&&Ve.data.config.BD.saveAliyunDisk&&(o.value=!0)}),await he()});const de=async(Ve,le)=>{var ie=await axios$1({url:"http://parkerbot.api/api/piccheck?id="+Ve+"&type=1"});ie.data&&(ElMessage({showClose:!0,message:"保存成功！",type:"success"}),d.value.splice(le,1)),ie.data||ElMessage({showClose:!0,message:"保存失败！",type:"error"})},oe=async(Ve,le)=>{var ie=await axios$1({url:"http://parkerbot.api/api/piccheck?id="+Ve+"&type=2"});ie.data&&(ElMessage({showClose:!0,message:"保存成功！",type:"success"}),d.value.splice(le,1)),ie.data||ElMessage({showClose:!0,message:"保存失败！",type:"error"})},he=async()=>{var Ve=await axios$1({url:"http://parkerbot.api/api/refresh"});d.value=Ve.data};return(Ve,le)=>{const ie=ElButton,Ie=ElFormItem,pe=ElForm,kt=ElHeader,Ue=ElImage,Dt=ElCol,tr=ElRow,dr=ElMain,pr=ElContainer;return openBlock(),createElementBlock(Fragment,null,[createVNode(pr,null,{default:withCtx(()=>[createVNode(kt,null,{default:withCtx(()=>[createVNode(pe,null,{default:withCtx(()=>[createVNode(Ie,null,{default:withCtx(()=>[createVNode(ie,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:ae},{default:withCtx(()=>[createTextVNode(" 修改配置 ")]),_:1},8,["icon"]),createVNode(ie,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:Fe},{default:withCtx(()=>[createTextVNode(" Mirai配置 ")]),_:1},8,["icon"]),_hoisted_1$2,n.value?(openBlock(),createBlock(ie,{key:0,type:"primary","native-type":"button",onClick:b},{default:withCtx(()=>[createTextVNode("启动Mirai机器人")]),_:1})):createCommentVNode("",!0),createVNode(ie,{type:"primary","native-type":"button",onClick:T},{default:withCtx(()=>[createTextVNode("启动机器人")]),_:1}),o.value?(openBlock(),createBlock(ie,{key:1,type:"primary","native-type":"button",onClick:g},{default:withCtx(()=>[createTextVNode("启动阿里云盘")]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1}),createVNode(dr,null,{default:withCtx(()=>[createVNode(tr,{gutter:20},{default:withCtx(()=>[createVNode(Dt,{span:12},{default:withCtx(()=>[_hoisted_2$2,createBaseVNode("div",_hoisted_3$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(ar,hr)=>(openBlock(),createElementBlock("div",_hoisted_4$2,[createTextVNode(toDisplayString(hr+1+":")+" ",1),ar.type!=2?(openBlock(),createElementBlock("span",_hoisted_5$2,toDisplayString(ar.content),1)):createCommentVNode("",!0),ar.type==2?(openBlock(),createBlock(Ue,{key:1,style:{height:"80px",width:"80px"},src:ar.url,"preview-src-list":[ar.url]},null,8,["src","preview-src-list"])):createCommentVNode("",!0)]))),256))])]),_:1}),createVNode(Dt,{span:12},{default:withCtx(()=>[createBaseVNode("h3",{title:"点此刷新",onClick:he,style:{cursor:"pointer","margin-left":"40%"}},"图片待审核列表"),createBaseVNode("div",_hoisted_6$1,[createBaseVNode("table",null,[_hoisted_7$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,(ar,hr)=>(openBlock(),createElementBlock("tr",null,[createBaseVNode("td",_hoisted_8$1,[createVNode(Ue,{style:{height:"80px",width:"80px"},src:ar.content,"preview-src-list":[ar.content]},null,8,["src","preview-src-list"])]),createBaseVNode("td",null,[createVNode(ie,{size:"small",onClick:Ne=>de(ar.id,hr)},{default:withCtx(()=>[createTextVNode("保存")]),_:2},1032,["onClick"]),createVNode(ie,{size:"small",type:"danger",onClick:Ne=>oe(ar.id,hr)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])])]))),256))])])]),_:1})]),_:1})]),_:1})]),_:1}),_hoisted_9$1],64)}}}),elCascader="",elInput="",elPopper="",elTag="",elCascaderPanel="",elCheckbox="",elRadio="",elScrollbar="",elDialog="",elOverlay="",elCollapse="",elUpload="",elProgress="",elIcon="",elSwitch="",elCollapseItem="",elOption="",elOptionGroup="",elSelect="",elCheckboxGroup="",elTransfer="",elBadge="",elMessage="",_hoisted_1$1={style:{"margin-bottom":"1%"}},_hoisted_2$1=createBaseVNode("label",{style:{"font-size":"18px","margin-right":"3%"}},"启用模块",-1),_hoisted_3$1=createBaseVNode("span",{style:{color:"red"}},"*撤回机器人需要管理员权限，私信需要与机器人为好友",-1),_hoisted_4$1=createBaseVNode("span",{style:{color:"red"}},"*用户微博人脸识别",-1),_hoisted_5$1=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔",-1),_hoisted_6=createBaseVNode("span",{style:{color:"red"}},"*当【关注用户】发的微博文案中含有这些词汇时监听生效",-1),_hoisted_7=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_8=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_9=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_10=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_11=createBaseVNode("span",{style:{color:"red"}},"*IM账号和token可点此登录口袋后自动获取",-1),_hoisted_12=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_13=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_14=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_15=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_16=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_17=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_18=createBaseVNode("span",{style:{color:"red"}},"*上传人脸轮廓清晰的图片",-1),_hoisted_19=createBaseVNode("span",{style:{color:"red"}},"*直接保存(非双胞胎建议80，双胞胎建议70)",-1),_hoisted_20=createBaseVNode("span",{style:{color:"red"}},"*超过该值，但未超过上面的值，将加入审核列表，审核通过才会保存",-1),_hoisted_21=createBaseVNode("span",{style:{color:"red"}},"*启用会将图片自动上传到阿里云盘相册",-1),_hoisted_22={key:0,style:{width:"95%","margin-top":"5px"}},_hoisted_23=createBaseVNode("span",null,"未查询到小偶像，检查名称等后重新查询或者自行通过下方地址获取小偶像信息填入：",-1),_hoisted_24={style:{"word-break":"break-all"}},_sfc_main$2=defineComponent({__name:"Config",setup(t){const r=ref([]),e=ref([]),n=ref([]),o=ref([]),i=ref(!1),a=ref({show:!1,group:[],name:"",loading:!1,url:""}),s=ref({qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}),u=ref(),c=ref({QQ:{group:"",funcEnable:"",funcEnable1:[],funcAdmin:"",funcAdmin1:[],funcUser:"",funcUser1:[],admin:"",notice:!1,permission:"",sensitive:"",action:"",actions:Array(),debug:!1,gptKey:""},WB:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1,cg:"",keyword:""},BZ:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},KD:{name:"",sec:60,hasSend:!1,area:"86",code:"",phone:"",group:"",forwardGroup:!1,token:"",account:"",serverId:"",qq:"",forwardQQ:!1,liveRoomId:"",msgType:""},XHS:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},DY:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},BD:{appKey:"",appSeret:"",faceVerify:!1,imageList:"",imageList1:new Array,similarity:0,saveAliyunDisk:!1,audit:0,albumName:""}}),d=ref({input:[{required:!0,message:"请输入该值",trigger:"blur"}],imageList1:[{required:!0,validator:(de,oe,he)=>{c.value.BD.faceVerify&&c.value.BD.imageList1.length<=0&&he(new Error("请上传图片")),he()},trigger:["blur","change"]}],audit:[{required:!0,validator:(de,oe,he)=>{c.value.BD.faceVerify&&!oe&&he(new Error("请输入该值")),he()},trigger:["blur","change"]}],saveAliyunDisk:[{required:!0,validator:(de,oe,he)=>{c.value.BD.saveAliyunDisk&&!oe&&he(new Error("请输入该值")),he()},trigger:["blur","change"]}]});watch(e,(de,oe)=>{if(de.length<=0){c.value.QQ.funcEnable1=[];return}var he=de.filter(function(ie){return oe.indexOf(ie)===-1}).concat(oe.filter(function(ie){return de.indexOf(ie)===-1})),Ve=he[0];if(de.length>oe.length&&r.value.forEach(ie=>{if(ie.value==Ve&&!c.value.QQ.funcEnable1.some(Ie=>Ie.value==Ve)){c.value.QQ.funcEnable1.push(ie);return}}),de.length<oe.length){var le=-1;c.value.QQ.funcEnable1.forEach((ie,Ie)=>{if(ie.value==Ve){le=Ie;return}}),c.value.QQ.funcEnable1.splice(le,1)}}),onMounted(()=>{axios$1({url:"http://parkerbot.api/api/GetBaseConfig"}).then(de=>{for(let oe in s.value)for(let he of de.data.enable)if(he.key.toLowerCase()==oe){JSON.parse(he.value)?s.value[oe]=!0:s.value[oe]=!1;continue}o.value=JSON.parse(de.data.config.KD.msgTypeList),de.data.config.QQ.funcEnable1=de.data.config.QQ.funcEnable?JSON.parse(de.data.config.QQ.funcEnable):new Array,de.data.config.QQ.funcAdmin1=de.data.config.QQ.funcAdmin?de.data.config.QQ.funcAdmin.split(","):[],de.data.config.QQ.funcUser1=de.data.config.QQ.funcUser?de.data.config.QQ.funcUser.split(","):[],c.value=de.data.config,c.value.QQ.actions=c.value.QQ.action===""?[]:c.value.QQ.action.split(","),c.value.KD.area="86",e.value=de.data.config.QQ.funcEnable1.map(oe=>oe.value),n.value=c.value.KD.msgType?c.value.KD.msgType.split(","):[]}),axios$1({url:"http://parkerbot.api/api/GetQQFun"}).then(de=>{r.value=de.data})});const m=()=>{history.go(-1)},v=async de=>{de&&await de.validate((oe,he)=>{if(oe){c.value.BD.imageList=c.value.BD.imageList1.map(ie=>ie.url).toString(),c.value.QQ.action=c.value.QQ.actions.toString(),c.value.QQ.funcEnable=JSON.stringify(c.value.QQ.funcEnable1);var Ve=c.value.QQ.funcEnable1.map(ie=>ie.value),le=Ve.filter(function(ie){return c.value.QQ.funcUser.indexOf(ie)==-1});c.value.QQ.funcAdmin=le.toString(),c.value.QQ.funcUser=c.value.QQ.funcUser1.toString(),c.value.KD.msgType=n.value.toString(),console.log(c.value.QQ),axios$1({url:"http://parkerbot.api/api/SetConfig",method:"post",data:{config:c.value,enable:s.value}}).then(ie=>{ie.data?ElMessage({message:"修改成功",type:"success"}):ElMessage({message:"修改失败，请重试。如果连续失败，请联系作者！",type:"error"})})}else return ElMessage({message:"请检查配置信息是否均已填写完成",type:"warning"}),!1})},g=()=>{a.value.loading=!1,a.value.show=!1,a.value.name="",a.value.url="",a.value.group=[],i.value=!1,c.value.KD.hasSend=!1,c.value.KD.sec=60},b=()=>{if(!c.value.KD.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}var de=/^1[3456789]\d{9}$/;if(de.test(c.value.KD.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}c.value.KD.hasSend=!0,_(),axios$1({url:"https://pocketapi.48.cn/user/api/v1/sms/send2",method:"post",headers:V(""),responseType:"json",timeout:18e4,data:{mobile:c.value.KD.phone,area:c.value.KD.area}}).then(oe=>{oe.data.success&&ElMessage({message:"发送成功，请注意查收！",type:"success"})})},T=()=>{if(!c.value.KD.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}if(!c.value.KD.code){ElMessage({message:"请输入验证码！",type:"warning"});return}var de=/^1[3456789]\d{9}$/;if(de.test(c.value.KD.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}axios$1({url:"https://pocketapi.48.cn/user/api/v1/login/app/mobile/code",method:"post",headers:V(""),responseType:"json",timeout:18e4,data:{mobile:c.value.KD.phone,code:c.value.KD.code}}).then(oe=>{axios$1({url:"https://pocketapi.48.cn/im/api/v1/im/userinfo",method:"post",headers:V(oe.data.content.token),responseType:"json",timeout:18e4}).then(he=>{c.value.KD.token=he.data.content.pwd,c.value.KD.account=he.data.content.accid,setTimeout(()=>{g()},1e3)})})},_=()=>{c.value.KD.sec=60;let de;de=setInterval(()=>{c.value.KD.sec>0?c.value.KD.sec--:(clearInterval(de),c.value.KD.sec=60,c.value.KD.hasSend=!1)},1e3)},y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(de){var oe=Math.random()*16|0,he=de=="x"?oe:oe&3|8;return he.toString(16)})},O=function(de){const oe="QWERTYUIOPASDFGHJKLZXCVBNM1234567890";let he="";for(let Ve=0;Ve<de;Ve++){const le=Math.floor(Math.random()*oe.length);he+=oe[le]}return he},V=function(de){var oe={pa:y(),"Content-Type":"application/json;charset=utf-8",appInfo:JSON.stringify({vendor:"apple",deviceId:`${O(8)}-${O(4)}-${O(4)}-${O(4)}-${O(12)}`,appVersion:"6.2.2",appBuild:"21080401",osVersion:"11.4.1",osType:"ios",deviceName:"iPhone XR",os:"ios"}),"Accept-Language":"zh-Hans-AW;q=1",token:""};return de&&(oe.token=de),oe},Ce=de=>{c.value.BD.imageList1.push(de)},ae=de=>{var oe=-1;c.value.BD.imageList1.forEach((he,Ve)=>{if(he.name===de.name){oe=Ve;return}}),oe>=0&&c.value.BD.imageList1.splice(oe,1)},Fe=ref([{label:"SNH48",value:"SNH48",children:[{value:"TEAM SII",label:"TEAM SII"},{value:"TEAM HII",label:"TEAM HII"},{value:"TEAM X",label:"TEAM X"}]},{label:"GNZ48",value:"GNZ48",children:[{value:"TEAM G",label:"TEAM G"},{value:"TEAM NIII",label:"TEAM NIII"},{value:"TEAM Z",label:"TEAM Z"},{value:"TEAM CII",label:"TEAM CII"}]},{label:"CGT48",value:"CGT48",children:[{value:"TEAM GII",label:"TEAM GII"}]},{label:"BEJ48",value:"BEJ48",children:[{value:"TEAM B",label:"TEAM B"},{value:"TEAM E",label:"TEAM E"}]},{label:"CKG48",value:"CKG48"}]),_e=async()=>{if(!a.value.name){ElMessage({message:"请输入小偶像姓名",type:"error"});return}a.value.loading=!0;var de=await axios$1({url:"http://parkerbot.api/api/getxox?group="+a.value.group.toString()+"&name="+a.value.name}).catch(()=>{a.value.loading=!1});if(de.data.success){var oe=de.data.data;c.value.KD.name=oe.name,c.value.KD.liveRoomId=oe.liveId,c.value.KD.serverId=oe.serverId,g()}else a.value.url=de.data.data;a.value.loading=!1};return(de,oe)=>{const he=ElButton,Ve=ElHeader,le=ElCheckbox,ie=ElInput,Ie=ElFormItem,pe=ElCol,kt=ElCheckboxGroup,Ue=ElTransfer,Dt=ElOption,tr=ElSelect,dr=ElCollapseItem,pr=ElSwitch,ar=ElIcon,hr=ElUpload,Ne=ElForm,nr=ElCollapse,sr=ElMain,$e=ElContainer,er=ElDialog,or=ElCascader;return openBlock(),createElementBlock(Fragment,null,[createVNode($e,null,{default:withCtx(()=>[createVNode(Ve,null,{default:withCtx(()=>[createVNode(he,{type:"primary","native-type":"button",icon:unref(arrow_left_default),onClick:m},{default:withCtx(()=>[createTextVNode("返回")]),_:1},8,["icon"]),createVNode(he,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:oe[0]||(oe[0]=ze=>v(u.value))},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"])]),_:1}),createVNode(sr,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[_hoisted_2$1,createVNode(le,{modelValue:s.value.qq,"onUpdate:modelValue":oe[1]||(oe[1]=ze=>s.value.qq=ze),label:"QQ"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.wb,"onUpdate:modelValue":oe[2]||(oe[2]=ze=>s.value.wb=ze),label:"微博"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.bz,"onUpdate:modelValue":oe[3]||(oe[3]=ze=>s.value.bz=ze),label:"B站"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.kd,"onUpdate:modelValue":oe[4]||(oe[4]=ze=>s.value.kd=ze),label:"口袋48"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.xhs,"onUpdate:modelValue":oe[5]||(oe[5]=ze=>s.value.xhs=ze),label:"小红书"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.dy,"onUpdate:modelValue":oe[6]||(oe[6]=ze=>s.value.dy=ze),label:"抖音"},null,8,["modelValue"]),createVNode(le,{modelValue:s.value.bd,"onUpdate:modelValue":oe[7]||(oe[7]=ze=>s.value.bd=ze),label:"百度"},null,8,["modelValue"])]),createVNode(nr,null,{default:withCtx(()=>[createVNode(Ne,{ref_key:"form",ref:u,model:c.value,"label-width":"100px"},{default:withCtx(()=>[s.value.qq?(openBlock(),createBlock(dr,{key:0,title:"QQ",name:"qq"},{default:withCtx(()=>[createVNode(Ie,{label:"QQ群",prop:"QQ.group",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.QQ.group,"onUpdate:modelValue":oe[8]||(oe[8]=ze=>c.value.QQ.group=ze),placeholder:"多个用英文逗号,分隔；不填写则qq机器人所在的全部群开启，填写则针对填写的群开启"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"超级管理员",prop:"QQ.admin",rules:d.value.input},{default:withCtx(()=>[createVNode(pe,{span:16},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.QQ.admin,"onUpdate:modelValue":oe[9]||(oe[9]=ze=>c.value.QQ.admin=ze),placeholder:"仅支持配置一个账号"},null,8,["modelValue"])]),_:1}),createVNode(pe,{span:3,style:{"margin-left":"2%"}},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.notice,"onUpdate:modelValue":oe[10]||(oe[10]=ze=>c.value.QQ.notice=ze),label:"开启消息通知"},null,8,["modelValue"])]),_:1}),createVNode(pe,{span:3,style:{"margin-left":"2%"}},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.debug,"onUpdate:modelValue":oe[11]||(oe[11]=ze=>c.value.QQ.debug=ze),label:"开启程序错误通知"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"]),createVNode(Ie,{label:"管理员"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.QQ.permission,"onUpdate:modelValue":oe[12]||(oe[12]=ze=>c.value.QQ.permission=ze),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"])]),_:1}),createVNode(Ie,{label:"启用功能"},{default:withCtx(()=>[createVNode(kt,{modelValue:e.value,"onUpdate:modelValue":oe[13]||(oe[13]=ze=>e.value=ze)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,ze=>(openBlock(),createBlock(le,{label:ze.value,key:ze.id},{default:withCtx(()=>[createTextVNode(toDisplayString(ze.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(Ie,{label:"功能分类"},{default:withCtx(()=>[createVNode(Ue,{modelValue:c.value.QQ.funcUser1,"onUpdate:modelValue":oe[14]||(oe[14]=ze=>c.value.QQ.funcUser1=ze),data:c.value.QQ.funcEnable1,titles:["管理员","普通用户"],props:{key:"value",label:"name"}},null,8,["modelValue","data"])]),_:1}),createVNode(Ie,{label:"敏感词"},{default:withCtx(()=>[createVNode(ie,{type:"textarea",modelValue:c.value.QQ.sensitive,"onUpdate:modelValue":oe[15]||(oe[15]=ze=>c.value.QQ.sensitive=ze),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"])]),_:1}),createVNode(Ie,{label:"敏感词操作"},{default:withCtx(()=>[createVNode(tr,{modelValue:c.value.QQ.actions,"onUpdate:modelValue":oe[16]||(oe[16]=ze=>c.value.QQ.actions=ze),multiple:"",placeholder:"请选择","collapse-tags":"",style:{width:"30%"}},{default:withCtx(()=>[createVNode(Dt,{label:"群内提示",value:"1"}),createVNode(Dt,{label:"私信群管理员",value:"2"}),createVNode(Dt,{label:"私信机器人管理员",value:"3"}),createVNode(Dt,{label:"私信机器人超管",value:"4"}),createVNode(Dt,{label:"撤回",value:"5"})]),_:1},8,["modelValue"]),_hoisted_3$1]),_:1}),createVNode(Ie,{label:"ChatGpt密钥"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.QQ.gptKey,"onUpdate:modelValue":oe[17]||(oe[17]=ze=>c.value.QQ.gptKey=ze),placeholder:"启用【问答功能时需要提供】"},null,8,["modelValue"])]),_:1})]),_:1})):createCommentVNode("",!0),s.value.wb?(openBlock(),createBlock(dr,{key:1,title:"微博",name:"wb"},{default:withCtx(()=>[createVNode(Ie,{label:"主要用户",prop:"WB.url",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.WB.url,"onUpdate:modelValue":oe[18]||(oe[18]=ze=>c.value.WB.url=ze),placeholder:"多个用英文,分隔"},null,8,["modelValue"]),_hoisted_4$1]),_:1},8,["rules"]),s.value.qq?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(Ie,{label:"关注用户"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.WB.cg,"onUpdate:modelValue":oe[19]||(oe[19]=ze=>c.value.WB.cg=ze),placeholder:"多个用英文,分隔"},null,8,["modelValue"]),_hoisted_5$1]),_:1}),createVNode(Ie,{label:"微博关键词"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.WB.keyword,"onUpdate:modelValue":oe[20]||(oe[20]=ze=>c.value.WB.keyword=ze),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"]),_hoisted_6]),_:1})],64)):createCommentVNode("",!0),createVNode(Ie,{label:"监听间隔",prop:"WB.timeSpan",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.WB.timeSpan,"onUpdate:modelValue":oe[21]||(oe[21]=ze=>c.value.WB.timeSpan=ze),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.WB.forwardGroup,"onUpdate:modelValue":oe[22]||(oe[22]=ze=>c.value.WB.forwardGroup=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq群"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.WB.group,"onUpdate:modelValue":oe[23]||(oe[23]=ze=>c.value.WB.group=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_7]),_:1},512),[[vShow,c.value.WB.forwardGroup===!0]]),createVNode(Ie,{label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.WB.forwardQQ,"onUpdate:modelValue":oe[24]||(oe[24]=ze=>c.value.WB.forwardQQ=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq好友"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.WB.qq,"onUpdate:modelValue":oe[25]||(oe[25]=ze=>c.value.WB.qq=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_8]),_:1},512),[[vShow,c.value.WB.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),s.value.bz?(openBlock(),createBlock(dr,{key:2,title:"B站",name:"bz"},{default:withCtx(()=>[createVNode(Ie,{label:"用户ID",prop:"BZ.url",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BZ.url,"onUpdate:modelValue":oe[26]||(oe[26]=ze=>c.value.BZ.url=ze),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"监听间隔",prop:"BZ.timeSpan",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.BZ.timeSpan,"onUpdate:modelValue":oe[27]||(oe[27]=ze=>c.value.BZ.timeSpan=ze),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BZ.forwardGroup,"onUpdate:modelValue":oe[28]||(oe[28]=ze=>c.value.BZ.forwardGroup=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq群"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BZ.group,"onUpdate:modelValue":oe[29]||(oe[29]=ze=>c.value.BZ.group=ze),placeholder:"发新动态转发消息"},null,8,["modelValue"]),_hoisted_9]),_:1},512),[[vShow,c.value.BZ.forwardGroup===!0]]),createVNode(Ie,{label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BZ.forwardQQ,"onUpdate:modelValue":oe[30]||(oe[30]=ze=>c.value.BZ.forwardQQ=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq好友"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BZ.qq,"onUpdate:modelValue":oe[31]||(oe[31]=ze=>c.value.BZ.qq=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_10]),_:1},512),[[vShow,c.value.BZ.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),s.value.kd?(openBlock(),createBlock(dr,{key:3,title:"口袋48",name:"kd"},{default:withCtx(()=>[createVNode(Ie,{label:"姓名",prop:"KD.name",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.name,"onUpdate:modelValue":oe[32]||(oe[32]=ze=>c.value.KD.name=ze)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"IMServerId",prop:"KD.serverId",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.serverId,"onUpdate:modelValue":oe[33]||(oe[33]=ze=>c.value.KD.serverId=ze)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"直播房间Id",prop:"KD.liveRoomId",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.liveRoomId,"onUpdate:modelValue":oe[34]||(oe[34]=ze=>c.value.KD.liveRoomId=ze)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,null,{default:withCtx(()=>[createVNode(he,{onClick:oe[35]||(oe[35]=ze=>a.value.show=!0)},{default:withCtx(()=>[createTextVNode("查询小偶像信息")]),_:1})]),_:1}),createVNode(Ie,{label:"IM账号",prop:"KD.account",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.account,"onUpdate:modelValue":oe[36]||(oe[36]=ze=>c.value.KD.account=ze)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"IMtoken",prop:"KD.token",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.token,"onUpdate:modelValue":oe[37]||(oe[37]=ze=>c.value.KD.token=ze)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,null,{default:withCtx(()=>[createVNode(he,{onClick:oe[38]||(oe[38]=ze=>i.value=!0)},{default:withCtx(()=>[createTextVNode("登录口袋48")]),_:1}),_hoisted_11]),_:1}),createVNode(Ie,{label:"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.KD.forwardGroup,"onUpdate:modelValue":oe[39]||(oe[39]=ze=>c.value.KD.forwardGroup=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq群"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.group,"onUpdate:modelValue":oe[40]||(oe[40]=ze=>c.value.KD.group=ze),placeholder:"发新消息转发消息"},null,8,["modelValue"]),_hoisted_12]),_:1},512),[[vShow,c.value.KD.forwardGroup===!0]]),createVNode(Ie,{label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.KD.forwardQQ,"onUpdate:modelValue":oe[41]||(oe[41]=ze=>c.value.KD.forwardQQ=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq好友"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.qq,"onUpdate:modelValue":oe[42]||(oe[42]=ze=>c.value.KD.qq=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_13]),_:1},512),[[vShow,c.value.KD.forwardQQ===!0]]),withDirectives(createVNode(Ie,{label:"监听消息类型"},{default:withCtx(()=>[createVNode(kt,{modelValue:n.value,"onUpdate:modelValue":oe[43]||(oe[43]=ze=>n.value=ze)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(ze,rr)=>(openBlock(),createBlock(le,{label:ze.value,key:rr},{default:withCtx(()=>[createTextVNode(toDisplayString(ze.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[vShow,c.value.KD.forwardGroup===!0||c.value.KD.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),s.value.xhs?(openBlock(),createBlock(dr,{key:4,title:"小红书",name:"xhs"},{default:withCtx(()=>[createVNode(Ie,{label:"用户ID",prop:"XHS.url",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.XHS.url,"onUpdate:modelValue":oe[44]||(oe[44]=ze=>c.value.XHS.url=ze),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"监听时长",prop:"XHS.timeSpan",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.XHS.timeSpan,"onUpdate:modelValue":oe[45]||(oe[45]=ze=>c.value.XHS.timeSpan=ze),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.XHS.forwardGroup,"onUpdate:modelValue":oe[46]||(oe[46]=ze=>c.value.XHS.forwardGroup=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq群"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.XHS.group,"onUpdate:modelValue":oe[47]||(oe[47]=ze=>c.value.XHS.group=ze),placeholder:"发新动态转发消息"},null,8,["modelValue"]),_hoisted_14]),_:1},512),[[vShow,c.value.XHS.forwardGroup===!0]]),createVNode(Ie,{label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.XHS.forwardQQ,"onUpdate:modelValue":oe[48]||(oe[48]=ze=>c.value.XHS.forwardQQ=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq好友"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.XHS.qq,"onUpdate:modelValue":oe[49]||(oe[49]=ze=>c.value.XHS.qq=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_15]),_:1},512),[[vShow,c.value.XHS.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),s.value.dy?(openBlock(),createBlock(dr,{key:5,title:"抖音",name:"dy"},{default:withCtx(()=>[createVNode(Ie,{label:"用户ID",prop:"DY.url",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.DY.url,"onUpdate:modelValue":oe[50]||(oe[50]=ze=>c.value.DY.url=ze),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"监听时长",prop:"DY.timeSpan",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.DY.timeSpan,"onUpdate:modelValue":oe[51]||(oe[51]=ze=>c.value.DY.timeSpan=ze),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.DY.forwardGroup,"onUpdate:modelValue":oe[52]||(oe[52]=ze=>c.value.DY.forwardGroup=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq群"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.DY.group,"onUpdate:modelValue":oe[53]||(oe[53]=ze=>c.value.DY.group=ze),placeholder:"发新抖音转发消息"},null,8,["modelValue"]),_hoisted_16]),_:1},512),[[vShow,c.value.DY.forwardGroup===!0]]),createVNode(Ie,{label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.DY.forwardQQ,"onUpdate:modelValue":oe[54]||(oe[54]=ze=>c.value.DY.forwardQQ=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"qq好友"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.DY.qq,"onUpdate:modelValue":oe[55]||(oe[55]=ze=>c.value.DY.qq=ze),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_17]),_:1},512),[[vShow,c.value.DY.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),s.value.bd?(openBlock(),createBlock(dr,{key:6,title:"百度",name:"bd"},{default:withCtx(()=>[createVNode(Ie,{label:"apiKey",prop:"BD.appKey",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BD.appKey,"onUpdate:modelValue":oe[56]||(oe[56]=ze=>c.value.BD.appKey=ze),placeholder:"百度appKey"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"appSeret",prop:"BD.appSeret",rules:d.value.input},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BD.appSeret,"onUpdate:modelValue":oe[57]||(oe[57]=ze=>c.value.BD.appSeret=ze),placeholder:"百度appSeret"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(Ie,{label:"开启人脸验证"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BD.faceVerify,"onUpdate:modelValue":oe[58]||(oe[58]=ze=>c.value.BD.faceVerify=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(Ie,{label:"基础人脸",prop:"BD.imageList1",rules:d.value.imageList1},{default:withCtx(()=>[createVNode(hr,{"file-list":c.value.BD.imageList1,action:"http://parkerbot.api/api/upload","on-success":Ce,"on-remove":ae,"list-type":"picture-card",limit:3,accept:".jpg,.png,.jpeg"},{default:withCtx(()=>[createVNode(ar,null,{default:withCtx(()=>[createVNode(unref(plus_default))]),_:1})]),_:1},8,["file-list"]),_hoisted_18]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(Ie,{label:"人脸相似度",prop:"BD.similarity",rules:d.value.audit},{default:withCtx(()=>[createVNode(pe,{span:8},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.BD.similarity,"onUpdate:modelValue":oe[59]||(oe[59]=ze=>c.value.BD.similarity=ze)},null,8,["modelValue"])]),_:1}),_hoisted_19]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(Ie,{label:"审核相似度",prop:"BD.audit",rules:d.value.audit},{default:withCtx(()=>[createVNode(pe,{span:8},{default:withCtx(()=>[createVNode(ie,{type:"number",modelValue:c.value.BD.audit,"onUpdate:modelValue":oe[60]||(oe[60]=ze=>c.value.BD.audit=ze)},null,8,["modelValue"])]),_:1}),_hoisted_20]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(Ie,{label:"上传云盘"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BD.saveAliyunDisk,"onUpdate:modelValue":oe[61]||(oe[61]=ze=>c.value.BD.saveAliyunDisk=ze),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),_hoisted_21]),_:1},512),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(Ie,{label:"相册名称",prop:"BD.albumName",rules:d.value.saveAliyunDisk},{default:withCtx(()=>[createVNode(pe,{span:8},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.BD.albumName,"onUpdate:modelValue":oe[62]||(oe[62]=ze=>c.value.BD.albumName=ze)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"]),[[vShow,c.value.BD.saveAliyunDisk]])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),createVNode(er,{title:"登录口袋48",modelValue:i.value,"onUpdate:modelValue":oe[65]||(oe[65]=ze=>i.value=ze),"before-close":g,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(Ne,{"label-width":"100px"},{default:withCtx(()=>[createVNode(Ie,{label:"手机号",required:"",class:"mt-4"},{default:withCtx(()=>[createVNode(ie,{modelValue:c.value.KD.phone,"onUpdate:modelValue":oe[63]||(oe[63]=ze=>c.value.KD.phone=ze),style:{width:"95%"}},{prepend:withCtx(()=>[createTextVNode("+"+toDisplayString(c.value.KD.area),1)]),_:1},8,["modelValue"])]),_:1}),createVNode(Ie,{label:"验证码",required:""},{default:withCtx(()=>[createVNode(ie,{type:"primary",modelValue:c.value.KD.code,"onUpdate:modelValue":oe[64]||(oe[64]=ze=>c.value.KD.code=ze),style:{width:"65%"}},null,8,["modelValue"]),withDirectives(createVNode(he,{style:{width:"25%","margin-left":"5%"},onClick:b},{default:withCtx(()=>[createTextVNode("发送验证码")]),_:1},512),[[vShow,!c.value.KD.hasSend]]),withDirectives(createVNode(he,{style:{width:"25%","margin-left":"5%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(c.value.KD.sec)+"秒",1)]),_:1},512),[[vShow,c.value.KD.hasSend]])]),_:1}),createVNode(Ie,null,{default:withCtx(()=>[createVNode(he,{type:"primary",onClick:T},{default:withCtx(()=>[createTextVNode("登录")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),createVNode(er,{title:"查询小偶像 ",modelValue:a.value.show,"onUpdate:modelValue":oe[68]||(oe[68]=ze=>a.value.show=ze),"before-close":g,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(Ne,{"label-width":"100px"},{default:withCtx(()=>[createVNode(Ie,{label:"队伍",class:"mt-4"},{default:withCtx(()=>[createVNode(or,{props:{expandTrigger:"hover",checkStrictly:"true"},placeholder:"请选择",modelValue:a.value.group,"onUpdate:modelValue":oe[66]||(oe[66]=ze=>a.value.group=ze),options:Fe.value,style:{width:"95%"}},null,8,["modelValue","options"])]),_:1}),createVNode(Ie,{label:"姓名",required:""},{default:withCtx(()=>[createVNode(ie,{modelValue:a.value.name,"onUpdate:modelValue":oe[67]||(oe[67]=ze=>a.value.name=ze),style:{width:"95%"}},null,8,["modelValue"])]),_:1}),createVNode(Ie,null,{default:withCtx(()=>[createVNode(he,{type:"primary",loading:a.value.loading,onClick:_e},{default:withCtx(()=>[createTextVNode("查询")]),_:1},8,["loading"])]),_:1}),a.value.url?(openBlock(),createElementBlock("div",_hoisted_22,[_hoisted_23,createBaseVNode("div",_hoisted_24,toDisplayString(a.value.url),1)])):createCommentVNode("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),_hoisted_1=createBaseVNode("span",null,"配置正确目录后下方内容可以通过上方【获取配置】按钮获取。",-1),_hoisted_2=createBaseVNode("div",null,"具体配置教学由于网上很多此处不再赘述，下面提供几个教学地址：",-1),_hoisted_3=createBaseVNode("div",null,[createTextVNode("1、GitHub："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://sinoahpx.github.io/Mirai.Net.Documents/#/?id=mirainet-文档"),createTextVNode(" 通常来说你只用看到开始使用-快速开始-安装mirai环境即可，如果想了解什么是mirai可以看开始使用-基础知识-mirai生态 ")],-1),_hoisted_4=createBaseVNode("div",null,[createTextVNode("2、CSDN博客："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://blog.csdn.net/qq_30141543/article/details/125576220")],-1),_hoisted_5=createBaseVNode("div",null,[createTextVNode("3、哔哩哔哩："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://www.bilibili.com/video/BV1eb4y1k7uX/")],-1),_sfc_main$1=defineComponent({__name:"Mirai",setup(t){const r=ref(),e=ref({useMirai:!1,path:"",address:"",qq:"",verifyKey:""});onMounted(()=>{axios$1({url:"http://parkerbot.api/api/GetMiraiConfig"}).then(a=>{e.value=a.data})});const n=function(){axios$1({url:"http://parkerbot.api/api/getMiraiFile"}).then(a=>{a.data==!1?ElMessage({showClose:!0,message:"目录不存在或路径错误，请检查后重试！",type:"error"}):(e.value.address=a.data.address,e.value.verifyKey=a.data.verifyKey,ElMessage({showClose:!0,message:"获取成功！",type:"success"}))})},o=()=>{history.go(-1)},i=async a=>{a&&await a.validate((s,u)=>{s&&axios$1({url:"http://parkerbot.api/api/setMiraiconfig",method:"post",data:e.value}).then(c=>{if(c.data)ElMessage({showClose:!0,message:"保存成功",type:"success"});else return ElMessage({message:"修改失败，请重试。如果连续失败，请联系作者！",type:"error"}),!1})})};return(a,s)=>{const u=ElButton,c=ElHeader,d=ElSwitch,m=ElFormItem,v=ElInput,g=ElForm,b=ElMain,T=ElFooter,_=ElContainer;return openBlock(),createBlock(_,null,{default:withCtx(()=>[createVNode(c,null,{default:withCtx(()=>[createVNode(u,{type:"primary","native-type":"button",icon:unref(arrow_left_default),onClick:o},{default:withCtx(()=>[createTextVNode("返回")]),_:1},8,["icon"]),createVNode(u,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:s[0]||(s[0]=y=>i(r.value))},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"])]),_:1}),createVNode(b,null,{default:withCtx(()=>[createVNode(g,{ref_key:"miraiForm",ref:r,model:e.value,"label-width":"120px"},{default:withCtx(()=>[createVNode(m,{label:"启用机器人",prop:"useMirai"},{default:withCtx(()=>[createVNode(d,{modelValue:e.value.useMirai,"onUpdate:modelValue":s[1]||(s[1]=y=>e.value.useMirai=y),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),e.value.useMirai?(openBlock(),createBlock(m,{key:0,label:"qq",prop:"qq"},{default:withCtx(()=>[createVNode(v,{modelValue:e.value.qq,"onUpdate:modelValue":s[2]||(s[2]=y=>e.value.qq=y)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),e.value.useMirai?(openBlock(),createBlock(m,{key:1,label:"mirai根目录",prop:"path"},{default:withCtx(()=>[createVNode(v,{modelValue:e.value.path,"onUpdate:modelValue":s[3]||(s[3]=y=>e.value.path=y),style:{width:"87%"}},null,8,["modelValue"]),createVNode(u,{onClick:n,"native-type":"button",type:"primary"},{default:withCtx(()=>[createTextVNode("获取配置")]),_:1})]),_:1})):createCommentVNode("",!0),e.value.useMirai?(openBlock(),createBlock(m,{key:2,label:"Tips："},{default:withCtx(()=>[_hoisted_1]),_:1})):createCommentVNode("",!0),e.value.useMirai?(openBlock(),createBlock(m,{key:3,label:"地址",prop:"address"},{default:withCtx(()=>[createVNode(v,{modelValue:e.value.address,"onUpdate:modelValue":s[4]||(s[4]=y=>e.value.address=y)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),e.value.useMirai?(openBlock(),createBlock(m,{key:4,label:"verifyKey",prop:"verifyKey"},{default:withCtx(()=>[createVNode(v,{modelValue:e.value.verifyKey,"onUpdate:modelValue":s[5]||(s[5]=y=>e.value.verifyKey=y)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model"])]),_:1}),createVNode(T,null,{default:withCtx(()=>[_hoisted_2,_hoisted_3,_hoisted_4,_hoisted_5]),_:1})]),_:1})}}}),router=createRouter({history:createWebHistory("/"),routes:[{path:"/",name:"home",component:_sfc_main$3},{path:"/mirai",name:"mirai",component:_sfc_main$1},{path:"/config",name:"config",component:_sfc_main$2}]}),_sfc_main=defineComponent({__name:"App",setup(t){return(r,e)=>(openBlock(),createBlock(unref(RouterView)))}}),app=createApp(_sfc_main);app.use(router);app.mount("#app")});export default YM();
