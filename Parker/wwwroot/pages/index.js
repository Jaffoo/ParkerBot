var GC=Object.defineProperty;var QC=(t,r,e)=>r in t?GC(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var JC=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var Bi=(t,r,e)=>(QC(t,typeof r!="symbol"?r+"":r,e),e);var YC=JC((exports,module)=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();function makeMap(t,r){const e=Object.create(null),n=t.split(",");for(let o=0;o<n.length;o++)e[n[o]]=!0;return r?o=>!!e[o.toLowerCase()]:o=>!!e[o]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$e.call(t,r),isArray$4=Array.isArray,isMap$2=t=>toTypeString(t)==="[object Map]",isSet$2=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$3=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol$1=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$2(t)&&isFunction$3(t.then)&&isFunction$3(t.catch),objectToString$1=Object.prototype.toString,toTypeString=t=>objectToString$1.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$1=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},looseToNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r},toNumber$1=t=>{const r=isString$2(t)?Number(t):NaN;return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$4(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],o=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(o)for(const s in o)r[s]=o[s]}return r}else{if(isString$2(t))return t;if(isObject$2(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$4(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}function normalizeProps(t){if(!t)return null;let{class:r,style:e}=t;return r&&!isString$2(r)&&(t.class=normalizeClass(r)),e&&(t.style=normalizeStyle(e)),t}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol$1(t),n=isSymbol$1(r),e||n)return t===r;if(e=isArray$4(t),n=isArray$4(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const o=Object.keys(t).length,s=Object.keys(r).length;if(o!==s)return!1;for(const a in t){const i=t.hasOwnProperty(a),d=r.hasOwnProperty(a);if(i&&!d||!i&&d||!looseEqual(t[a],r[a]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$4(t)||isObject$2(t)&&(t.toString===objectToString$1||!isFunction$3(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap$2(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,o])=>(e[`${n} =>`]=o,e),{})}:isSet$2(r)?{[`Set(${r.size})`]:[...r.values()]}:isObject$2(r)&&!isArray$4(r)&&!isPlainObject$1(r)?String(r):r;let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const r=new Set(t);return r.w=0,r.n=0,r},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const o=r[n];wasTracked(o)&&!newTracked(o)?o.delete(t):r[e++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}r.length=e}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let r=activeEffect,e=shouldTrack;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let o=n.get(e);o||n.set(e,o=createDep()),trackEffects(o)}}function trackEffects(t,r){let e=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,e=!wasTracked(t)):e=!t.has(activeEffect),e&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,r,e,n,o,s){const a=targetMap.get(t);if(!a)return;let i=[];if(r==="clear")i=[...a.values()];else if(e==="length"&&isArray$4(t)){const d=Number(n);a.forEach((u,c)=>{(c==="length"||c>=d)&&i.push(u)})}else switch(e!==void 0&&i.push(a.get(e)),r){case"add":isArray$4(t)?isIntegerKey(e)&&i.push(a.get("length")):(i.push(a.get(ITERATE_KEY)),isMap$2(t)&&i.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(t)||(i.push(a.get(ITERATE_KEY)),isMap$2(t)&&i.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(t)&&i.push(a.get(ITERATE_KEY));break}if(i.length===1)i[0]&&triggerEffects(i[0]);else{const d=[];for(const u of i)u&&d.push(...u);triggerEffects(createDep(d))}}function triggerEffects(t,r){const e=isArray$4(t)?t:[...t];for(const n of e)n.computed&&triggerEffect(n);for(const n of e)n.computed||triggerEffect(n)}function triggerEffect(t,r){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function getDepFromReactive(t,r){var e;return(e=targetMap.get(t))==null?void 0:e.get(r)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let s=0,a=this.length;s<a;s++)track(n,"get",s+"");const o=n[r](...e);return o===-1||o===!1?n[r](...e.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking();const n=toRaw(this)[r].apply(this,e);return resetTracking(),n}}),t}function hasOwnProperty$d(t){const r=toRaw(this);return track(r,"has",t),r.hasOwnProperty(t)}function createGetter(t=!1,r=!1){return function(n,o,s){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return r;if(o==="__v_raw"&&s===(t?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(n))return n;const a=isArray$4(n);if(!t){if(a&&hasOwn(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,s);if(o==="hasOwnProperty")return hasOwnProperty$d}const i=Reflect.get(n,o,s);return(isSymbol$1(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(t||track(n,"get",o),r)?i:isRef(i)?a&&isIntegerKey(o)?i:i.value:isObject$2(i)?t?readonly(i):reactive(i):i}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(e,n,o,s){let a=e[n];if(isReadonly(a)&&isRef(a)&&!isRef(o))return!1;if(!t&&(!isShallow(o)&&!isReadonly(o)&&(a=toRaw(a),o=toRaw(o)),!isArray$4(e)&&isRef(a)&&!isRef(o)))return a.value=o,!0;const i=isArray$4(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),d=Reflect.set(e,n,o,s);return e===toRaw(s)&&(i?hasChanged(o,a)&&trigger(e,"set",n,o):trigger(e,"add",n,o)),d}}function deleteProperty(t,r){const e=hasOwn(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&e&&trigger(t,"delete",r,void 0),n}function has$1(t,r){const e=Reflect.has(t,r);return(!isSymbol$1(r)||!builtInSymbols.has(r))&&track(t,"has",r),e}function ownKeys(t){return track(t,"iterate",isArray$4(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(t,r){return!0},deleteProperty(t,r){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$2(t,r,e=!1,n=!1){t=t.__v_raw;const o=toRaw(t),s=toRaw(r);e||(r!==s&&track(o,"get",r),track(o,"get",s));const{has:a}=getProto(o),i=n?toShallow:e?toReadonly:toReactive;if(a.call(o,r))return i(t.get(r));if(a.call(o,s))return i(t.get(s));t!==o&&t.get(r)}function has(t,r=!1){const e=this.__v_raw,n=toRaw(e),o=toRaw(t);return r||(t!==o&&track(n,"has",t),track(n,"has",o)),t===o?e.has(t):e.has(t)||e.has(o)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$2(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:o}=getProto(e);let s=n.call(e,t);s||(t=toRaw(t),s=n.call(e,t));const a=o.call(e,t);return e.set(t,r),s?hasChanged(r,a)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let o=e.call(r,t);o||(t=toRaw(t),o=e.call(r,t)),n&&n.call(r,t);const s=r.delete(t);return o&&trigger(r,"delete",t,void 0),s}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,o){const s=this,a=s.__v_raw,i=toRaw(a),d=r?toShallow:t?toReadonly:toReactive;return!t&&track(i,"iterate",ITERATE_KEY),a.forEach((u,c)=>n.call(o,d(u),d(c),s))}}function createIterableMethod(t,r,e){return function(...n){const o=this.__v_raw,s=toRaw(o),a=isMap$2(s),i=t==="entries"||t===Symbol.iterator&&a,d=t==="keys"&&a,u=o[t](...n),c=e?toShallow:r?toReadonly:toReactive;return!r&&track(s,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:m,done:v}=u.next();return v?{value:m,done:v}:{value:i?[c(m[0]),c(m[1])]:c(m),done:v}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(s){return get$2(this,s)},get size(){return size(this)},has,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(s){return get$2(this,s,!1,!0)},get size(){return size(this)},has,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(s){return get$2(this,s,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(s){return get$2(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=createIterableMethod(s,!1,!1),e[s]=createIterableMethod(s,!0,!1),r[s]=createIterableMethod(s,!1,!0),n[s]=createIterableMethod(s,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,o,s)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?n:Reflect.get(hasOwn(e,o)&&o in n?e:n,o,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,r,e,n,o){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const s=o.get(t);if(s)return s;const a=getTargetType(t);if(a===0)return t;const i=new Proxy(t,a===2?n:e);return o.set(t,i),i}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,r){t=toRaw(t);const e=t.dep;e&&triggerEffects(e)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this))}}function triggerRef(t){triggerRefValue(t)}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const o=t[r];return isRef(o)&&!isRef(e)?(o.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$4(t)?new Array(t.length):{};for(const e in t)r[e]=propertyToRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,r,e){return isRef(t)?t:isFunction$3(t)?new GetterRefImpl(t):isObject$2(t)&&arguments.length>1?propertyToRef(t,r,e):ref(t)}function propertyToRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}class ComputedRefImpl{constructor(r,e,n,o){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(r,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const r=toRaw(this);return trackRefValue(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function computed$1(t,r,e=!1){let n,o;const s=isFunction$3(t);return s?(n=t,o=NOOP):(n=t.get,o=t.set),new ComputedRefImpl(n,o,s||!o,e)}function warn(t,...r){}function callWithErrorHandling(t,r,e,n){let o;try{o=n?t(...n):t()}catch(s){handleError(s,r,e)}return o}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$3(t)){const s=callWithErrorHandling(t,r,e,n);return s&&isPromise(s)&&s.catch(a=>{handleError(a,r,e)}),s}const o=[];for(let s=0;s<t.length;s++)o.push(callWithAsyncErrorHandling(t[s],r,e,n));return o}function handleError(t,r,e,n=!0){const o=r?r.vnode:null;if(r){let s=r.parent;const a=r.proxy,i=e;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,a,i)===!1)return}s=s.parent}const d=r.appContext.config.errorHandler;if(d){callWithErrorHandling(d,null,10,[t,a,i]);return}}logError(t,e,o,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1;getId(queue[n])<t?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$4(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r=isFlushing?flushIndex+1:0){for(;r<queue.length;r++){const e=queue[r];e&&e.pre&&(queue.splice(r,1),r--,e())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,activePostFlushCbs.sort((e,n)=>getId(e)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let o=e;const s=r.startsWith("update:"),a=s&&r.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:m,trim:v}=n[c]||EMPTY_OBJ;v&&(o=e.map(g=>isString$2(g)?g.trim():g)),m&&(o=e.map(looseToNumber))}let i,d=n[i=toHandlerKey(r)]||n[i=toHandlerKey(camelize(r))];!d&&s&&(d=n[i=toHandlerKey(hyphenate(r))]),d&&callWithAsyncErrorHandling(d,t,6,o);const u=n[i+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[i])return;t.emitted[i]=!0,callWithAsyncErrorHandling(u,t,6,o)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,o=n.get(t);if(o!==void 0)return o;const s=t.emits;let a={},i=!1;if(!isFunction$3(t)){const d=u=>{const c=normalizeEmitsOptions(u,r,!0);c&&(i=!0,extend$1(a,c))};!e&&r.mixins.length&&r.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!s&&!i?(isObject$2(t)&&n.set(t,null),null):(isArray$4(s)?s.forEach(d=>a[d]=null):extend$1(a,s),isObject$2(t)&&n.set(t,a),a)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...o)=>{n._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(r);let a;try{a=t(...o)}finally{setCurrentRenderingInstance(s),n._d&&setBlockTracking(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:o,props:s,propsOptions:[a],slots:i,attrs:d,emit:u,render:c,renderCache:m,data:v,setupState:g,ctx:b,inheritAttrs:T}=t;let k,y;const A=setCurrentRenderingInstance(t);try{if(e.shapeFlag&4){const Ce=o||n;k=normalizeVNode(c.call(Ce,Ce,m,s,g,v,b)),y=d}else{const Ce=r;k=normalizeVNode(Ce.length>1?Ce(s,{attrs:d,slots:i,emit:u}):Ce(s,null)),y=r.props?d:getFunctionalFallthrough(d)}}catch(Ce){blockStack.length=0,handleError(Ce,t,1),k=createVNode(Comment)}let V=k;if(y&&T!==!1){const Ce=Object.keys(y),{shapeFlag:ie}=V;Ce.length&&ie&7&&(a&&Ce.some(isModelListener)&&(y=filterModelListeners(y,a)),V=cloneVNode(V,y))}return e.dirs&&(V=cloneVNode(V),V.dirs=V.dirs?V.dirs.concat(e.dirs):e.dirs),e.transition&&(V.transition=e.transition),k=V,setCurrentRenderingInstance(A),k}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:o,component:s}=t,{props:a,children:i,patchFlag:d}=r,u=s.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&d>=0){if(d&1024)return!0;if(d&16)return n?hasPropsChanged(n,a,u):!!a;if(d&8){const c=r.dynamicProps;for(let m=0;m<c.length;m++){const v=c[m];if(a[v]!==n[v]&&!isEmitListener(u,v))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===a?!1:n?a?hasPropsChanged(n,a,u):!0:!!a;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let o=0;o<n.length;o++){const s=n[o];if(r[s]!==t[s]&&!isEmitListener(e,s))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$4(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}function watchEffect(t,r){return doWatch(t,null,r)}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:o,onTrack:s,onTrigger:a}=EMPTY_OBJ){var i;const d=getCurrentScope()===((i=currentInstance)==null?void 0:i.scope)?currentInstance:null;let u,c=!1,m=!1;if(isRef(t)?(u=()=>t.value,c=isShallow(t)):isReactive(t)?(u=()=>t,n=!0):isArray$4(t)?(m=!0,c=t.some(Ce=>isReactive(Ce)||isShallow(Ce)),u=()=>t.map(Ce=>{if(isRef(Ce))return Ce.value;if(isReactive(Ce))return traverse(Ce);if(isFunction$3(Ce))return callWithErrorHandling(Ce,d,2)})):isFunction$3(t)?r?u=()=>callWithErrorHandling(t,d,2):u=()=>{if(!(d&&d.isUnmounted))return v&&v(),callWithAsyncErrorHandling(t,d,3,[g])}:u=NOOP,r&&n){const Ce=u;u=()=>traverse(Ce())}let v,g=Ce=>{v=A.onStop=()=>{callWithErrorHandling(Ce,d,4)}},b;if(isInSSRComponentSetup)if(g=NOOP,r?e&&callWithAsyncErrorHandling(r,d,3,[u(),m?[]:void 0,g]):u(),o==="sync"){const Ce=useSSRContext();b=Ce.__watcherHandles||(Ce.__watcherHandles=[])}else return NOOP;let T=m?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const k=()=>{if(A.active)if(r){const Ce=A.run();(n||c||(m?Ce.some((ie,Oe)=>hasChanged(ie,T[Oe])):hasChanged(Ce,T)))&&(v&&v(),callWithAsyncErrorHandling(r,d,3,[Ce,T===INITIAL_WATCHER_VALUE?void 0:m&&T[0]===INITIAL_WATCHER_VALUE?[]:T,g]),T=Ce)}else A.run()};k.allowRecurse=!!r;let y;o==="sync"?y=k:o==="post"?y=()=>queuePostRenderEffect(k,d&&d.suspense):(k.pre=!0,d&&(k.id=d.uid),y=()=>queueJob(k));const A=new ReactiveEffect(u,y);r?e?k():T=A.run():o==="post"?queuePostRenderEffect(A.run.bind(A),d&&d.suspense):A.run();const V=()=>{A.stop(),d&&d.scope&&remove(d.scope.effects,A)};return b&&b.push(V),V}function instanceWatch(t,r,e){const n=this.proxy,o=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let s;isFunction$3(r)?s=r:(s=r.handler,e=r);const a=currentInstance;setCurrentInstance(this);const i=doWatch(o,s.bind(n),e);return a?setCurrentInstance(a):unsetCurrentInstance(),i}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let o=0;o<e.length&&n;o++)n=n[e[o]];return n}}function traverse(t,r){if(!isObject$2(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),isRef(t))traverse(t.value,r);else if(isArray$4(t))for(let e=0;e<t.length;e++)traverse(t[e],r);else if(isSet$2(t)||isMap$2(t))t.forEach(e=>{traverse(e,r)});else if(isPlainObject$1(t))for(const e in t)traverse(t[e],r);return t}function withDirectives(t,r){const e=currentRenderingInstance;if(e===null)return t;const n=getExposeProxy(e)||e.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<r.length;s++){let[a,i,d,u=EMPTY_OBJ]=r[s];a&&(isFunction$3(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(i),o.push({dir:a,instance:n,value:i,oldValue:void 0,arg:d,modifiers:u}))}return t}function invokeDirectiveHook(t,r,e,n){const o=t.dirs,s=r&&r.dirs;for(let a=0;a<o.length;a++){const i=o[a];s&&(i.oldValue=s[a].value);let d=i.dir[n];d&&(pauseTracking(),callWithAsyncErrorHandling(d,e,8,[t.el,i,t,r]),resetTracking())}}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let o;return()=>{const s=r.default&&getTransitionRawChildren(r.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const T of s)if(T.type!==Comment){a=T;break}}const i=toRaw(t),{mode:d}=i;if(n.isLeaving)return emptyPlaceholder(a);const u=getKeepAliveChild(a);if(!u)return emptyPlaceholder(a);const c=resolveTransitionHooks(u,i,n,e);setTransitionHooks(u,c);const m=e.subTree,v=m&&getKeepAliveChild(m);let g=!1;const{getTransitionKey:b}=u.type;if(b){const T=b();o===void 0?o=T:T!==o&&(o=T,g=!0)}if(v&&v.type!==Comment&&(!isSameVNodeType(u,v)||g)){const T=resolveTransitionHooks(v,i,n,e);if(setTransitionHooks(v,T),d==="out-in")return n.isLeaving=!0,T.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},emptyPlaceholder(a);d==="in-out"&&u.type!==Comment&&(T.delayLeave=(k,y,A)=>{const V=getLeavingNodesForType(n,v);V[String(v.key)]=v,k._leaveCb=()=>{y(),k._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=A})}return a}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:i,onEnter:d,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:m,onLeave:v,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:T,onAppear:k,onAfterAppear:y,onAppearCancelled:A}=r,V=String(t.key),Ce=getLeavingNodesForType(e,t),ie=(Y,ae)=>{Y&&callWithAsyncErrorHandling(Y,n,9,ae)},Oe=(Y,ae)=>{const Fe=ae[1];ie(Y,ae),isArray$4(Y)?Y.every(ze=>ze.length<=1)&&Fe():Y.length<=1&&Fe()},he={mode:s,persisted:a,beforeEnter(Y){let ae=i;if(!e.isMounted)if(o)ae=T||i;else return;Y._leaveCb&&Y._leaveCb(!0);const Fe=Ce[V];Fe&&isSameVNodeType(t,Fe)&&Fe.el._leaveCb&&Fe.el._leaveCb(),ie(ae,[Y])},enter(Y){let ae=d,Fe=u,ze=c;if(!e.isMounted)if(o)ae=k||d,Fe=y||u,ze=A||c;else return;let pe=!1;const le=Y._enterCb=xe=>{pe||(pe=!0,xe?ie(ze,[Y]):ie(Fe,[Y]),he.delayedLeave&&he.delayedLeave(),Y._enterCb=void 0)};ae?Oe(ae,[Y,le]):le()},leave(Y,ae){const Fe=String(t.key);if(Y._enterCb&&Y._enterCb(!0),e.isUnmounting)return ae();ie(m,[Y]);let ze=!1;const pe=Y._leaveCb=le=>{ze||(ze=!0,ae(),le?ie(b,[Y]):ie(g,[Y]),Y._leaveCb=void 0,Ce[Fe]===t&&delete Ce[Fe])};Ce[Fe]=t,v?Oe(v,[Y,pe]):pe()},clone(Y){return resolveTransitionHooks(Y,r,e,n)}};return he}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],o=0;for(let s=0;s<t.length;s++){let a=t[s];const i=e==null?a.key:String(e)+String(a.key!=null?a.key:s);a.type===Fragment?(a.patchFlag&128&&o++,n=n.concat(getTransitionRawChildren(a.children,r,i))):(r||a.type!==Comment)&&n.push(i!=null?cloneVNode(a,{key:i}):a)}if(o>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function defineComponent(t,r){return isFunction$3(t)?(()=>extend$1({name:t.name},r,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let o=e;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(r,n,e),e){let o=e.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(n,r,e,o),o=o.parent}}function injectToKeepAliveRoot(t,r,e,n){const o=injectHook(r,t,n,!0);onUnmounted(()=>{remove(n[r],o)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const o=e[t]||(e[t]=[]),s=r.__weh||(r.__weh=(...a)=>{if(e.isUnmounted)return;pauseTracking(),setCurrentInstance(e);const i=callWithAsyncErrorHandling(r,e,t,a);return unsetCurrentInstance(),resetTracking(),i});return n?o.unshift(s):o.push(s),s}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,r,e=!0,n=!1){const o=currentRenderingInstance||currentInstance;if(o){const s=o.type;if(t===COMPONENTS){const i=getComponentName(s,!1);if(i&&(i===r||i===camelize(r)||i===capitalize$1(camelize(r))))return s}const a=resolve(o[t]||s[t],r)||resolve(o.appContext[t],r);return!a&&n?s:a}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize$1(camelize(r))])}function renderList(t,r,e,n){let o;const s=e&&e[n];if(isArray$4(t)||isString$2(t)){o=new Array(t.length);for(let a=0,i=t.length;a<i;a++)o[a]=r(t[a],a,void 0,s&&s[a])}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=r(a+1,a,void 0,s&&s[a])}else if(isObject$2(t))if(t[Symbol.iterator])o=Array.from(t,(a,i)=>r(a,i,void 0,s&&s[i]));else{const a=Object.keys(t);o=new Array(a.length);for(let i=0,d=a.length;i<d;i++){const u=a[i];o[i]=r(t[u],u,i,s&&s[i])}}else o=[];return e&&(e[n]=o),o}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$4(n))for(let o=0;o<n.length;o++)t[n[o].name]=n[o].fn;else n&&(t[n.name]=n.key?(...o)=>{const s=n.fn(...o);return s&&(s.key=n.key),s}:n.fn)}return t}function renderSlot(t,r,e={},n,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let s=t[r];s&&s._c&&(s._d=!1),openBlock();const a=s&&ensureValidVNode(s(e)),i=createBlock(Fragment,{key:e.key||a&&a.key||`_${r}`},a||(n?n():[]),a&&t._===1?64:-2);return!o&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),s&&s._c&&(s._d=!0),i}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){const{ctx:e,setupState:n,data:o,props:s,accessCache:a,type:i,appContext:d}=t;let u;if(r[0]!=="$"){const g=a[r];if(g!==void 0)switch(g){case 1:return n[r];case 2:return o[r];case 4:return e[r];case 3:return s[r]}else{if(hasSetupBinding(n,r))return a[r]=1,n[r];if(o!==EMPTY_OBJ&&hasOwn(o,r))return a[r]=2,o[r];if((u=t.propsOptions[0])&&hasOwn(u,r))return a[r]=3,s[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return a[r]=4,e[r];shouldCacheAccess&&(a[r]=0)}}const c=publicPropertiesMap[r];let m,v;if(c)return r==="$attrs"&&track(t,"get",r),c(t);if((m=i.__cssModules)&&(m=m[r]))return m;if(e!==EMPTY_OBJ&&hasOwn(e,r))return a[r]=4,e[r];if(v=d.config.globalProperties,hasOwn(v,r))return v[r]},set({_:t},r,e){const{data:n,setupState:o,ctx:s}=t;return hasSetupBinding(o,r)?(o[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(s[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:o,propsOptions:s}},a){let i;return!!e[a]||t!==EMPTY_OBJ&&hasOwn(t,a)||hasSetupBinding(r,a)||(i=s[0])&&hasOwn(i,a)||hasOwn(n,a)||hasOwn(publicPropertiesMap,a)||hasOwn(o.config.globalProperties,a)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$4(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:o,computed:s,methods:a,watch:i,provide:d,inject:u,created:c,beforeMount:m,mounted:v,beforeUpdate:g,updated:b,activated:T,deactivated:k,beforeDestroy:y,beforeUnmount:A,destroyed:V,unmounted:Ce,render:ie,renderTracked:Oe,renderTriggered:he,errorCaptured:Y,serverPrefetch:ae,expose:Fe,inheritAttrs:ze,components:pe,directives:le,filters:xe}=r;if(u&&resolveInjections(u,n,null),a)for(const Ue in a){const er=a[Ue];isFunction$3(er)&&(n[Ue]=er.bind(e))}if(o){const Ue=o.call(e,e);isObject$2(Ue)&&(t.data=reactive(Ue))}if(shouldCacheAccess=!0,s)for(const Ue in s){const er=s[Ue],At=isFunction$3(er)?er.bind(e,e):isFunction$3(er.get)?er.get.bind(e,e):NOOP,ur=!isFunction$3(er)&&isFunction$3(er.set)?er.set.bind(e):NOOP,pr=computed({get:At,set:ur});Object.defineProperty(n,Ue,{enumerable:!0,configurable:!0,get:()=>pr.value,set:ar=>pr.value=ar})}if(i)for(const Ue in i)createWatcher(i[Ue],n,e,Ue);if(d){const Ue=isFunction$3(d)?d.call(e):d;Reflect.ownKeys(Ue).forEach(er=>{provide(er,Ue[er])})}c&&callHook$1(c,t,"c");function Ve(Ue,er){isArray$4(er)?er.forEach(At=>Ue(At.bind(e))):er&&Ue(er.bind(e))}if(Ve(onBeforeMount,m),Ve(onMounted,v),Ve(onBeforeUpdate,g),Ve(onUpdated,b),Ve(onActivated,T),Ve(onDeactivated,k),Ve(onErrorCaptured,Y),Ve(onRenderTracked,Oe),Ve(onRenderTriggered,he),Ve(onBeforeUnmount,A),Ve(onUnmounted,Ce),Ve(onServerPrefetch,ae),isArray$4(Fe))if(Fe.length){const Ue=t.exposed||(t.exposed={});Fe.forEach(er=>{Object.defineProperty(Ue,er,{get:()=>e[er],set:At=>e[er]=At})})}else t.exposed||(t.exposed={});ie&&t.render===NOOP&&(t.render=ie),ze!=null&&(t.inheritAttrs=ze),pe&&(t.components=pe),le&&(t.directives=le)}function resolveInjections(t,r,e=NOOP){isArray$4(t)&&(t=normalizeInject(t));for(const n in t){const o=t[n];let s;isObject$2(o)?"default"in o?s=inject(o.from||n,o.default,!0):s=inject(o.from||n):s=inject(o),isRef(s)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):r[n]=s}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$4(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const o=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const s=r[t];isFunction$3(s)&&watch(o,s)}else if(isFunction$3(t))watch(o,t.bind(e));else if(isObject$2(t))if(isArray$4(t))t.forEach(s=>createWatcher(s,r,e,n));else{const s=isFunction$3(t.handler)?t.handler.bind(e):r[t.handler];isFunction$3(s)&&watch(o,s,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,i=s.get(r);let d;return i?d=i:!o.length&&!e&&!n?d=r:(d={},o.length&&o.forEach(u=>mergeOptions$1(d,u,a,!0)),mergeOptions$1(d,r,a)),isObject$2(r)&&s.set(r,d),d}function mergeOptions$1(t,r,e,n=!1){const{mixins:o,extends:s}=r;s&&mergeOptions$1(t,s,e,!0),o&&o.forEach(a=>mergeOptions$1(t,a,e,!0));for(const a in r)if(!(n&&a==="expose")){const i=internalOptionMergeStrats[a]||e&&e[a];t[a]=i?i(t[a],r[a]):r[a]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$1(isFunction$3(t)?t.call(this,this):t,isFunction$3(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$4(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$1(Object.create(null),t,r):r}function mergeEmitsOrPropsOptions(t,r){return t?isArray$4(t)&&isArray$4(r)?[...new Set([...t,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$1(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,r){return function(n,o=null){isFunction$3(n)||(n=extend$1({},n)),o!=null&&!isObject$2(o)&&(o=null);const s=createAppContext(),a=new Set;let i=!1;const d=s.app={_uid:uid$1++,_component:n,_props:o,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&isFunction$3(u.install)?(a.add(u),u.install(d,...c)):isFunction$3(u)&&(a.add(u),u(d,...c))),d},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),d},component(u,c){return c?(s.components[u]=c,d):s.components[u]},directive(u,c){return c?(s.directives[u]=c,d):s.directives[u]},mount(u,c,m){if(!i){const v=createVNode(n,o);return v.appContext=s,c&&r?r(v,u):t(v,u,m),i=!0,d._container=u,u.__vue_app__=d,getExposeProxy(v.component)||v.component.proxy}},unmount(){i&&(t(null,d._container),delete d._container.__vue_app__)},provide(u,c){return s.provides[u]=c,d},runWithContext(u){currentApp=d;try{return u()}finally{currentApp=null}}};return d}}let currentApp=null;function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const o=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return e&&isFunction$3(r)?r.call(n&&n.proxy):r}}function initProps(t,r,e,n=!1){const o={},s={};def(s,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,r,o,s);for(const a in t.propsOptions[0])a in o||(o[a]=void 0);e?t.props=n?o:shallowReactive(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function updateProps(t,r,e,n){const{props:o,attrs:s,vnode:{patchFlag:a}}=t,i=toRaw(o),[d]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let m=0;m<c.length;m++){let v=c[m];if(isEmitListener(t.emitsOptions,v))continue;const g=r[v];if(d)if(hasOwn(s,v))g!==s[v]&&(s[v]=g,u=!0);else{const b=camelize(v);o[b]=resolvePropValue(d,i,b,g,t,!1)}else g!==s[v]&&(s[v]=g,u=!0)}}}else{setFullProps(t,r,o,s)&&(u=!0);let c;for(const m in i)(!r||!hasOwn(r,m)&&((c=hyphenate(m))===m||!hasOwn(r,c)))&&(d?e&&(e[m]!==void 0||e[c]!==void 0)&&(o[m]=resolvePropValue(d,i,m,void 0,t,!0)):delete o[m]);if(s!==i)for(const m in s)(!r||!hasOwn(r,m))&&(delete s[m],u=!0)}u&&trigger(t,"set","$attrs")}function setFullProps(t,r,e,n){const[o,s]=t.propsOptions;let a=!1,i;if(r)for(let d in r){if(isReservedProp(d))continue;const u=r[d];let c;o&&hasOwn(o,c=camelize(d))?!s||!s.includes(c)?e[c]=u:(i||(i={}))[c]=u:isEmitListener(t.emitsOptions,d)||(!(d in n)||u!==n[d])&&(n[d]=u,a=!0)}if(s){const d=toRaw(e),u=i||EMPTY_OBJ;for(let c=0;c<s.length;c++){const m=s[c];e[m]=resolvePropValue(o,d,m,u[m],t,!hasOwn(u,m))}}return a}function resolvePropValue(t,r,e,n,o,s){const a=t[e];if(a!=null){const i=hasOwn(a,"default");if(i&&n===void 0){const d=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$3(d)){const{propsDefaults:u}=o;e in u?n=u[e]:(setCurrentInstance(o),n=u[e]=d.call(null,r),unsetCurrentInstance())}else n=d}a[0]&&(s&&!i?n=!1:a[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,o=n.get(t);if(o)return o;const s=t.props,a={},i=[];let d=!1;if(!isFunction$3(t)){const c=m=>{d=!0;const[v,g]=normalizePropsOptions(m,r,!0);extend$1(a,v),g&&i.push(...g)};!e&&r.mixins.length&&r.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!d)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$4(s))for(let c=0;c<s.length;c++){const m=camelize(s[c]);validatePropName(m)&&(a[m]=EMPTY_OBJ)}else if(s)for(const c in s){const m=camelize(c);if(validatePropName(m)){const v=s[c],g=a[m]=isArray$4(v)||isFunction$3(v)?{type:v}:extend$1({},v);if(g){const b=getTypeIndex(Boolean,g.type),T=getTypeIndex(String,g.type);g[0]=b>-1,g[1]=T<0||b<T,(b>-1||hasOwn(g,"default"))&&i.push(m)}}}const u=[a,i];return isObject$2(t)&&n.set(t,u),u}function validatePropName(t){return t[0]!=="$"}function getType(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$4(r)?r.findIndex(e=>isSameType(e,t)):isFunction$3(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$4(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,r,e)=>{if(r._n)return r;const n=withCtx((...o)=>normalizeSlotValue(r(...o)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const o in t){if(isInternalKey(o))continue;const s=t[o];if(isFunction$3(s))r[o]=normalizeSlot$1(o,s,n);else if(s!=null){const a=normalizeSlotValue(s);r[o]=()=>a}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=toRaw(r),def(r,"_",e)):normalizeObjectSlots(r,t.slots={})}else t.slots={},r&&normalizeVNodeSlots(t,r);def(t.slots,InternalObjectKey,1)},updateSlots=(t,r,e)=>{const{vnode:n,slots:o}=t;let s=!0,a=EMPTY_OBJ;if(n.shapeFlag&32){const i=r._;i?e&&i===1?s=!1:(extend$1(o,r),!e&&i===1&&delete o._):(s=!r.$stable,normalizeObjectSlots(r,o)),a=r}else r&&(normalizeVNodeSlots(t,r),a={default:1});if(s)for(const i in o)!isInternalKey(i)&&!(i in a)&&delete o[i]};function setRef(t,r,e,n,o=!1){if(isArray$4(t)){t.forEach((v,g)=>setRef(v,r&&(isArray$4(r)?r[g]:r),e,n,o));return}if(isAsyncWrapper(n)&&!o)return;const s=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,a=o?null:s,{i,r:d}=t,u=r&&r.r,c=i.refs===EMPTY_OBJ?i.refs={}:i.refs,m=i.setupState;if(u!=null&&u!==d&&(isString$2(u)?(c[u]=null,hasOwn(m,u)&&(m[u]=null)):isRef(u)&&(u.value=null)),isFunction$3(d))callWithErrorHandling(d,i,12,[a,c]);else{const v=isString$2(d),g=isRef(d);if(v||g){const b=()=>{if(t.f){const T=v?hasOwn(m,d)?m[d]:c[d]:d.value;o?isArray$4(T)&&remove(T,s):isArray$4(T)?T.includes(s)||T.push(s):v?(c[d]=[s],hasOwn(m,d)&&(m[d]=c[d])):(d.value=[s],t.k&&(c[t.k]=d.value))}else v?(c[d]=a,hasOwn(m,d)&&(m[d]=a)):g&&(d.value=a,t.k&&(c[t.k]=a))};a?(b.id=-1,queuePostRenderEffect(b,e)):b()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:o,patchProp:s,createElement:a,createText:i,createComment:d,setText:u,setElementText:c,parentNode:m,nextSibling:v,setScopeId:g=NOOP,insertStaticContent:b}=t,T=(kt,rr,cr,mr=null,yr=null,Tr=null,Ir=!1,kr=null,Ar=!!rr.dynamicChildren)=>{if(kt===rr)return;kt&&!isSameVNodeType(kt,rr)&&(mr=$e(kt),ar(kt,yr,Tr,!0),kt=null),rr.patchFlag===-2&&(Ar=!1,rr.dynamicChildren=null);const{type:Rr,ref:Mn,shapeFlag:Or}=rr;switch(Rr){case Text:k(kt,rr,cr,mr);break;case Comment:y(kt,rr,cr,mr);break;case Static:kt==null&&A(rr,cr,mr,Ir);break;case Fragment:pe(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar);break;default:Or&1?ie(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar):Or&6?le(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar):(Or&64||Or&128)&&Rr.process(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar,nr)}Mn!=null&&yr&&setRef(Mn,kt&&kt.ref,Tr,rr||kt,!rr)},k=(kt,rr,cr,mr)=>{if(kt==null)n(rr.el=i(rr.children),cr,mr);else{const yr=rr.el=kt.el;rr.children!==kt.children&&u(yr,rr.children)}},y=(kt,rr,cr,mr)=>{kt==null?n(rr.el=d(rr.children||""),cr,mr):rr.el=kt.el},A=(kt,rr,cr,mr)=>{[kt.el,kt.anchor]=b(kt.children,rr,cr,mr,kt.el,kt.anchor)},V=({el:kt,anchor:rr},cr,mr)=>{let yr;for(;kt&&kt!==rr;)yr=v(kt),n(kt,cr,mr),kt=yr;n(rr,cr,mr)},Ce=({el:kt,anchor:rr})=>{let cr;for(;kt&&kt!==rr;)cr=v(kt),o(kt),kt=cr;o(rr)},ie=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar)=>{Ir=Ir||rr.type==="svg",kt==null?Oe(rr,cr,mr,yr,Tr,Ir,kr,Ar):ae(kt,rr,yr,Tr,Ir,kr,Ar)},Oe=(kt,rr,cr,mr,yr,Tr,Ir,kr)=>{let Ar,Rr;const{type:Mn,props:Or,shapeFlag:Pr,transition:Nr,dirs:Wr}=kt;if(Ar=kt.el=a(kt.type,Tr,Or&&Or.is,Or),Pr&8?c(Ar,kt.children):Pr&16&&Y(kt.children,Ar,null,mr,yr,Tr&&Mn!=="foreignObject",Ir,kr),Wr&&invokeDirectiveHook(kt,null,mr,"created"),he(Ar,kt,kt.scopeId,Ir,mr),Or){for(const Ur in Or)Ur!=="value"&&!isReservedProp(Ur)&&s(Ar,Ur,null,Or[Ur],Tr,kt.children,mr,yr,ir);"value"in Or&&s(Ar,"value",null,Or.value),(Rr=Or.onVnodeBeforeMount)&&invokeVNodeHook(Rr,mr,kt)}Wr&&invokeDirectiveHook(kt,null,mr,"beforeMount");const Yr=(!yr||yr&&!yr.pendingBranch)&&Nr&&!Nr.persisted;Yr&&Nr.beforeEnter(Ar),n(Ar,rr,cr),((Rr=Or&&Or.onVnodeMounted)||Yr||Wr)&&queuePostRenderEffect(()=>{Rr&&invokeVNodeHook(Rr,mr,kt),Yr&&Nr.enter(Ar),Wr&&invokeDirectiveHook(kt,null,mr,"mounted")},yr)},he=(kt,rr,cr,mr,yr)=>{if(cr&&g(kt,cr),mr)for(let Tr=0;Tr<mr.length;Tr++)g(kt,mr[Tr]);if(yr){let Tr=yr.subTree;if(rr===Tr){const Ir=yr.vnode;he(kt,Ir,Ir.scopeId,Ir.slotScopeIds,yr.parent)}}},Y=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar=0)=>{for(let Rr=Ar;Rr<kt.length;Rr++){const Mn=kt[Rr]=kr?cloneIfMounted(kt[Rr]):normalizeVNode(kt[Rr]);T(null,Mn,rr,cr,mr,yr,Tr,Ir,kr)}},ae=(kt,rr,cr,mr,yr,Tr,Ir)=>{const kr=rr.el=kt.el;let{patchFlag:Ar,dynamicChildren:Rr,dirs:Mn}=rr;Ar|=kt.patchFlag&16;const Or=kt.props||EMPTY_OBJ,Pr=rr.props||EMPTY_OBJ;let Nr;cr&&toggleRecurse(cr,!1),(Nr=Pr.onVnodeBeforeUpdate)&&invokeVNodeHook(Nr,cr,rr,kt),Mn&&invokeDirectiveHook(rr,kt,cr,"beforeUpdate"),cr&&toggleRecurse(cr,!0);const Wr=yr&&rr.type!=="foreignObject";if(Rr?Fe(kt.dynamicChildren,Rr,kr,cr,mr,Wr,Tr):Ir||er(kt,rr,kr,null,cr,mr,Wr,Tr,!1),Ar>0){if(Ar&16)ze(kr,rr,Or,Pr,cr,mr,yr);else if(Ar&2&&Or.class!==Pr.class&&s(kr,"class",null,Pr.class,yr),Ar&4&&s(kr,"style",Or.style,Pr.style,yr),Ar&8){const Yr=rr.dynamicProps;for(let Ur=0;Ur<Yr.length;Ur++){const qr=Yr[Ur],Yn=Or[qr],$n=Pr[qr];($n!==Yn||qr==="value")&&s(kr,qr,Yn,$n,yr,kt.children,cr,mr,ir)}}Ar&1&&kt.children!==rr.children&&c(kr,rr.children)}else!Ir&&Rr==null&&ze(kr,rr,Or,Pr,cr,mr,yr);((Nr=Pr.onVnodeUpdated)||Mn)&&queuePostRenderEffect(()=>{Nr&&invokeVNodeHook(Nr,cr,rr,kt),Mn&&invokeDirectiveHook(rr,kt,cr,"updated")},mr)},Fe=(kt,rr,cr,mr,yr,Tr,Ir)=>{for(let kr=0;kr<rr.length;kr++){const Ar=kt[kr],Rr=rr[kr],Mn=Ar.el&&(Ar.type===Fragment||!isSameVNodeType(Ar,Rr)||Ar.shapeFlag&70)?m(Ar.el):cr;T(Ar,Rr,Mn,null,mr,yr,Tr,Ir,!0)}},ze=(kt,rr,cr,mr,yr,Tr,Ir)=>{if(cr!==mr){if(cr!==EMPTY_OBJ)for(const kr in cr)!isReservedProp(kr)&&!(kr in mr)&&s(kt,kr,cr[kr],null,Ir,rr.children,yr,Tr,ir);for(const kr in mr){if(isReservedProp(kr))continue;const Ar=mr[kr],Rr=cr[kr];Ar!==Rr&&kr!=="value"&&s(kt,kr,Rr,Ar,Ir,rr.children,yr,Tr,ir)}"value"in mr&&s(kt,"value",cr.value,mr.value)}},pe=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar)=>{const Rr=rr.el=kt?kt.el:i(""),Mn=rr.anchor=kt?kt.anchor:i("");let{patchFlag:Or,dynamicChildren:Pr,slotScopeIds:Nr}=rr;Nr&&(kr=kr?kr.concat(Nr):Nr),kt==null?(n(Rr,cr,mr),n(Mn,cr,mr),Y(rr.children,cr,Mn,yr,Tr,Ir,kr,Ar)):Or>0&&Or&64&&Pr&&kt.dynamicChildren?(Fe(kt.dynamicChildren,Pr,cr,yr,Tr,Ir,kr),(rr.key!=null||yr&&rr===yr.subTree)&&traverseStaticChildren(kt,rr,!0)):er(kt,rr,cr,Mn,yr,Tr,Ir,kr,Ar)},le=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar)=>{rr.slotScopeIds=kr,kt==null?rr.shapeFlag&512?yr.ctx.activate(rr,cr,mr,Ir,Ar):xe(rr,cr,mr,yr,Tr,Ir,Ar):ue(kt,rr,Ar)},xe=(kt,rr,cr,mr,yr,Tr,Ir)=>{const kr=kt.component=createComponentInstance(kt,mr,yr);if(isKeepAlive(kt)&&(kr.ctx.renderer=nr),setupComponent(kr),kr.asyncDep){if(yr&&yr.registerDep(kr,Ve),!kt.el){const Ar=kr.subTree=createVNode(Comment);y(null,Ar,rr,cr)}return}Ve(kr,kt,rr,cr,yr,Tr,Ir)},ue=(kt,rr,cr)=>{const mr=rr.component=kt.component;if(shouldUpdateComponent(kt,rr,cr))if(mr.asyncDep&&!mr.asyncResolved){Ue(mr,rr,cr);return}else mr.next=rr,invalidateJob(mr.update),mr.update();else rr.el=kt.el,mr.vnode=rr},Ve=(kt,rr,cr,mr,yr,Tr,Ir)=>{const kr=()=>{if(kt.isMounted){let{next:Mn,bu:Or,u:Pr,parent:Nr,vnode:Wr}=kt,Yr=Mn,Ur;toggleRecurse(kt,!1),Mn?(Mn.el=Wr.el,Ue(kt,Mn,Ir)):Mn=Wr,Or&&invokeArrayFns(Or),(Ur=Mn.props&&Mn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ur,Nr,Mn,Wr),toggleRecurse(kt,!0);const qr=renderComponentRoot(kt),Yn=kt.subTree;kt.subTree=qr,T(Yn,qr,m(Yn.el),$e(Yn),kt,yr,Tr),Mn.el=qr.el,Yr===null&&updateHOCHostEl(kt,qr.el),Pr&&queuePostRenderEffect(Pr,yr),(Ur=Mn.props&&Mn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ur,Nr,Mn,Wr),yr)}else{let Mn;const{el:Or,props:Pr}=rr,{bm:Nr,m:Wr,parent:Yr}=kt,Ur=isAsyncWrapper(rr);if(toggleRecurse(kt,!1),Nr&&invokeArrayFns(Nr),!Ur&&(Mn=Pr&&Pr.onVnodeBeforeMount)&&invokeVNodeHook(Mn,Yr,rr),toggleRecurse(kt,!0),Or&&Et){const qr=()=>{kt.subTree=renderComponentRoot(kt),Et(Or,kt.subTree,kt,yr,null)};Ur?rr.type.__asyncLoader().then(()=>!kt.isUnmounted&&qr()):qr()}else{const qr=kt.subTree=renderComponentRoot(kt);T(null,qr,cr,mr,kt,yr,Tr),rr.el=qr.el}if(Wr&&queuePostRenderEffect(Wr,yr),!Ur&&(Mn=Pr&&Pr.onVnodeMounted)){const qr=rr;queuePostRenderEffect(()=>invokeVNodeHook(Mn,Yr,qr),yr)}(rr.shapeFlag&256||Yr&&isAsyncWrapper(Yr.vnode)&&Yr.vnode.shapeFlag&256)&&kt.a&&queuePostRenderEffect(kt.a,yr),kt.isMounted=!0,rr=cr=mr=null}},Ar=kt.effect=new ReactiveEffect(kr,()=>queueJob(Rr),kt.scope),Rr=kt.update=()=>Ar.run();Rr.id=kt.uid,toggleRecurse(kt,!0),Rr()},Ue=(kt,rr,cr)=>{rr.component=kt;const mr=kt.vnode.props;kt.vnode=rr,kt.next=null,updateProps(kt,rr.props,mr,cr),updateSlots(kt,rr.children,cr),pauseTracking(),flushPreFlushCbs(),resetTracking()},er=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar=!1)=>{const Rr=kt&&kt.children,Mn=kt?kt.shapeFlag:0,Or=rr.children,{patchFlag:Pr,shapeFlag:Nr}=rr;if(Pr>0){if(Pr&128){ur(Rr,Or,cr,mr,yr,Tr,Ir,kr,Ar);return}else if(Pr&256){At(Rr,Or,cr,mr,yr,Tr,Ir,kr,Ar);return}}Nr&8?(Mn&16&&ir(Rr,yr,Tr),Or!==Rr&&c(cr,Or)):Mn&16?Nr&16?ur(Rr,Or,cr,mr,yr,Tr,Ir,kr,Ar):ir(Rr,yr,Tr,!0):(Mn&8&&c(cr,""),Nr&16&&Y(Or,cr,mr,yr,Tr,Ir,kr,Ar))},At=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar)=>{kt=kt||EMPTY_ARR,rr=rr||EMPTY_ARR;const Rr=kt.length,Mn=rr.length,Or=Math.min(Rr,Mn);let Pr;for(Pr=0;Pr<Or;Pr++){const Nr=rr[Pr]=Ar?cloneIfMounted(rr[Pr]):normalizeVNode(rr[Pr]);T(kt[Pr],Nr,cr,null,yr,Tr,Ir,kr,Ar)}Rr>Mn?ir(kt,yr,Tr,!0,!1,Or):Y(rr,cr,mr,yr,Tr,Ir,kr,Ar,Or)},ur=(kt,rr,cr,mr,yr,Tr,Ir,kr,Ar)=>{let Rr=0;const Mn=rr.length;let Or=kt.length-1,Pr=Mn-1;for(;Rr<=Or&&Rr<=Pr;){const Nr=kt[Rr],Wr=rr[Rr]=Ar?cloneIfMounted(rr[Rr]):normalizeVNode(rr[Rr]);if(isSameVNodeType(Nr,Wr))T(Nr,Wr,cr,null,yr,Tr,Ir,kr,Ar);else break;Rr++}for(;Rr<=Or&&Rr<=Pr;){const Nr=kt[Or],Wr=rr[Pr]=Ar?cloneIfMounted(rr[Pr]):normalizeVNode(rr[Pr]);if(isSameVNodeType(Nr,Wr))T(Nr,Wr,cr,null,yr,Tr,Ir,kr,Ar);else break;Or--,Pr--}if(Rr>Or){if(Rr<=Pr){const Nr=Pr+1,Wr=Nr<Mn?rr[Nr].el:mr;for(;Rr<=Pr;)T(null,rr[Rr]=Ar?cloneIfMounted(rr[Rr]):normalizeVNode(rr[Rr]),cr,Wr,yr,Tr,Ir,kr,Ar),Rr++}}else if(Rr>Pr)for(;Rr<=Or;)ar(kt[Rr],yr,Tr,!0),Rr++;else{const Nr=Rr,Wr=Rr,Yr=new Map;for(Rr=Wr;Rr<=Pr;Rr++){const ho=rr[Rr]=Ar?cloneIfMounted(rr[Rr]):normalizeVNode(rr[Rr]);ho.key!=null&&Yr.set(ho.key,Rr)}let Ur,qr=0;const Yn=Pr-Wr+1;let $n=!1,Jr=0;const Fr=new Array(Yn);for(Rr=0;Rr<Yn;Rr++)Fr[Rr]=0;for(Rr=Nr;Rr<=Or;Rr++){const ho=kt[Rr];if(qr>=Yn){ar(ho,yr,Tr,!0);continue}let bo;if(ho.key!=null)bo=Yr.get(ho.key);else for(Ur=Wr;Ur<=Pr;Ur++)if(Fr[Ur-Wr]===0&&isSameVNodeType(ho,rr[Ur])){bo=Ur;break}bo===void 0?ar(ho,yr,Tr,!0):(Fr[bo-Wr]=Rr+1,bo>=Jr?Jr=bo:$n=!0,T(ho,rr[bo],cr,null,yr,Tr,Ir,kr,Ar),qr++)}const Wn=$n?getSequence(Fr):EMPTY_ARR;for(Ur=Wn.length-1,Rr=Yn-1;Rr>=0;Rr--){const ho=Wr+Rr,bo=rr[ho],uo=ho+1<Mn?rr[ho+1].el:mr;Fr[Rr]===0?T(null,bo,cr,uo,yr,Tr,Ir,kr,Ar):$n&&(Ur<0||Rr!==Wn[Ur]?pr(bo,cr,uo,2):Ur--)}}},pr=(kt,rr,cr,mr,yr=null)=>{const{el:Tr,type:Ir,transition:kr,children:Ar,shapeFlag:Rr}=kt;if(Rr&6){pr(kt.component.subTree,rr,cr,mr);return}if(Rr&128){kt.suspense.move(rr,cr,mr);return}if(Rr&64){Ir.move(kt,rr,cr,nr);return}if(Ir===Fragment){n(Tr,rr,cr);for(let Or=0;Or<Ar.length;Or++)pr(Ar[Or],rr,cr,mr);n(kt.anchor,rr,cr);return}if(Ir===Static){V(kt,rr,cr);return}if(mr!==2&&Rr&1&&kr)if(mr===0)kr.beforeEnter(Tr),n(Tr,rr,cr),queuePostRenderEffect(()=>kr.enter(Tr),yr);else{const{leave:Or,delayLeave:Pr,afterLeave:Nr}=kr,Wr=()=>n(Tr,rr,cr),Yr=()=>{Or(Tr,()=>{Wr(),Nr&&Nr()})};Pr?Pr(Tr,Wr,Yr):Yr()}else n(Tr,rr,cr)},ar=(kt,rr,cr,mr=!1,yr=!1)=>{const{type:Tr,props:Ir,ref:kr,children:Ar,dynamicChildren:Rr,shapeFlag:Mn,patchFlag:Or,dirs:Pr}=kt;if(kr!=null&&setRef(kr,null,cr,kt,!0),Mn&256){rr.ctx.deactivate(kt);return}const Nr=Mn&1&&Pr,Wr=!isAsyncWrapper(kt);let Yr;if(Wr&&(Yr=Ir&&Ir.onVnodeBeforeUnmount)&&invokeVNodeHook(Yr,rr,kt),Mn&6)or(kt.component,cr,mr);else{if(Mn&128){kt.suspense.unmount(cr,mr);return}Nr&&invokeDirectiveHook(kt,null,rr,"beforeUnmount"),Mn&64?kt.type.remove(kt,rr,cr,yr,nr,mr):Rr&&(Tr!==Fragment||Or>0&&Or&64)?ir(Rr,rr,cr,!1,!0):(Tr===Fragment&&Or&384||!yr&&Mn&16)&&ir(Ar,rr,cr),mr&&hr(kt)}(Wr&&(Yr=Ir&&Ir.onVnodeUnmounted)||Nr)&&queuePostRenderEffect(()=>{Yr&&invokeVNodeHook(Yr,rr,kt),Nr&&invokeDirectiveHook(kt,null,rr,"unmounted")},cr)},hr=kt=>{const{type:rr,el:cr,anchor:mr,transition:yr}=kt;if(rr===Fragment){Ne(cr,mr);return}if(rr===Static){Ce(kt);return}const Tr=()=>{o(cr),yr&&!yr.persisted&&yr.afterLeave&&yr.afterLeave()};if(kt.shapeFlag&1&&yr&&!yr.persisted){const{leave:Ir,delayLeave:kr}=yr,Ar=()=>Ir(cr,Tr);kr?kr(kt.el,Tr,Ar):Ar()}else Tr()},Ne=(kt,rr)=>{let cr;for(;kt!==rr;)cr=v(kt),o(kt),kt=cr;o(rr)},or=(kt,rr,cr)=>{const{bum:mr,scope:yr,update:Tr,subTree:Ir,um:kr}=kt;mr&&invokeArrayFns(mr),yr.stop(),Tr&&(Tr.active=!1,ar(Ir,kt,rr,cr)),kr&&queuePostRenderEffect(kr,rr),queuePostRenderEffect(()=>{kt.isUnmounted=!0},rr),rr&&rr.pendingBranch&&!rr.isUnmounted&&kt.asyncDep&&!kt.asyncResolved&&kt.suspenseId===rr.pendingId&&(rr.deps--,rr.deps===0&&rr.resolve())},ir=(kt,rr,cr,mr=!1,yr=!1,Tr=0)=>{for(let Ir=Tr;Ir<kt.length;Ir++)ar(kt[Ir],rr,cr,mr,yr)},$e=kt=>kt.shapeFlag&6?$e(kt.component.subTree):kt.shapeFlag&128?kt.suspense.next():v(kt.anchor||kt.el),tr=(kt,rr,cr)=>{kt==null?rr._vnode&&ar(rr._vnode,null,null,!0):T(rr._vnode||null,kt,rr,null,null,null,cr),flushPreFlushCbs(),flushPostFlushCbs(),rr._vnode=kt},nr={p:T,um:ar,m:pr,r:hr,mt:xe,mc:Y,pc:er,pbc:Fe,n:$e,o:t};let Pt,Et;return r&&([Pt,Et]=r(nr)),{render:tr,hydrate:Pt,createApp:createAppAPI(tr,Pt)}}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function traverseStaticChildren(t,r,e=!1){const n=t.children,o=r.children;if(isArray$4(n)&&isArray$4(o))for(let s=0;s<n.length;s++){const a=n[s];let i=o[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[s]=cloneIfMounted(o[s]),i.el=a.el),e||traverseStaticChildren(a,i)),i.type===Text&&(i.el=a.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,o,s,a,i;const d=t.length;for(n=0;n<d;n++){const u=t[n];if(u!==0){if(o=e[e.length-1],t[o]<u){r[n]=o,e.push(n);continue}for(s=0,a=e.length-1;s<a;)i=s+a>>1,t[e[i]]<u?s=i+1:a=i;u<t[e[s]]&&(s>0&&(r[n]=e[s-1]),e[s]=n)}}for(s=e.length,a=e[s-1];s-- >0;)e[s]=a,a=r[a];return e}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={__isTeleport:!0,process(t,r,e,n,o,s,a,i,d,u){const{mc:c,pc:m,pbc:v,o:{insert:g,querySelector:b,createText:T,createComment:k}}=u,y=isTeleportDisabled(r.props);let{shapeFlag:A,children:V,dynamicChildren:Ce}=r;if(t==null){const ie=r.el=T(""),Oe=r.anchor=T("");g(ie,e,n),g(Oe,e,n);const he=r.target=resolveTarget(r.props,b),Y=r.targetAnchor=T("");he&&(g(Y,he),a=a||isTargetSVG(he));const ae=(Fe,ze)=>{A&16&&c(V,Fe,ze,o,s,a,i,d)};y?ae(e,Oe):he&&ae(he,Y)}else{r.el=t.el;const ie=r.anchor=t.anchor,Oe=r.target=t.target,he=r.targetAnchor=t.targetAnchor,Y=isTeleportDisabled(t.props),ae=Y?e:Oe,Fe=Y?ie:he;if(a=a||isTargetSVG(Oe),Ce?(v(t.dynamicChildren,Ce,ae,o,s,a,i),traverseStaticChildren(t,r,!0)):d||m(t,r,ae,Fe,o,s,a,i,!1),y)Y||moveTeleport(r,e,ie,u,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const ze=r.target=resolveTarget(r.props,b);ze&&moveTeleport(r,ze,null,u,0)}else Y&&moveTeleport(r,Oe,he,u,1)}updateCssVars(r)},remove(t,r,e,n,{um:o,o:{remove:s}},a){const{shapeFlag:i,children:d,anchor:u,targetAnchor:c,target:m,props:v}=t;if(m&&s(c),(a||!isTeleportDisabled(v))&&(s(u),i&16))for(let g=0;g<d.length;g++){const b=d[g];o(b,r,e,!0,!!b.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:o},s=2){s===0&&n(t.targetAnchor,r,e);const{el:a,anchor:i,shapeFlag:d,children:u,props:c}=t,m=s===2;if(m&&n(a,r,e),(!m||isTeleportDisabled(c))&&d&16)for(let v=0;v<u.length;v++)o(u[v],r,e,2);m&&n(i,r,e)}function hydrateTeleport(t,r,e,n,o,s,{o:{nextSibling:a,parentNode:i,querySelector:d}},u){const c=r.target=resolveTarget(r.props,d);if(c){const m=c._lpa||c.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=u(a(t),r,i(t),e,n,o,s),r.targetAnchor=m;else{r.anchor=a(t);let v=m;for(;v;)if(v=a(v),v&&v.nodeType===8&&v.data==="teleport anchor"){r.targetAnchor=v,c._lpa=r.targetAnchor&&a(r.targetAnchor);break}u(m,r,c,e,n,o,s)}updateCssVars(r)}return r.anchor&&a(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,o,s){return setupBlock(createBaseVNode(t,r,e,n,o,s,!0))}function createBlock(t,r,e,n,o){return setupBlock(createVNode(t,r,e,n,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?isString$2(t)||isRef(t)||isFunction$3(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null);function createBaseVNode(t,r=null,e=null,n=0,o=null,s=t===Fragment?0:1,a=!1,i=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return i?(normalizeChildren(d,e),s&128&&t.normalize(d)):e&&(d.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(d.patchFlag>0||s&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,o=null,s=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const i=cloneVNode(t,r,!0);return e&&normalizeChildren(i,e),isBlockTreeEnabled>0&&!s&&currentBlock&&(i.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=i:currentBlock.push(i)),i.patchFlag|=-2,i}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:i,style:d}=r;i&&!isString$2(i)&&(r.class=normalizeClass(i)),isObject$2(d)&&(isProxy(d)&&!isArray$4(d)&&(d=extend$1({},d)),r.style=normalizeStyle(d))}const a=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$3(t)?2:0;return createBaseVNode(t,r,e,n,o,a,s,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,r,e=!1){const{props:n,ref:o,patchFlag:s,children:a}=t,i=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:i,key:i&&normalizeKey(i),ref:r&&r.ref?e&&o?isArray$4(o)?o.concat(normalizeRef(r)):[o,normalizeRef(r)]:normalizeRef(r):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$4(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$4(r))e=16;else if(typeof r=="object")if(n&65){const o=r.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{e=32;const o=r._;!o&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$3(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const o in n)if(o==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(o==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(o)){const s=r[o],a=n[o];a&&s!==a&&!(isArray$4(s)&&s.includes(a))&&(r[o]=s?[].concat(s,a):a)}else o!==""&&(r[o]=n[o])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(t,r,e){const n=t.type,o=(r?r.appContext:t.appContext)||emptyAppContext,s={uid:uid$2++,vnode:t,type:n,parent:r,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,o),emitsOptions:normalizeEmitsOptions(n,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=r?r.root:s,s.emit=emit.bind(null,s),t.ce&&t.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(t=>currentInstance=t),internalSetCurrentInstance=t=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(r=>r(t)):globalCurrentInstanceSetters[0](t)};const setCurrentInstance=t=>{internalSetCurrentInstance(t),t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){isInSSRComponentSetup=r;const{props:e,children:n}=t.vnode,o=isStatefulComponent(t);initProps(t,e,o,r),initSlots(t,n);const s=o?setupStatefulComponent(t,r):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=e;if(n){const o=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const s=callWithErrorHandling(n,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),r)return s.then(a=>{handleSetupResult(t,a,r)}).catch(a=>{handleError(a,t,0)});t.asyncDep=s}else handleSetupResult(t,s,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$3(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const o=n.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:i,compilerOptions:d}=n,u=extend$1(extend$1({isCustomElement:s,delimiters:i},a),d);n.render=compile(o,u)}}t.render=n.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return track(t,"get","$attrs"),r[e]}}))}function createSetupContext(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}function getComponentName(t,r=!0){return isFunction$3(t)?t.displayName||t.name:t.name||r&&t.__name}function isClassComponent(t){return isFunction$3(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function h(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$4(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const o=r?doc.createElementNS(svgNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,o,s){const a=e?e.previousSibling:r.lastChild;if(o&&(o===s||o.nextSibling))for(;r.insertBefore(o.cloneNode(!0),e),!(o===s||!(o=o.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const i=templateContainer.content;if(n){const d=i.firstChild;for(;d.firstChild;)i.appendChild(d.firstChild);i.removeChild(d)}r.insertBefore(i,e)}return[a?a.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}};function patchClass(t,r,e){const n=t._vtc;n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}function patchStyle(t,r,e){const n=t.style,o=isString$2(e);if(e&&!o){if(r&&!isString$2(r))for(const s in r)e[s]==null&&setStyle(n,s,"");for(const s in e)setStyle(n,s,e[s])}else{const s=n.display;o?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$4(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize$1(n);for(let o=0;o<prefixes.length;o++){const s=prefixes[o]+n;if(s in t)return prefixCache[r]=s}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,o){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const s=isSpecialBooleanAttr(r);e==null||s&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,s?"":e)}}function patchDOMProp(t,r,e,n,o,s,a){if(r==="innerHTML"||r==="textContent"){n&&a(n,o,s),t[r]=e??"";return}const i=t.tagName;if(r==="value"&&i!=="PROGRESS"&&!i.includes("-")){t._value=e;const u=i==="OPTION"?t.getAttribute("value"):t.value,c=e??"";u!==c&&(t.value=c),e==null&&t.removeAttribute(r);return}let d=!1;if(e===""||e==null){const u=typeof t[r];u==="boolean"?e=includeBooleanAttr(e):e==null&&u==="string"?(e="",d=!0):u==="number"&&(e=0,d=!0)}try{t[r]=e}catch{}d&&t.removeAttribute(r)}function addEventListener(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}function patchEvent(t,r,e,n,o=null){const s=t._vei||(t._vei={}),a=s[r];if(n&&a)a.value=n;else{const[i,d]=parseName(r);if(n){const u=s[r]=createInvoker(n,o);addEventListener(t,i,u,d)}else a&&(removeEventListener(t,i,a,d),s[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$4(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>o=>!o._stopped&&n&&n(o))}else return r}const nativeOnRE=/^on[a-z]/,patchProp=(t,r,e,n,o=!1,s,a,i,d)=>{r==="class"?patchClass(t,n,o):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,a):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,o))?patchDOMProp(t,r,n,s,a,i,d):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,o))};function shouldSetAsProp(t,r,e,n){return n?!!(r==="innerHTML"||r==="textContent"||r in t&&nativeOnRE.test(r)&&isFunction$3(e)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(r)&&isString$2(e)?!1:r in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:r})=>h(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,r=[])=>{isArray$4(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$4(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const pe in t)pe in DOMTransitionPropsValidators||(r[pe]=t[pe]);if(t.css===!1)return r;const{name:e="v",type:n,duration:o,enterFromClass:s=`${e}-enter-from`,enterActiveClass:a=`${e}-enter-active`,enterToClass:i=`${e}-enter-to`,appearFromClass:d=s,appearActiveClass:u=a,appearToClass:c=i,leaveFromClass:m=`${e}-leave-from`,leaveActiveClass:v=`${e}-leave-active`,leaveToClass:g=`${e}-leave-to`}=t,b=normalizeDuration(o),T=b&&b[0],k=b&&b[1],{onBeforeEnter:y,onEnter:A,onEnterCancelled:V,onLeave:Ce,onLeaveCancelled:ie,onBeforeAppear:Oe=y,onAppear:he=A,onAppearCancelled:Y=V}=r,ae=(pe,le,xe)=>{removeTransitionClass(pe,le?c:i),removeTransitionClass(pe,le?u:a),xe&&xe()},Fe=(pe,le)=>{pe._isLeaving=!1,removeTransitionClass(pe,m),removeTransitionClass(pe,g),removeTransitionClass(pe,v),le&&le()},ze=pe=>(le,xe)=>{const ue=pe?he:A,Ve=()=>ae(le,pe,xe);callHook(ue,[le,Ve]),nextFrame(()=>{removeTransitionClass(le,pe?d:s),addTransitionClass(le,pe?c:i),hasExplicitCallback(ue)||whenTransitionEnds(le,n,T,Ve)})};return extend$1(r,{onBeforeEnter(pe){callHook(y,[pe]),addTransitionClass(pe,s),addTransitionClass(pe,a)},onBeforeAppear(pe){callHook(Oe,[pe]),addTransitionClass(pe,d),addTransitionClass(pe,u)},onEnter:ze(!1),onAppear:ze(!0),onLeave(pe,le){pe._isLeaving=!0;const xe=()=>Fe(pe,le);addTransitionClass(pe,m),forceReflow(),addTransitionClass(pe,v),nextFrame(()=>{pe._isLeaving&&(removeTransitionClass(pe,m),addTransitionClass(pe,g),hasExplicitCallback(Ce)||whenTransitionEnds(pe,n,k,xe))}),callHook(Ce,[pe,xe])},onEnterCancelled(pe){ae(pe,!1),callHook(V,[pe])},onAppearCancelled(pe){ae(pe,!0),callHook(Y,[pe])},onLeaveCancelled(pe){Fe(pe),callHook(ie,[pe])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber$1(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:e}=t;e&&(e.delete(r),e.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const o=t._endId=++endId,s=()=>{o===t._endId&&n()};if(e)return setTimeout(s,e);const{type:a,timeout:i,propCount:d}=getTransitionInfo(t,r);if(!a)return n();const u=a+"end";let c=0;const m=()=>{t.removeEventListener(u,v),s()},v=g=>{g.target===t&&++c>=d&&m()};setTimeout(()=>{c<d&&m()},i+1),t.addEventListener(u,v)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=b=>(e[b]||"").split(", "),o=n(`${TRANSITION}Delay`),s=n(`${TRANSITION}Duration`),a=getTimeout(o,s),i=n(`${ANIMATION}Delay`),d=n(`${ANIMATION}Duration`),u=getTimeout(i,d);let c=null,m=0,v=0;r===TRANSITION?a>0&&(c=TRANSITION,m=a,v=s.length):r===ANIMATION?u>0&&(c=ANIMATION,m=u,v=d.length):(m=Math.max(a,u),c=m>0?a>u?TRANSITION:ANIMATION:null,v=c?c===TRANSITION?s.length:d.length:0);const g=c===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:c,timeout:m,propCount:v,hasTransform:g}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let o,s;return onUpdated(()=>{if(!o.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(o[0].el,e.vnode.el,a))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const i=o.filter(applyTranslation);forceReflow(),i.forEach(d=>{const u=d.el,c=u.style;addTransitionClass(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const m=u._moveCb=v=>{v&&v.target!==u||(!v||/transform$/.test(v.propertyName))&&(u.removeEventListener("transitionend",m),u._moveCb=null,removeTransitionClass(u,a))};u.addEventListener("transitionend",m)})}),()=>{const a=toRaw(t),i=resolveTransitionProps(a);let d=a.tag||Fragment;o=s,s=r.default?getTransitionRawChildren(r.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&setTransitionHooks(c,resolveTransitionHooks(c,i,n,e))}if(o)for(let u=0;u<o.length;u++){const c=o[u];setTransitionHooks(c,resolveTransitionHooks(c,i,n,e)),positionMap.set(c,c.el.getBoundingClientRect())}return createVNode(d,null,s)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const r=t.el;r._moveCb&&r._moveCb(),r._enterCb&&r._enterCb()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const r=positionMap.get(t),e=newPositionMap.get(t),n=r.left-e.left,o=r.top-e.top;if(n||o){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${o}px)`,s.transitionDuration="0s",t}}function hasCSSTransform(t,r,e){const n=t.cloneNode();t._vtc&&t._vtc.forEach(a=>{a.split(/\s+/).forEach(i=>i&&n.classList.remove(i))}),e.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const o=r.nodeType===1?r:r.parentNode;o.appendChild(n);const{hasTransform:s}=getTransitionInfo(n);return o.removeChild(n),s}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$4(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},o){t._assign=getModelAssigner(o);const s=n||o.props&&o.props.type==="number";addEventListener(t,r?"change":"input",a=>{if(a.target.composing)return;let i=t.value;e&&(i=i.trim()),s&&(i=looseToNumber(i)),t._assign(i)}),e&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:o}},s){if(t._assign=getModelAssigner(s),t.composing||document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===r||(o||t.type==="number")&&looseToNumber(t.value)===r))return;const a=r??"";t.value!==a&&(t.value=a)}},vModelCheckbox={deep:!0,created(t,r,e){t._assign=getModelAssigner(e),addEventListener(t,"change",()=>{const n=t._modelValue,o=getValue$2(t),s=t.checked,a=t._assign;if(isArray$4(n)){const i=looseIndexOf(n,o),d=i!==-1;if(s&&!d)a(n.concat(o));else if(!s&&d){const u=[...n];u.splice(i,1),a(u)}}else if(isSet$2(n)){const i=new Set(n);s?i.add(o):i.delete(o),a(i)}else a(getCheckboxValue(t,s))})},mounted:setChecked,beforeUpdate(t,r,e){t._assign=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$4(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet$2(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t._assign=getModelAssigner(e),addEventListener(t,"change",()=>{t._assign(getValue$2(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t._assign=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue$2(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>(e,...n)=>{for(let o=0;o<r.length;o++){const s=modifierGuards[r[o]];if(s&&s(e,r))return}return t(e,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>e=>{if(!("key"in e))return;const n=hyphenate(e.key);if(r.some(o=>o===n||keyNames[o]===n))return t(e)},vShow={beforeMount(t,{value:r},{transition:e}){t._vod=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...t)=>{ensureRenderer().render(...t)},createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const o=normalizeContainer(n);if(!o)return;const s=r._component;!isFunction$3(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.innerHTML="";const a=e(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},r};function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,r){const e={};for(const n in r){const o=r[n];e[n]=isArray$3(o)?o.map(t):t(o)}return e}const noop$2=()=>{},isArray$3=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,r,e="/"){let n,o={},s="",a="";const i=r.indexOf("#");let d=r.indexOf("?");return i<d&&i>=0&&(d=-1),d>-1&&(n=r.slice(0,d),s=r.slice(d+1,i>-1?i:r.length),o=t(s)),i>-1&&(n=n||r.slice(0,i),a=r.slice(i,r.length)),n=resolveRelativePath(n??r,e),{fullPath:n+(s&&"?")+s+a,path:n,query:o,hash:a}}function stringifyURL(t,r){const e=r.query?t(r.query):"";return r.path+(e&&"?")+e+(r.hash||"")}function stripBase(t,r){return!r||!t.toLowerCase().startsWith(r.toLowerCase())?t:t.slice(r.length)||"/"}function isSameRouteLocation(t,r,e){const n=r.matched.length-1,o=e.matched.length-1;return n>-1&&n===o&&isSameRouteRecord(r.matched[n],e.matched[o])&&isSameRouteLocationParams(r.params,e.params)&&t(r.query)===t(e.query)&&r.hash===e.hash}function isSameRouteRecord(t,r){return(t.aliasOf||t)===(r.aliasOf||r)}function isSameRouteLocationParams(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const e in t)if(!isSameRouteLocationParamsValue(t[e],r[e]))return!1;return!0}function isSameRouteLocationParamsValue(t,r){return isArray$3(t)?isEquivalentArray(t,r):isArray$3(r)?isEquivalentArray(r,t):t===r}function isEquivalentArray(t,r){return isArray$3(r)?t.length===r.length&&t.every((e,n)=>e===r[n]):t.length===1&&t[0]===r}function resolveRelativePath(t,r){if(t.startsWith("/"))return t;if(!t)return r;const e=r.split("/"),n=t.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let s=e.length-1,a,i;for(a=0;a<n.length;a++)if(i=n[a],i!==".")if(i==="..")s>1&&s--;else break;return e.slice(0,s).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const r=document.querySelector("base");t=r&&r.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,r){return t.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(t,r){const e=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:r.behavior,left:n.left-e.left-(r.left||0),top:n.top-e.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let r;if("el"in t){const e=t.el,n=typeof e=="string"&&e.startsWith("#"),o=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!o)return;r=getElementPosition(o,t)}else r=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.pageXOffset,r.top!=null?r.top:window.pageYOffset)}function getScrollKey(t,r){return(history.state?history.state.position-r:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,r){scrollPositions.set(t,r)}function getSavedScrollPosition(t){const r=scrollPositions.get(t);return scrollPositions.delete(t),r}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,r){const{pathname:e,search:n,hash:o}=r,s=t.indexOf("#");if(s>-1){let i=o.includes(t.slice(s))?t.slice(s).length:1,d=o.slice(i);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(e,t)+n+o}function useHistoryListeners(t,r,e,n){let o=[],s=[],a=null;const i=({state:v})=>{const g=createCurrentLocation(t,location),b=e.value,T=r.value;let k=0;if(v){if(e.value=g,r.value=v,a&&a===b){a=null;return}k=T?v.position-T.position:0}else n(g);o.forEach(y=>{y(e.value,b,{delta:k,type:NavigationType.pop,direction:k?k>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){a=e.value}function u(v){o.push(v);const g=()=>{const b=o.indexOf(v);b>-1&&o.splice(b,1)};return s.push(g),g}function c(){const{history:v}=window;v.state&&v.replaceState(assign({},v.state,{scroll:computeScrollPosition()}),"")}function m(){for(const v of s)v();s=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:d,listen:u,destroy:m}}function buildState(t,r,e,n=!1,o=!1){return{back:t,current:r,forward:e,replaced:n,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:r,location:e}=window,n={value:createCurrentLocation(t,e)},o={value:r.state};o.value||s(n.value,{back:null,current:n.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function s(d,u,c){const m=t.indexOf("#"),v=m>-1?(e.host&&document.querySelector("base")?t:t.slice(m))+d:createBaseLocation()+t+d;try{r[c?"replaceState":"pushState"](u,"",v),o.value=u}catch(g){console.error(g),e[c?"replace":"assign"](v)}}function a(d,u){const c=assign({},r.state,buildState(o.value.back,d,o.value.forward,!0),u,{position:o.value.position});s(d,c,!0),n.value=d}function i(d,u){const c=assign({},o.value,r.state,{forward:d,scroll:computeScrollPosition()});s(c.current,c,!0);const m=assign({},buildState(n.value,d,null),{position:c.position+1},u);s(d,m,!1),n.value=d}return{location:n,state:o,push:i,replace:a}}function createWebHistory(t){t=normalizeBase(t);const r=useHistoryStateNavigation(t),e=useHistoryListeners(t,r.state,r.location,r.replace);function n(s,a=!0){a||e.pauseListeners(),history.go(s)}const o=assign({location:"",base:t,go:n,createHref:createHref.bind(null,t)},r,e);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>r.state.value}),o}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,r){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(t,r){return t instanceof Error&&NavigationFailureSymbol in t&&(r==null||!!(t.type&r))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,r){const e=assign({},BASE_PATH_PARSER_OPTIONS,r),n=[];let o=e.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];e.strict&&!u.length&&(o+="/");for(let m=0;m<u.length;m++){const v=u[m];let g=40+(e.sensitive?.25:0);if(v.type===0)m||(o+="/"),o+=v.value.replace(REGEX_CHARS_RE,"\\$&"),g+=40;else if(v.type===1){const{value:b,repeatable:T,optional:k,regexp:y}=v;s.push({name:b,repeatable:T,optional:k});const A=y||BASE_PARAM_PATTERN;if(A!==BASE_PARAM_PATTERN){g+=10;try{new RegExp(`(${A})`)}catch(Ce){throw new Error(`Invalid custom RegExp for param "${b}" (${A}): `+Ce.message)}}let V=T?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;m||(V=k&&u.length<2?`(?:/${V})`:"/"+V),k&&(V+="?"),o+=V,g+=20,k&&(g+=-8),T&&(g+=-20),A===".*"&&(g+=-50)}c.push(g)}n.push(c)}if(e.strict&&e.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}e.strict||(o+="/?"),e.end?o+="$":e.strict&&(o+="(?:/|$)");const a=new RegExp(o,e.sensitive?"":"i");function i(u){const c=u.match(a),m={};if(!c)return null;for(let v=1;v<c.length;v++){const g=c[v]||"",b=s[v-1];m[b.name]=g&&b.repeatable?g.split("/"):g}return m}function d(u){let c="",m=!1;for(const v of t){(!m||!c.endsWith("/"))&&(c+="/"),m=!1;for(const g of v)if(g.type===0)c+=g.value;else if(g.type===1){const{value:b,repeatable:T,optional:k}=g,y=b in u?u[b]:"";if(isArray$3(y)&&!T)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const A=isArray$3(y)?y.join("/"):y;if(!A)if(k)v.length<2&&(c.endsWith("/")?c=c.slice(0,-1):m=!0);else throw new Error(`Missing required param "${b}"`);c+=A}}return c||"/"}return{re:a,score:n,keys:s,parse:i,stringify:d}}function compareScoreArray(t,r){let e=0;for(;e<t.length&&e<r.length;){const n=r[e]-t[e];if(n)return n;e++}return t.length<r.length?t.length===1&&t[0]===40+40?-1:1:t.length>r.length?r.length===1&&r[0]===40+40?1:-1:0}function comparePathParserScore(t,r){let e=0;const n=t.score,o=r.score;for(;e<n.length&&e<o.length;){const s=compareScoreArray(n[e],o[e]);if(s)return s;e++}if(Math.abs(o.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(o))return-1}return o.length-n.length}function isLastScoreNegative(t){const r=t[t.length-1];return t.length>0&&r[r.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function r(g){throw new Error(`ERR (${e})/"${u}": ${g}`)}let e=0,n=e;const o=[];let s;function a(){s&&o.push(s),s=[]}let i=0,d,u="",c="";function m(){u&&(e===0?s.push({type:0,value:u}):e===1||e===2||e===3?(s.length>1&&(d==="*"||d==="+")&&r(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):r("Invalid state to consume buffer"),u="")}function v(){u+=d}for(;i<t.length;){if(d=t[i++],d==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:d==="/"?(u&&m(),a()):d===":"?(m(),e=1):v();break;case 4:v(),e=n;break;case 1:d==="("?e=2:VALID_PARAM_RE.test(d)?v():(m(),e=0,d!=="*"&&d!=="?"&&d!=="+"&&i--);break;case 2:d===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+d:e=3:c+=d;break;case 3:m(),e=0,d!=="*"&&d!=="?"&&d!=="+"&&i--,c="";break;default:r("Unknown state");break}}return e===2&&r(`Unfinished custom RegExp for param "${u}"`),m(),a(),o}function createRouteRecordMatcher(t,r,e){const n=tokensToParser(tokenizePath(t.path),e),o=assign(n,{record:t,parent:r,children:[],alias:[]});return r&&!o.record.aliasOf==!r.record.aliasOf&&r.children.push(o),o}function createRouterMatcher(t,r){const e=[],n=new Map;r=mergeOptions({strict:!1,end:!0,sensitive:!1},r);function o(c){return n.get(c)}function s(c,m,v){const g=!v,b=normalizeRouteRecord(c);b.aliasOf=v&&v.record;const T=mergeOptions(r,c),k=[b];if("alias"in c){const V=typeof c.alias=="string"?[c.alias]:c.alias;for(const Ce of V)k.push(assign({},b,{components:v?v.record.components:b.components,path:Ce,aliasOf:v?v.record:b}))}let y,A;for(const V of k){const{path:Ce}=V;if(m&&Ce[0]!=="/"){const ie=m.record.path,Oe=ie[ie.length-1]==="/"?"":"/";V.path=m.record.path+(Ce&&Oe+Ce)}if(y=createRouteRecordMatcher(V,m,T),v?v.alias.push(y):(A=A||y,A!==y&&A.alias.push(y),g&&c.name&&!isAliasRecord(y)&&a(c.name)),b.children){const ie=b.children;for(let Oe=0;Oe<ie.length;Oe++)s(ie[Oe],y,v&&v.children[Oe])}v=v||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&d(y)}return A?()=>{a(A)}:noop$2}function a(c){if(isRouteName(c)){const m=n.get(c);m&&(n.delete(c),e.splice(e.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=e.indexOf(c);m>-1&&(e.splice(m,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function i(){return e}function d(c){let m=0;for(;m<e.length&&comparePathParserScore(c,e[m])>=0&&(c.record.path!==e[m].record.path||!isRecordChildOf(c,e[m]));)m++;e.splice(m,0,c),c.record.name&&!isAliasRecord(c)&&n.set(c.record.name,c)}function u(c,m){let v,g={},b,T;if("name"in c&&c.name){if(v=n.get(c.name),!v)throw createRouterError(1,{location:c});T=v.record.name,g=assign(paramsFromLocation(m.params,v.keys.filter(A=>!A.optional).map(A=>A.name)),c.params&&paramsFromLocation(c.params,v.keys.map(A=>A.name))),b=v.stringify(g)}else if("path"in c)b=c.path,v=e.find(A=>A.re.test(b)),v&&(g=v.parse(b),T=v.record.name);else{if(v=m.name?n.get(m.name):e.find(A=>A.re.test(m.path)),!v)throw createRouterError(1,{location:c,currentLocation:m});T=v.record.name,g=assign({},m.params,c.params),b=v.stringify(g)}const k=[];let y=v;for(;y;)k.unshift(y.record),y=y.parent;return{name:T,path:b,params:g,matched:k,meta:mergeMetaFields(k)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:a,getRoutes:i,getRecordMatcher:o}}function paramsFromLocation(t,r){const e={};for(const n of r)n in t&&(e[n]=t[n]);return e}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const r={},e=t.props||!1;if("component"in t)r.default=e;else for(const n in t.components)r[n]=typeof e=="object"?e[n]:e;return r}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((r,e)=>assign(r,e.meta),{})}function mergeOptions(t,r){const e={};for(const n in t)e[n]=n in r?r[n]:t[n];return e}function isRecordChildOf(t,r){return r.children.some(e=>e===t||isRecordChildOf(t,e))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const r={};if(t===""||t==="?")return r;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<n.length;++o){const s=n[o].replace(PLUS_RE," "),a=s.indexOf("="),i=decode(a<0?s:s.slice(0,a)),d=a<0?null:decode(s.slice(a+1));if(i in r){let u=r[i];isArray$3(u)||(u=r[i]=[u]),u.push(d)}else r[i]=d}return r}function stringifyQuery(t){let r="";for(let e in t){const n=t[e];if(e=encodeQueryKey(e),n==null){n!==void 0&&(r+=(r.length?"&":"")+e);continue}(isArray$3(n)?n.map(s=>s&&encodeQueryValue(s)):[n&&encodeQueryValue(n)]).forEach(s=>{s!==void 0&&(r+=(r.length?"&":"")+e,s!=null&&(r+="="+s))})}return r}function normalizeQuery(t){const r={};for(const e in t){const n=t[e];n!==void 0&&(r[e]=isArray$3(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function r(n){return t.push(n),()=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)}}function e(){t=[]}return{add:r,list:()=>t.slice(),reset:e}}function guardToPromiseFn(t,r,e,n,o){const s=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((a,i)=>{const d=m=>{m===!1?i(createRouterError(4,{from:e,to:r})):m instanceof Error?i(m):isRouteLocation(m)?i(createRouterError(2,{from:r,to:m})):(s&&n.enterCallbacks[o]===s&&typeof m=="function"&&s.push(m),a())},u=t.call(n&&n.instances[o],r,e,d);let c=Promise.resolve(u);t.length<3&&(c=c.then(d)),c.catch(m=>i(m))})}function extractComponentsGuards(t,r,e,n){const o=[];for(const s of t)for(const a in s.components){let i=s.components[a];if(!(r!=="beforeRouteEnter"&&!s.instances[a]))if(isRouteComponent(i)){const u=(i.__vccOpts||i)[r];u&&o.push(guardToPromiseFn(u,e,n,s,a))}else{let d=i();o.push(()=>d.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const c=isESModule(u)?u.default:u;s.components[a]=c;const v=(c.__vccOpts||c)[r];return v&&guardToPromiseFn(v,e,n,s,a)()}))}}return o}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const r=inject(routerKey),e=inject(routeLocationKey),n=computed(()=>r.resolve(unref(t.to))),o=computed(()=>{const{matched:d}=n.value,{length:u}=d,c=d[u-1],m=e.matched;if(!c||!m.length)return-1;const v=m.findIndex(isSameRouteRecord.bind(null,c));if(v>-1)return v;const g=getOriginalPath(d[u-2]);return u>1&&getOriginalPath(c)===g&&m[m.length-1].path!==g?m.findIndex(isSameRouteRecord.bind(null,d[u-2])):v}),s=computed(()=>o.value>-1&&includesParams(e.params,n.value.params)),a=computed(()=>o.value>-1&&o.value===e.matched.length-1&&isSameRouteLocationParams(e.params,n.value.params));function i(d={}){return guardEvent(d)?r[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop$2):Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:s,isExactActive:a,navigate:i}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:r}){const e=reactive(useLink(t)),{options:n}=inject(routerKey),o=computed(()=>({[getLinkClass(t.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[getLinkClass(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const s=r.default&&r.default(e);return t.custom?s:h("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:o.value},s)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const r=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,r){for(const e in r){const n=r[e],o=t[e];if(typeof n=="string"){if(n!==o)return!1}else if(!isArray$3(o)||o.length!==n.length||n.some((s,a)=>s!==o[a]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,r,e)=>t??r??e,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:r,slots:e}){const n=inject(routerViewLocationKey),o=computed(()=>t.route||n.value),s=inject(viewDepthKey,0),a=computed(()=>{let u=unref(s);const{matched:c}=o.value;let m;for(;(m=c[u])&&!m.components;)u++;return u}),i=computed(()=>o.value.matched[a.value]);provide(viewDepthKey,computed(()=>a.value+1)),provide(matchedRouteKey,i),provide(routerViewLocationKey,o);const d=ref();return watch(()=>[d.value,i.value,t.name],([u,c,m],[v,g,b])=>{c&&(c.instances[m]=u,g&&g!==c&&u&&u===v&&(c.leaveGuards.size||(c.leaveGuards=g.leaveGuards),c.updateGuards.size||(c.updateGuards=g.updateGuards))),u&&c&&(!g||!isSameRouteRecord(c,g)||!v)&&(c.enterCallbacks[m]||[]).forEach(T=>T(u))},{flush:"post"}),()=>{const u=o.value,c=t.name,m=i.value,v=m&&m.components[c];if(!v)return normalizeSlot(e.default,{Component:v,route:u});const g=m.props[c],b=g?g===!0?u.params:typeof g=="function"?g(u):g:null,k=h(v,assign({},b,r,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(m.instances[c]=null)},ref:d}));return normalizeSlot(e.default,{Component:k,route:u})||k}}});function normalizeSlot(t,r){if(!t)return null;const e=t(r);return e.length===1?e[0]:e}const RouterView=RouterViewImpl;function createRouter(t){const r=createRouterMatcher(t.routes,t),e=t.parseQuery||parseQuery,n=t.stringifyQuery||stringifyQuery,o=t.history,s=useCallbacks(),a=useCallbacks(),i=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let u=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=applyToParams.bind(null,$e=>""+$e),m=applyToParams.bind(null,encodeParam),v=applyToParams.bind(null,decode);function g($e,tr){let nr,Pt;return isRouteName($e)?(nr=r.getRecordMatcher($e),Pt=tr):Pt=$e,r.addRoute(Pt,nr)}function b($e){const tr=r.getRecordMatcher($e);tr&&r.removeRoute(tr)}function T(){return r.getRoutes().map($e=>$e.record)}function k($e){return!!r.getRecordMatcher($e)}function y($e,tr){if(tr=assign({},tr||d.value),typeof $e=="string"){const cr=parseURL(e,$e,tr.path),mr=r.resolve({path:cr.path},tr),yr=o.createHref(cr.fullPath);return assign(cr,mr,{params:v(mr.params),hash:decode(cr.hash),redirectedFrom:void 0,href:yr})}let nr;if("path"in $e)nr=assign({},$e,{path:parseURL(e,$e.path,tr.path).path});else{const cr=assign({},$e.params);for(const mr in cr)cr[mr]==null&&delete cr[mr];nr=assign({},$e,{params:m(cr)}),tr.params=m(tr.params)}const Pt=r.resolve(nr,tr),Et=$e.hash||"";Pt.params=c(v(Pt.params));const kt=stringifyURL(n,assign({},$e,{hash:encodeHash(Et),path:Pt.path})),rr=o.createHref(kt);return assign({fullPath:kt,hash:Et,query:n===stringifyQuery?normalizeQuery($e.query):$e.query||{}},Pt,{redirectedFrom:void 0,href:rr})}function A($e){return typeof $e=="string"?parseURL(e,$e,d.value.path):assign({},$e)}function V($e,tr){if(u!==$e)return createRouterError(8,{from:tr,to:$e})}function Ce($e){return he($e)}function ie($e){return Ce(assign(A($e),{replace:!0}))}function Oe($e){const tr=$e.matched[$e.matched.length-1];if(tr&&tr.redirect){const{redirect:nr}=tr;let Pt=typeof nr=="function"?nr($e):nr;return typeof Pt=="string"&&(Pt=Pt.includes("?")||Pt.includes("#")?Pt=A(Pt):{path:Pt},Pt.params={}),assign({query:$e.query,hash:$e.hash,params:"path"in Pt?{}:$e.params},Pt)}}function he($e,tr){const nr=u=y($e),Pt=d.value,Et=$e.state,kt=$e.force,rr=$e.replace===!0,cr=Oe(nr);if(cr)return he(assign(A(cr),{state:typeof cr=="object"?assign({},Et,cr.state):Et,force:kt,replace:rr}),tr||nr);const mr=nr;mr.redirectedFrom=tr;let yr;return!kt&&isSameRouteLocation(n,Pt,nr)&&(yr=createRouterError(16,{to:mr,from:Pt}),pr(Pt,Pt,!0,!1)),(yr?Promise.resolve(yr):Fe(mr,Pt)).catch(Tr=>isNavigationFailure(Tr)?isNavigationFailure(Tr,2)?Tr:ur(Tr):er(Tr,mr,Pt)).then(Tr=>{if(Tr){if(isNavigationFailure(Tr,2))return he(assign({replace:rr},A(Tr.to),{state:typeof Tr.to=="object"?assign({},Et,Tr.to.state):Et,force:kt}),tr||mr)}else Tr=pe(mr,Pt,!0,rr,Et);return ze(mr,Pt,Tr),Tr})}function Y($e,tr){const nr=V($e,tr);return nr?Promise.reject(nr):Promise.resolve()}function ae($e){const tr=Ne.values().next().value;return tr&&typeof tr.runWithContext=="function"?tr.runWithContext($e):$e()}function Fe($e,tr){let nr;const[Pt,Et,kt]=extractChangingRecords($e,tr);nr=extractComponentsGuards(Pt.reverse(),"beforeRouteLeave",$e,tr);for(const cr of Pt)cr.leaveGuards.forEach(mr=>{nr.push(guardToPromiseFn(mr,$e,tr))});const rr=Y.bind(null,$e,tr);return nr.push(rr),ir(nr).then(()=>{nr=[];for(const cr of s.list())nr.push(guardToPromiseFn(cr,$e,tr));return nr.push(rr),ir(nr)}).then(()=>{nr=extractComponentsGuards(Et,"beforeRouteUpdate",$e,tr);for(const cr of Et)cr.updateGuards.forEach(mr=>{nr.push(guardToPromiseFn(mr,$e,tr))});return nr.push(rr),ir(nr)}).then(()=>{nr=[];for(const cr of kt)if(cr.beforeEnter)if(isArray$3(cr.beforeEnter))for(const mr of cr.beforeEnter)nr.push(guardToPromiseFn(mr,$e,tr));else nr.push(guardToPromiseFn(cr.beforeEnter,$e,tr));return nr.push(rr),ir(nr)}).then(()=>($e.matched.forEach(cr=>cr.enterCallbacks={}),nr=extractComponentsGuards(kt,"beforeRouteEnter",$e,tr),nr.push(rr),ir(nr))).then(()=>{nr=[];for(const cr of a.list())nr.push(guardToPromiseFn(cr,$e,tr));return nr.push(rr),ir(nr)}).catch(cr=>isNavigationFailure(cr,8)?cr:Promise.reject(cr))}function ze($e,tr,nr){i.list().forEach(Pt=>ae(()=>Pt($e,tr,nr)))}function pe($e,tr,nr,Pt,Et){const kt=V($e,tr);if(kt)return kt;const rr=tr===START_LOCATION_NORMALIZED,cr=isBrowser?history.state:{};nr&&(Pt||rr?o.replace($e.fullPath,assign({scroll:rr&&cr&&cr.scroll},Et)):o.push($e.fullPath,Et)),d.value=$e,pr($e,tr,nr,rr),ur()}let le;function xe(){le||(le=o.listen(($e,tr,nr)=>{if(!or.listening)return;const Pt=y($e),Et=Oe(Pt);if(Et){he(assign(Et,{replace:!0}),Pt).catch(noop$2);return}u=Pt;const kt=d.value;isBrowser&&saveScrollPosition(getScrollKey(kt.fullPath,nr.delta),computeScrollPosition()),Fe(Pt,kt).catch(rr=>isNavigationFailure(rr,12)?rr:isNavigationFailure(rr,2)?(he(rr.to,Pt).then(cr=>{isNavigationFailure(cr,20)&&!nr.delta&&nr.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop$2),Promise.reject()):(nr.delta&&o.go(-nr.delta,!1),er(rr,Pt,kt))).then(rr=>{rr=rr||pe(Pt,kt,!1),rr&&(nr.delta&&!isNavigationFailure(rr,8)?o.go(-nr.delta,!1):nr.type===NavigationType.pop&&isNavigationFailure(rr,20)&&o.go(-1,!1)),ze(Pt,kt,rr)}).catch(noop$2)}))}let ue=useCallbacks(),Ve=useCallbacks(),Ue;function er($e,tr,nr){ur($e);const Pt=Ve.list();return Pt.length?Pt.forEach(Et=>Et($e,tr,nr)):console.error($e),Promise.reject($e)}function At(){return Ue&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise(($e,tr)=>{ue.add([$e,tr])})}function ur($e){return Ue||(Ue=!$e,xe(),ue.list().forEach(([tr,nr])=>$e?nr($e):tr()),ue.reset()),$e}function pr($e,tr,nr,Pt){const{scrollBehavior:Et}=t;if(!isBrowser||!Et)return Promise.resolve();const kt=!nr&&getSavedScrollPosition(getScrollKey($e.fullPath,0))||(Pt||!nr)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Et($e,tr,kt)).then(rr=>rr&&scrollToPosition(rr)).catch(rr=>er(rr,$e,tr))}const ar=$e=>o.go($e);let hr;const Ne=new Set,or={currentRoute:d,listening:!0,addRoute:g,removeRoute:b,hasRoute:k,getRoutes:T,resolve:y,options:t,push:Ce,replace:ie,go:ar,back:()=>ar(-1),forward:()=>ar(1),beforeEach:s.add,beforeResolve:a.add,afterEach:i.add,onError:Ve.add,isReady:At,install($e){const tr=this;$e.component("RouterLink",RouterLink),$e.component("RouterView",RouterView),$e.config.globalProperties.$router=tr,Object.defineProperty($e.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!hr&&d.value===START_LOCATION_NORMALIZED&&(hr=!0,Ce(o.location).catch(Et=>{}));const nr={};for(const Et in START_LOCATION_NORMALIZED)Object.defineProperty(nr,Et,{get:()=>d.value[Et],enumerable:!0});$e.provide(routerKey,tr),$e.provide(routeLocationKey,shallowReactive(nr)),$e.provide(routerViewLocationKey,d);const Pt=$e.unmount;Ne.add($e),$e.unmount=function(){Ne.delete($e),Ne.size<1&&(u=START_LOCATION_NORMALIZED,le&&le(),le=null,d.value=START_LOCATION_NORMALIZED,hr=!1,Ue=!1),Pt()}}};function ir($e){return $e.reduce((tr,nr)=>tr.then(()=>ae(nr)),Promise.resolve())}return or}function extractChangingRecords(t,r){const e=[],n=[],o=[],s=Math.max(r.matched.length,t.matched.length);for(let a=0;a<s;a++){const i=r.matched[a];i&&(t.matched.find(u=>isSameRouteRecord(u,i))?n.push(i):e.push(i));const d=t.matched[a];d&&(r.matched.find(u=>isSameRouteRecord(u,d))||o.push(d))}return[e,n,o]}function useRouter(){return inject(routerKey)}const FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,obtainAllFocusableElements$1=t=>Array.from(t.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(r=>isFocusable(r)&&isVisible(r)),isFocusable=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},isLeaf=t=>!t.getAttribute("aria-owns"),getSibling=(t,r,e)=>{const{parentNode:n}=t;if(!n)return null;const o=n.querySelectorAll(e),s=Array.prototype.indexOf.call(o,t);return o[s+r]||null},focusNode=t=>{t&&(t.focus(),!isLeaf(t)&&t.click())},composeEventHandlers=(t,r,{checkForDefaultPrevented:e=!0}={})=>o=>{const s=t==null?void 0:t(o);if(e===!1||!s)return r==null?void 0:r(o)},whenMouse=t=>r=>r.pointerType==="mouse"?t(r):void 0;var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",noop$1=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,r){function e(...n){return new Promise((o,s)=>{Promise.resolve(t(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(o).catch(s)})}return e}function debounceFilter(t,r={}){let e,n,o=noop$1;const s=i=>{clearTimeout(i),o(),o=noop$1};return i=>{const d=resolveUnref(t),u=resolveUnref(r.maxWait);return e&&s(e),d<=0||u!==void 0&&u<=0?(n&&(s(n),n=null),Promise.resolve(i())):new Promise((c,m)=>{o=r.rejectOnCancel?m:c,u&&!n&&(n=setTimeout(()=>{e&&s(e),n=null,c(i())},u)),e=setTimeout(()=>{n&&s(n),n=null,c(i())},d)})}}function throttleFilter(t,r=!0,e=!0,n=!1){let o=0,s,a=!0,i=noop$1,d;const u=()=>{s&&(clearTimeout(s),s=void 0,i(),i=noop$1)};return m=>{const v=resolveUnref(t),g=Date.now()-o,b=()=>d=m();return u(),v<=0?(o=Date.now(),b()):(g>v&&(e||!a)?(o=Date.now(),b()):r&&(d=new Promise((T,k)=>{i=n?k:T,s=setTimeout(()=>{o=Date.now(),a=!0,T(b()),u()},Math.max(0,v-g))})),!e&&!s&&(s=setTimeout(()=>a=!0,v)),a=!1,d)}}function identity$1(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function useDebounceFn(t,r=200,e={}){return createFilterWrapper(debounceFilter(r,e),t)}function refDebounced(t,r=200,e={}){const n=ref(t.value),o=useDebounceFn(()=>{n.value=t.value},r,e);return watch(t,()=>o()),n}function useThrottleFn(t,r=200,e=!1,n=!0,o=!1){return createFilterWrapper(throttleFilter(r,e,n,o),t)}function tryOnMounted(t,r=!0){getCurrentInstance()?onMounted(t):r?t():nextTick(t)}function useTimeoutFn(t,r,e={}){const{immediate:n=!0}=e,o=ref(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function i(){o.value=!1,a()}function d(...u){a(),o.value=!0,s=setTimeout(()=>{o.value=!1,s=null,t(...u)},resolveUnref(r))}return n&&(o.value=!0,isClient&&d()),tryOnScopeDispose(i),{isPending:readonly(o),start:d,stop:i}}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let r,e,n,o;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,o]=t,r=defaultWindow):[r,e,n,o]=t,!r)return noop$1;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const s=[],a=()=>{s.forEach(c=>c()),s.length=0},i=(c,m,v,g)=>(c.addEventListener(m,v,g),()=>c.removeEventListener(m,v,g)),d=watch(()=>[unrefElement(r),resolveUnref(o)],([c,m])=>{a(),c&&s.push(...e.flatMap(v=>n.map(g=>i(c,v,g,m))))},{immediate:!0,flush:"post"}),u=()=>{d(),a()};return tryOnScopeDispose(u),u}let _iOSWorkaround=!1;function onClickOutside(t,r,e={}){const{window:n=defaultWindow,ignore:o=[],capture:s=!0,detectIframe:a=!1}=e;if(!n)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(n.document.body.children).forEach(v=>v.addEventListener("click",noop$1)));let i=!0;const d=v=>o.some(g=>{if(typeof g=="string")return Array.from(n.document.querySelectorAll(g)).some(b=>b===v.target||v.composedPath().includes(b));{const b=unrefElement(g);return b&&(v.target===b||v.composedPath().includes(b))}}),c=[useEventListener(n,"click",v=>{const g=unrefElement(t);if(!(!g||g===v.target||v.composedPath().includes(g))){if(v.detail===0&&(i=!d(v)),!i){i=!0;return}r(v)}},{passive:!0,capture:s}),useEventListener(n,"pointerdown",v=>{const g=unrefElement(t);g&&(i=!v.composedPath().includes(g)&&!d(v))},{passive:!0}),a&&useEventListener(n,"blur",v=>{var g;const b=unrefElement(t);((g=n.document.activeElement)==null?void 0:g.tagName)==="IFRAME"&&!(b!=null&&b.contains(n.document.activeElement))&&r(v)})].filter(Boolean);return()=>c.forEach(v=>v())}function useSupported(t,r=!1){const e=ref(),n=()=>e.value=!!t();return n(),tryOnMounted(n,r),e}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};function useCssVar(t,r,{window:e=defaultWindow,initialValue:n=""}={}){const o=ref(n),s=computed(()=>{var a;return unrefElement(r)||((a=e==null?void 0:e.document)==null?void 0:a.documentElement)});return watch([s,()=>resolveUnref(t)],([a,i])=>{var d;if(a&&e){const u=(d=e.getComputedStyle(a).getPropertyValue(i))==null?void 0:d.trim();o.value=u||n}},{immediate:!0}),watch(o,a=>{var i;(i=s.value)!=null&&i.style&&s.value.style.setProperty(resolveUnref(t),a)}),o}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(t,r)=>{var e={};for(var n in t)__hasOwnProp$g.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$g)for(var n of __getOwnPropSymbols$g(t))r.indexOf(n)<0&&__propIsEnum$g.call(t,n)&&(e[n]=t[n]);return e};function useResizeObserver(t,r,e={}){const n=e,{window:o=defaultWindow}=n,s=__objRest$2(n,["window"]);let a;const i=useSupported(()=>o&&"ResizeObserver"in o),d=()=>{a&&(a.disconnect(),a=void 0)},u=watch(()=>unrefElement(t),m=>{d(),i.value&&o&&m&&(a=new ResizeObserver(r),a.observe(m,s))},{immediate:!0,flush:"post"}),c=()=>{d(),u()};return tryOnScopeDispose(c),{isSupported:i,stop:c}}function useElementBounding(t,r={}){const{reset:e=!0,windowResize:n=!0,windowScroll:o=!0,immediate:s=!0}=r,a=ref(0),i=ref(0),d=ref(0),u=ref(0),c=ref(0),m=ref(0),v=ref(0),g=ref(0);function b(){const T=unrefElement(t);if(!T){e&&(a.value=0,i.value=0,d.value=0,u.value=0,c.value=0,m.value=0,v.value=0,g.value=0);return}const k=T.getBoundingClientRect();a.value=k.height,i.value=k.bottom,d.value=k.left,u.value=k.right,c.value=k.top,m.value=k.width,v.value=k.x,g.value=k.y}return useResizeObserver(t,b),watch(()=>unrefElement(t),T=>!T&&b()),o&&useEventListener("scroll",b,{capture:!0,passive:!0}),n&&useEventListener("resize",b,{passive:!0}),tryOnMounted(()=>{s&&b()}),{height:a,bottom:i,left:d,right:u,top:c,width:m,x:v,y:g,update:b}}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(t,r,e,n={}){var o,s,a;const{clone:i=!1,passive:d=!1,eventName:u,deep:c=!1,defaultValue:m}=n,v=getCurrentInstance(),g=e||(v==null?void 0:v.emit)||((o=v==null?void 0:v.$emit)==null?void 0:o.bind(v))||((a=(s=v==null?void 0:v.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(v==null?void 0:v.proxy));let b=u;r||(r="modelValue"),b=u||b||`update:${r.toString()}`;const T=y=>i?isFunction$2(i)?i(y):cloneFnJSON(y):y,k=()=>isDef(t[r])?T(t[r]):m;if(d){const y=k(),A=ref(y);return watch(()=>t[r],V=>A.value=T(V)),watch(A,V=>{(V!==t[r]||c)&&g(b,V)},{deep:c}),A}else return computed({get(){return k()},set(y){g(b,y)}})}function useWindowSize(t={}){const{window:r=defaultWindow,initialWidth:e=1/0,initialHeight:n=1/0,listenOrientation:o=!0,includeScrollbar:s=!0}=t,a=ref(e),i=ref(n),d=()=>{r&&(s?(a.value=r.innerWidth,i.value=r.innerHeight):(a.value=r.document.documentElement.clientWidth,i.value=r.document.documentElement.clientHeight))};return d(),tryOnMounted(d),useEventListener("resize",d,{passive:!0}),o&&useEventListener("orientationchange",d,{passive:!0}),{width:a,height:i}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(t,r)=>{if(!isClient||!t||!r)return!1;const e=t.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var r=hasOwnProperty$c.call(t,symToStringTag$1),e=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var n=!0}catch{}var o=nativeObjectToString$1.call(t);return n&&(r?t[symToStringTag$1]=e:delete t[symToStringTag$1]),o}var objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$3="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$3}function arrayMap(t,r){for(var e=-1,n=t==null?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var r=t+"";return r=="0"&&1/t==-INFINITY$3?"-0":r}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var r=t.length;r--&&reWhitespace.test(t.charAt(r)););return r}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject$1(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){if(!t)return t===0?t:0;if(t=toNumber(t),t===INFINITY$2||t===-INFINITY$2){var r=t<0?-1:1;return r*MAX_INTEGER}return t===t?t:0}function toInteger(t){var r=toFinite(t),e=r%1;return r===r?e?r-e:r:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var r=baseGetTag(t);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(t){if(t!=null){try{return funcToString$1.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$c=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$b=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var r=isFunction$1(t)?reIsNative:reIsHostCtor;return r.test(toSource(t))}function getValue$1(t,r){return t==null?void 0:t[r]}function getNative(t,r){var e=getValue$1(t,r);return baseIsNative(e)?e:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function t(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const baseCreate$1=baseCreate;function apply(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function copyArray(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var r=0,e=0;return function(){var n=nativeNow(),o=HOT_SPAN-(n-e);if(e=n,o>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(t,r){return defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function baseFindIndex(t,r,e,n){for(var o=t.length,s=e+(n?1:-1);n?s--:++s<o;)if(r(t[s],s,t))return s;return-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,r){var e=typeof t;return r=r??MAX_SAFE_INTEGER$1,!!r&&(e=="number"||e!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<r}function baseAssignValue(t,r,e){r=="__proto__"&&defineProperty$1?defineProperty$1(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eq(t,r){return t===r||t!==t&&r!==r}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function assignValue(t,r,e){var n=t[r];(!(hasOwnProperty$a.call(t,r)&&eq(n,e))||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function copyObject(t,r,e,n){var o=!e;e||(e={});for(var s=-1,a=r.length;++s<a;){var i=r[s],d=n?n(e[i],t[i],i,e,t):void 0;d===void 0&&(d=t[i]),o?baseAssignValue(e,i,d):assignValue(e,i,d)}return e}var nativeMax$2=Math.max;function overRest(t,r,e){return r=nativeMax$2(r===void 0?t.length-1:r,0),function(){for(var n=arguments,o=-1,s=nativeMax$2(n.length-r,0),a=Array(s);++o<s;)a[o]=n[r+o];o=-1;for(var i=Array(r+1);++o<r;)i[o]=n[o];return i[r]=e(a),apply(t,this,i)}}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}var objectProto$a=Object.prototype;function isPrototype(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||objectProto$a;return t===e}function baseTimes(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var argsTag$3="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$3}var objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$9.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(r){return t(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function arrayLikeKeys(t,r){var e=isArray$2(t),n=!e&&isArguments$1(t),o=!e&&!n&&isBuffer$2(t),s=!e&&!n&&!o&&isTypedArray$2(t),a=e||n||o||s,i=a?baseTimes(t.length,String):[],d=i.length;for(var u in t)(r||hasOwnProperty$8.call(t,u))&&!(a&&(u=="length"||o&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||isIndex(u,d)))&&i.push(u);return i}function overArg(t,r){return function(e){return t(r(e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var r=[];for(var e in Object(t))hasOwnProperty$7.call(t,e)&&e!="constructor"&&r.push(e);return r}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function nativeKeysIn(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var r=isPrototype(t),e=[];for(var n in t)n=="constructor"&&(r||!hasOwnProperty$6.call(t,n))||e.push(n);return e}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,r){if(isArray$2(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||r!=null&&t in Object(r)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashGet(t){var r=this.__data__;if(nativeCreate$1){var e=r[t];return e===HASH_UNDEFINED$2?void 0:e}return hasOwnProperty$5.call(r,t)?r[t]:void 0}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function hashHas(t){var r=this.__data__;return nativeCreate$1?r[t]!==void 0:hasOwnProperty$4.call(r,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,r){for(var e=t.length;e--;)if(eq(t[e][0],r))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var r=this.__data__,e=assocIndexOf(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():splice.call(r,e,1),--this.size,!0}function listCacheGet(t){var r=this.__data__,e=assocIndexOf(r,t);return e<0?void 0:r[e][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,r){var e=this.__data__,n=assocIndexOf(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function ListCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function getMapData(t,r){var e=t.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function mapCacheDelete(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,r){var e=getMapData(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function MapCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],s=e.cache;if(s.has(o))return s.get(o);var a=t.apply(this,n);return e.cache=s.set(o,a)||s,a};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var r=memoize(t,function(n){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),n}),e=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(rePropName,function(e,n,o,s){r.push(o?s.replace(reEscapeChar,"$1"):n||e)}),r});const stringToPath$1=stringToPath;function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,r){return isArray$2(t)?t:isKey(t,r)?[t]:stringToPath$1(toString$1(t))}var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var r=t+"";return r=="0"&&1/t==-INFINITY$1?"-0":r}function baseGet(t,r){r=castPath(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[toKey(r[e++])];return e&&e==n?t:void 0}function get(t,r,e){var n=t==null?void 0:baseGet(t,r);return n===void 0?e:n}function arrayPush(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(t){return isArray$2(t)||isArguments$1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function baseFlatten(t,r,e,n,o){var s=-1,a=t.length;for(e||(e=isFlattenable),o||(o=[]);++s<a;){var i=t[s];r>0&&e(i)?r>1?baseFlatten(i,r-1,e,n,o):arrayPush(o,i):n||(o[o.length]=i)}return o}function flatten(t){var r=t==null?0:t.length;return r?baseFlatten(t,1):[]}function flatRest(t){return setToString$1(overRest(t,void 0,flatten),t+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;function castArray$1(){if(!arguments.length)return[];var t=arguments[0];return isArray$2(t)?t:[t]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,r){var e=this.__data__;if(e instanceof ListCache){var n=e.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new MapCache(n)}return e.set(t,r),this.size=e.size,this}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(t,r){return t&&copyObject(r,keys(r),t)}function baseAssignIn(t,r){return t&&copyObject(r,keysIn(r),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,r){if(r)return t.slice();var e=t.length,n=allocUnsafe?allocUnsafe(e):new t.constructor(e);return t.copy(n),n}function arrayFilter(t,r){for(var e=-1,n=t==null?0:t.length,o=0,s=[];++e<n;){var a=t[e];r(a,e,t)&&(s[o++]=a)}return s}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(r){return propertyIsEnumerable.call(t,r)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,r){return copyObject(t,getSymbols$1(t),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var r=[];t;)arrayPush(r,getSymbols$1(t)),t=getPrototype$1(t);return r}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,r){return copyObject(t,getSymbolsIn$1(t),r)}function baseGetAllKeys(t,r,e){var n=r(t);return isArray$2(t)?n:arrayPush(n,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView=getNative(root$1,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var r=baseGetTag(t),e=r==objectTag$2?t.constructor:void 0,n=e?toSource(e):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return r});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&hasOwnProperty$3.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(t)),r}function cloneDataView(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var r=new t.constructor(t.source,reFlags.exec(t));return r.lastIndex=t.lastIndex,r}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf$1?Object(symbolValueOf$1.call(t)):{}}function cloneTypedArray(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,r,e){var n=t.constructor;switch(r){case arrayBufferTag$2:return cloneArrayBuffer(t);case boolTag$2:case dateTag$2:return new n(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(t);case regexpTag$2:return cloneRegExp(t);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(t)}}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$2="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$2="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,r,e,n,o,s){var a,i=r&CLONE_DEEP_FLAG$1,d=r&CLONE_FLAT_FLAG,u=r&CLONE_SYMBOLS_FLAG$2;if(e&&(a=o?e(t,n,o,s):e(t)),a!==void 0)return a;if(!isObject$1(t))return t;var c=isArray$2(t);if(c){if(a=initCloneArray(t),!i)return copyArray(t,a)}else{var m=getTag$1(t),v=m==funcTag||m==genTag;if(isBuffer$2(t))return cloneBuffer(t,i);if(m==objectTag$1||m==argsTag$1||v&&!o){if(a=d||v?{}:initCloneObject(t),!i)return d?copySymbolsIn(t,baseAssignIn(a,t)):copySymbols(t,baseAssign(a,t))}else{if(!cloneableTags[m])return o?t:{};a=initCloneByTag(t,m,i)}}s||(s=new Stack);var g=s.get(t);if(g)return g;s.set(t,a),isSet$1(t)?t.forEach(function(k){a.add(baseClone(k,r,e,k,t,s))}):isMap$1(t)&&t.forEach(function(k,y){a.set(y,baseClone(k,r,e,y,t,s))});var b=u?d?getAllKeysIn:getAllKeys:d?keysIn:keys,T=c?void 0:b(t);return arrayEach(T||t,function(k,y){T&&(y=k,k=t[y]),assignValue(a,y,baseClone(k,r,e,y,t,s))}),a}var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new MapCache;++r<e;)this.add(t[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function cacheHas(t,r){return t.has(r)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,r,e,n,o,s){var a=e&COMPARE_PARTIAL_FLAG$5,i=t.length,d=r.length;if(i!=d&&!(a&&d>i))return!1;var u=s.get(t),c=s.get(r);if(u&&c)return u==r&&c==t;var m=-1,v=!0,g=e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(s.set(t,r),s.set(r,t);++m<i;){var b=t[m],T=r[m];if(n)var k=a?n(T,b,m,r,t,s):n(b,T,m,t,r,s);if(k!==void 0){if(k)continue;v=!1;break}if(g){if(!arraySome(r,function(y,A){if(!cacheHas(g,A)&&(b===y||o(b,y,e,n,s)))return g.push(A)})){v=!1;break}}else if(!(b===T||o(b,T,e,n,s))){v=!1;break}}return s.delete(t),s.delete(r),v}function mapToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n,o){e[++r]=[o,n]}),e}function setToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,r,e,n,o,s,a){switch(e){case dataViewTag:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case arrayBufferTag:return!(t.byteLength!=r.byteLength||!s(new Uint8Array$2(t),new Uint8Array$2(r)));case boolTag:case dateTag:case numberTag:return eq(+t,+r);case errorTag:return t.name==r.name&&t.message==r.message;case regexpTag:case stringTag:return t==r+"";case mapTag:var i=mapToArray;case setTag:var d=n&COMPARE_PARTIAL_FLAG$4;if(i||(i=setToArray),t.size!=r.size&&!d)return!1;var u=a.get(t);if(u)return u==r;n|=COMPARE_UNORDERED_FLAG$2,a.set(t,r);var c=equalArrays(i(t),i(r),n,o,s,a);return a.delete(t),c;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,r,e,n,o,s){var a=e&COMPARE_PARTIAL_FLAG$3,i=getAllKeys(t),d=i.length,u=getAllKeys(r),c=u.length;if(d!=c&&!a)return!1;for(var m=d;m--;){var v=i[m];if(!(a?v in r:hasOwnProperty$2.call(r,v)))return!1}var g=s.get(t),b=s.get(r);if(g&&b)return g==r&&b==t;var T=!0;s.set(t,r),s.set(r,t);for(var k=a;++m<d;){v=i[m];var y=t[v],A=r[v];if(n)var V=a?n(A,y,v,r,t,s):n(y,A,v,t,r,s);if(!(V===void 0?y===A||o(y,A,e,n,s):V)){T=!1;break}k||(k=v=="constructor")}if(T&&!k){var Ce=t.constructor,ie=r.constructor;Ce!=ie&&"constructor"in t&&"constructor"in r&&!(typeof Ce=="function"&&Ce instanceof Ce&&typeof ie=="function"&&ie instanceof ie)&&(T=!1)}return s.delete(t),s.delete(r),T}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,r,e,n,o,s){var a=isArray$2(t),i=isArray$2(r),d=a?arrayTag:getTag$1(t),u=i?arrayTag:getTag$1(r);d=d==argsTag?objectTag:d,u=u==argsTag?objectTag:u;var c=d==objectTag,m=u==objectTag,v=d==u;if(v&&isBuffer$2(t)){if(!isBuffer$2(r))return!1;a=!0,c=!1}if(v&&!c)return s||(s=new Stack),a||isTypedArray$2(t)?equalArrays(t,r,e,n,o,s):equalByTag(t,r,d,e,n,o,s);if(!(e&COMPARE_PARTIAL_FLAG$2)){var g=c&&hasOwnProperty$1.call(t,"__wrapped__"),b=m&&hasOwnProperty$1.call(r,"__wrapped__");if(g||b){var T=g?t.value():t,k=b?r.value():r;return s||(s=new Stack),o(T,k,e,n,s)}}return v?(s||(s=new Stack),equalObjects(t,r,e,n,o,s)):!1}function baseIsEqual(t,r,e,n,o){return t===r?!0:t==null||r==null||!isObjectLike(t)&&!isObjectLike(r)?t!==t&&r!==r:baseIsEqualDeep(t,r,e,n,baseIsEqual,o)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,r,e,n){var o=e.length,s=o,a=!n;if(t==null)return!s;for(t=Object(t);o--;){var i=e[o];if(a&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<s;){i=e[o];var d=i[0],u=t[d],c=i[1];if(a&&i[2]){if(u===void 0&&!(d in t))return!1}else{var m=new Stack;if(n)var v=n(u,c,d,t,r,m);if(!(v===void 0?baseIsEqual(c,u,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,m):v))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var r=keys(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,isStrictComparable(o)]}return r}function matchesStrictComparable(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function baseMatches(t){var r=getMatchData(t);return r.length==1&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||baseIsMatch(e,t,r)}}function baseHasIn(t,r){return t!=null&&r in Object(t)}function hasPath(t,r,e){r=castPath(r,t);for(var n=-1,o=r.length,s=!1;++n<o;){var a=toKey(r[n]);if(!(s=t!=null&&e(t,a)))break;t=t[a]}return s||++n!=o?s:(o=t==null?0:t.length,!!o&&isLength(o)&&isIndex(a,o)&&(isArray$2(t)||isArguments$1(t)))}function hasIn(t,r){return t!=null&&hasPath(t,r,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,r){return isKey(t)&&isStrictComparable(r)?matchesStrictComparable(toKey(t),r):function(e){var n=get(e,t);return n===void 0&&n===r?hasIn(e,t):baseIsEqual(r,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(r){return r==null?void 0:r[t]}}function basePropertyDeep(t){return function(r){return baseGet(r,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$2(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(t,r,e){var n,o,s,a,i,d,u=0,c=!1,m=!1,v=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);r=toNumber(r)||0,isObject$1(e)&&(c=!!e.leading,m="maxWait"in e,s=m?nativeMax$1(toNumber(e.maxWait)||0,r):s,v="trailing"in e?!!e.trailing:v);function g(Oe){var he=n,Y=o;return n=o=void 0,u=Oe,a=t.apply(Y,he),a}function b(Oe){return u=Oe,i=setTimeout(y,r),c?g(Oe):a}function T(Oe){var he=Oe-d,Y=Oe-u,ae=r-he;return m?nativeMin$1(ae,s-Y):ae}function k(Oe){var he=Oe-d,Y=Oe-u;return d===void 0||he>=r||he<0||m&&Y>=s}function y(){var Oe=now$1();if(k(Oe))return A(Oe);i=setTimeout(y,T(Oe))}function A(Oe){return i=void 0,v&&n?g(Oe):(n=o=void 0,a)}function V(){i!==void 0&&clearTimeout(i),u=0,n=d=o=i=void 0}function Ce(){return i===void 0?a:A(now$1())}function ie(){var Oe=now$1(),he=k(Oe);if(n=arguments,o=this,d=Oe,he){if(i===void 0)return b(d);if(m)return clearTimeout(i),i=setTimeout(y,r),g(d)}return i===void 0&&(i=setTimeout(y,r)),a}return ie.cancel=V,ie.flush=Ce,ie}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var o=n-1;return e!==void 0&&(o=toInteger(e),o=e<0?nativeMax(n+o,0):nativeMin(o,n-1)),baseFindIndex(t,baseIteratee(r),o,!0)}var INFINITY=1/0;function flattenDeep(t){var r=t==null?0:t.length;return r?baseFlatten(t,INFINITY):[]}function fromPairs(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var o=t[r];n[o[0]]=o[1]}return n}function isEqual(t,r){return baseIsEqual(t,r)}function isNil(t){return t==null}function isUndefined$2(t){return t===void 0}function baseSet(t,r,e,n){if(!isObject$1(t))return t;r=castPath(r,t);for(var o=-1,s=r.length,a=s-1,i=t;i!=null&&++o<s;){var d=toKey(r[o]),u=e;if(d==="__proto__"||d==="constructor"||d==="prototype")return t;if(o!=a){var c=i[d];u=n?n(c,d,i):void 0,u===void 0&&(u=isObject$1(c)?c:isIndex(r[o+1])?[]:{})}assignValue(i,d,u),i=i[d]}return t}function basePickBy(t,r,e){for(var n=-1,o=r.length,s={};++n<o;){var a=r[n],i=baseGet(t,a);e(i,a)&&baseSet(s,castPath(a,t),i)}return s}function basePick(t,r){return basePickBy(t,r,function(e,n){return hasIn(t,n)})}var pick=flatRest(function(t,r){return t==null?{}:basePick(t,r)});const pick$1=pick;function set(t,r,e){return t==null?t:baseSet(t,r,e)}var FUNC_ERROR_TEXT="Expected a function";function throttle(t,r,e){var n=!0,o=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(e)&&(n="leading"in e?!!e.leading:n,o="trailing"in e?!!e.trailing:o),debounce(t,r,{leading:n,maxWait:r,trailing:o})}const isUndefined$1=t=>t===void 0,isBoolean$1=t=>typeof t=="boolean",isNumber$1=t=>typeof t=="number",isEmpty=t=>!t&&t!==0||isArray$4(t)&&t.length===0||isObject$2(t)&&!Object.keys(t).length,isElement=t=>typeof Element>"u"?!1:t instanceof Element,isStringNumber=t=>isString$2(t)?!Number.isNaN(Number(t)):!1,escapeStringRegexp=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=t=>capitalize$1(t),keysOf=t=>Object.keys(t),entriesOf=t=>Object.entries(t),getProp=(t,r,e)=>({get value(){return get(t,r,e)},set value(n){set(t,r,n)}});class ElementPlusError extends Error{constructor(r){super(r),this.name="ElementPlusError"}}function throwError(t,r){throw new ElementPlusError(`[${t}] ${r}`)}function debugWarn(t,r){}const classNameToArray=(t="")=>t.split(" ").filter(r=>!!r.trim()),hasClass=(t,r)=>{if(!t||!r)return!1;if(r.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(r)},addClass=(t,r)=>{!t||!r.trim()||t.classList.add(...classNameToArray(r))},removeClass=(t,r)=>{!t||!r.trim()||t.classList.remove(...classNameToArray(r))},getStyle=(t,r)=>{var e;if(!isClient||!t||!r)return"";let n=camelize(r);n==="float"&&(n="cssFloat");try{const o=t.style[n];if(o)return o;const s=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return s?s[n]:""}catch{return t.style[n]}};function addUnit(t,r="px"){if(!t)return"";if(isNumber$1(t)||isStringNumber(t))return`${t}${r}`;if(isString$2(t))return t}const isScroll=(t,r)=>{if(!isClient)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],n=getStyle(t,e);return["scroll","auto","overlay"].some(o=>n.includes(o))},getScrollContainer=(t,r)=>{if(!isClient)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(isScroll(e,r))return e;e=e.parentNode}return e};let scrollBarWidth;const getScrollBarWidth=t=>{var r;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",e.appendChild(o);const s=o.offsetWidth;return(r=e.parentNode)==null||r.removeChild(e),scrollBarWidth=n-s,scrollBarWidth};function scrollIntoView(t,r){if(!isClient)return;if(!r){t.scrollTop=0;return}const e=[];let n=r.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const o=r.offsetTop+e.reduce((d,u)=>d+u.offsetTop,0),s=o+r.offsetHeight,a=t.scrollTop,i=a+t.clientHeight;o<a?t.scrollTop=o:s>i&&(t.scrollTop=s-t.clientHeight)}/*! Element Plus Icons Vue v2.1.0 */var export_helper_default=(t,r)=>{let e=t.__vccOpts||t;for(let[n,o]of r)e[n]=o;return e},arrow_down_bold_vue_vue_type_script_lang_default={name:"ArrowDownBold"},_hoisted_15$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_25=createBaseVNode("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8 316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),_hoisted_35=[_hoisted_25];function _sfc_render5(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_15$1,_hoisted_35)}var arrow_down_bold_default=export_helper_default(arrow_down_bold_vue_vue_type_script_lang_default,[["render",_sfc_render5],["__file","arrow-down-bold.vue"]]),arrow_down_vue_vue_type_script_lang_default={name:"ArrowDown"},_hoisted_16$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_26=createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),_hoisted_36=[_hoisted_26];function _sfc_render6(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_16$1,_hoisted_36)}var arrow_down_default=export_helper_default(arrow_down_vue_vue_type_script_lang_default,[["render",_sfc_render6],["__file","arrow-down.vue"]]),arrow_left_vue_vue_type_script_lang_default={name:"ArrowLeft"},_hoisted_18$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_28=createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_38=[_hoisted_28];function _sfc_render8(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_18$1,_hoisted_38)}var arrow_left_default=export_helper_default(arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render8],["__file","arrow-left.vue"]]),arrow_right_vue_vue_type_script_lang_default={name:"ArrowRight"},_hoisted_110={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_210=createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_310=[_hoisted_210];function _sfc_render10(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_110,_hoisted_310)}var arrow_right_default=export_helper_default(arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render10],["__file","arrow-right.vue"]]),caret_top_vue_vue_type_script_lang_default={name:"CaretTop"},_hoisted_135={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_235=createBaseVNode("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),_hoisted_334=[_hoisted_235];function _sfc_render35(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_135,_hoisted_334)}var caret_top_default=export_helper_default(caret_top_vue_vue_type_script_lang_default,[["render",_sfc_render35],["__file","caret-top.vue"]]),check_vue_vue_type_script_lang_default={name:"Check"},_hoisted_143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_243=createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),_hoisted_342=[_hoisted_243];function _sfc_render43(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_143,_hoisted_342)}var check_default=export_helper_default(check_vue_vue_type_script_lang_default,[["render",_sfc_render43],["__file","check.vue"]]),circle_check_vue_vue_type_script_lang_default={name:"CircleCheck"},_hoisted_149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_249=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_348=createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),_hoisted_415=[_hoisted_249,_hoisted_348];function _sfc_render49(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_149,_hoisted_415)}var circle_check_default=export_helper_default(circle_check_vue_vue_type_script_lang_default,[["render",_sfc_render49],["__file","circle-check.vue"]]),circle_close_filled_vue_vue_type_script_lang_default={name:"CircleCloseFilled"},_hoisted_150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_250=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),_hoisted_349=[_hoisted_250];function _sfc_render50(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_150,_hoisted_349)}var circle_close_filled_default=export_helper_default(circle_close_filled_vue_vue_type_script_lang_default,[["render",_sfc_render50],["__file","circle-close-filled.vue"]]),circle_close_vue_vue_type_script_lang_default={name:"CircleClose"},_hoisted_151={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_251=createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),_hoisted_350=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_416=[_hoisted_251,_hoisted_350];function _sfc_render51(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_151,_hoisted_416)}var circle_close_default=export_helper_default(circle_close_vue_vue_type_script_lang_default,[["render",_sfc_render51],["__file","circle-close.vue"]]),close_vue_vue_type_script_lang_default={name:"Close"},_hoisted_156={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_256=createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),_hoisted_355=[_hoisted_256];function _sfc_render56(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_156,_hoisted_355)}var close_default=export_helper_default(close_vue_vue_type_script_lang_default,[["render",_sfc_render56],["__file","close.vue"]]),delete_vue_vue_type_script_lang_default={name:"Delete"},_hoisted_180={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_280=createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),_hoisted_379=[_hoisted_280];function _sfc_render80(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_180,_hoisted_379)}var delete_default=export_helper_default(delete_vue_vue_type_script_lang_default,[["render",_sfc_render80],["__file","delete.vue"]]),document_vue_vue_type_script_lang_default={name:"Document"},_hoisted_190={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_290=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_389=[_hoisted_290];function _sfc_render90(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_190,_hoisted_389)}var document_default=export_helper_default(document_vue_vue_type_script_lang_default,[["render",_sfc_render90],["__file","document.vue"]]),edit_vue_vue_type_script_lang_default={name:"Edit"},_hoisted_194={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_294=createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),_hoisted_393=createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),_hoisted_431=[_hoisted_294,_hoisted_393];function _sfc_render94(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_194,_hoisted_431)}var edit_default=export_helper_default(edit_vue_vue_type_script_lang_default,[["render",_sfc_render94],["__file","edit.vue"]]),full_screen_vue_vue_type_script_lang_default={name:"FullScreen"},_hoisted_1118={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2118=createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),_hoisted_3117=[_hoisted_2118];function _sfc_render118(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1118,_hoisted_3117)}var full_screen_default=export_helper_default(full_screen_vue_vue_type_script_lang_default,[["render",_sfc_render118],["__file","full-screen.vue"]]),hide_vue_vue_type_script_lang_default={name:"Hide"},_hoisted_1133={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2133=createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),_hoisted_3132=createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),_hoisted_438=[_hoisted_2133,_hoisted_3132];function _sfc_render133(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1133,_hoisted_438)}var hide_default=export_helper_default(hide_vue_vue_type_script_lang_default,[["render",_sfc_render133],["__file","hide.vue"]]),info_filled_vue_vue_type_script_lang_default={name:"InfoFilled"},_hoisted_1143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2143=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),_hoisted_3142=[_hoisted_2143];function _sfc_render143(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1143,_hoisted_3142)}var info_filled_default=export_helper_default(info_filled_vue_vue_type_script_lang_default,[["render",_sfc_render143],["__file","info-filled.vue"]]),loading_vue_vue_type_script_lang_default={name:"Loading"},_hoisted_1150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2150=createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),_hoisted_3149=[_hoisted_2150];function _sfc_render150(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1150,_hoisted_3149)}var loading_default=export_helper_default(loading_vue_vue_type_script_lang_default,[["render",_sfc_render150],["__file","loading.vue"]]),plus_vue_vue_type_script_lang_default={name:"Plus"},_hoisted_1201={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2201=createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),_hoisted_3200=[_hoisted_2201];function _sfc_render201(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1201,_hoisted_3200)}var plus_default=export_helper_default(plus_vue_vue_type_script_lang_default,[["render",_sfc_render201],["__file","plus.vue"]]),refresh_left_vue_vue_type_script_lang_default={name:"RefreshLeft"},_hoisted_1215={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2215=createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),_hoisted_3214=[_hoisted_2215];function _sfc_render215(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1215,_hoisted_3214)}var refresh_left_default=export_helper_default(refresh_left_vue_vue_type_script_lang_default,[["render",_sfc_render215],["__file","refresh-left.vue"]]),refresh_right_vue_vue_type_script_lang_default={name:"RefreshRight"},_hoisted_1216={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2216=createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),_hoisted_3215=[_hoisted_2216];function _sfc_render216(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1216,_hoisted_3215)}var refresh_right_default=export_helper_default(refresh_right_vue_vue_type_script_lang_default,[["render",_sfc_render216],["__file","refresh-right.vue"]]),scale_to_original_vue_vue_type_script_lang_default={name:"ScaleToOriginal"},_hoisted_1222={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2222=createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),_hoisted_3221=[_hoisted_2222];function _sfc_render222(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1222,_hoisted_3221)}var scale_to_original_default=export_helper_default(scale_to_original_vue_vue_type_script_lang_default,[["render",_sfc_render222],["__file","scale-to-original.vue"]]),search_vue_vue_type_script_lang_default={name:"Search"},_hoisted_1225={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2225=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),_hoisted_3224=[_hoisted_2225];function _sfc_render225(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1225,_hoisted_3224)}var search_default=export_helper_default(search_vue_vue_type_script_lang_default,[["render",_sfc_render225],["__file","search.vue"]]),setting_vue_vue_type_script_lang_default={name:"Setting"},_hoisted_1231={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2231=createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"},null,-1),_hoisted_3230=[_hoisted_2231];function _sfc_render231(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1231,_hoisted_3230)}var setting_default=export_helper_default(setting_vue_vue_type_script_lang_default,[["render",_sfc_render231],["__file","setting.vue"]]),success_filled_vue_vue_type_script_lang_default={name:"SuccessFilled"},_hoisted_1249={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2249=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_3248=[_hoisted_2249];function _sfc_render249(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1249,_hoisted_3248)}var success_filled_default=export_helper_default(success_filled_vue_vue_type_script_lang_default,[["render",_sfc_render249],["__file","success-filled.vue"]]),view_vue_vue_type_script_lang_default={name:"View"},_hoisted_1283={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2283=createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),_hoisted_3282=[_hoisted_2283];function _sfc_render283(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1283,_hoisted_3282)}var view_default=export_helper_default(view_vue_vue_type_script_lang_default,[["render",_sfc_render283],["__file","view.vue"]]),warning_filled_vue_vue_type_script_lang_default={name:"WarningFilled"},_hoisted_1287={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2287=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),_hoisted_3286=[_hoisted_2287];function _sfc_render287(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1287,_hoisted_3286)}var warning_filled_default=export_helper_default(warning_filled_vue_vue_type_script_lang_default,[["render",_sfc_render287],["__file","warning-filled.vue"]]),zoom_in_vue_vue_type_script_lang_default={name:"ZoomIn"},_hoisted_1292={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2292=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),_hoisted_3291=[_hoisted_2292];function _sfc_render292(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1292,_hoisted_3291)}var zoom_in_default=export_helper_default(zoom_in_vue_vue_type_script_lang_default,[["render",_sfc_render292],["__file","zoom-in.vue"]]),zoom_out_vue_vue_type_script_lang_default={name:"ZoomOut"},_hoisted_1293={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2293=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),_hoisted_3292=[_hoisted_2293];function _sfc_render293(t,r,e,n,o,s){return openBlock(),createElementBlock("svg",_hoisted_1293,_hoisted_3292)}var zoom_out_default=export_helper_default(zoom_out_vue_vue_type_script_lang_default,[["render",_sfc_render293],["__file","zoom-out.vue"]]);const epPropKey="__epPropKey",definePropType=t=>t,isEpProp=t=>isObject$2(t)&&!!t[epPropKey],buildProp=(t,r)=>{if(!isObject$2(t)||isEpProp(t))return t;const{values:e,required:n,default:o,type:s,validator:a}=t,d={type:s,required:!!n,validator:e||a?u=>{let c=!1,m=[];if(e&&(m=Array.from(e),hasOwn(t,"default")&&m.push(o),c||(c=m.includes(u))),a&&(c||(c=a(u))),!c&&m.length>0){const v=[...new Set(m)].map(g=>JSON.stringify(g)).join(", ");warn(`Invalid prop: validation failed${r?` for prop "${r}"`:""}. Expected one of [${v}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[epPropKey]:!0};return hasOwn(t,"default")&&(d.default=o),d},buildProps=t=>fromPairs(Object.entries(t).map(([r,e])=>[r,buildProp(e,r)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(t,r)=>{if(t.install=e=>{for(const n of[t,...Object.values(r??{})])e.component(n.name,n)},r)for(const[e,n]of Object.entries(r))t[e]=n;return t},withInstallFunction=(t,r)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[r]=t},t),withNoopInstall=t=>(t.install=NOOP,t),composeRefs=(...t)=>r=>{t.forEach(e=>{isFunction$3(e)?e(r):e.value=r})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",componentSizes=["","default","small","large"],componentSizeMap={large:40,default:32,small:24},getComponentSize=t=>componentSizeMap[t||"default"],isValidComponentSize=t=>["",...componentSizes].includes(t);var PatchFlags=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(PatchFlags||{});const unique=t=>[...new Set(t)],castArray=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],isKorean=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),generateId=()=>Math.floor(Math.random()*1e4),mutable=t=>t,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(t={})=>{const{excludeListeners:r=!1,excludeKeys:e}=t,n=computed(()=>((e==null?void 0:e.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),o=getCurrentInstance();return computed(o?()=>{var s;return fromPairs(Object.entries((s=o.proxy)==null?void 0:s.$attrs).filter(([a])=>!n.value.includes(a)&&!(r&&LISTENER_PREFIX.test(a))))}:()=>({}))},useDeprecated=({from:t,replacement:r,scope:e,version:n,ref:o,type:s="API"},a)=>{watch(()=>unref(a),i=>{},{immediate:!0})},useDraggable=(t,r,e)=>{let n={offsetX:0,offsetY:0};const o=i=>{const d=i.clientX,u=i.clientY,{offsetX:c,offsetY:m}=n,v=t.value.getBoundingClientRect(),g=v.left,b=v.top,T=v.width,k=v.height,y=document.documentElement.clientWidth,A=document.documentElement.clientHeight,V=-g+c,Ce=-b+m,ie=y-g-T+c,Oe=A-b-k+m,he=ae=>{const Fe=Math.min(Math.max(c+ae.clientX-d,V),ie),ze=Math.min(Math.max(m+ae.clientY-u,Ce),Oe);n={offsetX:Fe,offsetY:ze},t.value.style.transform=`translate(${addUnit(Fe)}, ${addUnit(ze)})`},Y=()=>{document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",Y)};document.addEventListener("mousemove",he),document.addEventListener("mouseup",Y)},s=()=>{r.value&&t.value&&r.value.addEventListener("mousedown",o)},a=()=>{r.value&&t.value&&r.value.removeEventListener("mousedown",o)};onMounted(()=>{watchEffect(()=>{e.value?s():a()})}),onBeforeUnmount(()=>{a()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const buildTranslator=t=>(r,e)=>translate(r,e,unref(t)),translate=(t,r,e)=>get(e,t,t).replace(/\{(\w+)\}/g,(n,o)=>{var s;return`${(s=r==null?void 0:r[o])!=null?s:`{${o}}`}`}),buildLocaleContext=t=>{const r=computed(()=>unref(t).name),e=isRef(t)?t:ref(t);return{lang:r,locale:e,t:buildTranslator(t)}},localeContextKey=Symbol("localeContextKey"),useLocale=t=>{const r=t||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>r.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(t,r,e,n,o)=>{let s=`${t}-${r}`;return e&&(s+=`-${e}`),n&&(s+=`__${n}`),o&&(s+=`--${o}`),s},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=t=>{const r=t||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(r)||defaultNamespace)},useNamespace=(t,r)=>{const e=useGetDerivedNamespace(r);return{namespace:e,b:(T="")=>_bem(e.value,t,T,"",""),e:T=>T?_bem(e.value,t,"",T,""):"",m:T=>T?_bem(e.value,t,"","",T):"",be:(T,k)=>T&&k?_bem(e.value,t,T,k,""):"",em:(T,k)=>T&&k?_bem(e.value,t,"",T,k):"",bm:(T,k)=>T&&k?_bem(e.value,t,T,"",k):"",bem:(T,k,y)=>T&&k&&y?_bem(e.value,t,T,k,y):"",is:(T,...k)=>{const y=k.length>=1?k[0]:!0;return T&&y?`${statePrefix}${T}`:""},cssVar:T=>{const k={};for(const y in T)T[y]&&(k[`--${e.value}-${y}`]=T[y]);return k},cssVarName:T=>`--${e.value}-${T}`,cssVarBlock:T=>{const k={};for(const y in T)T[y]&&(k[`--${e.value}-${t}-${y}`]=T[y]);return k},cssVarBlockName:T=>`--${e.value}-${t}-${T}`}},useLockscreen=(t,r={})=>{isRef(t)||throwError("[useLockscreen]","You need to pass a ref param to this function");const e=r.ns||useNamespace("popup"),n=computed$1(()=>e.bm("parent","hidden"));if(!isClient||hasClass(document.body,n.value))return;let o=0,s=!1,a="0";const i=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,n.value),s&&document&&(document.body.style.width=a)},200)};watch(t,d=>{if(!d){i();return}s=!hasClass(document.body,n.value),s&&(a=document.body.style.width),o=getScrollBarWidth(e.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,c=getStyle(document.body,"overflowY");o>0&&(u||c==="scroll")&&s&&(document.body.style.width=`calc(100% - ${o}px)`),addClass(document.body,n.value)}),onScopeDispose(()=>i())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=t=>{const r=`update:${t}`,e=`onUpdate:${t}`,n=[r],o={[t]:_prop,[e]:_event};return{useModelToggle:({indicator:a,toggleReason:i,shouldHideWhenRouteChanges:d,shouldProceed:u,onShow:c,onHide:m})=>{const v=getCurrentInstance(),{emit:g}=v,b=v.props,T=computed(()=>isFunction$3(b[e])),k=computed(()=>b[t]===null),y=he=>{a.value!==!0&&(a.value=!0,i&&(i.value=he),isFunction$3(c)&&c(he))},A=he=>{a.value!==!1&&(a.value=!1,i&&(i.value=he),isFunction$3(m)&&m(he))},V=he=>{if(b.disabled===!0||isFunction$3(u)&&!u())return;const Y=T.value&&isClient;Y&&g(r,!0),(k.value||!Y)&&y(he)},Ce=he=>{if(b.disabled===!0||!isClient)return;const Y=T.value&&isClient;Y&&g(r,!1),(k.value||!Y)&&A(he)},ie=he=>{isBoolean$1(he)&&(b.disabled&&he?T.value&&g(r,!1):a.value!==he&&(he?y():A()))},Oe=()=>{a.value?Ce():V()};return watch(()=>b[t],ie),d&&v.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...v.proxy.$route}),()=>{d.value&&a.value&&Ce()}),onMounted(()=>{ie(b[t])}),{hide:Ce,show:V,toggle:Oe,hasUpdateHandler:T}},useModelToggleProps:o,useModelToggleEmits:n}};createModelToggleComposable("modelValue");const useProp=t=>{const r=getCurrentInstance();return computed(()=>{var e,n;return(n=(e=r==null?void 0:r.proxy)==null?void 0:e.$props)==null?void 0:n[t]})};var E="top",R="bottom",W="right",P="left",me="auto",G=[E,R,W,P],U="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(t,r){return t.concat([r+"-"+U,r+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(t,r){return t.concat([r,r+"-"+U,r+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt$1="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt$1,nt,rt];function C(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function Q(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function B(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function Pe(t){if(typeof ShadowRoot>"u")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function Mt(t){var r=t.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},o=r.attributes[e]||{},s=r.elements[e];!B(s)||!C(s)||(Object.assign(s.style,n),Object.keys(o).forEach(function(a){var i=o[a];i===!1?s.removeAttribute(a):s.setAttribute(a,i===!0?"":i)}))})}function Rt(t){var r=t.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(n){var o=r.elements[n],s=r.attributes[n]||{},a=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:e[n]),i=a.reduce(function(d,u){return d[u]="",d},{});!B(o)||!C(o)||(Object.assign(o.style,i),Object.keys(s).forEach(function(d){o.removeAttribute(d)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var X=Math.max,ve=Math.min,Z=Math.round;function ee(t,r){r===void 0&&(r=!1);var e=t.getBoundingClientRect(),n=1,o=1;if(B(t)&&r){var s=t.offsetHeight,a=t.offsetWidth;a>0&&(n=Z(e.width)/a||1),s>0&&(o=Z(e.height)/s||1)}return{width:e.width/n,height:e.height/o,top:e.top/o,right:e.right/n,bottom:e.bottom/o,left:e.left/n,x:e.left/n,y:e.top/o}}function ke(t){var r=ee(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}function it(t,r){var e=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(e&&Pe(e)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function N(t){return H(t).getComputedStyle(t)}function Wt(t){return["table","td","th"].indexOf(C(t))>=0}function I(t){return((Q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ge(t){return C(t)==="html"?t:t.assignedSlot||t.parentNode||(Pe(t)?t.host:null)||I(t)}function at(t){return!B(t)||N(t).position==="fixed"?null:t.offsetParent}function Bt(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&B(t)){var n=N(t);if(n.position==="fixed")return null}var o=ge(t);for(Pe(o)&&(o=o.host);B(o)&&["html","body"].indexOf(C(o))<0;){var s=N(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||r&&s.willChange==="filter"||r&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function se(t){for(var r=H(t),e=at(t);e&&Wt(e)&&N(e).position==="static";)e=at(e);return e&&(C(e)==="html"||C(e)==="body"&&N(e).position==="static")?r:e||Bt(t)||r}function Le(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fe(t,r,e){return X(t,ve(r,e))}function St(t,r,e){var n=fe(t,r,e);return n>e?e:n}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(t){return Object.assign({},st(),t)}function ct(t,r){return r.reduce(function(e,n){return e[n]=t,e},{})}var Tt=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ft(typeof t!="number"?t:ct(t,G))};function Ht(t){var r,e=t.state,n=t.name,o=t.options,s=e.elements.arrow,a=e.modifiersData.popperOffsets,i=q(e.placement),d=Le(i),u=[P,W].indexOf(i)>=0,c=u?"height":"width";if(!(!s||!a)){var m=Tt(o.padding,e),v=ke(s),g=d==="y"?E:P,b=d==="y"?R:W,T=e.rects.reference[c]+e.rects.reference[d]-a[d]-e.rects.popper[c],k=a[d]-e.rects.reference[d],y=se(s),A=y?d==="y"?y.clientHeight||0:y.clientWidth||0:0,V=T/2-k/2,Ce=m[g],ie=A-v[c]-m[b],Oe=A/2-v[c]/2+V,he=fe(Ce,Oe,ie),Y=d;e.modifiersData[n]=(r={},r[Y]=he,r.centerOffset=he-Oe,r)}}function Ct(t){var r=t.state,e=t.options,n=e.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=r.elements.popper.querySelector(o),!o)||!it(r.elements.popper,o)||(r.elements.arrow=o))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(t){return t.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(t){var r=t.x,e=t.y,n=window,o=n.devicePixelRatio||1;return{x:Z(r*o)/o||0,y:Z(e*o)/o||0}}function ut(t){var r,e=t.popper,n=t.popperRect,o=t.placement,s=t.variation,a=t.offsets,i=t.position,d=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,m=t.isFixed,v=a.x,g=v===void 0?0:v,b=a.y,T=b===void 0?0:b,k=typeof c=="function"?c({x:g,y:T}):{x:g,y:T};g=k.x,T=k.y;var y=a.hasOwnProperty("x"),A=a.hasOwnProperty("y"),V=P,Ce=E,ie=window;if(u){var Oe=se(e),he="clientHeight",Y="clientWidth";if(Oe===H(e)&&(Oe=I(e),N(Oe).position!=="static"&&i==="absolute"&&(he="scrollHeight",Y="scrollWidth")),Oe=Oe,o===E||(o===P||o===W)&&s===J){Ce=R;var ae=m&&Oe===ie&&ie.visualViewport?ie.visualViewport.height:Oe[he];T-=ae-n.height,T*=d?1:-1}if(o===P||(o===E||o===R)&&s===J){V=W;var Fe=m&&Oe===ie&&ie.visualViewport?ie.visualViewport.width:Oe[Y];g-=Fe-n.width,g*=d?1:-1}}var ze=Object.assign({position:i},u&&qt),pe=c===!0?Vt({x:g,y:T}):{x:g,y:T};if(g=pe.x,T=pe.y,d){var le;return Object.assign({},ze,(le={},le[Ce]=A?"0":"",le[V]=y?"0":"",le.transform=(ie.devicePixelRatio||1)<=1?"translate("+g+"px, "+T+"px)":"translate3d("+g+"px, "+T+"px, 0)",le))}return Object.assign({},ze,(r={},r[Ce]=A?T+"px":"",r[V]=y?g+"px":"",r.transform="",r))}function Nt(t){var r=t.state,e=t.options,n=e.gpuAcceleration,o=n===void 0?!0:n,s=e.adaptive,a=s===void 0?!0:s,i=e.roundOffsets,d=i===void 0?!0:i,u={placement:q(r.placement),variation:te(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:o,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,ut(Object.assign({},u,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:a,roundOffsets:d})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,ut(Object.assign({},u,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(t){var r=t.state,e=t.instance,n=t.options,o=n.scroll,s=o===void 0?!0:o,a=n.resize,i=a===void 0?!0:a,d=H(r.elements.popper),u=[].concat(r.scrollParents.reference,r.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",e.update,ye)}),i&&d.addEventListener("resize",e.update,ye),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",e.update,ye)}),i&&d.removeEventListener("resize",e.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(t){return t.replace(/left|right|bottom|top/g,function(r){return _t[r]})}var zt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(r){return zt[r]})}function We(t){var r=H(t),e=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Be(t){return ee(I(t)).left+We(t).scrollLeft}function Ft(t){var r=H(t),e=I(t),n=r.visualViewport,o=e.clientWidth,s=e.clientHeight,a=0,i=0;return n&&(o=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=n.offsetLeft,i=n.offsetTop)),{width:o,height:s,x:a+Be(t),y:i}}function Ut(t){var r,e=I(t),n=We(t),o=(r=t.ownerDocument)==null?void 0:r.body,s=X(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=X(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),i=-n.scrollLeft+Be(t),d=-n.scrollTop;return N(o||e).direction==="rtl"&&(i+=X(e.clientWidth,o?o.clientWidth:0)-s),{width:s,height:a,x:i,y:d}}function Se(t){var r=N(t),e=r.overflow,n=r.overflowX,o=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+o+n)}function dt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:B(t)&&Se(t)?t:dt(ge(t))}function ce(t,r){var e;r===void 0&&(r=[]);var n=dt(t),o=n===((e=t.ownerDocument)==null?void 0:e.body),s=H(n),a=o?[s].concat(s.visualViewport||[],Se(n)?n:[]):n,i=r.concat(a);return o?i:i.concat(ce(ge(a)))}function Te(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Xt(t){var r=ee(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function ht(t,r){return r===je?Te(Ft(t)):Q(r)?Xt(r):Te(Ut(I(t)))}function Yt(t){var r=ce(ge(t)),e=["absolute","fixed"].indexOf(N(t).position)>=0,n=e&&B(t)?se(t):t;return Q(n)?r.filter(function(o){return Q(o)&&it(o,n)&&C(o)!=="body"}):[]}function Gt(t,r,e){var n=r==="clippingParents"?Yt(t):[].concat(r),o=[].concat(n,[e]),s=o[0],a=o.reduce(function(i,d){var u=ht(t,d);return i.top=X(u.top,i.top),i.right=ve(u.right,i.right),i.bottom=ve(u.bottom,i.bottom),i.left=X(u.left,i.left),i},ht(t,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mt(t){var r=t.reference,e=t.element,n=t.placement,o=n?q(n):null,s=n?te(n):null,a=r.x+r.width/2-e.width/2,i=r.y+r.height/2-e.height/2,d;switch(o){case E:d={x:a,y:r.y-e.height};break;case R:d={x:a,y:r.y+r.height};break;case W:d={x:r.x+r.width,y:i};break;case P:d={x:r.x-e.width,y:i};break;default:d={x:r.x,y:r.y}}var u=o?Le(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case U:d[u]=d[u]-(r[c]/2-e[c]/2);break;case J:d[u]=d[u]+(r[c]/2-e[c]/2);break}}return d}function ne(t,r){r===void 0&&(r={});var e=r,n=e.placement,o=n===void 0?t.placement:n,s=e.boundary,a=s===void 0?Xe:s,i=e.rootBoundary,d=i===void 0?je:i,u=e.elementContext,c=u===void 0?K:u,m=e.altBoundary,v=m===void 0?!1:m,g=e.padding,b=g===void 0?0:g,T=ft(typeof b!="number"?b:ct(b,G)),k=c===K?Ye:K,y=t.rects.popper,A=t.elements[v?k:c],V=Gt(Q(A)?A:A.contextElement||I(t.elements.popper),a,d),Ce=ee(t.elements.reference),ie=mt({reference:Ce,element:y,strategy:"absolute",placement:o}),Oe=Te(Object.assign({},y,ie)),he=c===K?Oe:Ce,Y={top:V.top-he.top+T.top,bottom:he.bottom-V.bottom+T.bottom,left:V.left-he.left+T.left,right:he.right-V.right+T.right},ae=t.modifiersData.offset;if(c===K&&ae){var Fe=ae[o];Object.keys(Y).forEach(function(ze){var pe=[W,R].indexOf(ze)>=0?1:-1,le=[E,R].indexOf(ze)>=0?"y":"x";Y[ze]+=Fe[le]*pe})}return Y}function Jt(t,r){r===void 0&&(r={});var e=r,n=e.placement,o=e.boundary,s=e.rootBoundary,a=e.padding,i=e.flipVariations,d=e.allowedAutoPlacements,u=d===void 0?Ee:d,c=te(n),m=c?i?De:De.filter(function(b){return te(b)===c}):G,v=m.filter(function(b){return u.indexOf(b)>=0});v.length===0&&(v=m);var g=v.reduce(function(b,T){return b[T]=ne(t,{placement:T,boundary:o,rootBoundary:s,padding:a})[q(T)],b},{});return Object.keys(g).sort(function(b,T){return g[b]-g[T]})}function Kt(t){if(q(t)===me)return[];var r=be(t);return[lt(t),r,lt(r)]}function Qt(t){var r=t.state,e=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var o=e.mainAxis,s=o===void 0?!0:o,a=e.altAxis,i=a===void 0?!0:a,d=e.fallbackPlacements,u=e.padding,c=e.boundary,m=e.rootBoundary,v=e.altBoundary,g=e.flipVariations,b=g===void 0?!0:g,T=e.allowedAutoPlacements,k=r.options.placement,y=q(k),A=y===k,V=d||(A||!b?[be(k)]:Kt(k)),Ce=[k].concat(V).reduce(function(Ne,or){return Ne.concat(q(or)===me?Jt(r,{placement:or,boundary:c,rootBoundary:m,padding:u,flipVariations:b,allowedAutoPlacements:T}):or)},[]),ie=r.rects.reference,Oe=r.rects.popper,he=new Map,Y=!0,ae=Ce[0],Fe=0;Fe<Ce.length;Fe++){var ze=Ce[Fe],pe=q(ze),le=te(ze)===U,xe=[E,R].indexOf(pe)>=0,ue=xe?"width":"height",Ve=ne(r,{placement:ze,boundary:c,rootBoundary:m,altBoundary:v,padding:u}),Ue=xe?le?W:P:le?R:E;ie[ue]>Oe[ue]&&(Ue=be(Ue));var er=be(Ue),At=[];if(s&&At.push(Ve[pe]<=0),i&&At.push(Ve[Ue]<=0,Ve[er]<=0),At.every(function(Ne){return Ne})){ae=ze,Y=!1;break}he.set(ze,At)}if(Y)for(var ur=b?3:1,pr=function(Ne){var or=Ce.find(function(ir){var $e=he.get(ir);if($e)return $e.slice(0,Ne).every(function(tr){return tr})});if(or)return ae=or,"break"},ar=ur;ar>0;ar--){var hr=pr(ar);if(hr==="break")break}r.placement!==ae&&(r.modifiersData[n]._skip=!0,r.placement=ae,r.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,r,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-r.height-e.y,right:t.right-r.width+e.x,bottom:t.bottom-r.height+e.y,left:t.left-r.width-e.x}}function yt(t){return[E,W,R,P].some(function(r){return t[r]>=0})}function Zt(t){var r=t.state,e=t.name,n=r.rects.reference,o=r.rects.popper,s=r.modifiersData.preventOverflow,a=ne(r,{elementContext:"reference"}),i=ne(r,{altBoundary:!0}),d=gt(a,n),u=gt(i,o,s),c=yt(d),m=yt(u);r.modifiersData[e]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:m},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":m})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(t,r,e){var n=q(t),o=[P,E].indexOf(n)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},r,{placement:t})):e,a=s[0],i=s[1];return a=a||0,i=(i||0)*o,[P,W].indexOf(n)>=0?{x:i,y:a}:{x:a,y:i}}function tn(t){var r=t.state,e=t.options,n=t.name,o=e.offset,s=o===void 0?[0,0]:o,a=Ee.reduce(function(c,m){return c[m]=en(m,r.rects,s),c},{}),i=a[r.placement],d=i.x,u=i.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=d,r.modifiersData.popperOffsets.y+=u),r.modifiersData[n]=a}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(t){var r=t.state,e=t.name;r.modifiersData[e]=mt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(t){return t==="x"?"y":"x"}function on(t){var r=t.state,e=t.options,n=t.name,o=e.mainAxis,s=o===void 0?!0:o,a=e.altAxis,i=a===void 0?!1:a,d=e.boundary,u=e.rootBoundary,c=e.altBoundary,m=e.padding,v=e.tether,g=v===void 0?!0:v,b=e.tetherOffset,T=b===void 0?0:b,k=ne(r,{boundary:d,rootBoundary:u,padding:m,altBoundary:c}),y=q(r.placement),A=te(r.placement),V=!A,Ce=Le(y),ie=rn(Ce),Oe=r.modifiersData.popperOffsets,he=r.rects.reference,Y=r.rects.popper,ae=typeof T=="function"?T(Object.assign({},r.rects,{placement:r.placement})):T,Fe=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),ze=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,pe={x:0,y:0};if(Oe){if(s){var le,xe=Ce==="y"?E:P,ue=Ce==="y"?R:W,Ve=Ce==="y"?"height":"width",Ue=Oe[Ce],er=Ue+k[xe],At=Ue-k[ue],ur=g?-Y[Ve]/2:0,pr=A===U?he[Ve]:Y[Ve],ar=A===U?-Y[Ve]:-he[Ve],hr=r.elements.arrow,Ne=g&&hr?ke(hr):{width:0,height:0},or=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:st(),ir=or[xe],$e=or[ue],tr=fe(0,he[Ve],Ne[Ve]),nr=V?he[Ve]/2-ur-tr-ir-Fe.mainAxis:pr-tr-ir-Fe.mainAxis,Pt=V?-he[Ve]/2+ur+tr+$e+Fe.mainAxis:ar+tr+$e+Fe.mainAxis,Et=r.elements.arrow&&se(r.elements.arrow),kt=Et?Ce==="y"?Et.clientTop||0:Et.clientLeft||0:0,rr=(le=ze==null?void 0:ze[Ce])!=null?le:0,cr=Ue+nr-rr-kt,mr=Ue+Pt-rr,yr=fe(g?ve(er,cr):er,Ue,g?X(At,mr):At);Oe[Ce]=yr,pe[Ce]=yr-Ue}if(i){var Tr,Ir=Ce==="x"?E:P,kr=Ce==="x"?R:W,Ar=Oe[ie],Rr=ie==="y"?"height":"width",Mn=Ar+k[Ir],Or=Ar-k[kr],Pr=[E,P].indexOf(y)!==-1,Nr=(Tr=ze==null?void 0:ze[ie])!=null?Tr:0,Wr=Pr?Mn:Ar-he[Rr]-Y[Rr]-Nr+Fe.altAxis,Yr=Pr?Ar+he[Rr]+Y[Rr]-Nr-Fe.altAxis:Or,Ur=g&&Pr?St(Wr,Ar,Yr):fe(g?Wr:Mn,Ar,g?Yr:Or);Oe[ie]=Ur,pe[ie]=Ur-Ar}r.modifiersData[n]=pe}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sn(t){return t===H(t)||!B(t)?We(t):an(t)}function fn(t){var r=t.getBoundingClientRect(),e=Z(r.width)/t.offsetWidth||1,n=Z(r.height)/t.offsetHeight||1;return e!==1||n!==1}function cn(t,r,e){e===void 0&&(e=!1);var n=B(r),o=B(r)&&fn(r),s=I(r),a=ee(t,o),i={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!e)&&((C(r)!=="body"||Se(s))&&(i=sn(r)),B(r)?(d=ee(r,!0),d.x+=r.clientLeft,d.y+=r.clientTop):s&&(d.x=Be(s))),{x:a.left+i.scrollLeft-d.x,y:a.top+i.scrollTop-d.y,width:a.width,height:a.height}}function pn(t){var r=new Map,e=new Set,n=[];t.forEach(function(s){r.set(s.name,s)});function o(s){e.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(i){if(!e.has(i)){var d=r.get(i);d&&o(d)}}),n.push(s)}return t.forEach(function(s){e.has(s.name)||o(s)}),n}function un(t){var r=pn(t);return ot.reduce(function(e,n){return e.concat(r.filter(function(o){return o.phase===n}))},[])}function ln(t){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(t())})})),r}}function dn(t){var r=t.reduce(function(e,n){var o=e[n.name];return e[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(t){t===void 0&&(t={});var r=t,e=r.defaultModifiers,n=e===void 0?[]:e,o=r.defaultOptions,s=o===void 0?Ot:o;return function(a,i,d){d===void 0&&(d=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,s),modifiersData:{},elements:{reference:a,popper:i},attributes:{},styles:{}},c=[],m=!1,v={state:u,setOptions:function(T){var k=typeof T=="function"?T(u.options):T;b(),u.options=Object.assign({},s,u.options,k),u.scrollParents={reference:Q(a)?ce(a):a.contextElement?ce(a.contextElement):[],popper:ce(i)};var y=un(dn([].concat(n,u.options.modifiers)));return u.orderedModifiers=y.filter(function(A){return A.enabled}),g(),v.update()},forceUpdate:function(){if(!m){var T=u.elements,k=T.reference,y=T.popper;if($t(k,y)){u.rects={reference:cn(k,se(y),u.options.strategy==="fixed"),popper:ke(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Y){return u.modifiersData[Y.name]=Object.assign({},Y.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var V=u.orderedModifiers[A],Ce=V.fn,ie=V.options,Oe=ie===void 0?{}:ie,he=V.name;typeof Ce=="function"&&(u=Ce({state:u,options:Oe,name:he,instance:v})||u)}}}},update:ln(function(){return new Promise(function(T){v.forceUpdate(),T(u)})}),destroy:function(){b(),m=!0}};if(!$t(a,i))return v;v.setOptions(d).then(function(T){!m&&d.onFirstUpdate&&d.onFirstUpdate(T)});function g(){u.orderedModifiers.forEach(function(T){var k=T.name,y=T.options,A=y===void 0?{}:y,V=T.effect;if(typeof V=="function"){var Ce=V({state:u,name:k,instance:v,options:A}),ie=function(){};c.push(Ce||ie)}})}function b(){c.forEach(function(T){return T()}),c=[]}return v}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(t,r,e={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:d})=>{const u=deriveState(d);Object.assign(a.value,u)},requires:["computeStyles"]},o=computed(()=>{const{onFirstUpdate:d,placement:u,strategy:c,modifiers:m}=unref(e);return{onFirstUpdate:d,placement:u||"bottom",strategy:c||"absolute",modifiers:[...m||[],n,{name:"applyStyles",enabled:!1}]}}),s=shallowRef(),a=ref({styles:{popper:{position:unref(o).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),i=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return watch(o,d=>{const u=unref(s);u&&u.setOptions(d)},{deep:!0}),watch([t,r],([d,u])=>{i(),!(!d||!u)&&(s.value=yn(d,u,unref(o)))}),onBeforeUnmount(()=>{i()}),{state:computed(()=>{var d;return{...((d=unref(s))==null?void 0:d.state)||{}}}),styles:computed(()=>unref(a).styles),attributes:computed(()=>unref(a).attributes),update:()=>{var d;return(d=unref(s))==null?void 0:d.update()},forceUpdate:()=>{var d;return(d=unref(s))==null?void 0:d.forceUpdate()},instanceRef:computed(()=>unref(s))}};function deriveState(t){const r=Object.keys(t.elements),e=fromPairs(r.map(o=>[o,t.styles[o]||{}])),n=fromPairs(r.map(o=>[o,t.attributes[o]]));return{styles:e,attributes:n}}const useSameTarget=t=>{if(!t)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let r=!1,e=!1;return{onClick:a=>{r&&e&&t(a),r=e=!1},onMousedown:a=>{r=a.target===a.currentTarget},onMouseup:a=>{e=a.target===a.currentTarget}}};function useTimeout(){let t;const r=(n,o)=>{e(),t=window.setTimeout(n,o)},e=()=>window.clearTimeout(t);return tryOnScopeDispose(()=>e()),{registerTimeout:r,cancelTimeout:e}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=t=>{const r=useIdInjection(),e=useGetDerivedNamespace();return computed(()=>unref(t)||`${e.value}-id-${r.prefix}-${r.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=t=>{const r=t;r.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(e=>e(r))},useEscapeKeydown=t=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(t)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(r=>r!==t),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const t=useGetDerivedNamespace(),r=useIdInjection(),e=computed(()=>`${t.value}-popper-container-${r.prefix}`),n=computed(()=>`#${e.value}`);return{id:e,selector:n}},createContainer=t=>{const r=document.createElement("div");return r.id=t,document.body.appendChild(r),r},usePopperContainer=()=>{const{id:t,selector:r}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(r.value)&&(cachedContainer=createContainer(t.value))}),{id:t,selector:r}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:t,hideAfter:r,autoClose:e,open:n,close:o})=>{const{registerTimeout:s}=useTimeout(),{registerTimeout:a,cancelTimeout:i}=useTimeout();return{onOpen:c=>{s(()=>{n(c);const m=unref(e);isNumber$1(m)&&m>0&&a(()=>{o(c)},m)},unref(t))},onClose:c=>{i(),s(()=>{o(c)},unref(r))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=t=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:e=>{t.value=e}})},useForwardRefDirective=t=>({mounted(r){t(r)},updated(r){t(r)},unmounted(){t(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=t=>{const r=t||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),e=computed(()=>{const s=unref(r);return isNumber$1(s)?s:defaultInitialZIndex}),n=computed(()=>e.value+zIndex.value);return{initialZIndex:e,currentZIndex:n,nextZIndex:()=>(zIndex.value++,n.value)}};function useCursor(t){const r=ref();function e(){if(t.value==null)return;const{selectionStart:o,selectionEnd:s,value:a}=t.value;if(o==null||s==null)return;const i=a.slice(0,Math.max(0,o)),d=a.slice(Math.max(0,s));r.value={selectionStart:o,selectionEnd:s,value:a,beforeTxt:i,afterTxt:d}}function n(){if(t.value==null||r.value==null)return;const{value:o}=t.value,{beforeTxt:s,afterTxt:a,selectionStart:i}=r.value;if(s==null||a==null||i==null)return;let d=o.length;if(o.endsWith(a))d=o.length-a.length;else if(o.startsWith(s))d=s.length;else{const u=s[i-1],c=o.indexOf(u,i-1);c!==-1&&(d=c+1)}t.value.setSelectionRange(d,d)}return[e,n]}const useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const t=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(t.size)||"")};function useFocusController(t,{afterFocus:r,afterBlur:e}={}){const n=getCurrentInstance(),{emit:o}=n,s=shallowRef(),a=ref(!1),i=c=>{a.value||(a.value=!0,o("focus",c),r==null||r())},d=c=>{var m;c.relatedTarget&&((m=s.value)!=null&&m.contains(c.relatedTarget))||(a.value=!1,o("blur",c),e==null||e())},u=()=>{var c;(c=t.value)==null||c.focus()};return watch(s,c=>{c&&c.setAttribute("tabindex","-1")}),useEventListener(s,"click",u),{wrapperRef:s,isFocused:a,handleFocus:i,handleBlur:d}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(t,r=void 0){const e=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return t?computed(()=>{var n,o;return(o=(n=e.value)==null?void 0:n[t])!=null?o:r}):e}function useGlobalComponentSettings(t,r){const e=useGlobalConfig(),n=useNamespace(t,computed(()=>{var i;return((i=e.value)==null?void 0:i.namespace)||defaultNamespace})),o=useLocale(computed(()=>{var i;return(i=e.value)==null?void 0:i.locale})),s=useZIndex(computed(()=>{var i;return((i=e.value)==null?void 0:i.zIndex)||defaultInitialZIndex})),a=computed(()=>{var i;return unref(r)||((i=e.value)==null?void 0:i.size)||""});return provideGlobalConfig(computed(()=>unref(e)||{})),{ns:n,locale:o,zIndex:s,size:a}}const provideGlobalConfig=(t,r,e=!1)=>{var n;const o=!!getCurrentInstance(),s=o?useGlobalConfig():void 0,a=(n=r==null?void 0:r.provide)!=null?n:o?provide:void 0;if(!a)return;const i=computed(()=>{const d=unref(t);return s!=null&&s.value?mergeConfig$1(s.value,d):d});return a(configProviderContextKey,i),a(localeContextKey,computed(()=>i.value.locale)),a(namespaceContextKey,computed(()=>i.value.namespace)),a(zIndexContextKey,computed(()=>i.value.zIndex)),a(SIZE_INJECTION_KEY,{size:computed(()=>i.value.size||"")}),(e||!globalConfig.value)&&(globalConfig.value=i.value),i},mergeConfig$1=(t,r)=>{var e;const n=[...new Set([...keysOf(t),...keysOf(r)])],o={};for(const s of n)o[s]=(e=r[s])!=null?e:t[s];return o},messageConfig={},affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:t,fixed:r})=>isNumber$1(t)&&isBoolean$1(r),[CHANGE_EVENT]:t=>isBoolean$1(t)};var _export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,o]of r)e[n]=o;return e};const COMPONENT_NAME$9="ElAffix",__default__$L=defineComponent({name:COMPONENT_NAME$9}),_sfc_main$17=defineComponent({...__default__$L,props:affixProps,emits:affixEmits,setup(t,{expose:r,emit:e}){const n=t,o=useNamespace("affix"),s=shallowRef(),a=shallowRef(),i=shallowRef(),{height:d}=useWindowSize(),{height:u,width:c,top:m,bottom:v,update:g}=useElementBounding(a,{windowScroll:!1}),b=useElementBounding(s),T=ref(!1),k=ref(0),y=ref(0),A=computed(()=>({height:T.value?`${u.value}px`:"",width:T.value?`${c.value}px`:""})),V=computed(()=>{if(!T.value)return{};const Oe=n.offset?addUnit(n.offset):0;return{height:`${u.value}px`,width:`${c.value}px`,top:n.position==="top"?Oe:"",bottom:n.position==="bottom"?Oe:"",transform:y.value?`translateY(${y.value}px)`:"",zIndex:n.zIndex}}),Ce=()=>{if(i.value)if(k.value=i.value instanceof Window?document.documentElement.scrollTop:i.value.scrollTop||0,n.position==="top")if(n.target){const Oe=b.bottom.value-n.offset-u.value;T.value=n.offset>m.value&&b.bottom.value>0,y.value=Oe<0?Oe:0}else T.value=n.offset>m.value;else if(n.target){const Oe=d.value-b.top.value-n.offset-u.value;T.value=d.value-n.offset<v.value&&d.value>b.top.value,y.value=Oe<0?-Oe:0}else T.value=d.value-n.offset<v.value},ie=()=>{g(),e("scroll",{scrollTop:k.value,fixed:T.value})};return watch(T,Oe=>e("change",Oe)),onMounted(()=>{var Oe;n.target?(s.value=(Oe=document.querySelector(n.target))!=null?Oe:void 0,s.value||throwError(COMPONENT_NAME$9,`Target is not existed: ${n.target}`)):s.value=document.documentElement,i.value=getScrollContainer(a.value,!0),g()}),useEventListener(i,"scroll",ie),watchEffect(Ce),r({update:Ce,updateRoot:g}),(Oe,he)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:a,class:normalizeClass(unref(o).b()),style:normalizeStyle(unref(A))},[createBaseVNode("div",{class:normalizeClass({[unref(o).m("fixed")]:T.value}),style:normalizeStyle(unref(V))},[renderSlot(Oe.$slots,"default")],6)],6))}});var Affix=_export_sfc(_sfc_main$17,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$K=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$16=defineComponent({...__default__$K,props:iconProps,setup(t){const r=t,e=useNamespace("icon"),n=computed(()=>{const{size:o,color:s}=r;return!o&&!s?{}:{fontSize:isUndefined$1(o)?void 0:addUnit(o),"--color":s}});return(o,s)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(e).b(),style:unref(n)},o.$attrs),[renderSlot(o.$slots,"default")],16))}});var Icon=_export_sfc(_sfc_main$16,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const ElIcon=withInstall(Icon),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(t,r={})=>{const e=ref(void 0),n=r.prop?e:useProp("size"),o=r.global?e:useGlobalSize(),s=r.form?{size:void 0}:inject(formContextKey,void 0),a=r.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>n.value||unref(t)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||o.value||"")},useFormDisabled=t=>{const r=useProp("disabled"),e=inject(formContextKey,void 0);return computed(()=>r.value||unref(t)||(e==null?void 0:e.disabled)||!1)},useFormItem=()=>{const t=inject(formContextKey,void 0),r=inject(formItemContextKey,void 0);return{form:t,formItem:r}},useFormItemInputId=(t,{formItemContext:r,disableIdGeneration:e,disableIdManagement:n})=>{e||(e=ref(!1)),n||(n=ref(!1));const o=ref();let s;const a=computed(()=>{var i;return!!(!t.label&&r&&r.inputIds&&((i=r.inputIds)==null?void 0:i.length)<=1)});return onMounted(()=>{s=watch([toRef(t,"id"),e],([i,d])=>{const u=i??(d?void 0:useId().value);u!==o.value&&(r!=null&&r.removeInputId&&(o.value&&r.removeInputId(o.value),!(n!=null&&n.value)&&!d&&u&&r.addInputId(u)),o.value=u)},{immediate:!0})}),onUnmounted(()=>{s&&s(),r!=null&&r.removeInputId&&o.value&&r.removeInputId(o.value)}),{isLabeledByFormItem:a,inputId:o}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(t,r,e)=>(isArray$4(t)||isString$2(t))&&isBoolean$1(r)&&isString$2(e)};function useFormLabelWidth(){const t=ref([]),r=computed(()=>{if(!t.value.length)return"0";const s=Math.max(...t.value);return s?`${s}px`:""});function e(s){const a=t.value.indexOf(s);return a===-1&&r.value,a}function n(s,a){if(s&&a){const i=e(a);t.value.splice(i,1,s)}else s&&t.value.push(s)}function o(s){const a=e(s);a>-1&&t.value.splice(a,1)}return{autoLabelWidth:r,registerLabelWidth:n,deregisterLabelWidth:o}}const filterFields=(t,r)=>{const e=castArray$1(r);return e.length>0?t.filter(n=>n.prop&&e.includes(n.prop)):t},COMPONENT_NAME$8="ElForm",__default__$J=defineComponent({name:COMPONENT_NAME$8}),_sfc_main$15=defineComponent({...__default__$J,props:formProps,emits:formEmits,setup(t,{expose:r,emit:e}){const n=t,o=[],s=useFormSize(),a=useNamespace("form"),i=computed(()=>{const{labelPosition:A,inline:V}=n;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${A}`)]:A,[a.m("inline")]:V}]}),d=A=>{o.push(A)},u=A=>{A.prop&&o.splice(o.indexOf(A),1)},c=(A=[])=>{n.model&&filterFields(o,A).forEach(V=>V.resetField())},m=(A=[])=>{filterFields(o,A).forEach(V=>V.clearValidate())},v=computed(()=>!!n.model),g=A=>{if(o.length===0)return[];const V=filterFields(o,A);return V.length?V:[]},b=async A=>k(void 0,A),T=async(A=[])=>{if(!v.value)return!1;const V=g(A);if(V.length===0)return!0;let Ce={};for(const ie of V)try{await ie.validate("")}catch(Oe){Ce={...Ce,...Oe}}return Object.keys(Ce).length===0?!0:Promise.reject(Ce)},k=async(A=[],V)=>{const Ce=!isFunction$3(V);try{const ie=await T(A);return ie===!0&&(V==null||V(ie)),ie}catch(ie){if(ie instanceof Error)throw ie;const Oe=ie;return n.scrollToError&&y(Object.keys(Oe)[0]),V==null||V(!1,Oe),Ce&&Promise.reject(Oe)}},y=A=>{var V;const Ce=filterFields(o,A)[0];Ce&&((V=Ce.$el)==null||V.scrollIntoView(n.scrollIntoViewOptions))};return watch(()=>n.rules,()=>{n.validateOnRuleChange&&b().catch(A=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(n),emit:e,resetFields:c,clearValidate:m,validateField:k,addField:d,removeField:u,...useFormLabelWidth()})),r({validate:b,validateField:k,resetFields:c,clearValidate:m,scrollToField:y}),(A,V)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(i))},[renderSlot(A.$slots,"default")],2))}});var Form=_export_sfc(_sfc_main$15,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(t,r,e){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(o,s,a){var i=[null];i.push.apply(i,s);var d=Function.bind.apply(o,i),u=new d;return a&&_setPrototypeOf(u,a.prototype),u},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,o)}function o(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(o,n)},_wrapNativeSuper(t)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(t){if(!t||!t.length)return null;var r={};return t.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function format(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var o=0,s=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var a=t.replace(formatRegExp,function(i){if(i==="%%")return"%";if(o>=s)return i;switch(i){case"%s":return String(e[o++]);case"%d":return Number(e[o++]);case"%j":try{return JSON.stringify(e[o++])}catch{return"[Circular]"}break;default:return i}});return a}return t}function isNativeStringType(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function isEmptyValue(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||isNativeStringType(r)&&typeof t=="string"&&!t)}function asyncParallelArray(t,r,e){var n=[],o=0,s=t.length;function a(i){n.push.apply(n,i||[]),o++,o===s&&e(n)}t.forEach(function(i){r(i,a)})}function asyncSerialArray(t,r,e){var n=0,o=t.length;function s(a){if(a&&a.length){e(a);return}var i=n;n=n+1,i<o?r(t[i],s):e([])}s([])}function flattenObjArr(t){var r=[];return Object.keys(t).forEach(function(e){r.push.apply(r,t[e]||[])}),r}var AsyncValidationError=function(t){_inheritsLoose(r,t);function r(e,n){var o;return o=t.call(this,"Async Validation Error")||this,o.errors=e,o.fields=n,o}return r}(_wrapNativeSuper(Error));function asyncMap(t,r,e,n,o){if(r.first){var s=new Promise(function(v,g){var b=function(y){return n(y),y.length?g(new AsyncValidationError(y,convertFieldsError(y))):v(o)},T=flattenObjArr(t);asyncSerialArray(T,e,b)});return s.catch(function(v){return v}),s}var a=r.firstFields===!0?Object.keys(t):r.firstFields||[],i=Object.keys(t),d=i.length,u=0,c=[],m=new Promise(function(v,g){var b=function(k){if(c.push.apply(c,k),u++,u===d)return n(c),c.length?g(new AsyncValidationError(c,convertFieldsError(c))):v(o)};i.length||(n(c),v(o)),i.forEach(function(T){var k=t[T];a.indexOf(T)!==-1?asyncSerialArray(k,e,b):asyncParallelArray(k,e,b)})});return m.catch(function(v){return v}),m}function isErrorObj(t){return!!(t&&t.message!==void 0)}function getValue(t,r){for(var e=t,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function complementError(t,r){return function(e){var n;return t.fullFields?n=getValue(r,t.fullFields):n=r[e.field||t.fullField],isErrorObj(e)?(e.field=e.field||t.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||t.fullField}}}function deepMerge(t,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];typeof n=="object"&&typeof t[e]=="object"?t[e]=_extends({},t[e],n):t[e]=n}}return t}var required$1=function(r,e,n,o,s,a){r.required&&(!n.hasOwnProperty(r.field)||isEmptyValue(e,a||r.type))&&o.push(format(s.messages.required,r.fullField))},whitespace=function(r,e,n,o,s){(/^\s+$/.test(e)||e==="")&&o.push(format(s.messages.whitespace,r.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var t="[a-fA-F\\d:]",r=function(Ce){return Ce&&Ce.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",o=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+e+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+e+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+e+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+e+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+e+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+e+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+e+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+e+"$)|(?:^"+o+"$)"),a=new RegExp("^"+e+"$"),i=new RegExp("^"+o+"$"),d=function(Ce){return Ce&&Ce.exact?s:new RegExp("(?:"+r(Ce)+e+r(Ce)+")|(?:"+r(Ce)+o+r(Ce)+")","g")};d.v4=function(V){return V&&V.exact?a:new RegExp(""+r(V)+e+r(V),"g")},d.v6=function(V){return V&&V.exact?i:new RegExp(""+r(V)+o+r(V),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",m=d.v4().source,v=d.v6().source,g="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",b="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",T="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",k="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',A="(?:"+u+"|www\\.)"+c+"(?:localhost|"+m+"|"+v+"|"+g+b+T+")"+k+y;return urlReg=new RegExp("(?:^"+A+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(r){return types.number(r)&&parseInt(r,10)===r},float:function(r){return types.number(r)&&!types.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!types.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(pattern$2.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(getUrlRegex())},hex:function(r){return typeof r=="string"&&!!r.match(pattern$2.hex)}},type$1=function(r,e,n,o,s){if(r.required&&e===void 0){required$1(r,e,n,o,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=r.type;a.indexOf(i)>-1?types[i](e)||o.push(format(s.messages.types[i],r.fullField,r.type)):i&&typeof e!==r.type&&o.push(format(s.messages.types[i],r.fullField,r.type))},range$1=function(r,e,n,o,s){var a=typeof r.len=="number",i=typeof r.min=="number",d=typeof r.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,m=null,v=typeof e=="number",g=typeof e=="string",b=Array.isArray(e);if(v?m="number":g?m="string":b&&(m="array"),!m)return!1;b&&(c=e.length),g&&(c=e.replace(u,"_").length),a?c!==r.len&&o.push(format(s.messages[m].len,r.fullField,r.len)):i&&!d&&c<r.min?o.push(format(s.messages[m].min,r.fullField,r.min)):d&&!i&&c>r.max?o.push(format(s.messages[m].max,r.fullField,r.max)):i&&d&&(c<r.min||c>r.max)&&o.push(format(s.messages[m].range,r.fullField,r.min,r.max))},ENUM$1="enum",enumerable$1=function(r,e,n,o,s){r[ENUM$1]=Array.isArray(r[ENUM$1])?r[ENUM$1]:[],r[ENUM$1].indexOf(e)===-1&&o.push(format(s.messages[ENUM$1],r.fullField,r[ENUM$1].join(", ")))},pattern$1=function(r,e,n,o,s){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||o.push(format(s.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var a=new RegExp(r.pattern);a.test(e)||o.push(format(s.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,o,a,s,"string"),isEmptyValue(e,"string")||(rules.type(r,e,o,a,s),rules.range(r,e,o,a,s),rules.pattern(r,e,o,a,s),r.whitespace===!0&&rules.whitespace(r,e,o,a,s))}n(a)},method=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&rules.type(r,e,o,a,s)}n(a)},number=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(e===""&&(e=void 0),isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&(rules.type(r,e,o,a,s),rules.range(r,e,o,a,s))}n(a)},_boolean=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&rules.type(r,e,o,a,s)}n(a)},regexp=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),isEmptyValue(e)||rules.type(r,e,o,a,s)}n(a)},integer=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&(rules.type(r,e,o,a,s),rules.range(r,e,o,a,s))}n(a)},floatFn=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&(rules.type(r,e,o,a,s),rules.range(r,e,o,a,s))}n(a)},array=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(e==null&&!r.required)return n();rules.required(r,e,o,a,s,"array"),e!=null&&(rules.type(r,e,o,a,s),rules.range(r,e,o,a,s))}n(a)},object=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&rules.type(r,e,o,a,s)}n(a)},ENUM="enum",enumerable=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s),e!==void 0&&rules[ENUM](r,e,o,a,s)}n(a)},pattern=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,o,a,s),isEmptyValue(e,"string")||rules.pattern(r,e,o,a,s)}n(a)},date=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e,"date")&&!r.required)return n();if(rules.required(r,e,o,a,s),!isEmptyValue(e,"date")){var d;e instanceof Date?d=e:d=new Date(e),rules.type(r,d,o,a,s),d&&rules.range(r,d.getTime(),o,a,s)}}n(a)},required=function(r,e,n,o,s){var a=[],i=Array.isArray(e)?"array":typeof e;rules.required(r,e,o,a,s,i),n(a)},type=function(r,e,n,o,s){var a=r.type,i=[],d=r.required||!r.required&&o.hasOwnProperty(r.field);if(d){if(isEmptyValue(e,a)&&!r.required)return n();rules.required(r,e,o,i,s,a),isEmptyValue(e,a)||rules.type(r,e,o,i,s)}n(i)},any=function(r,e,n,o,s){var a=[],i=r.required||!r.required&&o.hasOwnProperty(r.field);if(i){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,o,a,s)}n(a)},validators$2={string,method,number,boolean:_boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var messages=newMessages(),Schema=function(){function t(e){this.rules=null,this._messages=messages,this.define(e)}var r=t.prototype;return r.define=function(n){var o=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(s){var a=n[s];o.rules[s]=Array.isArray(a)?a:[a]})},r.messages=function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages},r.validate=function(n,o,s){var a=this;o===void 0&&(o={}),s===void 0&&(s=function(){});var i=n,d=o,u=s;if(typeof d=="function"&&(u=d,d={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,i),Promise.resolve(i);function c(T){var k=[],y={};function A(Ce){if(Array.isArray(Ce)){var ie;k=(ie=k).concat.apply(ie,Ce)}else k.push(Ce)}for(var V=0;V<T.length;V++)A(T[V]);k.length?(y=convertFieldsError(k),u(k,y)):u(null,i)}if(d.messages){var m=this.messages();m===messages&&(m=newMessages()),deepMerge(m,d.messages),d.messages=m}else d.messages=this.messages();var v={},g=d.keys||Object.keys(this.rules);g.forEach(function(T){var k=a.rules[T],y=i[T];k.forEach(function(A){var V=A;typeof V.transform=="function"&&(i===n&&(i=_extends({},i)),y=i[T]=V.transform(y)),typeof V=="function"?V={validator:V}:V=_extends({},V),V.validator=a.getValidationMethod(V),V.validator&&(V.field=T,V.fullField=V.fullField||T,V.type=a.getType(V),v[T]=v[T]||[],v[T].push({rule:V,value:y,source:i,field:T}))})});var b={};return asyncMap(v,d,function(T,k){var y=T.rule,A=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");A=A&&(y.required||!y.required&&T.value),y.field=T.field;function V(Oe,he){return _extends({},he,{fullField:y.fullField+"."+Oe,fullFields:y.fullFields?[].concat(y.fullFields,[Oe]):[Oe]})}function Ce(Oe){Oe===void 0&&(Oe=[]);var he=Array.isArray(Oe)?Oe:[Oe];!d.suppressWarning&&he.length&&t.warning("async-validator:",he),he.length&&y.message!==void 0&&(he=[].concat(y.message));var Y=he.map(complementError(y,i));if(d.first&&Y.length)return b[y.field]=1,k(Y);if(!A)k(Y);else{if(y.required&&!T.value)return y.message!==void 0?Y=[].concat(y.message).map(complementError(y,i)):d.error&&(Y=[d.error(y,format(d.messages.required,y.field))]),k(Y);var ae={};y.defaultField&&Object.keys(T.value).map(function(pe){ae[pe]=y.defaultField}),ae=_extends({},ae,T.rule.fields);var Fe={};Object.keys(ae).forEach(function(pe){var le=ae[pe],xe=Array.isArray(le)?le:[le];Fe[pe]=xe.map(V.bind(null,pe))});var ze=new t(Fe);ze.messages(d.messages),T.rule.options&&(T.rule.options.messages=d.messages,T.rule.options.error=d.error),ze.validate(T.value,T.rule.options||d,function(pe){var le=[];Y&&Y.length&&le.push.apply(le,Y),pe&&pe.length&&le.push.apply(le,pe),k(le.length?le:null)})}}var ie;if(y.asyncValidator)ie=y.asyncValidator(y,T.value,Ce,T.source,d);else if(y.validator){try{ie=y.validator(y,T.value,Ce,T.source,d)}catch(Oe){console.error==null||console.error(Oe),d.suppressValidatorError||setTimeout(function(){throw Oe},0),Ce(Oe.message)}ie===!0?Ce():ie===!1?Ce(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):ie instanceof Array?Ce(ie):ie instanceof Error&&Ce(ie.message)}ie&&ie.then&&ie.then(function(){return Ce()},function(Oe){return Ce(Oe)})},function(T){c(T)},i)},r.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators$2.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"},r.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var o=Object.keys(n),s=o.indexOf("message");return s!==-1&&o.splice(s,1),o.length===1&&o[0]==="required"?validators$2.required:validators$2[this.getType(n)]||void 0},t}();Schema.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$2[r]=e};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators$2;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$7="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$7,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:r}){const e=inject(formContextKey,void 0),n=inject(formItemContextKey);n||throwError(COMPONENT_NAME$7,"usage: <el-form-item><label-wrap /></el-form-item>");const o=useNamespace("form"),s=ref(),a=ref(0),i=()=>{var c;if((c=s.value)!=null&&c.firstElementChild){const m=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(m))}else return 0},d=(c="update")=>{nextTick(()=>{r.default&&t.isAutoWidth&&(c==="update"?a.value=i():c==="remove"&&(e==null||e.deregisterLabelWidth(a.value)))})},u=()=>d("update");return onMounted(()=>{u()}),onBeforeUnmount(()=>{d("remove")}),onUpdated(()=>u()),watch(a,(c,m)=>{t.updateAll&&(e==null||e.registerLabelWidth(c,m))}),useResizeObserver(computed(()=>{var c,m;return(m=(c=s.value)==null?void 0:c.firstElementChild)!=null?m:null}),u),()=>{var c,m;if(!r)return null;const{isAutoWidth:v}=t;if(v){const g=e==null?void 0:e.autoLabelWidth,b=n==null?void 0:n.hasLabel,T={};if(b&&g&&g!=="auto"){const k=Math.max(0,Number.parseInt(g,10)-a.value),y=e.labelPosition==="left"?"marginRight":"marginLeft";k&&(T[y]=`${k}px`)}return createVNode("div",{ref:s,class:[o.be("item","label-wrap")],style:T},[(c=r.default)==null?void 0:c.call(r)])}else return createVNode(Fragment,{ref:s},[(m=r.default)==null?void 0:m.call(r)])}}});const _hoisted_1$t=["role","aria-labelledby"],__default__$I=defineComponent({name:"ElFormItem"}),_sfc_main$14=defineComponent({...__default__$I,props:formItemProps,setup(t,{expose:r}){const e=t,n=useSlots(),o=inject(formContextKey,void 0),s=inject(formItemContextKey,void 0),a=useFormSize(void 0,{formItem:!1}),i=useNamespace("form-item"),d=useId().value,u=ref([]),c=ref(""),m=refDebounced(c,100),v=ref(""),g=ref();let b,T=!1;const k=computed(()=>{if((o==null?void 0:o.labelPosition)==="top")return{};const $e=addUnit(e.labelWidth||(o==null?void 0:o.labelWidth)||"");return $e?{width:$e}:{}}),y=computed(()=>{if((o==null?void 0:o.labelPosition)==="top"||o!=null&&o.inline)return{};if(!e.label&&!e.labelWidth&&ae)return{};const $e=addUnit(e.labelWidth||(o==null?void 0:o.labelWidth)||"");return!e.label&&!n.label?{marginLeft:$e}:{}}),A=computed(()=>[i.b(),i.m(a.value),i.is("error",c.value==="error"),i.is("validating",c.value==="validating"),i.is("success",c.value==="success"),i.is("required",xe.value||e.required),i.is("no-asterisk",o==null?void 0:o.hideRequiredAsterisk),(o==null?void 0:o.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[i.m("feedback")]:o==null?void 0:o.statusIcon}]),V=computed(()=>isBoolean$1(e.inlineMessage)?e.inlineMessage:(o==null?void 0:o.inlineMessage)||!1),Ce=computed(()=>[i.e("error"),{[i.em("error","inline")]:V.value}]),ie=computed(()=>e.prop?isString$2(e.prop)?e.prop:e.prop.join("."):""),Oe=computed(()=>!!(e.label||n.label)),he=computed(()=>e.for||u.value.length===1?u.value[0]:void 0),Y=computed(()=>!he.value&&Oe.value),ae=!!s,Fe=computed(()=>{const $e=o==null?void 0:o.model;if(!(!$e||!e.prop))return getProp($e,e.prop).value}),ze=computed(()=>{const{required:$e}=e,tr=[];e.rules&&tr.push(...castArray$1(e.rules));const nr=o==null?void 0:o.rules;if(nr&&e.prop){const Pt=getProp(nr,e.prop).value;Pt&&tr.push(...castArray$1(Pt))}if($e!==void 0){const Pt=tr.map((Et,kt)=>[Et,kt]).filter(([Et])=>Object.keys(Et).includes("required"));if(Pt.length>0)for(const[Et,kt]of Pt)Et.required!==$e&&(tr[kt]={...Et,required:$e});else tr.push({required:$e})}return tr}),pe=computed(()=>ze.value.length>0),le=$e=>ze.value.filter(nr=>!nr.trigger||!$e?!0:Array.isArray(nr.trigger)?nr.trigger.includes($e):nr.trigger===$e).map(({trigger:nr,...Pt})=>Pt),xe=computed(()=>ze.value.some($e=>$e.required)),ue=computed(()=>{var $e;return m.value==="error"&&e.showMessage&&(($e=o==null?void 0:o.showMessage)!=null?$e:!0)}),Ve=computed(()=>`${e.label||""}${(o==null?void 0:o.labelSuffix)||""}`),Ue=$e=>{c.value=$e},er=$e=>{var tr,nr;const{errors:Pt,fields:Et}=$e;(!Pt||!Et)&&console.error($e),Ue("error"),v.value=Pt?(nr=(tr=Pt==null?void 0:Pt[0])==null?void 0:tr.message)!=null?nr:`${e.prop} is required`:"",o==null||o.emit("validate",e.prop,!1,v.value)},At=()=>{Ue("success"),o==null||o.emit("validate",e.prop,!0,"")},ur=async $e=>{const tr=ie.value;return new Schema({[tr]:$e}).validate({[tr]:Fe.value},{firstFields:!0}).then(()=>(At(),!0)).catch(Pt=>(er(Pt),Promise.reject(Pt)))},pr=async($e,tr)=>{if(T||!e.prop)return!1;const nr=isFunction$3(tr);if(!pe.value)return tr==null||tr(!1),!1;const Pt=le($e);return Pt.length===0?(tr==null||tr(!0),!0):(Ue("validating"),ur(Pt).then(()=>(tr==null||tr(!0),!0)).catch(Et=>{const{fields:kt}=Et;return tr==null||tr(!1,kt),nr?!1:Promise.reject(kt)}))},ar=()=>{Ue(""),v.value="",T=!1},hr=async()=>{const $e=o==null?void 0:o.model;if(!$e||!e.prop)return;const tr=getProp($e,e.prop);T=!0,tr.value=clone(b),await nextTick(),ar(),T=!1},Ne=$e=>{u.value.includes($e)||u.value.push($e)},or=$e=>{u.value=u.value.filter(tr=>tr!==$e)};watch(()=>e.error,$e=>{v.value=$e||"",Ue($e?"error":"")},{immediate:!0}),watch(()=>e.validateStatus,$e=>Ue($e||""));const ir=reactive({...toRefs(e),$el:g,size:a,validateState:c,labelId:d,inputIds:u,isGroup:Y,hasLabel:Oe,addInputId:Ne,removeInputId:or,resetField:hr,clearValidate:ar,validate:pr});return provide(formItemContextKey,ir),onMounted(()=>{e.prop&&(o==null||o.addField(ir),b=clone(Fe.value))}),onBeforeUnmount(()=>{o==null||o.removeField(ir)}),r({size:a,validateMessage:v,validateState:c,validate:pr,clearValidate:ar,resetField:hr}),($e,tr)=>{var nr;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:g,class:normalizeClass(unref(A)),role:unref(Y)?"group":void 0,"aria-labelledby":unref(Y)?unref(d):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(k).width==="auto","update-all":((nr=unref(o))==null?void 0:nr.labelWidth)==="auto"},{default:withCtx(()=>[unref(Oe)?(openBlock(),createBlock(resolveDynamicComponent(unref(he)?"label":"div"),{key:0,id:unref(d),for:unref(he),class:normalizeClass(unref(i).e("label")),style:normalizeStyle(unref(k))},{default:withCtx(()=>[renderSlot($e.$slots,"label",{label:unref(Ve)},()=>[createTextVNode(toDisplayString(unref(Ve)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(i).e("content")),style:normalizeStyle(unref(y))},[renderSlot($e.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(i).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(ue)?renderSlot($e.$slots,"error",{key:0,error:v.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ce))},toDisplayString(v.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$t)}}});var FormItem=_export_sfc(_sfc_main$14,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(t){const r=window.getComputedStyle(t),e=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),o=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(a=>`${a}:${r.getPropertyValue(a)}`).join(";"),paddingSize:n,borderSize:o,boxSizing:e}}function calcTextareaHeight(t,r=1,e){var n;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:o,borderSize:s,boxSizing:a,contextStyle:i}=calculateNodeStyling(t);hiddenTextarea.setAttribute("style",`${i};${HIDDEN_STYLE}`),hiddenTextarea.value=t.value||t.placeholder||"";let d=hiddenTextarea.scrollHeight;const u={};a==="border-box"?d=d+s:a==="content-box"&&(d=d-o),hiddenTextarea.value="";const c=hiddenTextarea.scrollHeight-o;if(isNumber$1(r)){let m=c*r;a==="border-box"&&(m=m+o+s),d=Math.max(m,d),u.minHeight=`${m}px`}if(isNumber$1(e)){let m=c*e;a==="border-box"&&(m=m+o+s),d=Math.min(m,d)}return u.height=`${d}px`,(n=hiddenTextarea.parentNode)==null||n.removeChild(hiddenTextarea),hiddenTextarea=void 0,u}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})}}),inputEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t),input:t=>isString$2(t),change:t=>isString$2(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_hoisted_1$s=["role"],_hoisted_2$j=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],_hoisted_3$c=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],__default__$H=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$13=defineComponent({...__default__$H,props:inputProps,emits:inputEmits,setup(t,{expose:r,emit:e}){const n=t,o=useAttrs$1(),s=useSlots(),a=computed(()=>{const Nr={};return n.containerRole==="combobox"&&(Nr["aria-haspopup"]=o["aria-haspopup"],Nr["aria-owns"]=o["aria-owns"],Nr["aria-expanded"]=o["aria-expanded"]),Nr}),i=computed(()=>[n.type==="textarea"?k.b():T.b(),T.m(g.value),T.is("disabled",b.value),T.is("exceed",Ne.value),{[T.b("group")]:s.prepend||s.append,[T.bm("group","append")]:s.append,[T.bm("group","prepend")]:s.prepend,[T.m("prefix")]:s.prefix||n.prefixIcon,[T.m("suffix")]:s.suffix||n.suffixIcon||n.clearable||n.showPassword,[T.bm("suffix","password-clear")]:ur.value&&pr.value},o.class]),d=computed(()=>[T.e("wrapper"),T.is("focus",Fe.value)]),u=useAttrs({excludeKeys:computed(()=>Object.keys(a.value))}),{form:c,formItem:m}=useFormItem(),{inputId:v}=useFormItemInputId(n,{formItemContext:m}),g=useFormSize(),b=useFormDisabled(),T=useNamespace("input"),k=useNamespace("textarea"),y=shallowRef(),A=shallowRef(),V=ref(!1),Ce=ref(!1),ie=ref(!1),Oe=ref(),he=shallowRef(n.inputStyle),Y=computed(()=>y.value||A.value),{wrapperRef:ae,isFocused:Fe,handleFocus:ze,handleBlur:pe}=useFocusController(Y,{afterBlur(){var Nr;n.validateEvent&&((Nr=m==null?void 0:m.validate)==null||Nr.call(m,"blur").catch(Wr=>void 0))}}),le=computed(()=>{var Nr;return(Nr=c==null?void 0:c.statusIcon)!=null?Nr:!1}),xe=computed(()=>(m==null?void 0:m.validateState)||""),ue=computed(()=>xe.value&&ValidateComponentsMap[xe.value]),Ve=computed(()=>ie.value?view_default:hide_default),Ue=computed(()=>[o.style,n.inputStyle]),er=computed(()=>[n.inputStyle,he.value,{resize:n.resize}]),At=computed(()=>isNil(n.modelValue)?"":String(n.modelValue)),ur=computed(()=>n.clearable&&!b.value&&!n.readonly&&!!At.value&&(Fe.value||V.value)),pr=computed(()=>n.showPassword&&!b.value&&!n.readonly&&!!At.value&&(!!At.value||Fe.value)),ar=computed(()=>n.showWordLimit&&!!u.value.maxlength&&(n.type==="text"||n.type==="textarea")&&!b.value&&!n.readonly&&!n.showPassword),hr=computed(()=>At.value.length),Ne=computed(()=>!!ar.value&&hr.value>Number(u.value.maxlength)),or=computed(()=>!!s.suffix||!!n.suffixIcon||ur.value||n.showPassword||ar.value||!!xe.value&&le.value),[ir,$e]=useCursor(y);useResizeObserver(A,Nr=>{if(Pt(),!ar.value||n.resize!=="both")return;const Wr=Nr[0],{width:Yr}=Wr.contentRect;Oe.value={right:`calc(100% - ${Yr+15+6}px)`}});const tr=()=>{const{type:Nr,autosize:Wr}=n;if(!(!isClient||Nr!=="textarea"||!A.value))if(Wr){const Yr=isObject$2(Wr)?Wr.minRows:void 0,Ur=isObject$2(Wr)?Wr.maxRows:void 0,qr=calcTextareaHeight(A.value,Yr,Ur);he.value={overflowY:"hidden",...qr},nextTick(()=>{A.value.offsetHeight,he.value=qr})}else he.value={minHeight:calcTextareaHeight(A.value).minHeight}},Pt=(Nr=>{let Wr=!1;return()=>{var Yr;if(Wr||!n.autosize)return;((Yr=A.value)==null?void 0:Yr.offsetParent)===null||(Nr(),Wr=!0)}})(tr),Et=()=>{const Nr=Y.value,Wr=n.formatter?n.formatter(At.value):At.value;!Nr||Nr.value===Wr||(Nr.value=Wr)},kt=async Nr=>{ir();let{value:Wr}=Nr.target;if(n.formatter&&(Wr=n.parser?n.parser(Wr):Wr),!Ce.value){if(Wr===At.value){Et();return}e(UPDATE_MODEL_EVENT,Wr),e("input",Wr),await nextTick(),Et(),$e()}},rr=Nr=>{e("change",Nr.target.value)},cr=Nr=>{e("compositionstart",Nr),Ce.value=!0},mr=Nr=>{var Wr;e("compositionupdate",Nr);const Yr=(Wr=Nr.target)==null?void 0:Wr.value,Ur=Yr[Yr.length-1]||"";Ce.value=!isKorean(Ur)},yr=Nr=>{e("compositionend",Nr),Ce.value&&(Ce.value=!1,kt(Nr))},Tr=()=>{ie.value=!ie.value,Ir()},Ir=async()=>{var Nr;await nextTick(),(Nr=Y.value)==null||Nr.focus()},kr=()=>{var Nr;return(Nr=Y.value)==null?void 0:Nr.blur()},Ar=Nr=>{V.value=!1,e("mouseleave",Nr)},Rr=Nr=>{V.value=!0,e("mouseenter",Nr)},Mn=Nr=>{e("keydown",Nr)},Or=()=>{var Nr;(Nr=Y.value)==null||Nr.select()},Pr=()=>{e(UPDATE_MODEL_EVENT,""),e("change",""),e("clear"),e("input","")};return watch(()=>n.modelValue,()=>{var Nr;nextTick(()=>tr()),n.validateEvent&&((Nr=m==null?void 0:m.validate)==null||Nr.call(m,"change").catch(Wr=>void 0))}),watch(At,()=>Et()),watch(()=>n.type,async()=>{await nextTick(),Et(),tr()}),onMounted(()=>{!n.formatter&&n.parser,Et(),nextTick(tr)}),r({input:y,textarea:A,ref:Y,textareaStyle:er,autosize:toRef(n,"autosize"),focus:Ir,blur:kr,select:Or,clear:Pr,resizeTextarea:tr}),(Nr,Wr)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref(a),{class:unref(i),style:unref(Ue),role:Nr.containerRole,onMouseenter:Rr,onMouseleave:Ar}),[createCommentVNode(" input "),Nr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),Nr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(T).be("group","prepend"))},[renderSlot(Nr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:ae,class:normalizeClass(unref(d))},[createCommentVNode(" prefix slot "),Nr.$slots.prefix||Nr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(T).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("prefix-inner"))},[renderSlot(Nr.$slots,"prefix"),Nr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(T).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Nr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(v),ref_key:"input",ref:y,class:unref(T).e("inner")},unref(u),{type:Nr.showPassword?ie.value?"text":"password":Nr.type,disabled:unref(b),formatter:Nr.formatter,parser:Nr.parser,readonly:Nr.readonly,autocomplete:Nr.autocomplete,tabindex:Nr.tabindex,"aria-label":Nr.label,placeholder:Nr.placeholder,style:Nr.inputStyle,form:n.form,onCompositionstart:cr,onCompositionupdate:mr,onCompositionend:yr,onInput:kt,onFocus:Wr[0]||(Wr[0]=(...Yr)=>unref(ze)&&unref(ze)(...Yr)),onBlur:Wr[1]||(Wr[1]=(...Yr)=>unref(pe)&&unref(pe)(...Yr)),onChange:rr,onKeydown:Mn}),null,16,_hoisted_2$j),createCommentVNode(" suffix slot "),unref(or)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(T).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("suffix-inner"))},[!unref(ur)||!unref(pr)||!unref(ar)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(Nr.$slots,"suffix"),Nr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(T).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Nr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(ur)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(T).e("icon"),unref(T).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:Pr},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(pr)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(T).e("icon"),unref(T).e("password")]),onClick:Tr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Ve))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(ar)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(T).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(T).e("count-inner"))},toDisplayString(unref(hr))+" / "+toDisplayString(unref(u).maxlength),3)],2)):createCommentVNode("v-if",!0),unref(xe)&&unref(ue)&&unref(le)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(T).e("icon"),unref(T).e("validateIcon"),unref(T).is("loading",unref(xe)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),Nr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(T).be("group","append"))},[renderSlot(Nr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(v),ref_key:"textarea",ref:A,class:unref(k).e("inner")},unref(u),{tabindex:Nr.tabindex,disabled:unref(b),readonly:Nr.readonly,autocomplete:Nr.autocomplete,style:unref(er),"aria-label":Nr.label,placeholder:Nr.placeholder,form:n.form,onCompositionstart:cr,onCompositionupdate:mr,onCompositionend:yr,onInput:kt,onFocus:Wr[2]||(Wr[2]=(...Yr)=>unref(ze)&&unref(ze)(...Yr)),onBlur:Wr[3]||(Wr[3]=(...Yr)=>unref(pe)&&unref(pe)(...Yr)),onChange:rr,onKeydown:Mn}),null,16,_hoisted_3$c),unref(ar)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(Oe.value),class:normalizeClass(unref(T).e("count"))},toDisplayString(unref(hr))+" / "+toDisplayString(unref(u).maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$s)),[[vShow,Nr.type!=="hidden"]])}});var Input=_export_sfc(_sfc_main$13,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle=({move:t,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${t}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$6="Thumb",_sfc_main$12=defineComponent({__name:"thumb",props:thumbProps,setup(t){const r=t,e=inject(scrollbarContextKey),n=useNamespace("scrollbar");e||throwError(COMPONENT_NAME$6,"can not inject scrollbar context");const o=ref(),s=ref(),a=ref({}),i=ref(!1);let d=!1,u=!1,c=isClient?document.onselectstart:null;const m=computed(()=>BAR_MAP[r.vertical?"vertical":"horizontal"]),v=computed(()=>renderThumbStyle({size:r.size,move:r.move,bar:m.value})),g=computed(()=>o.value[m.value.offset]**2/e.wrapElement[m.value.scrollSize]/r.ratio/s.value[m.value.offset]),b=Oe=>{var he;if(Oe.stopPropagation(),Oe.ctrlKey||[1,2].includes(Oe.button))return;(he=window.getSelection())==null||he.removeAllRanges(),k(Oe);const Y=Oe.currentTarget;Y&&(a.value[m.value.axis]=Y[m.value.offset]-(Oe[m.value.client]-Y.getBoundingClientRect()[m.value.direction]))},T=Oe=>{if(!s.value||!o.value||!e.wrapElement)return;const he=Math.abs(Oe.target.getBoundingClientRect()[m.value.direction]-Oe[m.value.client]),Y=s.value[m.value.offset]/2,ae=(he-Y)*100*g.value/o.value[m.value.offset];e.wrapElement[m.value.scroll]=ae*e.wrapElement[m.value.scrollSize]/100},k=Oe=>{Oe.stopImmediatePropagation(),d=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",A),c=document.onselectstart,document.onselectstart=()=>!1},y=Oe=>{if(!o.value||!s.value||d===!1)return;const he=a.value[m.value.axis];if(!he)return;const Y=(o.value.getBoundingClientRect()[m.value.direction]-Oe[m.value.client])*-1,ae=s.value[m.value.offset]-he,Fe=(Y-ae)*100*g.value/o.value[m.value.offset];e.wrapElement[m.value.scroll]=Fe*e.wrapElement[m.value.scrollSize]/100},A=()=>{d=!1,a.value[m.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",A),ie(),u&&(i.value=!1)},V=()=>{u=!1,i.value=!!r.size},Ce=()=>{u=!0,i.value=d};onBeforeUnmount(()=>{ie(),document.removeEventListener("mouseup",A)});const ie=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return useEventListener(toRef(e,"scrollbarElement"),"mousemove",V),useEventListener(toRef(e,"scrollbarElement"),"mouseleave",Ce),(Oe,he)=>(openBlock(),createBlock(Transition,{name:unref(n).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:o,class:normalizeClass([unref(n).e("bar"),unref(n).is(unref(m).key)]),onMousedown:T},[createBaseVNode("div",{ref_key:"thumb",ref:s,class:normalizeClass(unref(n).e("thumb")),style:normalizeStyle(unref(v)),onMousedown:b},null,38)],34),[[vShow,Oe.always||i.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc(_sfc_main$12,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),_sfc_main$11=defineComponent({__name:"bar",props:barProps,setup(t,{expose:r}){const e=t,n=ref(0),o=ref(0);return r({handleScroll:a=>{if(a){const i=a.offsetHeight-GAP,d=a.offsetWidth-GAP;o.value=a.scrollTop*100/i*e.ratioY,n.value=a.scrollLeft*100/d*e.ratioX}}}),(a,i)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:n.value,ratio:a.ratioX,size:a.width,always:a.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:o.value,ratio:a.ratioY,size:a.height,vertical:"",always:a.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc(_sfc_main$11,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),scrollbarEmits={scroll:({scrollTop:t,scrollLeft:r})=>[t,r].every(isNumber$1)},COMPONENT_NAME$5="ElScrollbar",__default__$G=defineComponent({name:COMPONENT_NAME$5}),_sfc_main$10=defineComponent({...__default__$G,props:scrollbarProps,emits:scrollbarEmits,setup(t,{expose:r,emit:e}){const n=t,o=useNamespace("scrollbar");let s,a;const i=ref(),d=ref(),u=ref(),c=ref("0"),m=ref("0"),v=ref(),g=ref(1),b=ref(1),T=computed(()=>{const he={};return n.height&&(he.height=addUnit(n.height)),n.maxHeight&&(he.maxHeight=addUnit(n.maxHeight)),[n.wrapStyle,he]}),k=computed(()=>[n.wrapClass,o.e("wrap"),{[o.em("wrap","hidden-default")]:!n.native}]),y=computed(()=>[o.e("view"),n.viewClass]),A=()=>{var he;d.value&&((he=v.value)==null||he.handleScroll(d.value),e("scroll",{scrollTop:d.value.scrollTop,scrollLeft:d.value.scrollLeft}))};function V(he,Y){isObject$2(he)?d.value.scrollTo(he):isNumber$1(he)&&isNumber$1(Y)&&d.value.scrollTo(he,Y)}const Ce=he=>{isNumber$1(he)&&(d.value.scrollTop=he)},ie=he=>{isNumber$1(he)&&(d.value.scrollLeft=he)},Oe=()=>{if(!d.value)return;const he=d.value.offsetHeight-GAP,Y=d.value.offsetWidth-GAP,ae=he**2/d.value.scrollHeight,Fe=Y**2/d.value.scrollWidth,ze=Math.max(ae,n.minSize),pe=Math.max(Fe,n.minSize);g.value=ae/(he-ae)/(ze/(he-ze)),b.value=Fe/(Y-Fe)/(pe/(Y-pe)),m.value=ze+GAP<he?`${ze}px`:"",c.value=pe+GAP<Y?`${pe}px`:""};return watch(()=>n.noresize,he=>{he?(s==null||s(),a==null||a()):({stop:s}=useResizeObserver(u,Oe),a=useEventListener("resize",Oe))},{immediate:!0}),watch(()=>[n.maxHeight,n.height],()=>{n.native||nextTick(()=>{var he;Oe(),d.value&&((he=v.value)==null||he.handleScroll(d.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:i,wrapElement:d})),onMounted(()=>{n.native||nextTick(()=>{Oe()})}),onUpdated(()=>Oe()),r({wrapRef:d,update:Oe,scrollTo:V,setScrollTop:Ce,setScrollLeft:ie,handleScroll:A}),(he,Y)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:i,class:normalizeClass(unref(o).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:d,class:normalizeClass(unref(k)),style:normalizeStyle(unref(T)),onScroll:A},[(openBlock(),createBlock(resolveDynamicComponent(he.tag),{ref_key:"resizeRef",ref:u,class:normalizeClass(unref(y)),style:normalizeStyle(he.viewStyle)},{default:withCtx(()=>[renderSlot(he.$slots,"default")]),_:3},8,["class","style"]))],38),he.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:v,height:m.value,width:c.value,always:he.always,"ratio-x":b.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Scrollbar=_export_sfc(_sfc_main$10,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$F=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$$=defineComponent({...__default__$F,props:popperProps,setup(t,{expose:r}){const e=t,n=ref(),o=ref(),s=ref(),a=ref(),i=computed(()=>e.role),d={triggerRef:n,popperInstanceRef:o,contentRef:s,referenceRef:a,role:i};return r(d),provide(POPPER_INJECTION_KEY,d),(u,c)=>renderSlot(u.$slots,"default")}});var Popper=_export_sfc(_sfc_main$$,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$E=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$_=defineComponent({...__default__$E,props:popperArrowProps,setup(t,{expose:r}){const e=t,n=useNamespace("popper"),{arrowOffset:o,arrowRef:s,arrowStyle:a}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>e.arrowOffset,i=>{o.value=i}),onBeforeUnmount(()=>{s.value=void 0}),r({arrowRef:s}),(i,d)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:s,class:normalizeClass(unref(n).e("arrow")),style:normalizeStyle(unref(a)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc(_sfc_main$_,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(t,{slots:r,attrs:e}){var n;const o=inject(FORWARD_REF_INJECTION_KEY),s=useForwardRefDirective((n=o==null?void 0:o.setForwardRef)!=null?n:NOOP);return()=>{var a;const i=(a=r.default)==null?void 0:a.call(r,e);if(!i||i.length>1)return null;const d=findFirstLegitChild(i);return d?withDirectives(cloneVNode(d,e),[[s]]):null}}});function findFirstLegitChild(t){if(!t)return null;const r=t;for(const e of r){if(isObject$2(e))switch(e.type){case Comment:continue;case Text:case"svg":return wrapTextContent(e);case Fragment:return findFirstLegitChild(e.children);default:return e}return wrapTextContent(e)}return null}function wrapTextContent(t){const r=useNamespace("only-child");return createVNode("span",{class:r.e("content")},[t])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$D=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$Z=defineComponent({...__default__$D,props:popperTriggerProps,setup(t,{expose:r}){const e=t,{role:n,triggerRef:o}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(o);const s=computed(()=>i.value?e.id:void 0),a=computed(()=>{if(n&&n.value==="tooltip")return e.open&&e.id?e.id:void 0}),i=computed(()=>{if(n&&n.value!=="tooltip")return n.value}),d=computed(()=>i.value?`${e.open}`:void 0);let u;return onMounted(()=>{watch(()=>e.virtualRef,c=>{c&&(o.value=unrefElement(c))},{immediate:!0}),watch(o,(c,m)=>{u==null||u(),u=void 0,isElement(c)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(v=>{var g;const b=e[v];b&&(c.addEventListener(v.slice(2).toLowerCase(),b),(g=m==null?void 0:m.removeEventListener)==null||g.call(m,v.slice(2).toLowerCase(),b))}),u=watch([s,a,i,d],v=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((g,b)=>{isNil(v[b])?c.removeAttribute(g):c.setAttribute(g,v[b])})},{immediate:!0})),isElement(m)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(v=>m.removeAttribute(v))},{immediate:!0})}),onBeforeUnmount(()=>{u==null||u(),u=void 0}),r({triggerRef:o}),(c,m)=>c.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},c.$attrs,{"aria-controls":unref(s),"aria-describedby":unref(a),"aria-expanded":unref(d),"aria-haspopup":unref(i)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc(_sfc_main$Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=t=>{const r=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},getVisibleElement=(t,r)=>{for(const e of t)if(!isHidden(e,r))return e},isHidden=(t,r)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},getEdges=t=>{const r=obtainAllFocusableElements(t),e=getVisibleElement(r,t),n=getVisibleElement(r.reverse(),t);return[e,n]},isSelectable=t=>t instanceof HTMLInputElement&&"select"in t,tryFocus=(t,r)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),t!==e&&isSelectable(t)&&r&&t.select()}};function removeFromStack(t,r){const e=[...t],n=t.indexOf(r);return n!==-1&&e.splice(n,1),e}const createFocusableStack=()=>{let t=[];return{push:n=>{const o=t[0];o&&n!==o&&o.pause(),t=removeFromStack(t,n),t.unshift(n)},remove:n=>{var o,s;t=removeFromStack(t,n),(s=(o=t[0])==null?void 0:o.resume)==null||s.call(o)}}},focusFirstDescendant=(t,r=!1)=>{const e=document.activeElement;for(const n of t)if(tryFocus(n,r),document.activeElement!==e)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=t=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:t}),_sfc_main$Y=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:r}){const e=ref();let n,o;const{focusReason:s}=useFocusReason();useEscapeKeydown(b=>{t.trapped&&!a.paused&&r("release-requested",b)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},i=b=>{if(!t.loop&&!t.trapped||a.paused)return;const{key:T,altKey:k,ctrlKey:y,metaKey:A,currentTarget:V,shiftKey:Ce}=b,{loop:ie}=t,Oe=T===EVENT_CODE.tab&&!k&&!y&&!A,he=document.activeElement;if(Oe&&he){const Y=V,[ae,Fe]=getEdges(Y);if(ae&&Fe){if(!Ce&&he===Fe){const pe=createFocusOutPreventedEvent({focusReason:s.value});r("focusout-prevented",pe),pe.defaultPrevented||(b.preventDefault(),ie&&tryFocus(ae,!0))}else if(Ce&&[ae,Y].includes(he)){const pe=createFocusOutPreventedEvent({focusReason:s.value});r("focusout-prevented",pe),pe.defaultPrevented||(b.preventDefault(),ie&&tryFocus(Fe,!0))}}else if(he===Y){const pe=createFocusOutPreventedEvent({focusReason:s.value});r("focusout-prevented",pe),pe.defaultPrevented||b.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:e,onKeydown:i}),watch(()=>t.focusTrapEl,b=>{b&&(e.value=b)},{immediate:!0}),watch([e],([b],[T])=>{b&&(b.addEventListener("keydown",i),b.addEventListener("focusin",c),b.addEventListener("focusout",m)),T&&(T.removeEventListener("keydown",i),T.removeEventListener("focusin",c),T.removeEventListener("focusout",m))});const d=b=>{r(ON_TRAP_FOCUS_EVT,b)},u=b=>r(ON_RELEASE_FOCUS_EVT,b),c=b=>{const T=unref(e);if(!T)return;const k=b.target,y=b.relatedTarget,A=k&&T.contains(k);t.trapped||y&&T.contains(y)||(n=y),A&&r("focusin",b),!a.paused&&t.trapped&&(A?o=k:tryFocus(o,!0))},m=b=>{const T=unref(e);if(!(a.paused||!T))if(t.trapped){const k=b.relatedTarget;!isNil(k)&&!T.contains(k)&&setTimeout(()=>{if(!a.paused&&t.trapped){const y=createFocusOutPreventedEvent({focusReason:s.value});r("focusout-prevented",y),y.defaultPrevented||tryFocus(o,!0)}},0)}else{const k=b.target;k&&T.contains(k)||r("focusout",b)}};async function v(){await nextTick();const b=unref(e);if(b){focusableStack.push(a);const T=b.contains(document.activeElement)?n:document.activeElement;if(n=T,!b.contains(T)){const y=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);b.addEventListener(FOCUS_AFTER_TRAPPED,d),b.dispatchEvent(y),y.defaultPrevented||nextTick(()=>{let A=t.focusStartEl;isString$2(A)||(tryFocus(A),document.activeElement!==A&&(A="first")),A==="first"&&focusFirstDescendant(obtainAllFocusableElements(b),!0),(document.activeElement===T||A==="container")&&tryFocus(b)})}}}function g(){const b=unref(e);if(b){b.removeEventListener(FOCUS_AFTER_TRAPPED,d);const T=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:s.value}});b.addEventListener(FOCUS_AFTER_RELEASED,u),b.dispatchEvent(T),!T.defaultPrevented&&(s.value=="keyboard"||!isFocusCausedByUserEvent()||b.contains(document.activeElement))&&tryFocus(n??document.body),b.removeEventListener(FOCUS_AFTER_RELEASED,u),focusableStack.remove(a)}}return onMounted(()=>{t.trapped&&v(),watch(()=>t.trapped,b=>{b?v():g()})}),onBeforeUnmount(()=>{t.trapped&&g()}),{onKeydown:i}}});function _sfc_render$h(t,r,e,n,o,s){return renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var ElFocusTrap=_export_sfc(_sfc_main$Y,[["render",_sfc_render$h],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(t,r=[])=>{const{placement:e,strategy:n,popperOptions:o}=t,s={placement:e,strategy:n,...o,modifiers:[...genModifiers(t),...r]};return deriveExtraModifiers(s,o==null?void 0:o.modifiers),s},unwrapMeasurableEl=t=>{if(isClient)return unrefElement(t)};function genModifiers(t){const{offset:r,gpuAcceleration:e,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function deriveExtraModifiers(t,r){r&&(t.modifiers=[...t.modifiers,...r??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=t=>{const{popperInstanceRef:r,contentRef:e,triggerRef:n,role:o}=inject(POPPER_INJECTION_KEY,void 0),s=ref(),a=ref(),i=computed(()=>({name:"eventListeners",enabled:!!t.visible})),d=computed(()=>{var y;const A=unref(s),V=(y=unref(a))!=null?y:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$2(A),options:{element:A,padding:V}}}),u=computed(()=>({onFirstUpdate:()=>{b()},...buildPopperOptions(t,[unref(d),unref(i)])})),c=computed(()=>unwrapMeasurableEl(t.referenceEl)||unref(n)),{attributes:m,state:v,styles:g,update:b,forceUpdate:T,instanceRef:k}=usePopper(c,e,u);return watch(k,y=>r.value=y),onMounted(()=>{watch(()=>{var y;return(y=unref(c))==null?void 0:y.getBoundingClientRect()},()=>{b()})}),{attributes:m,arrowRef:s,contentRef:e,instanceRef:k,state:v,styles:g,role:o,forceUpdate:T,update:b}},usePopperContentDOM=(t,{attributes:r,styles:e,role:n})=>{const{nextZIndex:o}=useZIndex(),s=useNamespace("popper"),a=computed(()=>unref(r).popper),i=ref(t.zIndex||o()),d=computed(()=>[s.b(),s.is("pure",t.pure),s.is(t.effect),t.popperClass]),u=computed(()=>[{zIndex:unref(i)},unref(e).popper,t.popperStyle||{}]),c=computed(()=>n.value==="dialog"?"false":void 0),m=computed(()=>unref(e).arrow||{});return{ariaModal:c,arrowStyle:m,contentAttrs:a,contentClass:d,contentStyle:u,contentZIndex:i,updateZIndex:()=>{i.value=t.zIndex||o()}}},usePopperContentFocusTrap=(t,r)=>{const e=ref(!1),n=ref();return{focusStartRef:n,trapped:e,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(n.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:u=>{t.visible&&!e.value&&(u.target&&(n.value=u.target),e.value=!0)},onFocusoutPrevented:u=>{t.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},__default__$C=defineComponent({name:"ElPopperContent"}),_sfc_main$X=defineComponent({...__default__$C,props:popperContentProps,emits:popperContentEmits,setup(t,{expose:r,emit:e}){const n=t,{focusStartRef:o,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:i,onFocusInTrap:d,onFocusoutPrevented:u,onReleaseRequested:c}=usePopperContentFocusTrap(n,e),{attributes:m,arrowRef:v,contentRef:g,styles:b,instanceRef:T,role:k,update:y}=usePopperContent(n),{ariaModal:A,arrowStyle:V,contentAttrs:Ce,contentClass:ie,contentStyle:Oe,updateZIndex:he}=usePopperContentDOM(n,{styles:b,attributes:m,role:k}),Y=inject(formItemContextKey,void 0),ae=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:V,arrowRef:v,arrowOffset:ae}),Y&&(Y.addInputId||Y.removeInputId)&&provide(formItemContextKey,{...Y,addInputId:NOOP,removeInputId:NOOP});let Fe;const ze=(le=!0)=>{y(),le&&he()},pe=()=>{ze(!1),n.visible&&n.focusOnShow?s.value=!0:n.visible===!1&&(s.value=!1)};return onMounted(()=>{watch(()=>n.triggerTargetEl,(le,xe)=>{Fe==null||Fe(),Fe=void 0;const ue=unref(le||g.value),Ve=unref(xe||g.value);isElement(ue)&&(Fe=watch([k,()=>n.ariaLabel,A,()=>n.id],Ue=>{["role","aria-label","aria-modal","id"].forEach((er,At)=>{isNil(Ue[At])?ue.removeAttribute(er):ue.setAttribute(er,Ue[At])})},{immediate:!0})),Ve!==ue&&isElement(Ve)&&["role","aria-label","aria-modal","id"].forEach(Ue=>{Ve.removeAttribute(Ue)})},{immediate:!0}),watch(()=>n.visible,pe,{immediate:!0})}),onBeforeUnmount(()=>{Fe==null||Fe(),Fe=void 0}),r({popperContentRef:g,popperInstanceRef:T,updatePopper:ze,contentStyle:Oe}),(le,xe)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:g},unref(Ce),{style:unref(Oe),class:unref(ie),tabindex:"-1",onMouseenter:xe[0]||(xe[0]=ue=>le.$emit("mouseenter",ue)),onMouseleave:xe[1]||(xe[1]=ue=>le.$emit("mouseleave",ue))}),[createVNode(unref(ElFocusTrap),{trapped:unref(s),"trap-on-focus-in":!0,"focus-trap-el":unref(g),"focus-start-el":unref(o),onFocusAfterTrapped:unref(i),onFocusAfterReleased:unref(a),onFocusin:unref(d),onFocusoutPrevented:unref(u),onReleaseRequested:unref(c)},{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc(_sfc_main$X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(t,r)=>isArray$4(t)?t.includes(r):t===r,whenTrigger=(t,r,e)=>n=>{isTriggerType(unref(t),r)&&e(n)},__default__$B=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$W=defineComponent({...__default__$B,props:useTooltipTriggerProps,setup(t,{expose:r}){const e=t,n=useNamespace("tooltip"),{controlled:o,id:s,open:a,onOpen:i,onClose:d,onToggle:u}=inject(TOOLTIP_INJECTION_KEY,void 0),c=ref(null),m=()=>{if(unref(o)||e.disabled)return!0},v=toRef(e,"trigger"),g=composeEventHandlers(m,whenTrigger(v,"hover",i)),b=composeEventHandlers(m,whenTrigger(v,"hover",d)),T=composeEventHandlers(m,whenTrigger(v,"click",Ce=>{Ce.button===0&&u(Ce)})),k=composeEventHandlers(m,whenTrigger(v,"focus",i)),y=composeEventHandlers(m,whenTrigger(v,"focus",d)),A=composeEventHandlers(m,whenTrigger(v,"contextmenu",Ce=>{Ce.preventDefault(),u(Ce)})),V=composeEventHandlers(m,Ce=>{const{code:ie}=Ce;e.triggerKeys.includes(ie)&&(Ce.preventDefault(),u(Ce))});return r({triggerRef:c}),(Ce,ie)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(s),"virtual-ref":Ce.virtualRef,open:unref(a),"virtual-triggering":Ce.virtualTriggering,class:normalizeClass(unref(n).e("trigger")),onBlur:unref(y),onClick:unref(T),onContextmenu:unref(A),onFocus:unref(k),onMouseenter:unref(g),onMouseleave:unref(b),onKeydown:unref(V)},{default:withCtx(()=>[renderSlot(Ce.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc(_sfc_main$W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const __default__$A=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$V=defineComponent({...__default__$A,props:useTooltipContentProps,setup(t,{expose:r}){const e=t,{selector:n}=usePopperContainerId(),o=useNamespace("tooltip"),s=ref(null),a=ref(!1),{controlled:i,id:d,open:u,trigger:c,onClose:m,onOpen:v,onShow:g,onHide:b,onBeforeShow:T,onBeforeHide:k}=inject(TOOLTIP_INJECTION_KEY,void 0),y=computed(()=>e.transition||`${o.namespace.value}-fade-in-linear`),A=computed(()=>e.persistent);onBeforeUnmount(()=>{a.value=!0});const V=computed(()=>unref(A)?!0:unref(u)),Ce=computed(()=>e.disabled?!1:unref(u)),ie=computed(()=>e.appendTo||n.value),Oe=computed(()=>{var Ue;return(Ue=e.style)!=null?Ue:{}}),he=computed(()=>!unref(u)),Y=()=>{b()},ae=()=>{if(unref(i))return!0},Fe=composeEventHandlers(ae,()=>{e.enterable&&unref(c)==="hover"&&v()}),ze=composeEventHandlers(ae,()=>{unref(c)==="hover"&&m()}),pe=()=>{var Ue,er;(er=(Ue=s.value)==null?void 0:Ue.updatePopper)==null||er.call(Ue),T==null||T()},le=()=>{k==null||k()},xe=()=>{g(),Ve=onClickOutside(computed(()=>{var Ue;return(Ue=s.value)==null?void 0:Ue.popperContentRef}),()=>{if(unref(i))return;unref(c)!=="hover"&&m()})},ue=()=>{e.virtualTriggering||m()};let Ve;return watch(()=>unref(u),Ue=>{Ue||Ve==null||Ve()},{flush:"post"}),watch(()=>e.content,()=>{var Ue,er;(er=(Ue=s.value)==null?void 0:Ue.updatePopper)==null||er.call(Ue)}),r({contentRef:s}),(Ue,er)=>(openBlock(),createBlock(Teleport,{disabled:!Ue.teleported,to:unref(ie)},[createVNode(Transition,{name:unref(y),onAfterLeave:Y,onBeforeEnter:pe,onAfterEnter:xe,onBeforeLeave:le},{default:withCtx(()=>[unref(V)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(d),ref_key:"contentRef",ref:s},Ue.$attrs,{"aria-label":Ue.ariaLabel,"aria-hidden":unref(he),"boundaries-padding":Ue.boundariesPadding,"fallback-placements":Ue.fallbackPlacements,"gpu-acceleration":Ue.gpuAcceleration,offset:Ue.offset,placement:Ue.placement,"popper-options":Ue.popperOptions,strategy:Ue.strategy,effect:Ue.effect,enterable:Ue.enterable,pure:Ue.pure,"popper-class":Ue.popperClass,"popper-style":[Ue.popperStyle,unref(Oe)],"reference-el":Ue.referenceEl,"trigger-target-el":Ue.triggerTargetEl,visible:unref(Ce),"z-index":Ue.zIndex,onMouseenter:unref(Fe),onMouseleave:unref(ze),onBlur:ue,onClose:unref(m)}),{default:withCtx(()=>[a.value?createCommentVNode("v-if",!0):renderSlot(Ue.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ce)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc(_sfc_main$V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const _hoisted_1$r=["innerHTML"],_hoisted_2$i={key:1},__default__$z=defineComponent({name:"ElTooltip"}),_sfc_main$U=defineComponent({...__default__$z,props:useTooltipProps,emits:tooltipEmits,setup(t,{expose:r,emit:e}){const n=t;usePopperContainer();const o=useId(),s=ref(),a=ref(),i=()=>{var y;const A=unref(s);A&&((y=A.popperInstanceRef)==null||y.update())},d=ref(!1),u=ref(),{show:c,hide:m,hasUpdateHandler:v}=useTooltipModelToggle({indicator:d,toggleReason:u}),{onOpen:g,onClose:b}=useDelayedToggle({showAfter:toRef(n,"showAfter"),hideAfter:toRef(n,"hideAfter"),autoClose:toRef(n,"autoClose"),open:c,close:m}),T=computed(()=>isBoolean$1(n.visible)&&!v.value);provide(TOOLTIP_INJECTION_KEY,{controlled:T,id:o,open:readonly(d),trigger:toRef(n,"trigger"),onOpen:y=>{g(y)},onClose:y=>{b(y)},onToggle:y=>{unref(d)?b(y):g(y)},onShow:()=>{e("show",u.value)},onHide:()=>{e("hide",u.value)},onBeforeShow:()=>{e("before-show",u.value)},onBeforeHide:()=>{e("before-hide",u.value)},updatePopper:i}),watch(()=>n.disabled,y=>{y&&d.value&&(d.value=!1)});const k=y=>{var A,V;const Ce=(V=(A=a.value)==null?void 0:A.contentRef)==null?void 0:V.popperContentRef,ie=(y==null?void 0:y.relatedTarget)||document.activeElement;return Ce&&Ce.contains(ie)};return onDeactivated(()=>d.value&&m()),r({popperRef:s,contentRef:a,isFocusInsideContent:k,updatePopper:i,onOpen:g,onClose:b,hide:m}),(y,A)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:s,role:y.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:withCtx(()=>[y.$slots.default?renderSlot(y.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:a,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:withCtx(()=>[renderSlot(y.$slots,"content",{},()=>[y.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:y.content},null,8,_hoisted_1$r)):(openBlock(),createElementBlock("span",_hoisted_2$i,toDisplayString(y.content),1))]),y.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc(_sfc_main$U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),backtopProps={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},backtopEmits={click:t=>t instanceof MouseEvent},useBackTop=(t,r,e)=>{const n=shallowRef(),o=shallowRef(),s=ref(!1),a=()=>{n.value&&(s.value=n.value.scrollTop>=t.visibilityHeight)},i=u=>{var c;(c=n.value)==null||c.scrollTo({top:0,behavior:"smooth"}),r("click",u)},d=useThrottleFn(a,300,!0);return useEventListener(o,"scroll",d),onMounted(()=>{var u;o.value=document,n.value=document.documentElement,t.target&&(n.value=(u=document.querySelector(t.target))!=null?u:void 0,n.value||throwError(e,`target does not exist: ${t.target}`),o.value=n.value),a()}),{visible:s,handleClick:i}},COMPONENT_NAME$4="ElBacktop",__default__$y=defineComponent({name:COMPONENT_NAME$4}),_sfc_main$T=defineComponent({...__default__$y,props:backtopProps,emits:backtopEmits,setup(t,{emit:r}){const e=t,n=useNamespace("backtop"),{handleClick:o,visible:s}=useBackTop(e,r,COMPONENT_NAME$4),a=computed(()=>({right:`${e.right}px`,bottom:`${e.bottom}px`}));return(i,d)=>(openBlock(),createBlock(Transition,{name:`${unref(n).namespace.value}-fade-in`},{default:withCtx(()=>[unref(s)?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(unref(a)),class:normalizeClass(unref(n).b()),onClick:d[0]||(d[0]=withModifiers((...u)=>unref(o)&&unref(o)(...u),["stop"]))},[renderSlot(i.$slots,"default",{},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(n).e("icon"))},{default:withCtx(()=>[createVNode(unref(caret_top_default))]),_:1},8,["class"])])],6)):createCommentVNode("v-if",!0)]),_:3},8,["name"]))}});var Backtop=_export_sfc(_sfc_main$T,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const ElBacktop=withInstall(Backtop),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$q=["textContent"],__default__$x=defineComponent({name:"ElBadge"}),_sfc_main$S=defineComponent({...__default__$x,props:badgeProps,setup(t,{expose:r}){const e=t,n=useNamespace("badge"),o=computed(()=>e.isDot?"":isNumber$1(e.value)&&isNumber$1(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return r({content:o}),(s,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(n).b())},[renderSlot(s.$slots,"default"),createVNode(Transition,{name:`${unref(n).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(n).e("content"),unref(n).em("content",s.type),unref(n).is("fixed",!!s.$slots.default),unref(n).is("dot",s.isDot)]),textContent:toDisplayString(unref(o))},null,10,_hoisted_1$q),[[vShow,!s.hidden&&(unref(o)||s.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc(_sfc_main$S,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ElBadge=withInstall(Badge),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(t,r)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>t.type==="text"));const e=inject(buttonGroupContextKey,void 0),n=useGlobalConfig("button"),{form:o}=useFormItem(),s=useFormSize(computed(()=>e==null?void 0:e.size)),a=useFormDisabled(),i=ref(),d=useSlots(),u=computed(()=>t.type||(e==null?void 0:e.type)||""),c=computed(()=>{var b,T,k;return(k=(T=t.autoInsertSpace)!=null?T:(b=n.value)==null?void 0:b.autoInsertSpace)!=null?k:!1}),m=computed(()=>t.tag==="button"?{ariaDisabled:a.value||t.loading,disabled:a.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),v=computed(()=>{var b;const T=(b=d.default)==null?void 0:b.call(d);if(c.value&&(T==null?void 0:T.length)===1){const k=T[0];if((k==null?void 0:k.type)===Text){const y=k.children;return/^\p{Unified_Ideograph}{2}$/u.test(y.trim())}}return!1});return{_disabled:a,_size:s,_type:u,_ref:i,_props:m,shouldAddSpace:v,handleClick:b=>{t.nativeType==="reset"&&(o==null||o.resetFields()),r("click",b)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:t=>t instanceof MouseEvent};function bound01(t,r){isOnePointZero(t)&&(t="100%");var e=isPercentage(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function clamp01(t){return Math.min(1,Math.max(0,t))}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!==-1}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function convertToPercentage(t){return t<=1?"".concat(Number(t)*100,"%"):t}function pad2(t){return t.length===1?"0"+t:String(t)}function rgbToRgb(t,r,e){return{r:bound01(t,255)*255,g:bound01(r,255)*255,b:bound01(e,255)*255}}function rgbToHsl(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),o=Math.min(t,r,e),s=0,a=0,i=(n+o)/2;if(n===o)a=0,s=0;else{var d=n-o;switch(a=i>.5?d/(2-n-o):d/(n+o),n){case t:s=(r-e)/d+(r<e?6:0);break;case r:s=(e-t)/d+2;break;case e:s=(t-r)/d+4;break}s/=6}return{h:s,s:a,l:i}}function hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*(6*e):e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}function hslToRgb(t,r,e){var n,o,s;if(t=bound01(t,360),r=bound01(r,100),e=bound01(e,100),r===0)o=e,s=e,n=e;else{var a=e<.5?e*(1+r):e+r-e*r,i=2*e-a;n=hue2rgb(i,a,t+1/3),o=hue2rgb(i,a,t),s=hue2rgb(i,a,t-1/3)}return{r:n*255,g:o*255,b:s*255}}function rgbToHsv(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),o=Math.min(t,r,e),s=0,a=n,i=n-o,d=n===0?0:i/n;if(n===o)s=0;else{switch(n){case t:s=(r-e)/i+(r<e?6:0);break;case r:s=(e-t)/i+2;break;case e:s=(t-r)/i+4;break}s/=6}return{h:s,s:d,v:a}}function hsvToRgb(t,r,e){t=bound01(t,360)*6,r=bound01(r,100),e=bound01(e,100);var n=Math.floor(t),o=t-n,s=e*(1-r),a=e*(1-o*r),i=e*(1-(1-o)*r),d=n%6,u=[e,a,s,s,i,e][d],c=[i,e,e,a,s,s][d],m=[s,s,i,e,e,a][d];return{r:u*255,g:c*255,b:m*255}}function rgbToHex(t,r,e,n){var o=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function rgbaToHex(t,r,e,n,o){var s=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16)),pad2(convertDecimalToHex(n))];return o&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}function parseIntFromHex(t){return parseInt(t,16)}function numberInputToObject(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(t){var r={r:0,g:0,b:0},e=1,n=null,o=null,s=null,a=!1,i=!1;return typeof t=="string"&&(t=stringInputToObject(t)),typeof t=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(r=rgbToRgb(t.r,t.g,t.b),a=!0,i=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(n=convertToPercentage(t.s),o=convertToPercentage(t.v),r=hsvToRgb(t.h,n,o),a=!0,i="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(n=convertToPercentage(t.s),s=convertToPercentage(t.l),r=hslToRgb(t.h,n,s),a=!0,i="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=boundAlpha(e),{ok:a,format:t.format||i,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(names[t])t=names[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=matchers.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=matchers.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=matchers.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=matchers.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=matchers.hex8.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),a:convertHexToDecimal(e[4]),format:r?"name":"hex8"}:(e=matchers.hex6.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),format:r?"name":"hex"}:(e=matchers.hex4.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),a:convertHexToDecimal(e[4]+e[4]),format:r?"name":"hex8"}:(e=matchers.hex3.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),format:r?"name":"hex"}:!1)))))))))}function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(String(t))}var TinyColor=function(){function t(r,e){r===void 0&&(r=""),e===void 0&&(e={});var n;if(r instanceof t)return r;typeof r=="number"&&(r=numberInputToObject(r)),this.originalInput=r;var o=inputToRGB(r);this.originalInput=r,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:o.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),e,n,o,s=r.r/255,a=r.g/255,i=r.b/255;return s<=.03928?e=s/12.92:e=Math.pow((s+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*e+.7152*n+.0722*o},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=boundAlpha(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=rgbToHsv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=rgbToHsv(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=rgbToHsl(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=rgbToHsl(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),rgbToHex(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),rgbaToHex(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(e,", ").concat(n,")"):"rgba(".concat(r,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(e){return"".concat(Math.round(bound01(e,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(e){return Math.round(bound01(e,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+rgbToHex(this.r,this.g,this.b,!1),e=0,n=Object.entries(names);e<n.length;e++){var o=n[e],s=o[0],a=o[1];if(r===a)return s}return!1},t.prototype.toString=function(r){var e=!!r;r=r??this.format;var n=!1,o=this.a<1&&this.a>=0,s=!e&&o&&(r.startsWith("hex")||r==="name");return s?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l+=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.brighten=function(r){r===void 0&&(r=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),new t(e)},t.prototype.darken=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l-=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s-=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.saturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s+=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var e=this.toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,new t(e)},t.prototype.mix=function(r,e){e===void 0&&(e=50);var n=this.toRgb(),o=new t(r).toRgb(),s=e/100,a={r:(o.r-n.r)*s+n.r,g:(o.g-n.g)*s+n.g,b:(o.b-n.b)*s+n.b,a:(o.a-n.a)*s+n.a};return new t(a)},t.prototype.analogous=function(r,e){r===void 0&&(r=6),e===void 0&&(e=30);var n=this.toHsl(),o=360/e,s=[this];for(n.h=(n.h-(o*r>>1)+720)%360;--r;)n.h=(n.h+o)%360,s.push(new t(n));return s},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var e=this.toHsv(),n=e.h,o=e.s,s=e.v,a=[],i=1/r;r--;)a.push(new t({h:n,s:o,v:s})),s=(s+i)%1;return a},t.prototype.splitcomplement=function(){var r=this.toHsl(),e=r.h;return[this,new t({h:(e+72)%360,s:r.s,l:r.l}),new t({h:(e+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var e=this.toRgb(),n=new t(r).toRgb(),o=e.a+n.a*(1-e.a);return new t({r:(e.r*e.a+n.r*n.a*(1-e.a))/o,g:(e.g*e.a+n.g*n.a*(1-e.a))/o,b:(e.b*e.a+n.b*n.a*(1-e.a))/o,a:o})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var e=this.toHsl(),n=e.h,o=[this],s=360/r,a=1;a<r;a++)o.push(new t({h:(n+a*s)%360,s:e.s,l:e.l}));return o},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}();function darken(t,r=20){return t.mix("#141414",r).toString()}function useButtonCustomStyle(t){const r=useFormDisabled(),e=useNamespace("button");return computed(()=>{let n={};const o=t.color;if(o){const s=new TinyColor(o),a=t.dark?s.tint(20).toString():darken(s,20);if(t.plain)n=e.cssVarBlock({"bg-color":t.dark?darken(s,90):s.tint(90).toString(),"text-color":o,"border-color":t.dark?darken(s,50):s.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":a,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":a}),r.value&&(n[e.cssVarBlockName("disabled-bg-color")]=t.dark?darken(s,90):s.tint(90).toString(),n[e.cssVarBlockName("disabled-text-color")]=t.dark?darken(s,50):s.tint(50).toString(),n[e.cssVarBlockName("disabled-border-color")]=t.dark?darken(s,80):s.tint(80).toString());else{const i=t.dark?darken(s,30):s.tint(30).toString(),d=s.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(n=e.cssVarBlock({"bg-color":o,"text-color":d,"border-color":o,"hover-bg-color":i,"hover-text-color":d,"hover-border-color":i,"active-bg-color":a,"active-border-color":a}),r.value){const u=t.dark?darken(s,50):s.tint(50).toString();n[e.cssVarBlockName("disabled-bg-color")]=u,n[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,n[e.cssVarBlockName("disabled-border-color")]=u}}}return n})}const __default__$w=defineComponent({name:"ElButton"}),_sfc_main$R=defineComponent({...__default__$w,props:buttonProps,emits:buttonEmits,setup(t,{expose:r,emit:e}){const n=t,o=useButtonCustomStyle(n),s=useNamespace("button"),{_ref:a,_size:i,_type:d,_disabled:u,_props:c,shouldAddSpace:m,handleClick:v}=useButton(n,e);return r({ref:a,size:i,type:d,disabled:u,shouldAddSpace:m}),(g,b)=>(openBlock(),createBlock(resolveDynamicComponent(g.tag),mergeProps({ref_key:"_ref",ref:a},unref(c),{class:[unref(s).b(),unref(s).m(unref(d)),unref(s).m(unref(i)),unref(s).is("disabled",unref(u)),unref(s).is("loading",g.loading),unref(s).is("plain",g.plain),unref(s).is("round",g.round),unref(s).is("circle",g.circle),unref(s).is("text",g.text),unref(s).is("link",g.link),unref(s).is("has-bg",g.bg)],style:unref(o),onClick:unref(v)}),{default:withCtx(()=>[g.loading?(openBlock(),createElementBlock(Fragment,{key:0},[g.$slots.loading?renderSlot(g.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(s).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.loadingIcon)))]),_:1},8,["class"]))],64)):g.icon||g.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[g.icon?(openBlock(),createBlock(resolveDynamicComponent(g.icon),{key:0})):renderSlot(g.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),g.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(s).em("text","expand")]:unref(m)})},[renderSlot(g.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc(_sfc_main$R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$v=defineComponent({name:"ElButtonGroup"}),_sfc_main$Q=defineComponent({...__default__$v,props:buttonGroupProps,setup(t){const r=t;provide(buttonGroupContextKey,reactive({size:toRef(r,"size"),type:toRef(r,"type")}));const e=useNamespace("button");return(n,o)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(e).b("group")}`)},[renderSlot(n.$slots,"default")],2))}});var ButtonGroup=_export_sfc(_sfc_main$Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup});withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dayjs_min={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=1e3,n=6e4,o=36e5,s="millisecond",a="second",i="minute",d="hour",u="day",c="week",m="month",v="quarter",g="year",b="date",T="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(le){var xe=["th","st","nd","rd"],ue=le%100;return"["+le+(xe[(ue-20)%10]||xe[ue]||xe[0])+"]"}},V=function(le,xe,ue){var Ve=String(le);return!Ve||Ve.length>=xe?le:""+Array(xe+1-Ve.length).join(ue)+le},Ce={s:V,z:function(le){var xe=-le.utcOffset(),ue=Math.abs(xe),Ve=Math.floor(ue/60),Ue=ue%60;return(xe<=0?"+":"-")+V(Ve,2,"0")+":"+V(Ue,2,"0")},m:function le(xe,ue){if(xe.date()<ue.date())return-le(ue,xe);var Ve=12*(ue.year()-xe.year())+(ue.month()-xe.month()),Ue=xe.clone().add(Ve,m),er=ue-Ue<0,At=xe.clone().add(Ve+(er?-1:1),m);return+(-(Ve+(ue-Ue)/(er?Ue-At:At-Ue))||0)},a:function(le){return le<0?Math.ceil(le)||0:Math.floor(le)},p:function(le){return{M:m,y:g,w:c,d:u,D:b,h:d,m:i,s:a,ms:s,Q:v}[le]||String(le||"").toLowerCase().replace(/s$/,"")},u:function(le){return le===void 0}},ie="en",Oe={};Oe[ie]=A;var he=function(le){return le instanceof ze},Y=function le(xe,ue,Ve){var Ue;if(!xe)return ie;if(typeof xe=="string"){var er=xe.toLowerCase();Oe[er]&&(Ue=er),ue&&(Oe[er]=ue,Ue=er);var At=xe.split("-");if(!Ue&&At.length>1)return le(At[0])}else{var ur=xe.name;Oe[ur]=xe,Ue=ur}return!Ve&&Ue&&(ie=Ue),Ue||!Ve&&ie},ae=function(le,xe){if(he(le))return le.clone();var ue=typeof xe=="object"?xe:{};return ue.date=le,ue.args=arguments,new ze(ue)},Fe=Ce;Fe.l=Y,Fe.i=he,Fe.w=function(le,xe){return ae(le,{locale:xe.$L,utc:xe.$u,x:xe.$x,$offset:xe.$offset})};var ze=function(){function le(ue){this.$L=Y(ue.locale,null,!0),this.parse(ue)}var xe=le.prototype;return xe.parse=function(ue){this.$d=function(Ve){var Ue=Ve.date,er=Ve.utc;if(Ue===null)return new Date(NaN);if(Fe.u(Ue))return new Date;if(Ue instanceof Date)return new Date(Ue);if(typeof Ue=="string"&&!/Z$/i.test(Ue)){var At=Ue.match(k);if(At){var ur=At[2]-1||0,pr=(At[7]||"0").substring(0,3);return er?new Date(Date.UTC(At[1],ur,At[3]||1,At[4]||0,At[5]||0,At[6]||0,pr)):new Date(At[1],ur,At[3]||1,At[4]||0,At[5]||0,At[6]||0,pr)}}return new Date(Ue)}(ue),this.$x=ue.x||{},this.init()},xe.init=function(){var ue=this.$d;this.$y=ue.getFullYear(),this.$M=ue.getMonth(),this.$D=ue.getDate(),this.$W=ue.getDay(),this.$H=ue.getHours(),this.$m=ue.getMinutes(),this.$s=ue.getSeconds(),this.$ms=ue.getMilliseconds()},xe.$utils=function(){return Fe},xe.isValid=function(){return this.$d.toString()!==T},xe.isSame=function(ue,Ve){var Ue=ae(ue);return this.startOf(Ve)<=Ue&&Ue<=this.endOf(Ve)},xe.isAfter=function(ue,Ve){return ae(ue)<this.startOf(Ve)},xe.isBefore=function(ue,Ve){return this.endOf(Ve)<ae(ue)},xe.$g=function(ue,Ve,Ue){return Fe.u(ue)?this[Ve]:this.set(Ue,ue)},xe.unix=function(){return Math.floor(this.valueOf()/1e3)},xe.valueOf=function(){return this.$d.getTime()},xe.startOf=function(ue,Ve){var Ue=this,er=!!Fe.u(Ve)||Ve,At=Fe.p(ue),ur=function(tr,nr){var Pt=Fe.w(Ue.$u?Date.UTC(Ue.$y,nr,tr):new Date(Ue.$y,nr,tr),Ue);return er?Pt:Pt.endOf(u)},pr=function(tr,nr){return Fe.w(Ue.toDate()[tr].apply(Ue.toDate("s"),(er?[0,0,0,0]:[23,59,59,999]).slice(nr)),Ue)},ar=this.$W,hr=this.$M,Ne=this.$D,or="set"+(this.$u?"UTC":"");switch(At){case g:return er?ur(1,0):ur(31,11);case m:return er?ur(1,hr):ur(0,hr+1);case c:var ir=this.$locale().weekStart||0,$e=(ar<ir?ar+7:ar)-ir;return ur(er?Ne-$e:Ne+(6-$e),hr);case u:case b:return pr(or+"Hours",0);case d:return pr(or+"Minutes",1);case i:return pr(or+"Seconds",2);case a:return pr(or+"Milliseconds",3);default:return this.clone()}},xe.endOf=function(ue){return this.startOf(ue,!1)},xe.$set=function(ue,Ve){var Ue,er=Fe.p(ue),At="set"+(this.$u?"UTC":""),ur=(Ue={},Ue[u]=At+"Date",Ue[b]=At+"Date",Ue[m]=At+"Month",Ue[g]=At+"FullYear",Ue[d]=At+"Hours",Ue[i]=At+"Minutes",Ue[a]=At+"Seconds",Ue[s]=At+"Milliseconds",Ue)[er],pr=er===u?this.$D+(Ve-this.$W):Ve;if(er===m||er===g){var ar=this.clone().set(b,1);ar.$d[ur](pr),ar.init(),this.$d=ar.set(b,Math.min(this.$D,ar.daysInMonth())).$d}else ur&&this.$d[ur](pr);return this.init(),this},xe.set=function(ue,Ve){return this.clone().$set(ue,Ve)},xe.get=function(ue){return this[Fe.p(ue)]()},xe.add=function(ue,Ve){var Ue,er=this;ue=Number(ue);var At=Fe.p(Ve),ur=function(hr){var Ne=ae(er);return Fe.w(Ne.date(Ne.date()+Math.round(hr*ue)),er)};if(At===m)return this.set(m,this.$M+ue);if(At===g)return this.set(g,this.$y+ue);if(At===u)return ur(1);if(At===c)return ur(7);var pr=(Ue={},Ue[i]=n,Ue[d]=o,Ue[a]=e,Ue)[At]||1,ar=this.$d.getTime()+ue*pr;return Fe.w(ar,this)},xe.subtract=function(ue,Ve){return this.add(-1*ue,Ve)},xe.format=function(ue){var Ve=this,Ue=this.$locale();if(!this.isValid())return Ue.invalidDate||T;var er=ue||"YYYY-MM-DDTHH:mm:ssZ",At=Fe.z(this),ur=this.$H,pr=this.$m,ar=this.$M,hr=Ue.weekdays,Ne=Ue.months,or=Ue.meridiem,ir=function(nr,Pt,Et,kt){return nr&&(nr[Pt]||nr(Ve,er))||Et[Pt].slice(0,kt)},$e=function(nr){return Fe.s(ur%12||12,nr,"0")},tr=or||function(nr,Pt,Et){var kt=nr<12?"AM":"PM";return Et?kt.toLowerCase():kt};return er.replace(y,function(nr,Pt){return Pt||function(Et){switch(Et){case"YY":return String(Ve.$y).slice(-2);case"YYYY":return Fe.s(Ve.$y,4,"0");case"M":return ar+1;case"MM":return Fe.s(ar+1,2,"0");case"MMM":return ir(Ue.monthsShort,ar,Ne,3);case"MMMM":return ir(Ne,ar);case"D":return Ve.$D;case"DD":return Fe.s(Ve.$D,2,"0");case"d":return String(Ve.$W);case"dd":return ir(Ue.weekdaysMin,Ve.$W,hr,2);case"ddd":return ir(Ue.weekdaysShort,Ve.$W,hr,3);case"dddd":return hr[Ve.$W];case"H":return String(ur);case"HH":return Fe.s(ur,2,"0");case"h":return $e(1);case"hh":return $e(2);case"a":return tr(ur,pr,!0);case"A":return tr(ur,pr,!1);case"m":return String(pr);case"mm":return Fe.s(pr,2,"0");case"s":return String(Ve.$s);case"ss":return Fe.s(Ve.$s,2,"0");case"SSS":return Fe.s(Ve.$ms,3,"0");case"Z":return At}return null}(nr)||At.replace(":","")})},xe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},xe.diff=function(ue,Ve,Ue){var er,At=this,ur=Fe.p(Ve),pr=ae(ue),ar=(pr.utcOffset()-this.utcOffset())*n,hr=this-pr,Ne=function(){return Fe.m(At,pr)};switch(ur){case g:er=Ne()/12;break;case m:er=Ne();break;case v:er=Ne()/3;break;case c:er=(hr-ar)/6048e5;break;case u:er=(hr-ar)/864e5;break;case d:er=hr/o;break;case i:er=hr/n;break;case a:er=hr/e;break;default:er=hr}return Ue?er:Fe.a(er)},xe.daysInMonth=function(){return this.endOf(m).$D},xe.$locale=function(){return Oe[this.$L]},xe.locale=function(ue,Ve){if(!ue)return this.$L;var Ue=this.clone(),er=Y(ue,Ve,!0);return er&&(Ue.$L=er),Ue},xe.clone=function(){return Fe.w(this.$d,this)},xe.toDate=function(){return new Date(this.valueOf())},xe.toJSON=function(){return this.isValid()?this.toISOString():null},xe.toISOString=function(){return this.$d.toISOString()},xe.toString=function(){return this.$d.toUTCString()},le}(),pe=ze.prototype;return ae.prototype=pe,[["$ms",s],["$s",a],["$m",i],["$H",d],["$W",u],["$M",m],["$y",g],["$D",b]].forEach(function(le){pe[le[1]]=function(xe){return this.$g(xe,le[0],le[1])}}),ae.extend=function(le,xe){return le.$i||(le(xe,ze,ae),le.$i=!0),ae},ae.locale=Y,ae.isDayjs=he,ae.unix=function(le){return ae(1e3*le)},ae.en=Oe[ie],ae.Ls=Oe,ae.p={},ae})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",t=>startClick=t),document.addEventListener("mouseup",t=>{for(const r of nodeList.values())for(const{documentHandler:e}of r)e(t,startClick)}));function createDocumentHandler(t,r){let e=[];return Array.isArray(r.arg)?e=r.arg:isElement(r.arg)&&e.push(r.arg),function(n,o){const s=r.instance.popperRef,a=n.target,i=o==null?void 0:o.target,d=!r||!r.instance,u=!a||!i,c=t.contains(a)||t.contains(i),m=t===a,v=e.length&&e.some(b=>b==null?void 0:b.contains(a))||e.length&&e.includes(i),g=s&&(s.contains(a)||s.contains(i));d||u||c||m||v||g||r.value(n,o)}}const ClickOutside={beforeMount(t,r){nodeList.has(t)||nodeList.set(t,[]),nodeList.get(t).push({documentHandler:createDocumentHandler(t,r),bindingFn:r.value})},updated(t,r){nodeList.has(t)||nodeList.set(t,[]);const e=nodeList.get(t),n=e.findIndex(s=>s.bindingFn===r.oldValue),o={documentHandler:createDocumentHandler(t,r),bindingFn:r.value};n>=0?e.splice(n,1,o):e.push(o)},unmounted(t){nodeList.delete(t)}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=t=>{if(FOCUS_STACK.length===0)return;const r=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(r.length>0&&t.code===EVENT_CODE.tab){if(r.length===1){t.preventDefault(),document.activeElement!==r[0]&&r[0].focus();return}const e=t.shiftKey,n=t.target===r[0],o=t.target===r[r.length-1];n&&e&&(t.preventDefault(),r[r.length-1].focus()),o&&!e&&(t.preventDefault(),r[0].focus())}},TrapFocus={beforeMount(t){t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t),FOCUS_STACK.push(t),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(t){nextTick(()=>{t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}},checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),change:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:t,isChecked:r})=>{const e=inject(checkboxGroupContextKey,void 0),n=computed(()=>{var s,a;const i=(s=e==null?void 0:e.max)==null?void 0:s.value,d=(a=e==null?void 0:e.min)==null?void 0:a.value;return!isUndefined$1(i)&&t.value.length>=i&&!r.value||!isUndefined$1(d)&&t.value.length<=d&&r.value});return{isDisabled:useFormDisabled(computed(()=>(e==null?void 0:e.disabled.value)||n.value)),isLimitDisabled:n}},useCheckboxEvent=(t,{model:r,isLimitExceeded:e,hasOwnLabel:n,isDisabled:o,isLabeledByFormItem:s})=>{const a=inject(checkboxGroupContextKey,void 0),{formItem:i}=useFormItem(),{emit:d}=getCurrentInstance();function u(b){var T,k;return b===t.trueLabel||b===!0?(T=t.trueLabel)!=null?T:!0:(k=t.falseLabel)!=null?k:!1}function c(b,T){d("change",u(b),T)}function m(b){if(e.value)return;const T=b.target;d("change",u(T.checked),b)}async function v(b){e.value||!n.value&&!o.value&&s.value&&(b.composedPath().some(y=>y.tagName==="LABEL")||(r.value=u([!1,t.falseLabel].includes(r.value)),await nextTick(),c(r.value,b)))}const g=computed(()=>(a==null?void 0:a.validateEvent)||t.validateEvent);return watch(()=>t.modelValue,()=>{g.value&&(i==null||i.validate("change").catch(b=>void 0))}),{handleChange:m,onClickRoot:v}},useCheckboxModel=t=>{const r=ref(!1),{emit:e}=getCurrentInstance(),n=inject(checkboxGroupContextKey,void 0),o=computed(()=>isUndefined$1(n)===!1),s=ref(!1);return{model:computed({get(){var i,d;return o.value?(i=n==null?void 0:n.modelValue)==null?void 0:i.value:(d=t.modelValue)!=null?d:r.value},set(i){var d,u;o.value&&isArray$4(i)?(s.value=((d=n==null?void 0:n.max)==null?void 0:d.value)!==void 0&&i.length>(n==null?void 0:n.max.value),s.value===!1&&((u=n==null?void 0:n.changeEvent)==null||u.call(n,i))):(e(UPDATE_MODEL_EVENT,i),r.value=i)}}),isGroup:o,isLimitExceeded:s}},useCheckboxStatus=(t,r,{model:e})=>{const n=inject(checkboxGroupContextKey,void 0),o=ref(!1),s=computed(()=>{const u=e.value;return isBoolean$1(u)?u:isArray$4(u)?isObject$2(t.label)?u.map(toRaw).some(c=>isEqual(c,t.label)):u.map(toRaw).includes(t.label):u!=null?u===t.trueLabel:!!u}),a=useFormSize(computed(()=>{var u;return(u=n==null?void 0:n.size)==null?void 0:u.value}),{prop:!0}),i=useFormSize(computed(()=>{var u;return(u=n==null?void 0:n.size)==null?void 0:u.value})),d=computed(()=>!!(r.default||t.label));return{checkboxButtonSize:a,isChecked:s,isFocused:o,checkboxSize:i,hasOwnLabel:d}},setStoreValue=(t,{model:r})=>{function e(){isArray$4(r.value)&&!r.value.includes(t.label)?r.value.push(t.label):r.value=t.trueLabel||!0}t.checked&&e()},useCheckbox=(t,r)=>{const{formItem:e}=useFormItem(),{model:n,isGroup:o,isLimitExceeded:s}=useCheckboxModel(t),{isFocused:a,isChecked:i,checkboxButtonSize:d,checkboxSize:u,hasOwnLabel:c}=useCheckboxStatus(t,r,{model:n}),{isDisabled:m}=useCheckboxDisabled({model:n,isChecked:i}),{inputId:v,isLabeledByFormItem:g}=useFormItemInputId(t,{formItemContext:e,disableIdGeneration:c,disableIdManagement:o}),{handleChange:b,onClickRoot:T}=useCheckboxEvent(t,{model:n,isLimitExceeded:s,hasOwnLabel:c,isDisabled:m,isLabeledByFormItem:g});return setStoreValue(t,{model:n}),{inputId:v,isLabeledByFormItem:g,isChecked:i,isDisabled:m,isFocused:a,checkboxButtonSize:d,checkboxSize:u,hasOwnLabel:c,model:n,handleChange:b,onClickRoot:T}},_hoisted_1$p=["tabindex","role","aria-checked"],_hoisted_2$h=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],_hoisted_3$b=["id","aria-hidden","disabled","value","name","tabindex"],__default__$u=defineComponent({name:"ElCheckbox"}),_sfc_main$P=defineComponent({...__default__$u,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{inputId:n,isLabeledByFormItem:o,isChecked:s,isDisabled:a,isFocused:i,checkboxSize:d,hasOwnLabel:u,model:c,handleChange:m,onClickRoot:v}=useCheckbox(r,e),g=useNamespace("checkbox"),b=computed(()=>[g.b(),g.m(d.value),g.is("disabled",a.value),g.is("bordered",r.border),g.is("checked",s.value)]),T=computed(()=>[g.e("input"),g.is("disabled",a.value),g.is("checked",s.value),g.is("indeterminate",r.indeterminate),g.is("focus",i.value)]);return(k,y)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(u)&&unref(o)?"span":"label"),{class:normalizeClass(unref(b)),"aria-controls":k.indeterminate?k.controls:null,onClick:unref(v)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(T)),tabindex:k.indeterminate?0:void 0,role:k.indeterminate?"checkbox":void 0,"aria-checked":k.indeterminate?"mixed":void 0},[k.trueLabel||k.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(n),"onUpdate:modelValue":y[0]||(y[0]=A=>isRef(c)?c.value=A:null),class:normalizeClass(unref(g).e("original")),type:"checkbox","aria-hidden":k.indeterminate?"true":"false",name:k.name,tabindex:k.tabindex,disabled:unref(a),"true-value":k.trueLabel,"false-value":k.falseLabel,onChange:y[1]||(y[1]=(...A)=>unref(m)&&unref(m)(...A)),onFocus:y[2]||(y[2]=A=>i.value=!0),onBlur:y[3]||(y[3]=A=>i.value=!1),onClick:y[4]||(y[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$h)),[[vModelCheckbox,unref(c)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(n),"onUpdate:modelValue":y[5]||(y[5]=A=>isRef(c)?c.value=A:null),class:normalizeClass(unref(g).e("original")),type:"checkbox","aria-hidden":k.indeterminate?"true":"false",disabled:unref(a),value:k.label,name:k.name,tabindex:k.tabindex,onChange:y[6]||(y[6]=(...A)=>unref(m)&&unref(m)(...A)),onFocus:y[7]||(y[7]=A=>i.value=!0),onBlur:y[8]||(y[8]=A=>i.value=!1),onClick:y[9]||(y[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_3$b)),[[vModelCheckbox,unref(c)]]),createBaseVNode("span",{class:normalizeClass(unref(g).e("inner"))},null,2)],10,_hoisted_1$p),unref(u)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).e("label"))},[renderSlot(k.$slots,"default"),k.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(k.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc(_sfc_main$P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const _hoisted_1$o=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$g=["name","tabindex","disabled","value"],__default__$t=defineComponent({name:"ElCheckboxButton"}),_sfc_main$O=defineComponent({...__default__$t,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{isFocused:n,isChecked:o,isDisabled:s,checkboxButtonSize:a,model:i,handleChange:d}=useCheckbox(r,e),u=inject(checkboxGroupContextKey,void 0),c=useNamespace("checkbox"),m=computed(()=>{var g,b,T,k;const y=(b=(g=u==null?void 0:u.fill)==null?void 0:g.value)!=null?b:"";return{backgroundColor:y,borderColor:y,color:(k=(T=u==null?void 0:u.textColor)==null?void 0:T.value)!=null?k:"",boxShadow:y?`-1px 0 0 0 ${y}`:void 0}}),v=computed(()=>[c.b("button"),c.bm("button",a.value),c.is("disabled",s.value),c.is("checked",o.value),c.is("focus",n.value)]);return(g,b)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(v))},[g.trueLabel||g.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":b[0]||(b[0]=T=>isRef(i)?i.value=T:null),class:normalizeClass(unref(c).be("button","original")),type:"checkbox",name:g.name,tabindex:g.tabindex,disabled:unref(s),"true-value":g.trueLabel,"false-value":g.falseLabel,onChange:b[1]||(b[1]=(...T)=>unref(d)&&unref(d)(...T)),onFocus:b[2]||(b[2]=T=>n.value=!0),onBlur:b[3]||(b[3]=T=>n.value=!1),onClick:b[4]||(b[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$o)),[[vModelCheckbox,unref(i)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":b[5]||(b[5]=T=>isRef(i)?i.value=T:null),class:normalizeClass(unref(c).be("button","original")),type:"checkbox",name:g.name,tabindex:g.tabindex,disabled:unref(s),value:g.label,onChange:b[6]||(b[6]=(...T)=>unref(d)&&unref(d)(...T)),onFocus:b[7]||(b[7]=T=>n.value=!0),onBlur:b[8]||(b[8]=T=>n.value=!1),onClick:b[9]||(b[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$g)),[[vModelCheckbox,unref(i)]]),g.$slots.default||g.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(c).be("button","inner")),style:normalizeStyle(unref(o)?unref(m):void 0)},[renderSlot(g.$slots,"default",{},()=>[createTextVNode(toDisplayString(g.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc(_sfc_main$O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:t=>isArray$4(t),change:t=>isArray$4(t)},__default__$s=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$N=defineComponent({...__default__$s,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("checkbox"),{formItem:o}=useFormItem(),{inputId:s,isLabeledByFormItem:a}=useFormItemInputId(e,{formItemContext:o}),i=async u=>{r(UPDATE_MODEL_EVENT,u),await nextTick(),r("change",u)},d=computed({get(){return e.modelValue},set(u){i(u)}});return provide(checkboxGroupContextKey,{...pick$1(toRefs(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:d,changeEvent:i}),watch(()=>e.modelValue,()=>{e.validateEvent&&(o==null||o.validate("change").catch(u=>void 0))}),(u,c)=>{var m;return openBlock(),createBlock(resolveDynamicComponent(u.tag),{id:unref(s),class:normalizeClass(unref(n).b("group")),role:"group","aria-label":unref(a)?void 0:u.label||"checkbox-group","aria-labelledby":unref(a)?(m=unref(o))==null?void 0:m.labelId:void 0},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc(_sfc_main$N,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);const ElCheckboxGroup=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),[CHANGE_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(t,r)=>{const e=ref(),n=inject(radioGroupKey,void 0),o=computed(()=>!!n),s=computed({get(){return o.value?n.modelValue:t.modelValue},set(c){o.value?n.changeEvent(c):r&&r(UPDATE_MODEL_EVENT,c),e.value.checked=t.modelValue===t.label}}),a=useFormSize(computed(()=>n==null?void 0:n.size)),i=useFormDisabled(computed(()=>n==null?void 0:n.disabled)),d=ref(!1),u=computed(()=>i.value||o.value&&s.value!==t.label?-1:0);return{radioRef:e,isGroup:o,radioGroup:n,focus:d,size:a,disabled:i,tabIndex:u,modelValue:s}},_hoisted_1$n=["value","name","disabled"],__default__$r=defineComponent({name:"ElRadio"}),_sfc_main$M=defineComponent({...__default__$r,props:radioProps,emits:radioEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),{radioRef:o,radioGroup:s,focus:a,size:i,disabled:d,modelValue:u}=useRadio(e,r);function c(){nextTick(()=>r("change",u.value))}return(m,v)=>{var g;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(n).b(),unref(n).is("disabled",unref(d)),unref(n).is("focus",unref(a)),unref(n).is("bordered",m.border),unref(n).is("checked",unref(u)===m.label),unref(n).m(unref(i))])},[createBaseVNode("span",{class:normalizeClass([unref(n).e("input"),unref(n).is("disabled",unref(d)),unref(n).is("checked",unref(u)===m.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":v[0]||(v[0]=b=>isRef(u)?u.value=b:null),class:normalizeClass(unref(n).e("original")),value:m.label,name:m.name||((g=unref(s))==null?void 0:g.name),disabled:unref(d),type:"radio",onFocus:v[1]||(v[1]=b=>a.value=!0),onBlur:v[2]||(v[2]=b=>a.value=!1),onChange:c,onClick:v[3]||(v[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$n),[[vModelRadio,unref(u)]]),createBaseVNode("span",{class:normalizeClass(unref(n).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(n).e("label")),onKeydown:v[4]||(v[4]=withModifiers(()=>{},["stop"]))},[renderSlot(m.$slots,"default",{},()=>[createTextVNode(toDisplayString(m.label),1)])],34)],2)}}});var Radio=_export_sfc(_sfc_main$M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$m=["value","name","disabled"],__default__$q=defineComponent({name:"ElRadioButton"}),_sfc_main$L=defineComponent({...__default__$q,props:radioButtonProps,setup(t){const r=t,e=useNamespace("radio"),{radioRef:n,focus:o,size:s,disabled:a,modelValue:i,radioGroup:d}=useRadio(r),u=computed(()=>({backgroundColor:(d==null?void 0:d.fill)||"",borderColor:(d==null?void 0:d.fill)||"",boxShadow:d!=null&&d.fill?`-1px 0 0 0 ${d.fill}`:"",color:(d==null?void 0:d.textColor)||""}));return(c,m)=>{var v;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(e).b("button"),unref(e).is("active",unref(i)===c.label),unref(e).is("disabled",unref(a)),unref(e).is("focus",unref(o)),unref(e).bm("button",unref(s))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":m[0]||(m[0]=g=>isRef(i)?i.value=g:null),class:normalizeClass(unref(e).be("button","original-radio")),value:c.label,type:"radio",name:c.name||((v=unref(d))==null?void 0:v.name),disabled:unref(a),onFocus:m[1]||(m[1]=g=>o.value=!0),onBlur:m[2]||(m[2]=g=>o.value=!1),onClick:m[3]||(m[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$m),[[vModelRadio,unref(i)]]),createBaseVNode("span",{class:normalizeClass(unref(e).be("button","inner")),style:normalizeStyle(unref(i)===c.label?unref(u):{}),onKeydown:m[4]||(m[4]=withModifiers(()=>{},["stop"]))},[renderSlot(c.$slots,"default",{},()=>[createTextVNode(toDisplayString(c.label),1)])],38)],2)}}});var RadioButton=_export_sfc(_sfc_main$L,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$l=["id","aria-label","aria-labelledby"],__default__$p=defineComponent({name:"ElRadioGroup"}),_sfc_main$K=defineComponent({...__default__$p,props:radioGroupProps,emits:radioGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),o=useId(),s=ref(),{formItem:a}=useFormItem(),{inputId:i,isLabeledByFormItem:d}=useFormItemInputId(e,{formItemContext:a}),u=m=>{r(UPDATE_MODEL_EVENT,m),nextTick(()=>r("change",m))};onMounted(()=>{const m=s.value.querySelectorAll("[type=radio]"),v=m[0];!Array.from(m).some(g=>g.checked)&&v&&(v.tabIndex=0)});const c=computed(()=>e.name||o.value);return provide(radioGroupKey,reactive({...toRefs(e),changeEvent:u,name:c})),watch(()=>e.modelValue,()=>{e.validateEvent&&(a==null||a.validate("change").catch(m=>void 0))}),(m,v)=>(openBlock(),createElementBlock("div",{id:unref(i),ref_key:"radioGroupRef",ref:s,class:normalizeClass(unref(n).b("group")),role:"radiogroup","aria-label":unref(d)?void 0:m.label||"radio-group","aria-labelledby":unref(d)?unref(a).labelId:void 0},[renderSlot(m.$slots,"default")],10,_hoisted_1$l))}});var RadioGroup=_export_sfc(_sfc_main$K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup});withNoopInstall(RadioGroup);withNoopInstall(RadioButton);var NodeContent=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:t}=this,{node:r,panel:e}=this.$parent,{data:n,label:o}=r,{renderLabelFn:s}=e;return h("span",{class:t.e("label")},s?s({node:r,data:n}):o)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$J=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:r}){const e=inject(CASCADER_PANEL_INJECTION_KEY),n=useNamespace("cascader-node"),o=computed(()=>e.isHoverMenu),s=computed(()=>e.config.multiple),a=computed(()=>e.config.checkStrictly),i=computed(()=>{var Oe;return(Oe=e.checkedNodes[0])==null?void 0:Oe.uid}),d=computed(()=>t.node.isDisabled),u=computed(()=>t.node.isLeaf),c=computed(()=>a.value&&!u.value||!d.value),m=computed(()=>g(e.expandingNode)),v=computed(()=>a.value&&e.checkedNodes.some(g)),g=Oe=>{var he;const{level:Y,uid:ae}=t.node;return((he=Oe==null?void 0:Oe.pathNodes[Y-1])==null?void 0:he.uid)===ae},b=()=>{m.value||e.expandNode(t.node)},T=Oe=>{const{node:he}=t;Oe!==he.checked&&e.handleCheckChange(he,Oe)},k=()=>{e.lazyLoad(t.node,()=>{u.value||b()})},y=Oe=>{o.value&&(A(),!u.value&&r("expand",Oe))},A=()=>{const{node:Oe}=t;!c.value||Oe.loading||(Oe.loaded?b():k())},V=()=>{o.value&&!u.value||(u.value&&!d.value&&!a.value&&!s.value?ie(!0):A())},Ce=Oe=>{a.value?(T(Oe),t.node.loaded&&b()):ie(Oe)},ie=Oe=>{t.node.loaded?(T(Oe),!a.value&&b()):k()};return{panel:e,isHoverMenu:o,multiple:s,checkStrictly:a,checkedNodeId:i,isDisabled:d,isLeaf:u,expandable:c,inExpandingPath:m,inCheckedPath:v,ns:n,handleHoverExpand:y,handleExpand:A,handleClick:V,handleCheck:ie,handleSelectCheck:Ce}}}),_hoisted_1$k=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$f=createBaseVNode("span",null,null,-1);function _sfc_render$g(t,r,e,n,o,s){const a=resolveComponent("el-checkbox"),i=resolveComponent("el-radio"),d=resolveComponent("check"),u=resolveComponent("el-icon"),c=resolveComponent("node-content"),m=resolveComponent("loading"),v=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:normalizeClass([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:r[2]||(r[2]=(...g)=>t.handleHoverExpand&&t.handleHoverExpand(...g)),onFocus:r[3]||(r[3]=(...g)=>t.handleHoverExpand&&t.handleHoverExpand(...g)),onClick:r[4]||(r[4]=(...g)=>t.handleClick&&t.handleClick(...g))},[createCommentVNode(" prefix "),t.multiple?(openBlock(),createBlock(a,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:r[0]||(r[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(openBlock(),createBlock(i,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:r[1]||(r[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$f]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(openBlock(),createBlock(u,{key:2,class:normalizeClass(t.ns.e("prefix"))},{default:withCtx(()=>[createVNode(d)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(c),createCommentVNode(" postfix "),t.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[t.node.loading?(openBlock(),createBlock(u,{key:0,class:normalizeClass([t.ns.is("loading"),t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(m)]),_:1},8,["class"])):(openBlock(),createBlock(u,{key:1,class:normalizeClass(["arrow-right",t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(v)]),_:1},8,["class"]))],64))],42,_hoisted_1$k)}var ElCascaderNode=_export_sfc(_sfc_main$J,[["render",_sfc_render$g],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const _sfc_main$I=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const r=getCurrentInstance(),e=useNamespace("cascader-menu"),{t:n}=useLocale(),o=generateId();let s=null,a=null;const i=inject(CASCADER_PANEL_INJECTION_KEY),d=ref(null),u=computed(()=>!t.nodes.length),c=computed(()=>!i.initialLoaded),m=computed(()=>`cascader-menu-${o}-${t.index}`),v=k=>{s=k.target},g=k=>{if(!(!i.isHoverMenu||!s||!d.value))if(s.contains(k.target)){b();const y=r.vnode.el,{left:A}=y.getBoundingClientRect(),{offsetWidth:V,offsetHeight:Ce}=y,ie=k.clientX-A,Oe=s.offsetTop,he=Oe+s.offsetHeight;d.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${ie} ${Oe} L${V} 0 V${Oe} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${ie} ${he} L${V} ${Ce} V${he} Z" />
        `}else a||(a=window.setTimeout(T,i.config.hoverThreshold))},b=()=>{a&&(clearTimeout(a),a=null)},T=()=>{d.value&&(d.value.innerHTML="",b())};return{ns:e,panel:i,hoverZone:d,isEmpty:u,isLoading:c,menuId:m,t:n,handleExpand:v,handleMouseMove:g,clearHoverZone:T}}});function _sfc_render$f(t,r,e,n,o,s){const a=resolveComponent("el-cascader-node"),i=resolveComponent("loading"),d=resolveComponent("el-icon"),u=resolveComponent("el-scrollbar");return openBlock(),createBlock(u,{key:t.menuId,tag:"ul",role:"menu",class:normalizeClass(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:withCtx(()=>{var c;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.nodes,m=>(openBlock(),createBlock(a,{key:m.uid,node:m,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.e("empty-text"))},[createVNode(d,{size:"14",class:normalizeClass(t.ns.is("loading"))},{default:withCtx(()=>[createVNode(i)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("empty-text"))},toDisplayString(t.t("el.cascader.noData")),3)):(c=t.panel)!=null&&c.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(t.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc(_sfc_main$I,[["render",_sfc_render$f],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let uid=0;const calculatePathNodes=t=>{const r=[t];let{parent:e}=t;for(;e;)r.unshift(e),e=e.parent;return r};class Node{constructor(r,e,n,o=!1){this.data=r,this.config=e,this.parent=n,this.root=o,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:i}=e,d=r[i],u=calculatePathNodes(this);this.level=o?0:n?n.level+1:1,this.value=r[s],this.label=r[a],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=d,this.children=(d||[]).map(c=>new Node(c,e,this)),this.loaded=!e.lazy||this.isLeaf||!isEmpty(d)}get isDisabled(){const{data:r,parent:e,config:n}=this,{disabled:o,checkStrictly:s}=n;return(isFunction$3(o)?o(r,this):!!r[o])||!s&&(e==null?void 0:e.isDisabled)}get isLeaf(){const{data:r,config:e,childrenData:n,loaded:o}=this,{lazy:s,leaf:a}=e,i=isFunction$3(a)?a(r,this):r[a];return isUndefined$1(i)?s&&!o?!1:!(Array.isArray(n)&&n.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(r){const{childrenData:e,children:n}=this,o=new Node(r,this.config,this);return Array.isArray(e)?e.push(r):this.childrenData=[r],n.push(o),o}calcText(r,e){const n=r?this.pathLabels.join(e):this.label;return this.text=n,n}broadcast(r,...e){const n=`onParent${capitalize(r)}`;this.children.forEach(o=>{o&&(o.broadcast(r,...e),o[n]&&o[n](...e))})}emit(r,...e){const{parent:n}=this,o=`onChild${capitalize(r)}`;n&&(n[o]&&n[o](...e),n.emit(r,...e))}onParentCheck(r){this.isDisabled||this.setCheckState(r)}onChildCheck(){const{children:r}=this,e=r.filter(o=>!o.isDisabled),n=e.length?e.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(r){const e=this.children.length,n=this.children.reduce((o,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return o+a},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&r,this.indeterminate=this.loaded&&n!==e&&n>0}doCheck(r){if(this.checked===r)return;const{checkStrictly:e,multiple:n}=this.config;e||!n?this.checked=r:(this.broadcast("check",r),this.setCheckState(r),this.emit("check"))}}const flatNodes=(t,r)=>t.reduce((e,n)=>(n.isLeaf?e.push(n):(!r&&e.push(n),e=e.concat(flatNodes(n.children,r))),e),[]);class Store{constructor(r,e){this.config=e;const n=(r||[]).map(o=>new Node(o,this.config));this.nodes=n,this.allNodes=flatNodes(n,!1),this.leafNodes=flatNodes(n,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const n=e?e.appendChild(r):new Node(r,this.config);e||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(r,e){r.forEach(n=>this.appendNode(n,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(o=>isEqual(o.value,r)||isEqual(o.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:n,level:o})=>isEqual(r.value,n)&&r.level===o)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=t=>computed(()=>({...DefaultProps,...t.props})),getMenuIndex=t=>{if(!t)return 0;const r=t.id.split("-");return Number(r[r.length-2])},checkNode=t=>{if(!t)return;const r=t.querySelector("input");r?r.click():isLeaf(t)&&t.click()},sortByOriginalOrder=(t,r)=>{const e=r.slice(0),n=e.map(s=>s.uid),o=t.reduce((s,a)=>{const i=n.indexOf(a.uid);return i>-1&&(s.push(a),e.splice(i,1),n.splice(i,1)),s},[]);return o.push(...e),o},_sfc_main$H=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(t,{emit:r,slots:e}){let n=!1;const o=useNamespace("cascader"),s=useCascaderConfig(t);let a=null;const i=ref(!0),d=ref([]),u=ref(null),c=ref([]),m=ref(null),v=ref([]),g=computed(()=>s.value.expandTrigger==="hover"),b=computed(()=>t.renderLabel||e.default),T=()=>{const{options:pe}=t,le=s.value;n=!1,a=new Store(pe,le),c.value=[a.getNodes()],le.lazy&&isEmpty(t.options)?(i.value=!1,k(void 0,xe=>{xe&&(a=new Store(xe,le),c.value=[a.getNodes()]),i.value=!0,Y(!1,!0)})):Y(!1,!0)},k=(pe,le)=>{const xe=s.value;pe=pe||new Node({},xe,void 0,!0),pe.loading=!0;const ue=Ve=>{const Ue=pe,er=Ue.root?null:Ue;Ve&&(a==null||a.appendNodes(Ve,er)),Ue.loading=!1,Ue.loaded=!0,Ue.childrenData=Ue.childrenData||[],le&&le(Ve)};xe.lazyLoad(pe,ue)},y=(pe,le)=>{var xe;const{level:ue}=pe,Ve=c.value.slice(0,ue);let Ue;pe.isLeaf?Ue=pe.pathNodes[ue-2]:(Ue=pe,Ve.push(pe.children)),((xe=m.value)==null?void 0:xe.uid)!==(Ue==null?void 0:Ue.uid)&&(m.value=pe,c.value=Ve,!le&&r("expand-change",(pe==null?void 0:pe.pathValues)||[]))},A=(pe,le,xe=!0)=>{const{checkStrictly:ue,multiple:Ve}=s.value,Ue=v.value[0];n=!0,!Ve&&(Ue==null||Ue.doCheck(!1)),pe.doCheck(le),he(),xe&&!Ve&&!ue&&r("close"),!xe&&!Ve&&!ue&&V(pe)},V=pe=>{pe&&(pe=pe.parent,V(pe),pe&&y(pe))},Ce=pe=>a==null?void 0:a.getFlattedNodes(pe),ie=pe=>{var le;return(le=Ce(pe))==null?void 0:le.filter(xe=>xe.checked!==!1)},Oe=()=>{v.value.forEach(pe=>pe.doCheck(!1)),he(),c.value=c.value.slice(0,1),m.value=null,r("expand-change",[])},he=()=>{var pe;const{checkStrictly:le,multiple:xe}=s.value,ue=v.value,Ve=ie(!le),Ue=sortByOriginalOrder(ue,Ve),er=Ue.map(At=>At.valueByOption);v.value=Ue,u.value=xe?er:(pe=er[0])!=null?pe:null},Y=(pe=!1,le=!1)=>{const{modelValue:xe}=t,{lazy:ue,multiple:Ve,checkStrictly:Ue}=s.value,er=!Ue;if(!(!i.value||n||!le&&isEqual(xe,u.value)))if(ue&&!pe){const ur=unique(flattenDeep(castArray(xe))).map(pr=>a==null?void 0:a.getNodeByValue(pr)).filter(pr=>!!pr&&!pr.loaded&&!pr.loading);ur.length?ur.forEach(pr=>{k(pr,()=>Y(!1,le))}):Y(!0,le)}else{const At=Ve?castArray(xe):[xe],ur=unique(At.map(pr=>a==null?void 0:a.getNodeByValue(pr,er)));ae(ur,le),u.value=cloneDeep(xe)}},ae=(pe,le=!0)=>{const{checkStrictly:xe}=s.value,ue=v.value,Ve=pe.filter(At=>!!At&&(xe||At.isLeaf)),Ue=a==null?void 0:a.getSameNode(m.value),er=le&&Ue||Ve[0];er?er.pathNodes.forEach(At=>y(At,!0)):m.value=null,ue.forEach(At=>At.doCheck(!1)),t.props.multiple?reactive(Ve).forEach(At=>At.doCheck(!0)):Ve.forEach(At=>At.doCheck(!0)),v.value=Ve,nextTick(Fe)},Fe=()=>{isClient&&d.value.forEach(pe=>{const le=pe==null?void 0:pe.$el;if(le){const xe=le.querySelector(`.${o.namespace.value}-scrollbar__wrap`),ue=le.querySelector(`.${o.b("node")}.${o.is("active")}`)||le.querySelector(`.${o.b("node")}.in-active-path`);scrollIntoView(xe,ue)}})},ze=pe=>{const le=pe.target,{code:xe}=pe;switch(xe){case EVENT_CODE.up:case EVENT_CODE.down:{pe.preventDefault();const ue=xe===EVENT_CODE.up?-1:1;focusNode(getSibling(le,ue,`.${o.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{pe.preventDefault();const ue=d.value[getMenuIndex(le)-1],Ve=ue==null?void 0:ue.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);focusNode(Ve);break}case EVENT_CODE.right:{pe.preventDefault();const ue=d.value[getMenuIndex(le)+1],Ve=ue==null?void 0:ue.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);focusNode(Ve);break}case EVENT_CODE.enter:checkNode(le);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:s,expandingNode:m,checkedNodes:v,isHoverMenu:g,initialLoaded:i,renderLabelFn:b,lazyLoad:k,expandNode:y,handleCheckChange:A})),watch([s,()=>t.options],T,{deep:!0,immediate:!0}),watch(()=>t.modelValue,()=>{n=!1,Y()},{deep:!0}),watch(()=>u.value,pe=>{isEqual(pe,t.modelValue)||(r(UPDATE_MODEL_EVENT,pe),r(CHANGE_EVENT,pe))}),onBeforeUpdate(()=>d.value=[]),onMounted(()=>!isEmpty(t.modelValue)&&Y()),{ns:o,menuList:d,menus:c,checkedNodes:v,handleKeyDown:ze,handleCheckChange:A,getFlattedNodes:Ce,getCheckedNodes:ie,clearCheckedNodes:Oe,calculateCheckedValue:he,scrollToExpandingNode:Fe}}});function _sfc_render$e(t,r,e,n,o,s){const a=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:r[0]||(r[0]=(...i)=>t.handleKeyDown&&t.handleKeyDown(...i))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menus,(i,d)=>(openBlock(),createBlock(a,{key:d,ref_for:!0,ref:u=>t.menuList[d]=u,index:d,nodes:[...i]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc(_sfc_main$H,[["render",_sfc_render$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);CascaderPanel.install=t=>{t.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,tagProps=buildProps({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:componentSizes,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},__default__$o=defineComponent({name:"ElTag"}),_sfc_main$G=defineComponent({...__default__$o,props:tagProps,emits:tagEmits,setup(t,{emit:r}){const e=t,n=useFormSize(),o=useNamespace("tag"),s=computed(()=>{const{type:d,hit:u,effect:c,closable:m,round:v}=e;return[o.b(),o.is("closable",m),o.m(d),o.m(n.value),o.m(c),o.is("hit",u),o.is("round",v)]}),a=d=>{r("close",d)},i=d=>{r("click",d)};return(d,u)=>d.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(s)),style:normalizeStyle({backgroundColor:d.color}),onClick:i},[createBaseVNode("span",{class:normalizeClass(unref(o).e("content"))},[renderSlot(d.$slots,"default")],2),d.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(o).e("close")),onClick:withModifiers(a,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(o).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(s)),style:normalizeStyle({backgroundColor:d.color}),onClick:i},[createBaseVNode("span",{class:normalizeClass(unref(o).e("content"))},[renderSlot(d.$slots,"default")],2),d.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(o).e("close")),onClick:withModifiers(a,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc(_sfc_main$G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(t,r)=>t.text.includes(r)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:t=>!!t||t===null,[CHANGE_EVENT]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>isBoolean$1(t),expandChange:t=>!!t,removeTag:t=>!!t},_hoisted_1$j={key:0},_hoisted_2$e=["placeholder","onKeydown"],_hoisted_3$a=["onClick"],COMPONENT_NAME$3="ElCascader",__default__$n=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$F=defineComponent({...__default__$n,props:cascaderProps,emits:cascaderEmits,setup(t,{expose:r,emit:e}){const n=t,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Jr})=>{const{modifiersData:Fr,placement:Wn}=Jr;["right","left","bottom","top"].includes(Wn)||(Fr.arrow.x=35)},requires:["arrow"]}]},s=useAttrs$1();let a=0,i=0;const d=useNamespace("cascader"),u=useNamespace("input"),{t:c}=useLocale(),{form:m,formItem:v}=useFormItem(),g=ref(null),b=ref(null),T=ref(null),k=ref(null),y=ref(null),A=ref(!1),V=ref(!1),Ce=ref(!1),ie=ref(!1),Oe=ref(""),he=ref(""),Y=ref([]),ae=ref([]),Fe=ref([]),ze=ref(!1),pe=computed(()=>s.style),le=computed(()=>n.disabled||(m==null?void 0:m.disabled)),xe=computed(()=>n.placeholder||c("el.cascader.placeholder")),ue=computed(()=>he.value||Y.value.length>0||ze.value?"":xe.value),Ve=useFormSize(),Ue=computed(()=>["small"].includes(Ve.value)?"small":"default"),er=computed(()=>!!n.props.multiple),At=computed(()=>!n.filterable||er.value),ur=computed(()=>er.value?he.value:Oe.value),pr=computed(()=>{var Jr;return((Jr=k.value)==null?void 0:Jr.checkedNodes)||[]}),ar=computed(()=>!n.clearable||le.value||Ce.value||!V.value?!1:!!pr.value.length),hr=computed(()=>{const{showAllLevels:Jr,separator:Fr}=n,Wn=pr.value;return Wn.length?er.value?"":Wn[0].calcText(Jr,Fr):""}),Ne=computed({get(){return cloneDeep(n.modelValue)},set(Jr){e(UPDATE_MODEL_EVENT,Jr),e(CHANGE_EVENT,Jr),n.validateEvent&&(v==null||v.validate("change").catch(Fr=>void 0))}}),or=computed(()=>[d.b(),d.m(Ve.value),d.is("disabled",le.value),s.class]),ir=computed(()=>[u.e("icon"),"icon-arrow-down",d.is("reverse",A.value)]),$e=computed(()=>d.is("focus",A.value||ie.value)),tr=computed(()=>{var Jr,Fr;return(Fr=(Jr=g.value)==null?void 0:Jr.popperRef)==null?void 0:Fr.contentRef}),nr=Jr=>{var Fr,Wn,ho;le.value||(Jr=Jr??!A.value,Jr!==A.value&&(A.value=Jr,(Wn=(Fr=b.value)==null?void 0:Fr.input)==null||Wn.setAttribute("aria-expanded",`${Jr}`),Jr?(Pt(),nextTick((ho=k.value)==null?void 0:ho.scrollToExpandingNode)):n.filterable&&Or(),e("visibleChange",Jr)))},Pt=()=>{nextTick(()=>{var Jr;(Jr=g.value)==null||Jr.updatePopper()})},Et=()=>{Ce.value=!1},kt=Jr=>{const{showAllLevels:Fr,separator:Wn}=n;return{node:Jr,key:Jr.uid,text:Jr.calcText(Fr,Wn),hitState:!1,closable:!le.value&&!Jr.isDisabled,isCollapseTag:!1}},rr=Jr=>{var Fr;const Wn=Jr.node;Wn.doCheck(!1),(Fr=k.value)==null||Fr.calculateCheckedValue(),e("removeTag",Wn.valueByOption)},cr=()=>{if(!er.value)return;const Jr=pr.value,Fr=[],Wn=[];if(Jr.forEach(ho=>Wn.push(kt(ho))),ae.value=Wn,Jr.length){Jr.slice(0,n.maxCollapseTags).forEach(uo=>Fr.push(kt(uo)));const ho=Jr.slice(n.maxCollapseTags),bo=ho.length;bo&&(n.collapseTags?Fr.push({key:-1,text:`+ ${bo}`,closable:!1,isCollapseTag:!0}):ho.forEach(uo=>Fr.push(kt(uo))))}Y.value=Fr},mr=()=>{var Jr,Fr;const{filterMethod:Wn,showAllLevels:ho,separator:bo}=n,uo=(Fr=(Jr=k.value)==null?void 0:Jr.getFlattedNodes(!n.props.checkStrictly))==null?void 0:Fr.filter(po=>po.isDisabled?!1:(po.calcText(ho,bo),Wn(po,ur.value)));er.value&&(Y.value.forEach(po=>{po.hitState=!1}),ae.value.forEach(po=>{po.hitState=!1})),Ce.value=!0,Fe.value=uo,Pt()},yr=()=>{var Jr;let Fr;Ce.value&&y.value?Fr=y.value.$el.querySelector(`.${d.e("suggestion-item")}`):Fr=(Jr=k.value)==null?void 0:Jr.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`),Fr&&(Fr.focus(),!Ce.value&&Fr.click())},Tr=()=>{var Jr,Fr;const Wn=(Jr=b.value)==null?void 0:Jr.input,ho=T.value,bo=(Fr=y.value)==null?void 0:Fr.$el;if(!(!isClient||!Wn)){if(bo){const uo=bo.querySelector(`.${d.e("suggestion-list")}`);uo.style.minWidth=`${Wn.offsetWidth}px`}if(ho){const{offsetHeight:uo}=ho,po=Y.value.length>0?`${Math.max(uo+6,a)}px`:`${a}px`;Wn.style.height=po,Pt()}}},Ir=Jr=>{var Fr;return(Fr=k.value)==null?void 0:Fr.getCheckedNodes(Jr)},kr=Jr=>{Pt(),e("expandChange",Jr)},Ar=Jr=>{var Fr;const Wn=(Fr=Jr.target)==null?void 0:Fr.value;if(Jr.type==="compositionend")ze.value=!1,nextTick(()=>Yn(Wn));else{const ho=Wn[Wn.length-1]||"";ze.value=!isKorean(ho)}},Rr=Jr=>{if(!ze.value)switch(Jr.code){case EVENT_CODE.enter:nr();break;case EVENT_CODE.down:nr(!0),nextTick(yr),Jr.preventDefault();break;case EVENT_CODE.esc:A.value===!0&&(Jr.preventDefault(),Jr.stopPropagation(),nr(!1));break;case EVENT_CODE.tab:nr(!1);break}},Mn=()=>{var Jr;(Jr=k.value)==null||Jr.clearCheckedNodes(),!A.value&&n.filterable&&Or(),nr(!1)},Or=()=>{const{value:Jr}=hr;Oe.value=Jr,he.value=Jr},Pr=Jr=>{var Fr,Wn;const{checked:ho}=Jr;er.value?(Fr=k.value)==null||Fr.handleCheckChange(Jr,!ho,!1):(!ho&&((Wn=k.value)==null||Wn.handleCheckChange(Jr,!0,!1)),nr(!1))},Nr=Jr=>{const Fr=Jr.target,{code:Wn}=Jr;switch(Wn){case EVENT_CODE.up:case EVENT_CODE.down:{const ho=Wn===EVENT_CODE.up?-1:1;focusNode(getSibling(Fr,ho,`.${d.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:Fr.click();break}},Wr=()=>{const Jr=Y.value,Fr=Jr[Jr.length-1];i=he.value?0:i+1,!(!Fr||!i||n.collapseTags&&Jr.length>1)&&(Fr.hitState?rr(Fr):Fr.hitState=!0)},Yr=Jr=>{const Fr=Jr.target,Wn=d.e("search-input");Fr.className===Wn&&(ie.value=!0),e("focus",Jr)},Ur=Jr=>{ie.value=!1,e("blur",Jr)},qr=debounce(()=>{const{value:Jr}=ur;if(!Jr)return;const Fr=n.beforeFilter(Jr);isPromise(Fr)?Fr.then(mr).catch(()=>{}):Fr!==!1?mr():Et()},n.debounce),Yn=(Jr,Fr)=>{!A.value&&nr(!0),!(Fr!=null&&Fr.isComposing)&&(Jr?qr():Et())},$n=Jr=>Number.parseFloat(useCssVar(u.cssVarName("input-height"),Jr).value)-2;return watch(Ce,Pt),watch([pr,le],cr),watch(Y,()=>{nextTick(()=>Tr())}),watch(Ve,async()=>{await nextTick();const Jr=b.value.input;a=$n(Jr)||a,Tr()}),watch(hr,Or,{immediate:!0}),onMounted(()=>{const Jr=b.value.input,Fr=$n(Jr);a=Jr.offsetHeight||Fr,useResizeObserver(Jr,Tr)}),r({getCheckedNodes:Ir,cascaderPanelRef:k,togglePopperVisible:nr,contentRef:tr}),(Jr,Fr)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:g,visible:A.value,teleported:Jr.teleported,"popper-class":[unref(d).e("dropdown"),Jr.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(d).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Et},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(or)),style:normalizeStyle(unref(pe)),onClick:Fr[5]||(Fr[5]=()=>nr(unref(At)?void 0:!0)),onKeydown:Rr,onMouseenter:Fr[6]||(Fr[6]=Wn=>V.value=!0),onMouseleave:Fr[7]||(Fr[7]=Wn=>V.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:b,modelValue:Oe.value,"onUpdate:modelValue":Fr[1]||(Fr[1]=Wn=>Oe.value=Wn),placeholder:unref(ue),readonly:unref(At),disabled:unref(le),"validate-event":!1,size:unref(Ve),class:normalizeClass(unref($e)),tabindex:unref(er)&&Jr.filterable&&!unref(le)?-1:void 0,onCompositionstart:Ar,onCompositionupdate:Ar,onCompositionend:Ar,onFocus:Yr,onBlur:Ur,onInput:Yn},{suffix:withCtx(()=>[unref(ar)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(u).e("icon"),"icon-circle-close"]),onClick:withModifiers(Mn,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(ir)),onClick:Fr[0]||(Fr[0]=withModifiers(Wn=>nr(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(er)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:T,class:normalizeClass(unref(d).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Y.value,Wn=>(openBlock(),createBlock(unref(ElTag),{key:Wn.key,type:Jr.tagType,size:unref(Ue),hit:Wn.hitState,closable:Wn.closable,"disable-transitions":"",onClose:ho=>rr(Wn)},{default:withCtx(()=>[Wn.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$j,toDisplayString(Wn.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:A.value||!Jr.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Wn.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(d).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ae.value.slice(Jr.maxCollapseTags),(ho,bo)=>(openBlock(),createElementBlock("div",{key:bo,class:normalizeClass(unref(d).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:ho.key,class:"in-tooltip",type:Jr.tagType,size:unref(Ue),hit:ho.hitState,closable:ho.closable,"disable-transitions":"",onClose:uo=>rr(ho)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(ho.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),Jr.filterable&&!unref(le)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":Fr[2]||(Fr[2]=Wn=>he.value=Wn),type:"text",class:normalizeClass(unref(d).e("search-input")),placeholder:unref(hr)?"":unref(xe),onInput:Fr[3]||(Fr[3]=Wn=>Yn(he.value,Wn)),onClick:Fr[4]||(Fr[4]=withModifiers(Wn=>nr(!0),["stop"])),onKeydown:withKeys(Wr,["delete"]),onCompositionstart:Ar,onCompositionupdate:Ar,onCompositionend:Ar,onFocus:Yr,onBlur:Ur},null,42,_hoisted_2$e)),[[vModelText,he.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>nr(!1),unref(tr)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:k,modelValue:unref(Ne),"onUpdate:modelValue":Fr[8]||(Fr[8]=Wn=>isRef(Ne)?Ne.value=Wn:null),options:Jr.options,props:n.props,border:!1,"render-label":Jr.$slots.default,onExpandChange:kr,onClose:Fr[9]||(Fr[9]=Wn=>Jr.$nextTick(()=>nr(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ce.value]]),Jr.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:y,tag:"ul",class:normalizeClass(unref(d).e("suggestion-panel")),"view-class":unref(d).e("suggestion-list"),onKeydown:Nr},{default:withCtx(()=>[Fe.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(Fe.value,Wn=>(openBlock(),createElementBlock("li",{key:Wn.uid,class:normalizeClass([unref(d).e("suggestion-item"),unref(d).is("checked",Wn.checked)]),tabindex:-1,onClick:ho=>Pr(Wn)},[createBaseVNode("span",null,toDisplayString(Wn.text),1),Wn.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$a))),128)):renderSlot(Jr.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(d).e("empty-text"))},toDisplayString(unref(c)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ce.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc(_sfc_main$F,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Cascader.install=t=>{t.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$m=defineComponent({name:"ElRow"}),_sfc_main$E=defineComponent({...__default__$m,props:rowProps,setup(t){const r=t,e=useNamespace("row"),n=computed(()=>r.gutter);provide(rowContextKey,{gutter:n});const o=computed(()=>{const a={};return r.gutter&&(a.marginRight=a.marginLeft=`-${r.gutter/2}px`),a}),s=computed(()=>[e.b(),e.is(`justify-${r.justify}`,r.justify!=="start"),e.is(`align-${r.align}`,!!r.align)]);return(a,i)=>(openBlock(),createBlock(resolveDynamicComponent(a.tag),{class:normalizeClass(unref(s)),style:normalizeStyle(unref(o))},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc(_sfc_main$E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$l=defineComponent({name:"ElCol"}),_sfc_main$D=defineComponent({...__default__$l,props:colProps,setup(t){const r=t,{gutter:e}=inject(rowContextKey,{gutter:computed(()=>0)}),n=useNamespace("col"),o=computed(()=>{const a={};return e.value&&(a.paddingLeft=a.paddingRight=`${e.value/2}px`),a}),s=computed(()=>{const a=[];return["span","offset","pull","push"].forEach(u=>{const c=r[u];isNumber$1(c)&&(u==="span"?a.push(n.b(`${r[u]}`)):c>0&&a.push(n.b(`${u}-${r[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{isNumber$1(r[u])?a.push(n.b(`${u}-${r[u]}`)):isObject$2(r[u])&&Object.entries(r[u]).forEach(([c,m])=>{a.push(c!=="span"?n.b(`${u}-${c}-${m}`):n.b(`${u}-${m}`))})}),e.value&&a.push(n.is("guttered")),[n.b(),a]});return(a,i)=>(openBlock(),createBlock(resolveDynamicComponent(a.tag),{class:normalizeClass(unref(s)),style:normalizeStyle(unref(o))},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc(_sfc_main$D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=t=>typeof isNumber$1(t),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(t,r)=>{const e=ref(castArray$1(t.modelValue)),n=s=>{e.value=s;const a=t.accordion?e.value[0]:e.value;r(UPDATE_MODEL_EVENT,a),r(CHANGE_EVENT,a)},o=s=>{if(t.accordion)n([e.value[0]===s?"":s]);else{const a=[...e.value],i=a.indexOf(s);i>-1?a.splice(i,1):a.push(s),n(a)}};return watch(()=>t.modelValue,()=>e.value=castArray$1(t.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:e,handleItemClick:o}),{activeNames:e,setActiveNames:n}},useCollapseDOM=()=>{const t=useNamespace("collapse");return{rootKls:computed(()=>t.b())}},__default__$k=defineComponent({name:"ElCollapse"}),_sfc_main$C=defineComponent({...__default__$k,props:collapseProps,emits:collapseEmits,setup(t,{expose:r,emit:e}){const n=t,{activeNames:o,setActiveNames:s}=useCollapse(n,e),{rootKls:a}=useCollapseDOM();return r({activeNames:o,setActiveNames:s}),(i,d)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(a)),role:"tablist","aria-multiselectable":"true"},[renderSlot(i.$slots,"default")],2))}});var Collapse=_export_sfc(_sfc_main$C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const __default__$j=defineComponent({name:"ElCollapseTransition"}),_sfc_main$B=defineComponent({...__default__$j,setup(t){const r=useNamespace("collapse-transition"),e=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},n={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){o.dataset.oldOverflow=o.style.overflow,o.scrollHeight!==0?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){e(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight=`${o.scrollHeight}px`,o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){e(o)},leaveCancelled(o){e(o)}};return(o,s)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(r).b()},toHandlers(n)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc(_sfc_main$B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);CollapseTransition.install=t=>{t.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:()=>generateId()},disabled:Boolean}),useCollapseItem=t=>{const r=inject(collapseContextKey),e=ref(!1),n=ref(!1),o=ref(generateId()),s=computed(()=>r==null?void 0:r.activeNames.value.includes(t.name));return{focusing:e,id:o,isActive:s,handleFocus:()=>{setTimeout(()=>{n.value?n.value=!1:e.value=!0},50)},handleHeaderClick:()=>{t.disabled||(r==null||r.handleItemClick(t.name),e.value=!1,n.value=!0)},handleEnterClick:()=>{r==null||r.handleItemClick(t.name)}}},useCollapseItemDOM=(t,{focusing:r,isActive:e,id:n})=>{const o=useNamespace("collapse"),s=computed(()=>[o.b("item"),o.is("active",unref(e)),o.is("disabled",t.disabled)]),a=computed(()=>[o.be("item","header"),o.is("active",unref(e)),{focusing:unref(r)&&!t.disabled}]),i=computed(()=>[o.be("item","arrow"),o.is("active",unref(e))]),d=computed(()=>o.be("item","wrap")),u=computed(()=>o.be("item","content")),c=computed(()=>o.b(`content-${unref(n)}`)),m=computed(()=>o.b(`head-${unref(n)}`));return{arrowKls:i,headKls:a,rootKls:s,itemWrapperKls:d,itemContentKls:u,scopedContentId:c,scopedHeadId:m}},_hoisted_1$i=["aria-expanded","aria-controls","aria-describedby"],_hoisted_2$d=["id","tabindex"],_hoisted_3$9=["id","aria-hidden","aria-labelledby"],__default__$i=defineComponent({name:"ElCollapseItem"}),_sfc_main$A=defineComponent({...__default__$i,props:collapseItemProps,setup(t,{expose:r}){const e=t,{focusing:n,id:o,isActive:s,handleFocus:a,handleHeaderClick:i,handleEnterClick:d}=useCollapseItem(e),{arrowKls:u,headKls:c,rootKls:m,itemWrapperKls:v,itemContentKls:g,scopedContentId:b,scopedHeadId:T}=useCollapseItemDOM(e,{focusing:n,isActive:s,id:o});return r({isActive:s}),(k,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(m))},[createBaseVNode("div",{role:"tab","aria-expanded":unref(s),"aria-controls":unref(b),"aria-describedby":unref(b)},[createBaseVNode("div",{id:unref(T),class:normalizeClass(unref(c)),role:"button",tabindex:k.disabled?-1:0,onClick:y[0]||(y[0]=(...A)=>unref(i)&&unref(i)(...A)),onKeypress:y[1]||(y[1]=withKeys(withModifiers((...A)=>unref(d)&&unref(d)(...A),["stop","prevent"]),["space","enter"])),onFocus:y[2]||(y[2]=(...A)=>unref(a)&&unref(a)(...A)),onBlur:y[3]||(y[3]=A=>n.value=!1)},[renderSlot(k.$slots,"title",{},()=>[createTextVNode(toDisplayString(k.title),1)]),createVNode(unref(ElIcon),{class:normalizeClass(unref(u))},{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1},8,["class"])],42,_hoisted_2$d)],8,_hoisted_1$i),createVNode(unref(_CollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(b),class:normalizeClass(unref(v)),role:"tabpanel","aria-hidden":!unref(s),"aria-labelledby":unref(T)},[createBaseVNode("div",{class:normalizeClass(unref(g))},[renderSlot(k.$slots,"default")],2)],10,_hoisted_3$9),[[vShow,unref(s)]])]),_:3})],2))}});var CollapseItem=_export_sfc(_sfc_main$A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),__default__$h=defineComponent({name:"ElContainer"}),_sfc_main$z=defineComponent({...__default__$h,props:{direction:{type:String}},setup(t){const r=t,e=useSlots(),n=useNamespace("container"),o=computed(()=>r.direction==="vertical"?!0:r.direction==="horizontal"?!1:e&&e.default?e.default().some(a=>{const i=a.type.name;return i==="ElHeader"||i==="ElFooter"}):!1);return(s,a)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(n).b(),unref(n).is("vertical",unref(o))])},[renderSlot(s.$slots,"default")],2))}});var Container=_export_sfc(_sfc_main$z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const __default__$g=defineComponent({name:"ElAside"}),_sfc_main$y=defineComponent({...__default__$g,props:{width:{type:String,default:null}},setup(t){const r=t,e=useNamespace("aside"),n=computed(()=>r.width?e.cssVarBlock({width:r.width}):{});return(o,s)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Aside=_export_sfc(_sfc_main$y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const __default__$f=defineComponent({name:"ElFooter"}),_sfc_main$x=defineComponent({...__default__$f,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("footer"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(o,s)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Footer=_export_sfc(_sfc_main$x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const __default__$e=defineComponent({name:"ElHeader"}),_sfc_main$w=defineComponent({...__default__$e,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("header"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(o,s)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(o.$slots,"default")],6))}});var Header=_export_sfc(_sfc_main$w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const __default__$d=defineComponent({name:"ElMain"}),_sfc_main$v=defineComponent({...__default__$d,setup(t){const r=useNamespace("main");return(e,n)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(r).b())},[renderSlot(e.$slots,"default")],2))}});var Main=_export_sfc(_sfc_main$v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer,Header,Main});withNoopInstall(Aside);const ElFooter=withNoopInstall(Footer),ElHeader=withNoopInstall(Header),ElMain=withNoopInstall(Main),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:t=>t instanceof MouseEvent},BLOCK="overlay";var Overlay=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(t,{slots:r,emit:e}){const n=useNamespace(BLOCK),o=d=>{e("click",d)},{onClick:s,onMousedown:a,onMouseup:i}=useSameTarget(t.customMaskEvent?void 0:o);return()=>t.mask?createVNode("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:s,onMousedown:a,onMouseup:i},[renderSlot(r,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(r,"default")])}});const ElOverlay=Overlay,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$h=["aria-level"],_hoisted_2$c=["aria-label"],_hoisted_3$8=["id"],__default__$c=defineComponent({name:"ElDialogContent"}),_sfc_main$u=defineComponent({...__default__$c,props:dialogContentProps,emits:dialogContentEmits,setup(t){const r=t,{t:e}=useLocale(),{Close:n}=CloseComponents,{dialogRef:o,headerRef:s,bodyId:a,ns:i,style:d}=inject(dialogInjectionKey),{focusTrapRef:u}=inject(FOCUS_TRAP_INJECTION_KEY),c=computed(()=>[i.b(),i.is("fullscreen",r.fullscreen),i.is("draggable",r.draggable),i.is("align-center",r.alignCenter),{[i.m("center")]:r.center},r.customClass]),m=composeRefs(u,o),v=computed(()=>r.draggable);return useDraggable(o,s,v),(g,b)=>(openBlock(),createElementBlock("div",{ref:unref(m),class:normalizeClass(unref(c)),style:normalizeStyle(unref(d)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:s,class:normalizeClass(unref(i).e("header"))},[renderSlot(g.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":g.ariaLevel,class:normalizeClass(unref(i).e("title"))},toDisplayString(g.title),11,_hoisted_1$h)]),g.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(e)("el.dialog.close"),class:normalizeClass(unref(i).e("headerbtn")),type:"button",onClick:b[0]||(b[0]=T=>g.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(i).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.closeIcon||unref(n))))]),_:1},8,["class"])],10,_hoisted_2$c)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(a),class:normalizeClass(unref(i).e("body"))},[renderSlot(g.$slots,"default")],10,_hoisted_3$8),g.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(i).e("footer"))},[renderSlot(g.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc(_sfc_main$u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(t,r)=>{const n=getCurrentInstance().emit,{nextZIndex:o}=useZIndex();let s="";const a=useId(),i=useId(),d=ref(!1),u=ref(!1),c=ref(!1),m=ref(t.zIndex||o());let v,g;const b=useGlobalConfig("namespace",defaultNamespace),T=computed(()=>{const xe={},ue=`--${b.value}-dialog`;return t.fullscreen||(t.top&&(xe[`${ue}-margin-top`]=t.top),t.width&&(xe[`${ue}-width`]=addUnit(t.width))),xe}),k=computed(()=>t.alignCenter?{display:"flex"}:{});function y(){n("opened")}function A(){n("closed"),n(UPDATE_MODEL_EVENT,!1),t.destroyOnClose&&(c.value=!1)}function V(){n("close")}function Ce(){g==null||g(),v==null||v(),t.openDelay&&t.openDelay>0?{stop:v}=useTimeoutFn(()=>Y(),t.openDelay):Y()}function ie(){v==null||v(),g==null||g(),t.closeDelay&&t.closeDelay>0?{stop:g}=useTimeoutFn(()=>ae(),t.closeDelay):ae()}function Oe(){function xe(ue){ue||(u.value=!0,d.value=!1)}t.beforeClose?t.beforeClose(xe):ie()}function he(){t.closeOnClickModal&&Oe()}function Y(){isClient&&(d.value=!0)}function ae(){d.value=!1}function Fe(){n("openAutoFocus")}function ze(){n("closeAutoFocus")}function pe(xe){var ue;((ue=xe.detail)==null?void 0:ue.focusReason)==="pointer"&&xe.preventDefault()}t.lockScroll&&useLockscreen(d);function le(){t.closeOnPressEscape&&Oe()}return watch(()=>t.modelValue,xe=>{xe?(u.value=!1,Ce(),c.value=!0,m.value=t.zIndex?m.value++:o(),nextTick(()=>{n("open"),r.value&&(r.value.scrollTop=0)})):d.value&&ie()}),watch(()=>t.fullscreen,xe=>{r.value&&(xe?(s=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=s)}),onMounted(()=>{t.modelValue&&(d.value=!0,c.value=!0,Ce())}),{afterEnter:y,afterLeave:A,beforeLeave:V,handleClose:Oe,onModalClick:he,close:ie,doClose:ae,onOpenAutoFocus:Fe,onCloseAutoFocus:ze,onCloseRequested:le,onFocusoutPrevented:pe,titleId:a,bodyId:i,closed:u,style:T,overlayDialogStyle:k,rendered:c,visible:d,zIndex:m}},_hoisted_1$g=["aria-label","aria-labelledby","aria-describedby"],__default__$b=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$t=defineComponent({...__default__$b,props:dialogProps,emits:dialogEmits,setup(t,{expose:r}){const e=t,n=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!n.title)),useDeprecated({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},computed(()=>!!e.customClass));const o=useNamespace("dialog"),s=ref(),a=ref(),i=ref(),{visible:d,titleId:u,bodyId:c,style:m,overlayDialogStyle:v,rendered:g,zIndex:b,afterEnter:T,afterLeave:k,beforeLeave:y,handleClose:A,onModalClick:V,onOpenAutoFocus:Ce,onCloseAutoFocus:ie,onCloseRequested:Oe,onFocusoutPrevented:he}=useDialog(e,s);provide(dialogInjectionKey,{dialogRef:s,headerRef:a,bodyId:c,ns:o,rendered:g,style:m});const Y=useSameTarget(V),ae=computed(()=>e.draggable&&!e.fullscreen);return r({visible:d,dialogContentRef:i}),(Fe,ze)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!Fe.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(T),onAfterLeave:unref(k),onBeforeLeave:unref(y),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:Fe.modal,"overlay-class":Fe.modalClass,"z-index":unref(b)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":Fe.title||void 0,"aria-labelledby":Fe.title?void 0:unref(u),"aria-describedby":unref(c),class:normalizeClass(`${unref(o).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(v)),onClick:ze[0]||(ze[0]=(...pe)=>unref(Y).onClick&&unref(Y).onClick(...pe)),onMousedown:ze[1]||(ze[1]=(...pe)=>unref(Y).onMousedown&&unref(Y).onMousedown(...pe)),onMouseup:ze[2]||(ze[2]=(...pe)=>unref(Y).onMouseup&&unref(Y).onMouseup(...pe))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(d),"focus-start-el":"container",onFocusAfterTrapped:unref(Ce),onFocusAfterReleased:unref(ie),onFocusoutPrevented:unref(he),onReleaseRequested:unref(Oe)},{default:withCtx(()=>[unref(g)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:i},Fe.$attrs,{"custom-class":Fe.customClass,center:Fe.center,"align-center":Fe.alignCenter,"close-icon":Fe.closeIcon,draggable:unref(ae),fullscreen:Fe.fullscreen,"show-close":Fe.showClose,title:Fe.title,"aria-level":Fe.headerAriaLevel,onClose:unref(A)}),createSlots({header:withCtx(()=>[Fe.$slots.title?renderSlot(Fe.$slots,"title",{key:1}):renderSlot(Fe.$slots,"header",{key:0,close:unref(A),titleId:unref(u),titleClass:unref(o).e("title")})]),default:withCtx(()=>[renderSlot(Fe.$slots,"default")]),_:2},[Fe.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(Fe.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$g)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Dialog=_export_sfc(_sfc_main$t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ElDialog=withInstall(Dialog),_sfc_main$s=defineComponent({inheritAttrs:!1});function _sfc_render$d(t,r,e,n,o,s){return renderSlot(t.$slots,"default")}var Collection=_export_sfc(_sfc_main$s,[["render",_sfc_render$d],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const _sfc_main$r=defineComponent({name:"ElCollectionItem",inheritAttrs:!1});function _sfc_render$c(t,r,e,n,o,s){return renderSlot(t.$slots,"default")}var CollectionItem=_export_sfc(_sfc_main$r,[["render",_sfc_render$c],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const COLLECTION_ITEM_SIGN="data-el-collection-item",createCollectionWithScope=t=>{const r=`El${t}Collection`,e=`${r}Item`,n=Symbol(r),o=Symbol(e),s={...Collection,name:r,setup(){const i=ref(null),d=new Map;provide(n,{itemMap:d,getItems:()=>{const c=unref(i);if(!c)return[];const m=Array.from(c.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`));return[...d.values()].sort((g,b)=>m.indexOf(g.ref)-m.indexOf(b.ref))},collectionRef:i})}},a={...CollectionItem,name:e,setup(i,{attrs:d}){const u=ref(null),c=inject(n,void 0);provide(o,{collectionItemRef:u}),onMounted(()=>{const m=unref(u);m&&c.itemMap.set(m,{ref:m,...d})}),onBeforeUnmount(()=>{const m=unref(u);c.itemMap.delete(m)})}};return{COLLECTION_INJECTION_KEY:n,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:s,ElCollectionItem:a}},rovingFocusGroupProps=buildProps({style:{type:definePropType([String,Array,Object])},currentTabId:{type:definePropType(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:definePropType(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ElCollection$1,ElCollectionItem:ElCollectionItem$1,COLLECTION_INJECTION_KEY:COLLECTION_INJECTION_KEY$1,COLLECTION_ITEM_INJECTION_KEY:COLLECTION_ITEM_INJECTION_KEY$1}=createCollectionWithScope("RovingFocusGroup"),ROVING_FOCUS_GROUP_INJECTION_KEY=Symbol("elRovingFocusGroup"),ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY=Symbol("elRovingFocusGroupItem"),MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},getDirectionAwareKey=(t,r)=>{if(r!=="rtl")return t;switch(t){case EVENT_CODE.right:return EVENT_CODE.left;case EVENT_CODE.left:return EVENT_CODE.right;default:return t}},getFocusIntent=(t,r,e)=>{const n=getDirectionAwareKey(t.key,e);if(!(r==="vertical"&&[EVENT_CODE.left,EVENT_CODE.right].includes(n))&&!(r==="horizontal"&&[EVENT_CODE.up,EVENT_CODE.down].includes(n)))return MAP_KEY_TO_FOCUS_INTENT[n]},reorderArray=(t,r)=>t.map((e,n)=>t[(n+r)%t.length]),focusFirst=t=>{const{activeElement:r}=document;for(const e of t)if(e===r||(e.focus(),r!==document.activeElement))return},CURRENT_TAB_ID_CHANGE_EVT="currentTabIdChange",ENTRY_FOCUS_EVT="rovingFocusGroup.entryFocus",EVT_OPTS={bubbles:!1,cancelable:!0},_sfc_main$q=defineComponent({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:rovingFocusGroupProps,emits:[CURRENT_TAB_ID_CHANGE_EVT,"entryFocus"],setup(t,{emit:r}){var e;const n=ref((e=t.currentTabId||t.defaultCurrentTabId)!=null?e:null),o=ref(!1),s=ref(!1),a=ref(null),{getItems:i}=inject(COLLECTION_INJECTION_KEY$1,void 0),d=computed(()=>[{outline:"none"},t.style]),u=T=>{r(CURRENT_TAB_ID_CHANGE_EVT,T)},c=()=>{o.value=!0},m=composeEventHandlers(T=>{var k;(k=t.onMousedown)==null||k.call(t,T)},()=>{s.value=!0}),v=composeEventHandlers(T=>{var k;(k=t.onFocus)==null||k.call(t,T)},T=>{const k=!unref(s),{target:y,currentTarget:A}=T;if(y===A&&k&&!unref(o)){const V=new Event(ENTRY_FOCUS_EVT,EVT_OPTS);if(A==null||A.dispatchEvent(V),!V.defaultPrevented){const Ce=i().filter(ae=>ae.focusable),ie=Ce.find(ae=>ae.active),Oe=Ce.find(ae=>ae.id===unref(n)),Y=[ie,Oe,...Ce].filter(Boolean).map(ae=>ae.ref);focusFirst(Y)}}s.value=!1}),g=composeEventHandlers(T=>{var k;(k=t.onBlur)==null||k.call(t,T)},()=>{o.value=!1}),b=(...T)=>{r("entryFocus",...T)};provide(ROVING_FOCUS_GROUP_INJECTION_KEY,{currentTabbedId:readonly(n),loop:toRef(t,"loop"),tabIndex:computed(()=>unref(o)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:d,orientation:toRef(t,"orientation"),dir:toRef(t,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:g,onFocus:v,onMousedown:m}),watch(()=>t.currentTabId,T=>{n.value=T??null}),useEventListener(a,ENTRY_FOCUS_EVT,b)}});function _sfc_render$b(t,r,e,n,o,s){return renderSlot(t.$slots,"default")}var ElRovingFocusGroupImpl=_export_sfc(_sfc_main$q,[["render",_sfc_render$b],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const _sfc_main$p=defineComponent({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ElCollection$1,ElRovingFocusGroupImpl}});function _sfc_render$a(t,r,e,n,o,s){const a=resolveComponent("el-roving-focus-group-impl"),i=resolveComponent("el-focus-group-collection");return openBlock(),createBlock(i,null,{default:withCtx(()=>[createVNode(a,normalizeProps(guardReactiveProps(t.$attrs)),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16)]),_:3})}var ElRovingFocusGroup=_export_sfc(_sfc_main$p,[["render",_sfc_render$a],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const _sfc_main$o=defineComponent({components:{ElRovingFocusCollectionItem:ElCollectionItem$1},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:r}){const{currentTabbedId:e,loop:n,onItemFocus:o,onItemShiftTab:s}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{getItems:a}=inject(COLLECTION_INJECTION_KEY$1,void 0),i=useId(),d=ref(null),u=composeEventHandlers(g=>{r("mousedown",g)},g=>{t.focusable?o(unref(i)):g.preventDefault()}),c=composeEventHandlers(g=>{r("focus",g)},()=>{o(unref(i))}),m=composeEventHandlers(g=>{r("keydown",g)},g=>{const{key:b,shiftKey:T,target:k,currentTarget:y}=g;if(b===EVENT_CODE.tab&&T){s();return}if(k!==y)return;const A=getFocusIntent(g);if(A){g.preventDefault();let Ce=a().filter(ie=>ie.focusable).map(ie=>ie.ref);switch(A){case"last":{Ce.reverse();break}case"prev":case"next":{A==="prev"&&Ce.reverse();const ie=Ce.indexOf(y);Ce=n.value?reorderArray(Ce,ie+1):Ce.slice(ie+1);break}}nextTick(()=>{focusFirst(Ce)})}}),v=computed(()=>e.value===unref(i));return provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,{rovingFocusGroupItemRef:d,tabIndex:computed(()=>unref(v)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:m}),{id:i,handleKeydown:m,handleFocus:c,handleMousedown:u}}});function _sfc_render$9(t,r,e,n,o,s){const a=resolveComponent("el-roving-focus-collection-item");return openBlock(),createBlock(a,{id:t.id,focusable:t.focusable,active:t.active},{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var ElRovingFocusItem=_export_sfc(_sfc_main$o,[["render",_sfc_render$9],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const dropdownProps=buildProps({trigger:useTooltipTriggerProps.trigger,effect:{...useTooltipContentProps.effect,default:"light"},type:{type:definePropType(String)},placement:{type:definePropType(String),default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:definePropType([Number,String]),default:0},maxHeight:{type:definePropType([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:definePropType(Object)},teleported:useTooltipContentProps.teleported}),dropdownItemProps=buildProps({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:iconPropType}}),dropdownMenuProps=buildProps({onKeydown:{type:definePropType(Function)}}),FIRST_KEYS=[EVENT_CODE.down,EVENT_CODE.pageDown,EVENT_CODE.home],LAST_KEYS=[EVENT_CODE.up,EVENT_CODE.pageUp,EVENT_CODE.end],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],{ElCollection,ElCollectionItem,COLLECTION_INJECTION_KEY,COLLECTION_ITEM_INJECTION_KEY}=createCollectionWithScope("Dropdown"),DROPDOWN_INJECTION_KEY=Symbol("elDropdown"),{ButtonGroup:ElButtonGroup}=ElButton,_sfc_main$n=defineComponent({name:"ElDropdown",components:{ElButton,ElButtonGroup,ElScrollbar,ElDropdownCollection:ElCollection,ElTooltip,ElRovingFocusGroup,ElOnlyChild:OnlyChild,ElIcon,ArrowDown:arrow_down_default},props:dropdownProps,emits:["visible-change","click","command"],setup(t,{emit:r}){const e=getCurrentInstance(),n=useNamespace("dropdown"),{t:o}=useLocale(),s=ref(),a=ref(),i=ref(null),d=ref(null),u=ref(null),c=ref(null),m=ref(!1),v=[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.down],g=computed(()=>({maxHeight:addUnit(t.maxHeight)})),b=computed(()=>[n.m(ie.value)]),T=computed(()=>castArray$1(t.trigger)),k=useId().value,y=computed(()=>t.id||k);watch([s,T],([Ue,er],[At])=>{var ur,pr,ar;(ur=At==null?void 0:At.$el)!=null&&ur.removeEventListener&&At.$el.removeEventListener("pointerenter",he),(pr=Ue==null?void 0:Ue.$el)!=null&&pr.removeEventListener&&Ue.$el.removeEventListener("pointerenter",he),(ar=Ue==null?void 0:Ue.$el)!=null&&ar.addEventListener&&er.includes("hover")&&Ue.$el.addEventListener("pointerenter",he)},{immediate:!0}),onBeforeUnmount(()=>{var Ue,er;(er=(Ue=s.value)==null?void 0:Ue.$el)!=null&&er.removeEventListener&&s.value.$el.removeEventListener("pointerenter",he)});function A(){V()}function V(){var Ue;(Ue=i.value)==null||Ue.onClose()}function Ce(){var Ue;(Ue=i.value)==null||Ue.onOpen()}const ie=useFormSize();function Oe(...Ue){r("command",...Ue)}function he(){var Ue,er;(er=(Ue=s.value)==null?void 0:Ue.$el)==null||er.focus()}function Y(){}function ae(){const Ue=unref(d);T.value.includes("hover")&&(Ue==null||Ue.focus()),c.value=null}function Fe(Ue){c.value=Ue}function ze(Ue){m.value||(Ue.preventDefault(),Ue.stopImmediatePropagation())}function pe(){r("visible-change",!0)}function le(Ue){(Ue==null?void 0:Ue.type)==="keydown"&&d.value.focus()}function xe(){r("visible-change",!1)}return provide(DROPDOWN_INJECTION_KEY,{contentRef:d,role:computed(()=>t.role),triggerId:y,isUsingKeyboard:m,onItemEnter:Y,onItemLeave:ae}),provide("elDropdown",{instance:e,dropdownSize:ie,handleClick:A,commandHandler:Oe,trigger:toRef(t,"trigger"),hideOnClick:toRef(t,"hideOnClick")}),{t:o,ns:n,scrollbar:u,wrapStyle:g,dropdownTriggerKls:b,dropdownSize:ie,triggerId:y,triggerKeys:v,currentTabId:c,handleCurrentTabIdChange:Fe,handlerMainButtonClick:Ue=>{r("click",Ue)},handleEntryFocus:ze,handleClose:V,handleOpen:Ce,handleBeforeShowTooltip:pe,handleShowTooltip:le,handleBeforeHideTooltip:xe,onFocusAfterTrapped:Ue=>{var er,At;Ue.preventDefault(),(At=(er=d.value)==null?void 0:er.focus)==null||At.call(er,{preventScroll:!0})},popperRef:i,contentRef:d,triggeringElementRef:s,referenceElementRef:a}}});function _sfc_render$8(t,r,e,n,o,s){var a;const i=resolveComponent("el-dropdown-collection"),d=resolveComponent("el-roving-focus-group"),u=resolveComponent("el-scrollbar"),c=resolveComponent("el-only-child"),m=resolveComponent("el-tooltip"),v=resolveComponent("el-button"),g=resolveComponent("arrow-down"),b=resolveComponent("el-icon"),T=resolveComponent("el-button-group");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b(),t.ns.is("disabled",t.disabled)])},[createVNode(m,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(a=t.referenceElementRef)==null?void 0:a.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:"",onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},createSlots({content:withCtx(()=>[createVNode(u,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:withCtx(()=>[createVNode(d,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:withCtx(()=>[createVNode(i,null,{default:withCtx(()=>[renderSlot(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:withCtx(()=>[createVNode(c,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(openBlock(),createBlock(T,{key:0},{default:withCtx(()=>[createVNode(v,mergeProps({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),createVNode(v,mergeProps({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:withCtx(()=>[createVNode(b,{class:normalizeClass(t.ns.e("icon"))},{default:withCtx(()=>[createVNode(g)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):createCommentVNode("v-if",!0)],2)}var Dropdown=_export_sfc(_sfc_main$n,[["render",_sfc_render$8],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const _sfc_main$m=defineComponent({name:"DropdownItemImpl",components:{ElIcon},props:dropdownItemProps,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:r}){const e=useNamespace("dropdown"),{role:n}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionItemRef:o}=inject(COLLECTION_ITEM_INJECTION_KEY,void 0),{collectionItemRef:s}=inject(COLLECTION_ITEM_INJECTION_KEY$1,void 0),{rovingFocusGroupItemRef:a,tabIndex:i,handleFocus:d,handleKeydown:u,handleMousedown:c}=inject(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,void 0),m=composeRefs(o,s,a),v=computed(()=>n.value==="menu"?"menuitem":n.value==="navigation"?"link":"button"),g=composeEventHandlers(b=>{const{code:T}=b;if(T===EVENT_CODE.enter||T===EVENT_CODE.space)return b.preventDefault(),b.stopImmediatePropagation(),r("clickimpl",b),!0},u);return{ns:e,itemRef:m,dataset:{[COLLECTION_ITEM_SIGN]:""},role:v,tabIndex:i,handleFocus:d,handleKeydown:g,handleMousedown:c}}}),_hoisted_1$f=["aria-disabled","tabindex","role"];function _sfc_render$7(t,r,e,n,o,s){const a=resolveComponent("el-icon");return openBlock(),createElementBlock(Fragment,null,[t.divided?(openBlock(),createElementBlock("li",mergeProps({key:0,role:"separator",class:t.ns.bem("menu","item","divided")},t.$attrs),null,16)):createCommentVNode("v-if",!0),createBaseVNode("li",mergeProps({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:r[0]||(r[0]=i=>t.$emit("clickimpl",i)),onFocus:r[1]||(r[1]=(...i)=>t.handleFocus&&t.handleFocus(...i)),onKeydown:r[2]||(r[2]=withModifiers((...i)=>t.handleKeydown&&t.handleKeydown(...i),["self"])),onMousedown:r[3]||(r[3]=(...i)=>t.handleMousedown&&t.handleMousedown(...i)),onPointermove:r[4]||(r[4]=i=>t.$emit("pointermove",i)),onPointerleave:r[5]||(r[5]=i=>t.$emit("pointerleave",i))}),[t.icon?(openBlock(),createBlock(a,{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.icon)))]),_:1})):createCommentVNode("v-if",!0),renderSlot(t.$slots,"default")],16,_hoisted_1$f)],64)}var ElDropdownItemImpl=_export_sfc(_sfc_main$m,[["render",_sfc_render$7],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const useDropdown=()=>{const t=inject("elDropdown",{}),r=computed(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:r}},_sfc_main$l=defineComponent({name:"ElDropdownItem",components:{ElDropdownCollectionItem:ElCollectionItem,ElRovingFocusItem,ElDropdownItemImpl},inheritAttrs:!1,props:dropdownItemProps,emits:["pointermove","pointerleave","click"],setup(t,{emit:r,attrs:e}){const{elDropdown:n}=useDropdown(),o=getCurrentInstance(),s=ref(null),a=computed(()=>{var g,b;return(b=(g=unref(s))==null?void 0:g.textContent)!=null?b:""}),{onItemEnter:i,onItemLeave:d}=inject(DROPDOWN_INJECTION_KEY,void 0),u=composeEventHandlers(g=>(r("pointermove",g),g.defaultPrevented),whenMouse(g=>{if(t.disabled){d(g);return}const b=g.currentTarget;b===document.activeElement||b.contains(document.activeElement)||(i(g),g.defaultPrevented||b==null||b.focus())})),c=composeEventHandlers(g=>(r("pointerleave",g),g.defaultPrevented),whenMouse(g=>{d(g)})),m=composeEventHandlers(g=>{if(!t.disabled)return r("click",g),g.type!=="keydown"&&g.defaultPrevented},g=>{var b,T,k;if(t.disabled){g.stopImmediatePropagation();return}(b=n==null?void 0:n.hideOnClick)!=null&&b.value&&((T=n.handleClick)==null||T.call(n)),(k=n.commandHandler)==null||k.call(n,t.command,o,g)}),v=computed(()=>({...t,...e}));return{handleClick:m,handlePointerMove:u,handlePointerLeave:c,textContent:a,propsAndAttrs:v}}});function _sfc_render$6(t,r,e,n,o,s){var a;const i=resolveComponent("el-dropdown-item-impl"),d=resolveComponent("el-roving-focus-item"),u=resolveComponent("el-dropdown-collection-item");return openBlock(),createBlock(u,{disabled:t.disabled,"text-value":(a=t.textValue)!=null?a:t.textContent},{default:withCtx(()=>[createVNode(d,{focusable:!t.disabled},{default:withCtx(()=>[createVNode(i,mergeProps(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var DropdownItem=_export_sfc(_sfc_main$l,[["render",_sfc_render$6],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const _sfc_main$k=defineComponent({name:"ElDropdownMenu",props:dropdownMenuProps,setup(t){const r=useNamespace("dropdown"),{_elDropdownSize:e}=useDropdown(),n=e.value,{focusTrapRef:o,onKeydown:s}=inject(FOCUS_TRAP_INJECTION_KEY,void 0),{contentRef:a,role:i,triggerId:d}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionRef:u,getItems:c}=inject(COLLECTION_INJECTION_KEY,void 0),{rovingFocusGroupRef:m,rovingFocusGroupRootStyle:v,tabIndex:g,onBlur:b,onFocus:T,onMousedown:k}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{collectionRef:y}=inject(COLLECTION_INJECTION_KEY$1,void 0),A=computed(()=>[r.b("menu"),r.bm("menu",n==null?void 0:n.value)]),V=composeRefs(a,u,o,m,y),Ce=composeEventHandlers(Oe=>{var he;(he=t.onKeydown)==null||he.call(t,Oe)},Oe=>{const{currentTarget:he,code:Y,target:ae}=Oe;if(he.contains(ae),EVENT_CODE.tab===Y&&Oe.stopImmediatePropagation(),Oe.preventDefault(),ae!==unref(a)||!FIRST_LAST_KEYS.includes(Y))return;const ze=c().filter(pe=>!pe.disabled).map(pe=>pe.ref);LAST_KEYS.includes(Y)&&ze.reverse(),focusFirst(ze)});return{size:n,rovingFocusGroupRootStyle:v,tabIndex:g,dropdownKls:A,role:i,triggerId:d,dropdownListWrapperRef:V,handleKeydown:Oe=>{Ce(Oe),s(Oe)},onBlur:b,onFocus:T,onMousedown:k}}}),_hoisted_1$e=["role","aria-labelledby"];function _sfc_render$5(t,r,e,n,o,s){return openBlock(),createElementBlock("ul",{ref:t.dropdownListWrapperRef,class:normalizeClass(t.dropdownKls),style:normalizeStyle(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:r[0]||(r[0]=(...a)=>t.onBlur&&t.onBlur(...a)),onFocus:r[1]||(r[1]=(...a)=>t.onFocus&&t.onFocus(...a)),onKeydown:r[2]||(r[2]=withModifiers((...a)=>t.handleKeydown&&t.handleKeydown(...a),["self"])),onMousedown:r[3]||(r[3]=withModifiers((...a)=>t.onMousedown&&t.onMousedown(...a),["self"]))},[renderSlot(t.$slots,"default")],46,_hoisted_1$e)}var DropdownMenu=_export_sfc(_sfc_main$k,[["render",_sfc_render$5],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const ElDropdown=withInstall(Dropdown,{DropdownItem,DropdownMenu}),ElDropdownItem=withNoopInstall(DropdownItem),ElDropdownMenu=withNoopInstall(DropdownMenu),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageViewerEmits={close:()=>!0,switch:t=>isNumber$1(t)},_hoisted_1$d=["src"],__default__$a=defineComponent({name:"ElImageViewer"}),_sfc_main$j=defineComponent({...__default__$a,props:imageViewerProps,emits:imageViewerEmits,setup(t,{expose:r,emit:e}){const n=t,o={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:s}=useLocale(),a=useNamespace("image-viewer"),{nextZIndex:i}=useZIndex(),d=ref(),u=ref([]),c=effectScope(),m=ref(!0),v=ref(n.initialIndex),g=shallowRef(o.CONTAIN),b=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),T=computed(()=>{const{urlList:At}=n;return At.length<=1}),k=computed(()=>v.value===0),y=computed(()=>v.value===n.urlList.length-1),A=computed(()=>n.urlList[v.value]),V=computed(()=>[a.e("btn"),a.e("prev"),a.is("disabled",!n.infinite&&k.value)]),Ce=computed(()=>[a.e("btn"),a.e("next"),a.is("disabled",!n.infinite&&y.value)]),ie=computed(()=>{const{scale:At,deg:ur,offsetX:pr,offsetY:ar,enableTransition:hr}=b.value;let Ne=pr/At,or=ar/At;switch(ur%360){case 90:case-270:[Ne,or]=[or,-Ne];break;case 180:case-180:[Ne,or]=[-Ne,-or];break;case 270:case-90:[Ne,or]=[-or,Ne];break}const ir={transform:`scale(${At}) rotate(${ur}deg) translate(${Ne}px, ${or}px)`,transition:hr?"transform .3s":""};return g.value.name===o.CONTAIN.name&&(ir.maxWidth=ir.maxHeight="100%"),ir}),Oe=computed(()=>isNumber$1(n.zIndex)?n.zIndex:i());function he(){ae(),e("close")}function Y(){const At=throttle(pr=>{switch(pr.code){case EVENT_CODE.esc:n.closeOnPressEscape&&he();break;case EVENT_CODE.space:xe();break;case EVENT_CODE.left:Ve();break;case EVENT_CODE.up:er("zoomIn");break;case EVENT_CODE.right:Ue();break;case EVENT_CODE.down:er("zoomOut");break}}),ur=throttle(pr=>{const ar=pr.deltaY||pr.deltaX;er(ar<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});c.run(()=>{useEventListener(document,"keydown",At),useEventListener(document,"wheel",ur)})}function ae(){c.stop()}function Fe(){m.value=!1}function ze(At){m.value=!1,At.target.alt=s("el.image.error")}function pe(At){if(m.value||At.button!==0||!d.value)return;b.value.enableTransition=!1;const{offsetX:ur,offsetY:pr}=b.value,ar=At.pageX,hr=At.pageY,Ne=throttle(ir=>{b.value={...b.value,offsetX:ur+ir.pageX-ar,offsetY:pr+ir.pageY-hr}}),or=useEventListener(document,"mousemove",Ne);useEventListener(document,"mouseup",()=>{or()}),At.preventDefault()}function le(){b.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function xe(){if(m.value)return;const At=keysOf(o),ur=Object.values(o),pr=g.value.name,hr=(ur.findIndex(Ne=>Ne.name===pr)+1)%At.length;g.value=o[At[hr]],le()}function ue(At){const ur=n.urlList.length;v.value=(At+ur)%ur}function Ve(){k.value&&!n.infinite||ue(v.value-1)}function Ue(){y.value&&!n.infinite||ue(v.value+1)}function er(At,ur={}){if(m.value)return;const{zoomRate:pr,rotateDeg:ar,enableTransition:hr}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...ur};switch(At){case"zoomOut":b.value.scale>.2&&(b.value.scale=Number.parseFloat((b.value.scale/pr).toFixed(3)));break;case"zoomIn":b.value.scale<7&&(b.value.scale=Number.parseFloat((b.value.scale*pr).toFixed(3)));break;case"clockwise":b.value.deg+=ar;break;case"anticlockwise":b.value.deg-=ar;break}b.value.enableTransition=hr}return watch(A,()=>{nextTick(()=>{const At=u.value[0];At!=null&&At.complete||(m.value=!0)})}),watch(v,At=>{le(),e("switch",At)}),onMounted(()=>{var At,ur;Y(),(ur=(At=d.value)==null?void 0:At.focus)==null||ur.call(At)}),r({setActiveItem:ue}),(At,ur)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!At.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:normalizeClass(unref(a).e("wrapper")),style:normalizeStyle({zIndex:unref(Oe)})},[createBaseVNode("div",{class:normalizeClass(unref(a).e("mask")),onClick:ur[0]||(ur[0]=withModifiers(pr=>At.hideOnClickModal&&he(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(a).e("btn"),unref(a).e("close")]),onClick:he},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(T)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(V)),onClick:Ve},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(Ce)),onClick:Ue},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(a).e("btn"),unref(a).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(a).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:ur[1]||(ur[1]=pr=>er("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:ur[2]||(ur[2]=pr=>er("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(a).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:xe},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(g).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(a).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:ur[3]||(ur[3]=pr=>er("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:ur[4]||(ur[4]=pr=>er("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(a).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(At.urlList,(pr,ar)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:hr=>u.value[ar]=hr,key:pr,src:pr,style:normalizeStyle(unref(ie)),class:normalizeClass(unref(a).e("img")),onLoad:Fe,onError:ze,onMousedown:pe},null,46,_hoisted_1$d)),[[vShow,ar===v.value]])),128))],2),renderSlot(At.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc(_sfc_main$j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageEmits={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>isNumber$1(t),close:()=>!0,show:()=>!0},_hoisted_1$c=["src","loading"],_hoisted_2$b={key:0},__default__$9=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$i=defineComponent({...__default__$9,props:imageProps,emits:imageEmits,setup(t,{emit:r}){const e=t;let n="";const{t:o}=useLocale(),s=useNamespace("image"),a=useAttrs$1(),i=useAttrs(),d=ref(),u=ref(!1),c=ref(!0),m=ref(!1),v=ref(),g=ref(),b=isClient&&"loading"in HTMLImageElement.prototype;let T,k;const y=computed(()=>[s.e("inner"),Ce.value&&s.e("preview"),c.value&&s.is("loading")]),A=computed(()=>a.style),V=computed(()=>{const{fit:er}=e;return isClient&&er?{objectFit:er}:{}}),Ce=computed(()=>{const{previewSrcList:er}=e;return Array.isArray(er)&&er.length>0}),ie=computed(()=>{const{previewSrcList:er,initialIndex:At}=e;let ur=At;return At>er.length-1&&(ur=0),ur}),Oe=computed(()=>e.loading==="eager"?!1:!b&&e.loading==="lazy"||e.lazy),he=()=>{isClient&&(c.value=!0,u.value=!1,d.value=e.src)};function Y(er){c.value=!1,u.value=!1,r("load",er)}function ae(er){c.value=!1,u.value=!0,r("error",er)}function Fe(){isInContainer(v.value,g.value)&&(he(),le())}const ze=useThrottleFn(Fe,200,!0);async function pe(){var er;if(!isClient)return;await nextTick();const{scrollContainer:At}=e;isElement(At)?g.value=At:isString$2(At)&&At!==""?g.value=(er=document.querySelector(At))!=null?er:void 0:v.value&&(g.value=getScrollContainer(v.value)),g.value&&(T=useEventListener(g,"scroll",ze),setTimeout(()=>Fe(),100))}function le(){!isClient||!g.value||!ze||(T==null||T(),g.value=void 0)}function xe(er){if(er.ctrlKey){if(er.deltaY<0)return er.preventDefault(),!1;if(er.deltaY>0)return er.preventDefault(),!1}}function ue(){Ce.value&&(k=useEventListener("wheel",xe,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",m.value=!0,r("show"))}function Ve(){k==null||k(),document.body.style.overflow=n,m.value=!1,r("close")}function Ue(er){r("switch",er)}return watch(()=>e.src,()=>{Oe.value?(c.value=!0,u.value=!1,le(),pe()):he()}),onMounted(()=>{Oe.value?pe():he()}),(er,At)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:v,class:normalizeClass([unref(s).b(),er.$attrs.class]),style:normalizeStyle(unref(A))},[u.value?renderSlot(er.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(s).e("error"))},toDisplayString(unref(o)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[d.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(i),{src:d.value,loading:er.loading,style:unref(V),class:unref(y),onClick:ue,onLoad:Y,onError:ae}),null,16,_hoisted_1$c)):createCommentVNode("v-if",!0),c.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(s).e("wrapper"))},[renderSlot(er.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(s).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ce)?(openBlock(),createElementBlock(Fragment,{key:2},[m.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":er.zIndex,"initial-index":unref(ie),infinite:er.infinite,"zoom-rate":er.zoomRate,"url-list":er.previewSrcList,"hide-on-click-modal":er.hideOnClickModal,teleported:er.previewTeleported,"close-on-press-escape":er.closeOnPressEscape,onClose:Ve,onSwitch:Ue},{default:withCtx(()=>[er.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$b,[renderSlot(er.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc(_sfc_main$i,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ElImage=withInstall(Image$1),selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption(t,r){const e=inject(selectKey),n=inject(selectGroupKey,{disabled:!1}),o=computed(()=>Object.prototype.toString.call(t.value).toLowerCase()==="[object object]"),s=computed(()=>e.props.multiple?m(e.props.modelValue,t.value):v(t.value,e.props.modelValue)),a=computed(()=>{if(e.props.multiple){const T=e.props.modelValue||[];return!s.value&&T.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),i=computed(()=>t.label||(o.value?"":t.value)),d=computed(()=>t.value||t.label||""),u=computed(()=>t.disabled||r.groupDisabled||a.value),c=getCurrentInstance(),m=(T=[],k)=>{if(o.value){const y=e.props.valueKey;return T&&T.some(A=>toRaw(get(A,y))===get(k,y))}else return T&&T.includes(k)},v=(T,k)=>{if(o.value){const{valueKey:y}=e.props;return get(T,y)===get(k,y)}else return T===k},g=()=>{!t.disabled&&!n.disabled&&(e.hoverIndex=e.optionsArray.indexOf(c.proxy))};watch(()=>i.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),watch(()=>t.value,(T,k)=>{const{remote:y,valueKey:A}=e.props;if(Object.is(T,k)||(e.onOptionDestroy(k,c.proxy),e.onOptionCreate(c.proxy)),!t.created&&!y){if(A&&typeof T=="object"&&typeof k=="object"&&T[A]===k[A])return;e.setSelected()}}),watch(()=>n.disabled,()=>{r.groupDisabled=n.disabled},{immediate:!0});const{queryChange:b}=toRaw(e);return watch(b,T=>{const{query:k}=unref(T),y=new RegExp(escapeStringRegexp(k),"i");r.visible=y.test(i.value)||t.created,r.visible||e.filteredOptionsCount--},{immediate:!0}),{select:e,currentLabel:i,currentValue:d,itemSelected:s,isDisabled:u,hoverItem:g}}const _sfc_main$h=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const r=useNamespace("select"),e=computed(()=>[r.be("dropdown","item"),r.is("disabled",unref(a)),{selected:unref(s),hover:unref(c)}]),n=reactive({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:o,itemSelected:s,isDisabled:a,select:i,hoverItem:d}=useOption(t,n),{visible:u,hover:c}=toRefs(n),m=getCurrentInstance().proxy;i.onOptionCreate(m),onBeforeUnmount(()=>{const g=m.value,{selected:b}=i,k=(i.props.multiple?b:[b]).some(y=>y.value===m.value);nextTick(()=>{i.cachedOptions.get(g)===m&&!k&&i.cachedOptions.delete(g)}),i.onOptionDestroy(g,m)});function v(){t.disabled!==!0&&n.groupDisabled!==!0&&i.handleOptionSelect(m)}return{ns:r,containerKls:e,currentLabel:o,itemSelected:s,isDisabled:a,select:i,hoverItem:d,visible:u,hover:c,selectOptionClick:v,states:n}}});function _sfc_render$4(t,r,e,n,o,s){return withDirectives((openBlock(),createElementBlock("li",{class:normalizeClass(t.containerKls),onMouseenter:r[0]||(r[0]=(...a)=>t.hoverItem&&t.hoverItem(...a)),onClick:r[1]||(r[1]=withModifiers((...a)=>t.selectOptionClick&&t.selectOptionClick(...a),["stop"]))},[renderSlot(t.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(t.currentLabel),1)])],34)),[[vShow,t.visible]])}var Option=_export_sfc(_sfc_main$h,[["render",_sfc_render$4],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const _sfc_main$g=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=inject(selectKey),r=useNamespace("select"),e=computed(()=>t.props.popperClass),n=computed(()=>t.props.multiple),o=computed(()=>t.props.fitInputWidth),s=ref("");function a(){var i;s.value=`${(i=t.selectWrapper)==null?void 0:i.offsetWidth}px`}return onMounted(()=>{a(),useResizeObserver(t.selectWrapper,a)}),{ns:r,minWidth:s,popperClass:e,isMultiple:n,isFitInputWidth:o}}});function _sfc_render$3(t,r,e,n,o,s){return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:normalizeStyle({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[renderSlot(t.$slots,"default")],6)}var ElSelectMenu=_export_sfc(_sfc_main$g,[["render",_sfc_render$3],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function useSelectStates(t){const{t:r}=useLocale();return reactive({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:t.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:r("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const useSelect=(t,r,e)=>{const{t:n}=useLocale(),o=useNamespace("select");useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>t.suffixTransition===!1));const s=ref(null),a=ref(null),i=ref(null),d=ref(null),u=ref(null),c=ref(null),m=ref(null),v=ref(null),g=ref(-1),b=shallowRef({query:""}),T=shallowRef(""),k=ref([]);let y=0;const{form:A,formItem:V}=useFormItem(),Ce=computed(()=>!t.filterable||t.multiple||!r.visible),ie=computed(()=>t.disabled||(A==null?void 0:A.disabled)),Oe=computed(()=>{const Lr=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!=="";return t.clearable&&!ie.value&&r.inputHovering&&Lr}),he=computed(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),Y=computed(()=>o.is("reverse",he.value&&r.visible&&t.suffixTransition)),ae=computed(()=>(A==null?void 0:A.statusIcon)&&(V==null?void 0:V.validateState)&&ValidateComponentsMap[V==null?void 0:V.validateState]),Fe=computed(()=>t.remote?300:0),ze=computed(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&r.query===""&&r.options.size===0?!1:t.filterable&&r.query&&r.options.size>0&&r.filteredOptionsCount===0?t.noMatchText||n("el.select.noMatch"):r.options.size===0?t.noDataText||n("el.select.noData"):null),pe=computed(()=>{const Lr=Array.from(r.options.values()),Qr=[];return k.value.forEach(Bn=>{const Xn=Lr.findIndex(ko=>ko.currentLabel===Bn);Xn>-1&&Qr.push(Lr[Xn])}),Qr.length?Qr:Lr}),le=computed(()=>Array.from(r.cachedOptions.values())),xe=computed(()=>{const Lr=pe.value.filter(Qr=>!Qr.created).some(Qr=>Qr.currentLabel===r.query);return t.filterable&&t.allowCreate&&r.query!==""&&!Lr}),ue=useFormSize(),Ve=computed(()=>["small"].includes(ue.value)?"small":"default"),Ue=computed({get(){return r.visible&&ze.value!==!1},set(Lr){r.visible=Lr}});watch([()=>ie.value,()=>ue.value,()=>A==null?void 0:A.size],()=>{nextTick(()=>{er()})}),watch(()=>t.placeholder,Lr=>{r.cachedPlaceHolder=r.currentPlaceholder=Lr,t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(r.currentPlaceholder="")}),watch(()=>t.modelValue,(Lr,Qr)=>{t.multiple&&(er(),Lr&&Lr.length>0||a.value&&r.query!==""?r.currentPlaceholder="":r.currentPlaceholder=r.cachedPlaceHolder,t.filterable&&!t.reserveKeyword&&(r.query="",At(r.query))),ar(),t.filterable&&!t.multiple&&(r.inputLength=20),!isEqual(Lr,Qr)&&t.validateEvent&&(V==null||V.validate("change").catch(Bn=>void 0))},{flush:"post",deep:!0}),watch(()=>r.visible,Lr=>{var Qr,Bn,Xn,ko,no;Lr?((Bn=(Qr=d.value)==null?void 0:Qr.updatePopper)==null||Bn.call(Qr),t.filterable&&(r.filteredOptionsCount=r.optionsCount,r.query=t.remote?"":r.selectedLabel,(ko=(Xn=i.value)==null?void 0:Xn.focus)==null||ko.call(Xn),t.multiple?(no=a.value)==null||no.focus():r.selectedLabel&&(r.currentPlaceholder=`${r.selectedLabel}`,r.selectedLabel=""),At(r.query),!t.multiple&&!t.remote&&(b.value.query="",triggerRef(b),triggerRef(T)))):(t.filterable&&(isFunction$3(t.filterMethod)&&t.filterMethod(""),isFunction$3(t.remoteMethod)&&t.remoteMethod("")),r.query="",r.previousQuery=null,r.selectedLabel="",r.inputLength=20,r.menuVisibleOnFocus=!1,Ne(),nextTick(()=>{a.value&&a.value.value===""&&r.selected.length===0&&(r.currentPlaceholder=r.cachedPlaceHolder)}),t.multiple||(r.selected&&(t.filterable&&t.allowCreate&&r.createdSelected&&r.createdLabel?r.selectedLabel=r.createdLabel:r.selectedLabel=r.selected.currentLabel,t.filterable&&(r.query=r.selectedLabel)),t.filterable&&(r.currentPlaceholder=r.cachedPlaceHolder))),e.emit("visible-change",Lr)}),watch(()=>r.options.entries(),()=>{var Lr,Qr,Bn;if(!isClient)return;(Qr=(Lr=d.value)==null?void 0:Lr.updatePopper)==null||Qr.call(Lr),t.multiple&&er();const Xn=((Bn=m.value)==null?void 0:Bn.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!isUndefined$1(t.modelValue)||!Array.from(Xn).includes(document.activeElement))&&ar(),t.defaultFirstOption&&(t.filterable||t.remote)&&r.filteredOptionsCount&&pr()},{flush:"post"}),watch(()=>r.hoverIndex,Lr=>{isNumber$1(Lr)&&Lr>-1?g.value=pe.value[Lr]||{}:g.value={},pe.value.forEach(Qr=>{Qr.hover=g.value===Qr})});const er=()=>{nextTick(()=>{var Lr,Qr;if(!s.value)return;const Bn=s.value.$el.querySelector("input");y=y||(Bn.clientHeight>0?Bn.clientHeight+2:0);const Xn=c.value,ko=getComponentSize(ue.value||(A==null?void 0:A.size)),no=ue.value||ko===y||y<=0?ko:y;!(Bn.offsetParent===null)&&(Bn.style.height=`${(r.selected.length===0?no:Math.max(Xn?Xn.clientHeight+(Xn.clientHeight>no?6:0):0,no))-2}px`),r.visible&&ze.value!==!1&&((Qr=(Lr=d.value)==null?void 0:Lr.updatePopper)==null||Qr.call(Lr))})},At=async Lr=>{if(!(r.previousQuery===Lr||r.isOnComposition)){if(r.previousQuery===null&&(isFunction$3(t.filterMethod)||isFunction$3(t.remoteMethod))){r.previousQuery=Lr;return}r.previousQuery=Lr,nextTick(()=>{var Qr,Bn;r.visible&&((Bn=(Qr=d.value)==null?void 0:Qr.updatePopper)==null||Bn.call(Qr))}),r.hoverIndex=-1,t.multiple&&t.filterable&&nextTick(()=>{if(!ie.value){const Qr=a.value.value.length*15+20;r.inputLength=t.collapseTags?Math.min(50,Qr):Qr,ur()}er()}),t.remote&&isFunction$3(t.remoteMethod)?(r.hoverIndex=-1,t.remoteMethod(Lr)):isFunction$3(t.filterMethod)?(t.filterMethod(Lr),triggerRef(T)):(r.filteredOptionsCount=r.optionsCount,b.value.query=Lr,triggerRef(b),triggerRef(T)),t.defaultFirstOption&&(t.filterable||t.remote)&&r.filteredOptionsCount&&(await nextTick(),pr())}},ur=()=>{r.currentPlaceholder!==""&&(r.currentPlaceholder=a.value.value?"":r.cachedPlaceHolder)},pr=()=>{const Lr=pe.value.filter(Xn=>Xn.visible&&!Xn.disabled&&!Xn.states.groupDisabled),Qr=Lr.find(Xn=>Xn.created),Bn=Lr[0];r.hoverIndex=yr(pe.value,Qr||Bn)},ar=()=>{var Lr;if(t.multiple)r.selectedLabel="";else{const Bn=hr(t.modelValue);(Lr=Bn.props)!=null&&Lr.created?(r.createdLabel=Bn.props.value,r.createdSelected=!0):r.createdSelected=!1,r.selectedLabel=Bn.currentLabel,r.selected=Bn,t.filterable&&(r.query=r.selectedLabel);return}const Qr=[];Array.isArray(t.modelValue)&&t.modelValue.forEach(Bn=>{Qr.push(hr(Bn))}),r.selected=Qr,nextTick(()=>{er()})},hr=Lr=>{let Qr;const Bn=toRawType(Lr).toLowerCase()==="object",Xn=toRawType(Lr).toLowerCase()==="null",ko=toRawType(Lr).toLowerCase()==="undefined";for(let fs=r.cachedOptions.size-1;fs>=0;fs--){const ms=le.value[fs];if(Bn?get(ms.value,t.valueKey)===get(Lr,t.valueKey):ms.value===Lr){Qr={value:Lr,currentLabel:ms.currentLabel,isDisabled:ms.isDisabled};break}}if(Qr)return Qr;const no=Bn?Lr.label:!Xn&&!ko?Lr:"",Ra={value:Lr,currentLabel:no};return t.multiple&&(Ra.hitState=!1),Ra},Ne=()=>{setTimeout(()=>{const Lr=t.valueKey;t.multiple?r.selected.length>0?r.hoverIndex=Math.min.apply(null,r.selected.map(Qr=>pe.value.findIndex(Bn=>get(Bn,Lr)===get(Qr,Lr)))):r.hoverIndex=-1:r.hoverIndex=pe.value.findIndex(Qr=>Wn(Qr)===Wn(r.selected))},300)},or=()=>{var Lr,Qr;ir(),(Qr=(Lr=d.value)==null?void 0:Lr.updatePopper)==null||Qr.call(Lr),t.multiple&&er()},ir=()=>{var Lr;r.inputWidth=(Lr=s.value)==null?void 0:Lr.$el.offsetWidth},$e=()=>{t.filterable&&r.query!==r.selectedLabel&&(r.query=r.selectedLabel,At(r.query))},tr=debounce(()=>{$e()},Fe.value),nr=debounce(Lr=>{At(Lr.target.value)},Fe.value),Pt=Lr=>{isEqual(t.modelValue,Lr)||e.emit(CHANGE_EVENT,Lr)},Et=Lr=>findLastIndex(Lr,Qr=>!r.disabledOptions.has(Qr)),kt=Lr=>{if(Lr.code!==EVENT_CODE.delete){if(Lr.target.value.length<=0&&!Mn()){const Qr=t.modelValue.slice(),Bn=Et(Qr);if(Bn<0)return;Qr.splice(Bn,1),e.emit(UPDATE_MODEL_EVENT,Qr),Pt(Qr)}Lr.target.value.length===1&&t.modelValue.length===0&&(r.currentPlaceholder=r.cachedPlaceHolder)}},rr=(Lr,Qr)=>{const Bn=r.selected.indexOf(Qr);if(Bn>-1&&!ie.value){const Xn=t.modelValue.slice();Xn.splice(Bn,1),e.emit(UPDATE_MODEL_EVENT,Xn),Pt(Xn),e.emit("remove-tag",Qr.value)}Lr.stopPropagation(),Wr()},cr=Lr=>{Lr.stopPropagation();const Qr=t.multiple?[]:"";if(!isString$2(Qr))for(const Bn of r.selected)Bn.isDisabled&&Qr.push(Bn.value);e.emit(UPDATE_MODEL_EVENT,Qr),Pt(Qr),r.hoverIndex=-1,r.visible=!1,e.emit("clear"),Wr()},mr=Lr=>{var Qr;if(t.multiple){const Bn=(t.modelValue||[]).slice(),Xn=yr(Bn,Lr.value);Xn>-1?Bn.splice(Xn,1):(t.multipleLimit<=0||Bn.length<t.multipleLimit)&&Bn.push(Lr.value),e.emit(UPDATE_MODEL_EVENT,Bn),Pt(Bn),Lr.created&&(r.query="",At(""),r.inputLength=20),t.filterable&&((Qr=a.value)==null||Qr.focus())}else e.emit(UPDATE_MODEL_EVENT,Lr.value),Pt(Lr.value),r.visible=!1;Tr(),!r.visible&&nextTick(()=>{Ir(Lr)})},yr=(Lr=[],Qr)=>{if(!isObject$2(Qr))return Lr.indexOf(Qr);const Bn=t.valueKey;let Xn=-1;return Lr.some((ko,no)=>toRaw(get(ko,Bn))===get(Qr,Bn)?(Xn=no,!0):!1),Xn},Tr=()=>{const Lr=a.value||s.value;Lr&&(Lr==null||Lr.focus())},Ir=Lr=>{var Qr,Bn,Xn,ko,no;const Ra=Array.isArray(Lr)?Lr[0]:Lr;let fs=null;if(Ra!=null&&Ra.value){const ms=pe.value.filter(ga=>ga.value===Ra.value);ms.length>0&&(fs=ms[0].$el)}if(d.value&&fs){const ms=(ko=(Xn=(Bn=(Qr=d.value)==null?void 0:Qr.popperRef)==null?void 0:Bn.contentRef)==null?void 0:Xn.querySelector)==null?void 0:ko.call(Xn,`.${o.be("dropdown","wrap")}`);ms&&scrollIntoView(ms,fs)}(no=v.value)==null||no.handleScroll()},kr=Lr=>{r.optionsCount++,r.filteredOptionsCount++,r.options.set(Lr.value,Lr),r.cachedOptions.set(Lr.value,Lr),Lr.disabled&&r.disabledOptions.set(Lr.value,Lr)},Ar=(Lr,Qr)=>{r.options.get(Lr)===Qr&&(r.optionsCount--,r.filteredOptionsCount--,r.options.delete(Lr))},Rr=Lr=>{Lr.code!==EVENT_CODE.backspace&&Mn(!1),r.inputLength=a.value.value.length*15+20,er()},Mn=Lr=>{if(!Array.isArray(r.selected))return;const Qr=Et(r.selected.map(Xn=>Xn.value)),Bn=r.selected[Qr];if(Bn)return Lr===!0||Lr===!1?(Bn.hitState=Lr,Lr):(Bn.hitState=!Bn.hitState,Bn.hitState)},Or=Lr=>{const Qr=Lr.target.value;if(Lr.type==="compositionend")r.isOnComposition=!1,nextTick(()=>At(Qr));else{const Bn=Qr[Qr.length-1]||"";r.isOnComposition=!isKorean(Bn)}},Pr=()=>{nextTick(()=>Ir(r.selected))},Nr=Lr=>{r.focused||((t.automaticDropdown||t.filterable)&&(t.filterable&&!r.visible&&(r.menuVisibleOnFocus=!0),r.visible=!0),r.focused=!0,e.emit("focus",Lr))},Wr=()=>{var Lr,Qr;r.visible?(Lr=a.value||s.value)==null||Lr.focus():(Qr=s.value)==null||Qr.focus()},Yr=()=>{var Lr,Qr,Bn;r.visible=!1,(Lr=s.value)==null||Lr.blur(),(Bn=(Qr=i.value)==null?void 0:Qr.blur)==null||Bn.call(Qr)},Ur=Lr=>{var Qr,Bn,Xn;(Qr=d.value)!=null&&Qr.isFocusInsideContent(Lr)||(Bn=u.value)!=null&&Bn.isFocusInsideContent(Lr)||(Xn=m.value)!=null&&Xn.contains(Lr.relatedTarget)||(r.visible&&Yn(),r.focused=!1,e.emit("blur",Lr))},qr=Lr=>{cr(Lr)},Yn=()=>{r.visible=!1},$n=Lr=>{r.visible&&(Lr.preventDefault(),Lr.stopPropagation(),r.visible=!1)},Jr=Lr=>{Lr&&!r.mouseEnter||ie.value||(r.menuVisibleOnFocus?r.menuVisibleOnFocus=!1:(!d.value||!d.value.isFocusInsideContent())&&(r.visible=!r.visible),Wr())},Fr=()=>{r.visible?pe.value[r.hoverIndex]&&mr(pe.value[r.hoverIndex]):Jr()},Wn=Lr=>isObject$2(Lr.value)?get(Lr.value,t.valueKey):Lr.value,ho=computed(()=>pe.value.filter(Lr=>Lr.visible).every(Lr=>Lr.disabled)),bo=computed(()=>r.selected.slice(0,t.maxCollapseTags)),uo=computed(()=>r.selected.slice(t.maxCollapseTags)),po=Lr=>{if(!r.visible){r.visible=!0;return}if(!(r.options.size===0||r.filteredOptionsCount===0)&&!r.isOnComposition&&!ho.value){Lr==="next"?(r.hoverIndex++,r.hoverIndex===r.options.size&&(r.hoverIndex=0)):Lr==="prev"&&(r.hoverIndex--,r.hoverIndex<0&&(r.hoverIndex=r.options.size-1));const Qr=pe.value[r.hoverIndex];(Qr.disabled===!0||Qr.states.groupDisabled===!0||!Qr.visible)&&po(Lr),nextTick(()=>Ir(g.value))}},No=()=>{r.mouseEnter=!0},An=()=>{r.mouseEnter=!1},Sa=(Lr,Qr)=>{var Bn,Xn;rr(Lr,Qr),(Xn=(Bn=u.value)==null?void 0:Bn.updatePopper)==null||Xn.call(Bn)},to=computed(()=>({maxWidth:`${unref(r.inputWidth)-32-(ae.value?22:0)}px`,width:"100%"}));return{optionList:k,optionsArray:pe,selectSize:ue,handleResize:or,debouncedOnInputChange:tr,debouncedQueryChange:nr,deletePrevTag:kt,deleteTag:rr,deleteSelected:cr,handleOptionSelect:mr,scrollToOption:Ir,readonly:Ce,resetInputHeight:er,showClose:Oe,iconComponent:he,iconReverse:Y,showNewOption:xe,collapseTagSize:Ve,setSelected:ar,managePlaceholder:ur,selectDisabled:ie,emptyText:ze,toggleLastOptionHitState:Mn,resetInputState:Rr,handleComposition:Or,onOptionCreate:kr,onOptionDestroy:Ar,handleMenuEnter:Pr,handleFocus:Nr,focus:Wr,blur:Yr,handleBlur:Ur,handleClearClick:qr,handleClose:Yn,handleKeydownEscape:$n,toggleMenu:Jr,selectOption:Fr,getValueKey:Wn,navigateOptions:po,handleDeleteTooltipTag:Sa,dropMenuVisible:Ue,queryChange:b,groupQueryChange:T,showTagList:bo,collapseTagList:uo,selectTagsStyle:to,reference:s,input:a,iOSInput:i,tooltipRef:d,tagTooltipRef:u,tags:c,selectWrapper:m,scrollbar:v,handleMouseEnter:No,handleMouseLeave:An}};var ElOptions=defineComponent({name:"ElOptions",emits:["update-options"],setup(t,{slots:r,emit:e}){let n=[];function o(s,a){if(s.length!==a.length)return!1;for(const[i]of s.entries())if(s[i]!=a[i])return!1;return!0}return()=>{var s,a;const i=(s=r.default)==null?void 0:s.call(r),d=[];function u(c){Array.isArray(c)&&c.forEach(m=>{var v,g,b,T;const k=(v=(m==null?void 0:m.type)||{})==null?void 0:v.name;k==="ElOptionGroup"?u(!isString$2(m.children)&&!Array.isArray(m.children)&&isFunction$3((g=m.children)==null?void 0:g.default)?(b=m.children)==null?void 0:b.default():m.children):k==="ElOption"?d.push((T=m.props)==null?void 0:T.label):Array.isArray(m.children)&&u(m.children)})}return i.length&&u((a=i[0])==null?void 0:a.children),o(d,n)||(n=d,e("update-options",d)),i}}});const COMPONENT_NAME$2="ElSelect",_sfc_main$f=defineComponent({name:COMPONENT_NAME$2,componentName:COMPONENT_NAME$2,components:{ElInput,ElSelectMenu,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:isValidComponentSize},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Ee,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(t,r){const e=useNamespace("select"),n=useNamespace("input"),{t:o}=useLocale(),s=useSelectStates(t),{optionList:a,optionsArray:i,selectSize:d,readonly:u,handleResize:c,collapseTagSize:m,debouncedOnInputChange:v,debouncedQueryChange:g,deletePrevTag:b,deleteTag:T,deleteSelected:k,handleOptionSelect:y,scrollToOption:A,setSelected:V,resetInputHeight:Ce,managePlaceholder:ie,showClose:Oe,selectDisabled:he,iconComponent:Y,iconReverse:ae,showNewOption:Fe,emptyText:ze,toggleLastOptionHitState:pe,resetInputState:le,handleComposition:xe,onOptionCreate:ue,onOptionDestroy:Ve,handleMenuEnter:Ue,handleFocus:er,focus:At,blur:ur,handleBlur:pr,handleClearClick:ar,handleClose:hr,handleKeydownEscape:Ne,toggleMenu:or,selectOption:ir,getValueKey:$e,navigateOptions:tr,handleDeleteTooltipTag:nr,dropMenuVisible:Pt,reference:Et,input:kt,iOSInput:rr,tooltipRef:cr,tagTooltipRef:mr,tags:yr,selectWrapper:Tr,scrollbar:Ir,queryChange:kr,groupQueryChange:Ar,handleMouseEnter:Rr,handleMouseLeave:Mn,showTagList:Or,collapseTagList:Pr,selectTagsStyle:Nr}=useSelect(t,s,r),{inputWidth:Wr,selected:Yr,inputLength:Ur,filteredOptionsCount:qr,visible:Yn,selectedLabel:$n,hoverIndex:Jr,query:Fr,inputHovering:Wn,currentPlaceholder:ho,menuVisibleOnFocus:bo,isOnComposition:uo,options:po,cachedOptions:No,optionsCount:An,prefixWidth:Sa}=toRefs(s),to=computed(()=>{const ga=[e.b()],Fi=unref(d);return Fi&&ga.push(e.m(Fi)),t.disabled&&ga.push(e.m("disabled")),ga}),Lr=computed(()=>[e.e("tags"),e.is("disabled",unref(he))]),Qr=computed(()=>[e.b("tags-wrapper"),{"has-prefix":unref(Sa)&&unref(Yr).length}]),Bn=computed(()=>[e.e("input"),e.is(unref(d)),e.is("disabled",unref(he))]),Xn=computed(()=>[e.e("input"),e.is(unref(d)),e.em("input","iOS")]),ko=computed(()=>[e.is("empty",!t.allowCreate&&!!unref(Fr)&&unref(qr)===0)]),no=computed(()=>({maxWidth:`${unref(Wr)>123?unref(Wr)-123:unref(Wr)-75}px`})),Ra=computed(()=>({marginLeft:`${unref(Sa)}px`,flexGrow:1,width:`${unref(Ur)/(unref(Wr)-32)}%`,maxWidth:`${unref(Wr)-42}px`}));provide(selectKey,reactive({props:t,options:po,optionsArray:i,cachedOptions:No,optionsCount:An,filteredOptionsCount:qr,hoverIndex:Jr,handleOptionSelect:y,onOptionCreate:ue,onOptionDestroy:Ve,selectWrapper:Tr,selected:Yr,setSelected:V,queryChange:kr,groupQueryChange:Ar})),onMounted(()=>{s.cachedPlaceHolder=ho.value=t.placeholder||(()=>o("el.select.placeholder")),t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(ho.value=""),useResizeObserver(Tr,c),t.remote&&t.multiple&&Ce(),nextTick(()=>{const ga=Et.value&&Et.value.$el;if(ga&&(Wr.value=ga.getBoundingClientRect().width,r.slots.prefix)){const Fi=ga.querySelector(`.${n.e("prefix")}`);Sa.value=Math.max(Fi.getBoundingClientRect().width+11,30)}}),V()}),t.multiple&&!Array.isArray(t.modelValue)&&r.emit(UPDATE_MODEL_EVENT,[]),!t.multiple&&Array.isArray(t.modelValue)&&r.emit(UPDATE_MODEL_EVENT,"");const fs=computed(()=>{var ga,Fi;return(Fi=(ga=cr.value)==null?void 0:ga.popperRef)==null?void 0:Fi.contentRef});return{isIOS,onOptionsRendered:ga=>{a.value=ga},prefixWidth:Sa,selectSize:d,readonly:u,handleResize:c,collapseTagSize:m,debouncedOnInputChange:v,debouncedQueryChange:g,deletePrevTag:b,deleteTag:T,handleDeleteTooltipTag:nr,deleteSelected:k,handleOptionSelect:y,scrollToOption:A,inputWidth:Wr,selected:Yr,inputLength:Ur,filteredOptionsCount:qr,visible:Yn,selectedLabel:$n,hoverIndex:Jr,query:Fr,inputHovering:Wn,currentPlaceholder:ho,menuVisibleOnFocus:bo,isOnComposition:uo,options:po,resetInputHeight:Ce,managePlaceholder:ie,showClose:Oe,selectDisabled:he,iconComponent:Y,iconReverse:ae,showNewOption:Fe,emptyText:ze,toggleLastOptionHitState:pe,resetInputState:le,handleComposition:xe,handleMenuEnter:Ue,handleFocus:er,focus:At,blur:ur,handleBlur:pr,handleClearClick:ar,handleClose:hr,handleKeydownEscape:Ne,toggleMenu:or,selectOption:ir,getValueKey:$e,navigateOptions:tr,dropMenuVisible:Pt,reference:Et,input:kt,iOSInput:rr,tooltipRef:cr,popperPaneRef:fs,tags:yr,selectWrapper:Tr,scrollbar:Ir,wrapperKls:to,tagsKls:Lr,tagWrapperKls:Qr,inputKls:Bn,iOSInputKls:Xn,scrollbarKls:ko,selectTagsStyle:Nr,nsSelect:e,tagTextStyle:no,inputStyle:Ra,handleMouseEnter:Rr,handleMouseLeave:Mn,showTagList:Or,collapseTagList:Pr,tagTooltipRef:mr}}}),_hoisted_1$b=["disabled","autocomplete","aria-label"],_hoisted_2$a=["disabled"],_hoisted_3$7={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function _sfc_render$2(t,r,e,n,o,s){const a=resolveComponent("el-tag"),i=resolveComponent("el-tooltip"),d=resolveComponent("el-icon"),u=resolveComponent("el-input"),c=resolveComponent("el-option"),m=resolveComponent("el-options"),v=resolveComponent("el-scrollbar"),g=resolveComponent("el-select-menu"),b=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectWrapper",class:normalizeClass(t.wrapperKls),onMouseenter:r[22]||(r[22]=(...T)=>t.handleMouseEnter&&t.handleMouseEnter(...T)),onMouseleave:r[23]||(r[23]=(...T)=>t.handleMouseLeave&&t.handleMouseLeave(...T)),onClick:r[24]||(r[24]=withModifiers((...T)=>t.toggleMenu&&t.toggleMenu(...T),["stop"]))},[createVNode(i,{ref:"tooltipRef",visible:t.dropMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onShow:t.handleMenuEnter},{default:withCtx(()=>[createBaseVNode("div",{class:"select-trigger",onMouseenter:r[20]||(r[20]=T=>t.inputHovering=!0),onMouseleave:r[21]||(r[21]=T=>t.inputHovering=!1)},[t.multiple?(openBlock(),createElementBlock("div",{key:0,ref:"tags",tabindex:"-1",class:normalizeClass(t.tagsKls),style:normalizeStyle(t.selectTagsStyle),onClick:r[15]||(r[15]=(...T)=>t.focus&&t.focus(...T))},[t.collapseTags&&t.selected.length?(openBlock(),createBlock(Transition,{key:0,onAfterLeave:t.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.tagWrapperKls)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.showTagList,T=>(openBlock(),createBlock(a,{key:t.getValueKey(T),closable:!t.selectDisabled&&!T.isDisabled,size:t.collapseTagSize,hit:T.hitState,type:t.tagType,"disable-transitions":"",onClose:k=>t.deleteTag(k,T)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle(t.tagTextStyle)},toDisplayString(T.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),t.selected.length>t.maxCollapseTags?(openBlock(),createBlock(a,{key:0,closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":""},{default:withCtx(()=>[t.collapseTagsTooltip?(openBlock(),createBlock(i,{key:0,ref:"tagTooltipRef",disabled:t.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},"+ "+toDisplayString(t.selected.length-t.maxCollapseTags),3)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(t.nsSelect.e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.collapseTagList,T=>(openBlock(),createElementBlock("div",{key:t.getValueKey(T),class:normalizeClass(t.nsSelect.e("collapse-tag"))},[createVNode(a,{class:"in-tooltip",closable:!t.selectDisabled&&!T.isDisabled,size:t.collapseTagSize,hit:T.hitState,type:t.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:k=>t.handleDeleteTooltipTag(k,T)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:t.inputWidth-75+"px"})},toDisplayString(T.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.nsSelect.e("tags-text"))},"+ "+toDisplayString(t.selected.length-t.maxCollapseTags),3))]),_:1},8,["size","type"])):createCommentVNode("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):createCommentVNode("v-if",!0),t.collapseTags?createCommentVNode("v-if",!0):(openBlock(),createBlock(Transition,{key:1,onAfterLeave:t.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.tagWrapperKls),style:normalizeStyle(t.prefixWidth&&t.selected.length?{marginLeft:`${t.prefixWidth}px`}:"")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.selected,T=>(openBlock(),createBlock(a,{key:t.getValueKey(T),closable:!t.selectDisabled&&!T.isDisabled,size:t.collapseTagSize,hit:T.hitState,type:t.tagType,"disable-transitions":"",onClose:k=>t.deleteTag(k,T)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:t.inputWidth-75+"px"})},toDisplayString(T.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),t.filterable&&!t.selectDisabled?withDirectives((openBlock(),createElementBlock("input",{key:2,ref:"input","onUpdate:modelValue":r[0]||(r[0]=T=>t.query=T),type:"text",class:normalizeClass(t.inputKls),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:normalizeStyle(t.inputStyle),"aria-label":t.ariaLabel,onFocus:r[1]||(r[1]=(...T)=>t.handleFocus&&t.handleFocus(...T)),onBlur:r[2]||(r[2]=(...T)=>t.handleBlur&&t.handleBlur(...T)),onKeyup:r[3]||(r[3]=(...T)=>t.managePlaceholder&&t.managePlaceholder(...T)),onKeydown:[r[4]||(r[4]=(...T)=>t.resetInputState&&t.resetInputState(...T)),r[5]||(r[5]=withKeys(withModifiers(T=>t.navigateOptions("next"),["prevent"]),["down"])),r[6]||(r[6]=withKeys(withModifiers(T=>t.navigateOptions("prev"),["prevent"]),["up"])),r[7]||(r[7]=withKeys((...T)=>t.handleKeydownEscape&&t.handleKeydownEscape(...T),["esc"])),r[8]||(r[8]=withKeys(withModifiers((...T)=>t.selectOption&&t.selectOption(...T),["stop","prevent"]),["enter"])),r[9]||(r[9]=withKeys((...T)=>t.deletePrevTag&&t.deletePrevTag(...T),["delete"])),r[10]||(r[10]=withKeys(T=>t.visible=!1,["tab"]))],onCompositionstart:r[11]||(r[11]=(...T)=>t.handleComposition&&t.handleComposition(...T)),onCompositionupdate:r[12]||(r[12]=(...T)=>t.handleComposition&&t.handleComposition(...T)),onCompositionend:r[13]||(r[13]=(...T)=>t.handleComposition&&t.handleComposition(...T)),onInput:r[14]||(r[14]=(...T)=>t.debouncedQueryChange&&t.debouncedQueryChange(...T))},null,46,_hoisted_1$b)),[[vModelText,t.query]]):createCommentVNode("v-if",!0)],6)):createCommentVNode("v-if",!0),createCommentVNode(" fix: https://github.com/element-plus/element-plus/issues/11415 "),t.isIOS&&!t.multiple&&t.filterable&&t.readonly?(openBlock(),createElementBlock("input",{key:1,ref:"iOSInput",class:normalizeClass(t.iOSInputKls),disabled:t.selectDisabled,type:"text"},null,10,_hoisted_2$a)):createCommentVNode("v-if",!0),createVNode(u,{id:t.id,ref:"reference",modelValue:t.selectedLabel,"onUpdate:modelValue":r[16]||(r[16]=T=>t.selectedLabel=T),type:"text",placeholder:typeof t.currentPlaceholder=="function"?t.currentPlaceholder():t.currentPlaceholder,name:t.name,autocomplete:t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,class:normalizeClass([t.nsSelect.is("focus",t.visible)]),tabindex:t.multiple&&t.filterable?-1:void 0,label:t.ariaLabel,onFocus:t.handleFocus,onBlur:t.handleBlur,onInput:t.debouncedOnInputChange,onPaste:t.debouncedOnInputChange,onCompositionstart:t.handleComposition,onCompositionupdate:t.handleComposition,onCompositionend:t.handleComposition,onKeydown:[r[17]||(r[17]=withKeys(withModifiers(T=>t.navigateOptions("next"),["stop","prevent"]),["down"])),r[18]||(r[18]=withKeys(withModifiers(T=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),withKeys(withModifiers(t.selectOption,["stop","prevent"]),["enter"]),withKeys(t.handleKeydownEscape,["esc"]),r[19]||(r[19]=withKeys(T=>t.visible=!1,["tab"]))]},createSlots({suffix:withCtx(()=>[t.iconComponent&&!t.showClose?(openBlock(),createBlock(d,{key:0,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.showClose&&t.clearIcon?(openBlock(),createBlock(d,{key:1,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:2},[t.$slots.prefix?{name:"prefix",fn:withCtx(()=>[createBaseVNode("div",_hoisted_3$7,[renderSlot(t.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:withCtx(()=>[createVNode(g,null,{default:withCtx(()=>[withDirectives(createVNode(v,{ref:"scrollbar",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:normalizeClass(t.scrollbarKls)},{default:withCtx(()=>[t.showNewOption?(openBlock(),createBlock(c,{key:0,value:t.query,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(m,{onUpdateOptions:t.onOptionsRendered},{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[vShow,t.options.size>0&&!t.loading]]),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&t.options.size===0)?(openBlock(),createElementBlock(Fragment,{key:0},[t.$slots.empty?renderSlot(t.$slots,"empty",{key:0}):(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(t.nsSelect.be("dropdown","empty"))},toDisplayString(t.emptyText),3))],64)):createCommentVNode("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[b,t.handleClose,t.popperPaneRef]])}var Select=_export_sfc(_sfc_main$f,[["render",_sfc_render$2],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const _sfc_main$e=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const r=useNamespace("select"),e=ref(!0),n=getCurrentInstance(),o=ref([]);provide(selectGroupKey,reactive({...toRefs(t)}));const s=inject(selectKey);onMounted(()=>{o.value=a(n.subTree)});const a=d=>{const u=[];return Array.isArray(d.children)&&d.children.forEach(c=>{var m;c.type&&c.type.name==="ElOption"&&c.component&&c.component.proxy?u.push(c.component.proxy):(m=c.children)!=null&&m.length&&u.push(...a(c))}),u},{groupQueryChange:i}=toRaw(s);return watch(i,()=>{e.value=o.value.some(d=>d.visible===!0)},{flush:"post"}),{visible:e,ns:r}}});function _sfc_render$1(t,r,e,n,o,s){return withDirectives((openBlock(),createElementBlock("ul",{class:normalizeClass(t.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(t.ns.be("group","title"))},toDisplayString(t.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(t.ns.b("group"))},[renderSlot(t.$slots,"default")],2)])],2)),[[vShow,t.visible]])}var OptionGroup=_export_sfc(_sfc_main$e,[["render",_sfc_render$1],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const ElSelect=withInstall(Select,{Option,OptionGroup}),ElOption=withNoopInstall(Option);withNoopInstall(OptionGroup);const progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:t=>`${t}%`}}),_hoisted_1$a=["aria-valuenow"],_hoisted_2$9={viewBox:"0 0 100 100"},_hoisted_3$6=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$5=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$5={key:0},__default__$8=defineComponent({name:"ElProgress"}),_sfc_main$d=defineComponent({...__default__$8,props:progressProps,setup(t){const r=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=useNamespace("progress"),o=computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:A(r.percentage)})),s=computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),a=computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),i=computed(()=>{const V=a.value,Ce=r.type==="dashboard";return`
          M 50 50
          m 0 ${Ce?"":"-"}${V}
          a ${V} ${V} 0 1 1 0 ${Ce?"-":""}${V*2}
          a ${V} ${V} 0 1 1 0 ${Ce?"":"-"}${V*2}
          `}),d=computed(()=>2*Math.PI*a.value),u=computed(()=>r.type==="dashboard"?.75:1),c=computed(()=>`${-1*d.value*(1-u.value)/2}px`),m=computed(()=>({strokeDasharray:`${d.value*u.value}px, ${d.value}px`,strokeDashoffset:c.value})),v=computed(()=>({strokeDasharray:`${d.value*u.value*(r.percentage/100)}px, ${d.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),g=computed(()=>{let V;return r.color?V=A(r.percentage):V=e[r.status]||e.default,V}),b=computed(()=>r.status==="warning"?warning_filled_default:r.type==="line"?r.status==="success"?circle_check_default:circle_close_default:r.status==="success"?check_default:close_default),T=computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),k=computed(()=>r.format(r.percentage));function y(V){const Ce=100/V.length;return V.map((Oe,he)=>isString$2(Oe)?{color:Oe,percentage:(he+1)*Ce}:Oe).sort((Oe,he)=>Oe.percentage-he.percentage)}const A=V=>{var Ce;const{color:ie}=r;if(isFunction$3(ie))return ie(V);if(isString$2(ie))return ie;{const Oe=y(ie);for(const he of Oe)if(he.percentage>V)return he.color;return(Ce=Oe[Oe.length-1])==null?void 0:Ce.color}};return(V,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(V.type),unref(n).is(V.status),{[unref(n).m("without-text")]:!V.showText,[unref(n).m("text-inside")]:V.textInside}]),role:"progressbar","aria-valuenow":V.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[V.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(n).be("bar","outer")),style:normalizeStyle({height:`${V.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(n).be("bar","inner"),{[unref(n).bem("bar","inner","indeterminate")]:V.indeterminate},{[unref(n).bem("bar","inner","striped")]:V.striped},{[unref(n).bem("bar","inner","striped-flow")]:V.stripedFlow}]),style:normalizeStyle(unref(o))},[(V.showText||V.$slots.default)&&V.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).be("bar","innerText"))},[renderSlot(V.$slots,"default",{percentage:V.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(k)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).b("circle")),style:normalizeStyle({height:`${V.width}px`,width:`${V.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$9,[createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","track")),d:unref(i),stroke:`var(${unref(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":V.strokeLinecap,"stroke-width":unref(s),fill:"none",style:normalizeStyle(unref(m))},null,14,_hoisted_3$6),createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","path")),d:unref(i),stroke:unref(g),fill:"none",opacity:V.percentage?1:0,"stroke-linecap":V.strokeLinecap,"stroke-width":unref(s),style:normalizeStyle(unref(v))},null,14,_hoisted_4$5)]))],6)),(V.showText||V.$slots.default)&&!V.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(n).e("text")),style:normalizeStyle({fontSize:`${unref(T)}px`})},[renderSlot(V.$slots,"default",{percentage:V.percentage},()=>[V.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(b))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$5,toDisplayString(unref(k)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$a))}});var Progress=_export_sfc(_sfc_main$d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ElProgress=withInstall(Progress),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),switchEmits={[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[CHANGE_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[INPUT_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t)},_hoisted_1$9=["onClick"],_hoisted_2$8=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$5=["aria-hidden"],_hoisted_4$4=["aria-hidden"],_hoisted_5$4=["aria-hidden"],COMPONENT_NAME$1="ElSwitch",__default__$7=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$c=defineComponent({...__default__$7,props:switchProps,emits:switchEmits,setup(t,{expose:r,emit:e}){const n=t,o=getCurrentInstance(),{formItem:s}=useFormItem(),a=useFormSize(),i=useNamespace("switch");(Y=>{Y.forEach(ae=>{useDeprecated({from:ae[0],replacement:ae[1],scope:COMPONENT_NAME$1,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var Fe;return!!((Fe=o.vnode.props)!=null&&Fe[ae[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:u}=useFormItemInputId(n,{formItemContext:s}),c=useFormDisabled(computed(()=>n.loading)),m=ref(n.modelValue!==!1),v=ref(),g=ref(),b=computed(()=>[i.b(),i.m(a.value),i.is("disabled",c.value),i.is("checked",V.value)]),T=computed(()=>[i.e("label"),i.em("label","left"),i.is("active",!V.value)]),k=computed(()=>[i.e("label"),i.em("label","right"),i.is("active",V.value)]),y=computed(()=>({width:addUnit(n.width)}));watch(()=>n.modelValue,()=>{m.value=!0}),watch(()=>n.value,()=>{m.value=!1});const A=computed(()=>m.value?n.modelValue:n.value),V=computed(()=>A.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(A.value)||(e(UPDATE_MODEL_EVENT,n.inactiveValue),e(CHANGE_EVENT,n.inactiveValue),e(INPUT_EVENT,n.inactiveValue)),watch(V,Y=>{var ae;v.value.checked=Y,n.validateEvent&&((ae=s==null?void 0:s.validate)==null||ae.call(s,"change").catch(Fe=>void 0))});const Ce=()=>{const Y=V.value?n.inactiveValue:n.activeValue;e(UPDATE_MODEL_EVENT,Y),e(CHANGE_EVENT,Y),e(INPUT_EVENT,Y),nextTick(()=>{v.value.checked=V.value})},ie=()=>{if(c.value)return;const{beforeChange:Y}=n;if(!Y){Ce();return}const ae=Y();[isPromise(ae),isBoolean$1(ae)].includes(!0)||throwError(COMPONENT_NAME$1,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(ae)?ae.then(ze=>{ze&&Ce()}).catch(ze=>{}):ae&&Ce()},Oe=computed(()=>i.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),he=()=>{var Y,ae;(ae=(Y=v.value)==null?void 0:Y.focus)==null||ae.call(Y)};return onMounted(()=>{v.value.checked=V.value}),r({focus:he,checked:V}),(Y,ae)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(b)),style:normalizeStyle(unref(Oe)),onClick:withModifiers(ie,["prevent"])},[createBaseVNode("input",{id:unref(u),ref_key:"input",ref:v,class:normalizeClass(unref(i).e("input")),type:"checkbox",role:"switch","aria-checked":unref(V),"aria-disabled":unref(c),name:Y.name,"true-value":Y.activeValue,"false-value":Y.inactiveValue,disabled:unref(c),tabindex:Y.tabindex,onChange:Ce,onKeydown:withKeys(ie,["enter"])},null,42,_hoisted_2$8),!Y.inlinePrompt&&(Y.inactiveIcon||Y.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(T))},[Y.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Y.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!Y.inactiveIcon&&Y.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(V)},toDisplayString(Y.inactiveText),9,_hoisted_3$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:g,class:normalizeClass(unref(i).e("core")),style:normalizeStyle(unref(y))},[Y.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(i).e("inner"))},[Y.activeIcon||Y.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(i).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(V)?Y.activeIcon:Y.inactiveIcon)))]),_:1},8,["class"])):Y.activeText||Y.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(i).is("text")),"aria-hidden":!unref(V)},toDisplayString(unref(V)?Y.activeText:Y.inactiveText),11,_hoisted_4$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(i).e("action"))},[Y.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(i).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):Y.activeActionIcon&&unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Y.activeActionIcon)))]),_:1})):Y.inactiveActionIcon&&!unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:2},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Y.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)],2)],6),!Y.inlinePrompt&&(Y.activeIcon||Y.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(k))},[Y.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Y.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!Y.activeIcon&&Y.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(V)},toDisplayString(Y.activeText),9,_hoisted_5$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$9))}});var Switch=_export_sfc(_sfc_main$c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ElSwitch=withInstall(Switch),LEFT_CHECK_CHANGE_EVENT="left-check-change",RIGHT_CHECK_CHANGE_EVENT="right-check-change",transferProps=buildProps({data:{type:definePropType(Array),default:()=>[]},titles:{type:definePropType(Array),default:()=>[]},buttonTexts:{type:definePropType(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:definePropType(Function)},leftDefaultChecked:{type:definePropType(Array),default:()=>[]},rightDefaultChecked:{type:definePropType(Array),default:()=>[]},renderContent:{type:definePropType(Function)},modelValue:{type:definePropType(Array),default:()=>[]},format:{type:definePropType(Object),default:()=>({})},filterable:Boolean,props:{type:definePropType(Object),default:()=>mutable({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),transferCheckedChangeFn=(t,r)=>[t,r].every(isArray$4)||isArray$4(t)&&isNil(r),transferEmits={[CHANGE_EVENT]:(t,r,e)=>[t,e].every(isArray$4)&&["left","right"].includes(r),[UPDATE_MODEL_EVENT]:t=>isArray$4(t),[LEFT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn,[RIGHT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn},CHECKED_CHANGE_EVENT="checked-change",transferPanelProps=buildProps({data:transferProps.data,optionRender:{type:definePropType(Function)},placeholder:String,title:String,filterable:Boolean,format:transferProps.format,filterMethod:transferProps.filterMethod,defaultChecked:transferProps.leftDefaultChecked,props:transferProps.props}),transferPanelEmits={[CHECKED_CHANGE_EVENT]:transferCheckedChangeFn},usePropsAlias=t=>{const r={label:"label",key:"key",disabled:"disabled"};return computed(()=>({...r,...t.props}))},useCheck=(t,r,e)=>{const n=usePropsAlias(t),o=computed(()=>t.data.filter(c=>isFunction$3(t.filterMethod)?t.filterMethod(r.query,c):String(c[n.value.label]||c[n.value.key]).toLowerCase().includes(r.query.toLowerCase()))),s=computed(()=>o.value.filter(c=>!c[n.value.disabled])),a=computed(()=>{const c=r.checked.length,m=t.data.length,{noChecked:v,hasChecked:g}=t.format;return v&&g?c>0?g.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,m.toString()):v.replace(/\${total}/g,m.toString()):`${c}/${m}`}),i=computed(()=>{const c=r.checked.length;return c>0&&c<s.value.length}),d=()=>{const c=s.value.map(m=>m[n.value.key]);r.allChecked=c.length>0&&c.every(m=>r.checked.includes(m))},u=c=>{r.checked=c?s.value.map(m=>m[n.value.key]):[]};return watch(()=>r.checked,(c,m)=>{if(d(),r.checkChangeByUser){const v=c.concat(m).filter(g=>!c.includes(g)||!m.includes(g));e(CHECKED_CHANGE_EVENT,c,v)}else e(CHECKED_CHANGE_EVENT,c),r.checkChangeByUser=!0}),watch(s,()=>{d()}),watch(()=>t.data,()=>{const c=[],m=o.value.map(v=>v[n.value.key]);r.checked.forEach(v=>{m.includes(v)&&c.push(v)}),r.checkChangeByUser=!1,r.checked=c}),watch(()=>t.defaultChecked,(c,m)=>{if(m&&c.length===m.length&&c.every(b=>m.includes(b)))return;const v=[],g=s.value.map(b=>b[n.value.key]);c.forEach(b=>{g.includes(b)&&v.push(b)}),r.checkChangeByUser=!1,r.checked=v},{immediate:!0}),{filteredData:o,checkableData:s,checkedSummary:a,isIndeterminate:i,updateAllChecked:d,handleAllCheckedChange:u}},useCheckedChange=(t,r)=>({onSourceCheckedChange:(o,s)=>{t.leftChecked=o,s&&r(LEFT_CHECK_CHANGE_EVENT,o,s)},onTargetCheckedChange:(o,s)=>{t.rightChecked=o,s&&r(RIGHT_CHECK_CHANGE_EVENT,o,s)}}),useComputedData=t=>{const r=usePropsAlias(t),e=computed(()=>t.data.reduce((s,a)=>(s[a[r.value.key]]=a)&&s,{})),n=computed(()=>t.data.filter(s=>!t.modelValue.includes(s[r.value.key]))),o=computed(()=>t.targetOrder==="original"?t.data.filter(s=>t.modelValue.includes(s[r.value.key])):t.modelValue.reduce((s,a)=>{const i=e.value[a];return i&&s.push(i),s},[]));return{sourceData:n,targetData:o}},useMove=(t,r,e)=>{const n=usePropsAlias(t),o=(i,d,u)=>{e(UPDATE_MODEL_EVENT,i),e(CHANGE_EVENT,i,d,u)};return{addToLeft:()=>{const i=t.modelValue.slice();r.rightChecked.forEach(d=>{const u=i.indexOf(d);u>-1&&i.splice(u,1)}),o(i,"left",r.rightChecked)},addToRight:()=>{let i=t.modelValue.slice();const d=t.data.filter(u=>{const c=u[n.value.key];return r.leftChecked.includes(c)&&!t.modelValue.includes(c)}).map(u=>u[n.value.key]);i=t.targetOrder==="unshift"?d.concat(i):i.concat(d),t.targetOrder==="original"&&(i=t.data.filter(u=>i.includes(u[n.value.key])).map(u=>u[n.value.key])),o(i,"right",r.leftChecked)}}},__default__$6=defineComponent({name:"ElTransferPanel"}),_sfc_main$b=defineComponent({...__default__$6,props:transferPanelProps,emits:transferPanelEmits,setup(t,{expose:r,emit:e}){const n=t,o=useSlots(),s=({option:V})=>V,{t:a}=useLocale(),i=useNamespace("transfer"),d=reactive({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),u=usePropsAlias(n),{filteredData:c,checkedSummary:m,isIndeterminate:v,handleAllCheckedChange:g}=useCheck(n,d,e),b=computed(()=>!isEmpty(d.query)&&isEmpty(c.value)),T=computed(()=>!isEmpty(o.default()[0].children)),{checked:k,allChecked:y,query:A}=toRefs(d);return r({query:A}),(V,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(i).b("panel"))},[createBaseVNode("p",{class:normalizeClass(unref(i).be("panel","header"))},[createVNode(unref(ElCheckbox),{modelValue:unref(y),"onUpdate:modelValue":Ce[0]||(Ce[0]=ie=>isRef(y)?y.value=ie:null),indeterminate:unref(v),"validate-event":!1,onChange:unref(g)},{default:withCtx(()=>[createTextVNode(toDisplayString(V.title)+" ",1),createBaseVNode("span",null,toDisplayString(unref(m)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),createBaseVNode("div",{class:normalizeClass([unref(i).be("panel","body"),unref(i).is("with-footer",unref(T))])},[V.filterable?(openBlock(),createBlock(unref(ElInput),{key:0,modelValue:unref(A),"onUpdate:modelValue":Ce[1]||(Ce[1]=ie=>isRef(A)?A.value=ie:null),class:normalizeClass(unref(i).be("panel","filter")),size:"default",placeholder:V.placeholder,"prefix-icon":unref(search_default),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElCheckboxGroup),{modelValue:unref(k),"onUpdate:modelValue":Ce[2]||(Ce[2]=ie=>isRef(k)?k.value=ie:null),"validate-event":!1,class:normalizeClass([unref(i).is("filterable",V.filterable),unref(i).be("panel","list")])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),ie=>(openBlock(),createBlock(unref(ElCheckbox),{key:ie[unref(u).key],class:normalizeClass(unref(i).be("panel","item")),label:ie[unref(u).key],disabled:ie[unref(u).disabled],"validate-event":!1},{default:withCtx(()=>{var Oe;return[createVNode(s,{option:(Oe=V.optionRender)==null?void 0:Oe.call(V,ie)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[vShow,!unref(b)&&!unref(isEmpty)(V.data)]]),withDirectives(createBaseVNode("p",{class:normalizeClass(unref(i).be("panel","empty"))},toDisplayString(unref(b)?unref(a)("el.transfer.noMatch"):unref(a)("el.transfer.noData")),3),[[vShow,unref(b)||unref(isEmpty)(V.data)]])],2),unref(T)?(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(i).be("panel","footer"))},[renderSlot(V.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var TransferPanel=_export_sfc(_sfc_main$b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const _hoisted_1$8={key:0},_hoisted_2$7={key:0},__default__$5=defineComponent({name:"ElTransfer"}),_sfc_main$a=defineComponent({...__default__$5,props:transferProps,emits:transferEmits,setup(t,{expose:r,emit:e}){const n=t,o=useSlots(),{t:s}=useLocale(),a=useNamespace("transfer"),{formItem:i}=useFormItem(),d=reactive({leftChecked:[],rightChecked:[]}),u=usePropsAlias(n),{sourceData:c,targetData:m}=useComputedData(n),{onSourceCheckedChange:v,onTargetCheckedChange:g}=useCheckedChange(d,e),{addToLeft:b,addToRight:T}=useMove(n,d,e),k=ref(),y=ref(),A=Y=>{switch(Y){case"left":k.value.query="";break;case"right":y.value.query="";break}},V=computed(()=>n.buttonTexts.length===2),Ce=computed(()=>n.titles[0]||s("el.transfer.titles.0")),ie=computed(()=>n.titles[1]||s("el.transfer.titles.1")),Oe=computed(()=>n.filterPlaceholder||s("el.transfer.filterPlaceholder"));watch(()=>n.modelValue,()=>{var Y;n.validateEvent&&((Y=i==null?void 0:i.validate)==null||Y.call(i,"change").catch(ae=>void 0))});const he=computed(()=>Y=>n.renderContent?n.renderContent(h,Y):o.default?o.default({option:Y}):h("span",Y[u.value.label]||Y[u.value.key]));return r({clearQuery:A,leftPanel:k,rightPanel:y}),(Y,ae)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(a).b())},[createVNode(TransferPanel,{ref_key:"leftPanel",ref:k,data:unref(c),"option-render":unref(he),placeholder:unref(Oe),title:unref(Ce),filterable:Y.filterable,format:Y.format,"filter-method":Y.filterMethod,"default-checked":Y.leftDefaultChecked,props:n.props,onCheckedChange:unref(v)},{default:withCtx(()=>[renderSlot(Y.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),createBaseVNode("div",{class:normalizeClass(unref(a).e("buttons"))},[createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(a).e("button"),unref(a).is("with-texts",unref(V))]),disabled:unref(isEmpty)(d.rightChecked),onClick:unref(b)},{default:withCtx(()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),unref(isUndefined$1)(Y.buttonTexts[0])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_1$8,toDisplayString(Y.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(a).e("button"),unref(a).is("with-texts",unref(V))]),disabled:unref(isEmpty)(d.leftChecked),onClick:unref(T)},{default:withCtx(()=>[unref(isUndefined$1)(Y.buttonTexts[1])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_2$7,toDisplayString(Y.buttonTexts[1]),1)),createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),createVNode(TransferPanel,{ref_key:"rightPanel",ref:y,data:unref(m),"option-render":unref(he),placeholder:unref(Oe),filterable:Y.filterable,format:Y.format,"filter-method":Y.filterMethod,title:unref(ie),"default-checked":Y.rightDefaultChecked,props:n.props,onCheckedChange:unref(g)},{default:withCtx(()=>[renderSlot(Y.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Transfer=_export_sfc(_sfc_main$a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const ElTransfer=withInstall(Transfer),uploadContextKey=Symbol("uploadContextKey"),SCOPE$1="ElUpload";class UploadAjaxError extends Error{constructor(r,e,n,o){super(r),this.name="UploadAjaxError",this.status=e,this.method=n,this.url=o}}function getError(t,r,e){let n;return e.response?n=`${e.response.error||e.response}`:e.responseText?n=`${e.responseText}`:n=`fail to ${r.method} ${t} ${e.status}`,new UploadAjaxError(n,e.status,r.method,t)}function getBody(t){const r=t.responseText||t.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const ajaxUpload=t=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$1,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,e=t.action;r.upload&&r.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,t.onProgress(a)});const n=new FormData;if(t.data)for(const[s,a]of Object.entries(t.data))isArray$4(a)&&a.length?n.append(s,...a):n.append(s,a);n.append(t.filename,t.file,t.file.name),r.addEventListener("error",()=>{t.onError(getError(e,t,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return t.onError(getError(e,t,r));t.onSuccess(getBody(r))}),r.open(t.method,e,!0),t.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const o=t.headers||{};if(o instanceof Headers)o.forEach((s,a)=>r.setRequestHeader(a,s));else for(const[s,a]of Object.entries(o))isNil(a)||r.setRequestHeader(s,String(a));return r.send(n),r},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"}}),uploadListEmits={remove:t=>!!t},_hoisted_1$7=["onKeydown"],_hoisted_2$6=["src"],_hoisted_3$4=["onClick"],_hoisted_4$3=["title"],_hoisted_5$3=["onClick"],_hoisted_6$2=["onClick"],__default__$4=defineComponent({name:"ElUploadList"}),_sfc_main$9=defineComponent({...__default__$4,props:uploadListProps,emits:uploadListEmits,setup(t,{emit:r}){const{t:e}=useLocale(),n=useNamespace("upload"),o=useNamespace("icon"),s=useNamespace("list"),a=useFormDisabled(),i=ref(!1),d=u=>{r("remove",u)};return(u,c)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass([unref(n).b("list"),unref(n).bm("list",u.listType),unref(n).is("disabled",unref(a))]),name:unref(s).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.files,m=>(openBlock(),createElementBlock("li",{key:m.uid||m.name,class:normalizeClass([unref(n).be("list","item"),unref(n).is(m.status),{focusing:i.value}]),tabindex:"0",onKeydown:withKeys(v=>!unref(a)&&d(m),["delete"]),onFocus:c[0]||(c[0]=v=>i.value=!0),onBlur:c[1]||(c[1]=v=>i.value=!1),onClick:c[2]||(c[2]=v=>i.value=!1)},[renderSlot(u.$slots,"default",{file:m},()=>[u.listType==="picture"||m.status!=="uploading"&&u.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(n).be("list","item-thumbnail")),src:m.url,alt:""},null,10,_hoisted_2$6)):createCommentVNode("v-if",!0),m.status==="uploading"||u.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(n).be("list","item-name")),onClick:withModifiers(v=>u.handlePreview(m),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(o).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(n).be("list","item-file-name")),title:m.name},toDisplayString(m.name),11,_hoisted_4$3)],10,_hoisted_3$4),m.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:u.listType==="picture-card"?"circle":"line","stroke-width":u.listType==="picture-card"?6:2,percentage:Number(m.percentage),style:normalizeStyle(u.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(n).be("list","item-status-label"))},[u.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(o).m("upload-success"),unref(o).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(u.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(o).m("upload-success"),unref(o).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(a)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(o).m("close")),onClick:v=>d(m)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(a)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(o).m("close-tip"))},toDisplayString(unref(e)("el.upload.deleteTip")),3)),u.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(n).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(n).be("list","item-preview")),onClick:v=>u.handlePreview(m)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(o).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$3),unref(a)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(n).be("list","item-delete")),onClick:v=>d(m)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(o).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$2))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$7))),128)),renderSlot(u.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc(_sfc_main$9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:t=>isArray$4(t)},_hoisted_1$6=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$3=defineComponent({name:COMPONENT_NAME}),_sfc_main$8=defineComponent({...__default__$3,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(t,{emit:r}){const e=inject(uploadContextKey);e||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=useNamespace("upload"),o=ref(!1),s=useFormDisabled(),a=d=>{if(s.value)return;o.value=!1,d.stopPropagation();const u=Array.from(d.dataTransfer.files),c=e.accept.value;if(!c){r("file",u);return}const m=u.filter(v=>{const{type:g,name:b}=v,T=b.includes(".")?`.${b.split(".").pop()}`:"",k=g.replace(/\/.*$/,"");return c.split(",").map(y=>y.trim()).filter(y=>y).some(y=>y.startsWith(".")?T===y:/\/\*$/.test(y)?k===y.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(y)?g===y:!1)});r("file",m)},i=()=>{s.value||(o.value=!0)};return(d,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b("dragger"),unref(n).is("dragover",o.value)]),onDrop:withModifiers(a,["prevent"]),onDragover:withModifiers(i,["prevent"]),onDragleave:u[0]||(u[0]=withModifiers(c=>o.value=!1,["prevent"]))},[renderSlot(d.$slots,"default")],42,_hoisted_1$6))}});var UploadDragger=_export_sfc(_sfc_main$8,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$5=["onKeydown"],_hoisted_2$5=["name","multiple","accept"],__default__$2=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$7=defineComponent({...__default__$2,props:uploadContentProps,setup(t,{expose:r}){const e=t,n=useNamespace("upload"),o=useFormDisabled(),s=shallowRef({}),a=shallowRef(),i=b=>{if(b.length===0)return;const{autoUpload:T,limit:k,fileList:y,multiple:A,onStart:V,onExceed:Ce}=e;if(k&&y.length+b.length>k){Ce(b,y);return}A||(b=b.slice(0,1));for(const ie of b){const Oe=ie;Oe.uid=genFileId(),V(Oe),T&&d(Oe)}},d=async b=>{if(a.value.value="",!e.beforeUpload)return u(b);let T,k={};try{const A=e.data,V=e.beforeUpload(b);k=isObject$2(e.data)?cloneDeep(e.data):e.data,T=await V,isObject$2(e.data)&&isEqual(A,k)&&(k=cloneDeep(e.data))}catch{T=!1}if(T===!1){e.onRemove(b);return}let y=b;T instanceof Blob&&(T instanceof File?y=T:y=new File([T],b.name,{type:b.type})),u(Object.assign(y,{uid:b.uid}),k)},u=(b,T)=>{const{headers:k,data:y,method:A,withCredentials:V,name:Ce,action:ie,onProgress:Oe,onSuccess:he,onError:Y,httpRequest:ae}=e,{uid:Fe}=b,ze={headers:k||{},withCredentials:V,file:b,data:T??y,method:A,filename:Ce,action:ie,onProgress:le=>{Oe(le,b)},onSuccess:le=>{he(le,b),delete s.value[Fe]},onError:le=>{Y(le,b),delete s.value[Fe]}},pe=ae(ze);s.value[Fe]=pe,pe instanceof Promise&&pe.then(ze.onSuccess,ze.onError)},c=b=>{const T=b.target.files;T&&i(Array.from(T))},m=()=>{o.value||(a.value.value="",a.value.click())},v=()=>{m()};return r({abort:b=>{entriesOf(s.value).filter(b?([k])=>String(b.uid)===k:()=>!0).forEach(([k,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete s.value[k]})},upload:d}),(b,T)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(b.listType),unref(n).is("drag",b.drag)]),tabindex:"0",onClick:m,onKeydown:withKeys(withModifiers(v,["self"]),["enter","space"])},[b.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(o),onFile:i},{default:withCtx(()=>[renderSlot(b.$slots,"default")]),_:3},8,["disabled"])):renderSlot(b.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:a,class:normalizeClass(unref(n).e("input")),name:b.name,multiple:b.multiple,accept:b.accept,type:"file",onChange:c,onClick:T[0]||(T[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$5)],42,_hoisted_1$5))}});var UploadContent=_export_sfc(_sfc_main$7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const SCOPE="ElUpload",revokeObjectURL=t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)},useHandlers=(t,r)=>{const e=useVModel(t,"fileList",void 0,{passive:!0}),n=v=>e.value.find(g=>g.uid===v.uid);function o(v){var g;(g=r.value)==null||g.abort(v)}function s(v=["ready","uploading","success","fail"]){e.value=e.value.filter(g=>!v.includes(g.status))}const a=(v,g)=>{const b=n(g);b&&(console.error(v),b.status="fail",e.value.splice(e.value.indexOf(b),1),t.onError(v,b,e.value),t.onChange(b,e.value))},i=(v,g)=>{const b=n(g);b&&(t.onProgress(v,b,e.value),b.status="uploading",b.percentage=Math.round(v.percent))},d=(v,g)=>{const b=n(g);b&&(b.status="success",b.response=v,t.onSuccess(v,b,e.value),t.onChange(b,e.value))},u=v=>{isNil(v.uid)&&(v.uid=genFileId());const g={name:v.name,percentage:0,status:"ready",size:v.size,raw:v,uid:v.uid};if(t.listType==="picture-card"||t.listType==="picture")try{g.url=URL.createObjectURL(v)}catch(b){b.message,t.onError(b,g,e.value)}e.value=[...e.value,g],t.onChange(g,e.value)},c=async v=>{const g=v instanceof File?n(v):v;g||throwError(SCOPE,"file to be removed not found");const b=T=>{o(T);const k=e.value;k.splice(k.indexOf(T),1),t.onRemove(T,k),revokeObjectURL(T)};t.beforeRemove?await t.beforeRemove(g,e.value)!==!1&&b(g):b(g)};function m(){e.value.filter(({status:v})=>v==="ready").forEach(({raw:v})=>{var g;return v&&((g=r.value)==null?void 0:g.upload(v))})}return watch(()=>t.listType,v=>{v!=="picture-card"&&v!=="picture"||(e.value=e.value.map(g=>{const{raw:b,url:T}=g;if(!T&&b)try{g.url=URL.createObjectURL(b)}catch(k){t.onError(k,g,e.value)}return g}))}),watch(e,v=>{for(const g of v)g.uid||(g.uid=genFileId()),g.status||(g.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:o,clearFiles:s,handleError:a,handleProgress:i,handleStart:u,handleSuccess:d,handleRemove:c,submit:m}},__default__$1=defineComponent({name:"ElUpload"}),_sfc_main$6=defineComponent({...__default__$1,props:uploadProps,setup(t,{expose:r}){const e=t,n=useFormDisabled(),o=shallowRef(),{abort:s,submit:a,clearFiles:i,uploadFiles:d,handleStart:u,handleError:c,handleRemove:m,handleSuccess:v,handleProgress:g}=useHandlers(e,o),b=computed(()=>e.listType==="picture-card"),T=computed(()=>({...e,fileList:d.value,onStart:u,onProgress:g,onSuccess:v,onError:c,onRemove:m}));return onBeforeUnmount(()=>{d.value.forEach(({url:k})=>{k!=null&&k.startsWith("blob:")&&URL.revokeObjectURL(k)})}),provide(uploadContextKey,{accept:toRef(e,"accept")}),r({abort:s,submit:a,clearFiles:i,handleStart:u,handleRemove:m}),(k,y)=>(openBlock(),createElementBlock("div",null,[unref(b)&&k.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(n),"list-type":k.listType,files:unref(d),"handle-preview":k.onPreview,onRemove:unref(m)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:o},unref(T)),{default:withCtx(()=>[k.$slots.trigger?renderSlot(k.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!k.$slots.trigger&&k.$slots.default?renderSlot(k.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[k.$slots.file?{name:"default",fn:withCtx(({file:A})=>[renderSlot(k.$slots,"file",{file:A})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(b)||unref(b)&&!k.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:o},unref(T)),{default:withCtx(()=>[k.$slots.trigger?renderSlot(k.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!k.$slots.trigger&&k.$slots.default?renderSlot(k.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),k.$slots.trigger?renderSlot(k.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(k.$slots,"tip"),!unref(b)&&k.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(n),"list-type":k.listType,files:unref(d),"handle-preview":k.onPreview,onRemove:unref(m)},createSlots({_:2},[k.$slots.file?{name:"default",fn:withCtx(({file:A})=>[renderSlot(k.$slots,"file",{file:A})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc(_sfc_main$6,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const ElUpload=withInstall(Upload),messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=t=>{const r=instances.findIndex(o=>o.id===t),e=instances[r];let n;return r>0&&(n=instances[r-1]),{current:e,prev:n}},getLastOffset=t=>{const{prev:r}=getInstance(t);return r?r.vm.exposed.bottom.value:0},getOffsetOrSpace=(t,r)=>instances.findIndex(n=>n.id===t)>0?20:r,_hoisted_1$4=["id"],_hoisted_2$4=["innerHTML"],__default__=defineComponent({name:"ElMessage"}),_sfc_main$5=defineComponent({...__default__,props:messageProps,emits:messageEmits,setup(t,{expose:r}){const e=t,{Close:n}=TypeComponents,{ns:o,zIndex:s}=useGlobalComponentSettings("message"),{currentZIndex:a,nextZIndex:i}=s,d=ref(),u=ref(!1),c=ref(0);let m;const v=computed(()=>e.type?e.type==="error"?"danger":e.type:"info"),g=computed(()=>{const he=e.type;return{[o.bm("icon",he)]:he&&TypeComponentsMap[he]}}),b=computed(()=>e.icon||TypeComponentsMap[e.type]||""),T=computed(()=>getLastOffset(e.id)),k=computed(()=>getOffsetOrSpace(e.id,e.offset)+T.value),y=computed(()=>c.value+k.value),A=computed(()=>({top:`${k.value}px`,zIndex:a.value}));function V(){e.duration!==0&&({stop:m}=useTimeoutFn(()=>{ie()},e.duration))}function Ce(){m==null||m()}function ie(){u.value=!1}function Oe({code:he}){he===EVENT_CODE.esc&&ie()}return onMounted(()=>{V(),i(),u.value=!0}),watch(()=>e.repeatNum,()=>{Ce(),V()}),useEventListener(document,"keydown",Oe),useResizeObserver(d,()=>{c.value=d.value.getBoundingClientRect().height}),r({visible:u,bottom:y,close:ie}),(he,Y)=>(openBlock(),createBlock(Transition,{name:unref(o).b("fade"),onBeforeLeave:he.onClose,onAfterLeave:Y[0]||(Y[0]=ae=>he.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:he.id,ref_key:"messageRef",ref:d,class:normalizeClass([unref(o).b(),{[unref(o).m(he.type)]:he.type&&!he.icon},unref(o).is("center",he.center),unref(o).is("closable",he.showClose),he.customClass]),style:normalizeStyle(unref(A)),role:"alert",onMouseenter:Ce,onMouseleave:V},[he.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:he.repeatNum,type:unref(v),class:normalizeClass(unref(o).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(b)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(o).e("icon"),unref(g)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(b))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(he.$slots,"default",{},()=>[he.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(o).e("content")),innerHTML:he.message},null,10,_hoisted_2$4)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(o).e("content"))},toDisplayString(he.message),3))]),he.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(o).e("closeBtn")),onClick:withModifiers(ie,["stop"])},{default:withCtx(()=>[createVNode(unref(n))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$4),[[vShow,u.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc(_sfc_main$5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let seed=1;const normalizeOptions=t=>{const r=!t||isString$2(t)||isVNode(t)||isFunction$3(t)?{message:t}:t,e={...messageDefaults,...r};if(!e.appendTo)e.appendTo=document.body;else if(isString$2(e.appendTo)){let n=document.querySelector(e.appendTo);isElement(n)||(n=document.body),e.appendTo=n}return e},closeMessage=t=>{const r=instances.indexOf(t);if(r===-1)return;instances.splice(r,1);const{handler:e}=t;e.close()},createMessage=({appendTo:t,...r},e)=>{const n=`message_${seed++}`,o=r.onClose,s=document.createElement("div"),a={...r,id:n,onClose:()=>{o==null||o(),closeMessage(c)},onDestroy:()=>{render(null,s)}},i=createVNode(MessageConstructor,a,isFunction$3(a.message)||isVNode(a.message)?{default:isFunction$3(a.message)?a.message:()=>a.message}:null);i.appContext=e||message._context,render(i,s),t.appendChild(s.firstElementChild);const d=i.component,c={id:n,vnode:i,vm:d,handler:{close:()=>{d.exposed.visible.value=!1}},props:i.component.props};return c},message=(t={},r)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const e=normalizeOptions(t);if(e.grouping&&instances.length){const o=instances.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===e.message});if(o)return o.props.repeatNum+=1,o.props.type=e.type,o.handler}const n=createMessage(e,r);return instances.push(n),n.handler};messageTypes.forEach(t=>{message[t]=(r={},e)=>{const n=normalizeOptions(r);return message({...n,type:t},e)}});function closeAll(t){for(const r of instances)(!t||t===r.props.type)&&r.handler.close()}message.closeAll=closeAll;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$4=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:r}){const{locale:e,zIndex:n,ns:o,size:s}=useGlobalComponentSettings("message-box",computed(()=>t.buttonSize)),{t:a}=e,{nextZIndex:i}=n,d=ref(!1),u=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),c=computed(()=>{const ue=u.type;return{[o.bm("icon",ue)]:ue&&TypeComponentsMap[ue]}}),m=useId(),v=useId(),g=computed(()=>u.icon||TypeComponentsMap[u.type]||""),b=computed(()=>!!u.message),T=ref(),k=ref(),y=ref(),A=ref(),V=ref(),Ce=computed(()=>u.confirmButtonClass);watch(()=>u.inputValue,async ue=>{await nextTick(),t.boxType==="prompt"&&ue!==null&&ze()},{immediate:!0}),watch(()=>d.value,ue=>{var Ve,Ue;ue&&(t.boxType!=="prompt"&&(u.autofocus?y.value=(Ue=(Ve=V.value)==null?void 0:Ve.$el)!=null?Ue:T.value:y.value=T.value),u.zIndex=i()),t.boxType==="prompt"&&(ue?nextTick().then(()=>{var er;A.value&&A.value.$el&&(u.autofocus?y.value=(er=pe())!=null?er:T.value:y.value=T.value)}):(u.editorErrorMessage="",u.validateError=!1))});const ie=computed(()=>t.draggable);useDraggable(T,k,ie),onMounted(async()=>{await nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",Oe)}),onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",Oe)});function Oe(){d.value&&(d.value=!1,nextTick(()=>{u.action&&r("action",u.action)}))}const he=()=>{t.closeOnClickModal&&Fe(u.distinguishCancelAndClose?"close":"cancel")},Y=useSameTarget(he),ae=ue=>{if(u.inputType!=="textarea")return ue.preventDefault(),Fe("confirm")},Fe=ue=>{var Ve;t.boxType==="prompt"&&ue==="confirm"&&!ze()||(u.action=ue,u.beforeClose?(Ve=u.beforeClose)==null||Ve.call(u,ue,u,Oe):Oe())},ze=()=>{if(t.boxType==="prompt"){const ue=u.inputPattern;if(ue&&!ue.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;const Ve=u.inputValidator;if(typeof Ve=="function"){const Ue=Ve(u.inputValue);if(Ue===!1)return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;if(typeof Ue=="string")return u.editorErrorMessage=Ue,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},pe=()=>{const ue=A.value.$refs;return ue.input||ue.textarea},le=()=>{Fe("close")},xe=()=>{t.closeOnPressEscape&&le()};return t.lockScroll&&useLockscreen(d),{...toRefs(u),ns:o,overlayEvent:Y,visible:d,hasMessage:b,typeClass:c,contentId:m,inputId:v,btnSize:s,iconComponent:g,confirmButtonClasses:Ce,rootRef:T,focusStartRef:y,headerRef:k,inputRef:A,confirmRef:V,doClose:Oe,handleClose:le,onCloseRequested:xe,handleWrapperClick:he,handleInputEnter:ae,handleAction:Fe,t:a}}}),_hoisted_1$3=["aria-label","aria-describedby"],_hoisted_2$3=["aria-label"],_hoisted_3$3=["id"];function _sfc_render(t,r,e,n,o,s){const a=resolveComponent("el-icon"),i=resolveComponent("close"),d=resolveComponent("el-input"),u=resolveComponent("el-button"),c=resolveComponent("el-focus-trap"),m=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:r[11]||(r[11]=v=>t.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(m,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:r[8]||(r[8]=(...v)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...v)),onMousedown:r[9]||(r[9]=(...v)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...v)),onMouseup:r[10]||(r[10]=(...v)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...v))},[createVNode(c,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:normalizeStyle(t.customStyle),tabindex:"-1",onClick:r[7]||(r[7]=withModifiers(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass(t.ns.e("header"))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(openBlock(),createBlock(a,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString(t.title),1)],2),t.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:r[0]||(r[0]=v=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:r[1]||(r[1]=withKeys(withModifiers(v=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode(a,{class:normalizeClass(t.ns.e("close"))},{default:withCtx(()=>[createVNode(i)]),_:1},8,["class"])],42,_hoisted_2$3)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:t.contentId,class:normalizeClass(t.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(openBlock(),createBlock(a,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("message"))},[renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(t.ns.e("input"))},[createVNode(d,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":r[2]||(r[2]=v=>t.inputValue=v),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:normalizeClass({invalid:t.validateError}),onKeydown:withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(t.ns.e("errormsg")),style:normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},toDisplayString(t.editorErrorMessage),7)],2),[[vShow,t.showInput]])],10,_hoisted_3$3),createBaseVNode("div",{class:normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(openBlock(),createBlock(u,{key:0,loading:t.cancelButtonLoading,class:normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:r[3]||(r[3]=v=>t.handleAction("cancel")),onKeydown:r[4]||(r[4]=withKeys(withModifiers(v=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode(u,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:r[5]||(r[5]=v=>t.handleAction("confirm")),onKeydown:r[6]||(r[6]=withKeys(withModifiers(v=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$3)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,t.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc(_sfc_main$4,[["render",_sfc_render],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const messageInstance=new Map,getAppendToElement=t=>{let r=document.body;return t.appendTo&&(isString$2(t.appendTo)&&(r=document.querySelector(t.appendTo)),isElement(t.appendTo)&&(r=t.appendTo),isElement(r)||(r=document.body)),r},initInstance=(t,r,e=null)=>{const n=createVNode(MessageBoxConstructor,t,isFunction$3(t.message)||isVNode(t.message)?{default:isFunction$3(t.message)?t.message:()=>t.message}:null);return n.appContext=e,render(n,r),getAppendToElement(t).appendChild(r.firstElementChild),n.component},genContainer=()=>document.createElement("div"),showMessage=(t,r)=>{const e=genContainer();t.onVanish=()=>{render(null,e),messageInstance.delete(o)},t.onAction=s=>{const a=messageInstance.get(o);let i;t.showInput?i={value:o.inputValue,action:s}:i=s,t.callback?t.callback(i,n.proxy):s==="cancel"||s==="close"?t.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(i)};const n=initInstance(t,e,r),o=n.proxy;for(const s in t)hasOwn(t,s)&&!hasOwn(o.$props,s)&&(o[s]=t[s]);return o.visible=!0,o};function MessageBox(t,r=null){if(!isClient)return Promise.reject();let e;return isString$2(t)||isVNode(t)?t={message:t}:e=t.callback,new Promise((n,o)=>{const s=showMessage(t,r??MessageBox._context);messageInstance.set(s,{options:t,callback:e,resolve:n,reject:o})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(t=>{MessageBox[t]=messageBoxFactory(t)});function messageBoxFactory(t){return(r,e,n,o)=>{let s="";return isObject$2(e)?(n=e,s=""):isUndefined$1(e)?s="":s=e,MessageBox(Object.assign({title:s,message:r,type:"",...MESSAGE_BOX_DEFAULT_OPTS[t]},n,{boxType:t}),o)}}MessageBox.close=()=>{messageInstance.forEach((t,r)=>{r.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=t=>{_MessageBox._context=t._context,t.config.globalProperties.$msgbox=_MessageBox,t.config.globalProperties.$messageBox=_MessageBox,t.config.globalProperties.$alert=_MessageBox.alert,t.config.globalProperties.$confirm=_MessageBox.confirm,t.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,base="",elContainer="",elAside="",elFooter="",elHeader="",elMain="",elRow="",elCol="",elImage="",elImageViewer="",elButton="",elButtonGroup="",elPopper="",elScrollbar="",elDropdown="",elDropdownMenu="",elDropdownItem="",elIcon="";function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((r=kindOf(t))==="formdata"||r==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,o;if(typeof t!="object"&&(t=[t]),isArray(t))for(n=0,o=t.length;n<o;n++)r.call(null,t[n],n,t);else{const s=e?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let i;for(n=0;n<a;n++)i=s[n],r.call(null,t[i],i,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,o;for(;n-- >0;)if(o=e[n],r===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,o)=>{const s=t&&findKey(r,o)||o;isPlainObject(r[s])&&isPlainObject(n)?r[s]=merge(r[s],n):isPlainObject(n)?r[s]=merge({},n):isArray(n)?r[s]=n.slice():r[s]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(o,s)=>{e&&isFunction(o)?t[s]=bind(o,e):t[s]=o},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let o,s,a;const i={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!n||n(a,t,r))&&!i[a]&&(r[a]=t[a],i[a]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const s=o.value;r.call(t,s[0],s[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(o,s)=>{let a;(a=r(o,s,t))!==!1&&(n[s]=a||o)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=o=>{o.forEach(s=>{e[s]=!0})};return isArray(t)?n(t):n(String(t).split(r)),e},noop=()=>{},toFiniteNumber=(t,r)=>(t=+t,Number.isFinite(t)?t:r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,o)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[o]=n;const s=isArray(n)?[]:{};return forEach(n,(a,i)=>{const d=e(a,o+1);!isUndefined(d)&&(s[i]=d)}),r[o]=void 0,s}}return n};return e(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,r,e,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,o,s)=>{const a=Object.create(prototype$1);return utils.toFlatObject(t,a,function(d){return d!==Error.prototype},i=>i!=="isAxiosError"),AxiosError.call(a,t.message,r,e,n,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const httpAdapter=null;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(o,s){return o=removeBrackets(o),!e&&s?"["+o+"]":o}).join(e?".":""):r}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,k){return!utils.isUndefined(k[T])});const n=e.metaTokens,o=e.visitor||c,s=e.dots,a=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(r);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(utils.isDate(b))return b.toISOString();if(!d&&utils.isBlob(b))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(b)||utils.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function c(b,T,k){let y=b;if(b&&!k&&typeof b=="object"){if(utils.endsWith(T,"{}"))T=n?T:T.slice(0,-2),b=JSON.stringify(b);else if(utils.isArray(b)&&isFlatArray(b)||(utils.isFileList(b)||utils.endsWith(T,"[]"))&&(y=utils.toArray(b)))return T=removeBrackets(T),y.forEach(function(V,Ce){!(utils.isUndefined(V)||V===null)&&r.append(a===!0?renderKey([T],Ce,s):a===null?T:T+"[]",u(V))}),!1}return isVisitable(b)?!0:(r.append(renderKey(k,T,s),u(b)),!1)}const m=[],v=Object.assign(predicates,{defaultVisitor:c,convertValue:u,isVisitable});function g(b,T){if(!utils.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+T.join("."));m.push(b),utils.forEach(b,function(y,A){(!(utils.isUndefined(y)||y===null)&&o.call(r,y,utils.isString(A)?A.trim():A,T,v))===!0&&g(y,T?T.concat(A):[A])}),m.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return g(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,o=e&&e.serialize;let s;if(o?s=o(r,e):s=utils.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,o,s){return platform.isNode&&utils.isBuffer(e)?(this.append(n,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const o=e.length;let s;for(n=0;n<o;n++)s=e[n],r[s]=t[s];return r}function formDataToJSON(t){function r(e,n,o,s){let a=e[s++];const i=Number.isFinite(+a),d=s>=e.length;return a=!a&&utils.isArray(o)?o.length:a,d?(utils.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!i):((!o[a]||!utils.isObject(o[a]))&&(o[a]=[]),r(e,n,o[a],s)&&utils.isArray(o[a])&&(o[a]=arrayToObject(o[a])),!i)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const e={};return utils.forEachEntry(t,(n,o)=>{r(parsePropPath(n),o,e,0)}),e}return null}function stringifySafely(t,r,e){if(utils.isString(t))try{return(r||JSON.parse)(t),utils.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:platform.isNode?"http":"xhr",transformRequest:[function(r,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,s=utils.isObject(r);if(s&&utils.isHTMLForm(r)&&(r=new FormData(r)),utils.isFormData(r))return o&&o?JSON.stringify(formDataToJSON(r)):r;if(utils.isArrayBuffer(r)||utils.isBuffer(r)||utils.isStream(r)||utils.isFile(r)||utils.isBlob(r))return r;if(utils.isArrayBufferView(r))return r.buffer;if(utils.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((i=utils.isFileList(r))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return toFormData(i?{"files[]":r}:r,d&&new d,this.formSerializer)}}return s||o?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(r&&utils.isString(r)&&(n&&!this.responseType||o)){const a=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(i){if(a)throw i.name==="SyntaxError"?AxiosError.from(i,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):i}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),e=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,r,e,n,o){if(utils.isFunction(n))return n.call(this,r,e);if(o&&(r=e),!!utils.isString(r)){if(utils.isString(n))return r.indexOf(n)!==-1;if(utils.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(o,s,a){return this[n].call(this,r,o,s,a)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const o=this;function s(i,d,u){const c=normalizeHeader(d);if(!c)throw new Error("header name must be a non-empty string");const m=utils.findKey(o,c);(!m||o[m]===void 0||u===!0||u===void 0&&o[m]!==!1)&&(o[m||d]=normalizeValue(i))}const a=(i,d)=>utils.forEach(i,(u,c)=>s(u,c,d));return utils.isPlainObject(r)||r instanceof this.constructor?a(r,e):utils.isString(r)&&(r=r.trim())&&!isValidHeaderName(r)?a(parseHeaders(r),e):r!=null&&s(e,r,n),this}get(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);if(n){const o=this[n];if(!e)return o;if(e===!0)return parseTokens(o);if(utils.isFunction(e))return e.call(this,o,n);if(utils.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let o=!1;function s(a){if(a=normalizeHeader(a),a){const i=utils.findKey(n,a);i&&(!e||matchHeaderValue(n,n[i],i,e))&&(delete n[i],o=!0)}}return utils.isArray(r)?r.forEach(s):s(r),o}clear(r){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const s=e[n];(!r||matchHeaderValue(this,this[s],s,r,!0))&&(delete this[s],o=!0)}return o}normalize(r){const e=this,n={};return utils.forEach(this,(o,s)=>{const a=utils.findKey(n,s);if(a){e[a]=normalizeValue(o),delete e[s];return}const i=r?formatHeader(s):String(s).trim();i!==s&&delete e[s],e[i]=normalizeValue(o),n[i]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils.forEach(this,(n,o)=>{n!=null&&n!==!1&&(e[o]=r&&utils.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(o=>n.set(o)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function s(a){const i=normalizeHeader(a);n[i]||(buildAccessors(o,a),n[i]=!0)}return utils.isArray(r)?r.forEach(s):s(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.reduceDescriptors(AxiosHeaders.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,o=AxiosHeaders$1.from(n.headers);let s=n.data;return utils.forEach(t,function(i){s=i.call(e,s,o.normalize(),r?r.status:void 0)}),o.normalize(),s}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(e,n,o,s,a,i){const d=[];d.push(e+"="+encodeURIComponent(n)),utils.isNumber(o)&&d.push("expires="+new Date(o).toGMTString()),utils.isString(s)&&d.push("path="+s),utils.isString(a)&&d.push("domain="+a),i===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(s){let a=s;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(a){const i=utils.isString(a)?o(a):a;return i.protocol===n.protocol&&i.host===n.host}}():function(){return function(){return!0}}();function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let o=0,s=0,a;return r=r!==void 0?r:1e3,function(d){const u=Date.now(),c=n[s];a||(a=u),e[o]=d,n[o]=u;let m=s,v=0;for(;m!==o;)v+=e[m++],m=m%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),u-a<r)return;const g=c&&u-c;return g?Math.round(v*1e3/g):void 0}}function progressEventReducer(t,r){let e=0;const n=speedometer(50,250);return o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,i=s-e,d=n(i),u=s<=a;e=s;const c={loaded:s,total:a,progress:a?s/a:void 0,bytes:i,rate:d||void 0,estimated:d&&a&&u?(a-s)/d:void 0,event:o};c[r?"download":"upload"]=!0,t(c)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){let o=t.data;const s=AxiosHeaders$1.from(t.headers).normalize(),a=t.responseType;let i;function d(){t.cancelToken&&t.cancelToken.unsubscribe(i),t.signal&&t.signal.removeEventListener("abort",i)}utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+b))}const c=buildFullPath(t.baseURL,t.url);u.open(t.method.toUpperCase(),buildURL(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function m(){if(!u)return;const g=AxiosHeaders$1.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:g,config:t,request:u};settle(function(y){e(y),d()},function(y){n(y),d()},T),u=null}if("onloadend"in u?u.onloadend=m:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(m)},u.onabort=function(){u&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let b=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const T=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(b=t.timeoutErrorMessage),n(new AxiosError(b,T.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,u)),u=null},platform.isStandardBrowserEnv){const g=(t.withCredentials||isURLSameOrigin(c))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}o===void 0&&s.setContentType(null),"setRequestHeader"in u&&utils.forEach(s.toJSON(),function(b,T){u.setRequestHeader(T,b)}),utils.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),a&&a!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(i=g=>{u&&(n(!g||g.type?new CanceledError(null,t,u):g),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(i),t.signal&&(t.signal.aborted?i():t.signal.addEventListener("abort",i)));const v=parseProtocol(c);if(v&&platform.protocols.indexOf(v)===-1){n(new AxiosError("Unsupported protocol "+v+":",AxiosError.ERR_BAD_REQUEST,t));return}u.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:r}=t;let e,n;for(let o=0;o<r&&(e=t[o],!(n=utils.isString(e)?knownAdapters[e.toLowerCase()]:e));o++);if(!n)throw n===!1?new AxiosError(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!utils.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,r){r=r||{};const e={};function n(u,c,m){return utils.isPlainObject(u)&&utils.isPlainObject(c)?utils.merge.call({caseless:m},u,c):utils.isPlainObject(c)?utils.merge({},c):utils.isArray(c)?c.slice():c}function o(u,c,m){if(utils.isUndefined(c)){if(!utils.isUndefined(u))return n(void 0,u,m)}else return n(u,c,m)}function s(u,c){if(!utils.isUndefined(c))return n(void 0,c)}function a(u,c){if(utils.isUndefined(c)){if(!utils.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function i(u,c,m){if(m in r)return n(u,c);if(m in t)return n(void 0,u)}const d={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(u,c)=>o(headersToObject(u),headersToObject(c),!0)};return utils.forEach(Object.keys(Object.assign({},t,r)),function(c){const m=d[c]||o,v=m(t[c],r[c],c);utils.isUndefined(v)&&m!==i||(e[c]=v)}),e}const VERSION="1.5.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function o(s,a){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,i)=>{if(r===!1)throw new AxiosError(o(a," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[a]&&(deprecatedWarnings[a]=!0,console.warn(o(a," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(s,a,i):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let o=n.length;for(;o-- >0;){const s=n[o],a=r[s];if(a){const i=t[s],d=i===void 0||a(i,s,t);if(d!==!0)throw new AxiosError("option "+s+" must be "+d,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+s,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:s}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils.isFunction(o)?e.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=s&&utils.merge(s.common,s[e.method]);s&&utils.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),e.headers=AxiosHeaders$1.concat(a,s);const i=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(e)===!1||(d=d&&T.synchronous,i.unshift(T.fulfilled,T.rejected))});const u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});let c,m=0,v;if(!d){const b=[dispatchRequest.bind(this),void 0];for(b.unshift.apply(b,i),b.push.apply(b,u),v=b.length,c=Promise.resolve(e);m<v;)c=c.then(b[m++],b[m++]);return c}v=i.length;let g=e;for(m=0;m<v;){const b=i[m++],T=i[m++];try{g=b(g)}catch(k){T.call(this,k);break}}try{c=dispatchRequest.call(this,g)}catch(b){return Promise.reject(b)}for(m=0,v=u.length;m<v;)c=c.then(u[m++],u[m++]);return c}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils.forEach(["post","put","patch"],function(r){function e(n){return function(s,a,i){return this.request(mergeConfig(i||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const n=this;this.promise.then(o=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](o);n._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(i=>{n.subscribe(i),s=i}).then(o);return a.cancel=function(){n.unsubscribe(s)},a},r(function(s,a,i){n.reason||(n.reason=new CanceledError(s,a,i),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(o){r=o}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils.extend(e,r,null,{allOwnKeys:!0}),e.create=function(o){return createInstance(mergeConfig(t,o))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;var QCHAT_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function o(S){var x={exports:{}};return S(x,x.exports),x.exports}var s,a,i=n(o(function(S){S.exports=function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D},S.exports.__esModule=!0,S.exports.default=S.exports})),d=function(S){return S&&S.Math==Math&&S},u=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),c=function(S){try{return!!S()}catch{return!0}},m=!c(function(){var S=(function(){}).bind();return typeof S!="function"||S.hasOwnProperty("prototype")}),v=Function.prototype,g=v.apply,b=v.call,T=typeof Reflect=="object"&&Reflect.apply||(m?b.bind(g):function(){return b.apply(g,arguments)}),k=Function.prototype,y=k.bind,A=k.call,V=m&&y.bind(A,A),Ce=m?function(S){return S&&V(S)}:function(S){return S&&function(){return A.apply(S,arguments)}},ie=function(S){return typeof S=="function"},Oe=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),he=Function.prototype.call,Y=m?he.bind(he):function(){return he.apply(he,arguments)},ae={}.propertyIsEnumerable,Fe=Object.getOwnPropertyDescriptor,ze={f:Fe&&!ae.call({1:2},1)?function(x){var D=Fe(this,x);return!!D&&D.enumerable}:ae},pe=function(S,x){return{enumerable:!(1&S),configurable:!(2&S),writable:!(4&S),value:x}},le=Ce({}.toString),xe=Ce("".slice),ue=function(S){return xe(le(S),8,-1)},Ve=Object,Ue=Ce("".split),er=c(function(){return!Ve("z").propertyIsEnumerable(0)})?function(S){return ue(S)=="String"?Ue(S,""):Ve(S)}:Ve,At=function(S){return S==null},ur=TypeError,pr=function(S){if(At(S))throw ur("Can't call method on "+S);return S},ar=function(S){return er(pr(S))},hr=typeof document=="object"&&document.all,Ne=hr===void 0&&hr!==void 0?function(S){return typeof S=="object"?S!==null:ie(S)||S===hr}:function(S){return typeof S=="object"?S!==null:ie(S)},or={},ir=function(S){return ie(S)?S:void 0},$e=function(S,x){return arguments.length<2?ir(or[S])||ir(u[S]):or[S]&&or[S][x]||u[S]&&u[S][x]},tr=Ce({}.isPrototypeOf),nr=$e("navigator","userAgent")||"",Pt=u.process,Et=u.Deno,kt=Pt&&Pt.versions||Et&&Et.version,rr=kt&&kt.v8;rr&&(a=(s=rr.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&nr&&(!(s=nr.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=nr.match(/Chrome\/(\d+)/))&&(a=+s[1]);var cr,mr=a,yr=!!Object.getOwnPropertySymbols&&!c(function(){var S=Symbol();return!String(S)||!(Object(S)instanceof Symbol)||!Symbol.sham&&mr&&mr<41}),Tr=yr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ir=Object,kr=Tr?function(S){return typeof S=="symbol"}:function(S){var x=$e("Symbol");return ie(x)&&tr(x.prototype,Ir(S))},Ar=String,Rr=function(S){try{return Ar(S)}catch{return"Object"}},Mn=TypeError,Or=function(S){if(ie(S))return S;throw Mn(Rr(S)+" is not a function")},Pr=function(S,x){var D=S[x];return At(D)?void 0:Or(D)},Nr=TypeError,Wr=Object.defineProperty,Yr="__core-js_shared__",Ur=u[Yr]||function(S,x){try{Wr(u,S,{value:x,configurable:!0,writable:!0})}catch{u[S]=x}return x}(Yr,{}),qr=o(function(S){(S.exports=function(x,D){return Ur[x]||(Ur[x]=D!==void 0?D:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),Yn=Object,$n=function(S){return Yn(pr(S))},Jr=Ce({}.hasOwnProperty),Fr=Object.hasOwn||function(x,D){return Jr($n(x),D)},Wn=0,ho=Math.random(),bo=Ce(1 .toString),uo=function(S){return"Symbol("+(S===void 0?"":S)+")_"+bo(++Wn+ho,36)},po=qr("wks"),No=u.Symbol,An=No&&No.for,Sa=Tr?No:No&&No.withoutSetter||uo,to=function(S){if(!Fr(po,S)||!yr&&typeof po[S]!="string"){var x="Symbol."+S;yr&&Fr(No,S)?po[S]=No[S]:po[S]=Tr&&An?An(x):Sa(x)}return po[S]},Lr=TypeError,Qr=to("toPrimitive"),Bn=function(S,x){if(!Ne(S)||kr(S))return S;var D,F=Pr(S,Qr);if(F){if(x===void 0&&(x="default"),D=Y(F,S,x),!Ne(D)||kr(D))return D;throw Lr("Can't convert object to primitive value")}return x===void 0&&(x="number"),function(O,oe){var _e,z;if(oe==="string"&&ie(_e=O.toString)&&!Ne(z=Y(_e,O))||ie(_e=O.valueOf)&&!Ne(z=Y(_e,O))||oe!=="string"&&ie(_e=O.toString)&&!Ne(z=Y(_e,O)))return z;throw Nr("Can't convert object to primitive value")}(S,x)},Xn=function(S){var x=Bn(S,"string");return kr(x)?x:x+""},ko=u.document,no=Ne(ko)&&Ne(ko.createElement),Ra=function(S){return no?ko.createElement(S):{}},fs=!Oe&&!c(function(){return Object.defineProperty(Ra("div"),"a",{get:function(){return 7}}).a!=7}),ms=Object.getOwnPropertyDescriptor,ga={f:Oe?ms:function(x,D){if(x=ar(x),D=Xn(D),fs)try{return ms(x,D)}catch{}if(Fr(x,D))return pe(!Y(ze.f,x,D),x[D])}},Fi=/#|\.prototype\./,Li=function(S,x){var D=Zy[Xy(S)];return D==tb||D!=eb&&(ie(x)?c(x):!!x)},Xy=Li.normalize=function(S){return String(S).replace(Fi,".").toLowerCase()},Zy=Li.data={},eb=Li.NATIVE="N",tb=Li.POLYFILL="P",af=Li,rb=Ce(Ce.bind),$o=function(S,x){return Or(S),x===void 0?S:m?rb(S,x):function(){return S.apply(x,arguments)}},sf=Oe&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nb=String,ob=TypeError,Vn=function(S){if(Ne(S))return S;throw ob(nb(S)+" is not an object")},ab=TypeError,ru=Object.defineProperty,sb=Object.getOwnPropertyDescriptor,ib="enumerable",cb="configurable",lb="writable",ua={f:Oe?sf?function(x,D,F){if(Vn(x),D=Xn(D),Vn(F),typeof x=="function"&&D==="prototype"&&"value"in F&&lb in F&&!F.writable){var O=sb(x,D);O&&O.writable&&(x[D]=F.value,F={configurable:cb in F?F.configurable:O.configurable,enumerable:ib in F?F.enumerable:O.enumerable,writable:!1})}return ru(x,D,F)}:ru:function(x,D,F){if(Vn(x),D=Xn(D),Vn(F),fs)try{return ru(x,D,F)}catch{}if("get"in F||"set"in F)throw ab("Accessors not supported");return"value"in F&&(x[D]=F.value),x}},Jo=Oe?function(S,x,D){return ua.f(S,x,pe(1,D))}:function(S,x,D){return S[x]=D,S},ub=ga.f,db=function(S){var x=function(D,F,O){if(this instanceof x){switch(arguments.length){case 0:return new S;case 1:return new S(D);case 2:return new S(D,F)}return new S(D,F,O)}return T(S,this,arguments)};return x.prototype=S.prototype,x},Vr=function(S,x){var D,F,O,oe,_e,z,qe,jt,lr=S.target,fr=S.global,Sr=S.stat,br=S.proto,Er=fr?u:Sr?u[lr]:(u[lr]||{}).prototype,Dr=fr?or:or[lr]||Jo(or,lr,{})[lr],$r=Dr.prototype;for(O in x)D=!af(fr?O:lr+(Sr?".":"#")+O,S.forced)&&Er&&Fr(Er,O),_e=Dr[O],D&&(z=S.dontCallGetSet?(jt=ub(Er,O))&&jt.value:Er[O]),oe=D&&z?z:x[O],D&&typeof _e==typeof oe||(qe=S.bind&&D?$o(oe,u):S.wrap&&D?db(oe):br&&ie(oe)?Ce(oe):oe,(S.sham||oe&&oe.sham||_e&&_e.sham)&&Jo(qe,"sham",!0),Jo(Dr,O,qe),br&&(Fr(or,F=lr+"Prototype")||Jo(or,F,{}),Jo(or[F],O,oe),S.real&&$r&&!$r[O]&&Jo($r,O,oe)))},pb=Math.ceil,fb=Math.floor,mb=Math.trunc||function(x){var D=+x;return(D>0?fb:pb)(D)},$i=function(S){var x=+S;return x!=x||x===0?0:mb(x)},gb=Math.max,hb=Math.min,ri=function(S,x){var D=$i(S);return D<0?gb(D+x,0):hb(D,x)},vb=Math.min,Ia=function(S){return(x=S.length)>0?vb($i(x),9007199254740991):0;var x},cf=function(S){return function(x,D,F){var O,oe=ar(x),_e=Ia(oe),z=ri(F,_e);if(S&&D!=D){for(;_e>z;)if((O=oe[z++])!=O)return!0}else for(;_e>z;z++)if((S||z in oe)&&oe[z]===D)return S||z||0;return!S&&-1}},nu={includes:cf(!0),indexOf:cf(!1)},ni={},yb=nu.indexOf,lf=Ce([].push),uf=function(S,x){var D,F=ar(S),O=0,oe=[];for(D in F)!Fr(ni,D)&&Fr(F,D)&&lf(oe,D);for(;x.length>O;)Fr(F,D=x[O++])&&(~yb(oe,D)||lf(oe,D));return oe},$c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gs=Object.keys||function(x){return uf(x,$c)},bb=Oe&&!sf?Object.defineProperties:function(x,D){Vn(x);for(var F,O=ar(D),oe=gs(D),_e=oe.length,z=0;_e>z;)ua.f(x,F=oe[z++],O[F]);return x},df={f:bb},ou=$e("document","documentElement"),pf=qr("keys"),jc=function(S){return pf[S]||(pf[S]=uo(S))},ff=jc("IE_PROTO"),au=function(){},mf=function(S){return"<script>"+S+"<\/script>"},gf=function(S){S.write(mf("")),S.close();var x=S.parentWindow.Object;return S=null,x},Dc=function(){try{cr=new ActiveXObject("htmlfile")}catch{}var S,x;Dc=typeof document<"u"?document.domain&&cr?gf(cr):((x=Ra("iframe")).style.display="none",ou.appendChild(x),x.src="javascript:",(S=x.contentWindow.document).open(),S.write(mf("document.F=Object")),S.close(),S.F):gf(cr);for(var D=$c.length;D--;)delete Dc.prototype[$c[D]];return Dc()};ni[ff]=!0;var Ea=Object.create||function(x,D){var F;return x!==null?(au.prototype=Vn(x),F=new au,au.prototype=null,F[ff]=x):F=Dc(),D===void 0?F:df.f(F,D)};Vr({target:"Object",stat:!0,sham:!Oe},{create:Ea});var Tb=or.Object,Ja=function(x,D){return Tb.create(x,D)},Sb=String,Cb=TypeError,ji=Object.setPrototypeOf||("__proto__"in{}?function(){var S,x=!1,D={};try{(S=Ce(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(D,[]),x=D instanceof Array}catch{}return function(O,oe){return Vn(O),function(_e){if(typeof _e=="object"||ie(_e))return _e;throw Cb("Can't set "+Sb(_e)+" as a prototype")}(oe),x?S(O,oe):O.__proto__=oe,O}}():void 0);Vr({target:"Object",stat:!0},{setPrototypeOf:ji});var Ns=or.Object.setPrototypeOf,hs=Ce([].slice),hf=Function,Mb=Ce([].concat),kb=Ce([].join),su={},_b=function(S,x,D){if(!Fr(su,x)){for(var F=[],O=0;O<x;O++)F[O]="a["+O+"]";su[x]=hf("C,a","return new C("+kb(F,",")+")")}return su[x](S,D)},iu=m?hf.bind:function(x){var D=Or(this),F=D.prototype,O=hs(arguments,1),oe=function(){var z=Mb(O,hs(arguments));return this instanceof oe?_b(D,z.length,z):D.apply(x,z)};return Ne(F)&&(oe.prototype=F),oe};Vr({target:"Function",proto:!0,forced:Function.bind!==iu},{bind:iu});var Uo=function(S){return or[S+"Prototype"]},wb=Uo("Function").bind,cu=Function.prototype,Oo=function(S){var x=S.bind;return S===cu||tr(cu,S)&&x===cu.bind?wb:x},lu=o(function(S){function x(D,F){var O;return S.exports=x=Ns?Oo(O=Ns).call(O):function(_e,z){return _e.__proto__=z,_e},S.exports.__esModule=!0,S.exports.default=S.exports,x(D,F)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),Ro=n(o(function(S){S.exports=function(D,F){D.prototype=Ja(F.prototype),D.prototype.constructor=D,lu(D,F)},S.exports.__esModule=!0,S.exports.default=S.exports})),Ya=Array.isArray||function(x){return ue(x)=="Array"},xb=TypeError,uu=function(S){if(S>9007199254740991)throw xb("Maximum allowed index exceeded");return S},Rs=function(S,x,D){var F=Xn(x);F in S?ua.f(S,F,pe(0,D)):S[F]=D},vf={};vf[to("toStringTag")]="z";var du=String(vf)==="[object z]",Ib=to("toStringTag"),Eb=Object,Pb=ue(function(){return arguments}())=="Arguments",Bs=du?ue:function(S){var x,D,F;return S===void 0?"Undefined":S===null?"Null":typeof(D=function(O,oe){try{return O[oe]}catch{}}(x=Eb(S),Ib))=="string"?D:Pb?ue(x):(F=ue(x))=="Object"&&ie(x.callee)?"Arguments":F},Ab=Ce(Function.toString);ie(Ur.inspectSource)||(Ur.inspectSource=function(S){return Ab(S)});var yf=Ur.inspectSource,bf=function(){},Ob=[],Tf=$e("Reflect","construct"),pu=/^\s*(?:class|function)\b/,Nb=Ce(pu.exec),Rb=!pu.exec(bf),Di=function(x){if(!ie(x))return!1;try{return Tf(bf,Ob,x),!0}catch{return!1}},Sf=function(x){if(!ie(x))return!1;switch(Bs(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Rb||!!Nb(pu,yf(x))}catch{return!0}};Sf.sham=!0;var Uc=!Tf||c(function(){var S;return Di(Di.call)||!Di(Object)||!Di(function(){S=!0})||S})?Sf:Di,Bb=to("species"),Cf=Array,fu=function(S,x){return new(function(D){var F;return Ya(D)&&(F=D.constructor,(Uc(F)&&(F===Cf||Ya(F.prototype))||Ne(F)&&(F=F[Bb])===null)&&(F=void 0)),F===void 0?Cf:F}(S))(x===0?0:x)},Fb=to("species"),Ui=function(S){return mr>=51||!c(function(){var x=[];return(x.constructor={})[Fb]=function(){return{foo:1}},x[S](Boolean).foo!==1})},Mf=to("isConcatSpreadable"),Lb=mr>=51||!c(function(){var S=[];return S[Mf]=!1,S.concat()[0]!==S}),$b=Ui("concat"),jb=function(S){if(!Ne(S))return!1;var x=S[Mf];return x!==void 0?!!x:Ya(S)};Vr({target:"Array",proto:!0,arity:1,forced:!Lb||!$b},{concat:function(x){var D,F,O,oe,_e,z=$n(this),qe=fu(z,0),jt=0;for(D=-1,O=arguments.length;D<O;D++)if(jb(_e=D===-1?z:arguments[D]))for(oe=Ia(_e),uu(jt+oe),F=0;F<oe;F++,jt++)F in _e&&Rs(qe,jt,_e[F]);else uu(jt+1),Rs(qe,jt++,_e);return qe.length=jt,qe}});var qc,qi,Vc,Db=String,Aa=function(S){if(Bs(S)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Db(S)},Ub=$c.concat("length","prototype"),Vi={f:Object.getOwnPropertyNames||function(x){return uf(x,Ub)}},qb=Array,Vb=Math.max,mu=function(S,x,D){for(var F=Ia(S),O=ri(x,F),oe=ri(D===void 0?F:D,F),_e=qb(Vb(oe-O,0)),z=0;O<oe;O++,z++)Rs(_e,z,S[O]);return _e.length=z,_e},kf=Vi.f,_f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gu={f:function(x){return _f&&ue(x)=="Window"?function(D){try{return kf(D)}catch{return mu(_f)}}(x):kf(ar(x))}},Hi={f:Object.getOwnPropertySymbols},vs=function(S,x,D,F){return F&&F.enumerable?S[x]=D:Jo(S,x,D),S},hu={f:to},Hb=ua.f,wo=function(S){var x=or.Symbol||(or.Symbol={});Fr(x,S)||Hb(x,S,{value:hu.f(S)})},wf=function(){var S=$e("Symbol"),x=S&&S.prototype,D=x&&x.valueOf,F=to("toPrimitive");x&&!x[F]&&vs(x,F,function(O){return Y(D,this)},{arity:1})},zb=du?{}.toString:function(){return"[object "+Bs(this)+"]"},Kb=ua.f,xf=to("toStringTag"),Fs=function(S,x,D,F){if(S){var O=D?S:S.prototype;Fr(O,xf)||Kb(O,xf,{configurable:!0,value:x}),F&&!du&&Jo(O,"toString",zb)}},If=u.WeakMap,Wb=ie(If)&&/native code/.test(String(If)),Ef="Object already initialized",vu=u.TypeError,Gb=u.WeakMap;if(Wb||Ur.state){var Ls=Ur.state||(Ur.state=new Gb),Qb=Ce(Ls.get),Pf=Ce(Ls.has),Jb=Ce(Ls.set);qc=function(S,x){if(Pf(Ls,S))throw vu(Ef);return x.facade=S,Jb(Ls,S,x),x},qi=function(S){return Qb(Ls,S)||{}},Vc=function(S){return Pf(Ls,S)}}else{var oi=jc("state");ni[oi]=!0,qc=function(S,x){if(Fr(S,oi))throw vu(Ef);return x.facade=S,Jo(S,oi,x),x},qi=function(S){return Fr(S,oi)?S[oi]:{}},Vc=function(S){return Fr(S,oi)}}var Pa={set:qc,get:qi,has:Vc,enforce:function(S){return Vc(S)?qi(S):qc(S,{})},getterFor:function(S){return function(x){var D;if(!Ne(x)||(D=qi(x)).type!==S)throw vu("Incompatible receiver, "+S+" required");return D}}},Af=Ce([].push),ys=function(S){var x=S==1,D=S==2,F=S==3,O=S==4,oe=S==6,_e=S==7,z=S==5||oe;return function(qe,jt,lr,fr){for(var Sr,br,Er=$n(qe),Dr=er(Er),$r=$o(jt,lr),vn=Ia(Dr),Xr=0,wn=fr||fu,hn=x?wn(qe,vn):D||_e?wn(qe,0):void 0;vn>Xr;Xr++)if((z||Xr in Dr)&&(br=$r(Sr=Dr[Xr],Xr,Er),S))if(x)hn[Xr]=br;else if(br)switch(S){case 3:return!0;case 5:return Sr;case 6:return Xr;case 2:Af(hn,Sr)}else switch(S){case 4:return!1;case 7:Af(hn,Sr)}return oe?-1:F||O?O:hn}},bs={forEach:ys(0),map:ys(1),filter:ys(2),some:ys(3),every:ys(4),find:ys(5),findIndex:ys(6),filterReject:ys(7)},Hc=bs.forEach,da=jc("hidden"),zc="Symbol",Yb=Pa.set,Of=Pa.getterFor(zc),Ba=Object.prototype,$s=u.Symbol,zi=$s&&$s.prototype,Xb=u.TypeError,yu=u.QObject,Nf=ga.f,Ts=ua.f,Rf=gu.f,Zb=ze.f,Bf=Ce([].push),Xa=qr("symbols"),Ki=qr("op-symbols"),e0=qr("wks"),bu=!yu||!yu.prototype||!yu.prototype.findChild,Tu=Oe&&c(function(){return Ea(Ts({},"a",{get:function(){return Ts(this,"a",{value:7}).a}})).a!=7})?function(S,x,D){var F=Nf(Ba,x);F&&delete Ba[x],Ts(S,x,D),F&&S!==Ba&&Ts(Ba,x,F)}:Ts,Su=function(S,x){var D=Xa[S]=Ea(zi);return Yb(D,{type:zc,tag:S,description:x}),Oe||(D.description=x),D},Kc=function(x,D,F){x===Ba&&Kc(Ki,D,F),Vn(x);var O=Xn(D);return Vn(F),Fr(Xa,O)?(F.enumerable?(Fr(x,da)&&x[da][O]&&(x[da][O]=!1),F=Ea(F,{enumerable:pe(0,!1)})):(Fr(x,da)||Ts(x,da,pe(1,{})),x[da][O]=!0),Tu(x,O,F)):Ts(x,O,F)},Cu=function(x,D){Vn(x);var F=ar(D),O=gs(F).concat(jf(F));return Hc(O,function(oe){Oe&&!Y(Ff,F,oe)||Kc(x,oe,F[oe])}),x},Ff=function(x){var D=Xn(x),F=Y(Zb,this,D);return!(this===Ba&&Fr(Xa,D)&&!Fr(Ki,D))&&(!(F||!Fr(this,D)||!Fr(Xa,D)||Fr(this,da)&&this[da][D])||F)},Lf=function(x,D){var F=ar(x),O=Xn(D);if(F!==Ba||!Fr(Xa,O)||Fr(Ki,O)){var oe=Nf(F,O);return!oe||!Fr(Xa,O)||Fr(F,da)&&F[da][O]||(oe.enumerable=!0),oe}},$f=function(x){var D=Rf(ar(x)),F=[];return Hc(D,function(O){Fr(Xa,O)||Fr(ni,O)||Bf(F,O)}),F},jf=function(S){var x=S===Ba,D=Rf(x?Ki:ar(S)),F=[];return Hc(D,function(O){!Fr(Xa,O)||x&&!Fr(Ba,O)||Bf(F,Xa[O])}),F};yr||($s=function(){if(tr(zi,this))throw Xb("Symbol is not a constructor");var x=arguments.length&&arguments[0]!==void 0?Aa(arguments[0]):void 0,D=uo(x),F=function(O){this===Ba&&Y(F,Ki,O),Fr(this,da)&&Fr(this[da],D)&&(this[da][D]=!1),Tu(this,D,pe(1,O))};return Oe&&bu&&Tu(Ba,D,{configurable:!0,set:F}),Su(D,x)},zi=$s.prototype,vs(zi,"toString",function(){return Of(this).tag}),vs($s,"withoutSetter",function(S){return Su(uo(S),S)}),ze.f=Ff,ua.f=Kc,df.f=Cu,ga.f=Lf,Vi.f=gu.f=$f,Hi.f=jf,hu.f=function(S){return Su(to(S),S)},Oe&&Ts(zi,"description",{configurable:!0,get:function(){return Of(this).description}})),Vr({global:!0,constructor:!0,wrap:!0,forced:!yr,sham:!yr},{Symbol:$s}),Hc(gs(e0),function(S){wo(S)}),Vr({target:zc,stat:!0,forced:!yr},{useSetter:function(){bu=!0},useSimple:function(){bu=!1}}),Vr({target:"Object",stat:!0,forced:!yr,sham:!Oe},{create:function(x,D){return D===void 0?Ea(x):Cu(Ea(x),D)},defineProperty:Kc,defineProperties:Cu,getOwnPropertyDescriptor:Lf}),Vr({target:"Object",stat:!0,forced:!yr},{getOwnPropertyNames:$f}),wf(),Fs($s,zc),ni[da]=!0;var Df=yr&&!!Symbol.for&&!!Symbol.keyFor,Mu=qr("string-to-symbol-registry"),t0=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!Df},{for:function(S){var x=Aa(S);if(Fr(Mu,x))return Mu[x];var D=$e("Symbol")(x);return Mu[x]=D,t0[D]=x,D}});var Uf=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!Df},{keyFor:function(x){if(!kr(x))throw TypeError(Rr(x)+" is not a symbol");if(Fr(Uf,x))return Uf[x]}});var Ss=$e("JSON","stringify"),Wc=Ce(/./.exec),qf=Ce("".charAt),r0=Ce("".charCodeAt),n0=Ce("".replace),o0=Ce(1 .toString),a0=/[\uD800-\uDFFF]/g,Vf=/^[\uD800-\uDBFF]$/,Hf=/^[\uDC00-\uDFFF]$/,zf=!yr||c(function(){var S=$e("Symbol")();return Ss([S])!="[null]"||Ss({a:S})!="{}"||Ss(Object(S))!="{}"}),Kf=c(function(){return Ss("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ss("\uDEAD")!=='"\\udead"'}),s0=function(S,x){var D=hs(arguments),F=x;if((Ne(x)||S!==void 0)&&!kr(S))return Ya(x)||(x=function(O,oe){if(ie(F)&&(oe=Y(F,this,O,oe)),!kr(oe))return oe}),D[1]=x,T(Ss,null,D)},i0=function(S,x,D){var F=qf(D,x-1),O=qf(D,x+1);return Wc(Vf,S)&&!Wc(Hf,O)||Wc(Hf,S)&&!Wc(Vf,F)?"\\u"+o0(r0(S,0),16):S};Ss&&Vr({target:"JSON",stat:!0,arity:3,forced:zf||Kf},{stringify:function(x,D,F){var O=hs(arguments),oe=T(zf?s0:Ss,null,O);return Kf&&typeof oe=="string"?n0(oe,a0,i0):oe}});var c0=!yr||c(function(){Hi.f(1)});Vr({target:"Object",stat:!0,forced:c0},{getOwnPropertySymbols:function(x){var D=Hi.f;return D?D($n(x)):[]}}),wo("asyncIterator"),wo("hasInstance"),wo("isConcatSpreadable"),wo("iterator"),wo("match"),wo("matchAll"),wo("replace"),wo("search"),wo("species"),wo("split"),wo("toPrimitive"),wf(),wo("toStringTag"),Fs($e("Symbol"),"Symbol"),wo("unscopables"),Fs(u.JSON,"JSON",!0);var Cs,Wf,Gf,l0=or.Symbol,Za={},Qf=Function.prototype,u0=Oe&&Object.getOwnPropertyDescriptor,ku=Fr(Qf,"name"),d0={EXISTS:ku,PROPER:ku&&(function(){}).name==="something",CONFIGURABLE:ku&&(!Oe||Oe&&u0(Qf,"name").configurable)},Jf=!c(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype}),Yf=jc("IE_PROTO"),_u=Object,p0=_u.prototype,ai=Jf?_u.getPrototypeOf:function(S){var x=$n(S);if(Fr(x,Yf))return x[Yf];var D=x.constructor;return ie(D)&&x instanceof D?D.prototype:x instanceof _u?p0:null},wu=to("iterator"),Xf=!1;[].keys&&("next"in(Gf=[].keys())?(Wf=ai(ai(Gf)))!==Object.prototype&&(Cs=Wf):Xf=!0);var f0=!Ne(Cs)||c(function(){var S={};return Cs[wu].call(S)!==S});Cs=f0?{}:Ea(Cs),ie(Cs[wu])||vs(Cs,wu,function(){return this});var Zf={IteratorPrototype:Cs,BUGGY_SAFARI_ITERATORS:Xf},m0=Zf.IteratorPrototype,g0=function(){return this},h0=d0.PROPER,Gc=Zf.BUGGY_SAFARI_ITERATORS,xu=to("iterator"),em="keys",Qc="values",tm="entries",v0=function(){return this},Iu=function(S,x,D,F,O,oe,_e){(function(vn,Xr,wn,hn){var Gn=Xr+" Iterator";vn.prototype=Ea(m0,{next:pe(+!hn,wn)}),Fs(vn,Gn,!1,!0),Za[Gn]=g0})(D,x,F);var z,qe,jt,lr=function(vn){if(vn===O&&Dr)return Dr;if(!Gc&&vn in br)return br[vn];switch(vn){case em:return function(){return new D(this,vn)};case Qc:return function(){return new D(this,vn)};case tm:return function(){return new D(this,vn)}}return function(){return new D(this)}},fr=x+" Iterator",Sr=!1,br=S.prototype,Er=br[xu]||br["@@iterator"]||O&&br[O],Dr=!Gc&&Er||lr(O),$r=x=="Array"&&br.entries||Er;if($r&&(z=ai($r.call(new S)))!==Object.prototype&&z.next&&(Fs(z,fr,!0,!0),Za[fr]=v0),h0&&O==Qc&&Er&&Er.name!==Qc&&(Sr=!0,Dr=function(){return Y(Er,this)}),O)if(qe={values:lr(Qc),keys:oe?Dr:lr(em),entries:lr(tm)},_e)for(jt in qe)(Gc||Sr||!(jt in br))&&vs(br,jt,qe[jt]);else Vr({target:x,proto:!0,forced:Gc||Sr},qe);return _e&&br[xu]!==Dr&&vs(br,xu,Dr,{name:O}),Za[x]=Dr,qe};ua.f;var rm="Array Iterator",y0=Pa.set,b0=Pa.getterFor(rm);Iu(Array,"Array",function(S,x){y0(this,{type:rm,target:ar(S),index:0,kind:x})},function(){var S=b0(this),x=S.target,D=S.kind,F=S.index++;return!x||F>=x.length?(S.target=void 0,{value:void 0,done:!0}):D=="keys"?{value:F,done:!1}:D=="values"?{value:x[F],done:!1}:{value:[F,x[F]],done:!1}},"values"),Za.Arguments=Za.Array;var nm=to("toStringTag");for(var Eu in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var om=u[Eu],Pu=om&&om.prototype;Pu&&Bs(Pu)!==nm&&Jo(Pu,nm,Eu),Za[Eu]=Za.Array}var T0=l0;wo("asyncDispose"),wo("dispose"),wo("matcher"),wo("metadataKey"),wo("observable"),wo("metadata"),wo("patternMatch"),wo("replaceAll");var ha=T0,S0=Ce("".charAt),am=Ce("".charCodeAt),C0=Ce("".slice),sm=function(S){return function(x,D){var F,O,oe=Aa(pr(x)),_e=$i(D),z=oe.length;return _e<0||_e>=z?S?"":void 0:(F=am(oe,_e))<55296||F>56319||_e+1===z||(O=am(oe,_e+1))<56320||O>57343?S?S0(oe,_e):F:S?C0(oe,_e,_e+2):O-56320+(F-55296<<10)+65536}},M0={codeAt:sm(!1),charAt:sm(!0)}.charAt,im="String Iterator",k0=Pa.set,_0=Pa.getterFor(im);Iu(String,"String",function(S){k0(this,{type:im,string:Aa(S),index:0})},function(){var x,D=_0(this),F=D.string,O=D.index;return O>=F.length?{value:void 0,done:!0}:(x=M0(F,O),D.index+=x.length,{value:x,done:!1})});var cm=hu.f("iterator"),w0=o(function(S){function x(D){return S.exports=x=typeof ha=="function"&&typeof cm=="symbol"?function(F){return typeof F}:function(F){return F&&typeof ha=="function"&&F.constructor===ha&&F!==ha.prototype?"symbol":typeof F},S.exports.__esModule=!0,S.exports.default=S.exports,x(D)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),lm=ua.f;Vr({target:"Object",stat:!0,forced:Object.defineProperty!==lm,sham:!Oe},{defineProperty:lm});var x0=o(function(S){var x=or.Object,D=S.exports=function(O,oe,_e){return x.defineProperty(O,oe,_e)};x.defineProperty.sham&&(D.sham=!0)}),Wi=x0,I0=c(function(){ai(1)});Vr({target:"Object",stat:!0,forced:I0,sham:!Jf},{getPrototypeOf:function(x){return ai($n(x))}});var js=or.Object.getPrototypeOf,Ds=function(S,x){var D=[][S];return!!D&&c(function(){D.call(null,x||function(){return 1},1)})},E0=bs.forEach,um=Ds("forEach")?[].forEach:function(x){return E0(this,x,arguments.length>1?arguments[1]:void 0)};Vr({target:"Array",proto:!0,forced:[].forEach!=um},{forEach:um});var P0=Uo("Array").forEach,Au=Array.prototype,A0={DOMTokenList:!0,NodeList:!0},In=function(S){var x=S.forEach;return S===Au||tr(Au,S)&&x===Au.forEach||Fr(A0,Bs(S))?P0:x},O0=Ce([].concat),N0=$e("Reflect","ownKeys")||function(x){var D=Vi.f(Vn(x)),F=Hi.f;return F?O0(D,F(x)):D},dm=Error,R0=Ce("".replace),B0=String(dm("zxcasd").stack),pm=/\n\s*at [^:]*:[^\n]*/,F0=pm.test(B0),L0=function(S,x){if(F0&&typeof S=="string"&&!dm.prepareStackTrace)for(;x--;)S=R0(S,pm,"");return S},$0=function(S,x){Ne(x)&&"cause"in x&&Jo(S,"cause",x.cause)},j0=to("iterator"),D0=Array.prototype,fm=function(S){return S!==void 0&&(Za.Array===S||D0[j0]===S)},U0=to("iterator"),Jc=function(S){if(!At(S))return Pr(S,U0)||Pr(S,"@@iterator")||Za[Bs(S)]},q0=TypeError,Gi=function(S,x){var D=arguments.length<2?Jc(S):x;if(Or(D))return Vn(Y(D,S));throw q0(Rr(S)+" is not iterable")},Ou=function(S,x,D){var F,O;Vn(S);try{if(!(F=Pr(S,"return"))){if(x==="throw")throw D;return D}F=Y(F,S)}catch(oe){O=!0,F=oe}if(x==="throw")throw D;if(O)throw F;return Vn(F),D},V0=TypeError,Yc=function(S,x){this.stopped=S,this.result=x},mm=Yc.prototype,so=function(S,x,D){var F,O,oe,_e,z,qe,jt,lr=D&&D.that,fr=!(!D||!D.AS_ENTRIES),Sr=!(!D||!D.IS_RECORD),br=!(!D||!D.IS_ITERATOR),Er=!(!D||!D.INTERRUPTED),Dr=$o(x,lr),$r=function(Xr){return F&&Ou(F,"normal",Xr),new Yc(!0,Xr)},vn=function(Xr){return fr?(Vn(Xr),Er?Dr(Xr[0],Xr[1],$r):Dr(Xr[0],Xr[1])):Er?Dr(Xr,$r):Dr(Xr)};if(Sr)F=S.iterator;else if(br)F=S;else{if(!(O=Jc(S)))throw V0(Rr(S)+" is not iterable");if(fm(O)){for(oe=0,_e=Ia(S);_e>oe;oe++)if((z=vn(S[oe]))&&tr(mm,z))return z;return new Yc(!1)}F=Gi(S,O)}for(qe=Sr?S.next:F.next;!(jt=Y(qe,F)).done;){try{z=vn(jt.value)}catch(Xr){Ou(F,"throw",Xr)}if(typeof z=="object"&&z&&tr(mm,z))return z}return new Yc(!1)},H0=function(S,x){return S===void 0?arguments.length<2?"":x:Aa(S)},z0=!c(function(){var S=Error("a");return!("stack"in S)||(Object.defineProperty(S,"stack",pe(1,7)),S.stack!==7)}),K0=to("toStringTag"),Xc=Error,W0=[].push,Qi=function(x,D){var F,O=arguments.length>2?arguments[2]:void 0,oe=tr(Nu,this);ji?F=ji(Xc(),oe?ai(this):Nu):(F=oe?this:Ea(Nu),Jo(F,K0,"Error")),D!==void 0&&Jo(F,"message",H0(D)),z0&&Jo(F,"stack",L0(F.stack,1)),$0(F,O);var _e=[];return so(x,W0,{that:_e}),Jo(F,"errors",_e),F};ji?ji(Qi,Xc):function(S,x,D){for(var F=N0(x),O=ua.f,oe=ga.f,_e=0;_e<F.length;_e++){var z=F[_e];Fr(S,z)||D&&Fr(D,z)||O(S,z,oe(x,z))}}(Qi,Xc,{name:!0});var Nu=Qi.prototype=Ea(Xc.prototype,{constructor:pe(1,Qi),message:pe(1,""),name:pe(1,"AggregateError")});Vr({global:!0,constructor:!0,arity:2},{AggregateError:Qi});var Ji,si,gm,Ru,Ua=ue(u.process)=="process",hm=to("species"),vm=function(S){var x=$e(S),D=ua.f;Oe&&x&&!x[hm]&&D(x,hm,{configurable:!0,get:function(){return this}})},G0=TypeError,Bu=function(S,x){if(tr(x,S))return S;throw G0("Incorrect invocation")},Q0=TypeError,Zc=function(S){if(Uc(S))return S;throw Q0(Rr(S)+" is not a constructor")},J0=to("species"),Ms=function(S,x){var D,F=Vn(S).constructor;return F===void 0||At(D=Vn(F)[J0])?x:Zc(D)},Y0=TypeError,ym=function(S,x){if(S<x)throw Y0("Not enough arguments");return S},bm=/(?:ipad|iphone|ipod).*applewebkit/i.test(nr),Fu=u.setImmediate,Lu=u.clearImmediate,X0=u.process,$u=u.Dispatch,Z0=u.Function,Tm=u.MessageChannel,e1=u.String,ju=0,Yi={},t1="onreadystatechange";try{Ji=u.location}catch{}var Du=function(S){if(Fr(Yi,S)){var x=Yi[S];delete Yi[S],x()}},Uu=function(S){return function(){Du(S)}},Sm=function(S){Du(S.data)},Cm=function(S){u.postMessage(e1(S),Ji.protocol+"//"+Ji.host)};Fu&&Lu||(Fu=function(x){ym(arguments.length,1);var D=ie(x)?x:Z0(x),F=hs(arguments,1);return Yi[++ju]=function(){T(D,void 0,F)},si(ju),ju},Lu=function(x){delete Yi[x]},Ua?si=function(S){X0.nextTick(Uu(S))}:$u&&$u.now?si=function(S){$u.now(Uu(S))}:Tm&&!bm?(Ru=(gm=new Tm).port2,gm.port1.onmessage=Sm,si=$o(Ru.postMessage,Ru)):u.addEventListener&&ie(u.postMessage)&&!u.importScripts&&Ji&&Ji.protocol!=="file:"&&!c(Cm)?(si=Cm,u.addEventListener("message",Sm,!1)):si=t1 in Ra("script")?function(S){ou.appendChild(Ra("script")).onreadystatechange=function(){ou.removeChild(this),Du(S)}}:function(S){setTimeout(Uu(S),0)});var Xi,Us,Zi,ii,qu,Vu,Hu,Mm,km={set:Fu,clear:Lu},r1=/ipad|iphone|ipod/i.test(nr)&&u.Pebble!==void 0,n1=/web0s(?!.*chrome)/i.test(nr),o1=ga.f,zu=km.set,_m=u.MutationObserver||u.WebKitMutationObserver,wm=u.document,xm=u.process,el=u.Promise,Im=o1(u,"queueMicrotask"),Em=Im&&Im.value;Em||(Xi=function(){var S,x;for(Ua&&(S=xm.domain)&&S.exit();Us;){x=Us.fn,Us=Us.next;try{x()}catch(D){throw Us?ii():Zi=void 0,D}}Zi=void 0,S&&S.enter()},bm||Ua||n1||!_m||!wm?!r1&&el&&el.resolve?((Hu=el.resolve(void 0)).constructor=el,Mm=$o(Hu.then,Hu),ii=function(){Mm(Xi)}):Ua?ii=function(){xm.nextTick(Xi)}:(zu=$o(zu,u),ii=function(){zu(Xi)}):(qu=!0,Vu=wm.createTextNode(""),new _m(Xi).observe(Vu,{characterData:!0}),ii=function(){Vu.data=qu=!qu}));var Ku=Em||function(S){var x={fn:S,next:void 0};Zi&&(Zi.next=x),Us||(Us=x,ii()),Zi=x},ci=function(S){try{return{error:!1,value:S()}}catch(x){return{error:!0,value:x}}},Pm=function(){this.head=null,this.tail=null};Pm.prototype={add:function(S){var x={item:S,next:null};this.head?this.tail.next=x:this.head=x,this.tail=x},get:function(){var S=this.head;if(S)return this.head=S.next,this.tail===S&&(this.tail=null),S.item}};var Wu,Am,a1=Pm,ra=u.Promise,Om=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",s1=!Om&&!Ua&&typeof window=="object"&&typeof document=="object",Nm=ra&&ra.prototype,i1=to("species"),Rm=!1,Bm=ie(u.PromiseRejectionEvent),c1=af("Promise",function(){var S=yf(ra),x=S!==String(ra);if(!x&&mr===66||!Nm.catch||!Nm.finally)return!0;if(!mr||mr<51||!/native code/.test(S)){var D=new ra(function(O){O(1)}),F=function(O){O(function(){},function(){})};if((D.constructor={})[i1]=F,!(Rm=D.then(function(){})instanceof F))return!0}return!x&&(s1||Om)&&!Bm}),li={CONSTRUCTOR:c1,REJECTION_EVENT:Bm,SUBCLASSING:Rm},l1=TypeError,u1=function(S){var x,D;this.promise=new S(function(F,O){if(x!==void 0||D!==void 0)throw l1("Bad Promise constructor");x=F,D=O}),this.resolve=Or(x),this.reject=Or(D)},es={f:function(S){return new u1(S)}},Fm=km.set,tl="Promise",Lm=li.CONSTRUCTOR,d1=li.REJECTION_EVENT,Gu=Pa.getterFor(tl),p1=Pa.set,f1=ra&&ra.prototype,ec=ra,Qu=f1,$m=u.TypeError,Ju=u.document,Yu=u.process,Xu=es.f,m1=Xu,g1=!!(Ju&&Ju.createEvent&&u.dispatchEvent),jm="unhandledrejection",Dm=function(S){var x;return!(!Ne(S)||!ie(x=S.then))&&x},Um=function(S,x){var D,F,O,oe=x.value,_e=x.state==1,z=_e?S.ok:S.fail,qe=S.resolve,jt=S.reject,lr=S.domain;try{z?(_e||(x.rejection===2&&v1(x),x.rejection=1),z===!0?D=oe:(lr&&lr.enter(),D=z(oe),lr&&(lr.exit(),O=!0)),D===S.promise?jt($m("Promise-chain cycle")):(F=Dm(D))?Y(F,D,qe,jt):qe(D)):jt(oe)}catch(fr){lr&&!O&&lr.exit(),jt(fr)}},qm=function(S,x){S.notified||(S.notified=!0,Ku(function(){for(var D,F=S.reactions;D=F.get();)Um(D,S);S.notified=!1,x&&!S.rejection&&h1(S)}))},Vm=function(S,x,D){var F,O;g1?((F=Ju.createEvent("Event")).promise=x,F.reason=D,F.initEvent(S,!1,!0),u.dispatchEvent(F)):F={promise:x,reason:D},!d1&&(O=u["on"+S])?O(F):S===jm&&function(oe,_e){var z=u.console;z&&z.error&&(arguments.length==1?z.error(oe):z.error(oe,_e))}("Unhandled promise rejection",D)},h1=function(S){Y(Fm,u,function(){var x,D=S.facade,F=S.value;if(Hm(S)&&(x=ci(function(){Ua?Yu.emit("unhandledRejection",F,D):Vm(jm,D,F)}),S.rejection=Ua||Hm(S)?2:1,x.error))throw x.value})},Hm=function(S){return S.rejection!==1&&!S.parent},v1=function(S){Y(Fm,u,function(){var x=S.facade;Ua?Yu.emit("rejectionHandled",x):Vm("rejectionhandled",x,S.value)})},ui=function(S,x,D){return function(F){S(x,F,D)}},di=function(S,x,D){S.done||(S.done=!0,D&&(S=D),S.value=x,S.state=2,qm(S,!0))},Zu=function(S,x,D){if(!S.done){S.done=!0,D&&(S=D);try{if(S.facade===x)throw $m("Promise can't be resolved itself");var F=Dm(x);F?Ku(function(){var O={done:!1};try{Y(F,x,ui(Zu,O,S),ui(di,O,S))}catch(oe){di(O,oe,S)}}):(S.value=x,S.state=1,qm(S,!1))}catch(O){di({done:!1},O,S)}}};Lm&&(Qu=(ec=function(x){Bu(this,Qu),Or(x),Y(Wu,this);var D=Gu(this);try{x(ui(Zu,D),ui(di,D))}catch(F){di(D,F)}}).prototype,(Wu=function(x){p1(this,{type:tl,done:!1,notified:!1,parent:!1,reactions:new a1,rejection:!1,state:0,value:void 0})}).prototype=vs(Qu,"then",function(x,D){var F=Gu(this),O=Xu(Ms(this,ec));return F.parent=!0,O.ok=!ie(x)||x,O.fail=ie(D)&&D,O.domain=Ua?Yu.domain:void 0,F.state==0?F.reactions.add(O):Ku(function(){Um(O,F)}),O.promise}),Am=function(){var S=new Wu,x=Gu(S);this.promise=S,this.resolve=ui(Zu,x),this.reject=ui(di,x)},es.f=Xu=function(S){return S===ec||S===void 0?new Am(S):m1(S)}),Vr({global:!0,constructor:!0,wrap:!0,forced:Lm},{Promise:ec}),Fs(ec,tl,!1,!0),vm(tl);var zm=to("iterator"),Km=!1;try{var y1=0,Wm={next:function(){return{done:!!y1++}},return:function(){Km=!0}};Wm[zm]=function(){return this},Array.from(Wm,function(){throw 2})}catch{}var Gm=function(S,x){if(!x&&!Km)return!1;var D=!1;try{var F={};F[zm]=function(){return{next:function(){return{done:D=!0}}}},S(F)}catch{}return D},Qm=li.CONSTRUCTOR||!Gm(function(S){ra.all(S).then(void 0,function(){})});Vr({target:"Promise",stat:!0,forced:Qm},{all:function(x){var D=this,F=es.f(D),O=F.resolve,oe=F.reject,_e=ci(function(){var z=Or(D.resolve),qe=[],jt=0,lr=1;so(x,function(fr){var Sr=jt++,br=!1;lr++,Y(z,D,fr).then(function(Er){br||(br=!0,qe[Sr]=Er,--lr||O(qe))},oe)}),--lr||O(qe)});return _e.error&&oe(_e.value),F.promise}});var b1=li.CONSTRUCTOR;ra&&ra.prototype,Vr({target:"Promise",proto:!0,forced:b1,real:!0},{catch:function(S){return this.then(void 0,S)}}),Vr({target:"Promise",stat:!0,forced:Qm},{race:function(x){var D=this,F=es.f(D),O=F.reject,oe=ci(function(){var _e=Or(D.resolve);so(x,function(z){Y(_e,D,z).then(F.resolve,O)})});return oe.error&&O(oe.value),F.promise}}),Vr({target:"Promise",stat:!0,forced:li.CONSTRUCTOR},{reject:function(x){var D=es.f(this);return Y(D.reject,void 0,x),D.promise}});var ed=function(S,x){if(Vn(S),Ne(x)&&x.constructor===S)return x;var D=es.f(S);return(0,D.resolve)(x),D.promise},T1=li.CONSTRUCTOR,S1=$e("Promise"),C1=!T1;Vr({target:"Promise",stat:!0,forced:!0},{resolve:function(x){return ed(C1&&this===S1?ra:this,x)}}),Vr({target:"Promise",stat:!0},{allSettled:function(x){var D=this,F=es.f(D),O=F.resolve,oe=F.reject,_e=ci(function(){var z=Or(D.resolve),qe=[],jt=0,lr=1;so(x,function(fr){var Sr=jt++,br=!1;lr++,Y(z,D,fr).then(function(Er){br||(br=!0,qe[Sr]={status:"fulfilled",value:Er},--lr||O(qe))},function(Er){br||(br=!0,qe[Sr]={status:"rejected",reason:Er},--lr||O(qe))})}),--lr||O(qe)});return _e.error&&oe(_e.value),F.promise}});var Jm="No one promise resolved";Vr({target:"Promise",stat:!0},{any:function(x){var D=this,F=$e("AggregateError"),O=es.f(D),oe=O.resolve,_e=O.reject,z=ci(function(){var qe=Or(D.resolve),jt=[],lr=0,fr=1,Sr=!1;so(x,function(br){var Er=lr++,Dr=!1;fr++,Y(qe,D,br).then(function($r){Dr||Sr||(Sr=!0,oe($r))},function($r){Dr||Sr||(Dr=!0,jt[Er]=$r,--fr||_e(new F(jt,Jm)))})}),--fr||_e(new F(jt,Jm))});return z.error&&_e(z.value),O.promise}});var M1=ra&&ra.prototype,k1=!!ra&&c(function(){M1.finally.call({then:function(){}},function(){})});Vr({target:"Promise",proto:!0,real:!0,forced:k1},{finally:function(S){var x=Ms(this,$e("Promise")),D=ie(S);return this.then(D?function(F){return ed(x,S()).then(function(){return F})}:S,D?function(F){return ed(x,S()).then(function(){throw F})}:S)}});var _1=or.Promise;Vr({target:"Promise",stat:!0,forced:!0},{try:function(S){var x=es.f(this),D=ci(S);return(D.error?x.reject:x.resolve)(D.value),x.promise}});var co=_1,w1=Ce([].reverse),Ym=[1,2];Vr({target:"Array",proto:!0,forced:String(Ym)===String(Ym.reverse())},{reverse:function(){return Ya(this)&&(this.length=this.length),w1(this)}});var x1=Uo("Array").reverse,td=Array.prototype,kl=function(S){var x=S.reverse;return S===td||tr(td,S)&&x===td.reverse?x1:x},I1=Ui("slice"),E1=to("species"),rd=Array,P1=Math.max;Vr({target:"Array",proto:!0,forced:!I1},{slice:function(x,D){var F,O,oe,_e=ar(this),z=Ia(_e),qe=ri(x,z),jt=ri(D===void 0?z:D,z);if(Ya(_e)&&(F=_e.constructor,(Uc(F)&&(F===rd||Ya(F.prototype))||Ne(F)&&(F=F[E1])===null)&&(F=void 0),F===rd||F===void 0))return hs(_e,qe,jt);for(O=new(F===void 0?rd:F)(P1(jt-qe,0)),oe=0;qe<jt;qe++,oe++)qe in _e&&Rs(O,oe,_e[qe]);return O.length=oe,O}});var A1=Uo("Array").slice,nd=Array.prototype,Co=function(S){var x=S.slice;return S===nd||tr(nd,S)&&x===nd.slice?A1:x},O1=o(function(S){var x=w0.default;function D(){S.exports=D=function(){return F},S.exports.__esModule=!0,S.exports.default=S.exports;var F={},O=Object.prototype,oe=O.hasOwnProperty,_e=typeof ha=="function"?ha:{},z=_e.iterator||"@@iterator",qe=_e.asyncIterator||"@@asyncIterator",jt=_e.toStringTag||"@@toStringTag";function lr(Cn,Zr,On){return Wi(Cn,Zr,{value:On,enumerable:!0,configurable:!0,writable:!0}),Cn[Zr]}try{lr({},"")}catch{lr=function(On,Un,eo){return On[Un]=eo}}function fr(Cn,Zr,On,Un){var eo=Zr&&Zr.prototype instanceof Er?Zr:Er,ro=Ja(eo.prototype),Do=new wr(Un||[]);return ro._invoke=function(go,Zo,So){var Io="suspendedStart";return function(ea,Ci){if(Io==="executing")throw new Error("Generator is already running");if(Io==="completed"){if(ea==="throw")throw Ci;return Nn()}for(So.method=ea,So.arg=Ci;;){var Eo=So.delegate;if(Eo){var Mi=Dn(Eo,So);if(Mi){if(Mi===br)continue;return Mi}}if(So.method==="next")So.sent=So._sent=So.arg;else if(So.method==="throw"){if(Io==="suspendedStart")throw Io="completed",So.arg;So.dispatchException(So.arg)}else So.method==="return"&&So.abrupt("return",So.arg);Io="executing";var $a=Sr(go,Zo,So);if($a.type==="normal"){if(Io=So.done?"completed":"suspendedYield",$a.arg===br)continue;return{value:$a.arg,done:So.done}}$a.type==="throw"&&(Io="completed",So.method="throw",So.arg=$a.arg)}}}(Cn,On,Do),ro}function Sr(Cn,Zr,On){try{return{type:"normal",arg:Cn.call(Zr,On)}}catch(Un){return{type:"throw",arg:Un}}}F.wrap=fr;var br={};function Er(){}function Dr(){}function $r(){}var vn={};lr(vn,z,function(){return this});var Xr=js&&js(js(xn([])));Xr&&Xr!==O&&oe.call(Xr,z)&&(vn=Xr);var wn=$r.prototype=Er.prototype=Ja(vn);function hn(Cn){var Zr;In(Zr=["next","throw","return"]).call(Zr,function(On){lr(Cn,On,function(Un){return this._invoke(On,Un)})})}function Gn(Cn,Zr){function On(eo,ro,Do,go){var Zo=Sr(Cn[eo],Cn,ro);if(Zo.type!=="throw"){var So=Zo.arg,Io=So.value;return Io&&x(Io)=="object"&&oe.call(Io,"__await")?Zr.resolve(Io.__await).then(function(ea){On("next",ea,Do,go)},function(ea){On("throw",ea,Do,go)}):Zr.resolve(Io).then(function(ea){So.value=ea,Do(So)},function(ea){return On("throw",ea,Do,go)})}go(Zo.arg)}var Un;this._invoke=function(eo,ro){function Do(){return new Zr(function(go,Zo){On(eo,ro,go,Zo)})}return Un=Un?Un.then(Do,Do):Do()}}function Dn(Cn,Zr){var On=Cn.iterator[Zr.method];if(On===void 0){if(Zr.delegate=null,Zr.method==="throw"){if(Cn.iterator.return&&(Zr.method="return",Zr.arg=void 0,Dn(Cn,Zr),Zr.method==="throw"))return br;Zr.method="throw",Zr.arg=new TypeError("The iterator does not provide a 'throw' method")}return br}var Un=Sr(On,Cn.iterator,Zr.arg);if(Un.type==="throw")return Zr.method="throw",Zr.arg=Un.arg,Zr.delegate=null,br;var eo=Un.arg;return eo?eo.done?(Zr[Cn.resultName]=eo.value,Zr.next=Cn.nextLoc,Zr.method!=="return"&&(Zr.method="next",Zr.arg=void 0),Zr.delegate=null,br):eo:(Zr.method="throw",Zr.arg=new TypeError("iterator result is not an object"),Zr.delegate=null,br)}function jo(Cn){var Zr={tryLoc:Cn[0]};1 in Cn&&(Zr.catchLoc=Cn[1]),2 in Cn&&(Zr.finallyLoc=Cn[2],Zr.afterLoc=Cn[3]),this.tryEntries.push(Zr)}function jn(Cn){var Zr=Cn.completion||{};Zr.type="normal",delete Zr.arg,Cn.completion=Zr}function wr(Cn){this.tryEntries=[{tryLoc:"root"}],In(Cn).call(Cn,jo,this),this.reset(!0)}function xn(Cn){if(Cn){var Zr=Cn[z];if(Zr)return Zr.call(Cn);if(typeof Cn.next=="function")return Cn;if(!isNaN(Cn.length)){var On=-1,Un=function eo(){for(;++On<Cn.length;)if(oe.call(Cn,On))return eo.value=Cn[On],eo.done=!1,eo;return eo.value=void 0,eo.done=!0,eo};return Un.next=Un}}return{next:Nn}}function Nn(){return{value:void 0,done:!0}}return Dr.prototype=$r,lr(wn,"constructor",$r),lr($r,"constructor",Dr),Dr.displayName=lr($r,jt,"GeneratorFunction"),F.isGeneratorFunction=function(Cn){var Zr=typeof Cn=="function"&&Cn.constructor;return!!Zr&&(Zr===Dr||(Zr.displayName||Zr.name)==="GeneratorFunction")},F.mark=function(Cn){return Ns?Ns(Cn,$r):(Cn.__proto__=$r,lr(Cn,jt,"GeneratorFunction")),Cn.prototype=Ja(wn),Cn},F.awrap=function(Cn){return{__await:Cn}},hn(Gn.prototype),lr(Gn.prototype,qe,function(){return this}),F.AsyncIterator=Gn,F.async=function(Cn,Zr,On,Un,eo){eo===void 0&&(eo=co);var ro=new Gn(fr(Cn,Zr,On,Un),eo);return F.isGeneratorFunction(Zr)?ro:ro.next().then(function(Do){return Do.done?Do.value:ro.next()})},hn(wn),lr(wn,jt,"Generator"),lr(wn,z,function(){return this}),lr(wn,"toString",function(){return"[object Generator]"}),F.keys=function(Cn){var Zr=[];for(var On in Cn)Zr.push(On);return kl(Zr).call(Zr),function Un(){for(;Zr.length;){var eo=Zr.pop();if(eo in Cn)return Un.value=eo,Un.done=!1,Un}return Un.done=!0,Un}},F.values=xn,wr.prototype={constructor:wr,reset:function(Zr){var On;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,In(On=this.tryEntries).call(On,jn),!Zr)for(var Un in this)Un.charAt(0)==="t"&&oe.call(this,Un)&&!isNaN(+Co(Un).call(Un,1))&&(this[Un]=void 0)},stop:function(){this.done=!0;var Zr=this.tryEntries[0].completion;if(Zr.type==="throw")throw Zr.arg;return this.rval},dispatchException:function(Zr){if(this.done)throw Zr;var On=this;function Un(So,Io){return Do.type="throw",Do.arg=Zr,On.next=So,Io&&(On.method="next",On.arg=void 0),!!Io}for(var eo=this.tryEntries.length-1;eo>=0;--eo){var ro=this.tryEntries[eo],Do=ro.completion;if(ro.tryLoc==="root")return Un("end");if(ro.tryLoc<=this.prev){var go=oe.call(ro,"catchLoc"),Zo=oe.call(ro,"finallyLoc");if(go&&Zo){if(this.prev<ro.catchLoc)return Un(ro.catchLoc,!0);if(this.prev<ro.finallyLoc)return Un(ro.finallyLoc)}else if(go){if(this.prev<ro.catchLoc)return Un(ro.catchLoc,!0)}else{if(!Zo)throw new Error("try statement without catch or finally");if(this.prev<ro.finallyLoc)return Un(ro.finallyLoc)}}}},abrupt:function(Zr,On){for(var Un=this.tryEntries.length-1;Un>=0;--Un){var eo=this.tryEntries[Un];if(eo.tryLoc<=this.prev&&oe.call(eo,"finallyLoc")&&this.prev<eo.finallyLoc){var ro=eo;break}}ro&&(Zr==="break"||Zr==="continue")&&ro.tryLoc<=On&&On<=ro.finallyLoc&&(ro=null);var Do=ro?ro.completion:{};return Do.type=Zr,Do.arg=On,ro?(this.method="next",this.next=ro.finallyLoc,br):this.complete(Do)},complete:function(Zr,On){if(Zr.type==="throw")throw Zr.arg;return Zr.type==="break"||Zr.type==="continue"?this.next=Zr.arg:Zr.type==="return"?(this.rval=this.arg=Zr.arg,this.method="return",this.next="end"):Zr.type==="normal"&&On&&(this.next=On),br},finish:function(Zr){for(var On=this.tryEntries.length-1;On>=0;--On){var Un=this.tryEntries[On];if(Un.finallyLoc===Zr)return this.complete(Un.completion,Un.afterLoc),jn(Un),br}},catch:function(Zr){for(var On=this.tryEntries.length-1;On>=0;--On){var Un=this.tryEntries[On];if(Un.tryLoc===Zr){var eo=Un.completion;if(eo.type==="throw"){var ro=eo.arg;jn(Un)}return ro}}throw new Error("illegal catch attempt")},delegateYield:function(Zr,On,Un){return this.delegate={iterator:xn(Zr),resultName:On,nextLoc:Un},this.method==="next"&&(this.arg=void 0),br}},F}S.exports=D,S.exports.__esModule=!0,S.exports.default=S.exports}),rl=O1(),sr=rl;try{regeneratorRuntime=rl}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=rl:Function("r","regeneratorRuntime = r")(rl)}Vr({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Xm=9007199254740991,_l=Object.assign,Vo=Object.defineProperty,wl=Ce([].concat),Zm=!_l||c(function(){if(Oe&&_l({b:1},_l(Vo({},"a",{enumerable:!0,get:function(){Vo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var S={},x={},D=Symbol(),F="abcdefghijklmnopqrst";return S[D]=7,F.split("").forEach(function(O){x[O]=O}),_l({},S)[D]!=7||gs(_l({},x)).join("")!=F})?function(x,D){for(var F=$n(x),O=arguments.length,oe=1,_e=Hi.f,z=ze.f;O>oe;)for(var qe,jt=er(arguments[oe++]),lr=_e?wl(gs(jt),_e(jt)):gs(jt),fr=lr.length,Sr=0;fr>Sr;)qe=lr[Sr++],Oe&&!Y(z,jt,qe)||(F[qe]=jt[qe]);return F}:_l;Vr({target:"Object",stat:!0,arity:2,forced:Object.assign!==Zm},{assign:Zm});var Tn=or.Object.assign;function xl(S,x){var D={};for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&x.indexOf(F)<0&&(D[F]=S[F]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function"){var O=0;for(F=Object.getOwnPropertySymbols(S);O<F.length;O++)x.indexOf(F[O])<0&&Object.prototype.propertyIsEnumerable.call(S,F[O])&&(D[F[O]]=S[F[O]])}return D}function Mr(S,x,D,F){return new(D||(D=Promise))(function(O,oe){function _e(jt){try{qe(F.next(jt))}catch(lr){oe(lr)}}function z(jt){try{qe(F.throw(jt))}catch(lr){oe(lr)}}function qe(jt){jt.done?O(jt.value):function(fr){return fr instanceof D?fr:new D(function(Sr){Sr(fr)})}(jt.value).then(_e,z)}qe((F=F.apply(S,x||[])).next())})}var Wh=c(function(){if(typeof ArrayBuffer=="function"){var S=new ArrayBuffer(8);Object.isExtensible(S)&&Object.defineProperty(S,"a",{value:8})}}),Wo=Object.isExtensible,eg=c(function(){Wo(1)})||Wh?function(x){return!!Ne(x)&&(!Wh||ue(x)!="ArrayBuffer")&&(!Wo||Wo(x))}:Wo,tg=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),rg=o(function(S){var x=ua.f,D=!1,F=uo("meta"),O=0,oe=function(z){x(z,F,{value:{objectID:"O"+O++,weakData:{}}})},_e=S.exports={enable:function(){_e.enable=function(){},D=!0;var z=Vi.f,qe=Ce([].splice),jt={};jt[F]=1,z(jt).length&&(Vi.f=function(lr){for(var fr=z(lr),Sr=0,br=fr.length;Sr<br;Sr++)if(fr[Sr]===F){qe(fr,Sr,1);break}return fr},Vr({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gu.f}))},fastKey:function(z,qe){if(!Ne(z))return typeof z=="symbol"?z:(typeof z=="string"?"S":"P")+z;if(!Fr(z,F)){if(!eg(z))return"F";if(!qe)return"E";oe(z)}return z[F].objectID},getWeakData:function(z,qe){if(!Fr(z,F)){if(!eg(z))return!0;if(!qe)return!1;oe(z)}return z[F].weakData},onFreeze:function(z){return tg&&D&&eg(z)&&!Fr(z,F)&&oe(z),z}};ni[F]=!0}),N1=ua.f,R1=bs.forEach,ng=Pa.set,ka=Pa.getterFor,Gh=function(S,x,D){var F,O=S.indexOf("Map")!==-1,oe=S.indexOf("Weak")!==-1,_e=O?"set":"add",z=u[S],qe=z&&z.prototype,jt={};if(Oe&&ie(z)&&(oe||qe.forEach&&!c(function(){new z().entries().next()}))){var lr=(F=x(function(Sr,br){ng(Bu(Sr,lr),{type:S,collection:new z}),br!=null&&so(br,Sr[_e],{that:Sr,AS_ENTRIES:O})})).prototype,fr=ka(S);R1(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(Sr){var br=Sr=="add"||Sr=="set";!(Sr in qe)||oe&&Sr=="clear"||Jo(lr,Sr,function(Er,Dr){var $r=fr(this).collection;if(!br&&oe&&!Ne(Er))return Sr=="get"&&void 0;var vn=$r[Sr](Er===0?0:Er,Dr);return br?this:vn})}),oe||N1(lr,"size",{configurable:!0,get:function(){return fr(this).collection.size}})}else F=D.getConstructor(x,S,O,_e),rg.enable();return Fs(F,S,!1,!0),jt[S]=F,Vr({global:!0,forced:!0},jt),oe||D.setStrong(F,S,O),F},Qd=function(S,x,D){for(var F in x)D&&D.unsafe&&S[F]?S[F]=x[F]:vs(S,F,x[F],D);return S},ks=ua.f,Es=rg.fastKey,Sn=Pa.set,Jd=Pa.getterFor,od={getConstructor:function(S,x,D,F){var O=S(function(jt,lr){Bu(jt,oe),Sn(jt,{type:x,index:Ea(null),first:void 0,last:void 0,size:0}),Oe||(jt.size=0),At(lr)||so(lr,jt[F],{that:jt,AS_ENTRIES:D})}),oe=O.prototype,_e=Jd(x),z=function(jt,lr,fr){var Sr,br,Er=_e(jt),Dr=qe(jt,lr);return Dr?Dr.value=fr:(Er.last=Dr={index:br=Es(lr,!0),key:lr,value:fr,previous:Sr=Er.last,next:void 0,removed:!1},Er.first||(Er.first=Dr),Sr&&(Sr.next=Dr),Oe?Er.size++:jt.size++,br!=="F"&&(Er.index[br]=Dr)),jt},qe=function(jt,lr){var fr,Sr=_e(jt),br=Es(lr);if(br!=="F")return Sr.index[br];for(fr=Sr.first;fr;fr=fr.next)if(fr.key==lr)return fr};return Qd(oe,{clear:function(){for(var lr=_e(this),fr=lr.index,Sr=lr.first;Sr;)Sr.removed=!0,Sr.previous&&(Sr.previous=Sr.previous.next=void 0),delete fr[Sr.index],Sr=Sr.next;lr.first=lr.last=void 0,Oe?lr.size=0:this.size=0},delete:function(jt){var lr=this,fr=_e(lr),Sr=qe(lr,jt);if(Sr){var br=Sr.next,Er=Sr.previous;delete fr.index[Sr.index],Sr.removed=!0,Er&&(Er.next=br),br&&(br.previous=Er),fr.first==Sr&&(fr.first=br),fr.last==Sr&&(fr.last=Er),Oe?fr.size--:lr.size--}return!!Sr},forEach:function(lr){for(var fr,Sr=_e(this),br=$o(lr,arguments.length>1?arguments[1]:void 0);fr=fr?fr.next:Sr.first;)for(br(fr.value,fr.key,this);fr&&fr.removed;)fr=fr.previous},has:function(lr){return!!qe(this,lr)}}),Qd(oe,D?{get:function(lr){var fr=qe(this,lr);return fr&&fr.value},set:function(lr,fr){return z(this,lr===0?0:lr,fr)}}:{add:function(lr){return z(this,lr=lr===0?0:lr,lr)}}),Oe&&ks(oe,"size",{get:function(){return _e(this).size}}),O},setStrong:function(S,x,D){var F=x+" Iterator",O=Jd(x),oe=Jd(F);Iu(S,x,function(_e,z){Sn(this,{type:F,target:_e,state:O(_e),kind:z,last:void 0})},function(){for(var _e=oe(this),z=_e.kind,qe=_e.last;qe&&qe.removed;)qe=qe.previous;return _e.target&&(_e.last=qe=qe?qe.next:_e.state.first)?z=="keys"?{value:qe.key,done:!1}:z=="values"?{value:qe.value,done:!1}:{value:[qe.key,qe.value],done:!1}:(_e.target=void 0,{value:void 0,done:!0})},D?"entries":"values",!D,!0),vm(x)}};Gh("Map",function(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}},od);var og=or.Map,Qh=[].push,ag=function(x){var D,F,O,oe,_e=arguments.length,z=_e>1?arguments[1]:void 0;return Zc(this),(D=z!==void 0)&&Or(z),At(x)?new this:(F=[],D?(O=0,oe=$o(z,_e>2?arguments[2]:void 0),so(x,function(qe){Y(Qh,F,oe(qe,O++))})):so(x,Qh,{that:F}),new this(F))};Vr({target:"Map",stat:!0,forced:!0},{from:ag});var Jh=function(){return new this(hs(arguments))};Vr({target:"Map",stat:!0,forced:!0},{of:Jh});var Yh=function(){for(var x,D=Vn(this),F=Or(D.delete),O=!0,oe=0,_e=arguments.length;oe<_e;oe++)x=Y(F,D,arguments[oe]),O=O&&x;return!!O};Vr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:Yh}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(x,D){var F,O,oe=Vn(this),_e=Or(oe.get),z=Or(oe.has),qe=Or(oe.set);return Y(z,oe,x)?(F=Y(_e,oe,x),"update"in D&&(F=D.update(F,x,oe),Y(qe,oe,x,F)),F):(O=D.insert(x,oe),Y(qe,oe,x,O),O)}});var ki=Gi;Vr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return!so(F,function(oe,_e,z){if(!O(_e,oe,D))return z()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0),oe=new(Ms(D,$e("Map"))),_e=Or(oe.set);return so(F,function(z,qe){O(qe,z,D)&&Y(_e,oe,z,qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),oe}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return so(F,function(oe,_e,z){if(O(_e,oe,D))return z(_e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return so(F,function(oe,_e,z){if(O(_e,oe,D))return z(oe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var B1=Ce([].push);Vr({target:"Map",stat:!0,forced:!0},{groupBy:function(x,D){Or(D);var F=Gi(x),O=new this,oe=Or(O.has),_e=Or(O.get),z=Or(O.set);return so(F,function(qe){var jt=D(qe);Y(oe,O,jt)?B1(Y(_e,O,jt),qe):Y(z,O,jt,[qe])},{IS_ITERATOR:!0}),O}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(x){return so(ki(Vn(this)),function(D,F,O){if((oe=F)===(_e=x)||oe!=oe&&_e!=_e)return O();var oe,_e},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",stat:!0,forced:!0},{keyBy:function(x,D){var F=new this;Or(D);var O=Or(F.set);return so(x,function(oe){Y(O,F,D(oe),oe)}),F}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(x){return so(ki(Vn(this)),function(D,F,O){if(F===x)return O(D)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0),oe=new(Ms(D,$e("Map"))),_e=Or(oe.set);return so(F,function(z,qe){Y(_e,oe,O(qe,z,D),qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),oe}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0),oe=new(Ms(D,$e("Map"))),_e=Or(oe.set);return so(F,function(z,qe){Y(_e,oe,z,O(qe,z,D))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),oe}}),Vr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(x){for(var D=Vn(this),F=Or(D.set),O=arguments.length,oe=0;oe<O;)so(arguments[oe++],F,{that:D,AS_ENTRIES:!0});return D}});var Xh=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(x){var D=Vn(this),F=ki(D),O=arguments.length<2,oe=O?void 0:arguments[1];if(Or(x),so(F,function(_e,z){O?(O=!1,oe=z):oe=x(oe,z,_e,D)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),O)throw Xh("Reduce of empty map with no initial value");return oe}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(x){var D=Vn(this),F=ki(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return so(F,function(oe,_e,z){if(O(_e,oe,D))return z()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var F1=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(x,D){var F=Vn(this),O=Or(F.get),oe=Or(F.has),_e=Or(F.set),z=arguments.length;Or(D);var qe=Y(oe,F,x);if(!qe&&z<3)throw F1("Updating absent value");var jt=qe?Y(O,F,x):Or(z>2?arguments[2]:void 0)(x,F);return Y(_e,F,x,D(jt,x,F)),F}});var Zh=TypeError,sg=function(x,D){var F,O=Vn(this),oe=Or(O.get),_e=Or(O.has),z=Or(O.set),qe=arguments.length>2?arguments[2]:void 0;if(!ie(D)&&!ie(qe))throw Zh("At least one callback required");return Y(_e,O,x)?(F=Y(oe,O,x),ie(D)&&(F=D(F),Y(z,O,x,F))):ie(qe)&&(F=qe(),Y(z,O,x,F)),F};Vr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:sg}),Vr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:sg});var nl=og,ev=Date,L1=Ce(ev.prototype.getTime);Vr({target:"Date",stat:!0},{now:function(){return L1(new ev)}});var ts=or.Date.now,_i=Uo("Array").concat,ig=Array.prototype,qs=function(S){var x=S.concat;return S===ig||tr(ig,S)&&x===ig.concat?_i:x},$1=/MSIE .\./.test(nr),j1=u.Function,cg=function(S){return $1?function(x,D){var F=ym(arguments.length,1)>2,O=ie(x)?x:j1(x),oe=F?hs(arguments,2):void 0;return S(F?function(){T(O,this,oe)}:O,D)}:S},tc={setTimeout:cg(u.setTimeout),setInterval:cg(u.setInterval)},lg=tc.setInterval;Vr({global:!0,bind:!0,forced:u.setInterval!==lg},{setInterval:lg});var tv=tc.setTimeout;Vr({global:!0,bind:!0,forced:u.setTimeout!==tv},{setTimeout:tv});var sa=or.setTimeout;or.JSON||(or.JSON={stringify:JSON.stringify});var D1=function(x,D,F){return T(or.JSON.stringify,null,arguments)},mo=D1,rv=bs.map,nv=Ui("map");Vr({target:"Array",proto:!0,forced:!nv},{map:function(x){return rv(this,x,arguments.length>1?arguments[1]:void 0)}});var ov=Uo("Array").map,Yd=Array.prototype,vo=function(S){var x=S.map;return S===Yd||tr(Yd,S)&&x===Yd.map?ov:x},ug=o(function(S){var x=Object.prototype.hasOwnProperty,D="~";function F(){}function O(qe,jt,lr){this.fn=qe,this.context=jt,this.once=lr||!1}function oe(qe,jt,lr,fr,Sr){if(typeof lr!="function")throw new TypeError("The listener must be a function");var br=new O(lr,fr||qe,Sr),Er=D?D+jt:jt;return qe._events[Er]?qe._events[Er].fn?qe._events[Er]=[qe._events[Er],br]:qe._events[Er].push(br):(qe._events[Er]=br,qe._eventsCount++),qe}function _e(qe,jt){--qe._eventsCount==0?qe._events=new F:delete qe._events[jt]}function z(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),new F().__proto__||(D=!1)),z.prototype.eventNames=function(){var jt,lr,fr=[];if(this._eventsCount===0)return fr;for(lr in jt=this._events)x.call(jt,lr)&&fr.push(D?lr.slice(1):lr);return Object.getOwnPropertySymbols?fr.concat(Object.getOwnPropertySymbols(jt)):fr},z.prototype.listeners=function(jt){var lr=D?D+jt:jt,fr=this._events[lr];if(!fr)return[];if(fr.fn)return[fr.fn];for(var Sr=0,br=fr.length,Er=new Array(br);Sr<br;Sr++)Er[Sr]=fr[Sr].fn;return Er},z.prototype.listenerCount=function(jt){var lr=D?D+jt:jt,fr=this._events[lr];return fr?fr.fn?1:fr.length:0},z.prototype.emit=function(jt,lr,fr,Sr,br,Er){var Dr=D?D+jt:jt;if(!this._events[Dr])return!1;var $r,vn,Xr=this._events[Dr],wn=arguments.length;if(Xr.fn){switch(Xr.once&&this.removeListener(jt,Xr.fn,void 0,!0),wn){case 1:return Xr.fn.call(Xr.context),!0;case 2:return Xr.fn.call(Xr.context,lr),!0;case 3:return Xr.fn.call(Xr.context,lr,fr),!0;case 4:return Xr.fn.call(Xr.context,lr,fr,Sr),!0;case 5:return Xr.fn.call(Xr.context,lr,fr,Sr,br),!0;case 6:return Xr.fn.call(Xr.context,lr,fr,Sr,br,Er),!0}for(vn=1,$r=new Array(wn-1);vn<wn;vn++)$r[vn-1]=arguments[vn];Xr.fn.apply(Xr.context,$r)}else{var hn,Gn=Xr.length;for(vn=0;vn<Gn;vn++)switch(Xr[vn].once&&this.removeListener(jt,Xr[vn].fn,void 0,!0),wn){case 1:Xr[vn].fn.call(Xr[vn].context);break;case 2:Xr[vn].fn.call(Xr[vn].context,lr);break;case 3:Xr[vn].fn.call(Xr[vn].context,lr,fr);break;case 4:Xr[vn].fn.call(Xr[vn].context,lr,fr,Sr);break;default:if(!$r)for(hn=1,$r=new Array(wn-1);hn<wn;hn++)$r[hn-1]=arguments[hn];Xr[vn].fn.apply(Xr[vn].context,$r)}}return!0},z.prototype.on=function(jt,lr,fr){return oe(this,jt,lr,fr,!1)},z.prototype.once=function(jt,lr,fr){return oe(this,jt,lr,fr,!0)},z.prototype.removeListener=function(jt,lr,fr,Sr){var br=D?D+jt:jt;if(!this._events[br])return this;if(!lr)return _e(this,br),this;var Er=this._events[br];if(Er.fn)Er.fn!==lr||Sr&&!Er.once||fr&&Er.context!==fr||_e(this,br);else{for(var Dr=0,$r=[],vn=Er.length;Dr<vn;Dr++)(Er[Dr].fn!==lr||Sr&&!Er[Dr].once||fr&&Er[Dr].context!==fr)&&$r.push(Er[Dr]);$r.length?this._events[br]=$r.length===1?$r[0]:$r:_e(this,br)}return this},z.prototype.removeAllListeners=function(jt){var lr;return jt?(lr=D?D+jt:jt,this._events[lr]&&_e(this,lr)):(this._events=new F,this._eventsCount=0),this},z.prototype.off=z.prototype.removeListener,z.prototype.addListener=z.prototype.on,z.prefixed=D,z.EventEmitter=z,S.exports=z}),U1=Il;function Il(S){S=S||{},this.ms=S.min||100,this.max=S.max||1e4,this.factor=S.factor||2,this.jitter=S.jitter>0&&S.jitter<=1?S.jitter:0,this.attempts=0}Il.prototype.duration=function(){var S=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var x=Math.random(),D=Math.floor(x*this.jitter*S);S=1&Math.floor(10*x)?S+D:S-D}return 0|Math.min(S,this.max)},Il.prototype.reset=function(){this.attempts=0},Il.prototype.setMin=function(S){this.ms=S},Il.prototype.setMax=function(S){this.max=S},Il.prototype.setJitter=function(S){this.jitter=S};var Xd=typeof e=="object"&&e&&e.Object===Object&&e,To=typeof self=="object"&&self&&self.Object===Object&&self,Vs=Xd||To||Function("return this")(),wi=Vs.Symbol,ol=Object.prototype,av=ol.hasOwnProperty,q1=ol.toString,Ps=wi?wi.toStringTag:void 0,Gs=function(x){var D=av.call(x,Ps),F=x[Ps];try{x[Ps]=void 0;var O=!0}catch{}var oe=q1.call(x);return O&&(D?x[Ps]=F:delete x[Ps]),oe},sv=Object.prototype.toString,V1=function(x){return sv.call(x)},iv=wi?wi.toStringTag:void 0,Qs=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":iv&&iv in Object(x)?Gs(x):V1(x)},pi=function(x){var D=typeof x;return x!=null&&(D=="object"||D=="function")},Zd=function(x){if(!pi(x))return!1;var D=Qs(x);return D=="[object Function]"||D=="[object GeneratorFunction]"||D=="[object AsyncFunction]"||D=="[object Proxy]"},cv={deviceId:"",timeout:8e3},lv={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},yc=nu.includes,fi=c(function(){return!Array(1).includes()});Vr({target:"Array",proto:!0,forced:fi},{includes:function(x){return yc(this,x,arguments.length>1?arguments[1]:void 0)}});var ep=Uo("Array").includes,uv=to("match"),H1=TypeError,dv=function(S){if(function(x){var D;return Ne(x)&&((D=x[uv])!==void 0?!!D:ue(x)=="RegExp")}(S))throw H1("The method doesn't accept regular expressions");return S},z1=to("match"),K1=Ce("".indexOf);Vr({target:"String",proto:!0,forced:!function(S){var x=/./;try{"/./"[S](x)}catch{try{return x[z1]=!1,"/./"[S](x)}catch{}}return!1}("includes")},{includes:function(x){return!!~K1(Aa(pr(this)),Aa(dv(x)),arguments.length>1?arguments[1]:void 0)}});var W1=Uo("String").includes,dg=Array.prototype,pg=String.prototype,mi=function(S){var x=S.includes;return S===dg||tr(dg,S)&&x===dg.includes?ep:typeof S=="string"||S===pg||tr(pg,S)&&x===pg.includes?W1:x},G1=bs.findIndex,Q1="findIndex",pv=!0;Q1 in[]&&Array(1).findIndex(function(){pv=!1}),Vr({target:"Array",proto:!0,forced:pv},{findIndex:function(x){return G1(this,x,arguments.length>1?arguments[1]:void 0)}});var fg=Uo("Array").findIndex,ad=Array.prototype,bc=function(S){var x=S.findIndex;return S===ad||tr(ad,S)&&x===ad.findIndex?fg:x},J1=o(function(S){function x(D){var F;return S.exports=x=Ns?Oo(F=js).call(F):function(oe){return oe.__proto__||js(oe)},S.exports.__esModule=!0,S.exports.default=S.exports,x(D)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),Y1=nu.indexOf,tp=Ce([].indexOf),fv=!!tp&&1/tp([1],1,-0)<0,mg=Ds("indexOf");Vr({target:"Array",proto:!0,forced:fv||!mg},{indexOf:function(x){var D=arguments.length>1?arguments[1]:void 0;return fv?tp(this,x,D)||0:Y1(this,x,D)}});var X1=Uo("Array").indexOf,gg=Array.prototype,pa=function(S){var x=S.indexOf;return S===gg||tr(gg,S)&&x===gg.indexOf?X1:x},hg=o(function(S){S.exports=function(D){var F;return pa(F=Function.toString.call(D)).call(F,"[native code]")!==-1},S.exports.__esModule=!0,S.exports.default=S.exports}),vg=$e("Reflect","construct"),Z1=Object.prototype,mv=[].push,yg=c(function(){function S(){}return!(vg(function(){},[],S)instanceof S)}),bg=!c(function(){vg(function(){})}),xi=yg||bg;Vr({target:"Reflect",stat:!0,forced:xi,sham:xi},{construct:function(x,D){Zc(x),Vn(D);var F=arguments.length<3?x:Zc(arguments[2]);if(bg&&!yg)return vg(x,D,F);if(x==F){switch(D.length){case 0:return new x;case 1:return new x(D[0]);case 2:return new x(D[0],D[1]);case 3:return new x(D[0],D[1],D[2]);case 4:return new x(D[0],D[1],D[2],D[3])}var O=[null];return T(mv,O,D),new(T(iu,x,O))}var oe=F.prototype,_e=Ea(Ne(oe)?oe:Z1),z=T(x,_e,D);return Ne(z)?z:_e}});var rc=or.Reflect.construct,eT=o(function(S){S.exports=function(){if(typeof Reflect>"u"||!rc||rc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(rc(Boolean,[],function(){})),!0}catch{return!1}},S.exports.__esModule=!0,S.exports.default=S.exports}),tT=o(function(S){function x(D,F,O){var oe;return eT()?(S.exports=x=Oo(oe=rc).call(oe),S.exports.__esModule=!0,S.exports.default=S.exports):(S.exports=x=function(z,qe,jt){var lr=[null];lr.push.apply(lr,qe);var fr=new(Oo(Function).apply(z,lr));return jt&&lu(fr,jt.prototype),fr},S.exports.__esModule=!0,S.exports.default=S.exports),x.apply(null,arguments)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),nc=o(function(S){function x(D){var F=typeof nl=="function"?new nl:void 0;return S.exports=x=function(oe){if(oe===null||!hg(oe))return oe;if(typeof oe!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has(oe))return F.get(oe);F.set(oe,_e)}function _e(){return tT(oe,arguments,J1(this).constructor)}return _e.prototype=Ja(oe.prototype,{constructor:{value:_e,enumerable:!1,writable:!0,configurable:!0}}),lu(_e,oe)},S.exports.__esModule=!0,S.exports.default=S.exports,x(D)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports}),yo=function(S){function x(D,F,O){var oe;return F===void 0&&(F={}),O===void 0&&(O=400),(oe=S.call(this,D)||this).data=F,oe.code=O,oe.name="customError",oe}return Ro(x,S),x}(n(nc)(Error)),al=function(S){function x(D,F,O){var oe;return F===void 0&&(F={}),(oe=S.call(this,D,F,414)||this).code=414,oe.name="validateError",oe.rules=O,oe}return Ro(x,S),x}(yo),rp={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Tg=function(S){function x(D,F,O,oe,_e){var z;return O===void 0&&(O=""),oe===void 0&&(oe=new Date().getTime()),_e===void 0&&(_e={}),O=O||rp[D],(z=S.call(this,O,_e,D)||this).name="cmdError",z.cmd=F,z.timetag=oe,z}return Ro(x,S),x}(yo),El=function(S){function x(D,F,O){var oe;return(oe=S.call(this,D,{},412)||this).code=412,oe.name="formatError",oe.key=F,oe.reason=O,oe}return Ro(x,S),x}(yo),Tc=function(S){function x(D,F,O,oe,_e){var z;return(z=S.call(this,D,{file:_e},400)||this).name="uploadError",z.rawError=F,z.curProvider=O||1,z.mixStorePolicy=oe,z}return Ro(x,S),x}(yo),sl=["error","warn","log","debug"],sd=function(){},np=["off","error","warn","log","debug"],gv=function(){function S(D,F){this.name=F,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=sd,this.log=sd,this.warn=sd,this.error=sd,this.name=F,S.instancesName.push(F),mi(np).call(np,D)||(D="off"),this.setLogFunc(D)}var x=S.prototype;return x.setLogFunc=function(F){var O=this,oe=bc(sl).call(sl,function(_e){return _e===F});In(sl).call(sl,function(_e,z){z<=oe&&(O[_e]=function(){var qe=Co(Array.prototype).call(arguments),jt=this.formatArgs(qe,_e);this.strategies[_e](jt)})})},x.formatArgs=function(F,O){var oe=new Date,_e=oe.getMonth()+1+"-"+oe.getDate()+" "+oe.getHours()+":"+oe.getMinutes()+":"+oe.getSeconds()+":"+oe.getMilliseconds();return"[NIM "+O+" "+this.name+" "+_e+"] "+vo(F).call(F,function(z){return z instanceof yo?z.name+", "+z.code+", "+z.message:z instanceof Error?z&&z.message?z.message:z:typeof z=="object"?mo(z):z}).join(" ")},S}();gv.instancesName=[],Vr({global:!0},{globalThis:u});var rT=c(function(){gs(1)});Vr({target:"Object",stat:!0,forced:rT},{keys:function(x){return gs($n(x))}});var na=or.Object.keys,Sg=bs.filter,is=Ui("filter");Vr({target:"Array",proto:!0,forced:!is},{filter:function(x){return Sg(this,x,arguments.length>1?arguments[1]:void 0)}});var nT=Uo("Array").filter,Ho=Array.prototype,Js=function(S){var x=S.filter;return S===Ho||tr(Ho,S)&&x===Ho.filter?nT:x},hv=o(function(S,x){S.exports=function(){function D(jt,lr){if(!(jt instanceof lr))throw new TypeError("Cannot call a class as a function")}function F(jt,lr){for(var fr=0;fr<lr.length;fr++){var Sr=lr[fr];Sr.enumerable=Sr.enumerable||!1,Sr.configurable=!0,"value"in Sr&&(Sr.writable=!0),Wi(jt,Sr.key,Sr)}}function O(jt,lr,fr){return lr&&F(jt.prototype,lr),fr&&F(jt,fr),Wi(jt,"prototype",{writable:!1}),jt}var oe={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},_e="https://statistic.live.126.net/dispatcher/req",z=function(){},qe=function(){function jt(lr){D(this,jt),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=oe,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=ts(),this.timer=null,this.setConfig(lr),this.reportConfig.autoStart&&this.initUploadConfig()}return O(jt,[{key:"setConfig",value:function(fr){this.reportConfig=Tn({},this.reportConfig,fr)}},{key:"reportImmediately",value:function(fr,Sr){var br=this;this.reportConfig.request(fr,Tn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Sr)).catch(function(Er){var Dr,$r;($r=(Dr=br.reportConfig)===null||Dr===void 0?void 0:Dr.logger)===null||$r===void 0||$r.warn("Reporter immediately upload failed",Er)})}},{key:"report",value:function(fr,Sr){var br=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(fr){var Er=ts();br?this.lowPriorityMsgList.push({module:fr,msg:Sr,createTime:Er}):this.msgList.push({module:fr,msg:Sr,createTime:Er}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(fr,Sr){if(fr&&!this.traceMsgCache[fr]){var br=Tn(Tn({start_time:ts()},Sr),{extension:[]});this.traceMsgCache[fr]=br}}},{key:"reportTraceUpdate",value:function(fr){}},{key:"reportTraceUpdateV2",value:function(fr,Sr){if(this.traceMsgCache[fr]){var br=this.traceMsgCache[fr].extension.length,Er=new Date().getTime();Sr.duration=br===0?Er-this.traceMsgCache[fr].start_time:Er-this.traceMsgCache[fr].extension[br-1].end_time,this.traceMsgCache[fr].extension.push(Tn({end_time:Er},Sr))}}},{key:"reportTraceEnd",value:function(fr){var Sr,br=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[fr]&&(fr!=="nos"||br===!1?(typeof br=="boolean"?this.traceMsgCache[fr].succeed=!!br:this.traceMsgCache[fr].state=br,this.traceMsgCache[fr].duration=ts()-this.traceMsgCache[fr].start_time,In(Sr=this.traceMsgCache[fr].extension).call(Sr,function(Er){delete Er.end_time}),this.report(fr,this.traceMsgCache[fr]),this.traceMsgCache[fr]=null):this.traceMsgCache[fr]=null)}},{key:"reportTraceCancel",value:function(fr){this.traceMsgCache[fr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var fr,Sr=this;In(fr=na(this.traceMsgCache)).call(fr,function(br){Sr.reportTraceEnd(br,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=z,this.report=z,this.reportTraceStart=z,this.reportTraceUpdate=z,this.reportTraceEnd=z,this.pause=z,this.restore=z,this.destroy=z,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var fr,Sr,br=this;if(!this.loading){this.loading=!0;var Er=this.reportConfig.common||{};try{this.reportConfig.request(_e,{method:"GET",dataType:"json",params:{deviceId:Er.dev_id,sdkVer:Er.sdk_ver,platform:Er.platform,appkey:Er.app_key},timeout:this.reportConfig.timeout}).then(function(Dr){var $r,vn;if(!br.isDestroyed){if(Dr.status===200&&Dr.data&&Dr.data.code===200){var Xr=Dr.data.data||{};br.reportConfig.maxSize=Xr.maxSize>1e3?1e3:Xr.maxSize,br.reportConfig.maxInterval=Xr.maxInterval>1e4?1e4:Xr.maxInterval,br.reportConfig.maxInterval=Xr.maxInterval<10?10:Xr.maxInterval,br.reportConfig.minInterval=Xr.minInterval<2?2:Xr.minInterval,br.reportConfig.maxDelay=Xr.maxDelay||300,br.reportConfig.maxInterval=1e3*br.reportConfig.maxInterval,br.reportConfig.minInterval=1e3*br.reportConfig.minInterval,br.reportConfig.maxDelay=1e3*br.reportConfig.maxDelay,br.enable=!0,br.initConfigLoaded=!0,br.loading=!1,br.reportHeartBeat()}(vn=($r=br.reportConfig)===null||$r===void 0?void 0:$r.logger)===null||vn===void 0||vn.log("Get reporter upload config success")}}).catch(function(Dr){var $r,vn;br.loading=!1,(vn=($r=br.reportConfig)===null||$r===void 0?void 0:$r.logger)===null||vn===void 0||vn.error("Get reporter upload config failed",Dr)})}catch(Dr){this.loading=!1,(Sr=(fr=this.reportConfig)===null||fr===void 0?void 0:fr.logger)===null||Sr===void 0||Sr.error("Exec reporter request failed",Dr)}}}},{key:"reportHeartBeat",value:function(){var fr=this;this.isDestroyed||(this.timer=sa(function(){fr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var fr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;ts()-this.lastReportTime>=fr&&this.upload()}}},{key:"getUploadMsg",value:function(){var fr,Sr,br,Er,Dr,$r=this,vn={},Xr=ts();this.msgList=Js(fr=this.msgList).call(fr,function(xn){return Xr-xn.createTime<$r.reportConfig.maxDelay}),this.lowPriorityMsgList=Js(Sr=this.lowPriorityMsgList).call(Sr,function(xn){return Xr-xn.createTime<$r.reportConfig.maxDelay}),this.cacheMsgList=Js(br=this.cacheMsgList).call(br,function(xn){return Xr-xn.createTime<$r.reportConfig.maxDelay});var wn=Co(Er=this.msgList).call(Er,0,this.reportConfig.maxSize);if(this.msgList=Co(Dr=this.msgList).call(Dr,wn.length),wn.length<this.reportConfig.maxSize){var hn,Gn,Dn=this.reportConfig.maxSize-wn.length;wn=qs(wn).call(wn,Co(hn=this.lowPriorityMsgList).call(hn,0,Dn)),this.lowPriorityMsgList=Co(Gn=this.lowPriorityMsgList).call(Gn,Dn)}if(wn.length<this.reportConfig.maxSize){var jo,jn,wr=this.reportConfig.maxSize-wn.length;wn=qs(wn).call(wn,Co(jo=this.cacheMsgList).call(jo,0,wr)),this.cacheMsgList=Co(jn=this.cacheMsgList).call(jn,wr)}return In(wn).call(wn,function(xn){vn[xn.module]?vn[xn.module].push(xn.msg):vn[xn.module]=[xn.msg]}),{uploadMsgArr:wn,uploadMsg:vn}}},{key:"upload",value:function(){var fr,Sr,br=this;if(this.enable&&!(this.lastReportTime&&ts()-this.lastReportTime<this.reportConfig.minInterval)){var Er=this.getUploadMsg(),Dr=Er.uploadMsgArr,$r=Er.uploadMsg;if(Dr.length){this.lastReportTime=ts();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:$r},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(vn){var Xr,wn,hn,Gn;br.cacheMsgList=Co(Xr=qs(wn=br.cacheMsgList).call(wn,Dr)).call(Xr,0,br.reportConfig.cacheMaxSize),(Gn=(hn=br.reportConfig)===null||hn===void 0?void 0:hn.logger)===null||Gn===void 0||Gn.warn("Reporter upload failed",vn)})}catch(vn){(Sr=(fr=this.reportConfig)===null||fr===void 0?void 0:fr.logger)===null||Sr===void 0||Sr.warn("Exec reporter request failed",vn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),jt}();return qe}()}),ta={setLogger:function(x){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function S(D,F){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var x=S.prototype;return x.close=function(F,O){throw new Error("Method not implemented.")},x.send=function(F){throw new Error("Method not implemented.")},x.onclose=function(F){throw new Error("Method not implemented.")},x.onerror=function(F){throw new Error("Method not implemented.")},x.onmessage=function(F){throw new Error("Method not implemented.")},x.onopen=function(F){throw new Error("Method not implemented.")},S}(),localStorage:{},request:function(x,D){throw new Error("Function not implemented.")},uploadFile:function(x){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},oT=TypeError,vv=function(S){return function(x,D,F,O){Or(D);var oe=$n(x),_e=er(oe),z=Ia(oe),qe=S?z-1:0,jt=S?-1:1;if(F<2)for(;;){if(qe in _e){O=_e[qe],qe+=jt;break}if(qe+=jt,S?qe<0:z<=qe)throw oT("Reduce of empty array with no initial value")}for(;S?qe>=0:z>qe;qe+=jt)qe in _e&&(O=D(O,_e[qe],qe,oe));return O}},Cg={left:vv(!1),right:vv(!0)}.left,op=Ds("reduce");Vr({target:"Array",proto:!0,forced:!op||!Ua&&mr>79&&mr<83},{reduce:function(x){var D=arguments.length;return Cg(this,x,D,D>1?arguments[1]:void 0)}});var yv=Uo("Array").reduce,Pl=Array.prototype,Sc=function(S){var x=S.reduce;return S===Pl||tr(Pl,S)&&x===Pl.reduce?yv:x},bv=function(x){return x===void 0},id={},Ii={};function qa(S,x){var D,F,O;try{O=JSON.parse(S)}catch(br){throw x.error("Parse command error: ",S),br}var oe=O.sid+"_"+O.cid,_e=O.r;if(mi(D=["4_1","4_2","4_10","4_11"]).call(D,oe)){var z=O.r[1].headerPacket;oe=z.sid+"_"+z.cid,_e=O.r[1].body}var qe,jt=Ii[oe],lr=id[jt],fr=function(Er,Dr){var $r=rp[Er];return $r===null?null:new Tg(Er,Dr,$r,new Date().getTime())}(O.code,jt),Sr={cmd:jt,raw:O,error:fr,service:lr==null?void 0:lr.service,content:{}};if(Sr.error){if(Sr.error.cmd=jt,Sr.error.callFunc="parseCmd",!(!((F=lr==null?void 0:lr.ignoreErrCodes)===null||F===void 0)&&mi(F).call(F,O.code)))return Sr;x.warn("parseCmd:: ignore error ",Sr.error),Sr.error.ignore=!0}return!jt||!lr?(Sr.notFound=!0,Sr):(lr.response&&In(qe=lr.response).call(qe,function(br,Er){var Dr=_e[Er],$r=br.type,vn=br.name,Xr=br.reflectMapper;if(!bv(Dr))switch($r){case"Property":Sr.content[vn]=Xr?Oa(Dr,Xr):Dr;break;case"PropertyArray":Sr.content[vn]=vo(Dr).call(Dr,function(wn){return Xr?Oa(wn,Xr):wn});break;case"long":case"Long":case"byte":case"Byte":case"Number":Sr.content[vn]=+Dr;break;default:Sr.content[vn]=Dr}}),Sr)}function rs(S,x){var D={};for(var F in S)x[F]!==void 0&&(D[x[F]]=S[F]);return D}function Oa(S,x){var D={};for(var F in S)x[F]!==void 0&&(D[x[F]]=S[F]);return D}function Ei(S){id=Tn(id,S.cmdConfig),Ii=Tn(Ii,S.cmdMap)}function Cc(S){var x;return Sc(x=na(S)).call(x,function(D,F){var O,oe=S[F];return D[F]=Sc(O=na(oe)).call(O,function(_e,z){return _e[oe[z]]=z,_e},{}),D},{})}var Mg=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],kg=["transport not supported","client not handshaken","unauthorized"],ap=["reconnect"],aT=function(S){function x(F,O,oe){var _e;return(_e=S.call(this)||this).url=O,_e.logger=oe,_e.websocket=null,_e.core=F,_e.url=O,_e.status="disconnected",_e.logger=oe,_e.connect(),_e}Ro(x,S);var D=x.prototype;return D.connect=function(){var O=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+ts(),{method:"GET",dataType:"text",timeout:8e3}).then(function(oe){var _e=oe.data.split(":"),z=_e[0],qe=_e[1];return O.sessionId=z,O.closeTimeout=1e3*qe,O._createWebsocket("wss://"+O.url+"/socket.io/1/websocket/"+z)}).catch(function(oe){O.logger.error("imsocket::handshake fail. ",oe&&oe.message),O.status="disconnected",O.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},D.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(O){this.logger.warn("attempt to close websocket error",O)}this.clean()}},D.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},D.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},D._createWebsocket=function(O){var oe,_e=this;this.websocket=new ta.WebSocket(O),this.websocket.onmessage=Oo(oe=this.onMessage).call(oe,this),this.websocket.onclose=function(){_e.logger.log("imsocket:: receive websocket onclose event, current status",_e.status),_e.clean()},this.websocket.onerror=function(z){_e.logger.error("imsocket:: onerror",z)}},D.onMessage=function(O){var oe;this.resetCloseTimer();var _e=this.decodePacket(O.data);if(_e)switch(_e.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",_e.data);break;case"event":_e.name&&this.emit(_e.name,_e.args);break;case"error":_e.reason==="unauthorized"?this.emit("connect_failed",_e.reason):this.emit("error",_e.reason);break;case"heartbeat":(oe=this.websocket)===null||oe===void 0||oe.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",_e.type)}},D.encodePacket=function(O){var oe,_e,z=O.type,qe=O.id,jt=qe===void 0?"":qe,lr=O.endpoint,fr=lr===void 0?"":lr,Sr=O.ack,br=null;if(!z)return"";switch(z){case"error":oe=O.reason?pa(kg).call(kg,O.reason):"",_e=O.advice?pa(ap).call(ap,O.advice):"",oe===""&&_e===""||(br=oe+(_e!==""?"+"+_e:""));break;case"message":O.data!==""&&(br=O.data);break;case"event":oe={name:O.name},oe=O.args&&O.args.length?{name:O.name,args:O.args}:{name:O.name},br=mo(oe);break;case"json":br=mo(O.data);break;case"connect":O.qs&&(br=O.qs);break;case"ack":br=O.ackId+(O.args&&O.args.length?"+"+mo(O.args):"")}var Er=[pa(Mg).call(Mg,z),jt+(Sr==="data"?"+":""),fr];return br!=null&&Er.push(br),Er.join(":")},D.decodePacket=function(O){if(O)if(O.charAt(0)!="�"){var oe=O.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(oe){var _e,z=oe[1],qe=oe[2],jt=oe[3],lr=oe[4],fr=oe[5],Sr={type:Mg[+z],endpoint:lr};switch(qe&&(Sr.id=qe,Sr.ack=!jt||"data"),Sr.type){case"error":_e=fr.split("+"),Sr.reason=kg[+_e[0]]||"";break;case"message":Sr.data=fr||"";break;case"connect":Sr.qs=fr||"";break;case"event":try{var br=JSON.parse(fr);Sr.name=br.name,Sr.args=br.args}catch(Er){this.logger.error("imsocket::parseData::type::event error",Er)}Sr.args=Sr.args||[];break;case"json":try{Sr.data=JSON.parse(fr)}catch(Er){this.logger.error("imsocket::parseData::type::json error",Er)}break;case"ack":if((_e=fr.match(/^([0-9]+)(\+)?(.*)/))&&(Sr.ackId=_e[1],Sr.args=[],_e[3]))try{Sr.args=_e[3]?JSON.parse(_e[3]):[]}catch(Er){this.logger.error("imsocket::parseData::type::ack error",Er)}}return Sr}}else this.logger.error("imsocket::unrecognize dataStr",Co(O).call(O,0,20))},D.send=function(O){var oe,_e={data:O,type:"message",endpoint:""};(oe=this.websocket)===null||oe===void 0||oe.send(this.encodePacket(_e))},D.resetCloseTimer=function(){var O=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=sa(function(){O.close()},this.closeTimeout))},x}(ug),sp=Uo("Array").values,gi=Array.prototype,sT={DOMTokenList:!0,NodeList:!0},ip=function(S){var x=S.values;return S===gi||tr(gi,S)&&x===gi.values||Fr(sT,Bs(S))?sp:x};Vr({target:"Array",stat:!0},{isArray:Ya});var ns=or.Array.isArray,_g=bs.every,iT=Ds("every");Vr({target:"Array",proto:!0,forced:!iT},{every:function(x){return _g(this,x,arguments.length>1?arguments[1]:void 0)}});var hi=Uo("Array").every,wg=Array.prototype,Al=function(S){var x=S.every;return S===wg||tr(wg,S)&&x===wg.every?hi:x},cs=function(x){return x!=null&&typeof x=="object"},Tv=function(x){return cs(x)&&Qs(x)=="[object RegExp]"},xg=function(x){return function(D){return x(D)}},Ol=o(function(S,x){var D=x&&!x.nodeType&&x,F=D&&S&&!S.nodeType&&S,O=F&&F.exports===D&&Xd.process,oe=function(){try{var _e=F&&F.require&&F.require("util").types;return _e||O&&O.binding&&O.binding("util")}catch{}}();S.exports=oe}),Ig=Ol&&Ol.isRegExp,cT=Ig?xg(Ig):Tv,Eg=Vs["__core-js_shared__"],Mc=function(){var S=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),lT=function(x){return!!Mc&&Mc in x},uT=Function.prototype.toString,il=function(x){if(x!=null){try{return uT.call(x)}catch{}try{return x+""}catch{}}return""},dT=/^\[object .+?Constructor\]$/,pT=Function.prototype,fT=Object.prototype,mT=pT.toString,gT=fT.hasOwnProperty,cl=RegExp("^"+mT.call(gT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cd=function(x){return!(!pi(x)||lT(x))&&(Zd(x)?cl:dT).test(il(x))},hT=function(x,D){return x==null?void 0:x[D]},ll=function(x,D){var F=hT(x,D);return cd(F)?F:void 0},ld=ll(Object,"create"),vT=function(){this.__data__=ld?ld(null):{},this.size=0},yT=function(x){var D=this.has(x)&&delete this.__data__[x];return this.size-=D?1:0,D},bT=Object.prototype.hasOwnProperty,TT=function(x){var D=this.__data__;if(ld){var F=D[x];return F==="__lodash_hash_undefined__"?void 0:F}return bT.call(D,x)?D[x]:void 0},Nl=Object.prototype.hasOwnProperty,Sv=function(x){var D=this.__data__;return ld?D[x]!==void 0:Nl.call(D,x)},ST=function(x,D){var F=this.__data__;return this.size+=this.has(x)?0:1,F[x]=ld&&D===void 0?"__lodash_hash_undefined__":D,this};function oc(S){var x=-1,D=S==null?0:S.length;for(this.clear();++x<D;){var F=S[x];this.set(F[0],F[1])}}oc.prototype.clear=vT,oc.prototype.delete=yT,oc.prototype.get=TT,oc.prototype.has=Sv,oc.prototype.set=ST;var ud=oc,CT=function(){this.__data__=[],this.size=0},cp=function(x,D){return x===D||x!=x&&D!=D},lp=function(x,D){for(var F=x.length;F--;)if(cp(x[F][0],D))return F;return-1},MT=Array.prototype.splice,kT=function(x){var D=this.__data__,F=lp(D,x);return!(F<0)&&(F==D.length-1?D.pop():MT.call(D,F,1),--this.size,!0)},Rl=function(x){var D=this.__data__,F=lp(D,x);return F<0?void 0:D[F][1]},up=function(x){return lp(this.__data__,x)>-1},dd=function(x,D){var F=this.__data__,O=lp(F,x);return O<0?(++this.size,F.push([x,D])):F[O][1]=D,this};function Bl(S){var x=-1,D=S==null?0:S.length;for(this.clear();++x<D;){var F=S[x];this.set(F[0],F[1])}}Bl.prototype.clear=CT,Bl.prototype.delete=kT,Bl.prototype.get=Rl,Bl.prototype.has=up,Bl.prototype.set=dd;var dp=Bl,kc=ll(Vs,"Map"),_T=function(){this.size=0,this.__data__={hash:new ud,map:new(kc||dp),string:new ud}},wT=function(x){var D=typeof x;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?x!=="__proto__":x===null},pp=function(x,D){var F=x.__data__;return wT(D)?F[typeof D=="string"?"string":"hash"]:F.map},xT=function(x){var D=pp(this,x).delete(x);return this.size-=D?1:0,D},Fl=function(x){return pp(this,x).get(x)},fp=function(x){return pp(this,x).has(x)},IT=function(x,D){var F=pp(this,x),O=F.size;return F.set(x,D),this.size+=F.size==O?0:1,this};function Ll(S){var x=-1,D=S==null?0:S.length;for(this.clear();++x<D;){var F=S[x];this.set(F[0],F[1])}}Ll.prototype.clear=_T,Ll.prototype.delete=xT,Ll.prototype.get=Fl,Ll.prototype.has=fp,Ll.prototype.set=IT;var ul=Ll,Pg=function(x){return this.__data__.set(x,"__lodash_hash_undefined__"),this},Cv=function(x){return this.__data__.has(x)};function mp(S){var x=-1,D=S==null?0:S.length;for(this.__data__=new ul;++x<D;)this.add(S[x])}mp.prototype.add=mp.prototype.push=Pg,mp.prototype.has=Cv;var Ag=mp,ET=function(x,D,F,O){for(var oe=x.length,_e=F+(O?1:-1);O?_e--:++_e<oe;)if(D(x[_e],_e,x))return _e;return-1},Mv=function(x){return x!=x},kv=function(x,D,F){for(var O=F-1,oe=x.length;++O<oe;)if(x[O]===D)return O;return-1},Og=function(x,D,F){return D==D?kv(x,D,F):ET(x,Mv,F)},gp=function(x,D){return!!(x!=null&&x.length)&&Og(x,D,0)>-1},_v=function(x,D,F){for(var O=-1,oe=x==null?0:x.length;++O<oe;)if(F(D,x[O]))return!0;return!1},$l=function(x,D){for(var F=-1,O=x==null?0:x.length,oe=Array(O);++F<O;)oe[F]=D(x[F],F,x);return oe},Ng=function(x,D){return x.has(D)},Rg=function(x,D,F,O){var oe=-1,_e=gp,z=!0,qe=x.length,jt=[],lr=D.length;if(!qe)return jt;F&&(D=$l(D,xg(F))),O?(_e=_v,z=!1):D.length>=200&&(_e=Ng,z=!1,D=new Ag(D));e:for(;++oe<qe;){var fr=x[oe],Sr=F==null?fr:F(fr);if(fr=O||fr!==0?fr:0,z&&Sr==Sr){for(var br=lr;br--;)if(D[br]===Sr)continue e;jt.push(fr)}else _e(D,Sr,O)||jt.push(fr)}return jt},hp=function(x){return x},wv=function(x,D,F){switch(F.length){case 0:return x.call(D);case 1:return x.call(D,F[0]);case 2:return x.call(D,F[0],F[1]);case 3:return x.call(D,F[0],F[1],F[2])}return x.apply(D,F)},pd=Math.max,xv=function(x,D,F){return D=pd(D===void 0?x.length-1:D,0),function(){for(var O=arguments,oe=-1,_e=pd(O.length-D,0),z=Array(_e);++oe<_e;)z[oe]=O[D+oe];oe=-1;for(var qe=Array(D+1);++oe<D;)qe[oe]=O[oe];return qe[D]=F(z),wv(x,this,qe)}},PT=function(x){return function(){return x}},vp=function(){try{var S=ll(Object,"defineProperty");return S({},"",{}),S}catch{}}(),Iv=vp?function(S,x){return vp(S,"toString",{configurable:!0,enumerable:!1,value:PT(x),writable:!0})}:hp,Bg=Date.now,yp=function(x){var D=0,F=0;return function(){var O=Bg(),oe=16-(O-F);if(F=O,oe>0){if(++D>=800)return arguments[0]}else D=0;return x.apply(void 0,arguments)}},Ev=yp(Iv),Pv=function(x,D){return Ev(xv(x,D,hp),x+"")},Fg=function(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=9007199254740991},bp=function(x){return x!=null&&Fg(x.length)&&!Zd(x)},En=function(x){return cs(x)&&bp(x)},AT=Pv(function(S,x){return En(S)?Rg(S,x):[]}),jl=AT;function OT(S,x){return x instanceof RegExp?"__REGEXP "+x.toString():x}function Gr(S,x,D){var F;x===void 0&&(x={});var O={};return In(F=na(S)).call(F,function(oe){var _e=S[oe].type,z=D?"In "+D+", ":"";if(x[oe]===void 0){if(S[oe].required===!1)return void(O[oe]=x[oe]);throw new al(z+'param "'+oe+'" is required',{key:oe},"required")}var qe=NT[_e];if(qe&&!qe(x,oe,S[oe]))throw new al(z+'param "'+oe+'" expects '+mo(S[oe],OT),{key:oe,value:x[oe]},mo(S[oe]));O[oe]=x[oe]}),O}var NT={string:function(x,D,F){var O=F.allowEmpty,oe=F.max,_e=F.min,z=F.regExp,qe=x[D];return typeof qe=="string"&&(O!==!1||qe!=="")&&!(typeof oe=="number"&&qe.length>oe)&&!(typeof _e=="number"&&qe.length<_e)&&!(cT(z)&&!z.test(qe))},number:function(x,D,F){var O=F.min,oe=F.max,_e=x[D];return typeof _e=="number"&&!(typeof O=="number"&&_e<O)&&!(typeof oe=="number"&&_e>oe)},boolean:function(x,D){return typeof x[D]=="boolean"},enum:function(x,D,F){var O=ip(F),oe=x[D];return!O||pa(O).call(O,oe)>-1},array:function(x,D,F){var O,oe=F.itemType,_e=F.rules,z=F.min,qe=F.max,jt=ip(F),lr=x[D];return!!ns(lr)&&!(typeof qe=="number"&&lr.length>qe)&&!(typeof z=="number"&&lr.length<z)&&!(oe&&oe!=="enum"&&!Al(lr).call(lr,function(fr){return typeof fr===oe}))&&(oe!=="enum"||!jt||!jl.apply(void 0,qs(O=[lr]).call(O,jt)).length)&&(_e&&In(lr).call(lr,function(fr,Sr){return Gr(_e,fr,D+"["+Sr+"]")}),!0)},object:function(x,D,F){var O=F.rules,oe=x[D];return O&&Gr(O,oe,D),!0}},Dl=ll(Vs,"Set"),RT=function(){},Tp=function(x){var D=-1,F=Array(x.size);return x.forEach(function(O){F[++D]=O}),F},Lg=Dl&&1/Tp(new Dl([,-0]))[1]==1/0?function(S){return new Dl(S)}:RT,Av=Lg,Sp=function(x,D,F){var O=-1,oe=gp,_e=x.length,z=!0,qe=[],jt=qe;if(F)z=!1,oe=_v;else if(_e>=200){var lr=D?null:Av(x);if(lr)return Tp(lr);z=!1,oe=Ng,jt=new Ag}else jt=D?[]:qe;e:for(;++O<_e;){var fr=x[O],Sr=D?D(fr):fr;if(fr=F||fr!==0?fr:0,z&&Sr==Sr){for(var br=jt.length;br--;)if(jt[br]===Sr)continue e;D&&jt.push(Sr),qe.push(fr)}else oe(jt,Sr,F)||(jt!==qe&&jt.push(Sr),qe.push(fr))}return qe},BT=function(x){return x&&x.length?Sp(x):[]},$g=`	
\v\f\r                　\u2028\u2029\uFEFF`,Cp=Ce("".replace),Mp="["+$g+"]",fd=RegExp("^"+Mp+Mp+"*"),Ov=RegExp(Mp+Mp+"*$"),kp=function(S){return function(x){var D=Aa(pr(x));return 1&S&&(D=Cp(D,fd,"")),2&S&&(D=Cp(D,Ov,"")),D}},Nv={start:kp(1),end:kp(2),trim:kp(3)}.trim,md=u.parseInt,jg=u.Symbol,Pi=jg&&jg.iterator,_o=/^[+-]?0x/i,_p=Ce(_o.exec),vi=md($g+"08")!==8||md($g+"0x16")!==22||Pi&&!c(function(){md(Object(Pi))})?function(x,D){var F=Nv(Aa(x));return md(F,D>>>0||(_p(_o,F)?16:10))}:md;Vr({global:!0,forced:parseInt!=vi},{parseInt:vi});var Ai,Lo=or.parseInt,Dg=(Ai=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Ai()+Ai()+Ai()+Ai()+Ai()+Ai()+Ai()+Ai()});function ia(S){var x;return Js(x=na(S)).call(x,function(D){return!(+D>=0)})}function Rv(S,x){var D,F=Js(D=na(S)).call(D,function(O){return S[O]==x});return F.length>0?F[0]:void 0}var FT=TypeError,wp=Object.getOwnPropertyDescriptor,LT=Oe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(S){return S instanceof TypeError}}()?function(S,x){if(Ya(S)&&!wp(S,"length").writable)throw FT("Cannot set read only .length");return S.length=x}:function(S,x){return S.length=x},$T=TypeError,xp=function(S,x){if(!delete S[x])throw $T("Cannot delete property "+Rr(x)+" of "+Rr(S))},jT=Ui("splice"),Ug=Math.max,qg=Math.min;Vr({target:"Array",proto:!0,forced:!jT},{splice:function(x,D){var F,O,oe,_e,z,qe,jt=$n(this),lr=Ia(jt),fr=ri(x,lr),Sr=arguments.length;for(Sr===0?F=O=0:Sr===1?(F=0,O=lr-fr):(F=Sr-2,O=qg(Ug($i(D),0),lr-fr)),uu(lr+F-O),oe=fu(jt,O),_e=0;_e<O;_e++)(z=fr+_e)in jt&&Rs(oe,_e,jt[z]);if(oe.length=O,F<O){for(_e=fr;_e<lr-O;_e++)qe=_e+F,(z=_e+O)in jt?jt[qe]=jt[z]:xp(jt,qe);for(_e=lr;_e>lr-O+F;_e--)xp(jt,_e-1)}else if(F>O)for(_e=lr-O;_e>fr;_e--)qe=_e+F-1,(z=_e+O-1)in jt?jt[qe]=jt[z]:xp(jt,qe);for(_e=0;_e<F;_e++)jt[_e+fr]=arguments[_e+2];return LT(jt,lr-O+F),oe}});var DT=Uo("Array").splice,Ip=Array.prototype,Bv=function(S){var x=S.splice;return S===Ip||tr(Ip,S)&&x===Ip.splice?DT:x},Ep=function(S,x,D,F){try{return F?x(Vn(D)[0],D[1]):x(D)}catch(O){Ou(S,"throw",O)}},gd=Array,Fv=!Gm(function(S){Array.from(S)});Vr({target:"Array",stat:!0,forced:Fv},{from:function(x){var D=$n(x),F=Uc(this),O=arguments.length,oe=O>1?arguments[1]:void 0,_e=oe!==void 0;_e&&(oe=$o(oe,O>2?arguments[2]:void 0));var z,qe,jt,lr,fr,Sr,br=Jc(D),Er=0;if(!br||this===gd&&fm(br))for(z=Ia(D),qe=F?new this(z):gd(z);z>Er;Er++)Sr=_e?oe(D[Er],Er):D[Er],Rs(qe,Er,Sr);else for(fr=(lr=Gi(D,br)).next,qe=F?new this:[];!(jt=Y(fr,lr)).done;Er++)Sr=_e?Ep(lr,oe,[jt.value,Er],!0):jt.value,Rs(qe,Er,Sr);return qe.length=Er,qe}});var _c=or.Array.from,Va=Jc;function Lv(S,x){var D,F=ha!==void 0&&Va(S)||S["@@iterator"];if(F)return Oo(D=(F=F.call(S)).next).call(D,F);if(ns(S)||(F=function(_e,z){var qe;if(_e){if(typeof _e=="string")return $v(_e,z);var jt=Co(qe=Object.prototype.toString.call(_e)).call(qe,8,-1);if(jt==="Object"&&_e.constructor&&(jt=_e.constructor.name),jt==="Map"||jt==="Set")return _c(_e);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return $v(_e,z)}}(S))||x&&S&&typeof S.length=="number"){F&&(S=F);var O=0;return function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $v(S,x){(x==null||x>S.length)&&(x=S.length);for(var D=0,F=new Array(x);D<x;D++)F[D]=S[D];return F}var ls,jv=function(){function S(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var x=S.prototype;return x.addTimer=function(F,O,oe){O===void 0&&(O=0),oe===void 0&&(oe=1);var _e=new Date().getTime(),z=this.id;return this.timerList.push({id:z,loop:oe,count:0,timeout:_e+O,interval:O,callback:F}),this.id++,this.checkTimer(_e),z},x.checkTimer=function(F){if(F===void 0&&(F=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var O,oe,_e=0,z=Lv(this.timerList);!(O=z()).done;){var qe=O.value;(_e===0||_e>qe.timeout)&&(_e=qe.timeout)}this.timerList.length!==0&&(this.timer===null||_e<this.timeout||this.timeout<F)&&(this.timer=sa(Oo(oe=this.nowTime).call(oe,this),_e-F),this.timeout=_e)}},x.nowTime=function(){for(var F,O=new Date().getTime(),oe=Lv(this.timerList);!(F=oe()).done;){var _e=F.value;O>=_e.timeout&&(_e.callback(),_e.count++,_e.timeout=O+_e.interval)}this.clerTime(),this.checkTimer(O)},x.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},x.deleteTimer=function(F){for(var O=this.timerList.length-1;O>=0;O--){var oe;this.timerList[O].id===F&&Bv(oe=this.timerList).call(oe,O,1)}},x.removeFinished=function(){for(var F=this.timerList.length-1;F>=0;F--){var O,oe=this.timerList[F];oe.loop>=0&&oe.count>=oe.loop&&Bv(O=this.timerList).call(O,F,1)}},x.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},S}(),Dv=function(){function S(D){this.core=D}var x=S.prototype;return x.request=function(F,O){var oe=this,_e=new Date().getTime();return ta.request(F,O).catch(function(z){var qe,jt,lr=z;throw oe.core.reporter.reportTraceStart("exceptions",{user_id:oe.core.options.account,trace_id:(jt=(qe=oe.core)===null||qe===void 0?void 0:qe.socket)===null||jt===void 0?void 0:jt.sessionId,start_time:_e,action:1}),oe.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof lr.code=="number"?lr.code:0,description:lr.message||""+lr.code,operation_type:0,target:F,context:O?mo(O):""}),oe.core.reporter.reportTraceEnd("exceptions",1),z})},x.uploadFile=function(F){var O=this,oe=new Date().getTime();return ta.uploadFile(F).catch(function(_e){var z,qe,jt=_e;O.core.reporter.reportTraceStart("exceptions",{user_id:O.core.options.account,trace_id:(qe=(z=O.core)===null||z===void 0?void 0:z.socket)===null||qe===void 0?void 0:qe.sessionId,start_time:oe,action:1});var lr=ta.platform==="BROWSER"?F.chunkUploadHost:F.commonUploadHost?F.commonUploadHost+"/"+(F.nosToken&&F.nosToken.bucket):"https://nos.netease.com/nim";throw O.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof jt.code=="number"?jt.code:0,description:jt.message||""+jt.code,operation_type:1,target:lr}),O.core.reporter.reportTraceEnd("exceptions",1),_e})},S}();(function(S){S[S.ACTIVE=1]="ACTIVE",S[S.KICKED=2]="KICKED",S[S.OFFLINE=3]="OFFLINE"})(ls||(ls={}));var Uv=window&&Zd(window.addEventListener)&&Zd(window.removeEventListener),hd=function(S){function x(F,O){var oe;(oe=S.call(this)||this).status="unconnected",oe.linkUrls=[],oe.eventBus=new ug,oe.packetSer=1,oe.retryCount=0,oe.reconnectTimer=0,oe.backoff=new U1({max:8e3,min:1600,jitter:.01}),oe.sendingCmdMap=new nl,oe.pingTimer=0,oe.config=cv,oe.abtInfo={},Gr({linkUrls:{type:"array",itemType:"string",required:!1}},F),oe.options=Tn(Tn({},lv),F),oe.adapters=new Dv(i(oe));var _e=ta.localStorage.getItem("__NIM_DEVC_ID__");oe.options.isFixedDeviceId?(_e=ta.localStorage.getItem("__NIM_DEVC_ID__")||Dg(),ta.localStorage.setItem("__NIM_DEVC_ID__",_e)):_e=Dg(),oe.config=Tn(Tn(Tn({},cv),O),{deviceId:_e}),oe.timerManager=new jv,oe.logger=new gv(oe.options.debugLevel,oe.options.account);var z=ta.getSystemInfo();return oe.reporter=new hv({common:{app_key:F.appkey,dev_id:_e,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:z.os,os_ver:z.osVer,model:z.hostEnvVer,manufactor:z.hostEnv,host_env:z.hostEnv,host_info:z.hostInfo,host_env_ver:z.hostEnvVer},request:ta.request,logger:oe.logger,autoStart:ta.platform==="BROWSER"}),ta.setLogger(oe.logger),oe.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",F.appkey),oe}Ro(x,S);var D=x.prototype;return D.emit=function(O){try{for(var oe,_e,z=ts(),qe=arguments.length,jt=new Array(qe>1?qe-1:0),lr=1;lr<qe;lr++)jt[lr-1]=arguments[lr];var fr=(oe=S.prototype.emit).call.apply(oe,qs(_e=[this,O]).call(_e,jt)),Sr=ts()-z;return Sr>=10&&this.logger.warn("Core::emit event: "+O+" process takes: "+Sr+"ms"),fr}catch(br){return this.logger.error("Core::emit event: "+O+". Error: "+br),!1}},D.connect=function(O,oe){return O===void 0&&(O={}),Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe,jt,lr,fr,Sr;return sr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(Gr({linkUrls:{type:"array",itemType:"string",required:!1}},O),/^(unconnected|waitReconnect)$/.test(this.status)){Er.next=5;break}return z="Core socket status is "+this.status+", and would not connect",this.logger.warn(z),Er.abrupt("return",co.reject(z));case 5:this.status="connecting",O.linkUrls&&O.linkUrls.length>0&&(this.linkUrls=qs(qe=O.linkUrls).call(qe,this.linkUrls),this.linkUrls=BT(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push("weblink.netease.im:443"),jt=0;case 9:if(!(jt<this.linkUrls.length)){Er.next=32;break}return lr=this.linkUrls[jt],fr=new Date().getTime(),Er.prev=12,Er.next=15,this.doConnect(lr);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+lr),this.abtRequest(),Er.abrupt("return",lr);case 21:Er.prev=21,Er.t0=Er.catch(12),Sr=Er.t0,oe&&oe(Sr,lr),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:fr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Sr.code=="number"?Sr.code:0,description:Sr.message||""+Sr.code,operation_type:0,target:lr}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+lr,Er.t0);case 29:jt++,Er.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect(ls.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(ls.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return Er.stop()}},_e,this,[[12,21]])}))},D.doConnect=function(O){var oe=this;return new co(function(_e,z){var qe;oe.socket=new aT(oe,O,oe.logger),oe.socket.on("connect",function(){oe.logger.log("socket on connect",O),_e()}),oe.socket.on("message",Oo(qe=oe.onMessage).call(qe,oe)),oe.socket.on("disconnect",function(jt){oe.logger.log("core:: socket on disconnect",jt),oe.doDisconnect(ls.OFFLINE,"SocketOnDisconnect")}),oe.socket.on("handshakeFailed",function(){oe.logger.warn("core:: socket handshake failed"),z(new yo("handshake failed",{},408))})})},D.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},D.doDisconnect=function(O,oe){if(this.logger.log("doDisconnect: type "+O+", description "+oe),this.status!=="unconnected"){this.markAllCmdInvaild(new yo("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var _e=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(O===ls.ACTIVE||_e)this.logger.log("doDisconnect: emit disconnect, type "+O,_e),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(O===ls.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var z=typeof oe=="string"?{reason:"unknow",message:oe}:oe;this.eventBus.emit("kicked",z),this.emit("kicked",z),this.destroyOnlineListener()}else O===ls.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},D.attempToReconnect=function(){var O=this;if(this.status!=="waitReconnect"){var oe=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+oe),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:oe}),this.emit("willReconnect",{retryCount:this.retryCount,duration:oe}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=sa(function(){O.status==="waitReconnect"?O.connect({isAutoReconnect:!0}).catch(function(){O.logger.error("core::attempToReconnect failed "+O.retryCount)}):O.logger.warn("doDisconnect: reconnectTimer status is "+O.status+", would not go on reconnecting")},oe)}else this.logger.warn("doDisconnect: already is waiting reconnect")},D.sendCmd=function(O,oe,_e){var z=this;if(this.status!=="logined"&&O!=="login"&&O!=="chatroomLogin"&&O!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+O),co.reject({cmd:O,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return co.reject("No_socket");var qe=O!=="heartbeat",jt=qe?this.packetSer++:0,lr=function(vn,Xr,wn,hn){var Gn=id[vn];if(!Gn)return wn.error("createCmd:: can not find cmd config: ",vn),null;var Dn,jo={SER:Xr,SID:Gn.sid,CID:Gn.cid,Q:[]};return Gn.params&&hn&&In(Dn=Gn.params).call(Dn,function(jn){var wr=hn[jn.name];if(!bv(wr)){var xn=jn.type,Nn=jn.reflectMapper;switch(jn.type){case"PropertyArray":xn="ArrayMable",wr=vo(wr).call(wr,function(Cn){return{t:"Property",v:Nn?rs(Cn,Nn):Cn}});break;case"Property":wr=Nn?rs(wr,Nn):wr;break;case"Bool":case"bool":wr=wr?"true":"false"}jo.Q.push({t:xn,v:wr})}}),{packet:jo,isNoResponse:Gn.isNoResponse||!1}}(O,jt,this.logger,oe);if(!lr){var fr="SendCmd "+jt+" "+O+" error";return this.logger.error(fr),co.reject(fr)}var Sr=lr.packet,br=lr.isNoResponse,Er=mo(Sr);qe&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",O,"ser:"+jt,Er):this.logger.log("core::sendCmd",O,"ser:"+jt));var Dr=new Date().getTime();return new co(function($r,vn){z.sendingCmdMap.set(jt,{cmd:O,params:oe,callback:[$r,vn],timer:br?null:sa(function(){var wn,hn=new Tg(504,O,"Packet Timeout",new Date().getTime(),{message:"ser "+jt+" cmd "+O+" timeout"});hn.callFunc="sendCmd",z.markCmdInvalid(jt,hn,O),z.reporter.reportTraceStart("exceptions",{user_id:z.options.account,trace_id:(wn=z.socket)===null||wn===void 0?void 0:wn.sessionId,start_time:Dr,action:2}),z.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:Sr.SID+"-"+Sr.CID,context:""+Sr.SER}),z.reporter.reportTraceEnd("exceptions",1)},_e&&_e.timeout?_e.timeout:z.config.timeout)});try{z.socket.send(Er)}catch(wn){var Xr=new Tg(415,O,wn&&wn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:wn});Xr.callFunc="sendCmd",z.markCmdInvalid(jt,Xr,O),vn(wn)}})},D.onMessage=function(O){var oe=qa(O,this.logger);if(oe){var _e=oe.raw.ser;if(oe.error&&this.logger.error("core:onMessage packet error",oe.raw.sid+"_"+oe.raw.cid+", ser:"+_e+",",oe.error),!oe.notFound)return oe.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+_e,oe.cmd,oe.content):this.logger.log("imsocket::recvCmd ser:"+_e,oe.cmd)),oe.__receiveTime=ts(),oe;this.logger.warn("core::onMessage packet not found",oe.raw.sid+"_"+oe.raw.cid+", ser:"+_e)}},D.markCmdInvalid=function(O,oe,_e){var z=this.sendingCmdMap.get(O);if(z){var qe=z.callback,jt=z.timer;jt&&clearTimeout(jt),this.sendingCmdMap.delete(O),this.logger.warn("packet "+O+", "+_e+" is invalid:",oe),qe[1](oe)}},D.markAllCmdInvaild=function(O){var oe;this.logger.log("markAllCmdInvaild"),In(oe=this.sendingCmdMap).call(oe,function(_e){var z=_e.callback,qe=_e.timer;qe&&clearTimeout(qe),z[1](O)}),this.sendingCmdMap.clear()},D.ping=function(){return Mr(this,void 0,void 0,sr.mark(function O(){var oe=this;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return clearTimeout(this.pingTimer),z.prev=1,z.next=4,this.sendCmd("heartbeat");case 4:z.next=14;break;case 6:return z.prev=6,z.t0=z.catch(1),z.next=10,this.testHeartBeat5Timeout();case 10:if(!z.sent){z.next=14;break}return this.doDisconnect(ls.OFFLINE,"PingError"),z.abrupt("return");case 14:this.pingTimer=sa(function(){oe.ping()},3e4);case 15:case"end":return z.stop()}},O,this,[[1,6]])}))},D.testHeartBeat5Timeout=function(){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:clearTimeout(this.pingTimer),oe=0;case 2:if(!(oe<5)){z.next=15;break}return z.prev=3,z.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return z.abrupt("return",!1);case 9:z.prev=9,z.t0=z.catch(3),this.logger.debug("core:: test heartbeat "+oe+" Timeout");case 12:oe++,z.next=2;break;case 15:return z.abrupt("return",!0);case 16:case"end":return z.stop()}},O,this,[[3,9]])}))},D.initOnlineListener=function(){var O,oe;this.onlineListener||(Uv?(this.onlineListener=Oo(O=function(){this.status==="logined"&&this.ping()}).call(O,this),this.offlineListener=Oo(oe=function(){this.logger.log("offline"),this.doDisconnect(ls.OFFLINE,"OfflineListener")}).call(oe,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},D.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},D.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(ls.ACTIVE,"UserActiveDisconnect"),co.resolve();case"unconnected":case"destroyed":return co.resolve()}},D.destroy=function(){var O=this;return this.disconnect().then(function(){O.status="destroyed",O.removeAllListeners(),O.eventBus.removeAllListeners(),O.reporter.destroy(),O.connect=function(){return co.resolve()},O.disconnect=function(){return co.resolve()},O.destroy=function(){return co.resolve()}})},D.abtRequest=function(){var O,oe;return Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this.options.isAbtestEnable){lr.next=2;break}return lr.abrupt("return");case 2:if(!this.abtInfo.experiments){lr.next=4;break}return lr.abrupt("return");case 4:if(this.options.abtestUrl){lr.next=6;break}return lr.abrupt("return");case 6:return lr.prev=6,lr.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:z=lr.sent,lr.next=15;break;case 12:lr.prev=12,lr.t0=lr.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((oe=(O=z==null?void 0:z.data)===null||O===void 0?void 0:O.data)===null||oe===void 0?void 0:oe.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:vo(qe=this.abtInfo.experiments).call(qe,function(fr){return{experimentKey:fr.experimentKey,schemeKey:fr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return lr.stop()}},_e,this,[[6,12]])}))},x}(ug);hd.setAdapters=function(x){Tn(ta,x)};var qv=bs.some,yi=Ds("some");Vr({target:"Array",proto:!0,forced:!yi},{some:function(x){return qv(this,x,arguments.length>1?arguments[1]:void 0)}});var Pp=Uo("Array").some,Vg=Array.prototype,Ap=function(S){var x=S.some;return S===Vg||tr(Vg,S)&&x===Vg.some?Pp:x},Hg=function(){this.__data__=new dp,this.size=0},zg=function(x){var D=this.__data__,F=D.delete(x);return this.size=D.size,F},UT=function(x){return this.__data__.get(x)},qT=function(x){return this.__data__.has(x)},VT=function(x,D){var F=this.__data__;if(F instanceof dp){var O=F.__data__;if(!kc||O.length<199)return O.push([x,D]),this.size=++F.size,this;F=this.__data__=new ul(O)}return F.set(x,D),this.size=F.size,this};function Ul(S){var x=this.__data__=new dp(S);this.size=x.size}Ul.prototype.clear=Hg,Ul.prototype.delete=zg,Ul.prototype.get=UT,Ul.prototype.has=qT,Ul.prototype.set=VT;var Op=Ul,Vv=function(x,D){for(var F=-1,O=x==null?0:x.length;++F<O;)if(D(x[F],F,x))return!0;return!1},Kg=function(x,D,F,O,oe,_e){var z=1&F,qe=x.length,jt=D.length;if(qe!=jt&&!(z&&jt>qe))return!1;var lr=_e.get(x),fr=_e.get(D);if(lr&&fr)return lr==D&&fr==x;var Sr=-1,br=!0,Er=2&F?new Ag:void 0;for(_e.set(x,D),_e.set(D,x);++Sr<qe;){var Dr=x[Sr],$r=D[Sr];if(O)var vn=z?O($r,Dr,Sr,D,x,_e):O(Dr,$r,Sr,x,D,_e);if(vn!==void 0){if(vn)continue;br=!1;break}if(Er){if(!Vv(D,function(Xr,wn){if(!Ng(Er,wn)&&(Dr===Xr||oe(Dr,Xr,F,O,_e)))return Er.push(wn)})){br=!1;break}}else if(Dr!==$r&&!oe(Dr,$r,F,O,_e)){br=!1;break}}return _e.delete(x),_e.delete(D),br},Hv=Vs.Uint8Array,HT=function(x){var D=-1,F=Array(x.size);return x.forEach(function(O,oe){F[++D]=[oe,O]}),F},vd=wi?wi.prototype:void 0,dl=vd?vd.valueOf:void 0,Wg=function(x,D,F,O,oe,_e,z){switch(F){case"[object DataView]":if(x.byteLength!=D.byteLength||x.byteOffset!=D.byteOffset)return!1;x=x.buffer,D=D.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=D.byteLength||!_e(new Hv(x),new Hv(D)));case"[object Boolean]":case"[object Date]":case"[object Number]":return cp(+x,+D);case"[object Error]":return x.name==D.name&&x.message==D.message;case"[object RegExp]":case"[object String]":return x==D+"";case"[object Map]":var qe=HT;case"[object Set]":var jt=1&O;if(qe||(qe=Tp),x.size!=D.size&&!jt)return!1;var lr=z.get(x);if(lr)return lr==D;O|=2,z.set(x,D);var fr=Kg(qe(x),qe(D),O,oe,_e,z);return z.delete(x),fr;case"[object Symbol]":if(dl)return dl.call(x)==dl.call(D)}return!1},As=function(x,D){for(var F=-1,O=D.length,oe=x.length;++F<O;)x[oe+F]=D[F];return x},Oi=Array.isArray,Np=function(x,D,F){var O=D(x);return Oi(x)?O:As(O,F(x))},Fa=function(x,D){for(var F=-1,O=x==null?0:x.length,oe=0,_e=[];++F<O;){var z=x[F];D(z,F,x)&&(_e[oe++]=z)}return _e},zv=function(){return[]},Gg=Object.prototype.propertyIsEnumerable,Qg=Object.getOwnPropertySymbols,zT=Qg?function(S){return S==null?[]:(S=Object(S),Fa(Qg(S),function(x){return Gg.call(S,x)}))}:zv,Jg=zT,KT=function(x,D){for(var F=-1,O=Array(x);++F<x;)O[F]=D(F);return O},Rp=function(x){return cs(x)&&Qs(x)=="[object Arguments]"},Yg=Object.prototype,ql=Yg.hasOwnProperty,WT=Yg.propertyIsEnumerable,Xg=Rp(function(){return arguments}())?Rp:function(S){return cs(S)&&ql.call(S,"callee")&&!WT.call(S,"callee")},Zg=Xg,GT=function(){return!1},eh=o(function(S,x){var D=x&&!x.nodeType&&x,F=D&&S&&!S.nodeType&&S,O=F&&F.exports===D?Vs.Buffer:void 0,oe=(O?O.isBuffer:void 0)||GT;S.exports=oe}),Kv=/^(?:0|[1-9]\d*)$/,yd=function(x,D){var F=typeof x;return!!(D=D??9007199254740991)&&(F=="number"||F!="symbol"&&Kv.test(x))&&x>-1&&x%1==0&&x<D},Ca={};Ca["[object Float32Array]"]=Ca["[object Float64Array]"]=Ca["[object Int8Array]"]=Ca["[object Int16Array]"]=Ca["[object Int32Array]"]=Ca["[object Uint8Array]"]=Ca["[object Uint8ClampedArray]"]=Ca["[object Uint16Array]"]=Ca["[object Uint32Array]"]=!0,Ca["[object Arguments]"]=Ca["[object Array]"]=Ca["[object ArrayBuffer]"]=Ca["[object Boolean]"]=Ca["[object DataView]"]=Ca["[object Date]"]=Ca["[object Error]"]=Ca["[object Function]"]=Ca["[object Map]"]=Ca["[object Number]"]=Ca["[object Object]"]=Ca["[object RegExp]"]=Ca["[object Set]"]=Ca["[object String]"]=Ca["[object WeakMap]"]=!1;var Wv=function(x){return cs(x)&&Fg(x.length)&&!!Ca[Qs(x)]},th=Ol&&Ol.isTypedArray,ac=th?xg(th):Wv,Gv=Object.prototype.hasOwnProperty,Qv=function(x,D){var F=Oi(x),O=!F&&Zg(x),oe=!F&&!O&&eh(x),_e=!F&&!O&&!oe&&ac(x),z=F||O||oe||_e,qe=z?KT(x.length,String):[],jt=qe.length;for(var lr in x)!D&&!Gv.call(x,lr)||z&&(lr=="length"||oe&&(lr=="offset"||lr=="parent")||_e&&(lr=="buffer"||lr=="byteLength"||lr=="byteOffset")||yd(lr,jt))||qe.push(lr);return qe},QT=Object.prototype,Jv=function(x){var D=x&&x.constructor;return x===(typeof D=="function"&&D.prototype||QT)},Yv=function(x,D){return function(F){return x(D(F))}},Xv=Yv(Object.keys,Object),JT=Object.prototype.hasOwnProperty,rh=function(x){if(!Jv(x))return Xv(x);var D=[];for(var F in Object(x))JT.call(x,F)&&F!="constructor"&&D.push(F);return D},wc=function(x){return bp(x)?Qv(x):rh(x)},nh=function(x){return Np(x,wc,Jg)},YT=Object.prototype.hasOwnProperty,Zv=function(x,D,F,O,oe,_e){var z=1&F,qe=nh(x),jt=qe.length;if(jt!=nh(D).length&&!z)return!1;for(var lr=jt;lr--;){var fr=qe[lr];if(!(z?fr in D:YT.call(D,fr)))return!1}var Sr=_e.get(x),br=_e.get(D);if(Sr&&br)return Sr==D&&br==x;var Er=!0;_e.set(x,D),_e.set(D,x);for(var Dr=z;++lr<jt;){var $r=x[fr=qe[lr]],vn=D[fr];if(O)var Xr=z?O(vn,$r,fr,D,x,_e):O($r,vn,fr,x,D,_e);if(!(Xr===void 0?$r===vn||oe($r,vn,F,O,_e):Xr)){Er=!1;break}Dr||(Dr=fr=="constructor")}if(Er&&!Dr){var wn=x.constructor,hn=D.constructor;wn==hn||!("constructor"in x)||!("constructor"in D)||typeof wn=="function"&&wn instanceof wn&&typeof hn=="function"&&hn instanceof hn||(Er=!1)}return _e.delete(x),_e.delete(D),Er},sc=ll(Vs,"DataView"),Da=ll(Vs,"Promise"),Vl=ll(Vs,"WeakMap"),va="[object Map]",Ys="[object Promise]",ey="[object Set]",os="[object WeakMap]",oh="[object DataView]",ah=il(sc),XT=il(kc),ZT=il(Da),ty=il(Dl),eS=il(Vl),pl=Qs;(sc&&pl(new sc(new ArrayBuffer(1)))!=oh||kc&&pl(new kc)!=va||Da&&pl(Da.resolve())!=Ys||Dl&&pl(new Dl)!=ey||Vl&&pl(new Vl)!=os)&&(pl=function(S){var x=Qs(S),D=x=="[object Object]"?S.constructor:void 0,F=D?il(D):"";if(F)switch(F){case ah:return oh;case XT:return va;case ZT:return Ys;case ty:return ey;case eS:return os}return x});var bd=pl,Xs="[object Arguments]",sh="[object Array]",Bp="[object Object]",Td=Object.prototype.hasOwnProperty,ry=function(x,D,F,O,oe,_e){var z=Oi(x),qe=Oi(D),jt=z?sh:bd(x),lr=qe?sh:bd(D),fr=(jt=jt==Xs?Bp:jt)==Bp,Sr=(lr=lr==Xs?Bp:lr)==Bp,br=jt==lr;if(br&&eh(x)){if(!eh(D))return!1;z=!0,fr=!1}if(br&&!fr)return _e||(_e=new Op),z||ac(x)?Kg(x,D,F,O,oe,_e):Wg(x,D,jt,F,O,oe,_e);if(!(1&F)){var Er=fr&&Td.call(x,"__wrapped__"),Dr=Sr&&Td.call(D,"__wrapped__");if(Er||Dr){var $r=Er?x.value():x,vn=Dr?D.value():D;return _e||(_e=new Op),oe($r,vn,F,O,_e)}}return!!br&&(_e||(_e=new Op),Zv(x,D,F,O,oe,_e))},ih=function S(x,D,F,O,oe){return x===D||(x==null||D==null||!cs(x)&&!cs(D)?x!=x&&D!=D:ry(x,D,F,O,S,oe))},tS=function(x,D,F,O){var oe=F.length,_e=oe,z=!O;if(x==null)return!_e;for(x=Object(x);oe--;){var qe=F[oe];if(z&&qe[2]?qe[1]!==x[qe[0]]:!(qe[0]in x))return!1}for(;++oe<_e;){var jt=(qe=F[oe])[0],lr=x[jt],fr=qe[1];if(z&&qe[2]){if(lr===void 0&&!(jt in x))return!1}else{var Sr=new Op;if(O)var br=O(lr,fr,jt,x,D,Sr);if(!(br===void 0?ih(fr,lr,3,O,Sr):br))return!1}}return!0},ny=function(x){return x==x&&!pi(x)},rS=function(x){for(var D=wc(x),F=D.length;F--;){var O=D[F],oe=x[O];D[F]=[O,oe,ny(oe)]}return D},ch=function(x,D){return function(F){return F!=null&&F[x]===D&&(D!==void 0||x in Object(F))}},oy=function(x){var D=rS(x);return D.length==1&&D[0][2]?ch(D[0][0],D[0][1]):function(F){return F===x||tS(F,x,D)}},Fp=function(x){return typeof x=="symbol"||cs(x)&&Qs(x)=="[object Symbol]"},nS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oS=/^\w*$/,Sd=function(x,D){if(Oi(x))return!1;var F=typeof x;return!(F!="number"&&F!="symbol"&&F!="boolean"&&x!=null&&!Fp(x))||oS.test(x)||!nS.test(x)||D!=null&&x in Object(D)};function lh(S,x){if(typeof S!="function"||x!=null&&typeof x!="function")throw new TypeError("Expected a function");var D=function(){var F=arguments,O=x?x.apply(this,F):F[0],oe=D.cache;if(oe.has(O))return oe.get(O);var _e=S.apply(this,F);return D.cache=oe.set(O,_e)||oe,_e};return D.cache=new(lh.Cache||ul),D}lh.Cache=ul;var Lp=lh,aS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$p=/\\(\\)?/g,Ma=function(x){var D=Lp(x,function(O){return F.size===500&&F.clear(),O}),F=D.cache;return D}(function(S){var x=[];return S.charCodeAt(0)===46&&x.push(""),S.replace(aS,function(D,F,O,oe){x.push(O?oe.replace($p,"$1"):F||D)}),x}),sS=Ma,uh=wi?wi.prototype:void 0,dh=uh?uh.toString:void 0,iS=function S(x){if(typeof x=="string")return x;if(Oi(x))return $l(x,S)+"";if(Fp(x))return dh?dh.call(x):"";var D=x+"";return D=="0"&&1/x==-1/0?"-0":D},ay=function(x){return x==null?"":iS(x)},jp=function(x,D){return Oi(x)?x:Sd(x,D)?[x]:sS(ay(x))},fl=function(x){if(typeof x=="string"||Fp(x))return x;var D=x+"";return D=="0"&&1/x==-1/0?"-0":D},ph=function(x,D){for(var F=0,O=(D=jp(D,x)).length;x!=null&&F<O;)x=x[fl(D[F++])];return F&&F==O?x:void 0},Wa=function(x,D,F){var O=x==null?void 0:ph(x,D);return O===void 0?F:O},cS=function(x,D){return x!=null&&D in Object(x)},Cd=function(x,D,F){for(var O=-1,oe=(D=jp(D,x)).length,_e=!1;++O<oe;){var z=fl(D[O]);if(!(_e=x!=null&&F(x,z)))break;x=x[z]}return _e||++O!=oe?_e:!!(oe=x==null?0:x.length)&&Fg(oe)&&yd(z,oe)&&(Oi(x)||Zg(x))},sy=function(x,D){return x!=null&&Cd(x,D,cS)},lS=function(x,D){return Sd(x)&&ny(D)?ch(fl(x),D):function(F){var O=Wa(F,x);return O===void 0&&O===D?sy(F,x):ih(D,O,3)}},fh=function(x){return function(D){return D==null?void 0:D[x]}},uS=function(x){return function(D){return ph(D,x)}},dS=function(x){return Sd(x)?fh(fl(x)):uS(x)},Ga=function(x){return typeof x=="function"?x:x==null?hp:typeof x=="object"?Oi(x)?lS(x[0],x[1]):oy(x):dS(x)},pS=function(x,D,F){D=="__proto__"&&vp?vp(x,D,{configurable:!0,enumerable:!0,value:F,writable:!0}):x[D]=F},mh=Object.prototype.hasOwnProperty,iy=function(x,D,F){var O=x[D];mh.call(x,D)&&cp(O,F)&&(F!==void 0||D in x)||pS(x,D,F)},fS=function(x,D,F,O){if(!pi(x))return x;for(var oe=-1,_e=(D=jp(D,x)).length,z=_e-1,qe=x;qe!=null&&++oe<_e;){var jt=fl(D[oe]),lr=F;if(jt==="__proto__"||jt==="constructor"||jt==="prototype")return x;if(oe!=z){var fr=qe[jt];(lr=O?O(fr,jt,qe):void 0)===void 0&&(lr=pi(fr)?fr:yd(D[oe+1])?[]:{})}iy(qe,jt,lr),qe=qe[jt]}return x},cy=function(x,D,F){for(var O=-1,oe=D.length,_e={};++O<oe;){var z=D[O],qe=ph(x,z);F(qe,z)&&fS(_e,jp(z,x),qe)}return _e},ly=Yv(Object.getPrototypeOf,Object),Md=Object.getOwnPropertySymbols?function(S){for(var x=[];S;)As(x,Jg(S)),S=ly(S);return x}:zv,mS=function(x){var D=[];if(x!=null)for(var F in Object(x))D.push(F);return D},gS=Object.prototype.hasOwnProperty,uy=function(x){if(!pi(x))return mS(x);var D=Jv(x),F=[];for(var O in x)(O!="constructor"||!D&&gS.call(x,O))&&F.push(O);return F},hS=function(x){return bp(x)?Qv(x,!0):uy(x)},vS=function(x){return Np(x,hS,Md)},gh,dy,py=function(x,D){if(x==null)return{};var F=$l(vS(x),function(O){return[O]});return D=Ga(D),cy(x,F,function(O,oe){return D(O,oe[0])})},fy={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},Hl={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},ml=Cc(Hl),hh={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:ml.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:Hl.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:ml.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:Hl.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:ml.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:ml.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:ml.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:Hl.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:ml.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:Hl.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:ml.mixStoreAuthTokenResTag}]}};(function(S){S[S.nos=1]="nos",S[S.s3=2]="s3"})(gh||(gh={})),function(S){S[S.dontNeed=-1]="dontNeed",S[S.time=2]="time",S[S.urls=3]="urls"}(dy||(dy={}));var Hs,Ni,yS={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},xc={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},vh={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function yh(S){return S===void 0&&(S="file"),mo(xc[S]||{}).replace(/"/gi,'\\"')}(function(S){S[S.nos=1]="nos",S[S.s3=2]="s3"})(Hs||(Hs={})),function(S){S[S.dontNeed=-1]="dontNeed",S[S.time=2]="time",S[S.urls=3]="urls"}(Ni||(Ni={}));var gy=function(){function S(D,F){F===void 0&&(F={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Hs.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=D.logger,this.core=D,Ei({cmdMap:fy,cmdConfig:hh}),this.setOptions(F)}var x=S.prototype;return x.setOptions=function(F){F===void 0&&(F={});var O=F.storageKeyPrefix||"NIMClient";this.GRAYKEY=O+"-AllGrayscaleConfig",this.MIXSTOREKEY=O+"-AllMixStorePolicy";var oe=F.s3,_e=xl(F,["s3"]),z=Tn({},yS,this.config);if(_e&&Object.prototype.hasOwnProperty.call(_e,"cdn")){var qe={cdn:Tn(Tn({},z.cdn),_e.cdn)};this.config=Tn({},z,_e,qe)}else this.config=Tn({},z,_e);oe&&(this.s3=oe)},x.init=function(){return Mr(this,void 0,void 0,sr.mark(function F(){return sr.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Hs.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){oe.next=9;break}return oe.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return oe.next=9,this.getNosCdnHost();case 9:case"end":return oe.stop()}},F,this)}))},x.uploadFile=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Gr({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},F),F.fileInput||F.file||F.filePath){jt.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!F.type||F.type==="file"){jt.next=7;break}if(typeof(oe=Wa(F,"file.type"))!="string"||pa(oe).call(oe,F.type)!==-1){jt.next=7;break}throw new Error('The meta type "'+oe+'" does not match "'+F.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){jt.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),jt.abrupt("return",this.nosUpload(F));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=Hs.nos),_e=vh,jt.prev=13,jt.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:yh(F.type)}});case 16:z=jt.sent,_e=z.content.mixStoreTokenResTag,jt.next=24;break;case 20:throw jt.prev=20,jt.t0=jt.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",jt.t0),new Tc("getMixStoreToken error",jt.t0,this.curProvider,this.mixStorePolicy);case 24:return jt.abrupt("return",this.curProvider===Hs.s3?this.s3Upload(F,_e):this.nosUpload(F,_e));case 25:case"end":return jt.stop()}},O,this,[[13,20]])}))},x.nosUpload=function(F,O){var oe,_e;return Mr(this,void 0,void 0,sr.mark(function z(){var qe,jt,lr,fr,Sr,br,Er,Dr,$r,vn,Xr,wn,hn;return sr.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:if(qe=Wa(this.core,"config.cdn.bucket"),jt={tag:F.nosScenes||qe||"nim",expireSec:F.nosSurvivalTime},O){Dn.next=13;break}return Dn.prev=3,Dn.next=6,this.core.sendCmd("getNosToken",{responseBody:yh(F.type),nosToken:jt});case 6:lr=Dn.sent,Dn.next=13;break;case 9:throw Dn.prev=9,Dn.t0=Dn.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Dn.t0),new Tc("getNosToken error",Dn.t0,1);case 13:return Dn.prev=13,Sr=lr?lr.content.nosToken:O,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:Sr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:ta.platform}),Dn.next=18,this.core.adapters.uploadFile(Tn(Tn({},F),{nosToken:Sr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:F.maxSize||this.config.chunkMaxSize}));case 18:fr=Dn.sent,Dn.next=42;break;case 21:if(Dn.prev=21,Dn.t1=Dn.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",Dn.t1),!O){Dn.next=41;break}if(this.nosErrorCount!==0){Dn.next=37;break}Dn.prev=26,this._addCircuitTimer(),Dn.next=33;break;case 30:throw Dn.prev=30,Dn.t2=Dn.catch(26),new Tc("upload file error",Dn.t2,this.curProvider,this.mixStorePolicy,F.file||F.filePath);case 33:return this.nosErrorCount=(oe=this.mixStorePolicy.nosPolicy)===null||oe===void 0?void 0:oe.uploadConfig.retryPolicy.retry,Dn.abrupt("return",this.uploadFile(F));case 37:return this.nosErrorCount--,Dn.abrupt("return",this.nosUpload(F,O));case 39:Dn.next=42;break;case 41:throw new Tc("nos uploadFile error",Dn.t1,1);case 42:if(br=fr==null?void 0:fr.type,Er=br&&pa(br).call(br,"/")>-1?Co(br).call(br,0,pa(br).call(br,"/")):"",Dr={image:"imageInfo",video:"vinfo",audio:"vinfo"},$r=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",lr?lr.content.nosToken.objectName:O==null?void 0:O.objectName),O&&O.shortUrl&&($r=O.shortUrl),Dr[Er]){Dn.next=49;break}return Dn.abrupt("return",Tn({url:$r},fr));case 49:if(Dn.prev=49,!(pa($r).call($r,"_im_url=1")<0)){Dn.next=54;break}return Dn.next=53,this.core.adapters.request($r+"?"+Dr[Er],{method:"GET",dataType:"json",timeout:5e3});case 53:vn=Dn.sent;case 54:Dn.next=60;break;case 56:return Dn.prev=56,Dn.t3=Dn.catch(49),this.core.logger.error("uploadFile:: fetch file info error",Dn.t3),Dn.abrupt("return",Tn({url:$r},fr));case 60:if(!vn){Dn.next=67;break}return Xr=vn.data,wn=Dr[Er]==="imageInfo"?Xr:(_e=Xr==null?void 0:Xr.GetVideoInfo)===null||_e===void 0?void 0:_e.VideoInfo,hn={url:$r,name:fr.name,size:fr.size,ext:fr.ext,w:wn.Width,h:wn.Height,orientation:wn.Orientation,dur:wn.Duration,audioCodec:wn.AudioCodec,videoCodec:wn.VideoCodec,container:wn.Container},Dn.abrupt("return",py(hn,function(jo,jn){return jn!==void 0}));case 67:return Dn.abrupt("return",Tn({url:$r},fr));case 68:case"end":return Dn.stop()}},z,this,[[3,9],[13,21],[26,30],[49,56]])}))},x.getNosCdnHost=function(){var F;return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe=this;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.prev=0,lr.next=3,this.core.sendCmd("getNosCdnHost");case 3:oe=lr.sent,lr.next=10;break;case 6:return lr.prev=6,lr.t0=lr.catch(0),this.logger.error("getNosCdnHost::error",lr.t0),lr.abrupt("return");case 10:if(oe){lr.next=12;break}return lr.abrupt("return");case 12:_e=(F=oe==null?void 0:oe.content)===null||F===void 0?void 0:F.nosConfigTag,(z=Lo(_e==null?void 0:_e.expire))!==0&&_e.cdnDomain?z===-1?(this.config.cdn.bucket=_e.bucket,this.config.cdn.cdnDomain=_e.cdnDomain,this.config.cdn.objectNamePrefix=_e.objectNamePrefix):(this.config.cdn.bucket=_e.bucket,this.config.cdn.cdnDomain=_e.cdnDomain,this.config.cdn.objectNamePrefix=_e.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){qe.getNosCdnHost()},1e3*z)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return lr.stop()}},O,this,[[0,6]])}))},x.getGrayscaleConfig=function(F){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(ta.localStorage)try{ta.localStorage.getItem&&ta.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(ta.localStorage.getItem(this.GRAYKEY))[F])}catch(lr){ta.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",lr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){jt.next=17;break}return jt.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(_e=jt.sent).content||!_e.content.grayConfigTag){jt.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(_e.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(_e.content.grayConfigTag.ttl)}catch(lr){this.logger.error("getGrayscaleConfig error",lr)}if(this.grayConfig){jt.next=10;break}return jt.abrupt("return");case 10:z=ta.localStorage.getItem(this.GRAYKEY)?JSON.parse(ta.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),z[F]=this.grayConfig,ta.localStorage.setItem(this.GRAYKEY,mo(z)),jt.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",_e.content);case 17:if(!(!((O=this.grayConfig)===null||O===void 0)&&O.mixStoreEnable)){jt.next=20;break}return jt.next=20,this._getMixStorePolicy(F);case 20:case"end":return jt.stop()}},oe,this)}))},x._getMixStorePolicy=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr,fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(oe=new Date().getTime(),ta.localStorage)try{this.mixStorePolicy=JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY))[F],this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>oe&&(z=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-oe,this.core.timerManager.addTimer(Oo(_e=this._getMixStorePolicy).call(_e,this,F),z))}catch(Er){ta.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY))[F]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Er)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=oe)){br.next=30;break}return br.prev=3,br.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:jt=br.sent,lr=jt.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(lr.ttl),this.mixStorePolicy.providers=lr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=lr.nosPolicy?JSON.parse(lr.nosPolicy):null,this.mixStorePolicy.s3Policy=lr.s3Policy?JSON.parse(lr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Oo(qe=this._getMixStorePolicy).call(qe,this,F),1e3*this.mixStorePolicy.ttl),fr=ta.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(ta.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),fr[F]=this.mixStorePolicy,ta.localStorage.setItem(this.MIXSTOREKEY,mo(fr)),br.next=30;break;case 23:if(br.prev=23,br.t0=br.catch(3),this.logger.error("getMixStorePolicy error",br.t0),this.mixStoreErrorCount!==0){br.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(F),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return br.stop()}},O,this,[[3,23]])}))},x.s3Upload=function(F,O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr,fr,Sr,br,Er,Dr,$r=this;return sr.wrap(function(Xr){for(;;)switch(Xr.prev=Xr.next){case 0:if(!F.file){Xr.next=4;break}_e=F.file,Xr.next=19;break;case 4:if(typeof F.fileInput!="string"){Xr.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((z=document.getElementById(F.fileInput))&&z.files&&z.files[0])){Xr.next=11;break}_e=z.files[0],Xr.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Xr.next=19;break;case 14:if(!(F.fileInput&&F.fileInput.files&&F.fileInput.files[0])){Xr.next=18;break}_e=F.fileInput.files[0],Xr.next=19;break;case 18:throw new Error("Can not get file from fileInput "+F.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Xr.next=21;break}throw new Error("dont get s3 policy");case 21:return qe={accessKeyId:O.accessKeyId,secretAccessKey:O.secretAccessKey,sessionToken:O.sessionToken,region:O.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},jt=this.s3,(lr=new jt).config.update(qe),fr=decodeURIComponent(O.bucket),Sr=decodeURIComponent(O.objectName),Er={Bucket:fr,Key:Sr,Body:br=_e,Metadata:{token:O.token},ContentType:br.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Er),Dr=lr.upload(Er),Xr.abrupt("return",new co(function(wn){var hn=new Date().getTime();Dr.send(function(Gn,Dn){var jo,jn;if(Gn){$r.logger.error("uploadFile:","api::s3:upload file failed",Gn),$r.core.reporter.reportTraceStart("exceptions",{user_id:$r.core.options.account,trace_id:(jn=(jo=$r.core)===null||jo===void 0?void 0:jo.socket)===null||jn===void 0?void 0:jn.sessionId,start_time:hn,action:1}),$r.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Gn.status=="number"?Gn.status:typeof Gn.code=="number"?Gn.code:0,description:Gn.message||""+Gn.code,operation_type:1,target:Gn.hostname}),$r.core.reporter.reportTraceEnd("exceptions",1);try{$r._addCircuitTimer()}catch(xn){throw new Tc("upload file error",xn,$r.curProvider,$r.mixStorePolicy,F.file||F.filePath)}wn($r.uploadFile(F))}else{var wr=$r.mixStorePolicy.s3Policy.cdnSchema;wr=(wr=wr.replace("{cdnDomain}",$r.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Dn.Key),wn({size:br.size,name:br.name,url:O.shortUrl?O.shortUrl:wr,ext:br.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return Xr.stop()}},oe,this)}))},x.getPrivateUrl=function(F){var O;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(F))return this.logger.error("illegal file url:"+F),"";var oe=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(F);oe[0];var _e=oe[1];oe[2];var z=oe[3];oe[4];var qe=oe[5];if(oe[6],oe[7],(O=this.grayConfig)===null||O===void 0?void 0:O.mixStoreEnable){var jt=this._getUrlType(F);return jt===Hs.s3&&this.mixStorePolicy.s3Policy&&(F=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",qe)),jt===Hs.nos&&this.mixStorePolicy.nosPolicy&&(F=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",qe)),F}var lr=this.config,fr=lr.downloadUrl,Sr=lr.downloadHostList,br=lr.nosCdnEnable,Er=this.config.cdn.cdnDomain,Dr=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",$r=decodeURIComponent(qe),vn=pa($r).call($r,Dr);if(Er&&vn>-1&&br)return""+_e+Er+"/"+Co($r).call($r,vn);if(mi(Sr).call(Sr,z)&&mi(qe).call(qe,"/")){var Xr=pa(qe).call(qe,"/"),wn=qe.substring(0,Xr),hn=qe.substring(Xr+1);return fr.replace("{bucket}",wn).replace("{object}",hn)}var Gn=Js(Sr).call(Sr,function(jo){return typeof z=="string"&&mi(z).call(z,jo)})[0],Dn=Gn?z.replace(Gn,"").replace(/\W/g,""):null;return Dn?fr.replace("{bucket}",Dn).replace("{object}",qe):F},x.getOriginUrl=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:F}});case 2:return oe=z.sent,z.abrupt("return",oe.content.nosSafeUrlTag.originUrl);case 4:case"end":return z.stop()}},O,this)}))},x.getFileToken=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr=this;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(Gr({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},F),oe=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,_e=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,oe!==String(Ni.dontNeed)||_e!==String(Ni.dontNeed)){Sr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(F.type!==Ni.time){Sr.next=17;break}if(!(oe&&pa(oe).call(oe,String(Ni.time))>=0||_e&&pa(_e).call(_e,String(Ni.time))>0)){Sr.next=13;break}return Sr.abrupt("return",this.getFileAuthToken(F));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:Sr.next=33;break;case 17:if(F.urls&&F.urls.length){Sr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(qe=[],jt=[],In(z=F.urls).call(z,function(br){var Er=lr._getUrlType(br);Er===Hs.nos&&jt.push(br),Er===Hs.s3&&qe.push(br)}),(!_e||qe.length!==0&&pa(_e).call(_e,String(Ni.urls))<0)&&(this.logger.warn("s3 url don't support url token"),qe=[]),(!oe||jt.length!==0&&pa(oe).call(oe,String(Ni.urls))<0)&&(this.logger.warn("nos url don't support url token"),jt=[]),qe.length!==0||jt.length!==0){Sr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(qe.length!==0&&jt.length!==0){Sr.next=33;break}return F.urls=mo(F.urls),Sr.abrupt("return",this.getFileAuthToken(F));case 33:case"end":return Sr.stop()}},O,this)}))},x.getFileAuthToken=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:F});case 2:return oe=z.sent,z.abrupt("return",oe.content.mixStoreAuthTokenResTag);case 4:case"end":return z.stop()}},O,this)}))},x._getUrlType=function(F){var O,oe;return this.mixStorePolicy.nosPolicy&&Ap(O=this.mixStorePolicy.nosPolicy.dlcdns).call(O,function(_e){return pa(F).call(F,_e)>=0})?Hs.nos:this.mixStorePolicy.s3Policy&&Ap(oe=this.mixStorePolicy.s3Policy.dlcdns).call(oe,function(_e){return pa(F).call(F,_e)>=0})?Hs.s3:null},x._addCircuitTimer=function(){var F=this,O=this.mixStorePolicy.providers,oe=O[(pa(O).call(O,String(this.curProvider))+1)%O.length];if(oe===O[0])throw new Error("uploadFile all policy fail");var _e=Wa(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(_e&&_e.retryNext&&oe&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+oe),this.curProvider=Lo(oe),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var z=this.mixStorePolicy[this.curProvider===Hs.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!z||z===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){F.logger.log("uploadFile:: upload policy will change,now policy:"+F.curProvider+" nextProvider:"+Lo(F.mixStorePolicy.providers[0])),F.curProvider=Lo(F.mixStorePolicy.providers[0]),F.core.timerManager.deleteTimer(F.circuitTimer)},1e3*z)}},x.process=function(F){var O=this[F.cmd+"Handler"];return typeof O=="function"?O.call(this,F):F.error&&!F.error.ignore?co.reject(F.error):co.resolve(F)},S}(),kd=Math.floor,Dp=function(S,x){var D=S.length,F=kd(D/2);return D<8?hy(S,x):bS(S,Dp(mu(S,0,F),x),Dp(mu(S,F),x),x)},hy=function(S,x){for(var D,F,O=S.length,oe=1;oe<O;){for(F=oe,D=S[oe];F&&x(S[F-1],D)>0;)S[F]=S[--F];F!==oe++&&(S[F]=D)}return S},bS=function(S,x,D,F){for(var O=x.length,oe=D.length,_e=0,z=0;_e<O||z<oe;)S[_e+z]=_e<O&&z<oe?F(x[_e],D[z])<=0?x[_e++]:D[z++]:_e<O?x[_e++]:D[z++];return S},zl=Dp,vy=nr.match(/firefox\/(\d+)/i),ic=!!vy&&+vy[1],as=/MSIE|Trident/.test(nr),yy=nr.match(/AppleWebKit\/(\d+)\./),by=!!yy&&+yy[1],cc=[],Kl=Ce(cc.sort),TS=Ce(cc.push),Ty=c(function(){cc.sort(void 0)}),SS=c(function(){cc.sort(null)}),Sy=Ds("sort"),bh=!c(function(){if(mr)return mr<70;if(!(ic&&ic>3)){if(as)return!0;if(by)return by<603;var S,x,D,F,O="";for(S=65;S<76;S++){switch(x=String.fromCharCode(S),S){case 66:case 69:case 70:case 72:D=3;break;case 68:case 71:D=4;break;default:D=2}for(F=0;F<47;F++)cc.push({k:x+F,v:D})}for(cc.sort(function(oe,_e){return _e.v-oe.v}),F=0;F<cc.length;F++)x=cc[F].k.charAt(0),O.charAt(O.length-1)!==x&&(O+=x);return O!=="DGBEFHACIJK"}});Vr({target:"Array",proto:!0,forced:Ty||!SS||!Sy||!bh},{sort:function(x){x!==void 0&&Or(x);var D=$n(this);if(bh)return x===void 0?Kl(D):Kl(D,x);var F,O,oe=[],_e=Ia(D);for(O=0;O<_e;O++)O in D&&TS(oe,D[O]);for(zl(oe,function(z){return function(qe,jt){return jt===void 0?-1:qe===void 0?1:z!==void 0?+z(qe,jt)||0:Aa(qe)>Aa(jt)?1:-1}}(x)),F=Ia(oe),O=0;O<F;)D[O]=oe[O++];for(;O<_e;)xp(D,O++);return D}});var Ic,bi,Up,Ri=Uo("Array").sort,_d=Array.prototype,Wl=function(S){var x=S.sort;return S===_d||tr(_d,S)&&x===_d.sort?Ri:x};(function(S){S[S.ASC=1]="ASC",S[S.DESC=2]="DESC"})(Ic||(Ic={})),function(S){S[S.reorderWeight=0]="reorderWeight",S[S.createTime=1]="createTime",S[S.totalMember=2]="totalMember"}(bi||(bi={})),function(S){S[S.square=1]="square",S[S.person=2]="person"}(Up||(Up={}));var gl=function(){function S(x,D){this.name=x,this.core=D,this.name=x,this.logger=D.logger,this.core=D}return S.prototype.process=function(D){var F=this[D.cmd+"Handler"];return typeof F=="function"?F.call(this,D):D.error&&!D.error.ignore?co.reject(D.error):co.resolve(D)},S}(),wd={"24_15":"qchatSubscribe","24_27":"qchatGetUnreadInfo","24_48":"qchatCreateChannel","24_49":"qchatDeleteChannel","24_50":"qchatUpdateChannel","24_51":"qchatGetChannels","24_52":"qchatGetChannelsByPage","24_53":"qchatGetMembersByPage","24_54":"qchatUpdateWhiteBlackRole","24_55":"qchatGetWhiteBlackRolesPage","24_56":"qchatUpdateWhiteBlackMembers","24_57":"qchatGetWhiteBlackMembersPage","24_58":"qchatGetExistingWhiteBlackRoles","24_59":"qchatGetExistingWhiteBlackMembers","24_60":"qchatUpdateCategoryInfoOfChannel","24_109":"qchatCreateChannelCategory","24_110":"qchatRemoveChannelCategory","24_111":"qchatUpdateChannelCategory","24_112":"qchatGetChannelCategoriesByID","24_113":"qchatUpdateChannelCategoryWhiteBlackRole","24_114":"qchatGetChannelCategoryWhiteBlackRolesPage","24_115":"qchatUpdateChannelCategoryWhiteBlackMembers","24_116":"qchatGetChannelCategoryWhiteBlackMembersPage","24_117":"qchatGetChannelCategoryWhiteBlackRoles","24_118":"qchatGetChannelCategoryWhiteBlackMembers","24_119":"qchatGetChannelCategoriesPage","24_120":"qchatGetChannelCategoryChannelsPage","24_93":"qchatGetChannelSearchByPage","24_95":"qchatChannelMemberSearch","25_8":"qchatGetRoleIdsByServerId","25_9":"qchatSubscribeAsVisitor"},Th={serverId:1,channelId:2,ackTimestamp:3,unreadCount:4,mentionedCount:5,maxCount:6,lastMsgTime:7},Yo={channelInfo:{channelId:1,serverId:2,name:4,topic:5,ext:6,type:7,validFlag:8,createTime:9,updateTime:10,owner:11,viewMode:12,categoryId:13,syncMode:14,reorderWeight:15,visitorMode:16},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11},qchatSubReqTag:{type:1,opeType:2},qchatChannelIdInfoTag:{serverId:1,channelId:2},unreadInfo:Th,qchatGetChannelListPageTag:{serverId:1,timetag:2,limit:3},qchatGetMembersByPageTag:{serverId:1,channelId:2,timetag:3,limit:4},qchatUpdateWhiteBlackRoleTag:{serverId:1,channelId:2,type:3,opeType:4,roleId:5},qchatGetWhiteBlackRolesPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatUpdateWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,opeType:4,toAccids:5},qchatGetWhiteBlackMembersPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatGetExistingWhiteBlackRolesTag:{serverId:1,channelId:2,type:3,roleIds:4},qchatGetExistingWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,accids:4},QChatChannelCategoryInfo:{categoryId:1,serverId:2,name:4,ext:5,owner:6,viewMode:7,validFlag:8,createTime:9,updateTime:10,channelNumber:11},qchatUpdateChannelCategoryWhiteBlackRoleTag:{serverId:1,categoryId:2,type:3,opeType:4,roleId:5},qchatGetChannelCategoryWhiteBlackRolesPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatUpdateChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,opeType:4,toAccids:5},qchatGetChannelCategoryWhiteBlackMembersPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatGetChannelCategoryWhiteBlackRolesTag:{serverId:1,categoryId:2,type:3,roleIds:4},qchatGetChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,accids:4},qchatGetChannelCategoriesPageTag:{serverId:1,timetag:2,limit:3},qchatGetChannelCategoryChannelsPageTag:{serverId:1,categoryId:2,timetag:3,limit:4},qchatGetChannelSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverId:6,sort:7,cursor:8},qchatUpdateChannelTag:{channelId:1,name:4,topic:5,ext:6,viewMode:12,visitorMode:16},serverRoles:{serverId:1,roleIds:2,timeTag:3},qchatChannelMemberSearchTag:{serverId:1,channelId:2,keyword:3,limit:4},qchatChannelMemberInfo:{serverId:1,channelId:2,avatar:3,accid:4,nick:5,createTime:6,updateTime:7}},zo=Cc(Yo),Sh={qchatCreateChannel:{sid:24,cid:48,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Yo.channelInfo},{type:"Property",name:"antispamTag",reflectMapper:Yo.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatDeleteChannel:{sid:24,cid:49,service:"qchatChannel",params:[{type:"Long",name:"channelId"}]},qchatUpdateChannel:{sid:24,cid:50,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Yo.qchatUpdateChannelTag},{type:"Property",name:"antispamTag",reflectMapper:Yo.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatGetChannels:{sid:24,cid:51,service:"qchatChannel",params:[{type:"LongArray",name:"channelIds"}],response:[{type:"PropertyArray",name:"channelList",reflectMapper:zo.channelInfo}]},qchatGetChannelsByPage:{sid:24,cid:52,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelListPageTag",reflectMapper:Yo.qchatGetChannelListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatGetMembersByPage:{sid:24,cid:53,service:"qchatChannel",params:[{type:"Property",name:"qchatGetMembersByPageTag",reflectMapper:Yo.qchatGetMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatUpdateWhiteBlackRole:{sid:24,cid:54,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackRoleTag",reflectMapper:Yo.qchatUpdateWhiteBlackRoleTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetWhiteBlackRolesPage:{sid:24,cid:55,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackRolesPageTag",reflectMapper:Yo.qchatGetWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatUpdateWhiteBlackMembers:{sid:24,cid:56,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackMembersTag",reflectMapper:Yo.qchatUpdateWhiteBlackMembersTag}]},qchatGetWhiteBlackMembersPage:{sid:24,cid:57,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackMembersPageTag",reflectMapper:Yo.qchatGetWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetExistingWhiteBlackRoles:{sid:24,cid:58,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackRolesTag",reflectMapper:Yo.qchatGetExistingWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatGetExistingWhiteBlackMembers:{sid:24,cid:59,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackMembersTag",reflectMapper:Yo.qchatGetExistingWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatUpdateCategoryInfoOfChannel:{sid:24,cid:60,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateCategoryInfoOfChannelTag",reflectMapper:Yo.channelInfo}],response:[{type:"Property",name:"channelInfo",reflectMapper:zo.channelInfo}]},qchatCreateChannelCategory:{sid:24,cid:109,service:"qchatChannel",params:[{type:"Property",name:"qchatCreateChannelCategoryTag",reflectMapper:Yo.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatRemoveChannelCategory:{sid:24,cid:110,service:"qchatChannel",params:[{type:"Long",name:"categoryId"}]},qchatUpdateChannelCategory:{sid:24,cid:111,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryTag",reflectMapper:Yo.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatGetChannelCategoriesByID:{sid:24,cid:112,service:"qchatChannel",params:[{type:"LongArray",name:"categoryIds"}],response:[{type:"PropertyArray",name:"channelCategoryList",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatUpdateChannelCategoryWhiteBlackRole:{sid:24,cid:113,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackRoleTag",reflectMapper:Yo.qchatUpdateChannelCategoryWhiteBlackRoleTag}]},qchatGetChannelCategoryWhiteBlackRolesPage:{sid:24,cid:114,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesPageTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatUpdateChannelCategoryWhiteBlackMembers:{sid:24,cid:115,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackMembersTag",reflectMapper:Yo.qchatUpdateChannelCategoryWhiteBlackMembersTag}]},qchatGetChannelCategoryWhiteBlackMembersPage:{sid:24,cid:116,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersPageTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetChannelCategoryWhiteBlackRoles:{sid:24,cid:117,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.serverRole}]},qchatGetChannelCategoryWhiteBlackMembers:{sid:24,cid:118,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersTag",reflectMapper:Yo.qchatGetChannelCategoryWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.memberInfo}]},qchatGetChannelCategoriesPage:{sid:24,cid:119,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoriesPageTag",reflectMapper:Yo.qchatGetChannelCategoriesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.QChatChannelCategoryInfo}]},qchatGetChannelCategoryChannelsPage:{sid:24,cid:120,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryChannelsPageTag",reflectMapper:Yo.qchatGetChannelCategoryChannelsPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatSubscribe:{sid:24,cid:15,service:"qchatChannel",params:[{type:"Property",name:"qchatSubReqTag",reflectMapper:Yo.qchatSubReqTag},{type:"PropertyArray",name:"channels",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:zo.unreadInfo},{type:"PropertyArray",name:"failedChannels",reflectMapper:zo.qchatChannelIdInfoTag}]},qchatGetUnreadInfo:{sid:24,cid:27,service:"qchatChannel",params:[{type:"PropertyArray",name:"channels",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:zo.unreadInfo}]},qchatGetChannelSearchByPage:{sid:24,cid:93,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelSearchByPageTag",reflectMapper:Yo.qchatGetChannelSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:zo.channelInfo}]},qchatGetRoleIdsByServerId:{sid:25,cid:8,service:"qchatChannel",params:[{type:"Property",name:"qchatGetRoleIdsByServerIdTag",reflectMapper:{serverIdTimeTags:1}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:zo.serverRoles},{type:"LongArray",name:"failServerIds"}]},qchatChannelMemberSearch:{sid:24,cid:95,service:"qchatChannel",params:[{type:"Property",name:"qchatChannelMemberSearchTag",reflectMapper:Yo.qchatChannelMemberSearchTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:zo.qchatChannelMemberInfo}]},qchatSubscribeAsVisitor:{sid:25,cid:9,service:"qchatChannel",params:[{type:"Property",name:"tag",reflectMapper:Yo.qchatSubReqTag},{type:"PropertyArray",name:"datas",reflectMapper:Yo.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"failedArr",reflectMapper:zo.qchatChannelIdInfoTag}]}},Cy={"24_31":"qchatCreateServer","24_32":"qchatDeleteServer","24_33":"qchatUpdateServer","24_34":"qchatGetServers","24_35":"qchatGetServersByPage","24_36":"qchatInviteServerMembers","24_37":"qchatAcceptServerInvite","24_38":"qchatRejectInviteServer","24_39":"qchatApplyServerJoin","24_40":"qchatAcceptServerApply","24_41":"qchatRejectServerApply","24_42":"qchatKickServerMembers","24_43":"qchatLeaveServer","24_44":"qchatUpdateMyMemberInfo","24_45":"qchatUpdateServerMemberInfo","24_46":"qchatGetServerMembers","24_47":"qchatGetServerMembersByPage","24_104":"qchatUpdateServerMemberBan","24_105":"qchatGetBannedMembersByPage","24_91":"qchatServerSearchByPage","24_92":"qchatServerMemberSearchByPage","24_122":"qchatGenerateInviteCode","24_123":"qchatJoinByInviteCode","24_124":"qchatGetInviteApplyRecordOfServer","24_125":"qchatGetInviteApplyRecordOfSelf","25_5":"qchatClearServersUnread","25_7":"qchatSubscribeChannelsByServers","25_10":"qchatEnterAsVisitor","25_11":"qchatLeaveAsVisitor"},Ha={serverInfo:{serverId:1,name:3,icon:4,ext:5,owner:6,memberNumber:7,inviteMode:8,applyMode:9,validFlag:10,createTime:11,updateTime:12,channelNumber:13,categoryNumber:14,searchType:15,searchEnable:16,reorderWeight:17},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},otherMemberInfo:{serverId:1,accid:3,nick:4,avatar:5,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},getServerListPageTag:{timestamp:1,limit:2},getServerMemberListPageTag:{serverId:1,timetag:2,limit:3},updateServerMemberBanTag:{serverId:1,opeType:2,accid:3,ext:4},getBannedMembersByPageTag:{serverId:1,timetag:2,limit:3},serverMemberBanInfo:{serverId:1,appid:2,accid:3,ext:4,banTime:5,validFlag:6,createTime:7,updateTime:8},serverSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverType:6,searchType:7,sort:8,cursor:9},serverMemberSearchByPageTag:{serverId:1,keyword:3,limit:4},inviteRespParamTag:{requestId:1},applyRespParamTag:{requestId:1,expireTime:2},inviteApplyRecord:{accid:1,type:2,serverId:3,status:4,requestId:5,createTime:6,updateTime:7,expireTime:8,data:9,recordId:10},clearServersUnreadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},unreadInfo:Th},La=Cc(Ha),Ec={qchatCreateServer:{sid:24,cid:31,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:Ha.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:La.serverInfo}]},qchatDeleteServer:{sid:24,cid:32,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateServer:{sid:24,cid:33,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:Ha.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:La.serverInfo}]},qchatGetServers:{sid:24,cid:34,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"serverList",reflectMapper:La.serverInfo}]},qchatGetServersByPage:{sid:24,cid:35,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getServerListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverInfo}]},qchatInviteServerMembers:{sid:24,cid:36,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"StrArray",name:"failByOverAccids"},{type:"StrArray",name:"failByBanAccids"},{type:"Property",name:"record",reflectMapper:La.applyRespParamTag}]},qchatAcceptServerInvite:{sid:24,cid:37,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:Ha.inviteRespParamTag}]},qchatRejectInviteServer:{sid:24,cid:38,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:Ha.inviteRespParamTag}]},qchatApplyServerJoin:{sid:24,cid:39,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"Property",name:"data",reflectMapper:La.applyRespParamTag}]},qchatAcceptServerApply:{sid:24,cid:40,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:Ha.applyRespParamTag}]},qchatRejectServerApply:{sid:24,cid:41,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:Ha.applyRespParamTag}]},qchatKickServerMembers:{sid:24,cid:42,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"}]},qchatLeaveServer:{sid:24,cid:43,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateMyMemberInfo:{sid:24,cid:44,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:Ha.memberInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:La.memberInfo}]},qchatUpdateServerMemberInfo:{sid:24,cid:45,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:Ha.otherMemberInfo},{type:"Property",name:"antispamTag",reflectMapper:Ha.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:La.memberInfo}]},qchatGetServerMembers:{sid:24,cid:46,service:"qchatServer",params:[{type:"StrArray",name:"accids"}],response:[{type:"PropertyArray",name:"accidList",reflectMapper:La.memberInfo}]},qchatGetServerMembersByPage:{sid:24,cid:47,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getServerMemberListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.memberInfo}]},qchatUpdateServerMemberBan:{sid:24,cid:104,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.updateServerMemberBanTag}]},qchatGetBannedMembersByPage:{sid:24,cid:105,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.getBannedMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverMemberBanInfo}]},qchatServerSearchByPage:{sid:24,cid:91,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.serverSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:La.serverInfo}]},qchatServerMemberSearchByPage:{sid:24,cid:92,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:Ha.serverMemberSearchByPageTag}],response:[{type:"PropertyArray",name:"members",reflectMapper:La.serverMemberBanInfo}]},qchatGenerateInviteCode:{sid:24,cid:122,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,ttl:2}}],response:[{type:"Property",name:"data",reflectMapper:{1:"serverId",2:"requestId",3:"inviteCode",4:"expireTime"}}]},qchatJoinByInviteCode:{sid:24,cid:123,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,inviteCode:2,ps:3}}]},qchatGetInviteApplyRecordOfServer:{sid:24,cid:124,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,fromTime:2,toTime:3,reverse:4,limit:5,cursor:6}}],response:[{type:"PropertyArray",name:"data",reflectMapper:La.inviteApplyRecord}]},qchatGetInviteApplyRecordOfSelf:{sid:24,cid:125,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{fromTime:1,toTime:2,reverse:3,limit:4,cursor:5}}],response:[{type:"PropertyArray",name:"data",reflectMapper:La.inviteApplyRecord}]},qchatClearServersUnread:{sid:25,cid:5,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"Property",name:"clearServersUnreadTag",reflectMapper:La.clearServersUnreadTag}]},qchatSubscribeChannelsByServers:{sid:25,cid:7,service:"qchatServer",params:[{type:"int",name:"type"},{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:La.unreadInfo},{type:"LongArray",name:"failServerIds"}]},qchatEnterAsVisitor:{sid:25,cid:10,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]},qchatLeaveAsVisitor:{sid:25,cid:11,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]}},ss=Function.prototype,CS=Object.prototype,My=ss.toString,MS=CS.hasOwnProperty,kS=My.call(Object),qp=function(x){if(!cs(x)||Qs(x)!="[object Object]")return!1;var D=ly(x);if(D===null)return!0;var F=MS.call(D,"constructor")&&D.constructor;return typeof F=="function"&&F instanceof F&&My.call(F)==kS};function ya(S,x){if(!qp(x))return{};var D=JSON.parse(mo(x)),F=ky(S,D);return JSON.parse(mo(Tn(Tn({},D),F)))}function ky(S,x){if(!qp(x))return{};var D={},F=na(S);return In(F).call(F,function(O){var oe=S[O].type;if(typeof oe!="string"){var _e=ky(S[O],x);na(_e).length>0&&(D[O]=_e)}else{var z=S[O],qe=z.rawKey||O,jt=_S[oe](x,qe,z);jt!==void 0&&(x[qe]=void 0,D[O]=jt)}}),D}var _S={number:function(x,D){if(x[D]!==void 0)return+x[D]},string:function(x,D){if(x[D]!==void 0)return x[D]},boolean:function(x,D){return+x[D]>0||+x[D]!=0&&void 0},enum:function(x,D,F){return ip(F)[x[D]]},object:function(x,D){if(x[D]!==void 0)try{return JSON.parse(x[D])}catch{return{}}}};function Gl(S,x){if(!qp(x))return{};var D=JSON.parse(mo(x)),F=_y(S,D);return JSON.parse(mo(Tn(Tn({},D),F)))}function _y(S,x){var D;if(!qp(x))return Sc(D=na(S)).call(D,function(oe,_e){return oe[S[_e].rawKey||_e]=void 0,oe},{});var F={},O=na(S);return In(O).call(O,function(oe){var _e=S[oe].type;if(typeof _e!="string"){var z=_y(S[oe],x[oe]);return Tn(F,z),void(x[oe]=void 0)}var qe=S[oe],jt=qe.rawKey||oe,lr=Vp[_e](x,oe,qe);x[jt]=void 0,F[jt]=lr}),F}var Vp={number:function(x,D){return x[D]},string:function(x,D){return x[D]},boolean:function(x,D){return x[D]===!0?1:x[D]===!1?0:void 0},enum:function(x,D,F){return ip(F)[x[D]]},object:function(x,D){if(x[D]!==void 0)try{return mo(x[D])}catch{return""}}},Ch=Vp,wy={serverId:{type:"string"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"},owner:{type:"string"},memberNumber:{type:"number"},inviteMode:{type:"number"},applyMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"},categoryNumber:{type:"number"},searchType:{type:"number"},searchEnable:{type:"boolean"},reorderWeight:{type:"string"}},wS={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},xS={serverId:{type:"string"},appid:{type:"string"},accid:{type:"string"},ext:{type:"string"},banTime:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}};function xd(S){return ya(wy,S)}function Mh(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return xd(x)}):[]}function Ql(S){return ya(wS,S)}function lc(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return Ql(x)}):[]}function IS(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return function(F){return ya(xS,F)}(x)}):[]}function Pc(S){var x,D,F;if(!S.antispamTag)return{};var O=Tn({},S.antispamTag);return!((x=S.antispamTag)===null||x===void 0)&&x.antiSpamBusinessId&&typeof((D=S.antispamTag)===null||D===void 0?void 0:D.antiSpamBusinessId)!="string"&&(O.antiSpamBusinessId=mo((F=S.antispamTag)===null||F===void 0?void 0:F.antiSpamBusinessId)),O}var ES={accid:{type:"string"},type:{type:"number"},serverId:{type:"string"},status:{type:"number"},requestId:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"},expireTime:{type:"number"},data:{type:"object"}};function Id(S){return ya(ES,S)}function xy(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return Id(x)}):[]}var Hp,ca,Zs,hl,PS={successServerIds:{type:"object"},failServerIds:{type:"object"},ackTimestamp:{type:"number"}};function vl(S){return ya(PS,S)}(function(S){S[S.reorderWeight=0]="reorderWeight",S[S.createTime=1]="createTime"})(Hp||(Hp={})),function(S){S[S.white=1]="white",S[S.black=2]="black"}(ca||(ca={})),function(S){S[S.add=1]="add",S[S.remove=2]="remove"}(Zs||(Zs={})),function(S){S[S.message=0]="message",S[S.media=1]="media",S[S.ext=100]="ext"}(hl||(hl={}));var Ed={channelId:{type:"string"},serverId:{type:"string"},name:{type:"string"},topic:{type:"string"},ext:{type:"string"},type:{type:"enum",values:hl},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},viewMode:{type:"number"},categoryId:{type:"string"},syncMode:{type:"number"},visitorMode:{type:"number"},reorderWeight:{type:"string"}},AS={serverId:{type:"string"},channelId:{type:"string"},ackTimestamp:{type:"number"},unreadCount:{type:"number"},mentionedCount:{type:"number"},maxCount:{type:"number"},lastMsgTime:{type:"number"}},Iy={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:ca},opeType:{type:"enum",values:Zs},toAccids:{type:"object"}},zp={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:ca},opeType:{type:"enum",values:Zs},roleId:{type:"string"}},OS={categoryId:{type:"string"},serverId:{type:"string"},name:{type:"string"},ext:{type:"string"},owner:{type:"string"},viewMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"}},Ey={serverId:{type:"string"},channelId:{type:"string"},accid:{type:"string"},avatar:{type:"string"},nick:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Pd(S){return ya(zp,S)}function Ad(S){return ya(Ed,S)}function Od(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return Ad(x)}):[]}function kh(S){return ya(AS,S)}function Nd(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return kh(x)}):[]}function Rd(S){return ya(OS,S)}function _h(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return Rd(x)}):[]}function NS(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return function(F){return ya(Ey,F)}(x)}):[]}function Bd(S){try{return JSON.parse(S)}catch{return[]}}var Kp=wi?wi.isConcatSpreadable:void 0,RS=function(x){return Oi(x)||Zg(x)||!!(Kp&&x&&x[Kp])},Py=function S(x,D,F,O,oe){var _e=-1,z=x.length;for(F||(F=RS),oe||(oe=[]);++_e<z;){var qe=x[_e];D>0&&F(qe)?D>1?S(qe,D-1,F,O,oe):As(oe,qe):O||(oe[oe.length]=qe)}return oe},wh=Pv(function(S,x){return En(S)?Rg(S,Py(x,1,En,!0)):[]}),Wp=wh;function xh(S,x){var D,F=ha!==void 0&&Va(S)||S["@@iterator"];if(F)return Oo(D=(F=F.call(S)).next).call(D,F);if(ns(S)||(F=function(_e,z){var qe;if(_e){if(typeof _e=="string")return Ih(_e,z);var jt=Co(qe=Object.prototype.toString.call(_e)).call(qe,8,-1);if(jt==="Object"&&_e.constructor&&(jt=_e.constructor.name),jt==="Map"||jt==="Set")return _c(_e);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return Ih(_e,z)}}(S))||x&&S&&typeof S.length=="number"){F&&(S=F);var O=0;return function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ih(S,x){(x==null||x>S.length)&&(x=S.length);for(var D=0,F=new Array(x);D<x;D++)F[D]=S[D];return F}var Jl,Fd,yl,bl,BS=function(S){function x(F){var O;return(O=S.call(this,"qchatServer",F)||this).core=F,Ei({cmdMap:Cy,cmdConfig:Ec}),O}Ro(x,S);var D=x.prototype;return D.createServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatCreateServer",{serverInfo:Tn(Tn({},O),{searchEnable:O.searchEnable===!1?0:1}),antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",xd(_e.content.serverInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.deleteServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1}},O),z.next=3,this.core.sendCmd("qchatDeleteServer",O);case 3:case"end":return z.stop()}},oe,this)}))},D.updateServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",min:1},icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateServer",{serverInfo:Tn(Tn({},O),{searchEnable:O.searchEnable===!1?0:1}),antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",xd(_e.content.serverInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.getServers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverIds:{type:"array",itemType:"string",min:1}},O),qe.next=3,this.core.sendCmd("qchatGetServers",O);case 3:return _e=qe.sent,qe.abrupt("return",Mh(_e.content.serverList));case 5:case"end":return qe.stop()}},oe,this)}))},D.getServersByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({timestamp:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetServersByPage",{tag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:Mh(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.inviteServerMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},O),jt.next=3,this.core.sendCmd("qchatInviteServerMembers",O);case 3:return _e=jt.sent,z=_e.content.record||{},jt.abrupt("return",{failByOverAccids:_e.content.failByOverAccids,failByBanAccids:_e.content.failByBanAccids,recordInfo:Id(z)});case 6:case"end":return jt.stop()}},oe,this)}))},D.acceptServerInvite=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},O),z.next=3,this.core.sendCmd("qchatAcceptServerInvite",O);case 3:case"end":return z.stop()}},oe,this)}))},D.rejectInviteServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},O),z.next=3,this.core.sendCmd("qchatRejectInviteServer",O);case 3:case"end":return z.stop()}},oe,this)}))},D.applyServerJoin=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},O),qe.next=3,this.core.sendCmd("qchatApplyServerJoin",O);case 3:return _e=qe.sent,qe.abrupt("return",Id(_e.content.data));case 5:case"end":return qe.stop()}},oe,this)}))},D.acceptServerApply=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},accid:{type:"string",min:1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},O),z.next=3,this.core.sendCmd("qchatAcceptServerApply",O);case 3:case"end":return z.stop()}},oe,this)}))},D.rejectServerApply=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},O),z.next=3,this.core.sendCmd("qchatRejectServerApply",O);case 3:case"end":return z.stop()}},oe,this)}))},D.kickServerMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1}},O),z.next=3,this.core.sendCmd("qchatKickServerMembers",O);case 3:case"end":return z.stop()}},oe,this)}))},D.leaveServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1}},O),z.next=3,this.core.sendCmd("qchatLeaveServer",O);case 3:case"end":return z.stop()}},oe,this)}))},D.updateMyMemberInfo=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",min:1},accid:{type:"string",required:!1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1},ext:{type:"string",required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateMyMemberInfo",{memberInfo:O,antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",Ql(_e.content.memberInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.updateServerMemberInfo=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",min:1},accid:{type:"string",min:1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateServerMemberInfo",{memberInfo:O,antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",Ql(_e.content.memberInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.getServerMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(Gr({accids:{type:"array"}},O),_e=[],O.accids.length)for(z=xh(O.accids);!(qe=z()).done;)jt=qe.value,_e.push(jt.serverId+"|"+jt.accid);return Sr.next=5,this.core.sendCmd("qchatGetServerMembers",{accids:_e});case 5:return lr=Sr.sent,Sr.abrupt("return",lc(lr.content.accidList));case 7:case"end":return Sr.stop()}},oe,this)}))},D.getServerMembersByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetServerMembersByPage",{tag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:lc(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.subscribeServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Gr({type:{type:"number",min:4,max:4,required:!1},opeType:{type:"number",min:1,max:2}},O),O.type||(O.type=4),!O.servers.length){fr.next=10;break}return z=Tn(Tn({},O),{channels:vo(_e=O.servers).call(_e,function(Sr){return{serverId:Sr.serverId,channelId:""}})}),fr.next=6,this.core.qchatChannel.subscribeModuleService.subscribe(z);case 6:return qe=fr.sent,jt=qe.failedChannels,this.core.qchatChannel.subscribeModuleService.cacheSubscribe(z),fr.abrupt("return",{failedServers:jt});case 10:case"end":return fr.stop()}},oe,this)}))},D.banServerMember=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},O),z.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Tn(Tn({},O),{opeType:1})});case 3:case"end":return z.stop()}},oe,this)}))},D.unbanServerMember=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},O),z.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Tn(Tn({},O),{opeType:2})});case 3:case"end":return z.stop()}},oe,this)}))},D.getBannedMembersByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetBannedMembersByPage",{tag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:IS(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.serverSearchByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Gr({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},serverType:{type:"array",itemType:"number",min:0,required:!1},order:{type:"enum",values:ia(Ic),required:!1},searchType:{type:"enum",values:ia(Up)},sort:{type:"enum",values:ia(bi),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},O),!(O.startTime&&O.endTime&&O.startTime>=O.endTime)){fr.next=3;break}throw new al("startTime more than endTime",O,"timeRule");case 3:return fr.next=5,this.core.sendCmd("qchatServerSearchByPage",{tag:Tn(Tn({},O),{order:O.order&&Ic[O.order],searchType:Up[O.searchType],sort:Wl(O)&&bi[Wl(O)],serverType:mo(O.serverType)})});case 5:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag),cursor:jt.cursor},datas:Mh(qe)});case 8:case"end":return fr.stop()}},oe,this)}))},D.serverMemberSearchByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatServerMemberSearchByPage",{tag:O});case 3:return _e=qe.sent,qe.abrupt("return",lc(_e.content.members));case 5:case"end":return qe.stop()}},oe,this)}))},D.generateInviteCode=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},ttl:{type:"number",min:0,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGenerateInviteCode",{tag:O});case 3:return _e=qe.sent,qe.abrupt("return",ya({expireTime:{type:"number"}},_e.content.data));case 5:case"end":return qe.stop()}},oe,this)}))},D.joinByInviteCode=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},inviteCode:{type:"string",allowEmpty:!1},ps:{type:"string",required:!1}},O),z.next=3,this.core.sendCmd("qchatJoinByInviteCode",{tag:O});case 3:case"end":return z.stop()}},oe,this)}))},D.getInviteApplyRecordOfServer=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfServer",{tag:Tn(Tn({},O),{reverse:kl(O)?1:0})});case 3:return _e=qe.sent,qe.abrupt("return",xy(_e.content.data));case 5:case"end":return qe.stop()}},oe,this)}))},D.getInviteApplyRecordOfSelf=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfSelf",{tag:Tn(Tn({},O),{reverse:kl(O)?1:0})});case 3:return _e=qe.sent,qe.abrupt("return",xy(_e.content.data));case 5:case"end":return qe.stop()}},oe,this)}))},D.markRead=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverIds:{type:"array",itemType:"string",required:!0}},O),fr.next=3,this.core.sendCmd("qchatClearServersUnread",O);case 3:return _e=fr.sent,z=vl(_e.content.clearServersUnreadTag),qe=z.successServerIds,jt=z.ackTimestamp,this.logger.log("qchatServer::clearServersUnread:: begin auto clear servers unreadInfo"),this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",qe,jt),fr.abrupt("return",z);case 9:case"end":return fr.stop()}},oe,this)}))},D.subscribeAllChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({type:{type:"number",required:!0},serverIds:{type:"array",itemType:"string",required:!0,max:10}},O),lr.next=3,this.core.sendCmd("qchatSubscribeChannelsByServers",O,{timeout:3e4});case 3:return(z=lr.sent).content.unreadInfos=Nd(z.content.unreadInfos),z.content.failServerIds=Bd(z.content.failServerIds),qe={type:O.type,opeType:1,channels:vo(_e=z.content.unreadInfos).call(_e,function(fr){return{serverId:fr.serverId,channelId:fr.channelId}})},this.core.eventBus.emit("qchatChannel/cacheSubscribe",qe),this.core.eventBus.emit("qchatChannel/getRoleIdsByServerId",O.serverIds),this.core.eventBus.emit("qchatChannel/updateUnreads",z.content.unreadInfos),lr.abrupt("return",z.content);case 11:case"end":return lr.stop()}},oe,this)}))},D.enterAsVisitor=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({serverIds:{type:"array",itemType:"string",min:1}},O),lr.next=3,this.core.sendCmd("qchatEnterAsVisitor",{tag:{serverIds:mo(O.serverIds)}});case 3:return _e=lr.sent,z=Bd(_e.content.failServerIds),qe=Wp(O.serverIds,z),this.core.qchatChannel.subscribeForVisitorService.cacheServer(qe),lr.abrupt("return",{failedServers:z});case 8:case"end":return lr.stop()}},oe,this)}))},D.leaveAsVisitor=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt=this;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverIds:{type:"array",itemType:"string",min:1}},O),fr.next=3,this.core.sendCmd("qchatLeaveAsVisitor",{tag:{serverIds:mo(O.serverIds)}});case 3:return _e=fr.sent,z=Bd(_e.content.failServerIds),qe=Wp(O.serverIds,z),In(qe).call(qe,function(Sr){jt.core.qchatChannel.subscribeForVisitorService.deleteServer(Sr)}),fr.abrupt("return",{failedServers:z});case 8:case"end":return fr.stop()}},oe,this)}))},D.subscribeAsVisitor=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Gr({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},serverIds:{type:"array",itemType:"string",min:1}},O),!O.serverIds.length){z.next=5;break}return z.next=4,this.core.qchatChannel.subscribeForVisitorService.subscribeServerAsVisitor(O);case 4:return z.abrupt("return",z.sent);case 5:return z.abrupt("return",{failedServers:[]});case 6:case"end":return z.stop()}},oe,this)}))},x}(gl);(function(S){S[S.everyone=1]="everyone",S[S.custom=2]="custom"})(Jl||(Jl={})),function(S){S[S.normal=0]="normal",S[S.owner=1]="owner"}(Fd||(Fd={})),function(S){S[S.ignore=0]="ignore",S[S.deny=-1]="deny",S[S.allow=1]="allow"}(yl||(yl={})),function(S){S[S.manageServer=1]="manageServer",S[S.manageChannel=2]="manageChannel",S[S.manageRole=3]="manageRole",S[S.sendMsg=4]="sendMsg",S[S.accountInfoSelf=5]="accountInfoSelf",S[S.inviteServer=6]="inviteServer",S[S.kickServer=7]="kickServer",S[S.accountInfoOther=8]="accountInfoOther",S[S.recallMsg=9]="recallMsg",S[S.deleteMsg=10]="deleteMsg",S[S.remindOther=11]="remindOther",S[S.remindEveryone=12]="remindEveryone",S[S.manageBlackWhiteList=13]="manageBlackWhiteList",S[S.banServerMember=14]="banServerMember",S[S.RTCChannelConnect=15]="RTCChannelConnect",S[S.RTCChannelDisconnectOther=16]="RTCChannelDisconnectOther",S[S.RTCChannelOpenMicrophone=17]="RTCChannelOpenMicrophone",S[S.RTCChannelOpenCamera=18]="RTCChannelOpenCamera",S[S.RTCChannelOpenCloseOtherMicrophone=19]="RTCChannelOpenCloseOtherMicrophone",S[S.RTCChannelOpenCloseOtherCamera=20]="RTCChannelOpenCloseOtherCamera",S[S.RTCChannelOpenCloseEveryoneMicrophone=21]="RTCChannelOpenCloseEveryoneMicrophone",S[S.RTCChannelOpenCloseEveryoneCamera=22]="RTCChannelOpenCloseEveryoneCamera",S[S.RTCChannelOpenShareScreen=23]="RTCChannelOpenShareScreen",S[S.RTCChannelCloseOtherShareScreen=24]="RTCChannelCloseOtherShareScreen",S[S.manageInviteApply=25]="manageInviteApply",S[S.manageInviteApplyHistory=26]="manageInviteApplyHistory",S[S.mentionedRole=27]="mentionedRole"}(bl||(bl={}));var Ay={type:{type:"enum",values:Jl},memberType:{type:"enum",values:Fd},createTime:{type:"number"},updateTime:{type:"number"},priority:{type:"number"},memberCount:{type:"number"},joinTime:{type:"number"}},FS={roleId:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},type:{type:"enum",values:Jl},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"}},LS={id:{type:"string"},accid:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},memberType:{type:"enum",values:Fd},joinTime:{type:"number"},inviter:{type:"string"}};function Ac(S){var x=Tn({},S),D=Gl(Ay,x);return D.auths&&(D.auths=function(O){var oe,_e=Sc(oe=na(O)).call(oe,function(z,qe){var jt=bl[qe];return jt?z[jt]=yl[O[qe]]:z[qe]=yl[O[qe]],z},{});return mo(_e)}(D.auths)),D}function Ti(S){var x;return Sc(x=na(S)).call(x,function(D,F){var O=Rv(bl,F);return O?D[O]=yl[S[F]]:D[Lo(F)]=yl[S[F]],D},{})}function us(S){var x=ya(Ay,S);return S.auths&&(x.auths=Ti(JSON.parse(x.auths))),x.isMember&&delete x.isMember,x}function zs(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return us(x)}):[]}function Gp(S){return S.auths&&(S.auths=Ti(JSON.parse(S.auths))),ya(FS,S)}function Yl(S){return S.auths&&(S.auths=Ti(JSON.parse(S.auths))),ya(LS,S)}Gh("Set",function(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}},od);var Oy=or.Set;Vr({target:"Set",stat:!0,forced:!0},{from:ag}),Vr({target:"Set",stat:!0,forced:!0},{of:Jh}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var x=Vn(this),D=Or(x.add),F=0,O=arguments.length;F<O;F++)Y(D,x,arguments[F]);return x}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:Yh});var Tl=Gi;Vr({target:"Set",proto:!0,real:!0,forced:!0},{every:function(x){var D=Vn(this),F=Tl(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return!so(F,function(oe,_e){if(!O(oe,oe,D))return _e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(x){var D=Vn(this),F=new(Ms(D,$e("Set")))(D),O=Or(F.delete);return so(x,function(oe){Y(O,F,oe)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(x){var D=Vn(this),F=Tl(D),O=$o(x,arguments.length>1?arguments[1]:void 0),oe=new(Ms(D,$e("Set"))),_e=Or(oe.add);return so(F,function(z){O(z,z,D)&&Y(_e,oe,z)},{IS_ITERATOR:!0}),oe}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{find:function(x){var D=Vn(this),F=Tl(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return so(F,function(oe,_e){if(O(oe,oe,D))return _e(oe)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(x){var D=Vn(this),F=new(Ms(D,$e("Set"))),O=Or(D.has),oe=Or(F.add);return so(x,function(_e){Y(O,D,_e)&&Y(oe,F,_e)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(x){var D=Vn(this),F=Or(D.has);return!so(x,function(O,oe){if(Y(F,D,O)===!0)return oe()},{INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(x){var D=Gi(this),F=Vn(x),O=F.has;return ie(O)||(F=new($e("Set"))(x),O=Or(F.has)),!so(D,function(oe,_e){if(Y(O,F,oe)===!1)return _e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(x){var D=Vn(this),F=Or(D.has);return!so(x,function(O,oe){if(Y(F,D,O)===!1)return oe()},{INTERRUPTED:!0}).stopped}});var Ny=Ce([].join),$S=[].push;Vr({target:"Set",proto:!0,real:!0,forced:!0},{join:function(x){var D=Vn(this),F=Tl(D),O=x===void 0?",":Aa(x),oe=[];return so(F,$S,{that:oe,IS_ITERATOR:!0}),Ny(oe,O)}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{map:function(x){var D=Vn(this),F=Tl(D),O=$o(x,arguments.length>1?arguments[1]:void 0),oe=new(Ms(D,$e("Set"))),_e=Or(oe.add);return so(F,function(z){Y(_e,oe,O(z,z,D))},{IS_ITERATOR:!0}),oe}});var Ry=TypeError;Vr({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(x){var D=Vn(this),F=Tl(D),O=arguments.length<2,oe=O?void 0:arguments[1];if(Or(x),so(F,function(_e){O?(O=!1,oe=_e):oe=x(oe,_e,_e,D)},{IS_ITERATOR:!0}),O)throw Ry("Reduce of empty set with no initial value");return oe}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{some:function(x){var D=Vn(this),F=Tl(D),O=$o(x,arguments.length>1?arguments[1]:void 0);return so(F,function(oe,_e){if(O(oe,oe,D))return _e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(x){var D=Vn(this),F=new(Ms(D,$e("Set")))(D),O=Or(F.delete),oe=Or(F.add);return so(x,function(_e){Y(O,F,_e)||Y(oe,F,_e)}),F}}),Vr({target:"Set",proto:!0,real:!0,forced:!0},{union:function(x){var D=Vn(this),F=new(Ms(D,$e("Set")))(D);return so(x,Or(F.add),{that:F}),F}});var Qp,Ld,Si,$d,Oc,Xo,uc,Xl=Oy;(function(S){S[S.sendTime=1]="sendTime"})(Qp||(Qp={})),function(S){S[S.text=0]="text",S[S.image=1]="image",S[S.audio=2]="audio",S[S.video=3]="video",S[S.geo=4]="geo",S[S.notification=5]="notification",S[S.file=6]="file",S[S.tip=10]="tip",S[S.robot=11]="robot",S[S.g2=12]="g2",S[S.custom=100]="custom"}(Ld||(Ld={})),function(S){S[S.sending=1]="sending",S[S.success=2]="success",S[S.failed=3]="failed"}(Si||(Si={})),function(S){S[S.notifyAll=1]="notifyAll",S[S.notifySubscribe=2]="notifySubscribe"}($d||($d={})),function(S){S[S.unknown=0]="unknown",S[S.server=1]="server",S[S.channel=2]="channel",S[S.serverAccids=3]="serverAccids",S[S.channelAccids=4]="channelAccids",S[S.accids=5]="accids"}(Oc||(Oc={})),function(S){S[S.serverMemberInvite=1]="serverMemberInvite",S[S.serverMemberInviteReject=2]="serverMemberInviteReject",S[S.serverMemberApply=3]="serverMemberApply",S[S.serverMemberApplyReject=4]="serverMemberApplyReject",S[S.serverCreate=5]="serverCreate",S[S.serverRemove=6]="serverRemove",S[S.serverUpdate=7]="serverUpdate",S[S.serverMemberInviteDone=8]="serverMemberInviteDone",S[S.serverMemberInviteAccept=9]="serverMemberInviteAccept",S[S.serverMemberApplyDone=10]="serverMemberApplyDone",S[S.serverMemberApplyAccept=11]="serverMemberApplyAccept",S[S.serverMemberKick=12]="serverMemberKick",S[S.serverMemberLeave=13]="serverMemberLeave",S[S.serverMemberUpdate=14]="serverMemberUpdate",S[S.channelCreate=15]="channelCreate",S[S.channelRemove=16]="channelRemove",S[S.channelUpdate=17]="channelUpdate",S[S.channelUpdateWhiteBlackIdentify=18]="channelUpdateWhiteBlackIdentify",S[S.channelUpdateWhiteBlackIdentifyUser=19]="channelUpdateWhiteBlackIdentifyUser",S[S.updateQuickComment=20]="updateQuickComment",S[S.channelCategoryCreate=21]="channelCategoryCreate",S[S.channelCategoryRemove=22]="channelCategoryRemove",S[S.channelCategoryUpdate=23]="channelCategoryUpdate",S[S.channelCategoryUpdateWhiteBlackIdentify=24]="channelCategoryUpdateWhiteBlackIdentify",S[S.channelCategoryUpdateWhiteBlackIdentifyUser=25]="channelCategoryUpdateWhiteBlackIdentifyUser",S[S.serverIdentifyAdd=26]="serverIdentifyAdd",S[S.serverIdentifyRemove=27]="serverIdentifyRemove",S[S.serverIdentifyUpdate=28]="serverIdentifyUpdate",S[S.channelIdentifyUpdate=29]="channelIdentifyUpdate",S[S.userIdentifyUpdate=30]="userIdentifyUpdate",S[S.channelVisibilityUpdate=31]="channelVisibilityUpdate",S[S.serverEnterLeave=32]="serverEnterLeave",S[S.serverMemberJoinByInviteCode=33]="serverMemberJoinByInviteCode",S[S.channelVisibilityToVisitorUpdate=34]="channelVisibilityToVisitorUpdate",S[S.myMemberInfoUpdated=35]="myMemberInfoUpdated",S[S.custom=100]="custom",S[S.msgTyping=101]="msgTyping"}(Xo||(Xo={})),function(S){S[S.reply=1]="reply",S[S.thread=2]="thread",S[S.all=3]="all"}(uc||(uc={}));var Eh=function(){return Vs.Date.now()},jS=/\s/,DS=function(x){for(var D=x.length;D--&&jS.test(x.charAt(D)););return D},US=/^\s+/,qS=function(x){return x&&x.slice(0,DS(x)+1).replace(US,"")},VS=/^[-+]0x[0-9a-f]+$/i,HS=/^0b[01]+$/i,zS=/^0o[0-7]+$/i,KS=parseInt,Ph=function(x){if(typeof x=="number")return x;if(Fp(x))return NaN;if(pi(x)){var D=typeof x.valueOf=="function"?x.valueOf():x;x=pi(D)?D+"":D}if(typeof x!="string")return x===0?x:+x;x=qS(x);var F=HS.test(x);return F||zS.test(x)?KS(x.slice(2),F?2:8):VS.test(x)?NaN:+x},WS=Math.max,By=Math.min,GS=function(x,D,F){var O,oe,_e,z,qe,jt,lr=0,fr=!1,Sr=!1,br=!0;if(typeof x!="function")throw new TypeError("Expected a function");function Er(hn){var Gn=O,Dn=oe;return O=oe=void 0,lr=hn,z=x.apply(Dn,Gn)}function Dr(hn){return lr=hn,qe=setTimeout(vn,D),fr?Er(hn):z}function $r(hn){var Gn=hn-jt;return jt===void 0||Gn>=D||Gn<0||Sr&&hn-lr>=_e}function vn(){var hn=Eh();if($r(hn))return Xr(hn);qe=setTimeout(vn,function(Dn){var jo=D-(Dn-jt);return Sr?By(jo,_e-(Dn-lr)):jo}(hn))}function Xr(hn){return qe=void 0,br&&O?Er(hn):(O=oe=void 0,z)}function wn(){var hn=Eh(),Gn=$r(hn);if(O=arguments,oe=this,jt=hn,Gn){if(qe===void 0)return Dr(jt);if(Sr)return clearTimeout(qe),qe=setTimeout(vn,D),Er(jt)}return qe===void 0&&(qe=setTimeout(vn,D)),z}return D=Ph(D)||0,pi(F)&&(fr=!!F.leading,_e=(Sr="maxWait"in F)?WS(Ph(F.maxWait)||0,D):_e,br="trailing"in F?!!F.trailing:br),wn.cancel=function(){qe!==void 0&&clearTimeout(qe),lr=0,O=jt=oe=qe=void 0},wn.flush=function(){return qe===void 0?z:Xr(Eh())},wn},Ah=function(x,D,F){var O=!0,oe=!0;if(typeof x!="function")throw new TypeError("Expected a function");return pi(F)&&(O="leading"in F?!!F.leading:O,oe="trailing"in F?!!F.trailing:oe),GS(x,D,{leading:O,maxWait:D,trailing:oe})},QS=function(x,D,F){var O=-1,oe=x.length;D<0&&(D=-D>oe?0:oe+D),(F=F>oe?oe:F)<0&&(F+=oe),oe=D>F?0:F-D>>>0,D>>>=0;for(var _e=Array(oe);++O<oe;)_e[O]=x[O+D];return _e},Zl=function(x,D,F){if(!pi(F))return!1;var O=typeof D;return!!(O=="number"?bp(F)&&yd(D,F.length):O=="string"&&D in F)&&cp(F[D],x)},dc=1/0,JS=function(x){return x?(x=Ph(x))===dc||x===-1/0?17976931348623157e292*(x<0?-1:1):x==x?x:0:x===0?x:0},YS=function(x){var D=JS(x),F=D%1;return D==D?F?D-F:D:0},Jp=Math.ceil,XS=Math.max,jd,eu=function(x,D,F){D=(F?Zl(x,D,F):D===void 0)?1:XS(YS(D),0);var O=x==null?0:x.length;if(!O||D<1)return[];for(var oe=0,_e=0,z=Array(Jp(O/D));oe<O;)z[_e++]=QS(x,oe,oe+=D);return z};(function(S){S[S.sub=1]="sub",S[S.unSub=2]="unSub"})(jd||(jd={}));var Oh,ZS=function(){function S(D){var F=this;this.unreadCount={},this.autoSubscribeUnreadMap={},this.autoSubscribeServerMap={},this.autoSubscribeTypingMap={},this.unreadServerCount={},this.serverRoleIdsMap={},this._serverUnreadInfo=Ah(function(O){F.core.emit("serverUnreadInfo",F.getServerUnreadInfo(O))},100),this.core=D}var x=S.prototype;return x.changeCacheServerRoleIds=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr,fr,Sr=this;return sr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(_e=F.attach.serverIdentifyInfo,z=_e.serverId,qe=_e.roleId,this.serverRoleIdsMap[z]){Er.next=4;break}return Er.next=4,this.getRoleIdsByServerId([z]);case 4:if(jt=this.serverRoleIdsMap[z],!(F.time<jt.timeTag)){Er.next=7;break}return Er.abrupt("return");case 7:if(F.type===Xo[Xo.serverIdentifyAdd]?jt.roleIds.add(qe):jt.roleIds.delete(qe),this.core.logger.debug("QChatChannel::qchatChannel/serverIdentifyChange::now "+z+" roleIds is",qs(oe=[]).call(oe,jt.roleIds)),lr=this.unreadServerCount[z]){Er.next=12;break}return Er.abrupt("return");case 12:fr=eu(na(lr),100),In(fr).call(fr,function(Dr){Sr.core.qchatChannel.getChannelUnreadInfos({channels:vo(Dr).call(Dr,function($r){return{serverId:z,channelId:$r}})})});case 14:case"end":return Er.stop()}},O,this)}))},x.getRoleIdsByServerId=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt=this;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if((_e=Js(F).call(F,function(Sr){return!jt.serverRoleIdsMap[Sr]})).length){fr.next=3;break}return fr.abrupt("return");case 3:return z={serverIdTimeTags:_e},fr.next=6,this.core.sendCmd("qchatGetRoleIdsByServerId",{qchatGetRoleIdsByServerIdTag:z});case 6:qe=fr.sent,this.core.logger.debug("QChatChannel:: getRoleIdsByServerId, params is ",z,"result is",qe),In(oe=qe.content.serverRoles).call(oe,function(Sr){try{Sr.roleIds=JSON.parse(Sr.roleIds)}catch(br){jt.core.logger.error("QChatChannel:: getRoleIdsByServerId JSON parse roleIds error",br)}jt.serverRoleIdsMap[Sr.serverId]={roleIds:new Xl(Sr.roleIds),timeTag:Sr.timeTag}});case 9:case"end":return fr.stop()}},O,this)}))},x._unSubscribeChannel=function(F,O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(_e=F+"_"+O,z=this.autoSubscribeUnreadMap[_e]){jt.next=4;break}return jt.abrupt("return");case 4:this.subscribe({opeType:jd.unSub,type:z,channels:[{serverId:F,channelId:O}]}),this.autoSubscribeUnreadMap[_e]=void 0;case 6:case"end":return jt.stop()}},oe,this)}))},x.subscribe=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt=this;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},F),fr.next=3,this.core.sendCmd("qchatSubscribe",{qchatSubReqTag:{type:F.type,opeType:F.opeType},channels:F.channels});case 3:return _e=fr.sent,z=new Xl,In(oe=F.channels).call(oe,function(Sr){return Mr(jt,void 0,void 0,sr.mark(function br(){return sr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:this.serverRoleIdsMap[Sr.serverId]||z.add(Sr.serverId);case 1:case"end":return Dr.stop()}},br,this)}))}),qe=eu(_c(z),10),In(qe).call(qe,function(Sr){jt.getRoleIdsByServerId(Sr)}),fr.abrupt("return",_e.content);case 9:case"end":return fr.stop()}},O,this)}))},x.resumeSubscribe=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr,fr,Sr=this;return sr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(this.serverRoleIdsMap={},this.unreadServerCount={},this.unreadCount={},jt=100,F.isAutoReconnect){Er.next=6;break}return Er.abrupt("return");case 6:return lr={},In(oe=na(this.autoSubscribeUnreadMap)).call(oe,function(Dr){var $r=Sr.autoSubscribeUnreadMap[Dr];if($r){var vn=Dr.split("_"),Xr={serverId:vn[0],channelId:vn[1]};lr[$r]=lr[$r]||[],lr[$r].push(Xr)}}),lr[5]=[],In(_e=na(this.autoSubscribeTypingMap)).call(_e,function(Dr){return Mr(Sr,void 0,void 0,sr.mark(function $r(){var vn,Xr,wn,hn;return sr.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:this.autoSubscribeTypingMap[Dr]&&(vn=Dr.split("_"),Xr=vn[0],wn=vn[1],hn={serverId:Xr,channelId:wn},lr[5].push(hn));case 2:case"end":return Dn.stop()}},$r,this)}))}),lr[4]=[],In(z=na(this.autoSubscribeServerMap)).call(z,function(Dr){return Mr(Sr,void 0,void 0,sr.mark(function $r(){var vn;return sr.wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:this.autoSubscribeServerMap[Dr]&&(vn={serverId:Dr},lr[4].push(vn));case 2:case"end":return wn.stop()}},$r,this)}))}),fr=[],In(qe=na(lr)).call(qe,function(Dr){var $r=lr[Dr];if($r&&$r.length===0)return co.resolve();if($r.length>jt){var vn=eu($r,100);return In(vn).call(vn,function(Xr){fr.push(Sr.createSubscribePromise(Xr,Dr))})}fr.push(Sr.createSubscribePromise($r,Dr))}),Er.next=16,co.all(fr);case 16:case"end":return Er.stop()}},O,this)}))},x.createSubscribePromise=function(F,O){var oe=this,_e={type:Lo(O),opeType:1,channels:F};return this.core.logger.debug("qchatChannel:: autoSubscribeUnread params",_e),this.subscribe(_e).then(function(z){var qe=z.unreadInfos;qe&&qe.length>0&&(qe=Nd(qe),oe.cacheUnreadCount(qe))}).catch(function(z){oe.core.logger.error("qchatChannel:: autoSubscribeUnread error ",z)})},x.cacheSubscribe=function(F){var O,oe=this;In(O=F.channels).call(O,function(_e){var z=_e.channelId?_e.serverId+"_"+_e.channelId:""+_e.serverId,qe=F.type===5?oe.autoSubscribeTypingMap:F.type===4?oe.autoSubscribeServerMap:oe.autoSubscribeUnreadMap;F.opeType===jd.sub?qe[z]=F.type:F.opeType===jd.unSub&&(qe[z]=void 0)})},x.cacheUnreadCount=function(F){var O=this;In(F).call(F,function(oe){var _e=oe.serverId+"_"+oe.channelId;O.unreadCount[_e]=Tn({},oe),O.unreadServerCount[oe.serverId]||(O.unreadServerCount[oe.serverId]={}),O.unreadServerCount[oe.serverId][oe.channelId]=!0})},x.getServerUnreadInfo=function(F){var O,oe=this,_e={serverId:F,unreadCount:0,mentionedCount:0,maxCount:0},z=this.unreadServerCount[F];return z&&(In(O=na(z)).call(O,function(qe){var jt=F+"_"+qe,lr=oe.unreadCount[jt];_e.unreadCount+=lr.unreadCount,_e.mentionedCount+=lr.mentionedCount,lr.maxCount!==void 0&&(_e.maxCount=lr.maxCount)}),_e.unreadCount=_e.unreadCount>_e.maxCount?_e.maxCount:_e.unreadCount,_e.mentionedCount=_e.mentionedCount>_e.maxCount?_e.maxCount:_e.mentionedCount),_e},x.getUnreadInfo=function(F){Gr({serverId:{type:"string"},channelId:{type:"string"}},F);var O=F.serverId+"_"+F.channelId;return this.unreadCount[O]?this.unreadCount[O]:null},x.shouldChangeUnread=function(F,O){if(!F.serverId||!F.channelId||this.core.qchatChannel.subscribeForVisitorService.isInSubscribeChannels(F.serverId,F.channelId)||F.historyEnable===!1||F.needBadge===!1||F.fromAccount===this.core.account||O&&(F==null?void 0:F.status)!==2)return!1;if(F.notifyReason&&F.notifyReason===Rv($d,$d.notifySubscribe)){if(!F.serverId||!F.channelId)return!1;var oe=this.getUnreadInfo({serverId:F.serverId,channelId:F.channelId}),_e=O?"ackTimestamp":"lastMsgTime";if(!oe||F.time&&oe[_e]&&oe[_e]>F.time)return!1}return!0},x.shouldChangeMentionedUnread=function(F,O){return O===void 0&&(O=!1),Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(!F.accidsOfMentionedRoles||!mi(_e=F.accidsOfMentionedRoles).call(_e,this.core.account)){jt.next=2;break}return jt.abrupt("return",!0);case 2:if(!F.mentionRoleIds||!F.serverId){jt.next=16;break}if(this.serverRoleIdsMap[F.serverId]){jt.next=9;break}if(O){jt.next=7;break}return this.handledRoleMsg(F),jt.abrupt("return",!1);case 7:return jt.next=9,this.getRoleIdsByServerId([F.serverId]);case 9:z=0;case 10:if(!(z<F.mentionRoleIds.length)){jt.next=16;break}if(!this.serverRoleIdsMap[F.serverId].roleIds.has(F.mentionRoleIds[z])){jt.next=13;break}return jt.abrupt("return",!0);case 13:z++,jt.next=10;break;case 16:return jt.abrupt("return",!1);case 17:case"end":return jt.stop()}},oe,this)}))},x.handledRoleMsg=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr=this;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(F.mentionRoleIds){Sr.next=2;break}return Sr.abrupt("return");case 2:if(this.serverRoleIdsMap[F.serverId]){Sr.next=5;break}return Sr.next=5,this.getRoleIdsByServerId([F.serverId]);case 5:if(this.serverRoleIdsMap[F.serverId]){Sr.next=8;break}return this.core.logger.warn("QChatChannel::handledRoleMsg::can not get serverRoleIds,server id",F.serverId),Sr.abrupt("return");case 8:if(_e=!1,In(oe=F.mentionRoleIds).call(oe,function(br){lr.serverRoleIdsMap[F.serverId].roleIds.has(br)&&(_e=!0,lr.core.logger.debug("QChatChannel::handledRoleMsg::will update message mentionedCount，message is ",F))}),_e){Sr.next=12;break}return Sr.abrupt("return");case 12:if(z=this.unreadCount[F.serverId+"_"+F.channelId],qe=(F==null?void 0:F.status)===2,z.mentionedCount=qe?z.mentionedCount?z.mentionedCount-1:0:z.mentionedCount?z.mentionedCount+1:1,typeof z.maxCount!="number"){Sr.next=24;break}if(!((jt=(jt=z.mentionedCount)>z.maxCount?z.maxCount:jt)>z.maxCount)){Sr.next=21;break}return this.core.logger.debug("QChatChannel::handledRoleMsg::tempUnreadCount more than maxCount"),Sr.abrupt("return");case 21:this.core.emit("unreadInfo",Tn(Tn({},z),{mentionedCount:jt})),this.core.emit("unreadInfos",[Tn(Tn({},z),{mentionedCount:jt})]),this._serverUnreadInfo(F.serverId);case 24:case"end":return Sr.stop()}},O,this)}))},x.getMentionedFlag=function(F,O){return O===void 0&&(O=!1),Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(!F.mentionAll){qe.next=4;break}return qe.abrupt("return",!0);case 4:if(!F.mentionRoleIds&&!F.accidsOfMentionedRoles){qe.next=10;break}return qe.next=7,this.shouldChangeMentionedUnread(F,O);case 7:return qe.abrupt("return",qe.sent);case 10:if(!F.mentionAccids||!mi(_e=F.mentionAccids).call(_e,this.core.account)){qe.next=12;break}return qe.abrupt("return",!0);case 12:return qe.abrupt("return",!1);case 13:case"end":return qe.stop()}},oe,this)}))},x.changeUnread=function(F,O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr,fr,Sr;return sr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(_e=F.serverId,z=F.channelId,qe=_e+"_"+z,this.shouldChangeUnread(F,O)){Er.next=6;break}return this.core.logger.debug("changeUnread: "+qe+" does not need to update unreadInfo"),Er.abrupt("return");case 6:if(this.unreadCount[qe]){Er.next=11;break}return Er.next=9,this.core.qchatChannel.getChannelUnreadInfos({channels:[{serverId:_e,channelId:z}]});case 9:return!this.serverRoleIdsMap[_e]&&F.mentionRoleIds&&this.getRoleIdsByServerId([_e]),Er.abrupt("return");case 11:return jt=this.unreadCount[qe],lr=(F==null?void 0:F.status)===2,Er.next=15,this.getMentionedFlag(F);case 15:if(fr=Er.sent,lr?(jt.unreadCount=jt.unreadCount?jt.unreadCount-1:0,fr&&(jt.mentionedCount=jt.mentionedCount?jt.mentionedCount-1:0),delete jt.lastMsgTime,this.core.logger.debug("changeUnread: "+qe+" unread reduce ",jt)):(jt.unreadCount=jt.unreadCount?jt.unreadCount+1:1,fr&&(jt.mentionedCount=jt.mentionedCount?jt.mentionedCount+1:1),F.time&&(jt.lastMsgTime=F.time),this.core.logger.debug("changeUnread: "+qe+" unread add ",jt)),Sr=typeof jt.maxCount=="number"?jt.maxCount:100,!(jt.unreadCount>Sr)){Er.next=21;break}return this.core.logger.debug("QChatChannel::subscribe::tempUnreadCount more than maxCount"),Er.abrupt("return");case 21:this.core.logger.warn("unreadInfo event will abandon,please use unreadInfos"),this.core.emit("unreadInfo",Tn(Tn({},jt),{mentionedCount:jt.mentionedCount>Sr?Sr:jt.mentionedCount,unreadCount:jt.unreadCount>Sr?Sr:jt.unreadCount})),this.core.emit("unreadInfos",[Tn(Tn({},jt),{mentionedCount:jt.mentionedCount>Sr?Sr:jt.mentionedCount,unreadCount:jt.unreadCount>Sr?Sr:jt.unreadCount})]),this._serverUnreadInfo(_e);case 25:case"end":return Er.stop()}},oe,this)}))},x.updateUnreads=function(F){var O,oe=this;if(F&&F.length>0){var _e=this.getServerUnreadInfo(F[0].serverId),z=this.unreadServerCount[F[0].serverId],qe=vo(O=Js(F).call(F,function(Dr){var $r=Dr.serverId+"_"+Dr.channelId,vn=oe.unreadCount[$r],Xr=Wa(vn,"ackTimestamp"),wn=Wa(Dr,"ackTimestamp");return!(Xr&&wn&&wn<Xr)&&(Wa(vn,"unreadCount")!==Wa(Dr,"unreadCount")||Wa(vn,"mentionedCount")!==Wa(Dr,"mentionedCount"))})).call(O,function(Dr){var $r=Dr.serverId,vn=Dr.channelId,Xr=$r+"_"+vn;return oe.core.logger.debug("qchat channel updateUnread: ",Dr),oe.unreadCount[Xr]=Tn({},Dr),oe.unreadServerCount[$r]||(oe.unreadServerCount[$r]={}),oe.unreadServerCount[$r][vn]=!0,Dr});if(qe.length>0){this.core.emit("unreadInfos",qe);var jt=this.getServerUnreadInfo(F[0].serverId),lr=this.unreadServerCount[F[0].serverId],fr=_e.unreadCount!==jt.unreadCount,Sr=!z||na(z).length===0,br=lr&&na(lr).length>0,Er=_e.mentionedCount!==jt.mentionedCount;(fr||Er||Sr&&br)&&this._serverUnreadInfo(qe[0].serverId)}In(qe).call(qe,function(Dr){oe.core.emit("unreadInfo",Dr)})}},x.clearUnreadCountByServers=function(F,O){var oe=this,_e=[];In(F).call(F,function(qe){var jt;oe.unreadServerCount[qe]&&In(jt=na(oe.unreadServerCount[qe])).call(jt,function(lr){_e.push(qe+"_"+lr)})});var z=[];In(_e).call(_e,function(qe){z.push(Tn(Tn({},oe.unreadCount[qe]),{unreadCount:0,mentionedCount:0,ackTimestamp:O}))}),this.updateUnreads(z)},S}(),eC=function(){function S(D){this.limitForBatchEnter=10,this.limitForBatchSubscribe=100,this.autoServers=new Xl,this.autoVisitorSubscribeServer=new Xl,this.autoVisitorSubscribeChannel=new Xl,this.core=D}var x=S.prototype;return x.subscribeChannelAsVisitor=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt=this;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:F.type||6,opeType:F.opeType},datas:F.channels});case 2:return _e=fr.sent,z=_e.content.failedArr,qe=Js(oe=F.channels).call(oe,function(Sr){return!Ap(z).call(z,function(br){return br.channelId===Sr.channelId&&br.serverId===Sr.serverId})}),In(qe).call(qe,function(Sr){F.opeType===1?jt.autoVisitorSubscribeChannel.add(Sr.serverId+"&"+Sr.channelId):jt.autoVisitorSubscribeChannel.delete(Sr.serverId+"&"+Sr.channelId)}),fr.abrupt("return",{failedChannels:z});case 7:case"end":return fr.stop()}},O,this)}))},x.subscribeServerAsVisitor=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr,fr=this;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return br.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:F.type||7,opeType:F.opeType},datas:vo(oe=F.serverIds).call(oe,function(Er){return{serverId:Er}})});case 2:return qe=br.sent,jt=qe.content.failedArr,lr=Js(_e=F.serverIds).call(_e,function(Er){return!Ap(jt).call(jt,function(Dr){return Dr.serverId===Er})}),In(lr).call(lr,function(Er){F.opeType===1?fr.autoVisitorSubscribeServer.add(Er):fr.autoVisitorSubscribeServer.delete(Er)}),br.abrupt("return",{failedServers:vo(z=qe.content.failedArr).call(z,function(Er){return Er.serverId})});case 7:case"end":return br.stop()}},O,this)}))},x.deleteServer=function(F){var O;this.autoServers.delete(F),this.autoVisitorSubscribeServer.has(F)&&this.subscribeServerAsVisitor({opeType:2,serverIds:[F]});var oe=[];In(O=this.autoVisitorSubscribeChannel).call(O,function(_e){if(pa(_e).call(_e,F)===0){var z=_e.replace(F+"&","");oe.push({serverId:F,channelId:z})}}),oe.length>0&&this.subscribeChannelAsVisitor({opeType:2,channels:oe})},x.deleteAutoSetInServerId=function(F){var O,oe=this;this.autoServers.delete(F),this.autoVisitorSubscribeServer.delete(F),In(O=this.autoVisitorSubscribeChannel).call(O,function(_e){pa(_e).call(_e,F)===0&&oe.autoVisitorSubscribeChannel.delete(_e)})},x.deleteAutoSetInChannel=function(F,O){this.autoVisitorSubscribeChannel.delete(F+"&"+O)},x.unSubscribeChannel=function(F,O){this.subscribeChannelAsVisitor({opeType:2,channels:[{serverId:F,channelId:O}]})},x.isInSubscribeChannels=function(F,O){return this.autoVisitorSubscribeChannel.has(F+"&"+O)},x.isInAutoServers=function(F){return this.autoServers.has(F)},x.doAutoSubscribe=function(){var F=this,O=[],oe=eu(_c(this.autoVisitorSubscribeServer),this.limitForBatchSubscribe);In(oe).call(oe,function(z){O.push(F.subscribeServerAsVisitor({opeType:1,serverIds:z}))});var _e=eu(_c(this.autoVisitorSubscribeChannel),this.limitForBatchSubscribe);return In(_e).call(_e,function(z){O.push(F.subscribeChannelAsVisitor({opeType:1,channels:vo(z).call(z,function(qe){var jt=pa(qe).call(qe,"&");return{serverId:Co(qe).call(qe,0,jt),channelId:Co(qe).call(qe,jt+1)}})}))}),co.all(O)},x.doAutoEnterServer=function(){return Mr(this,void 0,void 0,sr.mark(function F(){var O,oe,_e,z=this;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return O=eu(_c(this.autoServers),this.limitForBatchEnter),oe=[],In(O).call(O,function(lr){oe.push(z.core.qchatServer.enterAsVisitor({serverIds:lr}))}),jt.next=5,co.all(oe);case 5:_e=jt.sent,In(_e).call(_e,function(lr){var fr;In(fr=lr.failedServers).call(fr,function(Sr){z.deleteAutoSetInServerId(Sr)})});case 7:case"end":return jt.stop()}},F,this)}))},x.resumeSubscribe=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!F.isAutoReconnect){_e.next=7;break}return _e.next=3,this.doAutoEnterServer();case 3:return _e.next=5,this.doAutoSubscribe();case 5:_e.next=10;break;case 7:this.autoServers.clear(),this.autoVisitorSubscribeChannel.clear(),this.autoVisitorSubscribeServer.clear();case 10:case"end":return _e.stop()}},O,this)}))},x.cacheServer=function(F){var O=this;In(F).call(F,function(oe){return O.autoServers.add(oe)})},S}();(function(S){S[S.sub=1]="sub",S[S.unSub=2]="unSub"})(Oh||(Oh={}));var tC=function(S){function x(F){var O,oe,_e,z,qe,jt;return(jt=S.call(this,"qchatChannel",F)||this).core=F,Ei({cmdMap:wd,cmdConfig:Sh}),jt.subscribeModuleService=new ZS(F),jt.subscribeForVisitorService=new eC(F),jt.core.eventBus.on("qchatChannel/changeUnread",Oo(O=jt.subscribeModuleService.changeUnread).call(O,jt.subscribeModuleService)),jt.core.eventBus.on("qchatChannel/updateUnreads",Oo(oe=jt.subscribeModuleService.updateUnreads).call(oe,jt.subscribeModuleService)),jt.core.eventBus.on("qchatChannel/cacheSubscribe",Oo(_e=jt.subscribeModuleService.cacheSubscribe).call(_e,jt.subscribeModuleService)),jt.core.eventBus.on("qchatChannel/clearUnreadCountByServers",Oo(z=jt.subscribeModuleService.clearUnreadCountByServers).call(z,jt.subscribeModuleService)),jt.core.eventBus.on("qchatChannel/getRoleIdsByServerId",Oo(qe=jt.subscribeModuleService.getRoleIdsByServerId).call(qe,jt.subscribeModuleService)),jt.core.eventBus.on("logined",function(lr){jt.subscribeModuleService.resumeSubscribe(lr),jt.subscribeForVisitorService.resumeSubscribe(lr)}),jt.core.eventBus.on("qchatChannel/autoUnSubscribe",function(lr){if(jt.logger.log("QChatChannel::enter autoUnSubscribe sysMsg is",lr),lr.type===Xo[Xo.channelVisibilityUpdate])jt.logger.log("QChatChannel::begin autoUnSubscribe channel key is",lr.serverId+"_"+lr.channelId),jt.subscribeModuleService._unSubscribeChannel(lr.serverId,lr.channelId),jt.logger.log("QChatChannel::autoUnSubscribe channel done key is",lr.serverId+"_"+lr.channelId);else if(lr.type===Xo[Xo.serverEnterLeave]){var fr;jt.subscribeModuleService.autoSubscribeServerMap[lr.serverId]&&(jt.logger.log("QChatChannel::begin autoUnSubscribe server key is",lr.serverId),jt.subscribeModuleService.subscribe({type:4,opeType:Oh.unSub,channels:[{serverId:lr.serverId,channelId:""}]}),jt.logger.log("QChatChannel::autoUnSubscribe server done key is",lr.serverId));var Sr=jt.subscribeModuleService.unreadServerCount[lr.serverId];if(!Sr)return;jt.logger.log("QChatChannel::begin autoUnSubscribe channels key is",na(Sr)),In(fr=na(Sr)).call(fr,function(br){jt.subscribeModuleService._unSubscribeChannel(lr.serverId,br)}),jt.logger.log("QChatChannel::autoUnSubscribe channels done key is",na(Sr))}}),jt.core.eventBus.on("qchatChannel/serverIdentifyChange",function(lr){jt.subscribeModuleService.changeCacheServerRoleIds(lr)}),jt}Ro(x,S);var D=x.prototype;return D.createChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",min:1},type:{type:"enum",values:ia(hl)},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},O),qe.next=3,this.core.sendCmd("qchatCreateChannel",{channelInfo:Tn(Tn({},O),{type:hl[O.type]}),antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",Ad(_e.content.channelInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.deleteChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({channelId:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatDeleteChannel",O);case 3:case"end":return z.stop()}},oe,this)}))},D.updateChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({channelId:{type:"string",min:1},serverId:{type:"string",required:!1},type:{type:"enum",values:ia(hl),required:!1},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},O),_e=O,O.type&&(_e.type=hl[O.type]),jt.next=5,this.core.sendCmd("qchatUpdateChannel",{channelInfo:_e,antispamTag:Pc(O)});case 5:return z=jt.sent,jt.abrupt("return",Ad(z.content.channelInfo));case 7:case"end":return jt.stop()}},oe,this)}))},D.getChannels=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({channelIds:{type:"array",itemType:"string",min:1}},O),qe.next=3,this.core.sendCmd("qchatGetChannels",O);case 3:return _e=qe.sent,qe.abrupt("return",Od(_e.content.channelList));case 5:case"end":return qe.stop()}},oe,this)}))},D.getChannelsByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetChannelsByPage",{qchatGetChannelListPageTag:Tn({limit:100},O)});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:Od(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.getMembersByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetMembersByPage",{qchatGetMembersByPageTag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:lc(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.updateWhiteBlackRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},roleId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},opeType:{type:"enum",values:ia(Zs)}},O),z.next=3,this.core.sendCmd("qchatUpdateWhiteBlackRole",{qchatUpdateWhiteBlackRoleTag:Tn(Tn({},O),{type:ca[O.type],opeType:Zs[O.opeType]})});case 3:case"end":return z.stop()}},oe,this)}))},D.getWhiteBlackRolesPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetWhiteBlackRolesPage",{qchatGetWhiteBlackRolesPageTag:Tn(Tn({},O),{type:ca[O.type]})});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:zs(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.updateWhiteBlackMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},opeType:{type:"enum",values:ia(Zs)},toAccids:{type:"array",itemType:"string",min:1}},O),z.next=3,this.core.sendCmd("qchatUpdateWhiteBlackMembers",{qchatUpdateWhiteBlackMembersTag:Tn(Tn({},O),{type:ca[O.type],opeType:Zs[O.opeType],toAccids:mo(O.toAccids)})});case 3:case"end":return z.stop()}},oe,this)}))},D.getWhiteBlackMembersPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetWhiteBlackMembersPage",{qchatGetWhiteBlackMembersPageTag:Tn(Tn({limit:100},O),{type:ca[O.type]})});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:lc(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.getExistingWhiteBlackRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},roleIds:{type:"array",itemType:"string",min:1}},O),jt.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackRoles",{qchatGetExistingWhiteBlackRolesTag:Tn(Tn({},O),{type:ca[O.type],roleIds:mo(O.roleIds)})});case 3:return _e=jt.sent,z=_e.content.datas,jt.abrupt("return",{datas:zs(z)});case 6:case"end":return jt.stop()}},oe,this)}))},D.getExistingWhiteBlackMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:ia(ca)},accids:{type:"array",itemType:"string",min:1}},O),jt.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackMembers",{qchatGetExistingWhiteBlackMembersTag:Tn(Tn({},O),{type:ca[O.type],accids:mo(O.accids)})});case 3:return _e=jt.sent,z=_e.content.datas,jt.abrupt("return",{datas:lc(z)});case 6:case"end":return jt.stop()}},oe,this)}))},D.updateCategoryInfoOfChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({channelId:{type:"string",min:1},categoryId:{type:"string",allowEmpty:!1,required:!1},syncMode:{type:"number",min:0,max:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateCategoryInfoOfChannel",{qchatUpdateCategoryInfoOfChannelTag:O});case 3:return _e=qe.sent,qe.abrupt("return",Ad(_e.content.channelInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.createChannelCategory=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatCreateChannelCategory",{qchatCreateChannelCategoryTag:O});case 3:return _e=qe.sent,qe.abrupt("return",Rd(_e.content.QChatChannelCategoryInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.removeChannelCategory=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatRemoveChannelCategory",O);case 3:case"end":return z.stop()}},oe,this)}))},D.updateChannelCategory=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateChannelCategory",{qchatUpdateChannelCategoryTag:O});case 3:return _e=qe.sent,qe.abrupt("return",Rd(_e.content.QChatChannelCategoryInfo));case 5:case"end":return qe.stop()}},oe,this)}))},D.getChannelCategoriesByID=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({categoryIds:{type:"array",itemType:"string",min:1}},O),qe.next=3,this.core.sendCmd("qchatGetChannelCategoriesByID",O);case 3:return _e=qe.sent,qe.abrupt("return",_h(_e.content.channelCategoryList));case 5:case"end":return qe.stop()}},oe,this)}))},D.updateChannelCategoryWhiteBlackRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},opeType:{type:"enum",values:ia(Zs)},roleId:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackRole",{qchatUpdateChannelCategoryWhiteBlackRoleTag:Tn(Tn({},O),{type:ca[O.type],opeType:Zs[O.opeType]})});case 3:case"end":return z.stop()}},oe,this)}))},D.getChannelCategoryWhiteBlackRolesPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRolesPage",{qchatGetChannelCategoryWhiteBlackRolesPageTag:Tn(Tn({},O),{type:ca[O.type]})});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:zs(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.updateChannelCategoryWhiteBlackMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},opeType:{type:"enum",values:ia(Zs)},toAccids:{type:"array",itemType:"string",min:1}},O),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackMembers",{qchatUpdateChannelCategoryWhiteBlackMembersTag:Tn(Tn({},O),{type:ca[O.type],opeType:Zs[O.opeType],toAccids:mo(O.toAccids)})});case 3:case"end":return z.stop()}},oe,this)}))},D.getChannelCategoryWhiteBlackMembersPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembersPage",{qchatGetChannelCategoryWhiteBlackMembersPageTag:Tn(Tn({},O),{type:ca[O.type]})});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:lc(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.getChannelCategoryWhiteBlackRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},roleIds:{type:"array",itemType:"string",min:1}},O),jt.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRoles",{qchatGetChannelCategoryWhiteBlackRolesTag:Tn(Tn({},O),{type:ca[O.type],roleIds:mo(O.roleIds)})});case 3:return _e=jt.sent,z=_e.content.datas,jt.abrupt("return",zs(z));case 6:case"end":return jt.stop()}},oe,this)}))},D.getChannelCategoryWhiteBlackMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(ca)},accids:{type:"array",itemType:"string",min:1}},O),jt.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembers",{qchatGetChannelCategoryWhiteBlackMembersTag:Tn(Tn({},O),{type:ca[O.type],accids:mo(O.accids)})});case 3:return _e=jt.sent,z=_e.content.datas,jt.abrupt("return",lc(z));case 6:case"end":return jt.stop()}},oe,this)}))},D.getChannelCategoriesPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetChannelCategoriesPage",{qchatGetChannelCategoriesPageTag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:_h(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.getChannelCategoryChannelsPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},O),fr.next=3,this.core.sendCmd("qchatGetChannelCategoryChannelsPage",{qchatGetChannelCategoryChannelsPageTag:O});case 3:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag)},datas:Od(qe)});case 6:case"end":return fr.stop()}},oe,this)}))},D.subscribeChannel=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},O),jt.next=3,this.subscribeModuleService.subscribe(O);case 3:if((_e=jt.sent).unreadInfos=Nd(_e.unreadInfos),O.opeType===1&&(O.channels=vo(z=_e.unreadInfos).call(z,function(lr){return{serverId:lr.serverId,channelId:lr.channelId}})),this.logger.debug("QChatChannel::subscribeChannel:: cacheSubscribe ",O),this.subscribeModuleService.cacheSubscribe(O),O.type!==5){jt.next=10;break}return jt.abrupt("return");case 10:return this.subscribeModuleService.updateUnreads(_e.unreadInfos),jt.abrupt("return",_e);case 12:case"end":return jt.stop()}},oe,this)}))},D.getChannelUnreadInfos=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("qchatGetUnreadInfo",O);case 2:return _e=jt.sent,z=Nd(_e.content.unreadInfos),this.subscribeModuleService.updateUnreads(z),jt.abrupt("return",z);case 6:case"end":return jt.stop()}},oe,this)}))},D.getChannelSearchByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Gr({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:1,required:!1},order:{type:"enum",values:ia(Ic),required:!1},limit:{type:"number",min:1,required:!1},serverId:{type:"string",required:!1},sort:{type:"enum",values:ia(Hp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},O),!(O.startTime&&O.endTime&&O.startTime>=O.endTime)){fr.next=3;break}throw new al("startTime more than endTime",O,"timeRule");case 3:return fr.next=5,this.core.sendCmd("qchatGetChannelSearchByPage",{qchatGetChannelSearchByPageTag:Tn(Tn({},O),{order:O.order&&Ic[O.order],sort:Wl(O)&&Hp[Wl(O)]})});case 5:return _e=fr.sent,z=_e.content,qe=z.datas,jt=z.listQueryTag,fr.abrupt("return",{listQueryTag:{hasMore:+jt.hasMore==1,nextTimetag:Lo(jt.nextTimetag),cursor:jt.cursor},datas:Od(qe)});case 8:case"end":return fr.stop()}},oe,this)}))},D.channelMemberSearch=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatChannelMemberSearch",{qchatChannelMemberSearchTag:O});case 3:return _e=qe.sent,qe.abrupt("return",NS(_e.content.datas));case 5:case"end":return qe.stop()}},oe,this)}))},D.subscribeAsVisitor=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},channels:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},min:1}},O),z.next=3,this.subscribeForVisitorService.subscribeChannelAsVisitor(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},x}(gl),Fy={"24_61":"qchatCreateServerRole","24_62":"qchatDeleteServerRole","24_63":"qchatUpdateServerRole","24_64":"qchatGetServerRoles","24_65":"qchatAddChannelRole","24_66":"qchatRemoveChannelRole","24_67":"qchatUpdateChannelRole","24_68":"qchatGetChannelRoles","24_69":"qchatAddMemberRole","24_70":"qchatRemoveMemberRole","24_71":"qchatUpdateMemberRole","24_72":"qchatGetMemberRoles","24_73":"qchatAddMembersToServerRole","24_74":"qchatRemoveMembersFromServerRole","24_75":"qchatGetMembersFromServerRole","24_76":"qchatGetServerRolesByAccid","24_77":"qchatGetExistingServerRolesByAccids","24_78":"qchatGetExistingChannelRolesByServerRoleIds","24_79":"qchatGetExistingAccidsOfMemberRoles","24_80":"qchatUpdateServerRolePriorities","24_81":"qchatGetExistingAccidsInServerRole","24_82":"qchatCheckPermission","24_83":"qchatAddChannelCategoryRole","24_84":"qchatRemoveChannelCategoryRole","24_85":"qchatUpdateChannelCategoryRole","24_86":"qchatGetChannelCategoryRole","24_87":"qchatAddChannelCategoryMemberRole","24_88":"qchatRemoveChannelCategoryMemberRole","24_89":"qchatUpdateChannelCategoryMemberRole","24_90":"qchatGetChannelCategoryMemberRole","24_126":"qchatCheckPermissions"},za={channelRole:{serverId:1,roleId:2,parentRoleId:3,channelId:4,name:5,icon:6,ext:7,auths:8,type:9,createTime:10,updateTime:11},memberRole:{serverId:1,id:2,accid:3,channelId:4,auths:5,createTime:6,updateTime:7,nick:8,avatar:9,ext:10,memberType:11,joinTime:12,inviter:13},antispamTag:{antiSpamBusinessId:1},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11,isMember:12},getRoleByPagesTag:{serverId:1,channelId:2,time:3,limit:4},checkPermissionTag:{serverId:1,channelId:2,auth:3},member:{serverId:1,roleId:2,accid:3,createTime:4,updateTime:5,nick:6,avatar:7,ext:8,type:9,joinTime:10,inviter:11},qchatAddChannelCategoryRoleTag:{categoryId:3,serverId:4,parentRoleId:5},channelCategoryRole:{roleId:1,categoryId:3,serverId:4,parentRoleId:5,type:6,validFlag:7,createTime:8,updateTime:9,auths:10,name:11,icon:12,ext:13},qchatGetChannelCategoryRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},channelCategoryMemberRole:{id:1,accid:3,categoryId:4,serverId:5,validFlag:6,createTime:7,updateTime:8,auths:9,nick:10,avatar:11,ext:12,memberType:13,joinTime:14,inviter:15},qchatGetChannelCategoryMemberRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},checkPermissionsTag:{serverId:1,channelId:2,auths:3}},la=Cc(za),rC={qchatCreateServerRole:{service:"qchatRole",sid:24,cid:61,params:[{type:"Property",name:"serverRole",reflectMapper:za.serverRole},{type:"Property",name:"antispamTag",reflectMapper:za.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:la.serverRole}]},qchatDeleteServerRole:{service:"qchatRole",sid:24,cid:62,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"}]},qchatUpdateServerRole:{service:"qchatRole",sid:24,cid:63,params:[{type:"Property",name:"updateServerRoleTag",reflectMapper:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,priority:7}},{type:"Property",name:"antispamTag",reflectMapper:za.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:la.serverRole}]},qchatGetServerRoles:{service:"qchatRole",sid:24,cid:64,params:[{type:"Property",name:"getServerRolesTag",reflectMapper:{serverId:1,timetag:2,limit:3,priority:4,channelId:5,categoryId:6}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatAddChannelRole:{service:"qchatRole",sid:24,cid:65,params:[{type:"Property",name:"channelRole",reflectMapper:za.channelRole}],response:[{type:"Property",name:"channelRole",reflectMapper:la.channelRole}]},qchatRemoveChannelRole:{service:"qchatRole",sid:24,cid:66,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelRole:{service:"qchatRole",sid:24,cid:67,params:[{type:"Property",name:"updateChannelRoleTag",reflectMapper:{serverId:1,roleId:2,channelId:3,auths:4}}],response:[{type:"Property",name:"channelRole",reflectMapper:la.channelRole}]},qchatGetChannelRoles:{service:"qchatRole",sid:24,cid:68,params:[{type:"Property",name:"getChannelRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:la.channelRole}]},qchatAddMemberRole:{service:"qchatRole",sid:24,cid:69,params:[{type:"Property",name:"memberRole",reflectMapper:za.memberRole}],response:[{type:"Property",name:"memberRole",reflectMapper:la.memberRole}]},qchatRemoveMemberRole:{service:"qchatRole",sid:24,cid:70,params:[{type:"Property",name:"memberRole",reflectMapper:za.memberRole}]},qchatUpdateMemberRole:{service:"qchatRole",sid:24,cid:71,params:[{type:"Property",name:"updateMemberRoleTag",reflectMapper:{serverId:1,accid:2,channelId:3,auths:4}}],response:[{type:"Property",name:"memberRole",reflectMapper:la.memberRole}]},qchatGetMemberRoles:{service:"qchatRole",sid:24,cid:72,params:[{type:"Property",name:"getMemberRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:la.memberRole}]},qchatAddMembersToServerRole:{service:"qchatRole",sid:24,cid:73,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatRemoveMembersFromServerRole:{service:"qchatRole",sid:24,cid:74,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatGetMembersFromServerRole:{service:"qchatRole",sid:24,cid:75,params:[{type:"Property",name:"getMembersFromServerRoleTag",reflectMapper:{serverId:1,roleId:2,timetag:3,accid:4,limit:5}}],response:[{type:"PropertyArray",name:"members",reflectMapper:la.member}]},qchatGetServerRolesByAccid:{service:"qchatRole",sid:24,cid:76,params:[{type:"Property",name:"getServerRolesByAccidTag",reflectMapper:{serverId:1,accid:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatGetExistingServerRolesByAccids:{service:"qchatRole",sid:24,cid:77,params:[{type:"Long",name:"serverId"},{type:"String",name:"accids"}],response:[{type:"String",name:"serverRoles"}]},qchatGetExistingChannelRolesByServerRoleIds:{service:"qchatRole",sid:24,cid:78,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"roleIds"}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:la.channelRole}]},qchatGetExistingAccidsOfMemberRoles:{service:"qchatRole",sid:24,cid:79,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:la.memberRole}]},qchatUpdateServerRolePriorities:{service:"qchatRole",sid:24,cid:80,params:[{type:"Long",name:"serverId"},{type:"PropertyArray",name:"serverRoles",reflectMapper:{serverId:1,roleId:2,priority:7}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:la.serverRole}]},qchatGetExistingAccidsInServerRole:{service:"qchatRole",sid:24,cid:81,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"members",reflectMapper:la.member}]},qchatCheckPermission:{service:"qchatRole",sid:24,cid:82,params:[{type:"Property",name:"checkPermissionTag",reflectMapper:za.checkPermissionTag}],response:[{type:"Boolean",name:"checked"}]},qchatAddChannelCategoryRole:{service:"qchatRole",sid:24,cid:83,params:[{type:"Property",name:"qchatAddChannelCategoryRoleTag",reflectMapper:za.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:la.channelCategoryRole}]},qchatRemoveChannelCategoryRole:{service:"qchatRole",sid:24,cid:84,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelCategoryRole:{service:"qchatRole",sid:24,cid:85,params:[{type:"Property",name:"qchatUpdateChannelCategoryRoleTag",reflectMapper:za.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:la.channelCategoryRole}]},qchatGetChannelCategoryRole:{service:"qchatRole",sid:24,cid:86,params:[{type:"Property",name:"qchatGetChannelCategoryRoleTag",reflectMapper:za.qchatGetChannelCategoryRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:la.channelCategoryRole}]},qchatAddChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:87,params:[{type:"Property",name:"qchatAddChannelCategoryMemberRoleTag",reflectMapper:za.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:la.channelCategoryMemberRole}]},qchatRemoveChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:88,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"String",name:"accid"}]},qchatUpdateChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:89,params:[{type:"Property",name:"qchatUpdateChannelCategoryMemberRoleTag",reflectMapper:za.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:la.channelCategoryMemberRole}]},qchatGetChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:90,params:[{type:"Property",name:"qchatGetChannelCategoryMemberRoleTag",reflectMapper:za.qchatGetChannelCategoryMemberRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:la.channelCategoryMemberRole}]},qchatCheckPermissions:{service:"qchatRole",sid:24,cid:126,params:[{type:"Property",name:"checkPermissionsTag",reflectMapper:za.checkPermissionsTag}],response:[{type:"PropertyArray",name:"checkPermissionsResult",reflectMapper:{1:"auth",2:"isAllow"}}]}},nC=function(){function S(D){this.core=D}var x=S.prototype;return x.addChannelCategoryRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},F),z.next=3,this.core.sendCmd("qchatAddChannelCategoryRole",{qchatAddChannelCategoryRoleTag:F});case 3:return oe=z.sent,z.abrupt("return",Gp(oe.content.channelCategoryRole));case 5:case"end":return z.stop()}},O,this)}))},x.removeChannelCategoryRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},F),_e.next=3,this.core.sendCmd("qchatRemoveChannelCategoryRole",F);case 3:case"end":return _e.stop()}},O,this)}))},x.updateChannelCategoryRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object"}},F),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryRole",{qchatUpdateChannelCategoryRoleTag:Ac(F)});case 3:if((oe=z.sent).raw.code!==406){z.next=6;break}throw new yo("No update required",{},406);case 6:return z.abrupt("return",Gp(oe.content.channelCategoryRole));case 7:case"end":return z.stop()}},O,this)}))},x.getChannelCategoryRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},F),z.next=3,this.core.sendCmd("qchatGetChannelCategoryRole",{qchatGetChannelCategoryRoleTag:F});case 3:return oe=z.sent,z.abrupt("return",(qe=oe.content.list,ns(qe)&&qe.length>0?vo(qe).call(qe,function(jt){return Gp(jt)}):[]));case 5:case"end":return z.stop()}var qe},O,this)}))},x.addChannelCategoryMemberRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},F),z.next=3,this.core.sendCmd("qchatAddChannelCategoryMemberRole",{qchatAddChannelCategoryMemberRoleTag:F});case 3:return oe=z.sent,z.abrupt("return",Yl(oe.content.channelCategoryMemberRole));case 5:case"end":return z.stop()}},O,this)}))},x.removeChannelCategoryMemberRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},F),_e.next=3,this.core.sendCmd("qchatRemoveChannelCategoryMemberRole",F);case 3:case"end":return _e.stop()}},O,this)}))},x.updateChannelCategoryMemberRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object"}},F),z.next=3,this.core.sendCmd("qchatUpdateChannelCategoryMemberRole",{qchatUpdateChannelCategoryMemberRoleTag:Ac(F)});case 3:if((oe=z.sent).raw.code!==406){z.next=6;break}throw new yo("No update required",{},406);case 6:return z.abrupt("return",Yl(oe.content.channelCategoryMemberRole));case 7:case"end":return z.stop()}},O,this)}))},x.getChannelCategoryMemberRole=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},F),z.next=3,this.core.sendCmd("qchatGetChannelCategoryMemberRole",{qchatGetChannelCategoryMemberRoleTag:F});case 3:return oe=z.sent,z.abrupt("return",(qe=oe.content.list,ns(qe)&&qe.length>0?vo(qe).call(qe,function(jt){return Yl(jt)}):[]));case 5:case"end":return z.stop()}var qe},O,this)}))},S}(),oC=function(S){function x(F){var O;return(O=S.call(this,"qchatRole",F)||this).core=F,Ei({cmdMap:Fy,cmdConfig:rC}),O.category=new nC(F),O}Ro(x,S);var D=x.prototype;return D.createServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1},priority:{type:"number",min:1},icon:{type:"string",required:!1},ext:{type:"string",required:!1}},O),qe.next=3,this.core.sendCmd("qchatCreateServerRole",{serverRole:Tn(Tn({},Ac(O)),{type:Jl.custom}),antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",us(_e.content.serverRole));case 5:case"end":return qe.stop()}},oe,this)}))},D.updateServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},name:{type:"string",required:!1},icon:{type:"string",required:!1},ext:{type:"string",required:!1},priority:{type:"number",required:!1},auths:{type:"object",required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateServerRole",{updateServerRoleTag:Ac(O),antispamTag:Pc(O)});case 3:return _e=qe.sent,qe.abrupt("return",us(_e.content.serverRole));case 5:case"end":return qe.stop()}},oe,this)}))},D.deleteServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatDeleteServerRole",O);case 3:case"end":return z.stop()}},oe,this)}))},D.getServerRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},categoryId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},priority:{type:"number",required:!1}},O),lr.next=3,this.core.sendCmd("qchatGetServerRoles",{getServerRolesTag:Ac(O)});case 3:return z=lr.sent,qe=Js(_e=z.content.serverRoles).call(_e,function(fr){return Lo(fr.isMember)===1}),qe=vo(qe).call(qe,function(fr){return fr.roleId}),lr.abrupt("return",{roles:zs(z.content.serverRoles),isMemberRoles:qe});case 7:case"end":return lr.stop()}},oe,this)}))},D.addChannelRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},O),qe.next=3,this.core.sendCmd("qchatAddChannelRole",{channelRole:Ac(O)});case 3:return _e=qe.sent,qe.abrupt("return",us(_e.content.channelRole));case 5:case"end":return qe.stop()}},oe,this)}))},D.getChannelRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetChannelRoles",{getChannelRolesTag:O});case 3:return _e=qe.sent,qe.abrupt("return",zs(_e.content.channelRoles));case 5:case"end":return qe.stop()}},oe,this)}))},D.removeChannelRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatRemoveChannelRole",O);case 3:case"end":return z.stop()}},oe,this)}))},D.updateChannelRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateChannelRole",{updateChannelRoleTag:Ac(O)});case 3:if((_e=qe.sent).raw.code!==406){qe.next=6;break}throw new yo("No update required",{},406);case 6:return qe.abrupt("return",us(_e.content.channelRole));case 7:case"end":return qe.stop()}},oe,this)}))},D.addMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},O),qe.next=3,this.core.sendCmd("qchatAddMemberRole",{memberRole:O});case 3:return _e=qe.sent,qe.abrupt("return",us(_e.content.memberRole));case 5:case"end":return qe.stop()}},oe,this)}))},D.getMemberRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetMemberRoles",{getMemberRolesTag:O});case 3:return _e=qe.sent,qe.abrupt("return",zs(_e.content.memberRoles));case 5:case"end":return qe.stop()}},oe,this)}))},D.removeMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatRemoveMemberRole",{memberRole:O});case 3:case"end":return z.stop()}},oe,this)}))},D.updateMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},O),qe.next=3,this.core.sendCmd("qchatUpdateMemberRole",{updateMemberRoleTag:Ac(O)});case 3:if((_e=qe.sent).raw.code!==406){qe.next=6;break}throw new yo("No update required",{},406);case 6:return qe.abrupt("return",us(_e.content.memberRole));case 7:case"end":return qe.stop()}},oe,this)}))},D.addMembersToServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},O),lr.next=3,this.core.sendCmd("qchatAddMembersToServerRole",Tn(Tn({},O),{accids:mo(O.accids)}));case 3:return _e=lr.sent,z=Wa(_e,"content.accids.successAccids"),qe=Wa(_e,"content.accids.failedAccids"),lr.abrupt("return",{successAccids:z?JSON.parse(z):[],failedAccids:qe?JSON.parse(qe):[]});case 7:case"end":return lr.stop()}},oe,this)}))},D.removeMembersFromServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},O),lr.next=3,this.core.sendCmd("qchatRemoveMembersFromServerRole",Tn(Tn({},O),{accids:mo(O.accids)}));case 3:return _e=lr.sent,z=Wa(_e,"content.accids.successAccids"),qe=Wa(_e,"content.accids.failedAccids"),lr.abrupt("return",{successAccids:z?JSON.parse(z):[],failedAccids:qe?JSON.parse(qe):[]});case 7:case"end":return lr.stop()}},oe,this)}))},D.getMembersFromServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},accid:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetMembersFromServerRole",{getMembersFromServerRoleTag:O});case 3:return _e=qe.sent,qe.abrupt("return",zs(_e.content.members));case 5:case"end":return qe.stop()}},oe,this)}))},D.getServerRolesByAccid=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},O),qe.next=3,this.core.sendCmd("qchatGetServerRolesByAccid",{getServerRolesByAccidTag:O});case 3:return _e=qe.sent,qe.abrupt("return",zs(_e.content.serverRoles));case 5:case"end":return qe.stop()}},oe,this)}))},D.getExistingServerRolesByAccids=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},O),lr.next=3,this.core.sendCmd("qchatGetExistingServerRolesByAccids",{serverId:O.serverId,accids:mo(O.accids)});case 3:return _e=lr.sent,lr.prev=4,qe=JSON.parse(_e.content.serverRoles),In(z=na(qe)).call(z,function(fr){var Sr;In(Sr=qe[fr]).call(Sr,function(br,Er){qe[fr][Er]=Oa(br,la.serverRole)}),qe[fr]=zs(qe[fr])}),lr.abrupt("return",qe);case 10:throw lr.prev=10,lr.t0=lr.catch(4),this.logger.error("can not parse serverRolesGroupByAccid from "+O.serverId+" and "+O.accids,_e.content.serverRoles),lr.t0;case 14:case"end":return lr.stop()}},oe,this,[[4,10]])}))},D.getExistingChannelRolesByServerRoleIds=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleIds:{type:"array",itemType:"string"}},O),qe.next=3,this.core.sendCmd("qchatGetExistingChannelRolesByServerRoleIds",{serverId:O.serverId,channelId:O.channelId,roleIds:mo(O.roleIds)});case 3:return _e=qe.sent,qe.abrupt("return",zs(_e.content.channelRoles));case 5:case"end":return qe.stop()}},oe,this)}))},D.getExistingAccidsOfMemberRoles=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},O),jt.next=3,this.core.sendCmd("qchatGetExistingAccidsOfMemberRoles",{serverId:O.serverId,channelId:O.channelId,accids:mo(O.accids)});case 3:return _e=jt.sent,z=_e.content.memberRoles,jt.abrupt("return",z&&z.length>0?vo(z).call(z,function(lr){return lr.accid}):[]);case 6:case"end":return jt.stop()}},oe,this)}))},D.getExistingAccidsInServerRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},O),jt.next=3,this.core.sendCmd("qchatGetExistingAccidsInServerRole",{serverId:O.serverId,roleId:O.roleId,accids:mo(O.accids)});case 3:return _e=jt.sent,z=_e.content.members,jt.abrupt("return",z&&z.length>0?vo(z).call(z,function(lr){return lr.accid}):[]);case 6:case"end":return jt.stop()}},oe,this)}))},D.updateServerRolePriorities=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},serverRoles:{type:"array"}},O),jt.next=3,this.core.sendCmd("qchatUpdateServerRolePriorities",{serverId:O.serverId,serverRoles:vo(_e=O.serverRoles).call(_e,function(lr){return{serverId:lr.serverId,roleId:lr.roleId,priority:lr.priority}})});case 3:return z=jt.sent,jt.abrupt("return",zs(z.content.serverRoles));case 5:case"end":return jt.stop()}},oe,this)}))},D.checkPermission=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auth:{type:"string"}},O),qe.next=3,this.core.sendCmd("qchatCheckPermission",{checkPermissionTag:Tn(Tn({},O),{auth:bl[O.auth]||O.auth})});case 3:return _e=qe.sent,qe.abrupt("return",_e.content.checked);case 5:case"end":return qe.stop()}},oe,this)}))},D.addChannelCategoryRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.addChannelCategoryRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.removeChannelCategoryRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.removeChannelCategoryRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.updateChannelCategoryRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.updateChannelCategoryRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.getChannelCategoryRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.getChannelCategoryRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.addChannelCategoryMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.addChannelCategoryMemberRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.removeChannelCategoryMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.removeChannelCategoryMemberRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.updateChannelCategoryMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.updateChannelCategoryMemberRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.getChannelCategoryMemberRole=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.category.getChannelCategoryMemberRole(O);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},oe,this)}))},D.checkPermissions=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auths:{type:"array",itemType:"string"}},O),this.core.logger.log("qchatRole::checkPermission options is",O),fr.next=4,this.core.sendCmd("qchatCheckPermissions",{checkPermissionsTag:Tn(Tn({},O),{auths:mo(vo(_e=O.auths).call(_e,function(Sr){return bl[Sr]||Sr}))})});case 4:return qe=fr.sent,this.core.logger.log("qchatRole::checkPermission result is",qe.content),jt={},In(z=qe.content.checkPermissionsResult).call(z,function(Sr){jt[Sr.auth]=Sr.isAllow}),this.core.logger.log("qchatRole::checkPermission auths is",jt),fr.abrupt("return",Ti(jt));case 10:case"end":return fr.stop()}},oe,this)}))},x}(gl),Yp=function(x,D){return cy(x,D,function(F,O){return sy(x,O)})},aC=function(x){return x!=null&&x.length?Py(x,1):[]},pc,Os,Xp=function(x){return Ev(xv(x,void 0,aC),x+"")}(function(S,x){return S==null?{}:Yp(S,x)}),Nh={"24_10":"qchatSendMsg","24_11":"qchatOnMsg","24_12":"qchatOnRecvUnreadInfo","24_13":"qchatSendCustomSysMsg","24_14":"qchatOnSysMsg","24_16":"qchatGetHistoryMsg","24_17":"qchatMarkMessageRead","24_18":"qchatMultiSyncMessageRead","24_22":"qchatUpdateSystemNotification","24_23":"qchatMultiSyncSystemNotificationUpdate","24_24":"qchatSyncSystemNotification","24_25":"qchatUpdateMessage","24_26":"qchatRecvMessageUpdate","24_28":"qchatMarkSysMsgRead","24_94":"qchatMessageSearchByPage","24_100":"qchatGetMessageHistoryByIds","24_101":"qchatGetThreadMessages","24_102":"qchatUpdateQuickComment","24_103":"qchatGetQuickComments","24_108":"qchatGetThreadRootMessagesMeta","24_121":"qchatGetLastMessageOfChannels","24_127":"qchatGetMentionedMeMessages","25_6":"qchatMultiSyncServersMessageRead"},ds={getHistoryMsgTag:{serverId:1,channelId:2,beginTime:3,endTime:4,excludeMsgId:5,limit:6,reverse:7},getThreadHistoryMsgTag:{beginTime:1,endTime:2,excludeMsgId:3,limit:4,reverse:5},qchatMsgTag:{serverId:1,channelId:2,fromAccount:3,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,updateTime:8,type:9,body:10,attach:11,ext:12,msgIdClient:13,msgIdServer:14,resendFlag:15,status:16,pushPayload:17,pushContent:18,mentionAccids:19,mentionAll:20,env:21,callbackExt:22,replyMsgFromAccount:23,replyMsgTime:24,replyMsgIdServer:25,replyMsgIdClient:26,threadMsgFromAccount:27,threadMsgTime:28,threadMsgIdServer:29,threadMsgIdClient:30,useCustomContent:31,antiSpamContent:32,antiSpamBusinessId:33,antiSpamUsingYidun:34,yidunCallback:35,yidunAntiCheating:36,yidunAntiSpamExt:37,yidunAntiSpamRes:38,mentionRoleIds:41,accidsOfMentionedRoles:42,updateContent:39,updateOperatorInfo:40,subType:61,historyEnable:100,pushEnable:101,needBadge:102,needPushNick:103,notifyReason:104,routeEnable:105,isAntispam:106},sysMsg:{toType:1,serverId:2,channelId:3,toAccids:4,fromAccount:5,fromClientType:6,fromDeviceId:7,fromNick:8,time:9,updateTime:10,type:11,msgIdClient:12,msgIdServer:13,body:14,attach:15,ext:16,resendFlag:17,status:18,pushPayload:19,pushContent:20,env:21,callbackExt:22,persistEnable:100,pushEnable:101,needBadge:102,needPushNick:103,routeEnable:104},qchatMsgUpdateTag:{operatorAccount:1,operatorClientType:2,ps:3,ext:4,pushContent:5,pushPayload:6,env:7,routeEnable:100},markMsgReadTag:{serverId:1,channelId:2,time:3},qchatQuickCommentRequestTag:{serverId:1,channelId:2,fromAccount:3,msgIdServer:4,time:5,type:6,opeType:7,opeAccid:8},qchatQuickCommentQueryTag:{serverId:1,channelId:2,msgIdServerList:3},qchatGetLastMessageOfChannelsTag:{serverId:1,channelIdList:2},qchatMultiSyncServersMessageReadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},qchatMessageSearchByPageTag:{keyword:1,serverId:2,channelId:3,fromAccid:4,fromTime:5,toTime:6,msgTypes:7,subTypes:8,includeSelf:9,order:10,limit:11,sort:12,cursor:13},qchatPageQueryTag:{hasMore:1,nextTimetag:2,cursor:3},unreadInfo:Th},fa=Cc(ds),sC={qchatSendMsg:{service:"qchatMsg",sid:24,cid:10,params:[{type:"Property",name:"qchatMsg",reflectMapper:ds.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatOnMsg:{service:"qchatMsg",sid:24,cid:11,response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatOnRecvUnreadInfo:{service:"qchatMsg",sid:24,cid:12,response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatSendCustomSysMsg:{service:"qchatMsg",sid:24,cid:13,params:[{type:"Property",name:"sysMsg",reflectMapper:ds.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatOnSysMsg:{service:"qchatMsg",sid:24,cid:14,response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatGetHistoryMsg:{service:"qchatMsg",sid:24,cid:16,params:[{type:"Property",name:"getHistoryMsgTag",reflectMapper:ds.getHistoryMsgTag}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatUpdateMessage:{service:"qchatMsg",sid:24,cid:25,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:ds.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:ds.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatRecvMessageUpdate:{service:"qchatMsg",sid:24,cid:26,response:[{type:"Property",name:"qchatMsgUpdateInfo",reflectMapper:fa.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:fa.qchatMsgTag}]},qchatMarkMessageRead:{sid:24,cid:17,service:"qchatMsg",params:[{type:"Property",name:"markMsgReadTag",reflectMapper:ds.markMsgReadTag}],response:[{type:"Property",name:"unreadInfo",reflectMapper:fa.unreadInfo}]},qchatMultiSyncMessageRead:{sid:24,cid:18,service:"qchatMsg",response:[{type:"Property",name:"unreadInfo",reflectMapper:fa.unreadInfo}]},qchatUpdateSystemNotification:{service:"qchatMsg",sid:24,cid:22,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:ds.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:ds.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatMultiSyncSystemNotificationUpdate:{service:"qchatMsg",sid:24,cid:23,response:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:fa.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:fa.sysMsg}]},qchatSyncSystemNotification:{service:"qchatMsg",sid:24,cid:24,response:[{type:"PropertyArray",name:"systemNotifications",reflectMapper:fa.sysMsg}]},qchatMarkSysMsgRead:{service:"qchatMsg",sid:24,cid:28,params:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:ds.sysMsg}]},qchatMessageSearchByPage:{service:"qchatMsg",sid:24,cid:94,params:[{type:"Property",name:"qchatMessageSearchByPageTag",reflectMapper:ds.qchatMessageSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:fa.qchatMsgTag}]},qchatGetMessageHistoryByIds:{service:"qchatMsg",sid:24,cid:100,params:[{type:"Property",name:"channelInfo",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"messageReferList",reflectMapper:{msgIdServer:1,time:2}}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatGetThreadMessages:{service:"qchatMsg",sid:24,cid:101,params:[{type:"Property",name:"qchatMsg",reflectMapper:ds.qchatMsgTag},{type:"Property",name:"getThreadHistoryMsgTag",reflectMapper:ds.getThreadHistoryMsgTag}],response:[{type:"Property",name:"thread",reflectMapper:fa.qchatMsgTag},{type:"Property",name:"threadInfo",reflectMapper:{1:"messageCount",2:"lastMessageTimestamp"}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:fa.qchatMsgTag}]},qchatUpdateQuickComment:{service:"qchatMsg",sid:24,cid:102,params:[{type:"Property",name:"tag",reflectMapper:ds.qchatQuickCommentRequestTag}]},qchatGetQuickComments:{service:"qchatMsg",sid:24,cid:103,params:[{type:"Property",name:"tag",reflectMapper:ds.qchatQuickCommentQueryTag}],response:[{type:"PropertyArray",name:"quickCommentResponse",reflectMapper:{1:"serverId",2:"channelId",3:"msgIdServer",4:"totalCount",5:"lastUpdateTime",6:"details"}}]},qchatGetThreadRootMessagesMeta:{service:"qchatMsg",sid:24,cid:108,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:{time:7,msgIdServer:14}}],response:[{type:"PropertyArray",name:"metas",reflectMapper:{1:"total",2:"timestamp",3:"msgIdServer",4:"msgTime"}}]},qchatGetLastMessageOfChannels:{service:"qchatMsg",sid:24,cid:121,params:[{type:"Property",name:"tag",reflectMapper:ds.qchatGetLastMessageOfChannelsTag}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:fa.qchatMsgTag}]},qchatMultiSyncServersMessageRead:{service:"qchatMsg",sid:25,cid:6,response:[{type:"Property",name:"qchatMultiSyncServersMessageReadTag",reflectMapper:fa.qchatMultiSyncServersMessageReadTag}]},qchatGetMentionedMeMessages:{service:"qchatMsg",sid:24,cid:127,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2,timestamp:3,limit:4}}],response:[{type:"Property",name:"page",reflectMapper:fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:fa.qchatMsgTag}]}};(function(S){S[S.Android=1]="Android",S[S.iOS=2]="iOS",S[S.PC=4]="PC",S[S.WindowsPhone=8]="WindowsPhone",S[S.Web=16]="Web",S[S.Server=32]="Server",S[S.Mac=64]="Mac"})(pc||(pc={}));var Ly=["image","audio","video","file"],Zp={time:{type:"number"},updateTime:{type:"number"},resendFlag:{type:"boolean"},persistEnable:{type:"boolean"},routeEnable:{type:"boolean"},pushEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},type:{type:"enum",values:Xo},fromClientType:{type:"enum",values:pc},status:{type:"number"},toAccids:{type:"object"},toType:{type:"number"},attach:{type:"object"},pushPayload:{type:"object"}};function Rh(S,x){var D=Tn({},S),F=Tn({type:x||Xo.custom},Gl(Zp,D));return F.serverId&&F.channelId&&F.toAccids?F.toType=Oc.channelAccids:F.serverId&&F.toAccids?F.toType=Oc.serverAccids:F.serverId&&F.channelId?F.toType=Oc.channel:F.serverId?F.toType=Oc.server:F.toAccids?F.toType=Oc.accids:F.toType=Oc.unknown,F}function $y(S){var x=Xp(S,["msgIdServer","type"]);return Gl(Zp,x)}var jy=((Os={})[Xo.channelUpdateWhiteBlackIdentify]=function(S){return S.notify=Pd(Oa(S.notify,zo.qchatUpdateWhiteBlackRoleTag)),S},Os[Xo.channelUpdateWhiteBlackIdentifyUser]=function(S){return S.notify=function(D){return ya(Iy,D)}(Oa(S.notify,zo.qchatUpdateWhiteBlackMembersTag)),S},Os[Xo.updateQuickComment]=function(S){return S.notify=function(D){return ya(lC,D)}(Oa(S.notify,fa.qchatQuickCommentRequestTag)),S},Os[Xo.channelCategoryCreate]=function(S){return S.categoryInfo=Rd(Oa(S.categoryInfo,zo.QChatChannelCategoryInfo)),S},Os[Xo.channelCategoryUpdate]=function(S){return S.categoryInfo=Rd(Oa(S.categoryInfo,zo.QChatChannelCategoryInfo)),S},Os[Xo.channelCategoryUpdateWhiteBlackIdentify]=function(S){return S.notify=Pd(Oa(S.notify,zo.qchatUpdateChannelCategoryWhiteBlackRoleTag)),S},Os[Xo.channelCategoryUpdateWhiteBlackIdentifyUser]=function(S){return S.notify=Pd(Oa(S.notify,zo.qchatUpdateChannelCategoryWhiteBlackMembersTag)),S},Os[Xo.serverIdentifyAdd]=function(S){return S.serverIdentifyInfo=us(Oa(S.serverIdentifyInfo,la.serverRole)),S},Os[Xo.serverIdentifyRemove]=function(S){return S.serverIdentifyInfo=us(Oa(S.serverIdentifyInfo,la.serverRole)),S},Os[Xo.serverIdentifyUpdate]=function(S){return S.serverIdentifyInfo=us(Oa(S.serverIdentifyInfo,la.serverRole)),S},Os[Xo.channelIdentifyUpdate]=function(S){return S.channelIdentifyInfo=us(Oa(S.channelIdentifyInfo,la.channelRole)),S},Os[Xo.userIdentifyUpdate]=function(S){return S.userIdentifyInfo=us(Oa(S.userIdentifyInfo,la.memberRole)),S},Os[Xo.myMemberInfoUpdated]=function(S){var x,D=Wa(S,"userInfo.name"),F=Wa(S,"userInfo.icon");return S.updatedInfos=vo(x=S.reuseServers).call(x,function(O){var oe={serverId:O.serverId};return(1&O.bits)==1&&typeof D=="string"&&Tn(oe,{nickChanged:!0,nick:D}),(2&O.bits)==2&&typeof F=="string"&&Tn(oe,{avatarChanged:!0,avatar:F}),oe}),delete S.userInfo,delete S.reuseServers,S},Os);function Dd(S,x){var D=ya(Zp,S);if(!D.attach)return D;if(D.attach.serverInfo&&(D.attach.serverInfo=xd(Oa(D.attach.serverInfo,La.serverInfo))),D.attach.channelInfo&&(D.attach.channelInfo=Ad(Oa(D.attach.channelInfo,zo.channelInfo))),D.attach.serverMember&&(D.attach.serverMember=Ql(Oa(D.attach.serverMember,La.memberInfo))),jy[D.attach.type]&&(D.attach=jy[D.attach.type](D.attach)),D.attach.updateAuths)try{D.attach.updateAuths=Ti(JSON.parse(D.attach.updateAuths))}catch(F){x.error("formatSystemNotification:JSON parse updateAuths error: ",F)}return D.attach.type&&(D.attach.rawType=D.attach.type,D.attach.type=Xo[D.attach.type]),D}var ef={type:{type:"enum",values:Ld},fromClientType:{type:"enum",values:pc},status:{type:"number"},resendFlag:{type:"boolean"},mentionAll:{type:"boolean"},notifyReason:{type:"enum",values:$d},pushEnable:{type:"boolean"},historyEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},routeEnable:{type:"boolean"},time:{type:"number"},updateTime:{type:"number"},mentionAccids:{type:"object"},mentionRoleIds:{type:"object"},accidsOfMentionedRoles:{type:"object"},attach:{type:"object"},pushPayload:{type:"object"},isAntispam:{type:"boolean"},antiSpamInfo:{useCustomContent:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBusinessId:{type:"string"},antiSpamUsingYidun:{type:"boolean"},yidunCallback:{type:"string"},yidunAntiCheating:{type:"object"},yidunAntiSpamExt:{type:"object"},yidunAntiSpamRes:{type:"string"}},replyRefer:{fromAccount:{type:"string",rawKey:"replyMsgFromAccount"},time:{type:"number",rawKey:"replyMsgTime"},msgIdServer:{type:"string",rawKey:"replyMsgIdServer"},msgIdClient:{type:"string",rawKey:"replyMsgIdClient"}},threadRefer:{fromAccount:{type:"string",rawKey:"threadMsgFromAccount"},time:{type:"number",rawKey:"threadMsgTime"},msgIdServer:{type:"string",rawKey:"threadMsgIdServer"},msgIdClient:{type:"string",rawKey:"threadMsgIdClient"}}};function Bh(S){S.onSendBefore,S.onUploadStart,S.onUploadDone,S.onUploadProgress;var x=xl(S,["onSendBefore","onUploadStart","onUploadDone","onUploadProgress"]),D=Gl(ef,x);if(D.msgIdClient=S.resendFlag?S.msgIdClient:Dg(),!D.msgIdClient)throw new El("msgIdClient is required for resend a message","msgIdClient","required");return S.replyMessage&&S.replyMessage.msgIdServer&&(D.replyMsgFromAccount=S.replyMessage.fromAccount,D.replyMsgTime=+S.replyMessage.time,D.replyMsgIdServer=S.replyMessage.msgIdServer,D.replyMsgIdClient=S.replyMessage.msgIdClient,S.replyMessage.threadRefer&&S.replyMessage.threadRefer.msgIdServer?(D.threadMsgFromAccount=S.replyMessage.threadRefer.fromAccount,D.threadMsgTime=+S.replyMessage.threadRefer.time,D.threadMsgIdServer=S.replyMessage.threadRefer.msgIdServer,D.threadMsgIdClient=S.replyMessage.threadRefer.msgIdClient):(D.threadMsgFromAccount=S.replyMessage.fromAccount,D.threadMsgTime=+S.replyMessage.time,D.threadMsgIdServer=S.replyMessage.msgIdServer,D.threadMsgIdClient=S.replyMessage.msgIdClient),delete D.replyMessage),D}function Dy(S){return ya({operatorClientType:{type:"enum",values:pc},pushPayload:{type:"object"}},S)}function _s(S,x,D){var F,O;return x===void 0&&(x={}),Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return(_e=ya(ef,S)).deliveryStatus=x.deliveryStatus?Si[x.deliveryStatus]:Si[Si.success],x.time&&(_e.time=x.time),_e.updateContent&&(z=ya({status:{type:"number"}},z=Oa(z=JSON.parse(_e.updateContent),fa.qchatMsgTag)),_e.updateContent=z),_e.updateOperatorInfo&&(qe=Dy(Oa(qe=JSON.parse(_e.updateOperatorInfo),fa.qchatMsgUpdateTag)),_e.updateOperatorInfo=qe),((F=_e==null?void 0:_e.threadRefer)===null||F===void 0?void 0:F.fromAccount)===""&&delete _e.threadRefer,((O=_e==null?void 0:_e.replyRefer)===null||O===void 0?void 0:O.fromAccount)===""&&delete _e.replyRefer,_e.attach&&x.attachUrl&&(_e.attach.url=x.attachUrl),lr.next=10,Uy(_e,D);case 10:return lr.abrupt("return",lr.sent);case 11:case"end":return lr.stop()}},oe)}))}function Uy(S,x){return Mr(this,void 0,void 0,sr.mark(function D(){var F;return sr.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(mi(Ly).call(Ly,S.type)&&S.attach&&S.attach.url){oe.next=2;break}return oe.abrupt("return",S);case 2:if(x&&x.cloudStorage&&typeof x.cloudStorage.getPrivateUrl=="function"&&typeof x.cloudStorage.getOriginUrl=="function"){oe.next=4;break}return oe.abrupt("return",S);case 4:if(!(pa(F=S.attach.url).call(F,"_im_url=1")<0)){oe.next=7;break}return S.attach.url=x.cloudStorage.getPrivateUrl(S.attach.url),oe.abrupt("return",S);case 7:return oe.prev=7,oe.next=10,x.cloudStorage.getOriginUrl(S.attach.url);case 10:S.attach.url=oe.sent,oe.next=16;break;case 13:throw oe.prev=13,oe.t0=oe.catch(7),new El('url "'+S.attach.url+'" parse error',"message.attach.url","parse error");case 16:return oe.abrupt("return",S);case 17:case"end":return oe.stop()}},D,null,[[7,13]])}))}function Fh(S,x,D){return x===void 0&&(x={}),Mr(this,void 0,void 0,sr.mark(function F(){var O;return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(ns(S)&&S.length>0){_e.next=2;break}return _e.abrupt("return",[]);case 2:return O=vo(S).call(S,function(z){return _s(z,x,D)}),_e.next=5,co.all(O);case 5:return _e.abrupt("return",_e.sent);case 6:case"end":return _e.stop()}},F)}))}var iC={totalCount:{type:"number"},lastUpdateTime:{type:"number"},details:{type:"object"}};function cC(S){var x=vo(S).call(S,function(F){var O,oe=ya(iC,F);return oe.details=vo(O=oe.details).call(O,function(_e){return{count:_e.count,hasSelf:_e.self,severalAccids:_e.topN,type:_e.type}}),oe}),D={};return In(x).call(x,function(F){return D[F.msgIdServer]=F}),D}var lC={type:{type:"number"},time:{type:"number"},opeType:{type:"number"}},qy={includeSelf:{type:"number"},order:{type:"enum",values:Ic},sort:{type:"enum",values:Qp},msgTypes:{type:"object"},subTypes:{type:"object"}},uC={hasMore:{type:"boolean"},nextTimetag:{type:"number"},cursor:{type:"string"}},dC={6:function(x){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInServerId(x.serverId),!0},16:function(x){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInChannel(x.serverId,x.channelId),!0},26:function(x){var D=Wa(x,"attach.addAccids");return D&&mi(D).call(D,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",x),!0},27:function(x){var D=Wa(x,"attach.deleteAccids");return D&&mi(D).call(D,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",x),!0},31:function(x){return x.attach.event===2&&(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",x),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",x)),!0},32:function(x){return x.attach.event===2?(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",x),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",x)):x.attach.event===1&&this.core.qchatChannel.subscribeForVisitorService.deleteServer(x.serverId),!0},34:function(x){return x.attach.event===2&&this.core.qchatChannel.subscribeForVisitorService.unSubscribeChannel(x.serverId,x.channelId),!0},101:function(x){var D=Xp(x,["serverId","channelId","ext","fromAccount","fromNick","time"]);return this.logger.log("qchat on recvTypingEvent: ",D),this.core.emit("recvTypingEvent",D),!1}},pC=function(){function S(D){this.core=D,this.logger=D.logger}var x=S.prototype;return x.sendSystemNotification=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Rh(F)});case 2:return oe=qe.sent,_e=Dd(oe.content.sysMsg,this.logger),this.core.options.debugLevel==="debug"?this.logger.debug("sendCustomSysMsg success",_e):this.logger.log("sendCustomSysMsg success",_e.serverId,_e.channelId,_e.msgIdServer),qe.abrupt("return",_e);case 6:case"end":return qe.stop()}},O,this)}))},x.updateSystemNotification=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return oe=F.systemNotification,_e=xl(F,["systemNotification"]),z=Xp(oe,["msgIdServer","type","body","ext","status"]),qe=Rh(z),fr.next=5,this.core.sendCmd("qchatUpdateSystemNotification",{sysMsg:qe,qchatMsgUpdateTag:Tn(Tn({},_e),{operatorAccount:this.core.account,operatorClientType:pc.Web,pushPayload:mo(F.pushPayload),routeEnable:Ch.boolean(F,"routeEnable")})});case 5:return jt=fr.sent,fr.abrupt("return",Dd(jt.content.sysMsg,this.logger));case 7:case"end":return fr.stop()}},O,this)}))},x.markSystemNotificationsRead=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("qchatMarkSysMsgRead",{sysMsgs:vo(oe=F.systemNotifications).call(oe,function(qe){return $y(qe)})});case 2:case"end":return z.stop()}},O,this)}))},x.onSysMsg=function(F){var O=F.content.sysMsg;if(O){var oe=Dd(O,this.core.logger),_e=dC[Xo[oe.type]];if(_e&&_e.call(this,oe)===!1)return;var z={feature:"default",systemNotifications:[oe]};this.logger.log("qchat on systemNotification: ",z),this.core.emit("systemNotification",z)}else this.core.logger.warn("No sysMsg in onSysMsg packet")},x.onMultiSysMsg=function(F){var O=F.content.sysMsg;if(O){var oe=Dd(O,this.logger);this.core.emit("systemNotificationUpdate",oe)}},x.onSyncSysMsg=function(F){var O=this,oe=F.content.systemNotifications;if(oe&&oe.length>0){var _e=vo(oe).call(oe,function(z){return Dd(z,O.logger)});this.core.emit("systemNotification",{feature:"sync",systemNotifications:_e})}else this.logger.warn("sync system notification not exist")},S}(),Lh=["image","audio","video","file"],fC=function(){function S(D){var F=this;this.markMessageRead=Ah(function(O){return Mr(F,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("qchatMarkMessageRead",{markMsgReadTag:O});case 2:_e=jt.sent,z=kh(_e.content.unreadInfo),this.core.eventBus.emit("qchatChannel/updateUnreads",[z]);case 5:case"end":return jt.stop()}},oe,this)}))},200),this.core=D,this.logger=D.logger}var x=S.prototype;return x.sendMessage=function(F){var O,oe,_e,z;return Mr(this,void 0,void 0,sr.mark(function qe(){var jt,lr,fr,Sr,br,Er;return sr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(!(pa(Lh).call(Lh,F.type)>-1)){$r.next=4;break}return $r.next=3,this.doSendFile(F);case 3:F.attach=$r.sent;case 4:return jt=Bh(Tn({fromAccount:this.core.account},F)),$r.next=7,_s(jt,{time:new Date().getTime(),deliveryStatus:Si.sending},this.core);case 7:lr=$r.sent;try{F.onSendBefore&&F.onSendBefore(lr)}catch(vn){this.logger.error("sendMsg: options.onSendBefore error",vn)}return $r.prev=9,$r.next=12,this.core.sendCmd("qchatSendMsg",{qchatMsg:jt});case 12:fr=$r.sent,$r.next=22;break;case 15:return $r.prev=15,$r.t0=$r.catch(9),$r.next=19,_s(jt,{time:new Date().getTime(),deliveryStatus:Si.failed,attachUrl:(O=lr.attach)===null||O===void 0?void 0:O.url},this.core);case 19:throw Sr=$r.sent,$r.t0.msg=Sr,$r.t0;case 22:return br=fr.content,$r.next=25,_s(Tn({},br.qchatMsg),{deliveryStatus:Si.success,attachUrl:(oe=lr.attach)===null||oe===void 0?void 0:oe.url},this.core);case 25:if(!(Er=$r.sent).isAntispam){$r.next=29;break}throw{code:10403,msg:Er,message:((_e=Er==null?void 0:Er.antiSpamInfo)===null||_e===void 0?void 0:_e.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((z=Er==null?void 0:Er.antiSpamInfo)===null||z===void 0?void 0:z.yidunAntiSpamRes)||""};case 29:return $r.abrupt("return",Er);case 30:case"end":return $r.stop()}},qe,this,[[9,15]])}))},x.doSendFile=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe;return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Gr({type:{type:"enum",values:["image","audio","video","file"]},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},F),oe=F.attach){z.next=23;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){z.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return z.prev=5,z.next=8,this.core.cloudStorage.uploadFile(F);case 8:oe=z.sent,z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(5),this.logger.error("sendFile:: upload File error or abort",z.t0),z.t0;case 15:z.prev=15,F.onUploadDone&&F.onUploadDone(oe),z.next=23;break;case 19:throw z.prev=19,z.t1=z.catch(15),this.logger.error("sendFile options.onUploadDone err",z.t1),z.t1;case 23:return z.abrupt("return",oe);case 24:case"end":return z.stop()}},O,this,[[5,11],[15,19]])}))},x.resendMessage=function(F){var O,oe;return Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe,jt,lr,fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return(z=Bh(Tn(Tn({},F),{resendFlag:!0}))).deliveryStatus=Si.sending,br.prev=2,br.next=5,this.core.sendCmd("qchatSendMsg",{qchatMsg:z});case 5:qe=br.sent,br.next=15;break;case 8:return br.prev=8,br.t0=br.catch(2),br.next=12,_s(z,{time:new Date().getTime(),deliveryStatus:Si.failed},this.core);case 12:throw jt=br.sent,br.t0.msg=jt,br.t0;case 15:return lr=qe.content,br.next=18,_s(Tn({},lr.qchatMsg),{deliveryStatus:Si.success},this.core);case 18:if(!(fr=br.sent).isAntispam){br.next=22;break}throw{code:10403,msg:fr,message:((O=fr==null?void 0:fr.antiSpamInfo)===null||O===void 0?void 0:O.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((oe=fr==null?void 0:fr.antiSpamInfo)===null||oe===void 0?void 0:oe.yidunAntiSpamRes)||""};case 22:return br.abrupt("return",fr);case 23:case"end":return br.stop()}},_e,this,[[2,8]])}))},x.doUpdateMessage=function(F){var O,oe;return Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe,jt,lr,fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return z=F.message,qe=xl(F,["message"]),(jt=Bh(z)).msgIdClient=void 0,jt.time=z.time,br.next=6,this.core.sendCmd("qchatUpdateMessage",{qchatMsg:jt,qchatMsgUpdateTag:Tn(Tn({},qe),{operatorAccount:this.core.account,operatorClientType:pc.Web,pushPayload:mo(F.pushPayload),routeEnable:Ch.boolean(F,"routeEnable")})});case 6:return lr=br.sent,br.next=9,_s(lr.content.qchatMsg,{},this.core);case 9:if(fr=br.sent,this.core.eventBus.emit("qchatChannel/changeUnread",fr,!0),!lr.content.qchatMsg.isAntispam){br.next=14;break}throw{code:10403,msg:jt,message:((O=lr.content.qchatMsg)===null||O===void 0?void 0:O.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((oe=lr.content.qchatMsg)===null||oe===void 0?void 0:oe.yidunAntiSpamRes)||""};case 14:return br.abrupt("return",fr);case 15:case"end":return br.stop()}},_e,this)}))},x.getHistoryMessage=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe=this;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.next=2,this.core.sendCmd("qchatGetHistoryMsg",{getHistoryMsgTag:Tn(Tn({},F),{reverse:kl(F)?1:0})});case 2:return _e=lr.sent,z=_e.content,lr.next=6,co.all(vo(oe=z.qchatMsgs).call(oe,function(fr){return _s(fr,{},qe.core)}));case 6:return lr.abrupt("return",lr.sent);case 7:case"end":return lr.stop()}},O,this)}))},x.getMentionedMeMessages=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt,lr=this;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return Sr.next=2,this.core.sendCmd("qchatGetMentionedMeMessages",{tag:F});case 2:return _e=Sr.sent,z=_e.content,br=z.page,qe=ya(uC,br),Sr.next=7,co.all(vo(oe=z.datas).call(oe,function(Er){return _s(Er,{},lr.core)}));case 7:return jt=Sr.sent,Sr.abrupt("return",{pageInfo:qe,messages:jt});case 9:case"end":return Sr.stop()}var br},O,this)}))},x.areMentionedMeMessages=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:oe={},_e=0;case 2:if(!(_e<F.length)){jt.next=13;break}if((z=F[_e]).fromAccount!==this.core.account){jt.next=7;break}return oe[z.msgIdClient]=!1,jt.abrupt("continue",10);case 7:return jt.next=9,this.core.qchatChannel.subscribeModuleService.getMentionedFlag(z,!0);case 9:oe[z.msgIdClient]=jt.sent;case 10:_e++,jt.next=2;break;case 13:return jt.abrupt("return",oe);case 14:case"end":return jt.stop()}},O,this)}))},x.getLastMessageOfChannels=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("qchatGetLastMessageOfChannels",{tag:F});case 2:return oe=jt.sent,_e=oe.content.msgs,jt.next=6,Fh(_e,{},this.core);case 6:return z=jt.sent,jt.abrupt("return",Sc(z).call(z,function(lr,fr){return lr[fr.channelId]=fr,lr},{}));case 8:case"end":return jt.stop()}},O,this)}))},x.messageSearchByPage=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("qchatMessageSearchByPage",{qchatMessageSearchByPageTag:Tn(Tn({},(Sr=F,Gl(qy,Sr))),{includeSelf:F.includeSelf?1:""})});case 2:return oe=fr.sent,_e=oe.content,z=_e.datas,qe=_e.listQueryTag,fr.next=6,Fh(z,{},this.core);case 6:return jt=fr.sent,fr.abrupt("return",{listQueryTag:{hasMore:+qe.hasMore==1,nextTimetag:qe.nextTimetag?Lo(qe.nextTimetag):0,cursor:qe.cursor},datas:jt});case 8:case"end":return fr.stop()}var Sr},O,this)}))},x.onMsg=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(oe=F.content.qchatMsg){qe.next=4;break}return this.logger.warn("No qchatMsg in qchatMsg packet"),qe.abrupt("return");case 4:return qe.next=6,_s(oe,{},this.core);case 6:_e=qe.sent,this.core.eventBus.emit("qchatChannel/changeUnread",_e,!1),this.core.emit("message",_e);case 9:case"end":return qe.stop()}},O,this)}))},x.onRecvUnreadInfo=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(oe=F.content.qchatMsg){qe.next=3;break}return qe.abrupt("return");case 3:return qe.next=5,_s(oe);case 5:_e=qe.sent,this.core.eventBus.emit("qchatChannel/changeUnread",_e,!1);case 7:case"end":return qe.stop()}},O,this)}))},x.onMultiSyncRead=function(F){var O=F.content.unreadInfo;if(O){var oe=kh(O);this.core.eventBus.emit("qchatChannel/updateUnreads",[oe])}},x.onMultiSyncServersRead=function(F){var O=F.content.qchatMultiSyncServersMessageReadTag;if(O){var oe=vl(O),_e=oe.successServerIds,z=oe.ackTimestamp;this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",_e,z)}},x.onRecvMsgUpdate=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(oe=F.content.qchatMsg,_e=F.content.qchatMsgUpdateInfo,oe){lr.next=4;break}return lr.abrupt("return");case 4:return lr.next=6,_s(oe,{},this.core);case 6:z=lr.sent,qe=Dy(_e),this.core.eventBus.emit("qchatChannel/changeUnread",z,!0),this.core.emit("messageUpdate",z,qe);case 10:case"end":return lr.stop()}},O,this)}))},S}(),mC=function(){function S(D){var F=this;this._sendTypingEvent=Ah(function(O){return Mr(F,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Rh(Tn(Tn({},O),{resendFlag:!1,persistEnable:!1,routeEnable:!1,pushEnable:!1,needBadge:!1,needPushNick:!1}),Xo.msgTyping)});case 2:case"end":return z.stop()}},oe,this)}))},3e3),this.core=D,this.logger=D.logger,this.lastChannelIdInTyping=""}var x=S.prototype;return x.getMessageHistoryByIds=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.sendCmd("qchatGetMessageHistoryByIds",{channelInfo:{serverId:F.serverId,channelId:F.channelId},messageReferList:F.messageReferList});case 2:return _e=qe.sent,qe.abrupt("return",co.all(vo(oe=_e.content.qchatMsgs).call(oe,function(jt){return _s(jt)})));case 4:case"end":return qe.stop()}},O,this)}))},x.getReferMessages=function(F){var O,oe;return Mr(this,void 0,void 0,sr.mark(function _e(){var z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(!((O=F.message.replyRefer)===null||O===void 0)&&O.msgIdServer&&(!((oe=F.message.threadRefer)===null||oe===void 0)&&oe.msgIdServer)){jt.next=2;break}throw new Error("Message has no reply");case 2:return jt.next=4,this.getMessageHistoryByIds({serverId:F.message.serverId,channelId:F.message.channelId,messageReferList:[F.message.replyRefer,F.message.threadRefer]});case 4:if(z=jt.sent,F.referType!==uc[uc.all]){jt.next=9;break}return jt.abrupt("return",{replyMessage:z[0],threadMessage:z[1]});case 9:if(F.referType!==uc[uc.reply]){jt.next=13;break}return jt.abrupt("return",{replyMessage:z[0]});case 13:if(F.referType!==uc[uc.thread]){jt.next=15;break}return jt.abrupt("return",{threadMessage:z[1]});case 15:return jt.abrupt("return",{replyMessage:z[0],threadMessage:z[1]});case 16:case"end":return jt.stop()}},_e,this)}))},x.getThreadMessages=function(F){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return z=!((O=F.message.threadRefer)===null||O===void 0)&&O.msgIdServer?Tn({serverId:F.message.serverId,channelId:F.message.channelId},F.message.threadRefer):F.message,Sr.next=3,this.core.sendCmd("qchatGetThreadMessages",{qchatMsg:z,getThreadHistoryMsgTag:Tn(Tn({},F.messageQueryOption),{reverse:Ch.boolean(F.messageQueryOption,"reverse")})});case 3:return qe=Sr.sent,Sr.next=6,_s(qe.content.thread);case 6:return jt=Sr.sent,Sr.next=9,co.all(vo(_e=qe.content.qchatMsgs).call(_e,function(br){return _s(br)}));case 9:return lr=Sr.sent,Sr.abrupt("return",{thread:jt,threadInfo:{messageCount:+qe.content.threadInfo.messageCount,lastMessageTimestamp:+qe.content.threadInfo.lastMessageTimestamp},messages:lr});case 11:case"end":return Sr.stop()}},oe,this)}))},x.getThreadRootMessagesMeta=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return oe=F.threadRootMessages,_e=xl(F,["threadRootMessages"]),lr.next=3,this.core.sendCmd("qchatGetThreadRootMessagesMeta",{qchatMsgs:oe,tag:_e});case 3:if(z=lr.sent,!((qe=z.content.metas)&&qe.length>0)){lr.next=7;break}return lr.abrupt("return",vo(qe).call(qe,function(fr){return Tn(Tn({},fr),{total:Lo(fr.total),timestamp:Lo(fr.timestamp),msgTime:Lo(fr.msgTime)})}));case 7:return lr.abrupt("return",[]);case 8:case"end":return lr.stop()}},O,this)}))},x.getQuickComments=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){var oe,_e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("qchatGetQuickComments",{tag:{serverId:F.serverId,channelId:F.channelId,msgIdServerList:mo(vo(oe=F.msgList).call(oe,function(lr){return lr.msgIdServer}))}});case 2:return _e=jt.sent,z=_e.content.quickCommentResponse,jt.abrupt("return",cC(z));case 5:case"end":return jt.stop()}},O,this)}))},x.updateQuickComment=function(F,O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr,fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Gr({type:{type:"number"},commentMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},F),_e=F.commentMessage,z=_e.serverId,qe=_e.channelId,jt=_e.fromAccount,lr=_e.msgIdServer,fr=_e.time,br.next=4,this.core.sendCmd("qchatUpdateQuickComment",{tag:{serverId:z,channelId:qe,fromAccount:jt,msgIdServer:lr,time:fr,type:F.type,opeType:O,opeAccid:this.core.account}});case 4:case"end":return br.stop()}},oe,this)}))},x.sendTypingEvent=function(F){return Mr(this,void 0,void 0,sr.mark(function O(){return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(F.channelId!==this.lastChannelIdInTyping){_e.next=4;break}return this.logger.log("qchatMsg sendTypingEvent throttle"),this._sendTypingEvent(F),_e.abrupt("return");case 4:this.lastChannelIdInTyping=F.channelId,this._sendTypingEvent.flush(),this._sendTypingEvent(F);case 7:case"end":return _e.stop()}},O,this)}))},S}(),Vy=function(S){function x(F){var O;return(O=S.call(this,"qchatMsg",F)||this).core=F,O.lastChannelIdInMark="",Ei({cmdMap:Nh,cmdConfig:sC}),O.notificationModuleService=new pC(F),O.messageModuleService=new fC(F),O.extendModuleService=new mC(F),O}Ro(x,S);var D=x.prototype;return D.sendMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(Ld)},ext:{type:"string",required:!1},mentionAll:{type:"boolean",required:!1},mentionAccids:{type:"array",itemType:"string",required:!1},mentionRoleIds:{type:"array",itemType:"string",required:!1,min:1},historyEnable:{type:"boolean",required:!1},pushEnable:{type:"boolean",required:!1}},O),z.next=3,this.messageModuleService.sendMessage(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.updateMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Gr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0},body:{type:"string",required:!1},ext:{type:"string",required:!1}}}},O),!(typeof O.message.status=="number"&&O.message.status<1e4)){z.next=3;break}throw new yo("Status should be greater than or equal to 10000");case 3:return z.next=5,this.messageModuleService.doUpdateMessage(O);case 5:return z.abrupt("return",z.sent);case 6:case"end":return z.stop()}},oe,this)}))},D.resendMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdClient:{type:"string",allowEmpty:!1}},O),z.next=3,this.messageModuleService.resendMessage(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.deleteMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},O),(_e=JSON.parse(mo(O))).message.status=2,qe.next=5,this.messageModuleService.doUpdateMessage(_e);case 5:return qe.abrupt("return",qe.sent);case 6:case"end":return qe.stop()}},oe,this)}))},D.revokeMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},O),(_e=JSON.parse(mo(O))).message=Xp(_e.message,["serverId","channelId","msgIdServer","time"]),_e.message.status=1,qe.next=6,this.messageModuleService.doUpdateMessage(_e);case 6:return qe.abrupt("return",qe.sent);case 7:case"end":return qe.stop()}},oe,this)}))},D.markMessageRead=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:Gr({serverId:{type:"string"},channelId:{type:"string"},time:{type:"number",min:0}},O),O.channelId!==this.lastChannelIdInMark&&this.messageModuleService.markMessageRead.flush(),this.lastChannelIdInMark=O.channelId,this.messageModuleService.markMessageRead(O);case 4:case"end":return z.stop()}},oe,this)}))},D.replyMessage=function(O){Gr({replyMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},O);var oe=O.replyMessage;if(O.serverId!==oe.serverId||O.channelId!==oe.channelId)throw new yo("Forbid replying to message from other server, channel");return this.sendMessage(O)},D.getMessageHistoryByIds=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},messageReferList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},O),z.next=3,this.extendModuleService.getMessageHistoryByIds(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.getReferMessages=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},referType:{type:"enum",values:ia(uc),required:!1}},O),z.next=3,this.extendModuleService.getReferMessages(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.getThreadMessages=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},messageQueryOption:{type:"object",rules:{beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},excludeMsgId:{type:"string",required:!1},limit:{type:"number",required:!1},reverse:{type:"boolean",required:!1}}}},O),z.next=3,this.extendModuleService.getThreadMessages(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.getThreadRootMessagesMeta=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},threadRootMessages:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},O),z.next=3,this.extendModuleService.getThreadRootMessagesMeta(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.sendSystemNotification=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},attach:{type:"object",required:!1}},O),z.next=3,this.notificationModuleService.sendSystemNotification(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.updateSystemNotification=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({systemNotification:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"enum",values:ia(Xo)},body:{type:"string",required:!1},ext:{type:"string",required:!1},status:{type:"number",required:!1}}}},O),z.next=3,this.notificationModuleService.updateSystemNotification(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.markSystemNotificationsRead=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({systemNotifications:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1}},min:1}},O),z.next=3,this.notificationModuleService.markSystemNotificationsRead(O);case 3:case"end":return z.stop()}},oe,this)}))},D.getHistoryMessage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},beginTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},excludeMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},O),z.next=3,this.messageModuleService.getHistoryMessage(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.getMentionedMeMessages=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},O),z.next=3,this.messageModuleService.getMentionedMeMessages(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.areMentionedMeMessages=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(Gr({messages:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1}},min:1}},O),Al(_e=O.messages).call(_e,function(jt){return O.messages[0].serverId===jt.serverId})){qe.next=4;break}throw new yo("Different serverId",O,10414);case 4:if(!this.core.qchatChannel.subscribeForVisitorService.isInAutoServers(O.messages[0].serverId)){qe.next=7;break}throw new yo("Not allowed for visitor",O,10403);case 7:return qe.next=9,this.messageModuleService.areMentionedMeMessages(O.messages);case 9:return qe.abrupt("return",qe.sent);case 10:case"end":return qe.stop()}},oe,this)}))},D.addQuickComment=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.extendModuleService.updateQuickComment(O,1);case 2:case"end":return z.stop()}},oe,this)}))},D.removeQuickComment=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.extendModuleService.updateQuickComment(O,2);case 2:case"end":return z.stop()}},oe,this)}))},D.getQuickComments=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1}},min:1}},O),z.next=3,this.extendModuleService.getQuickComments(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.sendTypingEvent=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},O),z.next=3,this.extendModuleService.sendTypingEvent(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.getLastMessageOfChannels=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelIdList:{type:"array",itemType:"string"}},O),z.next=3,this.messageModuleService.getLastMessageOfChannels(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.qchatOnMsgHandler=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onMsg(O);case 1:case"end":return z.stop()}},oe,this)}))},D.qchatOnRecvUnreadInfoHandler=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onRecvUnreadInfo(O);case 1:case"end":return z.stop()}},oe,this)}))},D.qchatOnSysMsgHandler=function(O){this.notificationModuleService.onSysMsg(O)},D.qchatMultiSyncMessageReadHandler=function(O){this.messageModuleService.onMultiSyncRead(O)},D.qchatMultiSyncSystemNotificationUpdateHandler=function(O){this.notificationModuleService.onMultiSysMsg(O)},D.qchatSyncSystemNotificationHandler=function(O){this.notificationModuleService.onSyncSysMsg(O)},D.qchatRecvMessageUpdateHandler=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this.messageModuleService.onRecvMsgUpdate(O);case 1:case"end":return z.stop()}},oe,this)}))},D.searchMsgByPage=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({keyword:{type:"string",allowEmpty:!1,required:!1},serverId:{type:"string",allowEmpty:!1,required:!0},channelId:{type:"string",allowEmpty:!1,required:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},fromTime:{type:"number",allowEmpty:!1,required:!1},toTime:{type:"number",allowEmpty:!1,required:!1},msgTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!0},subTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!1},includeSelf:{type:"boolean",allowEmpty:!1,required:!1},order:{type:"enum",values:ia(Ic),required:!1},limit:{type:"number",min:0,required:!1},sort:{type:"enum",values:ia(Qp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},O),z.next=3,this.messageModuleService.messageSearchByPage(O);case 3:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},oe,this)}))},D.qchatMultiSyncServersMessageReadHandler=function(O){this.messageModuleService.onMultiSyncServersRead(O)},x}(gl);function $h(S,x){x===void 0&&(x=1);var D=ya({clientPort:{type:"number"},clientType:{type:"enum",values:pc},customClientType:{type:"number"},loginTime:{type:"number"},hasTokenPreviously:{type:"boolean"},pushType:{type:"number"}},S);return Tn(Tn({},D),{account:D.account,connectionId:D.connectionId,deviceId:D.deviceId,ip:D.ip,mac:D.ip,os:D.os,clientType:D.clientType,time:D.time,online:x!==2})}var Hy={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},jh,ws,ba={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},gC=function(S){function x(F){var O;return(O=S.call(this,"qchatAuth",F)||this).syncTimeTag=0,O}Ro(x,S);var D=x.prototype;return D.doLogin=function(O){var oe;return O===void 0&&(O=!1),Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe,jt,lr,fr,Sr,br;return sr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return z=this.core.options,qe=ta.getSystemInfo(),jt=Tn(Tn({},z),{appLogin:O?0:1,clientType:16,clientSession:(oe=this.core.socket)===null||oe===void 0?void 0:oe.sessionId,deviceId:this.core.config.deviceId,sdkVersion:91001,sdkType:ba[ta.platform]||0,userAgent:"Native/0.13.1",sdkHumanVersion:"0.13.1",os:qe.os,browser:qe.browser}),Dr.next=5,this.core.sendCmd("qchatLogin",{qchatLoginReqTag:jt});case 5:if(!(lr=Dr.sent).error){Dr.next=8;break}throw lr.error;case 8:return fr=lr.content,Sr=fr.qchatLoginResTag,br=fr.qchatMultiLoginResult,Sr.isAutoReconnect=O,Dr.abrupt("return",{loginResult:$h(Sr),multiLoginResults:vo(br).call(br,function($r){return $h($r)})});case 11:case"end":return Dr.stop()}},_e,this)}))},D.kick=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){var z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,this.core.sendCmd("qchatKick",O);case 2:return z=jt.sent,jt.abrupt("return",(oe=z.content)===null||oe===void 0?void 0:oe.deviceIds);case 4:case"end":return jt.stop()}},_e,this)}))},D.sync=function(){return Mr(this,void 0,void 0,sr.mark(function O(){return sr.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.core.sendCmd("qchatSync",{qchatSyncTag:{systemNotification:this.syncTimeTag||0}});case 2:case"end":return _e.stop()}},O,this)}))},D.qchatSyncHandler=function(O){var oe,_e;this.logger.log("sync: emit syncdone",(oe=O.content)===null||oe===void 0?void 0:oe.timetag),this.core.emit("syncdone"),this.syncTimeTag=((_e=O.content)===null||_e===void 0?void 0:_e.timetag)||0},D.qchatMultiSpotLoginHandler=function(O){if(O.error)this.logger.error("qchatMultiPortLoginHandler:: error, ",O.error);else{var oe=O.content,_e=$h(oe.qchatLoginResTag,oe.state);this.core.emit("multiSpotLogin",[_e])}},D.qchatBeKickedHandler=function(O){if(O.error)this.logger.error("qchatBeKickedHandler error, ",O.error);else{var oe=function(z){var qe=ya({clientType:{type:"enum",values:pc},customClientType:{type:"number"}},z),jt=Hy[qe.reason];return Tn(qe,jt=jt||{reason:"unknow",message:"Unknown reason"})}(O.content.beKickedTag);this.logger.warn("bekicked::",oe),this.core.doDisconnect(ls.KICKED,oe)}},x}(gl);(function(S){S.UNKNOWN="UNKNOWN",S.LOGIN_STATE_ERROR="LOGIN_STATE_ERROR",S.CLOSE_BY_BACKEND="CLOSE_BY_BACKEND",S.ALL_MEMBERS_OUT="ALL_MEMBERS_OUT",S.END_OF_LIFE="END_OF_LIFE",S.CLOSE_BY_MEMBER="CLOSE_BY_MEMBER",S.KICK_OUT="KICK_OUT",S.SYNC_DATA_ERROR="SYNC_DATA_ERROR",S.LEAVE_BY_SELF="LEAVE_BY_SELF",S.kICK_BY_SELF="kICK_BY_SELF"})(jh||(jh={})),function(S){S.offNotAllowSelfOn="offNotAllowSelfOn",S.offAllowSelfOn="offAllowSelfOn",S.disable="disable"}(ws||(ws={}));var Nc={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},fc={limit:{type:"number"}};function mc(S){return ns(S)&&S.length>0?vo(S).call(S,function(x){return function(F){return ya(Nc,F)}(x)}):[]}function hC(S){try{S.audio&&(S.audio=JSON.parse(S.audio))}catch{throw new al('result "audio" JSON parse error',{key:"audio"},"JSON parse error")}try{S.video&&(S.video=JSON.parse(S.video))}catch{throw new al('result "video" JSON parse error',{key:"video"},"JSON parse error")}return ya(fc,S)}var Ud={"25_1":"qchatGetNeroomToken","25_2":"qchatUpdateRTCChannelConfig","25_3":"qchatGetRTCChannelConfig","25_4":"qchatGetRTCChannelMembers"},qd={QChatRTCChannelConfigTag:{serverId:1,channelId:2,limit:3,audio:4,video:5},QChatRTCChannelConfigResultTag:{limit:1,audio:2,video:3},QChatGetRTCParams:{serverId:1,channelId:2},qchatGetRTCChannelMembersTag:{serverId:1,channelId:2},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},QChatGetNeroomTokenResultTag:{token:1,expire:2},QChatGetNeroomTokenParams:{neroomDeviceId:1}},tf=Cc(qd),Vd={qchatGetNeroomToken:{sid:25,cid:1,service:"qchatMedia",params:[{type:"Property",name:"qchatGetNeroomTokenTag",reflectMapper:qd.QChatGetNeroomTokenParams}],response:[{type:"Property",name:"neroomToken",reflectMapper:tf.QChatGetNeroomTokenResultTag}]},qchatUpdateRTCChannelConfig:{sid:25,cid:2,service:"qchatMedia",params:[{type:"Property",name:"RTCChannelConfig",reflectMapper:qd.QChatRTCChannelConfigTag}]},qchatGetRTCChannelConfig:{sid:25,cid:3,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelConfigTag",reflectMapper:qd.QChatGetRTCParams}],response:[{type:"Property",name:"RTCChannelConfig",reflectMapper:tf.QChatRTCChannelConfigResultTag}]},qchatGetRTCChannelMembers:{sid:25,cid:4,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelMembersTag",reflectMapper:qd.QChatGetRTCParams}],response:[{type:"PropertyArray",name:"memberList",reflectMapper:tf.memberInfo}]}},vC=function(S){function x(F){var O;return(O=S.call(this,"qchatMedia",F)||this).tokenExpireTime=24e4,O.getTokenState=!1,O.core=F,Ei({cmdMap:Ud,cmdConfig:Vd}),O.core.on("disconnect",function(){return Mr(i(O),void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.roomContext){z.next=3;break}return z.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return z.stop()}},oe,this)}))}),O.core.on("kicked",function(){return Mr(i(O),void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.roomContext){z.next=3;break}return z.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return z.stop()}},oe,this)}))}),O.core.eventBus.on("qchatMedia/serverOrChannelLeave",function(oe){return Mr(i(O),void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(!(oe.type===Xo[Xo.channelVisibilityUpdate]&&oe.channelId===this.channelId||oe.type===Xo[Xo.serverEnterLeave]&&oe.serverId===this.serverId)){qe.next=4;break}if(!this.roomContext||!this.roomContext.roomUuid){qe.next=4;break}return qe.next=4,this.disconnectChannel();case 4:case"end":return qe.stop()}},_e,this)}))}),O.tokenExpireTime=24e4,O.channelId="",O.serverId="",O}Ro(x,S);var D=x.prototype;return D.setNeroom=function(O){this.neroom=new O},D._checkPermission=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.core.qchatRole.checkPermission(O);case 2:return _e=qe.sent,qe.abrupt("return",_e);case 4:case"end":return qe.stop()}},oe,this)}))},D._checkConnectState=function(){if(this.state!=="connect")throw new yo("QChatMedia::you should connect first")},D.kickMemberOut=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),qe.prev=2,qe.next=5,(oe=this.roomContext)===null||oe===void 0?void 0:oe.kickMemberOut(O.accid);case 5:qe.next=11;break;case 7:throw qe.prev=7,qe.t0=qe.catch(2),this.logger.error("QChatMedia::kickMemberOut error params is "+mo(O),qe.t0),new yo("QChatMedia::kickMemberOut error",qe.t0);case 11:case"end":return qe.stop()}},_e,this,[[2,7]])}))},D.disconnectChannel=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),this.logger.debug("QChatMedia::disconnect begin disconnect"),z.prev=2,z.next=5,(O=this.roomContext)===null||O===void 0?void 0:O.leaveRoom();case 5:z.next=10;break;case 7:z.prev=7,z.t0=z.catch(2),this.logger.error("QChatMedia::disconnect error",z.t0);case 10:if(!this.authService){z.next=13;break}return z.next=13,this.authService.logout();case 13:this._setStateInit(),this.core.emit("qchatMediaDisconnect");case 15:case"end":return z.stop()}},oe,this,[[2,7]])}))},D._setStateInit=function(){this.logger.debug("QChatMedia::disconnect end"),this.roomContext=void 0,this.rtcController=void 0,this.state="init",this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0),this.channelId="",this.serverId=""},D.muteAudio=function(O){var oe,_e,z,qe,jt;return Mr(this,void 0,void 0,sr.mark(function lr(){var fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),((oe=this.roomContext)===null||oe===void 0?void 0:oe.localMember.uuid)!==O.accid){br.next=14;break}return br.prev=3,br.next=6,(_e=this.rtcController)===null||_e===void 0?void 0:_e.muteMyAudio();case 6:br.next=12;break;case 8:throw br.prev=8,br.t0=br.catch(3),this.logger.error("QChatMedia::muteAudio error",br.t0),new yo("QChatMedia::muteAudio error",br.t0);case 12:case 25:br.next=31;break;case 14:if(br.prev=14,!(fr=(z=this.roomContext)===null||z===void 0?void 0:z.roomProperties.audioOff)||((qe=fr.value)===null||qe===void 0?void 0:qe.split("_")[0])!==ws.offNotAllowSelfOn){br.next=23;break}return br.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 19:if(br.sent){br.next=23;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),br.abrupt("return");case 23:return br.next=25,(jt=this.rtcController)===null||jt===void 0?void 0:jt.muteMemberAudio(O.accid);case 27:throw br.prev=27,br.t1=br.catch(14),this.logger.error("QChatMedia::muteAudio error params is "+mo(O),br.t1),new yo("QChatMedia::muteAudio error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[3,8],[14,27]])}))},D.unMuteAudio=function(O){var oe,_e,z,qe,jt;return Mr(this,void 0,void 0,sr.mark(function lr(){var fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),!(fr=(oe=this.roomContext)===null||oe===void 0?void 0:oe.roomProperties.audioOff)||((_e=fr.value)===null||_e===void 0?void 0:_e.split("_")[0])!==ws.offNotAllowSelfOn){br.next=10;break}return br.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 6:if(br.sent){br.next=10;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),br.abrupt("return");case 10:if(((z=this.roomContext)===null||z===void 0?void 0:z.localMember.uuid)!==O.accid){br.next=22;break}return br.prev=11,br.next=14,(qe=this.rtcController)===null||qe===void 0?void 0:qe.unmuteMyAudio();case 14:br.next=20;break;case 16:throw br.prev=16,br.t0=br.catch(11),this.logger.error("QChatMedia::unMuteAudio error",br.t0),new yo("QChatMedia::unMuteAudio error",br.t0);case 20:case 25:br.next=31;break;case 22:return br.prev=22,br.next=25,(jt=this.rtcController)===null||jt===void 0?void 0:jt.unmuteMemberAudio(O.accid);case 27:throw br.prev=27,br.t1=br.catch(22),this.logger.error("QChatMedia::unMuteAudio error params is "+mo(O),br.t1),new yo("QChatMedia::unMuteAudio error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[11,16],[22,27]])}))},D.muteVideo=function(O){var oe,_e,z,qe,jt;return Mr(this,void 0,void 0,sr.mark(function lr(){var fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),((oe=this.roomContext)===null||oe===void 0?void 0:oe.localMember.uuid)!==O.accid){br.next=14;break}return br.prev=3,br.next=6,(_e=this.rtcController)===null||_e===void 0?void 0:_e.muteMyVideo();case 6:br.next=12;break;case 8:throw br.prev=8,br.t0=br.catch(3),this.logger.error("QChatMedia::muteVideo error",br.t0),new yo("QChatMedia::muteVideo error",br.t0);case 12:case 25:br.next=31;break;case 14:if(br.prev=14,!(fr=(z=this.roomContext)===null||z===void 0?void 0:z.roomProperties.videoOff)||((qe=fr.value)===null||qe===void 0?void 0:qe.split("_")[0])!==ws.offNotAllowSelfOn){br.next=23;break}return br.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 19:if(br.sent){br.next=23;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),br.abrupt("return");case 23:return br.next=25,(jt=this.rtcController)===null||jt===void 0?void 0:jt.muteMemberVideo(O.accid);case 27:throw br.prev=27,br.t1=br.catch(14),this.logger.error("QChatMedia::muteVideo error params is "+mo(O),br.t1),new yo("QChatMedia::muteVideo error",br.t1);case 31:case"end":return br.stop()}},lr,this,[[3,8],[14,27]])}))},D.unMuteVideo=function(O){var oe,_e,z,qe,jt;return Mr(this,void 0,void 0,sr.mark(function lr(){var fr;return sr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),!(fr=(oe=this.roomContext)===null||oe===void 0?void 0:oe.roomProperties.videoOff)||((_e=fr.value)===null||_e===void 0?void 0:_e.split("_")[0])!==ws.offNotAllowSelfOn){br.next=10;break}return br.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 6:if(br.sent){br.next=10;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),br.abrupt("return");case 10:if(((z=this.roomContext)===null||z===void 0?void 0:z.localMember.uuid)!==O.accid){br.next=22;break}return br.prev=11,br.next=14,(qe=this.rtcController)===null||qe===void 0?void 0:qe.unmuteMyVideo();case 14:br.next=20;break;case 16:throw br.prev=16,br.t0=br.catch(11),this.logger.error("QChatMedia::unMuteVideo error",br.t0),new yo("QChatMedia::unMuteVideo error",br.t0);case 20:br.next=30;break;case 22:br.prev=22,(jt=this.rtcController)===null||jt===void 0||jt.unmuteMemberVideo(O.accid),br.next=30;break;case 26:throw br.prev=26,br.t1=br.catch(22),this.logger.error("QChatMedia::unMuteVideo error",br.t1),new yo("QChatMedia::unMuteVideo error",br.t1);case 30:case"end":return br.stop()}},lr,this,[[11,16],[22,26]])}))},D.startScreenShare=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this._checkConnectState(),z.prev=1,(O=this.rtcController)===null||O===void 0||O.startScreenShare(),z.next=9;break;case 5:throw z.prev=5,z.t0=z.catch(1),this.logger.error("QChatMedia::startScreenShare error",z.t0),new yo("QChatMedia::startScreenShare error",z.t0);case 9:case"end":return z.stop()}},oe,this,[[1,5]])}))},D.stopScreenShare=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:this._checkConnectState(),z.prev=1,(O=this.rtcController)===null||O===void 0||O.stopScreenShare(),z.next=9;break;case 5:throw z.prev=5,z.t0=z.catch(1),this.logger.error("QChatMedia::stopScreenShare error",z.t0),new yo("QChatMedia::stopScreenShare error",z.t0);case 9:case"end":return z.stop()}},oe,this,[[1,5]])}))},D.stopMemberScreenShare=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),qe.prev=2,(oe=this.rtcController)===null||oe===void 0||oe.stopMemberScreenShare(O.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::stopMemberScreenShare error",qe.t0),new yo("QChatMedia::stopMemberScreenShare error",qe.t0);case 10:case"end":return qe.stop()}},_e,this,[[2,6]])}))},D.subscribeRemoteVideoStream=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},O),qe.prev=2,(oe=this.rtcController)===null||oe===void 0||oe.subscribeRemoteVideoStream(O.accid,O.streamType),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoStream error",qe.t0),new yo("QChatMedia::subscribeRemoteVideoStream error",qe.t0);case 10:case"end":return qe.stop()}},_e,this,[[2,6]])}))},D.unSubscribeRemoteVideoStream=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},O),qe.prev=2,(oe=this.rtcController)===null||oe===void 0||oe.unsubscribeRemoteVideoStream(O.accid,O.streamType),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::unSubscribeRemoteVideoStream error",qe.t0),new yo("QChatMedia::unSubscribeRemoteVideoStream error",qe.t0);case 10:case"end":return qe.stop()}},_e,this,[[2,6]])}))},D.setupVideoCanvas=function(O){var oe;if(this._checkConnectState(),((oe=this.roomContext)===null||oe===void 0?void 0:oe.localMember.uuid)===O.accid)try{return this.rtcController.setupLocalVideoCanvas(O.videoView)}catch(_e){throw this.logger.error("QChatMedia::setupVideoCanvas error",_e),new yo("QChatMedia::setupVideoCanvas error",_e)}else try{return this.rtcController.setupRemoteVideoCanvas(O.videoView,O.accid)}catch(_e){throw this.logger.error("QChatMedia::setupVideoCanvas error",_e),new yo("QChatMedia::setupVideoCanvas error",_e)}},D.setupRemoteVideoSubStreamCanvas=function(O){this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O);try{return this.rtcController.setupRemoteVideoSubStreamCanvas(O.videoView,O.accid)}catch(oe){throw this.logger.error("QChatMedia::setupRemoteVideoSubStreamCanvas error",oe),new yo("QChatMedia::setupRemoteVideoSubStreamCanvas error",oe)}},D.getScreenSharingUserUuid=function(){this._checkConnectState();try{return this.rtcController.getScreenSharingUserUuid()}catch(O){throw this.logger.error("QChatMedia::getScreenSharingUserUuid error",O),new yo("QChatMedia::getScreenSharingUserUuid error",O)}},D.initQChatMedia=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(this.neroom){z.next=3;break}return this.logger.warn("QChatMedia::init::you should import neroom SDK"),z.abrupt("return");case 3:if(this.state===void 0){z.next=6;break}return this.logger.error("QChatMedia::init::you already init QChatMedia"),z.abrupt("return");case 6:z.prev=6,this.neroom.initialize({appKey:this.core.options.appkey,serverConfig:O.serverConfig}),z.next=14;break;case 10:throw z.prev=10,z.t0=z.catch(6),this.logger.error("QChatMedia::initQChatMedia error",z.t0),new yo("QChatMedia::initQChatMedia error",z.t0);case 14:this.authService=this.neroom.authService,this.roomService=this.neroom.roomService,this.messageChannelService=this.neroom.messageChannelService,this.state="init";case 18:case"end":return z.stop()}},oe,this,[[6,10]])}))},D.loginByIM=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z;return sr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(this.state==="init"){jt.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),jt.abrupt("return");case 3:return _e=this.core.options,jt.next=6,this._getToken();case 6:return z=jt.sent,jt.prev=7,jt.next=10,(O=this.authService)===null||O===void 0?void 0:O.loginByIM(_e.account,z,_e.token);case 10:jt.next=16;break;case 12:throw jt.prev=12,jt.t0=jt.catch(7),this.logger.error("QChatMedia::loginByIM error",jt.t0),new yo("QChatMedia::loginByIM error",jt.t0);case 16:this.state="login";case 17:case"end":return jt.stop()}},oe,this,[[7,12]])}))},D._getToken=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){var _e,z,qe,jt,lr=this;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return this.logger.log("QChatMedia::getToken begin getToken"),Sr.next=3,this.core.sendCmd("qchatGetNeroomToken",{qchatGetNeroomTokenTag:{neroomDeviceId:(O=this.neroom)===null||O===void 0?void 0:O.deviceId}});case 3:return _e=Sr.sent,z=_e.content.neroomToken,qe=z.token,jt=z.expire,this.logger.log("QChatMedia::getToken success token is "+qe+",expire is "+jt+" "),this.tokenTimer||(this.logger.debug("QChatMedia::getToken set token timer,expire is "+(1e3*jt-this.tokenExpireTime)+" "),this.tokenTimer=this.core.timerManager.addTimer(function(){return Mr(lr,void 0,void 0,sr.mark(function br(){var Er;return sr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return this.tokenTimer&&this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0,$r.next=4,this._getToken();case 4:Er=$r.sent,this.authService&&this.authService.renewToken(Er);case 6:case"end":return $r.stop()}},br,this)}))},1e3*jt-this.tokenExpireTime)),Sr.abrupt("return",qe);case 8:case"end":return Sr.stop()}},oe,this)}))},D.connectChannel=function(O){var oe,_e;return Mr(this,void 0,void 0,sr.mark(function z(){var qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this.state!==void 0){lr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),lr.abrupt("return");case 3:if(this.state!=="init"){lr.next=6;break}return lr.next=6,this.loginByIM();case 6:return this.serverId=O.serverId,this.channelId=O.channelId,lr.prev=8,lr.next=11,(oe=this.roomService)===null||oe===void 0?void 0:oe.joinRoom({roomUuid:O.channelId,role:"qchatAudience",userName:this.core.options.account,initialProperties:{}},{});case 11:lr.next=17;break;case 13:throw lr.prev=13,lr.t0=lr.catch(8),this.logger.error("QChatMedia::connectChannel error",lr.t0),new yo("QChatMedia::connectChannel error",lr.t0);case 17:if(!(qe=(_e=this.roomService)===null||_e===void 0?void 0:_e.getRoomContext(O.channelId))){lr.next=27;break}return this.roomContext=qe,this.rtcController=this.roomContext.rtcController,this.state="connect",lr.next=24,this.rtcController.joinRtcChannel();case 24:this.core.emit("connectChannel"),lr.next=28;break;case 27:this.logger.error("QChatMedia::connect room not exited");case 28:case"end":return lr.stop()}},z,this,[[8,13]])}))},D.updateRTCChannelInfo=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},limit:{type:"number",allowEmpty:!1}},O),z.next=3,this.core.sendCmd("qchatUpdateRTCChannelConfig",{RTCChannelConfig:Tn(Tn({},O),{audio:mo(O.audio),video:mo(O.video)})});case 3:case"end":return z.stop()}},oe,this)}))},D.getRTCChannelInfo=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},O),qe.next=3,this.core.sendCmd("qchatGetRTCChannelConfig",{qchatGetRTCChannelConfigTag:O});case 3:return _e=qe.sent,qe.abrupt("return",hC(_e.content.RTCChannelConfig));case 5:case"end":return qe.stop()}},oe,this)}))},D.getRTCChannelOnlineMembers=function(O){return Mr(this,void 0,void 0,sr.mark(function oe(){var _e;return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Gr({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},O),qe.next=3,this.core.sendCmd("qchatGetRTCChannelMembers",{qchatGetRTCChannelMembersTag:O});case 3:return _e=qe.sent,qe.abrupt("return",mc(_e.content.memberList));case 5:case"end":return qe.stop()}},oe,this)}))},D.addRTCChannelListener=function(){var O,oe,_e=this;this._checkConnectState();try{(O=this.authService)===null||O===void 0||O.addAuthListener({onAuthEvent:function(qe){return Mr(_e,void 0,void 0,sr.mark(function jt(){var lr;return sr.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(qe!==1026||this.getTokenState){Sr.next=10;break}return this.logger.log("QChatMedia::loginByIM token expire,begin get new token "),this.getTokenState=!0,Sr.next=5,this._getToken();case 5:if(lr=Sr.sent,!this.authService){Sr.next=9;break}return Sr.next=9,this.authService.renewToken(lr);case 9:this.getTokenState=!1;case 10:case"end":return Sr.stop()}},jt,this)}))}})}catch(z){throw this.getTokenState=!1,this.logger.error("QChatMedia::loginByIM addAuthListener error",z),new yo("QChatMedia::loginByIM addAuthListener error",z)}(oe=this.roomContext)===null||oe===void 0||oe.addRoomListener({onRoomPropertiesChanged:function(qe){var jt,lr,fr,Sr,br,Er;if(_e.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesChanged",qe),qe.audioOff){var Dr=(jt=qe.audioOff.value)===null||jt===void 0?void 0:jt.split("_")[0];Dr!==ws.offNotAllowSelfOn&&Dr!==ws.offAllowSelfOn||!((lr=_e.roomContext)===null||lr===void 0)&&lr.localMember.isAudioOn&&((fr=_e.rtcController)===null||fr===void 0||fr.muteMyAudio())}else if(qe.videoOff){var $r=(Sr=qe.videoOff.value)===null||Sr===void 0?void 0:Sr.split("_")[0];$r!==ws.offNotAllowSelfOn&&$r!==ws.offAllowSelfOn||!((br=_e.roomContext)===null||br===void 0)&&br.localMember.isVideoOn&&((Er=_e.rtcController)===null||Er===void 0||Er.muteMyVideo())}},onRoomPropertiesDeleted:function(qe){_e.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesDeleted",qe)},onMemberJoinRtcChannel:function(qe){_e.logger.log("QChatMedia::addRTCChannelListener::onMemberJoinRTCChannel",qe);var jt=vo(qe).call(qe,function(lr){return lr.uuid});_e.core.emit("memberJoinRTCChannel",jt)},onMemberLeaveRoom:function(qe){_e.logger.log("QChatMedia::addRTCChannelListener::onMemberLeaveRoom",qe);var jt=vo(qe).call(qe,function(lr){return lr.uuid});_e.core.emit("memberLeaveRTCChannel",jt)},onRoomEnded:function(qe){_e.authService&&_e.authService.logout(),_e._setStateInit(),_e.logger.log("QChatMedia::addRTCChannelListener::onRoomEnded",qe),_e.core.emit("RTCChannelEnded",qe)},onRtcChannelError:function(qe){_e.logger.log("QChatMedia::addRTCChannelListener::onRtcChannelError",qe),qe==="SOCKET_ERROR"&&_e.disconnectChannel(),_e.core.emit("RTCChannelError",qe)},onRtcAudioVolumeIndication:function(qe){_e.logger.log("QChatMedia::addRTCChannelListener::onRtcAudioVolumeIndication",qe),_e.core.emit("onRtcAudioVolumeIndication",qe)},onMemberAudioMuteChanged:function(qe,jt,lr){_e.logger.log("QChatMedia::addRTCChannelListener::onMemberAudioMuteChanged",qe,jt),_e.core.emit("memberAudioMuteChanged",{memberAccId:qe.uuid,mute:jt,operateByAccId:lr.uuid})},onMemberScreenShareStateChanged:function(qe,jt,lr){_e.logger.log("QChatMedia::addRTCChannelListener::onMemberScreenShareStateChanged",qe,jt),_e.core.emit("memberScreenShareStateChanged",{memberAccId:qe.uuid,isSharing:jt,operateByAccId:lr.uuid})},onMemberVideoMuteChanged:function(qe,jt,lr){_e.logger.log("QChatMedia::addRTCChannelListener::onMemberVideoMuteChanged",qe,jt),_e.core.emit("memberVideoMuteChanged",{memberAccId:qe.uuid,mute:jt,operateByAccId:lr.uuid})}})},D.enumCameraDevices=function(){var O=this;return this._checkConnectState(),this.rtcController.enumCameraDevices().then(function(oe){return oe.data},function(oe){throw O.logger.error("QChatMedia::enumCameraDevices error",oe),new yo("QChatMedia::enumCameraDevices error",oe)})},D.enumPlayoutDevices=function(){var O=this;return this._checkConnectState(),this.rtcController.enumPlayoutDevices().then(function(oe){return oe.data},function(oe){throw O.logger.error("QChatMedia::enumPlayoutDevices error",oe),new yo("QChatMedia::enumPlayoutDevices error",oe)})},D.enumRecordDevices=function(){var O=this;return this._checkConnectState(),this.rtcController.enumRecordDevices().then(function(oe){return oe.data},function(oe){throw O.logger.error("QChatMedia::enumRecordDevices error",oe),new yo("QChatMedia::enumRecordDevices error",oe)})},D.removeRTCChannelListener=function(){var O,oe;this._checkConnectState(),(O=this.roomContext)===null||O===void 0||O.removeRoomListener({}),(oe=this.authService)===null||oe===void 0||oe.removeAuthListener({})},D.setSelectedCameraDevice=function(O){var oe=this;return this._checkConnectState(),Gr({deviceId:{type:"string",allowEmpty:!1}},O),this.rtcController.setSelectedCameraDevice(O.deviceId).then(function(_e){return _e.data},function(_e){throw oe.logger.error("QChatMedia::setSelectedCameraDevice error",_e),new yo("QChatMedia::setSelectedCameraDevice error",_e)})},D.setSelectedPlayoutDevice=function(O){var oe=this;return this._checkConnectState(),Gr({deviceId:{type:"string",allowEmpty:!1}},O),this.rtcController.setSelectedPlayoutDevice(O.deviceId).then(function(_e){return _e.data},function(_e){throw oe.logger.error("QChatMedia::setSelectedPlayoutDevice error",_e),new yo("QChatMedia::setSelectedPlayoutDevice error",_e)})},D.setSelectedRecordDevice=function(O){var oe=this;return this._checkConnectState(),Gr({deviceId:{type:"string",allowEmpty:!1}},O),this.rtcController.setSelectedRecordDevice(O.deviceId).then(function(_e){return _e.data},function(_e){throw oe.logger.error("QChatMedia::setSelectedRecordDevice error",_e),new yo("QChatMedia::setSelectedRecordDevice error",_e)})},D.getRTCMembers=function(){var O,oe;return this._checkConnectState(),vo(O=Js(oe=this.roomContext.remoteMembers).call(oe,function(_e){return _e.isInRtcChannel})).call(O,function(_e){return{accid:_e.uuid,isAudioOn:!!_e.isAudioOn,isVideoOn:!!_e.isVideoOn,isSharingScreen:!!_e.isSharingScreen,properties:_e.properties}})},D.subscribeRemoteVideoSubStream=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),qe.prev=2,(oe=this.rtcController)===null||oe===void 0||oe.subscribeRemoteVideoSubStream(O.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoSubStream error",qe.t0),new yo("QChatMedia::subscribeRemoteVideoSubStream error",qe.t0);case 10:case"end":return qe.stop()}},_e,this,[[2,6]])}))},D.unsubscribeRemoteVideoSubStream=function(O){var oe;return Mr(this,void 0,void 0,sr.mark(function _e(){return sr.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:this._checkConnectState(),Gr({accid:{type:"string",allowEmpty:!1}},O),qe.prev=2,(oe=this.rtcController)===null||oe===void 0||oe.unsubscribeRemoteVideoSubStream(O.accid),qe.next=10;break;case 6:throw qe.prev=6,qe.t0=qe.catch(2),this.logger.error("QChatMedia::unsubscribeRemoteVideoSubStream error",qe.t0),new yo("QChatMedia::unsubscribeRemoteVideoSubStream error",qe.t0);case 10:case"end":return qe.stop()}},_e,this,[[2,6]])}))},D.muteAllAudio=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),z.abrupt("return");case 7:z.prev=7,(O=this.roomContext)===null||O===void 0||O.updateRoomProperty("audioOff",mo({value:ws.offNotAllowSelfOn+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::muteAllAudio error",z.t0),new yo("QChatMedia::muteAllAudio error",z.t0);case 15:case"end":return z.stop()}},oe,this,[[7,11]])}))},D.muteAllVideo=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),z.abrupt("return");case 7:z.prev=7,(O=this.roomContext)===null||O===void 0||O.updateRoomProperty("videoOff",mo({value:ws.offNotAllowSelfOn+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::muteAllVideo error",z.t0),new yo("QChatMedia::muteAllVideo error",z.t0);case 15:case"end":return z.stop()}},oe,this,[[7,11]])}))},D.unMuteAllAudio=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),z.abrupt("return");case 7:z.prev=7,(O=this.roomContext)===null||O===void 0||O.updateRoomProperty("audioOff",mo({value:ws.disable+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::unMuteAllAudio error",z.t0),new yo("QChatMedia::unMuteAllAudio error",z.t0);case 15:case"end":return z.stop()}},oe,this,[[7,11]])}))},D.unMuteAllVideo=function(){var O;return Mr(this,void 0,void 0,sr.mark(function oe(){return sr.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this._checkConnectState(),z.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(z.sent){z.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),z.abrupt("return");case 7:z.prev=7,(O=this.roomContext)===null||O===void 0||O.updateRoomProperty("videoOff",mo({value:ws.disable+"_"+new Date().getTime()})),z.next=15;break;case 11:throw z.prev=11,z.t0=z.catch(7),this.logger.error("QChatMedia::unMuteAllVideo error",z.t0),new yo("QChatMedia::unMuteAllVideo error",z.t0);case 15:case"end":return z.stop()}},oe,this,[[7,11]])}))},x}(gl),yC={"1_2":"heartbeat","24_2":"qchatLogin","24_4":"qchatExit","24_5":"qchatBeKicked","24_8":"qchatMultiSpotLogin","24_9":"qchatKick","24_19":"qchatSync"},Hd={qchatLoginTag:{appkey:1,account:2,authType:3,token:4,loginExt:5,clientType:6,clientSession:7,deviceId:8,sdkVersion:9,sdkType:10,userAgent:11,customTag:12,customClientType:13,sdkHumanVersion:14,pushTokenName:20,pushToken:21,pushkitTokenName:22,pushkitToken:23,deviceInfo:24,customPushContentType:25,os:30,mac:31,bundleId:32,simCarrierCode:33,simCountryCode:34,networkCode:35,browser:36,deviceModel:37,androidid:38,imei:39,idfv:40,openuuid:41,pushType:100,hasTokenPreviously:101,consid:102,clientIP:103,clientPort:104,loginTime:105}},Sl=Cc(Hd),bC={heartbeat:{sid:1,cid:2,service:"qchatAuth"},qchatLogin:{sid:24,cid:2,service:"qchatAuth",params:[{type:"Property",name:"qchatLoginReqTag",reflectMapper:Hd.qchatLoginTag}],response:[{type:"Property",name:"qchatLoginResTag",reflectMapper:Sl.qchatLoginTag},{type:"PropertyArray",name:"qchatMultiLoginResult",reflectMapper:Sl.qchatLoginTag}]},qchatExit:{sid:24,cid:4,service:"qchatAuth"},qchatBeKicked:{sid:24,cid:5,service:"qchatAuth",response:[{type:"Property",name:"beKickedTag",reflectMapper:{1:"clientType",2:"reason",3:"ext",4:"customClientType"}}]},qchatMultiSpotLogin:{sid:24,cid:8,service:"qchatAuth",response:[{type:"Number",name:"state"},{type:"Property",name:"qchatLoginResTag",reflectMapper:Sl.qchatLoginTag}]},qchatKick:{sid:24,cid:9,service:"qchatAuth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]},qchatSync:{sid:24,cid:19,service:"qchatAuth",isNoResponse:!0,params:[{type:"Property",name:"qchatSyncTag",reflectMapper:{systemNotification:1,pushConfig:2}}],response:[{type:"Number",name:"timetag"}]}},TC={debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},zd=function(S){function x(F,O){var oe;return O===void 0&&(O={cloudStorageConfig:{}}),(oe=S.call(this,F)||this).instanceName="QChat",oe.account="",oe.options={},oe.qchatAuth={},oe.qchatServer={},oe.qchatChannel={},oe.qchatMsg={},oe.qchatRole={},oe.qchatMedia={},oe.cloudStorage={},oe.setOptions(F),Ei({cmdMap:yC,cmdConfig:bC}),Ei({cmdMap:fy,cmdConfig:hh}),oe.qchatAuth=new gC(i(oe)),oe.qchatServer=new BS(i(oe)),oe.qchatChannel=new tC(i(oe)),oe.qchatMsg=new Vy(i(oe)),oe.qchatRole=new oC(i(oe)),oe.qchatMedia=new vC(i(oe)),oe.cloudStorage=new gy(i(oe),Tn({storageKeyPrefix:oe.instanceName},O.cloudStorageConfig)),O&&oe.setOtherOptions(O),x.instance=i(oe),oe}Ro(x,S),x.getInstance=function(O,oe){if(!x.instance){if(O)return new x(O,oe);throw new Error("Instance not exist, please input options")}if(O){if(x.instance.options.account===O.account&&x.instance.options.appkey===O.appkey)return x.instance.setOptions(O),oe&&x.instance.setOtherOptions(oe),x.instance;throw new Error("Unexpected login")}return x.instance};var D=x.prototype;return D.connect=function(O){O===void 0&&(O={});var oe=Ja(null,{connect:{get:function(){return S.prototype.connect}}});return Mr(this,void 0,void 0,sr.mark(function _e(){var z,qe,jt;return sr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){fr.next=4;break}return z="QChat status is "+this.status+", and would not connect",this.logger.warn(z),fr.abrupt("return",co.reject(z));case 4:return qe=O.isAutoReconnect||!1,fr.next=7,oe.connect.call(this,{linkUrls:this.options.linkAddresses,isAutoReconnect:qe});case 7:return fr.prev=7,fr.next=10,this.qchatAuth.doLogin(qe);case 10:jt=fr.sent,fr.next=21;break;case 13:if(fr.prev=13,fr.t0=fr.catch(7),this.logger.warn("qchat connect:: login failed",fr.t0),this.retryCount!==0){fr.next=19;break}throw this.doDisconnect(ls.ACTIVE,"FailedToInitializeLogin"),fr.t0;case 19:return this.doDisconnect(ls.OFFLINE,"ReconnectLoginFailed"),fr.abrupt("return");case 21:return this.status="logined",jt.loginResult.appkey=this.options.appkey,this.eventBus.emit("logined",jt.loginResult),this.emit("logined",jt.loginResult),jt.multiLoginResults&&jt.multiLoginResults.length>0&&this.emit("multiSpotLogin",jt.multiLoginResults),this.resetConnectStatus(),this.ping(),fr.prev=28,fr.next=31,this.cloudStorage.init();case 31:fr.next=36;break;case 33:fr.prev=33,fr.t1=fr.catch(28),this.logger.error("NIM:login cloudStorage init failed ",fr.t1);case 36:return fr.next=38,this.qchatAuth.sync();case 38:case"end":return fr.stop()}},_e,this,[[7,13],[28,33]])}))},D.login=function(O){return O===void 0&&(O={}),this.connect(O)},D.setOptions=function(O){Gr({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},linkAddresses:{type:"array",itemType:"string",min:1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:np,required:!1}},O),this.logger.log("QChat::setOptions options is",O),this.account=O.account,this.options=Tn(Tn({},TC),O)},D.setOtherOptions=function(O){var oe;!((oe=O==null?void 0:O.QChatMedia)===null||oe===void 0)&&oe.neroom&&this.qchatMedia.setNeroom(O.QChatMedia.neroom)},D.onMessage=function(O){var oe,_e,z=S.prototype.onMessage.call(this,O);if(z){var qe=z.raw.ser,jt=this.sendingCmdMap.get(qe);if(jt&&jt.cmd===z.cmd){var lr=jt.callback,fr=jt.timer,Sr=jt.params;if(clearTimeout(fr),z.params=Sr,this.sendingCmdMap.delete(qe),z.cmd==="heartbeat")return void lr[0]();var br=(oe=this[z.service])===null||oe===void 0?void 0:oe.process(z);br&&typeof br.then=="function"?br.then(function(Er){lr[0](Er)}).catch(function(Er){lr[1](Er)}):(this.logger.log("imsocket:: handlerFn without promise",z.service,z.cmd),lr[0]())}else(_e=this[z.service])===null||_e===void 0||_e.process(z)}},D.disconnect=function(){var O=this;switch(this.status){case"logined":return this.sendCmd("qchatExit").then(function(){S.prototype.doDisconnect.call(O,ls.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return S.prototype.doDisconnect.call(this,ls.ACTIVE,"UserActiveDisconnect"),co.resolve();case"unconnected":case"destroyed":return co.resolve()}},D.logout=function(){return this.disconnect()},D.destroy=function(){return x.instance=null,S.prototype.destroy.call(this)},D.kickOtherClients=function(O){return Gr({deviceIds:{type:"array",itemType:"string"}},O),this.qchatAuth.kick(O)},x}(hd);zd.instance=null;var SC=Math.min,Dh=[].lastIndexOf,rf=!!Dh&&1/[1].lastIndexOf(1,-0)<0,nf=Ds("lastIndexOf"),zy=rf||!nf?function(x){if(rf)return T(Dh,this,arguments)||0;var D=ar(this),F=Ia(D),O=F-1;for(arguments.length>1&&(O=SC(O,$i(arguments[1]))),O<0&&(O=F+O);O>=0;O--)if(O in D&&D[O]===x)return O||0;return-1}:Dh;Vr({target:"Array",proto:!0,forced:zy!==[].lastIndexOf},{lastIndexOf:zy});var CC=Uo("Array").lastIndexOf,Uh=Array.prototype,Ky=function(S){var x=S.lastIndexOf;return S===Uh||tr(Uh,S)&&x===Uh.lastIndexOf?CC:x},Rc=o(function(S,x){(function(){var D={function:!0,object:!0}[typeof window]&&window||this,F=x,O=S&&!S.nodeType&&S,oe=F&&O&&typeof e=="object"&&e;!oe||oe.global!==oe&&oe.window!==oe&&oe.self!==oe||(D=oe);var _e=Math.pow(2,53)-1,z=/\bOpera/,qe=Object.prototype,jt=qe.hasOwnProperty,lr=qe.toString;function fr(wn){return(wn=String(wn)).charAt(0).toUpperCase()+wn.slice(1)}function Sr(wn){return wn=vn(wn),/^(?:webOS|i(?:OS|P))/.test(wn)?wn:fr(wn)}function br(wn,hn){for(var Gn in wn)jt.call(wn,Gn)&&hn(wn[Gn],Gn,wn)}function Er(wn){return wn==null?fr(wn):lr.call(wn).slice(8,-1)}function Dr(wn){return String(wn).replace(/([ -])(?!$)/g,"$1?")}function $r(wn,hn){var Gn=null;return function(jo,jn){var wr=-1,xn=jo?jo.length:0;if(typeof xn=="number"&&xn>-1&&xn<=_e)for(;++wr<xn;)jn(jo[wr],wr,jo);else br(jo,jn)}(wn,function(Dn,jo){Gn=hn(Gn,Dn,jo,wn)}),Gn}function vn(wn){return String(wn).replace(/^ +| +$/g,"")}var Xr=function wn(hn){var Gn=D,Dn=hn&&typeof hn=="object"&&Er(hn)!="String";Dn&&(Gn=hn,hn=null);var jo=Gn.navigator||{},jn=jo.userAgent||"";hn||(hn=jn);var wr,xn,Nn=Dn?!!jo.likeChrome:/\bChrome\b/.test(hn)&&!/internal|\n/i.test(lr.toString()),Cn="Object",Zr=Dn?Cn:"ScriptBridgingProxyObject",On=Dn?Cn:"Environment",Un=Dn&&Gn.java?"JavaPackage":Er(Gn.java),eo=Dn?Cn:"RuntimeObject",ro=/\bJava/.test(Un)&&Gn.java,Do=ro&&Er(Gn.environment)==On,go=ro?"a":"α",Zo=ro?"b":"β",So=Gn.document||{},Io=Gn.operamini||Gn.opera,ea=z.test(ea=Dn&&Io?Io["[[Class]]"]:Er(Io))?ea:Io=null,Ci=hn,Eo=[],Mi=null,$a=hn==jn,lo=$a&&Io&&typeof Io.version=="function"&&Io.version(),Go=function(wa){return $r(wa,function(Qo,ma){return Qo||RegExp("\\b"+(ma.pattern||Dr(ma))+"\\b","i").exec(hn)&&(ma.label||ma)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),zn=function(wa){return $r(wa,function(Qo,ma){return Qo||RegExp("\\b"+(ma.pattern||Dr(ma))+"\\b","i").exec(hn)&&(ma.label||ma)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Bo=Gy([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Qa=function(wa){return $r(wa,function(Qo,ma,Kd){return Qo||(ma[Bo]||ma[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Bo)]||RegExp("\\b"+Dr(Kd)+"(?:\\b|\\w*\\d)","i").exec(hn))&&Kd})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Qn=function(wa){return $r(wa,function(Qo,ma){var Kd=ma.pattern||Dr(ma);return!Qo&&(Qo=RegExp("\\b"+Kd+"(?:/[\\d.]+|[ \\w.]*)","i").exec(hn))&&(Qo=function(Ks,Wd,of){var Vh={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Wd&&of&&/^Win/i.test(Ks)&&!/^Windows Phone /i.test(Ks)&&(Vh=Vh[/[\d.]+$/.exec(Ks)])&&(Ks="Windows "+Vh),Ks=String(Ks),Wd&&of&&(Ks=Ks.replace(RegExp(Wd,"i"),of)),Sr(Ks.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Qo,Kd,ma.label||ma)),Qo})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Gy(Is){return $r(Is,function(wa,Qo){var ma=Qo.pattern||Dr(Qo);return!wa&&(wa=RegExp("\\b"+ma+" *\\d+[.\\w_]*","i").exec(hn)||RegExp("\\b"+ma+" *\\w+-[\\w]*","i").exec(hn)||RegExp("\\b"+ma+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(hn))&&((wa=String(Qo.label&&!RegExp(ma,"i").test(Qo.label)?Qo.label:wa).split("/"))[1]&&!/[\d.]+/.test(wa[0])&&(wa[0]+=" "+wa[1]),Qo=Qo.label||Qo,wa=Sr(wa[0].replace(RegExp(ma,"i"),Qo).replace(RegExp("; *(?:"+Qo+"[_-])?","i")," ").replace(RegExp("("+Qo+")[-_.]?(\\w)","i"),"$1 $2"))),wa})}function qh(Is){return $r(Is,function(wa,Qo){return wa||(RegExp(Qo+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(hn)||0)[1]||null})}if(Go&&(Go=[Go]),/\bAndroid\b/.test(Qn)&&!Bo&&(wr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(hn))&&(Bo=vn(wr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Qa&&!Bo?Bo=Gy([Qa]):Qa&&Bo&&(Bo=Bo.replace(RegExp("^("+Dr(Qa)+")[-_.\\s]","i"),Qa+" ").replace(RegExp("^("+Dr(Qa)+")[-_.]?(\\w)","i"),Qa+" $2")),(wr=/\bGoogle TV\b/.exec(Bo))&&(Bo=wr[0]),/\bSimulator\b/i.test(hn)&&(Bo=(Bo?Bo+" ":"")+"Simulator"),zn=="Opera Mini"&&/\bOPiOS\b/.test(hn)&&Eo.push("running in Turbo/Uncompressed mode"),zn=="IE"&&/\blike iPhone OS\b/.test(hn)?(Qa=(wr=wn(hn.replace(/like iPhone OS/,""))).manufacturer,Bo=wr.product):/^iP/.test(Bo)?(zn||(zn="Safari"),Qn="iOS"+((wr=/ OS ([\d_]+)/i.exec(hn))?" "+wr[1].replace(/_/g,"."):"")):zn=="Konqueror"&&/^Linux\b/i.test(Qn)?Qn="Kubuntu":Qa&&Qa!="Google"&&(/Chrome/.test(zn)&&!/\bMobile Safari\b/i.test(hn)||/\bVita\b/.test(Bo))||/\bAndroid\b/.test(Qn)&&/^Chrome/.test(zn)&&/\bVersion\//i.test(hn)?(zn="Android Browser",Qn=/\bAndroid\b/.test(Qn)?Qn:"Android"):zn=="Silk"?(/\bMobi/i.test(hn)||(Qn="Android",Eo.unshift("desktop mode")),/Accelerated *= *true/i.test(hn)&&Eo.unshift("accelerated")):zn=="UC Browser"&&/\bUCWEB\b/.test(hn)?Eo.push("speed mode"):zn=="PaleMoon"&&(wr=/\bFirefox\/([\d.]+)\b/.exec(hn))?Eo.push("identifying as Firefox "+wr[1]):zn=="Firefox"&&(wr=/\b(Mobile|Tablet|TV)\b/i.exec(hn))?(Qn||(Qn="Firefox OS"),Bo||(Bo=wr[1])):!zn||(wr=!/\bMinefield\b/i.test(hn)&&/\b(?:Firefox|Safari)\b/.exec(zn))?(zn&&!Bo&&/[\/,]|^[^(]+?\)/.test(hn.slice(hn.indexOf(wr+"/")+8))&&(zn=null),(wr=Bo||Qa||Qn)&&(Bo||Qa||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Qn))&&(zn=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Qn)?Qn:wr)+" Browser")):zn=="Electron"&&(wr=(/\bChrome\/([\d.]+)\b/.exec(hn)||0)[1])&&Eo.push("Chromium "+wr),lo||(lo=qh(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Dr(zn),"(?:Firefox|Minefield|NetFront)"])),(wr=(Go=="iCab"&&parseFloat(lo)>3?"WebKit":/\bOpera\b/.test(zn)&&(/\bOPR\b/.test(hn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(hn)&&!/^(?:Trident|EdgeHTML)$/.test(Go)&&"WebKit"||!Go&&/\bMSIE\b/i.test(hn)&&(Qn=="Mac OS"?"Tasman":"Trident")||Go=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(zn)&&"NetFront")&&(Go=[wr]),zn=="IE"&&(wr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(hn)||0)[1])?(zn+=" Mobile",Qn="Windows Phone "+(/\+$/.test(wr)?wr:wr+".x"),Eo.unshift("desktop mode")):/\bWPDesktop\b/i.test(hn)?(zn="IE Mobile",Qn="Windows Phone 8.x",Eo.unshift("desktop mode"),lo||(lo=(/\brv:([\d.]+)/.exec(hn)||0)[1])):zn!="IE"&&Go=="Trident"&&(wr=/\brv:([\d.]+)/.exec(hn))&&(zn&&Eo.push("identifying as "+zn+(lo?" "+lo:"")),zn="IE",lo=wr[1]),$a){if(function(wa,Qo){var ma=wa!=null?typeof wa[Qo]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(ma)||ma=="object"&&!wa[Qo])}(Gn,"global"))if(ro&&(Ci=(wr=ro.lang.System).getProperty("os.arch"),Qn=Qn||wr.getProperty("os.name")+" "+wr.getProperty("os.version")),Do){try{lo=Gn.require("ringo/engine").version.join("."),zn="RingoJS"}catch{(wr=Gn.system)&&wr.global.system==Gn.system&&(zn="Narwhal",Qn||(Qn=wr[0].os||null))}zn||(zn="Rhino")}else typeof Gn.process=="object"&&!Gn.process.browser&&(wr=Gn.process)&&(typeof wr.versions=="object"&&(typeof wr.versions.electron=="string"?(Eo.push("Node "+wr.versions.node),zn="Electron",lo=wr.versions.electron):typeof wr.versions.nw=="string"&&(Eo.push("Chromium "+lo,"Node "+wr.versions.node),zn="NW.js",lo=wr.versions.nw)),zn||(zn="Node.js",Ci=wr.arch,Qn=wr.platform,lo=(lo=/[\d.]+/.exec(wr.version))?lo[0]:null));else Er(wr=Gn.runtime)==Zr?(zn="Adobe AIR",Qn=wr.flash.system.Capabilities.os):Er(wr=Gn.phantom)==eo?(zn="PhantomJS",lo=(wr=wr.version||null)&&wr.major+"."+wr.minor+"."+wr.patch):typeof So.documentMode=="number"&&(wr=/\bTrident\/(\d+)/i.exec(hn))?(lo=[lo,So.documentMode],(wr=+wr[1]+4)!=lo[1]&&(Eo.push("IE "+lo[1]+" mode"),Go&&(Go[1]=""),lo[1]=wr),lo=zn=="IE"?String(lo[1].toFixed(1)):lo[0]):typeof So.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(zn)&&(Eo.push("masking as "+zn+" "+lo),zn="IE",lo="11.0",Go=["Trident"],Qn="Windows");Qn=Qn&&Sr(Qn)}if(lo&&(wr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(lo)||/(?:alpha|beta)(?: ?\d)?/i.exec(hn+";"+($a&&jo.appMinorVersion))||/\bMinefield\b/i.test(hn)&&"a")&&(Mi=/b/i.test(wr)?"beta":"alpha",lo=lo.replace(RegExp(wr+"\\+?$"),"")+(Mi=="beta"?Zo:go)+(/\d+\+?/.exec(wr)||"")),zn=="Fennec"||zn=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Qn))zn="Firefox Mobile";else if(zn=="Maxthon"&&lo)lo=lo.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Bo))Bo=="Xbox 360"&&(Qn=null),Bo=="Xbox 360"&&/\bIEMobile\b/.test(hn)&&Eo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(zn)&&(!zn||Bo||/Browser|Mobi/.test(zn))||Qn!="Windows CE"&&!/Mobi/i.test(hn))if(zn=="IE"&&$a)try{Gn.external===null&&Eo.unshift("platform preview")}catch{Eo.unshift("embedded")}else(/\bBlackBerry\b/.test(Bo)||/\bBB10\b/.test(hn))&&(wr=(RegExp(Bo.replace(/ +/g," *")+"/([.\\d]+)","i").exec(hn)||0)[1]||lo)?(Qn=((wr=[wr,/BB10/.test(hn)])[1]?(Bo=null,Qa="BlackBerry"):"Device Software")+" "+wr[0],lo=null):this!=br&&Bo!="Wii"&&($a&&Io||/Opera/.test(zn)&&/\b(?:MSIE|Firefox)\b/i.test(hn)||zn=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Qn)||zn=="IE"&&(Qn&&!/^Win/.test(Qn)&&lo>5.5||/\bWindows XP\b/.test(Qn)&&lo>8||lo==8&&!/\bTrident\b/.test(hn)))&&!z.test(wr=wn.call(br,hn.replace(z,"")+";"))&&wr.name&&(wr="ing as "+wr.name+((wr=wr.version)?" "+wr:""),z.test(zn)?(/\bIE\b/.test(wr)&&Qn=="Mac OS"&&(Qn=null),wr="identify"+wr):(wr="mask"+wr,zn=ea?Sr(ea.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(wr)&&(Qn=null),$a||(lo=null)),Go=["Presto"],Eo.push(wr));else zn+=" Mobile";(wr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(hn)||0)[1])&&(wr=[parseFloat(wr.replace(/\.(\d)$/,".0$1")),wr],zn=="Safari"&&wr[1].slice(-1)=="+"?(zn="WebKit Nightly",Mi="alpha",lo=wr[1].slice(0,-1)):lo!=wr[1]&&lo!=(wr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(hn)||0)[1])||(lo=null),wr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(hn)||0)[1],wr[0]==537.36&&wr[2]==537.36&&parseFloat(wr[1])>=28&&Go=="WebKit"&&(Go=["Blink"]),$a&&(Nn||wr[1])?(Go&&(Go[1]="like Chrome"),wr=wr[1]||((wr=wr[0])<530?1:wr<532?2:wr<532.05?3:wr<533?4:wr<534.03?5:wr<534.07?6:wr<534.1?7:wr<534.13?8:wr<534.16?9:wr<534.24?10:wr<534.3?11:wr<535.01?12:wr<535.02?"13+":wr<535.07?15:wr<535.11?16:wr<535.19?17:wr<536.05?18:wr<536.1?19:wr<537.01?20:wr<537.11?"21+":wr<537.13?23:wr<537.18?24:wr<537.24?25:wr<537.36?26:Go!="Blink"?"27":"28")):(Go&&(Go[1]="like Safari"),wr=(wr=wr[0])<400?1:wr<500?2:wr<526?3:wr<533?4:wr<534?"4+":wr<535?5:wr<537?6:wr<538?7:wr<601?8:wr<602?9:wr<604?10:wr<606?11:wr<608?12:"12"),Go&&(Go[1]+=" "+(wr+=typeof wr=="number"?".x":/[.+]/.test(wr)?"":"+")),zn=="Safari"&&(!lo||parseInt(lo)>45)?lo=wr:zn=="Chrome"&&/\bHeadlessChrome/i.test(hn)&&Eo.unshift("headless")),zn=="Opera"&&(wr=/\bzbov|zvav$/.exec(Qn))?(zn+=" ",Eo.unshift("desktop mode"),wr=="zvav"?(zn+="Mini",lo=null):zn+="Mobile",Qn=Qn.replace(RegExp(" *"+wr+"$"),"")):zn=="Safari"&&/\bChrome\b/.exec(Go&&Go[1])?(Eo.unshift("desktop mode"),zn="Chrome Mobile",lo=null,/\bOS X\b/.test(Qn)?(Qa="Apple",Qn="iOS 4.3+"):Qn=null):/\bSRWare Iron\b/.test(zn)&&!lo&&(lo=qh("Chrome")),lo&&lo.indexOf(wr=/[\d.]+$/.exec(Qn))==0&&hn.indexOf("/"+wr+"-")>-1&&(Qn=vn(Qn.replace(wr,""))),Qn&&Qn.indexOf(zn)!=-1&&!RegExp(zn+" OS").test(Qn)&&(Qn=Qn.replace(RegExp(" *"+Dr(zn)+" *"),"")),Go&&!/\b(?:Avant|Nook)\b/.test(zn)&&(/Browser|Lunascape|Maxthon/.test(zn)||zn!="Safari"&&/^iOS/.test(Qn)&&/\bSafari\b/.test(Go[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(zn)&&Go[1])&&(wr=Go[Go.length-1])&&Eo.push(wr),Eo.length&&(Eo=["("+Eo.join("; ")+")"]),Qa&&Bo&&Bo.indexOf(Qa)<0&&Eo.push("on "+Qa),Bo&&Eo.push((/^on /.test(Eo[Eo.length-1])?"":"on ")+Bo),Qn&&(wr=/ ([\d.+]+)$/.exec(Qn),xn=wr&&Qn.charAt(Qn.length-wr[0].length-1)=="/",Qn={architecture:32,family:wr&&!xn?Qn.replace(wr[0],""):Qn,version:wr?wr[1]:null,toString:function(){var Is=this.version;return this.family+(Is&&!xn?" "+Is:"")+(this.architecture==64?" 64-bit":"")}}),(wr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Ci))&&!/\bi686\b/i.test(Ci)?(Qn&&(Qn.architecture=64,Qn.family=Qn.family.replace(RegExp(" *"+wr),"")),zn&&(/\bWOW64\b/i.test(hn)||$a&&/\w(?:86|32)$/.test(jo.cpuClass||jo.platform)&&!/\bWin64; x64\b/i.test(hn))&&Eo.unshift("32-bit")):Qn&&/^OS X/.test(Qn.family)&&zn=="Chrome"&&parseFloat(lo)>=39&&(Qn.architecture=64),hn||(hn=null);var xs={};return xs.description=hn,xs.layout=Go&&Go[0],xs.manufacturer=Qa,xs.name=zn,xs.prerelease=Mi,xs.product=Bo,xs.ua=hn,xs.version=zn&&lo,xs.os=Qn||{architecture:null,family:null,version:null,toString:function(){return"null"}},xs.parse=wn,xs.toString=function(){return this.description||""},xs.version&&Eo.unshift(lo),xs.name&&Eo.unshift(zn),Qn&&zn&&(Qn!=String(Qn).split(" ")[0]||Qn!=zn.split(" ")[0]&&!Bo)&&Eo.push(Bo?"("+Qn+")":"on "+Qn),Eo.length&&(xs.description=Eo.join(" ")),xs}();F&&O?br(Xr,function(wn,hn){F[hn]=wn}):D.platform=Xr}).call(e)}),Wy=o(function(S,x){S.exports=function(){var D={d:function(wr,xn){for(var Nn in xn)D.o(xn,Nn)&&!D.o(wr,Nn)&&Wi(wr,Nn,{enumerable:!0,get:xn[Nn]})},o:function(wr,xn){return Object.prototype.hasOwnProperty.call(wr,xn)}},F={};D.d(F,{default:function(){return jo}});var O=function jn(wr){for(var xn in function(Nn,Cn){if(!(Nn instanceof Cn))throw new TypeError("Cannot call a class as a function")}(this,jn),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(Nn){},this.onProgress=function(Nn){},this.onUploadProgress=function(Nn){},this.onComplete=function(Nn){},wr)this[xn]=wr[xn]};function oe(jn,wr){var xn=ha!==void 0&&Va(jn)||jn["@@iterator"];if(!xn){if(ns(jn)||(xn=function(eo,ro){if(eo){var Do;if(typeof eo=="string")return _e(eo,ro);var go=Co(Do=Object.prototype.toString.call(eo)).call(Do,8,-1);return go==="Object"&&eo.constructor&&(go=eo.constructor.name),go==="Map"||go==="Set"?_c(eo):go==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(go)?_e(eo,ro):void 0}}(jn))||wr&&jn&&typeof jn.length=="number"){xn&&(jn=xn);var Nn=0,Cn=function(){};return{s:Cn,n:function(){return Nn>=jn.length?{done:!0}:{done:!1,value:jn[Nn++]}},e:function(ro){throw ro},f:Cn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zr,On=!0,Un=!1;return{s:function(){xn=xn.call(jn)},n:function(){var ro=xn.next();return On=ro.done,ro},e:function(ro){Un=!0,Zr=ro},f:function(){try{On||xn.return==null||xn.return()}finally{if(Un)throw Zr}}}}function _e(jn,wr){(wr==null||wr>jn.length)&&(wr=jn.length);for(var xn=0,Nn=new Array(wr);xn<wr;xn++)Nn[xn]=jn[xn];return Nn}var z=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(z={privateObj:{},setItem:function(wr,xn){z.privateObj[wr]=xn},getItem:function(wr){return z.privateObj[wr]},removeItem:function(wr){delete z.privateObj[wr]},getKeys:function(){return na(z.privateObj)}});var qe={getFileKey:function(wr){var xn=wr.size.toString(),Nn=wr.lastModified.toString();return"_NosUploader_"+wr.name+Co(xn).call(xn,xn.length-5)+Co(Nn).call(Nn,Nn.length-5)},getFileInfo:function(wr){var xn=z.getItem(wr);if(!xn)return null;try{return JSON.parse(xn)}catch{return null}},initFile:function(wr,xn,Nn){qe.clearExpiredInfo();var Cn=this.getFileKey(xn),Zr={ctx:wr.ctx!==void 0?wr.ctx:"",bucket:wr.bucketName,obj:wr.objectName,token:wr.token,modifyAt:ts(),end:!1};return wr.payload&&(Zr.payload=wr.payload),Nn&&z.setItem(Cn,mo(Zr)),Cn},setUploadContext:function(wr,xn,Nn){var Cn=this.getFileInfo(wr);Cn&&(Cn.ctx=xn,Nn&&z.setItem(wr,mo(Cn)))},setComplete:function(wr,xn){var Nn=this.getFileInfo(wr);Nn&&(Nn.modifyAt=ts(),Nn.end=!0,xn&&z.setItem(wr,mo(Nn)))},getUploadContext:function(wr){var xn=this.getFileInfo(wr);return xn?xn.ctx:""},removeFileInfo:function(wr){pa(wr).call(wr,"_NosUploader_")===0&&z.removeItem(wr)},clearExpiredInfo:function(){var wr,xn=typeof z.getKeys=="function"?z.getKeys():na(z),Nn=ts(),Cn=[],Zr=oe(xn);try{for(Zr.s();!(wr=Zr.n()).done;){var On=wr.value;if(pa(On).call(On,"_NosUploader_")===0){var Un=qe.getFileInfo(On);Un===null||Nn-Un.modifyAt>jo.expireTime?z.removeItem(On):Cn.push({fileInfo:Un,key:On})}}}catch(So){Zr.e(So)}finally{Zr.f()}if(Cn.length>jo.maxFileCache){var eo,ro,Do=oe(Co(eo=Wl(Cn).call(Cn,function(So,Io){return Io.fileInfo.modifyAt-So.fileInfo.modifyAt})).call(eo,jo.maxFileCache));try{for(Do.s();!(ro=Do.n()).done;){var go,Zo=ro.value;pa(go=Zo.key).call(go,"_NosUploader_")===0&&z.removeItem(Zo.key)}}catch(So){Do.e(So)}finally{Do.f()}}}},jt=qe;function lr(jn){return(lr=typeof ha=="function"&&typeof cm=="symbol"?function(wr){return typeof wr}:function(wr){return wr&&typeof ha=="function"&&wr.constructor===ha&&wr!==ha.prototype?"symbol":typeof wr})(jn)}function fr(jn,wr){return!wr||lr(wr)!=="object"&&typeof wr!="function"?function(xn){if(xn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xn}(jn):wr}function Sr(jn){var wr=typeof nl=="function"?new nl:void 0;return(Sr=function(Nn){var Cn,Zr;if(Nn===null||(Zr=Nn,pa(Cn=Function.toString.call(Zr)).call(Cn,"[native code]")===-1))return Nn;if(typeof Nn!="function")throw new TypeError("Super expression must either be null or a function");if(wr!==void 0){if(wr.has(Nn))return wr.get(Nn);wr.set(Nn,On)}function On(){return br(Nn,arguments,$r(this).constructor)}return On.prototype=Ja(Nn.prototype,{constructor:{value:On,enumerable:!1,writable:!0,configurable:!0}}),Dr(On,Nn)})(jn)}function br(jn,wr,xn){return(br=Er()?rc:function(Nn,Cn,Zr){var On=[null];On.push.apply(On,Cn);var Un=new(Oo(Function).apply(Nn,On));return Zr&&Dr(Un,Zr.prototype),Un}).apply(null,arguments)}function Er(){if(typeof Reflect>"u"||!rc||rc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(rc(Boolean,[],function(){})),!0}catch{return!1}}function Dr(jn,wr){return(Dr=Ns||function(xn,Nn){return xn.__proto__=Nn,xn})(jn,wr)}function $r(jn){return($r=Ns?js:function(wr){return wr.__proto__||js(wr)})(jn)}var vn=function(jn){(function(Zr,On){if(typeof On!="function"&&On!==null)throw new TypeError("Super expression must either be null or a function");Zr.prototype=Ja(On&&On.prototype,{constructor:{value:Zr,writable:!0,configurable:!0}}),On&&Dr(Zr,On)})(Cn,jn);var wr,xn,Nn=(wr=Cn,xn=Er(),function(){var Zr,On=$r(wr);if(xn){var Un=$r(this).constructor;Zr=rc(On,arguments,Un)}else Zr=On.apply(this,arguments);return fr(this,Zr)});function Cn(Zr,On){var Un;return function(eo,ro){if(!(eo instanceof ro))throw new TypeError("Cannot call a class as a function")}(this,Cn),(Un=Nn.call(this,"NosUploadError:"+Zr)).errCode=On,Un.errMsg=Zr,Un}return Cn}(Sr(Error)),Xr=function jn(wr,xn,Nn){if(wr.uploadState==="uploading"){var Cn=wr.config,Zr=wr.param,On=jt.getUploadContext(wr.fileKey);if(!On)return Nn(0);var Un=new XMLHttpRequest,eo=Cn.directUploadAddr+"/".concat(Zr.bucketName)+"/".concat(encodeURIComponent(Zr.objectName))+"?uploadContext"+"&context=".concat(On)+"&version=".concat(Cn.version);Un.onreadystatechange=function(){var ro;if(wr.uploadState!=="abort"&&Un.readyState===4){var Do,go,Zo,So;try{So=JSON.parse(Un.responseText)}catch{So={errMsg:"JsonParseError in getOffset",errCode:500}}Un.status===200?So.errCode?wr.config.onError(new vn(So.errMsg,So.errCode)):Nn(So.offset):Un.status.toString().match(/^5/)?jn(wr,xn-1,Nn):xn>0?(typeof((ro=Cn.logger)===null||ro===void 0?void 0:ro.error)=="function"&&Cn.logger.error(qs(Do="getOffset(".concat(eo,") error. retry after 3 seconds. ")).call(Do,new Date().toTimeString())),sa(function(){jn(wr,xn-1,Nn)},3500)):(jt.removeFileInfo(wr.fileKey),Un.status?Cn.onError(new vn(qs(go=qs(Zo="getOffset(".concat(eo,") error: ")).call(Zo,Un.status," ")).call(go,Un.statusText))):Cn.onError(new vn("getOffset(".concat(eo,") error. no Error Code"))))}},Un.open("get",eo),Un.setRequestHeader("x-nos-token",Zr.token),Un.timeout=Cn.getOffsetTimeout,Un.send()}},wn=function jn(wr,xn,Nn,Cn){if(wr.uploadState==="uploading"){var Zr=wr.param,On=wr.config,Un=Co(File.prototype),eo=Zr.ctx!==void 0?Zr.ctx:"",ro=xn+On.trunkSize>wr.file.size,Do=ro?wr.file.size:xn+On.trunkSize,go=new XMLHttpRequest,Zo=On.directUploadAddr+"/".concat(Zr.bucketName)+"/".concat(encodeURIComponent(Zr.objectName));if(go.upload.onprogress=function(Io){if(wr.uploadState!=="abort"){var ea=0;Io.lengthComputable?(ea=(xn+Io.loaded)/wr.file.size,On.onProgress(ea),On.onUploadProgress({loaded:Io.loaded,total:wr.file.size,percentage:ea,percentageText:(100*ea).toFixed(2)+"%"})):On.onError(new vn("browser does not support query upload progress"))}},go.onreadystatechange=function(){var Io,ea;if(wr.uploadState!=="abort"&&go.readyState===4){var Ci,Eo,Mi,$a;try{$a=JSON.parse(go.responseText)}catch(lo){typeof((Io=On.logger)===null||Io===void 0?void 0:Io.error)=="function"&&On.logger.error("JsonParseError in uploadTrunk",lo),$a={errMsg:"JsonParseError in uploadTrunk"}}go.status===200?(wr.setContext($a.context),ro?(Cn(),wr.setComplete()):jn(wr,$a.offset,On.retryCount,Cn)):go.status.toString().match(/^5/)?Nn>0?jn(wr,xn,Nn-1,Cn):(jt.removeFileInfo(wr.fileKey),On.onError(new vn($a.errMsg,$a.errCode))):Nn>0?(typeof((ea=On.logger)===null||ea===void 0?void 0:ea.error)=="function"&&On.logger.error(qs(Ci="uploadTrunk(".concat(Zo,") error. retry after 3 seconds. ")).call(Ci,new Date().toTimeString())),sa(function(){jn(wr,xn,Nn-1,Cn)},3500)):(jt.removeFileInfo(wr.fileKey),go.status?On.onError(new vn(qs(Eo=qs(Mi="uploadTrunk(".concat(Zo,") error: ")).call(Mi,go.status," ")).call(Eo,go.statusText))):On.onError(new vn("uploadTrunk(".concat(Zo,") error. no Error Code. Please check your network"))))}},go.open("post",Zo+"?offset=".concat(xn)+"&complete=".concat(ro)+"&context=".concat(eo)+"&version=".concat(On.version)),go.setRequestHeader("x-nos-token",Zr.token),wr.file.type&&go.setRequestHeader("content-type",wr.file.type),go.timeout=On.trunkUploadTimeout,typeof FileReader<"u"){var So=new FileReader;So.addEventListener("load",function(Io){var ea;!((ea=Io==null?void 0:Io.target)===null||ea===void 0)&&ea.result?go.send(Io.target.result):On.onError(new vn("Read ArrayBuffer failed"))}),So.addEventListener("error",function(Io){var ea=Io.target.error;On.onError(new vn("Read ArrayBuffer error. ".concat(ea.toString()),ea.code))}),So.readAsArrayBuffer(Un.call(wr.file,xn,Do))}else go.send(Un.call(wr.file,xn,Do))}};function hn(jn,wr){for(var xn=0;xn<wr.length;xn++){var Nn=wr[xn];Nn.enumerable=Nn.enumerable||!1,Nn.configurable=!0,"value"in Nn&&(Nn.writable=!0),Wi(jn,Nn.key,Nn)}}var Gn=function(){function jn(xn,Nn,Cn){(function(Zr,On){if(!(Zr instanceof On))throw new TypeError("Cannot call a class as a function")})(this,jn),this.uploadState="paused",this.config=Cn,this.file=xn,this.param=Nn,this.fileKey=jt.initFile(Nn,xn,this.config.enableCache),this.resume()}var wr;return(wr=[{key:"resume",value:function(){var Nn=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Cn=this.config;Xr(this,Cn.retryCount,function(Zr){wn(Nn,Zr,Cn.retryCount,function(){Nn.setUploadState("ended"),typeof Cn.onComplete=="function"&&Cn.onComplete(Nn.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),jt.removeFileInfo(this.fileKey),this.config.onError(new vn("Upload Aborted",10499))}},{key:"setUploadState",value:function(Nn){Nn!==this.uploadState&&(this.uploadState=Nn)}},{key:"setContext",value:function(Nn){jt.setUploadContext(this.fileKey,Nn,this.config.enableCache),this.param.ctx=Nn}},{key:"setComplete",value:function(){jt.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&hn(jn.prototype,wr),jn}(),Dn={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(wr){var xn=jt.getFileKey(wr),Nn=jt.getFileInfo(xn);return Nn===null?null:ts()-Nn.modifyAt>Dn.expireTime?(jt.removeFileInfo(xn),null):{uploadInfo:Tn({bucketName:Nn.bucket,objectName:Nn.obj,token:Nn.token,ctx:Nn.ctx},Nn.payload?{payload:Nn.payload}:{}),complete:Nn.end}},setMaxFileCache:function(wr){Dn.maxFileCache=wr},setExpireTime:function(wr){Dn.expireTime=wr},printCaches:function(){for(var wr=0,xn=na(localStorage);wr<xn.length;wr++){var Nn=xn[wr],Cn=jt.getFileInfo(Nn);Cn&&console.log(Cn,"modifiedAt",new Date(Cn.modifyAt).toTimeString())}},createConfig:function(wr){return new O(wr)},createTask:function(wr,xn,Nn){return new Gn(wr,xn,Nn)}},jo=Dn;return F.default}()}),Cl=o(function(S,x){S.exports=function(){function D(_e){if(_e){var z,qe="";return In(z=na(_e)).call(z,function(jt,lr){qe+=lr===0?"?":"&",qe+=jt+"="+_e[jt]}),qe}return""}function F(_e,z,qe,jt){return Error.call(this,qe),this.source=_e,this.code=z,this.desc=qe,this.detail=jt||{},this}function O(_e,z){var qe=Ja(z.prototype);qe.constructor=_e,_e.prototype=qe}function oe(_e,z){z===void 0&&(z={dataType:"json",method:"GET",timeout:5e3});var qe=z.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",jt=z.method==="GET"?D(z.params):"";return new co(function(lr,fr){if(window.XMLHttpRequest){var Sr,br=new XMLHttpRequest;if(br.onreadystatechange=function(){if(br.readyState===4)if(br.status===200){try{Sr=JSON.parse(br.response||"{}")}catch{Sr=br.response}lr({status:br.status,data:Sr})}else fr(new F(1,br.status,br.statusText))},br.open(z.method,""+_e+jt),br.timeout=z.timeout||5e3,br.setRequestHeader("Content-Type",qe),z.headers)for(var Er in z.headers)br.setRequestHeader(Er,z.headers[Er]);br.ontimeout=function(Dr){fr(new F(1,408,Dr&&Dr.message?Dr.message:"request timeout"))},br.send(mo(z.data))}else fr(new F(2,10400,"request no suppout"))})}return O(F,Error),oe}()}),tu=console,MC={setLogger:function(x){tu=x},platform:"BROWSER",localStorage:window.localStorage,request:Cl,WebSocket:window.WebSocket,uploadFile:function(x){return Mr(this,void 0,void 0,sr.mark(function D(){var F,O,oe,_e,z,qe;return sr.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(x.fileInput||x.file){lr.next=2;break}throw new Error("File not exist");case 2:if(!x.file){lr.next=6;break}_e=x.file,lr.next=20;break;case 6:if(typeof x.fileInput!="string"){lr.next=15;break}if(!((z=document.getElementById(x.fileInput))&&z.files&&z.files[0])){lr.next=12;break}_e=z.files[0],lr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:lr.next=20;break;case 15:if(!(x.fileInput&&x.fileInput.files&&x.fileInput.files[0])){lr.next=19;break}_e=x.fileInput.files[0],lr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+x.fileInput);case 20:if(!(x.maxSize&&_e.size>x.maxSize)){lr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+x.maxSize+", get "+_e.size);case 22:return lr.next=24,new co(function(fr,Sr){var br=Wy.createConfig({enableCache:!1,directUploadAddr:x.chunkUploadHost,onError:function($r){Sr($r)},onProgress:x.onUploadProgress||function(){},onComplete:function($r){fr($r)}}),Er=Wy.createTask(_e,{bucketName:x.nosToken.bucket,objectName:decodeURIComponent(x.nosToken.objectName),token:x.nosToken.token},br);try{x.onUploadStart&&x.onUploadStart(Er)}catch(Dr){tu.error("Adapter uploadFile: options.onUploadStart error",Dr&&Dr.message),Er.abort(),Sr(Dr)}});case 24:return(qe=lr.sent).name=_e.name,qe.size=_e.size,qe.type=_e.type,qe.ext=Ky(F=qe.name).call(F,".")>-1?Co(O=qe.name).call(O,Ky(oe=qe.name).call(oe,".")+1).toLowerCase():"",lr.abrupt("return",qe);case 30:case"end":return lr.stop()}},D)}))},getSystemInfo:function(){var x,D;return{os:((x=Rc.os)===null||x===void 0?void 0:x.family)||"",osVer:((D=Rc.os)===null||D===void 0?void 0:D.version)||"",browser:Rc.name||"",browserVer:Rc.version||"",hostEnv:"BROWSER",hostEnvVer:Rc.version||"",hostInfo:Rc.ua||""}}};return zd.setAdapters(MC),zd})})(QCHAT_BROWSER_SDK);var QCHAT_BROWSER_SDKExports=QCHAT_BROWSER_SDK.exports;const QChatSDK=getDefaultExportFromCjs(QCHAT_BROWSER_SDKExports);var NIM_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function o(w){var M={exports:{}};return w(M,M.exports),M.exports}var s,a,i=n(o(function(w){w.exports=function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L},w.exports.__esModule=!0,w.exports.default=w.exports})),d=function(w){return w&&w.Math==Math&&w},u=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),c=function(w){try{return!!w()}catch{return!0}},m=!c(function(){var w=(function(){}).bind();return typeof w!="function"||w.hasOwnProperty("prototype")}),v=Function.prototype,g=v.apply,b=v.call,T=typeof Reflect=="object"&&Reflect.apply||(m?b.bind(g):function(){return b.apply(g,arguments)}),k=Function.prototype,y=k.bind,A=k.call,V=m&&y.bind(A,A),Ce=m?function(w){return w&&V(w)}:function(w){return w&&function(){return A.apply(w,arguments)}},ie=function(w){return typeof w=="function"},Oe=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),he=Function.prototype.call,Y=m?he.bind(he):function(){return he.apply(he,arguments)},ae={}.propertyIsEnumerable,Fe=Object.getOwnPropertyDescriptor,ze={f:Fe&&!ae.call({1:2},1)?function(M){var L=Fe(this,M);return!!L&&L.enumerable}:ae},pe=function(w,M){return{enumerable:!(1&w),configurable:!(2&w),writable:!(4&w),value:M}},le=Ce({}.toString),xe=Ce("".slice),ue=function(w){return xe(le(w),8,-1)},Ve=Object,Ue=Ce("".split),er=c(function(){return!Ve("z").propertyIsEnumerable(0)})?function(w){return ue(w)=="String"?Ue(w,""):Ve(w)}:Ve,At=function(w){return w==null},ur=TypeError,pr=function(w){if(At(w))throw ur("Can't call method on "+w);return w},ar=function(w){return er(pr(w))},hr=typeof document=="object"&&document.all,Ne=hr===void 0&&hr!==void 0?function(w){return typeof w=="object"?w!==null:ie(w)||w===hr}:function(w){return typeof w=="object"?w!==null:ie(w)},or={},ir=function(w){return ie(w)?w:void 0},$e=function(w,M){return arguments.length<2?ir(or[w])||ir(u[w]):or[w]&&or[w][M]||u[w]&&u[w][M]},tr=Ce({}.isPrototypeOf),nr=$e("navigator","userAgent")||"",Pt=u.process,Et=u.Deno,kt=Pt&&Pt.versions||Et&&Et.version,rr=kt&&kt.v8;rr&&(a=(s=rr.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&nr&&(!(s=nr.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=nr.match(/Chrome\/(\d+)/))&&(a=+s[1]);var cr,mr=a,yr=!!Object.getOwnPropertySymbols&&!c(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&mr&&mr<41}),Tr=yr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ir=Object,kr=Tr?function(w){return typeof w=="symbol"}:function(w){var M=$e("Symbol");return ie(M)&&tr(M.prototype,Ir(w))},Ar=String,Rr=function(w){try{return Ar(w)}catch{return"Object"}},Mn=TypeError,Or=function(w){if(ie(w))return w;throw Mn(Rr(w)+" is not a function")},Pr=function(w,M){var L=w[M];return At(L)?void 0:Or(L)},Nr=TypeError,Wr=Object.defineProperty,Yr="__core-js_shared__",Ur=u[Yr]||function(w,M){try{Wr(u,w,{value:M,configurable:!0,writable:!0})}catch{u[w]=M}return M}(Yr,{}),qr=o(function(w){(w.exports=function(M,L){return Ur[M]||(Ur[M]=L!==void 0?L:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),Yn=Object,$n=function(w){return Yn(pr(w))},Jr=Ce({}.hasOwnProperty),Fr=Object.hasOwn||function(M,L){return Jr($n(M),L)},Wn=0,ho=Math.random(),bo=Ce(1 .toString),uo=function(w){return"Symbol("+(w===void 0?"":w)+")_"+bo(++Wn+ho,36)},po=qr("wks"),No=u.Symbol,An=No&&No.for,Sa=Tr?No:No&&No.withoutSetter||uo,to=function(w){if(!Fr(po,w)||!yr&&typeof po[w]!="string"){var M="Symbol."+w;yr&&Fr(No,w)?po[w]=No[w]:po[w]=Tr&&An?An(M):Sa(M)}return po[w]},Lr=TypeError,Qr=to("toPrimitive"),Bn=function(w,M){if(!Ne(w)||kr(w))return w;var L,$=Pr(w,Qr);if($){if(M===void 0&&(M="default"),L=Y($,w,M),!Ne(L)||kr(L))return L;throw Lr("Can't convert object to primitive value")}return M===void 0&&(M="number"),function(_,re){var Ie,de;if(re==="string"&&ie(Ie=_.toString)&&!Ne(de=Y(Ie,_))||ie(Ie=_.valueOf)&&!Ne(de=Y(Ie,_))||re!=="string"&&ie(Ie=_.toString)&&!Ne(de=Y(Ie,_)))return de;throw Nr("Can't convert object to primitive value")}(w,M)},Xn=function(w){var M=Bn(w,"string");return kr(M)?M:M+""},ko=u.document,no=Ne(ko)&&Ne(ko.createElement),Ra=function(w){return no?ko.createElement(w):{}},fs=!Oe&&!c(function(){return Object.defineProperty(Ra("div"),"a",{get:function(){return 7}}).a!=7}),ms=Object.getOwnPropertyDescriptor,ga={f:Oe?ms:function(M,L){if(M=ar(M),L=Xn(L),fs)try{return ms(M,L)}catch{}if(Fr(M,L))return pe(!Y(ze.f,M,L),M[L])}},Fi=/#|\.prototype\./,Li=function(w,M){var L=Zy[Xy(w)];return L==tb||L!=eb&&(ie(M)?c(M):!!M)},Xy=Li.normalize=function(w){return String(w).replace(Fi,".").toLowerCase()},Zy=Li.data={},eb=Li.NATIVE="N",tb=Li.POLYFILL="P",af=Li,rb=Ce(Ce.bind),$o=function(w,M){return Or(w),M===void 0?w:m?rb(w,M):function(){return w.apply(M,arguments)}},sf=Oe&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nb=String,ob=TypeError,Vn=function(w){if(Ne(w))return w;throw ob(nb(w)+" is not an object")},ab=TypeError,ru=Object.defineProperty,sb=Object.getOwnPropertyDescriptor,ib="enumerable",cb="configurable",lb="writable",ua={f:Oe?sf?function(M,L,$){if(Vn(M),L=Xn(L),Vn($),typeof M=="function"&&L==="prototype"&&"value"in $&&lb in $&&!$.writable){var _=sb(M,L);_&&_.writable&&(M[L]=$.value,$={configurable:cb in $?$.configurable:_.configurable,enumerable:ib in $?$.enumerable:_.enumerable,writable:!1})}return ru(M,L,$)}:ru:function(M,L,$){if(Vn(M),L=Xn(L),Vn($),fs)try{return ru(M,L,$)}catch{}if("get"in $||"set"in $)throw ab("Accessors not supported");return"value"in $&&(M[L]=$.value),M}},Jo=Oe?function(w,M,L){return ua.f(w,M,pe(1,L))}:function(w,M,L){return w[M]=L,w},ub=ga.f,db=function(w){var M=function(L,$,_){if(this instanceof M){switch(arguments.length){case 0:return new w;case 1:return new w(L);case 2:return new w(L,$)}return new w(L,$,_)}return T(w,this,arguments)};return M.prototype=w.prototype,M},Vr=function(w,M){var L,$,_,re,Ie,de,Lt,Dt,dr=w.target,gr=w.global,vr=w.stat,Cr=w.proto,xr=gr?u:vr?u[dr]:(u[dr]||{}).prototype,Br=gr?or:or[dr]||Jo(or,dr,{})[dr],jr=Br.prototype;for(_ in M)L=!af(gr?_:dr+(vr?".":"#")+_,w.forced)&&xr&&Fr(xr,_),Ie=Br[_],L&&(de=w.dontCallGetSet?(Dt=ub(xr,_))&&Dt.value:xr[_]),re=L&&de?de:M[_],L&&typeof Ie==typeof re||(Lt=w.bind&&L?$o(re,u):w.wrap&&L?db(re):Cr&&ie(re)?Ce(re):re,(w.sham||re&&re.sham||Ie&&Ie.sham)&&Jo(Lt,"sham",!0),Jo(Br,_,Lt),Cr&&(Fr(or,$=dr+"Prototype")||Jo(or,$,{}),Jo(or[$],_,re),w.real&&jr&&!jr[_]&&Jo(jr,_,re)))},pb=Math.ceil,fb=Math.floor,mb=Math.trunc||function(M){var L=+M;return(L>0?fb:pb)(L)},$i=function(w){var M=+w;return M!=M||M===0?0:mb(M)},gb=Math.max,hb=Math.min,ri=function(w,M){var L=$i(w);return L<0?gb(L+M,0):hb(L,M)},vb=Math.min,Ia=function(w){return(M=w.length)>0?vb($i(M),9007199254740991):0;var M},cf=function(w){return function(M,L,$){var _,re=ar(M),Ie=Ia(re),de=ri($,Ie);if(w&&L!=L){for(;Ie>de;)if((_=re[de++])!=_)return!0}else for(;Ie>de;de++)if((w||de in re)&&re[de]===L)return w||de||0;return!w&&-1}},nu={includes:cf(!0),indexOf:cf(!1)},ni={},yb=nu.indexOf,lf=Ce([].push),uf=function(w,M){var L,$=ar(w),_=0,re=[];for(L in $)!Fr(ni,L)&&Fr($,L)&&lf(re,L);for(;M.length>_;)Fr($,L=M[_++])&&(~yb(re,L)||lf(re,L));return re},$c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gs=Object.keys||function(M){return uf(M,$c)},bb=Oe&&!sf?Object.defineProperties:function(M,L){Vn(M);for(var $,_=ar(L),re=gs(L),Ie=re.length,de=0;Ie>de;)ua.f(M,$=re[de++],_[$]);return M},df={f:bb},ou=$e("document","documentElement"),pf=qr("keys"),jc=function(w){return pf[w]||(pf[w]=uo(w))},ff=jc("IE_PROTO"),au=function(){},mf=function(w){return"<script>"+w+"<\/script>"},gf=function(w){w.write(mf("")),w.close();var M=w.parentWindow.Object;return w=null,M},Dc=function(){try{cr=new ActiveXObject("htmlfile")}catch{}var w,M;Dc=typeof document<"u"?document.domain&&cr?gf(cr):((M=Ra("iframe")).style.display="none",ou.appendChild(M),M.src="javascript:",(w=M.contentWindow.document).open(),w.write(mf("document.F=Object")),w.close(),w.F):gf(cr);for(var L=$c.length;L--;)delete Dc.prototype[$c[L]];return Dc()};ni[ff]=!0;var Ea=Object.create||function(M,L){var $;return M!==null?(au.prototype=Vn(M),$=new au,au.prototype=null,$[ff]=M):$=Dc(),L===void 0?$:df.f($,L)};Vr({target:"Object",stat:!0,sham:!Oe},{create:Ea});var Tb=or.Object,Ja=function(M,L){return Tb.create(M,L)},Sb=String,Cb=TypeError,ji=Object.setPrototypeOf||("__proto__"in{}?function(){var w,M=!1,L={};try{(w=Ce(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(L,[]),M=L instanceof Array}catch{}return function(_,re){return Vn(_),function(Ie){if(typeof Ie=="object"||ie(Ie))return Ie;throw Cb("Can't set "+Sb(Ie)+" as a prototype")}(re),M?w(_,re):_.__proto__=re,_}}():void 0);Vr({target:"Object",stat:!0},{setPrototypeOf:ji});var Ns=or.Object.setPrototypeOf,hs=Ce([].slice),hf=Function,Mb=Ce([].concat),kb=Ce([].join),su={},_b=function(w,M,L){if(!Fr(su,M)){for(var $=[],_=0;_<M;_++)$[_]="a["+_+"]";su[M]=hf("C,a","return new C("+kb($,",")+")")}return su[M](w,L)},iu=m?hf.bind:function(M){var L=Or(this),$=L.prototype,_=hs(arguments,1),re=function(){var de=Mb(_,hs(arguments));return this instanceof re?_b(L,de.length,de):L.apply(M,de)};return Ne($)&&(re.prototype=$),re};Vr({target:"Function",proto:!0,forced:Function.bind!==iu},{bind:iu});var Uo=function(w){return or[w+"Prototype"]},wb=Uo("Function").bind,cu=Function.prototype,Oo=function(w){var M=w.bind;return w===cu||tr(cu,w)&&M===cu.bind?wb:M},lu=o(function(w){function M(L,$){var _;return w.exports=M=Ns?Oo(_=Ns).call(_):function(Ie,de){return Ie.__proto__=de,Ie},w.exports.__esModule=!0,w.exports.default=w.exports,M(L,$)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),Ro=n(o(function(w){w.exports=function(L,$){L.prototype=Ja($.prototype),L.prototype.constructor=L,lu(L,$)},w.exports.__esModule=!0,w.exports.default=w.exports})),Ya=Array.isArray||function(M){return ue(M)=="Array"},xb=TypeError,uu=function(w){if(w>9007199254740991)throw xb("Maximum allowed index exceeded");return w},Rs=function(w,M,L){var $=Xn(M);$ in w?ua.f(w,$,pe(0,L)):w[$]=L},vf={};vf[to("toStringTag")]="z";var du=String(vf)==="[object z]",Ib=to("toStringTag"),Eb=Object,Pb=ue(function(){return arguments}())=="Arguments",Bs=du?ue:function(w){var M,L,$;return w===void 0?"Undefined":w===null?"Null":typeof(L=function(_,re){try{return _[re]}catch{}}(M=Eb(w),Ib))=="string"?L:Pb?ue(M):($=ue(M))=="Object"&&ie(M.callee)?"Arguments":$},Ab=Ce(Function.toString);ie(Ur.inspectSource)||(Ur.inspectSource=function(w){return Ab(w)});var yf=Ur.inspectSource,bf=function(){},Ob=[],Tf=$e("Reflect","construct"),pu=/^\s*(?:class|function)\b/,Nb=Ce(pu.exec),Rb=!pu.exec(bf),Di=function(M){if(!ie(M))return!1;try{return Tf(bf,Ob,M),!0}catch{return!1}},Sf=function(M){if(!ie(M))return!1;switch(Bs(M)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Rb||!!Nb(pu,yf(M))}catch{return!0}};Sf.sham=!0;var Uc=!Tf||c(function(){var w;return Di(Di.call)||!Di(Object)||!Di(function(){w=!0})||w})?Sf:Di,Bb=to("species"),Cf=Array,fu=function(w,M){return new(function(L){var $;return Ya(L)&&($=L.constructor,(Uc($)&&($===Cf||Ya($.prototype))||Ne($)&&($=$[Bb])===null)&&($=void 0)),$===void 0?Cf:$}(w))(M===0?0:M)},Fb=to("species"),Ui=function(w){return mr>=51||!c(function(){var M=[];return(M.constructor={})[Fb]=function(){return{foo:1}},M[w](Boolean).foo!==1})},Mf=to("isConcatSpreadable"),Lb=mr>=51||!c(function(){var w=[];return w[Mf]=!1,w.concat()[0]!==w}),$b=Ui("concat"),jb=function(w){if(!Ne(w))return!1;var M=w[Mf];return M!==void 0?!!M:Ya(w)};Vr({target:"Array",proto:!0,arity:1,forced:!Lb||!$b},{concat:function(M){var L,$,_,re,Ie,de=$n(this),Lt=fu(de,0),Dt=0;for(L=-1,_=arguments.length;L<_;L++)if(jb(Ie=L===-1?de:arguments[L]))for(re=Ia(Ie),uu(Dt+re),$=0;$<re;$++,Dt++)$ in Ie&&Rs(Lt,Dt,Ie[$]);else uu(Dt+1),Rs(Lt,Dt++,Ie);return Lt.length=Dt,Lt}});var qc,qi,Vc,Db=String,Aa=function(w){if(Bs(w)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Db(w)},Ub=$c.concat("length","prototype"),Vi={f:Object.getOwnPropertyNames||function(M){return uf(M,Ub)}},qb=Array,Vb=Math.max,mu=function(w,M,L){for(var $=Ia(w),_=ri(M,$),re=ri(L===void 0?$:L,$),Ie=qb(Vb(re-_,0)),de=0;_<re;_++,de++)Rs(Ie,de,w[_]);return Ie.length=de,Ie},kf=Vi.f,_f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gu={f:function(M){return _f&&ue(M)=="Window"?function(L){try{return kf(L)}catch{return mu(_f)}}(M):kf(ar(M))}},Hi={f:Object.getOwnPropertySymbols},vs=function(w,M,L,$){return $&&$.enumerable?w[M]=L:Jo(w,M,L),w},hu={f:to},Hb=ua.f,wo=function(w){var M=or.Symbol||(or.Symbol={});Fr(M,w)||Hb(M,w,{value:hu.f(w)})},wf=function(){var w=$e("Symbol"),M=w&&w.prototype,L=M&&M.valueOf,$=to("toPrimitive");M&&!M[$]&&vs(M,$,function(_){return Y(L,this)},{arity:1})},zb=du?{}.toString:function(){return"[object "+Bs(this)+"]"},Kb=ua.f,xf=to("toStringTag"),Fs=function(w,M,L,$){if(w){var _=L?w:w.prototype;Fr(_,xf)||Kb(_,xf,{configurable:!0,value:M}),$&&!du&&Jo(_,"toString",zb)}},If=u.WeakMap,Wb=ie(If)&&/native code/.test(String(If)),Ef="Object already initialized",vu=u.TypeError,Gb=u.WeakMap;if(Wb||Ur.state){var Ls=Ur.state||(Ur.state=new Gb),Qb=Ce(Ls.get),Pf=Ce(Ls.has),Jb=Ce(Ls.set);qc=function(w,M){if(Pf(Ls,w))throw vu(Ef);return M.facade=w,Jb(Ls,w,M),M},qi=function(w){return Qb(Ls,w)||{}},Vc=function(w){return Pf(Ls,w)}}else{var oi=jc("state");ni[oi]=!0,qc=function(w,M){if(Fr(w,oi))throw vu(Ef);return M.facade=w,Jo(w,oi,M),M},qi=function(w){return Fr(w,oi)?w[oi]:{}},Vc=function(w){return Fr(w,oi)}}var Pa={set:qc,get:qi,has:Vc,enforce:function(w){return Vc(w)?qi(w):qc(w,{})},getterFor:function(w){return function(M){var L;if(!Ne(M)||(L=qi(M)).type!==w)throw vu("Incompatible receiver, "+w+" required");return L}}},Af=Ce([].push),ys=function(w){var M=w==1,L=w==2,$=w==3,_=w==4,re=w==6,Ie=w==7,de=w==5||re;return function(Lt,Dt,dr,gr){for(var vr,Cr,xr=$n(Lt),Br=er(xr),jr=$o(Dt,dr),zr=Ia(Br),Hr=0,Kr=gr||fu,kn=M?Kr(Lt,zr):L||Ie?Kr(Lt,0):void 0;zr>Hr;Hr++)if((de||Hr in Br)&&(Cr=jr(vr=Br[Hr],Hr,xr),w))if(M)kn[Hr]=Cr;else if(Cr)switch(w){case 3:return!0;case 5:return vr;case 6:return Hr;case 2:Af(kn,vr)}else switch(w){case 4:return!1;case 7:Af(kn,vr)}return re?-1:$||_?_:kn}},bs={forEach:ys(0),map:ys(1),filter:ys(2),some:ys(3),every:ys(4),find:ys(5),findIndex:ys(6),filterReject:ys(7)},Hc=bs.forEach,da=jc("hidden"),zc="Symbol",Yb=Pa.set,Of=Pa.getterFor(zc),Ba=Object.prototype,$s=u.Symbol,zi=$s&&$s.prototype,Xb=u.TypeError,yu=u.QObject,Nf=ga.f,Ts=ua.f,Rf=gu.f,Zb=ze.f,Bf=Ce([].push),Xa=qr("symbols"),Ki=qr("op-symbols"),e0=qr("wks"),bu=!yu||!yu.prototype||!yu.prototype.findChild,Tu=Oe&&c(function(){return Ea(Ts({},"a",{get:function(){return Ts(this,"a",{value:7}).a}})).a!=7})?function(w,M,L){var $=Nf(Ba,M);$&&delete Ba[M],Ts(w,M,L),$&&w!==Ba&&Ts(Ba,M,$)}:Ts,Su=function(w,M){var L=Xa[w]=Ea(zi);return Yb(L,{type:zc,tag:w,description:M}),Oe||(L.description=M),L},Kc=function(M,L,$){M===Ba&&Kc(Ki,L,$),Vn(M);var _=Xn(L);return Vn($),Fr(Xa,_)?($.enumerable?(Fr(M,da)&&M[da][_]&&(M[da][_]=!1),$=Ea($,{enumerable:pe(0,!1)})):(Fr(M,da)||Ts(M,da,pe(1,{})),M[da][_]=!0),Tu(M,_,$)):Ts(M,_,$)},Cu=function(M,L){Vn(M);var $=ar(L),_=gs($).concat(jf($));return Hc(_,function(re){Oe&&!Y(Ff,$,re)||Kc(M,re,$[re])}),M},Ff=function(M){var L=Xn(M),$=Y(Zb,this,L);return!(this===Ba&&Fr(Xa,L)&&!Fr(Ki,L))&&(!($||!Fr(this,L)||!Fr(Xa,L)||Fr(this,da)&&this[da][L])||$)},Lf=function(M,L){var $=ar(M),_=Xn(L);if($!==Ba||!Fr(Xa,_)||Fr(Ki,_)){var re=Nf($,_);return!re||!Fr(Xa,_)||Fr($,da)&&$[da][_]||(re.enumerable=!0),re}},$f=function(M){var L=Rf(ar(M)),$=[];return Hc(L,function(_){Fr(Xa,_)||Fr(ni,_)||Bf($,_)}),$},jf=function(w){var M=w===Ba,L=Rf(M?Ki:ar(w)),$=[];return Hc(L,function(_){!Fr(Xa,_)||M&&!Fr(Ba,_)||Bf($,Xa[_])}),$};yr||($s=function(){if(tr(zi,this))throw Xb("Symbol is not a constructor");var M=arguments.length&&arguments[0]!==void 0?Aa(arguments[0]):void 0,L=uo(M),$=function(_){this===Ba&&Y($,Ki,_),Fr(this,da)&&Fr(this[da],L)&&(this[da][L]=!1),Tu(this,L,pe(1,_))};return Oe&&bu&&Tu(Ba,L,{configurable:!0,set:$}),Su(L,M)},zi=$s.prototype,vs(zi,"toString",function(){return Of(this).tag}),vs($s,"withoutSetter",function(w){return Su(uo(w),w)}),ze.f=Ff,ua.f=Kc,df.f=Cu,ga.f=Lf,Vi.f=gu.f=$f,Hi.f=jf,hu.f=function(w){return Su(to(w),w)},Oe&&Ts(zi,"description",{configurable:!0,get:function(){return Of(this).description}})),Vr({global:!0,constructor:!0,wrap:!0,forced:!yr,sham:!yr},{Symbol:$s}),Hc(gs(e0),function(w){wo(w)}),Vr({target:zc,stat:!0,forced:!yr},{useSetter:function(){bu=!0},useSimple:function(){bu=!1}}),Vr({target:"Object",stat:!0,forced:!yr,sham:!Oe},{create:function(M,L){return L===void 0?Ea(M):Cu(Ea(M),L)},defineProperty:Kc,defineProperties:Cu,getOwnPropertyDescriptor:Lf}),Vr({target:"Object",stat:!0,forced:!yr},{getOwnPropertyNames:$f}),wf(),Fs($s,zc),ni[da]=!0;var Df=yr&&!!Symbol.for&&!!Symbol.keyFor,Mu=qr("string-to-symbol-registry"),t0=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!Df},{for:function(w){var M=Aa(w);if(Fr(Mu,M))return Mu[M];var L=$e("Symbol")(M);return Mu[M]=L,t0[L]=M,L}});var Uf=qr("symbol-to-string-registry");Vr({target:"Symbol",stat:!0,forced:!Df},{keyFor:function(M){if(!kr(M))throw TypeError(Rr(M)+" is not a symbol");if(Fr(Uf,M))return Uf[M]}});var Ss=$e("JSON","stringify"),Wc=Ce(/./.exec),qf=Ce("".charAt),r0=Ce("".charCodeAt),n0=Ce("".replace),o0=Ce(1 .toString),a0=/[\uD800-\uDFFF]/g,Vf=/^[\uD800-\uDBFF]$/,Hf=/^[\uDC00-\uDFFF]$/,zf=!yr||c(function(){var w=$e("Symbol")();return Ss([w])!="[null]"||Ss({a:w})!="{}"||Ss(Object(w))!="{}"}),Kf=c(function(){return Ss("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ss("\uDEAD")!=='"\\udead"'}),s0=function(w,M){var L=hs(arguments),$=M;if((Ne(M)||w!==void 0)&&!kr(w))return Ya(M)||(M=function(_,re){if(ie($)&&(re=Y($,this,_,re)),!kr(re))return re}),L[1]=M,T(Ss,null,L)},i0=function(w,M,L){var $=qf(L,M-1),_=qf(L,M+1);return Wc(Vf,w)&&!Wc(Hf,_)||Wc(Hf,w)&&!Wc(Vf,$)?"\\u"+o0(r0(w,0),16):w};Ss&&Vr({target:"JSON",stat:!0,arity:3,forced:zf||Kf},{stringify:function(M,L,$){var _=hs(arguments),re=T(zf?s0:Ss,null,_);return Kf&&typeof re=="string"?n0(re,a0,i0):re}});var c0=!yr||c(function(){Hi.f(1)});Vr({target:"Object",stat:!0,forced:c0},{getOwnPropertySymbols:function(M){var L=Hi.f;return L?L($n(M)):[]}}),wo("asyncIterator"),wo("hasInstance"),wo("isConcatSpreadable"),wo("iterator"),wo("match"),wo("matchAll"),wo("replace"),wo("search"),wo("species"),wo("split"),wo("toPrimitive"),wf(),wo("toStringTag"),Fs($e("Symbol"),"Symbol"),wo("unscopables"),Fs(u.JSON,"JSON",!0);var Cs,Wf,Gf,l0=or.Symbol,Za={},Qf=Function.prototype,u0=Oe&&Object.getOwnPropertyDescriptor,ku=Fr(Qf,"name"),d0={EXISTS:ku,PROPER:ku&&(function(){}).name==="something",CONFIGURABLE:ku&&(!Oe||Oe&&u0(Qf,"name").configurable)},Jf=!c(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype}),Yf=jc("IE_PROTO"),_u=Object,p0=_u.prototype,ai=Jf?_u.getPrototypeOf:function(w){var M=$n(w);if(Fr(M,Yf))return M[Yf];var L=M.constructor;return ie(L)&&M instanceof L?L.prototype:M instanceof _u?p0:null},wu=to("iterator"),Xf=!1;[].keys&&("next"in(Gf=[].keys())?(Wf=ai(ai(Gf)))!==Object.prototype&&(Cs=Wf):Xf=!0);var f0=!Ne(Cs)||c(function(){var w={};return Cs[wu].call(w)!==w});Cs=f0?{}:Ea(Cs),ie(Cs[wu])||vs(Cs,wu,function(){return this});var Zf={IteratorPrototype:Cs,BUGGY_SAFARI_ITERATORS:Xf},m0=Zf.IteratorPrototype,g0=function(){return this},h0=d0.PROPER,Gc=Zf.BUGGY_SAFARI_ITERATORS,xu=to("iterator"),em="keys",Qc="values",tm="entries",v0=function(){return this},Iu=function(w,M,L,$,_,re,Ie){(function(zr,Hr,Kr,kn){var Jn=Hr+" Iterator";zr.prototype=Ea(m0,{next:pe(+!kn,Kr)}),Fs(zr,Jn,!1,!0),Za[Jn]=g0})(L,M,$);var de,Lt,Dt,dr=function(zr){if(zr===_&&Br)return Br;if(!Gc&&zr in Cr)return Cr[zr];switch(zr){case em:return function(){return new L(this,zr)};case Qc:return function(){return new L(this,zr)};case tm:return function(){return new L(this,zr)}}return function(){return new L(this)}},gr=M+" Iterator",vr=!1,Cr=w.prototype,xr=Cr[xu]||Cr["@@iterator"]||_&&Cr[_],Br=!Gc&&xr||dr(_),jr=M=="Array"&&Cr.entries||xr;if(jr&&(de=ai(jr.call(new w)))!==Object.prototype&&de.next&&(Fs(de,gr,!0,!0),Za[gr]=v0),h0&&_==Qc&&xr&&xr.name!==Qc&&(vr=!0,Br=function(){return Y(xr,this)}),_)if(Lt={values:dr(Qc),keys:re?Br:dr(em),entries:dr(tm)},Ie)for(Dt in Lt)(Gc||vr||!(Dt in Cr))&&vs(Cr,Dt,Lt[Dt]);else Vr({target:M,proto:!0,forced:Gc||vr},Lt);return Ie&&Cr[xu]!==Br&&vs(Cr,xu,Br,{name:_}),Za[M]=Br,Lt};ua.f;var rm="Array Iterator",y0=Pa.set,b0=Pa.getterFor(rm);Iu(Array,"Array",function(w,M){y0(this,{type:rm,target:ar(w),index:0,kind:M})},function(){var w=b0(this),M=w.target,L=w.kind,$=w.index++;return!M||$>=M.length?(w.target=void 0,{value:void 0,done:!0}):L=="keys"?{value:$,done:!1}:L=="values"?{value:M[$],done:!1}:{value:[$,M[$]],done:!1}},"values"),Za.Arguments=Za.Array;var nm=to("toStringTag");for(var Eu in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var om=u[Eu],Pu=om&&om.prototype;Pu&&Bs(Pu)!==nm&&Jo(Pu,nm,Eu),Za[Eu]=Za.Array}var T0=l0;wo("asyncDispose"),wo("dispose"),wo("matcher"),wo("metadataKey"),wo("observable"),wo("metadata"),wo("patternMatch"),wo("replaceAll");var ha=T0,S0=Ce("".charAt),am=Ce("".charCodeAt),C0=Ce("".slice),sm=function(w){return function(M,L){var $,_,re=Aa(pr(M)),Ie=$i(L),de=re.length;return Ie<0||Ie>=de?w?"":void 0:($=am(re,Ie))<55296||$>56319||Ie+1===de||(_=am(re,Ie+1))<56320||_>57343?w?S0(re,Ie):$:w?C0(re,Ie,Ie+2):_-56320+($-55296<<10)+65536}},M0={codeAt:sm(!1),charAt:sm(!0)}.charAt,im="String Iterator",k0=Pa.set,_0=Pa.getterFor(im);Iu(String,"String",function(w){k0(this,{type:im,string:Aa(w),index:0})},function(){var M,L=_0(this),$=L.string,_=L.index;return _>=$.length?{value:void 0,done:!0}:(M=M0($,_),L.index+=M.length,{value:M,done:!1})});var cm=hu.f("iterator"),w0=o(function(w){function M(L){return w.exports=M=typeof ha=="function"&&typeof cm=="symbol"?function($){return typeof $}:function($){return $&&typeof ha=="function"&&$.constructor===ha&&$!==ha.prototype?"symbol":typeof $},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),lm=ua.f;Vr({target:"Object",stat:!0,forced:Object.defineProperty!==lm,sham:!Oe},{defineProperty:lm});var x0=o(function(w){var M=or.Object,L=w.exports=function(_,re,Ie){return M.defineProperty(_,re,Ie)};M.defineProperty.sham&&(L.sham=!0)}),Wi=x0,I0=c(function(){ai(1)});Vr({target:"Object",stat:!0,forced:I0,sham:!Jf},{getPrototypeOf:function(M){return ai($n(M))}});var js=or.Object.getPrototypeOf,Ds=function(w,M){var L=[][w];return!!L&&c(function(){L.call(null,M||function(){return 1},1)})},E0=bs.forEach,um=Ds("forEach")?[].forEach:function(M){return E0(this,M,arguments.length>1?arguments[1]:void 0)};Vr({target:"Array",proto:!0,forced:[].forEach!=um},{forEach:um});var P0=Uo("Array").forEach,Au=Array.prototype,A0={DOMTokenList:!0,NodeList:!0},In=function(w){var M=w.forEach;return w===Au||tr(Au,w)&&M===Au.forEach||Fr(A0,Bs(w))?P0:M},O0=Ce([].concat),N0=$e("Reflect","ownKeys")||function(M){var L=Vi.f(Vn(M)),$=Hi.f;return $?O0(L,$(M)):L},dm=Error,R0=Ce("".replace),B0=String(dm("zxcasd").stack),pm=/\n\s*at [^:]*:[^\n]*/,F0=pm.test(B0),L0=function(w,M){if(F0&&typeof w=="string"&&!dm.prepareStackTrace)for(;M--;)w=R0(w,pm,"");return w},$0=function(w,M){Ne(M)&&"cause"in M&&Jo(w,"cause",M.cause)},j0=to("iterator"),D0=Array.prototype,fm=function(w){return w!==void 0&&(Za.Array===w||D0[j0]===w)},U0=to("iterator"),Jc=function(w){if(!At(w))return Pr(w,U0)||Pr(w,"@@iterator")||Za[Bs(w)]},q0=TypeError,Gi=function(w,M){var L=arguments.length<2?Jc(w):M;if(Or(L))return Vn(Y(L,w));throw q0(Rr(w)+" is not iterable")},Ou=function(w,M,L){var $,_;Vn(w);try{if(!($=Pr(w,"return"))){if(M==="throw")throw L;return L}$=Y($,w)}catch(re){_=!0,$=re}if(M==="throw")throw L;if(_)throw $;return Vn($),L},V0=TypeError,Yc=function(w,M){this.stopped=w,this.result=M},mm=Yc.prototype,so=function(w,M,L){var $,_,re,Ie,de,Lt,Dt,dr=L&&L.that,gr=!(!L||!L.AS_ENTRIES),vr=!(!L||!L.IS_RECORD),Cr=!(!L||!L.IS_ITERATOR),xr=!(!L||!L.INTERRUPTED),Br=$o(M,dr),jr=function(Hr){return $&&Ou($,"normal",Hr),new Yc(!0,Hr)},zr=function(Hr){return gr?(Vn(Hr),xr?Br(Hr[0],Hr[1],jr):Br(Hr[0],Hr[1])):xr?Br(Hr,jr):Br(Hr)};if(vr)$=w.iterator;else if(Cr)$=w;else{if(!(_=Jc(w)))throw V0(Rr(w)+" is not iterable");if(fm(_)){for(re=0,Ie=Ia(w);Ie>re;re++)if((de=zr(w[re]))&&tr(mm,de))return de;return new Yc(!1)}$=Gi(w,_)}for(Lt=vr?w.next:$.next;!(Dt=Y(Lt,$)).done;){try{de=zr(Dt.value)}catch(Hr){Ou($,"throw",Hr)}if(typeof de=="object"&&de&&tr(mm,de))return de}return new Yc(!1)},H0=function(w,M){return w===void 0?arguments.length<2?"":M:Aa(w)},z0=!c(function(){var w=Error("a");return!("stack"in w)||(Object.defineProperty(w,"stack",pe(1,7)),w.stack!==7)}),K0=to("toStringTag"),Xc=Error,W0=[].push,Qi=function(M,L){var $,_=arguments.length>2?arguments[2]:void 0,re=tr(Nu,this);ji?$=ji(Xc(),re?ai(this):Nu):($=re?this:Ea(Nu),Jo($,K0,"Error")),L!==void 0&&Jo($,"message",H0(L)),z0&&Jo($,"stack",L0($.stack,1)),$0($,_);var Ie=[];return so(M,W0,{that:Ie}),Jo($,"errors",Ie),$};ji?ji(Qi,Xc):function(w,M,L){for(var $=N0(M),_=ua.f,re=ga.f,Ie=0;Ie<$.length;Ie++){var de=$[Ie];Fr(w,de)||L&&Fr(L,de)||_(w,de,re(M,de))}}(Qi,Xc,{name:!0});var Nu=Qi.prototype=Ea(Xc.prototype,{constructor:pe(1,Qi),message:pe(1,""),name:pe(1,"AggregateError")});Vr({global:!0,constructor:!0,arity:2},{AggregateError:Qi});var Ji,si,gm,Ru,Ua=ue(u.process)=="process",hm=to("species"),vm=function(w){var M=$e(w),L=ua.f;Oe&&M&&!M[hm]&&L(M,hm,{configurable:!0,get:function(){return this}})},G0=TypeError,Bu=function(w,M){if(tr(M,w))return w;throw G0("Incorrect invocation")},Q0=TypeError,Zc=function(w){if(Uc(w))return w;throw Q0(Rr(w)+" is not a constructor")},J0=to("species"),Ms=function(w,M){var L,$=Vn(w).constructor;return $===void 0||At(L=Vn($)[J0])?M:Zc(L)},Y0=TypeError,ym=function(w,M){if(w<M)throw Y0("Not enough arguments");return w},bm=/(?:ipad|iphone|ipod).*applewebkit/i.test(nr),Fu=u.setImmediate,Lu=u.clearImmediate,X0=u.process,$u=u.Dispatch,Z0=u.Function,Tm=u.MessageChannel,e1=u.String,ju=0,Yi={},t1="onreadystatechange";try{Ji=u.location}catch{}var Du=function(w){if(Fr(Yi,w)){var M=Yi[w];delete Yi[w],M()}},Uu=function(w){return function(){Du(w)}},Sm=function(w){Du(w.data)},Cm=function(w){u.postMessage(e1(w),Ji.protocol+"//"+Ji.host)};Fu&&Lu||(Fu=function(M){ym(arguments.length,1);var L=ie(M)?M:Z0(M),$=hs(arguments,1);return Yi[++ju]=function(){T(L,void 0,$)},si(ju),ju},Lu=function(M){delete Yi[M]},Ua?si=function(w){X0.nextTick(Uu(w))}:$u&&$u.now?si=function(w){$u.now(Uu(w))}:Tm&&!bm?(Ru=(gm=new Tm).port2,gm.port1.onmessage=Sm,si=$o(Ru.postMessage,Ru)):u.addEventListener&&ie(u.postMessage)&&!u.importScripts&&Ji&&Ji.protocol!=="file:"&&!c(Cm)?(si=Cm,u.addEventListener("message",Sm,!1)):si=t1 in Ra("script")?function(w){ou.appendChild(Ra("script")).onreadystatechange=function(){ou.removeChild(this),Du(w)}}:function(w){setTimeout(Uu(w),0)});var Xi,Us,Zi,ii,qu,Vu,Hu,Mm,km={set:Fu,clear:Lu},r1=/ipad|iphone|ipod/i.test(nr)&&u.Pebble!==void 0,n1=/web0s(?!.*chrome)/i.test(nr),o1=ga.f,zu=km.set,_m=u.MutationObserver||u.WebKitMutationObserver,wm=u.document,xm=u.process,el=u.Promise,Im=o1(u,"queueMicrotask"),Em=Im&&Im.value;Em||(Xi=function(){var w,M;for(Ua&&(w=xm.domain)&&w.exit();Us;){M=Us.fn,Us=Us.next;try{M()}catch(L){throw Us?ii():Zi=void 0,L}}Zi=void 0,w&&w.enter()},bm||Ua||n1||!_m||!wm?!r1&&el&&el.resolve?((Hu=el.resolve(void 0)).constructor=el,Mm=$o(Hu.then,Hu),ii=function(){Mm(Xi)}):Ua?ii=function(){xm.nextTick(Xi)}:(zu=$o(zu,u),ii=function(){zu(Xi)}):(qu=!0,Vu=wm.createTextNode(""),new _m(Xi).observe(Vu,{characterData:!0}),ii=function(){Vu.data=qu=!qu}));var Ku=Em||function(w){var M={fn:w,next:void 0};Zi&&(Zi.next=M),Us||(Us=M,ii()),Zi=M},ci=function(w){try{return{error:!1,value:w()}}catch(M){return{error:!0,value:M}}},Pm=function(){this.head=null,this.tail=null};Pm.prototype={add:function(w){var M={item:w,next:null};this.head?this.tail.next=M:this.head=M,this.tail=M},get:function(){var w=this.head;if(w)return this.head=w.next,this.tail===w&&(this.tail=null),w.item}};var Wu,Am,a1=Pm,ra=u.Promise,Om=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",s1=!Om&&!Ua&&typeof window=="object"&&typeof document=="object",Nm=ra&&ra.prototype,i1=to("species"),Rm=!1,Bm=ie(u.PromiseRejectionEvent),c1=af("Promise",function(){var w=yf(ra),M=w!==String(ra);if(!M&&mr===66||!Nm.catch||!Nm.finally)return!0;if(!mr||mr<51||!/native code/.test(w)){var L=new ra(function(_){_(1)}),$=function(_){_(function(){},function(){})};if((L.constructor={})[i1]=$,!(Rm=L.then(function(){})instanceof $))return!0}return!M&&(s1||Om)&&!Bm}),li={CONSTRUCTOR:c1,REJECTION_EVENT:Bm,SUBCLASSING:Rm},l1=TypeError,u1=function(w){var M,L;this.promise=new w(function($,_){if(M!==void 0||L!==void 0)throw l1("Bad Promise constructor");M=$,L=_}),this.resolve=Or(M),this.reject=Or(L)},es={f:function(w){return new u1(w)}},Fm=km.set,tl="Promise",Lm=li.CONSTRUCTOR,d1=li.REJECTION_EVENT,Gu=Pa.getterFor(tl),p1=Pa.set,f1=ra&&ra.prototype,ec=ra,Qu=f1,$m=u.TypeError,Ju=u.document,Yu=u.process,Xu=es.f,m1=Xu,g1=!!(Ju&&Ju.createEvent&&u.dispatchEvent),jm="unhandledrejection",Dm=function(w){var M;return!(!Ne(w)||!ie(M=w.then))&&M},Um=function(w,M){var L,$,_,re=M.value,Ie=M.state==1,de=Ie?w.ok:w.fail,Lt=w.resolve,Dt=w.reject,dr=w.domain;try{de?(Ie||(M.rejection===2&&v1(M),M.rejection=1),de===!0?L=re:(dr&&dr.enter(),L=de(re),dr&&(dr.exit(),_=!0)),L===w.promise?Dt($m("Promise-chain cycle")):($=Dm(L))?Y($,L,Lt,Dt):Lt(L)):Dt(re)}catch(gr){dr&&!_&&dr.exit(),Dt(gr)}},qm=function(w,M){w.notified||(w.notified=!0,Ku(function(){for(var L,$=w.reactions;L=$.get();)Um(L,w);w.notified=!1,M&&!w.rejection&&h1(w)}))},Vm=function(w,M,L){var $,_;g1?(($=Ju.createEvent("Event")).promise=M,$.reason=L,$.initEvent(w,!1,!0),u.dispatchEvent($)):$={promise:M,reason:L},!d1&&(_=u["on"+w])?_($):w===jm&&function(re,Ie){var de=u.console;de&&de.error&&(arguments.length==1?de.error(re):de.error(re,Ie))}("Unhandled promise rejection",L)},h1=function(w){Y(Fm,u,function(){var M,L=w.facade,$=w.value;if(Hm(w)&&(M=ci(function(){Ua?Yu.emit("unhandledRejection",$,L):Vm(jm,L,$)}),w.rejection=Ua||Hm(w)?2:1,M.error))throw M.value})},Hm=function(w){return w.rejection!==1&&!w.parent},v1=function(w){Y(Fm,u,function(){var M=w.facade;Ua?Yu.emit("rejectionHandled",M):Vm("rejectionhandled",M,w.value)})},ui=function(w,M,L){return function($){w(M,$,L)}},di=function(w,M,L){w.done||(w.done=!0,L&&(w=L),w.value=M,w.state=2,qm(w,!0))},Zu=function(w,M,L){if(!w.done){w.done=!0,L&&(w=L);try{if(w.facade===M)throw $m("Promise can't be resolved itself");var $=Dm(M);$?Ku(function(){var _={done:!1};try{Y($,M,ui(Zu,_,w),ui(di,_,w))}catch(re){di(_,re,w)}}):(w.value=M,w.state=1,qm(w,!1))}catch(_){di({done:!1},_,w)}}};Lm&&(Qu=(ec=function(M){Bu(this,Qu),Or(M),Y(Wu,this);var L=Gu(this);try{M(ui(Zu,L),ui(di,L))}catch($){di(L,$)}}).prototype,(Wu=function(M){p1(this,{type:tl,done:!1,notified:!1,parent:!1,reactions:new a1,rejection:!1,state:0,value:void 0})}).prototype=vs(Qu,"then",function(M,L){var $=Gu(this),_=Xu(Ms(this,ec));return $.parent=!0,_.ok=!ie(M)||M,_.fail=ie(L)&&L,_.domain=Ua?Yu.domain:void 0,$.state==0?$.reactions.add(_):Ku(function(){Um(_,$)}),_.promise}),Am=function(){var w=new Wu,M=Gu(w);this.promise=w,this.resolve=ui(Zu,M),this.reject=ui(di,M)},es.f=Xu=function(w){return w===ec||w===void 0?new Am(w):m1(w)}),Vr({global:!0,constructor:!0,wrap:!0,forced:Lm},{Promise:ec}),Fs(ec,tl,!1,!0),vm(tl);var zm=to("iterator"),Km=!1;try{var y1=0,Wm={next:function(){return{done:!!y1++}},return:function(){Km=!0}};Wm[zm]=function(){return this},Array.from(Wm,function(){throw 2})}catch{}var Gm=function(w,M){if(!M&&!Km)return!1;var L=!1;try{var $={};$[zm]=function(){return{next:function(){return{done:L=!0}}}},w($)}catch{}return L},Qm=li.CONSTRUCTOR||!Gm(function(w){ra.all(w).then(void 0,function(){})});Vr({target:"Promise",stat:!0,forced:Qm},{all:function(M){var L=this,$=es.f(L),_=$.resolve,re=$.reject,Ie=ci(function(){var de=Or(L.resolve),Lt=[],Dt=0,dr=1;so(M,function(gr){var vr=Dt++,Cr=!1;dr++,Y(de,L,gr).then(function(xr){Cr||(Cr=!0,Lt[vr]=xr,--dr||_(Lt))},re)}),--dr||_(Lt)});return Ie.error&&re(Ie.value),$.promise}});var b1=li.CONSTRUCTOR;ra&&ra.prototype,Vr({target:"Promise",proto:!0,forced:b1,real:!0},{catch:function(w){return this.then(void 0,w)}}),Vr({target:"Promise",stat:!0,forced:Qm},{race:function(M){var L=this,$=es.f(L),_=$.reject,re=ci(function(){var Ie=Or(L.resolve);so(M,function(de){Y(Ie,L,de).then($.resolve,_)})});return re.error&&_(re.value),$.promise}}),Vr({target:"Promise",stat:!0,forced:li.CONSTRUCTOR},{reject:function(M){var L=es.f(this);return Y(L.reject,void 0,M),L.promise}});var ed=function(w,M){if(Vn(w),Ne(M)&&M.constructor===w)return M;var L=es.f(w);return(0,L.resolve)(M),L.promise},T1=li.CONSTRUCTOR,S1=$e("Promise"),C1=!T1;Vr({target:"Promise",stat:!0,forced:!0},{resolve:function(M){return ed(C1&&this===S1?ra:this,M)}}),Vr({target:"Promise",stat:!0},{allSettled:function(M){var L=this,$=es.f(L),_=$.resolve,re=$.reject,Ie=ci(function(){var de=Or(L.resolve),Lt=[],Dt=0,dr=1;so(M,function(gr){var vr=Dt++,Cr=!1;dr++,Y(de,L,gr).then(function(xr){Cr||(Cr=!0,Lt[vr]={status:"fulfilled",value:xr},--dr||_(Lt))},function(xr){Cr||(Cr=!0,Lt[vr]={status:"rejected",reason:xr},--dr||_(Lt))})}),--dr||_(Lt)});return Ie.error&&re(Ie.value),$.promise}});var Jm="No one promise resolved";Vr({target:"Promise",stat:!0},{any:function(M){var L=this,$=$e("AggregateError"),_=es.f(L),re=_.resolve,Ie=_.reject,de=ci(function(){var Lt=Or(L.resolve),Dt=[],dr=0,gr=1,vr=!1;so(M,function(Cr){var xr=dr++,Br=!1;gr++,Y(Lt,L,Cr).then(function(jr){Br||vr||(vr=!0,re(jr))},function(jr){Br||vr||(Br=!0,Dt[xr]=jr,--gr||Ie(new $(Dt,Jm)))})}),--gr||Ie(new $(Dt,Jm))});return de.error&&Ie(de.value),_.promise}});var M1=ra&&ra.prototype,k1=!!ra&&c(function(){M1.finally.call({then:function(){}},function(){})});Vr({target:"Promise",proto:!0,real:!0,forced:k1},{finally:function(w){var M=Ms(this,$e("Promise")),L=ie(w);return this.then(L?function($){return ed(M,w()).then(function(){return $})}:w,L?function($){return ed(M,w()).then(function(){throw $})}:w)}});var _1=or.Promise;Vr({target:"Promise",stat:!0,forced:!0},{try:function(w){var M=es.f(this),L=ci(w);return(L.error?M.reject:M.resolve)(L.value),M.promise}});var co=_1,w1=Ce([].reverse),Ym=[1,2];Vr({target:"Array",proto:!0,forced:String(Ym)===String(Ym.reverse())},{reverse:function(){return Ya(this)&&(this.length=this.length),w1(this)}});var x1=Uo("Array").reverse,td=Array.prototype,kl=function(w){var M=w.reverse;return w===td||tr(td,w)&&M===td.reverse?x1:M},I1=Ui("slice"),E1=to("species"),rd=Array,P1=Math.max;Vr({target:"Array",proto:!0,forced:!I1},{slice:function(M,L){var $,_,re,Ie=ar(this),de=Ia(Ie),Lt=ri(M,de),Dt=ri(L===void 0?de:L,de);if(Ya(Ie)&&($=Ie.constructor,(Uc($)&&($===rd||Ya($.prototype))||Ne($)&&($=$[E1])===null)&&($=void 0),$===rd||$===void 0))return hs(Ie,Lt,Dt);for(_=new($===void 0?rd:$)(P1(Dt-Lt,0)),re=0;Lt<Dt;Lt++,re++)Lt in Ie&&Rs(_,re,Ie[Lt]);return _.length=re,_}});var A1=Uo("Array").slice,nd=Array.prototype,Co=function(w){var M=w.slice;return w===nd||tr(nd,w)&&M===nd.slice?A1:M},O1=o(function(w){var M=w0.default;function L(){w.exports=L=function(){return $},w.exports.__esModule=!0,w.exports.default=w.exports;var $={},_=Object.prototype,re=_.hasOwnProperty,Ie=typeof ha=="function"?ha:{},de=Ie.iterator||"@@iterator",Lt=Ie.asyncIterator||"@@asyncIterator",Dt=Ie.toStringTag||"@@toStringTag";function dr(_n,bn,Rn){return Wi(_n,bn,{value:Rn,enumerable:!0,configurable:!0,writable:!0}),_n[bn]}try{dr({},"")}catch{dr=function(Rn,qn,oo){return Rn[qn]=oo}}function gr(_n,bn,Rn,qn){var oo=bn&&bn.prototype instanceof xr?bn:xr,ao=Ja(oo.prototype),Ko=new _r(qn||[]);return ao._invoke=function(Po,ja,Mo){var Ao="suspendedStart";return function(oa,Lc){if(Ao==="executing")throw new Error("Generator is already running");if(Ao==="completed"){if(oa==="throw")throw Lc;return Fn()}for(Mo.method=oa,Mo.arg=Lc;;){var Fo=Mo.delegate;if(Fo){var vc=Hn(Fo,Mo);if(vc){if(vc===Cr)continue;return vc}}if(Mo.method==="next")Mo.sent=Mo._sent=Mo.arg;else if(Mo.method==="throw"){if(Ao==="suspendedStart")throw Ao="completed",Mo.arg;Mo.dispatchException(Mo.arg)}else Mo.method==="return"&&Mo.abrupt("return",Mo.arg);Ao="executing";var Ka=vr(Po,ja,Mo);if(Ka.type==="normal"){if(Ao=Mo.done?"completed":"suspendedYield",Ka.arg===Cr)continue;return{value:Ka.arg,done:Mo.done}}Ka.type==="throw"&&(Ao="completed",Mo.method="throw",Mo.arg=Ka.arg)}}}(_n,Rn,Ko),ao}function vr(_n,bn,Rn){try{return{type:"normal",arg:_n.call(bn,Rn)}}catch(qn){return{type:"throw",arg:qn}}}$.wrap=gr;var Cr={};function xr(){}function Br(){}function jr(){}var zr={};dr(zr,de,function(){return this});var Hr=js&&js(js(Pn([])));Hr&&Hr!==_&&re.call(Hr,de)&&(zr=Hr);var Kr=jr.prototype=xr.prototype=Ja(zr);function kn(_n){var bn;In(bn=["next","throw","return"]).call(bn,function(Rn){dr(_n,Rn,function(qn){return this._invoke(Rn,qn)})})}function Jn(_n,bn){function Rn(oo,ao,Ko,Po){var ja=vr(_n[oo],_n,ao);if(ja.type!=="throw"){var Mo=ja.arg,Ao=Mo.value;return Ao&&M(Ao)=="object"&&re.call(Ao,"__await")?bn.resolve(Ao.__await).then(function(oa){Rn("next",oa,Ko,Po)},function(oa){Rn("throw",oa,Ko,Po)}):bn.resolve(Ao).then(function(oa){Mo.value=oa,Ko(Mo)},function(oa){return Rn("throw",oa,Ko,Po)})}Po(ja.arg)}var qn;this._invoke=function(oo,ao){function Ko(){return new bn(function(Po,ja){Rn(oo,ao,Po,ja)})}return qn=qn?qn.then(Ko,Ko):Ko()}}function Hn(_n,bn){var Rn=_n.iterator[bn.method];if(Rn===void 0){if(bn.delegate=null,bn.method==="throw"){if(_n.iterator.return&&(bn.method="return",bn.arg=void 0,Hn(_n,bn),bn.method==="throw"))return Cr;bn.method="throw",bn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Cr}var qn=vr(Rn,_n.iterator,bn.arg);if(qn.type==="throw")return bn.method="throw",bn.arg=qn.arg,bn.delegate=null,Cr;var oo=qn.arg;return oo?oo.done?(bn[_n.resultName]=oo.value,bn.next=_n.nextLoc,bn.method!=="return"&&(bn.method="next",bn.arg=void 0),bn.delegate=null,Cr):oo:(bn.method="throw",bn.arg=new TypeError("iterator result is not an object"),bn.delegate=null,Cr)}function xo(_n){var bn={tryLoc:_n[0]};1 in _n&&(bn.catchLoc=_n[1]),2 in _n&&(bn.finallyLoc=_n[2],bn.afterLoc=_n[3]),this.tryEntries.push(bn)}function Ln(_n){var bn=_n.completion||{};bn.type="normal",delete bn.arg,_n.completion=bn}function _r(_n){this.tryEntries=[{tryLoc:"root"}],In(_n).call(_n,xo,this),this.reset(!0)}function Pn(_n){if(_n){var bn=_n[de];if(bn)return bn.call(_n);if(typeof _n.next=="function")return _n;if(!isNaN(_n.length)){var Rn=-1,qn=function oo(){for(;++Rn<_n.length;)if(re.call(_n,Rn))return oo.value=_n[Rn],oo.done=!1,oo;return oo.value=void 0,oo.done=!0,oo};return qn.next=qn}}return{next:Fn}}function Fn(){return{value:void 0,done:!0}}return Br.prototype=jr,dr(Kr,"constructor",jr),dr(jr,"constructor",Br),Br.displayName=dr(jr,Dt,"GeneratorFunction"),$.isGeneratorFunction=function(_n){var bn=typeof _n=="function"&&_n.constructor;return!!bn&&(bn===Br||(bn.displayName||bn.name)==="GeneratorFunction")},$.mark=function(_n){return Ns?Ns(_n,jr):(_n.__proto__=jr,dr(_n,Dt,"GeneratorFunction")),_n.prototype=Ja(Kr),_n},$.awrap=function(_n){return{__await:_n}},kn(Jn.prototype),dr(Jn.prototype,Lt,function(){return this}),$.AsyncIterator=Jn,$.async=function(_n,bn,Rn,qn,oo){oo===void 0&&(oo=co);var ao=new Jn(gr(_n,bn,Rn,qn),oo);return $.isGeneratorFunction(bn)?ao:ao.next().then(function(Ko){return Ko.done?Ko.value:ao.next()})},kn(Kr),dr(Kr,Dt,"Generator"),dr(Kr,de,function(){return this}),dr(Kr,"toString",function(){return"[object Generator]"}),$.keys=function(_n){var bn=[];for(var Rn in _n)bn.push(Rn);return kl(bn).call(bn),function qn(){for(;bn.length;){var oo=bn.pop();if(oo in _n)return qn.value=oo,qn.done=!1,qn}return qn.done=!0,qn}},$.values=Pn,_r.prototype={constructor:_r,reset:function(bn){var Rn;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,In(Rn=this.tryEntries).call(Rn,Ln),!bn)for(var qn in this)qn.charAt(0)==="t"&&re.call(this,qn)&&!isNaN(+Co(qn).call(qn,1))&&(this[qn]=void 0)},stop:function(){this.done=!0;var bn=this.tryEntries[0].completion;if(bn.type==="throw")throw bn.arg;return this.rval},dispatchException:function(bn){if(this.done)throw bn;var Rn=this;function qn(Mo,Ao){return Ko.type="throw",Ko.arg=bn,Rn.next=Mo,Ao&&(Rn.method="next",Rn.arg=void 0),!!Ao}for(var oo=this.tryEntries.length-1;oo>=0;--oo){var ao=this.tryEntries[oo],Ko=ao.completion;if(ao.tryLoc==="root")return qn("end");if(ao.tryLoc<=this.prev){var Po=re.call(ao,"catchLoc"),ja=re.call(ao,"finallyLoc");if(Po&&ja){if(this.prev<ao.catchLoc)return qn(ao.catchLoc,!0);if(this.prev<ao.finallyLoc)return qn(ao.finallyLoc)}else if(Po){if(this.prev<ao.catchLoc)return qn(ao.catchLoc,!0)}else{if(!ja)throw new Error("try statement without catch or finally");if(this.prev<ao.finallyLoc)return qn(ao.finallyLoc)}}}},abrupt:function(bn,Rn){for(var qn=this.tryEntries.length-1;qn>=0;--qn){var oo=this.tryEntries[qn];if(oo.tryLoc<=this.prev&&re.call(oo,"finallyLoc")&&this.prev<oo.finallyLoc){var ao=oo;break}}ao&&(bn==="break"||bn==="continue")&&ao.tryLoc<=Rn&&Rn<=ao.finallyLoc&&(ao=null);var Ko=ao?ao.completion:{};return Ko.type=bn,Ko.arg=Rn,ao?(this.method="next",this.next=ao.finallyLoc,Cr):this.complete(Ko)},complete:function(bn,Rn){if(bn.type==="throw")throw bn.arg;return bn.type==="break"||bn.type==="continue"?this.next=bn.arg:bn.type==="return"?(this.rval=this.arg=bn.arg,this.method="return",this.next="end"):bn.type==="normal"&&Rn&&(this.next=Rn),Cr},finish:function(bn){for(var Rn=this.tryEntries.length-1;Rn>=0;--Rn){var qn=this.tryEntries[Rn];if(qn.finallyLoc===bn)return this.complete(qn.completion,qn.afterLoc),Ln(qn),Cr}},catch:function(bn){for(var Rn=this.tryEntries.length-1;Rn>=0;--Rn){var qn=this.tryEntries[Rn];if(qn.tryLoc===bn){var oo=qn.completion;if(oo.type==="throw"){var ao=oo.arg;Ln(qn)}return ao}}throw new Error("illegal catch attempt")},delegateYield:function(bn,Rn,qn){return this.delegate={iterator:Pn(bn),resultName:Rn,nextLoc:qn},this.method==="next"&&(this.arg=void 0),Cr}},$}w.exports=L,w.exports.__esModule=!0,w.exports.default=w.exports}),rl=O1(),sr=rl;try{regeneratorRuntime=rl}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=rl:Function("r","regeneratorRuntime = r")(rl)}Vr({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Xm=9007199254740991,_l=c(function(){gs(1)});Vr({target:"Object",stat:!0,forced:_l},{keys:function(M){return gs($n(M))}});var Vo=or.Object.keys,wl=Object.assign,Zm=Object.defineProperty,Tn=Ce([].concat),xl=!wl||c(function(){if(Oe&&wl({b:1},wl(Zm({},"a",{enumerable:!0,get:function(){Zm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var w={},M={},L=Symbol(),$="abcdefghijklmnopqrst";return w[L]=7,$.split("").forEach(function(_){M[_]=_}),wl({},w)[L]!=7||gs(wl({},M)).join("")!=$})?function(M,L){for(var $=$n(M),_=arguments.length,re=1,Ie=Hi.f,de=ze.f;_>re;)for(var Lt,Dt=er(arguments[re++]),dr=Ie?Tn(gs(Dt),Ie(Dt)):gs(Dt),gr=dr.length,vr=0;gr>vr;)Lt=dr[vr++],Oe&&!Y(de,Dt,Lt)||($[Lt]=Dt[Lt]);return $}:wl;Vr({target:"Object",stat:!0,arity:2,forced:Object.assign!==xl},{assign:xl});var Mr=or.Object.assign;or.JSON||(or.JSON={stringify:JSON.stringify});var Wh=function(M,L,$){return T(or.JSON.stringify,null,arguments)},Wo=Wh,eg=nu.indexOf,tg=Ce([].indexOf),rg=!!tg&&1/tg([1],1,-0)<0,N1=Ds("indexOf");Vr({target:"Array",proto:!0,forced:rg||!N1},{indexOf:function(M){var L=arguments.length>1?arguments[1]:void 0;return rg?tg(this,M,L)||0:eg(this,M,L)}});var R1=Uo("Array").indexOf,ng=Array.prototype,ka=function(w){var M=w.indexOf;return w===ng||tr(ng,w)&&M===ng.indexOf?R1:M},Gh=Uo("Array").concat,Qd=Array.prototype,ks=function(w){var M=w.concat;return w===Qd||tr(Qd,w)&&M===Qd.concat?Gh:M};function Es(w,M){var L={};for(var $ in w)Object.prototype.hasOwnProperty.call(w,$)&&M.indexOf($)<0&&(L[$]=w[$]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for($=Object.getOwnPropertySymbols(w);_<$.length;_++)M.indexOf($[_])<0&&Object.prototype.propertyIsEnumerable.call(w,$[_])&&(L[$[_]]=w[$[_]])}return L}function Sn(w,M,L,$){return new(L||(L=Promise))(function(_,re){function Ie(Dt){try{Lt($.next(Dt))}catch(dr){re(dr)}}function de(Dt){try{Lt($.throw(Dt))}catch(dr){re(dr)}}function Lt(Dt){Dt.done?_(Dt.value):function(gr){return gr instanceof L?gr:new L(function(vr){vr(gr)})}(Dt.value).then(Ie,de)}Lt(($=$.apply(w,M||[])).next())})}var Jd=c(function(){if(typeof ArrayBuffer=="function"){var w=new ArrayBuffer(8);Object.isExtensible(w)&&Object.defineProperty(w,"a",{value:8})}}),od=Object.isExtensible,og=c(function(){od(1)})||Jd?function(M){return!!Ne(M)&&(!Jd||ue(M)!="ArrayBuffer")&&(!od||od(M))}:od,Qh=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),ag=o(function(w){var M=ua.f,L=!1,$=uo("meta"),_=0,re=function(de){M(de,$,{value:{objectID:"O"+_++,weakData:{}}})},Ie=w.exports={enable:function(){Ie.enable=function(){},L=!0;var de=Vi.f,Lt=Ce([].splice),Dt={};Dt[$]=1,de(Dt).length&&(Vi.f=function(dr){for(var gr=de(dr),vr=0,Cr=gr.length;vr<Cr;vr++)if(gr[vr]===$){Lt(gr,vr,1);break}return gr},Vr({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gu.f}))},fastKey:function(de,Lt){if(!Ne(de))return typeof de=="symbol"?de:(typeof de=="string"?"S":"P")+de;if(!Fr(de,$)){if(!og(de))return"F";if(!Lt)return"E";re(de)}return de[$].objectID},getWeakData:function(de,Lt){if(!Fr(de,$)){if(!og(de))return!0;if(!Lt)return!1;re(de)}return de[$].weakData},onFreeze:function(de){return Qh&&L&&og(de)&&!Fr(de,$)&&re(de),de}};ni[$]=!0}),Jh=ua.f,Yh=bs.forEach,ki=Pa.set,B1=Pa.getterFor,Xh=function(w,M,L){for(var $ in M)L&&L.unsafe&&w[$]?w[$]=M[$]:vs(w,$,M[$],L);return w},F1=ua.f,Zh=ag.fastKey,sg=Pa.set,nl=Pa.getterFor,ev={getConstructor:function(w,M,L,$){var _=w(function(Dt,dr){Bu(Dt,re),sg(Dt,{type:M,index:Ea(null),first:void 0,last:void 0,size:0}),Oe||(Dt.size=0),At(dr)||so(dr,Dt[$],{that:Dt,AS_ENTRIES:L})}),re=_.prototype,Ie=nl(M),de=function(Dt,dr,gr){var vr,Cr,xr=Ie(Dt),Br=Lt(Dt,dr);return Br?Br.value=gr:(xr.last=Br={index:Cr=Zh(dr,!0),key:dr,value:gr,previous:vr=xr.last,next:void 0,removed:!1},xr.first||(xr.first=Br),vr&&(vr.next=Br),Oe?xr.size++:Dt.size++,Cr!=="F"&&(xr.index[Cr]=Br)),Dt},Lt=function(Dt,dr){var gr,vr=Ie(Dt),Cr=Zh(dr);if(Cr!=="F")return vr.index[Cr];for(gr=vr.first;gr;gr=gr.next)if(gr.key==dr)return gr};return Xh(re,{clear:function(){for(var dr=Ie(this),gr=dr.index,vr=dr.first;vr;)vr.removed=!0,vr.previous&&(vr.previous=vr.previous.next=void 0),delete gr[vr.index],vr=vr.next;dr.first=dr.last=void 0,Oe?dr.size=0:this.size=0},delete:function(Dt){var dr=this,gr=Ie(dr),vr=Lt(dr,Dt);if(vr){var Cr=vr.next,xr=vr.previous;delete gr.index[vr.index],vr.removed=!0,xr&&(xr.next=Cr),Cr&&(Cr.previous=xr),gr.first==vr&&(gr.first=Cr),gr.last==vr&&(gr.last=xr),Oe?gr.size--:dr.size--}return!!vr},forEach:function(dr){for(var gr,vr=Ie(this),Cr=$o(dr,arguments.length>1?arguments[1]:void 0);gr=gr?gr.next:vr.first;)for(Cr(gr.value,gr.key,this);gr&&gr.removed;)gr=gr.previous},has:function(dr){return!!Lt(this,dr)}}),Xh(re,L?{get:function(dr){var gr=Lt(this,dr);return gr&&gr.value},set:function(dr,gr){return de(this,dr===0?0:dr,gr)}}:{add:function(dr){return de(this,dr=dr===0?0:dr,dr)}}),Oe&&F1(re,"size",{get:function(){return Ie(this).size}}),_},setStrong:function(w,M,L){var $=M+" Iterator",_=nl(M),re=nl($);Iu(w,M,function(Ie,de){sg(this,{type:$,target:Ie,state:_(Ie),kind:de,last:void 0})},function(){for(var Ie=re(this),de=Ie.kind,Lt=Ie.last;Lt&&Lt.removed;)Lt=Lt.previous;return Ie.target&&(Ie.last=Lt=Lt?Lt.next:Ie.state.first)?de=="keys"?{value:Lt.key,done:!1}:de=="values"?{value:Lt.value,done:!1}:{value:[Lt.key,Lt.value],done:!1}:(Ie.target=void 0,{value:void 0,done:!0})},L?"entries":"values",!L,!0),vm(M)}};(function(w,M,L){var $,_=w.indexOf("Map")!==-1,re=w.indexOf("Weak")!==-1,Ie=_?"set":"add",de=u[w],Lt=de&&de.prototype,Dt={};if(Oe&&ie(de)&&(re||Lt.forEach&&!c(function(){new de().entries().next()}))){var dr=($=M(function(vr,Cr){ki(Bu(vr,dr),{type:w,collection:new de}),Cr!=null&&so(Cr,vr[Ie],{that:vr,AS_ENTRIES:_})})).prototype,gr=B1(w);Yh(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(vr){var Cr=vr=="add"||vr=="set";!(vr in Lt)||re&&vr=="clear"||Jo(dr,vr,function(xr,Br){var jr=gr(this).collection;if(!Cr&&re&&!Ne(xr))return vr=="get"&&void 0;var zr=jr[vr](xr===0?0:xr,Br);return Cr?this:zr})}),re||Jh(dr,"size",{configurable:!0,get:function(){return gr(this).collection.size}})}else $=L.getConstructor(M,w,_,Ie),ag.enable();Fs($,w,!1,!0),Dt[w]=$,Vr({global:!0,forced:!0},Dt),re||L.setStrong($,w,_)})("Map",function(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}},ev);var L1=or.Map,ts=[].push;Vr({target:"Map",stat:!0,forced:!0},{from:function(M){var L,$,_,re,Ie=arguments.length,de=Ie>1?arguments[1]:void 0;return Zc(this),(L=de!==void 0)&&Or(de),At(M)?new this:($=[],L?(_=0,re=$o(de,Ie>2?arguments[2]:void 0),so(M,function(Lt){Y(ts,$,re(Lt,_++))})):so(M,ts,{that:$}),new this($))}}),Vr({target:"Map",stat:!0,forced:!0},{of:function(){return new this(hs(arguments))}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var M,L=Vn(this),$=Or(L.delete),_=!0,re=0,Ie=arguments.length;re<Ie;re++)M=Y($,L,arguments[re]),_=_&&M;return!!_}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(M,L){var $,_,re=Vn(this),Ie=Or(re.get),de=Or(re.has),Lt=Or(re.set);return Y(de,re,M)?($=Y(Ie,re,M),"update"in L&&($=L.update($,M,re),Y(Lt,re,M,$)),$):(_=L.insert(M,re),Y(Lt,re,M,_),_)}});var _i=Gi;Vr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0);return!so($,function(re,Ie,de){if(!_(Ie,re,L))return de()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0),re=new(Ms(L,$e("Map"))),Ie=Or(re.set);return so($,function(de,Lt){_(Lt,de,L)&&Y(Ie,re,de,Lt)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0);return so($,function(re,Ie,de){if(_(Ie,re,L))return de(Ie)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0);return so($,function(re,Ie,de){if(_(Ie,re,L))return de(re)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var ig=Ce([].push);Vr({target:"Map",stat:!0,forced:!0},{groupBy:function(M,L){Or(L);var $=Gi(M),_=new this,re=Or(_.has),Ie=Or(_.get),de=Or(_.set);return so($,function(Lt){var Dt=L(Lt);Y(re,_,Dt)?ig(Y(Ie,_,Dt),Lt):Y(de,_,Dt,[Lt])},{IS_ITERATOR:!0}),_}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(M){return so(_i(Vn(this)),function(L,$,_){if((re=$)===(Ie=M)||re!=re&&Ie!=Ie)return _();var re,Ie},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),Vr({target:"Map",stat:!0,forced:!0},{keyBy:function(M,L){var $=new this;Or(L);var _=Or($.set);return so(M,function(re){Y(_,$,L(re),re)}),$}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(M){return so(_i(Vn(this)),function(L,$,_){if($===M)return _(L)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0),re=new(Ms(L,$e("Map"))),Ie=Or(re.set);return so($,function(de,Lt){Y(Ie,re,_(Lt,de,L),Lt)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0),re=new(Ms(L,$e("Map"))),Ie=Or(re.set);return so($,function(de,Lt){Y(Ie,re,de,_(Lt,de,L))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),re}}),Vr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(M){for(var L=Vn(this),$=Or(L.set),_=arguments.length,re=0;re<_;)so(arguments[re++],$,{that:L,AS_ENTRIES:!0});return L}});var qs=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(M){var L=Vn(this),$=_i(L),_=arguments.length<2,re=_?void 0:arguments[1];if(Or(M),so($,function(Ie,de){_?(_=!1,re=de):re=M(re,de,Ie,L)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),_)throw qs("Reduce of empty map with no initial value");return re}}),Vr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(M){var L=Vn(this),$=_i(L),_=$o(M,arguments.length>1?arguments[1]:void 0);return so($,function(re,Ie,de){if(_(Ie,re,L))return de()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var $1=TypeError;Vr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(M,L){var $=Vn(this),_=Or($.get),re=Or($.has),Ie=Or($.set),de=arguments.length;Or(L);var Lt=Y(re,$,M);if(!Lt&&de<3)throw $1("Updating absent value");var Dt=Lt?Y(_,$,M):Or(de>2?arguments[2]:void 0)(M,$);return Y(Ie,$,M,L(Dt,M,$)),$}});var j1=TypeError,cg=function(M,L){var $,_=Vn(this),re=Or(_.get),Ie=Or(_.has),de=Or(_.set),Lt=arguments.length>2?arguments[2]:void 0;if(!ie(L)&&!ie(Lt))throw j1("At least one callback required");return Y(Ie,_,M)?($=Y(re,_,M),ie(L)&&($=L($),Y(de,_,M,$))):ie(Lt)&&($=Lt(),Y(de,_,M,$)),$};Vr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:cg}),Vr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:cg});var tc=L1,lg=Date,tv=Ce(lg.prototype.getTime);Vr({target:"Date",stat:!0},{now:function(){return tv(new lg)}});var sa=or.Date.now,D1=/MSIE .\./.test(nr),mo=u.Function,rv=function(w){return D1?function(M,L){var $=ym(arguments.length,1)>2,_=ie(M)?M:mo(M),re=$?hs(arguments,2):void 0;return w($?function(){T(_,this,re)}:_,L)}:w},nv={setTimeout:rv(u.setTimeout),setInterval:rv(u.setInterval)},ov=nv.setInterval;Vr({global:!0,bind:!0,forced:u.setInterval!==ov},{setInterval:ov});var Yd=nv.setTimeout;Vr({global:!0,bind:!0,forced:u.setTimeout!==Yd},{setTimeout:Yd});var vo=or.setTimeout,ug=bs.map,U1=Ui("map");Vr({target:"Array",proto:!0,forced:!U1},{map:function(M){return ug(this,M,arguments.length>1?arguments[1]:void 0)}});var Il=Uo("Array").map,Xd=Array.prototype,To=function(w){var M=w.map;return w===Xd||tr(Xd,w)&&M===Xd.map?Il:M},Vs=o(function(w){var M=Object.prototype.hasOwnProperty,L="~";function $(){}function _(Lt,Dt,dr){this.fn=Lt,this.context=Dt,this.once=dr||!1}function re(Lt,Dt,dr,gr,vr){if(typeof dr!="function")throw new TypeError("The listener must be a function");var Cr=new _(dr,gr||Lt,vr),xr=L?L+Dt:Dt;return Lt._events[xr]?Lt._events[xr].fn?Lt._events[xr]=[Lt._events[xr],Cr]:Lt._events[xr].push(Cr):(Lt._events[xr]=Cr,Lt._eventsCount++),Lt}function Ie(Lt,Dt){--Lt._eventsCount==0?Lt._events=new $:delete Lt._events[Dt]}function de(){this._events=new $,this._eventsCount=0}Object.create&&($.prototype=Object.create(null),new $().__proto__||(L=!1)),de.prototype.eventNames=function(){var Dt,dr,gr=[];if(this._eventsCount===0)return gr;for(dr in Dt=this._events)M.call(Dt,dr)&&gr.push(L?dr.slice(1):dr);return Object.getOwnPropertySymbols?gr.concat(Object.getOwnPropertySymbols(Dt)):gr},de.prototype.listeners=function(Dt){var dr=L?L+Dt:Dt,gr=this._events[dr];if(!gr)return[];if(gr.fn)return[gr.fn];for(var vr=0,Cr=gr.length,xr=new Array(Cr);vr<Cr;vr++)xr[vr]=gr[vr].fn;return xr},de.prototype.listenerCount=function(Dt){var dr=L?L+Dt:Dt,gr=this._events[dr];return gr?gr.fn?1:gr.length:0},de.prototype.emit=function(Dt,dr,gr,vr,Cr,xr){var Br=L?L+Dt:Dt;if(!this._events[Br])return!1;var jr,zr,Hr=this._events[Br],Kr=arguments.length;if(Hr.fn){switch(Hr.once&&this.removeListener(Dt,Hr.fn,void 0,!0),Kr){case 1:return Hr.fn.call(Hr.context),!0;case 2:return Hr.fn.call(Hr.context,dr),!0;case 3:return Hr.fn.call(Hr.context,dr,gr),!0;case 4:return Hr.fn.call(Hr.context,dr,gr,vr),!0;case 5:return Hr.fn.call(Hr.context,dr,gr,vr,Cr),!0;case 6:return Hr.fn.call(Hr.context,dr,gr,vr,Cr,xr),!0}for(zr=1,jr=new Array(Kr-1);zr<Kr;zr++)jr[zr-1]=arguments[zr];Hr.fn.apply(Hr.context,jr)}else{var kn,Jn=Hr.length;for(zr=0;zr<Jn;zr++)switch(Hr[zr].once&&this.removeListener(Dt,Hr[zr].fn,void 0,!0),Kr){case 1:Hr[zr].fn.call(Hr[zr].context);break;case 2:Hr[zr].fn.call(Hr[zr].context,dr);break;case 3:Hr[zr].fn.call(Hr[zr].context,dr,gr);break;case 4:Hr[zr].fn.call(Hr[zr].context,dr,gr,vr);break;default:if(!jr)for(kn=1,jr=new Array(Kr-1);kn<Kr;kn++)jr[kn-1]=arguments[kn];Hr[zr].fn.apply(Hr[zr].context,jr)}}return!0},de.prototype.on=function(Dt,dr,gr){return re(this,Dt,dr,gr,!1)},de.prototype.once=function(Dt,dr,gr){return re(this,Dt,dr,gr,!0)},de.prototype.removeListener=function(Dt,dr,gr,vr){var Cr=L?L+Dt:Dt;if(!this._events[Cr])return this;if(!dr)return Ie(this,Cr),this;var xr=this._events[Cr];if(xr.fn)xr.fn!==dr||vr&&!xr.once||gr&&xr.context!==gr||Ie(this,Cr);else{for(var Br=0,jr=[],zr=xr.length;Br<zr;Br++)(xr[Br].fn!==dr||vr&&!xr[Br].once||gr&&xr[Br].context!==gr)&&jr.push(xr[Br]);jr.length?this._events[Cr]=jr.length===1?jr[0]:jr:Ie(this,Cr)}return this},de.prototype.removeAllListeners=function(Dt){var dr;return Dt?(dr=L?L+Dt:Dt,this._events[dr]&&Ie(this,dr)):(this._events=new $,this._eventsCount=0),this},de.prototype.off=de.prototype.removeListener,de.prototype.addListener=de.prototype.on,de.prefixed=L,de.EventEmitter=de,w.exports=de}),wi=ol;function ol(w){w=w||{},this.ms=w.min||100,this.max=w.max||1e4,this.factor=w.factor||2,this.jitter=w.jitter>0&&w.jitter<=1?w.jitter:0,this.attempts=0}ol.prototype.duration=function(){var w=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var M=Math.random(),L=Math.floor(M*this.jitter*w);w=1&Math.floor(10*M)?w+L:w-L}return 0|Math.min(w,this.max)},ol.prototype.reset=function(){this.attempts=0},ol.prototype.setMin=function(w){this.ms=w},ol.prototype.setMax=function(w){this.max=w},ol.prototype.setJitter=function(w){this.jitter=w};var av=typeof e=="object"&&e&&e.Object===Object&&e,q1=typeof self=="object"&&self&&self.Object===Object&&self,Ps=av||q1||Function("return this")(),Gs=Ps.Symbol,sv=Object.prototype,V1=sv.hasOwnProperty,iv=sv.toString,Qs=Gs?Gs.toStringTag:void 0,pi=function(M){var L=V1.call(M,Qs),$=M[Qs];try{M[Qs]=void 0;var _=!0}catch{}var re=iv.call(M);return _&&(L?M[Qs]=$:delete M[Qs]),re},Zd=Object.prototype.toString,cv=function(M){return Zd.call(M)},lv=Gs?Gs.toStringTag:void 0,yc=function(M){return M==null?M===void 0?"[object Undefined]":"[object Null]":lv&&lv in Object(M)?pi(M):cv(M)},fi=function(M){var L=typeof M;return M!=null&&(L=="object"||L=="function")},ep=function(M){if(!fi(M))return!1;var L=yc(M);return L=="[object Function]"||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"},uv={deviceId:"",timeout:8e3},H1={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},dv="weblink.netease.im:443",z1=nu.includes,K1=c(function(){return!Array(1).includes()});Vr({target:"Array",proto:!0,forced:K1},{includes:function(M){return z1(this,M,arguments.length>1?arguments[1]:void 0)}});var W1=Uo("Array").includes,dg=to("match"),pg=TypeError,mi=function(w){if(function(M){var L;return Ne(M)&&((L=M[dg])!==void 0?!!L:ue(M)=="RegExp")}(w))throw pg("The method doesn't accept regular expressions");return w},G1=to("match"),Q1=Ce("".indexOf);Vr({target:"String",proto:!0,forced:!function(w){var M=/./;try{"/./"[w](M)}catch{try{return M[G1]=!1,"/./"[w](M)}catch{}}return!1}("includes")},{includes:function(M){return!!~Q1(Aa(pr(this)),Aa(mi(M)),arguments.length>1?arguments[1]:void 0)}});var pv=Uo("String").includes,fg=Array.prototype,ad=String.prototype,bc=function(w){var M=w.includes;return w===fg||tr(fg,w)&&M===fg.includes?W1:typeof w=="string"||w===ad||tr(ad,w)&&M===ad.includes?pv:M},J1=bs.findIndex,Y1="findIndex",tp=!0;Y1 in[]&&Array(1).findIndex(function(){tp=!1}),Vr({target:"Array",proto:!0,forced:tp},{findIndex:function(M){return J1(this,M,arguments.length>1?arguments[1]:void 0)}});var fv=Uo("Array").findIndex,mg=Array.prototype,X1=function(w){var M=w.findIndex;return w===mg||tr(mg,w)&&M===mg.findIndex?fv:M},gg=o(function(w){function M(L){var $;return w.exports=M=Ns?Oo($=js).call($):function(re){return re.__proto__||js(re)},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),pa=o(function(w){w.exports=function(L){var $;return ka($=Function.toString.call(L)).call($,"[native code]")!==-1},w.exports.__esModule=!0,w.exports.default=w.exports}),hg=$e("Reflect","construct"),vg=Object.prototype,Z1=[].push,mv=c(function(){function w(){}return!(hg(function(){},[],w)instanceof w)}),yg=!c(function(){hg(function(){})}),bg=mv||yg;Vr({target:"Reflect",stat:!0,forced:bg,sham:bg},{construct:function(M,L){Zc(M),Vn(L);var $=arguments.length<3?M:Zc(arguments[2]);if(yg&&!mv)return hg(M,L,$);if(M==$){switch(L.length){case 0:return new M;case 1:return new M(L[0]);case 2:return new M(L[0],L[1]);case 3:return new M(L[0],L[1],L[2]);case 4:return new M(L[0],L[1],L[2],L[3])}var _=[null];return T(Z1,_,L),new(T(iu,M,_))}var re=$.prototype,Ie=Ea(Ne(re)?re:vg),de=T(M,Ie,L);return Ne(de)?de:Ie}});var xi=or.Reflect.construct,rc=o(function(w){w.exports=function(){if(typeof Reflect>"u"||!xi||xi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(xi(Boolean,[],function(){})),!0}catch{return!1}},w.exports.__esModule=!0,w.exports.default=w.exports}),eT=o(function(w){function M(L,$,_){var re;return rc()?(w.exports=M=Oo(re=xi).call(re),w.exports.__esModule=!0,w.exports.default=w.exports):(w.exports=M=function(de,Lt,Dt){var dr=[null];dr.push.apply(dr,Lt);var gr=new(Oo(Function).apply(de,dr));return Dt&&lu(gr,Dt.prototype),gr},w.exports.__esModule=!0,w.exports.default=w.exports),M.apply(null,arguments)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),tT=o(function(w){function M(L){var $=typeof tc=="function"?new tc:void 0;return w.exports=M=function(re){if(re===null||!pa(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if($!==void 0){if($.has(re))return $.get(re);$.set(re,Ie)}function Ie(){return eT(re,arguments,gg(this).constructor)}return Ie.prototype=Ja(re.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),lu(Ie,re)},w.exports.__esModule=!0,w.exports.default=w.exports,M(L)}w.exports=M,w.exports.__esModule=!0,w.exports.default=w.exports}),nc=function(w){function M(L,$,_){var re;return $===void 0&&($={}),_===void 0&&(_=400),(re=w.call(this,L)||this).data=$,re.code=_,re.name="customError",re}return Ro(M,w),M}(n(tT)(Error)),yo=function(w){function M(L,$,_){var re;return $===void 0&&($={}),(re=w.call(this,L,$,414)||this).code=414,re.name="validateError",re.rules=_,re}return Ro(M,w),M}(nc),al={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},rp=function(w){function M(L,$,_,re,Ie){var de;return _===void 0&&(_=""),re===void 0&&(re=new Date().getTime()),Ie===void 0&&(Ie={}),_=_||al[L],(de=w.call(this,_,Ie,L)||this).name="cmdError",de.cmd=$,de.timetag=re,de}return Ro(M,w),M}(nc),Tg=function(w){function M(L,$,_){var re;return(re=w.call(this,L,{},412)||this).code=412,re.name="formatError",re.key=$,re.reason=_,re}return Ro(M,w),M}(nc),El=function(w){function M(L,$,_,re,Ie){var de;return(de=w.call(this,L,{file:Ie},400)||this).name="uploadError",de.rawError=$,de.curProvider=_||1,de.mixStorePolicy=re,de}return Ro(M,w),M}(nc),Tc=["error","warn","log","debug"],sl=function(){},sd=["off","error","warn","log","debug"],np=function(){function w(L,$){this.name=$,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=sl,this.log=sl,this.warn=sl,this.error=sl,this.name=$,w.instancesName.push($),bc(sd).call(sd,L)||(L="off"),this.setLogFunc(L)}var M=w.prototype;return M.setLogFunc=function($){var _=this,re=X1(Tc).call(Tc,function(Ie){return Ie===$});In(Tc).call(Tc,function(Ie,de){de<=re&&(_[Ie]=function(){var Lt=Co(Array.prototype).call(arguments),Dt=this.formatArgs(Lt,Ie);this.strategies[Ie](Dt)})})},M.formatArgs=function($,_){var re=new Date,Ie=re.getMonth()+1+"-"+re.getDate()+" "+re.getHours()+":"+re.getMinutes()+":"+re.getSeconds()+":"+re.getMilliseconds();return"[NIM "+_+" "+this.name+" "+Ie+"] "+To($).call($,function(de){return de instanceof nc?de.name+", "+de.code+", "+de.message:de instanceof Error?de&&de.message?de.message:de:typeof de=="object"?Wo(de):de}).join(" ")},w}();np.instancesName=[],Vr({global:!0},{globalThis:u});var gv=bs.filter,rT=Ui("filter");Vr({target:"Array",proto:!0,forced:!rT},{filter:function(M){return gv(this,M,arguments.length>1?arguments[1]:void 0)}});var na=Uo("Array").filter,Sg=Array.prototype,is=function(w){var M=w.filter;return w===Sg||tr(Sg,w)&&M===Sg.filter?na:M},nT=o(function(w,M){w.exports=function(){function L(Dt,dr){if(!(Dt instanceof dr))throw new TypeError("Cannot call a class as a function")}function $(Dt,dr){for(var gr=0;gr<dr.length;gr++){var vr=dr[gr];vr.enumerable=vr.enumerable||!1,vr.configurable=!0,"value"in vr&&(vr.writable=!0),Wi(Dt,vr.key,vr)}}function _(Dt,dr,gr){return dr&&$(Dt.prototype,dr),gr&&$(Dt,gr),Wi(Dt,"prototype",{writable:!1}),Dt}var re={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},Ie="https://statistic.live.126.net/dispatcher/req",de=function(){},Lt=function(){function Dt(dr){L(this,Dt),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=re,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=sa(),this.timer=null,this.setConfig(dr),this.reportConfig.autoStart&&this.initUploadConfig()}return _(Dt,[{key:"setConfig",value:function(gr){this.reportConfig=Mr({},this.reportConfig,gr)}},{key:"reportImmediately",value:function(gr,vr){var Cr=this;this.reportConfig.request(gr,Mr({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},vr)).catch(function(xr){var Br,jr;(jr=(Br=Cr.reportConfig)===null||Br===void 0?void 0:Br.logger)===null||jr===void 0||jr.warn("Reporter immediately upload failed",xr)})}},{key:"report",value:function(gr,vr){var Cr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(gr){var xr=sa();Cr?this.lowPriorityMsgList.push({module:gr,msg:vr,createTime:xr}):this.msgList.push({module:gr,msg:vr,createTime:xr}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(gr,vr){if(gr&&!this.traceMsgCache[gr]){var Cr=Mr(Mr({start_time:sa()},vr),{extension:[]});this.traceMsgCache[gr]=Cr}}},{key:"reportTraceUpdate",value:function(gr){}},{key:"reportTraceUpdateV2",value:function(gr,vr){if(this.traceMsgCache[gr]){var Cr=this.traceMsgCache[gr].extension.length,xr=new Date().getTime();vr.duration=Cr===0?xr-this.traceMsgCache[gr].start_time:xr-this.traceMsgCache[gr].extension[Cr-1].end_time,this.traceMsgCache[gr].extension.push(Mr({end_time:xr},vr))}}},{key:"reportTraceEnd",value:function(gr){var vr,Cr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[gr]&&(gr!=="nos"||Cr===!1?(typeof Cr=="boolean"?this.traceMsgCache[gr].succeed=!!Cr:this.traceMsgCache[gr].state=Cr,this.traceMsgCache[gr].duration=sa()-this.traceMsgCache[gr].start_time,In(vr=this.traceMsgCache[gr].extension).call(vr,function(xr){delete xr.end_time}),this.report(gr,this.traceMsgCache[gr]),this.traceMsgCache[gr]=null):this.traceMsgCache[gr]=null)}},{key:"reportTraceCancel",value:function(gr){this.traceMsgCache[gr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var gr,vr=this;In(gr=Vo(this.traceMsgCache)).call(gr,function(Cr){vr.reportTraceEnd(Cr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=de,this.report=de,this.reportTraceStart=de,this.reportTraceUpdate=de,this.reportTraceEnd=de,this.pause=de,this.restore=de,this.destroy=de,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var gr,vr,Cr=this;if(!this.loading){this.loading=!0;var xr=this.reportConfig.common||{};try{this.reportConfig.request(Ie,{method:"GET",dataType:"json",params:{deviceId:xr.dev_id,sdkVer:xr.sdk_ver,platform:xr.platform,appkey:xr.app_key},timeout:this.reportConfig.timeout}).then(function(Br){var jr,zr;if(!Cr.isDestroyed){if(Br.status===200&&Br.data&&Br.data.code===200){var Hr=Br.data.data||{};Cr.reportConfig.maxSize=Hr.maxSize>1e3?1e3:Hr.maxSize,Cr.reportConfig.maxInterval=Hr.maxInterval>1e4?1e4:Hr.maxInterval,Cr.reportConfig.maxInterval=Hr.maxInterval<10?10:Hr.maxInterval,Cr.reportConfig.minInterval=Hr.minInterval<2?2:Hr.minInterval,Cr.reportConfig.maxDelay=Hr.maxDelay||300,Cr.reportConfig.maxInterval=1e3*Cr.reportConfig.maxInterval,Cr.reportConfig.minInterval=1e3*Cr.reportConfig.minInterval,Cr.reportConfig.maxDelay=1e3*Cr.reportConfig.maxDelay,Cr.enable=!0,Cr.initConfigLoaded=!0,Cr.loading=!1,Cr.reportHeartBeat()}(zr=(jr=Cr.reportConfig)===null||jr===void 0?void 0:jr.logger)===null||zr===void 0||zr.log("Get reporter upload config success")}}).catch(function(Br){var jr,zr;Cr.loading=!1,(zr=(jr=Cr.reportConfig)===null||jr===void 0?void 0:jr.logger)===null||zr===void 0||zr.error("Get reporter upload config failed",Br)})}catch(Br){this.loading=!1,(vr=(gr=this.reportConfig)===null||gr===void 0?void 0:gr.logger)===null||vr===void 0||vr.error("Exec reporter request failed",Br)}}}},{key:"reportHeartBeat",value:function(){var gr=this;this.isDestroyed||(this.timer=vo(function(){gr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var gr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;sa()-this.lastReportTime>=gr&&this.upload()}}},{key:"getUploadMsg",value:function(){var gr,vr,Cr,xr,Br,jr=this,zr={},Hr=sa();this.msgList=is(gr=this.msgList).call(gr,function(Pn){return Hr-Pn.createTime<jr.reportConfig.maxDelay}),this.lowPriorityMsgList=is(vr=this.lowPriorityMsgList).call(vr,function(Pn){return Hr-Pn.createTime<jr.reportConfig.maxDelay}),this.cacheMsgList=is(Cr=this.cacheMsgList).call(Cr,function(Pn){return Hr-Pn.createTime<jr.reportConfig.maxDelay});var Kr=Co(xr=this.msgList).call(xr,0,this.reportConfig.maxSize);if(this.msgList=Co(Br=this.msgList).call(Br,Kr.length),Kr.length<this.reportConfig.maxSize){var kn,Jn,Hn=this.reportConfig.maxSize-Kr.length;Kr=ks(Kr).call(Kr,Co(kn=this.lowPriorityMsgList).call(kn,0,Hn)),this.lowPriorityMsgList=Co(Jn=this.lowPriorityMsgList).call(Jn,Hn)}if(Kr.length<this.reportConfig.maxSize){var xo,Ln,_r=this.reportConfig.maxSize-Kr.length;Kr=ks(Kr).call(Kr,Co(xo=this.cacheMsgList).call(xo,0,_r)),this.cacheMsgList=Co(Ln=this.cacheMsgList).call(Ln,_r)}return In(Kr).call(Kr,function(Pn){zr[Pn.module]?zr[Pn.module].push(Pn.msg):zr[Pn.module]=[Pn.msg]}),{uploadMsgArr:Kr,uploadMsg:zr}}},{key:"upload",value:function(){var gr,vr,Cr=this;if(this.enable&&!(this.lastReportTime&&sa()-this.lastReportTime<this.reportConfig.minInterval)){var xr=this.getUploadMsg(),Br=xr.uploadMsgArr,jr=xr.uploadMsg;if(Br.length){this.lastReportTime=sa();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:jr},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(zr){var Hr,Kr,kn,Jn;Cr.cacheMsgList=Co(Hr=ks(Kr=Cr.cacheMsgList).call(Kr,Br)).call(Hr,0,Cr.reportConfig.cacheMaxSize),(Jn=(kn=Cr.reportConfig)===null||kn===void 0?void 0:kn.logger)===null||Jn===void 0||Jn.warn("Reporter upload failed",zr)})}catch(zr){(vr=(gr=this.reportConfig)===null||gr===void 0?void 0:gr.logger)===null||vr===void 0||vr.warn("Exec reporter request failed",zr)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),Dt}();return Lt}()}),Ho={setLogger:function(M){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function w(L,$){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var M=w.prototype;return M.close=function($,_){throw new Error("Method not implemented.")},M.send=function($){throw new Error("Method not implemented.")},M.onclose=function($){throw new Error("Method not implemented.")},M.onerror=function($){throw new Error("Method not implemented.")},M.onmessage=function($){throw new Error("Method not implemented.")},M.onopen=function($){throw new Error("Method not implemented.")},w}(),localStorage:{},request:function(M,L){throw new Error("Function not implemented.")},uploadFile:function(M){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},Js=TypeError,hv=function(w){return function(M,L,$,_){Or(L);var re=$n(M),Ie=er(re),de=Ia(re),Lt=w?de-1:0,Dt=w?-1:1;if($<2)for(;;){if(Lt in Ie){_=Ie[Lt],Lt+=Dt;break}if(Lt+=Dt,w?Lt<0:de<=Lt)throw Js("Reduce of empty array with no initial value")}for(;w?Lt>=0:de>Lt;Lt+=Dt)Lt in Ie&&(_=L(_,Ie[Lt],Lt,re));return _}},ta={left:hv(!1),right:hv(!0)}.left,oT=Ds("reduce");Vr({target:"Array",proto:!0,forced:!oT||!Ua&&mr>79&&mr<83},{reduce:function(M){var L=arguments.length;return ta(this,M,L,L>1?arguments[1]:void 0)}});var vv=Uo("Array").reduce,Cg=Array.prototype,op=function(w){var M=w.reduce;return w===Cg||tr(Cg,w)&&M===Cg.reduce?vv:M},yv=function(M){return M===void 0},Pl={},Sc={};function bv(w,M){var L,$,_;try{_=JSON.parse(w)}catch(Cr){throw M.error("Parse command error: ",w),Cr}var re=_.sid+"_"+_.cid,Ie=_.r;if(bc(L=["4_1","4_2","4_10","4_11"]).call(L,re)){var de=_.r[1].headerPacket;re=de.sid+"_"+de.cid,Ie=_.r[1].body}var Lt,Dt=Sc[re],dr=Pl[Dt],gr=function(xr,Br){var jr=al[xr];return jr===null?null:new rp(xr,Br,jr,new Date().getTime())}(_.code,Dt),vr={cmd:Dt,raw:_,error:gr,service:dr==null?void 0:dr.service,content:{}};if(vr.error){if(vr.error.cmd=Dt,vr.error.callFunc="parseCmd",!(!(($=dr==null?void 0:dr.ignoreErrCodes)===null||$===void 0)&&bc($).call($,_.code)))return vr;M.warn("parseCmd:: ignore error ",vr.error),vr.error.ignore=!0}return!Dt||!dr?(vr.notFound=!0,vr):(dr.response&&In(Lt=dr.response).call(Lt,function(Cr,xr){var Br=Ie[xr],jr=Cr.type,zr=Cr.name,Hr=Cr.reflectMapper;if(!yv(Br))switch(jr){case"Property":vr.content[zr]=Hr?Ii(Br,Hr):Br;break;case"PropertyArray":vr.content[zr]=To(Br).call(Br,function(Kr){return Hr?Ii(Kr,Hr):Kr});break;case"long":case"Long":case"byte":case"Byte":case"Number":vr.content[zr]=+Br;break;default:vr.content[zr]=Br}}),vr)}function id(w,M){var L={};for(var $ in w)M[$]!==void 0&&(L[M[$]]=w[$]);return L}function Ii(w,M){var L={};for(var $ in w)M[$]!==void 0&&(L[M[$]]=w[$]);return L}function qa(w){Pl=Mr(Pl,w.cmdConfig),Sc=Mr(Sc,w.cmdMap)}function rs(w){var M;return op(M=Vo(w)).call(M,function(L,$){var _,re=w[$];return L[$]=op(_=Vo(re)).call(_,function(Ie,de){return Ie[re[de]]=de,Ie},{}),L},{})}var Oa=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],Ei=["transport not supported","client not handshaken","unauthorized"],Cc=["reconnect"],Mg=function(w){function M($,_,re){var Ie;return(Ie=w.call(this)||this).url=_,Ie.logger=re,Ie.websocket=null,Ie.core=$,Ie.url=_,Ie.status="disconnected",Ie.logger=re,Ie.connect(),Ie}Ro(M,w);var L=M.prototype;return L.connect=function(){var _=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+sa(),{method:"GET",dataType:"text",timeout:8e3}).then(function(re){var Ie=re.data.split(":"),de=Ie[0],Lt=Ie[1];return _.sessionId=de,_.closeTimeout=1e3*Lt,_._createWebsocket("wss://"+_.url+"/socket.io/1/websocket/"+de)}).catch(function(re){_.logger.error("imsocket::handshake fail. ",re&&re.message),_.status="disconnected",_.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},L.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(_){this.logger.warn("attempt to close websocket error",_)}this.clean()}},L.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},L.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},L._createWebsocket=function(_){var re,Ie=this;this.websocket=new Ho.WebSocket(_),this.websocket.onmessage=Oo(re=this.onMessage).call(re,this),this.websocket.onclose=function(){Ie.logger.log("imsocket:: receive websocket onclose event, current status",Ie.status),Ie.clean()},this.websocket.onerror=function(de){Ie.logger.error("imsocket:: onerror",de)}},L.onMessage=function(_){var re;this.resetCloseTimer();var Ie=this.decodePacket(_.data);if(Ie)switch(Ie.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",Ie.data);break;case"event":Ie.name&&this.emit(Ie.name,Ie.args);break;case"error":Ie.reason==="unauthorized"?this.emit("connect_failed",Ie.reason):this.emit("error",Ie.reason);break;case"heartbeat":(re=this.websocket)===null||re===void 0||re.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",Ie.type)}},L.encodePacket=function(_){var re,Ie,de=_.type,Lt=_.id,Dt=Lt===void 0?"":Lt,dr=_.endpoint,gr=dr===void 0?"":dr,vr=_.ack,Cr=null;if(!de)return"";switch(de){case"error":re=_.reason?ka(Ei).call(Ei,_.reason):"",Ie=_.advice?ka(Cc).call(Cc,_.advice):"",re===""&&Ie===""||(Cr=re+(Ie!==""?"+"+Ie:""));break;case"message":_.data!==""&&(Cr=_.data);break;case"event":re={name:_.name},re=_.args&&_.args.length?{name:_.name,args:_.args}:{name:_.name},Cr=Wo(re);break;case"json":Cr=Wo(_.data);break;case"connect":_.qs&&(Cr=_.qs);break;case"ack":Cr=_.ackId+(_.args&&_.args.length?"+"+Wo(_.args):"")}var xr=[ka(Oa).call(Oa,de),Dt+(vr==="data"?"+":""),gr];return Cr!=null&&xr.push(Cr),xr.join(":")},L.decodePacket=function(_){if(_)if(_.charAt(0)!="�"){var re=_.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(re){var Ie,de=re[1],Lt=re[2],Dt=re[3],dr=re[4],gr=re[5],vr={type:Oa[+de],endpoint:dr};switch(Lt&&(vr.id=Lt,vr.ack=!Dt||"data"),vr.type){case"error":Ie=gr.split("+"),vr.reason=Ei[+Ie[0]]||"";break;case"message":vr.data=gr||"";break;case"connect":vr.qs=gr||"";break;case"event":try{var Cr=JSON.parse(gr);vr.name=Cr.name,vr.args=Cr.args}catch(xr){this.logger.error("imsocket::parseData::type::event error",xr)}vr.args=vr.args||[];break;case"json":try{vr.data=JSON.parse(gr)}catch(xr){this.logger.error("imsocket::parseData::type::json error",xr)}break;case"ack":if((Ie=gr.match(/^([0-9]+)(\+)?(.*)/))&&(vr.ackId=Ie[1],vr.args=[],Ie[3]))try{vr.args=Ie[3]?JSON.parse(Ie[3]):[]}catch(xr){this.logger.error("imsocket::parseData::type::ack error",xr)}}return vr}}else this.logger.error("imsocket::unrecognize dataStr",Co(_).call(_,0,20))},L.send=function(_){var re,Ie={data:_,type:"message",endpoint:""};(re=this.websocket)===null||re===void 0||re.send(this.encodePacket(Ie))},L.resetCloseTimer=function(){var _=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=vo(function(){_.close()},this.closeTimeout))},M}(Vs),kg=Uo("Array").values,ap=Array.prototype,aT={DOMTokenList:!0,NodeList:!0},sp=function(w){var M=w.values;return w===ap||tr(ap,w)&&M===ap.values||Fr(aT,Bs(w))?kg:M};Vr({target:"Array",stat:!0},{isArray:Ya});var gi=or.Array.isArray,sT=bs.every,ip=Ds("every");Vr({target:"Array",proto:!0,forced:!ip},{every:function(M){return sT(this,M,arguments.length>1?arguments[1]:void 0)}});var ns=Uo("Array").every,_g=Array.prototype,iT=function(w){var M=w.every;return w===_g||tr(_g,w)&&M===_g.every?ns:M},hi=function(M){return M!=null&&typeof M=="object"},wg=function(M){return hi(M)&&yc(M)=="[object RegExp]"},Al=function(M){return function(L){return M(L)}},cs=o(function(w,M){var L=M&&!M.nodeType&&M,$=L&&w&&!w.nodeType&&w,_=$&&$.exports===L&&av.process,re=function(){try{var Ie=$&&$.require&&$.require("util").types;return Ie||_&&_.binding&&_.binding("util")}catch{}}();w.exports=re}),Tv=cs&&cs.isRegExp,xg=Tv?Al(Tv):wg,Ol=Ps["__core-js_shared__"],Ig=function(){var w=/[^.]+$/.exec(Ol&&Ol.keys&&Ol.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),cT=function(M){return!!Ig&&Ig in M},Eg=Function.prototype.toString,Mc=function(M){if(M!=null){try{return Eg.call(M)}catch{}try{return M+""}catch{}}return""},lT=/^\[object .+?Constructor\]$/,uT=Function.prototype,il=Object.prototype,dT=uT.toString,pT=il.hasOwnProperty,fT=RegExp("^"+dT.call(pT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mT=function(M){return!(!fi(M)||cT(M))&&(ep(M)?fT:lT).test(Mc(M))},gT=function(M,L){return M==null?void 0:M[L]},cl=function(M,L){var $=gT(M,L);return mT($)?$:void 0},cd=cl(Object,"create"),hT=function(){this.__data__=cd?cd(null):{},this.size=0},ll=function(M){var L=this.has(M)&&delete this.__data__[M];return this.size-=L?1:0,L},ld=Object.prototype.hasOwnProperty,vT=function(M){var L=this.__data__;if(cd){var $=L[M];return $==="__lodash_hash_undefined__"?void 0:$}return ld.call(L,M)?L[M]:void 0},yT=Object.prototype.hasOwnProperty,bT=function(M){var L=this.__data__;return cd?L[M]!==void 0:yT.call(L,M)},TT=function(M,L){var $=this.__data__;return this.size+=this.has(M)?0:1,$[M]=cd&&L===void 0?"__lodash_hash_undefined__":L,this};function Nl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var $=w[M];this.set($[0],$[1])}}Nl.prototype.clear=hT,Nl.prototype.delete=ll,Nl.prototype.get=vT,Nl.prototype.has=bT,Nl.prototype.set=TT;var Sv=Nl,ST=function(){this.__data__=[],this.size=0},oc=function(M,L){return M===L||M!=M&&L!=L},ud=function(M,L){for(var $=M.length;$--;)if(oc(M[$][0],L))return $;return-1},CT=Array.prototype.splice,cp=function(M){var L=this.__data__,$=ud(L,M);return!($<0)&&($==L.length-1?L.pop():CT.call(L,$,1),--this.size,!0)},lp=function(M){var L=this.__data__,$=ud(L,M);return $<0?void 0:L[$][1]},MT=function(M){return ud(this.__data__,M)>-1},kT=function(M,L){var $=this.__data__,_=ud($,M);return _<0?(++this.size,$.push([M,L])):$[_][1]=L,this};function Rl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var $=w[M];this.set($[0],$[1])}}Rl.prototype.clear=ST,Rl.prototype.delete=cp,Rl.prototype.get=lp,Rl.prototype.has=MT,Rl.prototype.set=kT;var up=Rl,dd=cl(Ps,"Map"),Bl=function(){this.size=0,this.__data__={hash:new Sv,map:new(dd||up),string:new Sv}},dp=function(M){var L=typeof M;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?M!=="__proto__":M===null},kc=function(M,L){var $=M.__data__;return dp(L)?$[typeof L=="string"?"string":"hash"]:$.map},_T=function(M){var L=kc(this,M).delete(M);return this.size-=L?1:0,L},wT=function(M){return kc(this,M).get(M)},pp=function(M){return kc(this,M).has(M)},xT=function(M,L){var $=kc(this,M),_=$.size;return $.set(M,L),this.size+=$.size==_?0:1,this};function Fl(w){var M=-1,L=w==null?0:w.length;for(this.clear();++M<L;){var $=w[M];this.set($[0],$[1])}}Fl.prototype.clear=Bl,Fl.prototype.delete=_T,Fl.prototype.get=wT,Fl.prototype.has=pp,Fl.prototype.set=xT;var fp=Fl,IT=function(M){return this.__data__.set(M,"__lodash_hash_undefined__"),this},Ll=function(M){return this.__data__.has(M)};function ul(w){var M=-1,L=w==null?0:w.length;for(this.__data__=new fp;++M<L;)this.add(w[M])}ul.prototype.add=ul.prototype.push=IT,ul.prototype.has=Ll;var Pg=ul,Cv=function(M,L,$,_){for(var re=M.length,Ie=$+(_?1:-1);_?Ie--:++Ie<re;)if(L(M[Ie],Ie,M))return Ie;return-1},mp=function(M){return M!=M},Ag=function(M,L,$){for(var _=$-1,re=M.length;++_<re;)if(M[_]===L)return _;return-1},ET=function(M,L,$){return L==L?Ag(M,L,$):Cv(M,mp,$)},Mv=function(M,L){return!!(M!=null&&M.length)&&ET(M,L,0)>-1},kv=function(M,L,$){for(var _=-1,re=M==null?0:M.length;++_<re;)if($(L,M[_]))return!0;return!1},Og=function(M,L){for(var $=-1,_=M==null?0:M.length,re=Array(_);++$<_;)re[$]=L(M[$],$,M);return re},gp=function(M,L){return M.has(L)},_v=function(M,L,$,_){var re=-1,Ie=Mv,de=!0,Lt=M.length,Dt=[],dr=L.length;if(!Lt)return Dt;$&&(L=Og(L,Al($))),_?(Ie=kv,de=!1):L.length>=200&&(Ie=gp,de=!1,L=new Pg(L));e:for(;++re<Lt;){var gr=M[re],vr=$==null?gr:$(gr);if(gr=_||gr!==0?gr:0,de&&vr==vr){for(var Cr=dr;Cr--;)if(L[Cr]===vr)continue e;Dt.push(gr)}else Ie(L,vr,_)||Dt.push(gr)}return Dt},$l=function(M){return M},Ng=function(M,L,$){switch($.length){case 0:return M.call(L);case 1:return M.call(L,$[0]);case 2:return M.call(L,$[0],$[1]);case 3:return M.call(L,$[0],$[1],$[2])}return M.apply(L,$)},Rg=Math.max,hp=function(M,L,$){return L=Rg(L===void 0?M.length-1:L,0),function(){for(var _=arguments,re=-1,Ie=Rg(_.length-L,0),de=Array(Ie);++re<Ie;)de[re]=_[L+re];re=-1;for(var Lt=Array(L+1);++re<L;)Lt[re]=_[re];return Lt[L]=$(de),Ng(M,this,Lt)}},wv=function(M){return function(){return M}},pd=function(){try{var w=cl(Object,"defineProperty");return w({},"",{}),w}catch{}}(),xv=pd?function(w,M){return pd(w,"toString",{configurable:!0,enumerable:!1,value:wv(M),writable:!0})}:$l,PT=Date.now,vp=function(M){var L=0,$=0;return function(){var _=PT(),re=16-(_-$);if($=_,re>0){if(++L>=800)return arguments[0]}else L=0;return M.apply(void 0,arguments)}},Iv=vp(xv),Bg=function(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=9007199254740991},yp=function(M){return M!=null&&Bg(M.length)&&!ep(M)},Ev=function(M){return hi(M)&&yp(M)},Pv=function(M,L){return Iv(hp(M,L,$l),M+"")}(function(w,M){return Ev(w)?_v(w,M):[]}),Fg=Pv;function bp(w,M){return M instanceof RegExp?"__REGEXP "+M.toString():M}function En(w,M,L){var $;M===void 0&&(M={});var _={};return In($=Vo(w)).call($,function(re){var Ie=w[re].type,de=L?"In "+L+", ":"";if(M[re]===void 0){if(w[re].required===!1)return void(_[re]=M[re]);throw new yo(de+'param "'+re+'" is required',{key:re},"required")}var Lt=AT[Ie];if(Lt&&!Lt(M,re,w[re]))throw new yo(de+'param "'+re+'" expects '+Wo(w[re],bp),{key:re,value:M[re]},Wo(w[re]));_[re]=M[re]}),_}var AT={string:function(M,L,$){var _=$.allowEmpty,re=$.max,Ie=$.min,de=$.regExp,Lt=M[L];return typeof Lt=="string"&&(_!==!1||Lt!=="")&&!(typeof re=="number"&&Lt.length>re)&&!(typeof Ie=="number"&&Lt.length<Ie)&&!(xg(de)&&!de.test(Lt))},number:function(M,L,$){var _=$.min,re=$.max,Ie=M[L];return typeof Ie=="number"&&!(typeof _=="number"&&Ie<_)&&!(typeof re=="number"&&Ie>re)},boolean:function(M,L){return typeof M[L]=="boolean"},enum:function(M,L,$){var _=sp($),re=M[L];return!_||ka(_).call(_,re)>-1},array:function(M,L,$){var _,re=$.itemType,Ie=$.rules,de=$.min,Lt=$.max,Dt=sp($),dr=M[L];return!!gi(dr)&&!(typeof Lt=="number"&&dr.length>Lt)&&!(typeof de=="number"&&dr.length<de)&&!(re&&re!=="enum"&&!iT(dr).call(dr,function(gr){return typeof gr===re}))&&(re!=="enum"||!Dt||!Fg.apply(void 0,ks(_=[dr]).call(_,Dt)).length)&&(Ie&&In(dr).call(dr,function(gr,vr){return En(Ie,gr,L+"["+vr+"]")}),!0)},object:function(M,L,$){var _=$.rules,re=M[L];return _&&En(_,re,L),!0}},jl=cl(Ps,"Set"),OT=function(){},Gr=function(M){var L=-1,$=Array(M.size);return M.forEach(function(_){$[++L]=_}),$},NT=jl&&1/Gr(new jl([,-0]))[1]==1/0?function(w){return new jl(w)}:OT,Dl=NT,RT=function(M,L,$){var _=-1,re=Mv,Ie=M.length,de=!0,Lt=[],Dt=Lt;if($)de=!1,re=kv;else if(Ie>=200){var dr=L?null:Dl(M);if(dr)return Gr(dr);de=!1,re=gp,Dt=new Pg}else Dt=L?[]:Lt;e:for(;++_<Ie;){var gr=M[_],vr=L?L(gr):gr;if(gr=$||gr!==0?gr:0,de&&vr==vr){for(var Cr=Dt.length;Cr--;)if(Dt[Cr]===vr)continue e;L&&Dt.push(vr),Lt.push(gr)}else re(Dt,vr,$)||(Dt!==Lt&&Dt.push(vr),Lt.push(gr))}return Lt},Tp=function(M){return M&&M.length?RT(M):[]},Lg=`	
\v\f\r                　\u2028\u2029\uFEFF`,Av=Ce("".replace),Sp="["+Lg+"]",BT=RegExp("^"+Sp+Sp+"*"),$g=RegExp(Sp+Sp+"*$"),Cp=function(w){return function(M){var L=Aa(pr(M));return 1&w&&(L=Av(L,BT,"")),2&w&&(L=Av(L,$g,"")),L}},Mp={start:Cp(1),end:Cp(2),trim:Cp(3)}.trim,fd=u.parseInt,Ov=u.Symbol,kp=Ov&&Ov.iterator,Nv=/^[+-]?0x/i,md=Ce(Nv.exec),jg=fd(Lg+"08")!==8||fd(Lg+"0x16")!==22||kp&&!c(function(){fd(Object(kp))})?function(M,L){var $=Mp(Aa(M));return fd($,L>>>0||(md(Nv,$)?16:10))}:fd;Vr({global:!0,forced:parseInt!=jg},{parseInt:jg});var Pi,_o=or.parseInt,_p=(Pi=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Pi()+Pi()+Pi()+Pi()+Pi()+Pi()+Pi()+Pi()});function vi(w){var M;return is(M=Vo(w)).call(M,function(L){return!(+L>=0)})}function Ai(w,M){var L,$=is(L=Vo(w)).call(L,function(_){return w[_]==M});return $.length>0?$[0]:void 0}function Lo(w,M){if(M===void 0&&(M="-"),!w)throw new nc("No sessionId",{},400);var L=ka(w).call(w,M);if(L===-1)throw new nc("Can not find conjunctions",{},400);var $=Co(w).call(w,0,L);return{accid:Co(w).call(w,L+1),scene:$==="super_team"?"superTeam":$}}var Dg=TypeError,ia=Object.getOwnPropertyDescriptor,Rv=Oe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(w){return w instanceof TypeError}}()?function(w,M){if(Ya(w)&&!ia(w,"length").writable)throw Dg("Cannot set read only .length");return w.length=M}:function(w,M){return w.length=M},FT=TypeError,wp=function(w,M){if(!delete w[M])throw FT("Cannot delete property "+Rr(M)+" of "+Rr(w))},LT=Ui("splice"),$T=Math.max,xp=Math.min;Vr({target:"Array",proto:!0,forced:!LT},{splice:function(M,L){var $,_,re,Ie,de,Lt,Dt=$n(this),dr=Ia(Dt),gr=ri(M,dr),vr=arguments.length;for(vr===0?$=_=0:vr===1?($=0,_=dr-gr):($=vr-2,_=xp($T($i(L),0),dr-gr)),uu(dr+$-_),re=fu(Dt,_),Ie=0;Ie<_;Ie++)(de=gr+Ie)in Dt&&Rs(re,Ie,Dt[de]);if(re.length=_,$<_){for(Ie=gr;Ie<dr-_;Ie++)Lt=Ie+$,(de=Ie+_)in Dt?Dt[Lt]=Dt[de]:wp(Dt,Lt);for(Ie=dr;Ie>dr-_+$;Ie--)wp(Dt,Ie-1)}else if($>_)for(Ie=dr-_;Ie>gr;Ie--)Lt=Ie+$-1,(de=Ie+_-1)in Dt?Dt[Lt]=Dt[de]:wp(Dt,Lt);for(Ie=0;Ie<$;Ie++)Dt[Ie+gr]=arguments[Ie+2];return Rv(Dt,dr-_+$),re}});var jT=Uo("Array").splice,Ug=Array.prototype,qg=function(w){var M=w.splice;return w===Ug||tr(Ug,w)&&M===Ug.splice?jT:M},DT=function(w,M,L,$){try{return $?M(Vn(L)[0],L[1]):M(L)}catch(_){Ou(w,"throw",_)}},Ip=Array,Bv=!Gm(function(w){Array.from(w)});Vr({target:"Array",stat:!0,forced:Bv},{from:function(M){var L=$n(M),$=Uc(this),_=arguments.length,re=_>1?arguments[1]:void 0,Ie=re!==void 0;Ie&&(re=$o(re,_>2?arguments[2]:void 0));var de,Lt,Dt,dr,gr,vr,Cr=Jc(L),xr=0;if(!Cr||this===Ip&&fm(Cr))for(de=Ia(L),Lt=$?new this(de):Ip(de);de>xr;xr++)vr=Ie?re(L[xr],xr):L[xr],Rs(Lt,xr,vr);else for(gr=(dr=Gi(L,Cr)).next,Lt=$?new this:[];!(Dt=Y(gr,dr)).done;xr++)vr=Ie?DT(dr,re,[Dt.value,xr],!0):Dt.value,Rs(Lt,xr,vr);return Lt.length=xr,Lt}});var Ep=or.Array.from,gd=Jc;function Fv(w,M){var L,$=ha!==void 0&&gd(w)||w["@@iterator"];if($)return Oo(L=($=$.call(w)).next).call(L,$);if(gi(w)||($=function(Ie,de){var Lt;if(Ie){if(typeof Ie=="string")return _c(Ie,de);var Dt=Co(Lt=Object.prototype.toString.call(Ie)).call(Lt,8,-1);if(Dt==="Object"&&Ie.constructor&&(Dt=Ie.constructor.name),Dt==="Map"||Dt==="Set")return Ep(Ie);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return _c(Ie,de)}}(w))||M&&w&&typeof w.length=="number"){$&&(w=$);var _=0;return function(){return _>=w.length?{done:!0}:{done:!1,value:w[_++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _c(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,$=new Array(M);L<M;L++)$[L]=w[L];return $}var Va,Lv=function(){function w(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var M=w.prototype;return M.addTimer=function($,_,re){_===void 0&&(_=0),re===void 0&&(re=1);var Ie=new Date().getTime(),de=this.id;return this.timerList.push({id:de,loop:re,count:0,timeout:Ie+_,interval:_,callback:$}),this.id++,this.checkTimer(Ie),de},M.checkTimer=function($){if($===void 0&&($=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var _,re,Ie=0,de=Fv(this.timerList);!(_=de()).done;){var Lt=_.value;(Ie===0||Ie>Lt.timeout)&&(Ie=Lt.timeout)}this.timerList.length!==0&&(this.timer===null||Ie<this.timeout||this.timeout<$)&&(this.timer=vo(Oo(re=this.nowTime).call(re,this),Ie-$),this.timeout=Ie)}},M.nowTime=function(){for(var $,_=new Date().getTime(),re=Fv(this.timerList);!($=re()).done;){var Ie=$.value;_>=Ie.timeout&&(Ie.callback(),Ie.count++,Ie.timeout=_+Ie.interval)}this.clerTime(),this.checkTimer(_)},M.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},M.deleteTimer=function($){for(var _=this.timerList.length-1;_>=0;_--){var re;this.timerList[_].id===$&&qg(re=this.timerList).call(re,_,1)}},M.removeFinished=function(){for(var $=this.timerList.length-1;$>=0;$--){var _,re=this.timerList[$];re.loop>=0&&re.count>=re.loop&&qg(_=this.timerList).call(_,$,1)}},M.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},w}(),$v=function(){function w(L){this.core=L}var M=w.prototype;return M.request=function($,_){var re=this,Ie=new Date().getTime();return Ho.request($,_).catch(function(de){var Lt,Dt,dr=de;throw re.core.reporter.reportTraceStart("exceptions",{user_id:re.core.options.account,trace_id:(Dt=(Lt=re.core)===null||Lt===void 0?void 0:Lt.socket)===null||Dt===void 0?void 0:Dt.sessionId,start_time:Ie,action:1}),re.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof dr.code=="number"?dr.code:0,description:dr.message||""+dr.code,operation_type:0,target:$,context:_?Wo(_):""}),re.core.reporter.reportTraceEnd("exceptions",1),de})},M.uploadFile=function($){var _=this,re=new Date().getTime();return Ho.uploadFile($).catch(function(Ie){var de,Lt,Dt=Ie;_.core.reporter.reportTraceStart("exceptions",{user_id:_.core.options.account,trace_id:(Lt=(de=_.core)===null||de===void 0?void 0:de.socket)===null||Lt===void 0?void 0:Lt.sessionId,start_time:re,action:1});var dr=Ho.platform==="BROWSER"?$.chunkUploadHost:$.commonUploadHost?$.commonUploadHost+"/"+($.nosToken&&$.nosToken.bucket):"https://nos.netease.com/nim";throw _.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Dt.code=="number"?Dt.code:0,description:Dt.message||""+Dt.code,operation_type:1,target:dr}),_.core.reporter.reportTraceEnd("exceptions",1),Ie})},w}();(function(w){w[w.ACTIVE=1]="ACTIVE",w[w.KICKED=2]="KICKED",w[w.OFFLINE=3]="OFFLINE"})(Va||(Va={}));var ls=window&&ep(window.addEventListener)&&ep(window.removeEventListener),jv=function(w){function M($,_){var re;(re=w.call(this)||this).status="unconnected",re.linkUrls=[],re.eventBus=new Vs,re.packetSer=1,re.retryCount=0,re.reconnectTimer=0,re.backoff=new wi({max:8e3,min:1600,jitter:.01}),re.sendingCmdMap=new tc,re.pingTimer=0,re.config=uv,re.abtInfo={},En({linkUrls:{type:"array",itemType:"string",required:!1}},$),re.options=Mr(Mr({},H1),$),re.adapters=new $v(i(re));var Ie=Ho.localStorage.getItem("__NIM_DEVC_ID__");re.options.isFixedDeviceId?(Ie=Ho.localStorage.getItem("__NIM_DEVC_ID__")||_p(),Ho.localStorage.setItem("__NIM_DEVC_ID__",Ie)):Ie=_p(),re.config=Mr(Mr(Mr({},uv),_),{deviceId:Ie}),re.timerManager=new Lv,re.logger=new np(re.options.debugLevel,re.options.account);var de=Ho.getSystemInfo();return re.reporter=new nT({common:{app_key:$.appkey,dev_id:Ie,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:de.os,os_ver:de.osVer,model:de.hostEnvVer,manufactor:de.hostEnv,host_env:de.hostEnv,host_info:de.hostInfo,host_env_ver:de.hostEnvVer},request:Ho.request,logger:re.logger,autoStart:Ho.platform==="BROWSER"}),Ho.setLogger(re.logger),re.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",$.appkey),re}Ro(M,w);var L=M.prototype;return L.emit=function(_){try{for(var re,Ie,de=sa(),Lt=arguments.length,Dt=new Array(Lt>1?Lt-1:0),dr=1;dr<Lt;dr++)Dt[dr-1]=arguments[dr];var gr=(re=w.prototype.emit).call.apply(re,ks(Ie=[this,_]).call(Ie,Dt)),vr=sa()-de;return vr>=10&&this.logger.warn("Core::emit event: "+_+" process takes: "+vr+"ms"),gr}catch(Cr){return this.logger.error("Core::emit event: "+_+". Error: "+Cr),!1}},L.connect=function(_,re){return _===void 0&&(_={}),Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr,gr,vr;return sr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(En({linkUrls:{type:"array",itemType:"string",required:!1}},_),/^(unconnected|waitReconnect)$/.test(this.status)){xr.next=5;break}return de="Core socket status is "+this.status+", and would not connect",this.logger.warn(de),xr.abrupt("return",co.reject(de));case 5:this.status="connecting",_.linkUrls&&_.linkUrls.length>0&&(this.linkUrls=ks(Lt=_.linkUrls).call(Lt,this.linkUrls),this.linkUrls=Tp(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push(dv),Dt=0;case 9:if(!(Dt<this.linkUrls.length)){xr.next=32;break}return dr=this.linkUrls[Dt],gr=new Date().getTime(),xr.prev=12,xr.next=15,this.doConnect(dr);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+dr),this.abtRequest(),xr.abrupt("return",dr);case 21:xr.prev=21,xr.t0=xr.catch(12),vr=xr.t0,re&&re(vr,dr),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:gr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof vr.code=="number"?vr.code:0,description:vr.message||""+vr.code,operation_type:0,target:dr}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+dr,xr.t0);case 29:Dt++,xr.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect(Va.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(Va.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return xr.stop()}},Ie,this,[[12,21]])}))},L.doConnect=function(_){var re=this;return new co(function(Ie,de){var Lt;re.socket=new Mg(re,_,re.logger),re.socket.on("connect",function(){re.logger.log("socket on connect",_),Ie()}),re.socket.on("message",Oo(Lt=re.onMessage).call(Lt,re)),re.socket.on("disconnect",function(Dt){re.logger.log("core:: socket on disconnect",Dt),re.doDisconnect(Va.OFFLINE,"SocketOnDisconnect")}),re.socket.on("handshakeFailed",function(){re.logger.warn("core:: socket handshake failed"),de(new nc("handshake failed",{},408))})})},L.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},L.doDisconnect=function(_,re){if(this.logger.log("doDisconnect: type "+_+", description "+re),this.status!=="unconnected"){this.markAllCmdInvaild(new nc("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var Ie=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(_===Va.ACTIVE||Ie)this.logger.log("doDisconnect: emit disconnect, type "+_,Ie),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(_===Va.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var de=typeof re=="string"?{reason:"unknow",message:re}:re;this.eventBus.emit("kicked",de),this.emit("kicked",de),this.destroyOnlineListener()}else _===Va.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},L.attempToReconnect=function(){var _=this;if(this.status!=="waitReconnect"){var re=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+re),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:re}),this.emit("willReconnect",{retryCount:this.retryCount,duration:re}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=vo(function(){_.status==="waitReconnect"?_.connect({isAutoReconnect:!0}).catch(function(){_.logger.error("core::attempToReconnect failed "+_.retryCount)}):_.logger.warn("doDisconnect: reconnectTimer status is "+_.status+", would not go on reconnecting")},re)}else this.logger.warn("doDisconnect: already is waiting reconnect")},L.sendCmd=function(_,re,Ie){var de=this;if(this.status!=="logined"&&_!=="login"&&_!=="chatroomLogin"&&_!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+_),co.reject({cmd:_,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return co.reject("No_socket");var Lt=_!=="heartbeat",Dt=Lt?this.packetSer++:0,dr=function(zr,Hr,Kr,kn){var Jn=Pl[zr];if(!Jn)return Kr.error("createCmd:: can not find cmd config: ",zr),null;var Hn,xo={SER:Hr,SID:Jn.sid,CID:Jn.cid,Q:[]};return Jn.params&&kn&&In(Hn=Jn.params).call(Hn,function(Ln){var _r=kn[Ln.name];if(!yv(_r)){var Pn=Ln.type,Fn=Ln.reflectMapper;switch(Ln.type){case"PropertyArray":Pn="ArrayMable",_r=To(_r).call(_r,function(_n){return{t:"Property",v:Fn?id(_n,Fn):_n}});break;case"Property":_r=Fn?id(_r,Fn):_r;break;case"Bool":case"bool":_r=_r?"true":"false"}xo.Q.push({t:Pn,v:_r})}}),{packet:xo,isNoResponse:Jn.isNoResponse||!1}}(_,Dt,this.logger,re);if(!dr){var gr="SendCmd "+Dt+" "+_+" error";return this.logger.error(gr),co.reject(gr)}var vr=dr.packet,Cr=dr.isNoResponse,xr=Wo(vr);Lt&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",_,"ser:"+Dt,xr):this.logger.log("core::sendCmd",_,"ser:"+Dt));var Br=new Date().getTime();return new co(function(jr,zr){de.sendingCmdMap.set(Dt,{cmd:_,params:re,callback:[jr,zr],timer:Cr?null:vo(function(){var Kr,kn=new rp(504,_,"Packet Timeout",new Date().getTime(),{message:"ser "+Dt+" cmd "+_+" timeout"});kn.callFunc="sendCmd",de.markCmdInvalid(Dt,kn,_),de.reporter.reportTraceStart("exceptions",{user_id:de.options.account,trace_id:(Kr=de.socket)===null||Kr===void 0?void 0:Kr.sessionId,start_time:Br,action:2}),de.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:vr.SID+"-"+vr.CID,context:""+vr.SER}),de.reporter.reportTraceEnd("exceptions",1)},Ie&&Ie.timeout?Ie.timeout:de.config.timeout)});try{de.socket.send(xr)}catch(Kr){var Hr=new rp(415,_,Kr&&Kr.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Kr});Hr.callFunc="sendCmd",de.markCmdInvalid(Dt,Hr,_),zr(Kr)}})},L.onMessage=function(_){var re=bv(_,this.logger);if(re){var Ie=re.raw.ser;if(re.error&&this.logger.error("core:onMessage packet error",re.raw.sid+"_"+re.raw.cid+", ser:"+Ie+",",re.error),!re.notFound)return re.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+Ie,re.cmd,re.content):this.logger.log("imsocket::recvCmd ser:"+Ie,re.cmd)),re.__receiveTime=sa(),re;this.logger.warn("core::onMessage packet not found",re.raw.sid+"_"+re.raw.cid+", ser:"+Ie)}},L.markCmdInvalid=function(_,re,Ie){var de=this.sendingCmdMap.get(_);if(de){var Lt=de.callback,Dt=de.timer;Dt&&clearTimeout(Dt),this.sendingCmdMap.delete(_),this.logger.warn("packet "+_+", "+Ie+" is invalid:",re),Lt[1](re)}},L.markAllCmdInvaild=function(_){var re;this.logger.log("markAllCmdInvaild"),In(re=this.sendingCmdMap).call(re,function(Ie){var de=Ie.callback,Lt=Ie.timer;Lt&&clearTimeout(Lt),de[1](_)}),this.sendingCmdMap.clear()},L.ping=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re=this;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return clearTimeout(this.pingTimer),de.prev=1,de.next=4,this.sendCmd("heartbeat");case 4:de.next=14;break;case 6:return de.prev=6,de.t0=de.catch(1),de.next=10,this.testHeartBeat5Timeout();case 10:if(!de.sent){de.next=14;break}return this.doDisconnect(Va.OFFLINE,"PingError"),de.abrupt("return");case 14:this.pingTimer=vo(function(){re.ping()},3e4);case 15:case"end":return de.stop()}},_,this,[[1,6]])}))},L.testHeartBeat5Timeout=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:clearTimeout(this.pingTimer),re=0;case 2:if(!(re<5)){de.next=15;break}return de.prev=3,de.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return de.abrupt("return",!1);case 9:de.prev=9,de.t0=de.catch(3),this.logger.debug("core:: test heartbeat "+re+" Timeout");case 12:re++,de.next=2;break;case 15:return de.abrupt("return",!0);case 16:case"end":return de.stop()}},_,this,[[3,9]])}))},L.initOnlineListener=function(){var _,re;this.onlineListener||(ls?(this.onlineListener=Oo(_=function(){this.status==="logined"&&this.ping()}).call(_,this),this.offlineListener=Oo(re=function(){this.logger.log("offline"),this.doDisconnect(Va.OFFLINE,"OfflineListener")}).call(re,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},L.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},L.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(Va.ACTIVE,"UserActiveDisconnect"),co.resolve();case"unconnected":case"destroyed":return co.resolve()}},L.destroy=function(){var _=this;return this.disconnect().then(function(){_.status="destroyed",_.removeAllListeners(),_.eventBus.removeAllListeners(),_.reporter.destroy(),_.connect=function(){return co.resolve()},_.disconnect=function(){return co.resolve()},_.destroy=function(){return co.resolve()}})},L.abtRequest=function(){var _,re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(this.options.isAbtestEnable){dr.next=2;break}return dr.abrupt("return");case 2:if(!this.abtInfo.experiments){dr.next=4;break}return dr.abrupt("return");case 4:if(this.options.abtestUrl){dr.next=6;break}return dr.abrupt("return");case 6:return dr.prev=6,dr.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:de=dr.sent,dr.next=15;break;case 12:dr.prev=12,dr.t0=dr.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((re=(_=de==null?void 0:de.data)===null||_===void 0?void 0:_.data)===null||re===void 0?void 0:re.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:To(Lt=this.abtInfo.experiments).call(Lt,function(gr){return{experimentKey:gr.experimentKey,schemeKey:gr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return dr.stop()}},Ie,this,[[6,12]])}))},M}(Vs);jv.setAdapters=function(M){Mr(Ho,M)};var Dv={"1_2":"heartbeat","2_3":"login","2_5":"kicked","2_6":"logout","2_7":"multiPortLogin","2_8":"kick"},Uv={login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appkey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,sdkType:41,userAgent:42,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,customTag:38,connectionId:102,ip:103,time:109},aosPushInfo:{pushType:110,hasTokenPreviously:111}},hd=rs(Uv),qv={login:{sid:2,cid:3,service:"auth",params:[{type:"Property",name:"login",reflectMapper:Uv.login}],response:[{type:"Property",name:"loginRes",reflectMapper:hd.loginRes},{type:"PropertyArray",name:"loginPorts",reflectMapper:hd.loginPort},{type:"Property",name:"aosPushInfo",reflectMapper:hd.aosPushInfo}]},logout:{sid:2,cid:6,service:"auth"},heartbeat:{sid:1,cid:2,service:"auth"},kicked:{sid:2,cid:5,service:"auth",response:[{type:"Number",name:"clientType"},{type:"Number",name:"reason"},{type:"String",name:"ext"},{type:"Number",name:"customClientType"}]},multiPortLogin:{sid:2,cid:7,service:"auth",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",reflectMapper:hd.loginPort}]},kick:{sid:2,cid:8,service:"auth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]}},yi=Array.isArray,Pp=function(M){return typeof M=="symbol"||hi(M)&&yc(M)=="[object Symbol]"},Vg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ap=/^\w*$/,Hg=function(M,L){if(yi(M))return!1;var $=typeof M;return!($!="number"&&$!="symbol"&&$!="boolean"&&M!=null&&!Pp(M))||Ap.test(M)||!Vg.test(M)||L!=null&&M in Object(L)};function zg(w,M){if(typeof w!="function"||M!=null&&typeof M!="function")throw new TypeError("Expected a function");var L=function(){var $=arguments,_=M?M.apply(this,$):$[0],re=L.cache;if(re.has(_))return re.get(_);var Ie=w.apply(this,$);return L.cache=re.set(_,Ie)||re,Ie};return L.cache=new(zg.Cache||fp),L}zg.Cache=fp;var UT=zg,qT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,VT=/\\(\\)?/g,Ul=function(M){var L=UT(M,function(_){return $.size===500&&$.clear(),_}),$=L.cache;return L}(function(w){var M=[];return w.charCodeAt(0)===46&&M.push(""),w.replace(qT,function(L,$,_,re){M.push(_?re.replace(VT,"$1"):$||L)}),M}),Op=Ul,Vv=Gs?Gs.prototype:void 0,Kg=Vv?Vv.toString:void 0,Hv=function w(M){if(typeof M=="string")return M;if(yi(M))return Og(M,w)+"";if(Pp(M))return Kg?Kg.call(M):"";var L=M+"";return L=="0"&&1/M==-1/0?"-0":L},HT=function(M){return M==null?"":Hv(M)},vd=function(M,L){return yi(M)?M:Hg(M,L)?[M]:Op(HT(M))},dl=function(M){if(typeof M=="string"||Pp(M))return M;var L=M+"";return L=="0"&&1/M==-1/0?"-0":L},Wg=function(M,L){for(var $=0,_=(L=vd(L,M)).length;M!=null&&$<_;)M=M[dl(L[$++])];return $&&$==_?M:void 0},As=function(M,L,$){var _=M==null?void 0:Wg(M,L);return _===void 0?$:_},Oi={debugLevel:"off",needReconnect:!0,reconnectionAttempts:Xm,lbsUrls:["https://lbs.netease.im/lbs/webconf.jsp"],linkUrl:dv,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},Np={},Fa=function(w){function M($,_){var re,Ie;_===void 0&&(_={serverConfig:{},syncOptions:{},sessionConfig:{}}),(Ie=w.call(this,$)||this).instanceName="NIM",Ie.account="",Ie.options={},Ie.auth={},Ie.offlinePush={},Ie.sync={},Ie.msg={},Ie.msgLog={},Ie.session={},Ie.cloudSession={},Ie.misc={},Ie.user={},Ie.friend={},Ie.systemMessage={},Ie.team={},Ie.event={},Ie.msgExtend={},Ie.cloudStorage={},Ie.passThrough={},Ie.superTeam={},Ie.plugin={},Ie.signaling={},Ie.setOptions($),qa({cmdMap:Dv,cmdConfig:qv});var de=null;return In(re=Vo(Np)).call(re,function(Lt){var Dt=Np[Lt];Lt==="sync"?de=Dt:Ie[Lt]=Lt==="session"?new Dt(i(Ie),_.sessionConfig):Lt==="cloudStorage"?new Dt(i(Ie),Mr({storageKeyPrefix:Ie.instanceName},_.serverConfig,_.cloudStorageConfig)):new Dt(i(Ie))}),de&&(Ie.sync=new de(i(Ie),_.syncOptions)),M.instance=i(Ie),Ie}Ro(M,w),M.getInstance=function(_,re){if(!M.instance){if(_)return new M(_,re);throw new Error("Instance not exist, please input options")}if(_){if(M.instance.options.account===_.account&&M.instance.options.appkey===_.appkey)return M.instance.setOptions(_),M.instance;throw new Error("Unexpected login")}return M.instance};var L=M.prototype;return L.setOptions=function(_){En({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},_),this.logger.log("NIM::setOptions options is",_),this.account=_.account,this.options=Mr(Mr({},Oi),_)},L.connect=function(_){_===void 0&&(_={});var re=Ja(null,{connect:{get:function(){return w.prototype.connect}}});return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt=this;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){gr.next=4;break}return de="NIM status is "+this.status+", and would not connect",this.logger.warn(de),gr.abrupt("return",co.reject(de));case 4:return this.reporter.reportTraceCancel("login"),this.reporter.reportTraceStart("login",{user_id:this.options.account,action:_.isAutoReconnect?"auto_login":"manual_login"}),this.reporter.reportTraceUpdateV2("login",{code:0,description:Wo(Mr(Mr({},this.options),{account:"***",token:"***"})),operation_type:"conf_init",succeed:!0,duration:0,target:""}),gr.next=9,this.getLbsInfos();case 9:return gr.prev=9,gr.next=12,re.connect.call(this,_,function(vr,Cr){Dt.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Cr,code:vr.code||408,description:"ws_handshake_failed:"+vr.message,succeed:!1})});case 12:(Lt=gr.sent)&&this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Lt,code:200,succeed:!0}),gr.next=20;break;case 16:throw gr.prev=16,gr.t0=gr.catch(9),this.reporter.reportTraceEnd("login",!1),gr.t0;case 20:return gr.next=22,this.login(_.isAutoReconnect);case 22:case"end":return gr.stop()}},Ie,this,[[9,16]])}))},L.login=function(_){return _===void 0&&(_=!1),Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.prev=0,Dt.next=3,this.auth.doLogin(_);case 3:Ie=Dt.sent,this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:200,succeed:!0}),this.reporter.reportTraceEnd("login",!0),this.status="logined",Dt.next=20;break;case 9:if(Dt.prev=9,Dt.t0=Dt.catch(0),de=Dt.t0,this.logger.warn("nim login:: login failed",Dt.t0),this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:de.code||0,succeed:!1,description:de.message}),this.reporter.reportTraceEnd("login",!1),this.retryCount!==0){Dt.next=18;break}throw this.doDisconnect(Va.ACTIVE,"FailedToInitializeLogin"),Dt.t0;case 18:return this.doDisconnect(Va.OFFLINE,"ReconnectLoginFailed"),Dt.abrupt("return");case 20:return Dt.prev=20,Dt.next=23,this.cloudStorage.init();case 23:Dt.next=28;break;case 25:Dt.prev=25,Dt.t1=Dt.catch(20),this.logger.error("NIM:login cloudStorage init failed ",Dt.t1);case 28:if(this.eventBus.emit("logined",Ie),this.emit("logined",Ie),this.logger.log("login done"),this.resetConnectStatus(),!this.sync||!this.sync.doSync){Dt.next=35;break}return Dt.next=35,this.sync.doSync();case 35:this.ping();case 36:case"end":return Dt.stop()}},re,this,[[0,9],[20,25]])}))},L.onMessage=function(_){var re,Ie,de=w.prototype.onMessage.call(this,_);if(de){var Lt=de.raw.ser,Dt=this.sendingCmdMap.get(Lt);if(Dt&&Dt.cmd===de.cmd){var dr=Dt.callback,gr=Dt.timer,vr=Dt.params;if(clearTimeout(gr),de.params=vr,this.sendingCmdMap.delete(Lt),de.cmd==="heartbeat")return void dr[0]();var Cr=(re=this[de.service])===null||re===void 0?void 0:re.process(de);Cr&&typeof Cr.then=="function"?Cr.then(function(xr){dr[0](xr)}).catch(function(xr){dr[1](xr)}):(this.logger.log("imsocket:: handlerFn without promise",de.service,de.cmd),dr[0]())}else(Ie=this[de.service])===null||Ie===void 0||Ie.process(de)}},L.getLbsInfos=function(){var _;return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt,Dt,dr,gr,vr,Cr,xr;return sr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Ie=this.options.lbsUrls[0],de=ka(Ie).call(Ie,"?")>-1?"&":"?",Lt=Ie+de+"k="+this.options.appkey+"&id="+this.options.account+"&sv=180&pv=1&networkType=0",jr.prev=3,this.logger.log("getLbsInfos ",Lt),jr.next=7,this.adapters.request(Lt,{method:"GET",dataType:"json",timeout:1e4});case 7:if((dr=jr.sent).status===200&&dr.data){jr.next=11;break}throw this.logger.error("getLbsInfos::error status",dr.status,dr),new Error("getLbsInfos failed, status "+dr.status);case 11:this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Lt,code:200,succeed:!0}),gr=dr.data,vr=[this.options.linkUrl],As(gr,"common.link")&&(vr=ks(Cr=As(gr,"common.link")).call(Cr,vr)),As(gr,'common["link.default"]')&&(vr=ks(vr).call(vr,As(gr,'common["link.default"]'))),this.linkUrls=Tp(vr),dr.data["nos-chunk"]&&((_=this.cloudStorage)===null||_===void 0||_.setOptions({chunkUploadHost:dr.data["nos-chunk"]})),this.logger.log("getLbsInfos success, socket link:",Co(Dt=this.linkUrls).call(Dt,0),"chunkUploadHost: ",dr.data["nos-chunk"]),jr.next=27;break;case 21:jr.prev=21,jr.t0=jr.catch(3),xr=jr.t0,this.logger.error("getLbsInfos::error",xr),this.linkUrls=[this.options.linkUrl],this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Lt,description:xr.message,code:xr.code||0,succeed:!1});case 27:case"end":return jr.stop()}},re,this,[[3,21]])}))},L.disconnect=function(){var _=this;switch(this.status){case"logined":return this.sendCmd("logout",void 0,{timeout:1e3}).then(function(){w.prototype.doDisconnect.call(_,Va.ACTIVE,"UserActiveDisconnect")}).catch(function(re){_.logger.error("NIM::disconnect sendCmd:logout error",re),w.prototype.doDisconnect.call(_,Va.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return w.prototype.doDisconnect.call(this,Va.ACTIVE,"UserActiveDisconnect"),co.resolve();case"unconnected":case"destroyed":return co.resolve()}},L.destroy=function(){return M.instance=null,w.prototype.destroy.call(this)},L.kick=function(_){return En({deviceIds:{type:"array",itemType:"string"}},_),this.auth.kick(_)},M.registerService=function(_,re){Np[re]=_},M}(jv);Fa.instance=null;var zv=Math.min,Gg=[].lastIndexOf,Qg=!!Gg&&1/[1].lastIndexOf(1,-0)<0,zT=Ds("lastIndexOf"),Jg=Qg||!zT?function(M){if(Qg)return T(Gg,this,arguments)||0;var L=ar(this),$=Ia(L),_=$-1;for(arguments.length>1&&(_=zv(_,$i(arguments[1]))),_<0&&(_=$+_);_>=0;_--)if(_ in L&&L[_]===M)return _||0;return-1}:Gg;Vr({target:"Array",proto:!0,forced:Jg!==[].lastIndexOf},{lastIndexOf:Jg});var KT=Uo("Array").lastIndexOf,Rp=Array.prototype,Yg=function(w){var M=w.lastIndexOf;return w===Rp||tr(Rp,w)&&M===Rp.lastIndexOf?KT:M},ql=o(function(w,M){(function(){var L={function:!0,object:!0}[typeof window]&&window||this,$=M,_=w&&!w.nodeType&&w,re=$&&_&&typeof e=="object"&&e;!re||re.global!==re&&re.window!==re&&re.self!==re||(L=re);var Ie=Math.pow(2,53)-1,de=/\bOpera/,Lt=Object.prototype,Dt=Lt.hasOwnProperty,dr=Lt.toString;function gr(Kr){return(Kr=String(Kr)).charAt(0).toUpperCase()+Kr.slice(1)}function vr(Kr){return Kr=zr(Kr),/^(?:webOS|i(?:OS|P))/.test(Kr)?Kr:gr(Kr)}function Cr(Kr,kn){for(var Jn in Kr)Dt.call(Kr,Jn)&&kn(Kr[Jn],Jn,Kr)}function xr(Kr){return Kr==null?gr(Kr):dr.call(Kr).slice(8,-1)}function Br(Kr){return String(Kr).replace(/([ -])(?!$)/g,"$1?")}function jr(Kr,kn){var Jn=null;return function(xo,Ln){var _r=-1,Pn=xo?xo.length:0;if(typeof Pn=="number"&&Pn>-1&&Pn<=Ie)for(;++_r<Pn;)Ln(xo[_r],_r,xo);else Cr(xo,Ln)}(Kr,function(Hn,xo){Jn=kn(Jn,Hn,xo,Kr)}),Jn}function zr(Kr){return String(Kr).replace(/^ +| +$/g,"")}var Hr=function Kr(kn){var Jn=L,Hn=kn&&typeof kn=="object"&&xr(kn)!="String";Hn&&(Jn=kn,kn=null);var xo=Jn.navigator||{},Ln=xo.userAgent||"";kn||(kn=Ln);var _r,Pn,Fn=Hn?!!xo.likeChrome:/\bChrome\b/.test(kn)&&!/internal|\n/i.test(dr.toString()),_n="Object",bn=Hn?_n:"ScriptBridgingProxyObject",Rn=Hn?_n:"Environment",qn=Hn&&Jn.java?"JavaPackage":xr(Jn.java),oo=Hn?_n:"RuntimeObject",ao=/\bJava/.test(qn)&&Jn.java,Ko=ao&&xr(Jn.environment)==Rn,Po=ao?"a":"α",ja=ao?"b":"β",Mo=Jn.document||{},Ao=Jn.operamini||Jn.opera,oa=de.test(oa=Hn&&Ao?Ao["[[Class]]"]:xr(Ao))?oa:Ao=null,Lc=kn,Fo=[],vc=null,Ka=kn==Ln,fo=Ka&&Ao&&typeof Ao.version=="function"&&Ao.version(),aa=function(Na){return jr(Na,function(Ta,xa){return Ta||RegExp("\\b"+(xa.pattern||Br(xa))+"\\b","i").exec(kn)&&(xa.label||xa)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Kn=function(Na){return jr(Na,function(Ta,xa){return Ta||RegExp("\\b"+(xa.pattern||Br(xa))+"\\b","i").exec(kn)&&(xa.label||xa)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),qo=AC([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),ps=function(Na){return jr(Na,function(Ta,xa,Kh){return Ta||(xa[qo]||xa[/^[a-z]+(?: +[a-z]+\b)*/i.exec(qo)]||RegExp("\\b"+Br(Kh)+"(?:\\b|\\w*\\d)","i").exec(kn))&&Kh})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Zn=function(Na){return jr(Na,function(Ta,xa){var Kh=xa.pattern||Br(xa);return!Ta&&(Ta=RegExp("\\b"+Kh+"(?:/[\\d.]+|[ \\w.]*)","i").exec(kn))&&(Ta=function(Ml,xC,IC){var EC={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return xC&&IC&&/^Win/i.test(Ml)&&!/^Windows Phone /i.test(Ml)&&(EC=EC[/[\d.]+$/.exec(Ml)])&&(Ml="Windows "+EC),Ml=String(Ml),xC&&IC&&(Ml=Ml.replace(RegExp(xC,"i"),IC)),vr(Ml.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Ta,Kh,xa.label||xa)),Ta})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function AC(ti){return jr(ti,function(Na,Ta){var xa=Ta.pattern||Br(Ta);return!Na&&(Na=RegExp("\\b"+xa+" *\\d+[.\\w_]*","i").exec(kn)||RegExp("\\b"+xa+" *\\w+-[\\w]*","i").exec(kn)||RegExp("\\b"+xa+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(kn))&&((Na=String(Ta.label&&!RegExp(xa,"i").test(Ta.label)?Ta.label:Na).split("/"))[1]&&!/[\d.]+/.test(Na[0])&&(Na[0]+=" "+Na[1]),Ta=Ta.label||Ta,Na=vr(Na[0].replace(RegExp(xa,"i"),Ta).replace(RegExp("; *(?:"+Ta+"[_-])?","i")," ").replace(RegExp("("+Ta+")[-_.]?(\\w)","i"),"$1 $2"))),Na})}function OC(ti){return jr(ti,function(Na,Ta){return Na||(RegExp(Ta+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(kn)||0)[1]||null})}if(aa&&(aa=[aa]),/\bAndroid\b/.test(Zn)&&!qo&&(_r=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(kn))&&(qo=zr(_r[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),ps&&!qo?qo=AC([ps]):ps&&qo&&(qo=qo.replace(RegExp("^("+Br(ps)+")[-_.\\s]","i"),ps+" ").replace(RegExp("^("+Br(ps)+")[-_.]?(\\w)","i"),ps+" $2")),(_r=/\bGoogle TV\b/.exec(qo))&&(qo=_r[0]),/\bSimulator\b/i.test(kn)&&(qo=(qo?qo+" ":"")+"Simulator"),Kn=="Opera Mini"&&/\bOPiOS\b/.test(kn)&&Fo.push("running in Turbo/Uncompressed mode"),Kn=="IE"&&/\blike iPhone OS\b/.test(kn)?(ps=(_r=Kr(kn.replace(/like iPhone OS/,""))).manufacturer,qo=_r.product):/^iP/.test(qo)?(Kn||(Kn="Safari"),Zn="iOS"+((_r=/ OS ([\d_]+)/i.exec(kn))?" "+_r[1].replace(/_/g,"."):"")):Kn=="Konqueror"&&/^Linux\b/i.test(Zn)?Zn="Kubuntu":ps&&ps!="Google"&&(/Chrome/.test(Kn)&&!/\bMobile Safari\b/i.test(kn)||/\bVita\b/.test(qo))||/\bAndroid\b/.test(Zn)&&/^Chrome/.test(Kn)&&/\bVersion\//i.test(kn)?(Kn="Android Browser",Zn=/\bAndroid\b/.test(Zn)?Zn:"Android"):Kn=="Silk"?(/\bMobi/i.test(kn)||(Zn="Android",Fo.unshift("desktop mode")),/Accelerated *= *true/i.test(kn)&&Fo.unshift("accelerated")):Kn=="UC Browser"&&/\bUCWEB\b/.test(kn)?Fo.push("speed mode"):Kn=="PaleMoon"&&(_r=/\bFirefox\/([\d.]+)\b/.exec(kn))?Fo.push("identifying as Firefox "+_r[1]):Kn=="Firefox"&&(_r=/\b(Mobile|Tablet|TV)\b/i.exec(kn))?(Zn||(Zn="Firefox OS"),qo||(qo=_r[1])):!Kn||(_r=!/\bMinefield\b/i.test(kn)&&/\b(?:Firefox|Safari)\b/.exec(Kn))?(Kn&&!qo&&/[\/,]|^[^(]+?\)/.test(kn.slice(kn.indexOf(_r+"/")+8))&&(Kn=null),(_r=qo||ps||Zn)&&(qo||ps||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Zn))&&(Kn=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Zn)?Zn:_r)+" Browser")):Kn=="Electron"&&(_r=(/\bChrome\/([\d.]+)\b/.exec(kn)||0)[1])&&Fo.push("Chromium "+_r),fo||(fo=OC(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Br(Kn),"(?:Firefox|Minefield|NetFront)"])),(_r=(aa=="iCab"&&parseFloat(fo)>3?"WebKit":/\bOpera\b/.test(Kn)&&(/\bOPR\b/.test(kn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(kn)&&!/^(?:Trident|EdgeHTML)$/.test(aa)&&"WebKit"||!aa&&/\bMSIE\b/i.test(kn)&&(Zn=="Mac OS"?"Tasman":"Trident")||aa=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Kn)&&"NetFront")&&(aa=[_r]),Kn=="IE"&&(_r=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(kn)||0)[1])?(Kn+=" Mobile",Zn="Windows Phone "+(/\+$/.test(_r)?_r:_r+".x"),Fo.unshift("desktop mode")):/\bWPDesktop\b/i.test(kn)?(Kn="IE Mobile",Zn="Windows Phone 8.x",Fo.unshift("desktop mode"),fo||(fo=(/\brv:([\d.]+)/.exec(kn)||0)[1])):Kn!="IE"&&aa=="Trident"&&(_r=/\brv:([\d.]+)/.exec(kn))&&(Kn&&Fo.push("identifying as "+Kn+(fo?" "+fo:"")),Kn="IE",fo=_r[1]),Ka){if(function(Na,Ta){var xa=Na!=null?typeof Na[Ta]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(xa)||xa=="object"&&!Na[Ta])}(Jn,"global"))if(ao&&(Lc=(_r=ao.lang.System).getProperty("os.arch"),Zn=Zn||_r.getProperty("os.name")+" "+_r.getProperty("os.version")),Ko){try{fo=Jn.require("ringo/engine").version.join("."),Kn="RingoJS"}catch{(_r=Jn.system)&&_r.global.system==Jn.system&&(Kn="Narwhal",Zn||(Zn=_r[0].os||null))}Kn||(Kn="Rhino")}else typeof Jn.process=="object"&&!Jn.process.browser&&(_r=Jn.process)&&(typeof _r.versions=="object"&&(typeof _r.versions.electron=="string"?(Fo.push("Node "+_r.versions.node),Kn="Electron",fo=_r.versions.electron):typeof _r.versions.nw=="string"&&(Fo.push("Chromium "+fo,"Node "+_r.versions.node),Kn="NW.js",fo=_r.versions.nw)),Kn||(Kn="Node.js",Lc=_r.arch,Zn=_r.platform,fo=(fo=/[\d.]+/.exec(_r.version))?fo[0]:null));else xr(_r=Jn.runtime)==bn?(Kn="Adobe AIR",Zn=_r.flash.system.Capabilities.os):xr(_r=Jn.phantom)==oo?(Kn="PhantomJS",fo=(_r=_r.version||null)&&_r.major+"."+_r.minor+"."+_r.patch):typeof Mo.documentMode=="number"&&(_r=/\bTrident\/(\d+)/i.exec(kn))?(fo=[fo,Mo.documentMode],(_r=+_r[1]+4)!=fo[1]&&(Fo.push("IE "+fo[1]+" mode"),aa&&(aa[1]=""),fo[1]=_r),fo=Kn=="IE"?String(fo[1].toFixed(1)):fo[0]):typeof Mo.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Kn)&&(Fo.push("masking as "+Kn+" "+fo),Kn="IE",fo="11.0",aa=["Trident"],Zn="Windows");Zn=Zn&&vr(Zn)}if(fo&&(_r=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(fo)||/(?:alpha|beta)(?: ?\d)?/i.exec(kn+";"+(Ka&&xo.appMinorVersion))||/\bMinefield\b/i.test(kn)&&"a")&&(vc=/b/i.test(_r)?"beta":"alpha",fo=fo.replace(RegExp(_r+"\\+?$"),"")+(vc=="beta"?ja:Po)+(/\d+\+?/.exec(_r)||"")),Kn=="Fennec"||Kn=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Zn))Kn="Firefox Mobile";else if(Kn=="Maxthon"&&fo)fo=fo.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(qo))qo=="Xbox 360"&&(Zn=null),qo=="Xbox 360"&&/\bIEMobile\b/.test(kn)&&Fo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Kn)&&(!Kn||qo||/Browser|Mobi/.test(Kn))||Zn!="Windows CE"&&!/Mobi/i.test(kn))if(Kn=="IE"&&Ka)try{Jn.external===null&&Fo.unshift("platform preview")}catch{Fo.unshift("embedded")}else(/\bBlackBerry\b/.test(qo)||/\bBB10\b/.test(kn))&&(_r=(RegExp(qo.replace(/ +/g," *")+"/([.\\d]+)","i").exec(kn)||0)[1]||fo)?(Zn=((_r=[_r,/BB10/.test(kn)])[1]?(qo=null,ps="BlackBerry"):"Device Software")+" "+_r[0],fo=null):this!=Cr&&qo!="Wii"&&(Ka&&Ao||/Opera/.test(Kn)&&/\b(?:MSIE|Firefox)\b/i.test(kn)||Kn=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Zn)||Kn=="IE"&&(Zn&&!/^Win/.test(Zn)&&fo>5.5||/\bWindows XP\b/.test(Zn)&&fo>8||fo==8&&!/\bTrident\b/.test(kn)))&&!de.test(_r=Kr.call(Cr,kn.replace(de,"")+";"))&&_r.name&&(_r="ing as "+_r.name+((_r=_r.version)?" "+_r:""),de.test(Kn)?(/\bIE\b/.test(_r)&&Zn=="Mac OS"&&(Zn=null),_r="identify"+_r):(_r="mask"+_r,Kn=oa?vr(oa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_r)&&(Zn=null),Ka||(fo=null)),aa=["Presto"],Fo.push(_r));else Kn+=" Mobile";(_r=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(kn)||0)[1])&&(_r=[parseFloat(_r.replace(/\.(\d)$/,".0$1")),_r],Kn=="Safari"&&_r[1].slice(-1)=="+"?(Kn="WebKit Nightly",vc="alpha",fo=_r[1].slice(0,-1)):fo!=_r[1]&&fo!=(_r[2]=(/\bSafari\/([\d.]+\+?)/i.exec(kn)||0)[1])||(fo=null),_r[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(kn)||0)[1],_r[0]==537.36&&_r[2]==537.36&&parseFloat(_r[1])>=28&&aa=="WebKit"&&(aa=["Blink"]),Ka&&(Fn||_r[1])?(aa&&(aa[1]="like Chrome"),_r=_r[1]||((_r=_r[0])<530?1:_r<532?2:_r<532.05?3:_r<533?4:_r<534.03?5:_r<534.07?6:_r<534.1?7:_r<534.13?8:_r<534.16?9:_r<534.24?10:_r<534.3?11:_r<535.01?12:_r<535.02?"13+":_r<535.07?15:_r<535.11?16:_r<535.19?17:_r<536.05?18:_r<536.1?19:_r<537.01?20:_r<537.11?"21+":_r<537.13?23:_r<537.18?24:_r<537.24?25:_r<537.36?26:aa!="Blink"?"27":"28")):(aa&&(aa[1]="like Safari"),_r=(_r=_r[0])<400?1:_r<500?2:_r<526?3:_r<533?4:_r<534?"4+":_r<535?5:_r<537?6:_r<538?7:_r<601?8:_r<602?9:_r<604?10:_r<606?11:_r<608?12:"12"),aa&&(aa[1]+=" "+(_r+=typeof _r=="number"?".x":/[.+]/.test(_r)?"":"+")),Kn=="Safari"&&(!fo||parseInt(fo)>45)?fo=_r:Kn=="Chrome"&&/\bHeadlessChrome/i.test(kn)&&Fo.unshift("headless")),Kn=="Opera"&&(_r=/\bzbov|zvav$/.exec(Zn))?(Kn+=" ",Fo.unshift("desktop mode"),_r=="zvav"?(Kn+="Mini",fo=null):Kn+="Mobile",Zn=Zn.replace(RegExp(" *"+_r+"$"),"")):Kn=="Safari"&&/\bChrome\b/.exec(aa&&aa[1])?(Fo.unshift("desktop mode"),Kn="Chrome Mobile",fo=null,/\bOS X\b/.test(Zn)?(ps="Apple",Zn="iOS 4.3+"):Zn=null):/\bSRWare Iron\b/.test(Kn)&&!fo&&(fo=OC("Chrome")),fo&&fo.indexOf(_r=/[\d.]+$/.exec(Zn))==0&&kn.indexOf("/"+_r+"-")>-1&&(Zn=zr(Zn.replace(_r,""))),Zn&&Zn.indexOf(Kn)!=-1&&!RegExp(Kn+" OS").test(Zn)&&(Zn=Zn.replace(RegExp(" *"+Br(Kn)+" *"),"")),aa&&!/\b(?:Avant|Nook)\b/.test(Kn)&&(/Browser|Lunascape|Maxthon/.test(Kn)||Kn!="Safari"&&/^iOS/.test(Zn)&&/\bSafari\b/.test(aa[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Kn)&&aa[1])&&(_r=aa[aa.length-1])&&Fo.push(_r),Fo.length&&(Fo=["("+Fo.join("; ")+")"]),ps&&qo&&qo.indexOf(ps)<0&&Fo.push("on "+ps),qo&&Fo.push((/^on /.test(Fo[Fo.length-1])?"":"on ")+qo),Zn&&(_r=/ ([\d.+]+)$/.exec(Zn),Pn=_r&&Zn.charAt(Zn.length-_r[0].length-1)=="/",Zn={architecture:32,family:_r&&!Pn?Zn.replace(_r[0],""):Zn,version:_r?_r[1]:null,toString:function(){var ti=this.version;return this.family+(ti&&!Pn?" "+ti:"")+(this.architecture==64?" 64-bit":"")}}),(_r=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Lc))&&!/\bi686\b/i.test(Lc)?(Zn&&(Zn.architecture=64,Zn.family=Zn.family.replace(RegExp(" *"+_r),"")),Kn&&(/\bWOW64\b/i.test(kn)||Ka&&/\w(?:86|32)$/.test(xo.cpuClass||xo.platform)&&!/\bWin64; x64\b/i.test(kn))&&Fo.unshift("32-bit")):Zn&&/^OS X/.test(Zn.family)&&Kn=="Chrome"&&parseFloat(fo)>=39&&(Zn.architecture=64),kn||(kn=null);var Ws={};return Ws.description=kn,Ws.layout=aa&&aa[0],Ws.manufacturer=ps,Ws.name=Kn,Ws.prerelease=vc,Ws.product=qo,Ws.ua=kn,Ws.version=Kn&&fo,Ws.os=Zn||{architecture:null,family:null,version:null,toString:function(){return"null"}},Ws.parse=Kr,Ws.toString=function(){return this.description||""},Ws.version&&Fo.unshift(fo),Ws.name&&Fo.unshift(Kn),Zn&&Kn&&(Zn!=String(Zn).split(" ")[0]||Zn!=Kn.split(" ")[0]&&!qo)&&Fo.push(qo?"("+Zn+")":"on "+Zn),Fo.length&&(Ws.description=Fo.join(" ")),Ws}();$&&_?Cr(Hr,function(Kr,kn){$[kn]=Kr}):L.platform=Hr}).call(e)}),WT=Math.floor,Xg=function(w,M){var L=w.length,$=WT(L/2);return L<8?Zg(w,M):GT(w,Xg(mu(w,0,$),M),Xg(mu(w,$),M),M)},Zg=function(w,M){for(var L,$,_=w.length,re=1;re<_;){for($=re,L=w[re];$&&M(w[$-1],L)>0;)w[$]=w[--$];$!==re++&&(w[$]=L)}return w},GT=function(w,M,L,$){for(var _=M.length,re=L.length,Ie=0,de=0;Ie<_||de<re;)w[Ie+de]=Ie<_&&de<re?$(M[Ie],L[de])<=0?M[Ie++]:L[de++]:Ie<_?M[Ie++]:L[de++];return w},eh=Xg,Kv=nr.match(/firefox\/(\d+)/i),yd=!!Kv&&+Kv[1],Ca=/MSIE|Trident/.test(nr),Wv=nr.match(/AppleWebKit\/(\d+)\./),th=!!Wv&&+Wv[1],ac=[],Gv=Ce(ac.sort),Qv=Ce(ac.push),QT=c(function(){ac.sort(void 0)}),Jv=c(function(){ac.sort(null)}),Yv=Ds("sort"),Xv=!c(function(){if(mr)return mr<70;if(!(yd&&yd>3)){if(Ca)return!0;if(th)return th<603;var w,M,L,$,_="";for(w=65;w<76;w++){switch(M=String.fromCharCode(w),w){case 66:case 69:case 70:case 72:L=3;break;case 68:case 71:L=4;break;default:L=2}for($=0;$<47;$++)ac.push({k:M+$,v:L})}for(ac.sort(function(re,Ie){return Ie.v-re.v}),$=0;$<ac.length;$++)M=ac[$].k.charAt(0),_.charAt(_.length-1)!==M&&(_+=M);return _!=="DGBEFHACIJK"}});Vr({target:"Array",proto:!0,forced:QT||!Jv||!Yv||!Xv},{sort:function(M){M!==void 0&&Or(M);var L=$n(this);if(Xv)return M===void 0?Gv(L):Gv(L,M);var $,_,re=[],Ie=Ia(L);for(_=0;_<Ie;_++)_ in L&&Qv(re,L[_]);for(eh(re,function(de){return function(Lt,Dt){return Dt===void 0?-1:Lt===void 0?1:de!==void 0?+de(Lt,Dt)||0:Aa(Lt)>Aa(Dt)?1:-1}}(M)),$=Ia(re),_=0;_<$;)L[_]=re[_++];for(;_<Ie;)wp(L,_++);return L}});var JT=Uo("Array").sort,rh=Array.prototype,wc=function(w){var M=w.sort;return w===rh||tr(rh,w)&&M===rh.sort?JT:M},nh=o(function(w,M){w.exports=function(){var L={d:function(_r,Pn){for(var Fn in Pn)L.o(Pn,Fn)&&!L.o(_r,Fn)&&Wi(_r,Fn,{enumerable:!0,get:Pn[Fn]})},o:function(_r,Pn){return Object.prototype.hasOwnProperty.call(_r,Pn)}},$={};L.d($,{default:function(){return xo}});var _=function Ln(_r){for(var Pn in function(Fn,_n){if(!(Fn instanceof _n))throw new TypeError("Cannot call a class as a function")}(this,Ln),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(Fn){},this.onProgress=function(Fn){},this.onUploadProgress=function(Fn){},this.onComplete=function(Fn){},_r)this[Pn]=_r[Pn]};function re(Ln,_r){var Pn=ha!==void 0&&gd(Ln)||Ln["@@iterator"];if(!Pn){if(gi(Ln)||(Pn=function(oo,ao){if(oo){var Ko;if(typeof oo=="string")return Ie(oo,ao);var Po=Co(Ko=Object.prototype.toString.call(oo)).call(Ko,8,-1);return Po==="Object"&&oo.constructor&&(Po=oo.constructor.name),Po==="Map"||Po==="Set"?Ep(oo):Po==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Po)?Ie(oo,ao):void 0}}(Ln))||_r&&Ln&&typeof Ln.length=="number"){Pn&&(Ln=Pn);var Fn=0,_n=function(){};return{s:_n,n:function(){return Fn>=Ln.length?{done:!0}:{done:!1,value:Ln[Fn++]}},e:function(ao){throw ao},f:_n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bn,Rn=!0,qn=!1;return{s:function(){Pn=Pn.call(Ln)},n:function(){var ao=Pn.next();return Rn=ao.done,ao},e:function(ao){qn=!0,bn=ao},f:function(){try{Rn||Pn.return==null||Pn.return()}finally{if(qn)throw bn}}}}function Ie(Ln,_r){(_r==null||_r>Ln.length)&&(_r=Ln.length);for(var Pn=0,Fn=new Array(_r);Pn<_r;Pn++)Fn[Pn]=Ln[Pn];return Fn}var de=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(de={privateObj:{},setItem:function(_r,Pn){de.privateObj[_r]=Pn},getItem:function(_r){return de.privateObj[_r]},removeItem:function(_r){delete de.privateObj[_r]},getKeys:function(){return Vo(de.privateObj)}});var Lt={getFileKey:function(_r){var Pn=_r.size.toString(),Fn=_r.lastModified.toString();return"_NosUploader_"+_r.name+Co(Pn).call(Pn,Pn.length-5)+Co(Fn).call(Fn,Fn.length-5)},getFileInfo:function(_r){var Pn=de.getItem(_r);if(!Pn)return null;try{return JSON.parse(Pn)}catch{return null}},initFile:function(_r,Pn,Fn){Lt.clearExpiredInfo();var _n=this.getFileKey(Pn),bn={ctx:_r.ctx!==void 0?_r.ctx:"",bucket:_r.bucketName,obj:_r.objectName,token:_r.token,modifyAt:sa(),end:!1};return _r.payload&&(bn.payload=_r.payload),Fn&&de.setItem(_n,Wo(bn)),_n},setUploadContext:function(_r,Pn,Fn){var _n=this.getFileInfo(_r);_n&&(_n.ctx=Pn,Fn&&de.setItem(_r,Wo(_n)))},setComplete:function(_r,Pn){var Fn=this.getFileInfo(_r);Fn&&(Fn.modifyAt=sa(),Fn.end=!0,Pn&&de.setItem(_r,Wo(Fn)))},getUploadContext:function(_r){var Pn=this.getFileInfo(_r);return Pn?Pn.ctx:""},removeFileInfo:function(_r){ka(_r).call(_r,"_NosUploader_")===0&&de.removeItem(_r)},clearExpiredInfo:function(){var _r,Pn=typeof de.getKeys=="function"?de.getKeys():Vo(de),Fn=sa(),_n=[],bn=re(Pn);try{for(bn.s();!(_r=bn.n()).done;){var Rn=_r.value;if(ka(Rn).call(Rn,"_NosUploader_")===0){var qn=Lt.getFileInfo(Rn);qn===null||Fn-qn.modifyAt>xo.expireTime?de.removeItem(Rn):_n.push({fileInfo:qn,key:Rn})}}}catch(Mo){bn.e(Mo)}finally{bn.f()}if(_n.length>xo.maxFileCache){var oo,ao,Ko=re(Co(oo=wc(_n).call(_n,function(Mo,Ao){return Ao.fileInfo.modifyAt-Mo.fileInfo.modifyAt})).call(oo,xo.maxFileCache));try{for(Ko.s();!(ao=Ko.n()).done;){var Po,ja=ao.value;ka(Po=ja.key).call(Po,"_NosUploader_")===0&&de.removeItem(ja.key)}}catch(Mo){Ko.e(Mo)}finally{Ko.f()}}}},Dt=Lt;function dr(Ln){return(dr=typeof ha=="function"&&typeof cm=="symbol"?function(_r){return typeof _r}:function(_r){return _r&&typeof ha=="function"&&_r.constructor===ha&&_r!==ha.prototype?"symbol":typeof _r})(Ln)}function gr(Ln,_r){return!_r||dr(_r)!=="object"&&typeof _r!="function"?function(Pn){if(Pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pn}(Ln):_r}function vr(Ln){var _r=typeof tc=="function"?new tc:void 0;return(vr=function(Fn){var _n,bn;if(Fn===null||(bn=Fn,ka(_n=Function.toString.call(bn)).call(_n,"[native code]")===-1))return Fn;if(typeof Fn!="function")throw new TypeError("Super expression must either be null or a function");if(_r!==void 0){if(_r.has(Fn))return _r.get(Fn);_r.set(Fn,Rn)}function Rn(){return Cr(Fn,arguments,jr(this).constructor)}return Rn.prototype=Ja(Fn.prototype,{constructor:{value:Rn,enumerable:!1,writable:!0,configurable:!0}}),Br(Rn,Fn)})(Ln)}function Cr(Ln,_r,Pn){return(Cr=xr()?xi:function(Fn,_n,bn){var Rn=[null];Rn.push.apply(Rn,_n);var qn=new(Oo(Function).apply(Fn,Rn));return bn&&Br(qn,bn.prototype),qn}).apply(null,arguments)}function xr(){if(typeof Reflect>"u"||!xi||xi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(xi(Boolean,[],function(){})),!0}catch{return!1}}function Br(Ln,_r){return(Br=Ns||function(Pn,Fn){return Pn.__proto__=Fn,Pn})(Ln,_r)}function jr(Ln){return(jr=Ns?js:function(_r){return _r.__proto__||js(_r)})(Ln)}var zr=function(Ln){(function(bn,Rn){if(typeof Rn!="function"&&Rn!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Ja(Rn&&Rn.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),Rn&&Br(bn,Rn)})(_n,Ln);var _r,Pn,Fn=(_r=_n,Pn=xr(),function(){var bn,Rn=jr(_r);if(Pn){var qn=jr(this).constructor;bn=xi(Rn,arguments,qn)}else bn=Rn.apply(this,arguments);return gr(this,bn)});function _n(bn,Rn){var qn;return function(oo,ao){if(!(oo instanceof ao))throw new TypeError("Cannot call a class as a function")}(this,_n),(qn=Fn.call(this,"NosUploadError:"+bn)).errCode=Rn,qn.errMsg=bn,qn}return _n}(vr(Error)),Hr=function Ln(_r,Pn,Fn){if(_r.uploadState==="uploading"){var _n=_r.config,bn=_r.param,Rn=Dt.getUploadContext(_r.fileKey);if(!Rn)return Fn(0);var qn=new XMLHttpRequest,oo=_n.directUploadAddr+"/".concat(bn.bucketName)+"/".concat(encodeURIComponent(bn.objectName))+"?uploadContext"+"&context=".concat(Rn)+"&version=".concat(_n.version);qn.onreadystatechange=function(){var ao;if(_r.uploadState!=="abort"&&qn.readyState===4){var Ko,Po,ja,Mo;try{Mo=JSON.parse(qn.responseText)}catch{Mo={errMsg:"JsonParseError in getOffset",errCode:500}}qn.status===200?Mo.errCode?_r.config.onError(new zr(Mo.errMsg,Mo.errCode)):Fn(Mo.offset):qn.status.toString().match(/^5/)?Ln(_r,Pn-1,Fn):Pn>0?(typeof((ao=_n.logger)===null||ao===void 0?void 0:ao.error)=="function"&&_n.logger.error(ks(Ko="getOffset(".concat(oo,") error. retry after 3 seconds. ")).call(Ko,new Date().toTimeString())),vo(function(){Ln(_r,Pn-1,Fn)},3500)):(Dt.removeFileInfo(_r.fileKey),qn.status?_n.onError(new zr(ks(Po=ks(ja="getOffset(".concat(oo,") error: ")).call(ja,qn.status," ")).call(Po,qn.statusText))):_n.onError(new zr("getOffset(".concat(oo,") error. no Error Code"))))}},qn.open("get",oo),qn.setRequestHeader("x-nos-token",bn.token),qn.timeout=_n.getOffsetTimeout,qn.send()}},Kr=function Ln(_r,Pn,Fn,_n){if(_r.uploadState==="uploading"){var bn=_r.param,Rn=_r.config,qn=Co(File.prototype),oo=bn.ctx!==void 0?bn.ctx:"",ao=Pn+Rn.trunkSize>_r.file.size,Ko=ao?_r.file.size:Pn+Rn.trunkSize,Po=new XMLHttpRequest,ja=Rn.directUploadAddr+"/".concat(bn.bucketName)+"/".concat(encodeURIComponent(bn.objectName));if(Po.upload.onprogress=function(Ao){if(_r.uploadState!=="abort"){var oa=0;Ao.lengthComputable?(oa=(Pn+Ao.loaded)/_r.file.size,Rn.onProgress(oa),Rn.onUploadProgress({loaded:Ao.loaded,total:_r.file.size,percentage:oa,percentageText:(100*oa).toFixed(2)+"%"})):Rn.onError(new zr("browser does not support query upload progress"))}},Po.onreadystatechange=function(){var Ao,oa;if(_r.uploadState!=="abort"&&Po.readyState===4){var Lc,Fo,vc,Ka;try{Ka=JSON.parse(Po.responseText)}catch(fo){typeof((Ao=Rn.logger)===null||Ao===void 0?void 0:Ao.error)=="function"&&Rn.logger.error("JsonParseError in uploadTrunk",fo),Ka={errMsg:"JsonParseError in uploadTrunk"}}Po.status===200?(_r.setContext(Ka.context),ao?(_n(),_r.setComplete()):Ln(_r,Ka.offset,Rn.retryCount,_n)):Po.status.toString().match(/^5/)?Fn>0?Ln(_r,Pn,Fn-1,_n):(Dt.removeFileInfo(_r.fileKey),Rn.onError(new zr(Ka.errMsg,Ka.errCode))):Fn>0?(typeof((oa=Rn.logger)===null||oa===void 0?void 0:oa.error)=="function"&&Rn.logger.error(ks(Lc="uploadTrunk(".concat(ja,") error. retry after 3 seconds. ")).call(Lc,new Date().toTimeString())),vo(function(){Ln(_r,Pn,Fn-1,_n)},3500)):(Dt.removeFileInfo(_r.fileKey),Po.status?Rn.onError(new zr(ks(Fo=ks(vc="uploadTrunk(".concat(ja,") error: ")).call(vc,Po.status," ")).call(Fo,Po.statusText))):Rn.onError(new zr("uploadTrunk(".concat(ja,") error. no Error Code. Please check your network"))))}},Po.open("post",ja+"?offset=".concat(Pn)+"&complete=".concat(ao)+"&context=".concat(oo)+"&version=".concat(Rn.version)),Po.setRequestHeader("x-nos-token",bn.token),_r.file.type&&Po.setRequestHeader("content-type",_r.file.type),Po.timeout=Rn.trunkUploadTimeout,typeof FileReader<"u"){var Mo=new FileReader;Mo.addEventListener("load",function(Ao){var oa;!((oa=Ao==null?void 0:Ao.target)===null||oa===void 0)&&oa.result?Po.send(Ao.target.result):Rn.onError(new zr("Read ArrayBuffer failed"))}),Mo.addEventListener("error",function(Ao){var oa=Ao.target.error;Rn.onError(new zr("Read ArrayBuffer error. ".concat(oa.toString()),oa.code))}),Mo.readAsArrayBuffer(qn.call(_r.file,Pn,Ko))}else Po.send(qn.call(_r.file,Pn,Ko))}};function kn(Ln,_r){for(var Pn=0;Pn<_r.length;Pn++){var Fn=_r[Pn];Fn.enumerable=Fn.enumerable||!1,Fn.configurable=!0,"value"in Fn&&(Fn.writable=!0),Wi(Ln,Fn.key,Fn)}}var Jn=function(){function Ln(Pn,Fn,_n){(function(bn,Rn){if(!(bn instanceof Rn))throw new TypeError("Cannot call a class as a function")})(this,Ln),this.uploadState="paused",this.config=_n,this.file=Pn,this.param=Fn,this.fileKey=Dt.initFile(Fn,Pn,this.config.enableCache),this.resume()}var _r;return(_r=[{key:"resume",value:function(){var Fn=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var _n=this.config;Hr(this,_n.retryCount,function(bn){Kr(Fn,bn,_n.retryCount,function(){Fn.setUploadState("ended"),typeof _n.onComplete=="function"&&_n.onComplete(Fn.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),Dt.removeFileInfo(this.fileKey),this.config.onError(new zr("Upload Aborted",10499))}},{key:"setUploadState",value:function(Fn){Fn!==this.uploadState&&(this.uploadState=Fn)}},{key:"setContext",value:function(Fn){Dt.setUploadContext(this.fileKey,Fn,this.config.enableCache),this.param.ctx=Fn}},{key:"setComplete",value:function(){Dt.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&kn(Ln.prototype,_r),Ln}(),Hn={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(_r){var Pn=Dt.getFileKey(_r),Fn=Dt.getFileInfo(Pn);return Fn===null?null:sa()-Fn.modifyAt>Hn.expireTime?(Dt.removeFileInfo(Pn),null):{uploadInfo:Mr({bucketName:Fn.bucket,objectName:Fn.obj,token:Fn.token,ctx:Fn.ctx},Fn.payload?{payload:Fn.payload}:{}),complete:Fn.end}},setMaxFileCache:function(_r){Hn.maxFileCache=_r},setExpireTime:function(_r){Hn.expireTime=_r},printCaches:function(){for(var _r=0,Pn=Vo(localStorage);_r<Pn.length;_r++){var Fn=Pn[_r],_n=Dt.getFileInfo(Fn);_n&&console.log(_n,"modifiedAt",new Date(_n.modifyAt).toTimeString())}},createConfig:function(_r){return new _(_r)},createTask:function(_r,Pn,Fn){return new Jn(_r,Pn,Fn)}},xo=Hn;return $.default}()}),YT=o(function(w,M){w.exports=function(){function L(Ie){if(Ie){var de,Lt="";return In(de=Vo(Ie)).call(de,function(Dt,dr){Lt+=dr===0?"?":"&",Lt+=Dt+"="+Ie[Dt]}),Lt}return""}function $(Ie,de,Lt,Dt){return Error.call(this,Lt),this.source=Ie,this.code=de,this.desc=Lt,this.detail=Dt||{},this}function _(Ie,de){var Lt=Ja(de.prototype);Lt.constructor=Ie,Ie.prototype=Lt}function re(Ie,de){de===void 0&&(de={dataType:"json",method:"GET",timeout:5e3});var Lt=de.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",Dt=de.method==="GET"?L(de.params):"";return new co(function(dr,gr){if(window.XMLHttpRequest){var vr,Cr=new XMLHttpRequest;if(Cr.onreadystatechange=function(){if(Cr.readyState===4)if(Cr.status===200){try{vr=JSON.parse(Cr.response||"{}")}catch{vr=Cr.response}dr({status:Cr.status,data:vr})}else gr(new $(1,Cr.status,Cr.statusText))},Cr.open(de.method,""+Ie+Dt),Cr.timeout=de.timeout||5e3,Cr.setRequestHeader("Content-Type",Lt),de.headers)for(var xr in de.headers)Cr.setRequestHeader(xr,de.headers[xr]);Cr.ontimeout=function(Br){gr(new $(1,408,Br&&Br.message?Br.message:"request timeout"))},Cr.send(Wo(de.data))}else gr(new $(2,10400,"request no suppout"))})}return _($,Error),re}()}),Zv=console,sc,Da,Vl,va,Ys,ey={setLogger:function(M){Zv=M},platform:"BROWSER",localStorage:window.localStorage,request:YT,WebSocket:window.WebSocket,uploadFile:function(M){return Sn(this,void 0,void 0,sr.mark(function L(){var $,_,re,Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(M.fileInput||M.file){dr.next=2;break}throw new Error("File not exist");case 2:if(!M.file){dr.next=6;break}Ie=M.file,dr.next=20;break;case 6:if(typeof M.fileInput!="string"){dr.next=15;break}if(!((de=document.getElementById(M.fileInput))&&de.files&&de.files[0])){dr.next=12;break}Ie=de.files[0],dr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:dr.next=20;break;case 15:if(!(M.fileInput&&M.fileInput.files&&M.fileInput.files[0])){dr.next=19;break}Ie=M.fileInput.files[0],dr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+M.fileInput);case 20:if(!(M.maxSize&&Ie.size>M.maxSize)){dr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+M.maxSize+", get "+Ie.size);case 22:return dr.next=24,new co(function(gr,vr){var Cr=nh.createConfig({enableCache:!1,directUploadAddr:M.chunkUploadHost,onError:function(jr){vr(jr)},onProgress:M.onUploadProgress||function(){},onComplete:function(jr){gr(jr)}}),xr=nh.createTask(Ie,{bucketName:M.nosToken.bucket,objectName:decodeURIComponent(M.nosToken.objectName),token:M.nosToken.token},Cr);try{M.onUploadStart&&M.onUploadStart(xr)}catch(Br){Zv.error("Adapter uploadFile: options.onUploadStart error",Br&&Br.message),xr.abort(),vr(Br)}});case 24:return(Lt=dr.sent).name=Ie.name,Lt.size=Ie.size,Lt.type=Ie.type,Lt.ext=Yg($=Lt.name).call($,".")>-1?Co(_=Lt.name).call(_,Yg(re=Lt.name).call(re,".")+1).toLowerCase():"",dr.abrupt("return",Lt);case 30:case"end":return dr.stop()}},L)}))},getSystemInfo:function(){var M,L;return{os:((M=ql.os)===null||M===void 0?void 0:M.family)||"",osVer:((L=ql.os)===null||L===void 0?void 0:L.version)||"",browser:ql.name||"",browserVer:ql.version||"",hostEnv:"BROWSER",hostEnvVer:ql.version||"",hostInfo:ql.ua||""}}},os=function(){function w(M,L){this.name=M,this.core=L,this.name=M,this.logger=L.logger,this.core=L}return w.prototype.process=function(L){var $=this[L.cmd+"Handler"];return typeof $=="function"?$.call(this,L):L.error&&!L.error.ignore?co.reject(L.error):co.resolve(L)},w}();(function(w){w[w.text=0]="text",w[w.image=1]="image",w[w.audio=2]="audio",w[w.video=3]="video",w[w.geo=4]="geo",w[w.notification=5]="notification",w[w.file=6]="file",w[w.tip=10]="tip",w[w.robot=11]="robot",w[w.g2=12]="g2",w[w.custom=100]="custom"})(sc||(sc={})),function(w){w[w.p2p=0]="p2p",w[w.team=1]="team",w[w.superTeam=5]="superTeam"}(Da||(Da={})),function(w){w[w.Android=1]="Android",w[w.iOS=2]="iOS",w[w.PC=4]="PC",w[w.WindowsPhone=8]="WindowsPhone",w[w.Web=16]="Web",w[w.Server=32]="Server",w[w.Mac=64]="Mac"}(Vl||(Vl={})),function(w){w[w.unread=1]="unread",w[w.read=2]="read",w[w.deleted=3]="deleted",w[w.sending=4]="sending",w[w.sendFailed=5]="sendFailed",w[w.sent=6]="sent",w[w.receipt=7]="receipt",w[w.refused=10]="refused"}(va||(va={})),function(w){w[w.default=0]="default",w[w.leave=1]="leave",w[w.roam=2]="roam"}(Ys||(Ys={}));var oh=function(M,L){return function($){return M(L($))}},ah=oh(Object.getPrototypeOf,Object),XT=Function.prototype,ZT=Object.prototype,ty=XT.toString,eS=ZT.hasOwnProperty,pl=ty.call(Object),bd=function(M){if(!hi(M)||yc(M)!="[object Object]")return!1;var L=ah(M);if(L===null)return!0;var $=eS.call(L,"constructor")&&L.constructor;return typeof $=="function"&&$ instanceof $&&ty.call($)==pl};function Xs(w,M){if(!bd(M))return{};var L=JSON.parse(Wo(M)),$=sh(w,L);return JSON.parse(Wo(Mr(Mr({},L),$)))}function sh(w,M){if(!bd(M))return{};var L={},$=Vo(w);return In($).call($,function(_){var re=w[_].type;if(typeof re!="string"){var Ie=sh(w[_],M);Vo(Ie).length>0&&(L[_]=Ie)}else{var de=w[_],Lt=de.rawKey||_,Dt=Bp[re](M,Lt,de);Dt!==void 0&&(M[Lt]=void 0,L[_]=Dt)}}),L}var Bp={number:function(M,L){if(M[L]!==void 0)return+M[L]},string:function(M,L){if(M[L]!==void 0)return M[L]},boolean:function(M,L){return+M[L]>0||+M[L]!=0&&void 0},enum:function(M,L,$){return sp($)[M[L]]},object:function(M,L){if(M[L]!==void 0)try{return JSON.parse(M[L])}catch{return{}}}};function Td(w,M){if(!bd(M))return{};var L=JSON.parse(Wo(M)),$=ry(w,L);return JSON.parse(Wo(Mr(Mr({},L),$)))}function ry(w,M){var L;if(!bd(M))return op(L=Vo(w)).call(L,function(re,Ie){return re[w[Ie].rawKey||Ie]=void 0,re},{});var $={},_=Vo(w);return In(_).call(_,function(re){var Ie=w[re].type;if(typeof Ie!="string"){var de=ry(w[re],M[re]);return Mr($,de),void(M[re]=void 0)}var Lt=w[re],Dt=Lt.rawKey||re,dr=ih[Ie](M,re,Lt);M[Dt]=void 0,$[Dt]=dr}),$}var ih={number:function(M,L){return M[L]},string:function(M,L){return M[L]},boolean:function(M,L){return M[L]===!0?1:M[L]===!1?0:void 0},enum:function(M,L,$){return sp($)[M[L]]},object:function(M,L){if(M[L]!==void 0)try{return Wo(M[L])}catch{return""}}},tS=ih,ny=function(M){return function(L,$,_){for(var re=-1,Ie=Object(L),de=_(L),Lt=de.length;Lt--;){var Dt=de[M?Lt:++re];if($(Ie[Dt],Dt,Ie)===!1)break}return L}}(),rS=function(M,L){for(var $=-1,_=Array(M);++$<M;)_[$]=L($);return _},ch=function(M){return hi(M)&&yc(M)=="[object Arguments]"},oy=Object.prototype,Fp=oy.hasOwnProperty,nS=oy.propertyIsEnumerable,oS=ch(function(){return arguments}())?ch:function(w){return hi(w)&&Fp.call(w,"callee")&&!nS.call(w,"callee")},Sd=oS,lh=function(){return!1},Lp=o(function(w,M){var L=M&&!M.nodeType&&M,$=L&&w&&!w.nodeType&&w,_=$&&$.exports===L?Ps.Buffer:void 0,re=(_?_.isBuffer:void 0)||lh;w.exports=re}),aS=/^(?:0|[1-9]\d*)$/,$p=function(M,L){var $=typeof M;return!!(L=L??9007199254740991)&&($=="number"||$!="symbol"&&aS.test(M))&&M>-1&&M%1==0&&M<L},Ma={};Ma["[object Float32Array]"]=Ma["[object Float64Array]"]=Ma["[object Int8Array]"]=Ma["[object Int16Array]"]=Ma["[object Int32Array]"]=Ma["[object Uint8Array]"]=Ma["[object Uint8ClampedArray]"]=Ma["[object Uint16Array]"]=Ma["[object Uint32Array]"]=!0,Ma["[object Arguments]"]=Ma["[object Array]"]=Ma["[object ArrayBuffer]"]=Ma["[object Boolean]"]=Ma["[object DataView]"]=Ma["[object Date]"]=Ma["[object Error]"]=Ma["[object Function]"]=Ma["[object Map]"]=Ma["[object Number]"]=Ma["[object Object]"]=Ma["[object RegExp]"]=Ma["[object Set]"]=Ma["[object String]"]=Ma["[object WeakMap]"]=!1;var sS=function(M){return hi(M)&&Bg(M.length)&&!!Ma[yc(M)]},uh=cs&&cs.isTypedArray,dh=uh?Al(uh):sS,iS=Object.prototype.hasOwnProperty,ay=function(M,L){var $=yi(M),_=!$&&Sd(M),re=!$&&!_&&Lp(M),Ie=!$&&!_&&!re&&dh(M),de=$||_||re||Ie,Lt=de?rS(M.length,String):[],Dt=Lt.length;for(var dr in M)!L&&!iS.call(M,dr)||de&&(dr=="length"||re&&(dr=="offset"||dr=="parent")||Ie&&(dr=="buffer"||dr=="byteLength"||dr=="byteOffset")||$p(dr,Dt))||Lt.push(dr);return Lt},jp=Object.prototype,fl=function(M){var L=M&&M.constructor;return M===(typeof L=="function"&&L.prototype||jp)},ph=oh(Object.keys,Object),Wa=Object.prototype.hasOwnProperty,cS=function(M){if(!fl(M))return ph(M);var L=[];for(var $ in Object(M))Wa.call(M,$)&&$!="constructor"&&L.push($);return L},Cd=function(M){return yp(M)?ay(M):cS(M)},sy=function(M,L){return M&&ny(M,L,Cd)},lS=function(M,L,$,_){return sy(M,function(re,Ie,de){L(_,$(re),Ie,de)}),_},fh,uS=function(M,L){return function($,_){return lS($,M,L(_),{})}},dS=Object.prototype.toString,Ga=uS(function(w,M,L){M!=null&&typeof M.toString!="function"&&(M=dS.call(M)),w[M]=L},wv($l)),pS=Ga({Android:1,iOS:2,PC:4,WindowsPhone:8,Web:16,Server:32,Mac:64}),mh={p2p:0,team:1,superTeam:5};function iy(w,M){return w&&w.length>0?To(w).call(w,function(L){return Mr(Mr({},L),{account:L.account,connectionId:L.connectionId,deviceId:L.deviceId,ip:L.ip,mac:L.mac,os:L.os,type:pS[L.type]||L.type,time:_o(L.time),online:M!==3})}):[]}Ga(mh),function(w){w[w.text=0]="text",w[w.image=1]="image",w[w.audio=2]="audio",w[w.video=3]="video",w[w.geo=4]="geo",w[w.notification=5]="notification",w[w.file=6]="file",w[w.tip=10]="tip",w[w.robot=11]="robot",w[w.g2=12]="g2",w[w.custom=100]="custom"}(fh||(fh={}));var fS={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},cy={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},ly=function(w){function M($){var _;return _=w.call(this,"auth",$)||this,qa({cmdMap:Dv,cmdConfig:qv}),_}Ro(M,w);var L=M.prototype;return L.doLogin=function(_){var re,Ie;return _===void 0&&(_=!1),Sn(this,void 0,void 0,sr.mark(function de(){var Lt,Dt,dr,gr,vr,Cr,xr,Br,jr,zr;return sr.wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return Lt=this.core.options,Dt=Ho.getSystemInfo(),dr=Mr(Mr({},Lt),{appLogin:_?0:1,appkey:Lt.appkey,account:Lt.account,token:Lt.token,deviceId:this.core.config.deviceId,clientType:16,protocolVersion:1,sdkVersion:91001,sdkHumanVersion:"0.13.1",os:Dt.os,browser:Dt.browser,session:(re=this.core.socket)===null||re===void 0?void 0:re.sessionId,sdkType:cy[Ho.platform]||0,userAgent:"Native/0.13.1"}),gr=Dt.os.toLowerCase(),Ho.platform!=="UNIAPP"||gr!=="ios"&&gr!=="android"||(dr.isReactNative=1,dr.clientType=gr==="ios"?2:1,Dt.pushDeviceInfo&&Dt.pushDeviceInfo.MANUFACTURER&&(dr.deviceInfo=Wo(Dt.pushDeviceInfo))),this.logger.log("auth::do login ",Lt.account,(Ie=this.core.socket)===null||Ie===void 0?void 0:Ie.sessionId),Kr.next=8,this.core.sendCmd("login",{login:dr});case 8:if(!(vr=Kr.sent).error){Kr.next=11;break}throw vr.error;case 11:return Cr=vr.content,xr=Cr.loginRes,Br=Cr.loginPorts,jr=Cr.aosPushInfo,zr=iy(Br,2),(zr=is(zr).call(zr,function(kn){return kn.connectionId!==xr.connectionId})).length>0&&this.core.emit("multiPortLogin",zr),Kr.abrupt("return",Mr(Mr({},xr),{aosPushInfo:jr}));case 16:case"end":return Kr.stop()}},de,this)}))},L.kick=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,this.core.sendCmd("kick",_);case 2:return de=Dt.sent,Dt.abrupt("return",(re=de.content)===null||re===void 0?void 0:re.deviceIds);case 4:case"end":return Dt.stop()}},Ie,this)}))},L.multiPortLoginHandler=function(_){if(_.error)this.logger.error("multiPortLoginHandler:: error, ",_.error);else{var re=_.content,Ie=iy(re.loginPorts,re.state);Ie.length>0&&this.core.emit("multiPortLogin",Ie)}},L.kickedHandler=function(_){if(_.error)this.logger.error("kickedHandler:: error, ",_.error);else{var re=function(de){var Lt=Xs({clientType:{type:"enum",values:Vl},customClientType:{type:"number"}},de),Dt=fS[Lt.reason];return Mr(Lt,Dt=Dt||{reason:"unknow",message:"Unknown reason"})}(_.content);this.logger.warn("kicked::",re),this.core.doDisconnect(Va.KICKED,re)}},M}(os);Vr({target:"Number",stat:!0},{isNaN:function(M){return M!=M}});var Md,mS=or.Number.isNaN,gS=Ga({none:0,normal:1,all:3}),uy={normal:0,advanced:1},hS=Ga(uy),vS=Ga({normal:0,owner:1,manager:2}),gh={noVerify:0,needVerify:1,rejectAll:2},dy=Ga(gh),py={needVerify:0,noVerify:1},fy=Ga(py),Hl={manager:0,all:1},ml=Ga(Hl),hh={manager:0,all:1},Hs=Ga(hh),Ni={manager:0,all:1},yS=Ga(Ni);function xc(w){var M,L=["teamId"],$=["level","memberNum","memberUpdateTime","createTime","updateTime"],_=["valid","validToCurrentUser","mute"],re={type:hS,muteType:gS,joinMode:dy,beInviteMode:fy,inviteMode:ml,updateTeamMode:Hs,updateExtMode:yS};w.bits;var Ie=Es(w,["bits"]);return In(L).call(L,function(de){Ie[de]&&(Ie[de]=Ie[de].toString())}),In($).call($,function(de){Ie[de]!==void 0&&(Ie[de]=_o(Ie[de]))}),In(_).call(_,function(de){Ie[de]!==void 0&&(Ie[de]=_o(Ie[de])===1)}),In(M=Vo(re)).call(M,function(de){Ie[de]!==void 0&&(Ie[de]=re[de][Ie[de]]||Ie[de])}),Ie}function vh(w){return w&&w.length>0?To(w).call(w,function(M){return xc(M)}):[]}function yh(w){var M,L=Mr({},w),$=["avatar","name","intro","announcement","ext"],_={type:uy,joinMode:gh,beInviteMode:py,inviteMode:Hl,updateTeamMode:hh,updateExtMode:Ni};return In($).call($,function(re){L[re]!==void 0&&(L[re]=L[re].toString())}),In(M=Vo(_)).call(M,function(re){L[re]!==void 0&&(L[re]=_[re][L[re]])}),L}function gy(w){var M=["teamId","ext","account","nickInTeam"],L={};return w.bitConfigMask!==void 0&&(L.bits=_o(w.bitConfigMask)),In(M).call(M,function($){w[$]&&(L[$]=w[$].toString())}),L}function kd(w){var M,L=["teamId"],$=["joinTime","updateTime","bitConfigMask"],_=["active","valid","mute"],re={type:vS},Ie=w.bits,de=Es(w,["bits"]);return Ie!==void 0&&(de.muteTeam=_o(Ie)===1,de.bitConfigMask=Ie),de.id=de.teamId+"-"+de.account,In(L).call(L,function(Lt){de[Lt]&&(de[Lt]=de[Lt].toString())}),In($).call($,function(Lt){de[Lt]!==void 0&&(de[Lt]=_o(de[Lt]))}),In(_).call(_,function(Lt){de[Lt]!==void 0&&(de[Lt]=_o(de[Lt])===1)}),In(M=Vo(re)).call(M,function(Lt){de[Lt]!==void 0&&(de[Lt]=re[Lt][de[Lt]]||de[Lt])}),de}function Dp(w){return w&&w.length>0?To(w).call(w,function(M){return kd(M)}):[]}function hy(w,M,L){return L===void 0&&(L="normal"),{id:w.teamId+"-"+M,teamId:w.teamId,account:M,type:L,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:w.memberUpdateTime,updateTime:w.memberUpdateTime,active:!0,valid:!0}}function bS(w,M,L){return L===void 0&&(L="normal"),M&&M.length>0?To(M).call(M,function($){return hy(w,$,L)}):[]}function zl(w){var M=Mr({},w);return M.createTime&&(M.createTime=+M.createTime),M.updateTime&&(M.updateTime=+M.updateTime),M.gender&&(M.gender=Md[+M.gender]),M}(function(w){w[w.unknown=0]="unknown",w[w.male=1]="male",w[w.female=2]="female"})(Md||(Md={}));var vy={"8_1":"createTeam","8_5":"addTeamMembers","8_6":"removeTeamMembers","8_7":"updateTeamInfo","8_8":"leaveTeam","8_9":"getTeamInfo","8_10":"getTeams","8_11":"getTeamMembers","8_12":"dismissTeam","8_13":"applyTeam","8_14":"passTeamApply","8_15":"rejectTeamApply","8_16":"addTeamManagers","8_17":"removeTeamManagers","8_18":"transferTeam","8_19":"updateMyMemberInfo","8_20":"updateNickInTeam","8_21":"acceptTeamInvite","8_22":"rejectTeamInvite","8_25":"muteTeamMember","8_27":"getMutedTeamMembers","8_28":"sendTeamMsgReceipt","8_29":"getTeamMsgReads","8_30":"getTeamMsgReadAccounts","8_31":"notifyTeamMsgReceipts","8_32":"muteTeam","8_33":"getTeamMemberInvitorAccid","8_34":"getTeamsById","8_101":"syncCreateTeam","8_109":"syncTeams","8_119":"syncUpdateTeamMember","8_126":"syncMyTeamMembers"},ic={team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},teamMsgReceiptTag:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,ext:12,mute:13,invitorAccid:14}},as=rs(ic),yy={getTeamInfo:{sid:8,cid:9,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"team",reflectMapper:as.team}]},getTeams:{sid:8,cid:10,service:"team",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:as.team},{type:"Number",name:"timetag"}],ignoreErrCodes:[803]},createTeam:{sid:8,cid:1,service:"team",params:[{type:"Property",name:"team",reflectMapper:ic.team},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:as.team},{type:"StrArray",name:"abortedAccidList"}]},sendTeamMsgReceipt:{sid:8,cid:28,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:as.teamMsgReceiptTag}]},getTeamMsgReads:{sid:8,cid:29,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:as.teamMsgReceiptTag}]},getTeamMsgReadAccounts:{sid:8,cid:30,service:"team",params:[{type:"Property",name:"teamMsgReceiptTag",reflectMapper:ic.teamMsgReceiptTag}],response:[{type:"Property",name:"teamMsgReceipt",reflectMapper:as.teamMsgReceiptTag},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},notifyTeamMsgReceipts:{sid:8,cid:31,service:"team",response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:as.teamMsgReceiptTag}]},dismissTeam:{sid:8,cid:12,service:"team",params:[{type:"Long",name:"teamId"}]},leaveTeam:{sid:8,cid:8,service:"team",params:[{type:"Long",name:"teamId"}]},transferTeam:{sid:8,cid:18,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateTeamInfo:{sid:8,cid:7,service:"team",params:[{type:"Property",name:"team",reflectMapper:ic.team}],response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},getTeamsById:{sid:8,cid:34,service:"team",params:[{type:"LongArray",name:"teamIds"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:as.team},{type:"StrArray",name:"tids"}],ignoreErrCodes:[816]},getTeamMembers:{sid:8,cid:11,service:"team",params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:as.teamMember},{type:"Number",name:"timetag"}]},getMutedTeamMembers:{sid:8,cid:27,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:as.teamMember}]},addTeamMembers:{sid:8,cid:5,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}],response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},removeTeamMembers:{sid:8,cid:6,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applyTeam:{sid:8,cid:13,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:as.team}]},addTeamManagers:{sid:8,cid:16,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:8,cid:17,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateMyMemberInfo:{sid:8,cid:19,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:ic.teamMember}]},updateNickInTeam:{sid:8,cid:20,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:ic.teamMember}]},muteTeamMember:{sid:8,cid:25,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:8,cid:33,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}],response:[{type:"Object",name:"accountsMap"}]},muteTeam:{sid:8,cid:32,service:"team",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},passTeamApply:{sid:8,cid:14,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:8,cid:15,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptTeamInvite:{sid:8,cid:21,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:8,cid:22,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncTeams:{sid:8,cid:109,service:"team",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",reflectMapper:as.team}]},syncCreateTeam:{sid:8,cid:101,service:"team",response:[{type:"Property",name:"team",reflectMapper:as.team}]},syncUpdateTeamMember:{sid:8,cid:119,service:"team",response:[{type:"Property",name:"teamMember",reflectMapper:as.teamMember}]},syncMyTeamMembers:{sid:8,cid:126,ext:"sync",service:"team",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember",reflectMapper:as.teamMember},{type:"Number",name:"timetag"}]}},by={"3_7":"getUsersNameCardFromServer","3_10":"updateMyNameCard","3_109":"syncMyNameCard","3_110":"onUpdateMyNameCard","3_3":"setBlack","3_103":"onUpdateBlackList","3_5":"setMute","3_105":"onUpdateMuteList","3_8":"syncRelations"},cc={user:{account:1,nick:3,avatar:4,signature:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13},relationMember:{account:0,isMuted:1,isBlack:2,createTime:3,updateTime:4}},Kl=rs(cc),TS={syncMyNameCard:{sid:3,cid:109,service:"user",response:[{type:"Property",name:"user",reflectMapper:Kl.user},{type:"Number",name:"timetag"}]},setBlack:{service:"user",sid:3,cid:3,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateBlackList:{service:"user",sid:3,cid:103,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},setMute:{service:"user",sid:3,cid:5,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateMuteList:{service:"user",sid:3,cid:105,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},syncRelations:{service:"user",sid:3,cid:8,params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"list",reflectMapper:Kl.relationMember},{type:"Number",name:"timetag"}]},getUsersNameCardFromServer:{service:"user",sid:3,cid:7,params:[{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"users",reflectMapper:Kl.user}]},updateMyNameCard:{service:"user",sid:3,cid:10,params:[{type:"Property",name:"user",reflectMapper:cc.user}],response:[{type:"Number",name:"timetag"}]},onUpdateMyNameCard:{service:"user",sid:3,cid:110,response:[{type:"Property",name:"user",reflectMapper:Kl.user}]}},Ty={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1},needForcePush:{type:"boolean",required:!1},forcePushIDsList:{type:"string",allowEmpty:!1,required:!1},forcePushContent:{type:"string",allowEmpty:!1,required:!1}};function SS(w,M){var L,$=ha!==void 0&&gd(w)||w["@@iterator"];if($)return Oo(L=($=$.call(w)).next).call(L,$);if(gi(w)||($=function(Ie,de){var Lt;if(Ie){if(typeof Ie=="string")return Sy(Ie,de);var Dt=Co(Lt=Object.prototype.toString.call(Ie)).call(Lt,8,-1);if(Dt==="Object"&&Ie.constructor&&(Dt=Ie.constructor.name),Dt==="Map"||Dt==="Set")return Ep(Ie);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return Sy(Ie,de)}}(w))||M&&w&&typeof w.length=="number"){$&&(w=$);var _=0;return function(){return _>=w.length?{done:!0}:{done:!1,value:w[_++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sy(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,$=new Array(M);L<M;L++)$[L]=w[L];return $}var bh={subType:{type:"string"},setting:{resendFlag:{type:"boolean"},envConfig:{type:"string"},needSaveHistory:{type:"boolean"},needRoaming:{type:"boolean"},needOffline:{type:"boolean"},needSelfSync:{type:"boolean"},needRouted:{type:"boolean"},needUpdateSession:{type:"boolean"},isMuted:{type:"boolean"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBIZID:{type:"string"},clientAntispamHitting:{type:"boolean"},antiSpamUsingYidun:{type:"boolean"},yidunCallbackURL:{type:"string"},yidunAntiCheating:{type:"string"},yidunAntiSpamExtension:{type:"string"},yidunAntiSpamResult:{type:"string"}},pushInfo:Ty,teamSpecializationInfo:{needACK:{type:"boolean"},isACKSent:{type:"boolean"},ackSnapshot:{type:"number"}},threadMessageInfo:{replyMsgFromAccount:{type:"string"},replyMsgToAccount:{type:"string"},replyMsgTime:{type:"number"},replyMsgIdServer:{type:"string"},replyMsgIdClient:{type:"string"},threadMsgFromAccount:{type:"string"},threadMsgToAccount:{type:"string"},threadMsgTime:{type:"number"},threadMsgIdServer:{type:"string"},threadMsgIdClient:{type:"string"}}},Ic={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMemberMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function bi(w,M){return Da[w.scene]+"-"+(w.to===M?w.from:w.to)}function Up(w,M){return w.from===M?w.to===M?"in":"out":"in"}function Ri(w,M){var L=M.account,$=M.featureValue,_=M.statusValue,re=M.sessionAck,Ie=M.msgReceiptTime,de=Da[w.scene],Lt=w.to===L?w.from:w.to,Dt=Ys.default,dr=va.unread;_o(w.isInBlackList)>0?(dr=va.refused,delete w.isInBlackList):dr=w.from===L?Ie&&Ie>=+w.time?va.receipt:va.sent:re&&re>=+w.time?va.read:va.unread;var gr=Mr(Mr({},Xs(bh,w)),{scene:de,type:sc[w.type],fromClientType:Vl[w.fromClientType],flow:Up(w,L),target:Lt,to:w.to,from:w.from,time:w.time?+w.time:void 0,userUpdateTime:w.userUpdateTime?+w.userUpdateTime:void 0,idClient:w.idClient,sessionId:de+"-"+Lt,status:va[_||dr],feature:Ys[$||Dt]});if(typeof gr.attach=="string")try{gr.attach=JSON.parse(gr.attach)}catch{}return gr.type==="notification"&&(gr.attach=gr.attach?function(Cr){var xr,Br={};if(Br.type=Ic[Cr.id]||Cr.id,!Cr.data)return Br;var jr,zr={ids:"accounts",id:"account",attach:"custom",channel:"channelId",calltype:"netcallType",mute:"mute",duration:"duration",time:"time",from:"from",ext:"ext"},Hr=Cr.data;return In(xr=Vo(zr)).call(xr,function(Kr){Hr[Kr]!==void 0&&(Br[zr[Kr]]=Hr[Kr])}),Hr.tinfo&&(Br.team=xc(Ii(Hr.tinfo,as.team))),Hr.uinfos&&(Br.users=To(jr=Hr.uinfos).call(jr,function(Kr){return zl(Ii(Kr,Kl.user))})),Hr.mute!==void 0&&(Br.mute=_o(Hr.mute)===1),Br}(gr.attach):{}),gr}function _d(w,M){return w&&w.length>0?Wl(To(w).call(w,function(L){return Ri(L,M)})):[]}function Wl(w){for(var M,L,$={},_=SS(w);!(L=_()).done;){var re=L.value,Ie=$[re.idClient];Ie&&Ie.time>re.time||($[re.idClient]=re)}return To(M=Vo($)).call(M,function(de){return $[de]})}function gl(w,M){M===void 0&&(M=!0);var L=Mr({},w);if(L.pushInfo&&M){for(var $ in L.pushInfo)typeof L.pushInfo[$]=="boolean"?L[$]=L.pushInfo[$]?1:0:L[$]=L.pushInfo[$];delete L.pushInfo}return L.scene===Da.team&&L.needForcePush&&(L.forcePushContent=L.forcePushContent||L.pushContent,L.forcePushIDsList=L.forcePushIDsList?L.forcePushIDsList:"#%@all@%#"),L}function wd(w,M){return To(w).call(w,function(L){var $;return $=M||(mS(_o(L.scene))?L.scene:_o(L.scene)===1?"p2p":"team"),{deletedTime:_o(L.time),from:L.from,idClient:L.deletedIdClient||L.idClient,idServer:L.deletedIdServer||L.idServer,scene:$,time:_o(L.time),to:L.to}})}var Th=Array.prototype.reverse,Yo=function(M){return M==null?M:Th.call(M)},zo=function(){function w(M){this.core=M}return w.prototype.processBroadcastMsg=function(L){var $=To(L).call(L,function(_){return Mr(Mr({},_),{time:_o(_.time)})});return this.core.sendCmd("batchMarkRead",{sid:7,cid:17,ids:To($).call($,function(_){return _.id})}),$},w}(),Sh={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1}},Cy={pushContent:8,pushPayload:9,needPush:107,needPushBadge:109,needPushNick:110},Ha={"4_4":"syncOfflineMsgs","4_9":"syncRoamingMsgs","4_17":"syncRoamingMsgs","4_21":"syncDeleteSelfMsgs","7_1":"sendMsg","8_23":"getHistoryTeamMsgs","21_14":"getHistorySuperTeamMsgs","8_2":"sendTeamMsg","21_2":"sendSuperTeamMsg","7_11":"sendMsgReceipt","7_13":"recallMsg","7_24":"deleteSelfMsgs","21_17":"recallSuperTeamMsg","7_2":"onMsg","8_3":"onMsg","21_3":"onMsg","7_101":"onMsg","8_102":"onMsg","21_102":"onMsg","8_4":"nimOnTeamMsgs","4_16":"syncBroadcastMsg","7_17":"onBroadcastMsg","7_123":"onDeleteSelfMsg","7_124":"onDeleteSelfMsgs"},La=Mr({scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resendFlag:13,userUpdateTime:14,ext:15,needAntiSpam:21,antiSpamContent:22,antiSpamBIZID:23,clientAntispamHitting:24,antiSpamUsingYidun:25,needACK:26,yidunCallbackURL:27,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,isDeleted:39,callbackExt:40,subType:41,yidunAntiCheating:42,envConfig:43,yidunAntiSpamExtension:44,yidunAntiSpamResult:45,needSaveHistory:100,needRoaming:101,needSelfSync:102,isMuted:104,needRouted:105,isInBlackList:106,needOffline:108,isReplyMsg:111,ackSnapshot:112},{pushContent:17,pushPayload:16,forcePushIDsList:18,forcePushContent:19,needForcePush:20,needPush:107,needPushBadge:109,needPushNick:110}),Ec={msg:La,recallMsgTag:Mr({time:0,type:1,to:2,from:3,ps:4,attach:5,deletedIdClient:10,deletedIdServer:11,opeAccount:16,env:21},Cy),deleteSelfMsgTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,ext:8},msgReceiptTag:{to:1,from:2,time:7,idClient:11},broadcastMsg:{id:1,fromAccid:2,time:4,body:5}},ss=rs(Ec),CS={sendMsg:{sid:7,cid:1,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ss.msg}],ignoreErrCodes:[7101]},sendTeamMsg:{sid:8,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ss.msg}]},sendSuperTeamMsg:{sid:21,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:Ec.msg}],response:[{type:"Property",name:"msg",reflectMapper:ss.msg}]},onMsg:{sid:7,cid:2,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ss.msg}]},nimOnTeamMsgs:{sid:8,cid:4,service:"msg",response:[{type:"PropertyArray",name:"datas",reflectMapper:ss.msg}]},getHistoryTeamMsgs:{sid:8,cid:23,service:"msg",params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ss.msg}]},getHistorySuperTeamMsgs:{sid:21,cid:14,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ss.msg}],service:"msg"},recallMsg:{sid:7,cid:13,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:Ec.recallMsgTag}]},deleteSelfMsgs:{sid:7,cid:24,service:"msg",params:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ec.deleteSelfMsgTag}],response:[{type:"Long",name:"timetag"}]},recallSuperTeamMsg:{sid:21,cid:17,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:Ec.recallMsgTag}]},sendMsgReceipt:{sid:7,cid:11,service:"msg",params:[{type:"Property",name:"msgReceiptTag",reflectMapper:Ec.msgReceiptTag}],response:[{type:"Property",name:"msgReceiptTag",reflectMapper:ss.msgReceiptTag}]},batchMarkRead:{sid:4,cid:5,service:"msg",isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},syncMsgReceipts:{sid:4,cid:12,service:"msg",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:ss.msgReceiptTag},{type:"Number",name:"timetag"}]},syncOfflineMsgs:{sid:4,cid:4,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ss.msg}]},syncRoamingMsgs:{sid:4,cid:9,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ss.msg}]},syncBroadcastMsg:{sid:4,cid:16,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ss.broadcastMsg}]},onBroadcastMsg:{sid:7,cid:17,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ss.broadcastMsg}]},onDeleteSelfMsg:{sid:7,cid:123,service:"msg",response:[{type:"Property",name:"deletedMsg",reflectMapper:ss.deleteSelfMsgTag}]},onDeleteSelfMsgs:{sid:7,cid:124,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ss.deleteSelfMsgTag}]},syncDeleteSelfMsgs:{sid:4,cid:21,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ss.deleteSelfMsgTag}]}},My=function(w){function M($){var _;return(_=w.call(this,"msg",$)||this).service=new zo($),qa({cmdMap:Ha,cmdConfig:CS}),_}Ro(M,w);var L=M.prototype;return L.sendTextMsg=function(_){return En({body:{type:"string",allowEmpty:!1}},_),this.sendMsg(Mr(Mr({},_),{type:"text"}))},L.sendTipMsg=function(_){return En({body:{type:"string",allowEmpty:!1}},_),this.sendMsg(Mr(Mr({},_),{type:"tip"}))},L.sendGeoLocationMsg=function(_){return En({attach:{type:"object",rules:{title:{type:"string",allowEmpty:!1},lat:{type:"number"},lng:{type:"number"}}}},_),this.sendMsg(Mr(Mr({},_),{type:"geo",attach:Wo(_.attach)}))},L.sendCustomMsg=function(_){return En({attach:{type:"string",allowEmpty:!1}},_),this.sendMsg(Mr(Mr({},_),{type:"custom"}))},L.sendMsg=function(_){var re,Ie,de=this;!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please send message after syncdone event"),En({scene:{type:"enum",values:vi(Da)},type:{type:"enum",values:vi(sc)},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},setting:{type:"object",rules:{resendFlag:{type:"boolean",required:!1},needSaveHistory:{type:"boolean",required:!1},needRoaming:{type:"boolean",required:!1},needOffline:{type:"boolean",required:!1},needSelfSync:{type:"boolean",required:!1},needRouted:{type:"boolean",required:!1},needUpdateSession:{type:"boolean",required:!1}},required:!1},antiSpamInfo:{type:"object",required:!1,rules:{clientAntispamHitting:{type:"boolean",required:!1},antiSpamUsingYidun:{type:"boolean",required:!1}}},pushInfo:{type:"object",required:!1,rules:Ty},teamSpecializationInfo:{type:"object",required:!1,rules:{needACK:{type:"boolean",required:!1}}}},_);var Lt,Dt=_.scene==="p2p"?"sendMsg":_.scene==="team"?"sendTeamMsg":"sendSuperTeamMsg",dr=function(Cr,xr,Br,jr){Cr.onSendBefore,Cr.onUploadStart,Cr.onUploadDone;var zr=Cr.replyMsg,Hr=Es(Cr,["onSendBefore","onUploadStart","onUploadDone","replyMsg"]),Kr=Mr(Mr({},Td(bh,Hr)),{scene:Da[Cr.scene],type:sc[Cr.type],from:xr,fromClientType:16,fromDeviceId:Br,fromNick:jr==null?void 0:jr.nick,userUpdateTime:jr==null?void 0:jr.updateTime,status:va[va.sending]});if(Kr.idClient=Kr.resendFlag?Cr.idClient:_p(),!Kr.idClient)throw new Tg("idClient is required to resend a message","idClient","required");return Kr=gl(Kr,!1),zr&&(Kr.replyMsgFromAccount=zr.from,Kr.replyMsgToAccount=zr.to,Kr.replyMsgTime=+zr.time,Kr.replyMsgIdServer=zr.idServer,Kr.replyMsgIdClient=zr.idClient,Kr.threadMsgFromAccount=zr.from,Kr.threadMsgToAccount=zr.to,Kr.threadMsgTime=+zr.time,Kr.threadMsgIdServer=zr.idServer,Kr.threadMsgIdClient=zr.idClient,zr.threadMessageInfo&&zr.threadMessageInfo.threadMsgIdServer&&(Kr.threadMsgFromAccount=zr.threadMessageInfo.threadMsgFromAccount,Kr.threadMsgToAccount=zr.threadMessageInfo.threadMsgToAccount,Kr.threadMsgTime=zr.threadMessageInfo.threadMsgTime,Kr.threadMsgIdServer=zr.threadMessageInfo.threadMsgIdServer,Kr.threadMsgIdClient=zr.threadMessageInfo.threadMsgIdClient)),Kr}(_,this.core.account,this.core.config.deviceId,(Ie=this.core.user)===null||Ie===void 0?void 0:Ie.myInfo),gr=Ri(Mr(Mr({},dr),{time:new Date().getTime()}),{account:this.core.account,featureValue:Ys.default,statusValue:va.sending});try{_.onSendBefore&&_.onSendBefore(gr)}catch(vr){this.logger.error("sendMsg: options.onSendBefore error",vr)}return this.core.eventBus.emit("session/updateForNewMsg",gr),this.core.sendCmd(Dt,{msg:dr}).then(function(vr){var Cr=vr.content,xr=vr.error;if(Lt=Cr.msg,xr)throw xr;var Br=Ri(Mr(Mr({},dr),Cr.msg),{account:de.core.account,featureValue:Ys.default,statusValue:va.sent});return Br.from===Br.to&&de.markMsgsAck([Br]),de.core.eventBus.emit("session/updateForNewMsg",Br),de.core.reporter.report("msgSend",{msgId:Br.idServer,clientId:Br.idClient,msgTime:Br.time,fromAccid:_.scene==="p2p"?de.core.account:"",toAccid:Br.to,type:Da[Br.scene],roomId:"",tid:_.scene==="p2p"?"":Br.to,result:200,faiReason:"",rt:sa()-gr.time}),Br}).catch(function(vr){var Cr=Ri(Mr(Mr(Mr({},dr),{time:new Date().getTime()}),Lt),{account:de.core.account,featureValue:Ys.default,statusValue:vr.code===7101?va.refused:va.sendFailed});throw vr.msg=Cr,de.core.eventBus.emit("session/updateForNewMsg",Cr),de.core.reporter.report("msgSend",{msgId:Cr.idServer,clientId:Cr.idClient,msgTime:Cr.time,fromAccid:_.scene==="p2p"?de.core.account:"",toAccid:Cr.to,type:Da[Cr.scene],roomId:"",tid:_.scene==="p2p"?"":Cr.to,result:vr==null?void 0:vr.code,faiReason:(vr==null?void 0:vr.message)||"",rt:sa()-gr.time}),vr})},L.resendMsg=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}}},_),Ie=_.msg,de=Mr(Mr({},Ie),{attach:Ie.attach?Wo(Ie.attach):void 0,setting:{resendFlag:!0}}),Ie.from===this.core.account){Dt.next=5;break}throw new Error("You can only resend messages that you sent: "+Ie.idClient);case 5:return Dt.abrupt("return",this.sendMsg(de));case 6:case"end":return Dt.stop()}},re,this)}))},L.forwardMsg=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}},scene:{type:"enum",values:vi(Da)},to:{type:"string",allowEmpty:!1}},_),Ie=_.msg,de=Mr(Mr({},Ie),{scene:_.scene,to:_.to,attach:Ie.attach?Wo(Ie.attach):void 0}),Dt.abrupt("return",this.sendMsg(de));case 4:case"end":return Dt.stop()}},re,this)}))},L.sendImageMsg=function(_){return this.doSendFile(Mr(Mr({},_),{type:"image"}))},L.sendFileMsg=function(_){return this.doSendFile(Mr(Mr({},_),{type:"file"}))},L.sendAudioMsg=function(_){return this.doSendFile(Mr(Mr({},_),{type:"audio"}))},L.sendVideoMsg=function(_){return this.doSendFile(Mr(Mr({},_),{type:"video"}))},L.doSendFile=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(En({scene:{type:"enum",values:vi(Da)},to:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},_),Ie=_.attach){Dt.next=28;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){Dt.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return Dt.prev=5,this.core.reporter.reportTraceStart("nos",{user_id:this.core.account,action:"upload"}),Dt.next=9,this.core.cloudStorage.uploadFile(_);case 9:Ie=Dt.sent,this.core.reporter.reportTraceEnd("nos",!0),Dt.next=20;break;case 13:throw Dt.prev=13,Dt.t0=Dt.catch(5),de=Dt.t0,this.core.reporter.reportTraceUpdateV2("nos",{operation_type:"transfer",description:de.message,code:de.code||0,target:"",succeed:!1}),this.core.reporter.reportTraceEnd("nos",!1),this.logger.error("sendFile:: upload File error or abort",Dt.t0),Dt.t0;case 20:Dt.prev=20,_.onUploadDone&&_.onUploadDone(Ie),Dt.next=28;break;case 24:throw Dt.prev=24,Dt.t1=Dt.catch(20),this.logger.error("sendFile options.onUploadDone err",Dt.t1),Dt.t1;case 28:return Dt.abrupt("return",this.sendMsg(Mr(Mr({},_),{attach:Wo(Ie),type:_.type})));case 29:case"end":return Dt.stop()}},re,this,[[5,13],[20,24]])}))},L.recallMsg=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call recallMsg after syncdone event"),En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},scene:{type:"enum",values:vi(Da)},time:{type:"number"}}},pushInfo:{type:"object",required:!1,rules:Sh},ps:{type:"string",allowEmpty:!1,required:!1}},_),de=_.msg,Lt={p2p:"recallMsg",team:"recallMsg",superTeam:"recallSuperTeamMsg"},Dt={p2p:7,team:8,superTeam:12},gr.next=7,this.core.sendCmd(Lt[de.scene],{recallMsgTag:gl({time:de.time,type:Dt[de.scene],to:de.to,from:de.from,ps:_.ps,attach:_.attach,deletedIdClient:de.idClient,deletedIdServer:de.idServer,opeAccount:de.from,env:_.env,pushInfo:_.pushInfo})});case 7:return this.core.eventBus.emit("session/updateForDeletedMsg",wd([de])),gr.abrupt("return",de);case 9:case"end":return gr.stop()}},Ie,this)}))},L.deleteSelfMsgs=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call deleteSelfMsgs after syncdone event"),En({msgs:{type:"array",rules:{scene:{type:"enum",values:["p2p","team"]},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},time:{type:"number",allowEmpty:!1}}},ext:{type:"string",allowEmpty:!1,required:!1}},_),de=_.msgs,Lt=To(de).call(de,function(vr){return{scene:vr.scene==="p2p"?1:2,from:vr.from,to:vr.to,idServer:vr.idServer,idClient:vr.idClient,time:vr.time,ext:_.ext}}),gr.next=6,this.core.sendCmd("deleteSelfMsgs",{deletedMsgs:Lt});case 6:return Dt=wd(Lt),this.core.eventBus.emit("session/updateForDeletedMsg",Dt),gr.abrupt("return",Dt);case 9:case"end":return gr.stop()}},Ie,this)}))},L.sendMsgReceipt=function(_){var re,Ie,de;return Sn(this,void 0,void 0,sr.mark(function Lt(){var Dt,dr,gr,vr;return sr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call sendMsgReceipt after syncdone event"),En({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},target:{type:"string",allowEmpty:!1},time:{type:"number"}}}},_),(Dt=_.msg).scene==="p2p"&&Dt.flow==="in"){xr.next=6;break}return this.logger.warn("Msg scene: "+Dt.scene+", flow: "+Dt.flow+" is not allowed to send msg receipt"),xr.abrupt("return",void 0);case 6:return dr={to:Dt.target,idClient:Dt.idClient,time:Dt.time},xr.next=9,this.core.sendCmd("sendMsgReceipt",{msgReceiptTag:dr});case 9:return gr=xr.sent,vr=_o((de=(Ie=gr.content)===null||Ie===void 0?void 0:Ie.msgReceiptTag)===null||de===void 0?void 0:de.time),xr.abrupt("return",Mr(Mr({},dr),{time:vr?Math.min(vr,dr.time):dr.time}));case 12:case"end":return xr.stop()}},Lt,this)}))},L.sendTeamMsgReceipt=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call sendTeamMsgReceipt after syncdone event"),En({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}},max:50}},_),de=_.teamMsgReceipts,this.core.sendCmd("sendTeamMsgReceipt",{teamMsgReceipts:de}),Dt.abrupt("return",void 0);case 5:case"end":return Dt.stop()}},Ie,this)}))},L.getTeamMsgReads=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},_),de=_.teamMsgReceipts,gr.next=4,this.core.sendCmd("getTeamMsgReads",{teamMsgReceipts:de});case 4:return Lt=gr.sent,Dt=(Dt=(re=Lt.content)===null||re===void 0?void 0:re.teamMsgReceipts)?To(Dt).call(Dt,function(vr){return Mr(Mr({},vr),{read:_o(vr.read),unread:_o(vr.unread)})}):[],gr.abrupt("return",Dt);case 8:case"end":return gr.stop()}},Ie,this)}))},L.getTeamMsgReadAccounts=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamMsgReceipt:{type:"object",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},_),Ie=_.teamMsgReceipt,Dt.next=4,this.core.sendCmd("getTeamMsgReadAccounts",{teamMsgReceiptTag:Ie});case 4:return de=Dt.sent,Dt.abrupt("return",de.content);case 6:case"end":return Dt.stop()}},re,this)}))},L.markMsgsAck=function(_){if(_&&_.length>0){var re=[],Ie=[];In(_).call(_,function(de){de.scene==="p2p"&&de.flow==="in"?re.push(de):de.scene==="team"&&de.flow==="in"&&Ie.push(de)}),re.length>0&&this.core.sendCmd("batchMarkRead",{sid:7,cid:2,ids:To(re).call(re,function(de){return de.idServer})}),Ie.length>0&&this.core.sendCmd("batchMarkRead",{sid:8,cid:3,ids:To(Ie).call(Ie,function(de){return de.idServer})})}},L.onMsgHandler=function(_){var re;if(_.error)this.logger.error("msgHandler::recvError",_.error);else{var Ie=typeof As(_,"raw.r[0]")=="number"?""+_.raw.r[0]:void 0,de=_.content.msg;de.idServer=de.idServer||Ie;var Lt=sa(),Dt=bi(de,this.core.account),dr=(re=this.core.session)===null||re===void 0?void 0:re.getSessionWithUncomplete({id:Dt}),gr=Ri(de,dr?{account:this.core.account,sessionAck:dr.ack,msgReceiptTime:dr.msgReceiptTime}:{account:this.core.account});if(this.core.options.debugLevel==="debug"?this.logger.debug("msgHandler::recvMsg",gr.idClient,gr.idServer,gr):this.logger.log("msgHandler::recvMsg",gr.idClient,gr.idServer),this.markMsgsAck([gr]),this.core.eventBus.emit("session/updateForNewMsg",gr),this.core.emit("msg",gr),gr.type==="notification")this.core.eventBus.emit("team/onNotification",gr);else if(gr.flow!=="out"){var vr=gr.scene==="p2p",Cr={msgId:gr.idServer,clientId:gr.idClient,receiveTime:_.__receiveTime,serverTime:gr.time,callbackTime:sa(),preHandleTime:Lt,fromAccid:gr.from,toAccid:this.core.account,type:Da[gr.scene],tid:vr?"":gr.to,result:200,failReason:"",rt:sa()-gr.time};this.core.reporter.report("msgReceive",Cr,!0)}}},L.nimOnTeamMsgsHandler=function(_){var re,Ie=this;In(re=_.content.datas).call(re,function(de){Ie.onMsgHandler(Mr({},_,{content:{msg:de}}))})},L.syncRoamingMsgsHandler=function(_){var re,Ie,de=_.content.msgs||[];if(de.length!==0){var Lt=bi(de[0],this.core.account),Dt=(re=this.core.session)===null||re===void 0?void 0:re.getSessionWithUncomplete({id:Lt}),dr=(de=_d(de,Dt?{account:this.core.account,featureValue:Ys.roam,sessionAck:Dt.ack,msgReceiptTime:Dt.msgReceiptTime}:{account:this.core.account,featureValue:Ys.roam}))[0].time,gr={timetag:dr,sessionId:Lt,msgs:Yo(de)};!((Ie=this.core.sync)===null||Ie===void 0)&&Ie.getSyncDoneFlag()||this.core.eventBus.emit("session/syncMsgs",gr),this.core.emit("syncRoamingMsgs",gr),this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:dr})}},L.syncOfflineMsgsHandler=function(_){var re,Ie=this,de=_.content.msgs||[];if(de.length!==0){var Lt={},Dt=[];In(de).call(de,function(gr){var vr=bi(gr,Ie.core.account),Cr=Ie.core.session.getSessionWithUncomplete({id:vr}),xr=Ri(gr,Cr?{account:Ie.core.account,featureValue:Ys.leave,sessionAck:Cr.ack,msgReceiptTime:Cr.msgReceiptTime}:{account:Ie.core.account,featureValue:Ys.leave});Dt.push(xr),Lt[xr.sessionId]?Lt[xr.sessionId].push(xr):Lt[xr.sessionId]=[xr]}),this.markMsgsAck(Dt);var dr=0;In(re=Vo(Lt)).call(re,function(gr){var vr,Cr=wc(vr=Lt[gr]).call(vr,function(Br,jr){return jr.time-Br.time});(Cr=Wl(Cr))[0].time>dr&&(dr=Cr[0].time);var xr={timetag:Cr[0].time,sessionId:gr,msgs:Cr};Ie.core.eventBus.emit("session/syncMsgs",xr),Ie.core.emit("syncOfflineMsgs",xr)}),this.core.eventBus.emit("sync/updateTimetag",{offlineMsgs:dr})}},L.syncDeleteSelfMsgsHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.deletedMsgs;Ie&&Ie.length>0||this.logger.warn("syncDeleteSelfMsgs:: no msgs");var de=Ie[Ie.length-1].time;this.core.eventBus.emit("sync/updateTimetag",{deleteSelfMsgs:de})},L.onDeleteSelfMsgHandler=function(_){var re=wd([_.content.deletedMsg]);this.core.eventBus.emit("session/updateForDeletedMsg",re),this.core.emit("deleteSelfMsgs",re)},L.onDeleteSelfMsgsHandler=function(_){var re=wd(_.content.deletedMsgs);this.core.eventBus.emit("session/updateForDeletedMsg",re),this.core.emit("deleteSelfMsgs",re)},L.onBroadcastMsgHandler=function(_){var re=_.content.msg,Ie=this.service.processBroadcastMsg([re]);this.core.emit("broadcastMsgs",Ie)},L.syncBroadcastMsgHandler=function(_){var re=_.content.msgs,Ie=this.service.processBroadcastMsg(re);this.core.emit("broadcastMsgs",Ie)},M}(os),MS={"5_1":"sync"},kS={sync:{sid:5,cid:1,service:"sync",isNoResponse:!0,params:[{type:"Property",name:"sync",reflectMapper:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,recallMsg:17,sessionAck:18,broadcastMsgs:20,signaling:21,superTeams:22,mySuperTeamMembers:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteSelfMsgs:27,stickTopSessions:28,sessionHistoryMsgsDelete:29}}],response:[{type:"Number",name:"timetag"}]}},qp=function(w){function M($,_){var re;return _===void 0&&(_={}),(re=w.call(this,"sync",$)||this).options=_,re.syncDoneFlag=!1,re.options=Mr({myInfo:!!$.user.name,offlineMsgs:!!$.msg.name,teams:!!$.team.name,myTeamMembers:!!$.team.name,roamingMsgs:!!$.msg.name,relations:!!$.user.name,friends:!!$.friend.name,friendUsers:!!$.user.name,msgReceipts:!!$.msg.name,recallMsg:!!$.msg.name,sessionAck:!!$.session.name,superTeamSessionAck:!!$.session.name,superTeams:!!$.superTeam.name,mySuperTeamMembers:!!$.superTeam.name,superTeamRoamingMsgs:!!$.superTeam.name,deleteSuperTeamMsg:!!$.superTeam.name,deleteSelfMsgs:!!$.msg.name,sessionHistoryMsgsDelete:!!$.msgLog.name,signaling:!!$.signaling.name},_),re.timetags={},re.pArray=[],re.initEventListeners(),qa({cmdMap:MS,cmdConfig:kS}),re}Ro(M,w);var L=M.prototype;return L.getSyncDoneFlag=function(){return this.syncDoneFlag},L.doSync=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return re=this.genSyncParams(),this.logger.log("doSync: ",re),de.next=4,this.core.sendCmd("sync",{sync:re});case 4:case"end":return de.stop()}},_,this)}))},L.initEventListeners=function(){var _=this;this.core.eventBus.on("sync/updateTimetag",function(re){var Ie;In(Ie=Vo(re)).call(Ie,function(de){re[de]>(_.timetags[de]||0)&&(_.timetags[de]=re[de])})}),this.core.eventBus.on("logined",function(){_.syncDoneFlag=!1})},L.genSyncParams=function(){var _,re,Ie=this;return op(_=is(re=Vo(this.options)).call(re,function(de){var Lt=de;return Ie.options[Lt]})).call(_,function(de,Lt){var Dt=Lt;return de[Dt]=Ie.timetags[Dt]||0,de},{})},L.handleImmediate=function(_){var re;this.core.session&&this.core.session.onSyncDone&&this.core.session.onSyncDone(),this.logger.log("sync: emit syncdone",(re=_.content)===null||re===void 0?void 0:re.timetag),this.syncDoneFlag=!0,this.core.emit("syncdone")},L.syncHandler=function(_){var re=this;(function(){return typeof tt<"u"&&tt.getSystemInfo?"TT":typeof swan<"u"&&swan.getSystemInfo?"BAIDU":typeof my<"u"&&my.getSystemInfo?"ALI":typeof wx<"u"&&wx.getSystemInfo?"WX":"unknow environment"})()==="ALI"?(this.logger.log("sync: emit ALIAPP sycnHandler, handle later"),vo(function(){re.handleImmediate(_)},100)):this.handleImmediate(_)},M}(os),ya={"6_26":"getNosCdnHost"},ky={getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:rs({nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4}}).nosConfigTag}]}},_S=function(w){function M(L){var $;return($=w.call(this,"misc",L)||this).core=L,$.nosCdnHostTimer=0,qa({cmdMap:ya,cmdConfig:ky}),$}return Ro(M,w),M}(os),Gl=function(M,L,$){L=="__proto__"&&pd?pd(M,L,{configurable:!0,enumerable:!0,value:$,writable:!0}):M[L]=$},_y=Object.prototype.hasOwnProperty,Vp=function(M,L,$){var _=M[L];_y.call(M,L)&&oc(_,$)&&($!==void 0||L in M)||Gl(M,L,$)},Ch=function(M,L,$,_){if(!fi(M))return M;for(var re=-1,Ie=(L=vd(L,M)).length,de=Ie-1,Lt=M;Lt!=null&&++re<Ie;){var Dt=dl(L[re]),dr=$;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return M;if(re!=de){var gr=Lt[Dt];(dr=_?_(gr,Dt,Lt):void 0)===void 0&&(dr=fi(gr)?gr:$p(L[re+1])?[]:{})}Vp(Lt,Dt,dr),Lt=Lt[Dt]}return M},wy=function(M,L,$){for(var _=-1,re=L.length,Ie={};++_<re;){var de=L[_],Lt=Wg(M,de);$(Lt,de)&&Ch(Ie,vd(de,M),Lt)}return Ie},wS=function(M,L){return M!=null&&L in Object(M)},xS=function(M,L,$){for(var _=-1,re=(L=vd(L,M)).length,Ie=!1;++_<re;){var de=dl(L[_]);if(!(Ie=M!=null&&$(M,de)))break;M=M[de]}return Ie||++_!=re?Ie:!!(re=M==null?0:M.length)&&Bg(re)&&$p(de,re)&&(yi(M)||Sd(M))},xd=function(M,L){return M!=null&&xS(M,L,wS)},Mh=function(M,L){return wy(M,L,function($,_){return xd(M,_)})},Ql=function(M,L){for(var $=-1,_=L.length,re=M.length;++$<_;)M[re+$]=L[$];return M},lc=Gs?Gs.isConcatSpreadable:void 0,IS=function(M){return yi(M)||Sd(M)||!!(lc&&M&&M[lc])},Pc=function w(M,L,$,_,re){var Ie=-1,de=M.length;for($||($=IS),re||(re=[]);++Ie<de;){var Lt=M[Ie];L>0&&$(Lt)?L>1?w(Lt,L-1,$,_,re):Ql(re,Lt):_||(re[re.length]=Lt)}return re},ES=function(M){return M!=null&&M.length?Pc(M,1):[]},Id=function(M){return Iv(hp(M,void 0,ES),M+"")}(function(w,M){return w==null?{}:Mh(w,M)}),xy=function(w){function M($){var _;return(_=w.call(this,"user",$)||this).myInfo=zl({}),qa({cmdMap:by,cmdConfig:TS}),_}Ro(M,w);var L=M.prototype;return L.setBlack=function(_){return En({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},_),this.core.sendCmd("setBlack",_).then(function(){})},L.setMute=function(_){return En({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},_),this.core.sendCmd("setMute",_).then(function(){})},L.getRelations=function(){return this.core.sendCmd("syncRelations",{timetag:0})},L.getBlackList=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return re=de.sent,de.abrupt("return",re.blackList||[]);case 4:case"end":return de.stop()}},_,this)}))},L.getMuteList=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return re=de.sent,de.abrupt("return",re.muteList||[]);case 4:case"end":return de.stop()}},_,this)}))},L.updatePushToken=function(){return Sn(this,void 0,void 0,sr.mark(function _(){return sr.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return Ie.stop()}},_,this)}))},L.updateAppBackground=function(){return Sn(this,void 0,void 0,sr.mark(function _(){return sr.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return Ie.stop()}},_,this)}))},L.getUsersNameCardFromServer=function(_){var re=this;return En({accounts:{type:"array",max:150,itemType:"string"}},_),this.core.sendCmd("getUsersNameCardFromServer",Id(_,["accounts"])).then(function(Ie){var de,Lt=Ie.content;return re.logger.log("user:: getUsers done",_.accounts),Lt&&Lt.users?To(de=Lt.users).call(de,function(Dt){return zl(Dt)}):[]})},L.updateMyNameCard=function(_){var re=this;if(En({nick:{type:"string",required:!1},avatar:{type:"string",required:!1},signature:{type:"string",required:!1},gender:{type:"enum",values:vi(Md),required:!1},email:{type:"string",required:!1},birth:{type:"string",required:!1},tel:{type:"string",required:!1},ext:{type:"string",required:!1}},_),Vo(_).length===0)return co.resolve(this.myInfo);var Ie=Id(_,["nick","avatar","signature","email","birth","tel","ext"]);return _.gender&&(Ie.gender=Md[_.gender]),this.core.sendCmd("updateMyNameCard",{user:Ie}).then(function(de){var Lt=de.content;return Lt&&Lt.timetag&&re.core.eventBus.emit("sync/updateTimetag",{myInfo:+Lt.timetag}),_.gender&&(Ie.gender=_.gender),re.myInfo=Mr({},re.myInfo,Ie),re.myInfo})},L.onUpdateBlackListHandler=function(_){var re=_.content;re.account?this.core.emit("updateBlackList",re):this.logger.warn("onUpdateBlackListHandler: no account")},L.onUpdateMuteListHandler=function(_){var re=_.content;re.account?this.core.emit("updateMuteList",re):this.logger.warn("onUpdateBlackListHandler: no account")},L.syncRelationsHandler=function(_){var re=_.content,Ie=re.list,de=re.timetag,Lt={blackList:[],muteList:[]};return de&&this.core.eventBus.emit("sync/updateTimetag",{relations:de}),Ie&&Ie.length&&In(Ie).call(Ie,function(Dt){var dr=function(vr){var Cr={account:vr.account,updateTime:+vr.updateTime,createTime:+vr.createTime};return vr.isMuted==="1"&&(Cr.isMuted=!0),vr.isBlack==="1"&&(Cr.isBlack=!0),Cr}(Dt);dr.isBlack&&Lt.blackList.push(dr),dr.isMuted&&Lt.muteList.push(dr)}),this.core.emit("relations",Lt),co.resolve(Lt)},L.syncMyNameCardHandler=function(_){_.content.user&&(this.myInfo=zl(_.content.user),this.core.emit("syncMyNameCard",this.myInfo),this.core.eventBus.emit("sync/updateTimetag",{myInfo:_.content.timetag}))},L.onUpdateMyNameCardHandler=function(_){var re=_.content.user;re?(Mr(this.myInfo,zl(re)),this.core.emit("updateMyNameCard",this.myInfo)):this.logger.warn("onUpdateMyNameCardHandler no user info")},M}(os),Hp=function(){this.__data__=new up,this.size=0},ca=function(M){var L=this.__data__,$=L.delete(M);return this.size=L.size,$},Zs=function(M){return this.__data__.get(M)},hl=function(M){return this.__data__.has(M)},PS=function(M,L){var $=this.__data__;if($ instanceof up){var _=$.__data__;if(!dd||_.length<199)return _.push([M,L]),this.size=++$.size,this;$=this.__data__=new fp(_)}return $.set(M,L),this.size=$.size,this};function vl(w){var M=this.__data__=new up(w);this.size=M.size}vl.prototype.clear=Hp,vl.prototype.delete=ca,vl.prototype.get=Zs,vl.prototype.has=hl,vl.prototype.set=PS;var Ed=vl,AS=function(M,L){for(var $=-1,_=M==null?0:M.length;++$<_;)if(L(M[$],$,M))return!0;return!1},Iy=function(M,L,$,_,re,Ie){var de=1&$,Lt=M.length,Dt=L.length;if(Lt!=Dt&&!(de&&Dt>Lt))return!1;var dr=Ie.get(M),gr=Ie.get(L);if(dr&&gr)return dr==L&&gr==M;var vr=-1,Cr=!0,xr=2&$?new Pg:void 0;for(Ie.set(M,L),Ie.set(L,M);++vr<Lt;){var Br=M[vr],jr=L[vr];if(_)var zr=de?_(jr,Br,vr,L,M,Ie):_(Br,jr,vr,M,L,Ie);if(zr!==void 0){if(zr)continue;Cr=!1;break}if(xr){if(!AS(L,function(Hr,Kr){if(!gp(xr,Kr)&&(Br===Hr||re(Br,Hr,$,_,Ie)))return xr.push(Kr)})){Cr=!1;break}}else if(Br!==jr&&!re(Br,jr,$,_,Ie)){Cr=!1;break}}return Ie.delete(M),Ie.delete(L),Cr},zp=Ps.Uint8Array,OS=function(M){var L=-1,$=Array(M.size);return M.forEach(function(_,re){$[++L]=[re,_]}),$},Ey=Gs?Gs.prototype:void 0,Pd=Ey?Ey.valueOf:void 0,Ad=function(M,L,$,_,re,Ie,de){switch($){case"[object DataView]":if(M.byteLength!=L.byteLength||M.byteOffset!=L.byteOffset)return!1;M=M.buffer,L=L.buffer;case"[object ArrayBuffer]":return!(M.byteLength!=L.byteLength||!Ie(new zp(M),new zp(L)));case"[object Boolean]":case"[object Date]":case"[object Number]":return oc(+M,+L);case"[object Error]":return M.name==L.name&&M.message==L.message;case"[object RegExp]":case"[object String]":return M==L+"";case"[object Map]":var Lt=OS;case"[object Set]":var Dt=1&_;if(Lt||(Lt=Gr),M.size!=L.size&&!Dt)return!1;var dr=de.get(M);if(dr)return dr==L;_|=2,de.set(M,L);var gr=Iy(Lt(M),Lt(L),_,re,Ie,de);return de.delete(M),gr;case"[object Symbol]":if(Pd)return Pd.call(M)==Pd.call(L)}return!1},Od=function(M,L,$){var _=L(M);return yi(M)?_:Ql(_,$(M))},kh=function(M,L){for(var $=-1,_=M==null?0:M.length,re=0,Ie=[];++$<_;){var de=M[$];L(de,$,M)&&(Ie[re++]=de)}return Ie},Nd=function(){return[]},Rd=Object.prototype.propertyIsEnumerable,_h=Object.getOwnPropertySymbols,NS=_h?function(w){return w==null?[]:(w=Object(w),kh(_h(w),function(M){return Rd.call(w,M)}))}:Nd,Bd=NS,Kp=function(M){return Od(M,Cd,Bd)},RS=Object.prototype.hasOwnProperty,Py=function(M,L,$,_,re,Ie){var de=1&$,Lt=Kp(M),Dt=Lt.length;if(Dt!=Kp(L).length&&!de)return!1;for(var dr=Dt;dr--;){var gr=Lt[dr];if(!(de?gr in L:RS.call(L,gr)))return!1}var vr=Ie.get(M),Cr=Ie.get(L);if(vr&&Cr)return vr==L&&Cr==M;var xr=!0;Ie.set(M,L),Ie.set(L,M);for(var Br=de;++dr<Dt;){var jr=M[gr=Lt[dr]],zr=L[gr];if(_)var Hr=de?_(zr,jr,gr,L,M,Ie):_(jr,zr,gr,M,L,Ie);if(!(Hr===void 0?jr===zr||re(jr,zr,$,_,Ie):Hr)){xr=!1;break}Br||(Br=gr=="constructor")}if(xr&&!Br){var Kr=M.constructor,kn=L.constructor;Kr==kn||!("constructor"in M)||!("constructor"in L)||typeof Kr=="function"&&Kr instanceof Kr&&typeof kn=="function"&&kn instanceof kn||(xr=!1)}return Ie.delete(M),Ie.delete(L),xr},wh=cl(Ps,"DataView"),Wp=cl(Ps,"Promise"),xh=cl(Ps,"WeakMap"),Ih="[object Map]",Jl="[object Promise]",Fd="[object Set]",yl="[object WeakMap]",bl="[object DataView]",BS=Mc(wh),Ay=Mc(dd),FS=Mc(Wp),LS=Mc(jl),Ac=Mc(xh),Ti=yc;(wh&&Ti(new wh(new ArrayBuffer(1)))!=bl||dd&&Ti(new dd)!=Ih||Wp&&Ti(Wp.resolve())!=Jl||jl&&Ti(new jl)!=Fd||xh&&Ti(new xh)!=yl)&&(Ti=function(w){var M=yc(w),L=M=="[object Object]"?w.constructor:void 0,$=L?Mc(L):"";if($)switch($){case BS:return bl;case Ay:return Ih;case FS:return Jl;case LS:return Fd;case Ac:return yl}return M});var us=Ti,zs="[object Arguments]",Gp="[object Array]",Yl="[object Object]",Oy=Object.prototype.hasOwnProperty,Tl=function(M,L,$,_,re,Ie){var de=yi(M),Lt=yi(L),Dt=de?Gp:us(M),dr=Lt?Gp:us(L),gr=(Dt=Dt==zs?Yl:Dt)==Yl,vr=(dr=dr==zs?Yl:dr)==Yl,Cr=Dt==dr;if(Cr&&Lp(M)){if(!Lp(L))return!1;de=!0,gr=!1}if(Cr&&!gr)return Ie||(Ie=new Ed),de||dh(M)?Iy(M,L,$,_,re,Ie):Ad(M,L,Dt,$,_,re,Ie);if(!(1&$)){var xr=gr&&Oy.call(M,"__wrapped__"),Br=vr&&Oy.call(L,"__wrapped__");if(xr||Br){var jr=xr?M.value():M,zr=Br?L.value():L;return Ie||(Ie=new Ed),re(jr,zr,$,_,Ie)}}return!!Cr&&(Ie||(Ie=new Ed),Py(M,L,$,_,re,Ie))},Ny=function w(M,L,$,_,re){return M===L||(M==null||L==null||!hi(M)&&!hi(L)?M!=M&&L!=L:Tl(M,L,$,_,w,re))},$S=function(M,L,$,_){var re=$.length,Ie=re,de=!_;if(M==null)return!Ie;for(M=Object(M);re--;){var Lt=$[re];if(de&&Lt[2]?Lt[1]!==M[Lt[0]]:!(Lt[0]in M))return!1}for(;++re<Ie;){var Dt=(Lt=$[re])[0],dr=M[Dt],gr=Lt[1];if(de&&Lt[2]){if(dr===void 0&&!(Dt in M))return!1}else{var vr=new Ed;if(_)var Cr=_(dr,gr,Dt,M,L,vr);if(!(Cr===void 0?Ny(gr,dr,3,_,vr):Cr))return!1}}return!0},Ry=function(M){return M==M&&!fi(M)},Qp=function(M){for(var L=Cd(M),$=L.length;$--;){var _=L[$],re=M[_];L[$]=[_,re,Ry(re)]}return L},Ld=function(M,L){return function($){return $!=null&&$[M]===L&&(L!==void 0||M in Object($))}},Si=function(M){var L=Qp(M);return L.length==1&&L[0][2]?Ld(L[0][0],L[0][1]):function($){return $===M||$S($,M,L)}},$d=function(M,L){return Hg(M)&&Ry(L)?Ld(dl(M),L):function($){var _=As($,M);return _===void 0&&_===L?xd($,M):Ny(L,_,3)}},Oc=function(M){return function(L){return L==null?void 0:L[M]}},Xo=function(M){return function(L){return Wg(L,M)}},uc=function(M){return Hg(M)?Oc(dl(M)):Xo(M)},Xl=function(M){return typeof M=="function"?M:M==null?$l:typeof M=="object"?yi(M)?$d(M[0],M[1]):Si(M):uc(M)},Eh=/\s/,jS=function(M){for(var L=M.length;L--&&Eh.test(M.charAt(L)););return L},DS=/^\s+/,US=function(M){return M&&M.slice(0,jS(M)+1).replace(DS,"")},qS=/^[-+]0x[0-9a-f]+$/i,VS=/^0b[01]+$/i,HS=/^0o[0-7]+$/i,zS=parseInt,KS=function(M){if(typeof M=="number")return M;if(Pp(M))return NaN;if(fi(M)){var L=typeof M.valueOf=="function"?M.valueOf():M;M=fi(L)?L+"":L}if(typeof M!="string")return M===0?M:+M;M=US(M);var $=VS.test(M);return $||HS.test(M)?zS(M.slice(2),$?2:8):qS.test(M)?NaN:+M},Ph=1/0,WS=function(M){return M?(M=KS(M))===Ph||M===-1/0?17976931348623157e292*(M<0?-1:1):M==M?M:0:M===0?M:0},By=function(M){var L=WS(M),$=L%1;return L==L?$?L-$:L:0},GS=Math.max,Ah=function(M,L,$){var _=M==null?0:M.length;if(!_)return-1;var re=$==null?0:By($);return re<0&&(re=GS(_+re,0)),Cv(M,Xl(L),re)},QS={"4_12":"syncMsgReceipts","4_14":"syncSessionAck","4_20":"syncSuperTeamSessionAck","4_22":"nimSyncSessionsWithMoreRoaming","4_25":"syncSessionReliableInfo","7_12":"multiSyncMsgReceipt","7_16":"markSessionAck","7_25":"markMultSessionsAck","7_116":"syncMarkSessionAck","21_25":"markSuperTeamSessionAck","21_32":"markMultSuperTeamSessionsAck","21_125":"syncMarkSuperTeamSessionAck","4_23":"nimSyncStickTopSessions","23_12":"nimAddStickTopSession","23_13":"nimDeleteStickTopSession","23_14":"nimUpdateStickTopSession","23_112":"nimMultiSyncAddStickTopSession","23_113":"nimMultiSyncDeleteStickTopSession","23_114":"nimMultiSyncUpdateStickTopSession"},Zl={msgReceiptTag:{to:1,from:2,time:7,idClient:11},stickTopSessionTag:{id:1,ext:2,createTime:3,updateTime:4},sessionAckTag:{scene:1,to:2,timetag:3},sessionReliableSyncTag:{scene:1,sessionId:2,syncStatus:3,syncEndMsgId:4,syncEndMsgidClient:5,syncEndMsgTime:6,syncStartMsgid:7,syncStartMsgidClient:8,syncStartMsgTime:9,nextMsgid:10,nextMsgidClient:11,nextMsgTime:12,roamMsgSync:13,offlineMsgSync:14,netCallOfflineMsgSync:15}},dc=rs(Zl),JS={syncMsgReceipts:{sid:4,cid:12,service:"session",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:dc.msgReceiptTag},{type:"Number",name:"timetag"}]},syncSessionAck:{sid:4,cid:14,service:"session",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},syncSuperTeamSessionAck:{sid:4,cid:20,service:"session",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},multiSyncMsgReceipt:{sid:7,cid:12,service:"session",response:[{type:"Property",name:"msgReceiptTag",reflectMapper:dc.msgReceiptTag}]},markSessionAck:{sid:7,cid:16,service:"session",params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSessionAck:{sid:7,cid:116,service:"session",response:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSuperTeamSessionAck:{sid:21,cid:125,service:"session",response:[{type:"String",name:"to"},{type:"long",name:"timetag"}]},markMultSessionsAck:{sid:7,cid:25,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:Zl.sessionAckTag}]},markSuperTeamSessionAck:{sid:21,cid:25,service:"session",params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},nimAddStickTopSession:{sid:23,cid:12,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:dc.stickTopSessionTag}]},nimDeleteStickTopSession:{sid:23,cid:13,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Number",name:"timetag"}]},nimUpdateStickTopSession:{sid:23,cid:14,service:"session",params:[{type:"Property",name:"tag",reflectMapper:Zl.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:dc.stickTopSessionTag}]},nimMultiSyncAddStickTopSession:{sid:23,cid:112,service:"session",response:[{type:"Property",name:"data",reflectMapper:dc.stickTopSessionTag}]},nimMultiSyncDeleteStickTopSession:{sid:23,cid:113,service:"session",response:[{type:"Number",name:"timetag"},{type:"Property",name:"data",reflectMapper:dc.stickTopSessionTag}]},nimMultiSyncUpdateStickTopSession:{sid:23,cid:114,service:"session",response:[{type:"Property",name:"data",reflectMapper:dc.stickTopSessionTag}]},nimSyncStickTopSessions:{sid:4,cid:23,service:"session",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"isThereAnyChange"},{type:"PropertyArray",name:"datas",reflectMapper:dc.stickTopSessionTag}]},markMultSuperTeamSessionsAck:{sid:21,cid:32,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:Zl.sessionAckTag}]},nimSyncSessionsWithMoreRoaming:{sid:21,cid:22,service:"session",response:[{type:"PropertyArray",name:"datas",reflectMapper:{0:"scene",1:"to",2:"from",7:"time",12:"idServer"}}]},syncSessionReliableInfo:{sid:4,cid:25,service:"session",response:[{type:"Property",name:"context",reflectMapper:{1:"timetag",2:"type"}},{type:"PropertyArray",name:"datas",reflectMapper:dc.sessionReliableSyncTag}]}},YS={id:{type:"string"},ext:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Jp(w,M,L){L===void 0&&(L=!0);var $=Xs(YS,w);return $.isStickOnTop=L,$.id=M.id,Mr(Mr({},M),{stickTopInfo:M.stickTopInfo?Mr({},M.stickTopInfo,$):$})}var XS={scene:{type:"enum",values:Da},time:{type:"number"}},jd=function(){function w(L){this.core=L}var M=w.prototype;return M.getSession=function($){return this.core.session.getSessionWithUncomplete({id:$})||this.core.session.createSession($)},M.addStickTopSession=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$),re=Lo($.id),Ie=re.scene,de=re.accid,vr.next=4,this.core.sendCmd("nimAddStickTopSession",{tag:{id:(Ie==="superTeam"?"super_team":Ie)+"|"+de,ext:$.ext}});case 4:return Lt=vr.sent,Dt=this.getSession($.id),dr=Jp(Lt.content.data,Dt),vr.abrupt("return",dr);case 8:case"end":return vr.stop()}},_,this)}))},M.deleteStickTopSession=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({id:{type:"string",allowEmpty:!1}},$),re=Lo($.id),Ie=re.scene,de=re.accid,vr.next=4,this.core.sendCmd("nimDeleteStickTopSession",{tag:{id:(Ie==="superTeam"?"super_team":Ie)+"|"+de}});case 4:return Lt=vr.sent,Dt=this.getSession($.id),dr=Jp({updateTime:Lt.content.timetag},Dt,!1),vr.abrupt("return",dr);case 8:case"end":return vr.stop()}},_,this)}))},M.updateStickTopSession=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$),re=Lo($.id),Ie=re.scene,de=re.accid,vr.next=4,this.core.sendCmd("nimUpdateStickTopSession",{tag:{id:(Ie==="superTeam"?"super_team":Ie)+"|"+de,ext:$.ext}});case 4:return Lt=vr.sent,Dt=this.getSession($.id),dr=Jp(Lt.content.data,Dt),vr.abrupt("return",dr);case 8:case"end":return vr.stop()}},_,this)}))},M.stickTopSessionHandler=function($,_){_===void 0&&(_=!0);var re=Lo($.id,"|"),Ie=re.scene+"-"+re.accid;return Jp($,this.getSession(Ie),_)},w}(),eu=function(){function w(L){this.core=L,this.logger=L.logger}var M=w.prototype;return M.canSessionResetUnreadCount=function($){var _=$.id;if($.lastMsg===void 0)throw new Error("Session::canSessionResetUnreadCount: session "+_+" is not completly, lastMsg undefined");return $.lastMsg!==null||$.unread>0?!($.ack&&$.lastMsg&&$.ack>=$.lastMsg.time)||(this.logger.log("Session::canSessionResetUnreadCount: session "+_+" reset failed, ack time is greater than last message time"),!1):(this.logger.log("Session::canSessionResetUnreadCount: session "+_+" doesn't need to be updated, lastMsg null and unread 0"),!1)},M.filterSessionForResetUnreadCount=function($){var _=this,re={cmd:"markMultSuperTeamSessionsAck",params:[]},Ie={cmd:"markMultSessionsAck",params:[]};return In($).call($,function(de){var Lt;try{if(!_.canSessionResetUnreadCount(de))return;var Dt=Lo(de.id),dr=Dt.accid,gr=Dt.scene,vr={to:dr,sessionId:de.id,timetag:((Lt=de==null?void 0:de.lastMsg)===null||Lt===void 0?void 0:Lt.time)||de.updateTime||0},Cr=function(Br){return Td({scene:{type:"enum",values:Da}},Br)}({scene:gr});gr==="superTeam"?re.params.push(vr):Ie.params.push(Mr(Mr({},vr),Cr))}catch(xr){_.logger.warn(xr)}}),{superTeam:re,p2pOrTeam:Ie}},w}(),Oh=function(M,L,$){var _=-1,re=M.length;L<0&&(L=-L>re?0:re+L),($=$>re?re:$)<0&&($+=re),re=L>$?0:$-L>>>0,L>>>=0;for(var Ie=Array(re);++_<re;)Ie[_]=M[_+L];return Ie},ZS=function(M,L,$){if(!fi($))return!1;var _=typeof L;return!!(_=="number"?yp($)&&$p(L,$.length):_=="string"&&L in $)&&oc($[L],M)},eC=Math.ceil,tC=Math.max,Fy=function(M,L,$){L=($?ZS(M,L,$):L===void 0)?1:tC(By(L),0);var _=M==null?0:M.length;if(!_||L<1)return[];for(var re=0,Ie=0,de=Array(eC(_/L));re<_;)de[Ie++]=Oh(M,re,re+=L);return de};function za(w,M){var L,$=ha!==void 0&&gd(w)||w["@@iterator"];if($)return Oo(L=($=$.call(w)).next).call(L,$);if(gi(w)||($=function(Ie,de){var Lt;if(Ie){if(typeof Ie=="string")return la(Ie,de);var Dt=Co(Lt=Object.prototype.toString.call(Ie)).call(Lt,8,-1);if(Dt==="Object"&&Ie.constructor&&(Dt=Ie.constructor.name),Dt==="Map"||Dt==="Set")return Ep(Ie);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return la(Ie,de)}}(w))||M&&w&&typeof w.length=="number"){$&&(w=$);var _=0;return function(){return _>=w.length?{done:!0}:{done:!1,value:w[_++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function la(w,M){(M==null||M>w.length)&&(M=w.length);for(var L=0,$=new Array(M);L<M;L++)$[L]=w[L];return $}var rC=function(w){function M($,_){var re;return(re=w.call(this,"session",$)||this).list=new tc,re.unreadCountFilterFn=function(Ie){return!0},re.lastMessageFilterFn=function(Ie){return!0},re.initEventListeners(),qa({cmdMap:QS,cmdConfig:JS}),typeof(_==null?void 0:_.unreadCountFilterFn)=="function"&&(re.unreadCountFilterFn=_.unreadCountFilterFn),typeof(_==null?void 0:_.lastMessageFilterFn)=="function"&&(re.lastMessageFilterFn=_.lastMessageFilterFn),re.stickTopService=new jd($),re.unreadModule=new eu($),re}Ro(M,w);var L=M.prototype;return L.initEventListeners=function(){var _,re,Ie,de=this;this.core.eventBus.on("session/syncMsgs",Oo(_=this.onSyncMsgs).call(_,this)),this.core.eventBus.on("session/updateForNewMsg",Oo(re=this.updateSessionWithMsg).call(re,this)),this.core.eventBus.on("session/updateForClearMsg",function(Lt,Dt){Dt===void 0&&(Dt=!0),Lt&&Lt.length>0&&In(Lt).call(Lt,function(dr){de.updateSession({id:dr.sessionId,lastMsg:null,unread:0,unreadMsgs:[]},Dt)})}),this.core.eventBus.on("session/updateForDeletedMsg",Oo(Ie=this.updateSessionForDeletedMsg).call(Ie,this))},L.createSession=function(_,re){try{var Ie=Lo(_);return{id:_,scene:Ie.scene,to:Ie.accid,lastMsg:re,updateTime:re?re.time:0,unread:0,unreadMsgs:[],ack:0}}catch(de){throw this.logger.error("Failed to create session with "+_,de),new Error("Failed to create session with "+_)}},L.getSession=function(_){En({id:{type:"string",allowEmpty:!1}},_);var re=this.list.get(_.id);if(this.isSessionComplete(re))return re},L.getSessionWithUncomplete=function(_){return this.list.get(_.id)},L.getAllSessions=function(){for(var _,re=[],Ie=za(this.list);!(_=Ie()).done;){var de=_.value;de[0];var Lt=de[1];this.isSessionComplete(Lt)&&re.push(Lt)}return re},L.getSessions=function(_){En({limit:{type:"number",required:!1},lastSessionId:{type:"string",allowEmpty:!1,required:!1},desc:{type:"boolean",required:!1}},_);var re=[],Ie=_.limit,de=Ie===void 0?100:Ie,Lt=_.desc,Dt=Lt===void 0||Lt,dr=_.lastSessionId,gr=0;if(Dt){for(var vr,Cr,xr=za(this.list);!(Cr=xr()).done;){var Br=Cr.value,jr=Br[0],zr=Br[1];if(dr===jr)break;this.isSessionComplete(zr)&&re.push(zr)}return kl(vr=Co(re).call(re,-de)).call(vr)}for(var Hr,Kr=za(this.list);!(Hr=Kr()).done;){var kn=Hr.value,Jn=kn[0],Hn=kn[1];if(dr)Jn===dr&&(dr=void 0);else if(this.isSessionComplete(Hn)){if(++gr>de)break;re.push(Hn)}}return re},L.resetSessionUnreadCount=function(_){var re,Ie;return Sn(this,void 0,void 0,sr.mark(function de(){var Lt,Dt,dr,gr,vr,Cr,xr,Br,jr=this;return sr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call resetSessionUnreadCount after syncdone event"),En({id:{type:"string",allowEmpty:!1}},_),En({id:{type:"string",allowEmpty:!1}},_),Lt=_.id,Dt=this.list.get(Lt)){Hr.next=8;break}throw this.logger.warn("resetSessionUnreadCount: can not find session "+Lt),new Error("Session::canSessionResetUnreadCount: can not find session "+Lt);case 8:dr=!1;try{dr=this.unreadModule.canSessionResetUnreadCount(Dt)}catch(Kr){this.logger.warn(Kr)}if(dr!==!1){Hr.next=12;break}return Hr.abrupt("return");case 12:return gr=Lo(Lt),vr=gr.accid,Cr=gr.scene,xr={to:vr,timetag:((Ie=Dt==null?void 0:Dt.lastMsg)===null||Ie===void 0?void 0:Ie.time)||Dt.updateTime||0},Br="markSuperTeamSessionAck",Cr!=="superTeam"&&(xr.scene=Cr==="p2p"?0:1,Br="markSessionAck"),Hr.abrupt("return",this.core.sendCmd(Br,xr).then(function(){var Kr=jr.storeUnreadByAck(Lt,xr.timetag);Kr&&jr.core.emit("updateSession",Kr)}));case 17:case"end":return Hr.stop()}},de,this)}))},L.resetMultiSessionUnreadCount=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr,gr,vr,Cr,xr,Br,jr,zr,Hr,Kr,kn,Jn=this;return sr.wrap(function(xo){for(;;)switch(xo.prev=xo.next){case 0:!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call resetMultiSessionUnreadCount after syncdone event"),En({ids:{type:"array",itemType:"string",min:1}},_),Dt=is(de=To(Lt=_.ids).call(Lt,function(Ln){return Jn.list.get(Ln)})).call(de,function(Ln,_r){return!!Ln||(Jn.logger.warn("Session::canSessionResetUnreadCount: can not find session "+_.ids[_r]),!1)}),dr=this.unreadModule.filterSessionForResetUnreadCount(Dt),gr=dr.superTeam,vr=dr.p2pOrTeam,Cr=Fy(gr.params,10),xr=Fy(vr.params,10),Br=za(Cr);case 7:if((jr=Br()).done){xo.next=14;break}return zr=jr.value,xo.next=11,this.core.sendCmd(gr.cmd,{datas:zr});case 11:In(zr).call(zr,function(Ln){var _r=Jn.storeUnreadByAck(Ln.sessionId,Ln.timetag);_r&&Jn.core.emit("updateSession",_r)});case 12:xo.next=7;break;case 14:Hr=za(xr);case 15:if((Kr=Hr()).done){xo.next=22;break}return kn=Kr.value,xo.next=19,this.core.sendCmd(vr.cmd,{datas:kn});case 19:In(kn).call(kn,function(Ln){var _r=Jn.storeUnreadByAck(Ln.sessionId,Ln.timetag);_r&&Jn.core.emit("updateSession",_r)});case 20:xo.next=15;break;case 22:case"end":return xo.stop()}},Ie,this)}))},L.resetAllSessionsUnreadCount=function(){var _,re;!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call resetAllSessionsUnreadCount after syncdone event");var Ie=[];return In(_=this.list).call(_,function(de){Ie.push(de.id)}),this.resetMultiSessionUnreadCount({ids:Ie})},L.deleteSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(En({id:{type:"string",allowEmpty:!1},isSyncToServer:{type:"boolean",required:!1}},_),this.list.delete(_.id),!this.core.msgLog||!_.isSyncToServer){de.next=5;break}return de.next=5,this.core.msgLog.deleteRoamingMsgs({ids:[_.id]});case 5:case"end":return de.stop()}},re,this)}))},L.deleteAllSessionsFromLocal=function(){this.list.clear()},L.addStickTopSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.stickTopService.addStickTopSession(_);case 2:return Ie=Lt.sent,this.list.set(Ie.id,Ie),Lt.abrupt("return",Ie);case 5:case"end":return Lt.stop()}},re,this)}))},L.deleteStickTopSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.stickTopService.deleteStickTopSession(_);case 2:return Ie=Lt.sent,this.list.set(Ie.id,Ie),Lt.abrupt("return",Ie);case 5:case"end":return Lt.stop()}},re,this)}))},L.updateStickTopSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.stickTopService.updateStickTopSession(_);case 2:return Ie=Lt.sent,this.list.set(Ie.id,Ie),Lt.abrupt("return",Ie);case 5:case"end":return Lt.stop()}},re,this)}))},L.nimMultiSyncAddStickTopSessionHandler=function(_){var re=this.stickTopService.stickTopSessionHandler(_.content.data);this.list.set(re.id,re),this.core.emit("updateSession",re)},L.nimMultiSyncDeleteStickTopSessionHandler=function(_){var re=this.stickTopService.stickTopSessionHandler({id:_.content.data.id,updateTime:_.content.timetag},!1);this.list.set(re.id,re),this.core.emit("updateSession",re)},L.nimMultiSyncUpdateStickTopSessionHandler=function(_){var re=this.stickTopService.stickTopSessionHandler(_.content.data);this.list.set(re.id,re),this.core.emit("updateSession",re)},L.nimSyncStickTopSessionsHandler=function(_){var re=this,Ie=_.content.datas;In(Ie).call(Ie,function(de){var Lt=re.stickTopService.stickTopSessionHandler(de);re.list.set(Lt.id,Lt)})},L.updateSessionWithMsg=function(_){var re=!0,Ie=!0;try{re=!!this.unreadCountFilterFn(_)}catch(dr){this.logger.error("session:updateSessionWithMsg, unreadCountFilterFn error",dr)}try{Ie=!!this.lastMessageFilterFn(_)}catch(dr){this.logger.error("session:updateSessionWithMsg, lastMessageFilterFn error",dr)}var de=this.list.get(_.sessionId)||this.createSession(_.sessionId),Lt=!1;if(this.logger.log("session:updateSessionWithMsg, pending ",_.sessionId,_.idClient,_.idServer,Ie,re),Ie&&(!de.lastMsg||de.lastMsg.time<_.time||_.status===va[va.sending]||de.lastMsg.status===va[va.sending])&&(de.lastMsg=_,de.updateTime=_.time,Lt=!0),re&&_.status===va[va.unread]&&_.time>(de.ack||0)){de.unread++;var Dt=de.unreadMsgs||[];Dt.unshift(_),wc(Dt).call(Dt,function(dr,gr){return gr.time-dr.time}),Lt=!0}Lt&&(this.logger.log("session:updateSessionWithMsg updating ",de.id,de.unread,de.lastMsg&&de.lastMsg.idClient),this.list.set(de.id,de),this.core.emit("updateSession",de))},L.storeUnreadByAck=function(_,re){var Ie=this.list.get(_)||this.createSession(_);if(!(Ie.ack&&re<Ie.ack)){var de=Ie.unreadMsgs||[],Lt=[],Dt=0;return Ie.unreadMsgs=[],de.length>0&&(In(de).call(de,function(dr){dr.time>re&&(Dt++,Lt.push(dr))}),Ie.unreadMsgs=wc(Lt).call(Lt,function(dr,gr){return gr.time-dr.time})),Ie.ack=re,Ie.unread=Dt,Ie.lastMsg&&Ie.lastMsg.status==="unread"&&re>=Ie.lastMsg.time&&(Ie.lastMsg.status="read"),this.list.set(_,Ie),Ie}this.logger.warn("storeUnreadByAck: not need update ack",_,re,Ie.ack)},L.updateSession=function(_,re){re===void 0&&(re=!0);var Ie=_.id,de=this.list.get(Ie)||this.createSession(_.id),Lt=Mr(de,_);return this.list.set(Ie,Lt),this.logger.log("updateSession: update",re,Id(_,["id","ack","unread"]),Lt.lastMsg&&Lt.lastMsg.idClient),re&&this.core.emit("updateSession",Lt),Lt},L.isSessionComplete=function(_){return!!_&&!!(_.id&&_.scene&&_.to)&&_.lastMsg!==void 0},L.syncSessionAckHandler=function(_){var re,Ie,de=this,Lt=_.content.p2p||{},Dt=_.content.team.m_map||{};this.logger.log("syncSessionAck::",Lt,Dt),In(re=Vo(Lt)).call(re,function(dr){de.updateSession({id:"p2p-"+dr,ack:Lt[dr]},!1)}),In(Ie=Vo(Dt)).call(Ie,function(dr){de.updateSession({id:"team-"+dr,ack:Dt[dr]},!1)})},L.syncSuperTeamSessionAckHandler=function(_){var re,Ie=this,de=_.content.superTeam.m_map;this.logger.log("syncSuperTeamSessionAck::",de),In(re=Vo(de)).call(re,function(Lt){Ie.updateSession({id:"superTeam-"+Lt,ack:de[Lt]},!1)})},L.syncMarkSessionAckHandler=function(_){var re=_.content,Ie=(re.scene===0?"p2p":re.scene===1?"team":"superTeam")+"-"+re.to,de=this.list.get(Ie);if(de&&de.ack&&re.timetag<de.ack)this.logger.warn("syncMarkSessionAckHandler: "+Ie+" do not need update ack",de.ack,re.timetag);else{var Lt=this.storeUnreadByAck(Ie,re.timetag);Lt&&this.core.emit("updateSession",Lt)}},L.syncMarkSuperTeamSessionAckHandler=function(_){_.content.scene=5,this.syncMarkSessionAckHandler(_)},L.onSyncDone=function(){var _,re,Ie,de=this,Lt=[];In(_=this.list).call(_,function(Dt,dr){Lt.push(de.storeUnreadByAck(dr,Dt.ack||0))}),this.list.clear(),In(re=wc(Lt).call(Lt,function(Dt,dr){return Dt.updateTime-dr.updateTime})).call(re,function(Dt){de.list.set(Dt.id,Dt)}),(Lt=wc(Ie=is(Lt).call(Lt,function(Dt){return de.isSessionComplete(Dt)})).call(Ie,function(Dt,dr){return dr.updateTime-Dt.updateTime})).length>0&&this.core.emit("sessions",Lt)},L.onSyncMsgs=function(_){var re,Ie=this,de=this.list.get(_.sessionId),Lt=[];try{var Dt;Lt=is(Dt=_.msgs).call(Dt,function(xr){return Ie.unreadCountFilterFn(JSON.parse(Wo(xr)))})}catch(xr){this.logger.error("session:onSyncMsgs, unreadCountFilterFn error ",xr)}var dr,gr=[];try{var vr;gr=is(vr=_.msgs).call(vr,function(xr){return Ie.lastMessageFilterFn(JSON.parse(Wo(xr)))})}catch(xr){this.logger.error("session:onSyncMsgs, lastMessageFilterFn error ",xr)}gr&&gr.length>0&&(dr=gr[gr.length-1],dr=gr[0].time>dr.time?gr[0]:dr);var Cr=dr?dr.time:0;de||(de=dr?this.createSession(_.sessionId,dr):this.createSession(_.sessionId)),de.unreadMsgs=de.unreadMsgs?is(re=ks(Lt).call(Lt,de.unreadMsgs)).call(re,function(xr){return xr.status===va[va.unread]}):is(Lt).call(Lt,function(xr){return xr.status===va[va.unread]}),de.updateTime&&de.updateTime>=Cr||(de.updateTime=Cr),de.lastMsg&&de.lastMsg.time>=Cr||(de.lastMsg=dr),this.list.set(de.id,de)},L.updateSessionForDeletedMsg=function(_){var re,Ie=this,de={};In(_).call(_,function(Lt){var Dt=Lt.to===Ie.core.account?Lt.from:Lt.to,dr=Lt.scene+"-"+Dt,gr=Ie.list.get(dr);if(gr){if((gr.ack||0)<Lt.time&&Lt.from!==Ie.core.account&&gr.unread>0&&(gr.unread=gr.unread-1,gr.unreadMsgs&&gr.unreadMsgs.length>0)){var vr,Cr=Ah(gr.unreadMsgs,{idClient:Lt.idClient});Cr>=0&&qg(vr=gr.unreadMsgs).call(vr,Cr,1)}gr.lastMsg&&gr.lastMsg.idClient===Lt.idClient&&(gr.lastMsg=null),de[gr.id]=!0}}),In(re=Vo(de)).call(re,function(Lt){var Dt=Ie.list.get(Lt);Dt&&Ie.core.emit("updateSession",Dt)})},L.multiSyncMsgReceiptHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.msgReceiptTag;if(Ie){this.updateSessionMsgReceiptTime([Ie],!0),Ie.msgReceiptTime=Ie.time,Ie.sessionId="p2p-"+Ie.from,Ie.time,Ie.from;var de=Es(Ie,["time","from"]);this.core.emit("msgReceipts",[de])}},L.syncMsgReceiptsHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.msgReceipts;Ie&&this.updateSessionMsgReceiptTime(Ie,!1)},L.updateSessionMsgReceiptTime=function(_,re){var Ie=this;re===void 0&&(re=!0),_&&_.length>0&&In(_).call(_,function(de){var Lt=Ie.list.get("p2p-"+de.from);Lt||(Lt=Ie.createSession("p2p-"+de.from));var Dt=_o(de.time);Lt.msgReceiptTime&&Lt.msgReceiptTime>=Dt||(Lt.msgReceiptTime=Dt,Lt.lastMsg&&Lt.lastMsg.status==="sent"&&Dt>=Lt.lastMsg.time&&(Lt.lastMsg.status="receipt"),Ie.logger.log("session: update session "+Lt.id+" msgReceiptTime: "+Lt.msgReceiptTime),Ie.list.set(Lt.id,Lt),re&&Ie.core.emit("updateSession",Lt))})},L.nimSyncSessionsWithMoreRoamingHandler=function(_){var re=function(de,Lt){return To(de).call(de,function(Dt){var dr=Xs(XS,Dt);return dr.sessionId=bi(Dt,Lt),dr})}(_.content.datas,this.core.account);this.logger.log("session:syncSessionsWithMoreRoaming",re)},M}(os),nC=function(){function w(L){this.core=L}var M=w.prototype;return M.notifyAddTeamMembers=function($,_){this.core.emit("addTeamMembers",{team:$,accounts:_,members:bS($,_)})},M.notifyUpdateTeamManagers=function($,_,re,Ie){this.core.emit("updateTeamManagers",{team:{teamId:$,memberUpdateTime:Ie},accounts:_,isManager:re,members:To(_).call(_,function(de){return{id:$+"-"+de,account:de,type:"manager",updateTime:Ie}})})},M.notifyRemoveTeamMembers=function($,_){this.core.emit("removeTeamMembers",{team:$,accounts:_})},M.notifyTransferTeam=function($,_,re){this.core.emit("transferTeam",{team:$,from:{id:$.teamId+"-"+_,type:"normal",account:_,updateTime:$.memberUpdateTime},to:{id:$.teamId+"-"+re,type:"owner",account:re,updateTime:$.memberUpdateTime}})},M.notifyUpdateTeamMembersMute=function($,_,re){this.core.emit("updateTeamMembersMute",{team:$,accounts:_,members:To(_).call(_,function(Ie){return{id:$.teamId+"-"+Ie,account:Ie,teamId:$.teamId,mute:re,updateTime:$.memberUpdateTime}}),mute:re})},w}(),oC=function(M,L){for(var $=-1,_=M==null?0:M.length;++$<_&&L(M[$],$,M)!==!1;);return M},Yp=function(M,L,$,_){var re=!$;$||($={});for(var Ie=-1,de=L.length;++Ie<de;){var Lt=L[Ie],Dt=_?_($[Lt],M[Lt],Lt,$,M):void 0;Dt===void 0&&(Dt=M[Lt]),re?Gl($,Lt,Dt):Vp($,Lt,Dt)}return $},aC=function(M,L){return M&&Yp(L,Cd(L),M)},pc=function(M){var L=[];if(M!=null)for(var $ in Object(M))L.push($);return L},Os=Object.prototype.hasOwnProperty,Xp=function(M){if(!fi(M))return pc(M);var L=fl(M),$=[];for(var _ in M)(_!="constructor"||!L&&Os.call(M,_))&&$.push(_);return $},Nh=function(M){return yp(M)?ay(M,!0):Xp(M)},ds=function(M,L){return M&&Yp(L,Nh(L),M)},fa=o(function(w,M){var L=M&&!M.nodeType&&M,$=L&&w&&!w.nodeType&&w,_=$&&$.exports===L?Ps.Buffer:void 0,re=_?_.allocUnsafe:void 0;w.exports=function(de,Lt){if(Lt)return de.slice();var Dt=de.length,dr=re?re(Dt):new de.constructor(Dt);return de.copy(dr),dr}}),sC=function(M,L){var $=-1,_=M.length;for(L||(L=Array(_));++$<_;)L[$]=M[$];return L},Ly=function(M,L){return Yp(M,Bd(M),L)},Zp=Object.getOwnPropertySymbols?function(w){for(var M=[];w;)Ql(M,Bd(w)),w=ah(w);return M}:Nd,Rh=function(M,L){return Yp(M,Zp(M),L)},$y=function(M){return Od(M,Nh,Zp)},jy=Object.prototype.hasOwnProperty,Dd=function(M){var L=M.length,$=new M.constructor(L);return L&&typeof M[0]=="string"&&jy.call(M,"index")&&($.index=M.index,$.input=M.input),$},ef=function(M){var L=new M.constructor(M.byteLength);return new zp(L).set(new zp(M)),L},Bh=function(M,L){var $=L?ef(M.buffer):M.buffer;return new M.constructor($,M.byteOffset,M.byteLength)},Dy=/\w*$/,_s=function(M){var L=new M.constructor(M.source,Dy.exec(M));return L.lastIndex=M.lastIndex,L},Uy=Gs?Gs.prototype:void 0,Fh=Uy?Uy.valueOf:void 0,iC=function(M){return Fh?Object(Fh.call(M)):{}},cC=function(M,L){var $=L?ef(M.buffer):M.buffer;return new M.constructor($,M.byteOffset,M.length)},lC=function(M,L,$){var _=M.constructor;switch(L){case"[object ArrayBuffer]":return ef(M);case"[object Boolean]":case"[object Date]":return new _(+M);case"[object DataView]":return Bh(M,$);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cC(M,$);case"[object Map]":case"[object Set]":return new _;case"[object Number]":case"[object String]":return new _(M);case"[object RegExp]":return _s(M);case"[object Symbol]":return iC(M)}},qy=Object.create,uC=function(){function w(){}return function(M){if(!fi(M))return{};if(qy)return qy(M);w.prototype=M;var L=new w;return w.prototype=void 0,L}}(),dC=function(M){return typeof M.constructor!="function"||fl(M)?{}:uC(ah(M))},pC=function(M){return hi(M)&&us(M)=="[object Map]"},Lh=cs&&cs.isMap,fC=Lh?Al(Lh):pC,mC=function(M){return hi(M)&&us(M)=="[object Set]"},Vy=cs&&cs.isSet,$h=Vy?Al(Vy):mC,Hy="[object Arguments]",jh="[object Function]",ws="[object Object]",ba={};ba[Hy]=ba["[object Array]"]=ba["[object ArrayBuffer]"]=ba["[object DataView]"]=ba["[object Boolean]"]=ba["[object Date]"]=ba["[object Float32Array]"]=ba["[object Float64Array]"]=ba["[object Int8Array]"]=ba["[object Int16Array]"]=ba["[object Int32Array]"]=ba["[object Map]"]=ba["[object Number]"]=ba[ws]=ba["[object RegExp]"]=ba["[object Set]"]=ba["[object String]"]=ba["[object Symbol]"]=ba["[object Uint8Array]"]=ba["[object Uint8ClampedArray]"]=ba["[object Uint16Array]"]=ba["[object Uint32Array]"]=!0,ba["[object Error]"]=ba[jh]=ba["[object WeakMap]"]=!1;var gC=function w(M,L,$,_,re,Ie){var de,Lt=1&L,Dt=2&L,dr=4&L;if($&&(de=re?$(M,_,re,Ie):$(M)),de!==void 0)return de;if(!fi(M))return M;var gr=yi(M);if(gr){if(de=Dd(M),!Lt)return sC(M,de)}else{var vr=us(M),Cr=vr==jh||vr=="[object GeneratorFunction]";if(Lp(M))return fa(M,Lt);if(vr==ws||vr==Hy||Cr&&!re){if(de=Dt||Cr?{}:dC(M),!Lt)return Dt?Rh(M,ds(de,M)):Ly(M,aC(de,M))}else{if(!ba[vr])return re?M:{};de=lC(M,vr,Lt)}}Ie||(Ie=new Ed);var xr=Ie.get(M);if(xr)return xr;Ie.set(M,de),$h(M)?M.forEach(function(jr){de.add(w(jr,L,$,jr,M,Ie))}):fC(M)&&M.forEach(function(jr,zr){de.set(zr,w(jr,L,$,zr,M,Ie))});var Br=gr?void 0:(dr?Dt?$y:Kp:Dt?Nh:Cd)(M);return oC(Br||M,function(jr,zr){Br&&(jr=M[zr=jr]),Vp(de,zr,w(jr,L,$,zr,M,Ie))}),de},Nc,fc,mc=function(M){return gC(M,5)},hC=function(w){function M($){var _;return(_=w.call(this,"team",$)||this).myTeamMembersMap=new tc,_.service=new nC($),_.core.eventBus.on("team/onNotification",function(re){return _.notificationHandler(re)}),qa({cmdMap:vy,cmdConfig:yy}),_}Ro(M,w);var L=M.prototype;return L.mergeMyTeamMembers=function(_){var re=this;In(_).call(_,function(Ie){var de=Ie.teamId,Lt=re.myTeamMembersMap.get(de),Dt=Mr({},Lt,Ie);re.myTeamMembersMap.set(de,Dt)})},L.getTeamInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),Dt.next=3,this.core.sendCmd("getTeamInfo",{teamId:_.teamId});case 3:return Ie=Dt.sent,de=Ie.content.team,Dt.abrupt("return",xc(de));case 6:case"end":return Dt.stop()}},re,this)}))},L.getTeams=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.core.sendCmd("getTeams",{timetag:0});case 2:return re=Lt.sent,Ie=re.content.teams,Lt.abrupt("return",vh(Ie));case 5:case"end":return Lt.stop()}},_,this)}))},L.getTeamsById=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamIds:{type:"array",itemType:"string"}},_),Dt.next=3,this.core.sendCmd("getTeamsById",{teamIds:_.teamIds});case 3:return Ie=Dt.sent,de=vh(Ie.content.teams),Dt.abrupt("return",{teams:de,tids:Ie.content.tids});case 6:case"end":return Dt.stop()}},re,this)}))},L.createTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({type:{type:"enum",values:["advanced","normal"]},name:{type:"string",allowEmpty:!1},level:{type:"number",required:!1},accounts:{type:"array",itemType:"string",required:!1},ps:{type:"string",allowEmpty:!1,max:5e3,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},_),Ie=yh(_),dr.next=4,this.core.sendCmd("createTeam",{team:Ie,accounts:_.accounts||[],ps:_.ps||""});case 4:return de=dr.sent,Lt=xc(de.content.team),dr.abrupt("return",Lt);case 7:case"end":return dr.stop()}},re,this)}))},L.dismissTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),de.next=3,this.core.sendCmd("dismissTeam",{teamId:_.teamId});case 3:case"end":return de.stop()}},re,this)}))},L.leaveTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),de.next=3,this.core.sendCmd("leaveTeam",{teamId:_.teamId});case 3:case"end":return de.stop()}},re,this)}))},L.transferTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},_),de.next=3,this.core.sendCmd("transferTeam",_);case 3:case"end":return de.stop()}},re,this)}))},L.updateTeamInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},_),Ie=yh(_),Lt.next=4,this.core.sendCmd("updateTeamInfo",{team:Ie});case 4:return Lt.abrupt("return",xc(Ie));case 5:case"end":return Lt.stop()}},re,this)}))},L.getTeamMembers=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",required:!1}},_),dr.next=3,this.core.sendCmd("getTeamMembers",{teamId:_.teamId,timetag:0});case 3:if(de=dr.sent,Lt=Dp((re=de.content)===null||re===void 0?void 0:re.teamMembers),_.accounts&&_.accounts.length>0){dr.next=7;break}return dr.abrupt("return",Lt);case 7:return dr.abrupt("return",is(Lt).call(Lt,function(gr){var vr;return(vr=_.accounts)===null||vr===void 0?void 0:bc(vr).call(vr,gr.account)}));case 8:case"end":return dr.stop()}},Ie,this)}))},L.getMutedTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),Dt.next=3,this.core.sendCmd("getMutedTeamMembers",{teamId:_.teamId});case 3:return Ie=Dt.sent,de=Ie.content,Dt.abrupt("return",Dp(de.teamMembers));case 6:case"end":return Dt.stop()}},re,this)}))},L.addTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("addTeamMembers",{teamId:_.teamId,accounts:_.accounts,ps:_.ps||"",attach:_.ext||""});case 3:case"end":return de.stop()}},re,this)}))},L.removeTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},_),de.next=3,this.core.sendCmd("removeTeamMembers",{teamId:_.teamId,accounts:_.accounts});case 3:case"end":return de.stop()}},re,this)}))},L.applyTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},_),Lt.next=3,this.core.sendCmd("applyTeam",{teamId:_.teamId,ps:_.ps||""});case 3:return Ie=Lt.sent,Lt.abrupt("return",xc(Ie.content.team));case 5:case"end":return Lt.stop()}},re,this)}))},L.addTeamManagers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},_),de.next=3,this.core.sendCmd("addTeamManagers",_);case 3:case"end":return de.stop()}},re,this)}))},L.removeTeamManagers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},_),de.next=3,this.core.sendCmd("removeTeamManagers",_);case 3:case"end":return de.stop()}},re,this)}))},L.updateMyMemberInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},_),Ie=gy({teamId:_.teamId,nickInTeam:_.nickInTeam,bitConfigMask:_.bitConfigMask,ext:_.ext}),dr.next=4,this.core.sendCmd("updateMyMemberInfo",{teamMember:Ie});case 4:return de=kd(Mr({updateTime:new Date().getTime(),account:this.core.account},Ie)),this.mergeMyTeamMembers([de]),this.core.emit("updateTeamMember",de),Lt=mc(this.myTeamMembersMap.get(de.teamId)),this.core.emit("myTeamMembers",[Lt]),dr.abrupt("return",de);case 10:case"end":return dr.stop()}},re,this)}))},L.updateMemberNick=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},_),Ie=gy({teamId:_.teamId,nickInTeam:_.nickInTeam,account:_.account}),Dt.next=4,this.core.sendCmd("updateNickInTeam",{teamMember:Ie});case 4:return de=kd(Mr({updateTime:new Date().getTime()},Ie)),Dt.abrupt("return",de);case 6:case"end":return Dt.stop()}},re,this)}))},L.muteTeamMember=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},mute:{type:"boolean"}},_),de.next=3,this.core.sendCmd("muteTeamMember",{teamId:_.teamId,account:_.account,mute:_.mute?1:0});case 3:case"end":return de.stop()}},re,this)}))},L.getTeamMemberInvitorAccid=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:200}},_),de={teamId:_.teamId},_.accounts&&_.accounts.length>0&&(de.accounts=_.accounts),dr.next=5,this.core.sendCmd("getTeamMemberInvitorAccid",de);case 5:return Lt=dr.sent,dr.abrupt("return",((re=Lt.content)===null||re===void 0?void 0:re.accountsMap)||{});case 7:case"end":return dr.stop()}},Ie,this)}))},L.muteTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},_),de.next=3,this.core.sendCmd("muteTeam",{teamId:_.teamId,mute:_.mute?1:0});case 3:case"end":return de.stop()}},re,this)}))},L.passTeamApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},_),de.next=3,this.core.sendCmd("passTeamApply",_);case 3:case"end":return de.stop()}},re,this)}))},L.rejectTeamApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("rejectTeamApply",{teamId:_.teamId,from:_.from,ps:_.ps||""});case 3:case"end":return de.stop()}},re,this)}))},L.acceptTeamInvite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},_),de.next=3,this.core.sendCmd("acceptTeamInvite",_);case 3:case"end":return de.stop()}},re,this)}))},L.rejectTeamInvite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("rejectTeamInvite",{teamId:_.teamId,from:_.from,ps:_.ps||""});case 3:case"end":return de.stop()}},re,this)}))},L.notifyTeamMsgReceiptsHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.teamMsgReceipts;Ie&&Ie.length>0&&(this.core.emit("teamMsgReceipts",Ie),this.core.emit("msgReceipts",Ie))},L.syncTeamsHandler=function(_){var re=_.content;this.core.eventBus.emit("sync/updateTimetag",{teams:_o(re.timetag)});var Ie=re==null?void 0:re.teams;if(Ie&&Ie.length){var de=vh(Ie);this.core.emit("teams",de)}},L.syncCreateTeamHandler=function(_){var re=_.content,Ie=xc(re==null?void 0:re.team),de=hy(Ie,Ie.owner,"owner");this.core.emit("createTeam",Ie,de)},L.syncUpdateTeamMemberHandler=function(_){var re=_.content,Ie=kd(re==null?void 0:re.teamMember);Ie.updateTime||(Ie.updateTime=new Date().getTime()),this.mergeMyTeamMembers([Ie]),this.core.emit("updateTeamMember",Ie);var de=mc(this.myTeamMembersMap.get(Ie.teamId));this.core.emit("myTeamMembers",[de])},L.syncMyTeamMembersHandler=function(_){var re,Ie=_.content;this.core.eventBus.emit("sync/updateTimetag",{myTeamMembers:_o(Ie.timetag)});var de=Ie==null?void 0:To(re=Ie.teamMembers).call(re,function(Lt){return kd(Lt)});this.mergeMyTeamMembers(de),this.core.emit("myTeamMembers",mc(de))},L.notificationHandler=function(_){var re=_.attach,Ie=_.scene,de=_.from,Lt=_.to,Dt=_.time,dr=_.idServer,gr=_.idClient,vr=re.team,Cr=re.account,xr=re.accounts,Br=re.type;if(Ie==="team")switch(this.core.options.debugLevel==="debug"?this.logger.debug("team::recvNotification",dr,gr,re):this.logger.log("team::recvNotification",dr,gr,Lt,Br,Cr,xr),Br){case"updateTeam":vr.updateTime=Dt,this.core.emit("updateTeam",vr);break;case"addTeamMembers":this.service.notifyAddTeamMembers(vr,xr);break;case"acceptTeamInvite":this.service.notifyAddTeamMembers(vr,[de]);break;case"passTeamApply":this.service.notifyAddTeamMembers(vr,[Cr]);break;case"addTeamManagers":this.service.notifyUpdateTeamManagers(Lt,xr,!0,Dt);break;case"removeTeamManagers":this.service.notifyUpdateTeamManagers(Lt,xr,!1,Dt);break;case"removeTeamMembers":this.service.notifyRemoveTeamMembers(vr,xr);break;case"leaveTeam":this.service.notifyRemoveTeamMembers(vr,[de]);break;case"dismissTeam":this.core.emit("dismissTeam",{teamId:Lt});break;case"transferTeam":this.service.notifyTransferTeam(vr,de,Cr);break;case"updateTeamMemberMute":this.service.notifyUpdateTeamMembersMute(vr,[Cr],re.mute)}},M}(os);(function(w){w[w.none=0]="none",w[w.pass=1]="pass",w[w.decline=2]="decline",w[w.read=3]="read",w[w.deleted=4]="deleted",w[w.invalid=5]="invalid"})(Nc||(Nc={})),function(w){w[w.default=0]="default",w[w.leave=1]="leave",w[w.roam=2]="roam"}(fc||(fc={}));var Ud={applyTeam:0,rejectTeamApply:1,teamInvite:2,rejectTeamInvite:3,friendRequest:5,deleteFriend:6,recallMsgP2p:7,recallMsgTeam:8,recallMsgSuperTeam:12,deleteMsgP2pOneWay:13,deleteMsgTeamOneWay:14,applySuperTeam:15,rejectSuperTeamApply:16,superTeamInvite:17,rejectSuperTeamInvite:18,customP2p:100,customTeam:101,customSuperTeam:103},qd={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},tf={setting:{needSaveOffline:{type:"boolean"},isRoutable:{type:"boolean"},envConfig:{type:"string"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"boolean"}},pushInfo:Sh,recallMessageInfo:{idClient:{type:"string",rawKey:"deletedIdClient"},idServer:{type:"string",rawKey:"deletedIdServer"},createTime:{type:"number",rawKey:"deletedMsgTime"},fromNick:{type:"string",rawKey:"deletedMsgFromNick"},opeAccount:{type:"string"}}};function Vd(w,M,L){var $=+w.type,_=Ai(Ud,$);L=L||fc.default;var re=Mr(Mr({},Xs(tf,w)),{type:_,time:+w.time,to:w.to,from:w.from,idServer:w.idServer,state:Nc[Nc.none],feature:fc[L]});if(typeof re.attach=="string")try{re.attach=JSON.parse(re.attach)}catch(Ie){M.error("formatSystemMessage: "+re.idServer+" parse attach error",Ie&&Ie.message)}return $===5&&re.attach?(re.attach.type=qd[+re.attach.vt],re.attach.type==="passFriendApply"?re.state=Nc[Nc.pass]:re.attach.type==="rejectFriendApply"&&(re.state=Nc[Nc.decline])):$<=3&&re.attach&&(re.attach=function(de){var Lt=de.attach,Dt=de.tinfo,dr=Es(de,["attach","tinfo"]);return dr.ext=Lt,Dt!==void 0&&(dr.team=xc(Ii(de.tinfo,as.team))),dr}(re.attach)),re}function vC(w){var M=Mr({},w);return Mr(Mr({},Td(tf,M)),{type:Ud[M.type],to:M.to,attach:M.attach})}var yC={"4_6":"syncOfflineSysMsgs","4_18":"syncOfflineSysMsgs","4_19":"syncRecallMsgOfflineAndRoaming","4_101":"syncOfflineSysMsgs","7_3":"onSysMsg","7_7":"sendCustomSysMsg","7_14":"onRecallMsg","21_18":"onRecallMsg","21_117":"onRecallMsg","7_15":"syncRecallMsgOfflineAndRoaming","21_19":"onSysMsg","21_16":"sendSuperTeamCustomSysMsg","101_3":"onSysMsg","101_7":"sendFilterCustomSysMsg"},Hd={sysMsg:Mr({time:0,type:1,to:2,from:3,content:4,attach:5,idServer:6,needSaveOffline:7,deletedIdClient:10,deletedIdServer:11,needcAntiSpam:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,envConfig:21,callbackExt:22,isRoutable:105},Cy)},Sl=rs(Hd),bC={onSysMsg:{service:"systemMessage",sid:7,cid:3,response:[{type:"Property",name:"sysMsg",reflectMapper:Sl.sysMsg}]},sendCustomSysMsg:{service:"systemMessage",sid:7,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},sendSuperTeamCustomSysMsg:{service:"systemMessage",sid:21,cid:16,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},sendFilterCustomSysMsg:{service:"systemMessage",sid:101,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Hd.sysMsg}]},batchMarkRead:{service:"systemMessage",sid:4,cid:5,isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},onRecallMsg:{sid:7,cid:14,service:"systemMessage",response:[{type:"Property",name:"sysMsg",reflectMapper:Sl.sysMsg}]},syncRecallMsgOfflineAndRoaming:{sid:7,cid:15,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Sl.sysMsg},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},syncOfflineSysMsgs:{sid:4,cid:9,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Sl.sysMsg}]}},TC=function(w){function M($){var _;return(_=w.call(this,"systemMessage",$)||this).sysMsgUnread={total:0,friend:0,msg:0,team:0,superTeam:0},_.core.eventBus.on("logined",function(){_.initEventListeners()}),qa({cmdMap:yC,cmdConfig:bC}),_}Ro(M,w);var L=M.prototype;return L.initEventListeners=function(){var _=this;this.core.eventBus.on("systemMessage/passFriendApply",function(re){_.core.emit("updateSystemMessages",[{idServer:re.idServer,from:re.account,state:"pass",type:"friendRequest"}])}),this.core.eventBus.on("systemMessage/rejectFriendApply",function(re){_.core.emit("updateSystemMessages",[{idServer:re.idServer,from:re.account,state:"decline",type:"friendRequest"}])})},L.doMarkSysMsgAck=function(_){var re=[],Ie=[],de=["applySuperTeam","rejectSuperTeamApply","superTeamInvite","rejectSuperTeamInvite","customSuperTeam"];In(_).call(_,function(Lt){Lt.idServer&&(bc(de).call(de,Lt.type)?Ie.push(Lt.idServer):re.push(Lt.idServer))}),re.length>0&&this.core.sendCmd("batchMarkRead",{sid:"7",cid:"3",ids:re}),Ie.length>0&&this.core.sendCmd("batchMarkRead",{sid:"21",cid:"19",ids:Ie})},L.sendCustomSysMsg=function(_){var re=this;En({to:{type:"string",allowEmpty:!1},type:{type:"enum",values:["customP2p","customTeam","customSuperTeam"]},attach:{type:"string",allowEmpty:!1},setting:{type:"object",rules:{needSaveOffline:{type:"boolean",required:!1},env:{type:"string",allowEmpty:!1,required:!1}},required:!1},pushInfo:{type:"object",required:!1,rules:Sh}},_);var Ie=_.type==="customSuperTeam"?"sendSuperTeamCustomSysMsg":"sendCustomSysMsg";return this.core.sendCmd(Ie,{sysMsg:vC(_)}).then(function(){re.logger.log("sendCustomSysMsg success")}).catch(function(de){throw re.logger.error("sendCustomSysMsg failed",de.message),de})},L.onSysMsgHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.sysMsg;if(Ie){var de=typeof As(_,"raw.r[0]")=="number"?""+_.raw.r[0]:void 0;Ie.idServer=Ie.idServer||de;var Lt=Vd(Ie,this.logger,fc.default);this.core.emit("sysMsg",Lt),this.doMarkSysMsgAck([Lt])}else this.logger.warn("onSysMsg no content.sysMsg")},L.syncOfflineSysMsgsHandler=function(_){var re,Ie=this;if(_.content.sysMsgs&&_.content.sysMsgs.length>0){var de=To(re=_.content.sysMsgs).call(re,function(Lt){return Vd(Lt,Ie.logger,fc.leave)});this.core.emit("syncSysMsgs",de),this.doMarkSysMsgAck(de)}},L.onRecallMsgHandler=function(_){var re,Ie=(re=_.content)===null||re===void 0?void 0:re.sysMsg;if(Ie){var de=typeof As(_,"raw.r[0]")=="number"?""+_.raw.r[0]:void 0;Ie.idServer=Ie.idServer||de;var Lt=wd([Ie],function(gr){return gr===Ud.recallMsgP2p?"p2p":gr===Ud.recallMsgTeam?"team":gr===Ud.recallMsgSuperTeam?"superTeam":""}(+Ie.type));this.core.eventBus.emit("session/updateForDeletedMsg",Lt);var Dt=Vd(Ie,this.logger,fc.default);this.core.emit("sysMsg",Dt),this.doMarkSysMsgAck([Dt])}else this.logger.warn("onSysMsg no content.sysMsg")},L.syncRecallMsgOfflineAndRoamingHandler=function(_){var re=this,Ie=_.content,de=Ie.timetag,Lt=Ie.type,Dt=Ie.sysMsgs,dr=_o(Lt),gr=dr===1?fc.leave:fc.roam,vr=To(Dt).call(Dt,function(Cr){return Vd(Cr,re.logger,gr)});dr===1&&this.doMarkSysMsgAck(vr),this.core.eventBus.emit("sync/updateTimetag",{recallMsg:de}),this.core.emit("syncSysMsgs",vr)},M}(os);function zd(w){var M=["bitsExtension","createTime","updateTime","passRelationShip","relationShip","source"],L=Mr({},w);return In(M).call(M,function($){L[$]!==void 0&&(L[$]=_o(L[$]))}),L.relationShip!==void 0&&(L.valid=L.relationShip===1),L}var SC={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},Dh={"12_4":"getFriends","12_1":"friendReuqest","12_2":"deleteFriend","12_3":"updateFriend","12_5":"syncFriends","12_6":"syncFriendUsers","12_101":"syncFriendRequest","12_102":"syncDeleteFriend","12_103":"syncUpdateFriend"},rf={updateFriendTag:{account:4,alias:8,ext:10},delFriendParams:{delAlias:1},friendTag:{account:4,relationShip:5,passRelationShip:6,source:7,alias:8,bitsExtension:9,ext:10,createTime:11,updateTime:12,serverex:13},userTag:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13}},nf=rs(rf),zy={getFriends:{sid:12,cid:4,service:"friend",params:[{type:"Long",name:"timetag"}],response:[{type:"PropertyArray",name:"friends",reflectMapper:nf.friendTag},{type:"Number",name:"timetag"}]},friendReuqest:{sid:12,cid:1,service:"friend",params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:12,cid:2,service:"friend",params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams",reflectMapper:rf.delFriendParams}]},updateFriend:{sid:12,cid:3,service:"friend",params:[{type:"Property",name:"updateFriendTag",reflectMapper:rf.updateFriendTag}]},syncFriends:{sid:12,cid:5,service:"friend",response:[{type:"PropertyArray",name:"friends",entity:"friendTag",reflectMapper:nf.friendTag},{type:"Number",name:"timetag"}]},syncFriendUsers:{sid:12,cid:6,service:"friend",response:[{type:"PropertyArray",name:"users",entity:"userTag",reflectMapper:nf.userTag},{type:"Number",name:"timetag"}]},syncFriendRequest:{sid:12,cid:101,service:"friend",params:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}],response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},syncDeleteFriend:{sid:12,cid:102,service:"friend",response:[{type:"String",name:"account"}]},syncUpdateFriend:{sid:12,cid:103,service:"friend",response:[{type:"Property",name:"friend",reflectMapper:nf.friendTag}]}},CC=function(w){function M($){var _;return _=w.call(this,"friend",$)||this,qa({cmdMap:Dh,cmdConfig:zy}),_}Ro(M,w);var L=M.prototype;return L.getFriends=function(){var _;return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,this.core.sendCmd("getFriends",{timetag:0});case 2:return Ie=Dt.sent,de=((_=Ie.content)===null||_===void 0?void 0:_.friends)||[],de=To(de).call(de,function(dr){return zd(dr)}),Dt.abrupt("return",de);case 6:case"end":return Dt.stop()}},re,this)}))},L.addFriend=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({account:{type:"string",allowEmpty:!1},ps:{type:"string",allowEmpty:!1,required:!1}},_),Lt.next=3,this.core.sendCmd("friendReuqest",{account:_.account,type:1,ps:_.ps||""});case 3:return Ie=new Date().getTime(),Lt.abrupt("return",{account:_.account,createTime:Ie,updateTime:Ie,valid:!0,source:0,passRelationShip:1,relationShip:1,bitsExtension:0});case 5:case"end":return Lt.stop()}},re,this)}))},L.applyFriend=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({account:{type:"string",allowEmpty:!1}},_),de.next=3,this.core.sendCmd("friendReuqest",{account:_.account,type:2,ps:_.ps||""});case 3:case"end":return de.stop()}},re,this)}))},L.passFriendApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie=this;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({account:{type:"string",allowEmpty:!1}},_),Lt.next=3,this.core.sendCmd("friendReuqest",{account:_.account,type:3,ps:_.ps||""}).then(function(Dt){return Ie.core.eventBus.emit("systemMessage/passFriendApply",_),Dt});case 3:case"end":return Lt.stop()}},re,this)}))},L.rejectFriendApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie=this;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({account:{type:"string",allowEmpty:!1}},_),Lt.next=3,this.core.sendCmd("friendReuqest",{account:_.account,type:4,ps:_.ps||""}).then(function(Dt){return Ie.core.eventBus.emit("systemMessage/rejectFriendApply",_),Dt});case 3:case"end":return Lt.stop()}},re,this)}))},L.deleteFriend=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({account:{type:"string",allowEmpty:!1},delAlias:{type:"boolean"}},_),de.next=3,this.core.sendCmd("deleteFriend",{account:_.account,delFriendParams:{delAlias:_.delAlias===!0?1:0}});case 3:case"end":return de.stop()}},re,this)}))},L.updateFriend=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({account:{type:"string",allowEmpty:!1},alias:{type:"string"},ext:{type:"string",required:!1}},_),de.next=3,this.core.sendCmd("updateFriend",{updateFriendTag:_});case 3:case"end":return de.stop()}},re,this)}))},L.syncFriendRequestHandler=function(_){var re=function(de){var Lt=Mr({},de);try{Lt.ps=Lt.ps&&JSON.parse(Lt.ps)}catch{}if(Lt.type=SC[Lt.type],Lt.type==="addFriend"||Lt.type==="passFriendApply"){var Dt=new Date().getTime();Lt.friend={account:de.account,alias:"",createTime:Dt,ext:"",updateTime:Dt,valid:!0}}return Lt}(_.content);this.core.emit("syncFriend",re)},L.syncDeleteFriendHandler=function(_){var re=_.content.account;this.logger.log("friend::emit syncFriendAction: deleteFriend "+re),this.core.emit("syncFriend",{type:"deleteFriend",account:re})},L.syncUpdateFriendHandler=function(_){var re=zd(_.content.friend);this.logger.log("friend::emit syncFriendAction: updateFriend, ",re==null?void 0:re.account),this.core.emit("syncFriend",{type:"updateFriend",friend:re})},L.syncFriendsHandler=function(_){var re=_.content;this.core.eventBus.emit("sync/updateTimetag",{friends:_o(re.timetag)});var Ie=re==null?void 0:re.friends;if(Ie&&Ie.length){var de=To(Ie).call(Ie,function(Lt){return zd(Lt)});this.core.emit("friends",de)}},L.syncFriendUsersHandler=function(_){var re=_.content;this.core.eventBus.emit("sync/updateTimetag",{friendUsers:_o(re.timetag)});var Ie=re==null?void 0:re.users;if(Ie&&Ie.length){var de=To(Ie).call(Ie,function(Lt){return zl(Lt)});this.core.emit("users",de)}},M}(os),Uh={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"};function Ky(w){return w&&w.length>0?To(w).call(w,function(M){return function($){var _=Mr({},$),re=["subscribeTime","time"];return In(re).call(re,function(Ie){_[Ie]&&(_[Ie]=_o(_[Ie]))}),_}(M)}):[]}function Rc(w){if(!w)return w;var M=w.serverExt,L=Es(w,["serverExt"]),$=["time","type","value"];if(In($).call($,function(_){L[_]&&(L[_]=_o(L[_]))}),L.clientType&&(L.clientType=Uh[L.clientType]||""),M)try{L.ext=JSON.parse(M),typeof L.ext[0]=="string"&&(L.ext=L.ext[0])}catch{}return L}var Wy={"14_1":"publishEvent","14_2":"pushEvent","14_3":"subscribeEvent","14_4":"unSubscribeEventsByAccounts","14_5":"unSubscribeEventsByType","14_6":"querySubscribeEventsByAccounts","14_7":"querySubscribeEventsByType","14_9":"pushEvents"},Cl={msgEvent:{type:1,value:2,idClient:3,ext:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverExt:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105}},tu=rs(Cl),MC={publishEvent:{sid:14,cid:1,service:"event",params:[{type:"Property",name:"msgEvent",reflectMapper:Cl.msgEvent}],response:[{type:"Property",name:"msgEvent",reflectMapper:tu.msgEvent}]},pushEvent:{sid:14,cid:2,service:"event",response:[{type:"Property",name:"msgEvent",reflectMapper:tu.msgEvent}]},subscribeEvent:{sid:14,cid:3,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Cl.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:14,cid:4,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Cl.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:14,cid:5,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Cl.msgEventSubscribe}]},querySubscribeEventsByAccounts:{sid:14,cid:6,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Cl.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:tu.msgEventSubscribe}]},querySubscribeEventsByType:{sid:14,cid:7,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Cl.msgEventSubscribe}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:tu.msgEventSubscribe}]},pushEvents:{sid:14,cid:9,service:"event",response:[{type:"PropertyArray",name:"msgEvents",reflectMapper:tu.msgEvent}]}},S=function(w){function M($){var _;return _=w.call(this,"event",$)||this,qa({cmdMap:Wy,cmdConfig:MC}),_}Ro(M,w);var L=M.prototype;return L.publishEvent=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({type:{type:"number"},value:{type:"number"},ext:{type:"string",required:!1},validTime:{type:"number",min:60,max:2592e3,required:!1},broadcastType:{type:"number",required:!1},sync:{type:"boolean",required:!1}},_),de=Mr(Mr({validTime:604800},_),{idClient:_p(),sync:_.sync===!0?1:0}),gr.next=4,this.core.sendCmd("publishEvent",{msgEvent:de});case 4:return Lt=gr.sent,Dt=((re=Lt.content)===null||re===void 0?void 0:re.msgEvent)||{},gr.abrupt("return",Rc(Dt));case 7:case"end":return gr.stop()}},Ie,this)}))},L.subscribeEvent=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100},subscribeTime:{type:"number",min:60,max:2592e3,required:!1}},_),de=Mr(Mr({subscribeTime:2592e3},_),{sync:_.sync===!0?1:0}),gr.next=4,this.core.sendCmd("subscribeEvent",{msgEventSubscribe:de,accounts:_.accounts});case 4:return Lt=gr.sent,Dt=((re=Lt.content)===null||re===void 0?void 0:re.accounts)||[],gr.abrupt("return",{failedAccounts:Dt});case 7:case"end":return gr.stop()}},Ie,this)}))},L.unSubscribeEvents=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},_),de={type:_.type},!(_.accounts&&_.accounts.length>0)){gr.next=9;break}return gr.next=5,this.core.sendCmd("unSubscribeEventsByAccounts",{msgEventSubscribe:de,accounts:_.accounts});case 5:Dt=gr.sent,Lt=((re=Dt.content)===null||re===void 0?void 0:re.accounts)||[],gr.next=12;break;case 9:return gr.next=11,this.core.sendCmd("unSubscribeEventsByType",{msgEventSubscribe:de});case 11:Lt=[];case 12:return gr.abrupt("return",{failedAccounts:Lt});case 13:case"end":return gr.stop()}},Ie,this)}))},L.querySubscribeEvents=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(En({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},_),!(_.accounts&&_.accounts.length>0)){Dt.next=7;break}return Dt.next=4,this.core.sendCmd("querySubscribeEventsByAccounts",{msgEventSubscribe:{type:_.type},accounts:_.accounts});case 4:de=Dt.sent,Dt.next=10;break;case 7:return Dt.next=9,this.core.sendCmd("querySubscribeEventsByType",{msgEventSubscribe:{type:_.type}});case 9:de=Dt.sent;case 10:return Dt.abrupt("return",Ky((re=de.content)===null||re===void 0?void 0:re.msgEventSubscribes));case 11:case"end":return Dt.stop()}},Ie,this)}))},L.pushEventHandler=function(_){var re,Ie=((re=_.content)===null||re===void 0?void 0:re.msgEvent)||{};this.core.emit("pushEvents",[Rc(Ie)])},L.pushEventsHandler=function(_){var re,Ie=((re=_.content)===null||re===void 0?void 0:re.msgEvents)||{};this.core.emit("pushEvents",function(Lt){return gi(Lt)&&Lt.length>0?To(Lt).call(Lt,function(Dt){return Rc(Dt)}):[]}(Ie))},M}(os);function x(w){var M={scene:mh[w.scene],from:w.threadMsgFromAccount,to:w.threadMsgToAccount,time:w.threadMsgTime,idServer:w.threadMsgIdServer},L={limit:w.limit<100?w.limit:100,beginTime:typeof w.beginTime=="number"?w.beginTime:0,reverse:kl(w)===!0?1:0};return w.lastMsgId&&(L.lastMsgId=w.lastMsgId),{msg:M,threadMsgReq:L}}var D,F={"23_1":"getThreadMsgs","23_2":"getMsgsByIdServer"},O={msg:La,threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2}},oe=rs(O),_e={getThreadMsgs:{sid:23,cid:1,service:"msgExtend",params:[{type:"Property",name:"msg",reflectMapper:O.msg},{type:"Property",name:"threadMsgReq",reflectMapper:O.threadMsgReq}],response:[{type:"Property",name:"threadMsg",reflectMapper:oe.msg},{type:"Property",name:"threadMsgsMeta",reflectMapper:oe.threadMsgsMeta},{type:"PropertyArray",name:"msgs",reflectMapper:oe.msg}]},getMsgsByIdServer:{sid:23,cid:2,service:"msgExtend",params:[{type:"PropertyArray",name:"reqMsgs",reflectMapper:O.msg}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:oe.msg}]}},z=function(w){function M($){var _;return _=w.call(this,"msgExtend",$)||this,qa({cmdMap:F,cmdConfig:_e}),_}Ro(M,w);var L=M.prototype;return L.getThreadMsgs=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr,gr,vr,Cr;return sr.wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return En({scene:{type:"enum",values:vi(Da)},threadMsgFromAccount:{type:"string",allowEmpty:!1},threadMsgIdServer:{type:"string",allowEmpty:!1},threadMsgTime:{type:"number"},threadMsgToAccount:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},lastMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1}},_),Br.next=3,this.core.sendCmd("getThreadMsgs",x(_));case 3:return de=Br.sent,Lt=de.content,Dt=Lt.msgs,dr=Lt.threadMsg,gr=de.content.threadMsgsMeta,vr=bi(dr,this.core.account),Cr=(re=this.core.session)===null||re===void 0?void 0:re.getSessionWithUncomplete({id:vr}),Dt=_d(Dt,Cr?{account:this.core.account,sessionAck:Cr.ack,msgReceiptTime:Cr.msgReceiptTime}:{account:this.core.account}),dr=Ri(dr,Cr?{account:this.core.account,sessionAck:Cr.ack,msgReceiptTime:Cr.msgReceiptTime}:{account:this.core.account}),Br.abrupt("return",{msgs:Dt,threadMsg:dr,total:_o(gr.total),timetag:_o(gr.lastMsgTime)});case 11:case"end":return Br.stop()}},Ie,this)}))},L.getMsgsByIdServer=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt,Dt,dr=this;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({reqMsgs:{type:"array",rules:{scene:{type:"enum",values:vi(Da)},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},time:{type:"number"}},min:1,max:100}},_),vr.next=3,this.core.sendCmd("getMsgsByIdServer",{reqMsgs:To(Ie=_.reqMsgs).call(Ie,function(Cr){return Mr(Mr({},Cr),{scene:Ai(Da,Cr.scene)})})});case 3:return Lt=vr.sent,Dt=To(de=Lt.content.msgs).call(de,function(Cr){var xr,Br=bi(Cr,dr.core.account),jr=(xr=dr.core.session)===null||xr===void 0?void 0:xr.getSessionWithUncomplete({id:Br});return Ri(Cr,jr?{account:dr.core.account,sessionAck:jr.ack,msgReceiptTime:jr.msgReceiptTime}:{account:dr.core.account})}),vr.abrupt("return",Dt);case 6:case"end":return vr.stop()}},re,this)}))},M}(os);(function(w){w[w.ASC=1]="ASC",w[w.DESC=2]="DESC"})(D||(D={}));var qe,jt={"7_6":"getHistoryMsgs","7_9":"deleteRoamingMsgs","4_24":"syncClearServerHistoryMsgs","7_18":"clearHistoryMsgsFromServer","7_118":"multiSyncClearServerHistoryMsgs","7_26":"nimFtsCloudMsgLogsAggWithSession","7_27":"nimFtsCloudMsgLogs"},lr={msg:La,clearHistoryMsgsFromServerReqTag:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,ext:7},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},ftsReqTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msglogsLimit:5,orderRule:6,p2pSessionList:7,teamSessionList:8,senderList:9,msgTypeList:10,msgSubTypeList:11}},fr=rs(lr),Sr={deleteRoamingMsgs:{sid:7,cid:9,service:"msgLog",params:[{type:"StrArray",name:"ids"}]},getHistoryMsgs:{sid:7,cid:6,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:fr.msg}],service:"msgLog"},clearHistoryMsgsFromServer:{sid:7,cid:18,params:[{type:"Property",name:"clearHistoryMsgsFromServerReqTag",reflectMapper:lr.clearHistoryMsgsFromServerReqTag}],response:[{type:"Long",name:"timetag"}],service:"msgLog"},multiSyncClearServerHistoryMsgs:{sid:7,cid:118,response:[{type:"Property",name:"data",reflectMapper:fr.clearMsgsParamsWithSync}],service:"msgLog"},syncClearServerHistoryMsgs:{sid:4,cid:24,service:"msgLog",response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.clearMsgsParamsWithSync}]},nimFtsCloudMsgLogsAggWithSession:{sid:7,cid:26,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:lr.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.msg}]},nimFtsCloudMsgLogs:{sid:7,cid:27,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:lr.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:fr.msg}]}};(function(w){w[w.p2p=1]="p2p",w[w.team=2]="team"})(qe||(qe={}));var br={type:{type:"enum",values:qe},isDeleteRoam:{type:"boolean"},isSyncSelf:{type:"boolean"},time:{type:"number"}};function Er(w){var M=Xs(br,w);return{sessionId:M.type==="p2p"?"p2p-"+M.otherAccid:"team-"+M.toTid,time:M.time}}var Dr={orderRule:{type:"enum",values:D}};function $r(w){var M,L=Xs(Dr,w);gi(L.msgTypeList)&&(L.msgTypeList=To(M=L.msgTypeList).call(M,function(_){return sc[_]}).join(","));var $=["p2pSessionList","teamSessionList","senderList","msgSubTypeList"];return In($).call($,function(_){gi(L[_])&&(L[_]=L[_].join(","))}),L}var vn=function(w){function M($){var _;return _=w.call(this,"msgLog",$)||this,qa({cmdMap:jt,cmdConfig:Sr}),_}Ro(M,w);var L=M.prototype;return L.deleteRoamingMsgs=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:En({ids:{type:"array",itemType:"string"}},_),Ie=[],Dt.prev=2,Ie=To(de=_.ids).call(de,function(dr){var gr=Lo(dr);return gr.scene+"|"+gr.accid}),Dt.next=10;break;case 6:throw Dt.prev=6,Dt.t0=Dt.catch(2),this.logger.error("Failed to delete roaming msgs with "+_.ids,Dt.t0),new Error("Failed to create session with "+_.ids);case 10:return Dt.next=12,this.core.sendCmd("deleteRoamingMsgs",{ids:Ie});case 12:case"end":return Dt.stop()}},re,this,[[2,6]])}))},L.getHistoryMsgs=function(_){var re,Ie;return Sn(this,void 0,void 0,sr.mark(function de(){var Lt,Dt,dr,gr,vr,Cr,xr;return sr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return!((re=this.core.sync)===null||re===void 0)&&re.getSyncDoneFlag()||this.logger.warn("Please call getHistoryMsgs after syncdone event"),En({scene:{type:"enum",values:Vo(mh)},to:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1},lastMsgId:{type:"string",required:!1,allowEmpty:!1},asc:{type:"boolean",required:!1},msgTypes:{type:"array",itemType:"string",required:!1}},_),Dt=_.scene==="p2p"?"getHistoryMsgs":_.scene==="team"?"getHistoryTeamMsgs":"getHistorySuperTeamMsgs",jr.next=5,this.core.sendCmd(Dt,Mr(Mr({beginTime:0,endTime:0,lastMsgId:0,limit:100,reverse:!1},_),{msgTypes:_.msgTypes?To(Lt=_.msgTypes).call(Lt,function(zr){return fh[zr]}):[]}));case 5:if(dr=jr.sent,(gr=dr.content).msgs&&gr.msgs.length>0){jr.next=9;break}return jr.abrupt("return",[]);case 9:if(vr=bi(gr.msgs[0],this.core.account),Cr=(Ie=this.core.session)===null||Ie===void 0?void 0:Ie.getSessionWithUncomplete({id:vr}),xr=_d(gr.msgs,Cr?{account:this.core.account,sessionAck:Cr.ack,msgReceiptTime:Cr.msgReceiptTime}:{account:this.core.account}),_.asc!==!0){jr.next=14;break}return jr.abrupt("return",wc(xr).call(xr,function(zr,Hr){return zr.time-Hr.time}));case 14:return jr.abrupt("return",xr);case 15:case"end":return jr.stop()}},de,this)}))},L.clearHistoryMsgsFromServer=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({scene:{type:"enum",values:["p2p","team"]},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},isSyncSelf:{type:"boolean",required:!1}},_),(Ie=Mr(Mr({isDeleteRoam:1},_),{type:_.scene==="team"?2:1,isSyncSelf:_.isSyncSelf===!0?1:0}))[Ie.type===2?"toTid":"otherAccid"]=_.to,dr.next=5,this.core.sendCmd("clearHistoryMsgsFromServer",{clearHistoryMsgsFromServerReqTag:Ie});case 5:return de=dr.sent,Lt=de.content,this.core.eventBus.emit("session/updateForClearMsg",[{sessionId:_.scene+"-"+_.to}],!0),dr.abrupt("return",Lt);case 9:case"end":return dr.stop()}},re,this)}))},L.multiSyncClearServerHistoryMsgsHandler=function(_){var re=Er(_.content.data);this.core.eventBus.emit("session/updateForClearMsg",[re],!0),this.core.emit("clearServerHistoryMsgs",[re])},L.ftsCloudMsgLogs=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.abrupt("return",this.baseFtsCloudMsgLogs(_,"nimFtsCloudMsgLogs"));case 1:case"end":return de.stop()}},re,this)}))},L.ftsCloudMsgLogsAggWithSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.abrupt("return",this.baseFtsCloudMsgLogs(_,"nimFtsCloudMsgLogsAggWithSession"));case 1:case"end":return de.stop()}},re,this)}))},L.baseFtsCloudMsgLogs=function(_,re){return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr=this;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(En({keyword:{type:"string",allowEmpty:!1},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",required:!1},msglogsLimit:{type:"number",required:!1},orderRule:{type:"enum",values:vi(D),required:!1},p2pSessionList:{type:"array",itemType:"string",required:!1},teamSessionList:{type:"array",itemType:"string",required:!1},senderList:{type:"array",itemType:"string",required:!1},msgTypeList:{type:"array",itemType:"enum",values:vi(sc),required:!1},msgSubTypeList:{type:"array",itemType:"number",required:!1}},_),!(_.fromTime&&_.toTime&&_.toTime<_.fromTime)){vr.next=3;break}throw new yo("Request parameter error: toTime should be greater than fromTime",_,"");case 3:return Lt=$r(_),vr.next=6,this.core.sendCmd(re,{tag:Lt});case 6:return Dt=vr.sent,vr.abrupt("return",To(de=Dt.content.datas).call(de,function(Cr){var xr,Br=bi(Cr,dr.core.account),jr=(xr=dr.core.session)===null||xr===void 0?void 0:xr.getSessionWithUncomplete({id:Br});return Ri(Cr,jr?{account:dr.core.account,sessionAck:jr.ack,msgReceiptTime:jr.msgReceiptTime}:{account:dr.core.account})}));case 8:case"end":return vr.stop()}},Ie,this)}))},L.syncClearServerHistoryMsgsHandler=function(_){var re=function(de){return gi(de)&&de.length>0?To(de).call(de,function(Lt){return Er(Lt)}):[]}(_.content.datas);this.core.emit("clearServerHistoryMsgs",re)},M}(os),Xr={"22_1":"requestProxy","22_2":"onRequestProxy"},wn={requestProxyTag:{zone:1,path:2,method:3,header:4,body:5},requestProxyMsgTag:{from:1,body:2,time:3}},hn=rs(wn),Gn={requestProxy:{sid:22,cid:1,service:"passThrough",params:[{type:"Property",name:"requestProxyTag",reflectMapper:wn.requestProxyTag}],response:[{type:"Property",name:"requestProxyTag",reflectMapper:hn.requestProxyTag}]},onRequestProxy:{sid:22,cid:2,service:"passThrough",response:[{type:"Property",name:"proxyMsg",reflectMapper:hn.requestProxyMsgTag}]}},Dn=function(w){function M($){var _;return(_=w.call(this,"passThrough",$)||this).core=$,qa({cmdMap:Xr,cmdConfig:Gn}),_}Ro(M,w);var L=M.prototype;return L.request=function(_){return En({path:{type:"string",allowEmpty:!1}},_),this.core.sendCmd("requestProxy",{requestProxyTag:_}).then(function(re){return re.content.proxyTag})},L.onRequestProxyHandler=function(_){var re=_.content.proxyMsg;re&&re.time&&(re.time=+re.time),this.core.emit("proxyMsg",re)},M}(os),jo=bs.some,jn=Ds("some");Vr({target:"Array",proto:!0,forced:!jn},{some:function(M){return jo(this,M,arguments.length>1?arguments[1]:void 0)}});var wr=Uo("Array").some,xn=Array.prototype,Nn=function(w){var M=w.some;return w===xn||tr(xn,w)&&M===xn.some?wr:M},Cn,Zr,On=function(M,L){if(M==null)return{};var $=Og($y(M),function(_){return[_]});return L=Xl(L),wy(M,$,function(_,re){return L(_,re[0])})},Un={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},eo={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},ro=rs(eo),Do={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:ro.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:eo.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:ro.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:eo.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:ro.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:ro.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:ro.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:eo.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:ro.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:eo.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:ro.mixStoreAuthTokenResTag}]}};(function(w){w[w.nos=1]="nos",w[w.s3=2]="s3"})(Cn||(Cn={})),function(w){w[w.dontNeed=-1]="dontNeed",w[w.time=2]="time",w[w.urls=3]="urls"}(Zr||(Zr={}));var go,Zo,So={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},Io={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},ea={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function Ci(w){return w===void 0&&(w="file"),Wo(Io[w]||{}).replace(/"/gi,'\\"')}(function(w){w[w.nos=1]="nos",w[w.s3=2]="s3"})(go||(go={})),function(w){w[w.dontNeed=-1]="dontNeed",w[w.time=2]="time",w[w.urls=3]="urls"}(Zo||(Zo={}));var Eo=function(){function w(L,$){$===void 0&&($={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=go.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=L.logger,this.core=L,qa({cmdMap:Un,cmdConfig:Do}),this.setOptions($)}var M=w.prototype;return M.setOptions=function($){$===void 0&&($={});var _=$.storageKeyPrefix||"NIMClient";this.GRAYKEY=_+"-AllGrayscaleConfig",this.MIXSTOREKEY=_+"-AllMixStorePolicy";var re=$.s3,Ie=Es($,["s3"]),de=Mr({},So,this.config);if(Ie&&Object.prototype.hasOwnProperty.call(Ie,"cdn")){var Lt={cdn:Mr(Mr({},de.cdn),Ie.cdn)};this.config=Mr({},de,Ie,Lt)}else this.config=Mr({},de,Ie);re&&(this.s3=re)},M.init=function(){return Sn(this,void 0,void 0,sr.mark(function $(){return sr.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=go.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){re.next=9;break}return re.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return re.next=9,this.getNosCdnHost();case 9:case"end":return re.stop()}},$,this)}))},M.uploadFile=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(En({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},$),$.fileInput||$.file||$.filePath){Dt.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!$.type||$.type==="file"){Dt.next=7;break}if(typeof(re=As($,"file.type"))!="string"||ka(re).call(re,$.type)!==-1){Dt.next=7;break}throw new Error('The meta type "'+re+'" does not match "'+$.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){Dt.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),Dt.abrupt("return",this.nosUpload($));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=go.nos),Ie=ea,Dt.prev=13,Dt.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:Ci($.type)}});case 16:de=Dt.sent,Ie=de.content.mixStoreTokenResTag,Dt.next=24;break;case 20:throw Dt.prev=20,Dt.t0=Dt.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",Dt.t0),new El("getMixStoreToken error",Dt.t0,this.curProvider,this.mixStorePolicy);case 24:return Dt.abrupt("return",this.curProvider===go.s3?this.s3Upload($,Ie):this.nosUpload($,Ie));case 25:case"end":return Dt.stop()}},_,this,[[13,20]])}))},M.nosUpload=function($,_){var re,Ie;return Sn(this,void 0,void 0,sr.mark(function de(){var Lt,Dt,dr,gr,vr,Cr,xr,Br,jr,zr,Hr,Kr,kn;return sr.wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:if(Lt=As(this.core,"config.cdn.bucket"),Dt={tag:$.nosScenes||Lt||"nim",expireSec:$.nosSurvivalTime},_){Hn.next=13;break}return Hn.prev=3,Hn.next=6,this.core.sendCmd("getNosToken",{responseBody:Ci($.type),nosToken:Dt});case 6:dr=Hn.sent,Hn.next=13;break;case 9:throw Hn.prev=9,Hn.t0=Hn.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Hn.t0),new El("getNosToken error",Hn.t0,1);case 13:return Hn.prev=13,vr=dr?dr.content.nosToken:_,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:vr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Ho.platform}),Hn.next=18,this.core.adapters.uploadFile(Mr(Mr({},$),{nosToken:vr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:$.maxSize||this.config.chunkMaxSize}));case 18:gr=Hn.sent,Hn.next=42;break;case 21:if(Hn.prev=21,Hn.t1=Hn.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",Hn.t1),!_){Hn.next=41;break}if(this.nosErrorCount!==0){Hn.next=37;break}Hn.prev=26,this._addCircuitTimer(),Hn.next=33;break;case 30:throw Hn.prev=30,Hn.t2=Hn.catch(26),new El("upload file error",Hn.t2,this.curProvider,this.mixStorePolicy,$.file||$.filePath);case 33:return this.nosErrorCount=(re=this.mixStorePolicy.nosPolicy)===null||re===void 0?void 0:re.uploadConfig.retryPolicy.retry,Hn.abrupt("return",this.uploadFile($));case 37:return this.nosErrorCount--,Hn.abrupt("return",this.nosUpload($,_));case 39:Hn.next=42;break;case 41:throw new El("nos uploadFile error",Hn.t1,1);case 42:if(Cr=gr==null?void 0:gr.type,xr=Cr&&ka(Cr).call(Cr,"/")>-1?Co(Cr).call(Cr,0,ka(Cr).call(Cr,"/")):"",Br={image:"imageInfo",video:"vinfo",audio:"vinfo"},jr=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",dr?dr.content.nosToken.objectName:_==null?void 0:_.objectName),_&&_.shortUrl&&(jr=_.shortUrl),Br[xr]){Hn.next=49;break}return Hn.abrupt("return",Mr({url:jr},gr));case 49:if(Hn.prev=49,!(ka(jr).call(jr,"_im_url=1")<0)){Hn.next=54;break}return Hn.next=53,this.core.adapters.request(jr+"?"+Br[xr],{method:"GET",dataType:"json",timeout:5e3});case 53:zr=Hn.sent;case 54:Hn.next=60;break;case 56:return Hn.prev=56,Hn.t3=Hn.catch(49),this.core.logger.error("uploadFile:: fetch file info error",Hn.t3),Hn.abrupt("return",Mr({url:jr},gr));case 60:if(!zr){Hn.next=67;break}return Hr=zr.data,Kr=Br[xr]==="imageInfo"?Hr:(Ie=Hr==null?void 0:Hr.GetVideoInfo)===null||Ie===void 0?void 0:Ie.VideoInfo,kn={url:jr,name:gr.name,size:gr.size,ext:gr.ext,w:Kr.Width,h:Kr.Height,orientation:Kr.Orientation,dur:Kr.Duration,audioCodec:Kr.AudioCodec,videoCodec:Kr.VideoCodec,container:Kr.Container},Hn.abrupt("return",On(kn,function(xo,Ln){return Ln!==void 0}));case 67:return Hn.abrupt("return",Mr({url:jr},gr));case 68:case"end":return Hn.stop()}},de,this,[[3,9],[13,21],[26,30],[49,56]])}))},M.getNosCdnHost=function(){var $;return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt=this;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.prev=0,dr.next=3,this.core.sendCmd("getNosCdnHost");case 3:re=dr.sent,dr.next=10;break;case 6:return dr.prev=6,dr.t0=dr.catch(0),this.logger.error("getNosCdnHost::error",dr.t0),dr.abrupt("return");case 10:if(re){dr.next=12;break}return dr.abrupt("return");case 12:Ie=($=re==null?void 0:re.content)===null||$===void 0?void 0:$.nosConfigTag,(de=_o(Ie==null?void 0:Ie.expire))!==0&&Ie.cdnDomain?de===-1?(this.config.cdn.bucket=Ie.bucket,this.config.cdn.cdnDomain=Ie.cdnDomain,this.config.cdn.objectNamePrefix=Ie.objectNamePrefix):(this.config.cdn.bucket=Ie.bucket,this.config.cdn.cdnDomain=Ie.cdnDomain,this.config.cdn.objectNamePrefix=Ie.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){Lt.getNosCdnHost()},1e3*de)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return dr.stop()}},_,this,[[0,6]])}))},M.getGrayscaleConfig=function($){var _;return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Ho.localStorage)try{Ho.localStorage.getItem&&Ho.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Ho.localStorage.getItem(this.GRAYKEY))[$])}catch(dr){Ho.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",dr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){Dt.next=17;break}return Dt.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(Ie=Dt.sent).content||!Ie.content.grayConfigTag){Dt.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(Ie.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(Ie.content.grayConfigTag.ttl)}catch(dr){this.logger.error("getGrayscaleConfig error",dr)}if(this.grayConfig){Dt.next=10;break}return Dt.abrupt("return");case 10:de=Ho.localStorage.getItem(this.GRAYKEY)?JSON.parse(Ho.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),de[$]=this.grayConfig,Ho.localStorage.setItem(this.GRAYKEY,Wo(de)),Dt.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",Ie.content);case 17:if(!(!((_=this.grayConfig)===null||_===void 0)&&_.mixStoreEnable)){Dt.next=20;break}return Dt.next=20,this._getMixStorePolicy($);case 20:case"end":return Dt.stop()}},re,this)}))},M._getMixStorePolicy=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt,dr,gr;return sr.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:if(re=new Date().getTime(),Ho.localStorage)try{this.mixStorePolicy=JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY))[$],this.curProvider=_o(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>re&&(de=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-re,this.core.timerManager.addTimer(Oo(Ie=this._getMixStorePolicy).call(Ie,this,$),de))}catch(xr){Ho.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY))[$]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",xr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=re)){Cr.next=30;break}return Cr.prev=3,Cr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:Dt=Cr.sent,dr=Dt.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(dr.ttl),this.mixStorePolicy.providers=dr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=_o(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=dr.nosPolicy?JSON.parse(dr.nosPolicy):null,this.mixStorePolicy.s3Policy=dr.s3Policy?JSON.parse(dr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Oo(Lt=this._getMixStorePolicy).call(Lt,this,$),1e3*this.mixStorePolicy.ttl),gr=Ho.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Ho.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),gr[$]=this.mixStorePolicy,Ho.localStorage.setItem(this.MIXSTOREKEY,Wo(gr)),Cr.next=30;break;case 23:if(Cr.prev=23,Cr.t0=Cr.catch(3),this.logger.error("getMixStorePolicy error",Cr.t0),this.mixStoreErrorCount!==0){Cr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy($),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Cr.stop()}},_,this,[[3,23]])}))},M.s3Upload=function($,_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt,Dt,dr,gr,vr,Cr,xr,Br,jr=this;return sr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(!$.file){Hr.next=4;break}Ie=$.file,Hr.next=19;break;case 4:if(typeof $.fileInput!="string"){Hr.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((de=document.getElementById($.fileInput))&&de.files&&de.files[0])){Hr.next=11;break}Ie=de.files[0],Hr.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Hr.next=19;break;case 14:if(!($.fileInput&&$.fileInput.files&&$.fileInput.files[0])){Hr.next=18;break}Ie=$.fileInput.files[0],Hr.next=19;break;case 18:throw new Error("Can not get file from fileInput "+$.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Hr.next=21;break}throw new Error("dont get s3 policy");case 21:return Lt={accessKeyId:_.accessKeyId,secretAccessKey:_.secretAccessKey,sessionToken:_.sessionToken,region:_.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},Dt=this.s3,(dr=new Dt).config.update(Lt),gr=decodeURIComponent(_.bucket),vr=decodeURIComponent(_.objectName),xr={Bucket:gr,Key:vr,Body:Cr=Ie,Metadata:{token:_.token},ContentType:Cr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",xr),Br=dr.upload(xr),Hr.abrupt("return",new co(function(Kr){var kn=new Date().getTime();Br.send(function(Jn,Hn){var xo,Ln;if(Jn){jr.logger.error("uploadFile:","api::s3:upload file failed",Jn),jr.core.reporter.reportTraceStart("exceptions",{user_id:jr.core.options.account,trace_id:(Ln=(xo=jr.core)===null||xo===void 0?void 0:xo.socket)===null||Ln===void 0?void 0:Ln.sessionId,start_time:kn,action:1}),jr.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Jn.status=="number"?Jn.status:typeof Jn.code=="number"?Jn.code:0,description:Jn.message||""+Jn.code,operation_type:1,target:Jn.hostname}),jr.core.reporter.reportTraceEnd("exceptions",1);try{jr._addCircuitTimer()}catch(Pn){throw new El("upload file error",Pn,jr.curProvider,jr.mixStorePolicy,$.file||$.filePath)}Kr(jr.uploadFile($))}else{var _r=jr.mixStorePolicy.s3Policy.cdnSchema;_r=(_r=_r.replace("{cdnDomain}",jr.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Hn.Key),Kr({size:Cr.size,name:Cr.name,url:_.shortUrl?_.shortUrl:_r,ext:Cr.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return Hr.stop()}},re,this)}))},M.getPrivateUrl=function($){var _;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test($))return this.logger.error("illegal file url:"+$),"";var re=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec($);re[0];var Ie=re[1];re[2];var de=re[3];re[4];var Lt=re[5];if(re[6],re[7],(_=this.grayConfig)===null||_===void 0?void 0:_.mixStoreEnable){var Dt=this._getUrlType($);return Dt===go.s3&&this.mixStorePolicy.s3Policy&&($=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",Lt)),Dt===go.nos&&this.mixStorePolicy.nosPolicy&&($=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",Lt)),$}var dr=this.config,gr=dr.downloadUrl,vr=dr.downloadHostList,Cr=dr.nosCdnEnable,xr=this.config.cdn.cdnDomain,Br=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",jr=decodeURIComponent(Lt),zr=ka(jr).call(jr,Br);if(xr&&zr>-1&&Cr)return""+Ie+xr+"/"+Co(jr).call(jr,zr);if(bc(vr).call(vr,de)&&bc(Lt).call(Lt,"/")){var Hr=ka(Lt).call(Lt,"/"),Kr=Lt.substring(0,Hr),kn=Lt.substring(Hr+1);return gr.replace("{bucket}",Kr).replace("{object}",kn)}var Jn=is(vr).call(vr,function(xo){return typeof de=="string"&&bc(de).call(de,xo)})[0],Hn=Jn?de.replace(Jn,"").replace(/\W/g,""):null;return Hn?gr.replace("{bucket}",Hn).replace("{object}",Lt):$},M.getOriginUrl=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:$}});case 2:return re=de.sent,de.abrupt("return",re.content.nosSafeUrlTag.originUrl);case 4:case"end":return de.stop()}},_,this)}))},M.getFileToken=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt,dr=this;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(En({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},$),re=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,Ie=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,re!==String(Zo.dontNeed)||Ie!==String(Zo.dontNeed)){vr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if($.type!==Zo.time){vr.next=17;break}if(!(re&&ka(re).call(re,String(Zo.time))>=0||Ie&&ka(Ie).call(Ie,String(Zo.time))>0)){vr.next=13;break}return vr.abrupt("return",this.getFileAuthToken($));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:vr.next=33;break;case 17:if($.urls&&$.urls.length){vr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(Lt=[],Dt=[],In(de=$.urls).call(de,function(Cr){var xr=dr._getUrlType(Cr);xr===go.nos&&Dt.push(Cr),xr===go.s3&&Lt.push(Cr)}),(!Ie||Lt.length!==0&&ka(Ie).call(Ie,String(Zo.urls))<0)&&(this.logger.warn("s3 url don't support url token"),Lt=[]),(!re||Dt.length!==0&&ka(re).call(re,String(Zo.urls))<0)&&(this.logger.warn("nos url don't support url token"),Dt=[]),Lt.length!==0||Dt.length!==0){vr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(Lt.length!==0&&Dt.length!==0){vr.next=33;break}return $.urls=Wo($.urls),vr.abrupt("return",this.getFileAuthToken($));case 33:case"end":return vr.stop()}},_,this)}))},M.getFileAuthToken=function($){return Sn(this,void 0,void 0,sr.mark(function _(){var re;return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:$});case 2:return re=de.sent,de.abrupt("return",re.content.mixStoreAuthTokenResTag);case 4:case"end":return de.stop()}},_,this)}))},M._getUrlType=function($){var _,re;return this.mixStorePolicy.nosPolicy&&Nn(_=this.mixStorePolicy.nosPolicy.dlcdns).call(_,function(Ie){return ka($).call($,Ie)>=0})?go.nos:this.mixStorePolicy.s3Policy&&Nn(re=this.mixStorePolicy.s3Policy.dlcdns).call(re,function(Ie){return ka($).call($,Ie)>=0})?go.s3:null},M._addCircuitTimer=function(){var $=this,_=this.mixStorePolicy.providers,re=_[(ka(_).call(_,String(this.curProvider))+1)%_.length];if(re===_[0])throw new Error("uploadFile all policy fail");var Ie=As(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(Ie&&Ie.retryNext&&re&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+re),this.curProvider=_o(re),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var de=this.mixStorePolicy[this.curProvider===go.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!de||de===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){$.logger.log("uploadFile:: upload policy will change,now policy:"+$.curProvider+" nextProvider:"+_o($.mixStorePolicy.providers[0])),$.curProvider=_o($.mixStorePolicy.providers[0]),$.core.timerManager.deleteTimer($.circuitTimer)},1e3*de)}},M.process=function($){var _=this[$.cmd+"Handler"];return typeof _=="function"?_.call(this,$):$.error&&!$.error.ignore?co.reject($.error):co.resolve($)},w}(),Mi=Ga({none:0,normal:1,all:3}),$a=Ga({normal:0,advanced:1}),lo=Ga({normal:0,owner:1,manager:2}),Go={noVerify:0,needVerify:1,rejectAll:2},zn=Ga(Go),Bo={needVerify:0,noVerify:1},Qa=Ga(Bo),Qn={manager:0,all:1},Gy=Ga(Qn),qh={manager:0,all:1},xs=Ga(qh),Is={manager:0,all:1},wa=Ga(Is);function Qo(w){var M,L=["teamId"],$=["level","memberNum","memberUpdateTime","createTime","updateTime"],_=["valid","validToCurrentUser","mute"],re={type:$a,muteType:Mi,joinMode:zn,beInviteMode:Qa,inviteMode:Gy,updateTeamMode:xs,updateExtMode:wa};w.bits;var Ie=Es(w,["bits"]);return In(L).call(L,function(de){Ie[de]&&(Ie[de]=Ie[de].toString())}),In($).call($,function(de){Ie[de]!==void 0&&(Ie[de]=_o(Ie[de]))}),In(_).call(_,function(de){Ie[de]!==void 0&&(Ie[de]=_o(Ie[de])===1)}),In(M=Vo(re)).call(M,function(de){Ie[de]!==void 0&&(Ie[de]=re[de][Ie[de]]||Ie[de])}),Ie}function ma(w){return w&&w.length>0?To(w).call(w,function(M){return Qo(M)}):[]}function Kd(w){var M,L=Mr({},w),$=["avatar","name","intro","announcement","ext"],_={joinMode:Go,beInviteMode:Bo,inviteMode:Qn,updateTeamMode:qh,updateExtMode:Is};return In($).call($,function(re){L[re]!==void 0&&(L[re]=L[re].toString())}),In(M=Vo(_)).call(M,function(re){L[re]!==void 0&&(L[re]=_[re][L[re]])}),L}function kC(w){var M=["teamId","ext","account","nickInTeam"],L={};return w.bitConfigMask!==void 0&&(L.bits=_o(w.bitConfigMask)),In(M).call(M,function($){w[$]&&(L[$]=w[$].toString())}),L}function Ks(w){var M,L=["teamId"],$=["joinTime","updateTime","bitConfigMask"],_=["active","valid","mute"],re={type:lo},Ie=w.bits,de=Es(w,["bits"]);return Ie!==void 0&&(de.muteTeam=_o(Ie)===1,de.bitConfigMask=Ie),de.id=de.teamId+"-"+de.account,In(L).call(L,function(Lt){de[Lt]&&(de[Lt]=de[Lt].toString())}),In($).call($,function(Lt){de[Lt]!==void 0&&(de[Lt]=_o(de[Lt]))}),In(_).call(_,function(Lt){de[Lt]!==void 0&&(de[Lt]=_o(de[Lt])===1)}),In(M=Vo(re)).call(M,function(Lt){de[Lt]!==void 0&&(de[Lt]=re[Lt][de[Lt]]||de[Lt])}),de}function Wd(w){return w&&w.length>0?To(w).call(w,function(M){return Ks(M)}):[]}function of(w,M,L){return L===void 0&&(L="normal"),{id:w.teamId+"-"+M,teamId:w.teamId,account:M,type:L,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:w.memberUpdateTime,updateTime:w.memberUpdateTime,active:!0,valid:!0}}function Vh(w,M,L){return L===void 0&&(L="normal"),M&&M.length>0?To(M).call(M,function($){return of(w,$,L)}):[]}var NC=function(){function w(L){this.core=L}var M=w.prototype;return M.notifyAddSuperTeamMembers=function($,_){this.core.emit("addSuperTeamMembers",{team:$,accounts:_,members:Vh($,_)})},M.notifyUpdateSuperTeamManagers=function($,_,re,Ie){this.core.emit("updateSuperTeamManagers",{team:{teamId:$,memberUpdateTime:Ie},accounts:_,isManager:re,members:To(_).call(_,function(de){return{id:$+"-"+de,type:"manager",account:de,updateTime:Ie}})})},M.notifyRemoveSuperTeamMembers=function($,_){this.core.emit("removeSuperTeamMembers",{team:$,accounts:_})},M.notifyTransferSuperTeam=function($,_,re){this.core.emit("transferSuperTeam",{team:$,from:{id:$.teamId+"-"+_,account:_,type:"normal",updateTime:$.memberUpdateTime},to:{id:$.teamId+"-"+re,account:re,type:"owner",updateTime:$.memberUpdateTime}})},M.notifyUpdateSuperTeamMembersMute=function($,_,re){this.core.emit("updateSuperTeamMembersMute",{team:$,accounts:_,members:To(_).call(_,function(Ie){return{id:$.teamId+"-"+Ie,account:Ie,teamId:$.teamId,mute:re,updateTime:$.memberUpdateTime}}),mute:re})},w}(),RC={"21_5":"addSuperTeamMembers","21_6":"removeSuperTeamMembers","21_7":"leaveSuperTeam","21_8":"updateSuperTeamInfo","21_9":"getSuperTeamInfo","21_12":"getSuperTeams","21_15":"getSuperTeamMembers","21_10":"updateMySuperTeamMemberInfo","21_20":"applySuperTeam","21_21":"passSuperTeamApply","21_22":"rejectSuperTeamApply","21_23":"acceptSuperTeamInvite","21_24":"rejectSuperTeamInvite","21_26":"addSuperTeamManagers","21_27":"removeSuperTeamManagers","21_28":"muteSuperTeam","21_29":"muteSuperTeamMembers","21_30":"updateSuperTeamMemberNick","21_31":"transferSuperTeam","21_33":"getSuperTeamMembersByAccounts","21_34":"queryMuteSuperTeamMembers","21_101":"syncCreateSuperTeam","21_109":"syncSuperTeams","21_110":"syncUpdateSuperTeamMember","21_111":"syncMySuperTeamMembers"},Qy={superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,updateTime:11,ext:12,mute:13,invitorAccid:14,joinTime:15}},Bc=rs(Qy),BC={getSuperTeamInfo:{sid:21,cid:9,service:"superTeam",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},getSuperTeams:{sid:21,cid:12,service:"superTeam",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"superTeams",reflectMapper:Bc.superTeam},{type:"Number",name:"timetag"}]},updateSuperTeamInfo:{sid:21,cid:8,service:"superTeam",params:[{type:"Property",name:"superTeam",reflectMapper:Qy.superTeam}],response:[{type:"Number",name:"time"}]},addSuperTeamMembers:{sid:21,cid:5,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"time"}]},removeSuperTeamMembers:{sid:21,cid:6,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},addSuperTeamManagers:{sid:21,cid:26,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:21,cid:27,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applySuperTeam:{sid:21,cid:20,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},transferSuperTeam:{sid:21,cid:31,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},muteSuperTeam:{sid:21,cid:28,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},muteSuperTeamMembers:{sid:21,cid:29,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateSuperTeamMemberNick:{sid:21,cid:30,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Qy.superTeamMember}]},updateMySuperTeamMemberInfo:{sid:21,cid:10,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Qy.superTeamMember}]},getSuperTeamMembersByAccounts:{sid:21,cid:33,service:"superTeam",params:[{type:"StrArray",name:"memberIds"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},getSuperTeamMembers:{sid:21,cid:15,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},queryMuteSuperTeamMembers:{sid:21,cid:34,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:Bc.superTeamMember}]},leaveSuperTeam:{sid:21,cid:7,service:"superTeam",params:[{type:"Long",name:"teamId"}]},passSuperTeamApply:{sid:21,cid:21,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:21,cid:22,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:21,cid:23,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:21,cid:24,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncSuperTeams:{sid:21,cid:109,service:"superTeam",response:[{type:"PropertyArray",name:"teams",reflectMapper:Bc.superTeam},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},syncCreateSuperTeam:{sid:21,cid:101,service:"superTeam",response:[{type:"Property",name:"superTeam",reflectMapper:Bc.superTeam}]},syncUpdateSuperTeamMember:{sid:21,cid:110,service:"superTeam",response:[{type:"Property",name:"teamMember",reflectMapper:Bc.superTeamMember}]},syncMySuperTeamMembers:{sid:21,cid:111,ext:"sync",service:"superTeam",response:[{type:"PropertyArray",name:"teamMembers",reflectMapper:Bc.superTeamMember},{type:"Number",name:"timetag"}]}},FC=function(w){function M($){var _;return(_=w.call(this,"superTeam",$)||this).mySuperTeamMembersMap=new tc,_.service=new NC($),qa({cmdMap:RC,cmdConfig:BC}),_.core.eventBus.on("team/onNotification",function(re){return _.notificationHandler(re)}),_}Ro(M,w);var L=M.prototype;return L.mergeMySuperTeamMembers=function(_){var re=this;In(_).call(_,function(Ie){var de=Ie.teamId,Lt=re.mySuperTeamMembersMap.get(de),Dt=Mr({},Lt,Ie);re.mySuperTeamMembersMap.set(de,Dt)})},L.getSuperTeamInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),Dt.next=3,this.core.sendCmd("getSuperTeamInfo",{teamId:_.teamId});case 3:return Ie=Dt.sent,de=Ie.content.superTeam,Dt.abrupt("return",Qo(de));case 6:case"end":return Dt.stop()}},re,this)}))},L.getSuperTeams=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.core.sendCmd("getSuperTeams",{timetag:0});case 2:return re=Lt.sent,Ie=re.content.superTeams,Lt.abrupt("return",ma(Ie));case 5:case"end":return Lt.stop()}},_,this)}))},L.updateSuperTeamInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},_),Ie=Kd(_),Lt.next=4,this.core.sendCmd("updateSuperTeamInfo",{superTeam:Ie});case 4:return Lt.abrupt("return",Qo(Ie));case 5:case"end":return Lt.stop()}},re,this)}))},L.addSuperTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("addSuperTeamMembers",{teamId:_.teamId,accounts:_.accounts,ps:_.ps||"",attach:_.ext||""});case 3:case"end":return de.stop()}},re,this)}))},L.removeSuperTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},_),de.next=3,this.core.sendCmd("removeSuperTeamMembers",{teamId:_.teamId,accounts:_.accounts});case 3:case"end":return de.stop()}},re,this)}))},L.addSuperTeamManagers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},_),de.next=3,this.core.sendCmd("addSuperTeamManagers",_);case 3:case"end":return de.stop()}},re,this)}))},L.removeSuperTeamManagers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},_),de.next=3,this.core.sendCmd("removeSuperTeamManagers",_);case 3:case"end":return de.stop()}},re,this)}))},L.applySuperTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},_),Lt.next=3,this.core.sendCmd("applySuperTeam",{teamId:_.teamId,ps:_.ps||""});case 3:return Ie=Lt.sent,Lt.abrupt("return",Qo(Ie.content.superTeam));case 5:case"end":return Lt.stop()}},re,this)}))},L.transferSuperTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},_),de.next=3,this.core.sendCmd("transferSuperTeam",_);case 3:case"end":return de.stop()}},re,this)}))},L.muteSuperTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},_),de.next=3,this.core.sendCmd("muteSuperTeam",{teamId:_.teamId,mute:_.mute?1:0});case 3:case"end":return de.stop()}},re,this)}))},L.muteSuperTeamMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string"},mute:{type:"boolean"}},_),de.next=3,this.core.sendCmd("muteSuperTeamMembers",{teamId:_.teamId,accounts:_.accounts,mute:_.mute?1:0});case 3:case"end":return de.stop()}},re,this)}))},L.updateMemberNick=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},_),Ie=kC({teamId:_.teamId,nickInTeam:_.nickInTeam,account:_.account}),Dt.next=4,this.core.sendCmd("updateSuperTeamMemberNick",{teamMember:Ie});case 4:return de=Ks(Mr({updateTime:new Date().getTime()},Ie)),Dt.abrupt("return",de);case 6:case"end":return Dt.stop()}},re,this)}))},L.updateMyMemberInfo=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},_),Ie=kC({teamId:_.teamId,nickInTeam:_.nickInTeam,bitConfigMask:_.bitConfigMask,ext:_.ext}),dr.next=4,this.core.sendCmd("updateMySuperTeamMemberInfo",{teamMember:Ie});case 4:return de=Ks(Mr({updateTime:new Date().getTime(),account:this.core.account},Ie)),this.mergeMySuperTeamMembers([de]),this.core.emit("updateSuperTeamMember",de),Lt=mc(this.mySuperTeamMembersMap.get(de.teamId)),this.core.emit("mySuperTeamMembers",[Lt]),dr.abrupt("return",de);case 10:case"end":return dr.stop()}},re,this)}))},L.getSuperTeamMembersByAccounts=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:20,min:1}},_),Lt=To(de=_.accounts).call(de,function(vr){return _.teamId+"|"+vr}),gr.next=4,this.core.sendCmd("getSuperTeamMembersByAccounts",{memberIds:Lt});case 4:return Dt=gr.sent,gr.abrupt("return",Wd((re=Dt.content)===null||re===void 0?void 0:re.superTeamMembers));case 6:case"end":return gr.stop()}},Ie,this)}))},L.getSuperTeamMembers=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,max:1e3,required:!1},reverse:{type:"boolean",required:!1}},_),Dt.next=3,this.core.sendCmd("getSuperTeamMembers",Mr({joinTime:0,limit:100,reverse:!1},_));case 3:return de=Dt.sent,Dt.abrupt("return",Wd((re=de.content)===null||re===void 0?void 0:re.superTeamMembers));case 5:case"end":return Dt.stop()}},Ie,this)}))},L.queryMuteMembers=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},_),Dt.next=3,this.core.sendCmd("queryMuteSuperTeamMembers",Mr({limit:100,joinTime:0,reverse:!1},_));case 3:return Ie=Dt.sent,de=Ie.content,Dt.abrupt("return",Wd(de.superTeamMembers));case 6:case"end":return Dt.stop()}},re,this)}))},L.leaveSuperTeam=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},_),de.next=3,this.core.sendCmd("leaveSuperTeam",{teamId:_.teamId});case 3:case"end":return de.stop()}},re,this)}))},L.passSuperTeamApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},_),de.next=3,this.core.sendCmd("passSuperTeamApply",_);case 3:case"end":return de.stop()}},re,this)}))},L.rejectSuperTeamApply=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("rejectSuperTeamApply",{teamId:_.teamId,from:_.from,ps:_.ps||""});case 3:case"end":return de.stop()}},re,this)}))},L.acceptSuperTeamInvite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},_),de.next=3,this.core.sendCmd("acceptSuperTeamInvite",_);case 3:case"end":return de.stop()}},re,this)}))},L.rejectSuperTeamInvite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},_),de.next=3,this.core.sendCmd("rejectSuperTeamInvite",{teamId:_.teamId,from:_.from,ps:_.ps||""});case 3:case"end":return de.stop()}},re,this)}))},L.syncSuperTeamsHandler=function(_){var re=_.content;this.core.eventBus.emit("sync/updateTimetag",{superTeams:_o(re.timetag)});var Ie=re==null?void 0:re.superTeams;if(Ie&&Ie.length){var de=ma(Ie);this.core.emit("superTeams",de)}},L.syncCreateSuperTeamHandler=function(_){var re=_.content,Ie=Qo(re==null?void 0:re.superTeam),de=of(Ie,Ie.owner,"owner");this.core.emit("createSuperTeam",Ie,de)},L.syncUpdateSuperTeamMemberHandler=function(_){var re=_.content,Ie=Ks(re==null?void 0:re.teamMember);Ie.updateTime||(Ie.updateTime=new Date().getTime()),this.mergeMySuperTeamMembers([Ie]),this.core.emit("updateSuperTeamMember",Ie);var de=mc(this.mySuperTeamMembersMap.get(Ie.teamId));this.core.emit("mySuperTeamMembers",[de])},L.syncMySuperTeamMembersHandler=function(_){var re,Ie=_.content;this.core.eventBus.emit("sync/updateTimetag",{mySuperTeamMembers:_o(Ie.timetag)});var de=Ie==null?void 0:To(re=Ie.teamMembers).call(re,function(Lt){return Ks(Lt)});this.mergeMySuperTeamMembers(de),this.core.emit("mySuperTeamMembers",mc(de))},L.notificationHandler=function(_){var re=_.attach,Ie=_.scene,de=_.from,Lt=_.to,Dt=_.time,dr=_.idServer,gr=_.idClient,vr=re.team,Cr=re.account,xr=re.accounts,Br=re.type;if(Ie==="superTeam")switch(this.core.options.debugLevel==="debug"?this.logger.debug("superTeam::recvNotification",dr,gr,re):this.logger.log("superTeam::recvNotification",dr,gr,Lt,Br,Cr,xr),Br){case"updateSuperTeam":vr.updateTime=Dt,this.core.emit("updateSuperTeam",vr);break;case"addSuperTeamMembers":this.service.notifyAddSuperTeamMembers(vr,xr);break;case"acceptSuperTeamInvite":this.service.notifyAddSuperTeamMembers(vr,[de]);break;case"passSuperTeamApply":this.service.notifyAddSuperTeamMembers(vr,[Cr]);break;case"addSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(Lt,xr,!0,Dt);break;case"removeSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(Lt,xr,!1,Dt);break;case"removeSuperTeamMembers":this.service.notifyRemoveSuperTeamMembers(vr,xr);break;case"leaveSuperTeam":this.service.notifyRemoveSuperTeamMembers(vr,[de]);break;case"dismissSuperTeam":this.core.emit("dismissSuperTeam",{teamId:Lt});break;case"transferSuperTeam":this.service.notifyTransferSuperTeam(vr,de,Cr);break;case"updateSuperTeamMembersMute":this.service.notifyUpdateSuperTeamMembersMute(vr,xr,re.mute)}},M}(os),LC={"13_1":"getChatroomAddress","24_1":"getQChatAddress"},$C={getChatroomAddress:{sid:13,cid:1,service:"plugin",params:[{type:"Long",name:"chatroomId"},{type:"Boolean",name:"isWeixinApp"},{type:"Number",name:"ipType"}],response:[{type:"StrArray",name:"address"}]},getQChatAddress:{sid:24,cid:1,service:"plugin",params:[{type:"Property",name:"getQChatAddressTag",reflectMapper:{ipType:1}}],response:[{type:"StrArray",name:"address"}]}},jC=function(w){function M($){var _;return(_=w.call(this,"plugin",$)||this).core=$,qa({cmdMap:LC,cmdConfig:$C}),_}Ro(M,w);var L=M.prototype;return L.getChatroomAddress=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({chatroomId:{type:"string",allowEmpty:!1},ipType:{type:"number",required:!1}},_),Lt.next=3,this.core.sendCmd("getChatroomAddress",{chatroomId:_.chatroomId,isWeixinApp:Ho.platform==="WXAPP",ipType:_.ipType||0});case 3:return Ie=Lt.sent,Lt.abrupt("return",Ie.content.address);case 5:case"end":return Lt.stop()}},re,this)}))},L.getQChatAddress=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie;return sr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return En({ipType:{type:"number",required:!1}},_),Lt.next=3,this.core.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:(_==null?void 0:_.ipType)||0}});case 3:return Ie=Lt.sent,Lt.abrupt("return",Ie.content.address);case 5:case"end":return Lt.stop()}},re,this)}))},M}(os),DC={"7_19":"nimQueryCloudSessionList","7_20":"nimQueryCloudSession","7_21":"nimUpdateCloudSession","7_22":"nimDeleteCloudSessionList","7_121":"nimMultiSyncUpdateCloudSession"},Hh={sessionReqTag:{minTimestamp:1,maxTimestamp:2,includedLastMsg:3,limit:4,hasMore:5},sessionTag:{sessionId:1,updateTime:2,ext:3,lastMsg:4,lastMsgType:5}},Jy=rs(Hh),UC={nimQueryCloudSessionList:{sid:7,cid:19,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionReqTag}],response:[{type:"Property",name:"tag",reflectMapper:Jy.sessionReqTag},{type:"PropertyArray",name:"sessions",reflectMapper:Jy.sessionTag}]},nimQueryCloudSession:{sid:7,cid:20,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionTag}],response:[{type:"Property",name:"session",reflectMapper:Jy.sessionTag}]},nimUpdateCloudSession:{sid:7,cid:21,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:Hh.sessionTag}]},nimDeleteCloudSessionList:{sid:7,cid:22,service:"cloudSession",params:[{type:"PropertyArray",name:"tags",reflectMapper:Hh.sessionTag}]},nimMultiSyncUpdateCloudSession:{sid:7,cid:121,service:"cloudSession",response:[{type:"Property",name:"session",reflectMapper:Jy.sessionTag}]}},qC={sessionId:{type:"string"},updateTime:{type:"number"},ext:{type:"string"},lastMsg:{type:"object"},lastMsgType:{type:"number"}};function _C(w,M,L){var $=Xs(qC,w),_=Lo($.sessionId,"|"),re=_.accid,Ie=_.scene;if($.sessionId=Ie+"-"+re,$.lastMsg){var de=$.lastMsgType===1;$.lastMsgInfo=de?{isLastMsgRecalled:de,revokedMsg:Vd(Ii($.lastMsg,Sl.sysMsg),L)}:{isLastMsgRecalled:de,lastMsg:Ri(Ii($.lastMsg,ss.msg),{account:M})}}return delete $.lastMsg,delete $.lastMsgType,$}function VC(w,M,L){return w&&w.length>0?To(w).call(w,function($){return _C($,M,L)}):[]}var PC,Fc,zh,HC=function(w){function M($){var _;return _=w.call(this,"cloudSession",$)||this,qa({cmdMap:DC,cmdConfig:UC}),_}Ro(M,w);var L=M.prototype;return L.queryCloudSessionList=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({minTimestamp:{type:"number",min:0,required:!1},maxTimestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},includedLastMsg:{type:"boolean",required:!1}},_),(de=Mr({limit:100,includedLastMsg:!0},_)).includedLastMsg=tS.boolean(_,"includedLastMsg"),vr.next=5,this.core.sendCmd("nimQueryCloudSessionList",{tag:de});case 5:return Lt=vr.sent,Dt=((re=Lt.content)===null||re===void 0?void 0:re.tag)||{},dr=Lt.content.sessions,vr.abrupt("return",{hasMore:+Dt.hasMore>0,sessionList:VC(dr,this.core.account,this.logger)});case 9:case"end":return vr.stop()}},Ie,this)}))},L.queryCloudSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return En({sessionId:{type:"string",allowEmpty:!1}},_),Ie=Lo(_.sessionId,"-"),de=Ie.accid,Lt=Ie.scene,gr.next=4,this.core.sendCmd("nimQueryCloudSession",{tag:{sessionId:Lt==="superTeam"?"super_team|"+de:Lt+"|"+de}});case 4:return Dt=gr.sent,gr.abrupt("return",_C(Dt.content.session,this.core.account,this.logger));case 6:case"end":return gr.stop()}},re,this)}))},L.updateCloudSession=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({sessionId:{type:"string",allowEmpty:!1},ext:{type:"string",allowEmpty:!1,required:!1}},_),Ie=Lo(_.sessionId,"-"),de=Ie.accid,Lt=Ie.scene,dr.next=4,this.core.sendCmd("nimUpdateCloudSession",{tag:{sessionId:Lt==="superTeam"?"super_team|"+de:Lt+"|"+de,ext:_.ext}});case 4:case"end":return dr.stop()}},re,this)}))},L.deleteCloudSessionList=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({sessionIdList:{type:"array",itemType:"string"}},_),de=To(Ie=_.sessionIdList).call(Ie,function(dr){var gr=Lo(dr,"-"),vr=gr.accid,Cr=gr.scene;return{sessionId:Cr==="superTeam"?"super_team|"+vr:Cr+"|"+vr}}),Dt.next=4,this.core.sendCmd("nimDeleteCloudSessionList",{tags:de});case 4:case"end":return Dt.stop()}},re,this)}))},L.nimMultiSyncUpdateCloudSessionHandler=function(_){var re=_C(_.content.session,this.core.account,this.logger);this.core.emit("multiSyncUpdateCloudSession",re)},M}(os);(function(w){w[w.audio=1]="audio",w[w.video=2]="video",w[w.custom=3]="custom"})(PC||(PC={})),function(w){w[w.kClose=1]="kClose",w[w.kJoin=2]="kJoin",w[w.kInvite=3]="kInvite",w[w.kCancelInvite=4]="kCancelInvite",w[w.kReject=5]="kReject",w[w.kAccept=6]="kAccept",w[w.kLeave=7]="kLeave",w[w.kCustom=8]="kCustom"}(Fc||(Fc={})),function(w){w[w.kDefault=0]="kDefault",w[w.kLeave=1]="kLeave",w[w.kSelfSync=3]="kSelfSync"}(zh||(zh={}));var wC={needPush:{type:"boolean",required:!1},pushTitle:{type:"string",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needPushBadge:{type:"boolean",required:!1}},zC={"15_1":"signalingCreate","15_2":"signalingDelay","15_3":"signalingClose","15_4":"signalingJoin","15_5":"signalingLeave","15_6":"signalingInvite","15_7":"signalingCancelInvite","15_8":"signalingReject","15_9":"signalingAccept","15_10":"signalingSendCustomCommand","15_11":"signalingRecvNotification","15_12":"signalingMultiSyncNotification","15_13":"signalingSyncNotification","15_14":"singalingSyncChannels","15_15":"signalingQueryInfo","15_16":"signalingCallEx","15_17":"signalingJoinAndAccept"},ei={avSignalTag:Mr({type:1,name:2,channelId:3,createTime:4,expireTime:5,creatorAccid:6,ext:7,invalid:8,fromAccid:10,toAccid:11,requestId:12,members:18,attach:19,attachExt:20,needOffline:21,msgId:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},{needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needPushBadge:17})},gc=rs(ei),KC={signalingCreate:{sid:15,cid:1,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingDelay:{sid:15,cid:2,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingClose:{sid:15,cid:3,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingJoin:{sid:15,cid:4,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingLeave:{sid:15,cid:5,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingInvite:{sid:15,cid:6,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingCancelInvite:{sid:15,cid:7,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingReject:{sid:15,cid:8,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingAccept:{sid:15,cid:9,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingSendCustomCommand:{sid:15,cid:10,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}]},signalingRecvNotification:{sid:15,cid:11,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingMultiSyncNotification:{sid:15,cid:12,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingSyncNotification:{sid:15,cid:13,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:gc.avSignalTag}]},singalingSyncChannels:{sid:15,cid:14,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:gc.avSignalTag}]},signalingQueryInfo:{sid:15,cid:15,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingCallEx:{sid:15,cid:16,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingJoinAndAccept:{sid:15,cid:17,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:ei.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:gc.avSignalTag}]},signalingBatchMarkRead:{sid:4,cid:5,isNoResponse:!0,service:"signaling",params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]}},Yy={type:{type:"number"},createTime:{type:"number"},expireTime:{type:"number"},invalid:{type:"boolean"},pushInfo:wC,pluginSetting:{nertcInfo:{nertcChannelName:{type:"string"},nertcTokenTtl:{type:"number"},nertcToken:{type:"string"},nertcJoinRoomQueryParamMap:{type:"string"},callStatus:{type:"number"}}},attach:{type:"object"},members:{type:"object"},needOffline:{type:"boolean"},uid:{type:"number"},time:{type:"number"}};function Gd(w){var M,L=Xs(Yy,w),$=[];return L.members&&L.members.length>0&&($=To(M=L.members).call(M,function(_){return function(Ie){return Xs(Yy,Ii(Ie,{1:"accid",2:"uid",3:"createTime",4:"expireTime"}))}(_)}),delete L.members),$.length>0?{channelInfo:L,memberList:$}:{channelInfo:L}}function hc(w){return Td(Yy,w)}var WC=function(w){function M($){var _;return(_=w.call(this)||this).timer=0,_.pollingInterval=12e4,_.name="signaling",_.logger=$.logger,_.core=$,_.channels={},qa({cmdMap:zC,cmdConfig:KC}),_}Ro(M,w);var L=M.prototype;return L.callEx=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({type:{type:"number"},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:wC},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},_),vr.next=3,this.core.sendCmd("signalingCallEx",{tag:hc(_)});case 3:return de=vr.sent,Lt=((re=de.content)===null||re===void 0?void 0:re.data)||{},Dt=Gd(Lt),this.channels[Dt.channelInfo.channelId]=mc(Dt.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(dr=this.aotoDelay).call(dr,this),this.pollingInterval,-1)),vr.abrupt("return",Dt);case 9:case"end":return vr.stop()}},Ie,this)}))},L.joinAndAccept=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr,gr,vr;return sr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},uid:{type:"number",required:!1},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},_),de=_.fromAccid,(Lt=Es(_,["fromAccid"])).toAccid=de,xr.next=5,this.core.sendCmd("signalingJoinAndAccept",{tag:hc(Lt)});case 5:return Dt=xr.sent,dr=((re=Dt.content)===null||re===void 0?void 0:re.data)||{},gr=Gd(dr),this.channels[gr.channelInfo.channelId]=mc(gr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(vr=this.aotoDelay).call(vr,this),this.pollingInterval,-1)),xr.abrupt("return",gr);case 11:case"end":return xr.stop()}},Ie,this)}))},L.create=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({type:{type:"number"},ext:{type:"string",required:!1}},_),dr.next=3,this.core.sendCmd("signalingCreate",{tag:hc(_)});case 3:return de=dr.sent,Lt=((re=de.content)===null||re===void 0?void 0:re.data)||{},dr.abrupt("return",Gd(Lt));case 6:case"end":return dr.stop()}},Ie,this)}))},L.close=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},_),de.next=3,this.core.sendCmd("signalingClose",{tag:hc(_)});case 3:case"end":return de.stop()}},re,this)}))},L.queryInfo=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt;return sr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return En({name:{type:"string",allowEmpty:!1}},_),dr.next=3,this.core.sendCmd("signalingQueryInfo",{tag:_});case 3:return de=dr.sent,Lt=((re=de.content)===null||re===void 0?void 0:re.data)||{},dr.abrupt("return",Gd(Lt));case 6:case"end":return dr.stop()}},Ie,this)}))},L.join=function(_){var re;return Sn(this,void 0,void 0,sr.mark(function Ie(){var de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},uid:{type:"number",min:0,required:!1},needOffline:{type:"boolean",required:!1}},_),vr.next=3,this.core.sendCmd("signalingJoin",{tag:hc(_)});case 3:return de=vr.sent,Lt=((re=de.content)===null||re===void 0?void 0:re.data)||{},Dt=Gd(Lt),this.channels[Dt.channelInfo.channelId]=mc(Dt.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Oo(dr=this.aotoDelay).call(dr,this),this.pollingInterval,-1)),vr.abrupt("return",Dt);case 9:case"end":return vr.stop()}},Ie,this)}))},L.aotoDelay=function(){return Sn(this,void 0,void 0,sr.mark(function _(){var re,Ie,de,Lt,Dt;return sr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if((re=Vo(this.channels)).length!==0){gr.next=4;break}return this.timer&&this.core.timerManager.deleteTimer(this.timer),gr.abrupt("return");case 4:this.logger.log("signling:autoDelay",re),Ie=0;case 6:if(!(Ie<re.length)){gr.next=23;break}return de=re[Ie],gr.prev=8,gr.next=11,this.core.sendCmd("signalingDelay",{tag:{channelId:de}});case 11:Lt=gr.sent,Dt=Gd(Lt.content.data),this.channels[de]=Dt.channelInfo,gr.next=20;break;case 16:gr.prev=16,gr.t0=gr.catch(8),this.logger.warn("signling:autoDelay "+de+" failed",gr.t0),delete this.channels[de];case 20:Ie++,gr.next=6;break;case 23:case"end":return gr.stop()}},_,this,[[8,16]])}))},L.leave=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},_),de.next=3,this.core.sendCmd("signalingLeave",{tag:hc(_)});case 3:delete this.channels[_.channelId];case 4:case"end":return de.stop()}},re,this)}))},L.invite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:wC}},_),de.next=3,this.core.sendCmd("signalingInvite",{tag:hc(_)});case 3:case"end":return de.stop()}},re,this)}))},L.cancelInvite=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},_),de.next=3,this.core.sendCmd("signalingCancelInvite",{tag:hc(_)});case 3:case"end":return de.stop()}},re,this)}))},L.reject=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de;return sr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},_),Ie=_.fromAccid,(de=Es(_,["fromAccid"])).toAccid=Ie,Dt.next=5,this.core.sendCmd("signalingReject",{tag:hc(de)});case 5:case"end":return Dt.stop()}},re,this)}))},L.accept=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){var Ie,de,Lt,Dt,dr;return sr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},autoJoin:{type:"boolean",required:!1},uid:{type:"number",min:0,required:!1},joinAttachExt:{type:"string",required:!1}},_),Ie=_.autoJoin,de=_.joinAttachExt,Lt=_.fromAccid,(Dt=Es(_,["autoJoin","joinAttachExt","fromAccid"])).toAccid=Lt,vr.next=5,this.core.sendCmd("signalingAccept",{tag:hc(Dt)});case 5:if(this.logger.log("Signaling:accept, accept success, autoJoin "+_.autoJoin),!Ie){vr.next=10;break}return dr={channelId:_.channelId,needOffline:_.needOffline,attachExt:de,uid:_.uid},vr.next=10,this.join(dr);case 10:case"end":return vr.stop()}},re,this)}))},L.sendCustomCommand=function(_){return Sn(this,void 0,void 0,sr.mark(function re(){return sr.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return En({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},attachExt:{type:"string",required:!1}},_),de.next=3,this.core.sendCmd("signalingSendCustomCommand",{tag:hc(_)});case 3:case"end":return de.stop()}},re,this)}))},L.signalingRecvNotificationHandler=function(_){var re=typeof As(_,"raw.r[0]")=="number"?""+_.raw.r[0]:void 0;_.content.data.msgId=re,this.doNotify(_.content.data),re&&_o(re)&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:[re]})},L.signalingMultiSyncNotificationHandler=function(_){this.doNotify(_.content.data,zh.kSelfSync)},L.doNotify=function(_,re){re===void 0&&(re=zh.kDefault);var Ie=function(jr,zr){zr===void 0&&(zr=zh.kDefault);var Hr=Xs(Yy,jr),Kr=Hr.attach,kn=Hr.time,Jn=Hr.msgId;Hr.fromAccid,Hr.toAccid,Hr.members,Hr.requestId,Hr.pushInfo;var Hn=Es(Hr,["attach","time","msgId","fromAccid","toAccid","members","requestId","pushInfo"]),xo=Kr.type,Ln=Hr.ext;return delete Hr.attach,{metaData:{eventType:xo,channelInfo:Hn,feature:zr,ext:Ln,time:kn,msgId:Jn},rawData:Hr}}(_,re),de=Ie.metaData,Lt=Ie.rawData,Dt=Lt.fromAccid,dr=Lt.toAccid,gr=Lt.members,vr=Lt.requestId,Cr=Lt.pushInfo,xr=Lt.msgId;switch(de.eventType){case Fc.kClose:this.emit("signalingClose",{fromAccid:Dt,metaData:de});break;case Fc.kJoin:this.emit("signalingJoin",{member:gr,metaData:de});break;case Fc.kInvite:this.emit("signalingInvite",{fromAccid:Dt,toAccid:dr,requestId:vr,pushInfo:Cr,metaData:de});break;case Fc.kCancelInvite:this.emit("signalingCancelInvite",{fromAccid:Dt,toAccid:dr,requestId:vr,metaData:de});break;case Fc.kReject:this.emit("signalingReject",{toAccid:dr,requestId:vr,metaData:de});break;case Fc.kAccept:this.emit("signalingAccept",{toAccid:dr,requestId:vr,metaData:de});break;case Fc.kLeave:this.emit("signalingLeave",{fromAccid:Dt,metaData:de});break;case Fc.kCustom:this.emit("signalingCustomCommand",{fromAccid:Dt,metaData:de});break;default:this.logger.warn("signaling:notification, no such a type "+de.eventType,Lt)}return xr},L.signalingSyncNotificationHandler=function(_){var re,Ie,de=this;if(_.content.datas&&_.content.datas.length>0){var Lt=is(re=To(Ie=_.content.datas).call(Ie,function(Dt){return de.doNotify(Dt)})).call(re,function(Dt){return Dt});Lt.length>0&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:Lt})}},L.singalingSyncChannelsHandler=function(_){var re;if(this.timer=0,this.channels={},_.content.datas&&_.content.datas.length>0){var Ie=To(re=_.content.datas).call(re,function(de){return Gd(de)});this.emit("singalingSyncChannels",Ie)}},L.process=function(_){var re=this[_.cmd+"Handler"];return typeof re=="function"?(re.call(this,_),co.resolve(_)):_.error&&!_.error.ignore?co.reject(_.error):co.resolve(_)},M}(Vs.EventEmitter);return Fa.setAdapters(ey),Fa.registerService(ly,"auth"),Fa.registerService(My,"msg"),Fa.registerService(_S,"misc"),Fa.registerService(xy,"user"),Fa.registerService(rC,"session"),Fa.registerService(hC,"team"),Fa.registerService(TC,"systemMessage"),Fa.registerService(CC,"friend"),Fa.registerService(S,"event"),Fa.registerService(z,"msgExtend"),Fa.registerService(vn,"msgLog"),Fa.registerService(Dn,"passThrough"),Fa.registerService(Eo,"cloudStorage"),Fa.registerService(FC,"superTeam"),Fa.registerService(qp,"sync"),Fa.registerService(jC,"plugin"),Fa.registerService(HC,"cloudSession"),Fa.registerService(WC,"signaling"),Fa})})(NIM_BROWSER_SDK);var NIM_BROWSER_SDKExports=NIM_BROWSER_SDK.exports;const NIMSDK=getDefaultExportFromCjs(NIM_BROWSER_SDKExports);var NIM_Web_SDK={exports:{}};/*!
 * 
 * VERSION: 9.12.2
 * Git Hash: 4f80425748726d259a3375f1aa196861a10e6b77
 * 
 * Create At: 2023/8/4 下午4:18:45
 * 
 * Target: NIM_Web_SDK
 */(function(module,exports){(function(t,r){module.exports=r()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(n,o,s){e.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:s})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,o){if(1&o&&(n=e(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var a in n)e.d(s,a,(function(i){return n[i]}).bind(null,a));return s},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="",e(e.s=910)}([function(t,r,e){var n=e(58),o=e(2),s=e(6),a=e(15),i=e(5),d=e(170),u=e(69),c=e(138),m=e(32),v=e(7),g=e(8),b=e(10),T=e(196),k=e(139),y=e(26),A=e(17),V=e(462),Ce=e(3),ie=e(85),Oe=e(86),he=e(70),Y=e(59),ae=e(60),Fe=e(61),ze=e(62),pe=e(47),le=e(25);function xe(Pt,Et){var kt=i(Pt);if(Y){var rr=Y(Pt);Et&&(rr=A(rr).call(rr,function(cr){return ae(Pt,cr).enumerable})),kt.push.apply(kt,rr)}return kt}function ue(Pt,Et){var kt=Oe!==void 0&&he(Pt)||Pt["@@iterator"];if(!kt){if(m(Pt)||(kt=function(Ir,kr){var Ar;if(Ir){if(typeof Ir=="string")return Ve(Ir,kr);var Rr=a(Ar=Object.prototype.toString.call(Ir)).call(Ar,8,-1);if(Rr==="Object"&&Ir.constructor&&(Rr=Ir.constructor.name),Rr==="Map"||Rr==="Set")return ie(Ir);if(Rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rr))return Ve(Ir,kr)}}(Pt))||Et&&Pt&&typeof Pt.length=="number"){kt&&(Pt=kt);var rr=0,cr=function(){};return{s:cr,n:function(){return rr>=Pt.length?{done:!0}:{done:!1,value:Pt[rr++]}},e:function(Ir){throw Ir},f:cr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mr,yr=!0,Tr=!1;return{s:function(){kt=kt.call(Pt)},n:function(){var Ir=kt.next();return yr=Ir.done,Ir},e:function(Ir){Tr=!0,mr=Ir},f:function(){try{yr||kt.return==null||kt.return()}finally{if(Tr)throw mr}}}}function Ve(Pt,Et){(Et==null||Et>Pt.length)&&(Et=Pt.length);for(var kt=0,rr=new Array(Et);kt<Et;kt++)rr[kt]=Pt[kt];return rr}var Ue=e(254),er=e(197);function At(Pt){le(Pt)==="object"?(this.callFunc=Pt.callFunc||null,this.message=Pt.message||"UNKNOW ERROR"):this.message=Pt,this.time=new Date,this.timetag=+this.time}e(485);var ur,pr,ar=e(54),hr=ar.getGlobal(),Ne=/\s+/;ar.deduplicate=function(Pt){var Et=[];return o(Pt).call(Pt,function(kt){s(Et).call(Et,kt)===-1&&Et.push(kt)}),Et},ar.capFirstLetter=function(Pt){return Pt?a(Pt=""+Pt).call(Pt,0,1).toUpperCase()+a(Pt).call(Pt,1):""},ar.guid=(ur=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return ur()+ur()+ur()+ur()+ur()+ur()+ur()+ur()}),ar.extend=function(Pt,Et,kt){for(var rr in Et)Pt[rr]!==void 0&&kt!==!0||(Pt[rr]=Et[rr])},ar.filterObj=function(Pt,Et){var kt={};return ar.isString(Et)&&(Et=Et.split(Ne)),o(Et).call(Et,function(rr){Pt.hasOwnProperty(rr)&&(kt[rr]=Pt[rr])}),kt},ar.copy=function(Pt,Et){var kt;return Et=Et||{},Pt&&o(kt=i(Pt)).call(kt,function(rr){ar.exist(Pt[rr])&&(Et[rr]=Pt[rr])}),Et},ar.copyWithNull=function(Pt,Et){var kt;return Et=Et||{},Pt&&o(kt=i(Pt)).call(kt,function(rr){(ar.exist(Pt[rr])||ar.isnull(Pt[rr]))&&(Et[rr]=Pt[rr])}),Et},ar.findObjIndexInArray=function(Pt,Et){Pt=Pt||[];var kt=Et.keyPath||"id",rr=-1;return d(Pt).call(Pt,function(cr,mr){if(er(cr,kt)===Et.value)return rr=mr,!0}),rr},ar.findObjInArray=function(Pt,Et){var kt=ar.findObjIndexInArray(Pt,Et);return kt===-1?null:Pt[kt]},ar.mergeObjArray=function(){var Pt=[],Et=a([]).call(arguments,0,-1),kt=arguments[arguments.length-1];ar.isArray(kt)&&(Et.push(kt),kt={});var rr,cr=kt.keyPath=kt.keyPath||"id";for(kt.sortPath=kt.sortPath||cr;!Pt.length&&Et.length;)Pt=Et.shift()||[],Pt=a(Pt).call(Pt,0);return o(Et).call(Et,function(mr){mr&&o(mr).call(mr,function(yr){(rr=ar.findObjIndexInArray(Pt,{keyPath:cr,value:er(yr,cr)}))!==-1?Pt[rr]=ar.merge({},Pt[rr],yr):Pt.push(yr)})}),kt.notSort||(Pt=ar.sortObjArray(Pt,kt)),Pt},ar.cutObjArray=function(Pt){var Et=a(Pt).call(Pt,0),kt=arguments.length,rr=a([]).call(arguments,1,kt-1),cr=arguments[kt-1];ar.isObject(cr)||(rr.push(cr),cr={});var mr,yr=cr.keyPath=cr.keyPath||"id";return o(rr).call(rr,function(Tr){ar.isArray(Tr)||(Tr=[Tr]),o(Tr).call(Tr,function(Ir){Ir&&(cr.value=er(Ir,yr),(mr=ar.findObjIndexInArray(Et,cr))!==-1&&u(Et).call(Et,mr,1))})}),Et},ar.sortObjArray=function(Pt,Et){var kt=(Et=Et||{}).sortPath||"id";Ue.insensitive=!!Et.insensitive;var rr,cr,mr,yr=!!Et.desc;return mr=ar.isFunction(Et.compare)?Et.compare:function(Tr,Ir){return rr=er(Tr,kt),cr=er(Ir,kt),yr?Ue(cr,rr):Ue(rr,cr)},c(Pt).call(Pt,mr)},ar.emptyFunc=function(){},ar.isEmptyFunc=function(Pt){return Pt===ar.emptyFunc},ar.notEmptyFunc=function(Pt){return Pt!==ar.emptyFunc},ar.splice=function(Pt,Et,kt){return u([]).call(Pt,Et,kt)},ar.reshape2d=function(Pt,Et){if(m(Pt)){ar.verifyParamType("type",Et,"number","util::reshape2d");var kt=Pt.length;if(kt<=Et)return[Pt];for(var rr=Math.ceil(kt/Et),cr=[],mr=0;mr<rr;mr++)cr.push(a(Pt).call(Pt,mr*Et,(mr+1)*Et));return cr}return Pt},ar.flatten2d=function(Pt){if(m(Pt)){var Et=[];return o(Pt).call(Pt,function(kt){Et=v(Et).call(Et,kt)}),Et}return Pt},ar.dropArrayDuplicates=function(Pt){if(m(Pt)){for(var Et={},kt=[];Pt.length>0;)Et[Pt.shift()]=!0;for(var rr in Et)Et[rr]===!0&&kt.push(rr);return kt}return Pt},ar.onError=function(Pt){throw new At(Pt)},ar.verifyParamPresent=function(Pt,Et,kt,rr){kt=kt||"";var cr=!1;switch(ar.typeOf(Et)){case"undefined":case"null":cr=!0;break;case"string":Et===""&&(cr=!0);break;case"StrStrMap":case"object":i(Et).length||(cr=!0);break;case"array":Et.length?d(Et).call(Et,function(mr){if(ar.notexist(mr))return cr=!0,!0}):cr=!0}cr&&ar.onParamAbsent(kt+Pt,rr)},ar.onParamAbsent=function(Pt,Et){ar.onParamError("缺少参数 ".concat(Pt,", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined"),Et)},ar.verifyParamAbsent=function(Pt,Et,kt,rr){kt=kt||"",Et!==void 0&&ar.onParamPresent(kt+Pt,rr)},ar.onParamPresent=function(Pt,Et){ar.onParamError("多余的参数 ".concat(Pt),Et)},ar.verifyParamType=function(Pt,Et,kt,rr){var cr=ar.typeOf(Et).toLowerCase();ar.isArray(kt)||(kt=[kt]),kt=g(kt).call(kt,function(yr){return yr.toLowerCase()});var mr=!0;switch(s(kt).call(kt,cr)===-1&&(mr=!1),cr){case"number":isNaN(Et)&&(mr=!1);break;case"string":kt.join("")==="numeric or numeric string"&&(mr=!!/^[0-9]+$/.test(Et))}mr||ar.onParamInvalidType(Pt,kt,"",rr)},ar.onParamInvalidType=function(Pt,Et,kt,rr){kt=kt||"",Et=ar.isArray(Et)?(Et=g(Et).call(Et,function(cr){return'"'+cr+'"'})).join(", "):'"'+Et+'"',ar.onParamError('参数"'+kt+Pt+'"类型错误, 合法的类型包括: ['+Et+"]",rr)},ar.verifyParamValid=function(Pt,Et,kt,rr){ar.isArray(kt)||(kt=[kt]),s(kt).call(kt,Et)===-1&&ar.onParamInvalidValue(Pt,kt,rr)},ar.onParamInvalidValue=function(Pt,Et,kt){var rr;ar.isArray(Et)||(Et=[Et]),Et=g(Et).call(Et,function(cr){return'"'+cr+'"'}),ar.isArray(Et)&&(Et=Et.join(", ")),ar.onParamError(v(rr="参数 ".concat(Pt,"值错误, 合法的值包括: [")).call(rr,b(Et),"]"),kt)},ar.verifyParamMin=function(Pt,Et,kt,rr){Et<kt&&ar.onParamError("参数"+Pt+"的值不能小于"+kt,rr)},ar.verifyParamMax=function(Pt,Et,kt,rr){Et>kt&&ar.onParamError("参数"+Pt+"的值不能大于"+kt,rr)},ar.verifyArrayMax=function(Pt,Et,kt,rr){Et.length>kt&&ar.onParamError("参数"+Pt+"的长度不能大于"+kt,rr)},ar.verifyEmail=(pr=/^\S+@\S+$/,function(Pt,Et,kt){pr.test(Et)||ar.onParamError("参数"+Pt+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符",kt)}),ar.verifyTel=function(){var Pt=/^[+\-()\d]+$/;return function(Et,kt,rr){Pt.test(kt)||ar.onParamError("参数"+Et+"电话号码格式错误, 合法字符包括+、-、英文括号和数字",rr)}}(),ar.verifyBirth=function(){var Pt=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(Et,kt,rr){Pt.test(kt)||ar.onParamError("参数"+Et+'生日格式错误, 合法为"yyyy-MM-dd"',rr)}}(),ar.onParamError=function(Pt,Et){ar.onError({message:Pt,callFunc:Et})},ar.verifyOptions=function(Pt,Et,kt,rr,cr){if(Pt=Pt||{},Et&&(ar.isString(Et)&&(Et=Et.split(Ne)),ar.isArray(Et))){typeof kt!="boolean"&&(cr=kt||null,kt=!0,rr="");var mr=kt?ar.verifyParamPresent:ar.verifyParamAbsent;o(Et).call(Et,function(yr){mr.call(ar,yr,Pt[yr],rr,cr)})}return Pt},ar.verifyParamAtLeastPresentOne=function(Pt,Et,kt){Et&&(ar.isString(Et)&&(Et=Et.split(Ne)),ar.isArray(Et)&&(d(Et).call(Et,function(rr){return ar.exist(Pt[rr])})||ar.onParamError("以下参数["+Et.join(", ")+"]至少需要传入一个",kt)))},ar.verifyParamPresentJustOne=function(Pt,Et,kt){Et&&(ar.isString(Et)&&(Et=Et.split(Ne)),ar.isArray(Et)&&T(Et).call(Et,function(rr,cr){return ar.exist(Pt[cr])&&rr++,rr},0)!==1&&ar.onParamError("以下参数["+Et.join(", ")+"]必须且只能传入一个",kt))},ar.verifyBooleanWithDefault=function(Pt,Et,kt,rr,cr){ar.undef(kt)&&(kt=!0),Ne.test(Et)&&(Et=Et.split(Ne)),ar.isArray(Et)?o(Et).call(Et,function(mr){ar.verifyBooleanWithDefault(Pt,mr,kt,rr,cr)}):Pt[Et]===void 0?Pt[Et]=kt:ar.isBoolean(Pt[Et])||ar.onParamInvalidType(Et,"boolean",rr,cr)},ar.verifyFileInput=function(Pt,Et){var kt;return ar.verifyParamPresent("fileInput",Pt,"",Et),ar.isString(Pt)&&((Pt=typeof document>"u"?void 0:document.getElementById(Pt))||ar.onParamError("找不到要上传的文件对应的input, 请检查fileInput id ".concat(Pt),Et)),Pt.tagName&&Pt.tagName.toLowerCase()==="input"&&Pt.type.toLowerCase()==="file"||ar.onParamError(v(kt="请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:".concat(Pt.tagName,", filetype:")).call(kt,Pt.type),Et),Pt},ar.verifyFileType=function(Pt,Et){ar.verifyParamValid("type",Pt,ar.validFileTypes,Et)},ar.verifyCallback=function(Pt,Et,kt){Ne.test(Et)&&(Et=Et.split(Ne)),ar.isArray(Et)?o(Et).call(Et,function(rr){ar.verifyCallback(Pt,rr,kt)}):Pt[Et]?ar.isFunction(Pt[Et])||ar.onParamInvalidType(Et,"function","",kt):Pt[Et]=ar.emptyFunc},ar.verifyFileUploadCallback=function(Pt,Et){ar.verifyCallback(Pt,"uploadprogress uploaddone uploaderror uploadcancel",Et)},ar.validFileTypes=["image","audio","video","file"],ar.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},ar.filterFiles=function(Pt,Et){var kt,rr,cr=(Et=Et.toLowerCase())==="file",mr=[];return o([]).call(Pt,function(yr){var Tr,Ir;if(cr)mr.push(yr);else if(kt=a(Tr=yr.name).call(Tr,k(Ir=yr.name).call(Ir,".")+1),(rr=yr.type.split("/"))[0]&&rr[1]){var kr,Ar=!1;rr[0].toLowerCase()===Et?Ar=!0:Ar=s(kr=ar.validFileExts[Et]).call(kr,kt)!==-1,Ar&&mr.push(yr)}}),mr};var or,ir,$e=ar.supportFormData=ar.notundef(hr.FormData);ar.getFileName=function(Pt){return Pt=ar.verifyFileInput(Pt),$e?Pt.files[0].name:a(Et=Pt.value).call(Et,k(kt=Pt.value).call(kt,"\\")+1);var Et,kt},ar.getFileInfo=(or={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(Pt){var Et={};if(!(Pt=ar.verifyFileInput(Pt)).files)return Et;var kt=Pt.files[0];return $e&&(Et.name=kt.name,Et.size=kt.size,Et.type=kt.name.match(/\.(\w+)$/),Et.type=Et.type&&Et.type[1].toLowerCase(),Et.transcodeType=or[Et.type]||0),Et}),ar.sizeText=(ir=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(Pt){var Et,kt=0;do Et=(Pt=Math.floor(100*Pt)/100)+ir[kt],Pt/=1024,kt++;while(Pt>1);return Et}),ar.promises2cmds=function(Pt){return g(Pt).call(Pt,function(Et){return Et.cmd})},ar.objs2accounts=function(Pt){return g(Pt).call(Pt,function(Et){return Et.account})},ar.teams2ids=function(Pt){return g(Pt).call(Pt,function(Et){return Et.teamId})},ar.objs2ids=function(Pt){return g(Pt).call(Pt,function(Et){return Et.id})},ar.getMaxUpdateTime=function(Pt){var Et=g(Pt).call(Pt,function(kt){return+kt.updateTime});return Math.max.apply(Math,Et)},ar.genCheckUniqueFunc=function(Pt){return Pt=Pt||"id",function(Et){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[Pt]=this.uniqueSet[Pt]||{};var kt=this.uniqueSet[Pt],rr=Et[Pt];return!kt[rr]&&(kt[rr]=!0,!0)}},ar.fillPropertyWithDefault=function(Pt,Et,kt){return!!ar.undef(Pt[Et])&&(Pt[Et]=kt,!0)},ar.throttle=function(Pt,Et,kt,rr){var cr,mr,yr=null,Tr=0;kt||(kt={});var Ir=function(){Tr=kt.leading===!1?0:new Date().getTime(),yr=null,Pt.apply(cr,mr),yr||(cr=mr=null)};return function(){var kr=new Date().getTime();Tr||kt.leading!==!1||(Tr=kr);var Ar=Et-(kr-Tr);return cr=this,mr=arguments,Ar<=0||Ar>Et?(clearTimeout(yr),yr=null,Tr=kr,Pt.apply(cr,mr),yr||(cr=mr=null)):yr||kt.trailing===!1?yr&&rr&&rr.apply(cr,mr):(yr=y(Ir,Ar),rr&&rr.apply(cr,mr)),yr}},ar.get=function(Pt,Et){var kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(le(Pt)!=="object")return kt;var rr,cr=Et.replace(/\[(\d+)\]/g,".$1").split("."),mr=Pt,yr=ue(cr);try{for(yr.s();!(rr=yr.n()).done;){var Tr=rr.value;if((mr=Object(mr)[Tr])===void 0)return kt}}catch(Ir){yr.e(Ir)}finally{yr.f()}return mr},ar.pickAsString=function(Pt,Et){var kt;return Pt?g(kt=A(Et).call(Et,function(rr){return Pt[rr]!==void 0})).call(kt,function(rr){var cr;return v(cr="".concat(rr,"=")).call(cr,Pt[rr])}).join(","):""},ar.omitAsString=function(Pt,Et){var kt,rr;if(!Pt)return"";var cr={};return o(Et).call(Et,function(mr){cr[mr]=!0}),g(kt=A(rr=i(Pt)).call(rr,function(mr){return!cr[mr]})).call(kt,function(mr){var yr;return v(yr="".concat(mr,"=")).call(yr,Pt[mr])}).join(",")};var tr={session:function(Pt){var Et=function(rr){for(var cr=1;cr<arguments.length;cr++){var mr,yr,Tr=arguments[cr]!=null?arguments[cr]:{};cr%2?o(mr=xe(Object(Tr),!0)).call(mr,function(Ir){n(rr,Ir,Tr[Ir])}):Fe?ze(rr,Fe(Tr)):o(yr=xe(Object(Tr))).call(yr,function(Ir){pe(rr,Ir,ae(Tr,Ir))})}return rr}({},Pt),kt=["topCustom","localCustom","extra"];return o(kt).call(kt,function(rr){Et[rr]&&(Et[rr]="***")}),Et.lastMsg&&(Et.lastMsg={idServer:Et.lastMsg.idServer,idClient:Et.lastMsg.idClient}),Et}};ar.secureOutput=function(Pt,Et){m(Et)||(Et=[Et]);var kt=tr[Pt];return(Et=g(Et).call(Et,function(rr){return kt(rr)})).length===1?Et[0]:Et};var nr={string:function(Pt,Et,kt){var rr=kt.required,cr=kt.allowEmpty,mr=Pt[Et];return rr===!1&&mr===void 0||typeof mr=="string"&&!(!cr&&mr==="")},number:function(Pt,Et,kt){var rr=kt.required,cr=kt.min,mr=Pt[Et];return rr===!1&&mr===void 0||typeof mr=="number"&&!(mr<cr)},enum:function(Pt,Et,kt){var rr=kt.required,cr=V(kt),mr=Pt[Et];return rr===!1&&mr===void 0||s(cr).call(cr,mr)>-1},array:function(Pt,Et,kt){var rr=kt.required,cr=Pt[Et];return rr===!1&&cr===void 0||!!m(cr)}};ar.validate=function(Pt,Et,kt){var rr,cr={};return o(rr=i(Pt)).call(rr,function(mr){var yr,Tr=Pt[mr].type,Ir=nr[Tr];Ir&&!Ir(Et,mr,Pt[mr])?ar.onError({message:v(yr="Error in parameter verification, ".concat(mr," expected value is ")).call(yr,b(Pt[mr])),callFunc:kt}):cr[mr]=Et[mr]}),cr},ar.asyncPool=function(Pt,Et,kt){if(typeof Pt!="number"||typeof kt!="function"||!Et||!Et.length)return Ce.resolve();var rr=0,cr=[],mr=[];return function yr(){if(rr===Et.length)return Ce.resolve();var Tr=Et[rr++],Ir=Ce.resolve().then(function(){return kt(Tr,Et)});cr.push(Ir);var kr=Ce.resolve();if(Pt<=Et.length){var Ar=Ir.then(function(){return u(mr).call(mr,s(mr).call(mr,Ar),1)});mr.push(Ar),mr.length>=Pt&&(kr=Ce.race(mr))}return kr.then(function(){return yr()})}().then(function(){return Ce.all(cr)})},ar.getIdArray=function(Pt){if(!Pt||typeof Pt!="string")throw new Error("id type error");var Et=s(Pt).call(Pt,"-");if(Et<0||Et===Pt.length-1)throw new Error("id format error");return[a(Pt).call(Pt,0,Et),a(Pt).call(Pt,Et+1)]},t.exports=ar},function(t,r,e){var n=e(14),o=e(76),s=e(155),a=e(16),i=e(90).f,d=e(209),u=e(12),c=e(34),m=e(53),v=e(29),g=function(b){var T=function(k,y,A){if(this instanceof T){switch(arguments.length){case 0:return new b;case 1:return new b(k);case 2:return new b(k,y)}return new b(k,y,A)}return o(b,this,arguments)};return T.prototype=b.prototype,T};t.exports=function(b,T){var k,y,A,V,Ce,ie,Oe,he,Y,ae=b.target,Fe=b.global,ze=b.stat,pe=b.proto,le=Fe?n:ze?n[ae]:(n[ae]||{}).prototype,xe=Fe?u:u[ae]||m(u,ae,{})[ae],ue=xe.prototype;for(V in T)y=!(k=d(Fe?V:ae+(ze?".":"#")+V,b.forced))&&le&&v(le,V),ie=xe[V],y&&(Oe=b.dontCallGetSet?(Y=i(le,V))&&Y.value:le[V]),Ce=y&&Oe?Oe:T[V],y&&typeof ie==typeof Ce||(he=b.bind&&y?c(Ce,n):b.wrap&&y?g(Ce):pe&&a(Ce)?s(Ce):Ce,(b.sham||Ce&&Ce.sham||ie&&ie.sham)&&m(he,"sham",!0),m(xe,V,he),pe&&(v(u,A=ae+"Prototype")||m(u,A,{}),m(u[A],V,Ce),b.real&&ue&&(k||!ue[V])&&m(ue,V,Ce)))}},function(t,r,e){t.exports=e(228)},function(t,r,e){t.exports=e(230)},function(t,r){t.exports=function(e){try{return!!e()}catch{return!0}}},function(t,r,e){t.exports=e(229)},function(t,r,e){t.exports=e(205)},function(t,r,e){t.exports=e(323)},function(t,r,e){t.exports=e(440)},function(t,r,e){t.exports=e(274)},function(t,r,e){t.exports=e(384)},function(t,r,e){var n=e(107),o=Function.prototype,s=o.call,a=n&&o.bind.bind(s,s);t.exports=n?a:function(i){return function(){return s.apply(i,arguments)}}},function(t,r){t.exports={}},function(t,r,e){var n=e(6),o=e(7),s=!1;try{typeof localStorage.setItem=="function"&&typeof localStorage.getItem=="function"&&(localStorage.setItem("nim_localstorage_exist_test","1"),s=localStorage.getItem("nim_localstorage_exist_test")==="1",localStorage.removeItem("nim_localstorage_exist_test"))}catch{s=!1}var a={nodeEnv:"production",info:{hash:"4f80425748726d259a3375f1aa196861a10e6b77",shortHash:"4f804257",version:"9.12.2",sdkVersion:"91202",sdkHumanVersion:"9.12.2",protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",needToXHR:!0,connectTimeout:1e4,xhrTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:s?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:s,privateConf:{isABTestEnable:!0,isDataReportEnable:!0,isMixStoreEnable:!0,reportConfigUrl:"https://statistic.live.126.net/dispatcher/req",reportUrl:"https://statistic.live.126.net/statics/report/common/form"},getDefaultLinkUrl:function(i){var d,u;a.ipVersion===1?(d=a.optionIpv6DefaultLinkUrl,u=a.ipv6DefaultLinkUrl):(d=a.optionDefaultLinkUrl,u=a.defaultLinkUrl);var c=d||(a.isWeixinApp?a.wxDefaultLinkUrl:u);if(!c)return!1;var m=i?"https":"http",v=i?"443":"80",g=c;return n(c).call(c,"http")===-1&&(g=m+"://"+g),n(c).call(c,":")===-1&&(g=g+":"+v),g},ipProbeAddr:{ipv4:"https://check-ipv4.netease.im/test/",ipv6:"https://check-ipv6.netease.im/test/"},formatSocketUrl:function(i){var d=i.url,u=i.secure?"https":"http";return n(d).call(d,"http")===-1?u+"://"+d:d},uploadUrl:"https://nos.netease.com",chunkUploadUrl:"https://wanproxy-web.127.net",commonMaxSize:104857600,chunkSize:4194304,chunkMaxSize:4194304e4,replaceUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHost:"nos.netease.com",downloadHostList:["nos.netease.com"],downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",nosCdnEnable:!0,httpsEnabled:!1,threshold:0,nosLbsUrls:[],edgeList:["https://wanproxy-web.127.net","https://nosup-hz1.127.net"],genUploadUrl:function(i){return a.uploadUrl+"/"+i},genChunkUploadUrl:function(i){return a.chunkUploadUrl?a.chunkUploadUrl+"/"+i.bucket+"/"+i.objectName:""},genDownloadUrl:function(i,d,u){var c,m,v,g,b,T=i.bucket,k=i.expireSec,y=+new Date,A=k?"&survivalTime=".concat(k):"";if(u)return o(v=o(g=o(b="https://".concat(u,"/")).call(b,d,"?createTime=")).call(g,y)).call(v,A);var V=o(c=o(m="".concat(a.replaceUrl,"?createTime=")).call(m,y)).call(c,A);return(V=a.genNosProtocolUrl(V)).replace("{bucket}",T).replace("{object}",d)},genFileUrl:function(i){var d=i.bucket,u=i.objectName;return a.genNosProtocolUrl(a.replaceUrl).replace("{bucket}",d).replace("{object}",u)},genNosProtocolUrl:function(i){return/^http/.test(i)?a.httpsEnabled&&n(i).call(i,"https://")!==0&&(i=i.replace("http","https")):i=a.httpsEnabled?"https://".concat(i):"http://".concat(i),i}};a.hostEnv="BROWSER",t.exports=a},function(t,r,e){(function(n){var o=function(s){return s&&s.Math==Math&&s};t.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof n=="object"&&n)||function(){return this}()||Function("return this")()}).call(this,e(56))},function(t,r,e){t.exports=e(249)},function(t,r,e){var n=e(206),o=n.all;t.exports=n.IS_HTMLDDA?function(s){return typeof s=="function"||s===o}:function(s){return typeof s=="function"}},function(t,r,e){t.exports=e(458)},function(t,r,e){t.exports=e(214)},function(t,r,e){var n=e(107),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},function(t,r,e){var n=e(14),o=e(109),s=e(29),a=e(127),i=e(92),d=e(207),u=o("wks"),c=n.Symbol,m=c&&c.for,v=d?c:c&&c.withoutSetter||a;t.exports=function(g){if(!s(u,g)||!i&&typeof u[g]!="string"){var b="Symbol."+g;i&&s(c,g)?u[g]=c[g]:u[g]=d&&m?m(b):v(b)}return u[g]}},function(t,r,e){var n=e(11);t.exports=n({}.isPrototypeOf)},function(t,r,e){var n=e(12),o=e(29),s=e(133),a=e(38).f;t.exports=function(i){var d=n.Symbol||(n.Symbol={});o(d,i)||a(d,i,{value:s.f(i)})}},function(t,r,e){var n=e(58),o=e(57),s=e(7),a=e(26),i=e(10),d=e(32),u=e(5),c=e(59),m=e(17),v=e(60),g=e(2),b=e(61),T=e(62),k=e(47),y=e(15),A=e(85),V=e(86),Ce=e(70);function ie(le,xe){var ue=V!==void 0&&Ce(le)||le["@@iterator"];if(!ue){if(d(le)||(ue=function(pr,ar){var hr;if(pr){if(typeof pr=="string")return Oe(pr,ar);var Ne=y(hr=Object.prototype.toString.call(pr)).call(hr,8,-1);if(Ne==="Object"&&pr.constructor&&(Ne=pr.constructor.name),Ne==="Map"||Ne==="Set")return A(pr);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Oe(pr,ar)}}(le))||xe&&le&&typeof le.length=="number"){ue&&(le=ue);var Ve=0,Ue=function(){};return{s:Ue,n:function(){return Ve>=le.length?{done:!0}:{done:!1,value:le[Ve++]}},e:function(pr){throw pr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var er,At=!0,ur=!1;return{s:function(){ue=ue.call(le)},n:function(){var pr=ue.next();return At=pr.done,pr},e:function(pr){ur=!0,er=pr},f:function(){try{At||ue.return==null||ue.return()}finally{if(ur)throw er}}}}function Oe(le,xe){(xe==null||xe>le.length)&&(xe=le.length);for(var ue=0,Ve=new Array(xe);ue<xe;ue++)Ve[ue]=le[ue];return Ve}function he(le,xe){var ue=u(le);if(c){var Ve=c(le);xe&&(Ve=m(Ve).call(Ve,function(Ue){return v(le,Ue).enumerable})),ue.push.apply(ue,Ve)}return ue}function Y(le){for(var xe=1;xe<arguments.length;xe++){var ue,Ve,Ue=arguments[xe]!=null?arguments[xe]:{};xe%2?g(ue=he(Object(Ue),!0)).call(ue,function(er){n(le,er,Ue[er])}):b?T(le,b(Ue)):g(Ve=he(Object(Ue))).call(Ve,function(er){k(le,er,v(Ue,er))})}return le}var ae=e(44),Fe=e(0);function ze(le){return Fe.get(le,"code")||Fe.get(le,"msg.code")||Fe.get(le,"statusCode")||Fe.get(le,"event.code")||0}function pe(le){var xe,ue,Ve=typeof le=="string"?le:Fe.get(le,"msg")||Fe.get(le,"message")||Fe.get(le,"error")||Fe.get(le,"event.msg")||Fe.get(le,"event.message")||Fe.get(le,"event")||"unknown",Ue="",er="";le&&typeof le.toString=="function"&&(Ue=le.toString());try{er=i(le)}catch{}return s(xe=s(ue=`
errMsg: `.concat(Ve,`
errStr: `)).call(ue,Ue,`
errJsonStr: `)).call(xe,er,`
  `)}t.exports={reportAPI:function(le){var xe=le.instance,ue=le.className,Ve=le.funcName,Ue=le.hasCallback,er=Ue===void 0||Ue,At=le.done;if(!function(ar){if(!ar||!d(ar.experiments))return!1;var hr,Ne=ie(ar.experiments);try{for(Ne.s();!(hr=Ne.n()).done;){var or=hr.value;if(or.experimentKey==="api_trace_collection"&&or.schemeKey==="open_flow"&&d(or.variates)){var ir,$e=ie(or.variates);try{for($e.s();!(ir=$e.n()).done;){var tr=ir.value;if(tr.key==="open"&&tr.value===!0)return!0}}catch(nr){$e.e(nr)}finally{$e.f()}}}}catch(nr){Ne.e(nr)}finally{Ne.f()}return!1}(xe.abtInfo)||!xe.reporter||!xe.reporter.isUploadEnable)return At;var ur,pr={user_id:Fe.get(xe,"options.account")||"",trace_id:Fe.get(xe,"socket.socket.sessionid"),class_name:ue,api_name:Ve,action:er?1:0,active_id:ae.deviceId,start_time:o()};return er?(ur=a(function(){xe&&xe.logger&&xe.logger.warn("API 数据上报回调函数未调用",pr),xe&&xe.reporter&&xe.reporter.report("nim_api_trace",Y(Y({},pr),{},{state:1,error_code:408,error_msg:"API回调函数未被调用",duration:o()-pr.start_time}))},1e4),function(ar){if(clearTimeout(ur),typeof At=="function"){for(var hr,Ne=arguments.length,or=new Array(Ne>1?Ne-1:0),ir=1;ir<Ne;ir++)or[ir-1]=arguments[ir];At.apply(void 0,s(hr=[ar]).call(hr,or))}try{if(!xe||!xe.reporter)return;ar?xe.reporter.report("nim_api_trace",Y(Y({},pr),{},{state:1,error_code:ze(ar),error_msg:pe(ar),duration:o()-pr.start_time})):xe.reporter.report("nim_api_trace",Y(Y({},pr),{},{state:0,duration:o()-pr.start_time}))}catch($e){xe&&xe.logger&&xe.logger.error("api report error",$e)}}):(xe.reporter.report("nim_api_trace",Y(Y({},pr),{},{state:0,duration:1})),At)}}},function(t,r,e){t.exports=e(271)},function(t,r,e){var n=e(153),o=e(365);function s(a){return t.exports=s=typeof n=="function"&&typeof o=="symbol"?function(i){return typeof i}:function(i){return i&&typeof n=="function"&&i.constructor===n&&i!==n.prototype?"symbol":typeof i},t.exports.__esModule=!0,t.exports.default=t.exports,s(a)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(454)},function(t,r,e){var n=e(4);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,r,e){var n=e(16),o=e(206),s=o.all;t.exports=o.IS_HTMLDDA?function(a){return typeof a=="object"?a!==null:n(a)||a===s}:function(a){return typeof a=="object"?a!==null:n(a)}},function(t,r,e){var n=e(11),o=e(42),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(a,i){return s(o(a),i)}},function(t,r,e){var n=e(12);t.exports=function(o){return n[o+"Prototype"]}},function(t,r,e){var n=e(16),o=e(78),s=TypeError;t.exports=function(a){if(n(a))return a;throw s(o(a)+" is not a function")}},function(t,r,e){t.exports=e(298)},function(t,r,e){var n=e(12),o=e(14),s=e(16),a=function(i){return s(i)?i:void 0};t.exports=function(i,d){return arguments.length<2?a(n[i])||a(o[i]):n[i]&&n[i][d]||o[i]&&o[i][d]}},function(t,r,e){var n=e(155),o=e(31),s=e(107),a=n(n.bind);t.exports=function(i,d){return o(i),d===void 0?i:s?a(i,d):function(){return i.apply(d,arguments)}}},function(t,r,e){var n=e(18),o=e(24),s=e(3),a=e(71),i=e(75),d=e(13),u=e(0),c=e(289),m=u.undef,v=e(308),g=e(147),b=e(151),T=e(779);function k(V){var Ce,ie,Oe,he=this;u.verifyOptions(V,"appKey account token","protocol::IMProtocol"),u.verifyCallback(V,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),Ce=typeof u.get(V,"privateConf.isDataReportEnable")=="boolean"?V.privateConf.isDataReportEnable:d.privateConf.isDataReportEnable,ie=typeof u.get(V,"privateConf.reportConfigUrl")=="string"?V.privateConf.reportConfigUrl:d.privateConf.reportConfigUrl,Oe=typeof u.get(V,"privateConf.reportUrl")=="string"?V.privateConf.reportUrl:d.privateConf.reportUrl,he.reporter=c.initReporter({isDataReportEnable:Ce,reportConfigUrl:ie,reportUrl:Oe,appKey:V.appKey,logger:he.logger}),he.db=V.api.db=new a({logger:V.logger,reporter:he.reporter,account:V.account,core:he,notifyError:function(Y){he.notifyError&&he.notifyError("DB error",Y)}}),i.call(he,V)}var y=i.fn,A=k.fn=k.prototype=n(y);A.init=function(){var V,Ce;y.init.call(this),g.IM.setProtocol(this),this.parser=g.IM,o(V=this.sendCmd).call(V,this),this.socketUrls=[],this.syncing=!0,this.canHandleDeletedMsgInSyncing=!1,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=b.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=s.resolve(),this.sysMsgPromise=s.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=v.getDefaultConfig(),this.msgAckBufferManager=new T({processFn:o(Ce=this.handleMsgsAck).call(Ce,this),throttleTime:500})},A.reset=function(){y.reset.call(this);var V=this.options;this.db.reset(V.db),m(V.lbsUrl)&&(V.lbsUrl=d.lbsUrl),this.autoconnect=!!V.autoconnect,this.resetAutoMarkRead()},A.resetAutoMarkRead=function(){var V=this.options;u.verifyBooleanWithDefault(V,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},A.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},A.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unhandledSysMsgsForDeletedMsgs=[],this.unupdatedSysMsgs=[]},A.packetFromSync=function(V){return!V.obj||!!V.obj.sync},t.exports=k,e(780),e(781),e(782),e(802),e(804),e(805),e(806),e(807),e(808),e(809),e(810),e(815),e(816),e(817),e(818),e(822),e(823),e(824),e(825),e(826),e(827)},function(t,r,e){var n=e(28),o=String,s=TypeError;t.exports=function(a){if(n(a))return a;throw s(o(a)+" is not an object")}},function(t,r,e){var n=e(78);t.exports=function(o){if(typeof o=="object"&&"size"in o&&"has"in o&&"get"in o&&"set"in o&&"delete"in o&&"entries"in o)return o;throw TypeError(n(o)+" is not a map")}},function(t,r,e){var n=e(27),o=e(208),s=e(210),a=e(36),i=e(125),d=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;r.f=n?s?function(m,v,g){if(a(m),v=i(v),a(g),typeof m=="function"&&v==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var b=c(m,v);b&&b.writable&&(m[v]=g.value,g={configurable:"configurable"in g?g.configurable:b.configurable,enumerable:"enumerable"in g?g.enumerable:b.enumerable,writable:!1})}return u(m,v,g)}:u:function(m,v,g){if(a(m),v=i(v),a(g),o)try{return u(m,v,g)}catch{}if("get"in g||"set"in g)throw d("Accessors not supported");return"value"in g&&(m[v]=g.value),m}},function(t,r,e){var n=e(18),o=e(73),s=e(35),a=e(13),i=e(828),d=e(147).IM;function u(m){return this.subType="im",this.nosScene=m.nosScene||"im",this.nosSurvivalTime=m.nosSurvivalTime,m.Protocol=s,m.Message=i,m.constructor=u,this.init(m)}u.Protocol=s,u.parser=d,u.use=o.use,u.getInstance=o.getInstance,u.rmAllInstances=o.rmAllInstances,u.genInstanceName=function(m){return"NIM-account-"+m.account};var c=u.fn=u.prototype=n(o.prototype);u.info=c.info=a.info,t.exports=u,e(839),e(840),e(841),e(842),e(843),e(844),e(845),e(846),e(847),e(857),e(868),e(869),e(870),e(871),e(872),e(873),e(874),e(875),e(876),e(879),e(880)},function(t,r,e){var n=e(18),o=e(2),s=e(25);function a(u,c){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=this;v.message=u||m.message||"",s(c)==="object"?(v.event=c,v.code="Other_Error"):c!==void 0&&(v.code=c),v.timetag=+new Date,m!==void 0&&(v.event=m),v.event&&(v.callFunc=v.event.callFunc||null,delete v.event.callFunc)}a.prototype=n(Error.prototype),a.prototype.name="NIMError";var i={201:"客户端版本不对, 需升级sdk",302:"用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",403:"非法操作或没有权限",404:"对象(用户/群/聊天室)不存在",405:"参数长度过长",408:"客户端请求超时",414:"参数错误",415:"服务不可用/没有聊天室服务器可分配",416:"频率控制",417:"重复操作",422:"帐号被禁用",500:"服务器内部错误",501:"数据库操作失败",503:"服务器繁忙",508:"删除有效期过了",509:"已失效",7101:"被拉黑",700:"批量操作部分失败",801:"群人数达到上限",802:"没有权限",803:"群不存在或未发生变化",804:"用户不在群里面",805:"群类型不匹配",806:"创建群数量达到限制",807:"群成员状态不对",809:"已经在群里",811:"强推列表中帐号数量超限",812:"群被禁言",813:"因群数量限制，部分拉人成功",814:"禁止使用群组消息已读服务",815:"群管理员人数上限",816:"批量操作部分失败",997:"协议已失效",998:"解包错误",999:"打包错误",9102:"通道失效",9103:"已经在其他端接听/拒绝过这通电话",11001:"对方离线, 通话不可送达",13002:"聊天室状态异常",13003:"在黑名单中",13004:"在禁言名单中",13006:"聊天室处于整体禁言状态,只有管理员能发言",Connect_Failed:"无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下",Error_Internet_Disconnected:"网断了",Error_Connection_is_not_Established:"连接未建立",Error_Connection_Socket_State_not_Match:"socket状态不对",Error_Timeout:"超时",Param_Error:"参数错误",No_File_Selected:"请选择文件",Wrong_File_Type:"文件类型错误",File_Too_Large:"文件过大",Cross_Origin_Iframe:"不能获取跨域Iframe的内容",Not_Support:"不支持",NO_DB:"无数据库",DB:"数据库错误",Still_In_Team:"还在群里",Session_Exist:"会话已存在",Session_Not_Exist:"会话不存在",Error_Unknown:"未知错误",Operation_Canceled:"操作取消",Sync_Error:"同步数据失败"},d=[200,406,808,810];o(d).call(d,function(u){i[u]=null}),a.genError=function(u){var c=i[u];return c===void 0&&(c="操作失败"),c===null?null:new a(c,u)},a.multiInstance=function(u){return new a("不允许初始化多个实例","Not_Allow_Multi_Instance",u)},a.newNetworkError=function(u){var c="Error_Internet_Disconnected";return new a(i[c],c,u)},a.newConnectError=function(u){var c="Connect_Failed";return new a(i[c]||null,c,u)},a.newConnectionError=function(u){var c="Error_Connection_is_not_Established";return new a(i[c],c,u)},a.newSocketStateError=function(u){var c="Error_Connection_Socket_State_not_Match";return new a(i[c],c,u)},a.newTimeoutError=function(u){var c="Error_Timeout";return new a(i[c],c,u)},a.newFrequencyControlError=function(u){var c=new a(i[416],416,u);return c.from="local",c},a.newParamError=function(u,c){return new a(u||i.Param_Error,"Param_Error",c)},a.newNoFileError=function(u,c){var m="No_File_Selected";return new a(u||i[m],m,c)},a.newWrongFileTypeError=function(u,c){var m="Wrong_File_Type";return new a(u||i[m],m,c)},a.newFileTooLargeError=function(u,c){var m="File_Too_Large";return new a(u||i[m],m,c)},a.newCORSIframeError=function(u){var c="Cross_Origin_Iframe";return new a(i[c],c,u)},a.newSupportError=function(u,c,m){return new a("不支持"+u,"Not_Support_"+c,m)},a.newSupportDBError=function(u){return a.newSupportError("数据库","DB",u)},a.noDBError=function(u){return new a(i.NO_DB,"NO_DB",u)},a.newDBError=function(u){return new a(i.DB,"DB",u)},a.newUnknownError=function(u){var c="Error_Unknown";return new a(i[c],c,u)},a.stillInTeamError=function(u){var c="Still_In_Team";return new a(i[c],c,u)},a.sessionExist=function(u){var c="Session_Exist";return new a(i[c],c,u)},a.sessionNotExist=function(u){var c="Session_Not_Exist";return new a(i[c],c,u)},a.cancel=function(u){var c="Operation_Canceled";return new a(i[c],c,u)},a.syncError=function(u){return new a(i.Sync_Error,"Sync_Error",u)},a.customError=function(u,c){u=u||"Other_Error";var m="";return(c=c||{}).message||(m=i[u]||u),s(u)!=="object"?new a(m,u,c):new a(m,"Other_Error",c===void 0?u:c)},t.exports=a},function(t,r,e){t.exports=e(303)},function(t,r,e){var n=e(108),o=Object;t.exports=function(s){return o(n(s))}},function(t,r,e){var n=e(124),o=e(108);t.exports=function(s){return n(o(s))}},function(t,r,e){var n=e(0),o={init:function(){o.deviceId=n.guid()}};o.init(),o.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"},o.db={open:function(){}},o.rnfs=null,t.exports=o},function(t,r,e){var n=e(322);t.exports=function(o){return n(o.length)}},function(t,r,e){var n=e(34),o=e(19),s=e(36),a=e(78),i=e(233),d=e(45),u=e(21),c=e(234),m=e(136),v=e(235),g=TypeError,b=function(k,y){this.stopped=k,this.result=y},T=b.prototype;t.exports=function(k,y,A){var V,Ce,ie,Oe,he,Y,ae,Fe=A&&A.that,ze=!(!A||!A.AS_ENTRIES),pe=!(!A||!A.IS_RECORD),le=!(!A||!A.IS_ITERATOR),xe=!(!A||!A.INTERRUPTED),ue=n(y,Fe),Ve=function(er){return V&&v(V,"normal",er),new b(!0,er)},Ue=function(er){return ze?(s(er),xe?ue(er[0],er[1],Ve):ue(er[0],er[1])):xe?ue(er,Ve):ue(er)};if(pe)V=k.iterator;else if(le)V=k;else{if(!(Ce=m(k)))throw g(a(k)+" is not iterable");if(i(Ce)){for(ie=0,Oe=d(k);Oe>ie;ie++)if((he=Ue(k[ie]))&&u(T,he))return he;return new b(!1)}V=c(k,Ce)}for(Y=pe?k.next:V.next;!(ae=o(Y,V)).done;){try{he=Ue(ae.value)}catch(er){v(V,"throw",er)}if(typeof he=="object"&&he&&u(T,he))return he}return new b(!1)}},function(t,r,e){t.exports=e(247)},function(t,r){t.exports=!0},function(t,r,e){var n=e(65),o=String;t.exports=function(s){if(n(s)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(s)}},function(t,r,e){var n=e(256),o=typeof self=="object"&&self&&self.Object===Object&&self,s=n||o||Function("return this")();t.exports=s},function(t,r,e){var n=e(716);t.exports=function(o,s,a){return a?n(o.entries(),function(i){return s(i[1],i[0])}):o.forEach(s)}},function(t,r,e){t.exports=e(559)},function(t,r,e){var n=e(27),o=e(38),s=e(77);t.exports=n?function(a,i,d){return o.f(a,i,s(1,d))}:function(a,i,d){return a[i]=d,a}},function(t,r,e){(function(n){var o=e(15),s=e(26),a=e(6),i=e(139),d=e(2),u=e(10),c=e(5),m=e(138),v=e(3),g=e(85),b=e(86),T=e(70),k=e(32);function y(kt,rr){var cr=b!==void 0&&T(kt)||kt["@@iterator"];if(!cr){if(k(kt)||(cr=function(Ar,Rr){var Mn;if(Ar){if(typeof Ar=="string")return A(Ar,Rr);var Or=o(Mn=Object.prototype.toString.call(Ar)).call(Mn,8,-1);if(Or==="Object"&&Ar.constructor&&(Or=Ar.constructor.name),Or==="Map"||Or==="Set")return g(Ar);if(Or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Or))return A(Ar,Rr)}}(kt))||rr&&kt&&typeof kt.length=="number"){cr&&(kt=cr);var mr=0,yr=function(){};return{s:yr,n:function(){return mr>=kt.length?{done:!0}:{done:!1,value:kt[mr++]}},e:function(Ar){throw Ar},f:yr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Tr,Ir=!0,kr=!1;return{s:function(){cr=cr.call(kt)},n:function(){var Ar=cr.next();return Ir=Ar.done,Ar},e:function(Ar){kr=!0,Tr=Ar},f:function(){try{Ir||cr.return==null||cr.return()}finally{if(kr)throw Tr}}}}function A(kt,rr){(rr==null||rr>kt.length)&&(rr=kt.length);for(var cr=0,mr=new Array(rr);cr<rr;cr++)mr[cr]=kt[cr];return mr}var V=e(486);function Ce(){return typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{}}function ie(kt){var rr;return o(rr=Object.prototype.toString.call(kt)).call(rr,8,-1)}function Oe(kt){return ie(kt).toLowerCase()}function he(kt){return Oe(kt)==="string"}function Y(kt){return Oe(kt)==="number"}function ae(kt){return Oe(kt)==="array"}function Fe(kt){return typeof kt=="function"}function ze(kt){return Oe(kt)==="date"}function pe(kt){return kt===null}function le(kt){return kt!==null}function xe(kt){return kt===void 0}function ue(kt){return kt!==void 0}function Ve(kt){return ue(kt)&&le(kt)}function Ue(kt){return xe(kt)||pe(kt)}function er(kt){return Ve(kt)&&Oe(kt)==="object"}var At=function(kt,rr,cr){kt.addEventListener?kt.addEventListener(rr,cr,!1):kt.attachEvent&&kt.attachEvent("on"+rr,cr)},ur=At,pr=function(kt,rr,cr){kt.removeEventListener?kt.removeEventListener(rr,cr,!1):kt.detachEvent&&kt.detachEvent("on"+rr,cr)},ar=pr;function hr(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},cr=arguments.length>2?arguments[2]:void 0;for(var mr in kt)kt.hasOwnProperty(mr)&&rr.call(cr,mr,kt[mr])}function Ne(kt,rr){hr(rr,function(cr,mr){kt[cr]=mr})}var or,ir=(or=0,function(){return""+or++});function $e(kt){return he(kt)&&a(kt).call(kt,"{")===0&&i(kt).call(kt,"}")===kt.length-1}function tr(kt,rr,cr){if(!kt)return"";var mr=[];return hr(kt,function(yr,Tr){Fe(Tr)||(ze(Tr)?Tr=Tr.getTime():ae(Tr)?Tr=Tr.join(","):er(Tr)&&(Tr=u(Tr)),cr&&(Tr=encodeURIComponent(Tr)),mr.push(encodeURIComponent(yr)+"="+Tr))}),mr.join(rr||",")}var nr,Pt=(nr=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(kt){return nr.test(kt||"")?RegExp.$1.toLowerCase():""});function Et(kt){var rr=Ce();return kt.tagName&&kt.tagName.toUpperCase()==="INPUT"||rr.Blob&&kt instanceof rr.Blob}t.exports={o:{},emptyObj:{},f:function(){},emptyFunc:function(){},regBlank:/\s+/gi,regWhiteSpace:/\s+/gi,getGlobal:Ce,getClass:ie,typeOf:Oe,isString:he,isNumber:Y,isInt:function(kt){return Y(kt)&&kt%1==0},isBoolean:function(kt){return Oe(kt)==="boolean"},isArray:ae,isFunction:Fe,isDate:ze,isRegExp:function(kt){return Oe(kt)==="regexp"},isError:function(kt){return Oe(kt)==="error"},isnull:pe,notnull:le,undef:xe,notundef:ue,exist:Ve,notexist:Ue,isObject:er,isEmpty:function(kt){return Ue(kt)||(he(kt)||ae(kt))&&kt.length===0},remove:function(kt){kt.parentNode&&kt.parentNode.removeChild(kt)},dataset:function(kt,rr,cr){if(!Ve(cr))return kt.getAttribute("data-"+rr);kt.setAttribute("data-"+rr,cr)},addEventListener:At,on:ur,removeEventListener:pr,off:ar,target:function(kt){return kt.target||kt.srcElement},createIframe:function(kt){if(typeof document<"u"){var rr;if((kt=kt||{}).name)try{(rr=document.createElement('<iframe name="'+kt.name+'"></iframe>')).frameBorder=0}catch{(rr=document.createElement("iframe")).name=kt.name}else rr=document.createElement("iframe");kt.visible||(rr.style.display="none"),Fe(kt.onload)&&ur(rr,"load",function mr(yr){rr.src&&(kt.multi||ar(rr,"load",mr),kt.onload(yr))}),(kt.parent||document.body).appendChild(rr);var cr=kt.src||"about:blank";return s(function(){rr.src=cr},0),rr}},html2node:function(kt){if(typeof document<"u"){var rr=document.createElement("div");rr.innerHTML=kt;var cr,mr,yr=[];if(rr.children)for(cr=0,mr=rr.children.length;cr<mr;cr++)yr.push(rr.children[cr]);else for(cr=0,mr=rr.childNodes.length;cr<mr;cr++){var Tr=rr.childNodes[cr];Tr.nodeType===1&&yr.push(Tr)}return yr.length>1?rr:yr[0]}},forOwn:hr,mixin:Ne,uniqueID:ir,isJSON:$e,parseJSON:function kt(rr){try{$e(rr)&&(rr=JSON.parse(rr)),er(rr)&&hr(rr,function(cr,mr){switch(Oe(mr)){case"string":case"object":rr[cr]=kt(mr)}})}catch{}return rr},simpleClone:function(kt){return V(kt)},merge:function(){for(var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=arguments.length,cr=new Array(rr>1?rr-1:0),mr=1;mr<rr;mr++)cr[mr-1]=arguments[mr];return d(cr).call(cr,function(yr){Ne(kt,yr)}),kt},fillUndef:function(kt,rr){return hr(rr,function(cr,mr){xe(kt[cr])&&(kt[cr]=mr)}),kt},checkWithDefault:function(kt,rr,cr){var mr=kt[rr]||kt[rr.toLowerCase()];return Ue(mr)&&(mr=cr,kt[rr]=mr),mr},fetch:function(kt,rr){return hr(kt,function(cr){Ve(rr[cr])&&(kt[cr]=rr[cr])}),kt},string2object:function(){var kt,rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",",mr={};return d(kt=rr.split(cr)).call(kt,function(yr){var Tr=yr.split("="),Ir=Tr.shift();Ir&&(mr[decodeURIComponent(Ir)]=decodeURIComponent(Tr.join("=")))}),mr},object2string:tr,genUrlSep:function(kt){return a(kt).call(kt,"?")<0?"?":"&"},object2query:function(kt){return tr(kt,"&",!0)},url2origin:Pt,isFileInput:Et,getKeys:function(kt,rr){var cr=c(kt);return rr&&m(cr).call(cr,function(mr,yr){var Tr=Et(kt[mr]);return Tr===Et(kt[yr])?0:Tr?1:-1}),cr},_get:function(kt,rr){var cr,mr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,yr=rr.replace(/\[(\d+)\]/g,".$1").split("."),Tr=kt,Ir=y(yr);try{for(Ir.s();!(cr=Ir.n()).done;){var kr=cr.value;if((Tr=Object(Tr)[kr])===void 0)return mr}}catch(Ar){Ir.e(Ar)}finally{Ir.f()}return Tr},getPromiseWithAbort:function(kt){var rr={},cr=new v(function(mr,yr){rr.abort=yr});return rr.promise=v.race([kt,cr]),rr}}}).call(this,e(56))},function(t,r,e){var n=e(33),o=e(713),s=n("Map");t.exports={Map:s,set:o("set",2),get:o("get",1),has:o("has",1),remove:o("delete",1),proto:s.prototype}},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,r,e){t.exports=e(581)},function(t,r,e){var n=e(137),o=e(248);t.exports=function(s,a,i){return(a=o(a))in s?n(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(253)},function(t,r,e){t.exports=e(476)},function(t,r,e){t.exports=e(479)},function(t,r,e){t.exports=e(482)},function(t,r,e){var n=e(11),o=n({}.toString),s=n("".slice);t.exports=function(a){return s(o(a),8,-1)}},function(t,r,e){var n=e(33);t.exports=n("navigator","userAgent")||""},function(t,r,e){var n=e(161),o=e(16),s=e(63),a=e(20)("toStringTag"),i=Object,d=s(function(){return arguments}())=="Arguments";t.exports=n?s:function(u){var c,m,v;return u===void 0?"Undefined":u===null?"Null":typeof(m=function(g,b){try{return g[b]}catch{}}(c=i(u),a))=="string"?m:d?s(c):(v=s(c))=="Object"&&o(c.callee)?"Arguments":v}},function(t,r,e){var n=e(53);t.exports=function(o,s,a,i){return i&&i.enumerable?o[s]=a:n(o,s,a),o}},function(t,r,e){e(82);var n=e(356),o=e(14),s=e(65),a=e(53),i=e(99),d=e(20)("toStringTag");for(var u in n){var c=o[u],m=c&&c.prototype;m&&s(m)!==d&&a(m,d,u),i[u]=i.Array}},function(t,r,e){var n=e(31),o=TypeError,s=function(a){var i,d;this.promise=new a(function(u,c){if(i!==void 0||d!==void 0)throw o("Bad Promise constructor");i=u,d=c}),this.resolve=n(i),this.reject=n(d)};t.exports.f=function(a){return new s(a)}},function(t,r,e){t.exports=e(427)},function(t,r,e){t.exports=e(470)},function(t,r,e){var n=e(766);n.fn=n.prototype,t.exports=n,e(768),e(769),e(770),e(771),e(772),e(773),e(774),e(775),e(776),e(777),e(778)},function(t,r,e){var n=e(25),o=e(5),s=e(10),a=e(17),i=e(2),d=e(8),u=e(15),c=e(85),m=e(86),v=e(70),g=e(32);function b(pe,le){var xe=m!==void 0&&v(pe)||pe["@@iterator"];if(!xe){if(g(pe)||(xe=function(ur,pr){var ar;if(ur){if(typeof ur=="string")return T(ur,pr);var hr=u(ar=Object.prototype.toString.call(ur)).call(ar,8,-1);if(hr==="Object"&&ur.constructor&&(hr=ur.constructor.name),hr==="Map"||hr==="Set")return c(ur);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return T(ur,pr)}}(pe))||le&&pe&&typeof pe.length=="number"){xe&&(pe=xe);var ue=0,Ve=function(){};return{s:Ve,n:function(){return ue>=pe.length?{done:!0}:{done:!1,value:pe[ue++]}},e:function(ur){throw ur},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue,er=!0,At=!1;return{s:function(){xe=xe.call(pe)},n:function(){var ur=xe.next();return er=ur.done,ur},e:function(ur){At=!0,Ue=ur},f:function(){try{er||xe.return==null||xe.return()}finally{if(At)throw Ue}}}}function T(pe,le){(le==null||le>pe.length)&&(le=pe.length);for(var xe=0,ue=new Array(le);xe<le;xe++)ue[xe]=pe[xe];return ue}var k=e(0),y=k.undef,A=k.notundef,V=k.exist,Ce=e(192),ie=e(295),Oe={p2p:0,team:1,superTeam:5},he={0:"p2p",1:"team",5:"superTeam"},Y=o(Oe),ae=ie.typeMap,Fe=ie.validTypes;function ze(pe){k.verifyOptions(pe,"scene to type","msg::Message"),k.verifyParamValid("scene",pe.scene,Y,"msg::Message"),this.scene=Oe[pe.scene],this.to=""+pe.to,this.type=ae[pe.type],this.resend=pe.resend?1:0,pe.resend?(k.verifyOptions(pe,"idClient","msg::Message"),this.idClient=pe.idClient):this.idClient=k.guid(),A(pe.subType)&&(k.isInt(+pe.subType)&&+pe.subType>0?this.subType=+pe.subType:k.onParamError("subType只能是大于0的整数","msg::Message"));var le=pe.replyMsg;le&&le.idServer&&le.from&&le.to&&le.time&&(this.replyMsgFromAccount=le.from,this.replyMsgToAccount=le.to,this.replyMsgTime=le.time,this.replyMsgIdServer=le.idServer,this.replyMsgIdClient=le.idClient,le.threadMsgFromAccount&&le.threadMsgIdServer&&le.threadMsgTime&&le.threadMsgToAccount?(this.threadMsgFromAccount=le.threadMsgFromAccount,this.threadMsgToAccount=le.threadMsgToAccount,this.threadMsgTime=le.threadMsgTime,this.threadMsgIdServer=le.threadMsgIdServer,this.threadMsgIdClient=le.threadMsgIdClient):(this.threadMsgFromAccount=le.from,this.threadMsgToAccount=le.to,this.threadMsgTime=le.time,this.threadMsgIdServer=le.idServer,this.threadMsgIdClient=le.idClient)),A(pe.text)&&(this.body=""+pe.text),A(pe.custom)&&(n(pe.custom)==="object"?this.custom=s(pe.custom):this.custom=""+pe.custom),A(pe.body)&&(this.body=""+pe.body),A(pe.pushContent)&&(this.pushContent=""+pe.pushContent),A(pe.pushPayload)&&(this.pushPayload=""+pe.pushPayload);var xe=pe.apns;if(A(xe)&&pe.scene==="team"){var ue=xe.accounts;A(ue)&&k.verifyParamType("apns.accounts",ue,"array","msg::Message"),this.apnsAccounts=ue?s(ue):"#%@all@%#",this.apnsContent=xe.content||pe.pushContent||"",k.verifyBooleanWithDefault(xe,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=xe.forcePush?1:0}var Ve=pe.robotInfo;A(Ve)&&(pe.scene==="team"&&k.verifyOptions(pe.robotInfo,"account","msg::Message::robotInfo scene === team"),Ve.function&&(this.robotInfoFunction=Ve.function),Ve.topic&&(this.robotInfoTopic=Ve.topic),Ve.customContent&&(this.robotInfoCustomContent=Ve.customContent),Ve.account&&(this.robotInfoAccount=Ve.account)),A(pe.isHistoryable)&&(this.isHistoryable=pe.isHistoryable?1:0),A(pe.isRoamingable)&&(this.isRoamingable=pe.isRoamingable?1:0),A(pe.isSyncable)&&(this.isSyncable=pe.isSyncable?1:0),A(pe.cc)&&(this.cc=pe.cc?1:0),A(pe.env)&&(this.env=pe.env),A(pe.isPushable)&&(this.isPushable=pe.isPushable?1:0),A(pe.isOfflinable)&&(this.isOfflinable=pe.isOfflinable?1:0),A(pe.isUnreadable)&&(this.isUnreadable=pe.isUnreadable?1:0),A(pe.needPushNick)&&(this.needPushNick=pe.needPushNick?1:0),A(pe.needMsgReceipt)&&(this.needMsgReceipt=pe.needMsgReceipt?1:0),A(pe.yidunEnable)&&(this.yidunEnable=pe.yidunEnable?1:0),this.needUpdateSession=pe.needUpdateSession===!1?0:1,A(pe.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=pe.antiSpamUsingYidun?1:0),A(pe.clientAntiSpam)&&(this.clientAntiSpam=pe.clientAntiSpam?1:0),A(pe.antiSpamContent)&&(n(pe.antiSpamContent)==="object"?this.antiSpamContent=s(pe.antiSpamContent):this.antiSpamContent=""+pe.antiSpamContent),A(pe.antiSpamBusinessId)&&(n(pe.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=s(pe.antiSpamBusinessId):this.antiSpamBusinessId=""+pe.antiSpamBusinessId),A(pe.yidunAntiCheating)&&(this.yidunAntiCheating=pe.yidunAntiCheating),A(pe.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=pe.yidunAntiSpamExt)}k.merge(ze.prototype,ie.prototype),ze.prototype.getScene=function(){return he[this.scene]},ze.getType=ie.getType,ze.setFlow=ie.setFlow,ze.reverse=function(pe){var le,xe=he[pe.scene];if(le=pe.delete==="1"?{delete:!0,scene:xe||pe.scene,from:pe.from,time:+pe.time,to:""+pe.to}:{scene:xe||pe.scene,from:pe.from,fromNick:pe.fromNick,fromClientType:Ce.reverseType(pe.fromClientType),fromDeviceId:pe.fromDeviceId,to:""+pe.to,time:+pe.time,type:ze.getType(pe),text:V(pe.body)?pe.body:pe.text||"",isHistoryable:y(pe.isHistoryable)||+pe.isHistoryable==1,isRoamingable:y(pe.isRoamingable)||+pe.isRoamingable==1,isSyncable:y(pe.isSyncable)||+pe.isSyncable==1,cc:y(pe.cc)||+pe.cc==1,isPushable:y(pe.isPushable)||+pe.isPushable==1,isOfflinable:y(pe.isOfflinable)||+pe.isOfflinable==1,isUnreadable:y(pe.isUnreadable)||+pe.isUnreadable==1,isReplyMsg:y(pe.isReplyMsg)||+pe.isReplyMsg==1,needPushNick:y(pe.needPushNick)||+pe.needPushNick==1,needMsgReceipt:+pe.needMsgReceipt==1,isLocal:!1},pe.isInBlackList&&(le.isInBlackList=+pe.isInBlackList==1,le.isInBlackList&&(pe.status="fail")),A(pe.isMuted)&&(le.isMuted=+pe.isMuted==1),A(pe.resend)&&(le.resend=+pe.resend==1),A(pe.idClient)&&(le.idClient=pe.idClient),A(pe.idServer)&&(le.idServer=""+pe.idServer),A(pe.userUpdateTime)&&(le.userUpdateTime=+pe.userUpdateTime),A(pe.custom)&&(le.custom=pe.custom),A(pe.callbackExt)&&(le.callbackExt=pe.callbackExt),A(pe.subType)&&(le.subType=+pe.subType),A(pe.pushContent)&&(le.pushContent=pe.pushContent),A(pe.pushPayload)&&(le.pushPayload=pe.pushPayload),A(pe.tempTeamMemberCount)&&(le.tempTeamMemberCount=+pe.tempTeamMemberCount),A(pe.yidunAntiSpamRes)&&(le.yidunAntiSpamRes=pe.yidunAntiSpamRes),A(pe.apnsAccounts)){if(le.apns={},pe.apnsAccounts!=="#%@all@%#"){var ue=pe.apnsAccounts;try{le.apns.accounts=JSON.parse(ue)}catch{le.apns.accounts=[]}}le.apns.content=pe.apnsContent||"",le.apns.forcePush=+pe.apnsForcePush==1}if(A(pe.robotInfoFunction)&&(le.robotInfo=le.robotInfo||{},pe.robotInfoFunction&&(le.robotInfo.function=pe.robotInfoFunction)),A(pe.robotInfoCustomContent)&&(le.robotInfo=le.robotInfo||{},pe.robotInfoCustomContent&&(le.robotInfo.customContent=pe.robotInfoCustomContent)),A(pe.robotInfoTopic)&&(le.robotInfo=le.robotInfo||{},pe.robotInfoTopic&&(le.robotInfo.topic=pe.robotInfoTopic)),A(pe.robotInfoAccount)&&(le.robotInfo=le.robotInfo||{},pe.robotInfoAccount&&(le.robotInfo.account=pe.robotInfoAccount)),A(pe.needUpdateSession)&&(le.needUpdateSession=+pe.needUpdateSession==1),le.status=pe.status||"success",A(a(pe))&&(le.filter=a(pe)),pe.replyMsgIdServer&&pe.threadMsgIdServer){var Ve=["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"];i(Ve).call(Ve,function(Ue){le[Ue]=pe[Ue]}),le.replyMsgTime=+le.replyMsgTime,le.threadMsgTime=+le.threadMsgTime}return le},ze.setExtra=function(pe,le){pe.target=ze.getMsgTarget(pe,le),pe.sessionId=pe.scene+"-"+pe.target,ie.setFlow(pe,le)},ze.getMsgTarget=function(pe,le){return pe.scene==="p2p"?pe.to===le?pe.from:pe.to:pe.scene==="team"||pe.scene==="superTeam"?pe.to:void 0},ze.deduplication=function(pe){var le,xe,ue={},Ve=b(pe);try{for(Ve.s();!(xe=Ve.n()).done;){var Ue=xe.value,er=ue[Ue.idClient];er&&er.time>Ue.time||(ue[Ue.idClient]=Ue)}}catch(At){Ve.e(At)}finally{Ve.f()}return d(le=o(ue)).call(le,function(At){return ue[At]})},ze.sortMsgs=function(pe){return pe=u(pe).call(pe,0),k.sortObjArray(pe,{sortPath:"time"}),pe},ze.getLastMsg=function(pe){return(pe=ze.sortMsgs(pe))[pe.length-1]},ze.getLastNotIgnoredMsg=function(pe){for(var le=null,xe=(pe=ze.sortMsgs(pe)).length-1;xe>=0;xe--)if(!(le=pe[xe]).ignore)return le;return null},ze.getMaxTimetag=function(pe){return ze.getLastMsg(pe).time},ze.validScenes=Y,ze.validTypes=Fe,ze.sceneMap=Oe,ze.sceneReverseMap=he,t.exports=ze},function(t,r,e){var n=e(25),o=e(18),s=e(32),a=e(2),i=e(378),d=e(6),u=e(5),c=e(10),m=e(3),v=e(169),g=e(0),b=g.notundef,T=e(554),k=e(13),y=(e(183),e(44)),A=e(580).wrapSafeCallback,V=e(23).reportAPI;function Ce(){}var ie={};Ce.getInstance=function(ae){ae=he(ae),g.verifyOptions(ae,"account","api::Base.getInstance");var Fe=this.genInstanceName(ae),ze=ie[Fe];return ze?Ce.updateInstance(ze,ae):ze=ie[Fe]=new this(ae),ze},Ce.updateInstance=function(ae,Fe){ae.setOptions(Fe),ae.connect()};var Oe=Ce.fn=Ce.prototype=o(new v),he=function(ae){return ae.nosSurvivalTime?(g.verifyParamType("nosSurvivalTime",ae.nosSurvivalTime,"number","api::Base.getInstance"),g.verifyParamMin("nosSurvivalTime",ae.nosSurvivalTime,86400,"api::Base.getInstance")):ae.nosSurvivalTime=1/0,ae};Oe.updatePrivateConf=function(ae){if(V({instance:this,className:"ApiBaseFn",funcName:"updatePrivateConf",hasCallback:!1}),ae&&n(ae.privateConf)==="object"){var Fe=ae.privateConf;typeof Fe.lbs_web=="string"&&(ae.lbsUrl=Fe.lbs_web),typeof Fe.link_ssl_web=="boolean"&&(ae.secure=Fe.link_ssl_web),typeof Fe.https_enabled=="boolean"&&(ae.httpsEnabled=Fe.https_enabled),ae.uploadUrl=Fe.nos_uploader_web?Fe.nos_uploader_web:null,ae.chunkUploadUrl=Fe.nos_uploader_web?Fe.nos_uploader_web:null,ae.replaceUrl=Fe.nos_downloader?Fe.nos_downloader:null,ae.downloadUrl=Fe.nos_accelerate?Fe.nos_accelerate:null,ae.downloadHost=Fe.nos_accelerate_host?Fe.nos_accelerate_host:null,ae.downloadHostList=Fe.nos_accelerate_host_list||[],ae.downloadHost&&ae.downloadHostList.push(ae.downloadHost),ae.nosCdnEnable=Fe.nos_cdn_enable!==!1,ae.ntServerAddress=Fe.nt_server||null,ae.kibanaServer=Fe.kibana_server,ae.statisticServer=Fe.statistic_server,ae.reportGlobalServer=Fe.report_global_server,ae.ipVersion=Fe.ip_protocol_version||ae.ipVersion,ae.defaultLink=Fe.link_web||ae.defaultLink,ae.ipv6DefaultLink=Fe.link_ipv6_web||ae.ipv6DefaultLink,typeof Fe.nos_lbs=="string"?ae.nosLbsUrls=[Fe.nos_lbs]:ae.nosLbsUrls=[],s(Fe.nos_edge_list)&&(ae.edgeList=Fe.nos_edge_list)}return ae.ntServerAddress===null||ae.ntServerAddress===""?k.ntServerAddress=null:k.ntServerAddress=ae.ntServerAddress,k.uploadUrl=ae.uploadUrl||k.uploadUrl,k.chunkUploadUrl=ae.chunkUploadUrl||k.chunkUploadUrl,k.downloadUrl=ae.downloadUrl||k.downloadUrl,k.downloadHost=ae.downloadHost||k.downloadHost,k.downloadHostList=ae.downloadHostList&&ae.downloadHostList.length>0?ae.downloadHostList:k.downloadHostList,k.nosCdnEnable=ae.nosCdnEnable!==!1,k.replaceUrl=ae.replaceUrl||k.replaceUrl,k.httpsEnabled=ae.httpsEnabled||k.httpsEnabled,ae.probe_ipv4_url&&(k.ipProbeAddr.ipv4=ae.probe_ipv4_url),ae.probe_ipv6_url&&(k.ipProbeAddr.ipv6=ae.probe_ipv6_url),ae},Oe.init=function(ae){g.verifyOptions(ae,"account","api::Base.init"),ae=this.updatePrivateConf(ae),g.verifyBooleanWithDefault(ae,"exifOrientation",!0,"","api::Base.init"),ae.lbsBackup=ae.lbsBackup===void 0||ae.lbsBackup;var Fe=this.account=ae.account=ae.account+"",ze=ae.constructor.genInstanceName(ae),pe=ie[ze];if(ae._disableSingleton&&(pe=null),pe)return Ce.updateInstance(pe,ae),pe;this.logger=ae.logger=new T({debug:ae.debug,logFunc:ae.logFunc,prefix:this.subType,dbLog:ae.dbLog!==!1,account:ae.account,expire:ae.expire,logLevel:ae.logLevel}),this.options=A(ae,this),ae.api=this;var le=this.protocol=new ae.Protocol(ae);return le.name="Protocol-"+ze,le.account=Fe,le.api=this,le.message=this.message=new ae.Message({account:Fe}),this.reporter=le.reporter,this.statusProtector=le.statusProtector,this.reporterHook=le.reporterHook,this.abtInfo={},(typeof g.get(ae,"privateConf.isABTestEnable")=="boolean"?ae.privateConf.isABTestEnable:k.privateConf.isABTestEnable)&&this.abTestConfigRequset(),this.name=ze,ie[ze]=this,this},Oe.destroy=function(ae){var Fe=this;(ae=ae||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"destroy",done:ae.done});var ze=this;if(!ze.__beginDestroy){var pe;ze.__beginDestroy=!0,ae=ae||{};var le,xe=this.name;if(this.logger.warn("destroy::start"),!xe)return this.logger&&this.logger.warn&&this.logger.warn("destroy::no instanceName"),void(ze.__beginDestroy=void 0);this.protocol&&(pe=this.protocol.connectTimer),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.eventNames&&typeof this.eventNames=="function"&&a(le=this.eventNames()).call(le,function(ue){delete Fe._events[ue]}),this.disconnect({done:function(ue){var Ve,Ue,er;ze.logger.warn("ApiBase::destroy: instance destroyed ..."),ze.__beginDestroy=void 0,ze.reporter.destroy(),ze.statusProtector.destroy(),ze.reporterHook.destroy(),a(Ve=i(ze.options)).call(Ve,function(ur){d(ur).call(ur,"on")===0&&(ze.options[ur]=function(){},ze.protocol.options[ur]=function(){},ze.protocol.api.options[ur]=function(){})}),ze.logger.destroy(),n(ze.protocol.sessionSet)==="object"&&a(Ue=u(ze.protocol.sessionSet)).call(Ue,function(ur){ze.protocol.sessionSet[ur].unreadMsgs=[],ze.protocol.sessionSet[ur]=void 0}),ze.protocol.syncResult={},ze.db&&ze.db.close();var At=ze.protocol;a(er=i(ze)).call(er,function(ur){ze[ur]=void 0}),ie&&(ie[xe]=null,clearTimeout(pe)),At&&(At.__destroyed=!0),ae.done instanceof Function&&ae.done(ue)}})}},Oe.setOptions=function(ae){ae=A(ae,this),this.protocol.setOptions(ae)},Oe.abTestConfigRequset=function(){var ae=this,Fe=ae.options.abTestUrl||"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",ze={projectKey:"im1_sdk_abtest_web",appKey:ae.options.appKey,osType:"Web",sdkVersion:ae.info.version,deviceId:y.deviceId},pe=c({clientInfo:ze});this.protocol.adaptersRequest(Fe,{method:"POST",timeout:5e3,headers:{"Content-Type":"application/json"},data:pe,onload:function(le){var xe=JSON.parse(le);ae.abtInfo=xe.data.abtInfo||{},ae.logger&&ae.logger.info("abTestConfigRequset::success",ae.abtInfo)},onerror:function(){ae.logger&&ae.logger.info("abTestConfigRequset::fail")}},{exception_service:7})},Oe.processCallback=function(ae,Fe){Y(ae,Fe)},Oe.processCallbackPromise=function(ae,Fe){return new m(function(ze,pe){Y(ae,Fe,!0,ze,pe)})};var Y=function(ae,Fe,ze,pe,le){var xe="api::processCallback";ze&&(xe="api::processCallbackPromise"),g.verifyCallback(ae,"done",xe),ae.callback=function(ue,Ve,Ue){var er=ae.callback.options;if(Ve=Ve||er,Fe&&(Ve=er),g.isFunction(ae.cbaop)){var At=ae.cbaop(ue,Ve);b(At)&&(Ve=At)}var ur=ae.done;g.isObject(Ve)&&(delete Ve.done,delete Ve.cb,delete Ve.callback),ze?ue?le({message:"生成接口回调错误",callFunc:xe,event:ue}):pe(Ve):ur(ue,Ve,Ue)},ae.callback.options=g.copy(ae)};Oe.processPs=function(ae){g.notexist(ae.ps)&&(ae.ps=""),g.verifyArrayMax("ps",ae.ps,5e3)},Oe.processCustom=function(ae){g.notexist(ae.custom)&&(ae.custom="")},Oe.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},Oe.sendCmdWithResp=function(ae,Fe,ze){this.sendCmd(ae,Fe,function(pe,le,xe){g.isFunction(ze)&&(pe?ze(pe,le):ze(null,xe))})},Oe.cbAndSendCmd=function(ae,Fe){var ze=this.processCallbackPromise(Fe);return this.sendCmd(ae,Fe),ze},Oe.sendCmdUsePromise=function(ae,Fe){var ze=this,pe=V({instance:this,className:"ApiBaseFn",funcName:ae,hasCallback:!0});return new m(function(le,xe){ze.sendCmd(ae,Fe,function(ue,Ve,Ue){if(ue)typeof pe=="function"&&pe(ue),xe(ue);else{var er=g.merge({},Ve,Ue);typeof pe=="function"&&pe(void 0),le(er)}})})},Ce.use=function(ae,Fe){ae&&ae.install&&g.isFunction(ae.install)&&ae.install(this,Fe)},Ce.rmAllInstances=function(){for(var ae in ie)ie[ae].destroy();ie={}},Oe.logout=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ae.callback=V({instance:this,className:"ApiBaseFn",funcName:"logout",done:ae.callback}),ae=ae||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(ae),this.sendCmd("logout",ae,ae.callback),this.protocol.statusProtector.emit("auth/loginLifeCycleLogout")},t.exports=Ce,e(584),e(585),e(627),e(628),e(638),e(642)},function(t,r,e){(function(n){var o=e(15),s=e(6),a=e(301),i=e(52),d=e(25),u=function(){var c=(n===void 0?"undefined":d(n))==="object"?n:window,m=Math.pow(2,53)-1,v=/\bOpera/,g=Object.prototype,b=g.hasOwnProperty,T=g.toString;function k(he){return(he=String(he)).charAt(0).toUpperCase()+o(he).call(he,1)}function y(he){return he=Oe(he),/^(?:webOS|i(?:OS|P))/.test(he)?he:k(he)}function A(he,Y){for(var ae in he)b.call(he,ae)&&Y(he[ae],ae,he)}function V(he){var Y;return he==null?k(he):o(Y=T.call(he)).call(Y,8,-1)}function Ce(he){return String(he).replace(/([ -])(?!$)/g,"$1?")}function ie(he,Y){var ae=null;return function(Fe,ze){var pe=-1,le=Fe?Fe.length:0;if(typeof le=="number"&&le>-1&&le<=m)for(;++pe<le;)ze(Fe[pe],pe,Fe);else A(Fe,ze)}(he,function(Fe,ze){ae=Y(ae,Fe,ze,he)}),ae}function Oe(he){return String(he).replace(/^ +| +$/g,"")}return function he(Y){var ae=c,Fe=Y&&d(Y)==="object"&&V(Y)!="String";Fe&&(ae=Y,Y=null);var ze=ae.navigator||{},pe=ze.userAgent||"";Y||(Y=pe);var le,xe,ue,Ve,Ue,er=Fe?!!ze.likeChrome:/\bChrome\b/.test(Y)&&!/internal|\n/i.test(T.toString()),At=Fe?"Object":"ScriptBridgingProxyObject",ur=Fe?"Object":"Environment",pr=Fe&&ae.java?"JavaPackage":V(ae.java),ar=Fe?"Object":"RuntimeObject",hr=/\bJava/.test(pr)&&ae.java,Ne=hr&&V(ae.environment)==ur,or=hr?"a":"α",ir=hr?"b":"β",$e=ae.document||{},tr=ae.operamini||ae.opera,nr=v.test(nr=Fe&&tr?tr["[[Class]]"]:V(tr))?nr:tr=null,Pt=Y,Et=[],kt=null,rr=Y==pe,cr=rr&&tr&&typeof tr.version=="function"&&tr.version(),mr=ie([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(Pr,Nr){return Pr||RegExp("\\b"+(Nr.pattern||Ce(Nr))+"\\b","i").exec(Y)&&(Nr.label||Nr)}),yr=function(Pr){return ie(Pr,function(Nr,Wr){return Nr||RegExp("\\b"+(Wr.pattern||Ce(Wr))+"\\b","i").exec(Y)&&(Wr.label||Wr)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Tr=Ar([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Ir=function(Pr){return ie(Pr,function(Nr,Wr,Yr){return Nr||(Wr[Tr]||Wr[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Tr)]||RegExp("\\b"+Ce(Yr)+"(?:\\b|\\w*\\d)","i").exec(Y))&&Yr})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),kr=function(Pr){return ie(Pr,function(Nr,Wr){var Yr=Wr.pattern||Ce(Wr);return!Nr&&(Nr=RegExp("\\b"+Yr+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Y))&&(Nr=function(Ur,qr,Yn){var $n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return qr&&Yn&&/^Win/i.test(Ur)&&!/^Windows Phone /i.test(Ur)&&($n=$n[/[\d.]+$/.exec(Ur)])&&(Ur="Windows "+$n),Ur=String(Ur),qr&&Yn&&(Ur=Ur.replace(RegExp(qr,"i"),Yn)),Ur=y(Ur.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Nr,Yr,Wr.label||Wr)),Nr})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Ar(Pr){return ie(Pr,function(Nr,Wr){var Yr=Wr.pattern||Ce(Wr);return!Nr&&(Nr=RegExp("\\b"+Yr+" *\\d+[.\\w_]*","i").exec(Y)||RegExp("\\b"+Yr+" *\\w+-[\\w]*","i").exec(Y)||RegExp("\\b"+Yr+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Y))&&((Nr=String(Wr.label&&!RegExp(Yr,"i").test(Wr.label)?Wr.label:Nr).split("/"))[1]&&!/[\d.]+/.test(Nr[0])&&(Nr[0]+=" "+Nr[1]),Wr=Wr.label||Wr,Nr=y(Nr[0].replace(RegExp(Yr,"i"),Wr).replace(RegExp("; *(?:"+Wr+"[_-])?","i")," ").replace(RegExp("("+Wr+")[-_.]?(\\w)","i"),"$1 $2"))),Nr})}if(mr&&(mr=[mr]),Ir&&!Tr&&(Tr=Ar([Ir])),(le=/\bGoogle TV\b/.exec(Tr))&&(Tr=le[0]),/\bSimulator\b/i.test(Y)&&(Tr=(Tr?Tr+" ":"")+"Simulator"),yr=="Opera Mini"&&/\bOPiOS\b/.test(Y)&&Et.push("running in Turbo/Uncompressed mode"),yr=="IE"&&/\blike iPhone OS\b/.test(Y)?(Ir=(le=he(Y.replace(/like iPhone OS/,""))).manufacturer,Tr=le.product):/^iP/.test(Tr)?(yr||(yr="Safari"),kr="iOS"+((le=/ OS ([\d_]+)/i.exec(Y))?" "+le[1].replace(/_/g,"."):"")):yr!="Konqueror"||/buntu/i.test(kr)?Ir&&Ir!="Google"&&(/Chrome/.test(yr)&&!/\bMobile Safari\b/i.test(Y)||/\bVita\b/.test(Tr))||/\bAndroid\b/.test(kr)&&/^Chrome/.test(yr)&&/\bVersion\//i.test(Y)?(yr="Android Browser",kr=/\bAndroid\b/.test(kr)?kr:"Android"):yr=="Silk"?(/\bMobi/i.test(Y)||(kr="Android",Et.unshift("desktop mode")),/Accelerated *= *true/i.test(Y)&&Et.unshift("accelerated")):yr=="PaleMoon"&&(le=/\bFirefox\/([\d.]+)\b/.exec(Y))?Et.push("identifying as Firefox "+le[1]):yr=="Firefox"&&(le=/\b(Mobile|Tablet|TV)\b/i.exec(Y))?(kr||(kr="Firefox OS"),Tr||(Tr=le[1])):!yr||(le=!/\bMinefield\b/i.test(Y)&&/\b(?:Firefox|Safari)\b/.exec(yr))?(yr&&!Tr&&/[\/,]|^[^(]+?\)/.test(o(Y).call(Y,s(Y).call(Y,le+"/")+8))&&(yr=null),(le=Tr||Ir||kr)&&(Tr||Ir||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(kr))&&(yr=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(kr)?kr:le)+" Browser")):yr=="Electron"&&(le=(/\bChrome\/([\d.]+)\b/.exec(Y)||0)[1])&&Et.push("Chromium "+le):kr="Kubuntu",cr||(cr=ie(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",Ce(yr),"(?:Firefox|Minefield|NetFront)"],function(Pr,Nr){return Pr||(RegExp(Nr+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Y)||0)[1]||null})),(le=(mr=="iCab"&&a(cr)>3?"WebKit":/\bOpera\b/.test(yr)&&(/\bOPR\b/.test(Y)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(Y)&&!/^(?:Trident|EdgeHTML)$/.test(mr)&&"WebKit"||!mr&&/\bMSIE\b/i.test(Y)&&(kr=="Mac OS"?"Tasman":"Trident")||mr=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(yr)&&"NetFront")&&(mr=[le]),yr=="IE"&&(le=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Y)||0)[1])?(yr+=" Mobile",kr="Windows Phone "+(/\+$/.test(le)?le:le+".x"),Et.unshift("desktop mode")):/\bWPDesktop\b/i.test(Y)?(yr="IE Mobile",kr="Windows Phone 8.x",Et.unshift("desktop mode"),cr||(cr=(/\brv:([\d.]+)/.exec(Y)||0)[1])):yr!="IE"&&mr=="Trident"&&(le=/\brv:([\d.]+)/.exec(Y))&&(yr&&Et.push("identifying as "+yr+(cr?" "+cr:"")),yr="IE",cr=le[1]),rr){if(Ve="global",Ue=(ue=ae)!=null?d(ue[Ve]):"number",/^(?:boolean|number|string|undefined)$/.test(Ue)||Ue=="object"&&!ue[Ve])V(le=ae.runtime)==At?(yr="Adobe AIR",kr=le.flash.system.Capabilities.os):V(le=ae.phantom)==ar?(yr="PhantomJS",cr=(le=le.version||null)&&le.major+"."+le.minor+"."+le.patch):typeof $e.documentMode=="number"&&(le=/\bTrident\/(\d+)/i.exec(Y))?(cr=[cr,$e.documentMode],(le=+le[1]+4)!=cr[1]&&(Et.push("IE "+cr[1]+" mode"),mr&&(mr[1]=""),cr[1]=le),cr=yr=="IE"?String(cr[1].toFixed(1)):cr[0]):typeof $e.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(yr)&&(Et.push("masking as "+yr+" "+cr),yr="IE",cr="11.0",mr=["Trident"],kr="Windows");else if(hr&&(Pt=(le=hr.lang.System).getProperty("os.arch"),kr=kr||le.getProperty("os.name")+" "+le.getProperty("os.version")),Ne){try{cr=ae.require("ringo/engine").version.join("."),yr="RingoJS"}catch{(le=ae.system)&&le.global.system==ae.system&&(yr="Narwhal",kr||(kr=le[0].os||null))}yr||(yr="Rhino")}else d(ae.process)==="object"&&!ae.process.browser&&(le=ae.process)&&(d(le.versions)==="object"&&(typeof le.versions.electron=="string"?(Et.push("Node "+le.versions.node),yr="Electron",cr=le.versions.electron):typeof le.versions.nw=="string"&&(Et.push("Chromium "+cr,"Node "+le.versions.node),yr="NW.js",cr=le.versions.nw)),yr||(yr="Node.js",Pt=le.arch,kr=le.platform,cr=(cr=/[\d.]+/.exec(le.version))?cr[0]:null));kr=kr&&y(kr)}if(cr&&(le=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(cr)||/(?:alpha|beta)(?: ?\d)?/i.exec(Y+";"+(rr&&ze.appMinorVersion))||/\bMinefield\b/i.test(Y)&&"a")&&(kt=/b/i.test(le)?"beta":"alpha",cr=cr.replace(RegExp(le+"\\+?$"),"")+(kt=="beta"?ir:or)+(/\d+\+?/.exec(le)||"")),yr=="Fennec"||yr=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(kr))yr="Firefox Mobile";else if(yr=="Maxthon"&&cr)cr=cr.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Tr))Tr=="Xbox 360"&&(kr=null),Tr=="Xbox 360"&&/\bIEMobile\b/.test(Y)&&Et.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(yr)&&(!yr||Tr||/Browser|Mobi/.test(yr))||kr!="Windows CE"&&!/Mobi/i.test(Y))if(yr=="IE"&&rr)try{ae.external===null&&Et.unshift("platform preview")}catch{Et.unshift("embedded")}else(/\bBlackBerry\b/.test(Tr)||/\bBB10\b/.test(Y))&&(le=(RegExp(Tr.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Y)||0)[1]||cr)?(kr=((le=[le,/BB10/.test(Y)])[1]?(Tr=null,Ir="BlackBerry"):"Device Software")+" "+le[0],cr=null):this!=A&&Tr!="Wii"&&(rr&&tr||/Opera/.test(yr)&&/\b(?:MSIE|Firefox)\b/i.test(Y)||yr=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(kr)||yr=="IE"&&(kr&&!/^Win/.test(kr)&&cr>5.5||/\bWindows XP\b/.test(kr)&&cr>8||cr==8&&!/\bTrident\b/.test(Y)))&&!v.test(le=he.call(A,Y.replace(v,"")+";"))&&le.name&&(le="ing as "+le.name+((le=le.version)?" "+le:""),v.test(yr)?(/\bIE\b/.test(le)&&kr=="Mac OS"&&(kr=null),le="identify"+le):(le="mask"+le,yr=nr?y(nr.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(le)&&(kr=null),rr||(cr=null)),mr=["Presto"],Et.push(le));else yr+=" Mobile";if(le=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Y)||0)[1]){var Rr,Mn;le=[a(le.replace(/\.(\d)$/,".0$1")),le],yr=="Safari"&&o(Rr=le[1]).call(Rr,-1)=="+"?(yr="WebKit Nightly",kt="alpha",cr=o(Mn=le[1]).call(Mn,0,-1)):cr!=le[1]&&cr!=(le[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Y)||0)[1])||(cr=null),le[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Y)||0)[1],le[0]==537.36&&le[2]==537.36&&a(le[1])>=28&&mr=="WebKit"&&(mr=["Blink"]),rr&&(er||le[1])?(mr&&(mr[1]="like Chrome"),le=le[1]||((le=le[0])<530?1:le<532?2:le<532.05?3:le<533?4:le<534.03?5:le<534.07?6:le<534.1?7:le<534.13?8:le<534.16?9:le<534.24?10:le<534.3?11:le<535.01?12:le<535.02?"13+":le<535.07?15:le<535.11?16:le<535.19?17:le<536.05?18:le<536.1?19:le<537.01?20:le<537.11?"21+":le<537.13?23:le<537.18?24:le<537.24?25:le<537.36?26:mr!="Blink"?"27":"28")):(mr&&(mr[1]="like Safari"),le=(le=le[0])<400?1:le<500?2:le<526?3:le<533?4:le<534?"4+":le<535?5:le<537?6:le<538?7:le<601?8:"8"),mr&&(mr[1]+=" "+(le+=typeof le=="number"?".x":/[.+]/.test(le)?"":"+")),yr=="Safari"&&(!cr||i(cr)>45)&&(cr=le)}yr=="Opera"&&(le=/\bzbov|zvav$/.exec(kr))?(yr+=" ",Et.unshift("desktop mode"),le=="zvav"?(yr+="Mini",cr=null):yr+="Mobile",kr=kr.replace(RegExp(" *"+le+"$"),"")):yr=="Safari"&&/\bChrome\b/.exec(mr&&mr[1])&&(Et.unshift("desktop mode"),yr="Chrome Mobile",cr=null,/\bOS X\b/.test(kr)?(Ir="Apple",kr="iOS 4.3+"):kr=null),cr&&s(cr).call(cr,le=/[\d.]+$/.exec(kr))==0&&s(Y).call(Y,"/"+le+"-")>-1&&(kr=Oe(kr.replace(le,""))),mr&&!/\b(?:Avant|Nook)\b/.test(yr)&&(/Browser|Lunascape|Maxthon/.test(yr)||yr!="Safari"&&/^iOS/.test(kr)&&/\bSafari\b/.test(mr[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(yr)&&mr[1])&&(le=mr[mr.length-1])&&Et.push(le),Et.length&&(Et=["("+Et.join("; ")+")"]),Ir&&Tr&&s(Tr).call(Tr,Ir)<0&&Et.push("on "+Ir),Tr&&Et.push((/^on /.test(Et[Et.length-1])?"":"on ")+Tr),kr&&(le=/ ([\d.+]+)$/.exec(kr),xe=le&&kr.charAt(kr.length-le[0].length-1)=="/",kr={architecture:32,family:le&&!xe?kr.replace(le[0],""):kr,version:le?le[1]:null,toString:function(){var Pr=this.version;return this.family+(Pr&&!xe?" "+Pr:"")+(this.architecture==64?" 64-bit":"")}}),(le=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Pt))&&!/\bi686\b/i.test(Pt)?(kr&&(kr.architecture=64,kr.family=kr.family.replace(RegExp(" *"+le),"")),yr&&(/\bWOW64\b/i.test(Y)||rr&&/\w(?:86|32)$/.test(ze.cpuClass||ze.platform)&&!/\bWin64; x64\b/i.test(Y))&&Et.unshift("32-bit")):kr&&/^OS X/.test(kr.family)&&yr=="Chrome"&&a(cr)>=39&&(kr.architecture=64),Y||(Y=null);var Or={};return Or.description=Y,Or.layout=mr&&mr[0],Or.manufacturer=Ir,Or.name=yr,Or.prerelease=kt,Or.product=Tr,Or.ua=Y,Or.version=yr&&cr,Or.os=kr||{architecture:null,family:null,version:null,toString:function(){return"null"}},Or.parse=he,Or.toString=function(){return this.description||""},Or.version&&Et.unshift(cr),Or.name&&Et.unshift(yr),kr&&yr&&(kr!=String(kr).split(" ")[0]||kr!=yr.split(" ")[0]&&!Tr)&&Et.push(Tr?"("+kr+")":"on "+kr),Et.length&&(Or.description=Et.join(" ")),Or}()}();t.exports=u}).call(this,e(56))},function(t,r,e){var n=e(87),o=e(32),s=e(5),a=e(17),i=e(200),d=e(6),u=e(69),c=e(7),m=e(2),v=e(10),g=e(26),b=e(57),T=e(24),k=e(0),y=k.undef,A=e(13),V=e(40),Ce=e(154),ie=Ce.StatusProtector,Oe=(Ce.V2NIMLoginStatus,e(105)),he=Oe.ReporterHook,Y=Oe.EMSyncType,ae=e(643),Fe=e(644);function ze(le){k.undef(le.secure)&&(le.secure=!0),this.options=le,this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var xe=le.defaultLink||le.defaultLinkUrl;k.notundef(xe)&&k.isString(xe)&&(A.optionDefaultLinkUrl=n(xe).call(xe)),k.notundef(le.ipv6DefaultLink)&&k.isString(le.ipv6DefaultLink)&&(A.optionIpv6DefaultLinkUrl=le.ipv6DefaultLink),typeof le.heartbeatInterval=="number"&&(A.heartbeatInterval=le.heartbeatInterval),o(le.nosLbsUrls)&&(A.nosLbsUrls=le.nosLbsUrls);var ue=this.options.socketConcurrent;ue=typeof ue=="number"&&ue>=1&&ue<=3?ue:1,this.options.socketConcurrent=ue,this.options.rollbackDelMsgUnread!==void 0&&typeof this.options.rollbackDelMsgUnread=="boolean"||(this.options.rollbackDelMsgUnread=!0),this.init(),this.connect()}var pe=ze.fn=ze.prototype;pe.init=function(){var le=this;this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.cmdTaskArray=[],this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset(),this.statusProtector=new ie(this),this.reporterHook=new he(this,this.options.reporterHookConfig),this.promiseAbortManager=new ae,this.imsocket=new Fe(this,{socketConcurrent:this.options.socketConcurrent}),this.statusProtector.on("auth/loginLifeCycleLogout",function(){le.promiseAbortManager.clear()}),this.statusProtector.on("auth/loginLifeCycleLoginSucc",function(){le.reporterHook.reset(),le.reporterHook.setOriginTimetick()})},pe.reset=function(){y(this.options.thumbnailToStatic)&&(this.options.thumbnailToStatic=!0),this.resetConnect()},pe.setOptions=function(le){var xe=this.options,ue=s(xe),Ve=s(le),Ue=["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],er=a(Ve).call(Ve,function(ur){return i(Ue).call(Ue,ur)}),At=d(ue).call(ue,"account");k.verifyCallback(le,er,"protocol::IMProtocol"),this.logger.info("setOptions::",k.omitAsString(le,["appKey","token","loginExt","customTag"])),At!==-1&&u(ue).call(ue,At,1),le=k.filterObj(le,ue),this.options=k.merge(xe,le),this.reset()},pe.sendCmd=function(le){var xe,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ve=arguments.length>2?arguments[2]:void 0,Ue=this;Ue.heartbeat();var er,At=le,ur=(le=Ue.parser.createCmd(le,ue)).SER;ue=ue||{},Ue.cmdContentMap[ur]=ue,ue.single&&(delete ue.single,(er=s(ue)).length===1&&(Ue.cmdContentMap[ur]=ue[er[0]])),ue.__exceptionInfo={target:c(xe="".concat(le.SID,"-")).call(xe,le.CID),context:ur,startTime:Ue.reporterHook.getSafeClock()},ue.NOTSTORE&&(er=ue.NOTSTORE.split(" "),m(er).call(er,function(pr){delete ue[pr]}),delete ue.NOTSTORE),(Ve=Ve||ue.callback)&&(Ue.cmdCallbackMap[ur]=Ve),Ue.cmdTaskArray.push({cmdName:At,cmd:v(le)}),Ue.startCmdTaskTimer()},pe.startCmdTaskTimer=function(){var le=this;le.cmdTaskTimer||(le.cmdTaskTimer=g(function(){var xe=le.cmdTaskArray.shift();le.cmdTaskTimer=null,xe&&le.executeCmdTask(xe),le.cmdTaskArray.length&&le.startCmdTaskTimer()},0))},pe.executeCmdTask=function(le){var xe=le.cmdName,ue=le.cmd,Ve=(ue=JSON.parse(ue)).SER;this.isFrequencyControlled(xe)?(this.logger.warn("protocol::executeCmdTask: ".concat(xe," hit freq control")),this.markCallbackInvalid(Ve,V.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:"".concat(xe," hit freq control")}))):this.hasLogin?(xe!=="heartbeat"&&(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(le.cmd)):this.logger.info("protocol::sendCmd: ".concat(xe))),this.doSendCmd(ue)):xe==="login"&&this.isConnected()?(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(le.cmd)):this.logger.info("protocol::sendCmd: ".concat(xe)),this.doSendCmd(ue)):(this.logger.warn("protocol::executeCmdTask: ".concat(xe," not connected or login")),this.markCallbackInvalid(Ve,V.newSocketStateError({callFunc:"protocol::executeCmdTask",message:"".concat(xe," not connected or not login")})))},pe.isFrequencyControlled=function(le){var xe=this.frequencyControlMap&&this.frequencyControlMap[le];if(xe){if(b()<xe.from+xe.duration)return!0;delete this.frequencyControlMap[le]}},pe.doSendCmd=function(le){var xe=this,ue=le.SER,Ve=ue===0?A.hbCmdTimeout:A.cmdTimeout,Ue=new Date().getTime(),er=xe.cmdContentMap[ue];function At(){xe.markCallbackInvalid(ue,V.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser ".concat(ue," socketSendJson Error")})),xe.onDisconnect("protocol::doSendCmd:socketSendJson","broken")}er&&er.__exceptionInfo&&(er.__exceptionInfo.startTime=b()),le.isAwaitable&&(xe.timerMap[ue]=g(function(){var ur;xe.markCallbackInvalid(ue,V.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser ".concat(ue," Timeout Error")})),xe.reporter.reportTraceStart("exceptions",{user_id:k.get(xe,"options.account")||"",trace_id:k.get(xe,"socket.socket.sessionid"),start_time:Ue,action:2,exception_service:6}),xe.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:c(ur="".concat(le.SID,"-")).call(ur,le.CID),context:"".concat(le.SER),net_connect:xe.checkNetworkAvailable()}),xe.reporter.reportTraceEnd("exceptions",1)},Ve));try{xe.socket&&xe.socket.send?xe.socket.send(v(le)):At()}catch{At()}},pe.getObjWithSer=function(le){var xe=this.cmdContentMap[le];return xe&&!xe.isImSyncDataObj&&delete this.cmdContentMap[le],xe&&k.copy(xe)},pe.getCallbackWithSer=function(le){var xe=this.cmdCallbackMap[le];return xe&&!xe.isImSyncDataCb&&delete this.cmdCallbackMap[le],xe},pe.getTimerWithSer=function(le){var xe=this.timerMap[le];return delete this.timerMap[le],xe},pe.clearTimerWithSer=function(le){var xe=this.getTimerWithSer(le);xe&&clearTimeout(xe)},pe.markCallbackInvalid=function(le,xe){this.getObjWithSer(le),this.clearTimerWithSer(le);var ue=this.getCallbackWithSer(le);if(ue){var Ve=ue.options;g(function(){ue(xe||V.newUnknownError({ser:le}),Ve)},0)}},pe.markAllCallbackInvalid=function(le){var xe,ue,Ve=this;m(xe=s(this.cmdCallbackMap)).call(xe,function(Ue){var er=Ve.getObjWithSer(Ue);if(er.__exceptionInfo){var At=er.__exceptionInfo.target,ur=er.__exceptionInfo.context,pr=k.get(le,"event.uploadCode")||le&&le.code;pr=typeof pr!="number"?415:pr;var ar=k.get(le,"event.disconnectReason"),hr=ar?v({disconnect_reason:ar}):le&&le.message||"send cmd failed";Ve.reporter.reportTraceStart("exceptions",{user_id:k.get(Ve,"options.account")||"",trace_id:k.get(Ve,"socket.socket.sessionid"),start_time:Ve.reporterHook.getNTPTime(er.__exceptionInfo.startTime),action:2,exception_service:6}),Ve.reporter.reportTraceUpdateV2("exceptions",{code:pr,description:hr,operation_type:1,target:At,context:ur,net_connect:Ve.checkNetworkAvailable()}),Ve.reporter.reportTraceEnd("exceptions",1),delete er.__exceptionInfo}}),m(ue=s(this.cmdCallbackMap)).call(ue,function(Ue){Ve.markCallbackInvalid(Ue,le)}),Ve.cmdTaskArray=[]},pe.getPacketObj=function(le){var xe=null;if(le&&le.raw){var ue=le.raw.ser;k.notundef(ue)&&(xe=this.getObjWithSer(ue))}return xe},pe.callPacketAckCallback=function(le){var xe=this;if(le&&le.raw){var ue=le.raw.ser;if(k.notundef(ue)){xe.clearTimerWithSer(ue);var Ve=xe.getCallbackWithSer(ue);if(Ve){var Ue;Ve.originUrl&&le.obj&&le.obj.file&&(le.obj.file._url_safe=le.obj.file.url,le.obj.file.url=Ve.originUrl,le.obj.type==="audio"&&(le.obj.file.mp3Url=Ve.originUrl+(~d(Ue=Ve.originUrl).call(Ue,"?")?"&":"?")+"audioTrans&type=mp3")),le.promise?le.promise.then(function(){Ve(le.error,le.obj)},function(er){var At,ur;er.callFunc="protocol::callPacketAckCallback",er.message=c(At=c(ur="Resp Promoise Error: cmd: ".concat(le.cmd,", ser: ")).call(ur,ue,", reason: ")).call(At,er.message);var pr=V.customError("CALLBACK_ACK_ERR",er);xe.logger.error(`protocol::callPacketAckCallback error stack: 
`.concat(er.stack||er.event&&er.event.stack)),Ve(pr,le.obj,le.content)}):Ve(le.error,le.obj,le.content)}}}},pe.onMessage=function(le){var xe=this;xe.heartbeat(),xe.parser.parseResponse(le).then(function(ue){var Ve;if(ue.notFound&&xe.logger.warn("protocol::onMessage: packet not found ".concat(v(ue))),ue.error){var Ue,er;ue.error.message=c(Ue="".concat(ue.cmd," error: ")).call(Ue,ue.error.message),xe.logger.error(c(er="protocol::onMessage: packet error ".concat(v(ue.error),"，raw cmd ")).call(er,ue.rawStr));var At=ue.raw||{};At.code!==408&&At.code!==415&&At.code!==500||xe.reporter.report("nimErrEvent",{code:At.code,module:ue.cmd,accid:xe.account})}ue.__receiveTime=xe.reporterHook.getSafeClock();var ur=Y[c(Ve="kSyncType".concat(ue.raw.sid,"_")).call(Ve,ue.raw.cid)];if(ur){var pr=k.get(ue,"raw.r"),ar=1;if(pr&&pr.length>0){var hr=a(pr).call(pr,function(Pt){return o(Pt)}),Ne=k.get(hr,"0.length");ar=typeof Ne=="number"?Ne:1}xe.reporterHook.emit("reporter/syncItem",ur,ar)}ue.frequencyControlDuration&&(xe.logger.error("protocol::onMessage: server freq control ".concat(v(ue.cmd))),xe.frequencyControlMap=xe.frequencyControlMap||{},xe.frequencyControlMap[ue.cmd]={from:+new Date,duration:ue.frequencyControlDuration}),ue.obj=xe.getPacketObj(ue),ue.obj&&ue.obj.__exceptionInfo&&delete ue.obj.__exceptionInfo,ue.cmd!=="heartbeat"&&(xe.logger.debugEnable?xe.logger.debug("protocol::recvCmd: ".concat(ue.rawStr)):xe.logger.log("protocol::recvCmd: ".concat(ue.cmd)));var or="process"+k.capFirstLetter(ue.service);if(xe[or])if(ue.cmd==="syncDone"){if(xe.cmdCallbackMap[ue.raw.ser]&&xe.cmdCallbackMap[ue.raw.ser].isImSyncDataCb){var ir;xe.cmdCallbackMap[ue.raw.ser].isImSyncDataCb=!1;var $e=T(ir=function(Pt,Et){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[Pt](Et):g($e,300)}).call(ir,xe,or,ue);g(function(){$e.call(xe,or,ue)},10)}}else try{xe[or](ue)}catch(Pt){var tr,nr;xe.logger.warn(c(tr=c(nr="protocol::onMessage: ".concat(or,".")).call(nr,ue.cmd," excute failed ")).call(tr,ue.obj?"":", maybe the packet timed out",": "),Pt.message)}else xe.logger.warn("protocol::onMessage: ".concat(or," not found"));xe.callPacketAckCallback(ue)})},pe.onMiscError=function(le,xe,ue){xe&&this.notifyError(le,xe,ue)},pe.onCustomError=function(le,xe){var ue=V.customError(le,xe),Ve=xe.message||"未知错误";this.onMiscError(Ve,ue)},pe.notifyError=function(le,xe,ue){var Ve;this.isConnected()&&(this.logger.error(c(Ve="".concat(le||""," ")).call(Ve,this.name),xe,ue),this.options.onerror(xe,ue))},pe.emitAPI=function(le){var xe=le.type,ue=le.obj;this.api.emit(xe,ue)},t.exports=ze,e(664),e(680),e(681),e(682),e(683),e(684)},function(t,r,e){var n=e(107),o=Function.prototype,s=o.apply,a=o.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?a.bind(s):function(){return a.apply(s,arguments)})},function(t,r){t.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(t,r){var e=String;t.exports=function(n){try{return e(n)}catch{return"Object"}}},function(t,r,e){var n=e(63);t.exports=Array.isArray||function(o){return n(o)=="Array"}},function(t,r,e){var n,o=e(36),s=e(162),a=e(163),i=e(112),d=e(216),u=e(158),c=e(130),m=c("IE_PROTO"),v=function(){},g=function(k){return"<script>"+k+"<\/script>"},b=function(k){k.write(g("")),k.close();var y=k.parentWindow.Object;return k=null,y},T=function(){try{n=new ActiveXObject("htmlfile")}catch{}var k,y;T=typeof document<"u"?document.domain&&n?b(n):((y=u("iframe")).style.display="none",d.appendChild(y),y.src="javascript:",(k=y.contentWindow.document).open(),k.write(g("document.F=Object")),k.close(),k.F):b(n);for(var A=a.length;A--;)delete T.prototype[a[A]];return T()};i[m]=!0,t.exports=Object.create||function(k,y){var A;return k!==null?(v.prototype=o(k),A=new v,v.prototype=null,A[m]=k):A=T(),y===void 0?A:s.f(A,y)}},function(t,r,e){var n=e(161),o=e(38).f,s=e(53),a=e(29),i=e(334),d=e(20)("toStringTag");t.exports=function(u,c,m,v){if(u){var g=m?u:u.prototype;a(g,d)||o(g,d,{configurable:!0,value:c}),v&&!n&&s(g,"toString",i)}}},function(t,r,e){var n=e(43),o=e(195),s=e(99),a=e(97),i=e(38).f,d=e(165),u=e(166),c=e(48),m=e(27),v=a.set,g=a.getterFor("Array Iterator");t.exports=d(Array,"Array",function(T,k){v(this,{type:"Array Iterator",target:n(T),index:0,kind:k})},function(){var T=g(this),k=T.target,y=T.kind,A=T.index++;return!k||A>=k.length?(T.target=void 0,u(void 0,!0)):u(y=="keys"?A:y=="values"?k[A]:[A,k[A]],!1)},"values");var b=s.Arguments=s.Array;if(o("keys"),o("values"),o("entries"),!c&&m&&b.name!=="values")try{i(b,"name",{value:"values"})}catch{}},function(t,r,e){var n=e(499),o=e(504);t.exports=function(s,a){var i=o(s,a);return n(i)?i:void 0}},function(t,r,e){var n=e(34),o=e(11),s=e(124),a=e(42),i=e(45),d=e(160),u=o([].push),c=function(m){var v=m==1,g=m==2,b=m==3,T=m==4,k=m==6,y=m==7,A=m==5||k;return function(V,Ce,ie,Oe){for(var he,Y,ae=a(V),Fe=s(ae),ze=n(Ce,ie),pe=i(Fe),le=0,xe=Oe||d,ue=v?xe(V,pe):g||y?xe(V,0):void 0;pe>le;le++)if((A||le in Fe)&&(Y=ze(he=Fe[le],le,ae),m))if(v)ue[le]=Y;else if(Y)switch(m){case 3:return!0;case 5:return he;case 6:return le;case 2:u(ue,he)}else switch(m){case 4:return!1;case 7:u(ue,he)}return k?-1:b||T?T:ue}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},function(t,r,e){t.exports=e(299)},function(t,r,e){t.exports=e(217)},function(t,r,e){t.exports=e(573)},function(t,r){t.exports=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}},function(t,r,e){(function(n){var o;t.exports=(o=o||function(s,a){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&n!==void 0&&n.crypto&&(i=n.crypto),!i)try{i=e(886)}catch{}var d=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||function(){function Ce(){}return function(ie){var Oe;return Ce.prototype=ie,Oe=new Ce,Ce.prototype=null,Oe}}(),c={},m=c.lib={},v=m.Base={extend:function(Ce){var ie=u(this);return Ce&&ie.mixIn(Ce),ie.hasOwnProperty("init")&&this.init!==ie.init||(ie.init=function(){ie.$super.init.apply(this,arguments)}),ie.init.prototype=ie,ie.$super=this,ie},create:function(){var Ce=this.extend();return Ce.init.apply(Ce,arguments),Ce},init:function(){},mixIn:function(Ce){for(var ie in Ce)Ce.hasOwnProperty(ie)&&(this[ie]=Ce[ie]);Ce.hasOwnProperty("toString")&&(this.toString=Ce.toString)},clone:function(){return this.init.prototype.extend(this)}},g=m.WordArray=v.extend({init:function(Ce,ie){Ce=this.words=Ce||[],this.sigBytes=ie??4*Ce.length},toString:function(Ce){return(Ce||T).stringify(this)},concat:function(Ce){var ie=this.words,Oe=Ce.words,he=this.sigBytes,Y=Ce.sigBytes;if(this.clamp(),he%4)for(var ae=0;ae<Y;ae++){var Fe=Oe[ae>>>2]>>>24-ae%4*8&255;ie[he+ae>>>2]|=Fe<<24-(he+ae)%4*8}else for(var ze=0;ze<Y;ze+=4)ie[he+ze>>>2]=Oe[ze>>>2];return this.sigBytes+=Y,this},clamp:function(){var Ce=this.words,ie=this.sigBytes;Ce[ie>>>2]&=4294967295<<32-ie%4*8,Ce.length=s.ceil(ie/4)},clone:function(){var Ce=v.clone.call(this);return Ce.words=this.words.slice(0),Ce},random:function(Ce){for(var ie=[],Oe=0;Oe<Ce;Oe+=4)ie.push(d());return new g.init(ie,Ce)}}),b=c.enc={},T=b.Hex={stringify:function(Ce){for(var ie=Ce.words,Oe=Ce.sigBytes,he=[],Y=0;Y<Oe;Y++){var ae=ie[Y>>>2]>>>24-Y%4*8&255;he.push((ae>>>4).toString(16)),he.push((15&ae).toString(16))}return he.join("")},parse:function(Ce){for(var ie=Ce.length,Oe=[],he=0;he<ie;he+=2)Oe[he>>>3]|=parseInt(Ce.substr(he,2),16)<<24-he%8*4;return new g.init(Oe,ie/2)}},k=b.Latin1={stringify:function(Ce){for(var ie=Ce.words,Oe=Ce.sigBytes,he=[],Y=0;Y<Oe;Y++){var ae=ie[Y>>>2]>>>24-Y%4*8&255;he.push(String.fromCharCode(ae))}return he.join("")},parse:function(Ce){for(var ie=Ce.length,Oe=[],he=0;he<ie;he++)Oe[he>>>2]|=(255&Ce.charCodeAt(he))<<24-he%4*8;return new g.init(Oe,ie)}},y=b.Utf8={stringify:function(Ce){try{return decodeURIComponent(escape(k.stringify(Ce)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ce){return k.parse(unescape(encodeURIComponent(Ce)))}},A=m.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(Ce){typeof Ce=="string"&&(Ce=y.parse(Ce)),this._data.concat(Ce),this._nDataBytes+=Ce.sigBytes},_process:function(Ce){var ie,Oe=this._data,he=Oe.words,Y=Oe.sigBytes,ae=this.blockSize,Fe=Y/(4*ae),ze=(Fe=Ce?s.ceil(Fe):s.max((0|Fe)-this._minBufferSize,0))*ae,pe=s.min(4*ze,Y);if(ze){for(var le=0;le<ze;le+=ae)this._doProcessBlock(he,le);ie=he.splice(0,ze),Oe.sigBytes-=pe}return new g.init(ie,pe)},clone:function(){var Ce=v.clone.call(this);return Ce._data=this._data.clone(),Ce},_minBufferSize:0}),V=(m.Hasher=A.extend({cfg:v.extend(),init:function(Ce){this.cfg=this.cfg.extend(Ce),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(Ce){return this._append(Ce),this._process(),this},finalize:function(Ce){return Ce&&this._append(Ce),this._doFinalize()},blockSize:16,_createHelper:function(Ce){return function(ie,Oe){return new Ce.init(Oe).finalize(ie)}},_createHmacHelper:function(Ce){return function(ie,Oe){return new V.HMAC.init(Ce,Oe).finalize(ie)}}}),c.algo={});return c}(Math),o)}).call(this,e(56))},function(t,r,e){var n=e(27),o=e(19),s=e(148),a=e(77),i=e(43),d=e(125),u=e(29),c=e(208),m=Object.getOwnPropertyDescriptor;r.f=n?m:function(v,g){if(v=i(v),g=d(g),c)try{return m(v,g)}catch{}if(u(v,g))return a(!o(s.f,v,g),v[g])}},function(t,r){t.exports=function(e){return e==null}},function(t,r,e){var n=e(93),o=e(4);t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,r,e){var n,o,s=e(14),a=e(64),i=s.process,d=s.Deno,u=i&&i.versions||d&&d.version,c=u&&u.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},function(t,r,e){var n=e(4);t.exports=function(o,s){var a=[][o];return!!a&&n(function(){a.call(null,s||function(){return 1},1)})}},function(t,r,e){var n=e(125),o=e(38),s=e(77);t.exports=function(a,i,d){var u=n(i);u in a?o.f(a,u,s(0,d)):a[u]=d}},function(t,r){},function(t,r,e){var n,o,s,a=e(335),i=e(14),d=e(28),u=e(53),c=e(29),m=e(157),v=e(130),g=e(112),b=i.TypeError,T=i.WeakMap;if(a||m.state){var k=m.state||(m.state=new T);k.get=k.get,k.has=k.has,k.set=k.set,n=function(A,V){if(k.has(A))throw b("Object already initialized");return V.facade=A,k.set(A,V),V},o=function(A){return k.get(A)||{}},s=function(A){return k.has(A)}}else{var y=v("state");g[y]=!0,n=function(A,V){if(c(A,y))throw b("Object already initialized");return V.facade=A,u(A,y,V),V},o=function(A){return c(A,y)?A[y]:{}},s=function(A){return c(A,y)}}t.exports={set:n,get:o,has:s,enforce:function(A){return s(A)?o(A):n(A,{})},getterFor:function(A){return function(V){var Ce;if(!d(V)||(Ce=o(V)).type!==A)throw b("Incompatible receiver, "+A+" required");return Ce}}}},function(t,r,e){var n=e(11);t.exports=n([].slice)},function(t,r){t.exports={}},function(t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}}},function(t,r,e){var n=e(14);t.exports=n.Promise},function(t,r,e){var n=e(645)();t.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){var n=e(286);function o(s,a,i,d,u,c,m){try{var v=s[c](m),g=v.value}catch(b){return void i(b)}v.done?a(g):n.resolve(g).then(d,u)}t.exports=function(s){return function(){var a=this,i=arguments;return new n(function(d,u){var c=s.apply(a,i);function m(g){o(c,d,u,m,v,"next",g)}function v(g){o(c,d,u,m,v,"throw",g)}m(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(e){return e!=null&&typeof e=="object"}},function(t,r,e){var n=e(277),o=e(57),s=e(3),a=e(26),i=e(24),d=e(7),u=e(52),c=e(17),m=e(2),v=e(5),g=e(8),b=e(196),T=e(41),k=e(121),y=e(122),A=e(279),V=e(280),Ce=e(189);function ie(xe){var ue=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ve,Ue=Ce(xe);if(ue){var er=Ce(this).constructor;Ve=n(Ue,arguments,er)}else Ve=Ue.apply(this,arguments);return V(this,Ve)}}var Oe=e(169),he=e(0),Y=e(13).heartbeatInterval,ae=e(154).V2NIMLoginStatus,Fe=e(13),ze={kSyncAction5_1:0,kSyncAction5_2:1,kSyncAction5_3:2},pe={kKnown:-1,kSucceed:0,kFailed:1,kAborted:2,kCanceled:3},le=function(xe){A(Ve,xe);var ue=ie(Ve);function Ve(Ue){var er,At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k(this,Ve),(er=ue.call(this)).clientProto=Ue,er.logger=Ue.logger,er.reporter=Ue.reporter,er.timer=null,er.setClientOrigin(),er.serverOrigin={timeStamp:null,rtt:null,baseTimeStamp:null},er.tolerantRTT=At.tolerantRTT||3e3,er.bestRTT=At.bestRTT||100,er.maxChances=At.maxChances||10,er.isSettingNTP=!1,er.currentChance=0,er.syncTraceData={},er.syncTraceMap={},er.syncTraceLastItem={},er.uploadTraceData={},er.setMonitorForSync(),er.setMonitorForResources(),er}return y(Ve,[{key:"hasOriginTimetick",value:function(){return!!this.serverOrigin.timeStamp}},{key:"setOriginTimetick",value:function(){var Ue=this,er=this.clientProto.options;if((typeof he.get(er,"privateConf.isDataReportEnable")=="boolean"?er.privateConf.isDataReportEnable:Fe.privateConf.isDataReportEnable)&&Fe.isBrowser&&performance&&performance.now&&!(this.isSettingNTP||this.currentChance>=this.maxChances)){this.isSettingNTP=!0,this.currentChance++,clearTimeout(this.timer),this.timer=null;var At="ReporterHook::setOriginTimetick:",ur=o();return this.logger.info("".concat(At," getServerTime start, times ").concat(this.currentChance)),new s(function(pr){Ue.clientProto.sendCmd("getServerTime",{},function(ar,hr){if(Ue.isSettingNTP=!1,ar){var Ne;Ue.logger.warn("".concat(At," Calculate Delay time, getServerTime error"),ar),Ue.clientProto.statusProtector.getLoginStatus()===ae.V2NIM_LOGIN_STATUS_LOGINED&&(Ue.timer=a(i(Ne=Ue.setOriginTimetick).call(Ne,Ue),Y)),pr()}else{if(!hr)return Ue.logger.warn("".concat(At," Calculate Delay time, getServerTime not correct")),void pr();var or,ir=o()-ur;if(ir>Ue.tolerantRTT)Ue.logger.warn("".concat(At," Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(ir)),Ue.timer=a(i(or=Ue.setOriginTimetick).call(or,Ue),Y);else if(ir>Ue.bestRTT){var $e,tr,nr;Ue.serverOrigin.rtt&&ir>=Ue.serverOrigin.rtt?Ue.logger.info("".concat(At," Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(ir)):(Ue.setServerOrigin(ir,hr),Ue.logger.info(d(tr=d(nr="".concat(At," Accept within maximum tolerance range of RTT: ").concat(ir,", ntpTimestamp: ")).call(nr,Ue.serverOrigin.timeStamp,", localClock: ")).call(tr,Ue.serverOrigin.baseTimeStamp))),Ue.timer=a(i($e=Ue.setOriginTimetick).call($e,Ue),Y)}else{var Pt,Et;Ue.setServerOrigin(ir,hr),Ue.logger.info(d(Pt=d(Et="".concat(At," Accept within best RTT: ").concat(ir,", ntpTimestamp: ")).call(Et,Ue.serverOrigin.timeStamp,", localClock: ")).call(Pt,Ue.serverOrigin.baseTimeStamp))}pr()}})})}}},{key:"getNTPTime",value:function(Ue){if(typeof Ue!="number"&&(Ue=this.getSafeClock()),this.serverOrigin.timeStamp){var er=u(Ue-this.serverOrigin.baseTimeStamp);return this.serverOrigin.timeStamp+er}var At=u(Ue-this.clientOrigin.baseTimeStamp);return this.clientOrigin.timeStamp+At}},{key:"getSafeClock",value:function(){return Fe.isBrowser&&performance&&performance.now?performance.now():o()}},{key:"setMonitorForSync",value:function(){var Ue=this,er="ReporterHook::setMonitorForSync:";this.on("reporter/syncStart",function(){Ue.logger.info("".concat(er," sync start")),Ue.syncTraceData={user_id:Ue.clientProto.account,trace_id:he.get(Ue.clientProto,"socket.socket.sessionid"),action:ze.kSyncAction5_1,sync_begin_time:Ue.getSafeClock(),sync_end_time:0,sync_duration:0,overall_duration:0,extension:[]}}),this.on("reporter/syncRecv",function(){Ue.syncTraceData.user_id&&(Ue.logger.info("".concat(er," sync receive packet")),Ue.syncTraceData.sync_end_time=Ue.getSafeClock(),Ue.syncTraceData.sync_duration=u(Ue.syncTraceData.sync_end_time-Ue.syncTraceData.sync_begin_time))}),this.on("reporter/syncItem",function(At,ur){var pr;if(typeof At=="number"&&Ue.syncTraceData.user_id){Ue.logger.info(d(pr="".concat(er," receive sync item: ").concat(At,", total: ")).call(pr,ur));var ar=Ue.getSafeClock();Ue.syncTraceMap[At]=Ue.syncTraceMap[At]?Ue.syncTraceMap[At]:{sync_type:At,times:0,total:0,sync_duration:0,proc_duration:0,description:"",items:[]};var hr={total:ur,pre_item_recv_time:Ue.syncTraceLastItem.cur_item_recv_time?Ue.syncTraceLastItem.cur_item_recv_time:Ue.syncTraceData.sync_begin_time,cur_item_recv_time:ar};Ue.syncTraceMap[At].items.push(hr),Ue.syncTraceLastItem=hr}}),this.on("reporter/syncItemComplete",function(At){var ur;if(typeof At=="number"&&Ue.syncTraceData.user_id){var pr=Ue.syncTraceMap[At];if(pr){Ue.logger.info("".concat(er," sync item ").concat(At," callback done"));var ar=c(ur=pr.items).call(ur,function(hr){return!hr.callback_time});ar.length!==0&&(ar[0].callback_time=Ue.getSafeClock())}}}),this.on("reporter/syncComplete",function(){var At;Ue.syncTraceData.user_id&&(Ue.logger.info("".concat(er," sync complete")),m(At=v(Ue.syncTraceMap)).call(At,function(ur){var pr,ar=g(pr=Ue.syncTraceMap[ur].items).call(pr,function(Ne){return{total:Ne.total,pre_item_recv_time:Ue.getNTPTime(Ne.pre_item_recv_time),cur_item_recv_time:Ue.getNTPTime(Ne.cur_item_recv_time),callback_time:Ue.getNTPTime(Ne.callback_time)}}),hr=b(ar).call(ar,function(Ne,or){return Ne.times+=1,Ne.total+=or.total,Ne.sync_duration+=or.cur_item_recv_time-or.pre_item_recv_time,Ne.proc_duration+=or.callback_time-or.cur_item_recv_time,Ne},{times:0,total:0,sync_duration:0,proc_duration:0});Ue.syncTraceMap[ur].items=ar,T(Ue.syncTraceMap[ur],hr),Ue.syncTraceData.extension.push(Ue.syncTraceMap[ur])}),Ue.syncTraceData.sync_begin_time=Ue.getNTPTime(Ue.syncTraceData.sync_begin_time),Ue.syncTraceData.sync_end_time=Ue.getNTPTime(Ue.syncTraceData.sync_end_time),Ue.syncTraceData.overall_duration=Ue.getNTPTime()-Ue.syncTraceData.sync_begin_time,Ue.reporter.report("nim_sdk_sync",Ue.syncTraceData),Ue.syncTraceData={},Ue.syncTraceMap={})})}},{key:"setMonitorForResources",value:function(){var Ue=this,er="ReporterHook::setMonitorForResources:";this.on("reporter/uploadStart",function(){Ue.logger.info("".concat(er," upload start")),Ue.uploadTraceData={user_id:Ue.clientProto.account,trace_id:he.get(Ue.clientProto,"socket.socket.sessionid"),action:0,duration:0,start_time:Ue.getSafeClock(),offset:0,full_size:0,transferred_size:0}}),this.on("reporter/uploadUpdate",function(){var At,ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue.uploadTraceData.user_id&&(Ue.logger.info("".concat(er," upload update"),ur),m(At=v(ur)).call(At,function(pr){Ue.uploadTraceData[pr]=ur[pr]}))}),this.on("reporter/uploadEnd",function(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe.kKnown;Ue.uploadTraceData.user_id&&(Ue.logger.info("".concat(er," upload end cause of ").concat(At)),Ue.uploadTraceData.state=At,Ue.uploadTraceData.start_time=Ue.getNTPTime(Ue.uploadTraceData.start_time),Ue.uploadTraceData.duration=Ue.getNTPTime(Ue.getSafeClock())-Ue.uploadTraceData.start_time,Ue.reporter.report("nim_sdk_resources",Ue.uploadTraceData),Ue.uploadTraceData={})})}},{key:"destroy",value:function(){this.reset(),this.removeAllListeners(),this.logger.info("ReporterHook::destroy: complete")}},{key:"reset",value:function(){this.logger.info("ReporterHook::reset"),this.serverOrigin={},this.setClientOrigin(),this.currentChance=0,this.timer&&clearTimeout(this.timer),this.syncTraceData={},this.syncTraceMap={},this.syncTraceLastItem={},this.uploadTraceData={}}},{key:"setClientOrigin",value:function(){this.clientOrigin={timeStamp:o(),baseTimeStamp:this.getSafeClock()}}},{key:"setServerOrigin",value:function(Ue,er){this.serverOrigin={timeStamp:er+u(Ue/2),rtt:Ue,baseTimeStamp:this.getSafeClock()}}}]),Ve}(Oe);t.exports={EMSyncAction:ze,EMSyncType:{kSyncType3_8:30008,kSyncType3_109:30109,kSyncType4_4:40004,kSyncType4_6:40006,kSyncType4_9:40009,kSyncType4_12:40012,kSyncType4_13:40013,kSyncType4_14:40014,kSyncType4_16:40016,kSyncType4_17:40017,kSyncType4_18:40018,kSyncType4_19:40019,kSyncType4_20:40020,kSyncType4_21:40021,kSyncType4_23:40023,kSyncType4_24:40024,kSyncType4_100:40100,kSyncType4_101:40101,kSyncType7_15:70015,kSyncType8_109:80109,kSyncType8_126:80126,kSyncType12_5:12005,kSyncType12_6:12006,kSyncType15_13:15013,kSyncType21_109:21109,kSyncType21_111:21111},ReporterHook:le,EMExceptionState:pe,EMResourceUploadWay:{kResourceUploadWayNOS:0,kResourceUploadWayAWSPlugin:1,kResourceUploadWayNOSPlugin:2}}},function(t,r,e){var n=e(6),o=e(15),s=e(2),a=e(7),i=e(200),d=e(17),u=e(85),c=e(86),m=e(70),v=e(32);function g(y,A){var V=c!==void 0&&m(y)||y["@@iterator"];if(!V){if(v(y)||(V=function(ae,Fe){var ze;if(ae){if(typeof ae=="string")return b(ae,Fe);var pe=o(ze=Object.prototype.toString.call(ae)).call(ze,8,-1);if(pe==="Object"&&ae.constructor&&(pe=ae.constructor.name),pe==="Map"||pe==="Set")return u(ae);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return b(ae,Fe)}}(y))||A&&y&&typeof y.length=="number"){V&&(y=V);var Ce=0,ie=function(){};return{s:ie,n:function(){return Ce>=y.length?{done:!0}:{done:!1,value:y[Ce++]}},e:function(ae){throw ae},f:ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Oe,he=!0,Y=!1;return{s:function(){V=V.call(y)},n:function(){var ae=V.next();return he=ae.done,ae},e:function(ae){Y=!0,Oe=ae},f:function(){try{he||V.return==null||V.return()}finally{if(Y)throw Oe}}}}function b(y,A){(A==null||A>y.length)&&(A=y.length);for(var V=0,Ce=new Array(A);V<A;V++)Ce[V]=y[V];return Ce}var T=e(13),k={genUrlSep:function(y){return n(y=""+y).call(y,"?")===-1?"?imageView&":"&"},urlQuery2Object:function(y){if(Object.prototype.toString.call(y)!=="[object String]"||y==="")return{};var A=n(y).call(y,"?");if(A!==-1){var V=o(y).call(y,A+1).split("&"),Ce={};return s(V).call(V,function(ie){if(~n(ie).call(ie,"=")){var Oe=ie.split("=");Ce[Oe[0]]=decodeURIComponent(Oe[1])}else Ce[ie]=""}),Ce}},url2object:function(y){Object.prototype.toString.call(y)!=="[object String]"&&(y="");var A=n(y=y||"").call(y,"https")>=0?"https://":"http://",V=y.replace(A,"");n(V).call(V,"?")>=0&&(V=V.substring(0,n(V).call(V,"?")));var Ce=V.split("/");V=Ce[0];var ie="";if(Ce.length>0&&(ie=o(Ce).call(Ce,1).join("/")),n(y).call(y,"?")===-1)return{protocol:A,hostname:V,path:ie,query:{}};var Oe=y.substr(n(y).call(y,"?")+1).split("&"),he={};return s(Oe).call(Oe,function(Y){if(n(Y).call(Y,"=")>0){var ae=Y.split("=");he[ae[0]]=decodeURIComponent(ae[1])}else he[Y]=""}),{protocol:A,hostname:V,path:ie,query:he}},object2url:function(y){var A,V=y.protocol,Ce=y.hostname,ie=y.path,Oe=y.query;V=V||"http://",Ce=Ce||"",ie&&(Ce=a(A="".concat(Ce,"/")).call(A,ie)),Oe=Oe||{};var he,Y,ae,Fe=[];for(var ze in Oe){var pe;ze!=="imageView"&&Fe.push(a(pe="".concat(ze,"=")).call(pe,encodeURIComponent(Oe[ze])))}return Fe.length>0?a(he=a(Y="".concat(V)).call(Y,Ce,"?imageView&")).call(he,Fe.join("&")):a(ae="".concat(V)).call(ae,Ce)},genPrivateUrl:function(y,A,V){if(A&&A.length){var Ce,ie=g(A);try{for(ie.s();!(Ce=ie.n()).done;){var Oe=Ce.value;if(n(y).call(y,Oe)>=0)return Oe!==V&&(y=y.replace(Oe,V)),y;if(n(y).call(y,Oe)>=0&&Oe===V)return y}}catch(Ne){ie.e(Ne)}finally{ie.f()}}var he,Y,ae=k.url2object(y),Fe=ae.hostname,ze=ae.path,pe=T.downloadUrl,le=T.downloadHostList,xe=T.nosCdnEnable,ue=T.serverNosConfig.cdnDomain,Ve=decodeURIComponent(T.serverNosConfig.objectPrefix),Ue=decodeURIComponent(ze),er=n(Ue).call(Ue,Ve);if(ue&&er>-1&&xe)return a(he=a(Y="".concat(ae.protocol)).call(Y,ue,"/")).call(he,o(Ue).call(Ue,er));if(i(le).call(le,Fe)&&i(ze).call(ze,"/")){var At=n(ze).call(ze,"/"),ur=ze.substring(0,At),pr=ze.substring(At+1);return pe.replace("{bucket}",ur).replace("{object}",pr)}var ar=d(le).call(le,function(Ne){return typeof Fe=="string"&&i(Fe).call(Fe,Ne)})[0],hr=ar?Fe.replace(ar,"").replace(/\W/g,""):null;return hr?pe.replace("{bucket}",hr).replace("{object}",ze):y}};t.exports=k},function(t,r,e){var n=e(4);t.exports=!n(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},function(t,r,e){var n=e(91),o=TypeError;t.exports=function(s){if(n(s))throw o("Can't call method on "+s);return s}},function(t,r,e){var n=e(48),o=e(157);(t.exports=function(s,a){return o[s]||(o[s]=a!==void 0?a:{})})("versions",[]).push({version:"3.27.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,r,e){var n=e(321);t.exports=function(o){var s=+o;return s!=s||s===0?0:n(s)}},function(t,r,e){var n=e(4),o=e(20),s=e(93),a=o("species");t.exports=function(i){return s>=51||!n(function(){var d=[];return(d.constructor={})[a]=function(){return{foo:1}},d[i](Boolean).foo!==1})}},function(t,r){t.exports={}},function(t,r,e){var n=e(371).charAt,o=e(49),s=e(97),a=e(165),i=e(166),d=s.set,u=s.getterFor("String Iterator");a(String,"String",function(c){d(this,{type:"String Iterator",string:o(c),index:0})},function(){var c,m=u(this),v=m.string,g=m.index;return g>=v.length?i(void 0,!0):(c=n(v,g),m.index+=c.length,i(c,!1))})},function(t,r,e){var n=e(63),o=e(14);t.exports=n(o.process)=="process"},function(t,r,e){var n=e(14),o=e(101),s=e(16),a=e(209),i=e(213),d=e(20),u=e(400),c=e(241),m=e(48),v=e(93),g=o&&o.prototype,b=d("species"),T=!1,k=s(n.PromiseRejectionEvent),y=a("Promise",function(){var A=i(o),V=A!==String(o);if(!V&&v===66||m&&(!g.catch||!g.finally))return!0;if(!v||v<51||!/native code/.test(A)){var Ce=new o(function(Oe){Oe(1)}),ie=function(Oe){Oe(function(){},function(){})};if((Ce.constructor={})[b]=ie,!(T=Ce.then(function(){})instanceof ie))return!0}return!V&&(u||c)&&!k});t.exports={CONSTRUCTOR:y,REJECTION_EVENT:k,SUBCLASSING:T}},function(t,r,e){var n=e(24),o=e(54),s=e(570),a=e(572),i=e(578),d={},u=o.f;function c(k){var y=k.upload=(k.headers||o.o)["Content-Type"]==="multipart/form-data",A=!1;try{A=(location.protocol+"//"+location.host).toLowerCase()!==o.url2origin(k.url)}catch{}return k.cors=A,y||A||k.mode?function(V){var Ce=V.mode,ie=s,Oe=o.getGlobal();return!Oe.FormData&&Oe.document&&(Ce="iframe"),Ce==="iframe"&&(ie=V.upload?a:i),new ie(V)}(k):new s(k)}function m(k,y,A){var V=d[k];if(V){y==="onload"&&V.result&&(A=function(ie,Oe){Oe={data:Oe};var he=ie.result.headers;return he&&(Oe.headers=ie.req.header(he)),Oe}(V,A)),function(ie){var Oe=d[ie];Oe&&(Oe.req.destroy(),delete d[ie])}(k);var Ce={type:y,result:A};u(Ce),Ce.stopped||V[y](Ce.result)}}function v(k,y){m(k,"onload",y)}function g(k,y){m(k,"onerror",y)}function b(k,y){var A=o.genUrlSep(k);return y=y||"",o.isObject(y)&&(y=o.object2query(y)),y&&(k+=A+y),k}function T(k,y){y=y||{};var A=o.uniqueID(),V={result:y.result,onload:y.onload||o.f,onerror:y.onerror||o.f};d[A]=V,y.onload=n(v).call(v,null,A),y.onerror=n(g).call(g,null,A),y.query&&(k=b(k,y.query));var Ce=y.method||"";return Ce&&!/get/i.test(Ce)||!y.data||(k=b(k,y.data),y.data=null),y.url=k,V.req=c(y),A}T.filter=function(k){o.isFunction(k)&&(u=k)},T.abort=function(k){var y=d[k];y&&y.req&&y.req.abort()},t.exports=T},function(t,r,e){var n=e(10),o=e(301),s=e(25),a=e(106).genPrivateUrl,i=e(0),d=i.notundef,u=i.exist,c=e(192),m=e(295),v=m.typeMap;function g(b){b.resend?(i.verifyOptions(b,"idClient","msg::Message"),this.idClient=b.idClient):this.idClient=i.guid(),this.type=v[b.type],this.resend=b.resend?1:0,d(b.subType)&&(i.isInt(+b.subType)&&+b.subType>0?this.subType=+b.subType:i.onParamError("subType只能是大于0的整数","msg::Message")),d(b.custom)&&(s(b.custom)==="object"?this.custom=n(b.custom):this.custom=""+b.custom),d(b.text)&&(this.body=""+b.text),d(b.body)&&(this.body=""+b.body),d(b.yidunEnable)&&(this.yidunEnable=b.yidunEnable?1:0),d(b.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=b.antiSpamUsingYidun?1:0),d(b.antiSpamContent)&&(s(b.antiSpamContent)==="object"?this.antiSpamContent=n(b.antiSpamContent):this.antiSpamContent=""+b.antiSpamContent),d(b.antiSpamBusinessId)&&(s(b.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=n(b.antiSpamBusinessId):this.antiSpamBusinessId=""+b.antiSpamBusinessId),d(b.yidunAntiCheating)&&(this.yidunAntiCheating=b.yidunAntiCheating+""),d(b.skipHistory)&&(this.skipHistory=b.skipHistory?1:0),d(b.highPriority)&&(this.highPriority=b.highPriority?1:0),d(b.clientAntiSpam)&&(this.clientAntiSpam=b.clientAntiSpam?1:0),d(b.env)&&(this.env=b.env),d(b.notifyTargetTags)&&(this.notifyTargetTags=b.notifyTargetTags),d(b.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=b.yidunAntiSpamExt),(d(b.loc_x)||d(b.loc_y)||d(b.loc_z))&&(this.loc_x=b.loc_x,this.loc_y=b.loc_y,this.loc_z=b.loc_z)}g.validTypes=m.validTypes,i.merge(g.prototype,m.prototype),g.getType=m.getType,g.setFlow=m.setFlow,g.reverse=function(b){var T=i.filterObj(b,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return d(T.fromAvatar)&&(T.fromAvatar=a(T.fromAvatar)),T=i.merge(T,{fromClientType:c.reverseType(b.fromClientType),time:+b.time,type:g.getType(b),text:u(b.body)?b.body:b.text||"",resend:+b.resend==1}),d(T.userUpdateTime)&&(T.userUpdateTime=+T.userUpdateTime),d(b.callbackExt)&&(T.callbackExt=b.callbackExt),d(b.subType)&&(T.subType=+b.subType),d(b.yidunAntiSpamRes)&&(T.yidunAntiSpamRes=b.yidunAntiSpamRes),d(b.loc_x)&&(T.x=o(b.loc_x),T.y=o(b.loc_y),T.z=o(b.loc_z)),d(b.toAccids)&&(T.toAccids=b.toAccids),T.status=T.status||"success",T},g.setExtra=function(b,T){m.setFlow(b,T)},t.exports=g},function(t,r,e){var n=e(215),o=e(163);t.exports=Object.keys||function(s){return n(s,o)}},function(t,r,e){var n=e(172),o=e(500),s=e(501),a=n?n.toStringTag:void 0;t.exports=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":a&&a in Object(i)?o(i):s(i)}},function(t,r,e){var n=e(592),o=e(185),s=e(599);t.exports=function(a,i){if(a==null)return{};var d,u,c=s(a,i);if(n){var m=n(a);for(u=0;u<m.length;u++)d=m[u],o(i).call(i,d)>=0||Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d])}return c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(137),o=e(248);function s(a,i){for(var d=0;d<i.length;d++){var u=i[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),n(a,o(u.key),u)}}t.exports=function(a,i,d){return i&&s(a.prototype,i),d&&s(a,d),n(a,"prototype",{writable:!1}),a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(566)},function(t,r,e){var n=e(11),o=e(4),s=e(63),a=Object,i=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(d){return s(d)=="String"?i(d,""):a(d)}:a},function(t,r,e){var n=e(318),o=e(126);t.exports=function(s){var a=n(s,"string");return o(a)?a:a+""}},function(t,r,e){var n=e(33),o=e(16),s=e(21),a=e(207),i=Object;t.exports=a?function(d){return typeof d=="symbol"}:function(d){var u=n("Symbol");return o(u)&&s(u.prototype,i(d))}},function(t,r,e){var n=e(11),o=0,s=Math.random(),a=n(1 .toString);t.exports=function(i){return"Symbol("+(i===void 0?"":i)+")_"+a(++o+s,36)}},function(t,r,e){var n=e(110),o=Math.max,s=Math.min;t.exports=function(a,i){var d=n(a);return d<0?o(d+i,0):s(d,i)}},function(t,r,e){var n=e(11),o=e(4),s=e(16),a=e(65),i=e(33),d=e(213),u=function(){},c=[],m=i("Reflect","construct"),v=/^\s*(?:class|function)\b/,g=n(v.exec),b=!v.exec(u),T=function(y){if(!s(y))return!1;try{return m(u,c,y),!0}catch{return!1}},k=function(y){if(!s(y))return!1;switch(a(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return b||!!g(v,d(y))}catch{return!0}};k.sham=!0,t.exports=!m||o(function(){var y;return T(T.call)||!T(Object)||!T(function(){y=!0})||y})?k:T},function(t,r,e){var n=e(109),o=e(127),s=n("keys");t.exports=function(a){return s[a]||(s[a]=o(a))}},function(t,r,e){var n=e(215),o=e(163).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(s){return n(s,o)}},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,e){var n=e(20);r.f=n},function(t,r,e){var n=e(29),o=e(16),s=e(42),a=e(130),i=e(227),d=a("IE_PROTO"),u=Object,c=u.prototype;t.exports=i?u.getPrototypeOf:function(m){var v=s(m);if(n(v,d))return v[d];var g=v.constructor;return o(g)&&v instanceof g?g.prototype:v instanceof u?c:null}},function(t,r,e){var n=e(11),o=e(36),s=e(355);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,i=!1,d={};try{(a=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(d,[]),i=d instanceof Array}catch{}return function(u,c){return o(u),s(c),i?a(u,c):u.__proto__=c,u}}():void 0)},function(t,r,e){var n=e(65),o=e(156),s=e(91),a=e(99),i=e(20)("iterator");t.exports=function(d){if(!s(d))return o(d,i)||o(d,"@@iterator")||a[n(d)]}},function(t,r,e){t.exports=e(407)},function(t,r,e){t.exports=e(432)},function(t,r,e){t.exports=e(449)},function(t,r,e){var n=e(489),o=e(490),s=e(491),a=e(492),i=e(493);function d(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var v=u[c];this.set(v[0],v[1])}}d.prototype.clear=n,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=a,d.prototype.set=i,t.exports=d},function(t,r,e){var n=e(198);t.exports=function(o,s){for(var a=o.length;a--;)if(n(o[a][0],s))return a;return-1}},function(t,r,e){var n=e(83)(Object,"create");t.exports=n},function(t,r,e){var n=e(513);t.exports=function(o,s){var a=o.__data__;return n(s)?a[typeof s=="string"?"string":"hash"]:a.map}},function(t,r,e){var n=e(259),o=e(260);t.exports=function(s,a,i,d){var u=!i;i||(i={});for(var c=-1,m=a.length;++c<m;){var v=a[c],g=d?d(i[v],s[v],v,i,s):void 0;g===void 0&&(g=s[v]),u?o(i,v,g):n(i,v,g)}return i}},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r){t.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(t,r,e){var n,o=e(18),s=e(2),a=e(8),i=e(3),d=e(7),u=e(6),c=e(24),m=e(10),v=e(106).urlQuery2Object,g=e(0),b=e(40),T=e(739),k=e(740),y=e(741),A=e(742),V=e(743),Ce=e(744);function ie(ae){this.mixin(ae)}ie.prototype=o((function(){}).prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),ie.prototype.setProtocol=function(ae){this.protocol=ae},ie.prototype.mixin=function(ae){var Fe,ze,pe=this;this.configMap=this.configMap||{},s(Fe=["idMap","cmdConfig","packetConfig"]).call(Fe,function(le){pe.configMap[le]=g.merge({},pe.configMap[le],ae.configMap&&ae.configMap[le])}),s(ze=["serializeMap","unserializeMap"]).call(ze,function(le){pe[le]=g.merge({},pe[le],ae[le])})},ie.prototype.createCmd=(n=1,function(ae,Fe){var ze,pe=this,le=this.configMap.cmdConfig[ae],xe=this.configMap.packetConfig[le.sid+"_"+le.cid],ue=ae==="heartbeat"?0:n++;return ue>32767&&(ue=1,n=2),ae={SID:le.sid,CID:le.cid,SER:ue,isAwaitable:typeof le.isAwaitable=="boolean"?le.isAwaitable:!(!xe||!xe.response)},le.params&&(ae.Q=[],s(ze=le.params).call(ze,function(Ve){var Ue=Ve.type,er=Ve.name,At=Ve.entity,ur=Fe[er];if(!g.undef(ur)){switch(Ue){case"PropertyArray":Ue="ArrayMable",ur=a(ur).call(ur,function(pr){return{t:"Property",v:pe.serialize(pr,At)}});break;case"Property":ur=pe.serialize(ur,er);break;case"bool":ur=ur?"true":"false"}ae.Q.push({t:Ue,v:ur})}})),ae}),ie.prototype.parseResponse=function(ae){var Fe=this;return new i(function(ze){var pe=JSON.parse(ae),le={raw:pe,rawStr:ae,error:b.genError(pe.code)},xe=Fe.configMap.packetConfig[pe.sid+"_"+pe.cid];if(!xe)return le.notFound={sid:pe.sid,cid:pe.cid},void ze(le);var ue=pe.r,Ve=xe.service==="notify"&&!xe.cmd;if(le.isNotify=Ve,Ve){var Ue=pe.r[1].headerPacket;if(xe=Fe.configMap.packetConfig[Ue.sid+"_"+Ue.cid],ue=pe.r[1].body,!xe)return le.notFound={sid:Ue.sid,cid:Ue.cid},void ze(le)}if(le.service=xe.service,le.cmd=xe.cmd,le.error){var er,At,ur=d(er="".concat(pe.sid,"_")).call(er,pe.cid);if(Ve&&(ur=d(At="".concat(Ue.sid,"_")).call(At,Ue.cid)),le.error.cmd=le.cmd,le.error.callFunc="protocol::parseResponse: ".concat(ur),le.error.code===416){var pr=ue[0];pr&&(le.frequencyControlDuration=1e3*pr)}}var ar,hr=!1;le.error&&xe.trivialErrorCodes&&(hr=u(ar=xe.trivialErrorCodes).call(ar,le.error.code)!==-1);var Ne=[];if((!le.error||hr)&&xe.response){var or;le.content={};var ir=function($e,tr,nr,Pt){if($e&&Pt==="msg"||Pt==="sysMsg"){var Et=nr.content[Pt];g.isObject(Et)&&!Et.idServer&&(Et.idServer=""+tr.r[0])}};s(or=xe.response).call(or,function($e,tr){var nr,Pt=ue[tr];if(!g.undef(Pt)){var Et=$e.type,kt=$e.name,rr=$e.entity||kt;switch(Et){case"Property":Ne.push(Fe.unserialize(Pt,rr).then(c(nr=function(cr,mr,yr,Tr,Ir){yr.content[Tr]=Ir,ir(cr,mr,yr,Tr)}).call(nr,this,Ve,pe,le,kt)));break;case"PropertyArray":le.content[kt]=[],s(Pt).call(Pt,function(cr,mr){var yr;Ne.push(Fe.unserialize(cr,rr).then(c(yr=function(Tr,Ir,kr){Tr.content[Ir][mr]=kr}).call(yr,this,le,kt)))});break;case"KVArray":le.content[kt]=Pt,ir(Ve,pe,le,kt);break;case"long":case"Long":case"byte":case"Byte":case"Number":le.content[kt]=+Pt;break;default:le.content[kt]=Pt,ir(Ve,pe,le,kt)}}})}i.all(Ne).then(function(){ze(le)})})},ie.prototype.serialize=function(ae,Fe){var ze=this.serializeMap[Fe],pe={};for(var le in ze)ae.hasOwnProperty(le)&&(pe[ze[le]]=ae[le]);return pe},ie.prototype.matchNosSafeUrl=function(ae){if(!g.isString(ae)||!~u(ae).call(ae,"_im_url=1"))return!1;var Fe=v(ae);return!(!Fe||!Fe._im_url||Fe._im_url!=1)},ie.prototype.getOneNosOriginUrl=function(ae,Fe,ze){var pe=this;return new i(function(le){pe.protocol.getNosOriginUrlReqNum++,pe.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:ae}},function(xe,ue,Ve){pe.protocol.getNosOriginUrlReqNum--,xe?pe.protocol.logger.warn("error: get nos originUrl failed",xe):(Fe["_"+ze+"_safe"]=Fe[ze],Fe[ze]=Ve.nosFileUrlTag&&Ve.nosFileUrlTag.originUrl),le()})})},ie.prototype.checkObjSafeUrl=function(ae,Fe,ze){var pe=this;for(var le in ae)if(ae.hasOwnProperty(le)){var xe=ae[le];if(g.isString(xe)){if(this.matchNosSafeUrl(xe)){var ue=this.getOneNosOriginUrl(xe,ae,le);Fe.push(ue),ze.push(ue)}}else g.isObject(xe)?this.checkObjSafeUrl(xe,Fe,ze):g.isArray(xe)&&s(xe).call(xe,function(Ve){g.isObject(Ve)&&pe.checkObjSafeUrl(Ve,Fe,ze)})}};var Oe=["url","avatar","fromAvatar","chatroomAvatar"];ie.prototype.unserialize=function(ae,Fe){var ze=this;return new i(function(pe){var le=ze.unserializeMap[Fe],xe={},ue=[];if(ae)for(var Ve in le){var Ue,er=[];if(ae.hasOwnProperty(Ve)&&(xe[le[Ve]]=ae[Ve],ze.protocol.hasLogin&&!ze.protocol.keepNosSafeUrl))if(le[Ve]==="attach"&&ae[Ve]&&u(ae[Ve])&&~u(Ue=ae[Ve]).call(Ue,"_im_url=1"))try{var At,ur=JSON.parse(ae[Ve]);ur.isS3||ze.checkObjSafeUrl(ur,er,ue),i.all(er).then(c(At=function(pr,ar){pr.attach=m(ar)}).call(At,ze,xe,ur))}catch(pr){ze.logger.warn("unserialize",pr&&pr.message)}else~u(Oe).call(Oe,le[Ve])&&ae[Ve]&&ze.matchNosSafeUrl(ae[Ve])&&ue.push(ze.getOneNosOriginUrl(ae[Ve],xe,le[Ve]))}i.all(ue).then(function(){pe(xe)})})},ie.prototype.syncUnserialize=function(ae,Fe){var ze=this.unserializeMap[Fe],pe={};if(ae)for(var le in ze)ae.hasOwnProperty(le)&&(pe[ze[le]]=ae[le]);return pe};var he=new ie({configMap:T,serializeMap:k,unserializeMap:y}),Y=new ie({configMap:A,serializeMap:V,unserializeMap:Ce});t.exports={IM:he,Chatroom:Y}},function(t,r,e){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!n.call({1:2},1);r.f=s?function(a){var i=o(this,a);return!!i&&i.enumerable}:n},function(t,r,e){t.exports=e(618)},function(t,r,e){var n=e(8),o=e(9),s=e(0),a=s.notundef,i=s.fillPropertyWithDefault,d={0:"normal",1:"owner",2:"manager"};function u(c){s.verifyOptions(c,"teamId","team::TeamMember"),s.verifyParamAtLeastPresentOne(c,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=c.teamId,a(c.account)&&(this.account=c.account),a(c.nickInTeam)&&(this.nickInTeam=c.nickInTeam),a(c.muteNotiType)?this.bits=c.muteNotiType:a(c.muteTeam)&&(this.bits=0,c.muteTeam&&(this.bits+=1)),a(c.mute)&&(this.mute=c.mute?1:0),a(c.custom)&&(this.custom=""+c.custom)}u.reverse=function(c){var m=s.copy(c);if(a(m.teamId)&&(m.teamId=""+m.teamId),a(m.type)&&(m.type=d[m.type]),a(m.active)&&(m.active=+m.active==1),a(m.valid)&&(m.valid=+m.valid==1),a(m.mute)&&(m.mute=+m.mute==1),a(m.joinTime)&&(m.joinTime=+m.joinTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),a(m.bits)){var v=m.bits;delete m.bits,m.muteTeam=!!(1&v),m.muteNotiType=v}return a(m.teamId)&&a(m.account)&&(m.id=u.genId(m.teamId,m.account)),m},u.reverseMembers=function(c){return n(c).call(c,function(m){return o(u).call(u,m)})},u.fillProperties=function(c){var m=i(c,"mute",!1),v=i(c,"custom","");return m||v},u.genId=function(c,m){return c+"-"+m},u.accounts2ids=function(c,m){return n(m).call(m,function(v){return u.genId(c,v)})},u.assembleMembers=function(c,m){return s.isArray(m)||(m=[m]),n(m).call(m,function(v){return u.assembleMember(c,v)})},u.assembleMember=function(c,m){return{id:u.genId(c.teamId,m),account:m,teamId:c.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:c.memberUpdateTime,updateTime:c.memberUpdateTime,active:!0,valid:!0,invitorAccid:""}},u.assembleOwner=function(c){var m=u.assembleMember(c,c.owner);return m.type="owner",m},t.exports=u},function(t,r,e){var n,o=e(25),s=e(6),a=e(10),i=e(7),d=e(5),u=e(15),c=e(9),m=e(17),v=e(8),g=e(2),b=e(0),T=b.undef,k=b.notundef,y=e(147).IM,A=e(191),V=e(150),Ce={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},ie={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},Oe={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},he=["team","superTeam","friend","msg"],Y={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function ae(Fe){var ze,pe;b.verifyOptions(Fe,"type to","sysmsg::SystemMessage"),b.verifyParamValid("type",Fe.type,ae.validTypes,"sysmsg::SystemMessage"),s(ze=Fe.type).call(ze,"custom")!==-1&&(b.verifyOptions(Fe,"content","sysmsg::SystemMessage"),this.attach=Fe.content,k(Fe.apnsText)&&(this.apnsText=""+Fe.apnsText),k(Fe.pushPayload)&&(o(Fe.pushPayload)==="object"?this.pushPayload=a(Fe.pushPayload):this.pushPayload=""+Fe.pushPayload),k(Fe.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=Fe.sendToOnlineUsersOnly?0:1),k(Fe.cc)&&(this.cc=Fe.cc?1:0),k(Fe.isPushable)&&(this.isPushable=Fe.isPushable?1:0),k(Fe.isUnreadable)&&(this.isUnreadable=Fe.isUnreadable?1:0),k(Fe.needPushNick)&&(this.needPushNick=Fe.needPushNick?1:0)),s(pe=Fe.type).call(pe,"deleteMsg")===0&&(Fe.apnsText&&(this.apnsText=Fe.apnsText),Fe.pushPayload&&(this.pushPayload=Fe.pushPayload),Fe.attach&&(this.attach=Fe.attach)),this.time=Fe.time||+new Date,this.type=Ce[Fe.type],this.to=Fe.to,k(Fe.from)&&(this.from=Fe.from),k(Fe.ps)&&(this.ps=Fe.ps),k(Fe.deletedIdClient)&&(this.deletedIdClient=Fe.deletedIdClient),k(Fe.deletedIdServer)&&(this.deletedIdServer=Fe.deletedIdServer),k(Fe.opeAccount)&&(this.opeAccount=Fe.opeAccount),k(Fe.yidunEnable)&&(this.yidunEnable=Fe.yidunEnable?1:0),k(Fe.antiSpamContent)&&(o(Fe.antiSpamContent)==="object"?this.antiSpamContent=a(Fe.antiSpamContent):this.antiSpamContent=""+Fe.antiSpamContent),k(Fe.antiSpamBusinessId)&&(o(Fe.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=a(Fe.antiSpamBusinessId):this.antiSpamBusinessId=""+Fe.antiSpamBusinessId),k(Fe.env)&&(this.env=Fe.env),this.idClient=Fe.idClient||b.guid()}ae.validTypes=i(n=d(Ce)).call(n,d(Y)),ae.validCategories=["team","friend"],ae.isCustom=function(Fe){return Fe.type==="custom"},ae.reverse=function(Fe){var ze,pe,le={time:+Fe.time,to:Fe.to,type:ie[Fe.type]};if(k(Fe.from)&&(le.from=Fe.from),k(Fe.idClient)&&(le.idClient=Fe.idClient),k(Fe.idServer)&&(le.idServer=""+Fe.idServer),k(Fe.deletedIdClient)&&(le.deletedIdClient=Fe.deletedIdClient),k(Fe.deletedIdServer)&&(le.deletedIdServer=""+Fe.deletedIdServer),k(Fe.deletedMsgTime)&&(le.deletedMsgTime=+Fe.deletedMsgTime),k(Fe.deletedMsgFromNick)&&(le.deletedMsgFromNick=""+Fe.deletedMsgFromNick),k(Fe.opeAccount)&&(le.opeAccount=Fe.opeAccount),k(Fe.ps)&&(le.ps=Fe.ps),k(Fe.callbackExt)&&(le.callbackExt=Fe.callbackExt),Fe.attach=Fe.attach?""+Fe.attach:"",le.type==="customP2p"||le.type==="customTeam"||le.type==="customSuperTeam")le.content=Fe.attach,k(Fe.apnsText)&&(le.apnsText=Fe.apnsText),k(Fe.pushPayload)&&(le.pushPayload=Fe.pushPayload),b.merge(le,{sendToOnlineUsersOnly:T(Fe.sendToOnlineUsersOnly)||+Fe.sendToOnlineUsersOnly==0,cc:T(Fe.cc)||+Fe.cc==1,isPushable:T(Fe.isPushable)||+Fe.isPushable==1,isUnreadable:T(Fe.isUnreadable)||+Fe.isUnreadable==1,needPushNick:k(Fe.needPushNick)&&+Fe.needPushNick==1}),le.scene=u(pe=le.type).call(pe,6).toLowerCase(),le.type="custom";else if(s(ze=le.type).call(ze,"deleteMsg")===0){Fe.apnsText&&(le.apnsText=Fe.apnsText),Fe.pushPayload&&(le.pushPayload=Fe.pushPayload),Fe.attach&&(le.attach=Fe.attach);var xe=le.type.toLowerCase();s(xe).call(xe,"p2p")>-1?le.scene="p2p":s(xe).call(xe,"superteam")>-1?le.scene="superTeam":s(xe).call(xe,"team")>-1&&(le.scene="team"),le.type="deleteMsg"}else{if(Fe.attach){le.attach={};var ue=JSON.parse(Fe.attach);k(ue.vt)?(le.type=Oe[ue.vt],ue.serverex&&ue.serverex[0]===1&&(le.serverex=ue.serverex[1]),delete le.attach):(k(ue.tinfo)&&(le.attach.team=c(A).call(A,y.syncUnserialize(ue.tinfo,"team"))),k(ue.tlist)&&(le.attach.member=c(V).call(V,y.syncUnserialize(ue.tlist,"teamMember"))),k(ue.attach)&&(le.attach.custom=ue.attach))}le.category=Y[le.type],le.read=!1,le.state="init"}return k(Fe.cc)&&(le.cc=+Fe.cc==1),le.status=Fe.status||"success",k(m(Fe))&&(le.filter=m(Fe)),le},ae.reverseSysMsgs=function(Fe,ze){var pe=(ze=ze||{}).mapper,le=b.isFunction(pe);return v(Fe).call(Fe,function(xe){return xe=c(ae).call(ae,xe),le&&(xe=pe(xe)),xe})},ae.completeUnread=function(Fe){var ze,pe;return Fe=Fe||{},g(he).call(he,function(le){delete Fe[le]}),g(ze=d(Y)).call(ze,function(le){Fe[le]=Fe[le]||0,Fe[le]<0&&(Fe[le]=0),Fe[pe=Y[le]]=Fe[pe]||0,Fe[pe]=Fe[pe]+Fe[le]}),Fe.total=0,g(he).call(he,function(le){Fe.total+=Fe[le]}),Fe},t.exports=ae},function(t,r,e){var n=e(120),o=["unreadMsgs"],s=e(0);function a(){}a.parse=function(i){var d=i.split("|");return{scene:d[0],to:d[1]}},a.genSessionByMsg=function(i){return{id:i.sessionId,scene:i.scene,to:i.target,updateTime:i.time,lastMsg:i}},a.appendLastMsg=function(i){var d=i.lastMsg;i["last"+s.capFirstLetter(d.type)+"Msg"]=d,i["last"+s.capFirstLetter(d.flow)+"Msg"]=d},a.genSessionByMsgs=function(i,d){var u=i.getLastNotIgnoredMsg(d);return u?a.genSessionByMsg(u):null},a.trim=function(i){var d=i=s.simpleClone(i);return d.unreadMsgs,n(d,o)},a.isComplete=function(i){return i.id&&i.scene&&i.to},t.exports=a},function(t,r,e){t.exports=e(329)},function(t,r,e){var n=e(18),o=e(169),s={V2NIM_LOGIN_STATUS_LOGOUT:0,V2NIM_LOGIN_STATUS_LOGINED:1,V2NIM_LOGIN_STATUS_LOGINING:2},a={V2NIM_CONNECT_STATUS_DISCONNECTED:0,V2NIM_CONNECT_STATUS_CONNECTED:1,V2NIM_CONNECT_STATUS_CONNECTING:2,V2NIM_CONNECT_STATUS_WAITING:3};function i(d){this.loginStatus=s.V2NIM_LOGIN_STATUS_LOGOUT,this.connectStatus=a.V2NIM_CONNECT_STATUS_DISCONNECTED,this.logger=d.logger,this.setMonitor()}i.prototype=n(new o),i.prototype.setMonitor=function(){var d=this;this.on("auth/loginLifeCycleAddressing",function(){d.logger.log("auth::life cycle addressing"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnect",function(){d.logger.log("auth::life cycle connecting"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnectSucc",function(){d.logger.log("auth::life cycle connect success"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_CONNECTED)}),this.on("auth/loginLifeCycleConnectFail",function(u){d.logger.log("auth::life cycle connect fail"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_DISCONNECTED,u)}),this.on("auth/loginLifeCycleDisconnected",function(u){d.logger.log("auth::life cycle disconnected:",u&&u.message),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_DISCONNECTED,u)}),this.on("auth/loginLifeCycleLoginSucc",function(){d.logger.log("auth::life cycle login success, verify authentication success"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINED)}),this.on("auth/loginLifeCycleLoginFail",function(u){d.logger.log("auth::life cycle login fail due to verify authentication failed:",u),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT,u)}),this.on("auth/loginLifeCycleLogout",function(){d.logger.log("auth::life cycle logout"),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleKicked",function(u){d.logger.log("auth::life cycle kicked",u),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleWaiting",function(){d.logger.log("auth::life cycle waiting to reconnect"),d.getConnectStatus(),d.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT),d.setConnectStatus(a.V2NIM_CONNECT_STATUS_WAITING)})},i.prototype.getConnectStatus=function(){return this.connectStatus},i.prototype.getLoginStatus=function(){return this.loginStatus},i.prototype.setLoginStatus=function(d,u){if(d!==this.loginStatus){var c=this.loginStatus;this.loginStatus=d,this.emit("loginStatus",d),this.delegateLoginEvent(c,d,u)}},i.prototype.delegateLoginEvent=function(d,u,c){d===s.V2NIM_LOGIN_STATUS_LOGINING&&u===s.V2NIM_LOGIN_STATUS_LOGOUT&&this.emit("loginFailed",c)},i.prototype.setConnectStatus=function(d,u){if(d!==this.connectStatus){var c=this.connectStatus;this.connectStatus=d,this.emit("connectStatus",d),this.delegateConnectEvent(c,d,u)}},i.prototype.delegateConnectEvent=function(d,u,c){d===a.V2NIM_CONNECT_STATUS_CONNECTED&&u===a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("disconnected",c),d===a.V2NIM_CONNECT_STATUS_CONNECTING&&u===a.V2NIM_CONNECT_STATUS_CONNECTED&&this.emit("connectSuccess"),d===a.V2NIM_CONNECT_STATUS_CONNECTING&&u===a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("connectFailed",c),d!==a.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.connectStatus!==a.V2NIM_CONNECT_STATUS_WAITING||u!==a.V2NIM_CONNECT_STATUS_CONNECTING||this.emit("connecting")},i.prototype.destroy=function(){this.removeAllListeners()},t.exports={V2NIMLoginStatus:s,V2NIMConnectStatus:a,StatusProtector:i}},function(t,r,e){var n=e(63),o=e(11);t.exports=function(s){if(n(s)==="Function")return o(s)}},function(t,r,e){var n=e(31),o=e(91);t.exports=function(s,a){var i=s[a];return o(i)?void 0:n(i)}},function(t,r,e){var n=e(14),o=e(320),s=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=s},function(t,r,e){var n=e(14),o=e(28),s=n.document,a=o(s)&&o(s.createElement);t.exports=function(i){return a?s.createElement(i):{}}},function(t,r,e){var n=e(43),o=e(128),s=e(45),a=function(i){return function(d,u,c){var m,v=n(d),g=s(v),b=o(c,g);if(i&&u!=u){for(;g>b;)if((m=v[b++])!=m)return!0}else for(;g>b;b++)if((i||b in v)&&v[b]===u)return i||b||0;return!i&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,r,e){var n=e(326);t.exports=function(o,s){return new(n(o))(s===0?0:s)}},function(t,r,e){var n={};n[e(20)("toStringTag")]="z",t.exports=String(n)==="[object z]"},function(t,r,e){var n=e(27),o=e(210),s=e(38),a=e(36),i=e(43),d=e(118);r.f=n&&!o?Object.defineProperties:function(u,c){a(u);for(var m,v=i(c),g=d(c),b=g.length,T=0;b>T;)s.f(u,m=g[T++],v[m]);return u}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r,e){var n=e(63),o=e(43),s=e(131).f,a=e(219),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(d){return i&&n(d)=="Window"?function(u){try{return s(u)}catch{return a(i)}}(d):s(o(d))}},function(t,r,e){var n=e(1),o=e(19),s=e(48),a=e(225),i=e(16),d=e(354),u=e(134),c=e(135),m=e(81),v=e(53),g=e(66),b=e(20),T=e(99),k=e(226),y=a.PROPER,A=a.CONFIGURABLE,V=k.IteratorPrototype,Ce=k.BUGGY_SAFARI_ITERATORS,ie=b("iterator"),Oe=function(){return this};t.exports=function(he,Y,ae,Fe,ze,pe,le){d(ae,Y,Fe);var xe,ue,Ve,Ue=function(Ne){if(Ne===ze&&ar)return ar;if(!Ce&&Ne in ur)return ur[Ne];switch(Ne){case"keys":case"values":case"entries":return function(){return new ae(this,Ne)}}return function(){return new ae(this)}},er=Y+" Iterator",At=!1,ur=he.prototype,pr=ur[ie]||ur["@@iterator"]||ze&&ur[ze],ar=!Ce&&pr||Ue(ze),hr=Y=="Array"&&ur.entries||pr;if(hr&&(xe=u(hr.call(new he)))!==Object.prototype&&xe.next&&(s||u(xe)===V||(c?c(xe,V):i(xe[ie])||g(xe,ie,Oe)),m(xe,er,!0,!0),s&&(T[er]=Oe)),y&&ze=="values"&&pr&&pr.name!=="values"&&(!s&&A?v(ur,"name","values"):(At=!0,ar=function(){return o(pr,this)})),ze)if(ue={values:Ue("values"),keys:pe?ar:Ue("keys"),entries:Ue("entries")},le)for(Ve in ue)(Ce||At||!(Ve in ur))&&g(ur,Ve,ue[Ve]);else n({target:Y,proto:!0,forced:Ce||At},ue);return s&&!le||ur[ie]===ar||g(ur,ie,ar,{name:ze}),T[Y]=ar,ue}},function(t,r){t.exports=function(e,n){return{value:e,done:n}}},function(t,r,e){var n=e(21),o=TypeError;t.exports=function(s,a){if(n(a,s))return s;throw o("Incorrect invocation")}},function(t,r,e){var n=e(129),o=e(78),s=TypeError;t.exports=function(a){if(n(a))return a;throw s(o(a)+" is not a constructor")}},function(t,r,e){var n=Object.prototype.hasOwnProperty,o="~";function s(){}function a(c,m,v){this.fn=c,this.context=m,this.once=v||!1}function i(c,m,v,g,b){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new a(v,g||c,b),k=o?o+m:m;return c._events[k]?c._events[k].fn?c._events[k]=[c._events[k],T]:c._events[k].push(T):(c._events[k]=T,c._eventsCount++),c}function d(c,m){--c._eventsCount==0?c._events=new s:delete c._events[m]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),u.prototype.eventNames=function(){var c,m,v=[];if(this._eventsCount===0)return v;for(m in c=this._events)n.call(c,m)&&v.push(o?m.slice(1):m);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(c)):v},u.prototype.listeners=function(c){var m=o?o+c:c,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var g=0,b=v.length,T=new Array(b);g<b;g++)T[g]=v[g].fn;return T},u.prototype.listenerCount=function(c){var m=o?o+c:c,v=this._events[m];return v?v.fn?1:v.length:0},u.prototype.emit=function(c,m,v,g,b,T){var k=o?o+c:c;if(!this._events[k])return!1;var y,A,V=this._events[k],Ce=arguments.length;if(V.fn){switch(V.once&&this.removeListener(c,V.fn,void 0,!0),Ce){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,m),!0;case 3:return V.fn.call(V.context,m,v),!0;case 4:return V.fn.call(V.context,m,v,g),!0;case 5:return V.fn.call(V.context,m,v,g,b),!0;case 6:return V.fn.call(V.context,m,v,g,b,T),!0}for(A=1,y=new Array(Ce-1);A<Ce;A++)y[A-1]=arguments[A];V.fn.apply(V.context,y)}else{var ie,Oe=V.length;for(A=0;A<Oe;A++)switch(V[A].once&&this.removeListener(c,V[A].fn,void 0,!0),Ce){case 1:V[A].fn.call(V[A].context);break;case 2:V[A].fn.call(V[A].context,m);break;case 3:V[A].fn.call(V[A].context,m,v);break;case 4:V[A].fn.call(V[A].context,m,v,g);break;default:if(!y)for(ie=1,y=new Array(Ce-1);ie<Ce;ie++)y[ie-1]=arguments[ie];V[A].fn.apply(V[A].context,y)}}return!0},u.prototype.on=function(c,m,v){return i(this,c,m,v,!1)},u.prototype.once=function(c,m,v){return i(this,c,m,v,!0)},u.prototype.removeListener=function(c,m,v,g){var b=o?o+c:c;if(!this._events[b])return this;if(!m)return d(this,b),this;var T=this._events[b];if(T.fn)T.fn!==m||g&&!T.once||v&&T.context!==v||d(this,b);else{for(var k=0,y=[],A=T.length;k<A;k++)(T[k].fn!==m||g&&!T[k].once||v&&T[k].context!==v)&&y.push(T[k]);y.length?this._events[b]=y.length===1?y[0]:y:d(this,b)}return this},u.prototype.removeAllListeners=function(c){var m;return c?(m=o?o+c:c,this._events[m]&&d(this,m)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,t.exports=u},function(t,r,e){t.exports=e(423)},function(t,r,e){var n=e(83)(e(50),"Map");t.exports=n},function(t,r,e){var n=e(50).Symbol;t.exports=n},function(t,r,e){var n=e(261),o=e(526),s=e(199);t.exports=function(a){return s(a)?n(a):o(a)}},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){t.exports=function(e){return function(n){return e(n)}}},function(t,r,e){(function(n){var o=e(256),s=r&&!r.nodeType&&r,a=s&&typeof n=="object"&&n&&!n.nodeType&&n,i=a&&a.exports===s&&o.process,d=function(){try{var u=a&&a.require&&a.require("util").types;return u||i&&i.binding&&i.binding("util")}catch{}}();n.exports=d}).call(this,e(145)(t))},function(t,r){var e=Object.prototype;t.exports=function(n){var o=n&&n.constructor;return n===(typeof o=="function"&&o.prototype||e)}},function(t,r,e){var n=e(261),o=e(529),s=e(199);t.exports=function(a){return s(a)?n(a,!0):o(a)}},function(t,r,e){var n=e(534),o=e(265),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(d){return d==null?[]:(d=Object(d),n(a(d),function(u){return s.call(d,u)}))}:o;t.exports=i},function(t,r,e){var n=e(538),o=e(171),s=e(539),a=e(270),i=e(540),d=e(119),u=e(257),c=u(n),m=u(o),v=u(s),g=u(a),b=u(i),T=d;(n&&T(new n(new ArrayBuffer(1)))!="[object DataView]"||o&&T(new o)!="[object Map]"||s&&T(s.resolve())!="[object Promise]"||a&&T(new a)!="[object Set]"||i&&T(new i)!="[object WeakMap]")&&(T=function(k){var y=d(k),A=y=="[object Object]"?k.constructor:void 0,V=A?u(A):"";if(V)switch(V){case c:return"[object DataView]";case m:return"[object Map]";case v:return"[object Promise]";case g:return"[object Set]";case b:return"[object WeakMap]"}return y}),t.exports=T},function(t,r,e){var n=e(543);t.exports=function(o){var s=new o.constructor(o.byteLength);return new n(s).set(new n(o)),s}},function(t,r,e){var n=e(11),o=e(108),s=e(49),a=e(146),i=n("".replace),d="["+a+"]",u=RegExp("^"+d+d+"*"),c=RegExp(d+d+"*$"),m=function(v){return function(g){var b=s(o(g));return 1&v&&(b=i(b,u,"")),2&v&&(b=i(b,c,"")),b}};t.exports={start:m(1),end:m(2),trim:m(3)}},function(t,r,e){var n=e(116),o=e(579);n.json=o,t.exports=n},function(t,r,e){var n=e(18),o=e(26),s=e(6),a=e(2),i=e(54),d=i.f,u=e(571);function c(v){v.onload&&this.once("load",v.onload),v.onerror&&this.once("error",v.onerror),v.onbeforesend&&this.once("beforesend",v.onbeforesend),v.onaftersend&&this.once("aftersend",v.onaftersend);var g=(v=this.options=i.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},v)).headers;i.notexist(g["Content-Type"])&&(g["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var m=c.prototype=n(u.prototype);m.send=function(){var v=this,g=v.options;o(function(){try{try{v.emit("beforesend",g)}catch{}v.doSend()}catch(b){v.onError("serverError","请求失败:"+b.message)}},0)},m.doSend=d,m.afterSend=function(){var v=this;o(function(){v.emit("aftersend",v.options)},0)},m.onLoad=function(v){var g,b=this.options,T=v.status,k=v.result;if(typeof T!="number"||T!==0)if(s(g=""+T).call(g,"2")===0){if(b.type==="json")try{k=JSON.parse(k)}catch{return void this.onError("parseError",k)}this.emit("load",k)}else this.onError("serverError","服务器返回异常状态",{status:T,result:k,date:v.date});else this.onError("netError","网络错误",{status:408})},m.onError=function(v,g,b){var T=i.isObject(b)?b:{};T.code=v||"error",T.message=g||"发生错误",this.emit("error",T)},m.onTimeout=function(){this.onError("timeout","请求超时")},m.abort=function(){this.onError("abort","客户端中止")},m.header=function(v){var g=this;if(!i.isArray(v))return g.getResponseHeader(v||"");var b={};return a(v).call(v,function(T){b[T]=g.header(T)}),b},m.getResponseHeader=d,m.destroy=d,t.exports=c},function(t,r,e){t.exports=e(596)},function(t,r,e){t.exports=e(609)},function(t,r,e){var n=e(188),o=e(149);function s(a,i){var d;return t.exports=s=n?o(d=n).call(d):function(u,c){return u.__proto__=c,u},t.exports.__esModule=!0,t.exports.default=t.exports,s(a,i)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(612)},function(t,r,e){var n=e(188),o=e(149),s=e(281);function a(i){var d;return t.exports=a=n?o(d=s).call(d):function(u){return u.__proto__||s(u)},t.exports.__esModule=!0,t.exports.default=t.exports,a(i)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){var e={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26,getGrayscaleConfig:27,getMixStorePolicy:28,getMixStoreToken:29,getBackSourceToken:30,uploadDetect:32},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15,signalingCallEx:16,signalingJoinAndAccept:17}},n={heartbeat:{sid:e.link.id,cid:e.link.heartbeat},negotiateTransport:{sid:e.link.id,cid:e.link.negotiateTransport,params:[{type:"int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:e.link.id,cid:e.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getGrayscaleConfig:{sid:e.misc.id,cid:e.misc.getGrayscaleConfig,params:[{type:"Property",name:"providers"}]},getMixStorePolicy:{sid:e.misc.id,cid:e.misc.getMixStorePolicy,params:[{type:"LongArray",name:"providers"}]},getMixStoreToken:{sid:e.misc.id,cid:e.misc.getMixStoreToken,params:[{type:"Property",name:"mixTokenReq"}]},getBackSourceToken:{sid:e.misc.id,cid:e.misc.getBackSourceToken,params:[{type:"Property",name:"mixAuthTokenReq"}]},uploadDetect:{sid:e.misc.id,cid:e.misc.uploadDetect,isAwaitable:!1,params:[{type:"Property",name:"notifyDetectTag"}]},getSimpleNosToken:{sid:e.misc.id,cid:e.misc.getSimpleNosToken,params:[{type:"int",name:"num"}]},getNosToken:{sid:e.misc.id,cid:e.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:e.misc.id,cid:e.misc.uploadSdkLogUrl,params:[{type:"string",name:"url"}]},audioToText:{sid:e.misc.id,cid:e.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:e.misc.id,cid:e.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:e.misc.id,cid:e.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:e.misc.id,cid:e.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:e.misc.id,cid:e.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:e.misc.id,cid:e.misc.getServerTime,params:[]},getNosAccessToken:{sid:e.misc.id,cid:e.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:e.misc.id,cid:e.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:e.misc.id,cid:e.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:e.misc.id,cid:e.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:e.misc.id,cid:e.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:e.misc.id,cid:e.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:e.misc.id,cid:e.misc.getNosCdnHost,params:[]},signalingCreate:{sid:e.avSignal.id,cid:e.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:e.avSignal.id,cid:e.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:e.avSignal.id,cid:e.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:e.avSignal.id,cid:e.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:e.avSignal.id,cid:e.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:e.avSignal.id,cid:e.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:e.avSignal.id,cid:e.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:e.avSignal.id,cid:e.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:e.avSignal.id,cid:e.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:e.avSignal.id,cid:e.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]},signalingCallEx:{sid:e.avSignal.id,cid:e.avSignal.signalingCallEx,params:[{type:"Property",name:"avSignalTag"}]},signalingJoinAndAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingJoinAndAccept,params:[{type:"Property",name:"avSignalTag"}]}};t.exports={idMap:e,cmdConfig:n,packetConfig:{"1_2":{service:"link",cmd:"heartbeat"},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Number",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Number",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"6_27":{service:"misc",cmd:"getGrayscaleConfig",response:[{type:"Property",name:"appGrayConfigTag"}]},"6_28":{service:"misc",cmd:"getMixStorePolicy",response:[{type:"Property",name:"mixStorePolicyTag"}]},"6_29":{service:"misc",cmd:"getMixStoreToken",response:[{type:"Property",name:"mixStoreTokenTag"}]},"6_30":{service:"misc",cmd:"getBackSourceToken",response:[{type:"Property",name:"backSourceTokenTag"}]},"6_31":{service:"link",cmd:"notifyDetect",response:[{type:"Property",name:"notifyDetectTag"}]},"6_32":{service:"link",cmd:"uploadDetect",response:[]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]},"15_16":{service:"avSignal",cmd:"signalingCallEx",response:[{type:"Property",name:"avSignalTag"}]},"15_17":{service:"avSignal",cmd:"signalingJoinAndAccept",response:[{type:"Property",name:"avSignalTag"}]}}}},function(t,r,e){var n=e(5),o=e(2),s=e(24),a=e(0),i=a.notundef,d=a.fillPropertyWithDefault,u=n,c={},m={},v=[],g={},b={normal:0,advanced:1},T={0:"normal",1:"advanced"},k=u(b),y=c.joinMode={noVerify:0,needVerify:1,rejectAll:2};m.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},v.push("join"),g.joinMode=u(y);var A=c.beInviteMode={needVerify:0,noVerify:1};m.beInviteMode={0:"needVerify",1:"noVerify"},v.push("beInvite"),g.beInviteMode=u(A);var V=c.inviteMode={manager:0,all:1};m.inviteMode={0:"manager",1:"all"},v.push("invite"),g.inviteMode=u(V);var Ce=c.updateTeamMode={manager:0,all:1};m.updateTeamMode={0:"manager",1:"all"},v.push("updateTeam"),g.updateTeamMode=u(Ce);var ie=c.updateCustomMode={manager:0,all:1};function Oe(Y){var ae;switch(a.verifyOptions(Y,"action","team::Team"),Y.action){case"create":a.verifyOptions(Y,"teamId",!1,"team::Team"),a.verifyOptions(Y,"type name","team::Team"),a.verifyParamValid("type",Y.type,k,"team::Team"),i(Y.level)&&(a.verifyParamType("level",Y.level,"number","team::Team"),this.level=Y.level);break;case"update":a.verifyOptions(Y,"teamId","team::Team"),a.verifyOptions(Y,"type",!1,"team::Team")}i(Y.teamId)&&(this.teamId=Y.teamId),i(Y.type)&&(this.type=b[Y.type]),i(Y.avatar)&&(this.avatar=""+Y.avatar),i(Y.name)&&(this.name=""+Y.name),i(Y.intro)&&(this.intro=""+Y.intro),i(Y.announcement)&&(this.announcement=""+Y.announcement),o(v).call(v,s(ae=this.setMode).call(ae,this,Y)),i(Y.custom)&&(this.custom=""+Y.custom)}function he(Y,ae){i(Y[ae+="Mode"])&&(Y[ae]=m[ae][Y[ae]])}m.updateCustomMode={0:"manager",1:"all"},v.push("updateCustom"),g.updateCustomMode=u(ie),Oe.prototype.setMode=function(Y,ae){i(Y[ae+="Mode"])&&(a.verifyParamValid(ae,Y[ae],g[ae],"team::Team"),this[ae]=c[ae][Y[ae]])},Oe.reverse=function(Y,ae){var Fe=a.copy(Y);if(i(Fe.teamId)&&(Fe.teamId=""+Fe.teamId),i(Fe.type)&&(Fe.type=T[Fe.type]),i(Fe.level)&&(Fe.level=+Fe.level),i(Fe.valid)&&(Fe.valid=+Fe.valid==1),i(Fe.memberNum)&&(Fe.memberNum=+Fe.memberNum),i(Fe.memberUpdateTime)&&(Fe.memberUpdateTime=+Fe.memberUpdateTime),i(Fe.createTime)&&(Fe.createTime=+Fe.createTime),i(Fe.updateTime)&&(Fe.updateTime=+Fe.updateTime),i(Fe.validToCurrentUser)&&(Fe.validToCurrentUser=Fe.validToCurrentUser==="1"),i(Fe.mute)&&(Fe.mute=Fe.mute==="1"),i(Fe.muteType))switch(Fe.muteType){case"0":Fe.mute=!1,Fe.muteType="none";break;case"1":Fe.mute=!0,Fe.muteType="normal";break;case"3":Fe.mute=!0,Fe.muteType="all"}else i(Fe.mute)&&(Fe.mute===1?(Fe.mute=!0,Fe.muteType="normal"):(Fe.mute=!1,Fe.muteType="none"));return o(v).call(v,s(he).call(he,null,Fe)),delete Fe.bits,ae||Oe.fillProperties(Fe),Fe},Oe.fillProperties=function(Y){var ae=d(Y,"beInviteMode","needVerify"),Fe=d(Y,"inviteMode","manager"),ze=d(Y,"updateTeamMode","manager"),pe=d(Y,"updateCustomMode","manager"),le=d(Y,"avatar","");return ae||Fe||ze||pe||le},t.exports=Oe},function(t,r,e){var n=e(44).clientTypeMap;function o(){}o.reverse=function(s){var a=s;return a.type=n[a.type],a},o.reverseType=function(s){return n[s]||s},t.exports=o},function(t,r,e){var n=e(18),o=e(41),s=e(10),a=e(73),i=e(194),d=e(13),u=e(762),c=e(894),m=e(0),v=m.verifyOptions,g=m.verifyParamType,b=e(23).reportAPI,T=e(147).Chatroom;function k(A){return this.subType="chatroom",this.nosScene=A.nosScene||"chatroom",this.nosSurvivalTime=A.nosSurvivalTime,A.Protocol=i,A.Message=c,A.constructor=k,A.isAnonymous&&(A.account=A.account||"nimanon_".concat(m.guid()),A.isAnonymous=1,m.verifyOptions(A,"chatroomNick","api::Chatroom"),A.chatroomAvatar=A.chatroomAvatar||" "),this.init(A)}k.Protocol=i,k.parser=T,k.use=a.use,k.getInstance=function(A){return A.isAnonymous&&(A.account=A.account||"nimanon_".concat(m.guid()),A.isAnonymous=1,m.verifyOptions(A,"chatroomNick","api::Chatroom.getInstance"),A.chatroomAvatar=A.chatroomAvatar||" "),a.getInstance.call(this,A)},k.genInstanceName=function(A){return m.verifyOptions(A,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+A.account+"-chatroomId-"+A.chatroomId};var y=k.fn=k.prototype=n(a.prototype);k.info=y.info=d.info,y.getChatroom=function(A){(A=A||{}).done=b({instance:this,className:"ChatroomFn",funcName:"getChatroom",done:A.done}),this.processCallback(A),this.sendCmd("getChatroom",A)},y.updateChatroom=function(A){(A=A||{}).done=b({instance:this,className:"ChatroomFn",funcName:"updateChatroom",done:A.done}),v(A,"chatroom needNotify","api::updateChatroom"),g("needNotify",A.needNotify,"boolean"),this.processCustom(A),this.processCallback(A),A.chatroom=new u(A.chatroom),A.antispamTag={antiSpamBusinessId:A.antiSpamBusinessId},this.sendCmd("updateChatroom",A)},y.closeChatroom=function(A){(A=A||{}).done=b({instance:this,className:"ChatroomFn",funcName:"closeChatroom",done:A.done}),this.processCustom(A),this.processCallback(A),this.sendCmd("closeChatroom",A)},y.updateTags=function(A){(A=A||{}).done=b({instance:this,className:"ChatroomFn",funcName:"updateTags",done:A.done}),m.validate({tags:{type:"array",required:!1},notifyTargetTags:{type:"string",allowEmpty:!0,required:!1},needNotify:{type:"boolean",required:!1}},A,"chatroom::updateTags");var V=o({},A);this.processCallback(V),V.tags&&(V.tags=s(V.tags)),V.needNotify&&(V.needNotify=V.needNotify?1:0),this.sendCmd("updateChatroomTags",{chatRoomTagsUpdateTag:V},V.done)},t.exports=k,e(904),e(905),e(906),e(907)},function(t,r,e){var n=e(18),o=e(24),s=e(8),a=e(9),i=e(75),d=e(0),u=d.undef,c=d.notundef,m=e(289),v=e(13),g=e(147),b=e(762),T=e(310);function k(V){var Ce,ie,Oe;d.verifyOptions(V,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),V.isAnonymous||d.verifyOptions(V,"token","protocol::ChatroomProtocol"),d.verifyParamType("chatroomAddresses",V.chatroomAddresses,"array","protocol::ChatroomProtocol"),d.verifyCallback(V,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),Ce=typeof d.get(V,"privateConf.isDataReportEnable")=="boolean"?V.privateConf.isDataReportEnable:v.privateConf.isDataReportEnable,ie=typeof d.get(V,"privateConf.reportConfigUrl")=="string"?V.privateConf.reportConfigUrl:v.privateConf.reportConfigUrl,Oe=typeof d.get(V,"privateConf.reportUrl")=="string"?V.privateConf.reportUrl:v.privateConf.reportUrl,this.reporter=m.initReporter({isDataReportEnable:Ce,reportConfigUrl:ie,reportUrl:Oe,appKey:V.appKey,logger:this.logger}),i.call(this,V)}var y=i.fn,A=k.fn=k.prototype=n(y);A.init=function(){var V;y.init.call(this),g.Chatroom.setProtocol(this),this.parser=g.Chatroom,o(V=this.sendCmd).call(V,this),this.syncResult={},this.timetags={},this.msgBuffer=[]},A.reset=function(){var V=this;y.reset.call(V);var Ce,ie=V.options;V.autoconnect=!!ie.autoconnect,u(ie.msgBufferInterval)&&(ie.msgBufferInterval=300),d.verifyParamType("msgBufferInterval",ie.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),u(ie.msgBufferSize)&&(ie.msgBufferSize=500),d.verifyParamType("msgBufferSize",ie.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),c(ie.chatroomAddresses)&&(V.socketUrlsBackup=s(Ce=ie.chatroomAddresses).call(Ce,function(Oe){return v.formatSocketUrl({url:Oe,secure:V.options.secure})}))},A.processChatroom=function(V){switch(V.cmd){case"login":V.error||(V.obj={chatroom:a(b).call(b,V.content.chatroom),member:a(T).call(T,V.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(V.content.chatroomCdnInfo));break;case"kicked":this.onKicked(V);break;case"logout":break;case"sendMsg":this.onSendMsg(V);break;case"msg":this.onMsg(V),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+V.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(V);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(V);break;case"getHistoryMsgs":case"getHistoryMsgsByTags":this.onHistoryMsgs(V);break;case"markChatroomMember":this.onMarkChatroomMember(V);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(V);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete V.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(V);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":V.error||(V.obj=V.content);break;case"syncRobot":this.onSyncRobot(V);break;case"notifyCdnInfo":this.onCdnMsgInfo(V.content&&V.content.chatroomCdnInfo);break;case"updateChatroomTag":this.onTagsUpdate(V.content)}},A.onChatroom=function(V){V.error||(V.obj.chatroom=a(b).call(b,V.content.chatroom))},A.onTagsUpdate=function(V){if(this.logger.info("onTagsUpdate:: ",V),this.options.onTagsUpdate&&typeof this.options.onTagsUpdate=="function"){var Ce=V.updateTags&&V.updateTags.currentTags;try{Ce=JSON.parse(Ce)}catch(ie){this.logger.error("onTagsUpdate:: parse tags failed",ie)}this.options.onTagsUpdate(Ce)}},t.exports=k,e(882),e(883),e(884),e(893)},function(t,r){t.exports=function(){}},function(t,r,e){t.exports=e(444)},function(t,r){t.exports=function(e,n){for(var o=n.split(".");o.length;){var s=o.shift(),a=!1;if(s[s.length-1]=="?"&&(s=s.slice(0,-1),a=!0),!(e=e[s])&&a)return e}return e}},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(255),o=e(263);t.exports=function(s){return s!=null&&o(s.length)&&!n(s)}},function(t,r,e){t.exports=e(629)},function(t,r,e){var n=e(8),o=e(9),s=e(0),a=s.notundef,i=s.fillPropertyWithDefault,d={0:"normal",1:"owner",2:"manager"};function u(c){s.verifyOptions(c,"teamId","superTeam::TeamMember"),s.verifyParamAtLeastPresentOne(c,"nickInTeam muteTeam custom muteNotiType","superTeam::SuperTeamMember"),this.teamId=c.teamId,a(c.account)&&(this.account=c.account),a(c.nickInTeam)&&(this.nickInTeam=c.nickInTeam),a(c.muteNotiType)?this.bits=c.muteNotiType:a(c.muteTeam)&&(this.bits=0,c.muteTeam&&(this.bits+=1)),a(c.mute)&&(this.mute=c.mute?1:0),a(c.custom)&&(this.custom=""+c.custom)}u.reverse=function(c){var m=s.copy(c);if(a(m.teamId)&&(m.teamId=""+m.teamId),a(m.type)&&(m.type=d[m.type]),a(m.active)&&(m.active=+m.active==1),a(m.valid)&&(m.valid=+m.valid==1),a(m.mute)&&(m.mute=+m.mute==1),a(m.joinTime)&&(m.joinTime=+m.joinTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),a(m.bits)){var v=m.bits;delete m.bits,m.muteTeam=!!(1&v),m.muteNotiType=v}return a(m.teamId)&&a(m.account)&&(m.id=u.genId(m.teamId,m.account)),m},u.reverseMembers=function(c){return n(c).call(c,function(m){return o(u).call(u,m)})},u.fillProperties=function(c){var m=i(c,"mute",!1),v=i(c,"custom","");return m||v},u.genId=function(c,m){return c+"-"+m},u.accounts2ids=function(c,m){return n(m).call(m,function(v){return u.genId(c,v)})},u.assembleMembers=function(c,m){return s.isArray(m)||(m=[m]),n(m).call(m,function(v){return u.assembleMember(c,v)})},u.assembleMember=function(c,m){return{id:u.genId(c.teamId,m),account:m,teamId:c.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:c.memberUpdateTime,updateTime:c.memberUpdateTime,active:!0,valid:!0}},u.assembleOwner=function(c){var m=u.assembleMember(c,c.owner);return m.type="owner",m},t.exports=u},function(t,r,e){var n=e(8),o=e(9),s=e(5),a=e(106).genPrivateUrl,i=e(0),d={unknown:0,male:1,female:2},u={0:"unknown",1:"male",2:"female"};function c(m){i.merge(this,m),i.notundef(this.gender)&&(i.verifyParamValid("gender",this.gender,c.validGenders,"user::User"),this.gender=d[this.gender]),i.notundef(this.email)&&this.email!==""&&i.verifyEmail("email",this.email,"user::User"),i.notundef(this.birth)&&this.birth!==""&&i.verifyBirth("birth",this.birth,"user::User"),i.notundef(this.tel)&&this.tel!==""&&i.verifyTel("tel",this.tel,"user::User")}c.reverse=function(m,v,g){var b=i.filterObj(m,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return i.notundef(b.avatar)&&(b.avatar=a(b.avatar,v,g)),i.notundef(b.gender)&&(b.gender=u[b.gender]),i.notundef(b.createTime)&&(b.createTime=+b.createTime),i.notundef(b.updateTime)&&(b.updateTime=+b.updateTime),b},c.reverseUsers=function(m){return n(m).call(m,function(v){return o(c).call(c,v)})},c.validGenders=s(d),t.exports=c},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(6),i=e(106).genPrivateUrl,d=e(72),u=e(0),c=e(13);function m(T,k){switch(u.notundef(T.type)?u.verifyFileType(T.type,"msg::FileMessage"):T.type="file",u.verifyOptions(T,"file","msg::FileMessage"),u.verifyOptions(T.file,"url ext size",!0,"file.","msg::FileMessage"),T.type){case"image":v.verifyFile(T.file,"msg::FileMessage");break;case"audio":g.verifyFile(T.file,"msg::FileMessage");break;case"video":b.verifyFile(T.file,"msg::FileMessage")}d.call(this,T),k&&(this.idClient=k),this.attach=n(T.file)}m.prototype=o(d.prototype),m.reverse=function(T){var k=s(d).call(d,T);if(T.attach=T.attach?""+T.attach:"",T.attach&&(k.file=JSON.parse(T.attach),!k.file.isS3)){var y,A;k.file.url=i(k.file.url)||"",k.type==="audio"&&k.file.url&&!k.file.mp3Url&&(k.file.mp3Url=k.file.url+(~a(A=k.file.url).call(A,"?")?"&":"?")+"audioTrans&type=mp3"),c.httpsEnabled&&a(y=k.file.url).call(y,"https://")!==0&&(k.file.url=k.file.url.replace("http","https"))}return k},t.exports=m;var v=e(830),g=e(831),b=e(832)},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(6),i=e(106).genPrivateUrl,d=e(117),u=e(0),c=e(13);function m(T,k){switch(u.notundef(T.type)?u.verifyFileType(T.type,"msg::FileMessage"):T.type="file",u.verifyOptions(T,"file","msg::FileMessage"),u.verifyOptions(T.file,"url ext size",!0,"file.","msg::FileMessage"),T.type){case"image":v.verifyFile(T.file,"msg::FileMessage");break;case"audio":g.verifyFile(T.file,"msg::FileMessage");break;case"video":b.verifyFile(T.file,"msg::FileMessage")}d.call(this,T),k&&(this.idClient=k),this.attach=n(T.file)}m.prototype=o(d.prototype),m.reverse=function(T){var k=s(d).call(d,T);if(T.attach=T.attach?""+T.attach:"",T.attach&&(k.file=JSON.parse(T.attach),!k.file.isS3)){var y,A;k.file.url=i(k.file.url)||"",k.type==="audio"&&k.file.url&&!k.file.mp3Url&&(k.file.mp3Url=k.file.url+(~a(A=k.file.url).call(A,"?")?"&":"?")+"audioTrans&type=mp3"),c.httpsEnabled&&a(y=k.file.url).call(y,"https://")!==0&&(k.file.url=k.file.url.replace("http","https"))}return k},t.exports=m;var v=e(896),g=e(897),b=e(898)},function(t,r,e){var n=e(315);t.exports=n},function(t,r){var e=typeof document=="object"&&document.all,n=e===void 0&&e!==void 0;t.exports={all:e,IS_HTMLDDA:n}},function(t,r,e){var n=e(92);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,r,e){var n=e(27),o=e(4),s=e(158);t.exports=!n&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(t,r,e){var n=e(4),o=e(16),s=/#|\.prototype\./,a=function(m,v){var g=d[i(m)];return g==c||g!=u&&(o(v)?n(v):!!v)},i=a.normalize=function(m){return String(m).replace(s,".").toLowerCase()},d=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},function(t,r,e){var n=e(27),o=e(4);t.exports=n&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(t,r,e){var n=e(1),o=e(4),s=e(79),a=e(28),i=e(42),d=e(45),u=e(212),c=e(95),m=e(160),v=e(111),g=e(20),b=e(93),T=g("isConcatSpreadable"),k=b>=51||!o(function(){var V=[];return V[T]=!1,V.concat()[0]!==V}),y=v("concat"),A=function(V){if(!a(V))return!1;var Ce=V[T];return Ce!==void 0?!!Ce:s(V)};n({target:"Array",proto:!0,arity:1,forced:!k||!y},{concat:function(V){var Ce,ie,Oe,he,Y,ae=i(this),Fe=m(ae,0),ze=0;for(Ce=-1,Oe=arguments.length;Ce<Oe;Ce++)if(A(Y=Ce===-1?ae:arguments[Ce]))for(he=d(Y),u(ze+he),ie=0;ie<he;ie++,ze++)ie in Y&&c(Fe,ze,Y[ie]);else u(ze+1),c(Fe,ze++,Y);return Fe.length=ze,Fe}})},function(t,r){var e=TypeError;t.exports=function(n){if(n>9007199254740991)throw e("Maximum allowed index exceeded");return n}},function(t,r,e){var n=e(11),o=e(16),s=e(157),a=n(Function.toString);o(s.inspectSource)||(s.inspectSource=function(i){return a(i)}),t.exports=s.inspectSource},function(t,r,e){var n=e(327);t.exports=n},function(t,r,e){var n=e(11),o=e(29),s=e(43),a=e(159).indexOf,i=e(112),d=n([].push);t.exports=function(u,c){var m,v=s(u),g=0,b=[];for(m in v)!o(i,m)&&o(v,m)&&d(b,m);for(;c.length>g;)o(v,m=c[g++])&&(~a(b,m)||d(b,m));return b}},function(t,r,e){var n=e(33);t.exports=n("document","documentElement")},function(t,r,e){var n=e(332);e(67),t.exports=n},function(t,r,e){e(333),e(336),e(337),e(222),e(338)},function(t,r,e){var n=e(128),o=e(45),s=e(95),a=Array,i=Math.max;t.exports=function(d,u,c){for(var m=o(d),v=n(u,m),g=n(c===void 0?m:c,m),b=a(i(g-v,0)),T=0;v<g;v++,T++)s(b,T,d[v]);return b.length=T,b}},function(t,r,e){var n=e(19),o=e(33),s=e(20),a=e(66);t.exports=function(){var i=o("Symbol"),d=i&&i.prototype,u=d&&d.valueOf,c=s("toPrimitive");d&&!d[c]&&a(d,c,function(m){return n(u,this)},{arity:1})}},function(t,r,e){var n=e(92);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},function(t,r,e){var n=e(1),o=e(33),s=e(76),a=e(19),i=e(11),d=e(4),u=e(79),c=e(16),m=e(28),v=e(126),g=e(98),b=e(92),T=o("JSON","stringify"),k=i(/./.exec),y=i("".charAt),A=i("".charCodeAt),V=i("".replace),Ce=i(1 .toString),ie=/[\uD800-\uDFFF]/g,Oe=/^[\uD800-\uDBFF]$/,he=/^[\uDC00-\uDFFF]$/,Y=!b||d(function(){var pe=o("Symbol")();return T([pe])!="[null]"||T({a:pe})!="{}"||T(Object(pe))!="{}"}),ae=d(function(){return T("\uDF06\uD834")!=='"\\udf06\\ud834"'||T("\uDEAD")!=='"\\udead"'}),Fe=function(pe,le){var xe=g(arguments),ue=le;if((m(le)||pe!==void 0)&&!v(pe))return u(le)||(le=function(Ve,Ue){if(c(ue)&&(Ue=a(ue,this,Ve,Ue)),!v(Ue))return Ue}),xe[1]=le,s(T,null,xe)},ze=function(pe,le,xe){var ue=y(xe,le-1),Ve=y(xe,le+1);return k(Oe,pe)&&!k(he,Ve)||k(he,pe)&&!k(Oe,ue)?"\\u"+Ce(A(pe,0),16):pe};T&&n({target:"JSON",stat:!0,arity:3,forced:Y||ae},{stringify:function(pe,le,xe){var ue=g(arguments),Ve=s(Y?Fe:T,null,ue);return ae&&typeof Ve=="string"?V(Ve,ie,ze):Ve}})},function(t,r,e){e(22)("iterator")},function(t,r,e){var n=e(22),o=e(220);n("toPrimitive"),o()},function(t,r,e){var n=e(27),o=e(29),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,i=o(s,"name"),d=i&&(function(){}).name==="something",u=i&&(!n||n&&a(s,"name").configurable);t.exports={EXISTS:i,PROPER:d,CONFIGURABLE:u}},function(t,r,e){var n,o,s,a=e(4),i=e(16),d=e(28),u=e(80),c=e(134),m=e(66),v=e(20),g=e(48),b=v("iterator"),T=!1;[].keys&&("next"in(s=[].keys())?(o=c(c(s)))!==Object.prototype&&(n=o):T=!0),!d(n)||a(function(){var k={};return n[b].call(k)!==k})?n={}:g&&(n=u(n)),i(n[b])||m(n,b,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:T}},function(t,r,e){var n=e(4);t.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(t,r,e){e(67);var n=e(65),o=e(29),s=e(21),a=e(374),i=Array.prototype,d={DOMTokenList:!0,NodeList:!0};t.exports=function(u){var c=u.forEach;return u===i||s(i,u)&&c===i.forEach||o(d,n(u))?a:c}},function(t,r,e){var n=e(382);t.exports=n},function(t,r,e){var n=e(386);e(67),t.exports=n},function(t,r,e){e(387)},function(t,r,e){var n=e(33),o=e(11),s=e(131),a=e(132),i=e(36),d=o([].concat);t.exports=n("Reflect","ownKeys")||function(u){var c=s.f(i(u)),m=a.f;return m?d(c,m(u)):c}},function(t,r,e){var n=e(20),o=e(99),s=n("iterator"),a=Array.prototype;t.exports=function(i){return i!==void 0&&(o.Array===i||a[s]===i)}},function(t,r,e){var n=e(19),o=e(31),s=e(36),a=e(78),i=e(136),d=TypeError;t.exports=function(u,c){var m=arguments.length<2?i(u):c;if(o(m))return s(n(m,u));throw d(a(u)+" is not iterable")}},function(t,r,e){var n=e(19),o=e(36),s=e(156);t.exports=function(a,i,d){var u,c;o(a);try{if(!(u=s(a,"return"))){if(i==="throw")throw d;return d}u=n(u,a)}catch(m){c=!0,u=m}if(i==="throw")throw d;if(c)throw u;return o(u),d}},function(t,r,e){var n=e(33),o=e(38),s=e(20),a=e(27),i=s("species");t.exports=function(d){var u=n(d),c=o.f;a&&u&&!u[i]&&c(u,i,{configurable:!0,get:function(){return this}})}},function(t,r,e){var n=e(36),o=e(168),s=e(91),a=e(20)("species");t.exports=function(i,d){var u,c=n(i).constructor;return c===void 0||s(u=n(c)[a])?d:o(u)}},function(t,r,e){var n,o,s,a,i=e(14),d=e(76),u=e(34),c=e(16),m=e(29),v=e(4),g=e(216),b=e(98),T=e(158),k=e(239),y=e(240),A=e(114),V=i.setImmediate,Ce=i.clearImmediate,ie=i.process,Oe=i.Dispatch,he=i.Function,Y=i.MessageChannel,ae=i.String,Fe=0,ze={};try{n=i.location}catch{}var pe=function(Ve){if(m(ze,Ve)){var Ue=ze[Ve];delete ze[Ve],Ue()}},le=function(Ve){return function(){pe(Ve)}},xe=function(Ve){pe(Ve.data)},ue=function(Ve){i.postMessage(ae(Ve),n.protocol+"//"+n.host)};V&&Ce||(V=function(Ve){k(arguments.length,1);var Ue=c(Ve)?Ve:he(Ve),er=b(arguments,1);return ze[++Fe]=function(){d(Ue,void 0,er)},o(Fe),Fe},Ce=function(Ve){delete ze[Ve]},A?o=function(Ve){ie.nextTick(le(Ve))}:Oe&&Oe.now?o=function(Ve){Oe.now(le(Ve))}:Y&&!y?(a=(s=new Y).port2,s.port1.onmessage=xe,o=u(a.postMessage,a)):i.addEventListener&&c(i.postMessage)&&!i.importScripts&&n&&n.protocol!=="file:"&&!v(ue)?(o=ue,i.addEventListener("message",xe,!1)):o="onreadystatechange"in T("script")?function(Ve){g.appendChild(T("script")).onreadystatechange=function(){g.removeChild(this),pe(Ve)}}:function(Ve){setTimeout(le(Ve),0)}),t.exports={set:V,clear:Ce}},function(t,r){var e=TypeError;t.exports=function(n,o){if(n<o)throw e("Not enough arguments");return n}},function(t,r,e){var n=e(64);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,r){t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},function(t,r,e){var n=e(101),o=e(243),s=e(115).CONSTRUCTOR;t.exports=s||!o(function(a){n.all(a).then(void 0,function(){})})},function(t,r,e){var n=e(20)("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch{}t.exports=function(i,d){if(!d&&!o)return!1;var u=!1;try{var c={};c[n]=function(){return{next:function(){return{done:u=!0}}}},i(c)}catch{}return u}},function(t,r,e){var n=e(36),o=e(28),s=e(68);t.exports=function(a,i){if(n(a),o(i)&&i.constructor===a)return i;var d=s.f(a);return(0,d.resolve)(i),d.promise}},function(t,r,e){var n=e(1),o=e(19),s=e(31),a=e(68),i=e(100),d=e(46);n({target:"Promise",stat:!0},{allSettled:function(u){var c=this,m=a.f(c),v=m.resolve,g=m.reject,b=i(function(){var T=s(c.resolve),k=[],y=0,A=1;d(u,function(V){var Ce=y++,ie=!1;A++,o(T,c,V).then(function(Oe){ie||(ie=!0,k[Ce]={status:"fulfilled",value:Oe},--A||v(k))},function(Oe){ie||(ie=!0,k[Ce]={status:"rejected",reason:Oe},--A||v(k))})}),--A||v(k)});return b.error&&g(b.value),m.promise}})},function(t,r,e){var n=e(1),o=e(19),s=e(31),a=e(33),i=e(68),d=e(100),u=e(46);n({target:"Promise",stat:!0},{any:function(c){var m=this,v=a("AggregateError"),g=i.f(m),b=g.resolve,T=g.reject,k=d(function(){var y=s(m.resolve),A=[],V=0,Ce=1,ie=!1;u(c,function(Oe){var he=V++,Y=!1;Ce++,o(y,m,Oe).then(function(ae){Y||ie||(ie=!0,b(ae))},function(ae){Y||ie||(Y=!0,A[he]=ae,--Ce||T(new v(A,"No one promise resolved")))})}),--Ce||T(new v(A,"No one promise resolved"))});return k.error&&T(k.value),g.promise}})},function(t,r,e){var n=e(410);t.exports=n},function(t,r,e){var n=e(25).default,o=e(412);t.exports=function(s){var a=o(s,"string");return n(a)==="symbol"?a:String(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(420);t.exports=n},function(t,r,e){var n=e(78),o=TypeError;t.exports=function(s,a){if(!delete s[a])throw o("Cannot delete property "+n(a)+" of "+n(s))}},function(t,r,e){e(455),e(457)},function(t,r,e){var n,o=e(14),s=e(76),a=e(16),i=e(456),d=e(64),u=e(98),c=e(239),m=o.Function,v=/MSIE .\./.test(d)||i&&((n=o.Bun.version.split(".")).length<3||n[0]==0&&(n[1]<3||n[1]==3&&n[2]==0));t.exports=function(g,b){var T=b?2:1;return v?function(k,y){var A=c(arguments.length,1)>T,V=a(k)?k:m(k),Ce=A?u(arguments,T):[],ie=A?function(){s(V,this,Ce)}:V;return b?g(ie,y):g(ie)}:g}},function(t,r,e){var n=e(475);t.exports=n},function(t,r){t.exports=function e(n,o){var s,a,i=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,d=/(^[ ]*|[ ]*$)/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,m=/^0/,v=function(ie){return e.insensitive&&(""+ie).toLowerCase()||""+ie},g=v(n).replace(d,"")||"",b=v(o).replace(d,"")||"",T=g.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),k=b.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=parseInt(g.match(c),16)||T.length!==1&&g.match(u)&&Date.parse(g),A=parseInt(b.match(c),16)||y&&b.match(u)&&Date.parse(b)||null;if(A){if(y<A)return-1;if(y>A)return 1}for(var V=0,Ce=Math.max(T.length,k.length);V<Ce;V++){if(s=!(T[V]||"").match(m)&&parseFloat(T[V])||T[V]||0,a=!(k[V]||"").match(m)&&parseFloat(k[V])||k[V]||0,isNaN(s)!==isNaN(a))return isNaN(s)?1:-1;if(typeof s!=typeof a&&(s+="",a+=""),s<a)return-1;if(s>a)return 1}return 0}},function(t,r,e){var n=e(119),o=e(88);t.exports=function(s){if(!o(s))return!1;var a=n(s);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"}},function(t,r,e){(function(n){var o=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=o}).call(this,e(56))},function(t,r){var e=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,r,e){var n=e(505),o=e(512),s=e(514),a=e(515),i=e(516);function d(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var v=u[c];this.set(v[0],v[1])}}d.prototype.clear=n,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=a,d.prototype.set=i,t.exports=d},function(t,r,e){var n=e(260),o=e(198),s=Object.prototype.hasOwnProperty;t.exports=function(a,i,d){var u=a[i];s.call(a,i)&&o(u,d)&&(d!==void 0||i in a)||n(a,i,d)}},function(t,r,e){var n=e(518);t.exports=function(o,s,a){s=="__proto__"&&n?n(o,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[s]=a}},function(t,r,e){var n=e(520),o=e(521),s=e(174),a=e(262),i=e(300),d=e(524),u=Object.prototype.hasOwnProperty;t.exports=function(c,m){var v=s(c),g=!v&&o(c),b=!v&&!g&&a(c),T=!v&&!g&&!b&&d(c),k=v||g||b||T,y=k?n(c.length,String):[],A=y.length;for(var V in c)!m&&!u.call(c,V)||k&&(V=="length"||b&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||i(V,A))||y.push(V);return y}},function(t,r,e){(function(n){var o=e(50),s=e(523),a=r&&!r.nodeType&&r,i=a&&typeof n=="object"&&n&&!n.nodeType&&n,d=i&&i.exports===a?o.Buffer:void 0,u=(d?d.isBuffer:void 0)||s;n.exports=u}).call(this,e(145)(t))},function(t,r){t.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(t,r){t.exports=function(e,n){return function(o){return e(n(o))}}},function(t,r){t.exports=function(){return[]}},function(t,r,e){var n=e(267),o=e(268),s=e(179),a=e(265),i=Object.getOwnPropertySymbols?function(d){for(var u=[];d;)n(u,s(d)),d=o(d);return u}:a;t.exports=i},function(t,r){t.exports=function(e,n){for(var o=-1,s=n.length,a=e.length;++o<s;)e[a+o]=n[o];return e}},function(t,r,e){var n=e(264)(Object.getPrototypeOf,Object);t.exports=n},function(t,r,e){var n=e(267),o=e(174);t.exports=function(s,a,i){var d=a(s);return o(s)?d:n(d,i(s))}},function(t,r,e){var n=e(83)(e(50),"Set");t.exports=n},function(t,r,e){var n=e(567);t.exports=n},function(t,r,e){var n=e(11),o=e(31),s=e(28),a=e(29),i=e(98),d=e(107),u=Function,c=n([].concat),m=n([].join),v={},g=function(b,T,k){if(!a(v,T)){for(var y=[],A=0;A<T;A++)y[A]="a["+A+"]";v[T]=u("C,a","return new C("+m(y,",")+")")}return v[T](b,k)};t.exports=d?u.bind:function(b){var T=o(this),k=T.prototype,y=i(arguments,1),A=function(){var V=c(y,i(arguments));return this instanceof A?g(T,V.length,V):T.apply(b,V)};return s(k)&&(A.prototype=k),A}},function(t,r,e){var n=e(87),o=e(6),s=e(69),a=e(123),i=e(10),d=e(54),u=d.getGlobal(),c={},m=u.name||"_parent",v=[],g=[];c.addMsgListener=function(Oe){v.push(Oe)};var b,T,k,y,A=(b=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(Oe){return Oe=Oe||"",b.test(Oe)?RegExp.$1:"*"}),V=function(){var Oe,he,Y=n(Oe=unescape(u.name||"")).call(Oe);if(Y&&o(Y).call(Y,"MSG|")===0){u.name="";var ae=d.string2object(Y.replace("MSG|",""),"|"),Fe=(ae.origin||"").toLowerCase();Fe&&Fe!=="*"&&o(he=location.href.toLowerCase()).call(he,Fe)!==0||function(ze){for(var pe=0,le=v.length;pe<le;pe++)try{v[pe].call(null,ze)}catch{}}({data:JSON.parse(ae.data||"null"),source:u.frames[ae.self]||ae.self,origin:A(ae.ref||(typeof document>"u"?"":document.referrer))})}},Ce=(k=function(Oe,he){for(var Y=0,ae=Oe.length;Y<ae;Y++)if(Oe[Y]===he)return!0;return!1},function(){if(g.length){T=[];for(var Oe,he=g.length-1;he>=0;he--)Oe=g[he],k(T,Oe.w)||(T.push(Oe.w),s(g).call(g,he,1),Oe.w.name=Oe.d);T=null}}),ie=c.startTimer=(y=!1,function(){y||(y=!0,u.postMessage||(a(Ce,100),a(V,20)))});c.postMessage=function(Oe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(d.fillUndef(he,{origin:"*",source:m}),u.postMessage){var Y=he.data;u.FormData||(Y=i(Y)),Oe.postMessage(Y,he.origin)}else{if(ie(),d.isObject(he)){var ae={};ae.origin=he.origin||"",ae.ref=location.href,ae.self=he.source,ae.data=i(he.data),he="MSG|"+d.object2string(ae,"|",!0)}g.unshift({w:Oe,d:escape(he)})}},t.exports=c},function(t,r,e){var n=e(589);t.exports=n},function(t,r,e){var n=e(0),o={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},s={genResponseBody:function(a){return o[a=a||"file"]},parseResponse:function(a,i){n.notundef(a.size)&&(a.size=+a.size),n.notundef(a.w)&&(a.w=+a.w),n.notundef(a.h)&&(a.h=+a.h),n.notundef(a.dur)&&(a.dur=+a.dur);var d=a.orientation;if(n.notundef(d)&&(delete a.orientation,i&&(d==="right, top"||d==="left, bottom"))){var u=a.w;a.w=a.h,a.h=u}return a}};t.exports=s},function(t,r,e){var n=e(120),o=e(15),s=e(6),a=e(57),i=e(26),d=["Code","code","Message","message"],u=e(13),c=e(0),m=e(40),v=e(605),g=e(606),b=e(105),T=b.EMResourceUploadWay,k=b.EMExceptionState,y=e(183).abort,A=c.supportFormData;function V(ie,Oe){var he=this,Y=ie.uploadprogress,ae=ie.uploaddone,Fe=ie.beginupload;return{beginupload:typeof Fe=="function"?function(ze){try{Fe(ze,Oe)}catch(pe){he.logger.error("Upload::options.beginupload execute error",pe)}}:function(){},uploadprogress:typeof Y=="function"?function(ze){he.reporterHook.emit("reporter/uploadUpdate",{transferred_size:ze.loaded});try{Y(ze,Oe)}catch(pe){he.logger.error("Upload::options.uploadprogress execute error",pe)}}:function(ze){he.reporterHook.emit("reporter/uploadUpdate",{transferred_size:ze.loaded})},uploaddone:function(ze,pe){ze?he.reporterHook.emit("reporter/uploadEnd",ze.code==="RequestAbortedError"||ze.code==="abort"?k.kCanceled:k.kFailed):he.reporterHook.emit("reporter/uploadEnd",k.kSucceed);try{ae(ze,pe,null,Oe)}catch(le){he.logger.error("Upload::options.uploaddone execute error",le)}}}}function Ce(ie,Oe,he){var Y=this;Y.options=c.copy(ie),ie=Y.options,c.verifyOptions(ie,"url fileName"),c.verifyParamPresentJustOne(ie,"blob fileInput"),c.verifyCallback(ie,"beginupload uploadprogress uploaddone"),Y.reporterHook=Oe.reporterHook,Y.logger=Oe.logger,Y.message=he;var ae=V.call(this,ie,he),Fe=ae.beginupload,ze=ae.uploadprogress,pe=ae.uploaddone;Y.options.beginupload=Fe,Y.options.uploadprogress=ze,Y.options.uploaddone=pe,ie.fileInput&&(ie.fileInput=c.verifyFileInput(ie.fileInput)),ie.type&&c.verifyFileType(ie.type),ie.timeout?c.verifyParamType("timeout",ie.timeout,"number"):ie.timeout=6e5,c.verifyFileUploadCallback(ie),ie.data={},ie.params&&c.merge(ie.data,ie.params);var le,xe,ue=ie.fileName,Ve=ie.fileInput;if(A){if(Ve){if(!(xe=ie.type?c.filterFiles(Ve.files,ie.type):o([]).call(Ve.files,0))||!xe.length)return void ie.uploaddone(m.newWrongFileTypeError("未读取到"+ie.type+"类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了"+ie.type+"类型的文件"));ie.data[ue]=xe[0],le=Ve.files[0].size}else if(ie.blob){var Ue;if(ie.data[ue]=ie.blob,ie.type!=="file"&&ie.blob.type&&s(Ue=ie.blob.type).call(Ue,ie.type)===-1)return void ie.uploaddone(m.newWrongFileTypeError("未读取到"+ie.type+"类型的文件, 请确保选择了"+ie.type+"类型的文件"));le=ie.blob.size}if(Y.reporterHook.emit("reporter/uploadUpdate",{full_size:le}),ie.maxSize&&le>ie.maxSize)return void ie.uploaddone(m.newFileTooLargeError("上传文件大小超过".concat(ie.maxSize,"限制")))}function er(){if(Y.logger.info("Upload:enter aws upload"),le){if(le>u.chunkMaxSize)ie.uploaddone(m.newFileTooLargeError("直传文件大小超过".concat(u.commonMaxSize,"限制")));else if(ie.s3Policy&&ie.s3Policy.uploadConfig&&ie.s3Policy.uploadConfig.retryPolicy){var pr=ie.s3Policy.uploadConfig.retryPolicy,ar={accessKeyId:ie.mixStoreToken.accessKeyId,secretAccessKey:ie.mixStoreToken.secretAccessKey,sessionToken:ie.mixStoreToken.sessionToken,region:ie.mixStoreToken.region,maxRetries:pr.retry},hr=new ie.s3;hr.config.update(ar);var Ne=Y.reporterHook.getNTPTime();hr.config.systemClockOffset=Ne-a();var or=decodeURIComponent(ie.mixStoreToken.bucket),ir=decodeURIComponent(ie.mixStoreToken.objectName),$e=ie.data[ue],tr=hr.upload({Bucket:or,Key:ir,Body:$e,Metadata:{token:ie.mixStoreToken.token},ContentType:$e.type||"application/octet-stream"});tr.on("httpUploadProgress",function(nr){var Pt=Math.floor(1e4*nr.loaded/nr.total)/100,Et={docId:ie.docId,total:nr.total,loaded:nr.loaded,percentage:Pt,percentageText:Pt+"%"};ie.fileInput&&(Et.fileInput=ie.fileInput),ie.blob&&(Et.blob=ie.blob),ie.uploadprogress(Et)}),tr.send(function(nr,Pt){if(ie.errorHook({bucket:or,object:ir},{provider:"s3"}),ie.docId&&(Pt.docId=ie.docId),nr&&nr.code==="RequestAbortedError")Y.logger.error("uploadFile:","api::s3:upload file abort",nr),Y.onError(nr);else if(nr){var Et;ie.logger.error("error:","api::s3:upload file failed",nr);var kt=ie.providers[(s(Et=ie.providers).call(Et,ie.curProvider)+1)%ie.providers.length];pr.retryNext&&kt?(Y.addCircuitTimer(ie,kt),kt===1&&ie.getMixStoreToken(1,function(cr){ie.mixStoreToken=cr,At()})):Y.onError(Pt),ie.errorHook(nr,{provider:"s3"})}else{var rr=Y.options.s3Policy.cdnSchema;rr=(rr=rr.replace("{cdnDomain}",Y.options.s3Policy.dlcdn)).replace("{objectName}",Pt.Key),ie.uploaddone(null,{size:$e.size,name:$e.name,url:rr,ext:$e.name.split(".")[1]||"unknown",_url_safe:ie.mixStoreToken.shortUrl,isS3:!0}),ie.logger.info("s3 Upload done: fileObj is",{size:$e.size,name:$e.name,url:rr,ext:$e.name.split(".")[1]||"unknown",_url_safe:ie.mixStoreToken.shortUrl,isS3:!0})}}),typeof ie.beginupload=="function"&&ie.beginupload(tr)}}else ie.uploaddone(m.newFileTooLargeError("Browser version is too low"))}function At(){if(Y.logger.info("Upload:enter nos upload"),le&&!ie.commonUpload)return Y.logger.info("Upload:use chunk upload, url ".concat(ie.url)),le>u.chunkMaxSize?void ie.uploaddone(m.newFileTooLargeError("直传文件大小超过".concat(u.chunkMaxSize,"限制"))):void(Y.sn=g(ie,ue,Y,-1));if(Y.logger.info("Upload:use common upload, url ".concat(ie.url)),le&&le>u.commonMaxSize)ie.uploaddone(m.newFileTooLargeError("普通上传文件大小超过".concat(u.commonMaxSize,"限制")));else{le||(c.dataset(Ve,"name",ue),ie.data.input=Ve);var pr={data:ie.data,onaftersend:function(){ie.beginupload(Y,Y.message)},onuploading:function(ar){var hr=Math.floor(1e4*ar.loaded/ar.total)/100,Ne={docId:ie.docId,total:ar.total,loaded:ar.loaded,percentage:hr,percentageText:hr+"%"};ie.fileInput&&(Ne.fileInput=ie.fileInput),ie.blob&&(Ne.blob=ie.blob),ie.uploadprogress(Ne)},onload:function(ar){var hr;if(ie.docId&&(ar.docId=ie.docId),!ar.Error)return ie.uploaddone(null,ar),void ie.logger.info("nos Upload done: fileObj is",ar);if(ie.mixEnable&&ie.curProvider===1){var Ne=ie.nosPolicy.uploadConfig.retryPolicy,or=ie.providers[(s(hr=ie.providers).call(hr,ie.curProvider)+1)%ie.providers.length];Ne.retryNext&&or?(Y.addCircuitTimer(ie,or),or===2&&ie.getMixStoreToken(2,function(ir){ie.mixStoreToken=ir,er()})):Y.onError(ar)}else Y.onError(ar)},onerror:function(ar){var hr;if(ie.mixEnable&&ie.curProvider===1){var Ne,or=ie.nosPolicy.uploadConfig.retryPolicy,ir=ie.providers[(s(Ne=ie.providers).call(Ne,ie.curProvider)+1)%ie.providers.length];if(or.retryNext&&ir)Y.addCircuitTimer(ie,ir),ir===2&&ie.getMixStoreToken(2,function($e){ie.mixStoreToken=$e,er()});else try{hr=ar.result?JSON.parse(ar.result):ar,Y.onError(hr)}catch{ie.uploaddone(new m(ar.message,ar.code),Y.options)}}else try{hr=ar.result?JSON.parse(ar.result):ar,Y.onError(hr)}catch{ie.uploaddone(new m(ar.message,ar.code),Y.options)}ie.errorHook(ar,{provider:"nos"})}};A||(pr.mode="iframe"),pr.putFileAtEnd=!0,Y.sn=v(ie.url,pr)}}if(ie.mixEnable&&ie.curProvider===2){var ur=Y.options.s3Policy.cdnSchema;ur=ur.replace("{cdnDomain}",Y.options.s3Policy.dlcdn),Y.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ur,operation_type:T.kResourceUploadWayAWSPlugin}),er()}else ie.mixEnable&&ie.curProvider===1?(Y.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ie.url,operation_type:T.kResourceUploadWayNOSPlugin}),At()):(Y.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ie.url,operation_type:T.kResourceUploadWayNOS}),At())}Ce.prototype.addCircuitTimer=function(ie,Oe){var he=this;if(ie.curProvider=Oe,ie.s3Policy&&ie.nosPolicy){var Y=ie[ie.curProvider===1?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!Y||Y===0)return;he.circuitTimer&&clearTimeout(he.circuitTimer),he.circuitTimer=i(function(){ie.curProvider=ie.providers[0],he.circuitTimer=void 0},1e3*Y)}},Ce.prototype.onError=function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=this,he=Oe.options,Y=ie.Error||ie||{},ae=Y.Code,Fe=Y.code,ze=Y.Message,pe=Y.message,le=n(Y,d),xe=ae||Fe||"unknown",ue=ze||pe||"未知错误";he.uploaddone(new m(xe+"("+ue+")",xe,le))},Ce.prototype.abort=function(){y(this.sn)},t.exports=Ce},function(t,r,e){t.exports=e(278)},function(t,r,e){var n=e(607);t.exports=n},function(t,r,e){var n=e(186),o=e(137),s=e(187);t.exports=function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=n(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o(a,"prototype",{writable:!1}),i&&s(a,i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(25).default,o=e(621);t.exports=function(s,a){if(a&&(n(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(s)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(622)},function(t,r,e){var n=e(625);t.exports=n},function(t,r,e){var n=e(6),o=e(0),s={fromDataURL:function(a){var i,d,u=o.getGlobal();d=n(i=a.split(",")[0]).call(i,"base64")>=0?u.atob(a.split(",")[1]):u.decodeURIComponent(a.split(",")[1]);for(var c=a.split(",")[0].split(":")[1].split(";")[0],m=new Uint8Array(d.length),v=0;v<d.length;v++)m[v]=d.charCodeAt(v);return new u.Blob([m],{type:c})}};t.exports=s},function(t,r,e){var n=e(5),o=e(8),s=e(9),a=e(0),i={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},d={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function u(c){a.verifyOptions(c,"type","image::ImageOp"),a.verifyParamValid("type",c.type,u.validTypes,"image::ImageOp"),a.merge(this,c),this.type=i[c.type]}u.validTypes=n(i),u.reverse=function(c){var m=a.copy(c);return m.type=d[m.type],m},u.reverseImageOps=function(c){return o(c).call(c,function(m){return s(u).call(u,m)})},t.exports=u},function(t,r,e){var n=e(2),o=e(5),s={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},a={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},i={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};t.exports={parseAvSignalType:function(d){return s[d]||d},parseAvSignalMember:function(d){var u,c={};return n(u=o(d)).call(u,function(m){c[a[m]]=d[m]}),c},parseAvSignalError:function(d){return d.message=i[d.code]||d.message||d,d}}},function(t,r,e){t.exports=e(650)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */function getGlobal(){return typeof window<"u"?window:typeof self<"u"?self:global!==void 0?global:{}}var root=getGlobal(),io=module.exports;root.location===void 0&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){(function(t,r){var e=t;e.version="0.9.11",e.protocol=1,e.transports=[],e.j=[],e.sockets={},e.connect=function(n,o){var s,a,i=e.util.parseUri(n);r&&r.location&&(i.protocol=i.protocol||r.location.protocol.slice(0,-1),i.host=i.host||(r.document?r.document.domain:r.location.hostname),i.port=i.port||r.location.port),s=e.util.uniqueUri(i);var d={host:i.ipv6uri?"["+i.host+"]":i.host,secure:i.protocol==="https",port:i.port||(i.protocol==="https"?443:80),query:i.query||""};return e.util.merge(d,o),!d["force new connection"]&&e.sockets[s]||(a=new e.Socket(d)),!d["force new connection"]&&a&&(e.sockets[s]=a),(a=a||e.sockets[s]).of(i.path.length>1?i.path:"")}})(module.exports,root),function(t,r){var e=t.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(a){var i=a,d=a.indexOf("["),u=a.indexOf("]");d!=-1&&u!=-1&&(a=a.substring(0,d)+a.substring(d,u).replace(/:/g,";")+a.substring(u,a.length));for(var c=n.exec(a||""),m={},v=14;v--;)m[o[v]]=c[v]||"";return d!=-1&&u!=-1&&(m.source=i,m.host=m.host.substring(1,m.host.length-1).replace(/;/g,":"),m.authority=m.authority.replace("[","").replace("]","").replace(/;/g,":"),m.ipv6uri=!0),m},e.uniqueUri=function(a){var i=a.protocol,d=a.host,u=a.port;return"document"in r&&r.document?(d=d||document.domain,u=u||(i=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(d=d||"localhost",u||i!="https"||(u=443)),(i||"http")+"://"+d+":"+(u||80)},e.query=function(a,i){var d=e.chunkQuery(a||""),u=[];for(var c in e.merge(d,e.chunkQuery(i||"")),d)d.hasOwnProperty(c)&&u.push(c+"="+d[c]);return u.length?"?"+u.join("&"):""},e.chunkQuery=function(a){for(var i,d={},u=a.split("&"),c=0,m=u.length;c<m;++c)(i=u[c].split("="))[0]&&(d[i[0]]=i[1]);return d};var s=!1;e.load=function(a){if(typeof document<"u"&&document&&document.readyState==="complete"||s)return a();e.on(r,"load",a,!1)},e.on=function(a,i,d,u){a.attachEvent?a.attachEvent("on"+i,d):a.addEventListener&&a.addEventListener(i,d,u)},e.request=function(a){if(a&&typeof XDomainRequest<"u"&&!e.ua.hasCORS)return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!a||e.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},root!==void 0&&e.load(function(){s=!0}),e.defer=function(a){if(!e.ua.webkit||typeof importScripts<"u")return a();e.load(function(){setTimeout(a,100)})},e.merge=function(a,i,d,u){var c,m=u||[],v=d===void 0?2:d;for(c in i)i.hasOwnProperty(c)&&e.indexOf(m,c)<0&&(typeof a[c]=="object"&&v?e.merge(a[c],i[c],v-1,m):(a[c]=i[c],m.push(i[c])));return a},e.mixin=function(a,i){e.merge(a.prototype,i.prototype)},e.inherit=function(a,i){function d(){}d.prototype=i.prototype,a.prototype=new d},e.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},e.intersect=function(a,i){for(var d=[],u=a.length>i.length?a:i,c=a.length>i.length?i:a,m=0,v=c.length;m<v;m++)~e.indexOf(u,c[m])&&d.push(c[m]);return d},e.indexOf=function(a,i,d){var u=a.length;for(d=d<0?d+u<0?0:d+u:d||0;d<u&&a[d]!==i;d++);return u<=d?-1:d},e.toArray=function(a){for(var i=[],d=0,u=a.length;d<u;d++)i.push(a[d]);return i},e.ua={},e.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var a=new XMLHttpRequest}catch{return!1}return a.withCredentials!=null}(),e.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent),e.ua.iDevice=typeof navigator<"u"&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,root),function(t,r){function e(){}t.EventEmitter=e,e.prototype.on=function(n,o){return this.$events||(this.$events={}),this.$events[n]?r.util.isArray(this.$events[n])?this.$events[n].push(o):this.$events[n]=[this.$events[n],o]:this.$events[n]=o,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(n,o){var s=this;function a(){s.removeListener(n,a),o.apply(this,arguments)}return a.listener=o,this.on(n,a),this},e.prototype.removeListener=function(n,o){if(this.$events&&this.$events[n]){var s=this.$events[n];if(r.util.isArray(s)){for(var a=-1,i=0,d=s.length;i<d;i++)if(s[i]===o||s[i].listener&&s[i].listener===o){a=i;break}if(a<0)return this;s.splice(a,1),s.length||delete this.$events[n]}else(s===o||s.listener&&s.listener===o)&&delete this.$events[n]}return this},e.prototype.removeAllListeners=function(n){return n===void 0?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},e.prototype.removeAllListenersX=function(n){if(n===void 0)return this.$events={},this;for(let o in this.$events)o!==n&&(this.$events[o]=null);return this},e.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},e.prototype.emit=function(n){if(!this.$events)return!1;var o=this.$events[n];if(!o)return!1;var s=Array.prototype.slice.call(arguments,1);if(typeof o=="function")o.apply(this,s);else{if(!r.util.isArray(o))return!1;for(var a=o.slice(),i=0,d=a.length;i<d;i++)a[i].apply(this,s)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,r){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(r){var e=meta[r];return typeof e=="string"?e:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,r){var e,n,o,s,a,i=gap,d=r[t];switch(d instanceof Date&&(d=date(t)),typeof rep=="function"&&(d=rep.call(r,t,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,a=[],Object.prototype.toString.apply(d)==="[object Array]"){for(s=d.length,e=0;e<s;e+=1)a[e]=str(e,d)||"null";return o=a.length===0?"[]":gap?`[
`+gap+a.join(`,
`+gap)+`
`+i+"]":"["+a.join(",")+"]",gap=i,o}if(rep&&typeof rep=="object")for(s=rep.length,e=0;e<s;e+=1)typeof rep[e]=="string"&&(o=str(n=rep[e],d))&&a.push(quote(n)+(gap?": ":":")+o);else for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(o=str(n,d))&&a.push(quote(n)+(gap?": ":":")+o);return o=a.length===0?"{}":gap?`{
`+gap+a.join(`,
`+gap)+`
`+i+"}":"{"+a.join(",")+"}",gap=i,o}}JSON.stringify=function(t,r,e){var n;if(gap="",indent="",typeof e=="number")for(n=0;n<e;n+=1)indent+=" ";else typeof e=="string"&&(indent=e);if(rep=r,r&&typeof r!="function"&&(typeof r!="object"||typeof r.length!="number"))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,r){var e,n,o=t[r];if(o&&typeof o=="object")for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&((n=walk(o,e))!==void 0?o[e]=n:delete o[e]);return reviver.call(t,r,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(io!==void 0?io:module.exports,typeof JSON<"u"?JSON:void 0),function(t,r){var e=t.parser={},n=e.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],o=e.reasons=["transport not supported","client not handshaken","unauthorized"],s=e.advice=["reconnect"],a=r.JSON,i=r.util.indexOf;e.encodePacket=function(u){var c=i(n,u.type),m=u.id||"",v=u.endpoint||"",g=u.ack,b=null;switch(u.type){case"error":var T=u.reason?i(o,u.reason):"",k=u.advice?i(s,u.advice):"";T===""&&k===""||(b=T+(k!==""?"+"+k:""));break;case"message":u.data!==""&&(b=u.data);break;case"event":var y={name:u.name};u.args&&u.args.length&&(y.args=u.args),b=a.stringify(y);break;case"json":b=a.stringify(u.data);break;case"connect":u.qs&&(b=u.qs);break;case"ack":b=u.ackId+(u.args&&u.args.length?"+"+a.stringify(u.args):"")}var A=[c,m+(g=="data"?"+":""),v];return b!=null&&A.push(b),A.join(":")},e.encodePayload=function(u){var c="";if(u.length==1)return u[0];for(var m=0,v=u.length;m<v;m++)c+="�"+u[m].length+"�"+u[m];return c};var d=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function(u){if(!(v=u.match(d)))return{};var c=v[2]||"",m=(u=v[5]||"",{type:n[v[1]],endpoint:v[4]||""});switch(c&&(m.id=c,v[3]?m.ack="data":m.ack=!0),m.type){case"error":var v=u.split("+");m.reason=o[v[0]]||"",m.advice=s[v[1]]||"";break;case"message":m.data=u||"";break;case"event":try{var g=a.parse(u);m.name=g.name,m.args=g.args}catch{}m.args=m.args||[];break;case"json":try{m.data=a.parse(u)}catch{}break;case"connect":m.qs=u||"";break;case"ack":if((v=u.match(/^([0-9]+)(\+)?(.*)/))&&(m.ackId=v[1],m.args=[],v[3]))try{m.args=v[3]?a.parse(v[3]):[]}catch{}}return m},e.decodePayload=function(u){var c=function(k,y){for(var A=0,V=k;V<y.length;V++){if(y.charAt(V)=="�")return A;A++}return A};if(u.charAt(0)=="�"){for(var m=[],v=1,g="";v<u.length;v++)if(u.charAt(v)=="�"){var b=u.substr(v+1).substr(0,g);if(u.charAt(v+1+Number(g))!="�"&&v+1+Number(g)!=u.length){var T=Number(g);l=c(v+T+1,u),b=u.substr(v+1).substr(0,T+l),v+=l}m.push(e.decodePacket(b)),v+=Number(g)+1,g=""}else g+=u.charAt(v);return m}return[e.decodePacket(u)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r){function e(n,o){this.socket=n,this.sessid=o}t.Transport=e,r.util.mixin(e,r.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(n){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""){var o=r.parser.decodePayload(n);if(o&&o.length)for(var s=0,a=o.length;s<a;s++)this.onPacket(o[s])}return this},e.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.socket&&n.socket.publish("info","socket disconnected by setCloseTimeout"),n.onDisconnect()},this.socket.closeTimeout)}},e.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect():this.socket.setBuffer(!1),this):this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(n){this.send(r.parser.encodePacket(n))},e.prototype.onHeartbeat=function(n){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.socket.publish("info","transport onClose"),this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect(),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},e.prototype.onDisconnectDone=function(){},e.prototype.onConnectionOver=function(){},e.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+r.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(n,o){o.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(s){if(this.options={port:80,secure:!1,document:"document"in e&&document,resource:"socket.io",transports:s.transports||r.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,needToXHR:!0,manualFlush:!1},r.util.merge(this.options,s),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||r.util.ua.hasCORS)){var a=this;r.util.on(e,"beforeunload",function(){a.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function o(){}t.Socket=n,r.util.mixin(n,r.EventEmitter),n.prototype.of=function(s){return this.namespaces[s]||(this.namespaces[s]=new r.SocketNamespace(this,s),s!==""&&this.namespaces[s].packet({type:"connect"})),this.namespaces[s]},n.prototype.publish=function(){var s;for(var a in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(a)&&(s=this.of(a)).$emit.apply(s,arguments)},n.prototype.guid=function(){var s=root.crypto||root.msCrypto;if(s){var a=new Uint8Array(16);s.getRandomValues(a),a[6]&=15,a[6]|=64,a[8]&=63,a[8]|=128;for(var i="",d=0;d<a.length;d++){var u=a[d].toString(16);u.length===1&&(u="0"+u),i+=u}return i.substring(0,8)+"-"+i.substring(8,12)+"-"+i.substring(12,16)+"-"+i.substring(16,20)+"-"+i.substring(20)}},n.prototype.handshake=function(s){var a=this,i=this.options;if(!this.options.needToXHR&&this.options.transports.length===1&&this.options.transports[0]==="websocket"){var d=this.guid();if(d)return void setTimeout(function(){a.publish("info","xhr, skip and get:"+d),s.apply(null,[d,"90","60","websocket"])},0)}function u(b){b instanceof Error?(a.connecting=!1,a.publish("info","xhr, status:200, but got error:",b),a.onError("xhr, status:200, but got error:"+b.message,b)):s.apply(null,b.split(":"))}var c=["http"+(i.secure?"s":"")+":/",i.host+":"+i.port,i.resource,r.protocol,r.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!r.util.ua.hasCORS&&typeof document<"u"&&document){var m=document.getElementsByTagName("script")[0],v=document.createElement("script");v.src=c+"&jsonp="+r.j.length,v.onreadystatechange=function(){this.readyState=="loaded"&&v.parentNode&&(v.parentNode.removeChild(v),a.connecting=!1,a.publish("info","xhr, jsonp:Server down or port not open"),!a.reconnecting&&a.onError("Server down or port not open",new Error("xhr, jsonp:server down or port not open")),a.publish("handshake_failed"))},m.parentNode.insertBefore(v,m),r.j.push(function(b){u(b),v.parentNode.removeChild(v)})}else{var g=r.util.request();g.open("GET",c,!0),g.timeout=8e3,this.isXDomain()&&(g.withCredentials=!0),g.onreadystatechange=function(){a.publish("info","xhr, readyState:"+g.readyState+" status:"+g.status),g.readyState==4&&(a.publish("info","xhr, responseText:"+g.responseText),g.onreadystatechange=o,g.status==200?u(g.responseText):g.status==403?(a.connecting=!1,a.onError(g.responseText,new Error("xhr, status:403"+g.responseText)),a.publish("handshake_failed")):(a.connecting=!1,!a.reconnecting&&a.onError(g.responseText,new Error("xhr, status:"+g.status+" "+g.responseText)),a.publish("handshake_failed")))},g.ontimeout=function(b){a.publish("info","xhr, timeout"),a.connecting=!1,!a.reconnecting&&a.onError(g.responseText,new Error("xhr, timeout")),a.publish("handshake_failed")},g.send(null)}},n.prototype.connect=function(s){if(this.connecting)return this;var a=this;return a.connecting=!0,this.handshake(function(i,d,u,c){a.publish("info","SocketIO handshake parameter: sid: "+i+", transports: "+c+", close: "+u+", heartbeat: "+d),a.sessionid=i,a.closeTimeout=1e3*u,a.heartbeatTimeout=1e3*d,a.transports||(a.transports=a.origTransports=c?r.util.intersect(c.split(","),a.options.transports):a.options.transports),a.setHeartbeatTimeout(),a.once("connect",function(){a.publish("info","tcp, clear connect timeout due to recv connect event"),clearTimeout(a.connectTimeoutTimer),a.connectTimeoutTimer=null,s&&typeof s=="function"&&s()}),a.doConnect()}),this},n.prototype.doConnect=function(){var s=this;if(s.transport&&s.transport.clearTimeouts(),s.transport=s.getTransport(s.transports),!s.transport)return s.publish("connect_failed");s.transport.ready(s,function(){s.connecting=!0,s.publish("info","tcp, connecting, transport ready in "+s.transport.name),s.publish("connecting",s.transport.name),s.transport.open(),s.options["connect timeout"]&&(s.connectTimeoutTimer&&clearTimeout(s.connectTimeoutTimer),s.publish("info","set new connect timeout"),s.connectTimeoutTimer=setTimeout(function(){s.publish("info","trigger connect timeout due to setTimeout"),s.transport.close(),s.tryNextTransport()},s.options["connect timeout"]))})},n.prototype.getTransport=function(s){const a=this;for(var i,d=s||this.transports,u=0;i=d[u];u++)if(a.publish("info","check transport: "+i),r.Transport[i]&&r.Transport[i].check(this)&&(!this.isXDomain()||r.Transport[i].xdomainCheck(this)))return a.publish("info","use transport: "+i),new r.Transport[i](this,this.sessionid);return null},n.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var s=this.transports;s.length>0&&s.splice(0,1)[0]!=this.transport.name;);s.length?this.doConnect():this.publish("connect_failed")}},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var s=this;this.heartbeatTimeoutTimer=setTimeout(function(){s.transport&&(s.publish("info","transport closed by setHeartbeatTimeout"),s.transport.onClose())},this.heartbeatTimeout)}},n.prototype.packet=function(s){return this.connected&&!this.doBuffer?this.transport.packet(s):this.buffer.push(s),this},n.prototype.setBuffer=function(s){this.doBuffer=s,!s&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.publish("info","socket disconnected by IM SDK"),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var s=r.util.request(),a=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,r.protocol,"",this.sessionid].join("/")+"/?disconnect=1";s.open("GET",a,!1),s.send(null),this.publish("info","socket disconnected by disconnectSync before page unload"),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var s=e&&e.location||{},a=s.port||(s.protocol=="https:"?443:80);return this.options.host!==s.hostname||this.options.port!=a},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.publish("info","tcp, websocket onOpen"),this.open=!0},n.prototype.onClose=function(){this.publish("info","tcp, websocket onClose"),this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(s){this.of(s.endpoint).onPacket(s)},n.prototype.onError=function(s,a){s&&s.advice&&s.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",s&&s.reason?s.reason:s,a)},n.prototype.onDisconnect=function(s){var a=this.connected,i=this.connecting;this.publish("info",s?"tcp, onDisconnect reason:"+s:"tcp, onDisconnect"),this.connected=!1,this.connecting=!1,this.open=!1,(a||i)&&this.transport&&(this.transport.close(),this.transport.clearTimeouts(),a&&(this.publish("disconnect",s),s!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),i&&(this.connectTimeoutTimer&&(this.publish("info","clear connect timeout due to onDisconnect"),clearTimeout(this.connectTimeoutTimer)),this.tryNextTransport()))},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var s=this,a=this.options["max reconnection attempts"],i=this.options["try multiple transports"],d=this.options["reconnection limit"];function u(){if(s.connected){for(var m in s.namespaces)s.namespaces.hasOwnProperty(m)&&m!==""&&s.namespaces[m].packet({type:"connect"});s.publish("reconnect",s.transport.name,s.reconnectionAttempts)}clearTimeout(s.reconnectionTimer),s.removeListener("connect_failed",c),s.removeListener("connect",c),s.reconnecting=!1,delete s.reconnectionAttempts,delete s.reconnectionDelay,delete s.reconnectionTimer,delete s.redoTransports,s.options["try multiple transports"]=i}function c(){if(s.reconnecting)return s.connected?u():s.connecting&&s.reconnecting?s.reconnectionTimer=setTimeout(c,1e3):void(s.reconnectionAttempts++>=a?s.redoTransports?(s.publish("reconnect_failed"),u()):(s.on("connect_failed",c),s.options["try multiple transports"]=!0,s.transports=s.origTransports,s.transport=s.getTransport(),s.redoTransports=!0,s.connect()):(s.reconnectionDelay<d&&(s.reconnectionDelay*=2),s.connect(),s.publish("reconnecting",s.reconnectionDelay,s.reconnectionAttempts),s.reconnectionTimer=setTimeout(c,s.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(c,this.reconnectionDelay),this.on("connect",c)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r){function e(o,s){this.socket=o,this.name=s||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(o,s){this.namespace=o,this.name=s}t.SocketNamespace=e,r.util.mixin(e,r.EventEmitter),e.prototype.$emit=r.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(o){return o.endpoint=this.name,this.socket.packet(o),this.flags={},this},e.prototype.send=function(o,s){var a={type:this.flags.json?"json":"message",data:o};return typeof s=="function"&&(a.id=++this.ackPackets,a.ack=!0,this.acks[a.id]=s),this.packet(a)},e.prototype.emit=function(o){var s=Array.prototype.slice.call(arguments,1),a=s[s.length-1],i={type:"event",name:o};return typeof a=="function"&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=a,s=s.slice(0,s.length-1)),i.args=s,this.packet(i)},e.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(o){var s=this;function a(){s.packet({type:"ack",args:r.util.toArray(arguments),ackId:o.id})}switch(o.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?(this.socket.publish("info","socket disconnected by SocketNameSpace.onPacket"),this.socket.onDisconnect(o.reason||"booted")):this.$emit("disconnect",o.reason);break;case"message":case"json":var i=["message",o.data];o.ack=="data"?i.push(a):o.ack&&this.packet({type:"ack",ackId:o.id}),this.$emit.apply(this,i);break;case"event":i=[o.name].concat(o.args),o.ack=="data"&&i.push(a),this.$emit.apply(this,i);break;case"ack":this.acks[o.ackId]&&(this.acks[o.ackId].apply(this,o.args),delete this.acks[o.ackId]);break;case"error":this.socket.publish("info","packet, type:error",o),o.advice?this.socket.onError(o,new Error("packet, type:error and advice is "+o.advice)):o.reason==="unauthorized"?this.$emit("connect_failed",o.reason):this.$emit("error",o.reason,new Error("packet, type:error and reason is "+o.reason))}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(o){r.Transport.apply(this,arguments)}t.websocket=n,r.util.inherit(n,r.Transport),n.prototype.name="websocket",n.prototype.open=function(){var o,s=r.util.query(this.socket.options.query),a=this;return o||(o=e.MozWebSocket||e.WebSocket),this.websocket=new o(this.prepareUrl()+s),this.websocket.onopen=function(){a.onOpen(),a.socket.setBuffer(!1)},this.websocket.onmessage=function(i){a.onData(i.data)},this.websocket.onclose=function(){a.socket.setBuffer(!0),a.onClose()},this.websocket.onerror=function(i){var d="";i&&i.message?d=i.message:i.target&&(d=i.target.readyState?"websocket, readyState:"+i.target.readyState:"websocket event"),a.onError(d,i)},this},r.util.ua.iDevice?n.prototype.send=function(o){var s=this;return setTimeout(function(){s.websocket.send(o)},0),this}:n.prototype.send=function(o){return this.websocket.send(o),this},n.prototype.payload=function(o){for(var s=0,a=o.length;s<a;s++)this.packet(o[s]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(o,s){this.socket.publish("info","tcp, onError",o,s),this.socket.onError(o,s)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e},n.xdomainCheck=function(){return!0},r.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(s){s&&(r.Transport.apply(this,arguments),this.sendBuffer=[])}function o(){}t.XHR=n,r.util.inherit(n,r.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(s){for(var a=[],i=0,d=s.length;i<d;i++)a.push(r.parser.encodePacket(s[i]));this.send(r.parser.encodePayload(a))},n.prototype.send=function(s){return this.post(s),this},n.prototype.post=function(s){var a=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),e.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=o,a.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=o,a.posting=!1,this.status==200?a.socket.setBuffer(!1):a.onClose())},this.sendXHR.send(s)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(s){var a=r.util.request(this.socket.isXDomain()),i=r.util.query(this.socket.options.query,"t="+ +new Date);if(a.open(s||"GET",this.prepareUrl()+i,!0),s=="POST")try{a.setRequestHeader?a.setRequestHeader("Content-type","text/plain;charset=UTF-8"):a.contentType="text/plain"}catch{}return a},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(s,a){try{var i=r.util.request(a),d=e.XDomainRequest&&i instanceof XDomainRequest,u=s&&s.options&&s.options.secure?"https:":"http:",c=e.location&&u!=e.location.protocol;if(i&&(!d||!c))return!0}catch{}return!1},n.xdomainCheck=function(s){return n.check(s,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(){r.Transport.XHR.apply(this,arguments)}function o(){}t["xhr-polling"]=n,r.util.inherit(n,r.Transport.XHR),r.util.merge(n,r.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return r.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.isOpen){var s=this;this.xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=o,this.onerror=o,s.retryCounter=1,s.onData(this.responseText),s.get()},this.xhr.onerror=function(){s.retryCounter++,!s.retryCounter||s.retryCounter>3?s.onClose():s.get()}):this.xhr.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=o,this.status==200?(s.onData(this.responseText),s.get()):s.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(r.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=o;try{this.xhr.abort()}catch{}this.xhr=null}},n.prototype.ready=function(s,a){var i=this;r.util.defer(function(){a.call(i)})},r.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return io}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===void 0||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(56),__webpack_require__(145)(module))},function(t,r){t.exports=function(e){var n=-1,o=Array(e.size);return e.forEach(function(s){o[++n]=s}),o}},function(t,r,e){var n,o=e(24),s=e(44),a=e(13),i=e(74),d=e(685),u=e(692),c={initReporter:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v={app_key:m.appKey,platform:"Web",dev_id:s.deviceId,sdk_ver:a.info.version,env:"online",os_name:i.os?i.os.family:"",os_ver:i.os?i.os.version:"",model:i.version,manufactor:a.hostEnv,host_env:a.hostEnv,host_info:i.ua,host_env_ver:i.version};a.isBrowser||(m.isDataReportEnable=!1);var g=new d({isDataReportEnable:m.isDataReportEnable,reportConfigUrl:m.reportConfigUrl,reportUrl:m.reportUrl,common:v,request:u,logger:m.logger,autoStart:a.isBrowser});return g}};c.sendBeacon=navigator&&navigator.sendBeacon&&o(n=navigator.sendBeacon).call(n,navigator)||function(m,v){var g=new XMLHttpRequest;g.open("POST",m,!0),g.send(v)},t.exports=c},function(t,r,e){t.exports=e(686)},function(t,r,e){var n=e(1),o=e(14);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},function(t,r,e){var n=e(1),o=e(11),s=e(112),a=e(28),i=e(29),d=e(38).f,u=e(131),c=e(164),m=e(703),v=e(127),g=e(705),b=!1,T=v("meta"),k=0,y=function(V){d(V,T,{value:{objectID:"O"+k++,weakData:{}}})},A=t.exports={enable:function(){A.enable=function(){},b=!0;var V=u.f,Ce=o([].splice),ie={};ie[T]=1,V(ie).length&&(u.f=function(Oe){for(var he=V(Oe),Y=0,ae=he.length;Y<ae;Y++)if(he[Y]===T){Ce(he,Y,1);break}return he},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(V,Ce){if(!a(V))return typeof V=="symbol"?V:(typeof V=="string"?"S":"P")+V;if(!i(V,T)){if(!m(V))return"F";if(!Ce)return"E";y(V)}return V[T].objectID},getWeakData:function(V,Ce){if(!i(V,T)){if(!m(V))return!0;if(!Ce)return!1;y(V)}return V[T].weakData},onFreeze:function(V){return g&&b&&m(V)&&!i(V,T)&&y(V),V}};s[T]=!0},function(t,r,e){var n=e(19),o=e(31),s=e(16),a=e(36),i=TypeError;t.exports=function(d,u){var c,m=a(this),v=o(m.get),g=o(m.has),b=o(m.set),T=arguments.length>2?arguments[2]:void 0;if(!s(u)&&!s(T))throw i("At least one callback required");return n(g,m,d)?(c=n(v,m,d),s(u)&&(c=u(c),n(b,m,d,c))):s(T)&&(c=T(),n(b,m,d,c)),c}},function(t,r,e){t.exports=e(735)},function(t,r,e){var n=e(5);e(44);function o(){}o.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var s=o.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};o.validTypes=n(o.typeMap),o.setFlow=function(a,i){a.flow=a.from===i?a.to===i?"in":"out":"in",a.type==="robot"&&a.content&&a.content.msgOut&&(a.flow="in")},o.getType=function(a){var i=a.type;return s[i]||i},t.exports=o},function(t,r,e){t.exports=function(n,o,s,a){var i=self||window;try{try{var d;try{d=new i.Blob([n])}catch{(d=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(n),d=d.getBlob()}var u=i.URL||i.webkitURL,c=u.createObjectURL(d),m=new i[o](c,s);return u.revokeObjectURL(c),m}catch{return new i[o]("data:application/javascript,".concat(encodeURIComponent(n)),s)}}catch{if(!a)throw Error("Inline worker is not supported");return new i[o](a,s)}}},function(t,r,e){e(313).polyfill(),e(13).isBrowser=!0},function(t,r,e){var n=e(372);t.exports=n},function(t,r,e){var n=e(466);t.exports=n},function(t,r){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(n,o){var s=typeof n;return!!(o=o??9007199254740991)&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<o}},function(t,r,e){t.exports=e(555)},function(t,r,e){(function(n){var o,s=e(25),a=e(3),i=e(123),d=e(15),u=e(32),c=e(2),m=e(47),v=e(7),g=e(5),b=e(17);(function(T,k){var y,A=(T=T!==void 0?T:typeof self<"u"?self:n!==void 0?n:{}).IDBKeyRange||T.webkitIDBKeyRange,V="readonly",Ce="readwrite",ie=Object.prototype.hasOwnProperty,Oe=function(){if(!y&&!(y=T.indexedDB||T.webkitIndexedDB||T.mozIndexedDB||T.oIndexedDB||T.msIndexedDB||(T.indexedDB===null&&T.shimIndexedDB?T.shimIndexedDB:void 0)))throw"IndexedDB required";return y},he=!1,Y=navigator&&!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent),ae=function(ur){return ur},Fe=function(ur){var pr;return d(pr=Object.prototype.toString.call(ur)).call(pr,8,-1).toLowerCase()},ze=function(ur){return typeof ur=="function"},pe=function(ur){return Fe(ur)==="number"},le=function(ur){return Fe(ur)==="array"},xe=function(ur){return ur===void 0},ue=function(ur,pr){var ar=this,hr=!1;this.name=pr,this.getIndexedDB=function(){return ur},this.add=function(ir){if(hr)throw"Database has been closed";for(var $e=[],tr=0,nr=0;nr<arguments.length-1;nr++)if(u(arguments[nr+1]))for(var Pt=0;Pt<arguments[nr+1].length;Pt++)$e[tr]=arguments[nr+1][Pt],tr++;else $e[tr]=arguments[nr+1],tr++;var Et=ur.transaction(ir,Ce),kt=Et.objectStore(ir);return new a(function(rr,cr){c($e).call($e,function(mr){var yr;if(mr.item&&mr.key){var Tr=mr.key;mr=mr.item,yr=kt.add(mr,Tr)}else yr=kt.add(mr);yr.onsuccess=function(Ir){var kr=Ir.target,Ar=kr.source.keyPath;Ar===null&&(Ar="__id__"),m(mr,Ar,{value:kr.result,enumerable:!0})}}),Et.oncomplete=function(){rr($e,ar)},Et.onerror=function(mr){mr.preventDefault(),cr(mr)},Et.onabort=function(mr){cr(mr)}})},this.updateAndDelete=function(ir,$e,tr){if(hr)throw"Database has been closed";var nr=ur.transaction(ir,Ce),Pt=nr.objectStore(ir),Et=Pt.keyPath;return new a(function(kt,rr){c($e).call($e,function(cr){if(cr.item&&cr.key){var mr=cr.key;cr=cr.item,Pt.put(cr,mr)}else Pt.put(cr)}),c(tr).call(tr,function(cr){Pt.delete(cr[Et])}),nr.oncomplete=function(){kt([$e,tr])},nr.onerror=function(cr){rr(cr)}})},this.update=function(ir){if(hr)throw"Database has been closed";for(var $e,tr=[],nr=1;nr<arguments.length;nr++)u($e=arguments[nr])?tr=v(tr).call(tr,$e):tr.push($e);var Pt=ur.transaction(ir,Ce),Et=Pt.objectStore(ir);return Et.keyPath,new a(function(kt,rr){c(tr).call(tr,function(cr){var mr;if(cr.item&&cr.key){var yr=cr.key;cr=cr.item,mr=Et.put(cr,yr)}else mr=Et.put(cr);mr.onsuccess=function(Tr){},mr.onerror=function(Tr){}}),Pt.oncomplete=function(){kt(tr,ar)},Pt.onerror=function(cr){rr(cr)},Pt.onabort=function(cr){rr(cr)}})},this.remove=function(ir,$e,tr,nr,Pt,Et,kt){if(hr)throw"Database has been closed";var rr=ur.transaction(ir,Ce),cr=rr.objectStore(ir);return new a(function(mr,yr){function Tr(kr){return kr==null}var Ir;Tr(nr)&&(nr=-1/0),Tr(Pt)&&(Pt=1/0),$e===null||u($e)||($e=[$e]),Tr(tr)?$e!==null?c($e).call($e,function(kr){cr.delete(kr)}):cr.delete(range=A.bound(nr,Pt,Et,kt)):(Ir=$e!==null?A.only($e[0]):A.bound(nr,Pt,Et,kt),cr.index(tr).openCursor(Ir).onsuccess=function(kr){var Ar=kr.target.result;Ar&&(Ar.delete(),Ar.continue())}),rr.oncomplete=function(){mr()},rr.onerror=function(kr){yr(kr)},rr.onabort=function(kr){yr(kr)}})},this.clear=function(ir){if(hr)throw"Database has been closed";var $e=ur.transaction(ir,Ce);return $e.objectStore(ir).clear(),new a(function(tr,nr){$e.oncomplete=function(){tr()},$e.onerror=function(Pt){nr(Pt)}})},this.close=function(){hr||(ur.close(),hr=!0,delete er[pr])},this.get=function(ir,$e){if(hr)throw"Database has been closed";var tr=ur.transaction(ir),nr=tr.objectStore(ir).get($e);return new a(function(Pt,Et){nr.onsuccess=function(kt){Pt(kt.target.result)},tr.onerror=function(kt){Et(kt)}})},this.query=function(ir,$e){if(hr)throw"Database has been closed";return new Ve(ir,ur,$e)},this.count=function(ir,$e){if(hr)throw"Database has been closed";ur.transaction(ir).objectStore(ir)};for(var Ne=0,or=ur.objectStoreNames.length;Ne<or;Ne++)(function(ir){for(var $e in ar[ir]={},ar)ie.call(ar,$e)&&$e!=="close"&&(ar[ir][$e]=function(tr){return function(){var nr,Pt=v(nr=[ir]).call(nr,d([]).call(arguments,0));return ar[tr].apply(ar,Pt)}}($e))})(ur.objectStoreNames[Ne])},Ve=function(ur,pr,ar){var hr,Ne=this,or=!1,ir=!1,$e=function(nr,Pt,Et,kt,rr,cr,mr){return new a(function(yr,Tr){var Ir=or||ir?Ce:V,kr=pr.transaction(ur,Ir),Ar=kr.objectStore(ur),Rr=ar?Ar.index(ar):Ar,Mn=nr?A[nr].apply(null,Pt):null,Or=[],Pr=[Mn],Nr=0;rr=rr||null,cr=cr||[],Et!=="count"&&Pr.push(kt||"next");var Wr=!!or&&g(or);Rr[Et].apply(Rr,Pr).onsuccess=function(Yr){var Ur=Yr.target.result;if(s(Ur)===s(0))Or=Ur;else if(Ur){if(rr!==null&&rr[0]>Nr)Nr=rr[0],Ur.advance(rr[0]);else if(!(rr!==null&&Nr>=rr[0]+rr[1])){var qr=!0,Yn="value"in Ur?Ur.value:Ur.key;c(cr).call(cr,function($n){$n&&$n.length&&($n.length===2?qr=qr&&Yn[$n[0]]===$n[1]:ze($n[0])&&(qr=qr&&$n[0].apply(void 0,[Yn])))}),qr&&(Nr++,Or.push(mr(Yn)),ir?Ur.delete():or&&(Yn=function($n){for(var Jr=0;Jr<Wr.length;Jr++){var Fr=Wr[Jr],Wn=or[Fr];Wn instanceof Function&&(Wn=Wn($n)),$n[Fr]=Wn}return $n}(Yn),Ur.update(Yn))),Ur.continue()}}},kr.oncomplete=function(){yr(Or)},kr.onerror=function(Yr){Tr(Yr)},kr.onabort=function(Yr){Tr(Yr)}})},tr=function(nr,Pt){var Et="next",kt="openCursor",rr=[],cr=null,mr=ae,yr=!1,Tr=function(){return $e(nr,Pt,kt,yr?Et+"unique":Et,cr,rr,mr)},Ir=function(){return Et=null,kt="count",{execute:Tr}},kr=function Ur(){return(cr=le(arguments[0])?arguments[0]:d(Array.prototype).call(arguments,0,2)).length==1&&cr.unshift(0),pe(cr[1])||(cr=null),{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:Ur,map:Wr,remove:Yr}},Ar=function Ur(qr){return(qr=!!xe(qr)||!!qr)&&(kt="openKeyCursor"),{execute:Tr,keys:Ur,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Yr}},Rr=function Ur(){return rr.push(d(Array.prototype).call(arguments,0,2)),{execute:Tr,count:Ir,keys:Ar,filter:Ur,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Yr}},Mn=function Ur(qr){return qr=!!xe(qr)||!!qr,Et=qr?"next":"prev",{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Ur,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Yr}},Or=function Ur(qr){return qr=!!xe(qr)||!!qr,Et=qr?"prev":"next",{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Ur,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Yr}},Pr=function Ur(qr){return qr=!!xe(qr)||!!qr,yr=qr,{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Ur,modify:Nr,limit:kr,map:Wr,remove:Yr}},Nr=function Ur(qr){return or=qr,{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Ur,limit:kr,map:Wr,remove:Yr}},Wr=function Ur(qr){return ze(qr)&&(mr=qr),{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Ur,remove:Yr}},Yr=function Ur(qr){return qr=!!xe(qr)||!!qr,ir=qr,{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Ur}};return{execute:Tr,count:Ir,keys:Ar,filter:Rr,asc:Mn,desc:Or,distinct:Pr,modify:Nr,limit:kr,map:Wr,remove:Yr}};c(hr="only bound upperBound lowerBound".split(" ")).call(hr,function(nr){Ne[nr]=function(){return new tr(nr,arguments)}}),this.filter=function(){var nr=new tr(null,null);return b(nr).apply(nr,arguments)},this.all=function(){var nr;return b(nr=this).call(nr)}},Ue=function(ur,pr,ar,hr){var Ne=ur.target.result,or=new ue(Ne,pr);return er[pr]=Ne,a.resolve(or)},er={},At={version:"0.10.2",open:function(ur){var pr;return new a(function(ar,hr){var Ne;er[ur.server]?Ue({target:{result:er[ur.server]}},ur.server,ur.version,ur.schema).then(ar,hr):(he?a.resolve():Y&&Oe().databases?new a(function(or){var ir=function(){return Oe().databases().finally(or)};Ne=i(ir,100),ir()}).finally(function(){he=!0,clearInterval(Ne)}):(he=!0,a.resolve())).then(function(){try{pr=Oe().open(ur.server,ur.version)}catch(or){hr(or)}pr.onsuccess=function(or){Ue(or,ur.server,ur.version,ur.schema).then(ar,hr)},pr.onupgradeneeded=function(or){(function(ir,$e,tr){for(var nr in typeof $e=="function"&&($e=$e()),$e){var Pt,Et=$e[nr];for(var kt in Pt=!ie.call($e,nr)||tr.objectStoreNames.contains(nr)?ir.currentTarget.transaction.objectStore(nr):tr.createObjectStore(nr,Et.key),Et.indexes){var rr=Et.indexes[kt];try{Pt.index(kt)}catch{Pt.createIndex(kt,rr.key||kt,g(rr).length?rr:{unique:!1})}}}})(or,ur.schema,or.target.result)},pr.onerror=function(or){hr(or)}})})},remove:function(ur){return new a(function(pr,ar){if(!ur)return pr();var hr,Ne;s(ur)===ue&&(ur=ur.name),typeof ur=="string"&&(hr=er[ur]),hr&&typeof hr.close=="function"&&hr.close();try{Ne=Oe().deleteDatabase(ur)}catch(or){ar(or)}Ne.onsuccess=function(or){delete er[ur],pr(ur)},Ne.onerror=function(or){ar(or)},Ne.onblocked=function(or){ar(or)}})}};t.exports!==void 0?t.exports=At:(o=(function(){return At}).call(r,e,r,t))===void 0||(t.exports=o)})(void 0)}).call(this,e(56))},function(t,r,e){var n=e(586);t.exports=n},function(t,r,e){t.exports=e(639)},function(t,r){var e={set:function(n,o,s){e[n]=o,s&&(s.support=o)}};t.exports=e},function(t,r,e){var n=e(5),o=e(2),s=e(24),a=e(0),i=a.notundef,d=a.fillPropertyWithDefault,u=n,c={},m={},v={},g=[],b={normal:0,advanced:1},T={manager:0,all:1};c.inviteMode=c.updateCustomMode=c.updateTeamMode=T;var k={0:"normal",1:"advanced"},y=c.joinMode={noVerify:0,needVerify:1,rejectAll:2};m.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},v.joinMode=u(y),g.push("join");var A=c.beInviteMode={needVerify:0,noVerify:1};function V(ie){var Oe;a.verifyOptions(ie,"action","superTeam::SuperTeam"),a.verifyOptions(ie,"teamId","superTeam::SuperTeam"),i(ie.teamId)&&(this.teamId=ie.teamId),i(ie.type)&&(this.type=b[ie.type]),i(ie.avatar)&&(this.avatar=""+ie.avatar),i(ie.name)&&(this.name=""+ie.name),i(ie.intro)&&(this.intro=""+ie.intro),i(ie.announcement)&&(this.announcement=""+ie.announcement),i(ie.custom)&&(this.custom=""+ie.custom),i(ie.inviteMode)&&(this.inviteMode=T[ie.inviteMode]),i(ie.updateCustomMode)&&(this.updateCustomMode=T[ie.updateCustomMode]),i(ie.updateTeamMode)&&(this.updateTeamMode=T[ie.updateTeamMode]),o(g).call(g,s(Oe=this.setMode).call(Oe,this,ie))}function Ce(ie,Oe){i(ie[Oe+="Mode"])&&(ie[Oe]=m[Oe][ie[Oe]])}m.beInviteMode={0:"needVerify",1:"noVerify"},g.push("beInvite"),m.inviteMode=m.updateCustomMode=m.updateTeamMode={0:"manager",1:"all"},g.push("invite"),g.push("updateCustom"),g.push("updateTeam"),v.inviteMode=v.updateCustomMode=v.updateTeamMode=u(T),v.beInviteMode=u(A),V.prototype.setMode=function(ie,Oe){i(ie[Oe+="Mode"])&&(a.verifyParamValid(Oe,ie[Oe],v[Oe],"Superteam::Team"),this[Oe]=c[Oe][ie[Oe]])},V.reverse=function(ie,Oe){var he=a.copy(ie);if(i(he.teamId)&&(he.teamId=""+he.teamId),i(he.type)&&(he.type=k[he.type]),i(he.level)&&(he.level=+he.level),i(he.valid)&&(he.valid=+he.valid==1),i(he.memberNum)&&(he.memberNum=+he.memberNum),i(he.memberUpdateTime)&&(he.memberUpdateTime=+he.memberUpdateTime),i(he.createTime)&&(he.createTime=+he.createTime),i(he.updateTime)&&(he.updateTime=+he.updateTime),i(he.validToCurrentUser)&&(he.validToCurrentUser=he.validToCurrentUser==="1"),i(he.mute)&&(he.mute=he.mute==="1"),i(he.muteType))switch(he.muteType){case"0":he.mute=!1,he.muteType="none";break;case"1":he.mute=!0,he.muteType="normal";break;case"3":he.mute=!0,he.muteType="all"}else i(he.mute)&&(he.mute===1?(he.mute=!0,he.muteType="normal"):(he.mute=!1,he.muteType="none"));return o(g).call(g,s(Ce).call(Ce,null,he)),delete he.bits,Oe||V.fillProperties(he),he},V.fillProperties=function(ie){return d(ie,"avatar","")},t.exports=V},function(t,r,e){t.exports=e(661)},function(t,r,e){var n=e(0).notundef;function o(s){n(s.shouldPushNotificationWhenPCOnline)&&(this.open=s.shouldPushNotificationWhenPCOnline?2:1)}o.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},o.reverse=function(s){return{shouldPushNotificationWhenPCOnline:+s.open!=1}},t.exports=o},function(t,r,e){var n=e(74),o=e(755),s=e(287),a=e(254),i=e(197),d=e(0),u=e(305),c=e(283),m=e(183),v=e(760),g=e(761);t.exports=function(b){d.merge(b,{platform:n,xhr:o,io:s,naturalSort:a,deepAccess:i,util:d,support:u,blob:c,ajax:m,LoggerPlugin:v,usePlugin:g})}},function(t,r,e){var n=e(8),o=e(9),s=e(5),a=e(106).genPrivateUrl,i=e(0),d=i.notundef,u={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function c(m){d(m.nick)&&(this.nick=""+m.nick),d(m.avatar)&&(this.avatar=""+m.avatar),d(m.custom)&&(this.custom=""+m.custom)}c.reverse=function(m){var v=i.copy(m);return d(v.chatroomId)&&(v.chatroomId=""+v.chatroomId),d(v.avatar)&&(v.avatar=a(v.avatar)),d(v.type)&&(v.type=u[v.type]),d(v.level)&&(v.level=+v.level),d(v.online)&&(v.online=+v.online==1),d(v.enterTime)&&(v.enterTime=+v.enterTime),d(v.guest)&&(v.guest=+v.guest==1),d(v.blacked)&&(v.blacked=+v.blacked==1),d(v.gaged)&&(v.gaged=+v.gaged==1),d(v.valid)&&(v.valid=+v.valid==1),d(v.updateTime)&&(v.updateTime=+v.updateTime),d(v.tempMuted)?v.tempMuted=+v.tempMuted==1:v.tempMuted=!1,d(v.tempMuteDuration)?v.tempMuteDuration=+v.tempMuteDuration:v.tempMuteDuration=0,v.online||delete v.enterTime,v.guest&&(v.type="guest",delete v.valid),v.type!=="common"&&delete v.level,delete v.guest,v},c.reverseMembers=function(m){return n(m).call(m,function(v){return o(c).call(c,v)})},c.validTypes=s(u),c.typeReverseMap=u,t.exports=c},function(t,r,e){var n,o,s,a,i,d,u,c,m,v,g,b,T,k,y,A,V,Ce,ie;t.exports=(n=e(89),e(764),void(n.lib.Cipher||(o=n,s=o.lib,a=s.Base,i=s.WordArray,d=s.BufferedBlockAlgorithm,u=o.enc,u.Utf8,c=u.Base64,m=o.algo.EvpKDF,v=s.Cipher=d.extend({cfg:a.extend(),createEncryptor:function(Oe,he){return this.create(this._ENC_XFORM_MODE,Oe,he)},createDecryptor:function(Oe,he){return this.create(this._DEC_XFORM_MODE,Oe,he)},init:function(Oe,he,Y){this.cfg=this.cfg.extend(Y),this._xformMode=Oe,this._key=he,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(Oe){return this._append(Oe),this._process()},finalize:function(Oe){return Oe&&this._append(Oe),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Oe(he){return typeof he=="string"?ie:V}return function(he){return{encrypt:function(Y,ae,Fe){return Oe(ae).encrypt(he,Y,ae,Fe)},decrypt:function(Y,ae,Fe){return Oe(ae).decrypt(he,Y,ae,Fe)}}}}()}),s.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),g=o.mode={},b=s.BlockCipherMode=a.extend({createEncryptor:function(Oe,he){return this.Encryptor.create(Oe,he)},createDecryptor:function(Oe,he){return this.Decryptor.create(Oe,he)},init:function(Oe,he){this._cipher=Oe,this._iv=he}}),T=g.CBC=function(){var Oe=b.extend();function he(Y,ae,Fe){var ze,pe=this._iv;pe?(ze=pe,this._iv=void 0):ze=this._prevBlock;for(var le=0;le<Fe;le++)Y[ae+le]^=ze[le]}return Oe.Encryptor=Oe.extend({processBlock:function(Y,ae){var Fe=this._cipher,ze=Fe.blockSize;he.call(this,Y,ae,ze),Fe.encryptBlock(Y,ae),this._prevBlock=Y.slice(ae,ae+ze)}}),Oe.Decryptor=Oe.extend({processBlock:function(Y,ae){var Fe=this._cipher,ze=Fe.blockSize,pe=Y.slice(ae,ae+ze);Fe.decryptBlock(Y,ae),he.call(this,Y,ae,ze),this._prevBlock=pe}}),Oe}(),k=(o.pad={}).Pkcs7={pad:function(Oe,he){for(var Y=4*he,ae=Y-Oe.sigBytes%Y,Fe=ae<<24|ae<<16|ae<<8|ae,ze=[],pe=0;pe<ae;pe+=4)ze.push(Fe);var le=i.create(ze,ae);Oe.concat(le)},unpad:function(Oe){var he=255&Oe.words[Oe.sigBytes-1>>>2];Oe.sigBytes-=he}},s.BlockCipher=v.extend({cfg:v.cfg.extend({mode:T,padding:k}),reset:function(){var Oe;v.reset.call(this);var he=this.cfg,Y=he.iv,ae=he.mode;this._xformMode==this._ENC_XFORM_MODE?Oe=ae.createEncryptor:(Oe=ae.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Oe?this._mode.init(this,Y&&Y.words):(this._mode=Oe.call(ae,this,Y&&Y.words),this._mode.__creator=Oe)},_doProcessBlock:function(Oe,he){this._mode.processBlock(Oe,he)},_doFinalize:function(){var Oe,he=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(he.pad(this._data,this.blockSize),Oe=this._process(!0)):(Oe=this._process(!0),he.unpad(Oe)),Oe},blockSize:4}),y=s.CipherParams=a.extend({init:function(Oe){this.mixIn(Oe)},toString:function(Oe){return(Oe||this.formatter).stringify(this)}}),A=(o.format={}).OpenSSL={stringify:function(Oe){var he=Oe.ciphertext,Y=Oe.salt;return(Y?i.create([1398893684,1701076831]).concat(Y).concat(he):he).toString(c)},parse:function(Oe){var he,Y=c.parse(Oe),ae=Y.words;return ae[0]==1398893684&&ae[1]==1701076831&&(he=i.create(ae.slice(2,4)),ae.splice(0,4),Y.sigBytes-=16),y.create({ciphertext:Y,salt:he})}},V=s.SerializableCipher=a.extend({cfg:a.extend({format:A}),encrypt:function(Oe,he,Y,ae){ae=this.cfg.extend(ae);var Fe=Oe.createEncryptor(Y,ae),ze=Fe.finalize(he),pe=Fe.cfg;return y.create({ciphertext:ze,key:Y,iv:pe.iv,algorithm:Oe,mode:pe.mode,padding:pe.padding,blockSize:Oe.blockSize,formatter:ae.format})},decrypt:function(Oe,he,Y,ae){return ae=this.cfg.extend(ae),he=this._parse(he,ae.format),Oe.createDecryptor(Y,ae).finalize(he.ciphertext)},_parse:function(Oe,he){return typeof Oe=="string"?he.parse(Oe,this):Oe}}),Ce=(o.kdf={}).OpenSSL={execute:function(Oe,he,Y,ae){ae||(ae=i.random(8));var Fe=m.create({keySize:he+Y}).compute(Oe,ae),ze=i.create(Fe.words.slice(he),4*Y);return Fe.sigBytes=4*he,y.create({key:Fe,iv:ze,salt:ae})}},ie=s.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:Ce}),encrypt:function(Oe,he,Y,ae){var Fe=(ae=this.cfg.extend(ae)).kdf.execute(Y,Oe.keySize,Oe.ivSize);ae.iv=Fe.iv;var ze=V.encrypt.call(this,Oe,he,Fe.key,ae);return ze.mixIn(Fe),ze},decrypt:function(Oe,he,Y,ae){ae=this.cfg.extend(ae),he=this._parse(he,ae.format);var Fe=ae.kdf.execute(Y,Oe.keySize,Oe.ivSize,he.salt);return ae.iv=Fe.iv,V.decrypt.call(this,Oe,he,Fe.key,ae)}}))))},function(t,r,e){t.exports=e(282)},function(t,r,e){(function(n,o){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var s;s=function(){function a(or){return typeof or=="function"}var i=Array.isArray?Array.isArray:function(or){return Object.prototype.toString.call(or)==="[object Array]"},d=0,u=void 0,c=void 0,m=function(or,ir){A[d]=or,A[d+1]=ir,(d+=2)===2&&(c?c(V):Y())},v=typeof window<"u"?window:void 0,g=v||{},b=g.MutationObserver||g.WebKitMutationObserver,T=typeof self>"u"&&n!==void 0&&{}.toString.call(n)==="[object process]",k=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function y(){var or=setTimeout;return function(){return or(V,1)}}var A=new Array(1e3);function V(){for(var or=0;or<d;or+=2)(0,A[or])(A[or+1]),A[or]=void 0,A[or+1]=void 0;d=0}var Ce,ie,Oe,he,Y=void 0;function ae(or,ir){var $e=this,tr=new this.constructor(pe);tr[ze]===void 0&&ar(tr);var nr=$e._state;if(nr){var Pt=arguments[nr-1];m(function(){return ur(nr,tr,Pt,$e._result)})}else er($e,tr,or,ir);return tr}function Fe(or){if(or&&typeof or=="object"&&or.constructor===this)return or;var ir=new this(pe);return xe(ir,or),ir}T?Y=function(){return n.nextTick(V)}:b?(ie=0,Oe=new b(V),he=document.createTextNode(""),Oe.observe(he,{characterData:!0}),Y=function(){he.data=ie=++ie%2}):k?((Ce=new MessageChannel).port1.onmessage=V,Y=function(){return Ce.port2.postMessage(0)}):Y=v===void 0?function(){try{var or=Function("return this")().require("vertx");return(u=or.runOnLoop||or.runOnContext)!==void 0?function(){u(V)}:y()}catch{return y()}}():y();var ze=Math.random().toString(36).substring(2);function pe(){}function le(or,ir,$e){ir.constructor===or.constructor&&$e===ae&&ir.constructor.resolve===Fe?function(tr,nr){nr._state===1?Ve(tr,nr._result):nr._state===2?Ue(tr,nr._result):er(nr,void 0,function(Pt){return xe(tr,Pt)},function(Pt){return Ue(tr,Pt)})}(or,ir):$e===void 0?Ve(or,ir):a($e)?function(tr,nr,Pt){m(function(Et){var kt=!1,rr=function(cr,mr,yr,Tr){try{cr.call(mr,yr,Tr)}catch(Ir){return Ir}}(Pt,nr,function(cr){kt||(kt=!0,nr!==cr?xe(Et,cr):Ve(Et,cr))},function(cr){kt||(kt=!0,Ue(Et,cr))},Et._label);!kt&&rr&&(kt=!0,Ue(Et,rr))},tr)}(or,ir,$e):Ve(or,ir)}function xe(or,ir){if(or===ir)Ue(or,new TypeError("You cannot resolve a promise with itself"));else if(nr=typeof(tr=ir),tr===null||nr!=="object"&&nr!=="function")Ve(or,ir);else{var $e=void 0;try{$e=ir.then}catch(Pt){return void Ue(or,Pt)}le(or,ir,$e)}var tr,nr}function ue(or){or._onerror&&or._onerror(or._result),At(or)}function Ve(or,ir){or._state===void 0&&(or._result=ir,or._state=1,or._subscribers.length!==0&&m(At,or))}function Ue(or,ir){or._state===void 0&&(or._state=2,or._result=ir,m(ue,or))}function er(or,ir,$e,tr){var nr=or._subscribers,Pt=nr.length;or._onerror=null,nr[Pt]=ir,nr[Pt+1]=$e,nr[Pt+2]=tr,Pt===0&&or._state&&m(At,or)}function At(or){var ir=or._subscribers,$e=or._state;if(ir.length!==0){for(var tr=void 0,nr=void 0,Pt=or._result,Et=0;Et<ir.length;Et+=3)tr=ir[Et],nr=ir[Et+$e],tr?ur($e,tr,nr,Pt):nr(Pt);or._subscribers.length=0}}function ur(or,ir,$e,tr){var nr=a($e),Pt=void 0,Et=void 0,kt=!0;if(nr){try{Pt=$e(tr)}catch(rr){kt=!1,Et=rr}if(ir===Pt)return void Ue(ir,new TypeError("A promises callback cannot return that same promise."))}else Pt=tr;ir._state!==void 0||(nr&&kt?xe(ir,Pt):kt===!1?Ue(ir,Et):or===1?Ve(ir,Pt):or===2&&Ue(ir,Pt))}var pr=0;function ar(or){or[ze]=pr++,or._state=void 0,or._result=void 0,or._subscribers=[]}var hr=function(){function or(ir,$e){this._instanceConstructor=ir,this.promise=new ir(pe),this.promise[ze]||ar(this.promise),i($e)?(this.length=$e.length,this._remaining=$e.length,this._result=new Array(this.length),this.length===0?Ve(this.promise,this._result):(this.length=this.length||0,this._enumerate($e),this._remaining===0&&Ve(this.promise,this._result))):Ue(this.promise,new Error("Array Methods must be provided an Array"))}return or.prototype._enumerate=function(ir){for(var $e=0;this._state===void 0&&$e<ir.length;$e++)this._eachEntry(ir[$e],$e)},or.prototype._eachEntry=function(ir,$e){var tr=this._instanceConstructor,nr=tr.resolve;if(nr===Fe){var Pt=void 0,Et=void 0,kt=!1;try{Pt=ir.then}catch(cr){kt=!0,Et=cr}if(Pt===ae&&ir._state!==void 0)this._settledAt(ir._state,$e,ir._result);else if(typeof Pt!="function")this._remaining--,this._result[$e]=ir;else if(tr===Ne){var rr=new tr(pe);kt?Ue(rr,Et):le(rr,ir,Pt),this._willSettleAt(rr,$e)}else this._willSettleAt(new tr(function(cr){return cr(ir)}),$e)}else this._willSettleAt(nr(ir),$e)},or.prototype._settledAt=function(ir,$e,tr){var nr=this.promise;nr._state===void 0&&(this._remaining--,ir===2?Ue(nr,tr):this._result[$e]=tr),this._remaining===0&&Ve(nr,this._result)},or.prototype._willSettleAt=function(ir,$e){var tr=this;er(ir,void 0,function(nr){return tr._settledAt(1,$e,nr)},function(nr){return tr._settledAt(2,$e,nr)})},or}(),Ne=function(){function or(ir){this[ze]=pr++,this._result=this._state=void 0,this._subscribers=[],pe!==ir&&(typeof ir!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof or?function($e,tr){try{tr(function(nr){xe($e,nr)},function(nr){Ue($e,nr)})}catch(nr){Ue($e,nr)}}(this,ir):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return or.prototype.catch=function(ir){return this.then(null,ir)},or.prototype.finally=function(ir){var $e=this.constructor;return a(ir)?this.then(function(tr){return $e.resolve(ir()).then(function(){return tr})},function(tr){return $e.resolve(ir()).then(function(){throw tr})}):this.then(ir,ir)},or}();return Ne.prototype.then=ae,Ne.all=function(or){return new hr(this,or).promise},Ne.race=function(or){var ir=this;return i(or)?new ir(function($e,tr){for(var nr=or.length,Pt=0;Pt<nr;Pt++)ir.resolve(or[Pt]).then($e,tr)}):new ir(function($e,tr){return tr(new TypeError("You must pass an array to race."))})},Ne.resolve=Fe,Ne.reject=function(or){var ir=new this(pe);return Ue(ir,or),ir},Ne._setScheduler=function(or){c=or},Ne._setAsap=function(or){m=or},Ne._asap=m,Ne.polyfill=function(){var or=void 0;if(o!==void 0)or=o;else if(typeof self<"u")or=self;else try{or=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ir=or.Promise;if(ir){var $e=null;try{$e=Object.prototype.toString.call(ir.resolve())}catch{}if($e==="[object Promise]"&&!ir.cast)return}or.Promise=Ne},Ne.Promise=Ne,Ne},t.exports=s()}).call(this,e(314),e(56))},function(t,r){var e,n,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(k){if(e===setTimeout)return setTimeout(k,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(k,0);try{return e(k,0)}catch{try{return e.call(null,k,0)}catch{return e.call(this,k,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:s}catch{e=s}try{n=typeof clearTimeout=="function"?clearTimeout:a}catch{n=a}})();var d,u=[],c=!1,m=-1;function v(){c&&d&&(c=!1,d.length?u=d.concat(u):m=-1,u.length&&g())}function g(){if(!c){var k=i(v);c=!0;for(var y=u.length;y;){for(d=u,u=[];++m<y;)d&&d[m].run();m=-1,y=u.length}d=null,c=!1,function(A){if(n===clearTimeout)return clearTimeout(A);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(A);try{n(A)}catch{try{return n.call(null,A)}catch{return n.call(this,A)}}}(k)}}function b(k,y){this.fun=k,this.array=y}function T(){}o.nextTick=function(k){var y=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)y[A-1]=arguments[A];u.push(new b(k,y)),u.length!==1||c||i(g)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=T,o.addListener=T,o.once=T,o.off=T,o.removeListener=T,o.removeAllListeners=T,o.emit=T,o.prependListener=T,o.prependOnceListener=T,o.listeners=function(k){return[]},o.binding=function(k){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(k){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,r,e){var n=e(21),o=e(316),s=Array.prototype;t.exports=function(a){var i=a.indexOf;return a===s||n(s,a)&&i===s.indexOf?o:i}},function(t,r,e){e(317);var n=e(30);t.exports=n("Array").indexOf},function(t,r,e){var n=e(1),o=e(155),s=e(159).indexOf,a=e(94),i=o([].indexOf),d=!!i&&1/i([1],1,-0)<0,u=a("indexOf");n({target:"Array",proto:!0,forced:d||!u},{indexOf:function(c){var m=arguments.length>1?arguments[1]:void 0;return d?i(this,c,m)||0:s(this,c,m)}})},function(t,r,e){var n=e(19),o=e(28),s=e(126),a=e(156),i=e(319),d=e(20),u=TypeError,c=d("toPrimitive");t.exports=function(m,v){if(!o(m)||s(m))return m;var g,b=a(m,c);if(b){if(v===void 0&&(v="default"),g=n(b,m,v),!o(g)||s(g))return g;throw u("Can't convert object to primitive value")}return v===void 0&&(v="number"),i(m,v)}},function(t,r,e){var n=e(19),o=e(16),s=e(28),a=TypeError;t.exports=function(i,d){var u,c;if(d==="string"&&o(u=i.toString)&&!s(c=n(u,i))||o(u=i.valueOf)&&!s(c=n(u,i))||d!=="string"&&o(u=i.toString)&&!s(c=n(u,i)))return c;throw a("Can't convert object to primitive value")}},function(t,r,e){var n=e(14),o=Object.defineProperty;t.exports=function(s,a){try{o(n,s,{value:a,configurable:!0,writable:!0})}catch{n[s]=a}return a}},function(t,r){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(o){var s=+o;return(s>0?n:e)(s)}},function(t,r,e){var n=e(110),o=Math.min;t.exports=function(s){return s>0?o(n(s),9007199254740991):0}},function(t,r,e){var n=e(324);t.exports=n},function(t,r,e){var n=e(21),o=e(325),s=Array.prototype;t.exports=function(a){var i=a.concat;return a===s||n(s,a)&&i===s.concat?o:i}},function(t,r,e){e(211);var n=e(30);t.exports=n("Array").concat},function(t,r,e){var n=e(79),o=e(129),s=e(28),a=e(20)("species"),i=Array;t.exports=function(d){var u;return n(d)&&(u=d.constructor,(o(u)&&(u===i||n(u.prototype))||s(u)&&(u=u[a])===null)&&(u=void 0)),u===void 0?i:u}},function(t,r,e){e(328);var n=e(12).Object;t.exports=function(o,s){return n.create(o,s)}},function(t,r,e){e(1)({target:"Object",stat:!0,sham:!e(27)},{create:e(80)})},function(t,r,e){t.exports=e(330)},function(t,r,e){var n=e(331);e(358),e(359),e(360),e(361),e(362),e(363),e(364),t.exports=n},function(t,r,e){var n=e(217);e(357),t.exports=n},function(t,r,e){e(211),e(96),e(218),e(339),e(340),e(341),e(342),e(223),e(343),e(344),e(345),e(346),e(347),e(348),e(224),e(349),e(350),e(351),e(352),e(353);var n=e(12);t.exports=n.Symbol},function(t,r,e){var n=e(1),o=e(14),s=e(19),a=e(11),i=e(48),d=e(27),u=e(92),c=e(4),m=e(29),v=e(21),g=e(36),b=e(43),T=e(125),k=e(49),y=e(77),A=e(80),V=e(118),Ce=e(131),ie=e(164),Oe=e(132),he=e(90),Y=e(38),ae=e(162),Fe=e(148),ze=e(66),pe=e(109),le=e(130),xe=e(112),ue=e(127),Ve=e(20),Ue=e(133),er=e(22),At=e(220),ur=e(81),pr=e(97),ar=e(84).forEach,hr=le("hidden"),Ne=pr.set,or=pr.getterFor("Symbol"),ir=Object.prototype,$e=o.Symbol,tr=$e&&$e.prototype,nr=o.TypeError,Pt=o.QObject,Et=he.f,kt=Y.f,rr=ie.f,cr=Fe.f,mr=a([].push),yr=pe("symbols"),Tr=pe("op-symbols"),Ir=pe("wks"),kr=!Pt||!Pt.prototype||!Pt.prototype.findChild,Ar=d&&c(function(){return A(kt({},"a",{get:function(){return kt(this,"a",{value:7}).a}})).a!=7})?function(Ur,qr,Yn){var $n=Et(ir,qr);$n&&delete ir[qr],kt(Ur,qr,Yn),$n&&Ur!==ir&&kt(ir,qr,$n)}:kt,Rr=function(Ur,qr){var Yn=yr[Ur]=A(tr);return Ne(Yn,{type:"Symbol",tag:Ur,description:qr}),d||(Yn.description=qr),Yn},Mn=function(Ur,qr,Yn){Ur===ir&&Mn(Tr,qr,Yn),g(Ur);var $n=T(qr);return g(Yn),m(yr,$n)?(Yn.enumerable?(m(Ur,hr)&&Ur[hr][$n]&&(Ur[hr][$n]=!1),Yn=A(Yn,{enumerable:y(0,!1)})):(m(Ur,hr)||kt(Ur,hr,y(1,{})),Ur[hr][$n]=!0),Ar(Ur,$n,Yn)):kt(Ur,$n,Yn)},Or=function(Ur,qr){g(Ur);var Yn=b(qr),$n=V(Yn).concat(Yr(Yn));return ar($n,function(Jr){d&&!s(Pr,Yn,Jr)||Mn(Ur,Jr,Yn[Jr])}),Ur},Pr=function(Ur){var qr=T(Ur),Yn=s(cr,this,qr);return!(this===ir&&m(yr,qr)&&!m(Tr,qr))&&(!(Yn||!m(this,qr)||!m(yr,qr)||m(this,hr)&&this[hr][qr])||Yn)},Nr=function(Ur,qr){var Yn=b(Ur),$n=T(qr);if(Yn!==ir||!m(yr,$n)||m(Tr,$n)){var Jr=Et(Yn,$n);return!Jr||!m(yr,$n)||m(Yn,hr)&&Yn[hr][$n]||(Jr.enumerable=!0),Jr}},Wr=function(Ur){var qr=rr(b(Ur)),Yn=[];return ar(qr,function($n){m(yr,$n)||m(xe,$n)||mr(Yn,$n)}),Yn},Yr=function(Ur){var qr=Ur===ir,Yn=rr(qr?Tr:b(Ur)),$n=[];return ar(Yn,function(Jr){!m(yr,Jr)||qr&&!m(ir,Jr)||mr($n,yr[Jr])}),$n};u||(ze(tr=($e=function(){if(v(tr,this))throw nr("Symbol is not a constructor");var Ur=arguments.length&&arguments[0]!==void 0?k(arguments[0]):void 0,qr=ue(Ur),Yn=function($n){this===ir&&s(Yn,Tr,$n),m(this,hr)&&m(this[hr],qr)&&(this[hr][qr]=!1),Ar(this,qr,y(1,$n))};return d&&kr&&Ar(ir,qr,{configurable:!0,set:Yn}),Rr(qr,Ur)}).prototype,"toString",function(){return or(this).tag}),ze($e,"withoutSetter",function(Ur){return Rr(ue(Ur),Ur)}),Fe.f=Pr,Y.f=Mn,ae.f=Or,he.f=Nr,Ce.f=ie.f=Wr,Oe.f=Yr,Ue.f=function(Ur){return Rr(Ve(Ur),Ur)},d&&(kt(tr,"description",{configurable:!0,get:function(){return or(this).description}}),i||ze(ir,"propertyIsEnumerable",Pr,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:$e}),ar(V(Ir),function(Ur){er(Ur)}),n({target:"Symbol",stat:!0,forced:!u},{useSetter:function(){kr=!0},useSimple:function(){kr=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!d},{create:function(Ur,qr){return qr===void 0?A(Ur):Or(A(Ur),qr)},defineProperty:Mn,defineProperties:Or,getOwnPropertyDescriptor:Nr}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Wr}),At(),ur($e,"Symbol"),xe[hr]=!0},function(t,r,e){var n=e(161),o=e(65);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,r,e){var n=e(14),o=e(16),s=n.WeakMap;t.exports=o(s)&&/native code/.test(String(s))},function(t,r,e){var n=e(1),o=e(33),s=e(29),a=e(49),i=e(109),d=e(221),u=i("string-to-symbol-registry"),c=i("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!d},{for:function(m){var v=a(m);if(s(u,v))return u[v];var g=o("Symbol")(v);return u[v]=g,c[g]=v,g}})},function(t,r,e){var n=e(1),o=e(29),s=e(126),a=e(78),i=e(109),d=e(221),u=i("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!d},{keyFor:function(c){if(!s(c))throw TypeError(a(c)+" is not a symbol");if(o(u,c))return u[c]}})},function(t,r,e){var n=e(1),o=e(92),s=e(4),a=e(132),i=e(42);n({target:"Object",stat:!0,forced:!o||s(function(){a.f(1)})},{getOwnPropertySymbols:function(d){var u=a.f;return u?u(i(d)):[]}})},function(t,r,e){e(22)("asyncIterator")},function(t,r){},function(t,r,e){e(22)("hasInstance")},function(t,r,e){e(22)("isConcatSpreadable")},function(t,r,e){e(22)("match")},function(t,r,e){e(22)("matchAll")},function(t,r,e){e(22)("replace")},function(t,r,e){e(22)("search")},function(t,r,e){e(22)("species")},function(t,r,e){e(22)("split")},function(t,r,e){var n=e(33),o=e(22),s=e(81);o("toStringTag"),s(n("Symbol"),"Symbol")},function(t,r,e){e(22)("unscopables")},function(t,r,e){var n=e(14);e(81)(n.JSON,"JSON",!0)},function(t,r){},function(t,r){},function(t,r,e){var n=e(226).IteratorPrototype,o=e(80),s=e(77),a=e(81),i=e(99),d=function(){return this};t.exports=function(u,c,m,v){var g=c+" Iterator";return u.prototype=o(n,{next:s(+!v,m)}),a(u,g,!1,!0),i[g]=d,u}},function(t,r,e){var n=e(16),o=String,s=TypeError;t.exports=function(a){if(typeof a=="object"||n(a))return a;throw s("Can't set "+o(a)+" as a prototype")}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,e){e(22)("dispose")},function(t,r,e){e(22)("asyncDispose")},function(t,r,e){e(22)("matcher")},function(t,r,e){e(22)("metadataKey")},function(t,r,e){e(22)("observable")},function(t,r,e){e(22)("metadata")},function(t,r,e){e(22)("patternMatch")},function(t,r,e){e(22)("replaceAll")},function(t,r,e){t.exports=e(366)},function(t,r,e){t.exports=e(367)},function(t,r,e){var n=e(368);t.exports=n},function(t,r,e){var n=e(369);t.exports=n},function(t,r,e){var n=e(370);e(67),t.exports=n},function(t,r,e){e(82),e(96),e(113),e(223);var n=e(133);t.exports=n.f("iterator")},function(t,r,e){var n=e(11),o=e(110),s=e(49),a=e(108),i=n("".charAt),d=n("".charCodeAt),u=n("".slice),c=function(m){return function(v,g){var b,T,k=s(a(v)),y=o(g),A=k.length;return y<0||y>=A?m?"":void 0:(b=d(k,y))<55296||b>56319||y+1===A||(T=d(k,y+1))<56320||T>57343?m?i(k,y):b:m?u(k,y,y+2):T-56320+(b-55296<<10)+65536}};t.exports={codeAt:c(!1),charAt:c(!0)}},function(t,r,e){e(373);var n=e(12);t.exports=n.Array.isArray},function(t,r,e){e(1)({target:"Array",stat:!0},{isArray:e(79)})},function(t,r,e){var n=e(375);t.exports=n},function(t,r,e){e(376);var n=e(30);t.exports=n("Array").forEach},function(t,r,e){var n=e(1),o=e(377);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,r,e){var n=e(84).forEach,o=e(94)("forEach");t.exports=o?[].forEach:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}},function(t,r,e){t.exports=e(379)},function(t,r,e){var n=e(380);t.exports=n},function(t,r,e){e(381);var n=e(12).Object;t.exports=function(o){return n.getOwnPropertyNames(o)}},function(t,r,e){var n=e(1),o=e(4),s=e(164).f;n({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},function(t,r,e){e(383);var n=e(12);t.exports=n.Object.keys},function(t,r,e){var n=e(1),o=e(42),s=e(118);n({target:"Object",stat:!0,forced:e(4)(function(){s(1)})},{keys:function(a){return s(o(a))}})},function(t,r,e){var n=e(385);t.exports=n},function(t,r,e){e(222);var n=e(12),o=e(76);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(s,a,i){return o(n.JSON.stringify,null,arguments)}},function(t,r,e){e(231),e(82),e(96),e(393),e(245),e(246),e(406),e(113);var n=e(12);t.exports=n.Promise},function(t,r,e){var n=e(1),o=e(21),s=e(134),a=e(135),i=e(388),d=e(80),u=e(53),c=e(77),m=e(389),v=e(390),g=e(46),b=e(391),T=e(20),k=e(392),y=T("toStringTag"),A=Error,V=[].push,Ce=function(Oe,he){var Y,ae=arguments.length>2?arguments[2]:void 0,Fe=o(ie,this);a?Y=a(A(),Fe?s(this):ie):(Y=Fe?this:d(ie),u(Y,y,"Error")),he!==void 0&&u(Y,"message",b(he)),k&&u(Y,"stack",m(Y.stack,1)),v(Y,ae);var ze=[];return g(Oe,V,{that:ze}),u(Y,"errors",ze),Y};a?a(Ce,A):i(Ce,A,{name:!0});var ie=Ce.prototype=d(A.prototype,{constructor:c(1,Ce),message:c(1,""),name:c(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:Ce})},function(t,r,e){var n=e(29),o=e(232),s=e(90),a=e(38);t.exports=function(i,d,u){for(var c=o(d),m=a.f,v=s.f,g=0;g<c.length;g++){var b=c[g];n(i,b)||u&&n(u,b)||m(i,b,v(d,b))}}},function(t,r,e){var n=e(11),o=Error,s=n("".replace),a=String(o("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,d=i.test(a);t.exports=function(u,c){if(d&&typeof u=="string"&&!o.prepareStackTrace)for(;c--;)u=s(u,i,"");return u}},function(t,r,e){var n=e(28),o=e(53);t.exports=function(s,a){n(a)&&"cause"in a&&o(s,"cause",a.cause)}},function(t,r,e){var n=e(49);t.exports=function(o,s){return o===void 0?arguments.length<2?"":s:n(o)}},function(t,r,e){var n=e(4),o=e(77);t.exports=!n(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",o(1,7)),s.stack!==7)})},function(t,r,e){e(394),e(401),e(402),e(403),e(404),e(405)},function(t,r,e){var n,o,s,a=e(1),i=e(48),d=e(114),u=e(14),c=e(19),m=e(66),v=e(135),g=e(81),b=e(236),T=e(31),k=e(16),y=e(28),A=e(167),V=e(237),Ce=e(238).set,ie=e(395),Oe=e(398),he=e(100),Y=e(399),ae=e(97),Fe=e(101),ze=e(115),pe=e(68),le=ze.CONSTRUCTOR,xe=ze.REJECTION_EVENT,ue=ze.SUBCLASSING,Ve=ae.getterFor("Promise"),Ue=ae.set,er=Fe&&Fe.prototype,At=Fe,ur=er,pr=u.TypeError,ar=u.document,hr=u.process,Ne=pe.f,or=Ne,ir=!!(ar&&ar.createEvent&&u.dispatchEvent),$e=function(Tr){var Ir;return!(!y(Tr)||!k(Ir=Tr.then))&&Ir},tr=function(Tr,Ir){var kr,Ar,Rr,Mn=Ir.value,Or=Ir.state==1,Pr=Or?Tr.ok:Tr.fail,Nr=Tr.resolve,Wr=Tr.reject,Yr=Tr.domain;try{Pr?(Or||(Ir.rejection===2&&rr(Ir),Ir.rejection=1),Pr===!0?kr=Mn:(Yr&&Yr.enter(),kr=Pr(Mn),Yr&&(Yr.exit(),Rr=!0)),kr===Tr.promise?Wr(pr("Promise-chain cycle")):(Ar=$e(kr))?c(Ar,kr,Nr,Wr):Nr(kr)):Wr(Mn)}catch(Ur){Yr&&!Rr&&Yr.exit(),Wr(Ur)}},nr=function(Tr,Ir){Tr.notified||(Tr.notified=!0,ie(function(){for(var kr,Ar=Tr.reactions;kr=Ar.get();)tr(kr,Tr);Tr.notified=!1,Ir&&!Tr.rejection&&Et(Tr)}))},Pt=function(Tr,Ir,kr){var Ar,Rr;ir?((Ar=ar.createEvent("Event")).promise=Ir,Ar.reason=kr,Ar.initEvent(Tr,!1,!0),u.dispatchEvent(Ar)):Ar={promise:Ir,reason:kr},!xe&&(Rr=u["on"+Tr])?Rr(Ar):Tr==="unhandledrejection"&&Oe("Unhandled promise rejection",kr)},Et=function(Tr){c(Ce,u,function(){var Ir,kr=Tr.facade,Ar=Tr.value;if(kt(Tr)&&(Ir=he(function(){d?hr.emit("unhandledRejection",Ar,kr):Pt("unhandledrejection",kr,Ar)}),Tr.rejection=d||kt(Tr)?2:1,Ir.error))throw Ir.value})},kt=function(Tr){return Tr.rejection!==1&&!Tr.parent},rr=function(Tr){c(Ce,u,function(){var Ir=Tr.facade;d?hr.emit("rejectionHandled",Ir):Pt("rejectionhandled",Ir,Tr.value)})},cr=function(Tr,Ir,kr){return function(Ar){Tr(Ir,Ar,kr)}},mr=function(Tr,Ir,kr){Tr.done||(Tr.done=!0,kr&&(Tr=kr),Tr.value=Ir,Tr.state=2,nr(Tr,!0))},yr=function(Tr,Ir,kr){if(!Tr.done){Tr.done=!0,kr&&(Tr=kr);try{if(Tr.facade===Ir)throw pr("Promise can't be resolved itself");var Ar=$e(Ir);Ar?ie(function(){var Rr={done:!1};try{c(Ar,Ir,cr(yr,Rr,Tr),cr(mr,Rr,Tr))}catch(Mn){mr(Rr,Mn,Tr)}}):(Tr.value=Ir,Tr.state=1,nr(Tr,!1))}catch(Rr){mr({done:!1},Rr,Tr)}}};if(le&&(ur=(At=function(Tr){A(this,ur),T(Tr),c(n,this);var Ir=Ve(this);try{Tr(cr(yr,Ir),cr(mr,Ir))}catch(kr){mr(Ir,kr)}}).prototype,(n=function(Tr){Ue(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Y,rejection:!1,state:0,value:void 0})}).prototype=m(ur,"then",function(Tr,Ir){var kr=Ve(this),Ar=Ne(V(this,At));return kr.parent=!0,Ar.ok=!k(Tr)||Tr,Ar.fail=k(Ir)&&Ir,Ar.domain=d?hr.domain:void 0,kr.state==0?kr.reactions.add(Ar):ie(function(){tr(Ar,kr)}),Ar.promise}),o=function(){var Tr=new n,Ir=Ve(Tr);this.promise=Tr,this.resolve=cr(yr,Ir),this.reject=cr(mr,Ir)},pe.f=Ne=function(Tr){return Tr===At||Tr===void 0?new o(Tr):or(Tr)},!i&&k(Fe)&&er!==Object.prototype)){s=er.then,ue||m(er,"then",function(Tr,Ir){var kr=this;return new At(function(Ar,Rr){c(s,kr,Ar,Rr)}).then(Tr,Ir)},{unsafe:!0});try{delete er.constructor}catch{}v&&v(er,ur)}a({global:!0,constructor:!0,wrap:!0,forced:le},{Promise:At}),g(At,"Promise",!1,!0),b("Promise")},function(t,r,e){var n,o,s,a,i,d,u,c,m=e(14),v=e(34),g=e(90).f,b=e(238).set,T=e(240),k=e(396),y=e(397),A=e(114),V=m.MutationObserver||m.WebKitMutationObserver,Ce=m.document,ie=m.process,Oe=m.Promise,he=g(m,"queueMicrotask"),Y=he&&he.value;Y||(n=function(){var ae,Fe;for(A&&(ae=ie.domain)&&ae.exit();o;){Fe=o.fn,o=o.next;try{Fe()}catch(ze){throw o?a():s=void 0,ze}}s=void 0,ae&&ae.enter()},T||A||y||!V||!Ce?!k&&Oe&&Oe.resolve?((u=Oe.resolve(void 0)).constructor=Oe,c=v(u.then,u),a=function(){c(n)}):A?a=function(){ie.nextTick(n)}:(b=v(b,m),a=function(){b(n)}):(i=!0,d=Ce.createTextNode(""),new V(n).observe(d,{characterData:!0}),a=function(){d.data=i=!i})),t.exports=Y||function(ae){var Fe={fn:ae,next:void 0};s&&(s.next=Fe),o||(o=Fe,a()),s=Fe}},function(t,r,e){var n=e(64),o=e(14);t.exports=/ipad|iphone|ipod/i.test(n)&&o.Pebble!==void 0},function(t,r,e){var n=e(64);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,r,e){var n=e(14);t.exports=function(o,s){var a=n.console;a&&a.error&&(arguments.length==1?a.error(o):a.error(o,s))}},function(t,r){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},t.exports=e},function(t,r,e){var n=e(241),o=e(114);t.exports=!n&&!o&&typeof window=="object"&&typeof document=="object"},function(t,r,e){var n=e(1),o=e(19),s=e(31),a=e(68),i=e(100),d=e(46);n({target:"Promise",stat:!0,forced:e(242)},{all:function(u){var c=this,m=a.f(c),v=m.resolve,g=m.reject,b=i(function(){var T=s(c.resolve),k=[],y=0,A=1;d(u,function(V){var Ce=y++,ie=!1;A++,o(T,c,V).then(function(Oe){ie||(ie=!0,k[Ce]=Oe,--A||v(k))},g)}),--A||v(k)});return b.error&&g(b.value),m.promise}})},function(t,r,e){var n=e(1),o=e(48),s=e(115).CONSTRUCTOR,a=e(101),i=e(33),d=e(16),u=e(66),c=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(v){return this.then(void 0,v)}}),!o&&d(a)){var m=i("Promise").prototype.catch;c.catch!==m&&u(c,"catch",m,{unsafe:!0})}},function(t,r,e){var n=e(1),o=e(19),s=e(31),a=e(68),i=e(100),d=e(46);n({target:"Promise",stat:!0,forced:e(242)},{race:function(u){var c=this,m=a.f(c),v=m.reject,g=i(function(){var b=s(c.resolve);d(u,function(T){o(b,c,T).then(m.resolve,v)})});return g.error&&v(g.value),m.promise}})},function(t,r,e){var n=e(1),o=e(19),s=e(68);n({target:"Promise",stat:!0,forced:e(115).CONSTRUCTOR},{reject:function(a){var i=s.f(this);return o(i.reject,void 0,a),i.promise}})},function(t,r,e){var n=e(1),o=e(33),s=e(48),a=e(101),i=e(115).CONSTRUCTOR,d=e(244),u=o("Promise"),c=s&&!i;n({target:"Promise",stat:!0,forced:s||i},{resolve:function(m){return d(c&&this===u?a:this,m)}})},function(t,r,e){var n=e(1),o=e(48),s=e(101),a=e(4),i=e(33),d=e(16),u=e(237),c=e(244),m=e(66),v=s&&s.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!s&&a(function(){v.finally.call({then:function(){}},function(){})})},{finally:function(b){var T=u(this,i("Promise")),k=d(b);return this.then(k?function(y){return c(T,b()).then(function(){return y})}:b,k?function(y){return c(T,b()).then(function(){throw y})}:b)}}),!o&&d(s)){var g=i("Promise").prototype.finally;v.finally!==g&&m(v,"finally",g,{unsafe:!0})}},function(t,r,e){t.exports=e(408)},function(t,r,e){var n=e(409);t.exports=n},function(t,r,e){var n=e(247);t.exports=n},function(t,r,e){e(411);var n=e(12).Object,o=t.exports=function(s,a,i){return n.defineProperty(s,a,i)};n.defineProperty.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(27),s=e(38).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!o},{defineProperty:s})},function(t,r,e){var n=e(413),o=e(25).default;t.exports=function(s,a){if(o(s)!=="object"||s===null)return s;var i=s[n];if(i!==void 0){var d=i.call(s,a||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(414)},function(t,r,e){t.exports=e(415)},function(t,r,e){var n=e(416);t.exports=n},function(t,r,e){var n=e(417);t.exports=n},function(t,r,e){var n=e(418);t.exports=n},function(t,r,e){e(419),e(224);var n=e(133);t.exports=n.f("toPrimitive")},function(t,r){},function(t,r,e){var n=e(21),o=e(421),s=Array.prototype;t.exports=function(a){var i=a.slice;return a===s||n(s,a)&&i===s.slice?o:i}},function(t,r,e){e(422);var n=e(30);t.exports=n("Array").slice},function(t,r,e){var n=e(1),o=e(79),s=e(129),a=e(28),i=e(128),d=e(45),u=e(43),c=e(95),m=e(20),v=e(111),g=e(98),b=v("slice"),T=m("species"),k=Array,y=Math.max;n({target:"Array",proto:!0,forced:!b},{slice:function(A,V){var Ce,ie,Oe,he=u(this),Y=d(he),ae=i(A,Y),Fe=i(V===void 0?Y:V,Y);if(o(he)&&(Ce=he.constructor,(s(Ce)&&(Ce===k||o(Ce.prototype))||a(Ce)&&(Ce=Ce[T])===null)&&(Ce=void 0),Ce===k||Ce===void 0))return g(he,ae,Fe);for(ie=new(Ce===void 0?k:Ce)(y(Fe-ae,0)),Oe=0;ae<Fe;ae++,Oe++)ae in he&&c(ie,Oe,he[ae]);return ie.length=Oe,ie}})},function(t,r,e){var n=e(424);t.exports=n},function(t,r,e){var n=e(21),o=e(425),s=Array.prototype;t.exports=function(a){var i=a.some;return a===s||n(s,a)&&i===s.some?o:i}},function(t,r,e){e(426);var n=e(30);t.exports=n("Array").some},function(t,r,e){var n=e(1),o=e(84).some;n({target:"Array",proto:!0,forced:!e(94)("some")},{some:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(428);t.exports=n},function(t,r,e){var n=e(21),o=e(429),s=Array.prototype;t.exports=function(a){var i=a.splice;return a===s||n(s,a)&&i===s.splice?o:i}},function(t,r,e){e(430);var n=e(30);t.exports=n("Array").splice},function(t,r,e){var n=e(1),o=e(42),s=e(128),a=e(110),i=e(45),d=e(431),u=e(212),c=e(160),m=e(95),v=e(250),g=e(111)("splice"),b=Math.max,T=Math.min;n({target:"Array",proto:!0,forced:!g},{splice:function(k,y){var A,V,Ce,ie,Oe,he,Y=o(this),ae=i(Y),Fe=s(k,ae),ze=arguments.length;for(ze===0?A=V=0:ze===1?(A=0,V=ae-Fe):(A=ze-2,V=T(b(a(y),0),ae-Fe)),u(ae+A-V),Ce=c(Y,V),ie=0;ie<V;ie++)(Oe=Fe+ie)in Y&&m(Ce,ie,Y[Oe]);if(Ce.length=V,A<V){for(ie=Fe;ie<ae-V;ie++)he=ie+A,(Oe=ie+V)in Y?Y[he]=Y[Oe]:v(Y,he);for(ie=ae;ie>ae-V+A;ie--)v(Y,ie-1)}else if(A>V)for(ie=ae-V;ie>Fe;ie--)he=ie+A-1,(Oe=ie+V-1)in Y?Y[he]=Y[Oe]:v(Y,he);for(ie=0;ie<A;ie++)Y[ie+Fe]=arguments[ie+2];return d(Y,ae-V+A),Ce}})},function(t,r,e){var n=e(27),o=e(79),s=TypeError,a=Object.getOwnPropertyDescriptor,i=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(d){return d instanceof TypeError}}();t.exports=i?function(d,u){if(o(d)&&!a(d,"length").writable)throw s("Cannot set read only .length");return d.length=u}:function(d,u){return d.length=u}},function(t,r,e){var n=e(433);t.exports=n},function(t,r,e){var n=e(21),o=e(434),s=Array.prototype;t.exports=function(a){var i=a.sort;return a===s||n(s,a)&&i===s.sort?o:i}},function(t,r,e){e(435);var n=e(30);t.exports=n("Array").sort},function(t,r,e){var n=e(1),o=e(11),s=e(31),a=e(42),i=e(45),d=e(250),u=e(49),c=e(4),m=e(436),v=e(94),g=e(437),b=e(438),T=e(93),k=e(439),y=[],A=o(y.sort),V=o(y.push),Ce=c(function(){y.sort(void 0)}),ie=c(function(){y.sort(null)}),Oe=v("sort"),he=!c(function(){if(T)return T<70;if(!(g&&g>3)){if(b)return!0;if(k)return k<603;var Y,ae,Fe,ze,pe="";for(Y=65;Y<76;Y++){switch(ae=String.fromCharCode(Y),Y){case 66:case 69:case 70:case 72:Fe=3;break;case 68:case 71:Fe=4;break;default:Fe=2}for(ze=0;ze<47;ze++)y.push({k:ae+ze,v:Fe})}for(y.sort(function(le,xe){return xe.v-le.v}),ze=0;ze<y.length;ze++)ae=y[ze].k.charAt(0),pe.charAt(pe.length-1)!==ae&&(pe+=ae);return pe!=="DGBEFHACIJK"}});n({target:"Array",proto:!0,forced:Ce||!ie||!Oe||!he},{sort:function(Y){Y!==void 0&&s(Y);var ae=a(this);if(he)return Y===void 0?A(ae):A(ae,Y);var Fe,ze,pe=[],le=i(ae);for(ze=0;ze<le;ze++)ze in ae&&V(pe,ae[ze]);for(m(pe,function(xe){return function(ue,Ve){return Ve===void 0?-1:ue===void 0?1:xe!==void 0?+xe(ue,Ve)||0:u(ue)>u(Ve)?1:-1}}(Y)),Fe=i(pe),ze=0;ze<Fe;)ae[ze]=pe[ze++];for(;ze<le;)d(ae,ze++);return ae}})},function(t,r,e){var n=e(219),o=Math.floor,s=function(d,u){var c=d.length,m=o(c/2);return c<8?a(d,u):i(d,s(n(d,0,m),u),s(n(d,m),u),u)},a=function(d,u){for(var c,m,v=d.length,g=1;g<v;){for(m=g,c=d[g];m&&u(d[m-1],c)>0;)d[m]=d[--m];m!==g++&&(d[m]=c)}return d},i=function(d,u,c,m){for(var v=u.length,g=c.length,b=0,T=0;b<v||T<g;)d[b+T]=b<v&&T<g?m(u[b],c[T])<=0?u[b++]:c[T++]:b<v?u[b++]:c[T++];return d};t.exports=s},function(t,r,e){var n=e(64).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(64);t.exports=/MSIE|Trident/.test(n)},function(t,r,e){var n=e(64).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(441);t.exports=n},function(t,r,e){var n=e(21),o=e(442),s=Array.prototype;t.exports=function(a){var i=a.map;return a===s||n(s,a)&&i===s.map?o:i}},function(t,r,e){e(443);var n=e(30);t.exports=n("Array").map},function(t,r,e){var n=e(1),o=e(84).map;n({target:"Array",proto:!0,forced:!e(111)("map")},{map:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(445);t.exports=n},function(t,r,e){var n=e(21),o=e(446),s=Array.prototype;t.exports=function(a){var i=a.reduce;return a===s||n(s,a)&&i===s.reduce?o:i}},function(t,r,e){e(447);var n=e(30);t.exports=n("Array").reduce},function(t,r,e){var n=e(1),o=e(448).left,s=e(94),a=e(93),i=e(114);n({target:"Array",proto:!0,forced:!s("reduce")||!i&&a>79&&a<83},{reduce:function(d){var u=arguments.length;return o(this,d,u,u>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(31),o=e(42),s=e(124),a=e(45),i=TypeError,d=function(u){return function(c,m,v,g){n(m);var b=o(c),T=s(b),k=a(b),y=u?k-1:0,A=u?-1:1;if(v<2)for(;;){if(y in T){g=T[y],y+=A;break}if(y+=A,u?y<0:k<=y)throw i("Reduce of empty array with no initial value")}for(;u?y>=0:k>y;y+=A)y in T&&(g=m(g,T[y],y,b));return g}};t.exports={left:d(!1),right:d(!0)}},function(t,r,e){var n=e(450);t.exports=n},function(t,r,e){var n=e(21),o=e(451),s=Array.prototype;t.exports=function(a){var i=a.lastIndexOf;return a===s||n(s,a)&&i===s.lastIndexOf?o:i}},function(t,r,e){e(452);var n=e(30);t.exports=n("Array").lastIndexOf},function(t,r,e){var n=e(1),o=e(453);n({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},function(t,r,e){var n=e(76),o=e(43),s=e(110),a=e(45),i=e(94),d=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,m=i("lastIndexOf"),v=c||!m;t.exports=v?function(g){if(c)return n(u,this,arguments)||0;var b=o(this),T=a(b),k=T-1;for(arguments.length>1&&(k=d(k,s(arguments[1]))),k<0&&(k=T+k);k>=0;k--)if(k in b&&b[k]===g)return k||0;return-1}:u},function(t,r,e){e(251);var n=e(12);t.exports=n.setTimeout},function(t,r,e){var n=e(1),o=e(14),s=e(252)(o.setInterval,!0);n({global:!0,bind:!0,forced:o.setInterval!==s},{setInterval:s})},function(t,r){t.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},function(t,r,e){var n=e(1),o=e(14),s=e(252)(o.setTimeout,!0);n({global:!0,bind:!0,forced:o.setTimeout!==s},{setTimeout:s})},function(t,r,e){var n=e(459);t.exports=n},function(t,r,e){var n=e(21),o=e(460),s=Array.prototype;t.exports=function(a){var i=a.filter;return a===s||n(s,a)&&i===s.filter?o:i}},function(t,r,e){e(461);var n=e(30);t.exports=n("Array").filter},function(t,r,e){var n=e(1),o=e(84).filter;n({target:"Array",proto:!0,forced:!e(111)("filter")},{filter:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){t.exports=e(463)},function(t,r,e){e(67);var n=e(65),o=e(29),s=e(21),a=e(464),i=Array.prototype,d={DOMTokenList:!0,NodeList:!0};t.exports=function(u){var c=u.values;return u===i||s(i,u)&&c===i.values||o(d,n(u))?a:c}},function(t,r,e){var n=e(465);t.exports=n},function(t,r,e){e(82),e(96);var n=e(30);t.exports=n("Array").values},function(t,r,e){e(113),e(467);var n=e(12);t.exports=n.Array.from},function(t,r,e){var n=e(1),o=e(468);n({target:"Array",stat:!0,forced:!e(243)(function(s){Array.from(s)})},{from:o})},function(t,r,e){var n=e(34),o=e(19),s=e(42),a=e(469),i=e(233),d=e(129),u=e(45),c=e(95),m=e(234),v=e(136),g=Array;t.exports=function(b){var T=s(b),k=d(this),y=arguments.length,A=y>1?arguments[1]:void 0,V=A!==void 0;V&&(A=n(A,y>2?arguments[2]:void 0));var Ce,ie,Oe,he,Y,ae,Fe=v(T),ze=0;if(!Fe||this===g&&i(Fe))for(Ce=u(T),ie=k?new this(Ce):g(Ce);Ce>ze;ze++)ae=V?A(T[ze],ze):T[ze],c(ie,ze,ae);else for(Y=(he=m(T,Fe)).next,ie=k?new this:[];!(Oe=o(Y,he)).done;ze++)ae=V?a(he,A,[Oe.value,ze],!0):Oe.value,c(ie,ze,ae);return ie.length=ze,ie}},function(t,r,e){var n=e(36),o=e(235);t.exports=function(s,a,i,d){try{return d?a(n(i)[0],i[1]):a(i)}catch(u){o(s,"throw",u)}}},function(t,r,e){t.exports=e(471)},function(t,r,e){var n=e(472);t.exports=n},function(t,r,e){var n=e(473);t.exports=n},function(t,r,e){var n=e(474);e(67),t.exports=n},function(t,r,e){e(82),e(113);var n=e(136);t.exports=n},function(t,r,e){e(218);var n=e(12);t.exports=n.Object.getOwnPropertySymbols},function(t,r,e){var n=e(477);t.exports=n},function(t,r,e){e(478);var n=e(12).Object,o=t.exports=function(s,a){return n.getOwnPropertyDescriptor(s,a)};n.getOwnPropertyDescriptor.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(4),s=e(43),a=e(90).f,i=e(27),d=o(function(){a(1)});n({target:"Object",stat:!0,forced:!i||d,sham:!i},{getOwnPropertyDescriptor:function(u,c){return a(s(u),c)}})},function(t,r,e){var n=e(480);t.exports=n},function(t,r,e){e(481);var n=e(12);t.exports=n.Object.getOwnPropertyDescriptors},function(t,r,e){var n=e(1),o=e(27),s=e(232),a=e(43),i=e(90),d=e(95);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(u){for(var c,m,v=a(u),g=i.f,b=s(v),T={},k=0;b.length>k;)(m=g(v,c=b[k++]))!==void 0&&d(T,c,m);return T}})},function(t,r,e){var n=e(483);t.exports=n},function(t,r,e){e(484);var n=e(12).Object,o=t.exports=function(s,a){return n.defineProperties(s,a)};n.defineProperties.sham&&(o.sham=!0)},function(t,r,e){var n=e(1),o=e(27),s=e(162).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==s,sham:!o},{defineProperties:s})},function(t,r,e){var n=e(13);typeof window<"u"&&(window.console||n.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(t,r,e){var n=e(487);t.exports=function(o){return n(o,5)}},function(t,r,e){var n=e(488),o=e(517),s=e(259),a=e(519),i=e(528),d=e(531),u=e(532),c=e(533),m=e(535),v=e(536),g=e(537),b=e(180),T=e(541),k=e(542),y=e(548),A=e(174),V=e(262),Ce=e(550),ie=e(88),Oe=e(552),he=e(173),Y=e(178),ae={};ae["[object Arguments]"]=ae["[object Array]"]=ae["[object ArrayBuffer]"]=ae["[object DataView]"]=ae["[object Boolean]"]=ae["[object Date]"]=ae["[object Float32Array]"]=ae["[object Float64Array]"]=ae["[object Int8Array]"]=ae["[object Int16Array]"]=ae["[object Int32Array]"]=ae["[object Map]"]=ae["[object Number]"]=ae["[object Object]"]=ae["[object RegExp]"]=ae["[object Set]"]=ae["[object String]"]=ae["[object Symbol]"]=ae["[object Uint8Array]"]=ae["[object Uint8ClampedArray]"]=ae["[object Uint16Array]"]=ae["[object Uint32Array]"]=!0,ae["[object Error]"]=ae["[object Function]"]=ae["[object WeakMap]"]=!1,t.exports=function Fe(ze,pe,le,xe,ue,Ve){var Ue,er=1&pe,At=2&pe,ur=4&pe;if(le&&(Ue=ue?le(ze,xe,ue,Ve):le(ze)),Ue!==void 0)return Ue;if(!ie(ze))return ze;var pr=A(ze);if(pr){if(Ue=T(ze),!er)return u(ze,Ue)}else{var ar=b(ze),hr=ar=="[object Function]"||ar=="[object GeneratorFunction]";if(V(ze))return d(ze,er);if(ar=="[object Object]"||ar=="[object Arguments]"||hr&&!ue){if(Ue=At||hr?{}:y(ze),!er)return At?m(ze,i(Ue,ze)):c(ze,a(Ue,ze))}else{if(!ae[ar])return ue?ze:{};Ue=k(ze,ar,er)}}Ve||(Ve=new n);var Ne=Ve.get(ze);if(Ne)return Ne;Ve.set(ze,Ue),Oe(ze)?ze.forEach(function(ir){Ue.add(Fe(ir,pe,le,ir,ze,Ve))}):Ce(ze)&&ze.forEach(function(ir,$e){Ue.set($e,Fe(ir,pe,le,$e,ze,Ve))});var or=pr?void 0:(ur?At?g:v:At?Y:he)(ze);return o(or||ze,function(ir,$e){or&&(ir=ze[$e=ir]),s(Ue,$e,Fe(ir,pe,le,$e,ze,Ve))}),Ue}},function(t,r,e){var n=e(140),o=e(494),s=e(495),a=e(496),i=e(497),d=e(498);function u(c){var m=this.__data__=new n(c);this.size=m.size}u.prototype.clear=o,u.prototype.delete=s,u.prototype.get=a,u.prototype.has=i,u.prototype.set=d,t.exports=u},function(t,r){t.exports=function(){this.__data__=[],this.size=0}},function(t,r,e){var n=e(141),o=Array.prototype.splice;t.exports=function(s){var a=this.__data__,i=n(a,s);return!(i<0)&&(i==a.length-1?a.pop():o.call(a,i,1),--this.size,!0)}},function(t,r,e){var n=e(141);t.exports=function(o){var s=this.__data__,a=n(s,o);return a<0?void 0:s[a][1]}},function(t,r,e){var n=e(141);t.exports=function(o){return n(this.__data__,o)>-1}},function(t,r,e){var n=e(141);t.exports=function(o,s){var a=this.__data__,i=n(a,o);return i<0?(++this.size,a.push([o,s])):a[i][1]=s,this}},function(t,r,e){var n=e(140);t.exports=function(){this.__data__=new n,this.size=0}},function(t,r){t.exports=function(e){var n=this.__data__,o=n.delete(e);return this.size=n.size,o}},function(t,r){t.exports=function(e){return this.__data__.get(e)}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(140),o=e(171),s=e(258);t.exports=function(a,i){var d=this.__data__;if(d instanceof n){var u=d.__data__;if(!o||u.length<199)return u.push([a,i]),this.size=++d.size,this;d=this.__data__=new s(u)}return d.set(a,i),this.size=d.size,this}},function(t,r,e){var n=e(255),o=e(502),s=e(88),a=e(257),i=/^\[object .+?Constructor\]$/,d=Function.prototype,u=Object.prototype,c=d.toString,m=u.hasOwnProperty,v=RegExp("^"+c.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(g){return!(!s(g)||o(g))&&(n(g)?v:i).test(a(g))}},function(t,r,e){var n=e(172),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,i=n?n.toStringTag:void 0;t.exports=function(d){var u=s.call(d,i),c=d[i];try{d[i]=void 0;var m=!0}catch{}var v=a.call(d);return m&&(u?d[i]=c:delete d[i]),v}},function(t,r){var e=Object.prototype.toString;t.exports=function(n){return e.call(n)}},function(t,r,e){var n,o=e(503),s=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(a){return!!s&&s in a}},function(t,r,e){var n=e(50)["__core-js_shared__"];t.exports=n},function(t,r){t.exports=function(e,n){return e==null?void 0:e[n]}},function(t,r,e){var n=e(506),o=e(140),s=e(171);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||o),string:new n}}},function(t,r,e){var n=e(507),o=e(508),s=e(509),a=e(510),i=e(511);function d(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var v=u[c];this.set(v[0],v[1])}}d.prototype.clear=n,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=a,d.prototype.set=i,t.exports=d},function(t,r,e){var n=e(142);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,r){t.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(t,r,e){var n=e(142),o=Object.prototype.hasOwnProperty;t.exports=function(s){var a=this.__data__;if(n){var i=a[s];return i==="__lodash_hash_undefined__"?void 0:i}return o.call(a,s)?a[s]:void 0}},function(t,r,e){var n=e(142),o=Object.prototype.hasOwnProperty;t.exports=function(s){var a=this.__data__;return n?a[s]!==void 0:o.call(a,s)}},function(t,r,e){var n=e(142);t.exports=function(o,s){var a=this.__data__;return this.size+=this.has(o)?0:1,a[o]=n&&s===void 0?"__lodash_hash_undefined__":s,this}},function(t,r,e){var n=e(143);t.exports=function(o){var s=n(this,o).delete(o);return this.size-=s?1:0,s}},function(t,r){t.exports=function(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}},function(t,r,e){var n=e(143);t.exports=function(o){return n(this,o).get(o)}},function(t,r,e){var n=e(143);t.exports=function(o){return n(this,o).has(o)}},function(t,r,e){var n=e(143);t.exports=function(o,s){var a=n(this,o),i=a.size;return a.set(o,s),this.size+=a.size==i?0:1,this}},function(t,r){t.exports=function(e,n){for(var o=-1,s=e==null?0:e.length;++o<s&&n(e[o],o,e)!==!1;);return e}},function(t,r,e){var n=e(83),o=function(){try{var s=n(Object,"defineProperty");return s({},"",{}),s}catch{}}();t.exports=o},function(t,r,e){var n=e(144),o=e(173);t.exports=function(s,a){return s&&n(a,o(a),s)}},function(t,r){t.exports=function(e,n){for(var o=-1,s=Array(e);++o<e;)s[o]=n(o);return s}},function(t,r,e){var n=e(522),o=e(104),s=Object.prototype,a=s.hasOwnProperty,i=s.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(u){return o(u)&&a.call(u,"callee")&&!i.call(u,"callee")};t.exports=d},function(t,r,e){var n=e(119),o=e(104);t.exports=function(s){return o(s)&&n(s)=="[object Arguments]"}},function(t,r){t.exports=function(){return!1}},function(t,r,e){var n=e(525),o=e(175),s=e(176),a=s&&s.isTypedArray,i=a?o(a):n;t.exports=i},function(t,r,e){var n=e(119),o=e(263),s=e(104),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(i){return s(i)&&o(i.length)&&!!a[n(i)]}},function(t,r,e){var n=e(177),o=e(527),s=Object.prototype.hasOwnProperty;t.exports=function(a){if(!n(a))return o(a);var i=[];for(var d in Object(a))s.call(a,d)&&d!="constructor"&&i.push(d);return i}},function(t,r,e){var n=e(264)(Object.keys,Object);t.exports=n},function(t,r,e){var n=e(144),o=e(178);t.exports=function(s,a){return s&&n(a,o(a),s)}},function(t,r,e){var n=e(88),o=e(177),s=e(530),a=Object.prototype.hasOwnProperty;t.exports=function(i){if(!n(i))return s(i);var d=o(i),u=[];for(var c in i)(c!="constructor"||!d&&a.call(i,c))&&u.push(c);return u}},function(t,r){t.exports=function(e){var n=[];if(e!=null)for(var o in Object(e))n.push(o);return n}},function(t,r,e){(function(n){var o=e(50),s=r&&!r.nodeType&&r,a=s&&typeof n=="object"&&n&&!n.nodeType&&n,i=a&&a.exports===s?o.Buffer:void 0,d=i?i.allocUnsafe:void 0;n.exports=function(u,c){if(c)return u.slice();var m=u.length,v=d?d(m):new u.constructor(m);return u.copy(v),v}}).call(this,e(145)(t))},function(t,r){t.exports=function(e,n){var o=-1,s=e.length;for(n||(n=Array(s));++o<s;)n[o]=e[o];return n}},function(t,r,e){var n=e(144),o=e(179);t.exports=function(s,a){return n(s,o(s),a)}},function(t,r){t.exports=function(e,n){for(var o=-1,s=e==null?0:e.length,a=0,i=[];++o<s;){var d=e[o];n(d,o,e)&&(i[a++]=d)}return i}},function(t,r,e){var n=e(144),o=e(266);t.exports=function(s,a){return n(s,o(s),a)}},function(t,r,e){var n=e(269),o=e(179),s=e(173);t.exports=function(a){return n(a,s,o)}},function(t,r,e){var n=e(269),o=e(266),s=e(178);t.exports=function(a){return n(a,s,o)}},function(t,r,e){var n=e(83)(e(50),"DataView");t.exports=n},function(t,r,e){var n=e(83)(e(50),"Promise");t.exports=n},function(t,r,e){var n=e(83)(e(50),"WeakMap");t.exports=n},function(t,r){var e=Object.prototype.hasOwnProperty;t.exports=function(n){var o=n.length,s=new n.constructor(o);return o&&typeof n[0]=="string"&&e.call(n,"index")&&(s.index=n.index,s.input=n.input),s}},function(t,r,e){var n=e(181),o=e(544),s=e(545),a=e(546),i=e(547);t.exports=function(d,u,c){var m=d.constructor;switch(u){case"[object ArrayBuffer]":return n(d);case"[object Boolean]":case"[object Date]":return new m(+d);case"[object DataView]":return o(d,c);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(d,c);case"[object Map]":return new m;case"[object Number]":case"[object String]":return new m(d);case"[object RegExp]":return s(d);case"[object Set]":return new m;case"[object Symbol]":return a(d)}}},function(t,r,e){var n=e(50).Uint8Array;t.exports=n},function(t,r,e){var n=e(181);t.exports=function(o,s){var a=s?n(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.byteLength)}},function(t,r){var e=/\w*$/;t.exports=function(n){var o=new n.constructor(n.source,e.exec(n));return o.lastIndex=n.lastIndex,o}},function(t,r,e){var n=e(172),o=n?n.prototype:void 0,s=o?o.valueOf:void 0;t.exports=function(a){return s?Object(s.call(a)):{}}},function(t,r,e){var n=e(181);t.exports=function(o,s){var a=s?n(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.length)}},function(t,r,e){var n=e(549),o=e(268),s=e(177);t.exports=function(a){return typeof a.constructor!="function"||s(a)?{}:n(o(a))}},function(t,r,e){var n=e(88),o=Object.create,s=function(){function a(){}return function(i){if(!n(i))return{};if(o)return o(i);a.prototype=i;var d=new a;return a.prototype=void 0,d}}();t.exports=s},function(t,r,e){var n=e(551),o=e(175),s=e(176),a=s&&s.isMap,i=a?o(a):n;t.exports=i},function(t,r,e){var n=e(180),o=e(104);t.exports=function(s){return o(s)&&n(s)=="[object Map]"}},function(t,r,e){var n=e(553),o=e(175),s=e(176),a=s&&s.isSet,i=a?o(a):n;t.exports=i},function(t,r,e){var n=e(180),o=e(104);t.exports=function(s){return o(s)&&n(s)=="[object Set]"}},function(t,r,e){var n=e(2),o=e(5),s=e(6),a=e(69),i=e(10),d=e(15),u=e(7),c=e(3),m=e(74),v=e(0),g=e(13),b=e(44),T={};function k(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};!Oe.logLevel&&Oe.debug&&(Oe.logLevel="debug"),v.merge(this,{options:Oe,debugEnable:!1,api:"log",style:"color:blue;",logLevel:Oe.logLevel&&Oe.logLevel.toLowerCase()||"off",debug:v.emptyFunc,log:v.emptyFunc,info:v.emptyFunc,warn:v.emptyFunc,error:v.emptyFunc}),this.prefix=Oe.prefix||"",this.localEnable=T.enable&&Oe.dbLog&&Oe.account,this.setDebug(Oe.debug),this.localEnable&&(this._local=new T(Oe.account,Oe.expire),this._local.logError=this.error)}T=e(563);var y=k.prototype,A=["Chrome","Safari","Firefox"],V={debug:1e3,log:2e3,info:3e3,warn:4e3,error:5e3,off:6e3};function Ce(Oe){var he,Y=[];return n(he=o(V)).call(he,function(ae){V[ae]>=V[Oe]&&Y.push(ae)}),Y}y.setDebug=function(){var Oe=arguments.length>0&&arguments[0]!==void 0&&arguments[0],he=this;if(he.debugEnable=Oe||he.logLevel==="debug",Oe.style&&(he.style=Oe.style),v.exist(console)){if(he.logLevel!=="off"){var Y=console,ae=Ce(he.logLevel);n(ae).call(ae,function(ze){he[ze]=function(){var pe=he.formatArgsAndSave(arguments,ze);s(A).call(A,m.name)!==-1&&v.isString(pe[0])&&(pe[0]="%c"+pe[0],a(pe).call(pe,1,0,he.style)),he._log(ze,pe)}}),he.options.logFunc?he._log=function(){}:he._log=function(ze,pe){if(ze==="debug"&&(ze="log"),Y[ze])try{Y[ze].apply?he.chrome(ze,pe):he.ie(ze,pe)}catch{}},he.chrome=function(ze,pe){s(A).call(A,m.name)!==-1?Y[ze].apply(Y,pe):he.ie(ze,pe)},he.ie=function(ze,pe){n(pe).call(pe,function(le){Y[ze](i(le,null,4))})}}else if(g.isRN||this.localEnable||this.options.logFunc){var Fe=!g.isRN&&!this.localEnable;he.log=function(){he.formatArgsAndSave(arguments,"log",Fe)},he.info=function(){he.formatArgsAndSave(arguments,"info",Fe)},he.warn=function(){he.formatArgsAndSave(arguments,"warn",Fe)},he.error=function(){he.formatArgsAndSave(arguments,"error",Fe)},he.debug=function(){he.formatArgsAndSave(arguments,"error",Fe)}}}},y.destroy=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.debug=function(){},this._local&&this._local.destroy()},y.formatArgsAndSave=function(Oe,he,Y){var ae,Fe;Oe=d([]).call(Oe,0);var ze=new Date,pe=ie(ze.getMonth()+1)+"-"+ie(ze.getDate())+" "+ie(ze.getHours())+":"+ie(ze.getMinutes())+":"+ie(ze.getSeconds())+":"+ie(ze.getMilliseconds(),3),le=u(ae=u(Fe="[NIM ".concat(he.toUpperCase()," ")).call(Fe,pe," ")).call(ae,this.prefix.toUpperCase(),"]  "),xe="";v.isString(Oe[0])?Oe[0]=le+Oe[0]:a(Oe).call(Oe,0,0,le),n(Oe).call(Oe,function(Ve,Ue){v.isArray(Ve)||v.isObject(Ve)?(Oe[Ue]=v.simpleClone(Ve),xe+=i(Oe[Ue])+" "):xe+=Ve+" "});var ue=this.options.logFunc;return ue&&v.isFunction(ue[he])&&ue[he].apply(ue,Oe),!Y&&this.writeLocalLog(xe,he,+ze),Oe},y.writeLocalLog=function(Oe,he,Y){return g.isRN?this.writeLocalLogRN(Oe,he,Y):g.isBrowser?this.writeLocalLogBrowser(Oe,he,Y):void 0};var ie=function(Oe,he){he=he||2;for(var Y=""+Oe;Y.length<he;)Y="0"+Y;return Y};y.writeLocalLogBrowser=function(Oe,he,Y){this._local&&this._local.saveLog({log:Oe,level:he,time:Y})},y.writeLocalLogRN=function(Oe,he){if(b.rnfs&&b.rnfs.writeFile&&b.rnfs.appendFile&&b.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(he)){var Y,ae=b.rnfs,Fe=ae.size/2-256;Oe+=`\r
`,ae.nimPromise=ae.nimPromise.then(function(){return Y=ze(ae.nimIndex),ae.exists(Y)}).then(function(pe){return pe?ae.appendFile(Y,Oe):ae.writeFile(Y,Oe)}).then(function(){return ae.stat(Y)}).then(function(pe){if(pe.size>Fe)return ae.nimIndex++,ae.nimIndex>1&&(ae.nimIndex=ae.nimIndex%2),ae.unlink(ze(ae.nimIndex)).catch(function(){return c.resolve()})}).catch(function(){})}function ze(pe){return b.rnfs.DocumentDirectoryPath+"/nimlog_"+pe+".log"}},t.exports=k},function(t,r,e){var n=e(556);t.exports=n},function(t,r,e){e(557);var n=e(12);t.exports=n.parseFloat},function(t,r,e){var n=e(1),o=e(558);n({global:!0,forced:parseFloat!=o},{parseFloat:o})},function(t,r,e){var n=e(14),o=e(4),s=e(11),a=e(49),i=e(182).trim,d=e(146),u=s("".charAt),c=n.parseFloat,m=n.Symbol,v=m&&m.iterator,g=1/c(d+"-0")!=-1/0||v&&!o(function(){c(Object(v))});t.exports=g?function(b){var T=i(a(b)),k=c(T);return k===0&&u(T,0)=="-"?-0:k}:c},function(t,r,e){var n=e(560);t.exports=n},function(t,r,e){e(561);var n=e(12);t.exports=n.parseInt},function(t,r,e){var n=e(1),o=e(562);n({global:!0,forced:parseInt!=o},{parseInt:o})},function(t,r,e){var n=e(14),o=e(4),s=e(11),a=e(49),i=e(182).trim,d=e(146),u=n.parseInt,c=n.Symbol,m=c&&c.iterator,v=/^[+-]?0x/i,g=s(v.exec),b=u(d+"08")!==8||u(d+"0x16")!==22||m&&!o(function(){u(Object(m))});t.exports=b?function(T,k){var y=i(a(T));return u(y,k>>>0||(g(v,y)?16:10))}:u},function(t,r,e){var n=e(15),o=e(3),s=e(564),a=e(565),i=e(0).getGlobal(),d=e(74).name,u=typeof s=="function",c=i.indexedDB&&!/^(IE)$/.test(d);function m(g,b){this.logWorker=null,this.db=null,this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.initLogLocal({name:g,expire:b})}var v=m.prototype;m.enable=!0,v.saveLog=function(g){if(m.enable){var b,T=this.logQueue.length,k=this.logQueue[T-1];g.time!==this.preTime?((this.logQueue.length>50||g.time-this.lastTime>6e4&&this.logQueue.length>0)&&(this.doSaveLog(n(b=this.logQueue).call(b,0)),this.lastTime=k.time,this.logQueue=[]),this.logQueue.push(g),this.preTime=g.time):k.log+=`\r
`+g.log}},v.destroy=function(){this.logQueue=[]},v.doSaveLog=function(){},v.initLogLocal=function(){},v.fetchLog=function(){},v.deleteLogs=function(){},v.logError=function(){},c?u?(v.doSaveLog=function(g){this.logWorker.postMessage(g)},v.initLogLocal=function(g){var b=this;this.logWorker=new s({}),this.logWorker.onmessage=function(T){var k=T.data||{};switch(k.type){case"fetchDone":b.fetchLogDone(k.code,k.msg);break;case"error":b.logError(k.msg)}},this.logWorker.postMessage({type:"init",msg:g})},v.fetchLog=function(){var g=this;return new o(function(b,T){g.callbackList.length===0&&g.logWorker.postMessage({type:"fetch"}),g.callbackList.push(b),g.callbackList.push(T)})},v.fetchLogDone=function(g,b){for(var T=g===200?0:1,k=0;k<this.callbackList.length/2;k++)this.callbackList[2*k+T](b);this.callbackList=[]},v.deleteLogs=function(g){return this.logWorker.postMessage({type:"delete",msg:g}),o.resolve()}):(v.doSaveLog=function(g){var b=this;this.db.putLog(g).catch(function(T){b.logError({msg:"putLog error",error:T})})},v.initLogLocal=function(g){var b=this;this.db=new a(g),this.db.init().catch(function(T){b.logError({msg:"dbLog init error",error:T})})},v.fetchLog=function(){return this.db.getAllLogs()},v.deleteLogs=function(g){return this.db.deleteLogs(g)}):m.enable=!1,t.exports=m},function(t,r,e){e.r(r),e.d(r,"default",function(){return s});var n=e(296),o=e.n(n);function s(){return o()(`/*!
 * 
 * VERSION: 9.12.2
 * Git Hash: 4f80425748726d259a3375f1aa196861a10e6b77
 * 
 * Create At: 2023/8/4 下午4:18:45
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169),u={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var f=a.prototype;f.init=function(){var t=this;if(!this.server)return c.open({server:"nim-log-"+this.name,version:1,schema:u}).then((function(n){t.server=n}))},f.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},f.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},f.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=a},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),q=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},V=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=q(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)V(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=q(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){V(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=v.add(t,r)}else n=v.add(t);n.onsuccess=function(n){var r=n.target,e=r.source.keyPath;null===e&&(e="__id__"),p(t,e,{value:r.result,enumerable:!0})}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){var n=t.target.result;n&&(n.delete(),n.continue())});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,q=o.Symbol,V=q&&q.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(V);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(V=(q=function(){if(l(V,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(q,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(V,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:q}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(q,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`,"Worker",void 0,void 0)}},function(t,r,e){var n=e(3),o=e(15),s=e(8),a=e(302),i={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function d(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.server=null,this.expire=c.expire||72,this.name=c.name}var u=d.prototype;u.init=function(){var c=this;if(!this.server)return a.open({server:"nim-log-"+this.name,version:1,schema:i}).then(function(m){c.server=m})},u.putLog=function(c){var m=this;if(!this.server)return n.reject("no db server");var v=o(c).call(c,-1)[0].time-36e5*this.expire;return this.deleteLogs(v).then(function(){return m.server.add("log",c)})},u.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function(c){var m={},v=o(c).call(c,-1)[0];return m.logs=s(c).call(c,function(g){return g.log}).join(`\r
`),m.time=v&&v.time,m}):n.reject("no db server")},u.deleteLogs=function(c){return this.server?this.server.remove("log",null,"time",0,c):n.reject("no db server")},t.exports=d},function(t,r,e){e(251);var n=e(12);t.exports=n.setInterval},function(t,r,e){var n=e(21),o=e(568),s=Function.prototype;t.exports=function(a){var i=a.bind;return a===s||n(s,a)&&i===s.bind?o:i}},function(t,r,e){e(569);var n=e(30);t.exports=n("Function").bind},function(t,r,e){var n=e(1),o=e(272);n({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},function(t,r,e){var n=e(18),o=e(24),s=e(2),a=e(26),i=e(5),d=e(54),u=e(184);function c(g){g.onuploading&&this.on("uploading",g.onuploading),u.call(this,g)}var m=u.prototype,v=c.prototype=n(m);v.doSend=function(){var g,b,T,k=this.options,y=k.headers,A=this.xhr=new XMLHttpRequest;if(y["Content-Type"]==="multipart/form-data"){var V,Ce;delete y["Content-Type"],A.upload.onprogress=o(V=this.onProgress).call(V,this),A.upload.onload=o(Ce=this.onProgress).call(Ce,this);var ie,Oe=k.data;k.data=new window.FormData,Oe&&s(ie=d.getKeys(Oe,k.putFileAtEnd)).call(ie,function(ae){var Fe=Oe[ae];Fe.tagName&&Fe.tagName.toUpperCase()==="INPUT"?Fe.type==="file"&&s([]).call(Fe.files,function(ze){k.data.append(d.dataset(Fe,"name")||Fe.name||ze.name||"file-"+d.uniqueID(),ze)}):k.data.append(ae,Fe)})}else if(y["x-nos-token"]){var he,Y;A.upload.onprogress=o(he=this.onProgress).call(he,this),A.upload.onload=o(Y=this.onProgress).call(Y,this)}A.onreadystatechange=o(g=this.onStateChange).call(g,this),k.timeout!==0&&(this.timer=a(o(T=this.onTimeout).call(T,this),k.timeout)),A.open(k.method,k.url,!k.sync),s(b=i(y)).call(b,function(ae){A.setRequestHeader(ae,y[ae])}),k.cookie&&"withCredentials"in A&&(A.withCredentials=!0),A.send(k.data),this.afterSend()},v.onProgress=function(g){g.lengthComputable&&g.loaded<=g.total&&this.emit("uploading",g)},v.onStateChange=function(){var g,b=this.xhr;b.readyState===4&&(g={status:b.status,result:b.responseText||""},this.onLoad(g))},v.getResponseHeader=function(g){var b=this.xhr;return b?b.getResponseHeader(g):""},v.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=d.f,this.xhr.abort()}catch{}m.destroy.call(this)},t.exports=c},function(t,r,e){var n;/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(o){function s(){}var a=s.prototype,i=o.EventEmitter;function d(c,m){for(var v=c.length;v--;)if(c[v].listener===m)return v;return-1}function u(c){return function(){return this[c].apply(this,arguments)}}a.getListeners=function(c){var m,v,g=this._getEvents();if(c instanceof RegExp)for(v in m={},g)g.hasOwnProperty(v)&&c.test(v)&&(m[v]=g[v]);else m=g[c]||(g[c]=[]);return m},a.flattenListeners=function(c){var m,v=[];for(m=0;m<c.length;m+=1)v.push(c[m].listener);return v},a.getListenersAsObject=function(c){var m,v=this.getListeners(c);return v instanceof Array&&((m={})[c]=v),m||v},a.addListener=function(c,m){if(!function T(k){return typeof k=="function"||k instanceof RegExp||!(!k||typeof k!="object")&&T(k.listener)}(m))throw new TypeError("listener must be a function");var v,g=this.getListenersAsObject(c),b=typeof m=="object";for(v in g)g.hasOwnProperty(v)&&d(g[v],m)===-1&&g[v].push(b?m:{listener:m,once:!1});return this},a.on=u("addListener"),a.addOnceListener=function(c,m){return this.addListener(c,{listener:m,once:!0})},a.once=u("addOnceListener"),a.defineEvent=function(c){return this.getListeners(c),this},a.defineEvents=function(c){for(var m=0;m<c.length;m+=1)this.defineEvent(c[m]);return this},a.removeListener=function(c,m){var v,g,b=this.getListenersAsObject(c);for(g in b)b.hasOwnProperty(g)&&(v=d(b[g],m))!==-1&&b[g].splice(v,1);return this},a.off=u("removeListener"),a.addListeners=function(c,m){return this.manipulateListeners(!1,c,m)},a.removeListeners=function(c,m){return this.manipulateListeners(!0,c,m)},a.manipulateListeners=function(c,m,v){var g,b,T=c?this.removeListener:this.addListener,k=c?this.removeListeners:this.addListeners;if(typeof m!="object"||m instanceof RegExp)for(g=v.length;g--;)T.call(this,m,v[g]);else for(g in m)m.hasOwnProperty(g)&&(b=m[g])&&(typeof b=="function"?T.call(this,g,b):k.call(this,g,b));return this},a.removeEvent=function(c){var m,v=typeof c,g=this._getEvents();if(v==="string")delete g[c];else if(c instanceof RegExp)for(m in g)g.hasOwnProperty(m)&&c.test(m)&&delete g[m];else delete this._events;return this},a.removeAllListeners=u("removeEvent"),a.emitEvent=function(c,m){var v,g,b,T,k=this.getListenersAsObject(c);for(T in k)if(k.hasOwnProperty(T))for(v=k[T].slice(0),b=0;b<v.length;b++)(g=v[b]).once===!0&&this.removeListener(c,g.listener),g.listener.apply(this,m||[])===this._getOnceReturnValue()&&this.removeListener(c,g.listener);return this},a.trigger=u("emitEvent"),a.emit=function(c){var m=Array.prototype.slice.call(arguments,1);return this.emitEvent(c,m)},a.setOnceReturnValue=function(c){return this._onceReturnValue=c,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return o.EventEmitter=i,s},(n=(function(){return s}).call(o,e,o,t))===void 0||(t.exports=n)})(typeof window<"u"?window:this||{})},function(t,r,e){var n=e(18),o=e(6),s=e(2),a=e(24),i=e(87),d=e(54),u=e(184),c=e(273),m="NEJ-UPLOAD-RESULT:",v={};function g(k){this.init(),u.call(this,k)}var b=u.prototype,T=g.prototype=n(b);T.init=function(){var k=!1;function y(A){var V=A.data;if(o(V).call(V,m)===0){var Ce=(V=JSON.parse(V.replace(m,""))).key,ie=v[Ce];ie&&(delete v[Ce],V.result=decodeURIComponent(V.result||""),ie.onLoad(V.result))}}return function(){(function(){if(!k){k=!0;var A=d.getGlobal();A.postMessage?d.on(A,"message",y):(c.addMsgListener(y),c.startTimer())}})()}}(),T.doSend=function(){var k=this,y=k.options,A=k.key="zoro-ajax-upload-iframe-"+d.uniqueID();v[A]=k;var V=k.form=d.html2node('<form style="display:none;"></form>');typeof document>"u"||document.body.appendChild(V),V.target=A,V.method="POST",V.enctype="multipart/form-data",V.encoding="multipart/form-data";var Ce=y.url,ie=d.genUrlSep(Ce);V.action=Ce+ie+"_proxy_=form";var Oe,he=y.data,Y=[],ae=[];he&&s(Oe=d.getKeys(he,y.putFileAtEnd)).call(Oe,function(pe){var le=he[pe];if(le.tagName&&le.tagName.toUpperCase()==="INPUT"){if(le.type==="file"){var xe=le,ue=xe.cloneNode(!0);xe.parentNode.insertBefore(ue,xe);var Ve=d.dataset(xe,"name");Ve&&(xe.name=Ve),V.appendChild(xe),d.isFunction(xe.setAttribute)&&(xe.setAttribute("form",""),xe.removeAttribute("form")),Y.push(le),ae.push(ue)}}else{var Ue=d.html2node('<input type="hidden"/>');Ue.name=pe,Ue.value=le,V.appendChild(Ue)}});function Fe(){s(Y).call(Y,function(pe,le){var xe=ae[le];xe.parentNode&&(pe.name=xe.name,d.isFunction(pe.setAttribute)&&pe.setAttribute("form",xe.getAttribute("form")),xe.parentNode.replaceChild(pe,xe))})}var ze=k.iframe=d.createIframe({name:A,onload:function(){var pe;k.aborted?Fe():(d.on(ze,"load",a(pe=k.checkResult).call(pe,k)),V.submit(),Fe(),k.afterSend())}})},T.checkResult=function(){var k,y;try{var A,V;if(k=this.iframe.contentWindow.document.body,y=i(A=k.innerText||k.textContent||"").call(A),o(y).call(y,m)>=0||o(V=k.innerHTML).call(V,m)>=0)return}catch{return}this.onLoad(y)},T.onLoad=function(k){b.onLoad.call(this,{status:200,result:k}),d.remove(this.form),d.remove(this.iframe),b.destroy.call(this)},T.destroy=function(){d.remove(this.iframe),d.remove(this.form)},T.abort=function(){this.aborted=!0,delete v[this.key],b.abort.call(this)},t.exports=g},function(t,r,e){var n=e(574);t.exports=n},function(t,r,e){var n=e(21),o=e(575),s=String.prototype;t.exports=function(a){var i=a.trim;return typeof a=="string"||a===s||n(s,a)&&i===s.trim?o:i}},function(t,r,e){e(576);var n=e(30);t.exports=n("String").trim},function(t,r,e){var n=e(1),o=e(182).trim;n({target:"String",proto:!0,forced:e(577)("trim")},{trim:function(){return o(this)}})},function(t,r,e){var n=e(225).PROPER,o=e(4),s=e(146);t.exports=function(a){return o(function(){return!!s[a]()||"​᠎"[a]()!=="​᠎"||n&&s[a].name!==a})}},function(t,r,e){var n=e(18),o=e(6),s=e(24),a=e(2),i=e(54),d=e(273),u=e(184),c={};function m(b){this.init(),u.call(this,b)}var v=u.prototype,g=m.prototype=n(v);g.init=function(){var b="NEJ-AJAX-DATA:",T=!1;function k(y){var A=y.data;if(o(A).call(A,b)===0){var V=(A=JSON.parse(A.replace(b,""))).key,Ce=c[V];Ce&&(delete c[V],A.result=decodeURIComponent(A.result||""),Ce.onLoad(A))}}return function(){(function(){if(!T){T=!0;var y=i.getGlobal();y.postMessage?i.on(y,"message",k):d.addMsgListener(k)}})()}}(),g.doSend=function(){var b=this.options,T=i.url2origin(b.url),k=b.proxyUrl||T+"/res/nej_proxy_frame.html",y=c[k];if(i.isArray(y)){var A;y.push(s(A=this.doSend).call(A,this,b))}else{var V;if(!y)return c[k]=[s(V=this.doSend).call(V,this,b)],void i.createIframe({src:k,onload:function(Oe){var he=c[k];c[k]=i.target(Oe).contentWindow,a(he).call(he,function(Y){try{Y()}catch{}})}});if(!this.aborted){var Ce=this.key=i.uniqueID();c[Ce]=this;var ie=i.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},b);ie.key=Ce,d.postMessage(y,{data:ie}),this.afterSend()}}},g.abort=function(){this.aborted=!0,delete c[this.key],v.abort.call(this)},t.exports=m},function(t,r,e){var n,o,s=e(10),a=e(54),i=e(116),d=(n=/json/i,o=/post/i,function(u,c){var m=(c=c||{}).data=c.data||{},v=c.headers=c.headers||{},g=a.checkWithDefault(v,"Accept","application/json"),b=a.checkWithDefault(v,"Content-Type","application/json");return n.test(g)&&(c.type="json"),o.test(c.method)&&n.test(b)&&(c.data=s(m)),i(u,c)});t.exports=d},function(t,r,e){var n=e(5),o=e(17),s=e(6),a=e(2),i=e(7),d=e(15),u=e(26);t.exports={wrapSafeCallback:function(c,m){if(!c.__wrapSafeCallback__){c.__wrapSafeCallback__=!0;var v=n(c);return v=o(v).call(v,function(g){return s(g).call(g,"on")===0&&Object.prototype.toString.call(c[g])==="[object Function]"}),a(v).call(v,function(g){var b=c[g];c[g]=function(){var T=this;try{var k;return b.call.apply(b,i(k=[this]).call(k,d(Array.prototype).call(arguments)))}catch(A){var y;this.logger.error(i(y="wrapSafeCallback. CallbackName: ".concat(g,". Error: ")).call(y,A)),u(function(){var V;throw T.logger.error(i(V="wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(g,". Error: ")).call(V,A)),A},0),m.logger&&m.logger.error("userOption:".concat(g," function error"),A)}}}),c}}}},function(t,r,e){var n=e(582);t.exports=n},function(t,r,e){e(583);var n=e(12);t.exports=n.Date.now},function(t,r,e){var n=e(1),o=e(11),s=Date,a=o(s.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new s)}})},function(t,r,e){var n=e(73).fn,o=e(23).reportAPI;n.isConnected=function(){return o({instance:this,className:"ApiBaseFn",funcName:"isConnected",hasCallback:!1}),!!this.protocol&&this.protocol.isConnected()},n.connect=function(){o({instance:this,className:"ApiBaseFn",funcName:"connect",hasCallback:!1}),this.protocol.connect()},n.disconnect=function(){}},function(t,r,e){var n=e(25),o=e(10),s=e(24),a=e(8),i=e(41),d=e(15),u=e(139),c=e(87),m=e(6),v=e(52),g=e(26),b=e(9),T=e(32),k=e(2),y=e(7),A=e(5),V=e(59),Ce=e(17),ie=e(60),Oe=e(61),he=e(62),Y=e(47),ae=e(58),Fe=e(120),ze=["loc_x","loc_y","loc_z"];function pe(Ne,or){var ir=A(Ne);if(V){var $e=V(Ne);or&&($e=Ce($e).call($e,function(tr){return ie(Ne,tr).enumerable})),ir.push.apply(ir,$e)}return ir}function le(Ne){for(var or=1;or<arguments.length;or++){var ir,$e,tr=arguments[or]!=null?arguments[or]:{};or%2?k(ir=pe(Object(tr),!0)).call(ir,function(nr){ae(Ne,nr,tr[nr])}):Oe?he(Ne,Oe(tr)):k($e=pe(Object(tr))).call($e,function(nr){Y(Ne,nr,ie(tr,nr))})}return Ne}var xe=e(73).fn,ue=e(0),Ve=e(604),Ue=e(40),er=e(13),At=e(275),ur=e(276),pr=e(283),ar=e(105).EMExceptionState,hr=e(23).reportAPI;xe.sendText=function(Ne){(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendText",async:!0,done:Ne.done});var or=Ne,ir=or.loc_x,$e=or.loc_y,tr=or.loc_z,nr=Fe(or,ze);return ir===void 0||$e===void 0||tr===void 0?Ne=le({},nr):(typeof Ne.loc_x!="number"&&(Ne.loc_x=0),typeof Ne.loc_y!="number"&&(Ne.loc_y=0),typeof Ne.loc_z!="number"&&(Ne.loc_z=0)),this.processCallback(Ne),Ne.msg=new this.message.TextMessage(Ne),this.sendMsg(Ne)},xe.previewFile=function(Ne,or){var ir;(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"previewFile",done:Ne.done});var $e=this,tr=$e.protocol.appGrayConfig;if(tr&&tr.grayConfig&&tr.grayConfig.mixStoreEnable&&(Ne.mixEnable=!0),ue.verifyOptions(Ne,"done","msg::previewFile"),Ne.type||(Ne.type="file"),ue.verifyParamPresentJustOne(Ne,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),ue.exist(Ne.maxSize)&&ue.verifyParamType("maxSize",Ne.maxSize,"number","api::previewFile"),ue.exist(Ne.commonUpload)&&ue.verifyParamType("commonUpload",Ne.commonUpload,"boolean","api::previewFile"),Ne.nosSurvivalTime?(ue.verifyParamType("nosSurvivalTime",Ne.nosSurvivalTime,"number","api::Base.getInstance"),ue.verifyParamMin("nosSurvivalTime",Ne.nosSurvivalTime,86400,"api::Base.getInstance")):Ne.nosSurvivalTime=this.nosSurvivalTime,Ne.filePath=Ne.filePath||Ne.wxFilePath,delete Ne.wxFilePath,Ne.dataURL)Ne.blob=pr.fromDataURL(Ne.dataURL);else if(!Ne.blob){if(Ne.fileInput){if(Ne.fileInput=ue.verifyFileInput(Ne.fileInput,"msg::previewFile"),Ne.fileInput.files){if(!Ne.fileInput.files.length)return void Ne.done(Ue.newNoFileError("请选择"+Ne.type+"文件",{callFunc:"msg::previewFile",fileInput:Ne.fileInput}),Ne);Ne.fileSize=Ne.fileInput.files[0].size}Ne.fileInputName=ue.getFileName(Ne.fileInput)}}this.processCallback(Ne);var nr=o(At.genResponseBody(Ne.type)||{}).replace(/"/gi,'\\"'),Pt=null,Et=Ne.transcode?"getNosTokenTrans":"getNosToken";if(Ne.transcode){ue.verifyOptions(Ne,"fileInput","msg::previewFile");var kt=ue.getFileInfo(Ne.fileInput);Pt={transToken:{name:kt.name,type:kt.transcodeType,transType:Ne.transcode==="png"?11:10,size:kt.size,body:nr}}}else Pt=nr;this[Et]({responseBody:Pt,nosToken:{nosScene:Ne.nosScene||this.nosScene,nosSurvivalTime:Ne.nosSurvivalTime},callback:s(ir=function(rr,cr){if(rr)Ne.done(rr);else if(Ne.transcode?(Ne.nosToken=cr.nosToken,Ne.docId=cr.docId):Ne.nosToken=cr,Ne.logger=$e.logger,Ne.mixEnable){var mr,yr;if(!this.protocol.mixStorePolicy)try{this.protocol.mixStorePolicy=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey]}catch(Tr){$e.logger.error("error:","get last mixStorePolicy failed",Tr)}if(!this.protocol.mixStorePolicy)return void $e.logger.error("error:","get mixStorePolicy failed");Ne.providers=a(mr=this.protocol.mixStorePolicy.providers||[]).call(mr,function(Tr){return Number(Tr)}),Ne.curProvider=Ne.providers[0]?Number(Ne.providers[0]):1,Ne.nosPolicy=this.protocol.mixStorePolicy.nosPolicy,Ne.s3Policy=this.protocol.mixStorePolicy.s3Policy,$e.getMixStoreToken({curProvider:Ne.curProvider,responseBody:Pt,callback:s(yr=function(Tr,Ir){Tr?Ne.done(Tr):(Ne.mixStoreToken=Ir,Ne.getMixStoreToken=function(kr,Ar){$e.getMixStoreToken({curProvider:kr,responseBody:Pt,callback:function(Rr,Mn){Rr?Ne.done(Rr):Ar(Mn)}})},Ne.curProvider===1&&(Ne.nosToken=Ir),$e._doPreviewFile(Ne,or))}).call(yr,$e)})}else this._doPreviewFile(Ne,or)}).call(ir,this)})},xe._doPreviewFile=function(Ne,or){var ir=this;Ne=ue.merge(Ne,ir.options.providers);var $e=er.genUploadUrl(Ne.nosToken.bucket);Ne.mixEnable&&Ne.curProvider===1&&($e=er.genUploadUrl(Ne.mixStoreToken.bucket));var tr,nr=er.chunkUploadUrl;ir.logger.info("_doPreviewFile: start upload"),Ne.commonUpload||!nr||er.isWeixinApp||er.isNodejs||er.isRN?(Ne.commonUpload=!0,tr=$e):(tr=nr,Ne.nosLbsUrls=er.nosLbsUrls,ir.options.edgeList?Ne.edgeList=ir.options.edgeList:Ne.updateNosEdgeList=function(cr){ir.options.edgeList=cr}),ir.protocol.reporterHook.emit("reporter/uploadStart");var Pt=this.assembleUploadParams(Ne.nosToken);Ne.mixEnable&&Ne.curProvider===1&&(Pt=this.assembleUploadParams(Ne.mixStoreToken));function Et(cr,mr,yr,Tr){if(cr){var Ir=ue.get(cr,"msg.message")||ue.get(cr,"message")||"Unknown error message",kr=ue.get(cr,"msg.code")||ue.get(cr,"code")||"Unknown error code";ir.logger.warn("_doPreviewFile: upload done, failed ",kr,Ir),ir.protocol.reporterHook.emit("reporter/uploadEnd",cr.code==="RequestAbortedError"||cr.code==="abort"?ar.kCanceled:ar.kFailed);var Ar=i({},Tr||or,{status:"fail"}),Rr=le(le({},Ne.callback.options),{},{msg:Ar});return Ne.uploaddone&&Ne.uploaddone(cr,Rr,Ar),void Ne.done(cr,Ne.callback.options)}if(ir.logger.info("_doPreviewFile: upload done, success"),ir.protocol.reporterHook.emit("reporter/uploadEnd",ar.kSucceed),Ne.uploaddone&&Ne.uploaddone(null,ue.copy(mr),Tr||or),mr=At.parseResponse(mr,ir.options.exifOrientation),yr||mr.isS3||(mr.url=er.genDownloadUrl(Ne.nosToken,Pt.Object,er.serverNosConfig.cdnDomain),Ne.nosToken.shortUrl&&(mr._url_safe=Ne.nosToken.shortUrl)),ue.exist(Ne.fileInputName))mr.name=Ne.fileInputName;else if(Ne.blob){var Mn=Ne.blob.name;if(mr.name=Mn||"blob-"+mr.md5,!Mn){var Or=Ne.blob.type;mr.ext=d(Or).call(Or,u(Or).call(Or,"/")+1)}}else Ne.filePath?mr.name=Ne.filePath:Ne.fileObject&&(mr.name=Ne.fileObject.fileName);if(!mr.ext){var Pr,Nr,Wr=u(Pr=mr.name).call(Pr,".");Wr===-1?mr.ext="unknown":mr.ext=d(Nr=mr.name).call(Nr,Wr+1)}mr.size=mr.size||0,mr.isS3&&mr._url_safe?ir.getNosOriginUrl({safeShortUrl:mr._url_safe,done:function(Yr,Ur){Yr?ir.logger.error("error:","getNosOriginUrl failed",Yr):(mr.url=Ur,Ne.done(null,ue.copy(mr)))}}):Ne.done(null,ue.copy(mr))}if(er.isWeixinApp)ue.verifyOptions(Ne,"filePath","msg::_doPreviewFile"),ir.fileQuickTransfer(Ne,Et,function(){var cr=wx.uploadFile({url:tr,filePath:Ne.filePath,name:"file",formData:Pt,fail:function(mr){Et({code:"FAILED",msg:mr}),ir.logger.error("error:","api::msg:upload file failed",mr)},success:function(mr){if(mr.statusCode===200)try{Et(null,JSON.parse(mr.data))}catch(yr){ir.logger.error("error:","parse wx upload file res error",yr),Et({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:mr.data,msg:mr.errMsg})}else Et({code:mr.statusCode,msg:mr.errMsg})}});typeof Ne.uploadprogress=="function"&&cr&&(Ne.beginupload(cr,or),ir.logger.info("_doPreviewFile::mini uploadprogress"),cr.onProgressUpdate(function(mr){Ne.uploadprogress({total:mr.totalBytesExpectedToSend,loaded:mr.totalBytesSent,percentage:mr.progress,percentageText:mr.progress+"%"},or)}))});else if(er.isNodejs){var kt={url:tr,name:"file",formData:Pt,success:function(cr){if(cr.statusCode===200)try{Et(null,JSON.parse(cr.data))}catch(mr){ir.protocol.logger.error("error:","parse nodejs upload file res error",mr),Et({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:cr.data,msg:cr.errMsg})}else Et({code:cr.statusCode,msg:cr.errMsg})},fail:function(cr){Et({code:"FAILED",msg:cr}),ir.protocol.logger.error("error:","api::msg:upload file failed",cr)}};if(Ne.filePath)kt.filePath=Ne.filePath;else{if(n(Ne.fileObject)!=="object")throw new Ue("Nodejs上传fileObject参数类型应如 {fileName:..,fileData:..} ");kt.fileData=Ne.fileObject.fileData}ir.fileQuickTransfer(Ne,Et,function(){ur.uploadFile(kt)})}else if(er.isRN){var rr={url:tr,name:"file",formData:Pt,filePath:Ne.filePath,success:function(cr){if(cr.ok&&cr.status===200)try{var mr=a(cr.headers)&&a(cr.headers).etag;cr.md5=mr?typeof mr=="string"?mr:mr[0]:"UNKNOWN",Et(null,cr)}catch(yr){ir.protocol.logger.error("error:","parse React Native upload file res error",yr),Et({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:cr})}else Et({code:cr.status,msg:cr.statusText})},fail:function(cr){Et({code:"FAILED",msg:cr}),ir.protocol.logger.error("error:","api::msg:upload file failed",cr)}};ir.fileQuickTransfer(Ne,Et,function(){ur.uploadFile(rr)})}else Ne.url=tr,Ne.params=Pt,Ne.fileName="file",ir.fileQuickTransfer(Ne,Et,function(){return ir.protocol.adaptersUploadFile(i({},Ne,{uploaddone:Et}),or)})},xe.fileQuickTransfer=function(Ne,or,ir){var $e,tr=this;Ne=Ne||{},or instanceof Function||(or=function(){}),ir instanceof Function||(ir=function(){});var nr=Ne.fastPass;if(nr)try{nr=JSON.parse(nr),Ne.fastPass=nr}catch{tr.protocol.logger.error("快传参数解析失败")}var Pt=Ne.fileInputName||Ne.name||Ne.blob&&Ne.blob.name||"",Et=Ne.fileSize||Ne.size||Ne.blob&&Ne.blob.size||0,kt=nr?c($e=(nr.md5||Ne.digest||"")+"").call($e):"",rr=Ne.type||Ne.blob&&Ne.blob.type;if(kt&&Et>=er.threshold){var cr=!0,mr={name:Pt,md5:kt,ext:d(Pt).call(Pt,u(Pt).call(Pt,".")+1),type:rr};switch(rr){case"image":nr&&nr.w&&nr.h?(mr.w=nr.w,mr.h=nr.h):(cr=!1,tr.protocol.logger.error("快传 image 文件缺少参数 w 或 h"));break;case"video":nr&&nr.w&&nr.h&&nr.dur?(mr.w=nr.w,mr.h=nr.h,mr.dur=nr.dur):(cr=!1,tr.protocol.logger.error("快传 video 文件缺少参数 w 或 h 或 dur"));break;case"audio":nr&&nr.dur?mr.dur=nr.dur:(cr=!1,tr.protocol.logger.error("快传 audio 文件缺少参数 dur"))}if(!cr)return void ir();var yr={fileQuickTransfer:{md5:kt}};return Et&&(yr.fileQuickTransfer.size=Et),this.protocol.sendCmd("fileQuickTransfer",yr,function(Tr,Ir,kr){!Tr&&kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.url||(tr.protocol.logger.error("misc::fileQuickTransfer: not found",Tr,Ir),ir()),kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.threshold&&(er.threshold=kr.fileQuickTransfer.threshold||0),kr&&kr.fileQuickTransfer&&kr.fileQuickTransfer.url&&(mr.size=Et||kr.fileQuickTransfer.size,mr.url=kr.fileQuickTransfer.url,kr.fileQuickTransfer._url_safe&&(mr._url_safe=kr.fileQuickTransfer._url_safe),or(Tr,mr,!0))})}ir()},xe.sendFile=function(Ne){if((Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendFile",done:Ne.done}),Ne.type||(Ne.type="file"),Ne=ue.merge(Ne,this.options.providers),ue.verifyParamPresentJustOne(Ne,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),ue.exist(Ne.maxSize)&&ue.verifyParamType("maxSize",Ne.maxSize,"number","api::previewFile"),ue.exist(Ne.commonUpload)&&ue.verifyParamType("commonUpload",Ne.commonUpload,"boolean","api::previewFile"),this.processCallback(Ne),Ne.filePath=Ne.filePath||Ne.wxFilePath,delete Ne.wxFilePath,Ne.dataURL)return this._previewAndSendFile(Ne);if(Ne.blob)return this._previewAndSendFile(Ne);if(Ne.fileInput)return Ne.fileInput=ue.verifyFileInput(Ne.fileInput,"msg::sendFile"),Ne.fileInput.files&&!Ne.fileInput.files.length?void Ne.done(Ue.newNoFileError("请选择"+Ne.type+"文件",{callFunc:"msg::sendFile",fileInput:Ne.fileInput}),Ne.callback.options):this._previewAndSendFile(Ne);if(Ne.filePath||Ne.fileObject)return this._previewAndSendFile(Ne);if(Ne.file){var or,ir=Ne.file._url_safe;return ir&&(or=Ne.file.url,Ne.file.url=ir,delete Ne.file._url_safe),Ne.msg=new this.message.FileMessage(Ne),this.sendMsg(Ne,or)}},xe._previewAndSendFile=function(Ne){var or=this;ue.verifyCallback(Ne,"uploaddone beforesend","msg::_previewAndSendFile");var ir=le({},Ne),$e=new or.message.Message(ir);$e.type=Ne.type;var tr=or.formatReturnMsg($e),nr=or.protocol.reporterHook.getSafeClock(),Pt={apiCallingTime:or.protocol.reporterHook.getNTPTime(nr),attachUploadDuration:0},Et=Ne.done;return Ne.done=function(kt,rr){if(Ne.done=Et,kt){var cr=i({},tr,{status:"fail"}),mr=le(le({},Ne.callback.options),{},{msg:cr});Ne.done(kt,mr)}else{if(Pt.attachUploadDuration=or.protocol.reporterHook.getSafeClock()-nr,/chatroom/.test(Ne.scene))return;var yr,Tr=rr._url_safe;Tr&&!rr.isS3&&(yr=rr.url,rr.url=Tr,delete rr._url_safe),Ne.file=rr,Ne.msg=new or.message.FileMessage(Ne,$e.idClient),Ne.beforesend(or.sendMsg(Ne,yr,Pt))}},or.previewFile(Ne,tr),tr},xe.assembleUploadParams=function(Ne){return Ne?{Object:decodeURIComponent(Ne.objectName),"x-nos-token":Ne.token,"x-nos-entity-type":"json"}:null},xe.deleteFile=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"deleteFile",hasCallback:!1}),ue.verifyParamPresentJustOne(Ne,"docId","msg::deleteFile"),this.removeFile({docId:Ne.docId,callback:function(or,ir){or?Ne.error&&Ne.error(or,ir):Ne.success&&Ne.success(ir)}})},xe.getFile=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"getFile",hasCallback:!1}),ue.verifyParamPresentJustOne(Ne,"docId","msg::getFile"),this.fetchFile({docId:Ne.docId,callback:function(or,ir){or?Ne.error&&Ne.error(or,ir):Ne.success&&Ne.success(ir.info)}})},xe.getFileList=function(Ne){hr({instance:this,className:"ApiBaseFn",funcName:"getFileList",hasCallback:!1});var or=Ne.fromDocId,ir=or===void 0?"":or,$e=Ne.limit,tr=$e===void 0?10:$e,nr={limit:tr};ir&&(nr.fromDocId=ir),this.fetchFileList({fileListParam:nr,callback:function(Pt,Et){Pt?(tr>30&&(Pt.message=Pt.message+"::文档条数超过限制:30"),Ne.error&&Ne.error(Pt,Et)):Ne.success&&Ne.success(Et)}})},xe.sendGeo=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendGeo",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.GeoMessage(Ne),this.sendMsg(Ne)},xe.sendTipMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendTipMsg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.TipMessage(Ne),this.sendMsg(Ne)},xe.sendCustomMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendCustomMsg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.CustomMessage(Ne),this.sendMsg(Ne)},xe.sendRobotMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"sendRobotMsg",done:Ne.done}),this.logger.warn("this api will be abandon"),this.processCallback(Ne),Ne.msg=new this.message.RobotMessage(Ne),this.sendMsg(Ne)},xe.sendMsg=function(Ne,or,ir){var $e=this,tr=$e.protocol,nr=Ne.msg,Pt={};ir=ir||{apiCallingTime:tr.reporterHook.getNTPTime(),attachUploadDuration:0};var Et,kt=!!Ne.isLocal;if(this.logger.warn("sendMsg::start: "+nr.idClient),kt&&(Ne.time&&(nr.time=Ne.time),Ne.idClient&&(nr.idClient=Ne.idClient),Ne.localFrom&&(Et=Ne.localFrom+"")),Ne.resend&&(Ne.flow!=="out"||Ne.status!=="fail"))return ue.onError("只能重发发送失败的消息");Ne.callback.options.idClient=nr.idClient,$e.beforeSendMsg(Ne,Pt);var rr=Ne.rtnMsg=$e.formatReturnMsg(nr,Et);if(or&&!$e.options.keepNosSafeUrl&&rr.file&&(rr.file._url_safe=rr.file.url,rr.file.url=or,rr.type==="audio"&&(rr.file.mp3Url=or+(~m(or).call(or,"?")?"&":"?")+"audioTrans&type=mp3")),rr.hasOwnProperty("chatroomId")&&!rr.chatroomId)return ue.onError("聊天室未连接");if(kt&&(rr.status="success",rr.isLocal=!0),tr.storeSendMsg&&(Pt.promise=tr.storeSendMsg(rr)),Ne.cbaop=function(mr,yr){if(mr)return mr.code===7101&&(rr.isInBlackList=!0,rr.idServer=yr.idServer,rr.time=yr.time),mr.from!=="server"?(rr.status="fail",tr.updateSendMsgError&&tr.updateSendMsgError(rr),rr):void 0},!kt){or&&!$e.options.keepNosSafeUrl&&Ne.callback&&(Ne.callback.originUrl=or),Ne.toAccids&&Ne.toAccids.length&&(nr.toAccids=o(Ne.toAccids)),Pt.msg=nr,ir.sendTime=tr.reporterHook.getNTPTime(),tr.reporterHook.hasOriginTimetick()&&(Pt.msg.__clientExt=o({statistics:ir}));var cr=nr;$e.sendCmd(Ne.cmd,Pt,function(){if(er.isBrowser){var mr=arguments[0],yr=arguments[1]||{},Tr=$e.subType==="chatroom",Ir=cr.scene===0,kr=tr.reporterHook.getNTPTime(),Ar={msgId:yr.idServer,clientId:cr.idClient,msgTime:yr.time||0,fromAccid:$e.account,toAccid:Ir?cr.to:"",type:Tr?4:cr.scene,roomId:Tr?$e.options.chatroomId:"",tid:Tr||Ir?"":cr.to,result:mr?mr.code:200,failReason:mr?mr.message:"",rt:v(kr-ir.apiCallingTime),apiCallingTime:ir.apiCallingTime,sendTime:ir.sendTime,attachUploadDuration:ir.attachUploadDuration,apiCallbackTime:kr};$e.reporter&&$e.reporter.report("msgSend",Ar)}Ne.callback&&Ne.callback.apply($e,arguments);var Rr=arguments[0],Mn=arguments[1];!Rr&&Mn&&Mn.from===Mn.to&&$e.protocol.markMsgRead(Mn)})}return $e.afterSendMsg(Ne),kt&&g(function(){rr=ue.simpleClone(rr),Ne.done(null,rr)},0),ue.copy(rr)},xe.beforeSendMsg=function(){},xe.afterSendMsg=function(){},xe.formatReturnMsg=function(Ne,or){var ir;return Ne=ue.copy(Ne),this.protocol.completeMsg(Ne),Ne.status="sending",or&&(Ne.from=or),Ne=b(ir=this.message).call(ir,Ne),Ne=this.protocol.amendMsg(Ne)},xe.resendMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"resendMsg",done:Ne.done}),ue.verifyOptions(Ne,"msg","msg::resendMsg"),this.trimMsgFlag(Ne),Ne.resend=!0,this._sendMsgByType(Ne)},xe.forwardMsg=function(Ne){return(Ne=Ne||{}).done=hr({instance:this,className:"ApiBaseFn",funcName:"forwardMsg",done:Ne.done}),ue.verifyOptions(Ne,"msg","msg::forwardMsg"),this.trimMsgFlag(Ne),this.beforeForwardMsg(Ne),Ne.forward=!0,Ne.msg.idClient=ue.guid(),this._sendMsgByType(Ne)},xe.trimMsgFlag=function(Ne){Ne&&Ne.msg&&(Ne.msg=ue.copy(Ne.msg),delete Ne.msg.resend,delete Ne.msg.forward)},xe.beforeForwardMsg=function(){},xe._sendMsgByType=function(Ne){switch(ue.verifyOptions(Ne,"msg","msg::_sendMsgByType"),ue.verifyParamValid("msg.type",Ne.msg.type,this.message.validTypes,"msg::_sendMsgByType"),ue.merge(Ne,Ne.msg),Ne.type){case"text":return this.sendText(Ne);case"image":case"audio":case"video":case"file":return this.sendFile(Ne);case"geo":return this.sendGeo(Ne);case"custom":return this.sendCustomMsg(Ne);case"tip":return this.sendTipMsg(Ne);default:throw new Ue("不能发送类型为 "+Ne.type+" 的消息")}},xe.parseRobotTemplate=function(Ne){if(this.logger.warn("this api will be abandon"),/<template[^>/]+\/>/.test(Ne))return{raw:Ne,json:[{type:"text",name:"",text:""}]};if(!/<template[^>/]+>/.test(Ne))return{raw:Ne,json:[{type:"text",name:"",text:Ne}]};var or=new Ve({escapeMode:!1});Ne=Ne.replace(/<template [^>]+>/,"<template>");var ir=or.xml2js(Ne);ir=ir.template.LinearLayout,T(ir)||(ir=[ir]);var $e=[];return ir=k(ir).call(ir,function(Pt){Pt.image&&($e=y($e).call($e,nr(Pt))),Pt.text&&($e=y($e).call($e,tr(Pt))),Pt.link&&($e=y($e).call($e,function(Et){if(Et.link){var kt=Et.link;T(kt)||(kt=[kt]),kt=a(kt).call(kt,function(rr){return rr.image&&(rr.image=nr(rr)),rr.text&&(rr.text=tr(rr)),rr._type==="url"?(rr.type="url",rr.style=rr._style||"",rr.target=rr._target,delete rr._target,delete rr._style):rr._type==="block"&&(rr.type="block",rr.style=rr._style||"",rr.params=rr._params||"",rr.target=rr._target,delete rr._params,delete rr._target,delete rr._style),delete rr._type,rr}),Et.link=kt}return Et.link}(Pt)))}),{raw:Ne,json:$e};function tr(Pt){var Et;return T(Pt.text)||(Pt.text=[Pt.text]),Pt.text=a(Et=Pt.text).call(Et,function(kt){return{type:"text",name:kt._name,text:kt.__text}}),Pt.text}function nr(Pt){var Et;return T(Pt.image)||(Pt.image=[Pt.image]),Pt.image=a(Et=Pt.image).call(Et,function(kt){return{type:"image",name:kt._name,url:kt._url}}),Pt.image}}},function(t,r,e){e(587);var n=e(12);t.exports=n.Object.assign},function(t,r,e){var n=e(1),o=e(588);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},function(t,r,e){var n=e(27),o=e(11),s=e(19),a=e(4),i=e(118),d=e(132),u=e(148),c=e(42),m=e(124),v=Object.assign,g=Object.defineProperty,b=o([].concat);t.exports=!v||a(function(){if(n&&v({b:1},v(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var T={},k={},y=Symbol();return T[y]=7,"abcdefghijklmnopqrst".split("").forEach(function(A){k[A]=A}),v({},T)[y]!=7||i(v({},k)).join("")!="abcdefghijklmnopqrst"})?function(T,k){for(var y=c(T),A=arguments.length,V=1,Ce=d.f,ie=u.f;A>V;)for(var Oe,he=m(arguments[V++]),Y=Ce?b(i(he),Ce(he)):i(he),ae=Y.length,Fe=0;ae>Fe;)Oe=Y[Fe++],n&&!s(ie,he,Oe)||(y[Oe]=he[Oe]);return y}:v},function(t,r,e){var n=e(21),o=e(590),s=Array.prototype;t.exports=function(a){var i=a.reverse;return a===s||n(s,a)&&i===s.reverse?o:i}},function(t,r,e){e(591);var n=e(30);t.exports=n("Array").reverse},function(t,r,e){var n=e(1),o=e(11),s=e(79),a=o([].reverse),i=[1,2];n({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a(this)}})},function(t,r,e){t.exports=e(593)},function(t,r,e){t.exports=e(594)},function(t,r,e){var n=e(595);t.exports=n},function(t,r,e){var n=e(253);t.exports=n},function(t,r,e){t.exports=e(597)},function(t,r,e){var n=e(598);t.exports=n},function(t,r,e){var n=e(205);t.exports=n},function(t,r,e){var n=e(600),o=e(185);t.exports=function(s,a){if(s==null)return{};var i,d,u={},c=n(s);for(d=0;d<c.length;d++)i=c[d],o(a).call(a,i)>=0||(u[i]=s[i]);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(601)},function(t,r,e){t.exports=e(602)},function(t,r,e){var n=e(603);t.exports=n},function(t,r,e){var n=e(229);t.exports=n},function(t,r,e){var n,o,s;(function(a,i){o=[],(s=typeof(n=function(d){return function(u){(u=u||{}).arrayAccessForm=u.arrayAccessForm||"none",u.emptyNodeForm=u.emptyNodeForm||"text",u.jsAttributeFilter=u.jsAttributeFilter,u.jsAttributeConverter=u.jsAttributeConverter,u.attributeConverters=u.attributeConverters||[],u.datetimeAccessFormPaths=u.datetimeAccessFormPaths||[],u.arrayAccessFormPaths=u.arrayAccessFormPaths||[],u.xmldomOptions=u.xmldomOptions||{},u.enableToStringFunc===void 0&&(u.enableToStringFunc=!0),u.skipEmptyTextNodesForObj===void 0&&(u.skipEmptyTextNodesForObj=!0),u.stripWhitespaces===void 0&&(u.stripWhitespaces=!0),u.useDoubleQuotes===void 0&&(u.useDoubleQuotes=!0),u.ignoreRoot===void 0&&(u.ignoreRoot=!1),u.escapeMode===void 0&&(u.escapeMode=!0),u.attributePrefix===void 0&&(u.attributePrefix="_"),u.selfClosingElements===void 0&&(u.selfClosingElements=!0),u.keepCData===void 0&&(u.keepCData=!1),u.keepText===void 0&&(u.keepText=!1),u.jsDateUTC===void 0&&(u.jsDateUTC=!1),function(){function xe(ue){var Ve=String(ue);return Ve.length===1&&(Ve="0"+Ve),Ve}typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),typeof Date.prototype.toISOString!="function"&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+xe(this.getUTCMonth()+1)+"-"+xe(this.getUTCDate())+"T"+xe(this.getUTCHours())+":"+xe(this.getUTCMinutes())+":"+xe(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var c=1,m=3,v=4,g=8,b=9;function T(xe){var ue=xe.localName;return ue==null&&(ue=xe.baseName),ue!=null&&ue!==""||(ue=xe.nodeName),ue}function k(xe){return typeof xe=="string"?xe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):xe}function y(xe,ue,Ve){switch(u.arrayAccessForm){case"property":xe[ue]instanceof Array?xe[ue+"_asArray"]=xe[ue]:xe[ue+"_asArray"]=[xe[ue]]}if(!(xe[ue]instanceof Array)&&u.arrayAccessFormPaths.length>0){for(var Ue=!1,er=0;er<u.arrayAccessFormPaths.length;er++){var At=u.arrayAccessFormPaths[er];if(typeof At=="string"){if(At===Ve){Ue=!0;break}}else if(At instanceof RegExp){if(At.test(Ve)){Ue=!0;break}}else if(typeof At=="function"&&At(ue,Ve)){Ue=!0;break}}Ue&&(xe[ue]=[xe[ue]])}}function A(xe){var ue=xe.split(/[-T:+Z]/g),Ve=new Date(ue[0],ue[1]-1,ue[2]),Ue=ue[5].split(".");if(Ve.setHours(ue[3],ue[4],Ue[0]),Ue.length>1&&Ve.setMilliseconds(Ue[1]),ue[6]&&ue[7]){var er=60*ue[6]+Number(ue[7]);er=0+((/\d\d-\d\d:\d\d$/.test(xe)?"-":"+")=="-"?-1*er:er),Ve.setMinutes(Ve.getMinutes()-er-Ve.getTimezoneOffset())}else xe.indexOf("Z",xe.length-1)!==-1&&(Ve=new Date(Date.UTC(Ve.getFullYear(),Ve.getMonth(),Ve.getDate(),Ve.getHours(),Ve.getMinutes(),Ve.getSeconds(),Ve.getMilliseconds())));return Ve}function V(xe,ue){for(var Ve={__cnt:0},Ue=xe.childNodes,er=0;er<Ue.length;er++){var At=Ue.item(er),ur=T(At);At.nodeType!==g&&(Ve.__cnt++,Ve[ur]==null?(Ve[ur]=Ce(At,ue+"."+ur),y(Ve,ur,ue+"."+ur)):(Ve[ur]instanceof Array||(Ve[ur]=[Ve[ur]],y(Ve,ur,ue+"."+ur)),Ve[ur][Ve[ur].length]=Ce(At,ue+"."+ur)))}for(var pr=0;pr<xe.attributes.length;pr++){var ar=xe.attributes.item(pr);Ve.__cnt++;for(var hr=ar.value,Ne=0;Ne<u.attributeConverters.length;Ne++){var or=u.attributeConverters[Ne];or.test.call(null,ar.name,ar.value)&&(hr=or.convert.call(null,ar.name,ar.value))}Ve[u.attributePrefix+ar.name]=hr}var ir=xe.prefix;return ir&&(Ve.__cnt++,Ve.__prefix=ir),Ve["#text"]&&(Ve.__text=Ve["#text"],Ve.__text instanceof Array&&(Ve.__text=Ve.__text.join(`
`)),u.escapeMode&&(Ve.__text=Ve.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),u.stripWhitespaces&&(Ve.__text=Ve.__text.trim()),delete Ve["#text"],u.arrayAccessForm==="property"&&delete Ve["#text_asArray"],Ve.__text=function($e,tr,nr){if(u.datetimeAccessFormPaths.length>0)for(var Pt=nr.split(".#")[0],Et=0;Et<u.datetimeAccessFormPaths.length;Et++){var kt=u.datetimeAccessFormPaths[Et];if(typeof kt=="string"){if(kt===Pt)return A($e)}else if(kt instanceof RegExp){if(kt.test(Pt))return A($e)}else if(typeof kt=="function"&&kt(Pt))return A($e)}return $e}(Ve.__text,0,ue+".#text")),Ve.hasOwnProperty("#cdata-section")&&(Ve.__cdata=Ve["#cdata-section"],delete Ve["#cdata-section"],u.arrayAccessForm==="property"&&delete Ve["#cdata-section_asArray"]),Ve.__cnt===1&&Ve.__text&&!u.keepText?Ve=Ve.__text:Ve.__cnt===0&&u.emptyNodeForm==="text"?Ve="":Ve.__cnt>1&&Ve.__text!==void 0&&u.skipEmptyTextNodesForObj&&(u.stripWhitespaces&&Ve.__text===""||Ve.__text.trim()==="")&&delete Ve.__text,delete Ve.__cnt,u.keepCData||Ve.hasOwnProperty("__text")||!Ve.hasOwnProperty("__cdata")||Object.keys(Ve).length!==1?(u.enableToStringFunc&&(Ve.__text||Ve.__cdata)&&(Ve.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),Ve):Ve.__cdata?Ve.__cdata:""}function Ce(xe,ue){return xe.nodeType===b?function(Ve){for(var Ue={},er=Ve.childNodes,At=0;At<er.length;At++){var ur=er.item(At);if(ur.nodeType===c){var pr=T(ur);u.ignoreRoot?Ue=Ce(ur,pr):Ue[pr]=Ce(ur,pr)}}return Ue}(xe):xe.nodeType===c?V(xe,ue):xe.nodeType===m||xe.nodeType===v?xe.nodeValue:null}function ie(xe,ue,Ve,Ue){var er="<"+(xe&&xe.__prefix?xe.__prefix+":":"")+ue;if(Ve)for(var At=0;At<Ve.length;At++){var ur=Ve[At],pr=xe[ur];u.escapeMode&&(pr=k(pr)),er+=" "+ur.substr(u.attributePrefix.length)+"=",u.useDoubleQuotes?er+='"'+pr+'"':er+="'"+pr+"'"}return er+=Ue?" />":">"}function Oe(xe,ue){return"</"+(xe&&xe.__prefix?xe.__prefix+":":"")+ue+">"}function he(xe,ue){return u.arrayAccessForm==="property"&&(Ve=ue.toString(),Ue="_asArray",Ve.indexOf(Ue,Ve.length-Ue.length)!==-1)||ue.toString().indexOf(u.attributePrefix)===0||ue.toString().indexOf("__")===0||xe[ue]instanceof Function;var Ve,Ue}function Y(xe){var ue=0;if(xe instanceof Object)for(var Ve in xe)he(xe,Ve)||ue++;return ue}function ae(xe){var ue=[];if(xe instanceof Object)for(var Ve in xe)Ve.toString().indexOf("__")===-1&&Ve.toString().indexOf(u.attributePrefix)===0&&ue.push(Ve);return ue}function Fe(xe){var ue="";return xe instanceof Object?ue+=function(Ve){var Ue="";return Ve.__cdata&&(Ue+="<![CDATA["+Ve.__cdata+"]]>"),(Ve.__text||typeof Ve.__text=="number"||typeof Ve.__text=="boolean")&&(u.escapeMode?Ue+=k(Ve.__text):Ue+=Ve.__text),Ue}(xe):xe!==null&&(u.escapeMode?ue+=k(xe):ue+=xe),ue}function ze(xe,ue,Ve){var Ue="";return u.jsAttributeFilter&&u.jsAttributeFilter.call(null,ue,xe)||(u.jsAttributeConverter&&(xe=u.jsAttributeConverter.call(null,ue,xe)),xe!=null&&xe!==""||!u.selfClosingElements?typeof xe=="object"?Object.prototype.toString.call(xe)==="[object Array]"?Ue+=function(er,At,ur){var pr="";if(er.length===0)pr+=ie(er,At,ur,!0);else for(var ar=0;ar<er.length;ar++)pr+=ze(er[ar],At,ae(er[ar]));return pr}(xe,ue,Ve):xe instanceof Date?(Ue+=ie(xe,ue,Ve,!1),Ue+=u.jsDateUTC?xe.toUTCString():xe.toISOString(),Ue+=Oe(xe,ue)):Y(xe)>0||typeof xe.__text=="number"||typeof xe.__text=="boolean"||xe.__text||xe.__cdata?(Ue+=ie(xe,ue,Ve,!1),Ue+=pe(xe),Ue+=Oe(xe,ue)):u.selfClosingElements?Ue+=ie(xe,ue,Ve,!0):(Ue+=ie(xe,ue,Ve,!1),Ue+=Oe(xe,ue)):(Ue+=ie(xe,ue,Ve,!1),Ue+=Fe(xe),Ue+=Oe(xe,ue)):Ue+=ie(xe,ue,Ve,!0)),Ue}function pe(xe){var ue="";if(Y(xe)>0){for(var Ve in xe)if(!he(xe,Ve)){var Ue=xe[Ve];ue+=ze(Ue,Ve,ae(Ue))}}return ue+=Fe(xe)}function le(xe){if(xe===void 0||typeof xe!="string")return null;var ue=null,Ve=null;if(d)Ve=(ue=new d(u.xmldomOptions)).parseFromString(xe,"text/xml");else if(window&&window.DOMParser){ue=new window.DOMParser;var Ue=null;if(!(window.ActiveXObject||"ActiveXObject"in window)&&document.all&&!document.addEventListener)try{Ue=ue.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{Ue=null}try{Ve=ue.parseFromString(xe,"text/xml"),Ue!==null&&Ve.getElementsByTagNameNS(Ue,"parsererror").length>0&&(Ve=null)}catch{Ve=null}}else xe.indexOf("<?")===0&&(xe=xe.substr(xe.indexOf("?>")+2)),(Ve=new ActiveXObject("Microsoft.XMLDOM")).async="false",Ve.loadXML(xe);return Ve}this.asArray=function(xe){return xe==null?[]:xe instanceof Array?xe:[xe]},this.toXmlDateTime=function(xe){return xe instanceof Date?xe.toISOString():typeof xe=="number"?new Date(xe).toISOString():null},this.asDateTime=function(xe){return typeof xe=="string"?A(xe):xe},this.xml2dom=function(xe){return le(xe)},this.dom2js=function(xe){return Ce(xe,null)},this.js2dom=function(xe){return le(this.js2xml(xe))},this.xml2js=function(xe){var ue=le(xe);return ue!=null?this.dom2js(ue):null},this.js2xml=function(xe){return pe(xe)},this.getVersion=function(){return"3.4.4"}}})=="function"?n.apply(r,o):n)===void 0||(t.exports=s)})()},function(t,r,e){var n=e(116);t.exports=function(o,s){return s.method="POST",s.headers=s.headers||{},s.headers["Content-Type"]="multipart/form-data",s.timeout=0,s.type=s.type||"json",n(o,s)}},function(t,r,e){var n=e(15),o=e(52),s=e(6),a=e(3),i=e(13),d=i.chunkSize,u=e(116),c={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};t.exports=function m(v,g,b,T){var k={file:v.data[g],fileSize:v.data[g].size,fileUploadedSize:0,percentage:0},y=v.url;function A(ze){var pe=k.fileUploadedSize+ze.loaded,le=Math.floor(1e4*pe/k.fileSize)/100;if(o(le)>=100&&(le=100,A=function(){}),k.percentage!==le){k.percentage=le;var xe={docId:v.docId,total:k.fileSize,loaded:pe,percentage:le,percentageText:le+"%"};v.fileInput&&(xe.fileInput=v.fileInput),v.blob&&(xe.blob=v.blob),v.uploadprogress(xe)}}function V(ze){try{ze=JSON.parse(ze)}catch(xe){return void b.onError(xe)}if(ze.errMsg||ze.errCode)b.onError(ze);else if(ze.offset<k.fileSize)delete he.onaftersend,k.fileUploadedSize=ze.offset,function(xe,ue,Ve,Ue){var er=xe.offset,At=xe.offset+d;if(typeof FileReader<"u"){var ur,pr=new FileReader;pr.readAsArrayBuffer(n(ur=Ue.file).call(ur,er,At)),pr.addEventListener("load",function(hr){ue.data=hr.target.result,ue.query.offset=xe.offset,ue.query.complete=At>=Ue.fileSize,ue.query.context=xe.context,ue.onuploading=A,ue.onload=V,ue.onerror=Ce,b.sn=u(y,ue)}),pr.addEventListener("error",function(hr){ue.onerror(hr.target.error)})}else{var ar;ue.data=n(ar=Ue.file).call(ar,er,At),ue.query.offset=xe.offset,ue.query.complete=At>=Ue.fileSize,ue.query.context=xe.context,ue.onuploading=A,ue.onload=V,ue.onerror=Ce,b.sn=u(y,ue)}}(ze,he,0,k);else{var pe=i.genFileUrl(v.nosToken);v.type==="image"?u(pe+"?imageInfo",{onload:function(xe){try{xe=JSON.parse(xe),v.uploaddone(null,{docId:ze.docId,w:xe.Width,h:xe.Height,orientation:xe.Orientation||"",type:xe.Type,size:xe.Size||k.fileSize})}catch(ue){le(ue)}},onerror:function(xe){if(typeof Image<"u"){var ue=new Image;ue.src=pe,ue.onload=function(){v.uploaddone(null,{docId:ze.docId,w:ue.width,h:ue.height,size:k.fileSize})},ue.onerror=function(Ve){le(Ve)}}else le(xe)}}):v.type==="video"||v.type==="audio"?u(pe+"?vinfo",{onload:function(xe){try{(xe=JSON.parse(xe)).GetVideoInfo&&xe.GetVideoInfo.VideoInfo&&(xe=xe.GetVideoInfo.VideoInfo),v.uploaddone(null,{docId:ze.docId,w:xe.Width,h:xe.Height,dur:xe.Duration,orientation:xe.Rotate,audioCodec:xe.AudioCodec,videoCodec:xe.VideoCodec,container:xe.Container,size:xe.Size||k.fileSize})}catch(ue){le(ue)}},onerror:le}):v.uploaddone(null,{docId:ze.docId,size:k.fileSize})}function le(xe){b.onError(xe)}}function Ce(ze){v.errorHook(ze,{url:y,provider:"nos"});var pe=ze&&ze.code;function le(){try{if(ze.result)var xe=JSON.parse(ze.result);else xe=ze;b.onError(xe)}catch(ue){b.onError(ue)}}k.fileUploadedSize===0&&pe!=="abort"?v.edgeList?T<v.edgeList.length-1?m(v,g,b,T+1):le():v.nosLbsUrls&&v.nosLbsUrls.length>0?function(xe,ue,Ve,Ue,er){return new a(function(At){function ur(){er.adaptersRequest(Ve[xe],{query:{version:"1.0",bucketname:ue},method:"GET",onerror:pr,onload:function(ar){try{(ar=JSON.parse(ar))&&ar.upload&&ar.upload.length?At(ar.upload):pr()}catch{pr()}}},{exception_service:3})}function pr(){Ue.onLbsUrlFail(Ve[xe]),xe<Ve.length-1?(xe++,ur()):At([])}ur()})}(0,v.nosToken.bucket,v.nosLbsUrls,b,v).then(function(xe){xe.length>0?(v.edgeList=xe,v.updateNosEdgeList&&v.updateNosEdgeList(xe),m(v,g,b,T+1)):le()}):(v.edgeList=i.edgeList,m(v,g,b,T+1)):le()}typeof T!="number"&&(T=-1),v.edgeList&&v.edgeList.length&&(T=T>0?T:0,y=v.edgeList[T]),y+="/"+v.nosToken.bucket+"/"+v.nosToken.objectName;var ie=v.data.file&&v.data.file.type;if(!ie||s(ie).call(ie,"/")<0){var Oe=(v.fileInputName||"").split(".").pop();v.type==="image"?ie="image/"+(Oe==="jpg"?"jpeg":Oe):v.type!=="audio"&&v.type!=="video"||(ie=c[Oe])}var he={query:{offset:0,complete:d>=k.fileSize,version:"1.0"},headers:{"Content-Type":ie||"application/octet-stream","x-nos-token":v.nosToken.token},method:"POST",timeout:0,onaftersend:function(){v.beginupload(b)},onuploading:A,onload:V,onerror:Ce};if(typeof FileReader<"u"){var Y,ae=new FileReader;ae.addEventListener("load",function(ze){he.data=ze.target.result,b.sn=u(y,he)}),ae.addEventListener("error",function(ze){he.onerror(ze.target.error)}),ae.readAsArrayBuffer(n(Y=k.file).call(Y,0,d))}else{var Fe;he.data=n(Fe=k.file).call(Fe,0,d),b.sn=u(y,he)}}},function(t,r,e){e(608);var n=e(12);t.exports=n.Reflect.construct},function(t,r,e){var n=e(1),o=e(33),s=e(76),a=e(272),i=e(168),d=e(36),u=e(28),c=e(80),m=e(4),v=o("Reflect","construct"),g=Object.prototype,b=[].push,T=m(function(){function A(){}return!(v(function(){},[],A)instanceof A)}),k=!m(function(){v(function(){})}),y=T||k;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(A,V){i(A),d(V);var Ce=arguments.length<3?A:i(arguments[2]);if(k&&!T)return v(A,V,Ce);if(A==Ce){switch(V.length){case 0:return new A;case 1:return new A(V[0]);case 2:return new A(V[0],V[1]);case 3:return new A(V[0],V[1],V[2]);case 4:return new A(V[0],V[1],V[2],V[3])}var ie=[null];return s(b,ie,V),new(s(a,A,ie))}var Oe=Ce.prototype,he=c(u(Oe)?Oe:g),Y=s(A,he,V);return u(Y)?Y:he}})},function(t,r,e){t.exports=e(610)},function(t,r,e){var n=e(611);t.exports=n},function(t,r,e){var n=e(214);t.exports=n},function(t,r,e){t.exports=e(613)},function(t,r,e){var n=e(614);t.exports=n},function(t,r,e){var n=e(615);t.exports=n},function(t,r,e){var n=e(616);t.exports=n},function(t,r,e){e(617);var n=e(12);t.exports=n.Object.setPrototypeOf},function(t,r,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(135)})},function(t,r,e){t.exports=e(619)},function(t,r,e){var n=e(620);t.exports=n},function(t,r,e){var n=e(271);t.exports=n},function(t,r){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(623)},function(t,r,e){var n=e(624);t.exports=n},function(t,r,e){var n=e(282);t.exports=n},function(t,r,e){e(626);var n=e(12);t.exports=n.Object.getPrototypeOf},function(t,r,e){var n=e(1),o=e(4),s=e(42),a=e(134),i=e(227);n({target:"Object",stat:!0,forced:o(function(){a(1)}),sham:!i},{getPrototypeOf:function(d){return a(s(d))}})},function(t,r,e){var n,o=e(139),s=e(6),a=e(10),i=e(24),d=e(8),u=e(15),c=e(5),m=e(0),v=e(73).fn,g=e(284),b=e(275),T=e(40),k=e(23).reportAPI;v.transDoc=function(y){var A;m.verifyOptions(y,"fileInput done","nos::transDoc");try{var V=y.fileInput.files[0],Ce=["ppt","pdf","pptx","doc","docx"],ie=y.fileInputName=V.name,Oe={ppt:1,pptx:2,pdf:3,doc:6,docx:7},he=ie.substring(o(ie).call(ie,".")+1);if(s(Ce).call(Ce,he)<0)return void y.done(T.newNoFileError("请上传正确格式的文件【ppt, pptx, pdf, doc, docx】",{callFunc:"nos: transDoc",fileInput:y.fileInput}),y)}catch{return void y.done(T.newNoFileError("请上传正确的文件节点",{callFunc:"msg::previewFile",fileInput:y.fileInput}),y)}var Y=a(b.genResponseBody("file")||{}).replace(/"/gi,'\\"'),ae={transToken:{name:ie,type:Oe[he],transType:y.transcode==="png"?11:10,size:V.size,body:Y}};this.getNosTokenTrans({responseBody:ae,nosToken:{nosScene:y.nosScene||this.nosScene,nosSurvivalTime:y.nosSurvivalTime},callback:i(A=function(Fe,ze){Fe?y.done(Fe):(y.nosToken=ze.nosToken,y.docId=ze.docId,this._doPreviewFile(y))}).call(A,this)})},v.getSimpleNosToken=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y.num=1,m.verifyOptions(y),this.cbAndSendCmd("getSimpleNosToken",y)},v.getNosToken=function(y){var A=y.callback,V=y.nosToken,Ce=y.responseBody,ie={tag:V.nosScene};V.nosSurvivalTime&&V.nosSurvivalTime!==1/0&&(ie.expireSec=V.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:Ce,nosToken:ie},A)},v.getNosTokenTrans=function(y){this.sendCmd("getNosTokenTrans",y.responseBody,y.callback)},v.getMixStoreToken=function(y){this.sendCmd("getMixStoreToken",{mixTokenReq:{provider:y.curProvider,tokenCount:y.tokenCount||1,tag:"im",returnBody:y.responseBody}},y.callback)},v.packFileDownloadName=function(y){k({instance:this,className:"ApiBaseFn",funcName:"packFileDownloadName",hasCallback:!1}),m.verifyOptions(y,"url name",!0,"","nos::packFileDownloadName");var A=y.url;return A+m.genUrlSep(A)+"download="+encodeURIComponent(y.name)},v.audioToMp3=function(y){k({instance:this,className:"ApiBaseFn",funcName:"audioToMp3",hasCallback:!1}),m.verifyOptions(y,"url","nos::audioToMp3");var A=y.url;return A+m.genUrlSep(A)+"audioTrans&type=mp3"},v.removeFile=function(y){this.sendCmd("removeFile",y,y.callback)},v.fetchFile=function(y){this.sendCmd("fetchFile",y,y.callback)},v.fetchFileList=function(y){this.sendCmd("fetchFileList",y,y.callback)},v.stripImageMeta=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"stripImageMeta",hasCallback:!1}),this.beforeProcessImage(y,"stripmeta")},v.qualityImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"qualityImage",hasCallback:!1}),this.beforeProcessImage(y,"quality")},v.interlaceImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"interlaceImage",hasCallback:!1}),this.beforeProcessImage(y,"interlace")},v.rotateImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"rotateImage",hasCallback:!1}),this.beforeProcessImage(y,"rotate")},v.blurImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"blurImage",hasCallback:!1}),this.beforeProcessImage(y,"blur")},v.cropImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"cropImage",hasCallback:!1}),this.beforeProcessImage(y,"crop")},v.thumbnailImage=function(y){return k({instance:this,className:"ApiBaseFn",funcName:"thumbnailImage",hasCallback:!1}),this.beforeProcessImage(y,"thumbnail")},v.beforeProcessImage=function(y,A){var V=m.copy(y);return V.type=A,y.ops=[V],this.processImage(y)},v.processImage=function(y){var A;y.callback=k({instance:this,className:"ApiBaseFn",funcName:"processImage",done:y.callback});var V=this;m.verifyOptions(y,"url ops",!0,"","nos::processImage"),m.verifyParamType("ops",y.ops,"array","nos::processImage");var Ce=d(A=y.ops).call(A,function(ie){var Oe,he;return m.verifyOptions(ie,"type",!0,"","nos::processImage"),m.verifyParamValid("type",ie.type,g.validTypes,"nos::processImage"),V["gen"+u(Oe=ie.type).call(Oe,0,1).toUpperCase()+u(he=ie.type).call(he,1)+"Op"](ie)});V.processCallback(y),V.sendCmd("processImage",{url:y.url,imageOps:Ce},y.callback)},v.genStripmetaOp=function(y){return new g({type:y.type,stripmeta:y.strip?1:0})},v.genQualityOp=function(y){m.verifyOptions(y,"quality",!0,"","nos::genQualityOp"),m.verifyParamType("quality",y.quality,"number","nos::genQualityOp"),m.verifyParamMin("quality",y.quality,0,"nos::genQualityOp"),m.verifyParamMax("quality",y.quality,100,"nos::genQualityOp");var A=Math.round(y.quality);return new g({type:y.type,qualityQuality:A})},v.genInterlaceOp=function(y){return new g({type:y.type})},v.genRotateOp=function(y){for(m.verifyOptions(y,"angle",!0,"","nos::genRotateOp"),m.verifyParamType("angle",y.angle,"number","nos::genRotateOp");y.angle<0;)y.angle=y.angle+360;y.angle=y.angle%360;var A=Math.round(y.angle);return new g({type:y.type,rotateAngle:A})},v.genBlurOp=function(y){m.verifyOptions(y,"radius sigma","nos::genBlurOp"),m.verifyParamType("radius",y.radius,"number","nos::genBlurOp"),m.verifyParamMin("radius",y.radius,1,"nos::genBlurOp"),m.verifyParamMax("radius",y.radius,50,"nos::genBlurOp"),m.verifyParamType("sigma",y.sigma,"number","nos::genBlurOp"),m.verifyParamMin("sigma",y.sigma,0,"nos::genBlurOp");var A=Math.round(y.radius),V=Math.round(y.sigma);return new g({type:y.type,blurRadius:A,blurSigma:V})},v.genCropOp=function(y){m.verifyOptions(y,"x y width height","nos::genCropOp"),m.verifyParamType("x",y.x,"number","nos::genCropOp"),m.verifyParamMin("x",y.x,0,"nos::genCropOp"),m.verifyParamType("y",y.y,"number","nos::genCropOp"),m.verifyParamMin("y",y.y,0,"nos::genCropOp"),m.verifyParamType("width",y.width,"number","nos::genCropOp"),m.verifyParamMin("width",y.width,0,"nos::genCropOp"),m.verifyParamType("height",y.height,"number","nos::genCropOp"),m.verifyParamMin("height",y.height,0,"nos::genCropOp");var A=Math.round(y.x),V=Math.round(y.y),Ce=Math.round(y.width),ie=Math.round(y.height);return new g({type:y.type,cropX:A,cropY:V,cropWidth:Ce,cropHeight:ie})},v.genThumbnailOp=(n={cover:"z",contain:"x",crop:"y"},function(y){m.verifyOptions(y,"mode","nos::genThumbnailOp"),m.verifyParamValid("mode",y.mode,c(n),"nos::genThumbnailOp"),y.mode==="contain"?m.verifyParamAtLeastPresentOne(y,"width height","nos::genThumbnailOp"):m.verifyOptions(y,"width height","nos::genThumbnailOp"),m.undef(y.width)&&(y.width=0),m.undef(y.height)&&(y.height=0),m.verifyParamType("width",y.width,"number","nos::genThumbnailOp"),m.verifyParamMin("width",y.width,0,"nos::genThumbnailOp"),m.verifyParamType("height",y.height,"number","nos::genThumbnailOp"),m.verifyParamMin("height",y.height,0,"nos::genThumbnailOp");var A=Math.round(y.width),V=Math.round(y.height),Ce=new g({type:y.type,thumbnailMode:n[y.mode],thumbnailWidth:A,thumbnailHeight:V});if(y.mode==="crop"&&m.notundef(y.axis)){m.undef(y.axis.x)&&(y.axis.x=5),m.undef(y.axis.y)&&(y.axis.y=5),m.verifyParamMin("axis.x",y.axis.x,0,"nos::genThumbnailOp"),m.verifyParamMax("axis.x",y.axis.x,10,"nos::genThumbnailOp"),m.verifyParamMin("axis.y",y.axis.y,0,"nos::genThumbnailOp"),m.verifyParamMax("axis.y",y.axis.y,10,"nos::genThumbnailOp");var ie=Math.round(y.axis.x),Oe=Math.round(y.axis.y);Ce.thumbnailAxisX=ie,Ce.thumbnailAxisY=Oe}return m.notundef(y.enlarge)&&(m.verifyParamType("enlarge",y.enlarge,"boolean","nos::genThumbnailOp"),y.enlarge&&(Ce.thumbnailEnlarge=1)),Ce.thumbnailToStatic=this.options.thumbnailToStatic?1:0,Ce}),v.getNosOriginUrl=function(y){var A;(y=y||{}).done=k({instance:this,className:"ApiBaseFn",funcName:"getNosOriginUrl",done:y.done}),m.verifyOptions(y,"safeShortUrl",!0,"","nos::getNosOriginUrl"),m.verifyParamType("safeShortUrl",y.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(y.safeShortUrl)&&~s(A=y.safeShortUrl).call(A,"im_url=1")?(this.processCallback(y),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:y.safeShortUrl}},y.callback)):y.done(new T("参数 “safeShortUrl” 内容非文件安全短链",{callFunc:"nos: getNosOriginUrl"}),y)}},function(t,r,e){var n,o=e(7),s=e(6),a=e(5),i=e(25),d=e(106),u=d.genUrlSep,c=d.url2object,m=d.object2url,v=e(0),g=e(73).fn,b=e(23).reportAPI;g.viewImageSync=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageSync",hasCallback:!1});var k=this.options;v.verifyOptions(T,"url","nos::viewImageSync");var y=T.url,A=c(y),V=A.protocol,Ce=A.hostname,ie=A.path,Oe=A.query;if(typeof T.strip=="boolean"&&(Oe.stripmeta=T.strip?1:0),typeof T.quality=="number"&&(v.verifyParamMin("quality",T.quality,0,"nos::viewImageSync"),v.verifyParamMax("quality",T.quality,100,"nos::viewImageSync"),Oe.quality=Math.round(T.quality)),typeof T.interlace=="boolean"&&(Oe.interlace=T.interlace?1:0),typeof T.rotate=="number"&&(Oe.rotate=Math.round(T.rotate)),i(T.thumbnail)==="object"){var he=T.thumbnail.mode||"crop",Y=T.thumbnail.width,ae=T.thumbnail.height;if(Y>=0&&ae>=0&&Y<4096&&ae<4096&&(Y>0||ae>0)){var Fe,ze;switch(he){case"crop":he="y";break;case"contain":he="x";break;case"cover":he="z";break;default:he="x"}Oe.thumbnail=o(Fe=o(ze="".concat(Y)).call(ze,he)).call(Fe,ae)}}if(k.downloadUrl){var pe=c(T.url),le=k.downloadUrl,xe=pe.path,ue=s(xe).call(xe,"/");if(ue!==-1){var Ve=xe.substring(0,ue),Ue=xe.substring(ue+1);le=le.replace("{bucket}",Ve).replace("{object}",Ue)}var er=c(le);return m({protocol:er.protocol,hostname:er.hostname,path:er.path,query:v.merge(er.query,Oe)})}return m({protocol:V,hostname:Ce,path:ie,query:Oe})},g.viewImageStripMeta=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageStripMeta",hasCallback:!1}),v.verifyOptions(T,"url strip","nos::viewImageStripMeta"),v.verifyParamType("strip",T.strip,"boolean","nos::viewImageStripMeta");var k="stripmeta="+(T.strip?1:0),y=u(T.url);return T.url+y+k},g.viewImageQuality=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageQuality",hasCallback:!1}),v.verifyOptions(T,"url quality","nos::viewImageQuality"),v.verifyParamType("quality",T.quality,"number","nos::viewImageQuality"),v.verifyParamMin("quality",T.quality,0,"nos::viewImageQuality"),v.verifyParamMax("quality",T.quality,100,"nos::viewImageQuality");var k="quality="+Math.round(T.quality),y=u(T.url);return T.url+y+k},g.viewImageInterlace=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageInterlace",hasCallback:!1}),v.verifyOptions(T,"url","nos::viewImageInterlace");var k=u(T.url);return T.url+k+"interlace=1"},g.viewImageRotate=function(T){for(b({instance:this,className:"ApiBaseFn",funcName:"viewImageRotate",hasCallback:!1}),v.verifyOptions(T,"url angle","nos::viewImageRotate"),v.verifyParamType("angle",T.angle,"number","nos::viewImageRotate");T.angle<0;)T.angle=T.angle+360;T.angle=T.angle%360;var k="rotate="+Math.round(T.angle),y=u(T.url);return T.url+y+k},g.viewImageBlur=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageBlur",hasCallback:!1}),v.verifyOptions(T,"url radius sigma","nos::viewImageBlur"),v.verifyParamType("radius",T.radius,"number","nos::viewImageBlur"),v.verifyParamMin("radius",T.radius,1,"nos::viewImageBlur"),v.verifyParamMax("radius",T.radius,50,"nos::viewImageBlur"),v.verifyParamType("sigma",T.sigma,"number","nos::viewImageBlur"),v.verifyParamMin("sigma",T.sigma,0,"nos::viewImageBlur");var k="blur="+Math.round(T.radius)+"x"+Math.round(T.sigma),y=u(T.url);return T.url+y+k},g.viewImageCrop=function(T){b({instance:this,className:"ApiBaseFn",funcName:"viewImageCrop",hasCallback:!1}),v.verifyOptions(T,"url x y width height","nos::viewImageCrop"),v.verifyParamType("x",T.x,"number","nos::viewImageCrop"),v.verifyParamMin("x",T.x,0,"nos::viewImageCrop"),v.verifyParamType("y",T.y,"number","nos::viewImageCrop"),v.verifyParamMin("y",T.y,0,"nos::viewImageCrop"),v.verifyParamType("width",T.width,"number","nos::viewImageCrop"),v.verifyParamMin("width",T.width,0,"nos::viewImageCrop"),v.verifyParamType("height",T.height,"number","nos::viewImageCrop"),v.verifyParamMin("height",T.height,0,"nos::viewImageCrop");var k="crop="+Math.round(T.x)+"_"+Math.round(T.y)+"_"+Math.round(T.width)+"_"+Math.round(T.height),y=u(T.url);return T.url+y+k},g.viewImageThumbnail=(n={cover:"z",contain:"x",crop:"y"},function(T){v.verifyOptions(T,"url mode","nos::viewImageThumbnail"),v.verifyParamValid("mode",T.mode,a(n),"nos::viewImageThumbnail"),T.mode==="contain"?v.verifyParamAtLeastPresentOne(T,"width height","nos::viewImageThumbnail"):v.verifyOptions(T,"width height","nos::viewImageThumbnail"),v.undef(T.width)&&(T.width=0),v.undef(T.height)&&(T.height=0),v.verifyParamType("width",T.width,"number","nos::viewImageThumbnail"),v.verifyParamMin("width",T.width,0,"nos::viewImageThumbnail"),v.verifyParamType("height",T.height,"number","nos::viewImageThumbnail"),v.verifyParamMin("height",T.height,0,"nos::viewImageThumbnail");var k=Math.round(T.width),y=Math.round(T.height),A="thumbnail="+k+n[T.mode]+y;T.mode==="crop"&&v.notundef(T.axis)&&(v.undef(T.axis.x)&&(T.axis.x=5),v.undef(T.axis.y)&&(T.axis.y=5),v.verifyParamMin("axis.x",T.axis.x,0,"nos::viewImageThumbnail"),v.verifyParamMax("axis.x",T.axis.x,10,"nos::viewImageThumbnail"),v.verifyParamMin("axis.y",T.axis.y,0,"nos::viewImageThumbnail"),v.verifyParamMax("axis.y",T.axis.y,10,"nos::viewImageThumbnail"),A=A+"&axis="+Math.round(T.axis.x)+"_"+Math.round(T.axis.y)),v.notundef(T.enlarge)&&(v.verifyParamType("enlarge",T.enlarge,"boolean","nos::viewImageThumbnail"),T.enlarge&&(A+="&enlarge=1"));var V=u(T.url);return T.url+V+A})},function(t,r,e){var n=e(630);t.exports=n},function(t,r,e){var n=e(21),o=e(631),s=e(633),a=Array.prototype,i=String.prototype;t.exports=function(d){var u=d.includes;return d===a||n(a,d)&&u===a.includes?o:typeof d=="string"||d===i||n(i,d)&&u===i.includes?s:u}},function(t,r,e){e(632);var n=e(30);t.exports=n("Array").includes},function(t,r,e){var n=e(1),o=e(159).includes,s=e(4),a=e(195);n({target:"Array",proto:!0,forced:s(function(){return!Array(1).includes()})},{includes:function(i){return o(this,i,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(t,r,e){e(634);var n=e(30);t.exports=n("String").includes},function(t,r,e){var n=e(1),o=e(11),s=e(635),a=e(108),i=e(49),d=e(637),u=o("".indexOf);n({target:"String",proto:!0,forced:!d("includes")},{includes:function(c){return!!~u(i(a(this)),i(s(c)),arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(636),o=TypeError;t.exports=function(s){if(n(s))throw o("The method doesn't accept regular expressions");return s}},function(t,r,e){var n=e(28),o=e(63),s=e(20)("match");t.exports=function(a){var i;return n(a)&&((i=a[s])!==void 0?!!i:o(a)=="RegExp")}},function(t,r,e){var n=e(20)("match");t.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[n]=!1,"/./"[o](s)}catch{}}return!1}},function(t,r,e){var n=e(25),o=e(10),s=e(6),a=e(304),i=e(0),d=e(73).fn,u=e(13),c=e(23).reportAPI;function m(g,b,T,k){var y=!1,A="";if(T===1?s(g).call(g,b)>=0&&(y=!0,A=b):T===2&&(A=new RegExp(b,"g")).test(g)&&(y=!0),y&&A!=="")switch(k){case 1:return g.replace(A,"**");case 2:return{code:2};case 3:return{code:3}}return g}function v(g,b){for(var T=b.match,k=b.operate,y=g,A=0;A<a(b).length;A++){var V=a(b)[A],Ce=V.match||T,ie=V.operate||k;try{if(y=m(y,V.key,Ce,ie),n(y)==="object")return y}catch(Oe){this.logger.warn("misc::filterContent: js cannot parse this regexp ",Oe)}}return y}d.uploadSdkLogUrl=function(g){return i.verifyOptions(g,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",g)},d.getClientAntispamLexicon=function(g){var b=this;(g=g||{}).done=c({instance:this,className:"ApiBaseFn",funcName:"getClientAntispamLexicon",done:g.done});var T=(g=g||{}).done;T instanceof Function||(T=function(){}),g={clientAntispam:{version:0}};var k=this;if(u.hasLocalStorage&&localStorage.getItem("antispamLexicon")&&localStorage.getItem("antispamLexicon")!=="{}")try{k.antispamLexicon=JSON.parse(localStorage.getItem("antispamLexicon"))}catch(y){this.logger.error("JSON parse antispamLexicon error",y)}k.antispamLexicon&&T.call(this,null,{clientAntispam:k.antispamLexicon}),this.protocol.sendCmd("getClientAntispam",g,function(y,A,V){y?(k.protocol.logger.error("misc::getClientAntispamLexicon:",y),T.call(b,y,{})):(u.hasLocalStorage&&localStorage.setItem("antispamLexicon",o(V.clientAntispam)),k.antispamLexicon||T.call(b,null,V),k.antispamLexicon=V.clientAntispam||{})})},d.filterClientAntispam=function(g){c({instance:this,className:"ApiBaseFn",funcName:"filterClientAntispam",hasCallback:!1});var b=g.content;if(!b)return{code:404,errmsg:"待反垃圾文本content不存在"};var T=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!T)return{code:404,errmsg:"没有反垃圾词库或者词库格式不合法"};try{T=JSON.parse(T).thesaurus}catch{return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:"反垃圾词库格式不合法"}}for(var k=b,y=0;y<T.length;y++)if(k=v.call(this,k,T[y]),n(k)==="object"){if(k.code===2)return{code:200,type:2,errmsg:"建议拒绝发送",content:b,result:""};if(k.code===3)return{code:200,type:3,errmsg:"建议服务器处理反垃圾，发消息带上字段clientAntiSpam",content:b,result:b}}return k===b?{code:200,type:0,errmsg:"",content:b,result:k}:{code:200,type:1,errmsg:"已对特殊字符做了过滤",content:b,result:k}},d.getServerTime=function(g){(g=g||{}).done=c({instance:this,className:"ApiBaseFn",funcName:"getServerTime",done:g.done}),this.processCallback(g),this.sendCmd("getServerTime",{},g.callback)},d.getNosAccessToken=function(g){(g=g||{}).done=c({instance:this,className:"ApiBaseFn",funcName:"getNosAccessToken",done:g.done}),i.verifyOptions(g,"url","misc::getNosAccessToken"),this.processCallback(g);var b={url:g.url};g.userAgent&&(b.userAgent=g.userAgent),g.ext&&(b.ext=g.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:b},function(T,k,y){var A=y&&y.nosAccessTokenTag&&y.nosAccessTokenTag.token,V=g.url,Ce=A?{token:A,resUrl:s(V).call(V,"?")!==-1?V+"&token="+A:V+"?token="+A}:{};g.done(T,Ce)})},d.deleteNosAccessToken=function(g){(g=g||{}).done=c({instance:this,className:"ApiBaseFn",funcName:"deleteNosAccessToken",done:g.done}),i.verifyOptions(g,"token","misc::deleteNosAccessToken"),this.processCallback(g),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:g.token}},g.callback)}},function(t,r,e){e(67);var n=e(65),o=e(29),s=e(21),a=e(640),i=Array.prototype,d={DOMTokenList:!0,NodeList:!0};t.exports=function(u){var c=u.keys;return u===i||s(i,u)&&c===i.keys||o(d,n(u))?a:c}},function(t,r,e){var n=e(641);t.exports=n},function(t,r,e){e(82),e(96);var n=e(30);t.exports=n("Array").keys},function(t,r,e){var n=e(25),o=e(3),s=e(8),a=e(10),i=e(73).fn,d=e(0),u=e(190),c=e(285),m=e(23).reportAPI;i.signalingCreate=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.type,b=v.channelName,T=v.ext;return d.verifyOptions(v,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:g,channelName:b,ext:T}}).then(function(k){var y=k.avSignalTag;return o.resolve(y)}).catch(function(k){return o.reject(c.parseAvSignalError(k))})},i.signalingDelay=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:v}).then(function(g){var b=g.avSignalTag;return o.resolve(b)}).catch(function(g){return o.reject(c.parseAvSignalError(g))})},i.signalingClose=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return d.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:d.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T=b.avSignalTag;return T.offlineEnabled=T.isSave===1,delete T.isSave,o.resolve(T)}).catch(function(b){return o.reject(c.parseAvSignalError(b))})},i.signalingJoin=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return d.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:d.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T,k=b.avSignalTag,y=k.members;return typeof k.members=="string"&&(y=s(T=JSON.parse(k.members)).call(T,function(A){return c.parseAvSignalMember(A)})),k.members=y,o.resolve(k)}).catch(function(b){return o.reject(c.parseAvSignalError(b))})},i.signalingLeave=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.offlineEnabled;return d.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:d.merge(v,{isSave:g===!0?1:0})}).then(function(b){var T=b.avSignalTag;return T.offlineEnabled=T.isSave===1,delete T.isSave,o.resolve(T)}).catch(function(b){return o.reject(c.parseAvSignalError(b))})},i.signalingGetChannelInfo=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.channelName;return d.verifyOptions(v,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:g}}).then(function(b){var T,k=b.avSignalTag,y=k.members;return typeof k.members=="string"&&(y=s(T=JSON.parse(k.members)).call(T,function(A){return c.parseAvSignalMember(A)})),k.members=y,o.resolve(k)}).catch(function(b){return o.reject(c.parseAvSignalError(b))})},i.signalingInvite=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.account,b=v.offlineEnabled,T=v.pushInfo,k=T===void 0?{}:T;d.verifyOptions(v,"channelId requestId account","api::signalling"),n(k.pushPayload)==="object"&&(k.pushPayload=a(k.pushPayload));var y=d.merge(v,k,{to:g,isSave:b===!0?1:0,needPush:k.needPush===!0?1:0,needBadge:k.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:y}).then(function(A){var V=A.avSignalTag;return V.offlineEnabled=V.isSave===1,V.needBadge=V.needBadge===1,V.needPush=V.needPush===1,delete V.isSave,o.resolve(V)}).catch(function(A){return o.reject(c.parseAvSignalError(A))})},i.signalingCancel=function(v){var g=v.account,b=v.offlineEnabled;return d.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:d.merge(v,{to:g,isSave:b===!0?1:0})}).then(function(T){var k=T.avSignalTag;return k.offlineEnabled=k.isSave===1,delete k.isSave,o.resolve(k)}).catch(function(T){return o.reject(c.parseAvSignalError(T))})},i.signalingCreateAndJoin=function(v){var g=this,b=m({instance:this,className:"ApiBaseFn",funcName:"signalingCreateAndJoin",hasCallback:!0}),T=v.channelName,k=v.uid,y=k===void 0?0:k,A=v.offlineEnabled,V=A===void 0||A,Ce=v.attachExt,ie=Ce===void 0?"":Ce;return this.signalingCreate(v).catch(function(Oe){return Oe.code===10405?(g.logger.warn("api::avSignal:signalingCall room already exists:",Oe),g.signalingGetChannelInfo({channelName:T})):o.reject(Oe)}).then(function(Oe){var he={channelId:Oe.channelId,offlineEnabled:V,attachExt:ie,nertcChannelName:v.nertcChannelName,nertcTokenTtl:v.nertcTokenTtl,nertcJoinRoomQueryParamMap:v.nertcJoinRoomQueryParamMap};return y&&d.merge(he,{uid:y}),g.signalingJoin(he)}).then(function(Oe){return typeof b=="function"&&b(void 0),Oe}).catch(function(Oe){throw typeof b=="function"&&b(Oe),Oe})},i.signalingCall=function(v){var g=this,b=m({instance:this,className:"ApiBaseFn",funcName:"signalingCall",hasCallback:!0}),T=v.account,k=v.offlineEnabled,y=v.requestId;d.verifyOptions(v,"type requestId account","api::signalling");var A="";return this.signalingCreateAndJoin(v).then(function(V){A=V.channelId||A,g.logger.info("api::avSignal:signalingCall join:",A);var Ce={channelId:A,account:T,requestId:y,offlineEnabled:k,attachExt:v.attachExt||"",pushInfo:v.pushInfo||{},nertcTokenTtl:V.nertcTokenTtl,nertcToken:V.nertcToken};return g.signalingInvite(Ce)}).then(function(V){return typeof b=="function"&&b(void 0),V}).catch(function(V){throw typeof b=="function"&&b(V),V})},i.signalingReject=function(v){var g=v.account,b=v.offlineEnabled;return d.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:d.merge(v,{to:g,isSave:b===!0?1:0})}).then(function(T){var k=T.avSignalTag;return k.offlineEnabled=k.isSave===1,delete k.isSave,o.resolve(k)}).catch(function(T){return o.reject(c.parseAvSignalError(T))})},i.signalingAccept=function(v){var g=this,b=v.account,T=v.offlineEnabled;return d.verifyOptions(v,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:d.merge(v,{to:b,isSave:T===!0?1:0})}).then(function(k){var y=k.avSignalTag;return y.offlineEnabled=y.isSave===1,delete y.isSave,o.resolve(y)}).catch(function(k){return o.reject(c.parseAvSignalError(k))}).then(function(k){if(v.autoJoin){var y={channelId:v.channelId,offlineEnabled:v.offlineEnabled,attachExt:v.joinAttachExt,uid:v.uid,nertcChannelName:v.nertcChannelName,nertcTokenTtl:v.nertcTokenTtl,nertcJoinRoomQueryParamMap:v.nertcJoinRoomQueryParamMap};return g.signalingJoin(y)}return k})},i.signalingControl=function(v){var g=v.account;return d.verifyOptions(v,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:d.merge(v,g?{to:g}:{})}).then(function(b){var T=b.avSignalTag;return o.resolve(T)}).catch(function(b){return o.reject(c.parseAvSignalError(b))})},i.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then(function(v){var g=v.avSignalTag;return o.resolve(g)}).catch(function(v){return o.reject(c.parseAvSignalError(v))})},i.signalingMarkMsgRead=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m({instance:this,className:"ApiBaseFn",funcName:"signalingMarkMsgRead",hasCallback:!1}),d.verifyOptions(v,"msgid","api::signalling");var g,b=u.idMap.avSignal;return g=typeof v.msgid=="string"?[v.msgid]:v.msgid,this.sendCmd("batchMarkRead",{sid:b.id,cid:b.signalingNotify,ids:g})},i.signalingCallEx=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.account,b=v.offlineEnabled,T=v.pushInfo,k=T===void 0?{}:T;n(k.pushPayload)==="object"&&(k.pushPayload=a(k.pushPayload)),d.verifyOptions(v,"type","api::signalling"),d.verifyOptions(v,"account","api::signalling");var y=d.merge(v,k,{to:g,isSave:b===!0?1:0,needPush:k.needPush===!0?1:0,needBadge:k.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingCallEx",{avSignalTag:y}).then(function(A){var V,Ce=A.avSignalTag,ie=Ce.members;return typeof Ce.members=="string"&&(ie=s(V=JSON.parse(Ce.members)).call(V,function(Oe){return c.parseAvSignalMember(Oe)})),Ce.members=ie,o.resolve(Ce)}).catch(function(A){return o.reject(c.parseAvSignalError(A))})},i.signalingJoinAndAccept=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.channelId,b=v.attachExt,T=v.offlineEnabled,k=v.uid,y=v.account,A=v.requestId,V=v.nertcChannelName,Ce=v.nertcTokenTtl,ie=v.nertcJoinRoomQueryParamMap;return d.verifyOptions(v,"channelId","api::signalling"),d.verifyOptions(v,"account","api::signalling"),d.verifyOptions(v,"requestId","api::signalling"),this.sendCmdUsePromise("signalingJoinAndAccept",{avSignalTag:{channelId:g,attachExt:b,isSave:T===!0?1:0,uid:k,to:y,requestId:A,nertcChannelName:V,nertcTokenTtl:Ce,nertcJoinRoomQueryParamMap:ie}}).then(function(Oe){var he,Y=Oe.avSignalTag,ae=Y.members;return typeof Y.members=="string"&&(ae=s(he=JSON.parse(Y.members)).call(he,function(Fe){return c.parseAvSignalMember(Fe)})),Y.members=ae,o.resolve(Y)}).catch(function(Oe){return o.reject(c.parseAvSignalError(Oe))})}},function(t,r,e){var n=e(2),o=e(121),s=e(122),a=e(54).getPromiseWithAbort,i=function(){function d(){o(this,d),this.abortFns=[]}return s(d,[{key:"add",value:function(u){var c=a(u);return this.abortFns.push(c.abort),c.promise}},{key:"clear",value:function(){var u;n(u=this.abortFns).call(u,function(c){return c("Request aborted")}),this.abortFns=[]}},{key:"destroy",value:function(){this.clear()}}]),d}();t.exports=i},function(t,r,e){var n=e(102),o=e(103),s=e(2),a=e(69),i=e(3),d=e(8),u=e(57),c=e(15),m=e(7),v=e(10),g=e(24),b=e(121),T=e(122),k=e(0),y=e(13),A=e(74),V=e(287),Ce=e(40);t.exports=function(){function ie(he){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{socketConcurrent:1};b(this,ie),this.clientProto=he,this.logger=he.logger,this.urls=[],this.sockets=[],this.config=Y}var Oe;return T(ie,[{key:"setConfig",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{socketConcurrent:1};this.config=he}},{key:"setUrls",value:function(he){this.urls=he}},{key:"resetSockets",value:function(){var he;s(he=this.sockets).call(he,function(Y){Y&&(Y.removeAllListenersX("info"),Y.disconnect())}),this.sockets=[]}},{key:"connect",value:(Oe=o(n.mark(function he(){var Y,ae,Fe,ze=this;return n.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(this.clientProto.statusProtector.emit("auth/loginLifeCycleConnect"),(ae=a(Y=this.urls).call(Y,0,this.config.socketConcurrent)).length!==0){pe.next=4;break}throw new Ce("no_socket_url",408,{});case 4:return pe.prev=4,pe.next=7,i.any(d(ae).call(ae,function(le,xe){return ze.doConnect(le,xe)}));case 7:return pe.abrupt("return",pe.sent);case 10:throw pe.prev=10,pe.t0=pe.catch(4),s(Fe=pe.t0.errors).call(Fe,function(le,xe){ze.logger.warn("imsocket::connect failed ".concat(xe),le)}),pe.t0;case 14:case"end":return pe.stop()}},he,this,[[4,10]])})),function(){return Oe.apply(this,arguments)})},{key:"success",value:function(he){var Y;return s(Y=this.sockets).call(Y,function(ae,Fe){he!==Fe&&ae&&(ae.removeAllListenersX("info"),ae.disconnect())}),this.sockets[he]}},{key:"failed",value:function(he){var Y=this.sockets[he];Y&&(Y.removeAllListenersX("info"),Y.disconnect())}},{key:"getTransport",value:function(he){var Y=k.getGlobal();if(typeof window>"u"){var ae=he.split(":");return Y&&!Y.location&&ae.length>1&&(Y.location={protocol:ae.shift(),port:ae.pop(),hostname:ae.join("")}),["websocket"]}return this.clientProto.options.transports?this.clientProto.options.transports:A.name!=="IE"||Y.WebSocket?["websocket"]:["xhr-polling"]}},{key:"doConnect",value:function(he,Y){var ae=this;if(this.clientProto&&this.clientProto.__destroyed===!0)return i.reject("instance has been destroyed");var Fe=this.getTransport(he),ze=u();return new i(function(pe,le){var xe,ue,Ve,Ue;try{Ue=V.connect(he,{transports:c(Fe).call(Fe),reconnect:!1,"force new connection":!0,"connect timeout":y.connectTimeout,needToXHR:typeof ae.clientProto.options.needToXHR=="boolean"?ae.clientProto.options.needToXHR:y.needToXHR}),ae.sockets[Y]=Ue}catch(At){var er;return ae.logger.warn(m(er="link::connectToUrl ".concat(Y,":io.connect caught exception: ")).call(er,At&&At.message),At),void le(new Ce("socket_error",408,{startTime:ze,url:he,reason:At.message,rawError:At}))}ae.logger.info(m(xe=m(ue="link::connectToUrl ".concat(Y,": socket url: ")).call(ue,he,", transports: ")).call(xe,v(Fe))),Ue.on("connect",function(){ae.logger.info("link::connectToUrl ".concat(Y," success")),ae.success(Y),ae.clientProto.url=he,pe(Ue)}),Ue.on("handshake_failed",function(){ae.failed(Y),le(new Ce("handshake_failed",408,{startTime:ze,url:he}))}),Ue.on("connect_failed",function(At){ae.failed(Y),le(new Ce("connect_failed",408,{startTime:ze,url:he,reason:At}))}),Ue.on("error",function(){var At,ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",pr=arguments.length>1?arguments[1]:void 0,ar=pr&&pr.message||ur;ae.logger.warn(m(At="link::onSocketError ".concat(Y,": reason is ")).call(At,ar,", error is "),pr),le(new Ce("socket_error",408,{startTime:ze,url:he,reason:ar,rawError:pr}))}),Ue.on("info",function(At,ur){var pr,ar;ur?ae.logger.info(m(pr="link::onSocketInfo ".concat(Y,": ")).call(pr,At,", extraInfo:"),ur):ae.logger.info(m(ar="link::onSocketInfo ".concat(Y,": ")).call(ar,At,"."))}),Ue.on("message",g(Ve=ae.clientProto.onMessage).call(Ve,ae.clientProto)),Ue.on("disconnect",function(At){ae.logger.warn("link::onSocketDisconnect: socket url: ".concat(he,", disconnected"),At),ae.clientProto.hasLogin=!1,ae.clientProto.doLogout?ae.clientProto.logout():ae.clientProto.onDisconnect("link::socketDisconnect"),ae.clientProto.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to internal reasons"))})})}},{key:"destroy",value:function(){this.urls=[],this.resetSockets()}}]),ie}()},function(t,r,e){var n=e(25).default,o=e(137),s=e(153),a=e(186),i=e(281),d=e(646),u=e(188),c=e(286),m=e(657),v=e(307);function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=g=function(){return b},t.exports.__esModule=!0,t.exports.default=t.exports;var b={},T=Object.prototype,k=T.hasOwnProperty,y=o||function(or,ir,$e){or[ir]=$e.value},A=typeof s=="function"?s:{},V=A.iterator||"@@iterator",Ce=A.asyncIterator||"@@asyncIterator",ie=A.toStringTag||"@@toStringTag";function Oe(or,ir,$e){return o(or,ir,{value:$e,enumerable:!0,configurable:!0,writable:!0}),or[ir]}try{Oe({},"")}catch{Oe=function(ir,$e,tr){return ir[$e]=tr}}function he(or,ir,$e,tr){var nr=ir&&ir.prototype instanceof Fe?ir:Fe,Pt=a(nr.prototype),Et=new ar(tr||[]);return y(Pt,"_invoke",{value:er(or,$e,Et)}),Pt}function Y(or,ir,$e){try{return{type:"normal",arg:or.call(ir,$e)}}catch(tr){return{type:"throw",arg:tr}}}b.wrap=he;var ae={};function Fe(){}function ze(){}function pe(){}var le={};Oe(le,V,function(){return this});var xe=i&&i(i(hr([])));xe&&xe!==T&&k.call(xe,V)&&(le=xe);var ue=pe.prototype=Fe.prototype=a(le);function Ve(or){var ir;d(ir=["next","throw","return"]).call(ir,function($e){Oe(or,$e,function(tr){return this._invoke($e,tr)})})}function Ue(or,ir){var $e;y(this,"_invoke",{value:function(tr,nr){function Pt(){return new ir(function(Et,kt){(function rr(cr,mr,yr,Tr){var Ir=Y(or[cr],or,mr);if(Ir.type!=="throw"){var kr=Ir.arg,Ar=kr.value;return Ar&&n(Ar)=="object"&&k.call(Ar,"__await")?ir.resolve(Ar.__await).then(function(Rr){rr("next",Rr,yr,Tr)},function(Rr){rr("throw",Rr,yr,Tr)}):ir.resolve(Ar).then(function(Rr){kr.value=Rr,yr(kr)},function(Rr){return rr("throw",Rr,yr,Tr)})}Tr(Ir.arg)})(tr,nr,Et,kt)})}return $e=$e?$e.then(Pt,Pt):Pt()}})}function er(or,ir,$e){var tr="suspendedStart";return function(nr,Pt){if(tr==="executing")throw new Error("Generator is already running");if(tr==="completed"){if(nr==="throw")throw Pt;return Ne()}for($e.method=nr,$e.arg=Pt;;){var Et=$e.delegate;if(Et){var kt=At(Et,$e);if(kt){if(kt===ae)continue;return kt}}if($e.method==="next")$e.sent=$e._sent=$e.arg;else if($e.method==="throw"){if(tr==="suspendedStart")throw tr="completed",$e.arg;$e.dispatchException($e.arg)}else $e.method==="return"&&$e.abrupt("return",$e.arg);tr="executing";var rr=Y(or,ir,$e);if(rr.type==="normal"){if(tr=$e.done?"completed":"suspendedYield",rr.arg===ae)continue;return{value:rr.arg,done:$e.done}}rr.type==="throw"&&(tr="completed",$e.method="throw",$e.arg=rr.arg)}}}function At(or,ir){var $e=ir.method,tr=or.iterator[$e];if(tr===void 0)return ir.delegate=null,$e==="throw"&&or.iterator.return&&(ir.method="return",ir.arg=void 0,At(or,ir),ir.method==="throw")||$e!=="return"&&(ir.method="throw",ir.arg=new TypeError("The iterator does not provide a '"+$e+"' method")),ae;var nr=Y(tr,or.iterator,ir.arg);if(nr.type==="throw")return ir.method="throw",ir.arg=nr.arg,ir.delegate=null,ae;var Pt=nr.arg;return Pt?Pt.done?(ir[or.resultName]=Pt.value,ir.next=or.nextLoc,ir.method!=="return"&&(ir.method="next",ir.arg=void 0),ir.delegate=null,ae):Pt:(ir.method="throw",ir.arg=new TypeError("iterator result is not an object"),ir.delegate=null,ae)}function ur(or){var ir={tryLoc:or[0]};1 in or&&(ir.catchLoc=or[1]),2 in or&&(ir.finallyLoc=or[2],ir.afterLoc=or[3]),this.tryEntries.push(ir)}function pr(or){var ir=or.completion||{};ir.type="normal",delete ir.arg,or.completion=ir}function ar(or){this.tryEntries=[{tryLoc:"root"}],d(or).call(or,ur,this),this.reset(!0)}function hr(or){if(or){var ir=or[V];if(ir)return ir.call(or);if(typeof or.next=="function")return or;if(!isNaN(or.length)){var $e=-1,tr=function nr(){for(;++$e<or.length;)if(k.call(or,$e))return nr.value=or[$e],nr.done=!1,nr;return nr.value=void 0,nr.done=!0,nr};return tr.next=tr}}return{next:Ne}}function Ne(){return{value:void 0,done:!0}}return ze.prototype=pe,y(ue,"constructor",{value:pe,configurable:!0}),y(pe,"constructor",{value:ze,configurable:!0}),ze.displayName=Oe(pe,ie,"GeneratorFunction"),b.isGeneratorFunction=function(or){var ir=typeof or=="function"&&or.constructor;return!!ir&&(ir===ze||(ir.displayName||ir.name)==="GeneratorFunction")},b.mark=function(or){return u?u(or,pe):(or.__proto__=pe,Oe(or,ie,"GeneratorFunction")),or.prototype=a(ue),or},b.awrap=function(or){return{__await:or}},Ve(Ue.prototype),Oe(Ue.prototype,Ce,function(){return this}),b.AsyncIterator=Ue,b.async=function(or,ir,$e,tr,nr){nr===void 0&&(nr=c);var Pt=new Ue(he(or,ir,$e,tr),nr);return b.isGeneratorFunction(ir)?Pt:Pt.next().then(function(Et){return Et.done?Et.value:Pt.next()})},Ve(ue),Oe(ue,ie,"Generator"),Oe(ue,V,function(){return this}),Oe(ue,"toString",function(){return"[object Generator]"}),b.keys=function(or){var ir=Object(or),$e=[];for(var tr in ir)$e.push(tr);return m($e).call($e),function nr(){for(;$e.length;){var Pt=$e.pop();if(Pt in ir)return nr.value=Pt,nr.done=!1,nr}return nr.done=!0,nr}},b.values=hr,ar.prototype={constructor:ar,reset:function(or){var ir;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,d(ir=this.tryEntries).call(ir,pr),!or)for(var $e in this)$e.charAt(0)==="t"&&k.call(this,$e)&&!isNaN(+v($e).call($e,1))&&(this[$e]=void 0)},stop:function(){this.done=!0;var or=this.tryEntries[0].completion;if(or.type==="throw")throw or.arg;return this.rval},dispatchException:function(or){if(this.done)throw or;var ir=this;function $e(rr,cr){return Pt.type="throw",Pt.arg=or,ir.next=rr,cr&&(ir.method="next",ir.arg=void 0),!!cr}for(var tr=this.tryEntries.length-1;tr>=0;--tr){var nr=this.tryEntries[tr],Pt=nr.completion;if(nr.tryLoc==="root")return $e("end");if(nr.tryLoc<=this.prev){var Et=k.call(nr,"catchLoc"),kt=k.call(nr,"finallyLoc");if(Et&&kt){if(this.prev<nr.catchLoc)return $e(nr.catchLoc,!0);if(this.prev<nr.finallyLoc)return $e(nr.finallyLoc)}else if(Et){if(this.prev<nr.catchLoc)return $e(nr.catchLoc,!0)}else{if(!kt)throw new Error("try statement without catch or finally");if(this.prev<nr.finallyLoc)return $e(nr.finallyLoc)}}}},abrupt:function(or,ir){for(var $e=this.tryEntries.length-1;$e>=0;--$e){var tr=this.tryEntries[$e];if(tr.tryLoc<=this.prev&&k.call(tr,"finallyLoc")&&this.prev<tr.finallyLoc){var nr=tr;break}}nr&&(or==="break"||or==="continue")&&nr.tryLoc<=ir&&ir<=nr.finallyLoc&&(nr=null);var Pt=nr?nr.completion:{};return Pt.type=or,Pt.arg=ir,nr?(this.method="next",this.next=nr.finallyLoc,ae):this.complete(Pt)},complete:function(or,ir){if(or.type==="throw")throw or.arg;return or.type==="break"||or.type==="continue"?this.next=or.arg:or.type==="return"?(this.rval=this.arg=or.arg,this.method="return",this.next="end"):or.type==="normal"&&ir&&(this.next=ir),ae},finish:function(or){for(var ir=this.tryEntries.length-1;ir>=0;--ir){var $e=this.tryEntries[ir];if($e.finallyLoc===or)return this.complete($e.completion,$e.afterLoc),pr($e),ae}},catch:function(or){for(var ir=this.tryEntries.length-1;ir>=0;--ir){var $e=this.tryEntries[ir];if($e.tryLoc===or){var tr=$e.completion;if(tr.type==="throw"){var nr=tr.arg;pr($e)}return nr}}throw new Error("illegal catch attempt")},delegateYield:function(or,ir,$e){return this.delegate={iterator:hr(or),resultName:ir,nextLoc:$e},this.method==="next"&&(this.arg=void 0),ae}},b}t.exports=g,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(647)},function(t,r,e){t.exports=e(648)},function(t,r,e){var n=e(649);t.exports=n},function(t,r,e){var n=e(228);t.exports=n},function(t,r,e){t.exports=e(651)},function(t,r,e){var n=e(652);e(653),e(654),e(655),e(656),t.exports=n},function(t,r,e){var n=e(230);t.exports=n},function(t,r,e){e(231)},function(t,r,e){e(245)},function(t,r,e){var n=e(1),o=e(68),s=e(100);n({target:"Promise",stat:!0,forced:!0},{try:function(a){var i=o.f(this),d=s(a);return(d.error?i.reject:i.resolve)(d.value),i.promise}})},function(t,r,e){e(246)},function(t,r,e){t.exports=e(658)},function(t,r,e){t.exports=e(659)},function(t,r,e){var n=e(660);t.exports=n},function(t,r,e){var n=e(274);t.exports=n},function(t,r,e){t.exports=e(662)},function(t,r,e){var n=e(663);t.exports=n},function(t,r,e){var n=e(249);t.exports=n},function(t,r,e){var n=e(102),o=e(103),s=e(2),a=e(7),i=e(15),d=e(69),u=e(26),c=e(3),m=e(24),v=e(75).fn,g=e(40),b=e(665),T=e(13),k=e(0),y=e(666);function A(){this.logger.log("offlineListener enter"),this.forceDisconnect(),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to network offline")),this.options.ondisconnect&&this.options.ondisconnect({code:"offlineListener",callFunc:"link::offlineListener",message:"offlineListener disconnect"}),this.onDisconnect("link::offlineListener","broken")}function V(){var Ce=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,function(ie){if(ie){Ce.logger.info("onlineListener heartbeat detect error",ie);try{Ce.forceDisconnect(),Ce.onDisconnect("link::onHeartbeat","broken")}catch(Oe){Ce.logger.info("onlineListener heartbeat websocket.onclose",Oe)}}else Ce.logger.log("onlineListener heartbeat detect success")})):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}v.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},v.resetConnect=function(){var Ce=this.options;k.notundef(Ce.needReconnect)?(k.verifyParamType("needReconnect",Ce.needReconnect,"boolean","link::resetConnect"),this.needReconnect=Ce.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)),k.notundef(Ce.reconnectionAttempts)&&k.verifyParamType("reconnectionAttempts",Ce.reconnectionAttempts,"number","link::resetConnect"),k.notundef(Ce.noCacheLinkUrl)&&k.verifyParamType("noCacheLinkUrl",Ce.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts=typeof Ce.reconnectionAttempts=="number"?Ce.reconnectionAttempts:1/0,this.backoff=new b({min:T.reconnectionDelay,max:T.reconnectionDelayMax,jitter:T.reconnectionJitter})},v.reportTCPException=function(Ce){var ie=this;s(Ce).call(Ce,function(Oe,he){var Y,ae=Oe.event,Fe=ae===void 0?{}:ae,ze=Oe.message,pe=Fe.startTime,le=Fe.code,xe=Fe.reason,ue=Fe.url,Ve="";ze==="handshake_failed"?Ve="handshake_failed":ze==="connect_failed"?Ve=xe?"connect_failed:".concat(xe):"connect_failed":ze==="socket_error"&&(Ve=xe?"socket.io error:".concat(xe):"socket.io error"),ie.logger.warn(a(Y="connect::failed ".concat(he,", ")).call(Y,Ve),Oe),ie.reporter.reportTraceStart("exceptions",{user_id:ie.options.account,trace_id:k.get(self,"socket.socket.sessionid"),start_time:pe,action:0,exception_service:6}),ie.reporter.reportTraceUpdateV2("exceptions",{code:le,description:ze,operation_type:0,target:ue}),ie.reporter.reportTraceEnd("exceptions",1)})},v.connect=o(n.mark(function Ce(){var ie,Oe,he,Y,ae;return n.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(he=this,clearTimeout(he.connectTimer),!he.isConnected()){Fe.next=5;break}return he.logger.warn("link::connect: already connected"),Fe.abrupt("return");case 5:if(!he.connecting){Fe.next=8;break}return he.logger.warn("link::connect: already connecting"),Fe.abrupt("return");case 8:if(he.connecting=!0,he.hasNotifyDisconnected=!1,he.shouldReconnect=!0,he.socket&&he.forceDisconnect(),he.logger.info("link::connect: connect to new socket, autoconnect is "+he.autoconnect),typeof he.options.socketUrl=="string"&&(he.logger.info("link::connect: try to options.socketUrl ",he.options.socketUrl),he.socketUrls=[he.options.socketUrl]),Fe.prev=14,he.socketUrls&&he.socketUrls.length>0){Fe.next=20;break}return Fe.next=18,he.refreshSocketUrl();case 18:he.socketUrls=y(he.socketUrls),he.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(he.imsocket.config.socketConcurrent),he.socketUrls);case 20:Fe.next=26;break;case 22:return Fe.prev=22,Fe.t0=Fe.catch(14),he.logger.warn("connect::refreshSocketUrl: catch exception,",Fe.t0&&Fe.t0.message),Fe.abrupt("return");case 26:return he.imsocket.resetSockets(),he.imsocket.setUrls(i(ie=he.socketUrls).call(ie,0)),d(Oe=he.socketUrls).call(Oe,0,he.imsocket.config.socketConcurrent),Fe.prev=29,Fe.next=32,he.imsocket.connect();case 32:he.socket=Fe.sent,he.onConnect(),Fe.next=43;break;case 36:Fe.prev=36,Fe.t1=Fe.catch(29),ae="",Fe.t1.errors&&(he.reportTCPException(Fe.t1.errors),Y=Fe.t1.errors[0]),Y.message==="handshake_failed"?(he.onHandshakeFailed(Y.event.startTime,Y.event.url),ae="link::onHandshakeFailed"):Y.message==="connect_failed"?(he.onConnectFailed(Y.event.reason,Y.event.startTime,Y.event.url),ae="link::onConnectFailed"):Y.message==="socket_error"?(he.onSocketError(Y.event.reason,Y.event.startTime,Y.event.url),ae="link::onSocketError"):(ae="link::otherFailed",he.logger.warn("link::otherFailed",Y)),this.statusProtector.emit("auth/loginLifeCycleConnectFail",new Error("".concat(ae," 408"))),he.willReconnect()&&he.onDisconnect(ae);case 43:case"end":return Fe.stop()}},Ce,this,[[14,22],[29,36]])})),v.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},v.disconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},ie=this;function Oe(he){clearTimeout(ie.disconnectCallbackTimer),ie.msgAckBufferManager&&ie.msgAckBufferManager.clear(),ie.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to active action")),ie.statusProtector.emit("auth/loginLifeCycleLogout"),u(function(){Ce(he)},0)}clearTimeout(ie.connectTimer),ie.disconnectCallbackTimer=u(function(){Ce.call(ie,"mark disconnected due to timeout")},1e4),ie.mixStorePolicy=null,ie.appGrayConfig=null,ie.resetReconnectStatus(),clearTimeout(ie.mixStorePolicyClock),this.onlineListener&&typeof window<"u"&&k.isFunction(window.removeEventListener)&&(window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener),this.onlineListener=null,this.offlineListener=null),ie.isConnected()?(ie.logger.warn("link::disconnect: start disconnecting"),ie.logout()):ie.connecting?(ie.logger.warn("link::disconnect: abort connecting"),ie.disconnectSocket()):(ie.logger.warn("link::disconnect: already disconnected"),ie.connecting=!1,ie.shouldReconnect=!1,ie.socket=null,ie.autoconnect=!1,ie.options.ondisconnect({code:"alreadyDisconnected",callFunc:"link::disconnect",message:"manually disconnect status"})),ie.socket&&ie.socket.socket&&ie.socket.socket.transport?ie.socket.socket.transport.onDisconnectDone=function(he){ie.logger.warn("link::disconnect: invoke [done] when socket closed",he),Oe(he)}:(ie.logger.warn("link::disconnect: invoke [done]"),Oe(null))},v.resetReconnectStatus=function(){this.backoff&&(this.backoff.setMin(T.reconnectionDelay),this.backoff.setMax(T.reconnectionDelayMax),this.backoff.reset()),this.retryCount=0,this.autoconnect=!0,this.logger.info("link::resetReconnectStatus: reset retryCount and backoff")},v.onConnect=function(){this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect success"),this.statusProtector.emit("auth/loginLifeCycleConnectSucc"),this.login()},v.onDisconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ie=arguments.length>1?arguments[1]:void 0,Oe=this;this.logger.warn("socket::onDisconnect: "+Ce),Oe.connecting=!1,Oe.markAllCallbackInvalid(g.newNetworkError({callFunc:Ce,uploadCode:415,disconnectReason:ie})),Oe.msgAckBufferManager&&Oe.msgAckBufferManager.clear(),Oe.stopHeartbeat(),Oe.reconnect()},v.willReconnect=function(){return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts},v.reconnect=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.__destroyed)if(this.willReconnect()){if(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.socketUrls.length===0&&!this.options.socketUrl&&typeof Ce.allFailedCB=="function")return this.logger.log("reconnect: All socket links have been polled, trigger hooks"),void Ce.allFailedCB();this.doReconnect()}else this.notifyDisconnect({code:"allAttemptsFailed",message:"All attempts failed"})},v.doReconnect=function(){var Ce,ie=this;ie.socket=null,ie.retryCount++,ie.hasLogin=!1;var Oe,he=ie.backoff.duration();ie.logger.info(a(Ce="link::reconnect: will retry after ".concat(he,"ms, retryCount ")).call(Ce,ie.retryCount)),Oe=ie.options.onwillreconnect({retryCount:ie.retryCount,duration:he}),ie.statusProtector.emit("auth/loginLifeCycleWaiting"),clearTimeout(ie.connectTimer),ie.connectTimer=u(function(){+ie.options.authType==1&&Oe instanceof c?(ie.logger.info("link::reconnect: wait onwillreconnect promise"),Oe.finally(function(){return ie.connect()})):ie.connect()},he)},v.notifyConnectError=function(Ce){var ie=g.newConnectError({message:Ce,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",ie),this.options.onerror(ie)},v.notifyDisconnect=function(Ce){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(Ce=Ce||new g).retryCount=this.retryCount,Ce.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.autoconnect=!1,this.logger.info("link::notifyDisconnect: ondisconnected",Ce),this.options.ondisconnect(Ce),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},v.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket&&this.socket.disconnect()}catch(Ce){this.socket&&typeof this.socket.removeAllListenersX=="function"&&this.socket.removeAllListenersX("info"),this.logger.info("link::disconnectSocket: disconnect failed, error ",Ce&&Ce.message)}}},v.initOnlineListener=function(){this.needReconnect&&this.options&&this.options.quickReconnect?typeof window<"u"&&k.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=m(V).call(V,this),this.offlineListener=m(A).call(A,this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},v.forceDisconnect=function(){var Ce=this.socket||{};this.socket=null;try{typeof Ce.removeAllListenersX=="function"&&Ce.removeAllListenersX("info"),typeof Ce.disconnect=="function"&&Ce.disconnect()}catch(ie){this.logger.error("forceDisconnect:: oldSocket error",ie||ie.message)}this.hasLogin=!1}},function(t,r){function e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),s=Math.floor(o*this.jitter*n);n=1&Math.floor(10*o)?n+s:n-s}return 0|Math.min(n,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(n){this.ms=n},e.prototype.setMax=function(n){this.max=n},e.prototype.setJitter=function(n){this.jitter=n}},function(t,r,e){var n=e(667);t.exports=function(o){return o&&o.length?n(o):[]}},function(t,r,e){var n=e(668),o=e(671),s=e(676),a=e(677),i=e(678),d=e(288);t.exports=function(u,c,m){var v=-1,g=o,b=u.length,T=!0,k=[],y=k;if(m)T=!1,g=s;else if(b>=200){var A=c?null:i(u);if(A)return d(A);T=!1,g=a,y=new n}else y=c?[]:k;e:for(;++v<b;){var V=u[v],Ce=c?c(V):V;if(V=m||V!==0?V:0,T&&Ce==Ce){for(var ie=y.length;ie--;)if(y[ie]===Ce)continue e;c&&y.push(Ce),k.push(V)}else g(y,Ce,m)||(y!==k&&y.push(Ce),k.push(V))}return k}},function(t,r,e){var n=e(258),o=e(669),s=e(670);function a(i){var d=-1,u=i==null?0:i.length;for(this.__data__=new n;++d<u;)this.add(i[d])}a.prototype.add=a.prototype.push=o,a.prototype.has=s,t.exports=a},function(t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(672);t.exports=function(o,s){return!!(o!=null&&o.length)&&n(o,s,0)>-1}},function(t,r,e){var n=e(673),o=e(674),s=e(675);t.exports=function(a,i,d){return i==i?s(a,i,d):n(a,o,d)}},function(t,r){t.exports=function(e,n,o,s){for(var a=e.length,i=o+(s?1:-1);s?i--:++i<a;)if(n(e[i],i,e))return i;return-1}},function(t,r){t.exports=function(e){return e!=e}},function(t,r){t.exports=function(e,n,o){for(var s=o-1,a=e.length;++s<a;)if(e[s]===n)return s;return-1}},function(t,r){t.exports=function(e,n,o){for(var s=-1,a=e==null?0:e.length;++s<a;)if(o(n,e[s]))return!0;return!1}},function(t,r){t.exports=function(e,n){return e.has(n)}},function(t,r,e){var n=e(270),o=e(679),s=e(288),a=n&&1/s(new n([,-0]))[1]==1/0?function(i){return new n(i)}:o;t.exports=a},function(t,r){t.exports=function(){}},function(t,r,e){var n,o=e(75).fn,s=e(40),a=e(192),i=e(0),d=e(13),u=e(44),c=e(74),m=i.notundef;o.genSessionKey=(n={},function(){var v=this.name;return n[v]=n[v]||i.guid()}),o.afterLogin=i.emptyFunc,o.assembleIMLogin=function(){var v=this.options,g=v.account;this.sdkSession=this.genSessionKey();var b={appLogin:this.autoconnect?0:1,appKey:v.appKey,account:g,token:v.token,sdkVersion:d.info.sdkVersion,sdkHumanVersion:d.info.sdkHumanVersion,protocolVersion:d.info.protocolVersion,os:c.os.toString()==="[object Object]"?c.os.family:c.os.toString(),browser:c.name+" "+c.version,clientType:d.CLIENTTYPE||16,session:this.sdkSession,deviceId:u.deviceId,isReactNative:d.isRN?1:0,customTag:v.customTag||"",sdkType:0};return b.userAgent="Native/".concat(d.info.sdkHumanVersion),d.isBrowser?b.sdkType=0:d.isRN?b.sdkType=2:d.isWeixinApp&&(b.sdkType=6),v.customClientType&&(b.customClientType=+v.customClientType),v.authType&&(b.authType=+v.authType),v.loginExt&&(b.loginExt=v.loginExt),b},o.notifyLogin=function(v){this.logger.info("link::notifyLogin: on connect",v),this.options.onconnect(v)},o.logout=function(){if(this.doLogout)return this.doLogout=!1,void this.onAuthError(new s("done logout","logout",{disconnectReason:"close",uploadCode:415}),"link::logout");this.isConnected()&&this.onAuthError(new s("done disconnect","logout",{disconnectReason:"close",uploadCode:415}),"link::logout")},o.onKicked=function(v){var g=v.content,b=g.from,T=g.reason,k=g.custom,y=g.customClientType,A={reason:this.kickedReasons[T]||"unknown",message:this.kickedMessages[T]||"未知原因"};m(b)&&(A.from=a.reverseType(b)),m(k)&&(A.custom=k),+y>0&&(A.customClientType=y),this.logger.warn("link::onKicked:",A);var V=new s("被踢了","kicked",{disconnectReason:"kicked",uploadCode:415});i.merge(V,A),this.onAuthError(V,"link::onKicked"),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to kicked")),this.statusProtector.emit("auth/loginLifeCycleKicked",A)},o.onAuthError=function(v,g){var b=v&&v.code;if(this.logger.error("onAuthError ",g,b),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(b))return this.forceDisconnect(),void this.onDisconnect("link::onAuthError::"+b,"broken");(v=v||s.newConnectionError({callFunc:g,uploadCode:415,disconnectReason:"close"})).callFunc=v.callFunc||g||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(v),this.notifyDisconnect(v)}},function(t,r,e){var n=e(26),o=e(24),s=e(25),a=e(75).fn,i=e(13),d=e(0);a.processLink=function(u){switch(u.cmd){case"heartbeat":this.startHeartbeat();break;case"notifyDetect":s(d._get(u,"content.notifyDetectTag"))==="object"&&(u.content.notifyDetectTag.t3=new Date().getTime(),this.startDetect(u))}},a.startHeartbeat=function(){var u=this;u.stopHeartbeat(),u.heartbeatTimer=n(function(){var c;u.sendCmd("heartbeat",null,o(c=u.onHeartbeat).call(c,u))},i.heartbeatInterval)},a.startDetect=function(u){var c=u.content.notifyDetectTag;c.t4=new Date().getTime(),this.sendCmd("uploadDetect",{notifyDetectTag:c})},a.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},a.onHeartbeat=function(u){if(u){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();var c;u.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",u),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",u.code,u),u.code==="Error_Timeout"&&(this.checkNetworkAvailable()!==!1?this.heartbeatFail>1?(this.forceDisconnect(),this.onDisconnect("link::onHeartbeat","broken")):this.sendCmd("heartbeat",null,o(c=this.onHeartbeat).call(c,this)):this.startHeartbeat())}else this.heartbeatFail=0},a.checkNetworkAvailable=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?function(){return navigator.onLine}:function(){},a.heartbeat=function(){}},function(t,r,e){var n=e(3),o=e(6),s=e(26),a=e(52),i=e(75).fn,d=e(284),u=e(13),c=e(44);i.processMisc=function(m){switch(m.cmd){case"getSimpleNosToken":m.error||(m.obj=m.content.nosTokens[0]);break;case"getNosToken":m.error||(m.obj=m.content.nosToken);break;case"getGrayscaleConfig":m.error||(m.obj=m.content.appGrayConfigTag);break;case"getMixStorePolicy":m.error||(m.obj=m.content.mixStorePolicyTag);break;case"getMixStoreToken":m.error||(m.obj=m.content.mixStoreTokenTag);break;case"getBackSourceToken":m.error||(m.obj=m.content.backSourceTokenTag);break;case"uploadSdkLogUrl":m.error?this.logger.error("uploadSdkLogUrl::error",m.error):this.logger.info("uploadSdkLogUrl::success",m.obj&&m.obj.url);break;case"notifyUploadLog":m.error||(u.isRN?this.uploadLocalLogRN():u.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":m.error||(m.obj.text=m.content.text);break;case"processImage":m.obj.imageOps=d.reverseImageOps(m.obj.imageOps),m.error||(m.obj={url:m.content.url});break;case"getNosTokenTrans":m.error||(m.obj={nosToken:m.content.nosToken,docId:m.content.docId});break;case"getNosOriginUrl":m.error||(m.obj=m.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":m.error||this.emitAPI({type:"notifyTransLog",obj:m.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":m.error||(m.obj=m.content);break;case"getServerTime":m.obj=m.content&&m.content.time;break;case"getNosCdnHost":this.getNosCdnHost(m)}},i.uploadLocalLogRN=function(){if(u.isRN&&c.rnfs){var m=c.rnfs,v=this,g=m.nimIndex,b=(m.nimIndex+1)%2;m.nimPromise=m.nimPromise.then(function(){return n.all([m.exists(T(g)),m.exists(T(b))])}).then(function(k){return k&&(k[0]||k[1])?k[0]&&k[1]?m.copyFile(T(b),T(2)).then(function(){return m.readFile(T(g))}).then(function(y){return m.appendFile(T(2),y)}):k[0]?m.copyFile(T(g),T(2)):void(k[1]&&m.copyFile(T(b),T(2))):n.reject()}).then(function(){return new n(function(k){v.api.previewFile({filePath:T(2),done:function(y,A){if(n.all([m.unlink(T(2)),m.unlink(T(1)),m.unlink(T(0))]).finally(function(){k()}),y)v.logger.error("nim::uploadLocalLogRN:previewFile:error",y);else{var V=A.url;o(V).call(V,"?")>0?V+="&":V+="?",V+="download="+new Date().getTime()+"_rn.log",v.api.uploadSdkLogUrl({url:V})}}})})}).catch(function(k){m.unlink(T(2)).catch(function(){}),v.logger.error("nim::protocol::uploadLocalLogRN",k)})}function T(k){return m.DocumentDirectoryPath+"/nimlog_"+k+".log"}},i.uploadLocalLogWeb=function(){var m=this;this.options.dbLog!==!1&&this.logger._local?this.logger._local.fetchLog().then(function(v){m.api.previewFile({blob:new Blob([v.logs],{type:"text/plain"}),done:function(g,b){if(g)m.logger.error("uploadLocalLogWeb::previewFile:error",g);else{m.logger.log("uploadLocalLogWeb::previewFile:success",b);var T=b.url;T+=(o(T).call(T,"?")>0?"&":"?")+"download="+new Date().getTime()+"_web.log",m.api.uploadSdkLogUrl({url:T}),m.logger._local.deleteLogs(v.time).then(function(){m.logger.log("uploadLocalLogWeb::deleteLogs success")}).catch(function(k){return m.logger.error("uploadLocalLogWeb::deleteLogs:error ,",k)})}}})}).catch(function(v){m.logger.error("uploadLocalLogWeb::fetchLog:error",v)}):this.logger.warn("uploadLocalLogWeb::no dbLog")},i.getNosCdnHost=function(m){var v=this,g=m.error;if(g&&(g.callFunc="events::getNosCdnHost",v.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",g)),m.content&&m.content.nosConfigTag){var b=m.content.nosConfigTag,T="",k="";b.expire!==0&&b.cdnDomain?b.expire===-1?(T=b.cdnDomain,k=b.objectNamePrefix):(T=b.cdnDomain,k=b.objectNamePrefix,v.nosCdnHostTimer&&clearTimeout(v.nosCdnHostTimer),v.nosCdnHostTimer=s(function(){v.sendCmd("getNosCdnHost",{})},800*a(b.expire))):(T="",k=""),u.serverNosConfig.cdnDomain=T,u.serverNosConfig.objectPrefix=k,u.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",T),localStorage.setItem("nim_object_prefix",k))}}},function(t,r,e){var n=e(8),o=e(32),s=e(75).fn,a=e(0),i=e(285),d=e(105).EMSyncType;s.processAvSignal=function(c){switch(c.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":case"signalingCallEx":break;case"signalingNotify":this.onSignalingNotify(c);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(c);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(c);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(c);break;default:this.logger.warn("avSignal::unhandled cmd:",c.cmd)}};var u=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(c.needPush&&(c.needPush=c.needPush==="1"),c.needBadge&&(c.needBadge=c.needBadge==="1"),c.channelInValid&&(c.channelInValid=c.channelInValid==="1"),c.attach){var m=JSON.parse(c.attach);c.eventType=i.parseAvSignalType(m.type)}if(c.members){var v=JSON.parse(c.members);c.members=n(v).call(v,function(g){return i.parseAvSignalMember(g)})}return c};s.onSignalingNotify=function(c){if(c.error){var m=c.error;this.logger.error("protocal::avSignal:onSignalingNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{c.raw&&c.raw.r&&c.raw.r.length&&c.content&&c.content.avSignalTag&&(c.content.avSignalTag.msgid=c.raw.r[0]);var v=c.content.avSignalTag;v=o(v)?n(v).call(v,function(g){return u(g)}):u(v),this.emitAPI({type:"signalingNotify",obj:v}),a.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(v)}},s.onSignalingMutilClientSyncNotify=function(c){if(c.error){var m=c.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=c.content.avSignalTag;v=o(v)?n(v).call(v,function(g){return u(g)}):u(v),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:v}),a.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(v)}},s.onSignalingUnreadMessageSyncNotify=function(c){if(c.error){var m=c.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=c.content.avSignalTag;o(v)&&(v=n(v).call(v,function(g){return u(g)})),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:v}),this.reporterHook.emit("reporter/syncItemComplete",d.kSyncType15_13),a.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(v)}},s.onSignalingMembersSyncNotify=function(c){if(c.error){var m=c.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",m),this.emitAPI({type:"error",error:m}),this.options.onerror(m)}else{var v=c.content.avSignalTag;o(v)||(v=[v]),v=n(v).call(v,function(g){return u(g)}),this.emitAPI({type:"signalingChannelsSyncNotify",obj:v}),a.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(v)}}},function(t,r,e){var n=e(10),o=e(24),s=e(0),a=e(75).fn,i=e(116),d=e(276);a.adaptersRequest=function(u){var c=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2?arguments[2]:void 0,g=m.onerror||function(){},b=new Date().getTime(),T=s.get(v,"exception_service")||0;return m.onerror=function(){g.apply(void 0,arguments);var k=arguments.length<=0?void 0:arguments[0];c.reporter.reportTraceStart("exceptions",{user_id:c.account,trace_id:s.get(self,"socket.socket.sessionid"),start_time:b,action:1,exception_service:T}),c.reporter.reportTraceUpdateV2("exceptions",{code:typeof k.status=="number"?k.status:typeof k.code=="number"?k.code:0,description:k.message||"".concat(k.code),operation_type:0,target:u,context:m?n(m):"",net_connect:c.checkNetworkAvailable()}),c.reporter.reportTraceEnd("exceptions",1)},i(u,m)},a.adaptersUploadFile=function(u,c){var m,v=this;u.adaptersRequest=o(m=a.adaptersRequest).call(m,this);var g=new Date().getTime();return u.errorHook=function(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b){v.reporter.reportTraceStart("exceptions",{user_id:v.account,trace_id:s.get(self,"socket.socket.sessionid"),start_time:g,action:1,exception_service:T.provider==="s3"?4:3});var k=T.url||u.url;b.bucket&&(k=n(b)),v.reporter.reportTraceUpdateV2("exceptions",{code:typeof b.status=="number"?b.status:typeof b.code=="number"?b.code:0,description:b.message||"".concat(b.code),operation_type:1,target:k,net_connect:v.checkNetworkAvailable()}),v.reporter.reportTraceEnd("exceptions",1)}},new d(u,this,c)}},function(t,r,e){e(290);var n,o,s,a=e(47),i=e(57),d=e(41),u=e(2),c=e(3),m=e(5),v=e(26),g=e(17),b=e(15),T=e(7),k=e(25);s=function(){function y(Ce,ie){for(var Oe=0;Oe<ie.length;Oe++){var he=ie[Oe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),a(Ce,he.key,he)}}var A={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},V=function(){};return function(){function Ce(he){(function(Y,ae){if(!(Y instanceof ae))throw new TypeError("Cannot call a class as a function")})(this,Ce),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=A,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=i(),this.timer=null,this.setConfig(he),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}var ie,Oe;return ie=Ce,(Oe=[{key:"setConfig",value:function(he){this.reportConfig=d({},this.reportConfig,he),this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(he,Y){var ae=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(he,d({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Y)).catch(function(Fe){var ze,pe;(pe=(ze=ae.reportConfig)===null||ze===void 0?void 0:ze.logger)===null||pe===void 0||pe.warn("Reporter immediately upload failed",Fe)})}},{key:"report",value:function(he,Y){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(ae.priority||(ae.priority=this.getEventPriority(he,Y)),this.reportConfig.isDataReportEnable&&he){var Fe=i();ae.priority==="HIGH"?this.highPriorityMsgList.push({module:he,msg:Y,createTime:Fe}):ae.priority==="NORMAL"?this.msgList.push({module:he,msg:Y,createTime:Fe}):ae.priority==="LOW"&&this.lowPriorityMsgList.push({module:he,msg:Y,createTime:Fe}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(he,Y){if(this.reportConfig.isDataReportEnable&&he&&!this.traceMsgCache[he]){var ae=d(d({start_time:i()},Y),{extension:[]});this.traceMsgCache[he]=ae}}},{key:"reportTraceUpdate",value:function(he){}},{key:"reportTraceUpdateV2",value:function(he,Y,ae){var Fe,ze=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[he]){var pe=this.traceMsgCache[he].extension.length,le=new Date().getTime();Y.duration=pe===0?le-this.traceMsgCache[he].start_time:le-this.traceMsgCache[he].extension[pe-1].end_time,this.traceMsgCache[he].extension.push(d({end_time:le},Y)),ae!=null&&ae.asyncParams&&((Fe=this.traceMsgCache[he]).asyncPromiseArray||(Fe.asyncPromiseArray=[]),this.traceMsgCache[he].asyncPromiseArray.push(ae.asyncParams.then(function(xe){var ue=ze.traceMsgCache[he].extension.length-1;d(ze.traceMsgCache[he].extension[ue],xe)})))}}},{key:"reportTraceEnd",value:function(he){var Y,ae=this,Fe=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[he])if(he!=="nos"||Fe===!1)if(typeof Fe=="boolean"?this.traceMsgCache[he].succeed=!!Fe:this.traceMsgCache[he].state=Fe,this.traceMsgCache[he].duration=i()-this.traceMsgCache[he].start_time,u(Y=this.traceMsgCache[he].extension).call(Y,function(pe){delete pe.end_time}),this.traceMsgCache[he].asyncPromiseArray){var ze=this.traceMsgCache[he];c.all(this.traceMsgCache[he].asyncPromiseArray).finally(function(){ze===ae.traceMsgCache[he]&&(delete ae.traceMsgCache[he].asyncPromiseArray,ae.report(he,ae.traceMsgCache[he],{priority:ae.getEventPriority(he,ae.traceMsgCache[he])}),ae.traceMsgCache[he]=null)})}else this.report(he,this.traceMsgCache[he],{priority:this.getEventPriority(he,this.traceMsgCache[he])}),this.traceMsgCache[he]=null;else this.traceMsgCache[he]=null}},{key:"getEventPriority",value:function(he,Y){if(he==="exceptions"){if(Y.action===0||Y.action===2||Y.action===1&&Y.exception_service!==0)return"HIGH"}else if(he==="msgReceive"||he==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(he){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[he]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var he,Y=this;this.reportConfig.isDataReportEnable&&(u(he=m(this.traceMsgCache)).call(he,function(ae){Y.reportTraceEnd(ae,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=V,this.report=V,this.reportTraceStart=V,this.reportTraceUpdate=V,this.reportTraceEnd=V,this.pause=V,this.restore=V,this.destroy=V,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var he,Y,ae=this;if(!this.loading){this.loading=!0;var Fe=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:Fe.dev_id,sdkVer:Fe.sdk_ver,platform:Fe.platform,appkey:Fe.app_key},timeout:this.reportConfig.timeout}).then(function(ze){var pe,le;if(!ae.isDestroyed){if(ze.status===200&&ze.data&&ze.data.code===200){var xe=ze.data.data||{};ae.reportConfig.maxSize=xe.maxSize>1e3?1e3:xe.maxSize,ae.reportConfig.maxInterval=xe.maxInterval>1e4?1e4:xe.maxInterval,ae.reportConfig.maxInterval=xe.maxInterval<10?10:xe.maxInterval,ae.reportConfig.minInterval=xe.minInterval<2?2:xe.minInterval,ae.reportConfig.maxDelay=xe.maxDelay||300,ae.reportConfig.maxInterval=1e3*ae.reportConfig.maxInterval,ae.reportConfig.minInterval=1e3*ae.reportConfig.minInterval,ae.reportConfig.maxDelay=1e3*ae.reportConfig.maxDelay,ae.isUploadEnable=!0,ae.initConfigLoaded=!0,ae.loading=!1,ae.reportHeartBeat()}(le=(pe=ae.reportConfig)===null||pe===void 0?void 0:pe.logger)===null||le===void 0||le.log("Get reporter upload config success")}}).catch(function(ze){var pe,le;ae.loading=!1,(le=(pe=ae.reportConfig)===null||pe===void 0?void 0:pe.logger)===null||le===void 0||le.error("Get reporter upload config failed",ze)})}catch(ze){this.loading=!1,(Y=(he=this.reportConfig)===null||he===void 0?void 0:he.logger)===null||Y===void 0||Y.error("Exec reporter request failed",ze)}}}},{key:"reportHeartBeat",value:function(){var he=this;this.isDestroyed||(this.timer=v(function(){he.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var he=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;i()-this.lastReportTime>=he&&this.upload()}}},{key:"getUploadMsg",value:function(){var he,Y,ae,Fe,ze,pe,le=this,xe={},ue=i();this.highPriorityMsgList=g(he=this.highPriorityMsgList).call(he,function(ir){return ue-ir.createTime<le.reportConfig.maxDelay}),this.msgList=g(Y=this.msgList).call(Y,function(ir){return ue-ir.createTime<le.reportConfig.maxDelay}),this.lowPriorityMsgList=g(ae=this.lowPriorityMsgList).call(ae,function(ir){return ue-ir.createTime<le.reportConfig.maxDelay}),this.cacheMsgList=g(Fe=this.cacheMsgList).call(Fe,function(ir){return ue-ir.createTime<le.reportConfig.maxDelay});var Ve=b(ze=this.highPriorityMsgList).call(ze,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=b(pe=this.highPriorityMsgList).call(pe,Ve.length),Ve.length<this.reportConfig.maxSize){var Ue,er,At=this.reportConfig.maxSize-Ve.length;Ve=T(Ve).call(Ve,b(Ue=this.msgList).call(Ue,0,At)),this.msgList=b(er=this.msgList).call(er,At)}if(Ve.length<this.reportConfig.maxSize){var ur,pr,ar=this.reportConfig.maxSize-Ve.length;Ve=T(Ve).call(Ve,b(ur=this.lowPriorityMsgList).call(ur,0,ar)),this.lowPriorityMsgList=b(pr=this.lowPriorityMsgList).call(pr,ar)}if(Ve.length<this.reportConfig.maxSize){var hr,Ne,or=this.reportConfig.maxSize-Ve.length;Ve=T(Ve).call(Ve,b(hr=this.cacheMsgList).call(hr,0,or)),this.cacheMsgList=b(Ne=this.cacheMsgList).call(Ne,or)}return u(Ve).call(Ve,function(ir){xe[ir.module]?xe[ir.module].push(ir.msg):xe[ir.module]=[ir.msg]}),{uploadMsgArr:Ve,uploadMsg:xe}}},{key:"upload",value:function(){var he,Y,ae=this;if(this.isUploadEnable&&!(this.lastReportTime&&i()-this.lastReportTime<this.reportConfig.minInterval)){var Fe=this.getUploadMsg(),ze=Fe.uploadMsgArr,pe=Fe.uploadMsg;if(ze.length){this.lastReportTime=i();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:pe},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(le){var xe,ue,Ve,Ue;ae.cacheMsgList=b(xe=T(ue=ae.cacheMsgList).call(ue,ze)).call(xe,0,ae.reportConfig.cacheMaxSize),(Ue=(Ve=ae.reportConfig)===null||Ve===void 0?void 0:Ve.logger)===null||Ue===void 0||Ue.warn("Reporter upload failed",le)})}catch(le){(Y=(he=this.reportConfig)===null||he===void 0?void 0:he.logger)===null||Y===void 0||Y.warn("Exec reporter request failed",le)}clearTimeout(this.timer),this.reportHeartBeat()}}}}])&&y(ie.prototype,Oe),a(ie,"prototype",{writable:!1}),Ce}()},k(r)==="object"&&t!==void 0?t.exports=s():(o=typeof(n=s)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=o)},function(t,r,e){t.exports=e(687)},function(t,r,e){e(688);var n=e(689);t.exports=n},function(t,r,e){e(291)},function(t,r,e){var n=e(690);t.exports=n},function(t,r,e){var n=e(691);t.exports=n},function(t,r,e){e(291),t.exports=e(14)},function(t,r,e){var n,o,s,a=e(122),i=e(121),d=e(279),u=e(280),c=e(189),m=e(693),v=(e(290),e(2)),g=e(5),b=e(7),T=e(3),k=e(26),y=e(10),A=e(277),V=e(25);function Ce(ie){var Oe=function(){if(typeof Reflect>"u"||!A||A.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(A(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var he,Y=c(ie);if(Oe){var ae=c(this).constructor;he=A(Y,arguments,ae)}else he=Y.apply(this,arguments);return u(this,he)}}s=function(){function ie(he){if(he){var Y,ae="";return v(Y=g(he)).call(Y,function(Fe,ze){var pe;ae+=ze===0?"?":"&",ae+=b(pe="".concat(Fe,"=")).call(pe,he[Fe])}),ae}return""}var Oe=function(he){d(ae,he);var Y=Ce(ae);function ae(Fe,ze,pe,le){var xe;return i(this,ae),(xe=Y.call(this,pe)).source=Fe,xe.code=ze,xe.desc=pe,xe.detail=le||{},xe}return a(ae)}(m(Error));return function(he){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{dataType:"json",method:"GET",timeout:5e3},ae=Y.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",Fe=Y.method==="GET"?ie(Y.params):"";return new T(function(ze,pe){if(window.XMLHttpRequest){var le,xe,ue=new XMLHttpRequest;if(ue.onreadystatechange=function(){if(ue.readyState===4)if(ue.status===200){try{xe=JSON.parse(ue.response||"{}")}catch{xe=ue.response}ze({status:ue.status,data:xe})}else k(function(){var Ue;pe(new Oe(1,ue.status,b(Ue="readyState: ".concat(ue.readyState,"; statusText: ")).call(Ue,ue.statusText)))},0)},ue.open(Y.method,b(le="".concat(he)).call(le,Fe)),ue.timeout=Y.timeout||5e3,ue.setRequestHeader("Content-Type",ae),Y.headers)for(var Ve in Y.headers)ue.setRequestHeader(Ve,Y.headers[Ve]);ue.ontimeout=function(Ue){pe(new Oe(1,408,Ue&&Ue.message?Ue.message:"request timeout"))},ue.send(y(Y.data))}else pe(new Oe(2,10400,"request no suppout"))})}},V(r)==="object"&&t!==void 0?t.exports=s():(o=typeof(n=s)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=o)},function(t,r,e){var n=e(694),o=e(186),s=e(189),a=e(187),i=e(733),d=e(734);function u(c){var m=typeof n=="function"?new n:void 0;return t.exports=u=function(v){if(v===null||!i(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(v))return m.get(v);m.set(v,g)}function g(){return d(v,arguments,s(this).constructor)}return g.prototype=o(v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),a(g,v)},t.exports.__esModule=!0,t.exports.default=t.exports,u(c)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(695)},function(t,r,e){t.exports=e(696)},function(t,r,e){var n=e(697);e(708),e(710),e(712),e(714),e(715),e(717),e(718),e(719),e(720),e(721),e(723),e(724),e(725),e(726),e(727),e(728),e(729),e(730),e(731),e(732),t.exports=n},function(t,r,e){var n=e(698);t.exports=n},function(t,r,e){var n=e(699);e(67),t.exports=n},function(t,r,e){e(82),e(700),e(96),e(113);var n=e(12);t.exports=n.Map},function(t,r,e){e(701)},function(t,r,e){e(702)("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},e(706))},function(t,r,e){var n=e(1),o=e(14),s=e(292),a=e(4),i=e(53),d=e(46),u=e(167),c=e(16),m=e(28),v=e(81),g=e(38).f,b=e(84).forEach,T=e(27),k=e(97),y=k.set,A=k.getterFor;t.exports=function(V,Ce,ie){var Oe,he=V.indexOf("Map")!==-1,Y=V.indexOf("Weak")!==-1,ae=he?"set":"add",Fe=o[V],ze=Fe&&Fe.prototype,pe={};if(T&&c(Fe)&&(Y||ze.forEach&&!a(function(){new Fe().entries().next()}))){var le=(Oe=Ce(function(ue,Ve){y(u(ue,le),{type:V,collection:new Fe}),Ve!=null&&d(Ve,ue[ae],{that:ue,AS_ENTRIES:he})})).prototype,xe=A(V);b(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(ue){var Ve=ue=="add"||ue=="set";!(ue in ze)||Y&&ue=="clear"||i(le,ue,function(Ue,er){var At=xe(this).collection;if(!Ve&&Y&&!m(Ue))return ue=="get"&&void 0;var ur=At[ue](Ue===0?0:Ue,er);return Ve?this:ur})}),Y||g(le,"size",{configurable:!0,get:function(){return xe(this).collection.size}})}else Oe=ie.getConstructor(Ce,V,he,ae),s.enable();return v(Oe,V,!1,!0),pe[V]=Oe,n({global:!0,forced:!0},pe),Y||ie.setStrong(Oe,V,he),Oe}},function(t,r,e){var n=e(4),o=e(28),s=e(63),a=e(704),i=Object.isExtensible,d=n(function(){});t.exports=d||a?function(u){return!!o(u)&&(!a||s(u)!="ArrayBuffer")&&(!i||i(u))}:i},function(t,r,e){var n=e(4);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},function(t,r,e){var n=e(4);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,r,e){var n=e(38).f,o=e(80),s=e(707),a=e(34),i=e(167),d=e(91),u=e(46),c=e(165),m=e(166),v=e(236),g=e(27),b=e(292).fastKey,T=e(97),k=T.set,y=T.getterFor;t.exports={getConstructor:function(A,V,Ce,ie){var Oe=A(function(ze,pe){i(ze,he),k(ze,{type:V,index:o(null),first:void 0,last:void 0,size:0}),g||(ze.size=0),d(pe)||u(pe,ze[ie],{that:ze,AS_ENTRIES:Ce})}),he=Oe.prototype,Y=y(V),ae=function(ze,pe,le){var xe,ue,Ve=Y(ze),Ue=Fe(ze,pe);return Ue?Ue.value=le:(Ve.last=Ue={index:ue=b(pe,!0),key:pe,value:le,previous:xe=Ve.last,next:void 0,removed:!1},Ve.first||(Ve.first=Ue),xe&&(xe.next=Ue),g?Ve.size++:ze.size++,ue!=="F"&&(Ve.index[ue]=Ue)),ze},Fe=function(ze,pe){var le,xe=Y(ze),ue=b(pe);if(ue!=="F")return xe.index[ue];for(le=xe.first;le;le=le.next)if(le.key==pe)return le};return s(he,{clear:function(){for(var ze=Y(this),pe=ze.index,le=ze.first;le;)le.removed=!0,le.previous&&(le.previous=le.previous.next=void 0),delete pe[le.index],le=le.next;ze.first=ze.last=void 0,g?ze.size=0:this.size=0},delete:function(ze){var pe=Y(this),le=Fe(this,ze);if(le){var xe=le.next,ue=le.previous;delete pe.index[le.index],le.removed=!0,ue&&(ue.next=xe),xe&&(xe.previous=ue),pe.first==le&&(pe.first=xe),pe.last==le&&(pe.last=ue),g?pe.size--:this.size--}return!!le},forEach:function(ze){for(var pe,le=Y(this),xe=a(ze,arguments.length>1?arguments[1]:void 0);pe=pe?pe.next:le.first;)for(xe(pe.value,pe.key,this);pe&&pe.removed;)pe=pe.previous},has:function(ze){return!!Fe(this,ze)}}),s(he,Ce?{get:function(ze){var pe=Fe(this,ze);return pe&&pe.value},set:function(ze,pe){return ae(this,ze===0?0:ze,pe)}}:{add:function(ze){return ae(this,ze=ze===0?0:ze,ze)}}),g&&n(he,"size",{get:function(){return Y(this).size}}),Oe},setStrong:function(A,V,Ce){var ie=V+" Iterator",Oe=y(V),he=y(ie);c(A,V,function(Y,ae){k(this,{type:ie,target:Y,state:Oe(Y),kind:ae,last:void 0})},function(){for(var Y=he(this),ae=Y.kind,Fe=Y.last;Fe&&Fe.removed;)Fe=Fe.previous;return Y.target&&(Y.last=Fe=Fe?Fe.next:Y.state.first)?m(ae=="keys"?Fe.key:ae=="values"?Fe.value:[Fe.key,Fe.value],!1):(Y.target=void 0,m(void 0,!0))},Ce?"entries":"values",!Ce,!0),v(V)}}},function(t,r,e){var n=e(66);t.exports=function(o,s,a){for(var i in s)a&&a.unsafe&&o[i]?o[i]=s[i]:n(o,i,s[i],a);return o}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{from:e(709)})},function(t,r,e){var n=e(34),o=e(19),s=e(31),a=e(168),i=e(91),d=e(46),u=[].push;t.exports=function(c){var m,v,g,b,T=arguments.length,k=T>1?arguments[1]:void 0;return a(this),(m=k!==void 0)&&s(k),i(c)?new this:(v=[],m?(g=0,b=n(k,T>2?arguments[2]:void 0),d(c,function(y){o(u,v,b(y,g++))})):d(c,u,{that:v}),new this(v))}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{of:e(711)})},function(t,r,e){var n=e(98);t.exports=function(){return new this(n(arguments))}},function(t,r,e){var n=e(1),o=e(37),s=e(55).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var a,i=o(this),d=!0,u=0,c=arguments.length;u<c;u++)a=s(i,arguments[u]),d=d&&a;return!!d}})},function(t,r){t.exports=function(e,n){return n==1?function(o,s){return o[e](s)}:function(o,s,a){return o[e](s,a)}}},function(t,r,e){var n=e(1),o=e(37),s=e(55),a=s.get,i=s.has,d=s.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(u,c){var m,v,g=o(this);return i(g,u)?(m=a(g,u),"update"in c&&(m=c.update(m,u,g),d(g,u,m)),m):(v=c.insert(u,g),d(g,u,v),v)}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(i){var d=s(this),u=o(i,arguments.length>1?arguments[1]:void 0);return a(d,function(c,m){if(!u(c,m,d))return!1},!0)!==!1}})},function(t,r,e){var n=e(19);t.exports=function(o,s,a){for(var i,d,u=a||o.next;!(i=n(u,o)).done;)if((d=s(i.value))!==void 0)return d}},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(55),i=e(51),d=a.Map,u=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(c){var m=s(this),v=o(c,arguments.length>1?arguments[1]:void 0),g=new d;return i(m,function(b,T){v(b,T,m)&&u(g,T,b)}),g}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(i){var d=s(this),u=o(i,arguments.length>1?arguments[1]:void 0),c=a(d,function(m,v){if(u(m,v,d))return{value:m}},!0);return c&&c.value}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(i){var d=s(this),u=o(i,arguments.length>1?arguments[1]:void 0),c=a(d,function(m,v){if(u(m,v,d))return{key:v}},!0);return c&&c.key}})},function(t,r,e){var n=e(1),o=e(19),s=e(11),a=e(16),i=e(31),d=e(46),u=e(55).Map,c=s([].push);n({target:"Map",stat:!0,forced:!0},{groupBy:function(m,v){var g=new(a(this)?this:u);i(v);var b=i(g.has),T=i(g.get),k=i(g.set);return d(m,function(y){var A=v(y);o(b,g,A)?c(o(T,g,A),y):o(k,g,A,[y])}),g}})},function(t,r,e){var n=e(1),o=e(722),s=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(i){return a(s(this),function(d){if(o(d,i))return!0},!0)===!0}})},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(1),o=e(19),s=e(46),a=e(16),i=e(31),d=e(55).Map;n({target:"Map",stat:!0,forced:!0},{keyBy:function(u,c){var m=new(a(this)?this:d);i(c);var v=i(m.set);return s(u,function(g){o(v,m,c(g),g)}),m}})},function(t,r,e){var n=e(1),o=e(37),s=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(a){var i=s(o(this),function(d,u){if(d===a)return{key:u}},!0);return i&&i.key}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(55),i=e(51),d=a.Map,u=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(c){var m=s(this),v=o(c,arguments.length>1?arguments[1]:void 0),g=new d;return i(m,function(b,T){u(g,v(b,T,m),b)}),g}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(55),i=e(51),d=a.Map,u=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(c){var m=s(this),v=o(c,arguments.length>1?arguments[1]:void 0),g=new d;return i(m,function(b,T){u(g,T,v(b,T,m))}),g}})},function(t,r,e){var n=e(1),o=e(37),s=e(46),a=e(55).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(i){for(var d=o(this),u=arguments.length,c=0;c<u;)s(arguments[c++],function(m,v){a(d,m,v)},{AS_ENTRIES:!0});return d}})},function(t,r,e){var n=e(1),o=e(31),s=e(37),a=e(51),i=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(d){var u=s(this),c=arguments.length<2,m=c?void 0:arguments[1];if(o(d),a(u,function(v,g){c?(c=!1,m=v):m=d(m,v,g,u)}),c)throw i("Reduce of empty map with no initial value");return m}})},function(t,r,e){var n=e(1),o=e(34),s=e(37),a=e(51);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(i){var d=s(this),u=o(i,arguments.length>1?arguments[1]:void 0);return a(d,function(c,m){if(u(c,m,d))return!0},!0)===!0}})},function(t,r,e){var n=e(1),o=e(31),s=e(37),a=e(55),i=TypeError,d=a.get,u=a.has,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(m,v){var g=s(this),b=arguments.length;o(v);var T=u(g,m);if(!T&&b<3)throw i("Updating absent value");var k=T?d(g,m):o(b>2?arguments[2]:void 0)(m,g);return c(g,m,v(k,m,g)),g}})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:e(293)})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:e(293)})},function(t,r,e){var n=e(185);t.exports=function(o){var s;return n(s=Function.toString.call(o)).call(s,"[native code]")!==-1},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(149),o=e(294),s=e(187),a=e(738);function i(d,u,c){var m;return a()?(t.exports=i=n(m=o).call(m),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(v,g,b){var T=[null];T.push.apply(T,g);var k=new(n(Function).apply(v,T));return b&&s(k,b.prototype),k},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(null,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(736)},function(t,r,e){var n=e(737);t.exports=n},function(t,r,e){var n=e(278);t.exports=n},function(t,r,e){var n=e(294);t.exports=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(17),o=e(0),s=e(190),a=o.merge({},s.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24,syncSessionReliableInfo:25},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,msgFtsInServerByTiming:27,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2},qchat:{id:24,getQChatAddress:1}}),i=o.merge({},s.cmdConfig,{login:{sid:a.auth.id,cid:a.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:a.auth.id,cid:a.auth.logout},kick:{sid:a.auth.id,cid:a.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:a.user.id,cid:a.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"int",name:"pushkit"}]},appBackground:{sid:a.user.id,cid:a.user.appBackground,params:[{type:"bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:a.user.id,cid:a.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getBlacklist:{sid:a.user.id,cid:a.user.getBlacklist,params:[{type:"long",name:"time"}]},markInMutelist:{sid:a.user.id,cid:a.user.markInMutelist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getMutelist:{sid:a.user.id,cid:a.user.getMutelist,params:[{type:"long",name:"time"}]},getRelations:{sid:a.user.id,cid:a.user.getRelations,params:[{type:"long",name:"timetag"}]},getUsers:{sid:a.user.id,cid:a.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:a.user.id,cid:a.user.updateMyInfo,params:[{type:"Property",name:"user"},{type:"Property",name:"antispamTag"}]},updateDonnop:{sid:a.user.id,cid:a.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:a.notify.id,cid:a.notify.markRead,params:[{type:"long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:a.notify.id,cid:a.notify.batchMarkRead,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:a.sync.id,cid:a.sync.sync,isAwaitable:!1,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:a.sync.id,cid:a.sync.syncTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},syncSuperTeamMembers:{sid:a.sync.id,cid:a.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:a.msg.id,cid:a.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:a.msg.id,cid:a.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:a.msg.id,cid:a.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:a.msg.id,cid:a.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSessions:{sid:a.msg.id,cid:a.msg.getSessions,params:[{type:"long",name:"time"}]},deleteSessions:{sid:a.msg.id,cid:a.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:a.msg.id,cid:a.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:a.msg.id,cid:a.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:a.msg.id,cid:a.msg.markSessionAck,params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},markSessionAckBatch:{sid:a.msg.id,cid:a.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:a.msg.id,cid:a.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},msgFtsInServerByTiming:{sid:a.msg.id,cid:a.msg.msgFtsInServerByTiming,params:[{type:"Property",name:"msgTimingFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs},getServerSessions:{sid:a.msg.id,cid:a.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:a.msg.id,cid:a.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:a.msg.id,cid:a.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:a.msg.id,cid:a.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:a.msg.id,cid:a.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.leaveSuperTeam,params:[{type:"long",name:"teamId"}]},updateSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},getSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeam,params:[{type:"long",name:"teamId"}]},getSuperTeams:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeams,params:[{type:"long",name:"timetag"}]},getSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},updateInfoInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},getSuperTeamHistoryMsgs:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:a.superTeam.id,cid:a.superTeam.applySuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.passSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.acceptSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionAck,params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},addSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMute,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},updateSuperTeamMembersMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMembersMute,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"int",name:"mute"}]},updateNickInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.transferSuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMutedSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:a.team.id,cid:a.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"Property",name:"antispamTag"}]},sendTeamMsg:{sid:a.team.id,cid:a.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:a.team.id,cid:a.team.addTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:a.team.id,cid:a.team.removeTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:a.team.id,cid:a.team.updateTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},leaveTeam:{sid:a.team.id,cid:a.team.leaveTeam,params:[{type:"long",name:"teamId"}]},getTeam:{sid:a.team.id,cid:a.team.getTeam,params:[{type:"long",name:"teamId"}]},getTeams:{sid:a.team.id,cid:a.team.getTeams,params:[{type:"long",name:"timetag"}]},getTeamsById:{sid:a.team.id,cid:a.team.getTeamsById,params:[{type:"longArray",name:"teamIds"}]},getTeamMembers:{sid:a.team.id,cid:a.team.getTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},dismissTeam:{sid:a.team.id,cid:a.team.dismissTeam,params:[{type:"long",name:"teamId"}]},applyTeam:{sid:a.team.id,cid:a.team.applyTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:a.team.id,cid:a.team.passTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:a.team.id,cid:a.team.rejectTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:a.team.id,cid:a.team.addTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:a.team.id,cid:a.team.removeTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:a.team.id,cid:a.team.transferTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateInfoInTeam:{sid:a.team.id,cid:a.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"}]},updateNickInTeam:{sid:a.team.id,cid:a.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:a.team.id,cid:a.team.acceptTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:a.team.id,cid:a.team.rejectTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:a.team.id,cid:a.team.getTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:a.team.id,cid:a.team.searchTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},updateMuteStateInTeam:{sid:a.team.id,cid:a.team.updateMuteStateInTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"int",name:"mute"}]},getMyTeamMembers:{sid:a.team.id,cid:a.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:a.team.id,cid:a.team.getMutedTeamMembers,params:[{type:"long",name:"teamId"}]},sendTeamMsgReceipt:{sid:a.team.id,cid:a.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:a.team.id,cid:a.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:a.team.id,cid:a.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:a.team.id,cid:a.team.muteTeamAll,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:a.team.id,cid:a.team.getTeamMemberInvitorAccid,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:a.friend.id,cid:a.friend.friendRequest,params:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:a.friend.id,cid:a.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:a.friend.id,cid:a.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:a.friend.id,cid:a.friend.getFriends,params:[{type:"long",name:"timetag"}]},getChatroomAddress:{sid:a.chatroom.id,cid:a.chatroom.getChatroomAddress,params:[{type:"long",name:"chatroomId"},{type:"bool",name:"isWeixinApp"},{type:"number",name:"type"}]},sendFilterMsg:{sid:n(a).id,cid:n(a).sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:n(a).id,cid:n(a).sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:a.eventService.id,cid:a.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:a.eventService.id,cid:a.eventService.pushEvent},subscribeEvent:{sid:a.eventService.id,cid:a.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:a.eventService.id,cid:a.eventService.pushEvents},getThreadMsgs:{sid:a.msgExtend.id,cid:a.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:a.msgExtend.id,cid:a.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:a.msgExtend.id,cid:a.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:a.msgExtend.id,cid:a.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:a.msgExtend.id,cid:a.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:a.msgExtend.id,cid:a.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:a.proxyService.id,cid:a.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]},getQChatAddress:{sid:a.qchat.id,cid:a.qchat.getQChatAddress,params:[{type:"Property",name:"getQChatAddressTag"}]}}),d=o.merge({},s.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Number",name:"from"},{type:"Number",name:"reason"},{type:"String",name:"custom"},{type:"Number",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Number",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Number",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Number",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Number",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Number",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Number",name:"timetag"},{type:"boolean",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_25":{service:"notify",cmd:"syncSessionReliableInfo",response:[{type:"Property",name:"context",entity:"sessionReliableSyncContextTag"},{type:"PropertyArray",name:"datas",entity:"sessionReliableSyncTag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Number",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_27":{service:"msg",cmd:"msgFtsInServerByTiming",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Number",name:"scene"},{type:"String",name:"to"},{type:"Number",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Number",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Number",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Number",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Number",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Number",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Number",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Number",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Number",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Number",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers"},"21_7":{service:"superTeam",cmd:"leaveSuperTeam"},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam"},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Number",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam"},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"object",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"StrArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Number",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"24_1":{service:"qchat",cmd:"getQChatAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});t.exports={idMap:a,cmdConfig:i,packetConfig:d}},function(t,r){t.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38,customClientType:39},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,yidunAntiSpamExt:44,yidunAntiSpamRes:45,__clientExt:46,robotInfoFunction:47,robotInfoTopic:48,robotInfoCustomContent:49,robotInfoAccount:50,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,idClient:23,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},antispamTag:{antiSpamBusinessId:1},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},msgTimingFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3},mixTokenReq:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},mixAuthTokenReq:{type:1,urls:2},notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105},getQChatAddressTag:{ipType:1}}},function(t,r){t.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},appGrayConfigTag:{0:"grayConfig",1:"ttl"},mixStorePolicyTag:{0:"providers",1:"ttl",2:"mixEnable",3:"nosPolicy",4:"s3Policy"},mixStoreTokenTag:{0:"provider",1:"accessKeyId",2:"secretAccessKey",3:"sessionToken",4:"token",5:"expireAt",6:"bucket",7:"objectName",8:"fileExpireSec",9:"tag",10:"shortUrl",11:"region"},notifyDetectTag:{1:"type",2:"params",3:"result",100:"t1",101:"t2",102:"t3",103:"t4",104:"t5",105:"t6"},backSourceTokenTag:{1:"type",2:"tokens",3:"token",4:"ttl"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",39:"customClientType",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",44:"yidunAntiSpamExt",45:"yidunAntiSpamRes",46:"__clientExt",47:"robotInfoFunction",48:"robotInfoTopic",49:"robotInfoCustomContent",50:"robotInfoAccount",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",23:"idClient",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"},sessionReliableSyncTag:{1:"scene",2:"sessionId",3:"syncStatus",4:"syncEndMsgId",5:"syncEndMsgidClient",6:"syncEndMsgTime",7:"syncStartMsgid",8:"syncStartMsgidClient",9:"syncStartMsgTime",10:"nextMsgid",11:"nextMsgidClient",12:"nextMsgTime",13:"roamMsgSync",14:"offlineMsgSync",15:"netCallOfflineMsgSync"},sessionReliableSyncContextTag:{1:"timetag",2:"type"}}},function(t,r,e){var n=e(0),o=e(190),s=n.merge({},o.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,updateCoordinate:33,updateChatroomTags:34,sendChatroomMsgAck:35,getHistoryMsgsByTags:36,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),a=n.merge({},o.cmdConfig,{login:{sid:s.chatroom.id,cid:s.chatroom.login,params:[{type:"byte",name:"type"},{type:"Property",name:"login"},{type:"Property",name:"imLogin"}]},logout:{sid:s.chatroom.id,cid:s.chatroom.logout},sendMsg:{sid:s.chatroom.id,cid:s.chatroom.sendMsg,params:[{type:"Property",name:"msg"}]},getChatroomMembers:{sid:s.chatroom.id,cid:s.chatroom.getChatroomMembers,params:[{type:"byte",name:"type"},{type:"long",name:"time"},{type:"int",name:"limit"}]},getHistoryMsgs:{sid:s.chatroom.id,cid:s.chatroom.getHistoryMsgs,params:[{type:"long",name:"timetag"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},markChatroomMember:{sid:s.chatroom.id,cid:s.chatroom.markChatroomMember,params:[{type:"string",name:"account"},{type:"int",name:"type"},{type:"bool",name:"isAdd"},{type:"int",name:"level"},{type:"string",name:"custom"}]},closeChatroom:{sid:s.chatroom.id,cid:s.chatroom.closeChatroom,params:[{type:"string",name:"custom"}]},getChatroom:{sid:s.chatroom.id,cid:s.chatroom.getChatroom},updateChatroom:{sid:s.chatroom.id,cid:s.chatroom.updateChatroom,params:[{type:"Property",name:"chatroom"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"Property",name:"antispamTag"}]},updateMyChatroomMemberInfo:{sid:s.chatroom.id,cid:s.chatroom.updateMyChatroomMemberInfo,params:[{type:"Property",name:"chatroomMember"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"bool",name:"needSave"},{type:"Property",name:"antispamTag"}]},getChatroomMembersInfo:{sid:s.chatroom.id,cid:s.chatroom.getChatroomMembersInfo,params:[{type:"StrArray",name:"accounts"}]},kickChatroomMember:{sid:s.chatroom.id,cid:s.chatroom.kickChatroomMember,params:[{type:"string",name:"account"},{type:"string",name:"custom"}]},updateChatroomMemberTempMute:{sid:s.chatroom.id,cid:s.chatroom.updateChatroomMemberTempMute,params:[{type:"String",name:"account"},{type:"long",name:"duration"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"}]},queueOffer:{sid:s.chatroom.id,cid:s.chatroom.queueOffer,params:[{type:"string",name:"elementKey"},{type:"string",name:"elementValue"},{type:"bool",name:"transient"},{type:"string",name:"elementAccount"}]},queuePoll:{sid:s.chatroom.id,cid:s.chatroom.queuePoll,params:[{type:"string",name:"elementKey"}]},queueList:{sid:s.chatroom.id,cid:s.chatroom.queueList},peak:{sid:s.chatroom.id,cid:s.chatroom.peak},queueDrop:{sid:s.chatroom.id,cid:s.chatroom.queueDrop},queueInit:{sid:s.chatroom.id,cid:s.chatroom.queueInit,params:[{type:"int",name:"limit"}]},queueChange:{sid:s.chatroom.id,cid:s.chatroom.queueChange,params:[{type:"StrStrMap",name:"elementMap"},{type:"bool",name:"needNotify"},{type:"string",name:"notifyExt"}]},updateTagMembersTempMute:{sid:s.chatroom.id,cid:s.chatroom.updateTagMembersTempMute,params:[{type:"Property",name:"tagMuteReq"}]},updateCoordinate:{sid:s.chatroom.id,cid:s.chatroom.updateCoordinate,params:[{type:"Property",name:"coordinateReq"}]},getChatroomMemberCountByTag:{sid:s.chatroom.id,cid:s.chatroom.getChatroomMemberCountByTag,params:[{type:"String",name:"tag"}]},getChatroomMembersByTag:{sid:s.chatroom.id,cid:s.chatroom.getChatroomMembersByTag,params:[{type:"Property",name:"tagMemberReq"}]},updateChatroomTags:{sid:s.chatroom.id,cid:s.chatroom.updateChatroomTags,params:[{type:"Property",name:"chatRoomTagsUpdateTag"}]},sendChatroomMsgAck:{sid:s.chatroom.id,cid:s.chatroom.sendChatroomMsgAck,params:[{type:"Property",name:"chatRoomMsgAckTag"}]},getHistoryMsgsByTags:{sid:s.chatroom.id,cid:s.chatroom.getHistoryMsgsByTags,params:[{type:"Property",name:"chatRoomTagHistoryMsgRequestTag"}]},notifyCdnInfo:{sid:s.chatroom.id,cid:s.chatroom.notifyCdnInfo},syncRobot:{sid:s.user.id,cid:s.user.syncRobot,params:[{type:"long",name:"timetag"}]}}),i=n.merge({},o.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:"Property",name:"chatroom"},{type:"Property",name:"chatroomMember"},{type:"Property",name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:"Number",name:"reason"},{type:"String",name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:"Property",name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:"Property",name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:"Property",name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:"Property",name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute"},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:"KVArray",name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:"StrArray",name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute"},"13_33":{service:"chatroom",cmd:"updateCoordinate"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:"long",name:"count"}]},"13_34":{service:"chatroom",cmd:"updateChatroomTags"},"13_36":{service:"chatroom",cmd:"getHistoryMsgsByTags",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:"Property",name:"chatroomCdnInfo"}]},"13_101":{service:"chatroom",cmd:"updateChatroomTag",response:[{type:"Property",name:"updateTags"}]}});t.exports={idMap:s,cmdConfig:a,packetConfig:i}},function(t,r){t.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,isReactNative:112,authType:115,loginExt:116,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40,loginAuthType:41,loginExt:42,loc_x:43,loc_y:44,loc_z:45,distance:46,antiSpamBusinessId:47},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31,yidunAntiSpamExt:32,yidunAntiSpamRes:33,loc_x:34,loc_y:35,loc_z:36,toAccids:37,needHighPriorityMsgAck:38,__clientExt:39},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5},coordinateReq:{x:1,y:2,z:3,distance:4},chatRoomTagsUpdateTag:{tags:1,notifyTargetTags:2,needNotify:3,ext:4},chatRoomMsgAckTag:{idClient:1,chatroomId:2},chatRoomTagHistoryMsgRequestTag:{tags:1,types:2,fromTime:3,toTime:4,limit:5,reverse:6}}},function(t,r){t.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",41:"sdkType",42:"userAgent",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",41:"loginAuthType",42:"loginExt",43:"loc_x",44:"loc_y",45:"loc_z",46:"distance",47:"antiSpamBusinessId",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",32:"yidunAntiSpamExt",33:"yidunAntiSpamRes",34:"loc_x",35:"loc_y",36:"loc_z",37:"toAccids",38:"needHighPriorityMsgAck",39:"__clientExt",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},updateTags:{1:"currentTags"}}},function(t,r,e){t.exports=e(785)},function(t,r){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=e[o];return s},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(789)},function(t,r,e){var n=e(307),o=e(747),s=e(746);t.exports=function(a,i){var d;if(a){if(typeof a=="string")return s(a,i);var u=n(d=Object.prototype.toString.call(a)).call(d,8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?o(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?s(a,i):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(793)},function(t,r,e){var n=e(5),o=e(41),s=e(0),a=s.notundef,i={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},d={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function u(c){s.verifyOptions(c,"account","friend::Friend"),s.verifyParamAtLeastPresentOne(c,"alias custom","friend::Friend"),this.account=c.account,a(c.alias)&&(this.alias=c.alias),a(c.custom)&&(this.custom=c.custom)}u.reverse=function(c){var m=s.filterObj(c,"account alias custom createTime updateTime serverex");return a(c.flag)&&(m.valid=c.flag==="1"),a(m.createTime)&&(m.createTime=+m.createTime),a(m.updateTime)&&(m.updateTime=+m.updateTime),m},u.validTypes=function(){return n(i)},u.getByteFromType=function(c){return i[c]},u.getTypeFromByte=function(c){return d[c]},u.assembleFriend=function(c){var m=+new Date;return o({},c,{alias:"",createTime:m,custom:"",updateTime:m,valid:!0})},t.exports=u},function(t,r,e){var n=e(752),o=e(41),s=e(0),a=s.notundef;function i(d,u){n(d.body)||s.onParamError("body只能是整数",u),this.body=d.body,this.from=d.from||"",this.custom=d.custom||"",a(d.pushTitle)&&(this.pushTitle=d.pushTitle),a(d.apnsText)&&(this.apnsText=d.apnsText),a(d.pushPayload)&&(this.pushPayload=d.pushPayload),a(d.needPush)&&(this.needPush=d.needPush===!0?1:0),a(d.needBadge)&&(this.needBadge=d.needBadge===!0?1:0)}i.reverse=function(d){var u=o({},d);return a(d.needBadge)&&(u.needBadge=+d.needBadge==1),a(d.needPush)&&(u.needPush=+d.needPush==1),u.body=+d.body,u.time=+d.time,u},t.exports=i},function(t,r,e){t.exports=e(811)},function(t,r,e){var n=e(752),o=e(41),s=e(0);function a(i,d){n(i.type)||s.onParamError("Collect.type只能是整数",d),s.notundef(i.uniqueId)&&(this.uniqueId=i.uniqueId),this.type=i.type,this.data=i.data||"",this.custom=i.custom||""}a.reverse=function(i){var d=o({},i);return d.type=+d.type,d.createTime=+d.createTime,d.updateTime=+d.updateTime,d},t.exports=a},function(t,r,e){var n=e(819),o=e(820),s=e(748),a=e(821);t.exports=function(i,d){return n(i)||o(i,d)||s(i,d)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(756),o=e(757),s=e(758),a=e(759);function i(c,m,v){var g=c;return o(m)?(v=m,typeof c=="string"&&(g={uri:c})):g=a(m,{uri:c}),g.callback=v,g}function d(c,m,v){return u(m=i(c,m,v))}function u(c){if(c.callback===void 0)throw new Error("callback argument missing");var m=!1,v=function(ze,pe,le){m||(m=!0,c.callback(ze,pe,le))};function g(){var ze=void 0;if(ze=A.response?A.response:A.responseText||function(pe){try{if(pe.responseType==="document")return pe.responseXML;var le=pe.responseXML&&pe.responseXML.documentElement.nodeName==="parsererror";if(pe.responseType===""&&!le)return pe.responseXML}catch{}return null}(A),ae)try{ze=JSON.parse(ze)}catch{}return ze}function b(ze){return clearTimeout(V),ze instanceof Error||(ze=new Error(""+(ze||"Unknown XMLHttpRequest Error"))),ze.statusCode=0,v(ze,Fe)}function T(){if(!y){var ze;clearTimeout(V),ze=c.useXDR&&A.status===void 0?200:A.status===1223?204:A.status;var pe=Fe,le=null;return ze!==0?(pe={body:g(),statusCode:ze,method:ie,headers:{},url:Ce,rawRequest:A},A.getAllResponseHeaders&&(pe.headers=s(A.getAllResponseHeaders()))):le=new Error("Internal XMLHttpRequest Error"),v(le,pe,pe.body)}}var k,y,A=c.xhr||null;A||(A=c.cors||c.useXDR?new d.XDomainRequest:new d.XMLHttpRequest);var V,Ce=A.url=c.uri||c.url,ie=A.method=c.method||"GET",Oe=c.body||c.data,he=A.headers=c.headers||{},Y=!!c.sync,ae=!1,Fe={body:void 0,headers:{},statusCode:0,method:ie,url:Ce,rawRequest:A};if("json"in c&&c.json!==!1&&(ae=!0,he.accept||he.Accept||(he.Accept="application/json"),ie!=="GET"&&ie!=="HEAD"&&(he["content-type"]||he["Content-Type"]||(he["Content-Type"]="application/json"),Oe=JSON.stringify(c.json===!0?Oe:c.json))),A.onreadystatechange=function(){A.readyState===4&&setTimeout(T,0)},A.onload=T,A.onerror=b,A.onprogress=function(){},A.onabort=function(){y=!0},A.ontimeout=b,A.open(ie,Ce,!Y,c.username,c.password),Y||(A.withCredentials=!!c.withCredentials),!Y&&c.timeout>0&&(V=setTimeout(function(){if(!y){y=!0,A.abort("timeout");var ze=new Error("XMLHttpRequest timeout");ze.code="ETIMEDOUT",b(ze)}},c.timeout)),A.setRequestHeader)for(k in he)he.hasOwnProperty(k)&&A.setRequestHeader(k,he[k]);else if(c.headers&&!function(ze){for(var pe in ze)if(ze.hasOwnProperty(pe))return!1;return!0}(c.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in c&&(A.responseType=c.responseType),"beforeSend"in c&&typeof c.beforeSend=="function"&&c.beforeSend(A),A.send(Oe||null),A}t.exports=d,t.exports.default=d,d.XMLHttpRequest=n.XMLHttpRequest||function(){},d.XDomainRequest="withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:n.XDomainRequest,function(c,m){for(var v=0;v<c.length;v++)m(c[v])}(["get","put","post","patch","head","delete"],function(c){d[c==="delete"?"del":c]=function(m,v,g){return(v=i(m,v,g)).method=c.toUpperCase(),u(v)}})},function(t,r,e){(function(n){var o;o=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},t.exports=o}).call(this,e(56))},function(t,r){t.exports=function(n){if(!n)return!1;var o=e.call(n);return o==="[object Function]"||typeof n=="function"&&o!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var e=Object.prototype.toString},function(t,r){var e=function(n){return n.replace(/^\s+|\s+$/g,"")};t.exports=function(n){if(!n)return{};for(var o,s={},a=e(n).split(`
`),i=0;i<a.length;i++){var d=a[i],u=d.indexOf(":"),c=e(d.slice(0,u)).toLowerCase(),m=e(d.slice(u+1));s[c]===void 0?s[c]=m:(o=s[c],Object.prototype.toString.call(o)==="[object Array]"?s[c].push(m):s[c]=[s[c],m])}return s}},function(t,r){t.exports=function(){for(var n={},o=0;o<arguments.length;o++){var s=arguments[o];for(var a in s)e.call(s,a)&&(n[a]=s[a])}return n};var e=Object.prototype.hasOwnProperty},function(t,r,e){var n=e(25),o=e(123),s=e(7),a=e(10);function i(d){var u=this,c=d.url||null;u.level={debug:0,log:1,info:2,warn:3,error:4}[d.level]||0,u.logCache=[],u.logNum=1,u.timeInterval=5e3,window.onerror=function(m,v,g,b,T){u.error(T)},o(function(){u.logCache.length>0&&c&&u.postLogs(c,u.logCache)},u.timeInterval)}i.prototype.debug=function(){var d;this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,s(d=["[degbug]"]).call(d,arguments)))},i.prototype.log=function(){var d;this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,s(d=["[log]"]).call(d,arguments)))},i.prototype.info=function(){var d;this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,s(d=["[info]"]).call(d,arguments)))},i.prototype.warn=function(){var d;this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,s(d=["[warn]"]).call(d,arguments)))},i.prototype.error=function(){var d;this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,s(d=["[error]"]).call(d,arguments)))},i.prototype.cacheLogs=function(d,u){for(var c=[],m=0;m<u.length;m++){var v=u[m];n(v)==="object"?c.push(a(v)):c.push(v)}var g=this.logNum+++" "+d+" "+c.join("; ");this.logCache.push(g.replace("%c",""))},i.prototype.postLogs=function(d,u){var c=this,m=new XMLHttpRequest;m.onreadystatechange=function(){m.readyState===4&&(m.status===200?(console.info("LoggerPlugin::日志上报完成"),c.logCache=[],c.timeInterval=5e3):c.timeInterval+=5e3)},m.open("POST",d),m.setRequestHeader("Content-Type","plain/text;charset=utf-8"),m.timeout=360,m.send(u.join(`
`))},t.exports=i},function(t,r,e){var n=e(3),o=e(44);t.exports=function(s){var a,i,d,u;s.db&&(o.db=s.db),s.rnfs&&(o.rnfs=s.rnfs,o.rnfs.size||(o.rnfs.size=1048576),o.rnfs.nimPromise=(a=o.rnfs,i=a.size/2-256,u=0,d=o.rnfs.DocumentDirectoryPath+"/nimlog_"+u+".log",a.exists(d).then(function(c){return c?a.stat(d):n.reject(0)}).then(function(c){return c&&c.size>i?n.reject(1):n.reject(0)}).catch(function(c){return typeof c=="number"&&(a.nimIndex=c),n.resolve()})))}},function(t,r,e){var n=e(52),o=e(0),s=o.notundef,a=o.undef;function i(d){s(d.name)&&(this.name=""+d.name),s(d.announcement)&&(this.announcement=""+d.announcement),s(d.broadcastUrl)&&(this.broadcastUrl=""+d.broadcastUrl),s(d.custom)&&(this.custom=""+d.custom),s(d.queuelevel)&&(this.queuelevel=n(d.queuelevel))}i.reverse=function(d){var u=o.copy(d);return a(u.announcement)&&(u.announcement=""),a(u.broadcastUrl)&&(u.broadcastUrl=""),a(u.custom)&&(u.custom=""),s(u.createTime)&&(u.createTime=+u.createTime),s(u.updateTime)&&(u.updateTime=+u.updateTime),s(u.onlineMemberNum)&&(u.onlineMemberNum=+u.onlineMemberNum),s(u.mute)&&(u.mute=u.mute==="1"),u},t.exports=i},function(t,r,e){var n,o,s;t.exports=(s=e(89),o=(n=s).lib.WordArray,n.enc.Base64={stringify:function(a){var i=a.words,d=a.sigBytes,u=this._map;a.clamp();for(var c=[],m=0;m<d;m+=3)for(var v=(i[m>>>2]>>>24-m%4*8&255)<<16|(i[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|i[m+2>>>2]>>>24-(m+2)%4*8&255,g=0;g<4&&m+.75*g<d;g++)c.push(u.charAt(v>>>6*(3-g)&63));var b=u.charAt(64);if(b)for(;c.length%4;)c.push(b);return c.join("")},parse:function(a){var i=a.length,d=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var c=0;c<d.length;c++)u[d.charCodeAt(c)]=c}var m=d.charAt(64);if(m){var v=a.indexOf(m);v!==-1&&(i=v)}return function(g,b,T){for(var k=[],y=0,A=0;A<b;A++)if(A%4){var V=T[g.charCodeAt(A-1)]<<A%4*2,Ce=T[g.charCodeAt(A)]>>>6-A%4*2,ie=V|Ce;k[y>>>2]|=ie<<24-y%4*8,y++}return o.create(k,y)}(a,i,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)},function(t,r,e){var n,o,s,a,i,d,u,c;t.exports=(c=e(89),e(888),e(889),o=(n=c).lib,s=o.Base,a=o.WordArray,i=n.algo,d=i.MD5,u=i.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:d,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var g,b=this.cfg,T=b.hasher.create(),k=a.create(),y=k.words,A=b.keySize,V=b.iterations;y.length<A;){g&&T.update(g),g=T.update(m).finalize(v),T.reset();for(var Ce=1;Ce<V;Ce++)g=T.finalize(g),T.reset();k.concat(g)}return k.sigBytes=4*A,k}}),n.EvpKDF=function(m,v,g){return u.create(g).compute(m,v)},c.EvpKDF)},function(t,r,e){e(297);var n=e(39);e(309)(n),t.exports=n},function(t,r,e){var n=e(52),o=e(3),s=e(15),a=e(10),i=e(2),d=e(7),u=e(304),c=e(8),m=e(17),v=e(74),g=e(197),b=e(302),T=e(767),k=e(0),y=e(305),A=e(40),V=A.newSupportDBError,Ce=A.noDBError,ie=!1;function Oe(ae){ie=ae,y.set("db",ae,b)}if(Oe(!!k.getGlobal().indexedDB),v.name==="IE"&&Oe(!1),v.name==="Microsoft Edge"&&Oe(!1),v.name==="Safari")try{n(v.version.split(".")[0],10)<10&&Oe(!1)}catch{}function he(ae){this.concurrency=0,this.pendingTasks=[],this.queue=o.resolve(),this.logger=ae.logger,this.reporter=ae.reporter,this.core=ae.core,this.account=ae.account,this.notifyError=ae.notifyError}var Y=he.prototype;Y.reset=k.emptyFunc,ie&&(Y.reset=function(ae){this.enable=ae!==!1}),Y.addTask=function(ae){var Fe=this;return new o(function(ze,pe){function le(xe){Fe.concurrency--;var ue=Fe.pendingTasks.shift();ue&&Fe.addTask(ue),xe()}if(Fe.concurrency<100)return Fe.concurrency++,ae().then(function(xe){le(function(){ze(xe),ae.resolve&&ae.resolve(xe)})},function(xe){le(function(){var ue=(xe=xe||{}).event||xe,Ve={event:ue,callFunc:xe.callFunc||"db::addTask"};Fe.logger.error("db::error event is",ue,k.get(ue,"target.error")),pe(Ve),ae.reject&&ae.reject(Ve)})});ae.resolve||(ae.resolve=ze,ae.reject=pe),Fe.pendingTasks.push(ae)})},Y.reportError=function(ae){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ze=arguments.length>2?arguments[2]:void 0;this.reporter.reportTraceStart("exceptions",{user_id:this.account,trace_id:k.get(this.core,"socket.socket.sessionid"),action:4,exception_service:0});var pe,le=Fe.context||"";if(ze)try{var xe;pe=s(xe=a(ze)).call(xe,0,100),le+=". ".concat(pe)}catch{pe=""}var ue=k.get(ae,"code")||k.get(ae,"target.error.code")||0,Ve=k.get(ae,"message")||k.get(ae,"target.error.message")||"unknown";this.reporter.reportTraceUpdateV2("exceptions",{code:ue,description:Ve,operation_type:Fe.operation_type,target:Fe.target||this.name,context:le}),this.reporter.reportTraceEnd("exceptions",1)},Y.init=function(ae){var Fe=this;return Fe.addTask(function(){return Fe.enable?Fe.server?o.resolve():(Fe.name="nim-"+ae,b.open({server:Fe.name,version:T.version,schema:T.schema}).then(function(ze){Fe.logger.info("db::init: ".concat(Fe.name)),Fe.server=ze},function(ze){throw Oe(!1),Fe.server=null,Fe.name=null,ze}).catch(function(ze){throw Fe.reportError(ze,{operation_type:0,context:"version ".concat(T.version),target:"nim-"+ae}),ze})):o.reject(V({callFunc:"db::init"}))})},Y.destroy=function(){var ae=this;return ae.addTask(function(){if(!ae.enable)return o.reject(V({callFunc:"db::destroy"}));if(!ae.server)return o.resolve();try{return b.remove(ae.name).then(function(){ae.logger.info("db::destroy: ".concat(ae.name)),ae.server=null,ae.name=null}).catch(function(Fe){throw ae.reportError(Fe,{operation_type:1,context:"remove database failed"}),Fe})}catch(Fe){throw ae.reportError(Fe,{operation_type:1,context:"remove database failed"}),Fe}})},Y.clear=function(){var ae=this;return ae.addTask(function(){return ae.enable?ae.server?ae.server.clear("timetag").then(function(){var Fe=s([]).call(ae.server.getIndexedDB().objectStoreNames),ze=[];if(i(Fe).call(Fe,function(pe){ze.push(ae.server.clear(pe).catch(function(le){throw ae.reportError(le,{operation_type:3,context:"tableName: ".concat(pe,". clear table failed")}),le}))}),ze.length)return o.all(ze).then(function(){ae.logger.info("db::clear: ".concat(ae.name))}).catch(function(pe){return ae.logger.error("db::clear: ",pe),o.reject(pe)})}):o.resolve():o.reject(V({callFunc:"db::clear"}))})},Y.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},Y.remove=function(ae,Fe,ze,pe,le,xe,ue){var Ve=this;return Ve.addTask(function(){Ve.checkDB();try{return Ve.server.remove(ae,Fe,ze,pe,le,xe,ue).then(function(){var Ue;Ve.logger.info(d(Ue="db::delete: ".concat(ae," ")).call(Ue,Fe||ze))}).catch(function(Ue){throw Ve.reportError(Ue,{operation_type:3,context:"tableName: ".concat(ae,", remove failed")},{name:ae,keys:Fe,keyName:ze,lowerBound:pe,upperBound:le,lowerOpen:xe,upperOpen:ue}),Ve.logger.error("db::remove::server.remove error",Ue),Ue})}catch(Ue){throw Ve.reportError(Ue,{operation_type:3,context:"tableName: ".concat(ae,", remove failed")},{name:ae,keys:Fe,keyName:ze,lowerBound:pe,upperBound:le,lowerOpen:xe,upperOpen:ue}),Ve.logger.error("db::remove::server.remove error",Ue),Ue}})},Y.put=function(ae,Fe){var ze=this;return ze.addTask(function(){ze.checkDB(),k.isArray(Fe)||(Fe=[Fe]);try{return ze.server.update(ae,Fe).then(function(pe){var le=[ae],xe=T.keyPath(ae),ue=[];return xe&&(i(pe).call(pe,function(Ve){ue.push(g(Ve,xe))}),le.push(ue.length===1?ue[0]:ue)),le.unshift("db::put:"),ae==="timetag"&&le.push(pe[0]),ze.logger.log.apply(ze.logger.log,le),pe}).catch(function(pe){throw ze.reportError(pe,{operation_type:3,context:"tableName: ".concat(ae,". put failed")},Fe),pe})}catch(pe){throw ze.reportError(pe,{operation_type:3,context:"tableName: ".concat(ae,". put failed")},Fe),pe}})},Y.get=function(ae,Fe){var ze=this;return ze.addTask(function(){ze.checkDB();try{return ze.server.get(ae,Fe).catch(function(le){var xe;throw ze.reportError(le,{operation_type:3,context:d(xe="tableName: ".concat(ae,". get failed with key ")).call(xe,Fe)}),le})}catch(le){var pe;throw ze.reportError(le,{operation_type:3,context:d(pe="tableName: ".concat(ae,". get failed with key ")).call(pe,Fe)}),le}})},Y.modifyOrPut=function(ae){var Fe=this,ze=ae.table,pe=k.copy(ae.obj),le=ae.key,xe=ae.modifyObjWhenPut,ue=k.copy(pe);return delete ue[le],Fe.getOne(ze,null,pe[le],{modifyObj:ue}).then(function(Ve){return Ve?(ue.idClient?ue={idClient:ue.idClient,server:ue.server,pinFrom:ue.pinFrom}:(ue.lastMsg=ue.lastMsg&&ue.lastMsg.idServer+"_"+ue.lastMsg.idClient,ue.localCustom=ue.localCustom&&"***",ue.topCustom=ue.topCustom&&"***"),Fe.logger.log("db::modifyOrPut: update table ".concat(ze),ue),Ve):(pe=k.merge(pe,xe),Fe.put(ze,pe).then(function(Ue){return Ue[0]}))})},Y.updateAndDelete=function(ae,Fe,ze){var pe=this;return pe.addTask(function(){pe.checkDB();try{return pe.server.updateAndDelete(ae,Fe,ze).catch(function(le){throw pe.reportError(le,{operation_type:3,context:"tableName: ".concat(ae,". updateAndDelete failed")},{updates:Fe,deletes:ze}),le})}catch(le){throw pe.reportError(le,{operation_type:3,context:"tableName: ".concat(ae,". updateAndDelete failed")},{updates:Fe,deletes:ze}),le}})},Y.getAll=function(ae,Fe){var ze=this;return ze.addTask(function(){ze.checkDB(),(Fe=Fe||{}).keys=u(Fe)===!0,Fe.desc=Fe.desc===!0,Fe.distinct=Fe.distinct===!0;try{var pe,le,xe;return c(pe=u(le=m(xe=ze.server.query(ae,Fe.index)).call(xe,m(Fe))).call(le,u(Fe)).desc(Fe.desc).limit(Fe.limit).distinct(Fe.distinct)).call(pe,Fe.mapper).modify(Fe.modifyObj).execute().catch(function(ue){throw ze.reportError(ue,{operation_type:3,context:"tableName: ".concat(ae,". getAll failed")},Fe),ue})}catch(ue){throw ze.reportError(ue,{operation_type:3,context:"tableName: ".concat(ae,". getAll failed")},Fe),ue}})},Y.getOnly=function(ae,Fe,ze,pe){var le=this;return le.addTask(function(){le.checkDB(),(pe=pe||{}).keys=u(pe)===!0,pe.desc=pe.desc===!0,pe.distinct=pe.distinct===!0,pe.remove=pe.remove===!0;try{var xe,ue,Ve;return c(xe=u(ue=m(Ve=le.server.query(ae,Fe).only(ze)).call(Ve,m(pe))).call(ue,u(pe)).desc(pe.desc).limit(pe.limit).distinct(pe.distinct)).call(xe,pe.mapper).modify(pe.modifyObj).remove(pe.remove).execute().catch(function(At){var ur,pr;throw le.reportError(At,{operation_type:3,context:d(ur=d(pr="tableName: ".concat(ae,". getOnly failed with index: ")).call(pr,Fe,", matchValue: ")).call(ur,ze)},pe),At})}catch(At){var Ue,er;throw le.reportError(At,{operation_type:3,context:d(Ue=d(er="tableName: ".concat(ae,". getOnly failed with index: ")).call(er,Fe,", matchValue: ")).call(Ue,ze)},pe),At}})},Y.getOne=function(){var ae=this;return ae.getOnly.apply(ae,arguments).then(function(Fe){return Fe[0]})},Y.clearTable=function(ae){var Fe=this;return Fe.addTask(function(){Fe.checkDB();try{return Fe.server.clear(ae).catch(function(ze){throw Fe.reportError(ze,{operation_type:3,context:"tableName: ".concat(ae,". clearTable failed")},options),ze})}catch(ze){throw Fe.reportError(ze,{operation_type:3,context:"tableName: ".concat(ae,". clearTable failed")},options),ze}})},Y.checkDB=function(){if(!this.enable)throw V({callFunc:"db::checkDB"});if(!this.server)throw Ce({callFunc:"db::checkDB"})},t.exports=he},function(t,r){var e={version:12},n={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};e.keyPath=function(o){return n[o].key.keyPath},e.schema=function(){return window._nimForceSyncIM=!0,n},t.exports=e},function(t,r,e){var n=e(71).fn;n.setKey=function(o,s){return this.put("kv",{key:o,value:s})},n.getKey=function(o){return this.get("kv",o).then(function(s){return s&&s.value})},n.setDonnop=function(o){return this.setKey("donnop",o)},n.getDonnop=function(){return this.getKey("donnop")}},function(t,r,e){var n=e(6),o=e(52),s=e(71).fn;s.getTimetags=function(a){var i={};return this.getAll("timetag",{filter:a,mapper:function(d){var u;return n(u=d.name).call(u,"team-")!==-1?i[d.name]=0:i[d.name]=d.value,d}}).then(function(){return i})},s.getTeamMemberTimetags=function(){return this.getTimetags(function(a){var i;return n(i=a.name).call(i,"team-")!==-1})},s.getTimetag=function(a){return this.getOne("timetag",null,a).then(function(i){return(i=i||{value:0}).value})},s.getTeamMemberTimetag=function(){return 0},s.updateTimetag=function(a,i){var d=this,u={name:a,value:i};return this.put("timetag",u).catch(function(c){d.notifyError&&d.notifyError(c)})},s.updateMyInfoTimetag=function(a){return this.updateTimetag("myInfo",a)},s.updateRelationTimetag=function(a){return this.updateTimetag("relations",a)},s.getRelationsTimetag=function(){return this.getTimetag("relations")},s.updateFriendTimetag=function(a){return this.updateTimetag("friends",a)},s.getFriendsTimetag=function(){return this.getTimetag("friends")},s.updateFriendUserTimetag=function(a){return this.updateTimetag("friendUsers",a)},s.updateTeamTimetag=function(a){return this.updateTimetag("teams",a)},s.getTeamsTimetag=function(){return this.getTimetag("teams")},s.updateSuperTeamTimetag=function(a){return this.updateTimetag("superTeams",a)},s.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},s.updateTeamMemberTimetag=function(a,i){return this.updateTimetag("team-"+a,i)},s.getTeamMembersTimetag=function(a){return this.getTimetag("team-"+a)},s.updateSuperTeamMemberTimetag=function(a,i){return this.updateTimetag("superTeam-"+a,i)},s.getSuperTeamMembersTimetag=function(a){return this.getTimetag("superTeam-"+a)},s.updateMyTeamMembersTimetag=function(a){return this.updateTimetag("myTeamMembers",a)},s.updateMySuperTeamMembersTimetag=function(a){return this.updateTimetag("myInfoInSuperTeams",a)},s.getBroadcastMsgTimetag=function(){return this.getTimetag("broadcastMsg")},s.updateBroadcastMsgTimetag=function(a){return this.updateTimetag("broadcastMsg",o(a))},s.updateRoamingMsgTimetag=function(a){return this.updateTimetag("roamingMsgs",a)},s.updateSuperTeamRoamingMsgTimetag=function(a){return this.updateTimetag("superTeamRoamingMsgs",a)},s.updateMsgReceiptsTimetag=function(a){return this.updateTimetag("msgReceipts",a)},s.updateDonnopTimetag=function(a){return this.updateTimetag("donnop",a)},s.updateSessionAck=function(a){return this.updateTimetag("sessionAck",a)},s.updateDeleteMsgSelf=function(a){return this.updateTimetag("deleteMsgSelf",a)},s.updateSuperTeamSessionAck=function(a){return this.updateTimetag("superTeamSessionAck",a)},s.deleteTimetag=function(a){return this.remove("timetag",a)},s.deleteTeamMemberTimetag=function(a){return this.deleteTimetag("team-"+a)},s.deleteSuperTeamMemberTimetag=function(a){return this.deleteTimetag("superTeam-"+a)}},function(t,r,e){var n=e(3),o=e(71).fn,s=e(0);o.mergeRelations=function(a,i,d,u,c){var m=this,v=m.updateAndDelete("blacklist",a,i),g=m.updateAndDelete("mutelist",d,u);return n.all([v,g]).then(function(){return m.logger.info("db::mergeRelations: timetag ".concat(c)),m.updateRelationTimetag(c),[a,i,d,u,c]})},o.getRelations=function(){var a=this.getAll("blacklist"),i=this.getAll("mutelist");return n.all([a,i])},o.markInBlacklist=function(a){if((a=s.copy(a)).isAdd){var i=a.record;return this.put("blacklist",i)}var d=a.account;return this.remove("blacklist",d)},o.markInMutelist=function(a){if((a=s.copy(a)).isAdd){var i=a.record;return this.put("mutelist",i)}var d=a.account;return this.remove("mutelist",d)}},function(t,r,e){var n=e(8),o=e(3),s=e(71).fn,a=e(0);s.mergeFriends=function(i,d,u){var c=this;return c.updateAndDelete("friend",i,d).then(function(){return c.logger.log("db::mergeFriends: updateAndDelete done",i&&n(i).call(i,function(m){return m.account}).join(",")),u&&c.updateFriendTimetag(u),[i,d,u]})},s.putFriend=function(i){return this.put("friend",i)},s.updateFriend=function(i){var d=this,u=(i=a.copy(i)).account;return this.getOne("friend",null,u,{modifyObj:i}).then(function(c){return c?d.logger.log("db::updateFriend: ".concat(u)):d.logger.warn("db::updateFriend: no record ".concat(u)),c})},s.deleteFriend=function(i){var d=this.remove("friend",i),u=this.deleteUser(i);return o.all([d,u])},s.getFriends=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=function(u){return i.updateTime!==void 0?u.valid&&u.updateTime>i.updateTime:u.valid};return this.getAll("friend",{filter:d})},s.getFriend=function(i){return this.getOne("friend",null,i)},s.getUserFromBlackList=function(i){return this.getOne("blacklist",null,i)}},function(t,r,e){var n=e(3),o=e(2),s=e(7),a=e(8),i=e(71).fn,d=e(0),u=e(40),c=e(191),m=e(150);function v(T){return T.valid&&T.validToCurrentUser}function g(T){return T&&T.valid}function b(T){return T&&d.fillUndef(T,{mute:!1,custom:""}),T}i.mergeTeams=function(T,k,y){var A=this,V=A.put("team",T),Ce=A.leaveTeams(k,y);return n.all([V,Ce]).then(function(){return A.logger.log("db::mergeTeams:"),A.updateTeamTimetag(y),[T,k,y]})},i.putTeam=function(T){if(T)return d.isArray(T)||(T=[T]),o(T).call(T,function(k){k.validToCurrentUser=!0}),this.put("team",T)},i.updateTeam=function(T){var k=this,y=(T=d.copy(T)).teamId;return k.getOne("team",null,y,{modifyObj:T}).then(function(A){if(A)k.logger.log("db::updateTeam: ".concat(y));else if(k.logger.warn("db::updateTeam: no record ".concat(y)),T.validToCurrentUser)return k.putTeam(T);return A})},i.transferTeam=function(T,k,y){var A=this,V=T.teamId,Ce=T.memberUpdateTime,ie={teamId:V,account:k,type:"normal",updateTime:Ce},Oe={teamId:V,account:y,type:"owner",updateTime:Ce};return A.updateTeamMembers([ie,Oe]).then(function(){return A.putTeam(T).then(function(){var he,Y;return A.logger.info(s(he=s(Y="db::transferTeam: ".concat(T.teamId," ")).call(Y,k," -> ")).call(he,y)),[T,k,y]})})},i.leaveTeam=function(T){var k=this;return k.updateTeam({teamId:T,validToCurrentUser:!1}).then(function(){return k.removeAllTeamMembers(T)})},i.dismissTeam=function(T,k){var y=this,A={teamId:T,valid:!1,validToCurrentUser:!1,updateTime:k};return y.updateTeam(A).then(function(){return y.removeAllTeamMembers(T)})},i.leaveTeams=function(T,k){var y,A=this,V=[];return o(T).call(T,function(Ce){y=A.leaveTeam(Ce.teamId,k),V.push(y)}),n.all(V)},i.getTeamsByTeamIds=function(T){var k,y=this,A=[];return o(T).call(T,function(V){k=y.getTeam(V),A.push(k)}),n.all(A)},i.getTeam=function(T){T=""+T;var k=this;return k.getOne("team",null,T).then(function(y){return y?(k.updateTeamProperties([y]),y):null})},i.getTeams=function(){var T=this;return T.getAll("team",{filter:v}).then(function(k){return T.updateTeamProperties(k),k})},i.updateTeamProperties=function(T){o(T).call(T,function(k){k&&c.fillProperties(k)})},i.mergeTeamMembers=function(T,k,y,A){var V=this,Ce=V.putTeamMembers(k),ie=V.updateTeamMembers(y);return n.all([Ce,ie]).then(function(){return V.logger.log("db::mergeTeamMembers: ".concat(T)),V.updateTeamMemberTimetag(T,A)})},i.putTeamMembers=function(T){return this.put("teamMember",T)},i.getTeamMembersByAccount=function(T){return this.getOnly("teamMember","account",T,{filter:g,mapper:b}).then()},i.getTeamMembers=function(T){var k=this;return T=""+T,k.getOnly("teamMember","teamId",T,{filter:function(y){return y.valid},mapper:b}).then(function(y){return k.updateTeamMemberProperties(y).then(function(){return y})})},i.updateTeamMemberProperties=function(T){var k,y=this,A=[];return o(T).call(T,function(V){m.fillProperties(V)&&(k=y.updateTeamMember(V),A.push(k))}),n.all(A)},i.getInvalidTeamMembers=function(T,k){var y=this;T=""+T;var A,V=[];return o(k).call(k,function(Ce){A=y.getOne("teamMember",null,m.genId(T,Ce)).then(function(ie){return b(ie)}),V.push(A)}),n.all(V)},i.updateTeamMember=function(T){var k=this,y=T.teamId,A=T.account,V=m.genId(y,A),Ce=d.filterObj(T,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("teamMember",null,V,{modifyObj:Ce,mapper:b}).then(function(ie){var Oe,he;return ie?k.logger.log(s(Oe="db::updateTeamMember: ".concat(y," ")).call(Oe,A),d.pickAsString(Ce,["muteTeam","mute","updateTime","type","valid"])):k.logger.warn(s(he="db::updateTeam: no record ".concat(y," ")).call(he,A)),ie})},i.updateTeamMembers=function(T){var k=this;if(!T.length)return n.resolve();var y,A=[];return o(T).call(T,function(V){y=k.updateTeamMember(V),A.push(y)}),n.all(A)},i.updateTeamManagers=function(T,k,y,A){var V=a(k).call(k,function(Ce){return{teamId:T,account:Ce,type:y?"manager":"normal",updateTime:A}});return this.updateTeamMembers(V)},i.removeTeamMembersByAccounts=function(T,k){var y=a(k).call(k,function(A){return{teamId:T,account:A,valid:!1}});return this.updateTeamMembers(y)},i.removeAllTeamMembers=function(T){var k=this;return k.getOnly("teamMember","teamId",T,{modifyObj:{valid:!1}}).then(function(){return k.logger.warn("db::removeAllTeamMembers: ".concat(T)),k.deleteTeamMemberTimetag(T)})},i.deleteTeamMembers=function(T){var k=this;return k.getOnly("teamMember","teamId",T,{remove:!0}).then(function(){k.logger.warn("db::deleteTeamMembers: ".concat(T)),k.deleteTeamMemberTimetag(T)})},i.deleteTeam=function(T){var k,y=this,A=[];return d.isArray(T)||(T=[T]),o(T).call(T,function(V){V=""+V,k=y.get("team",V).then(function(Ce){if(Ce&&v(Ce))throw u.stillInTeamError({callFunc:"team::deleteTeam",team:Ce});var ie=y.remove("team",V),Oe=y.deleteTeamMembers(V);return n.all([ie,Oe])}),A.push(k)}),A.length===1?A[0]:n.all(A)}},function(t,r,e){var n=e(3),o=e(2),s=e(9),a=e(7),i=e(8),d=e(71).fn,u=e(0),c=e(40),m=e(306),v=e(201);function g(k){return k.valid&&k.validToCurrentUser}function b(k){return k&&k.valid}function T(k){return k&&u.fillUndef(k,{mute:!1,custom:""}),k}d.mergeSuperTeams=function(k,y,A){var V=this,Ce=V.put("superTeam",k),ie=V.leaveTeams(y,A);return n.all([Ce,ie]).then(function(){return V.logger.log("db::mergeSuperTeams:"),V.updateSuperTeamTimetag(A),[k,y,A]})},d.putSuperTeam=function(k){if(k)return u.isArray(k)||(k=[k]),o(k).call(k,function(y){y.validToCurrentUser=!0}),this.put("superTeam",k)},d.updateSuperTeam=function(k){var y=this,A=(k=u.copy(k)).teamId;return y.getOne("superTeam",null,A,{modifyObj:k}).then(function(V){return V?(y.logger.info("db::updateSuperTeam: ".concat(A)),V):(y.logger.warn("db::updateSuperTeam: no record ".concat(A)),y.putSuperTeam(k))})},d.leaveSuperTeam=function(k){var y=this;return y.updateSuperTeam({teamId:k,validToCurrentUser:!1}).then(function(){return y.removeAllSuperTeamMembers(k)})},d.dismissSuperTeam=function(k,y){var A=this,V={teamId:k,valid:!1,validToCurrentUser:!1,updateTime:y};return A.updateSuperTeam(V).then(function(){return A.removeAllSuperTeamMembers(k)})},d.leaveSuperTeams=function(k,y){var A,V=this,Ce=[];return o(k).call(k,function(ie){A=V.leaveSuperTeam(ie.teamId,y),Ce.push(A)}),n.all(Ce)},d.getSuperTeamsByTeamIds=function(k){var y,A=this,V=[];return o(k).call(k,function(Ce){y=A.getSuperTeam(Ce),V.push(y)}),n.all(V)},d.getSuperTeam=function(k){k=""+k;var y=this;return y.getOne("superTeam",null,k).then(function(A){return A?(y.updateSuperTeamProperties([A]),A):null})},d.getSuperTeams=function(){var k=this;return k.getAll("superTeam",{filter:g}).then(function(y){return k.updateSuperTeamProperties(y),y})},d.updateSuperTeamProperties=function(k){o(k).call(k,function(y){y&&m.fillProperties(y)})},d.mergeSuperTeamMembers=function(k,y,A,V){var Ce=this,ie=Ce.putSuperTeamMembers(y),Oe=Ce.updateSuperTeamMembers(A);return n.all([ie,Oe]).then(function(){return Ce.logger.log("db::mergeSuperTeamMembers: ".concat(k)),V!=null?Ce.updateSuperTeamMemberTimetag(k,V):n.resolve()})},d.putSuperTeamMembers=function(k){return this.put("superTeamMember",k)},d.getSuperTeamMemberById=function(k){return this.get("superTeamMember",k)},d.getSuperTeamMembers=function(k,y){var A=this;k=""+k;var V={filter:function(Ce){return Ce.valid},mapper:T};if(y){if(typeof y.joinTime!="number")return void A.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",y.joinTime);y.limit&&(V.limit=y.limit),s(y)?V.filter=function(Ce){return Ce.valid&&Ce.joinTime<=y.joinTime}:V.filter=function(Ce){return Ce.valid&&Ce.joinTime>=y.joinTime}}return A.getOnly("superTeamMember","teamId",k,V).then(function(Ce){return A.updateSuperTeamMemberProperties(Ce).then(function(){return Ce})})},d.getSuperTeamMembersByAccount=function(k){return this.getOnly("superTeamMember","account",k,{filter:b,mapper:T}).then()},d.updateSuperTeamMemberProperties=function(k){var y,A=this,V=[];return o(k).call(k,function(Ce){v.fillProperties(Ce)&&(y=A.updateSuperTeamMember(Ce),V.push(y))}),n.all(V)},d.getInvalidSuperTeamMembers=function(k,y){var A=this;k=""+k;var V,Ce=[];return o(y).call(y,function(ie){V=A.getOne("superTeamMember","id",v.genId(k,ie)).then(function(Oe){return T(Oe)}),Ce.push(V)}),n.all(Ce)},d.updateSuperTeamMember=function(k){var y=this,A=k.teamId,V=k.account,Ce=v.genId(A,V),ie=u.filterObj(k,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("superTeamMember","id",Ce,{modifyObj:ie,mapper:T}).then(function(Oe){var he,Y;return Oe?y.logger.log(a(he="db::updateSuperTeamMember: ".concat(A," ")).call(he,V),u.pickAsString(ie,["muteTeam","mute","updateTime","type","valid"])):y.logger.warn(a(Y="db::updateSuperTeam: no record ".concat(A," ")).call(Y,V)),Oe})},d.updateSuperTeamMembers=function(k){var y=this;if(!k.length)return n.resolve();var A,V=[];return o(k).call(k,function(Ce){A=y.updateSuperTeamMember(Ce),V.push(A)}),n.all(V)},d.removeSuperTeamMembersByAccounts=function(k,y){var A=i(y).call(y,function(V){return{teamId:k,account:V,valid:!1}});return this.updateSuperTeamMembers(A)},d.removeAllSuperTeamMembers=function(k){var y=this;return y.getOnly("superTeamMember","teamId",k,{modifyObj:{valid:!1}}).then(function(){return y.logger.warn("db::removeAllSuperTeamMembers: ".concat(k)),y.deleteSuperTeamMemberTimetag(k)})},d.deleteSuperTeamMembers=function(k){var y=this;return y.getOnly("superTeamMember","teamId",k,{remove:!0}).then(function(){y.logger.warn("db::deleteSuperTeamMembers: ".concat(k)),y.deleteSuperTeamMemberTimetag(k)})},d.deleteSuperTeam=function(k){var y,A=this,V=[];return u.isArray(k)||(k=[k]),o(k).call(k,function(Ce){Ce=""+Ce,y=A.get("superTeam",Ce).then(function(ie){if(ie&&g(ie))throw c.stillInTeamError({callFunc:"team::deleteTeam",team:ie});var Oe=A.remove("superTeam",Ce),he=A.deleteSuperTeamMembers(Ce);return n.all([Oe,he])}),V.push(y)}),V.length===1?V[0]:n.all(V)},d.transferSuperTeam=function(k,y,A){var V=this;return V.updateSuperTeamMembers([y,A]).then(function(){return V.putSuperTeam(k).then(function(){var Ce,ie;return V.logger.info(a(Ce=a(ie="db::transferSuperTeam: ".concat(k.teamId," ")).call(ie,y.account," -> ")).call(Ce,A.account)),[k,y,A]})})}},function(t,r,e){var n=e(2),o=e(3),s=e(6),a=e(71).fn,i=e(0);a.mergeMyInfo=function(d,u){var c=this;return c.put("user",d).then(function(){return u?c.updateMyInfoTimetag(d.updateTime):d})},a.mergeFriendUsers=function(d,u){var c=this;return c.putUsers(d).then(function(){c.updateFriendUserTimetag(u)})},a.putUsers=function(d){return this.put("user",d)},a.putUser=function(d){return this.put("user",d)},a.updateUser=function(d){var u=this,c=(d=i.copy(d)).account;return this.getOne("user",null,c,{modifyObj:d}).then(function(m){return m?u.logger.log("db::updateUser: ".concat(c)):u.logger.warn("db::updateUser: no record ".concat(c)),m})},a.putUsersIfIsFriend=function(d){var u,c=this,m=[],v=[];return n(d).call(d,function(g){u=c.getFriend(g.account).then(function(b){return b&&(u=c.putUser(g),v.push(u)),b}),m.push(u)}),o.all(m).then(function(){return o.all(v).then(function(g){return g})})},a.deleteUser=function(d){return this.remove("user",d)},a.getUser=function(d){return this.getOne("user",null,d)},a.getUsers=function(d){return this.getAll("user",{filter:function(u){return s(d).call(d,u.account)!==-1}})},a.getAllUsers=function(){return this.getAll("user")}},function(t,r,e){var n=e(17),o=e(3),s=e(7),a=e(2),i=e(41),d=e(32),u=e(6),c=e(8),m=e(71).fn,v=e(0),g=e(13);m.putMsg=function(b){var T=this;return v.isArray(b)||(b=[b]),!b.length||n(b[0])?o.resolve():(b=n(b).call(b,function(k){return!k.ignore}),T.put("msg1",b).catch(function(k){return T.notifyError&&T.notifyError(k),o.resolve(b,k)}))},m.putMsgReadDetail=function(b){var T=this;if(b.idClient)return this.put("msgReadDetail",b).catch(function(k){T.logger.error("putMsgReadDetail error",k)})},m.getMsgReadDetail=function(b){return this.getOne("msgReadDetail",null,b)},m.updateMsg=function(b){var T=this;if(!n(b)){var k=b.idClient,y=v.filterObj(b,"resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");return T.getOne("msg1",null,k,{modifyObj:y}).then(function(A){var V,Ce,ie;return A?T.logger.info(s(V=s(Ce=s(ie="db::updateMsg: ".concat(k,"，idServer: ")).call(ie,y.idServer,"，status: ")).call(Ce,y.status,"，time: ")).call(V,y.time)):T.logger.warn("db::updateMsg: no record ".concat(k)),A}).catch(function(A){return T.notifyError&&T.notifyError(A),o.resolve(b)})}},m.updateMsgBatch=function(b){var T=this;if(g.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var k=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");a(b).call(b,function(y){if(y.idClient){var A=k.get(y.idClient);A.onerror=function(V){T.logger.error("updateMsgBatch::store.get:error",V)},A.onsuccess=function(){var V=A.result||y;k.put(i({},V,y)).onerror=function(Ce){T.logger.error("updateMsgBatch::store.put:error",Ce)}}}})}},m.getMsgs=function(b){return g.isBrowser?this.getMsgsIndexedDB(b):g.isRN?this.getMsgsRN(b):o.resolve()},m.getMsgsRN=function(b){var T={};return typeof b.start=="number"&&(T.lowerBound=["time",b.start]),typeof b.end=="number"&&b.end!==1/0&&(T.upperBound=["time",b.end]),T.desc=!1,T.index="time",typeof b.desc=="boolean"&&(T.desc=b.desc),typeof b.limit=="number"&&(T.limit=b.limit),T.searchIndex=[],b.sessionId&&T.searchIndex.push(["sessionId",b.sessionId]),typeof b.type=="string"&&T.searchIndex.push(["type",b.type]),this.getAll("msg1",T)},m.getMsgsIndexedDB=function(b){var T,k=this;k.checkDB();var y="time",A=!1,V=!1,Ce=(b=b||{}).sessionId||[],ie=b.sessionIds||[];v.isString(Ce)?Ce=[Ce]:d(Ce)||(Ce=[]),v.isString(ie)?ie=[ie]:d(ie)||(ie=[]);var Oe=s(Ce).call(Ce,ie);Oe.length===1?(A=!0,y="sessionTime",Ce=Oe[0]):Oe.length>1&&(A=!0,V=!0,ie=Oe);var he=b.start||0,Y=b.end||1/0,ae=he,Fe=Y;A&&!V&&(ae=[Ce,he],Fe=[Ce,Y]);var ze=b.desc!==!1,pe=b.limit||100,le=!1,xe=!1,ue=b.type||[],Ve=b.types||[];v.isString(ue)?ue=[ue]:d(ue)||(ue=[]),v.isString(Ve)?Ve=[Ve]:d(Ve)||(Ve=[]);var Ue=s(ue).call(ue,Ve);Ue.length===1?(le=!0,ue=Ue[0]):Ue.length>1&&(le=!0,xe=!0,Ve=Ue);var er,At=b.subTypes&&b.subTypes.length,ur=b.keyword||"",pr=b.filterFunc;return(V||le||ur||At||v.isFunction(pr))&&(er=function(ar){var hr;if(V&&u(ie).call(ie,ar.sessionId)===-1)return!1;if(le){if(xe){if(u(Ve).call(Ve,ar.type)===-1)return!1}else if(ue!==ar.type)return!1}if(At&&u(hr=b.subTypes).call(hr,ar.subType)===-1)return!1;if(ur){var Ne=ar.text||ar.tip||"";if(u(Ne).call(Ne,ur)===-1)return!1}return!pr||pr(ar)}),n(T=k.server.query("msg1",y).bound(ae,Fe,!0,!0).desc(ze).limit(pe)).call(T,er).execute().catch(function(ar){throw k.reportError(ar,{operation_type:3,context:"tableName: ".concat("msg1",", index ").concat(y,", getMsgsIndexedDB error")},b),ar})},m.getMsgCountAfterAck=function(b){return g.isBrowser?this.getMsgCountAfterAckIndexedDB(b):g.isRN?this.getMsgCountAfterAckRN(b):o.resolve()},m.getMsgCountAfterAckRN=function(b){var T=this,k=b=b||{},y=k.sessionId,A=k.ack;return T.checkDB(),T.getAll("msg1",{searchIndex:["sessionId",y],lowerBound:["time",A]}).then(function(V){var Ce=n(V).call(V,function(ie){if(ie.flow==="out"||ie.isUnreadable===!1)return!1;if(ie.type==="notification")try{return b.shouldCountNotifyUnread(ie)}catch(Oe){throw T.logger.error("userOption:shouldCountNotifyUnread function error",Oe),Oe}return!0});return o.resolve(Ce.length)})},m.getMsgCountAfterAckIndexedDB=function(b){var T=this,k=(b=b||{}).sessionId;return T.checkDB(),T.server.query("msg1","sessionTime").bound([k,b.ack],[k,1/0],!0,!0).execute().then(function(y){var A=n(y).call(y,function(V){if(V.flow==="out"||V.isUnreadable===!1)return!1;if(V.type==="notification")try{return b.shouldCountNotifyUnread(V)}catch(Ce){throw T.logger.error("userOption:shouldCountNotifyUnread function error",Ce),Ce}return!0});return o.resolve(A.length)}).catch(function(y){throw T.reportError(y,{operation_type:3,context:"tableName: ".concat("msg1",", IndexSessionTime ").concat("sessionTime",", getMsgCountAfterAckIndexedDB error")},b),y})},m.amendMsg=function(b){return b?(v.notexist(b.text)&&(b.text=""),b):null},m.getMsgByIdClient=function(b){var T=this;return T.getOne("msg1",null,b).then(function(k){return T.amendMsg(k)})},m.getMsgsByIdClients=function(b){var T,k=this,y=[];return a(b).call(b,function(A){T=k.getMsgByIdClient(A),y.push(T)}),o.all(y)},m.clearSendingMsgs=function(){var b=this;return b.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then(function(T){b.logger.info("db::clearSendingMsgs: msgs send failed",T&&c(T).call(T,function(k){return k.idClient}).join(","))})},m.deleteMsg=function(b){var T,k=this,y=[];return v.isArray(b)||(b=[b]),a(b).call(b,function(A){T=k.getOne("msg1",null,A,{remove:!0}).then(function(V){return k.logger.info("db::deleteMsg done",A,V&&V.idClient),V}).catch(function(V){throw k.logger.error("db::deleteMsg failed",A,V),V}),y.push(T)}),y.length===1?y[0]:o.all(y)},m.deleteMsgsBySessionId=function(b){var T=this,k=null,y=b.start,A=b.end;return y!==void 0&&A!==void 0?k=function(V){return V>y&&V<A}:y!==void 0?k=function(V){return V>y}:A!==void 0&&(k=function(V){return V<A}),k?T.getOnly("msg1","sessionId",b.sessionId).then(function(V){var Ce=[];return c(V=V||[]).call(V,function(ie){k(ie.time)&&Ce.push(ie.idClient)}),T.logger.info("db::deleteMsgsBySessionId: session results",Ce),T.deleteMsg(Ce)}):T.getOnly("msg1","sessionId",b.sessionId,{remove:!0})},m.deleteMsgsByTime=function(b){return this.remove("msg1",null,"time",b.start,b.end,!0,!0)},m.getDeletedMsgsCountByTime=function(b){this.checkDB();var T=this.server.getIndexedDB().transaction(["msg1"],"readonly").objectStore("msg1").index("time"),k=IDBKeyRange.bound(b.start,b.end,!0,!0),y=T.count(k);return new o(function(A,V){y.onsuccess=function(Ce){A(Ce.target.result)},y.onerror=function(Ce){this.logger.error("countDeletedMsgsByTime::index.count:error",Ce),V(Ce)}})},m.deleteAllMsgs=function(){var b=this.clearTable("msg1"),T=this.clearTable("session");return o.all([b,T])},m.getMsgPins=function(b){return this.getOnly("msgPin","sessionId",b)},m.deleteMsgPins=function(b){return this.getOnly("msgPin","sessionId",b,{remove:!0})},m.putMsgPin=function(b){var T=this;return this.modifyOrPut({table:"msgPin",obj:b,key:"idClient"}).catch(function(k){T.notifyError&&T.notifyError(k)})},m.putMsgPins=function(b){return this.put("msgPin",b)},m.deleteMsgPin=function(b){var T=this;return this.getOne("msgPin",null,b.idClient,{remove:!0}).then(function(k){return T.logger.info("db::deleteMsgPin:",k.idClient),k})}},function(t,r,e){var n=e(3),o=e(17),s=e(2),a=e(9),i=e(5),d=e(71).fn,u=e(0),c=u.notundef;d.putSysMsg=function(m){var v=this;return new n(function(g){if(u.isArray(m)||(m=[m]),!o(m[0])){var b=[],T=m.length;s(m).call(m,function(y){y=u.copy(y),v.put("sysMsg",y).then(function(A){b.push(A[0]),k()},k)})}function k(){--T===0&&g(b)}})},d.getSysMsgs=function(m){var v=!a(m=m||{}),g=m.limit||100,b=null,T=null;m.category&&(b="category",T=m.category),m.type&&(b="type",T=m.type);var k,y=m.lastIdServer,A=!1,V=m.read;return(c(y)||c(V))&&(k=function(Ce){return c(y)?(y=""+y,A?ie():(Ce.idServer===y&&(A=!0),!1)):ie();function ie(){return!c(V)||Ce.read===V}}),m={filter:k,desc:v,limit:g},b?this.getOnly("sysMsg",b,T,m):this.getAll("sysMsg",m)},d.getSysMsgByIdServer=function(m){return this.getOne("sysMsg","idServer",m)},d.updateSysMsg=function(m){var v=this;if(!o(m)){var g=""+m.idServer,b=u.filterObj(m,"read state error localCustom");return this.getOne("sysMsg","idServer",g,{modifyObj:b}).then(function(T){return T?v.logger.log("db::updateSysMsg: ".concat(g),u.pickAsString(b,["read","state","error"])):v.logger.warn("db::updateSession: ".concat(g)),T})}},d.markSysMsgRead=function(m){var v=this;return new n(function(g,b){u.isArray(m)||(m=[m]);var T,k,y=[],A=[];s(m).call(m,function(V){T=v.getSysMsgByIdServer(V.idServer).then(function(Ce){Ce&&!Ce.read&&(k=v.updateSysMsg({idServer:Ce.idServer,read:!0}),A.push(k))},b),y.push(T)}),n.all(y).then(function(){n.all(A).then(function(V){g(V)},b)},b)})},d.deleteSysMsg=function(m){var v,g=this,b=[];return u.isArray(m)||(m=[m]),s(m).call(m,function(T){T=""+T,v=g.getOne("sysMsg","idServer",T,{remove:!0}),b.push(v)}),b.length===1?b[0]:n.all(b)},d.deleteAllSysMsgs=function(){var m=this.clearTable("sysMsg"),v=this.clearTable("sysMsgUnread");return n.all([m,v])},d.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then(function(m){var v={};return s(m).call(m,function(g){v[g.type]=g.num}),v})},d.updateSysMsgUnread=function(m){var v,g=this;m=u.copy(m);var b=[];return s(v=i(m)).call(v,function(T){b.push({type:T,num:m[T]})}),this.put("sysMsgUnread",b).then(function(){return g.logger.info("db::updateSysMsgUnread: ",m),m})}},function(t,r,e){var n=e(3),o=e(2),s=e(71).fn,a=e(0);s.putBroadcastMsg=function(i){var d=this;return new n(function(u){a.isArray(i)||(i=[i]);var c=[],m=i.length;function v(){--m===0&&u(c)}o(i).call(i,function(g){g=a.copy(g),d.put("broadcastMsg",g).then(function(b){c.push(b[0]),v()},v)})})},s.getBroadcastMsgs=function(i){return i=i||{},this.getAll("broadcastMsg",i)}},function(t,r,e){var n=e(3),o=e(9),s=e(7),a=e(32),i=e(2),d=e(71).fn,u=e(0),c=u.notundef;d.putSession=function(m){var v=this,g=m.unread;return(m=u.merge({},m)).updateTime===void 0&&m.lastMsg&&m.lastMsg.time&&(m.updateTime=m.lastMsg.time),(m.lastMsg||!m.ack&&!m.msgReceiptTime)&&(m.isDeleted=!1),delete m.unread,this.modifyOrPut({table:"session",obj:m,key:"id",modifyObjWhenPut:{unread:0}}).catch(function(b){return v.notifyError&&v.notifyError(b),m.unread=g,n.resolve(m)})},d.getAllSessions=function(){return this.getAll("session",{index:"updateTime",desc:!0}).catch(function(m){self.notifyError&&self.notifyError(m)})},d.getSessions=function(m){var v=!o(m=m||{}),g=m.limit||100,b=m.lastSessionId,T=m.sessionId,k=!1,y=this,A=function(){return!0},V=function(){return!0};return c(T)?this.getSession(T,m.isDeleted):(c(b)&&(A=function(Ce){return Ce.id===b&&(k=!0),k}),m.includeDeleted||(V=function(Ce){return!Ce.isDeleted}),this.getAll("session",{index:"updateTime",desc:v,limit:g,filter:function(Ce){return A(Ce)&&V(Ce)}}).catch(function(Ce){y.notifyError&&y.notifyError(Ce)}))},d.getSession=function(m,v){var g=this;return this.get("session",m).then(function(b){return n.resolve(!v&&b&&b.isDeleted?void 0:b)}).catch(function(b){throw g.notifyError&&g.notifyError(b),b})},d.updateSession=function(m){var v=this,g=m.id,b=u.filterObj(m,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return m.lastMsg&&(b.lastMsg=m.lastMsg),this.getOne("session",null,g,{modifyObj:b}).then(function(T){if(T){var k,y=s(k="db::updateSession: ".concat(g," ")).call(k,u.pickAsString(b,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]));y+=b.lastMsg?" lastMsg.idClient:".concat(u.get(b,"lastMsg.idClient")):"",v.logger.info(y)}else v.logger.warn("db::updateSession: no record ".concat(g));return T}).catch(function(T){v.notifyError&&v.notifyError(T)})},d.getStickTopSessions=function(){var m=this;return this.getAll("session",{filter:function(v){return v&&v.isTop}}).catch(function(v){m.notifyError&&m.notifyError(v)})},d.deleteSession=function(m,v){var g=v&&v.scene||"";return g==="superTeam"?this.updateSuperTeamSessionAck(0):(g==="p2p"||g==="team"||this.updateSuperTeamSessionAck(0),this.updateSessionAck(0)),this.updateMsgReceiptsTimetag(0),this.remove("session",m)},d.deleteSessionLogic=function(m){var v=this;if(!a(m))return this.getOne("session",null,m,{modifyObj:{isDeleted:!0}});var g=[];return i(m).call(m,function(b){g.push(v.getOne("session",null,b,{modifyObj:{isDeleted:!0}}))}),n.all(g)},d.putSessionsWithMoreRoaming=function(m){return this.put("sessionsWithMoreRoaming",m)},d.updateSessionsWithMoreRoaming=function(m){var v=m.id;return delete m.id,this.getOne("sessionsWithMoreRoaming",null,v,{modifyObj:m})},d.deleteSessionsWithMoreRoaming=function(m){return this.remove("sessionsWithMoreRoaming",m)},d.getSessionsWithMoreRoaming=function(m){return m?this.get("sessionsWithMoreRoaming",m):this.getAll("sessionsWithMoreRoaming")}},function(t,r,e){var n=e(7),o=e(121),s=e(122),a=e(0).throttle,i=function(){function d(u){o(this,d),this.arr=[],this.timer=null,this.maxLength=u.maxLength||100,this.throttleTime=u.throttleTime||5e3,this.processFn=u.processFn||function(){},this.throttleFn=u.processFn||function(){},u.processFn&&(this.throttleFn=a(function(c){u.processFn(c),c.length=0},this.throttleTime,{leading:!1}))}return s(d,[{key:"add",value:function(u){var c;Object.prototype.toString.call(u)==="[object Array]"?this.arr=n(c=this.arr).call(c,u):this.arr.push(u),this.arr.length>=this.maxLength&&(this.processFn(this.arr),this.arr=[]),this.timer=this.throttleFn(this.arr)}},{key:"destroy",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer),this.processFn=function(){},this.throttleFn=function(){}}},{key:"clear",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer)}}]),d}();t.exports=i},function(t,r,e){var n=e(25),o=e(58),s=e(57),a=e(10),i=e(312),d=e(7),u=e(3),c=e(26),m=e(17),v=e(6),g=e(15),b=e(24),T=e(2),k=e(123),y=e(5),A=e(59),V=e(60),Ce=e(61),ie=e(62),Oe=e(47);function he(Ue,er){var At=y(Ue);if(A){var ur=A(Ue);er&&(ur=m(ur).call(ur,function(pr){return V(Ue,pr).enumerable})),At.push.apply(At,ur)}return At}function Y(Ue){for(var er=1;er<arguments.length;er++){var At,ur,pr=arguments[er]!=null?arguments[er]:{};er%2?T(At=he(Object(pr),!0)).call(At,function(ar){o(Ue,ar,pr[ar])}):Ce?ie(Ue,Ce(pr)):T(ur=he(Object(pr))).call(ur,function(ar){Oe(Ue,ar,V(pr,ar))})}return Ue}var ae=e(35).fn,Fe=e(0),ze=e(13),pe=e(154).V2NIMConnectStatus;function le(Ue,er){var At,ur,pr,ar,hr=this,Ne=ze.getDefaultLinkUrl(hr.options.secure);hr.socketUrls=[Ne],hr.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:er,code:200,net_connect:hr.checkNetworkAvailable(),succeed:!0}),hr.msgStatEnable=!!Ue.common["msg.stat.enable"],hr.msgStatEnable&&(hr.msgDelayTimer=c(b(ur=hr.doReportMsgDelay).call(ur,hr),1e4)),Ue.common&&Ue.common.link&&T(pr=Ue.common.link).call(pr,function($e){hr.socketUrls.unshift(ze.formatSocketUrl({url:$e,secure:hr.options.secure}))}),Ue.common&&Ue.common["link.default"]&&T(ar=Ue.common["link.default"]).call(ar,function($e){var tr,nr;$e=ze.formatSocketUrl({url:$e,secure:hr.options.secure}),v(tr=hr.socketUrls).call(tr,$e)===-1&&(hr.socketUrls=d(nr=hr.socketUrls).call(nr,$e))}),hr.socketUrls=m(At=hr.socketUrls).call(At,function($e,tr,nr){return v(nr).call(nr,$e)===tr});try{ze.uploadUrl=Ue.nosup[0]}catch{}if(ze.chunkUploadUrl=Ue["nos-chunk"]||ze.chunkUploadUrl||"",hr.logger.info("link::refreshSocketUrl: ".concat(er," ajax load , got socket urls "),hr.socketUrls),ze.hasLocalStorage){Ue.common["lbs.backup"]&&hr.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",a(Ue.common["lbs.backup"]));var or=Fe.get(Ue,"common.report.apierror.on");Ue.common.report&&localStorage.setItem("nim_lbs_fail_report_on",or===!1?"0":"1")}if(Ue.common.socketConcurrent){var ir=Ue.common.socketConcurrent;typeof ir=="number"&&ir>=1&&ir<=3&&(hr.options.socketConcurrent=ir,hr.imsocket.setConfig({socketConcurrent:ir}))}}function xe(Ue,er){if(this.statusProtector.getConnectStatus()===pe.V2NIM_CONNECT_STATUS_DISCONNECTED)return u.reject(new Error("already disconnected"));if(Ue>=er){this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var At=ze.getDefaultLinkUrl(this.options.secure);return this.logger.warn("doRequestBackupLbsUrls: use default socket link",At),this.socketUrls=[At],u.resolve()}return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"),u.reject(new Error("lbs request failed"))}function ue(Ue,er){var At=er.status||10001,ur=typeof er=="string"?er:er&&er.message?er.message:"Unknown error";this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:Ue,code:At,description:ur,net_connect:this.checkNetworkAvailable(),succeed:!1})}function Ve(Ue){var er=this;if(!(Ue&&Ue.length>0))throw new Error("No  lbs url to try");var At=0,ur=0,pr=!1,ar=null;er.logger.log("doRequestBackupLbsUrls: use lbs url in index ",At,Ue);var hr=function(){var Ne=Ue[At++],or=new Date().getTime();return er.promiseAbortManager.add(er.doRequestLbs(Ne)).then(function(ir){if(ar&&clearInterval(ar),pr===!1)return le.call(er,ir,Ne),pr=!0,u.resolve()}).catch(function(ir){return ur+=1,er.logger.warn("doRequestBackupLbsUrls: ".concat(Ne," ajax lbs error"),ir),ue.call(er,Ne,ir,or),xe.call(er,ur,Ue.length)})};return new u(function(Ne,or){ar=k(function(){if(!(At>=Ue.length))return er.statusProtector.getConnectStatus()===pe.V2NIM_CONNECT_STATUS_DISCONNECTED?(ar&&clearInterval(ar),void or(new Error("already disconnected"))):void hr().then(function(){ar&&clearInterval(ar),Ne()}).catch(function(){});ar&&clearInterval(ar)},2e3),hr().then(function(){ar&&clearInterval(ar),Ne()}).catch(function(){})})}ae.connect=function(){if(this.checkNetworkAvailable()===!1&&this.autoconnect)return this.logger.info("connect::skip this reconnection attempt because network is offline"),void this.reconnect();ze.isBrowser&&this.reporter.restore(),this.createConnectTime=s(),this.reporter.reportTraceCancel("login"),this.reporter.reportTraceStart("login",{user_id:this.options.account,action:this.autoconnect?"auto_login":"manual_login"}),this.reporter.reportTraceUpdateV2("login",{code:0,description:a(Y(Y({},this.options),{},{account:"***",token:"***"}),function(Ue,er){return Ue===""||typeof er!="function"&&n(er)!=="object"?er:void 0}),operation_type:"conf_init",succeed:!0,target:""}),i(ae).connect.call(this)},ae.onConnect=function(){this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:this.url,code:200,net_connect:this.checkNetworkAvailable(),succeed:!0}),i(ae).onConnect.call(this)},ae.onHandshakeFailed=function(Ue,er){var At;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:er,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_handshake_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(d(At="link::onHandshakeFailed: shandshake failed, startTime: ".concat(Ue,", targetUrl: ")).call(At,er))},ae.onConnectFailed=function(Ue,er,At){var ur,pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:At,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_connect_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(d(ur=d(pr="link::onConnectFailed: connect failed due to ".concat(Ue,", startTime: ")).call(pr,er,", targetUrl: ")).call(ur,At))},ae.onSocketError=function(Ue,er,At){var ur,pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:At,description:"ws_onerror:"+Ue,code:0,succeed:!1}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(d(ur=d(pr="link::onSocketError: due to ".concat(Ue,", startTime: ")).call(pr,er,", targetUrl: ")).call(ur,At))},ae.probeIp=function(){var Ue=this,er=ze.ipProbeAddr;return new u(function(At){var ur=0,pr=-1;function ar(){++ur===2&&(ur=-1,At(pr))}Ue.adaptersRequest(er.ipv4,{timeout:2e3,onerror:ar,onload:function(hr){pr++,ar()}}),Ue.adaptersRequest(er.ipv6,{timeout:2e3,onerror:ar,onload:function(hr){pr+=2,ar()}}),c(function(){ur||pr===-1||(ur=-1,At(pr))},100)})},ae.refreshSocketUrl=function(){var Ue=this;return this.statusProtector.emit("auth/loginLifeCycleAddressing"),ze.isWeixinApp?this.doRefreshSocketUrl(2):this.options.ipVersion===2?this.probeIp().then(function(er){return Ue.doRefreshSocketUrl(er)}):this.doRefreshSocketUrl(this.options.ipVersion)},ae.doRefreshSocketUrl=function(Ue){var er,At,ur=this.options.lbsUrl||ze.lbsUrl;Ue!==1&&Ue!==2&&(Ue=0),ze.ipVersion=Ue;var pr=this.options.lbsBackupUrlsCustomer||[],ar=[];this.options.lbsBackup&&ze.hasLocalStorage&&(ar=(ar=localStorage.getItem("nim_lbs_backup"))?JSON.parse(ar):[]);var hr=d(er=d(At=[ur]).call(At,ar)).call(er,pr);return hr=m(hr).call(hr,function(Ne,or,ir){return v(ir).call(ir,Ne)===or}),Ve.call(this,hr)},ae.doRequestLbs=function(Ue){var er=this,At=this.options,ur=ze.info;Ue=Ue+Fe.genUrlSep(Ue)+"id="+At.account+"&sv="+ur.sdkVersion+"&pv="+ur.protocolVersion+"&networkType="+ze.ipVersion+"&hostEnv="+ze.hostEnv+"&k="+At.appKey,this.logger.info("doRequestLbs ".concat(g(Ue).call(Ue,0,-32)));var pr=this;return new u(function(ar,hr){ze.isWeixinApp?wx.request({url:Ue,success:function(Ne){var or=Ne&&Ne.statusCode,ir=Ne&&Ne.data;or===200?ar(ir):hr(ir)},fail:function(Ne){hr(Ne)}}):er.adaptersRequest(Ue,{proxyUrl:Fe.url2origin(Ue)+"/lbs/res/cors/nej_proxy_frame.html",timeout:ze.xhrTimeout,onload:function(Ne){try{var or=JSON.parse(Ne);ar(or)}catch(ir){pr.logger.warn("doRequestLbs parse JSON Error. request lbs failed"),hr(ir)}},onerror:function(Ne){hr(Ne)}},{exception_service:1})})},ae.disconnect=function(){var Ue=this,er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void c(function(){i(ae).disconnect.call(Ue,er)},0);this.connecting?this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==pe.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect"):this.logger.warn("IMProtocolFn api disconnect:: other logic entered");var At=i(ae);At.disconnect.call(this,er)},ae.notifyDisconnect=function(Ue){i(ae).notifyDisconnect.call(this,Ue)}},function(t,r,e){var n=e(102),o=e(58),s=e(103),a=e(3),i=e(10),d=e(26),u=e(24),c=e(6),m=e(2),v=e(17),g=e(5),b=e(59),T=e(60),k=e(61),y=e(62),A=e(47);function V(xe,ue){var Ve=g(xe);if(b){var Ue=b(xe);ue&&(Ue=v(Ue).call(Ue,function(er){return T(xe,er).enumerable})),Ve.push.apply(Ve,Ue)}return Ve}function Ce(xe){for(var ue=1;ue<arguments.length;ue++){var Ve,Ue,er=arguments[ue]!=null?arguments[ue]:{};ue%2?m(Ve=V(Object(er),!0)).call(Ve,function(At){o(xe,At,er[At])}):k?y(xe,k(er)):m(Ue=V(Object(er))).call(Ue,function(At){A(xe,At,T(er,At))})}return xe}var ie=e(35).fn,Oe=e(192),he=e(13),Y="NIM-AllGrayscaleConfig",ae="NIM-AllMixStorePolicy",Fe=e(0);function ze(){var xe=this;if(he.hasLocalStorage&&localStorage.getItem(Y)){var ue=null;try{ue=JSON.parse(localStorage.getItem(Y))[xe.options.appKey]}catch(Ve){xe.logger.error("appGrayConfig error",Ve)}ue&&(xe.appGrayConfig=ue.timeStamp+1e3*ue.ttl>new Date().getTime()?ue:null,xe.appGrayConfig&&pe.apply(xe))}xe.appGrayConfig||xe.sendCmd("getGrayscaleConfig",{providers:""},function(Ve,Ue){if(Ve)xe.logger.error("Calculate Delay time, getGrayscaleConfig error",Ve);else if(Ue){var er=Ue;if(er.grayConfig=JSON.parse(er.grayConfig),er.ttl=Number(er.ttl),er.timeStamp=new Date().getTime(),xe.appGrayConfig=er,he.hasLocalStorage){var At=localStorage.getItem(Y)?JSON.parse(localStorage.getItem(Y)):{};At[xe.options.appKey]=er,localStorage.setItem(Y,i(At))}pe.apply(xe)}else xe.logger.error("Calculate Delay time, getGrayscaleConfig error",Ue)})}function pe(){var xe=this;if(he.hasLocalStorage&&localStorage.getItem(ae)){var ue=null;try{ue=JSON.parse(localStorage.getItem(ae))[xe.options.appKey]}catch(Ve){xe.logger.error("mixStorePolicy error",Ve)}ue&&(xe.mixStorePolicy=ue.timeStamp+1e3*ue.ttl>new Date().getTime()?ue:null,xe.mixStorePolicy&&ue.ttl&&ue.ttl!==0&&(xe.mixStorePolicyClock=d(u(pe).call(pe,xe),1e3*ue.ttl)))}xe.mixStorePolicy||xe.sendCmd("getMixStorePolicy",{providers:xe.options.providers&&xe.options.providers.s3?[1,2]:[1]},function(Ve,Ue){if(Ve){xe.logger.error("Calculate Delay time, getMixStorePolicy error",Ve);try{Ue=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[xe.options.appKey]}catch(ur){xe.logger.error("error:","get last mixStorePolicy failed",ur)}}else if(Ue){var er=Ue;if(er.ttl=Number(er.ttl),er.providers=er.providers.split(","),er.nosPolicy=er.nosPolicy?JSON.parse(er.nosPolicy):null,er.s3Policy=er.s3Policy?JSON.parse(er.s3Policy):null,er.timeStamp=new Date().getTime(),xe.mixStorePolicy=er,er.ttl&&er.ttl!==0&&(xe.mixStorePolicyClock=d(u(pe).call(pe,xe),1e3*er.ttl)),he.hasLocalStorage){var At=localStorage.getItem(ae)?JSON.parse(localStorage.getItem(ae)):{};At[xe.options.appKey]=er,localStorage.setItem(ae,i(At))}}else xe.logger.error("Calculate Delay time, mixStorePolicy error",Ue)})}function le(xe){var ue=this,Ve=this;xe.code===399?(this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"),Ve.forceDisconnect(),Ve.doRefreshSocketUrl(he.ipVersion).then(function(){Ve.reconnect()}).catch(function(){ue.logger.warn("pendingLoginFailed:399, refresh LBS url failed")})):xe.code===398?(this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),Ve.backoff.setMin(5e3),Ve.reconnect()):(this.logger.error("pendingLoginFailed: ",xe.code,xe),Ve.onAuthError(xe,"link::onLogin"))}ie.assembleLogin=function(){var xe=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(xe):a.resolve({login:xe})},ie.login=s(n.mark(function xe(){var ue,Ve,Ue,er=this;return n.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return ue=this,At.next=3,ue.assembleLogin();case 3:if(Ve=At.sent,!(Ue=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){At.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[Ue]){At.next=10;break}return this.logger.warn("onConnect::repeat login",Ue),At.abrupt("return");case 10:this.socketIds[Ue]=!0,At.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+Ue+" appLogin is "+Ve.login.appLogin),ue.sendCmd("login",Ce({},Ve),function(ur,pr){if(ur){var ar=Fe.get(ur,"event.uploadCode")||ur&&ur.code;ar=typeof ar!="number"?408:ar;var hr=Fe.get(ur,"event.disconnectReason"),Ne=hr?i({disconnect_reason:hr}):ur&&ur.message||"login failed";ue.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:ar,description:Ne,net_connect:ue.checkNetworkAvailable(),succeed:!1}),ue.reporter.reportTraceEnd("login",!1),le.call(ue,ur),ue.statusProtector.emit("auth/loginLifeCycleLoginFail",ur)}else ue.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",succeed:!0,net_connect:ue.checkNetworkAvailable(),code:200}),ue.reporter.reportTraceEnd("login",!0),ue.resetReconnectStatus(),er.heartbeatFail=0,er.hasLogin=!0,er.autoconnect=!0,ue.startHeartbeat(),ue.initOnlineListener(),ue.statusProtector.emit("auth/loginLifeCycleLoginSucc"),ue.afterLogin(pr)});case 16:case"end":return At.stop()}},xe,this)})),ie.afterLogin=function(xe){var ue=this;this.sendCmd("getNosCdnHost",{}),(typeof Fe.get(this.options,"privateConf.isMixStoreEnable")=="boolean"?this.options.privateConf.isMixStoreEnable:he.privateConf.isMixStoreEnable)&&ze.apply(this),this.initPush instanceof Function&&this.initPush();var Ve=this.db;if(Ve.enable){var Ue=this.account;this.options.appendAppKeyForDBName&&(Ue+="-"+this.options.appKey),this.db.init(Ue).then(function(){ue.notifyLogin(xe),ue.syncData()},function(er){ue.logger.warn("link::afterLogin: no db",er),Ve.reset(!1),ue.notifyLogin(xe),ue.syncData()})}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(xe),this.syncData()},ie.getFileAuthToken=function(xe){var ue=this,Ve=ue.mixStorePolicy.nosPolicy.authPolicy.policyType;Ve!==-1?c(Ve).call(Ve,xe.type)<0?ue.logger.error("this type Token error not support"):xe.type!=3||xe.urls&&xe.urls.length?ue.sendCmd("getBackSourceToken",{mixAuthTokenReq:xe},function(Ue,er){if(Ue)return ue.logger.error("getBackSourceToken error",Ue),Ue;xe.done&&xe.done(er)}):ue.logger.error("urls is Required when type 3"):ue.logger.error("don't need token")},ie.processAuth=function(xe){switch(xe.cmd){case"login":xe.error||(xe.content=xe.content||{},this.loginAndroidPush&&this.loginAndroidPush(xe.content.aosPushInfo||{}),xe.obj=xe.content.loginRes,this.connectionId=xe.content.loginRes.connectionId,this.onLoginPortsChange(xe,2));break;case"kicked":return void this.onKicked(xe);case"multiPortLogin":this.onLoginPortsChange(xe,xe.content.state);break;case"kick":xe.error||(xe.obj.deviceIds=xe.content.deviceIds)}},ie.onLoginPortsChange=function(xe,ue){var Ve=this,Ue=xe.content.loginPorts;if(Ue&&Ue.length){var er=!0;switch(ue){case 2:er=!0;break;case 3:er=!1}m(Ue).call(Ue,function(At){At.type=Oe.reverseType(At.type),At.customClientType&&(At.customClientType=+At.customClientType),At.time=+At.time,At.online=er}),(Ue=v(Ue).call(Ue,function(At){return At.connectionId!==Ve.connectionId})).length&&(Ve.logger.info("link::onLoginPortsChange:",Ue),Ve.options.onloginportschange(Ue))}},ie.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],ie.kickedMessages=["","不允许同一个帐号在多个地方同时登录","被服务器踢了","被其它端踢了","悄悄被踢"]},function(t,r,e){var n=e(783),o=e(3),s=e(24),a=e(7),i=e(749),d=e(41),u=e(2),c=e(5),m=e(138),v=e(17),g=e(6),b=e(8),T=e(797),k=e(69),y=e(26),A=e(32),V=e(87),Ce=e(35).fn,ie=e(0),Oe=e(40),he=ie.undef,Y=ie.objs2ids,ae=ie.objs2accounts,Fe=ie.teams2ids,ze=e(152),pe=ie.getGlobal(),le=e(105).EMSyncType;Ce.beforeSync=function(){var xe=this.db;return xe.enable?xe.clearSendingMsgs():o.resolve()},Ce.syncData=function(){var xe=this,ue=xe.db,Ve=xe.options,Ue=ue.enable;function er(At){var ur;xe.syncPromiseArray=[],xe.syncResult={},xe.syncTeamMembersPromiseArray=[],xe.syncSuperTeamMembersPromiseArray=[],xe.syncTeamMembersResult={},xe.checkNosReqNum=0,xe.getNosOriginUrlReqNum=0,ie.verifyBooleanWithDefault(Ve,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal",!0,"","sync::syncData"),ie.verifyBooleanWithDefault(Ve,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var pr={};At=At||{},pe._nimForceSyncIM&&(xe.logger.warn("sync::syncData: nimForceSyncIM"),delete At.teams,pe._nimForceSyncIM=!1),pr.myInfo=At.myInfo||0,pr.deleteMsgSelf=At.deleteMsgSelf||0,pr.offlineMsgs=0,Ve.syncRelations&&(pr.relations=At.relations||0),Ve.syncFriends&&(pr.friends=At.friends||0),Ve.syncFriendUsers&&(pr.friendUsers=At.friendUsers||0),Ve.syncRobots&&(pr.robots=At.robots||0),Ve.syncTeams&&(pr.teams=At.teams||0),Ve.syncSuperTeams&&(pr.superTeams=At.superTeams||0),Ve.syncStickTopSessions&&(pr.stickTopSessions=At.stickTopSessions||0),Ve.syncSessionUnread&&(pr.sessionAck=Ue&&At.sessionAck||0,pr.superTeamSessionAck=Ue&&At.superTeamSessionAck||0),Ve.syncRoamingMsgs&&(pr.roamingMsgs=Ue&&At.roamingMsgs||At.roamingMsgs||0),Ve.syncSuperTeamRoamingMsgs&&(pr.superTeamRoamingMsgs=Ue&&At.superTeamRoamingMsgs||0),Ve.syncMsgReceipts&&(pr.msgReceipts=At.msgReceipts||0),Ve.syncExtraTeamInfo&&(pr.myTeamMembers=At.myTeamMembers||0),Ve.syncExtraSuperTeamInfo&&(pr.myInfoInSuperTeams=At.myInfoInSuperTeams||0),Ve.syncBroadcastMsgs&&(pr.broadcastMsgs=At.broadcastMsg||0),pr.donnop=At.donnop||0,pr.deleteMsg=At.deleteMsg||0,pr.deleteSuperTeamMsg=At.deleteSuperTeamMsg||0,pr.sessionHistoryMsgsDelete=At.sessionHistoryMsgsDelete||0,pr.netcallMsgs=0,Ve.syncFilter&&(pr.filterMsgs=0),Ve.syncAvSignal&&(pr.avSignal=0);var ar=s(ur=xe.onSyncData).call(ur,xe);ar.isImSyncDataCb=!0,xe.logger.info("syncData:: start sync",pr),xe.reporterHook.emit("reporter/syncStart"),xe.sendCmd("sync",{sync:pr,isImSyncDataObj:!0},ar)}xe.syncing=!0,Ue?xe.beforeSync().then(function(){return xe.db.getTimetags()}).then(function(At){er(At)},function(){er()}):er(xe.timetags)},Ce.onSyncData=function(xe){xe&&(xe.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",xe))},Ce.processSync=function(xe){switch(this.logger.log("sync::processSync cmd: ".concat(xe.cmd)),xe.cmd){case"syncDone":if(xe.error){var ue,Ve=ie.get(xe.error,"message"),Ue=ie.get(xe.error,"code");this.logger.error(a(ue="sync::processSync syncDoneError errMsg: ".concat(Ve,", errCode: ")).call(ue,Ue)),this.logger.error("sync::processSync disconnect because syncDone failed");var er=Oe.syncError({errMsg:Ve,errCode:Ue});this.shouldReconnect=!1,this.markAllCallbackInvalid(er),this.notifyDisconnect(er)}else this.timetags.sync=xe.content.timetag,this.reporterHook.emit("reporter/syncRecv"),this.onSyncDone();break;case"syncTeamMembersDone":this.onSyncTeamMembersDone()}},Ce.onSyncDone=function(){var xe,ue,Ve,Ue,er,At,ur,pr,ar,hr,Ne,or,ir,$e,tr,nr,Pt,Et,kt,rr,cr,mr,yr,Tr,Ir,kr,Ar,Rr,Mn,Or,Pr=this,Nr=Pr.db,Wr=Nr.enable,Yr=Pr.options,Ur=Pr.syncPromiseArray,qr=Pr.syncResult;function Yn(){if(Ur){Pr.logger.info("sync::onSyncDone: after sync",ie.promises2cmds(Ur)),Ur=[],ue=qr.blacklist||[],Ve=qr.invalidBlacklist||[],Ue=qr.mutelist||[],er=qr.invalidMutelist||[],At=qr.friends,ar=qr.myTeamMembers,hr=qr.mySuperTeamMembers,ur=qr.invalidFriends||[],pr=qr.myInfo,Ne=qr.users,ir=qr.superTeams,tr=qr.invalidSuperTeams,or=qr.teams,$e=qr.invalidTeams||[],nr=qr.sessions||{},Pt=i(d({},Pr.sessionSet)),Et=qr.ackMap,qr.msgReceipts,kt=qr.roamingMsgs,rr=qr.offlineMsgs,cr=qr.offlineFilterMsgs,yr=qr.offlineSysMsgs,Tr=qr.offlineCustomSysMsgs,Ir=qr.offlineFilterSysMsgs,kr=qr.offlineFilterCustomSysMsgs,Ar=qr.sysMsgUnread,Rr=qr.sessionsWithMoreRoaming,Or=qr.clearServerHistoryMsgs||[];var bo=o.resolve();(function(){if(Wr){var uo,po=[$n()];nr&&u(uo=c(nr)).call(uo,function(to){po.push(Nr.putSession(nr[to]))}),bo=o.all(po).then(function(){var to,Lr=a(to=[]).call(to,n(c(Et||{})),n(c(nr||{})));Lr=v(Lr).call(Lr,function(Bn,Xn,ko){return g(ko).call(ko,Bn)===Xn});var Qr=[];return u(Lr).call(Lr,function(Bn){var Xn,ko=nr[Bn];(ko.lastMsg||ko.ack)&&(Xn=(Xn=ko.ack?o.resolve(ko):Nr.getSession(ko.id)).then(function(no){var Ra=no.ack||0;return Nr.getMsgCountAfterAck({shouldCountNotifyUnread:Pr.options.shouldCountNotifyUnread,sessionId:Bn,ack:Ra}).then(function(fs){return no.unread=fs||0,nr[Bn]=Pr.mergeSession(no),Nr.updateSession(no)})}),Qr.push(Xn))}),o.all(Qr)}).then(function(){var to=[];return Pr.saveAck.p2pTeam&&to.push(Nr.updateSessionAck(Pr.saveAck.p2pTeam).catch(function(Lr){return Pr.logger.error("sessionAck::syncSessionAck::updatetimetag db",Lr),o.reject(Lr)})),Pr.saveAck.superTeam&&to.push(Nr.updateSuperTeamSessionAck(Pr.saveAck.superTeam).catch(function(Lr){return Pr.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",Lr),o.reject(Lr)})),o.all(to)})}else if(nr){var No,An,Sa;u(No=[kt,rr]).call(No,function(to){to&&u(to).call(to,function(Lr){var Qr;(An=nr[Lr.sessionId]).unread=An.unread||0,An.unreadMsgs=An.unreadMsgs||[],Sa=An.ack||0,u(Qr=Lr.msgs).call(Qr,function(Bn){if(!(Sa>=Bn.time))if(Bn.type==="notification"){var Xn;try{Xn=Pr.options.shouldCountNotifyUnread(Bn)}catch(ko){throw Pr.logger.error("userOption:shouldCountNotifyUnread function error",ko),ko}Xn&&An.unread++}else Bn.flow==="in"&&Bn.isUnreadable!==!1&&(An.unread++,An.unreadMsgs.push(Bn))}),Pr.mergeSession(An)})})}})(),bo.then(function(){if(Wr&&!Pr.hasSynced)Pr.hasSynced=!0,function(){Yr.syncRelations&&(xe=Nr.getRelations().then(function(An){ue=An[0],Ue=An[1],ue.invalid=Ve,Ue.invalid=er}).catch(function(An){return An._msg="on relations error",Pr.logger.error("sync::syncRelation: ",An),o.reject(An)}),Ur.push(xe)),Yr.syncFriends&&(xe=Nr.getFriends().then(function(An){(At=An).invalid=ur}).catch(function(An){return An._msg="on friends error",Pr.logger.error("sync::syncFriends: ",An),o.reject(An)}),Ur.push(xe)),he(pr)&&(xe=Nr.getUser(Pr.account).then(function(An){pr=An}).catch(function(An){return An._msg="on myInfo error",Pr.logger.error("sync::syncMyInfo: ",An),o.reject(An)}),Ur.push(xe)),Yr.syncFriendUsers&&(xe=Nr.getFriends().then(function(An){return b(An).call(An,function(Sa){return Sa.account})}).then(function(An){return Nr.getUsers(An)}).then(function(An){Ne=An}).catch(function(An){return An._msg="on users error",Pr.logger.error("sync::syncFriendUser: ",An),o.reject(An)}),Ur.push(xe)),Yr.syncTeams&&(xe=Nr.getTeams().then(function(An){(or=An).invalid=$e}).catch(function(An){return An._msg="on teams error",Pr.logger.error("sync::syncTeams: ",An),o.reject(An)}),Ur.push(xe)),Yr.syncSuperTeams&&(xe=Nr.getSuperTeams().then(function(An){(ir=An).invalid=tr}).catch(function(An){return An._msg="on superteams error",Pr.logger.error("sync::syncSuperTeams: ",An),o.reject(An)}),Ur.push(xe)),xe=Nr.getTeamMembersByAccount(Pr.account).then(function(An){ar=An,Pr.mergeMyTeamMembers(An)}).catch(function(An){return Pr.logger.error("sync::getTeamMembersByAccount: ",An),o.reject(An)}),Ur.push(xe),xe=Nr.getSuperTeamMembersByAccount(Pr.account).then(function(An){hr=An,Pr.mergeMySuperTeamMembers(An)}).catch(function(An){return Pr.logger.error("sync::getSuperTeamMembersByAccount: ",An),o.reject(An)}),Ur.push(xe),xe=Nr.getDonnop().then(function(An){Pr.mergeDonnop(An)}).catch(function(An){return Pr.logger.error("sync::donnop: ",An),o.reject(An)}),Ur.push(xe),xe=Nr.getAllSessions().then(function(An){nr=An}).catch(function(An){return Pr.logger.error("sync::getSession: ",An),o.reject(An)}),Ur.push(xe),xe=Nr.getSysMsgUnread().then(function(An){Ar=An}).catch(function(An){return An._msg="on sysMsgUnread error",Pr.logger.error("sync::getSysMsgUnread: ",An),o.reject(An)}),Ur.push(xe),Ur.push(Nr.getSessionsWithMoreRoaming().then(function(An){Rr=An}))}();else{var uo,po,No=[];u(uo=c(nr)).call(uo,function(An){(po=nr[An]).lastMsg&&No.push(po)}),nr=m(No).call(No,function(An,Sa){return Sa.updateTime-An.updateTime})}o.all(Ur).then(Jr).then(Fr,function(An){Pr.logger.error("taskAfterSync syncDBDataPromise error:",An),An.callFunc="sync::onSyncDone",An.message="taskAfterSync syncDBDataPromise 出错",Pr.onCustomError("SYNC_SESSION_ACK_ERROR",An)})})}else Pr.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function $n(){var bo=[];return kt&&u(kt).call(kt,function(uo){var po;bo=a(po=[]).call(po,n(bo),n(uo.msgs))}),rr&&u(rr).call(rr,function(uo){var po;bo=a(po=[]).call(po,n(bo),n(uo.msgs))}),bo.length?Nr.putMsg(bo).then(function(){return bo}):o.resolve(bo)}function Jr(){Pr.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(qr.deleteMsgSysMsgs){var uo,po={};kt&&u(kt).call(kt,function(Qr){po[Qr.sessionId]=Qr});var No={};rr&&u(rr).call(rr,function(Qr){No[Qr.sessionId]=Qr});var An=Pr.api;if(u(uo=qr.deleteMsgSysMsgs).call(uo,function(Qr){var Bn;u(Bn=Qr.sysMsgs).call(Bn,function(Xn){var ko=Xn.msg,no=ko.sessionId;Qr.type==="roaming"&&po[no]?po[no].msgs=An.cutMsgs(po[no].msgs,ko):No[no]&&(No[no].msgs=An.cutMsgs(No[no].msgs,ko))})}),!Nr.enable){var Sa,to=a(Sa=[]).call(Sa,n(kt||[]),n(rr||[]));u(to).call(to,function(Qr){if(Qr.msgs.length){var Bn=Pr.genSessionByMsgs(Qr.msgs);Pr.cacheSyncedSession(Bn),nr.unshift(Bn)}else{var Xn=T(nr).call(nr,function(ko){return ko.id===Qr.sessionId});k(nr).call(nr,Xn,1)}});var Lr={};u(nr).call(nr,function(Qr){if(Lr[Qr.id]){var Bn=Qr.lastMsg.time>Lr[Qr.id].lastMsg.time?Qr.lastMsg:Lr[Qr.id].lastMsg;Lr[Qr.id]=Qr,Lr[Qr.id].lastMsg=Bn}else Lr[Qr.id]=Qr}),nr=i(Lr),nr=m(nr).call(nr,function(Qr,Bn){return Bn.updateTime-Qr.updateTime})}}}(),Mn=Pr.syncResult.stickTopSessions||[],u(nr).call(nr,function(uo){var po=Pr.sessionSet[uo.id];po&&po.isTop&&(uo.isTop=!0)});var bo=[Pr.deleteMsgOfflineRoaming(qr.deleteMsgSysMsgs,nr)];return Or&&u(Or).call(Or,function(uo){bo.push(function(po,No){var An;Pr.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(po)),No=No||new Date().getTime();var Sa=v(nr).call(nr,function(Bn){return Bn.id===po}),to=Pr.getSessionInCache(po);An=to||Sa[0];var Lr=Yr.rollbackClearMsgsUnread!==!1,Qr=[];return Nr.enable&&Qr.push(Nr.deleteMsgsBySessionId({sessionId:po,end:No})),Lr&&An&&(An.lastMsg=null,An.unread=0,An=Pr.mergeSession(An),Nr.enable&&Qr.push(Nr.updateSession(An))),o.all(Qr)}(uo.sessionId,uo.time))}),o.all(bo)}function Fr(){y(Wn,0)}function Wn(){var bo,uo,po=[],No=[];if(ue&&ue.length&&(Pr.logger.info("sync::notifyDataAsync: on blacklist",ae(ue)),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType3_8),Yr.onblacklist(ue)),Ue&&Ue.length&&(Pr.logger.info("sync::notifyDataAsync: on mutelist",ae(Ue)),Yr.onmutelist(Ue)),At&&(Pr.logger.info("sync::notifyDataAsync: on friends",ae(At)),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType12_5),Yr.onfriends(At)),pr&&(Pr.logger.info("sync::notifyDataAsync: on myInfo"),Pr.myInfo=pr,Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType3_109),Yr.onmyinfo(ie.copy(pr))),ar){Pr.logger.info("sync::notifyDataAsync: on myTeamMembers",ar),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType8_126);var An=ie.simpleClone(ar);A(An)||(An=[An]),Yr.onMyTeamMembers(An)}if(hr){Pr.logger.info("sync::notifyDataAsync: on mySuperTeamMembers",hr),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType21_111);var Sa=ie.simpleClone(hr);A(Sa)||(Sa=[Sa]),Yr.onMySuperTeamMembers(Sa)}Ne&&(u(Ne).call(Ne,function(no){Pr.mergeUser(no)}),Pr.logger.info("sync::notifyDataAsync: on users",ae(Ne)),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType12_6),Yr.onusers(Ne)),or&&(Pr.logger.info("sync::notifyDataAsync: on teams",Fe(or)),Yr.onteams(or),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType8_109)),ir&&(Pr.logger.info("sync::notifyDataAsync: onSuperTeams",Fe(ir)),Yr.onSuperTeams(ir),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType21_109)),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_12),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_14),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_20),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_21),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType7_15),nr&&nr.length?(nr=b(nr).call(nr,function(no){return Pr.mergeSession(no),V(ze).call(ze,no)}),nr=v(nr).call(nr,function(no){return!no.isDeleted}),Pr.logger.info("sync::notifyDataAsync: on sessions",Y(nr),ie.secureOutput("session",nr)),!Wr&&Pr.timetags&&Pr.timetags.roamingMsgs?Yr.onsessions(v(Pt).call(Pt,function(no){return ze.isComplete(no)})):Yr.onsessions(nr)):!Wr&&Pt.length&&(Pr.logger.info("sync::notifyDataAsync: on sessions",Y(nr),ie.secureOutput("session",nr)),Yr.onsessions(v(Pt).call(Pt,function(no){return ze.isComplete(no)}))),Mn&&Mn.length&&(Mn=b(Mn).call(Mn,function(no){return no=Pr.mergeSession(no),V(ze).call(ze,no)}),Pr.logger.info("sync::notifyDataAsync: onStickTopSessions",Y(Mn),ie.secureOutput("session",Mn)),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_23),Yr.onStickTopSessions(Mn)),kt&&u(kt).call(kt,function(no){no.scene==="superTeam"?No.push(no.timetag):po.push(no.timetag),(uo=no.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on roaming msgs",no.sessionId,uo.length),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_9),Yr.onroamingmsgs(no))}),rr&&(Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_4),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_17),u(rr).call(rr,function(no){no.scene==="superTeam"?No.push(no.timetag):po.push(no.timetag),(uo=no.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on offline msgs",no.sessionId,uo.length,b(uo).call(uo,function(Ra){return Ra.idServer})),Yr.onofflinemsgs(no))})),cr&&(Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_100),u(cr).call(cr,function(no){po.push(no.timetag),(uo=no.msgs).length&&(Pr.logger.info("sync::notifyDataAsync: on offline filter msgs",no.sessionId,uo.length),Yr.onofflinefiltermsgs(uo))})),Rr&&(Pr.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",Y(Rr),Rr),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_22),Yr.onSessionsWithMoreRoaming(Rr));var to,Lr=[],Qr=[];qr.deleteMsgSysMsgs&&u(to=qr.deleteMsgSysMsgs).call(to,function(no){no.type==="roaming"?Lr=a(Lr).call(Lr,no.sysMsgs):Qr=a(Qr).call(Qr,no.sysMsgs)}),Lr.length&&(mr=a(mr=mr||[]).call(mr,Lr)),Qr.length&&(yr=a(yr=yr||[]).call(yr,Qr)),mr&&(Pr.logger.info("sync::notifyDataAsync: on roaming sys msgs",mr.length),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_19),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_15),Yr.onroamingsysmsgs(mr)),yr&&(Pr.logger.info("sync::notifyDataAsync: on offline sys msgs",yr.length),Yr.onofflinesysmsgs(yr)),Ir&&(Pr.logger.info("sync::notifyDataAsync: on offline filter sys msgs",Ir.length),Yr.onofflinefiltersysmsgs(Ir)),Tr&&(Pr.logger.info("sync::notifyDataAsync: on offline custom sys msgs",Tr.length),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_6),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_18),Yr.onofflinecustomsysmsgs(Tr)),kr&&(Pr.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",kr.length),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_101),Yr.onofflinefiltercustomsysmsgs(kr)),Ar&&(Ar=ie.merge({},Pr.sysMsgUnread,Ar),Pr.sysMsgUnread=ie.merge({},Ar),Pr.logger.info("sync::notifyDataAsync: on sysMsgUnread",Ar),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_6),Yr.onsysmsgunread(Ar));var Bn=Pr.getPushNotificationMultiportConfig();Pr.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",Bn),Pr.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_13),Yr.onPushNotificationMultiportConfig(Bn);var Xn=No.length&&Math.max.apply(Math,No);if(bo=po.length&&Math.max.apply(Math,po),Nr.enable){var ko=[];Xn&&ko.push(Pr.db.updateSuperTeamRoamingMsgTimetag(Xn)),bo&&ko.push(Pr.db.updateRoamingMsgTimetag(bo)),o.all(ko).then(ho).catch(ho)}else Pr.timetags.superTeamRoamingMsgs=Xn,Pr.timetags.roamingMsgs=bo||Pr.timetags.roamingMsgs,ho();Pr.syncPromiseArray=[],Pr.syncResult={}}function ho(){if(Pr.processUnsettledMsgs(),Pr.msgPromise.then(function(){Pr.canHandleDeletedMsgInSyncing=!0,y(function(){Pr.processUnsettledSysMsgs()},0)}),Pr.syncing&&Yr.onsyncdone(),Pr.syncing=!1,Pr.reporterHook.emit("reporter/syncComplete"),Yr.syncTeamMembers&&or&&or.length)throw new Oe("sync team members api deprecated!")}Ur&&Ur.length?o.all(Ur).then(Yn).catch(function(bo){Yn(),Pr.logger.error(bo),bo.callFunc="sync::onSyncDone",bo.message="afterSync syncNormalPromise 出错",Pr.onCustomError("SYNC_promiseArray_ERROR",bo)}):Yn()},Ce.syncTeamMembers=function(xe){var ue,Ve,Ue=this;Ue.timetags,Ve={},u(xe).call(xe,function(er){Ve[er.teamId]=0},Ue),Ue.sendCmd("syncTeamMembers",{sync:Ve},s(ue=Ue.onSyncTeamMembers).call(ue,Ue))},Ce.onSyncTeamMembers=function(xe){xe.callFunc="sync::onSyncTeamMembers",xe.message="同步群成员错误",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",xe)},Ce.onSyncTeamMembersDone=function(){var xe,ue=this,Ve=ue.db,Ue=ue.options,er=ue.syncTeamMembersResult,At=ue.syncTeamMembersPromiseArray;function ur(){ue.logger.log("sync::onSyncTeamMembersDone: afterSync",ie.promises2cmds(At)),At=[],Ve.enable&&!ue.hasSyncedTeamMembers?(ue.hasSyncedTeamMembers=!0,function(){if(!Ue.syncTeams||!Ue.syncTeamMembers)return hr();Ve.getTeams().then(function(Ne){u(Ne).call(Ne,function(or){var ir=or.teamId;xe=new o(function($e,tr){ue.api.getTeamMembers({teamId:ir,done:function(nr,Pt){nr&&tr({callFunc:"sync::getTeamMembers: teamId-".concat(ir),message:"sync team members error"}),er[ir]=Pt.members||[],$e()}})}),At.push(xe)}),At.length?o.all(At).then(pr,function(or){or.callFunc="sync::onSyncTeamMembersDone",or.message="pullFullData promiseArray notifyData 错误",ue.onCustomError("SYNC_TEAM_MEMBERS_ERROR",or)}):pr()},function(Ne){Ne.callFunc="sync::onSyncTeamMembersDone",Ne.message="pullFullData getTeams 错误",ue.onCustomError("SYNC_TEAM_MEMBERS_ERROR",Ne)})}()):pr()}function pr(){y(ar,0)}function ar(){var Ne,or,ir;u(Ne=c(er)).call(Ne,function($e){g($e).call($e,"invalid")===-1&&(or=er[$e],ir=er[$e+"-invalid"]||[],or.invalid=ir,function(tr,nr){ue.logger.info("sync::onSyncTeamMembersDone: onTeamMembers",tr,ae(nr),nr),Ue.onteammembers({teamId:tr,members:nr})}($e,or))}),hr()}function hr(){ue.logger.info("sync::onSyncTeamMembersDone: bingo"),Ue.onsyncteammembersdone(),ue.syncTeamMembersResult=null,ue.syncTeamMembersPromiseArray=null}At.length?o.all(At).then(ur,function(Ne){Ne.callFunc="sync::onSyncTeamMembersDone",Ne.message="同步群成员 syncTeamMembersPromiseArray 错误",ue.onCustomError("SYNC_TEAM_MEMBERS_ERROR",Ne)}).catch(function(Ne){ue.logger.log("sync::onSyncTeamMembersDone: syncTeamMembersPromiseArray promise ",Ne),ur()}):ur()}},function(t,r,e){var n=e(784),o=e(788),s=e(748),a=e(792);t.exports=function(i){return n(i)||o(i)||s(i)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(745),o=e(746);t.exports=function(s){if(n(s))return o(s)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(786)},function(t,r,e){var n=e(787);t.exports=n},function(t,r,e){var n=e(298);t.exports=n},function(t,r,e){var n=e(153),o=e(70),s=e(747);t.exports=function(a){if(n!==void 0&&o(a)!=null||a["@@iterator"]!=null)return s(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(790)},function(t,r,e){var n=e(791);t.exports=n},function(t,r,e){var n=e(299);t.exports=n},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(794);t.exports=n},function(t,r,e){e(795);var n=e(12);t.exports=n.Object.values},function(t,r,e){var n=e(1),o=e(796).values;n({target:"Object",stat:!0},{values:function(s){return o(s)}})},function(t,r,e){var n=e(27),o=e(11),s=e(118),a=e(43),i=o(e(148).f),d=o([].push),u=function(c){return function(m){for(var v,g=a(m),b=s(g),T=b.length,k=0,y=[];T>k;)v=b[k++],n&&!i(g,v)||d(y,c?[v,g[v]]:g[v]);return y}};t.exports={entries:u(!0),values:u(!1)}},function(t,r,e){t.exports=e(798)},function(t,r,e){var n=e(799);t.exports=n},function(t,r,e){var n=e(21),o=e(800),s=Array.prototype;t.exports=function(a){var i=a.findIndex;return a===s||n(s,a)&&i===s.findIndex?o:i}},function(t,r,e){e(801);var n=e(30);t.exports=n("Array").findIndex},function(t,r,e){var n=e(1),o=e(84).findIndex,s=e(195),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),n({target:"Array",proto:!0,forced:a},{findIndex:function(i){return o(this,i,arguments.length>1?arguments[1]:void 0)}}),s("findIndex")},function(t,r,e){var n=e(8),o=e(9),s=e(3),a=e(2),i=e(35).fn,d=e(0),u=d.objs2accounts,c=e(803),m=e(202);i.processUser=function(v){var g,b=this,T=b.db,k=v.obj,y=v.error,A=v.content;switch(v.cmd){case"markInBlacklist":y||b.markInBlacklist(k);break;case"syncMarkInBlacklist":b.markInBlacklist(A,!0);break;case"markInMutelist":y||b.markInMutelist(k);break;case"syncMarkInMutelist":b.markInMutelist(A,!0);break;case"getRelations":y||b.onRelations(v);break;case"syncMyInfo":b.onMyInfo(v,!0);break;case"updateMyInfo":y||(k.user.updateTime=A.timetag,b.onUpdateMyInfo(v,k.user));break;case"syncUpdateMyInfo":b.onUpdateMyInfo(v,A.user,!0);break;case"getUsers":var V;y||(g=n(V=A.users).call(V,function(Ce){return Ce=o(m).call(m,Ce,b.mixStorePolicy&&b.mixStorePolicy.s3Policy?b.mixStorePolicy.s3Policy.dlcdns:[],b.mixStorePolicy&&b.mixStorePolicy.s3Policy?b.mixStorePolicy.s3Policy.dlcdn:""),b.mergeUser(Ce),Ce}),v.obj=g,T.enable&&T.putUsers(g));break;case"updateDonnop":b.onUpdateDonnop(v);break;case"syncUpdateDonnop":b.onDonnop(v,!1)}},i.onMyInfo=function(v){var g,b=this,T=b.db,k=v.error,y=v.content,A=new s(function(Ce,ie){var Oe,he;k?(k&&(k.callFunc="user::onMyInfo"),Ce(k),b.syncData()):(g=o(m).call(m,y.user),T.enable?(Oe=Ce,he=ie,T.mergeMyInfo(g,!0).then(function(){V(),Oe()}).then(void 0,function(Y){Y.message="db.mergeMyInfo error",Y.callFunc="user::onMyInfo",he(Y)})):(V(),Ce()))}).catch(function(Ce){return b.logger.error("user::onMyInfo: ",Ce),s.reject(Ce)});function V(){b.timetags.myInfo=g.updateTime,b.syncResult.myInfo=g}A.cmd="myInfo",b.syncPromiseArray.push(A)},i.onUpdateMyInfo=function(v,g,b){var T=this.db,k=o(m).call(m,g),y=d.merge(this.myInfo,k);this.myInfo=y,b?(this.logger.info("user::onUpdateMyInfo:",y&&y.account),this.options.onupdatemyinfo(y)):v.obj=y,T.enable&&(k.account=this.account,T.updateUser(k))},i.onRelations=function(v){var g,b=this,T=b.db,k=v.error,y=b.packetFromSync(v),A=v.content.specialRelations,V=!0,Ce=[],ie=[],Oe=[],he=[],Y=new s(function(Fe,ze){var pe,le;k?y&&(Fe(k),b.syncData()):(a(A).call(A,function(xe){var ue={account:(xe=c.parse(xe)).account,createTime:xe.createTime,updateTime:xe.updateTime};xe.isBlacked?Ce.push(ue):ie.push(ue),xe.isMuted?Oe.push(ue):he.push(ue)}),b.logger.info("user::onRelations: parse blacklist",u(Ce),Ce,"delete",u(ie),ie),b.logger.info("user::onRelations: parse mutelist",u(Oe),Oe,"delete",u(he),he),A.length?(V=!0,g=v.content.timetag):V=!1,T.enable?(pe=Fe,le=ze,v.promise=new s(function(xe,ue){function Ve(){y?(ae(),xe(),pe()):T.getRelations().then(function(Ue){Ce=Ue[0],Oe=Ue[1],ae(),xe(),pe()}).then(void 0,function(Ue){Ue.message="db.getRelations error",Ue.callFunc="user::onRelations",ue(Ue),le(Ue)})}V?T.mergeRelations(Ce,ie,Oe,he,g).then(function(){Ve()}).then(void 0,function(Ue){Ue.message="db.mergeRelations error",Ue.callFunc="user::onRelations",ue(Ue),le(Ue)}):(b.logger.warn("user::onRelations: no relations need merge"),Ve())}).then(void 0,function(xe){throw xe.message="merge relations data error",xe.callFunc="user::onRelations",le(xe),xe})):(ae(),Fe()))}).catch(function(Fe){return b.logger.error("user::onRelations: ",Fe),s.reject(Fe)});function ae(){b.timetags.relations=g,Ce.invalid=ie,Oe.invalid=he,y?(b.syncResult.blacklist=Ce,b.syncResult.mutelist=Oe,b.syncResult.invalidBlacklist=ie,b.syncResult.invalidMutelist=he):(b.logger.info("user::onRelations: get relations",Ce,Oe),v.obj.blacklist=Ce,v.obj.mutelist=Oe)}y&&(Y.cmd="relations",b.syncPromiseArray.push(Y))},i.markInBlacklist=function(v,g){var b=this.db;v.record={account:v.account,updateTime:+new Date},b.enable&&b.markInBlacklist(v),g&&(this.logger.info("user::markInBlacklist:",v),this.options.onsyncmarkinblacklist(v))},i.markInMutelist=function(v,g){var b=this.db;v.record={account:v.account,updateTime:+new Date},b.enable&&b.markInMutelist(v),g&&(this.logger.info("user::markInMutelist:",v),this.options.onsyncmarkinmutelist(v))},i.mergeUser=function(v){this.userSet[v.account]=v}},function(t,r,e){var n=e(0);function o(){}o.parse=function(s){var a=n.copy(s);return a.isBlacked=a.isBlacked==="1",a.isMuted=a.isMuted==="1",a.createTime=+a.createTime,a.updateTime=+a.updateTime,a},t.exports=o},function(t,r,e){var n=e(120),o=e(2),s=e(9),a=e(3),i=e(7),d=e(8),u=["type"],c=e(35).fn,m=e(0),v=m.objs2accounts,g=e(750),b=e(202);c.processFriend=function(T){var k=T.obj,y=T.content,A=T.error;switch(T.cmd){case"friendRequest":this.updateFriendSysMsg(T),A||this.onFriendRequest(k);break;case"syncFriendRequest":this.onFriendRequest(y,!0);break;case"deleteFriend":A||this.onDeleteFriend(k);break;case"syncDeleteFriend":this.onDeleteFriend(y,!0);break;case"updateFriend":A||this.onUpdateFriend(k);break;case"syncUpdateFriend":this.onUpdateFriend(y.friend,!0);break;case"getFriends":this.getFriends(T);break;case"syncFriends":this.onFriends(T);break;case"syncFriendUsers":this.onFriendUsers(T)}},c.getFriends=function(T){var k=T.content.friends,y=[],A=[];o(k).call(k,function(V){(V=s(g).call(g,V)).valid?y.push(V):A.push(V)}),y.invalid=A,T.obj=y},c.onFriends=function(T){var k,y=this,A=y.db,V=T.error,Ce=T.content.friends,ie=!0,Oe=[],he=[],Y=new a(function(Fe,ze){var pe,le;V?ze(V):(function(){ie&&o(Ce).call(Ce,function(xe){(xe=s(g).call(g,xe)).valid?Oe.push(xe):he.push(xe)}),y.logger.info("friend::onFriends: parse friends",v(Oe),"delete",v(he)),Ce.length?(ie=!0,k=T.content.timetag):ie=!1}(),A.enable?(pe=Fe,le=ze,T.promise=new a(function(xe,ue){function Ve(){ae(),xe(),pe()}ie?A.mergeFriends(Oe,he,k).then(function(){Ve()}).then(void 0,function(Ue){Ue._msg="merge friends error",ue(Ue),le(Ue)}):(y.logger.info("friend::onFriends: no merge friends"),Ve())}).then(void 0,function(xe){throw xe._msg="merge friends data error",le(xe),xe})):(ae(),Fe()))}).catch(function(Fe){return y.logger.error("friend::onFriends: ",Fe),a.reject(Fe)});function ae(){var Fe,ze;y.timetags.friends=k,Oe.invalid=he,y.syncResult.friends=i(Fe=y.syncResult.friends||[]).call(Fe,Oe||[]),y.syncResult.invalidFriends=i(ze=y.syncResult.invalidFriends||[]).call(ze,he||[])}Y.cmd="friends",y.syncPromiseArray.push(Y)},c.onFriendRequest=function(T,k){var y=a.resolve(),A=this.db,V=T.type,Ce=n(T,u);if((V=T.type=g.getTypeFromByte(V)||V)==="addFriend"||V==="passFriendApply"){var ie=T.friend=g.assembleFriend(Ce);A.enable&&(y=A.putFriend(ie))}return k&&this.onSyncFriendAction(T),y},c.onSyncFriendAction=function(T){this.logger.info("friend::onSyncFriendActionon: ".concat(T.type,", "),T.account),this.options.onsyncfriendaction(T)},c.onDeleteFriend=function(T,k){var y=a.resolve(),A=this.db;return A.enable&&(y=A.deleteFriend(T.account)),k&&(T.type="deleteFriend",this.onSyncFriendAction(T)),y},c.onUpdateFriend=function(T,k){var y=this.db,A=s(g).call(g,T);y.enable&&y.updateFriend(A),k&&this.onSyncFriendAction({type:"updateFriend",friend:A})},c.onFriendUsers=function(T){var k,y,A=this.db,V=T.content,Ce=d(k=V.users).call(k,function(he){return s(b).call(b,he)});this.logger.info("friend::onFriendUsers: parse users",v(Ce));var ie=V.timetag,Oe=a.resolve();A.enable&&(Oe=A.mergeFriendUsers(Ce,ie)),this.timetags.friendUsers=ie,Oe.cmd="friendUsers",this.syncPromiseArray.push(Oe),this.syncResult.users=i(y=this.syncResult.users||[]).call(y,Ce||[]),this.syncing||this.onSyncDone()},c.updateFriendSysMsg=function(T){var k,y,A=T.obj,V=T.error;if(T.obj.idServer){if(V)k="error",V=m.filterObj(V,"code message");else{var Ce=A.type;switch(Ce=g.getTypeFromByte(Ce)||Ce){case"passFriendApply":k="passed";break;case"rejectFriendApply":k="rejected"}}y={idServer:A.idServer,state:k,from:A.account,type:"applyFriend"},V&&(y.error=V),this.updateSysMsg(y)}}},function(t,r,e){var n=e(32),o=e(17),s=e(35).fn,a=e(0);s.onRobots=function(i){var d=i.content;if(a.isFunction(this.options.onrobots)&&n(d.robots)){var u,c=o(u=d.robots).call(u,function(m){return!!m.botid});c.length>0&&this.options.onrobots(c||[])}}},function(t,r,e){var n=e(9),o=e(2),s=e(26),a=e(170),i=e(3),d=e(8),u=e(17),c=e(5),m=e(35).fn,v=e(0),g=v.objs2accounts,b=v.teams2ids,T=e(191),k=e(150);m.processTeam=function(y){var A,V,Ce,ie=y.error;switch(y.obj===void 0&&(y.obj={}),y.cmd){case"createTeam":A=y.obj.team,ie||(A=y.content.team),A=n(T).call(T,A),y.obj.team=A,Ce=k.assembleOwner(A),y.obj.owner=Ce,ie||(this.logger.info("team::processTeam: create team ",A&&A.teamId,Ce&&Ce.account),this.onCreateTeam(A,Ce));break;case"syncCreateTeam":A=n(T).call(T,y.content.team),Ce=k.assembleOwner(A),this.logger.info("team::processTeam: sync createTeam",A&&A.teamId,Ce&&Ce.account),this.options.onsynccreateteam(A,Ce),this.onCreateTeam(A,Ce);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(y);break;case"teamMsg":this.onMsg(y);break;case"teamMsgs":this.onMsgs(y);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":ie||((V=y.obj).account=this.account,V.id=k.genId(V.teamId,V.account),V=n(k).call(k,V),y.obj=V,this.mergeMyTeamMembers(V),this.onUpdateTeamMember(V));break;case"updateNickInTeam":y.obj=n(k).call(k,y.obj);break;case"updateTeam":y.obj=n(T).call(T,y.obj,!0);break;case"applyTeam":y.error||(y.obj=n(T).call(T,y.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(y,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(y,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(y,"passed"),y.error||(y.obj=n(T).call(T,y.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(y,"rejected");break;case"getTeam":y.error||(y.obj=n(T).call(T,y.content.team));break;case"getTeams":this.onTeams(y);break;case"getTeamMembers":this.onTeamMembers(y);break;case"syncTeams":this.onTeams(y);break;case"syncTeamMembers":this.onTeamMembers(y);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(y);break;case"syncSendTeamMsg":this.onMsg(y);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(y);break;case"syncUpdateTeamMember":(V=n(k).call(k,y.content.teamMember)).account===this.account&&this.mergeMyTeamMembers(V),this.onUpdateTeamMember(V);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":y.error||(y.obj=k.reverseMembers(y.content.teamMembers));break;case"getMutedTeamMembers":y.error||(y.obj={teamId:y.obj.teamId,members:k.reverseMembers(y.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(y);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(y);break;case"getTeamMsgReads":this.getTeamMsgReads(y);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(y);break;case"getTeamsById":this.getTeamsById(y)}},m.getTeamMsgReads=function(y){var A=this;if(y.error)this.logger.error("team::sendTeamMsgReceipt: ",y.error);else{var V=v._get(y,"content.teamMsgReceipts")||[];if(this.db.enable){var Ce=[];o(V).call(V,function(ie){ie.idClient&&Ce.push({idClient:ie.idClient,unread:+ie.unread,read:+ie.read})}),Ce.length>0&&s(function(){return A.db.updateMsgBatch(Ce)},0)}}},m.getTeamMsgReadAccounts=function(y){if(y.error)this.logger.error("team::getTeamMsgReadAccounts: ",y.error);else{var A=v._get(y,"content.readAccounts")||[],V=v._get(y,"content.unreadAccounts")||[],Ce=v._get(y,"content.teamMsgReceipt.idClient")||[];this.db.enable&&this.db.putMsgReadDetail({idClient:Ce,readAccounts:A,unreadAccounts:V})}},m.sendTeamMsgReceipt=function(y){var A=this;if(y.error)this.logger.error("team::sendTeamMsgReceipt: ",y.error);else{var V=v._get(y,"obj.teamMsgReceipts")||[],Ce=v._get(y,"content.teamMsgReceipts")||[];if(this.db.enable){var ie=[];o(V).call(V,function(Oe){a(Ce).call(Ce,function(he){return Oe.idServer===he.idServer})||ie.push({idClient:Oe.idClient,hasRead:!0})}),ie.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),s(function(){return A.db.updateMsgBatch(ie)},0))}}},m.onCreateTeam=function(y,A){var V=this.db;V.enable&&(V.putTeam(y),V.putTeamMembers(A)),this.options.onCreateTeam(y,A)},m.onTeams=function(y){y.content=y.content||{};var A,V=this,Ce=V.db,ie=V.packetFromSync(y),Oe=y.content.teams||[],he=!0,Y=[],ae=[];if(y.error)switch(y.error.code){case 803:y.error=null,he=!1}var Fe=new i(function(pe,le){var xe,ue;y.error?ie&&le(y.error):(function(){he&&o(Oe).call(Oe,function(Ve){(Ve=n(T).call(T,Ve)).validToCurrentUser?Y.push(Ve):ae.push(Ve)}),Oe.length?(he=!0,A=y.content.timetag):he=!1}(),Ce.enable?(xe=pe,ue=le,y.promise=new i(function(Ve,Ue){function er(){ie?(ze(),Ve(),xe()):Ce.getTeams().then(function(At){Y=At,ze(),Ve(),xe()}).catch(function(At){At.message="db.getTeams error",At.callFunc="team::afterMergeData",Ue(At),ue(At)})}he?Ce.mergeTeams(Y,ae,A).then(function(){er()}).catch(function(At){var ur={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:At};Ue(ur),ue(ur)}):(V.logger.warn("team::onTeams:mergeData: no teams need merge"),er())}).then(void 0,function(Ve){throw Ve.message="merge teams data error",Ve.callFunc="team::mergeData",ue(Ve),Ve})):(ze(),pe()))}).catch(function(pe){return V.logger.error("team::onTeams: ",pe),i.reject(pe)});function ze(){V.timetags.teams=A,Y.invalid=ae,ie?(V.syncResult.teams=Y,V.syncResult.invalidTeams=ae,V.syncing||V.onSyncDone()):(V.logger.info("team::onTeams: not in syncing, get teams",b(Y)),y.obj=Y)}ie&&(Fe.cmd="teams",V.syncPromiseArray.push(Fe))},m.getTeamsById=function(y){var A;if(y.error){if(y.error.code!==816)return;this.logger.error("team::getTeamsById: ",y.error),y.error=null}y.content.teams=d(A=y.content.teams).call(A,function(V){return n(T).call(T,V)}),y.obj=y.content},m.onTeamMembers=function(y){y.content=y.content||{};var A,V,Ce=this,ie=Ce.packetFromSync(y),Oe=y.content.members||[],he=!0,Y=[],ae=[];if(y.obj&&(V=y.obj.teamId),V||(V=y.content.teamId),V=""+V,y.error)switch(y.error.code){case 406:y.error=null,he=!1}var Fe=new i(function(ze,pe){y.error?ie&&(Ce.logger.error("team::onTeamMember: team error:",V,y.error),pe({callFunc:"team::onTeamMembers",event:y.error,message:"teamId-".concat(V," 获取群成员错误")})):(function(){he&&o(Oe).call(Oe,function(le){(le=n(k).call(k,le)).valid?Y.push(le):ae.push(le)}),Oe.length?(he=!0,A=y.content.timetag):he=!1}(),Y.invalid=ae,ie?(Ce.syncTeamMembersResult[V]=Y,Ce.syncTeamMembersResult[V+"-invalid"]=ae,Ce.timetags["team-"+V]=A):(Ce.logger.info("team::onTeamMembers: not syncing, get members",V,g(Y)),y.obj={teamId:V,members:Y}),ze())});ie&&(Fe.cmd=V,Ce.syncTeamMembersPromiseArray.push(Fe))},m.onUpdateTeamMember=function(y){if(y.updateTime||(y.updateTime=+new Date),this.logger.info("team::onUpdateTeamMember: ",y&&y.account),this.options.onupdateteammember(v.simpleClone(y)),this.account===y.account){var A=this.myTeamMembersMap[y.teamId];this.logger.info("team::onMyTeamMembers: ",[A]),this.options.onMyTeamMembers(v.simpleClone([A]))}var V={teamId:y.teamId,memberUpdateTime:y.updateTime};this.onUpdateTeam(V);var Ce=this.db;Ce.enable&&Ce.updateTeamMember(y)},m.onUpdateTeam=function(y){this.logger.info("team::onUpdateTeam:",y&&y.teamId),this.options.onUpdateTeam(v.simpleClone(y));var A=this.db;A.enable&&A.updateTeam(y)},m.onSyncMyTeamMembers=function(y){var A=this,V=A.db,Ce=k.reverseMembers(y.content.teamMembers);if(V.enable){var ie=V.putTeamMembers(Ce).then(function(){return V.updateMyTeamMembersTimetag(y.content.timetag)}).catch(function(Oe){return A.logger.error("team::syncMyTeamMember: ",Oe),i.reject(Oe)});ie.cmd="myTeamMembers",A.syncTeamMembersPromiseArray.push(ie),A.syncPromiseArray.push(ie)}else A.syncResult.myTeamMembers=Ce;A.mergeMyTeamMembers(Ce)},m.mergeMyTeamMembers=function(y){v.isArray(y)||(y=[y]);var A=this.myTeamMembersMap=this.myTeamMembersMap||{};o(y).call(y,function(V){var Ce=V.teamId;A[Ce]=v.merge(A[Ce],V)})},m.notifyForNewTeamMsg=function(y){v.isArray(y)||(y=[y]);var A=this,V=this.myTeamMembersMap||{},Ce={},ie=[];o(y).call(y,function(he){v.exist(V[he])?Ce[he]=V[he].muteNotiType:ie.push(he)});var Oe=i.resolve({map:Ce});return ie.length&&(Oe=A.api.getMyTeamMembers({teamIds:ie,promise:!0}).then(function(he){A.mergeMyTeamMembers(he),o(he).call(he,function(ae){Ce[ae.teamId]=ae.muteNotiType});var Y=u(y).call(y,function(ae){return!Ce[ae]});return i.resolve({map:Ce,miss:Y})}).catch(function(he){return c(Ce).length>0?i.resolve({map:Ce,miss:ie,error:he}):i.reject(he)})),Oe},m.updateTeamSysMsgState=function(y,A){var V,Ce=y.error;Ce&&(A="error",Ce=v.filterObj(Ce,"code message")),V={idServer:y.obj.idServer,state:A,from:y.obj.from,type:y.obj.type},Ce&&(V.error=Ce),this.updateSysMsg(V)},m.onTeamMsgReceipt=function(y){var A=y.content,V=y.error;V&&this.logger.error("team::onTeamMsgReceipt:",V),A&&A.teamMsgReceipts&&(this.options.onTeamMsgReceipt(A),this.options.onMsgReceipts(A.teamMsgReceipts))}},function(t,r,e){var n=e(9),o=e(3),s=e(2),a=e(35).fn,i=e(0),d=i.teams2ids,u=e(306),c=e(201);a.processSuperTeam=function(m){var v,g,b,T=m.error;switch(m.obj===void 0&&(m.obj={}),m.cmd){case"sendSuperTeamMsg":this.onSendMsg(m);break;case"superTeamMsg":this.onMsg(m);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(m);break;case"superTeamCustomSysMsg":this.onSysMsg(m);break;case"syncSuperTeams":this.onSuperTeams(m);break;case"syncCreateSuperTeam":v=n(u).call(u,m.content.team),b=c.assembleOwner(v),this.logger.info("team::processTeam: sync createTeam",v&&v.teamId,b&&b.account),this.options.onSyncCreateSuperTeam(v,b),this.onCreateSuperTeam(v,b);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(m);break;case"syncSendSuperTeamMsg":this.onMsg(m);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":T||((g=m.obj).account=this.account,g.id=c.genId(g.teamId,g.account),g=n(c).call(c,g),m.obj=g,this.mergeMySuperTeamMembers(g),this.onUpdateSuperTeamMember(g));break;case"updateNickInTeam":m.obj=n(c).call(c,m.obj);break;case"syncUpdateSuperTeamMember":(g=n(c).call(c,m.content.teamMember)).account===this.account&&this.mergeMySuperTeamMembers(g),this.onUpdateSuperTeamMember(g);break;case"updateSuperTeam":m.obj=n(u).call(u,m.obj,!0);break;case"getSuperTeam":m.error||(m.obj=n(u).call(u,m.content.team));break;case"getSuperTeams":this.onSuperTeams(m);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(m);break;case"syncMySuperTeamMembers":this.onSyncMySuperTeamMembers(m);break;case"getSuperTeamMembers":m.error||this.onGetAllSuperTeamMembers(m);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":m.error||this.onSuperTeamMembers(m);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(m);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(m,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(m);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(m);break;case"passSuperTeamApply":this.updateSuperTeamSysMsgState(m,"passed");break;case"rejectSuperTeamApply":this.updateTeamSysMsgState(m,"rejected");break;case"acceptSuperTeamInvite":this.updateTeamSysMsgState(m,"passed");break;case"rejectSuperTeamInvite":this.updateSuperTeamSysMsgState(m,"rejected")}},a.onSuperTeams=function(m){m.content=m.content||{};var v,g=this,b=g.db,T=g.packetFromSync(m),k=m.content.teams||[],y=!0,A=[],V=[];if(m.error)switch(m.error.code){case 803:m.error=null,y=!1}var Ce=new o(function(Oe,he){var Y,ae;m.error?T&&he(m.error):(function(){y&&s(k).call(k,function(Fe){(Fe=n(u).call(u,Fe)).validToCurrentUser?A.push(Fe):V.push(Fe)}),k.length?(y=!0,v=m.content.timetag):y=!1}(),b.enable?(Y=Oe,ae=he,m.promise=new o(function(Fe,ze){function pe(){T?(ie(),Fe(),Y()):b.getSuperTeams().then(function(le){A=le,ie(),Fe(),Y()}).then(void 0,function(le){le.message="db.getSuperTeams error",le.callFunc="superTeam::afterMergeData",ze(le),ae(le)})}y?b.mergeSuperTeams(A,V,v).then(function(){pe()}).then(void 0,function(le){var xe={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:le};ze(xe),ae(xe)}):(g.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),pe())}).then(void 0,function(Fe){throw Fe.message="merge teams data error",Fe.callFunc="superTeam::mergeData",ae(Fe),Fe})):(ie(),Oe()))}).catch(function(Oe){return g.logger.error("superTeam::onSuperTeams: ",Oe),o.reject(Oe)});function ie(){g.timetags.superTeams=v,A.invalid=V,T?(g.syncResult.superTeams=A,g.syncResult.invalidSuperTeams=V):(g.logger.info("superTeam::onSuperTeams: not in syncing, get teams",d(A)),m.obj=A)}T&&(Ce.cmd="superteams",g.syncPromiseArray.push(Ce))},a.onCreateSuperTeam=function(m,v){var g=this.db;g.enable&&(g.putSuperTeam(m),g.putSuperTeamMembers(v))},a.onGetAllSuperTeamMembers=function(m){var v=this,g=this.db,b=m.raw.ser,T=this.superTeamMembersData[b]||{},k=T.teamId||m.obj&&m.obj.teamId;if(g.enable){var y=m.content&&m.content.timetag,A=m.raw.code===200?o.all(T.pArr):o.resolve();m.promise=A.then(function(){return g.getSuperTeamMembers(k).then(function(V){y&&g.updateSuperTeamMemberTimetag(k,y),m.obj={members:V,invalid:[],teamId:k}})}).catch(function(V){return v.logger.error(V)})}else m.obj={members:T.members,invalid:T.invalid,teamId:k};this.superTeamMembersData[b]=void 0},a.onSyncSuperTeamMembers=function(m){var v,g=this.db,b=[],T=[],k=m.content.members||[],y=m.raw.ser;if(m.obj&&(v=m.obj.teamId),v||(v=m.content.teamId),s(k).call(k,function(Ce){(Ce=n(c).call(c,Ce)).valid?T.push(Ce):b.push(Ce)}),g.enable){this.superTeamMembersData[y]=this.superTeamMembersData[y]||{teamId:v,pArr:[]};var A=o.resolve();m.content&&m.content.isAll&&(A=g.deleteSuperTeamMembers(v));var V=A.then(function(){return g.mergeSuperTeamMembers(v,T,b)}).then(function(){return o.resolve()});this.superTeamMembersData[y].pArr.push(V)}else this.superTeamMembersData[y]=this.superTeamMembersData[y]||{teamId:v,members:[],invalid:[]},T.length&&(this.superTeamMembersData[y].members=this.api.mergeTeamMembers(this.superTeamMembersData[y].members,T)),b.length&&(this.superTeamMembersData[y].invalid=this.api.mergeTeamMembers(this.superTeamMembersData[y].invalid,b));m.raw=void 0},a.onSyncMySuperTeamMembers=function(m){var v=this,g=v.db,b=c.reverseMembers(m.content.teamMembers);if(g.enable){var T=g.putSuperTeamMembers(b).then(function(){return g.updateMySuperTeamMembersTimetag(m.content.timetag)}).catch(function(k){return v.logger.error("superTeam::syncMySuperTeamMember: ",k),o.reject(k)});v.syncPromiseArray.push(T)}else v.syncResult.mySuperTeamMembers=b;v.mergeMySuperTeamMembers(b)},a.onSuperTeamMembers=function(m,v){var g,b=this.db,T=[],k=[],y=m.content.members||[];s(y).call(y,function(A){(A=n(c).call(c,A)).valid?k.push(A):T.push(A)}),m.obj&&(g=m.obj.teamId),g||(g=m.content.teamId||k[0]&&k[0].teamId),b.enable&&!v&&b.mergeSuperTeamMembers(g,k,T),m.obj={members:k,invalid:T,teamId:g}},a.onUpdateSuperTeamMember=function(m){if(m.updateTime||(m.updateTime=+new Date),this.logger.info("superTeam::onUpdateSuperTeamMember: ",m&&m.account),this.options.onUpdateSuperTeamMember(i.simpleClone(m)),this.account===m.account){var v=this.mySuperTeamMembersMap[m.teamId];this.logger.info("superTeam::onMySuperTeamMembers: ",[v]),this.options.onMySuperTeamMembers(i.simpleClone([v]))}var g={teamId:m.teamId,memberUpdateTime:m.updateTime};this.onUpdateSuperTeam(g);var b=this.db;b.enable&&b.updateSuperTeamMember(m)},a.onUpdateSuperTeam=function(m){this.logger.info("superteam::onUpdateSuperTeam:",m&&m.teamId),this.options.onUpdateSuperTeam(i.simpleClone(m));var v=this.db;v.enable&&v.updateSuperTeam(m)},a.mergeMySuperTeamMembers=function(m){i.isArray(m)||(m=[m]);var v=this.mySuperTeamMembersMap=this.mySuperTeamMembersMap||{};s(m).call(m,function(g){var b=g.teamId;v[b]=i.merge(v[b],g)})},a.updateSuperTeamSysMsgState=function(m,v){var g,b=m.error;b&&(v="error",b=i.filterObj(b,"code message")),g={idServer:m.obj.idServer,state:v,from:m.obj.from,type:m.obj.type},b&&(g.error=b),this.updateSysMsg(g)}},function(t,r,e){var n=e(9),o=e(3),s=e(26),a=e(35).fn,i=e(0),d=e(308);a.processNotify=function(u){switch(u.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs(u);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs(u);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs(u);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs(u,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs(u,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts(u);break;case"syncDonnop":this.onDonnop(u,!0);break;case"syncSessionAck":this.syncSessionAck(u);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck(u);break;case"syncRobots":this.onRobots(u);break;case"syncBroadcastMsgs":this.onBroadcastMsgs(u);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(u);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf(u);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming(u);break;case"syncStickTopSessions":this.syncStickTopSessions(u);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete(u)}},a.onDonnop=function(u,c){if(!u.error){var m=this,v=m.db,g=n(d).call(d,u.content.donnop);m.mergeDonnop(g);var b=m.dbDonnop();if(c){var T=u.content.timetag;m.timetags.donnop=T,v.enable&&(b=b.then(function(){return m.db.updateDonnopTimetag(T)}).catch(function(k){return m.logger.error("notify::onDonnop: ",k),o.reject(k)})),b.cmd="donnop",m.syncPromiseArray.push(b)}else m.onPushNotificationMultiportConfigUpdate()}},a.onUpdateDonnop=function(u){if(!u.error){var c=u.obj;c&&(this.mergeDonnop(i.filterObj(c,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},a.getPushNotificationMultiportConfig=function(){return i.merge({},this.pushNotificationMultiportConfig)},a.mergeDonnop=function(u){this.pushNotificationMultiportConfig=i.merge({},this.pushNotificationMultiportConfig,u)},a.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):o.resolve()},a.onPushNotificationMultiportConfigUpdate=function(){var u=this;s(function(){var c=u.getPushNotificationMultiportConfig();u.logger.info("link::onPushNotificationMultiportConfigUpdate:",c),u.options.onPushNotificationMultiportConfigUpdate(c)})}},function(t,r,e){var n=e(58),o=e(2),s=e(17),a=e(3),i=e(8),d=e(5),u=e(6),c=e(10),m=e(9),v=e(138),g=e(7),b=e(26),T=e(24),k=e(52),y=e(41),A=e(59),V=e(60),Ce=e(61),ie=e(62),Oe=e(47),he=e(15),Y=e(85),ae=e(86),Fe=e(70),ze=e(32);function pe($e,tr){var nr=ae!==void 0&&Fe($e)||$e["@@iterator"];if(!nr){if(ze($e)||(nr=function(mr,yr){var Tr;if(mr){if(typeof mr=="string")return le(mr,yr);var Ir=he(Tr=Object.prototype.toString.call(mr)).call(Tr,8,-1);if(Ir==="Object"&&mr.constructor&&(Ir=mr.constructor.name),Ir==="Map"||Ir==="Set")return Y(mr);if(Ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ir))return le(mr,yr)}}($e))||tr&&$e&&typeof $e.length=="number"){nr&&($e=nr);var Pt=0,Et=function(){};return{s:Et,n:function(){return Pt>=$e.length?{done:!0}:{done:!1,value:$e[Pt++]}},e:function(mr){throw mr},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kt,rr=!0,cr=!1;return{s:function(){nr=nr.call($e)},n:function(){var mr=nr.next();return rr=mr.done,mr},e:function(mr){cr=!0,kt=mr},f:function(){try{rr||nr.return==null||nr.return()}finally{if(cr)throw kt}}}}function le($e,tr){(tr==null||tr>$e.length)&&(tr=$e.length);for(var nr=0,Pt=new Array(tr);nr<tr;nr++)Pt[nr]=$e[nr];return Pt}function xe($e,tr){var nr=d($e);if(A){var Pt=A($e);tr&&(Pt=s(Pt).call(Pt,function(Et){return V($e,Et).enumerable})),nr.push.apply(nr,Pt)}return nr}var ue=e(35).fn,Ve=e(0),Ue=Ve.undef,er=e(44),At=e(150),ur=e(201),pr=e(152),ar=e(289),hr=e(13),Ne=e(74),or=e(72);function ir($e,tr,nr){var Pt=this,Et=Pt.message.Message,kt=nr?"offlineFilterMsgs":"offlineMsgs";if(!(tr&&tr.length>0))return a.resolve();var rr=Et.getMaxTimetag(tr),cr=tr[0].scene,mr=tr[0].target;Pt.markMsgRead(tr),tr=Et.deduplication(tr),tr=Et.sortMsgs(tr);var yr=Pt.genSessionByMsgs(tr);Pt.cacheSyncedSession(yr);var Tr=Pt.putMsg(tr,"offlineMsgs").then(function(Ir){var kr=Ir;(kr=Pt.filterIgnore(kr)).length&&(Pt.logger.info("msg::onOfflineMsgs： toreLastSession",kt,$e,kr.length),Pt.syncResult[kt]=Pt.syncResult[kt]||[],Pt.syncResult[kt].push({sessionId:$e,scene:cr,to:mr,msgs:kr,timetag:rr}))}).catch(function(Ir){return Pt.logger.error("msg::onOfflineMsgs: ",Ir),a.reject(Ir)});return Tr.cmd="offlineMsgs-"+$e,Tr}ue.processMsg=function($e){switch($e.cmd){case"sendMsg":this.onSendMsg($e);break;case"msg":this.onMsg($e);break;case"sysMsg":this.onSysMsg($e);break;case"broadcastMsg":this.onBroadcastMsg($e);break;case"sendCustomSysMsg":this.onSendSysMsg($e);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs($e);break;case"msgFtsInServer":case"msgFtsInServerByTiming":this.onmsgFtsInServer($e);break;case"syncSendMsg":this.onMsg($e);break;case"deleteSessions":this.onDeleteSessions($e);break;case"sendMsgReceipt":this.onSendMsgReceipt($e);break;case"msgReceipt":this.onMsgReceipt($e);break;case"onDeleteMsg":this.onDeleteMsg($e);break;case"onMsgDeleted":this.onMsgDeleted($e);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming($e);break;case"onMarkSessionAck":this.onMarkSessionAck($e);break;case"syncMarkSessionAck":this.syncMarkSessionAck($e);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession($e);break;case"deleteMsgSelf":this.deleteMsgSelf($e);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch($e);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf($e);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch($e);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs($e);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs($e)}},ue.checkIgnore=function($e){var tr=this;o($e).call($e,function(nr){if(!nr.ignore){try{tr.options.shouldIgnoreMsg(nr)&&(nr.ignore=!0)}catch(Et){throw tr.logger.error("userOption:shouldIgnoreMsg function error",Et),Et}var Pt;try{Pt=tr.options.shouldIgnoreNotification(nr)}catch(Et){throw tr.logger.error("userOption:shouldIgnoreNotification function error",Et),Et}nr.type==="notification"&&Pt&&(nr.ignore=!0)}})},ue.filterIgnore=function($e){return s($e).call($e,function(tr){return!tr.ignore})},ue.genSessionByMsgs=function($e){return this.checkIgnore($e),pr.genSessionByMsgs(this.message.Message,$e)},ue.onRoamingMsgs=function($e){var tr=this,nr=tr.message,Pt=nr.Message,Et=Pt.getMaxTimetag,kt=nr.reverseMsgs($e.content.msgs),rr=Et(kt);kt=Pt.deduplication(kt);var cr=(kt=Pt.sortMsgs(kt))[0],mr=cr.sessionId,yr=tr.genSessionByMsgs(kt);tr.cacheSyncedSession(yr);var Tr=tr.putMsg(kt,"roamingMsgs").then(function(Ir){kt=Ir,(kt=tr.filterIgnore(kt)).length&&(tr.logger.info("msg::onRoamingMsgs: putRoamingMsgs",mr,kt.length),tr.syncResult.roamingMsgs=tr.syncResult.roamingMsgs||[],tr.syncResult.roamingMsgs.push({sessionId:mr,scene:cr.scene,to:cr.target,msgs:kt,timetag:rr}),tr.syncing||tr.onSyncDone())}).catch(function(Ir){return tr.logger.error("msg::onRoamingMsgs: ",Ir),a.reject(Ir)});Tr.cmd="roamingMsgs-"+mr,tr.syncPromiseArray.push(Tr)},ue.onOfflineMsgs=function($e,tr){var nr,Pt=this,Et=this.message,kt=null;tr&&(kt={filter:!0});var rr=Et.reverseMsgs($e.content.msgs,{modifyObj:kt});rr=or.deduplication(rr);var cr={};o(rr).call(rr,function(Tr){cr[Tr.sessionId]=cr[Tr.sessionId]||[],cr[Tr.sessionId].push(Tr)});var mr=i(nr=d(cr)).call(nr,function(Tr){return{sessionId:Tr,msgs:cr[Tr]}}),yr=Ve.asyncPool(50,mr,function(Tr){return ir.call(Pt,Tr.sessionId,Tr.msgs,tr)});this.syncPromiseArray.push(yr)},ue.completeMsg=function($e){return $e.from=this.account,$e.fromNick=this.myInfo&&this.myInfo.nick,$e.fromClientType="Web",$e.fromDeviceId=er.deviceId,$e.time||($e.time=+new Date),$e},ue.amendMsg=function($e){if($e.scene==="team"){var tr=Ve.get(this.myTeamMembersMap,$e.to+".nickInTeam");tr&&($e.fromNick=tr)}else if($e.scene==="superTeam"){var nr=Ve.get(this.mySuperTeamMembersMap,$e.to+".nickInTeam");nr&&($e.fromNick=nr)}return $e},ue.onMsgs=function($e){var tr=this,nr=tr.reporterHook.getSafeClock(),Pt=tr.message.reverseMsgs($e.content.msgs,{mapper:function(Et){var kt=function(rr){for(var cr=1;cr<arguments.length;cr++){var mr,yr,Tr=arguments[cr]!=null?arguments[cr]:{};cr%2?o(mr=xe(Object(Tr),!0)).call(mr,function(Ir){n(rr,Ir,Tr[Ir])}):Ce?ie(rr,Ce(Tr)):o(yr=xe(Object(Tr))).call(yr,function(Ir){Oe(rr,Ir,V(Tr,Ir))})}return rr}({},Et);if(kt.__receiveTime=$e.__receiveTime,kt.__handleTime=nr,kt.__clientExt)try{kt.__clientExt=JSON.parse(kt.__clientExt)}catch{tr.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(kt.__clientExt))}return tr.handleMsg(kt),kt}});tr.pushMsgDelay(Pt)},ue.onMsg=function($e,tr){var nr;if($e.content.msg.attach){var Pt=null;try{Pt=JSON.parse($e.content.msg.attach)}catch{}if(Pt&&Pt.url&&Ve.get(this.mixStorePolicy,"s3Policy.dlcdns")){var Et,kt=pe(this.mixStorePolicy.s3Policy.dlcdns);try{for(kt.s();!(Et=kt.n()).done;){var rr,cr=Et.value;u(rr=Pt.url).call(rr,cr)>=0&&(Pt.isS3=!0,cr!==this.mixStorePolicy.s3Policy.dlcdn&&(Pt.url=Pt.url.replace(cr,this.mixStorePolicy.s3Policy.dlcdn)))}}catch(yr){kt.e(yr)}finally{kt.f()}}$e.content.msg.attach=c(Pt)}var mr=m(nr=this.message).call(nr,$e.content.msg);if(mr.__receiveTime=$e.__receiveTime,mr.__handleTime=this.reporterHook.getSafeClock(),Ve.get($e,"content.msg.__clientExt"))try{mr.__clientExt=JSON.parse($e.content.msg.__clientExt)}catch{this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat($e.content.msg.__clientExt))}tr&&(mr.filter=!0),$e.cmd!=="syncSendMsg"||mr.from!==mr.to?(this.pushMsgDelay([mr]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:mr})):this.handleMsg(mr)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",mr.idClient,mr.idServer)},ue.onBroadcastMsgs=function($e){var tr=$e.content.broadcastMsgs;tr=v(tr).call(tr,function(nr,Pt){return nr.broadcastId-Pt.broadcastId}),this.putBroadcastMsgs(tr)},ue.onBroadcastMsg=function($e){var tr=$e.content.broadcastMsg;tr.time=tr.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:tr}):tr&&this.putBroadcastMsg(tr)},ue.pushMsgTask=function($e){this.msgPromise=this.msgPromise.then(function(){return $e()})},ue.pushMsgDelay=function($e){if($e&&$e.length>0){var tr=this;if(tr.msgStatEnable&&!hr.isWeixinApp){var nr,Pt=i($e).call($e,function(Et){return{appkey:tr.options.appKey,accid:Et.to,fromAccid:Et.from,msgId:Et.idServer,serverTime:Et.time,receiveTime:tr.reporterHook.getNTPTime(),sessionId:tr.sdkSession,platform:"web",sdk_ver:hr.info.version,manufactor:Ne.name+" "+Ne.version}});tr.msgDelayArr=g(nr=tr.msgDelayArr).call(nr,Pt),tr.msgDelayArr.length>5&&tr.doReportMsgDelay()}}},ue.doReportMsgDelay=function(){var $e,tr=c(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(ar.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",tr),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=b(T($e=this.doReportMsgDelay).call($e,this),1e4))},ue.handleMsg=function($e){var tr=this,nr=tr.db,Pt=$e.time;tr.markMsgRead($e),tr.msgPromise=tr.msgPromise.then(function(){return tr.putMsg($e,"onMsg")}).then(function(){var Et;return tr.logger.info(g(Et="msg::handleMsg:putMsg: done ".concat($e.idServer," ")).call(Et,$e.idClient)),nr.enable?$e.scene==="superTeam"?nr.updateSuperTeamRoamingMsgTimetag(Pt):nr.updateRoamingMsgTimetag(Pt):(tr.timetags[$e.scene==="superTeam"?"superTeamRoamingMsgs":"roamingMsgs"]=Pt,a.resolve())}).then(function(){if($e)return tr.checkUserUpdate($e)}).then(function(){if($e){var Et=$e.type;switch(tr.logger.info("msg::handleMsg:checkUserUpdate: "+$e.scene+" "+Et+" msg"+(Et==="notification"?" "+$e.attach.type:"")),Et){case"notification":return tr.onTeamNotificationMsg($e)}}}).then(function(){$e&&!$e.ignore&&(tr.logger.info("msg::handleMsg:onmsg: ",$e.idClient,$e.idServer),b(function(){var Et=$e.scene==="p2p";if(hr.isBrowser&&$e.flow!=="out"){var kt={msgId:$e.idServer,clientId:$e.idClient,receiveTime:tr.reporterHook.getNTPTime($e.__receiveTime),serverTime:$e.time,callbackTime:tr.reporterHook.getNTPTime(),preHandleTime:tr.reporterHook.getNTPTime($e.__handleTime),fromAccid:$e.from,toAccid:tr.options.account,type:tr.message.sceneMap[$e.scene],tid:Et?"":$e.to,result:200,failReason:"",rt:k(tr.reporterHook.getSafeClock()-$e.__receiveTime)},rr=Ve.get($e,"__clientExt.statistics.apiCallingTime"),cr=Ve.get($e,"__clientExt.statistics.sendTime");rr&&cr&&(kt.apiCallingTime=rr,kt.sendTime=cr,kt.attachUploadDuration=Ve.get($e,"__clientExt.statistics.attachUploadDuration")||0),tr.reporter&&tr.reporter.report("msgReceive",kt)}delete $e.__receiveTime,delete $e.__handleTime,delete $e.__clientExt,tr.options.onmsg(Ve.copy($e))},0))}).catch(function(Et){Et.callFunc="msg::handleMsg",tr.onCustomError("消息处理错误",Et)})},ue.putMsg=function($e,tr){if(Ve.isArray($e)||($e=[$e]),s($e[0]))return a.resolve($e);var nr,Pt=this,Et=Pt.db,kt=Et.enable,rr=a.resolve(),cr=Pt.message.Message.getLastMsg($e),mr=cr.flow,yr=Pt.genSessionByMsgs($e);Ir(yr);var Tr=[];function Ir(kr){tr!=="roamingMsgs"&&tr!=="offlineMsgs"||Pt.cacheSyncedSession(kr)}return rr=(rr=(rr=rr.then(function(){var kr;return kt||Pt.options.autoMarkRead||tr==="roamingMsgs"||!yr||(Pt.sessionUnreadMsgs=Pt.sessionUnreadMsgs||{},Pt.sessionUnreadMsgs[yr.id]=Pt.sessionUnreadMsgs[yr.id]||[],Pt.sessionUnreadMsgs[yr.id]=g(kr=Pt.sessionUnreadMsgs[yr.id]).call(kr,s($e).call($e,function(Ar){try{return Pt.options.shouldCountNotifyUnread(Ar)}catch(Rr){throw Pt.logger.error("userOption:shouldCountNotifyUnread function error",Rr),Rr}}))),tr==="offlineMsgs"||tr==="roamingMsgs"?a.reject($e):kt?Et.putMsg($e):$e}).then(function(kr){var Ar=[];return o($e).call($e,function(Rr){Pt.checkMsgUnique(Rr)&&Ar.push(Rr)}),$e=Ar,Tr=kt?kr:$e,a.resolve($e)})).then(function(kr){return kr.length&&kt&&yr?new a(function(Ar){Et.getSessions({sessionId:yr.id}).then(function(Rr){if(Rr&&Rr.lastMsg){var Mn=Rr.lastMsg;yr.lastMsg&&yr.lastMsg.time<Mn.time&&(yr.lastMsg=Mn)}Tr&&Tr.length?yr?Et.putSession(yr).then(function(Or){Ar(Or)}):Ar(Rr):(Tr=kr,Ar(Rr))})}):a.resolve(yr)})).then(function(kr){if(yr&&Tr.length){nr=cr.sessionId!==Pt.currSessionId;var Ar=tr==="roamingMsgs",Rr=Pt.options.syncSessionUnread,Mn=yr.id,Or=Pt.getSessionInCache(Mn,!0)||{},Pr=Or.ack||0;if(tr==="offlineMsgs"||Ar&&Rr||tr==="onMsg"&&mr==="in"&&nr){var Nr;if(kt&&kr){var Wr=Or.unread||0;(yr=kr).unread=Wr,Pr=Pr||yr.ack||0}else(kr=Or)&&(yr.unread=kr.unread||0);Ir(yr),yr.unread=yr.unread||0;var Yr=0;o(Tr).call(Tr,function(qr){var Yn;try{Yn=Pt.options.shouldCountNotifyUnread(qr)}catch(Fr){throw Pt.logger.error("userOption:shouldCountNotifyUnread function error",Fr),Fr}var $n=(qr.type!=="notification"||qr.type==="notification"&&Yn)&&(Ue(qr.isUnreadable)||qr.isUnreadable);if($n&&Rr&&($n=qr.time>Pr&&qr.flow!=="out"),$n&&(Yr++,Rr&&!kt)){var Jr=Or.unreadMsgs||[];Jr.push(qr),yr.unreadMsgs=Jr}}),yr.unread+=Yr;var Ur=Ve.secureOutput("session",yr);if(Ur.unreadMsgs&&(Ur.unreadMsgs=i(Nr=Ur.unreadMsgs).call(Nr,function(qr){return qr&&qr.idServer})),Pt.logger.info("msg::putMsg:updateSession: ",Ur),Ir(yr),kt)return Et.updateSession({id:yr.id,unread:yr.unread})}}}),tr==="onMsg"&&(rr=rr.then(function(){$e.length&&yr&&(Pt.onUpdateSession(yr),Pt.options.syncSessionUnread&&!nr&&Pt.api.resetSessionUnread(Pt.currSessionId))})),rr.then(function(){return a.resolve($e)}).catch(function(kr){return kr&&kr.length?a.resolve(kr):a.reject(kr)})},ue.putBroadcastMsgs=function($e){var tr=this,nr=tr.db,Pt=$e.length;if(Pt>0){if(tr.doMarkBroadcastMsgsRead($e),nr.enable){var Et=$e[Pt-1].broadcastId;return nr.updateBroadcastMsgTimetag(Et),nr.putBroadcastMsg($e).then(function(){return b(function(){tr.doMarkMsgsRead(),tr.options.onbroadcastmsgs(Ve.copy($e))},0),a.resolve($e)})}b(function(){tr.options.onbroadcastmsgs(Ve.copy($e))},0)}return $e},ue.putBroadcastMsg=function($e){var tr=this,nr=tr.db;return tr.doMarkBroadcastMsgsRead([$e]),nr.enable?($e.broadcastId&&nr.updateBroadcastMsgTimetag($e.broadcastId),nr.putBroadcastMsg($e).then(function(){return b(function(){tr.options.onbroadcastmsg(Ve.copy($e))},0),a.resolve($e)})):(b(function(){tr.options.onbroadcastmsg(Ve.copy($e))},0),$e)},ue.doMarkBroadcastMsgsRead=function($e){$e=i($e).call($e,function(tr){return tr.broadcastId}),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:$e})},ue.cacheSyncedSession=function($e){if($e&&this.syncResult){$e=y({},$e),this.syncResult.sessions=this.syncResult.sessions||{};var tr=$e.id,nr=this.syncResult.sessions[tr]||{};nr&&nr.ack>$e.ack&&($e.ack=void 0),nr&&nr.msgReceiptTime>$e.msgReceiptTime&&($e.msgReceiptTime=void 0);var Pt=Ve.get(nr,"lastMsg.time"),Et=Ve.get($e,"lastMsg.time");Pt&&Et&&Pt>Et&&($e.lastMsg=nr.lastMsg),this.syncResult.sessions[tr]=y(nr,$e),this.syncResult.sessions[tr]=y({},this.mergeSession(this.syncResult.sessions[tr]))}},ue.checkMsgUnique=Ve.genCheckUniqueFunc("idClient"),ue.revokeMsgUniqueCheck=function($e){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[$e]=!1)},ue.storeSendMsg=function($e){if(!this.syncing){var tr=this.putMsg($e,"sendMsg");return this.msgPromise=this.msgPromise.then(function(){return tr}),tr}this.unhandledMsgs.push({type:"sendMsg",msg:$e})},ue.updateSendMsgError=function($e){if(!this.syncing){var tr=this.updateMsg($e);return this.msgPromise=this.msgPromise.then(function(){return tr}),tr}this.unupdatedMsgs.push($e)},ue.onSendMsg=function($e,tr){var nr,Pt,Et=this,kt=$e.content&&$e.content.msg,rr=$e.obj&&$e.obj.msg||kt;if(rr)if(this.logger.warn(g(nr=g(Pt="sendMsg::end: ".concat(kt&&kt.idServer," ")).call(Pt,rr.idClient," ")).call(nr,$e&&$e.raw&&$e.raw.ser)),$e.obj)mr();else{var cr=Et.db;cr&&cr.enable&&cr.getMsgByIdClient(rr.idClient).then(function(yr){yr&&(rr=yr,mr(!1))}).catch(function(){return mr()})}else this.logger.error("sendMsg::error::get msg failed, msg empty");function mr(){var yr,Tr=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];Et.completeMsg(rr);var Ir=$e.error&&$e.error.code===7101;$e.error&&!Ir||(rr.idServer=kt.idServer,rr.time=+kt.time,kt.yidunAntiSpamRes&&(rr.yidunAntiSpamRes=kt.yidunAntiSpamRes),kt.callbackExt&&(rr.callbackExt=kt.callbackExt)),Ir&&(rr.isInBlackList=!0),$e.error?rr.status="fail":rr.status="success",rr=Tr?m(yr=Et.message).call(yr,rr):rr,rr=Et.amendMsg(rr),tr&&(rr.filter=!0),$e.obj=rr,Et.syncing?Et.unupdatedMsgs.push(rr):Et.msgPromise=a.all([Et.msgPromise,$e.obj.promise]).then(function(kr){return kr.length||(rr.resend=!0),Et.updateMsg(rr).then(function(){return Et.options.syncSessionUnread&&Et.currSessionId===rr.sessionId&&Et.api.resetSessionUnread(Et.currSessionId),Et.resolveMsgReceiptTask(rr),rr})}).catch(function(kr){Et.logger.error("onSendMsg::dealMsg error",kr)})}},ue.updateLocalMsg=function($e){var tr=this.updateMsg($e);return this.msgPromise=this.msgPromise.then(function(){return tr}),tr},ue.updateMsg=function($e){if(s($e)||this.options.shouldIgnoreMsg($e))return a.resolve($e);var tr=this,nr=tr.db,Pt=$e.status==="success",Et=pr.genSessionByMsg($e),kt=!!$e.isLocal;return tr.onUpdateSession(Et),nr.enable?nr.updateMsg($e).then(function(rr){var cr=nr.updateSession(Et),mr=a.resolve();return Pt&&rr&&!kt&&(mr=$e.scene==="superTeam"?nr.updateSuperTeamRoamingMsgTimetag(rr.time):nr.updateRoamingMsgTimetag(rr.time)),a.all([cr,mr])}).catch(function(rr){tr.logger.error("updateMsg error",rr)}):(Pt&&!kt&&(tr.timetags.roamingMsgs=$e.time),a.resolve($e))},ue.updateRoamingMsgTimetag=function($e){var tr=this.db;return tr.enable?tr.updateRoamingMsgTimetag($e):(this.timetags.roamingMsgs=$e,a.resolve($e))},ue.checkUserUpdate=function($e){var tr=this,nr=$e.from;return tr.logger.info("handleMsg::checkUserUpdate: ",nr,tr.account),nr===tr.account?a.resolve():new a(function(Pt){var Et=tr.userSet[nr];if(Et){var kt=+Et.updateTime,rr=+$e.userUpdateTime;!isNaN(kt)&&!isNaN(rr)&&Ve.isNumber(kt)&&Ve.isNumber(rr)&&kt<rr?cr():Pt()}else cr();function cr(){tr.api.getUser({account:nr,sync:!0,done:function(mr,yr){mr||b(function(){tr.logger.log("user::checkUserUpdate: onupdateuser",yr&&yr.account),tr.options.onupdateuser(yr)},0),Pt()}})}})},ue.processUnsettledMsgs=function(){var $e,tr,nr=this;o($e=nr.unhandledMsgs).call($e,function(Pt){var Et=Pt.msg;switch(Pt.type){case"onMsg":nr.handleMsg(Et);break;case"sendMsg":nr.msgPromise=nr.msgPromise.then(function(){return nr.putMsg(Et)});break;case"onBroadcastMsg":nr.msgPromise=nr.msgPromise.then(function(){return nr.putBroadcastMsg(Et)})}}),o(tr=nr.unupdatedMsgs).call(tr,function(Pt){nr.msgPromise=nr.msgPromise.then(function(){return nr.updateMsg(Pt)})}),nr.resetUnsettledMsgs()},ue.onTeamNotificationMsg=function($e){var tr=$e.attach,nr=tr.type,Pt=$e.from,Et=$e.to,kt=$e.time,rr=tr.team,cr=tr.account,mr=tr.accounts;switch(nr){case"updateTeam":return rr.updateTime=kt,this.onUpdateTeam(rr);case"addTeamMembers":return this.onAddTeamMembers($e,rr,mr);case"removeTeamMembers":return this.onRemoveTeamMembers(rr,Et,mr);case"acceptTeamInvite":return this.onAddTeamMembers($e,rr,[Pt]);case"passTeamApply":return this.onAddTeamMembers($e,rr,[cr]);case"addTeamManagers":return this.updateTeamManagers($e,Et,mr,!0,kt);case"removeTeamManagers":return this.updateTeamManagers($e,Et,mr,!1,kt);case"leaveTeam":return this.onRemoveTeamMembers(rr,Et,[Pt]);case"dismissTeam":return this.onDismissTeam(Et,kt);case"transferTeam":return this.transferTeam($e,rr,Pt,cr);case"updateTeamMute":return this.onUpdateTeamMembersMute($e,rr,[cr],tr.mute);case"updateSuperTeam":return rr.updateTime=kt,this.onUpdateSuperTeam(rr);case"acceptSuperTeamInvite":return this.onAddSuperTeamMembers($e,rr,[$e.from]);case"addSuperTeamMembers":return this.onAddSuperTeamMembers($e,rr,mr);case"passSuperTeamApply":return this.onAddSuperTeamMembers($e,rr,[cr]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(rr,Et,mr);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(rr,Et,[Pt]);case"dismissSuperTeam":return this.onDismissSuperTeam(Et,kt);case"transferSuperTeam":return this.transferSuperTeam($e,rr,Pt,cr);case"addSuperTeamManagers":return this.updateSuperTeamManagers($e,Et,mr,!0,kt);case"removeSuperTeamManagers":return this.updateSuperTeamManagers($e,Et,mr,!1,kt);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute($e,rr,mr,tr.mute)}},ue.onAddSuperTeamMembers=function($e,tr,nr){var Pt=this.db,Et=ur.assembleMembers(tr,nr);$e.attach.members=Et;var kt={team:tr,accounts:nr,members:Et};if(this.logger.info("team::onAddSuperTeamMembers: ".concat(kt.team.teamId,", "),kt.accounts),this.options.onAddSuperTeamMembers(Ve.simpleClone(kt)),Pt.enable){var rr=Pt.putSuperTeamMembers(Et),cr=Pt.putSuperTeam(tr);return a.all([rr,cr])}},ue.onRemoveSuperTeamMembers=function($e,tr,nr){var Pt=this.db,Et={team:$e,teamId:tr,accounts:nr};if(this.logger.info("team::onRemoveSuperTeamMembers: ".concat(tr,", "),Et.accounts),this.options.onRemoveSuperTeamMembers&&this.options.onRemoveSuperTeamMembers(Ve.simpleClone(Et)),$e&&Pt.enable){if(u(nr).call(nr,this.account)===-1){var kt=Pt.removeSuperTeamMembersByAccounts(tr,nr),rr=a.resolve();return $e&&(rr=Pt.putSuperTeam($e)),a.all([kt,rr])}return Pt.leaveSuperTeam(tr)}},ue.onDismissSuperTeam=function($e,tr){var nr=this.db,Pt={teamId:$e};if(this.logger.info("team::onDismissSuperTeam:",$e),this.options.onDismissSuperTeam(Pt),nr.enable)return nr.dismissSuperTeam($e,tr)},ue.onAddTeamMembers=function($e,tr,nr){var Pt=this,Et=Pt.db,kt=tr.teamId,rr=At.assembleMembers(tr,nr);$e.attach.members=rr;var cr={team:tr,accounts:nr,members:rr};if(Pt.logger.info("team::onAddTeamMembers: ",kt,nr),Pt.options.onAddTeamMembers(Ve.simpleClone(cr)),Et.enable){var mr,yr=Et.putTeam(tr);return u(nr).call(nr,Pt.account)===-1?mr=Et.putTeamMembers(rr):(Pt.logger.log("team::onAddTeamMembers: user join team",kt),yr=new a(function(Tr){Pt.api.getTeamMembers({teamId:kt,sync:!0,done:function(){Tr()}})})),a.all([mr,yr])}},ue.onRemoveTeamMembers=function($e,tr,nr){var Pt=this.db,Et={team:$e,teamId:tr,accounts:nr};if(this.logger.info("team::onRemoveTeamMembers: ".concat(tr),nr),this.options.onRemoveTeamMembers(Ve.simpleClone(Et)),$e&&Pt.enable){if(u(nr).call(nr,this.account)===-1){var kt=Pt.removeTeamMembersByAccounts(tr,nr),rr=a.resolve();return $e&&(rr=Pt.putTeam($e)),a.all([kt,rr])}return Pt.leaveTeam(tr)}},ue.updateTeamManagers=function($e,tr,nr,Pt,Et){var kt=this.db,rr=$e.attach.members=i(nr).call(nr,function(Ir){return{id:At.genId(tr,Ir),type:Pt?"manager":"normal",updateTime:Et}}),cr={teamId:""+tr,memberUpdateTime:Et};$e.attach.team=cr;var mr={team:cr,accounts:nr,isManager:Pt,members:rr};if(this.logger.info("team::updateTeamManagers:",tr,nr,Pt),this.options.onUpdateTeamManagers(Ve.simpleClone(mr)),kt.enable){var yr=kt.updateTeam(cr),Tr=kt.updateTeamManagers(tr,nr,Pt,Et);return a.all([yr,Tr])}},ue.updateSuperTeamManagers=function($e,tr,nr,Pt,Et){var kt=this.db,rr=$e.attach.members=i(nr).call(nr,function(Ir){return{id:At.genId(tr,Ir),teamId:tr,account:Ir,type:Pt?"manager":"normal",updateTime:Et}}),cr={teamId:""+tr,memberUpdateTime:Et};$e.attach.team=cr;var mr={team:cr,accounts:nr,isManager:Pt,members:rr};if(this.logger.info("team::updateSuperTeamManagers:",tr,nr,Pt),this.options.onUpdateSuperTeamManagers(Ve.simpleClone(mr)),kt.enable){var yr=kt.updateSuperTeam(cr),Tr=kt.updateSuperTeamMembers(rr);return a.all([yr,Tr])}},ue.onDismissTeam=function($e,tr){var nr=this.db,Pt={teamId:$e};if(this.logger.info("team::onDismissTeam:",$e),this.options.onDismissTeam(Pt),nr.enable)return nr.dismissTeam($e,tr)},ue.transferTeam=function($e,tr,nr,Pt){var Et=this.db,kt=tr.teamId,rr=tr.memberUpdateTime,cr={id:At.genId(kt,nr),type:"normal",updateTime:rr},mr={id:At.genId(kt,Pt),type:"owner",updateTime:rr};$e.attach.members=[cr,mr];var yr={team:tr,from:cr,to:mr};if(this.logger.info("team::transferTeam: from to",kt,nr,Pt),this.options.onTransferTeam(Ve.simpleClone(yr)),Et.enable)return Et.transferTeam(tr,nr,Pt)},ue.transferSuperTeam=function($e,tr,nr,Pt){var Et=this.db,kt=tr.teamId,rr=tr.memberUpdateTime,cr={teamId:kt,type:"normal",account:nr,updateTime:rr},mr={teamId:kt,type:"owner",account:Pt,updateTime:rr};$e.attach.members=[cr,mr];var yr={team:tr,from:cr,to:mr};if(this.logger.info("team::transferSuperTeam: from to ",kt,nr,Pt),this.options.onTransferSuperTeam(Ve.simpleClone(yr)),Et.enable)return Et.transferSuperTeam(tr,cr,mr)},ue.onUpdateTeamMembersMute=function($e,tr,nr,Pt){var Et=this.db,kt=i(nr).call(nr,function(yr){return{id:At.genId(tr.teamId,yr),account:yr,teamId:tr.teamId,mute:Pt,updateTime:tr.memberUpdateTime}});$e.attach.members=kt;var rr={team:tr,accounts:nr,members:kt,mute:Pt};if(this.logger.info("team::onUpdateTeamMembersMute:",tr.teamId,nr,Pt),this.options.onUpdateTeamMembersMute(Ve.simpleClone(rr)),Et.enable){var cr=Et.updateTeamMembers(kt),mr=Et.putTeam(tr);return a.all([cr,mr])}},ue.onUpdateSuperTeamMembersMute=function($e,tr,nr,Pt){var Et=this.db,kt=i(nr).call(nr,function(yr){return{id:ur.genId(tr.teamId,yr),account:yr,teamId:tr.teamId,mute:Pt,updateTime:tr.memberUpdateTime}});$e.attach.members=kt;var rr={team:tr,accounts:nr,members:kt,mute:Pt};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",tr.teamId,nr,Pt),this.options.onUpdateSuperTeamMembersMute(Ve.simpleClone(rr)),Et.enable){var cr=Et.updateSuperTeamMembers(kt),mr=Et.putSuperTeam(tr);return a.all([cr,mr])}},ue.onHistoryMsgs=function($e){$e.error||($e.obj.msgs=this.message.reverseMsgs($e.content.msgs))},ue.onmsgFtsInServer=function($e){if(!$e.error){var tr=this.message.reverseMsgs($e.content.msgs);$e.obj.msgs=tr,$e.content.msgs=tr}},ue.isFilterMsgs=function($e){return!!s($e[0])},ue.splitMsgs=function($e,tr,nr,Pt){o($e).call($e,function(Et){if(s(Et))Pt.push(Et);else switch(Et.scene){case"p2p":tr.push(Et);break;case"team":nr.push(Et)}})},ue.markMsgRead=function($e,tr){if(Ve.isArray($e)||($e=[$e]),this.db.enable||this.options.autoMarkRead||tr){var nr=i($e).call($e,function(Pt){return{flag:"msg",idServer:Pt.idServer,scene:Pt.scene,filter:s(Pt),type:Pt.type,attachType:Pt.attach&&Pt.attach.type}});this.msgAckBufferManager.add(nr)}},ue.markSysMsgRead=function($e,tr){if(Ve.isArray($e)||($e=[$e]),this.db.enable||this.options.autoMarkRead||tr){var nr=i($e).call($e,function(Pt){return{flag:"systemMsg",idServer:Pt.idServer,scene:Pt.scene,filter:s(Pt),type:Pt.type}});this.msgAckBufferManager.add(nr)}},ue.handleMsgsAck=function($e){var tr,nr=this,Pt={p2pSysMsgs:{sid:7,cid:3,msgs:[]},p2pMsgs:{sid:7,cid:2,msgs:[]},superTeamSysMsgs:{sid:21,cid:19,msgs:[]},teamMsgs:{sid:8,cid:3,msgs:[]},filterSysMsgs:{sid:101,cid:3,msgs:[]},filterMsgs:{sid:101,cid:2,msgs:[]},netcallMsgs:{sid:9,cid:11,msgs:[]}};o($e).call($e,function(Et){/^(netcallBill|netcallMiss|netcallReject)$/.test(Et.attachType)?Pt.netcallMsgs.msgs.push(Et):s(Et)?Et.flag==="systemMsg"?Pt.filterSysMsgs.msgs.push(Et):Pt.filterMsgs.msgs.push(Et):Et.flag!=="systemMsg"?Et.scene==="p2p"?Pt.p2pMsgs.msgs.push(Et):Et.scene==="team"&&Pt.teamMsgs.msgs.push(Et):Et.scene==="superTeam"?Pt.superTeamSysMsgs.msgs.push(Et):Pt.p2pSysMsgs.msgs.push(Et)}),o(tr=d(Pt)).call(tr,function(Et){return nr.doMarkMsgsRead(Pt[Et].sid,Pt[Et].cid,Pt[Et].msgs)})},ue.doMarkMsgsRead=function($e,tr,nr){nr&&nr.length&&(this.logger.log("markMsgRead::batchMarkRead",$e,tr,nr),this.sendCmd("batchMarkRead",{sid:$e,cid:tr,ids:i(nr).call(nr,function(Pt){return Pt.idServer})}))}},function(t,r,e){var n=e(58),o=e(9),s=e(2),a=e(5),i=e(17),d=e(3),u=e(41),c=e(59),m=e(60),v=e(61),g=e(62),b=e(47);function T(Oe,he){var Y=a(Oe);if(c){var ae=c(Oe);he&&(ae=i(ae).call(ae,function(Fe){return m(Oe,Fe).enumerable})),Y.push.apply(Y,ae)}return Y}function k(Oe){for(var he=1;he<arguments.length;he++){var Y,ae,Fe=arguments[he]!=null?arguments[he]:{};he%2?s(Y=T(Object(Fe),!0)).call(Y,function(ze){n(Oe,ze,Fe[ze])}):v?g(Oe,v(Fe)):s(ae=T(Object(Fe))).call(ae,function(ze){b(Oe,ze,m(Fe,ze))})}return Oe}var y=e(35).fn,A=e(751),V=e(753);function Ce(Oe,he,Y){var ae=this,Fe=this.timetags&&this.timetags.sync;this.db.enable&&Fe&&he&&this.db.getMsgByIdClient(Oe).then(function(ze){if(ze&&!(ze.commentTimetag&&ze.commentTimetag<=Fe&&ze.time<=Fe)){if(ze.commentTimetag=he.time,ze.comments=ze.comments||[],Y){var pe;ze.comments=i(pe=ze.comments).call(pe,function(Ve){return Ve.body!==he.body||Ve.from!==he.from})}else{for(var le,xe=0;xe<ze.comments.length;xe++)if(ze.comments[xe].from===he.from&&ze.comments[xe].body===he.body){ze.comments[xe]=he,le=!0;break}le||ze.comments.push(he)}var ue={idClient:ze.idClient,comments:ze.comments,commentTimetag:ze.commentTimetag};ae.db.updateMsg(ue)}})}function ie(Oe){Oe.scene=this.message.sceneReverseMap[+Oe.scene]||Oe.scene,Oe.time=+Oe.time}y.processMsgExtend=function(Oe){switch(Oe.cmd){case"getThreadMsgs":this.onGetThreadMsgs(Oe);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer(Oe);break;case"addQuickComment":this.changeQuickComment(Oe);break;case"deleteQuickComment":this.changeQuickComment(Oe,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment(Oe);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment(Oe,!0);break;case"getQuickComments":this.getQuickComments(Oe);break;case"addCollect":case"updateCollect":this.addCollect(Oe);break;case"deleteCollects":this.deleteCollects(Oe);break;case"getCollects":this.getCollects(Oe);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession(Oe,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession(Oe,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession(Oe,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange(Oe,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange(Oe,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange(Oe,"delete");break;case"getMsgPins":this.getMsgPins(Oe)}},y.onGetThreadMsgs=function(Oe){if(!Oe.error){var he;Oe.obj.msgs=this.message.reverseMsgs(Oe.content.msgs),Oe.obj.threadMsg=o(he=this.message).call(he,Oe.content.threadMsg);var Y=Oe.content.threadMsgsMeta||{};Oe.obj.total=Y.total,Oe.obj.timetag=Y.lastMsgTime}},y.onGetMsgsByIdServer=function(Oe){Oe.error||(Oe.obj.msgs=this.message.reverseMsgs(Oe.content.msgs))},y.changeQuickComment=function(Oe,he){Oe.error||(Oe.obj.comment.time=Oe.content.timetag,Oe.obj.comment=o(A).call(A,Oe.obj.comment),ie.call(this,Oe.obj.msg),Ce.call(this,Oe.obj.msg.idClient,Oe.obj.comment,he))},y.onQuickComment=function(Oe,he){if(Oe.content){var Y=Oe.content,ae=Y.comment,Fe=Y.msg;ae&&Fe&&(ie.call(this,Fe),ae=o(A).call(A,ae),he?this.options.onDeleteQuickComment(Oe.content.msg,ae):this.options.onQuickComment(Oe.content.msg,ae),Ce.call(this,Fe.idClient,ae,he))}},y.getQuickComments=function(Oe){var he,Y=this;if(!Oe.error){var ae=Oe.obj.idMap,Fe=Oe.obj.indexMap,ze=Oe.content&&Oe.content.commentRes||[];s(ze).call(ze,function(pe){var le=[],xe=Y.parser.unserializeMap.comment;if(+pe.modify==1)try{le=JSON.parse(pe.detail)}catch(Ve){Y.logger.warn("getQuickComments parse detail error",Ve)}if(s(le).call(le,function(Ve,Ue){var er,At={};s(er=a(Ve)).call(er,function(ur){At[xe[ur]]=Ve[ur]}),At=o(A).call(A,At),le[Ue]=At}),pe.timestamp=+pe.timestamp,ae[pe.idClient]){var ue={idClient:pe.idClient,commentTimetag:pe.timestamp};ae[pe.idClient].commentTimetag=pe.timestamp,+pe.modify==1&&(ae[pe.idClient].comments=le,ue.comments=le),Y.db.enable&&Y.db.updateMsg(ue)}else ae[pe.idClient]={idServer:pe.idServer,idClient:pe.idClient,comments:le,commentTimetag:pe.timestamp,scene:Y.message.sceneReverseMap[pe.scene]||pe.scene}}),Oe.obj=[],s(he=a(Fe)).call(he,function(pe){Oe.obj[Fe[pe]]=ae[pe]})}},y.addCollect=function(Oe){Oe.error||(Oe.obj.collect=o(V).call(V,Oe.content.collect))},y.deleteCollects=function(Oe){Oe.error||(Oe.obj.deleteNum=Oe.content.deleteNum)},y.getCollects=function(Oe){if(!Oe.error){var he=[],Y=Oe.content.collectList||[];s(Y).call(Y,function(ae){he.push(o(V).call(V,ae))}),Oe.obj.collectList=he,Oe.obj.total=Oe.content.total}},y.onChangeStickTopSession=function(Oe,he){var Y=this;if(!Oe.error){var ae=Oe.content.stickTopSession||Oe.obj.stickTopSession||{},Fe=Oe.content.timetag||+ae.updateTime,ze=ae.id.split("|");ze[0]==="super_team"&&(ze[0]="superTeam"),ae={id:ze.join("-"),scene:ze[0],to:ze[1],topCustom:ae.topCustom||""},he==="delete"?ae.isTop=!1:he==="add"&&(ae.isTop=!0),ae=this.onUpdateSession(ae),Oe.obj&&(Oe.obj.stickTopSession=ae),this.db.enable&&(this.db.updateSession(ae).then(function(pe){pe||Y.db.putSession(ae)}),this.db.updateTimetag("stickTopSessions",Fe))}},y.pinMsgChange=function(Oe,he){var Y=this;if(!Oe.error){Oe.content=Oe.content||{};var ae=this,Fe=this.db,ze=Oe.obj&&Oe.obj.msg,pe=Oe.content.msg||ze||{},le=Oe.content.pinTag||Oe.obj.pinTag,xe=Oe.content.timetag||+le.updateTime,ue=d.resolve();ie.call(this,pe),Fe.enable&&(ue=Fe.getMsgByIdClient(pe.idClient)),le.createTime&&(le.createTime=+le.createTime),le.updateTime&&(le.updateTime=+le.updateTime),ue.then(function(Ve){return pe=Ve||pe,Ve?pe=Ve:pe.sessionId=pe.scene+"-"+Y.message.Message.getMsgTarget(pe,Y.account),ze?(Oe.obj.msg=pe,Oe.obj.pinTag=le):Y.options.onPinMsgChange({msg:pe,pinTag:le},he),function(){Fe.enable&&Fe[he==="delete"?"deleteMsgPin":"putMsgPin"](k(k({},pe),{},{pinFrom:le.pinFrom,pinCustom:le.pinCustom})).then(function(){var Ue="pin-"+pe.sessionId,er=ae.timetags.sync;return Fe.getTimetag(Ue).then(function(At){return At>er?Fe.updateTimetag(Ue,xe):d.resolve()})}).catch(function(Ue){ae.logger.error("msgExtend::pinMsgChange:error",Ue)})}(),d.resolve}).then(function(){}),Oe.promise=ue}},y.getMsgPins=function(Oe){var he=this;if(!Oe.error){var Y=this.db,ae=Oe.content||{};if(ae.pins=ae.pins||[],ae.modify){var Fe,ze=[];Y.enable&&(Y.updateTimetag("pin-"+Oe.obj.id,ae.timetag),s(Fe=ae.pins).call(Fe,function(pe){pe.sessionId=Oe.obj.id,ze.push(Y.getMsgByIdClient(pe.idClient))})),Oe.promise=d.all(ze).then(function(pe){var le;s(le=ae.pins).call(le,function(xe,ue){pe[ue]?u(xe,pe[ue]):(xe.sessionId=Oe.obj.id,ie.call(he,xe))}),Oe.obj.pins=ae.pins,Y.enable&&Y.deleteMsgPins(Oe.obj.id).then(function(){return Y.putMsgPins(ae.pins)}).catch(function(xe){he.logger.error("msgExtend::getMsgPins:change db error",xe)})})}else Y.enable?(Y.updateTimetag("pin-"+Oe.obj.id,ae.timetag),Oe.promise=Y.getMsgPins(Oe.obj.id).then(function(pe){Oe.obj.pins=pe||[]})):Oe.obj.pins=[]}}},function(t,r,e){var n=e(812);t.exports=n},function(t,r,e){e(813);var n=e(12);t.exports=n.Number.isInteger},function(t,r,e){e(1)({target:"Number",stat:!0},{isInteger:e(814)})},function(t,r,e){var n=e(28),o=Math.floor;t.exports=Number.isInteger||function(s){return!n(s)&&isFinite(s)&&o(s)===s}},function(t,r,e){var n=e(120),o=e(3),s=e(2),a=e(7),i=["time","from"],d=e(35).fn,u=e(0);d.onOfflineMsgReceipts=function(c){var m,v=this,g=v.db,b=c.content.msgReceipts,T=[],k=o.resolve();this.logger.info("onOfflineMsgReceipts",b),s(b).call(b,function(y){m={id:"p2p-"+y.from,msgReceiptTime:+y.time},v.cacheSyncedSession(m)}),v.syncResult.msgReceipts=T,g.enable&&(k=g.updateMsgReceiptsTimetag(c.content.timetag)),k.cmd=T,v.syncPromiseArray.push(k)},d.shouldUpdateSessionFromMsgReceipt=function(c,m){return!c||!c.msgReceiptServerTime||m.time>c.msgReceiptServerTime},d.genSessionFromMsgReceipt=function(c,m){var v=m.time,g={id:m.sessionId,msgReceiptTime:v,msgReceiptServerTime:v};return c&&c.id===m.sessionId&&(g=u.merge({},c,g)),c&&c.updateTime||(g.updateTime=v),g},d.onMsgReceipt=function(c){var m=this,v=m.db,g=c.content.msgReceipt;g.time=+g.time;var b=g.idClient,T=o.resolve();v.enable&&b&&(T=v.getMsgByIdClient(b)),this.logger.info("onMsgReceipt::",g),T.then(function(k){if(k){if(!k.idServer)return void(m.msgReceiptTasks[b]=g);k.time}else g.time;g.msgReceiptTime=g.time,g.sessionId="p2p-".concat(g.from),m.updateSessionMsgReceiptTime(g),g.time,g.from;var y=n(g,i);m.options.onMsgReceipts([y])})},d.resolveMsgReceiptTask=function(c){var m=this.msgReceiptTasks[c.idClient];m&&(m.msgReceiptTime=c.time,this.updateSessionMsgReceiptTime(m))},d.updateSessionMsgReceiptTime=function(c){var m=this.db,v={id:"p2p-"+c.from,msgReceiptTime:c.msgReceiptTime,msgReceiptServerTime:c.time};(this.getSessionInCache(v.id)||{}).msgReceiptTime>=v.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",c):(m.enable&&m.putSession(v),this.onUpdateSession(v))},d.onSendMsgReceipt=function(c){var m;if(!c.error)if(c.obj&&c.obj.msgReceipt){var v=c.obj.msgReceipt,g=+v.time,b=+c.content.msgReceipt.time,T=this.getSessionInCache("p2p-"+v.to);T?(this.logger.info(a(m="sendMsgReceipt on:: param time ".concat(g,", res time ")).call(m,b)),T.msgReceiptSendTime=Math.min(g,b)):this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt")}else this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout")},d.shouldSendMsgReceipt=function(c){if(c&&c.scene==="p2p"&&c.status==="success"){var m=this.getSessionInCache(c.sessionId);if(m){var v=m.msgReceiptSendTime;return!v||v<c.time}}return!1},d.isMsgRemoteRead=function(c){if(c&&c.scene==="p2p"&&c.flow==="out"&&c.status==="success"){var m=this.getSessionInCache(c.sessionId);if(m&&m.msgReceiptTime)return c.time<=m.msgReceiptTime}return!1}},function(t,r,e){var n=e(102),o=e(103),s=e(57),a=e(9),i=e(2),d=e(7),u=e(8),c=e(3),m=e(87),v=e(196),g=e(5),b=e(17),T=e(52),k=e(15),y=e(24),A=e(200),V=e(85),Ce=e(86),ie=e(70),Oe=e(32);function he(Ue,er){var At=Ce!==void 0&&ie(Ue)||Ue["@@iterator"];if(!At){if(Oe(Ue)||(At=function(or,ir){var $e;if(or){if(typeof or=="string")return Y(or,ir);var tr=k($e=Object.prototype.toString.call(or)).call($e,8,-1);if(tr==="Object"&&or.constructor&&(tr=or.constructor.name),tr==="Map"||tr==="Set")return V(or);if(tr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tr))return Y(or,ir)}}(Ue))||er&&Ue&&typeof Ue.length=="number"){At&&(Ue=At);var ur=0,pr=function(){};return{s:pr,n:function(){return ur>=Ue.length?{done:!0}:{done:!1,value:Ue[ur++]}},e:function(or){throw or},f:pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar,hr=!0,Ne=!1;return{s:function(){At=At.call(Ue)},n:function(){var or=At.next();return hr=or.done,or},e:function(or){Ne=!0,ar=or},f:function(){try{hr||At.return==null||At.return()}finally{if(Ne)throw ar}}}}function Y(Ue,er){(er==null||er>Ue.length)&&(er=Ue.length);for(var At=0,ur=new Array(er);At<er;At++)ur[At]=Ue[At];return ur}var ae=e(35).fn,Fe=e(151),ze=e(152),pe=e(0),le=e(105).EMSyncType;function xe(Ue,er){return ue.apply(this,arguments)}function ue(){return(ue=o(n.mark(function Ue(er,At){var ur,pr,ar,hr,Ne,or,ir,$e,tr,nr,Pt,Et,kt,rr=this;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(ar=(pr=this).db,hr=[],i(er).call(er,function(mr){rr.revokeMsgUniqueCheck(mr.idClient),hr.push(mr.idClient)}),pr.options.rollbackDelMsgUnread){cr.next=14;break}return cr.next=7,ar.deleteMsg(hr);case 7:if(cr.t0=cr.sent,cr.t0){cr.next=10;break}cr.t0=[];case 10:return Ne=cr.t0,Ne=Object.prototype.toString.call(Ne)==="[object Array]"?Ne:[Ne],pr.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(Ne.length," rows")),cr.abrupt("return");case 14:return or=!1,ir=pr.options.cbUpdateSession||y(ur=pr.updateSessionInDbWithNotify).call(ur,pr),$e=pr.getSessionInCache(At)||{id:At},tr=$e.lastMsg||{},A(hr).call(hr,tr.idClient)&&(or=!0),pr.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",At,or,$e.unread),cr.next=22,ar.deleteMsg(hr);case 22:if(cr.t1=cr.sent,cr.t1){cr.next=25;break}cr.t1=[];case 25:if(nr=cr.t1,nr=Object.prototype.toString.call(nr)==="[object Array]"?nr:[nr],pr.logger.info("msg::_deleteMsgSelfBatchInDb affect:",nr.length," rows"),!or){cr.next=34;break}return cr.next=31,ar.getMsgs({sessionId:At,limit:1});case 31:Pt=cr.sent,tr=Pt&&Pt[0]?Pt[0]:null,$e.lastMsg=tr;case 34:if(Et=!1,$e&&$e.unread&&(kt=$e&&$e.ack||0,i(nr).call(nr,function(mr){kt<mr.time&&mr.flow==="in"&&($e.unread=$e.unread>0?$e.unread-1:0,Et=!0)})),!or&&!Et){cr.next=39;break}return pr.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",At,$e.unread),cr.abrupt("return",ir($e));case 39:case"end":return cr.stop()}},Ue,this)}))).apply(this,arguments)}function Ve(Ue,er){er=er||new Date().getTime();var At=this.db,ur=this.getSessionInCache(Ue),pr=this.options.rollbackClearMsgsUnread!==!1,ar=[];return At.enable&&ar.push(At.deleteMsgsBySessionId({sessionId:Ue,end:er})),pr&&ur&&(ur=this.mergeSession({id:ur.id,unread:0,lastMsg:null,unreadMsgs:[]}),ur=this.onUpdateSession(ur)),At.enable&&pr&&ur&&ar.push(At.updateSession(ur)),c.all(ar)}ae.onDeleteMsg=function(Ue){var er=this.db;if(delete Ue.obj.sysMsg,!Ue.error){var At=Ue.obj.msg;Ue.promise=this.deleteLocalMsg(At).then(function(){if(er.enable){var ur=At.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";er.getTimetag(ur).then(function(pr){pr=pr||0,s()+1>=pr&&er.updateTimetag(ur,s()+1)})}})}},ae.onMsgDeleted=function(Ue,er){var At=this;if(!At.canHandleDeletedMsgInSyncing)return At.logger.info("msg::onMsgDeleted:is in syncing ..."),void At.unhandledSysMsgsForDeletedMsgs.push({packet:Ue,isSuperTeam:er});if(!Ue.error){var ur=At.db,pr=a(Fe).call(Fe,Ue.content.sysMsg);pr=At.processDeleteMsgSysMsg(pr),er||At.markSysMsgRead(pr),At.deleteLocalMsg(pr.msg).then(function(){if(ur.enable){var ar=er?"deleteSuperTeamMsg":"deleteMsg";ur.updateTimetag(ar,pr.time+1)}At.handleSysMsg(pr)})}},ae.processDeleteMsgSysMsg=function(Ue){var er;return Ue.msg={},i(er=["scene","from","to"]).call(er,function(At){Ue.msg[At]=Ue[At]}),Ue.msg.idClient=Ue.deletedIdClient,Ue.msg.idServer=Ue.deletedIdServer,Ue.msg.time=Ue.deletedMsgTime,Ue.msg.fromNick=Ue.deletedMsgFromNick,Ue.opeAccount=Ue.opeAccount||Ue.from,Ue.msg.opeAccount=Ue.opeAccount,this.message.Message.setExtra(Ue.msg,this.account),Ue},ae.onDeleteMsgOfflineRoaming=function(Ue){if(!Ue.error){var er,At=this,ur=+Ue.content.type==1?"offline":"roaming",pr=Fe.reverseSysMsgs(Ue.content.sysMsgs,{mapper:function(or){return At.processDeleteMsgSysMsg(or)}}),ar=pr&&pr[0]&&pr[0].scene==="superTeam";At.logger.info(d(er="msg::onDeleteMsgOfflineRoaming: on delete ".concat(ur," ")).call(er,ar?"superTeam":""," idServer deletedIdClient deletedIdClient="),u(pr).call(pr,function(or){var ir,$e;return d(ir=d($e="".concat(or.idServer,"-")).call($e,or.deletedIdServer,"-")).call(ir,or.deletedIdClient)})),ur==="offline"&&At.markSysMsgRead(pr);var hr=Ue.content.timetag;ar?(At.timetags.deleteSuperTeamMsg=hr,At.syncResult.deleteSuperTeamMsgTimetag=hr):(At.timetags.deleteMsg=hr,At.syncResult.deleteMsgTimetag=hr);var Ne=At.putSysMsg(pr,"offlineSysMsgs").catch(function(or){return At.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",or),c.reject(or)});Ne.cmd="deleteMsgSysMsgs "+ur,At.syncPromiseArray.push(Ne),At.syncResult.deleteMsgSysMsgs=At.syncResult.deleteMsgSysMsgs||[],At.syncResult.deleteMsgSysMsgs.push({type:ur,sysMsgs:pr})}},ae.deleteMsgOfflineRoaming=function(Ue,er){if(!Ue)return c.resolve();var At=this;At.logger.info("msg::deleteMsgOfflineRoaming: ",u(Ue).call(Ue,function(ar){var hr;return ar.type+" "+u(hr=ar.sysMsgs).call(hr,function(Ne){var or,ir;return d(or=d(ir="".concat(Ne.idServer,"-")).call(ir,Ne.deletedIdServer,"-")).call(or,Ne.deletedIdClient)})}),pe.secureOutput("session",er));var ur=At.db,pr=[];return i(Ue).call(Ue,function(ar){var hr;i(hr=ar.sysMsgs).call(hr,function(Ne){var or=At.deleteLocalMsg(Ne.msg,{cbUpdateSession:function(ir){ir=At.mergeSession(ir),ir=m(ze).call(ze,ir);var $e=pe.findObjIndexInArray(er,{value:ir.id});if($e!==-1&&(er[$e]=pe.merge({},er[$e],ir)),ur.enable)return ur.updateSession(ir)}});pr.push(or)})}),c.all(pr).then(function(){ur.enable&&(At.syncResult.deleteMsgTimetag&&ur.updateTimetag("deleteMsg",At.syncResult.deleteMsgTimetag),At.syncResult.deleteSuperTeamMsgTimetag&&ur.updateTimetag("deleteSuperTeamMsg",At.syncResult.deleteSuperTeamMsgTimetag))})},ae.deleteMsgSelf=function(Ue){if(!Ue.error){var er=this.db,At=Ue.obj&&Ue.obj.deleteMsgSelfTag;if(At){var ur=Ue.content&&Ue.content.timetag;At.scene=At.scene+""=="1"?"p2p":"team";var pr=[this.deleteLocalMsg(At)];ur<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=ur,er.enable&&pr.push(er.updateDeleteMsgSelf(ur))),Ue.promise=c.all(pr)}}},ae.deleteMsgSelfBatch=function(){var Ue=o(n.mark(function er(At){var ur,pr,ar,hr,Ne,or,ir,$e;return n.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(!At.error){tr.next=2;break}return tr.abrupt("return");case 2:if(pr=this,ar=this.db,(hr=At.obj&&At.obj.deleteMsgSelfTags)&&hr.length>0){tr.next=7;break}return tr.abrupt("return");case 7:if(Ne=v(hr).call(hr,function(nr,Pt){var Et=Pt.sessionId;if(nr[Et]=nr[Et]||[],nr[Et].push(Pt),!ar.enable){var kt=pr.getSessionInCache(Et);kt&&kt.lastMsg&&Pt&&kt.lastMsg.idClient===Pt.idClient&&(kt.lastMsg=null,pr.onUpdateSession(kt))}return nr},{}),ar.enable){tr.next=11;break}return i(or=g(Ne)).call(or,function(nr){var Pt=Ne[nr],Et=pr.getSessionInCache(nr);if(pr.options.rollbackDelMsgUnread&&Et){var kt=Et.ack||0,rr=b(Pt).call(Pt,function(cr){return pr.message.Message.setFlow(cr,pr.account),kt<cr.time&&cr.flow==="in"});rr.length>0&&Et.unread&&(Et.unread=Et.unread-rr.length>=0?Et.unread-rr.length:0,pr.onUpdateSession(Et))}}),tr.abrupt("return",c.resolve());case 11:ir=u(ur=g(Ne)).call(ur,function(nr){var Pt=Ne[nr];return xe.call(pr,Pt,nr)}),($e=At.content&&At.content.timetag)<=pr.timetags.deleteMsgSelf||(pr.timetags.deleteMsgSelf=$e,ir.push(ar.updateDeleteMsgSelf($e))),At.promise=c.all(ir);case 15:case"end":return tr.stop()}},er,this)}));return function(er){return Ue.apply(this,arguments)}}(),ae.onDeleteMsgSelf=function(Ue){var er=this,At=this.db,ur=Ue.content.deleteMsgSelfTag;ur.scene=ur.scene+""=="1"?"p2p":"team",er.options.onDeleteMsgSelf([ur]),er.deleteLocalMsg(ur).then(function(){var pr=ur.deletedTime;return pr<=er.timetags.deleteMsgSelf||!At.enable?c.resolve():(er.timetags.deleteMsgSelf=pr,At.updateDeleteMsgSelf(pr))}).catch(function(pr){er.logger.error("onDeleteMsgSelf error",pr)})},ae.onDeleteMsgSelfBatch=function(Ue){var er=this;if(!Ue.error){var At={1:"p2p",2:"team"},ur=pe.get(Ue,"content.deleteMsgSelfTags")||[];i(ur).call(ur,function(ar){var hr;ar.scene=At[ar.scene],ar.sessionId=d(hr="".concat(ar.scene,"-")).call(hr,er.message.Message.getMsgTarget(ar,er.account)),ar.deletedTime=T(ar.deletedTime),ar.time=T(ar.time)});var pr=pe.get(Ue,"content.deleteMsgSelfTags[0].deletedTime");pr=T(pr)||0,this.options.onDeleteMsgSelf(ur),this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:ur},content:{timetag:pr}})}},ae.clearServerHistoryMsgs=function(Ue){if(!Ue.error){var er=this.db,At=Ue.obj&&Ue.obj.clearMsgsParamsWithSync;if(At){var ur=(At.type&&At.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(At.otherAccid):"team-".concat(At.toTid),pr=Ue.content&&T(Ue.content.timetag);pr&&pr>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=pr,er.enable&&er.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),Ve.call(this,ur,pr)}}},ae.onClearServerHistoryMsgs=function(Ue){if(!Ue.error){var er=this.db,At=Ue.content&&Ue.content.sessionHistoryMsgsDeleteTag;if(At){var ur=(At.type&&At.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(At.otherAccid):"team-".concat(At.toTid),pr=At.ext,ar=T(At.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:ur,time:ar,ext:pr}]),ar<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=ar,er.enable&&er.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),Ve.call(this,ur,ar)}}},ae.syncSessionHistoryMsgsDelete=function(Ue){if(!Ue.error){var er=this.db,At=Ue.content&&Ue.content.sessionHistoryMsgsDeleteTags;if(At&&At.length>0){var ur=u(At).call(At,function(ar){return{sessionId:(ar.type&&ar.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(ar.otherAccid):"team-".concat(ar.toTid),time:T(ar.time)}});this.reporterHook.emit("reporter/syncItemComplete",le.kSyncType4_24),this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(ur),this.syncResult.clearServerHistoryMsgs=ur;var pr=0;i(ur).call(ur,function(ar){ar.time>pr&&(pr=ar.time)}),er.enable&&er.updateTimetag("sessionHistoryMsgsDelete",pr)}}},ae.syncDeleteMsgSelf=function(Ue){var er=this,At=this.db,ur=Ue.content.deletedMsgs;if(ur&&ur.length!==0){var pr=[];i(ur).call(ur,function(ar){ar.scene=ar.scene==="1"?"p2p":"team",ar.deletedTime=+ar.deletedTime,ar.time=+ar.time,pr.push(er.deleteLocalMsg(ar))}),er.options.onDeleteMsgSelf(ur),c.all(pr).then(function(){var ar=k(ur).call(ur,-1)[0].deletedTime;if(!(er.timetags.deleteMsgSelf>=ar))return er.timetags.deleteMsgSelf=ar,At.enable?At.updateDeleteMsgSelf(ar):void 0}).catch(function(ar){er.logger.error("syncDeleteMsgSelf error",ar)})}},ae.deleteLocalMsg=function(){var Ue=o(n.mark(function er(At,ur){var pr,ar,hr,Ne,or,ir,$e,tr,nr,Pt,Et;return n.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(At){kt.next=2;break}return kt.abrupt("return");case 2:if(hr=(ar=this).db,Ne=(ur=ur||{}).cbUpdateSession||y(pr=ar.updateSessionInDbWithNotify).call(pr,ar),this.revokeMsgUniqueCheck(At&&At.idClient),or=At.sessionId||At.scene+"-"+this.message.Message.getMsgTarget(At,this.account),ir=!1,$e=ar.getSessionInCache(or),ar.options.rollbackDelMsgUnread&&$e&&(tr=$e.ack||0,$e&&tr<At.time&&At.from!==ar.account&&$e.unread&&(ar.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread",$e.id,$e.unread),$e.unread=$e.unread-1,ir=!0)),$e&&$e.lastMsg&&$e.lastMsg.idClient==At.idClient&&(ar.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg",$e.id,$e.unread),$e.lastMsg=null,ir=!0),!hr.enable){kt.next=39;break}return nr=null,kt.next=16,hr.getMsgByIdClient(At.idClient);case 16:return kt.sent||ar.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB",At),ar.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ",At.idClient),kt.next=21,hr.deleteMsg(At.idClient);case 21:if(!$e||$e.lastMsg!==null){kt.next=26;break}return kt.next=24,hr.getMsgs({sessionId:or,limit:1});case 24:(Pt=kt.sent)&&Pt[0]&&(nr=Pt[0]);case 26:if($e||!ar.options.rollbackDelMsgUnread){kt.next=36;break}return ar.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB",or),kt.next=30,hr.getSession(or);case 30:if(Et=kt.sent){kt.next=33;break}return kt.abrupt("return");case 33:tr=($e=Et).ack||0,$e&&tr<At.time&&At.flow==="in"&&$e.unread&&(ar.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",Et.id,Et.unread),$e.unread=$e.unread-1,ir=!0);case 36:if($e&&$e.lastMsg===null&&nr&&(ar.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg",or,nr),$e.lastMsg=nr||null,ir=!0),!ir){kt.next=39;break}return kt.abrupt("return",Ne($e));case 39:if(hr.enable||!ir){kt.next=42;break}return ar.onUpdateSession($e),kt.abrupt("return");case 42:case"end":return kt.stop()}},er,this)}));return function(er,At){return Ue.apply(this,arguments)}}(),ae.deleteLocalMsgs=function(Ue){var er=this,At=er.db;return new c(function(ur,pr){if(function(ar){var hr=er.getSessionInCache(Ue.sessionId);if(hr&&Ue.updateSession){var Ne=hr.lastMsg;Ne&&(!Ue.start&&!Ue.end||Ne.time>Ue.start&&Ne.time<Ue.end)&&(hr.lastMsg=null,er.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is",Ue),At.enable||(er.onUpdateSession(hr),ar()))}}(ur),At.enable)return At.deleteMsgsBySessionId(Ue).then(function(){Ue.updateSession&&er.checkAndUpdateLocalSessionByMsg(Ue.sessionId),ur()},function(ar){return pr(ar)})})},ae.deleteLocalMsgsByTime=function(){var Ue=o(n.mark(function er(At){var ur,pr,ar,hr,Ne,or,ir,$e,tr,nr,Pt,Et,kt,rr;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return pr=(ur=this).db,cr.next=4,pr.getDeletedMsgsCountByTime(At);case 4:return ar=cr.sent,hr=0,Ne=[],cr.next=9,pr.deleteMsgsByTime(At);case 9:return At.deletedone&&At.deletedone({deletedMsgCount:ar}),cr.next=12,pr.getAllSessions();case 12:or=cr.sent,ir=he(or),cr.prev=14,ir.s();case 16:if(($e=ir.n()).done){cr.next=47;break}return tr=$e.value,nr=tr.id,Pt=!1,cr.next=22,pr.getSession(nr);case 22:if(Et=cr.sent){cr.next=25;break}return cr.abrupt("continue",45);case 25:return cr.next=27,pr.getMsgCountAfterAck({shouldCountNotifyUnread:ur.options.shouldCountNotifyUnread,sessionId:nr,ack:Et.ack||0});case 27:if(kt=cr.sent,Et.unread!==kt&&(Et.unread=kt,Pt=!0),!(Et.lastMsg&&Et.lastMsg.time>At.start&&Et.lastMsg.time<At.end)){cr.next=39;break}if(At.start!==0){cr.next=34;break}Et.lastMsg=null,cr.next=38;break;case 34:return cr.next=36,pr.getMsgs({sessionId:nr,limit:1});case 36:rr=cr.sent,Et.lastMsg=rr&&rr[0]?rr[0]:null;case 38:Pt=!0;case 39:if(!Pt){cr.next=45;break}return cr.next=42,pr.updateSession(Et);case 42:ur.sessionSet[nr]&&Ne.push(Et),hr++;case 45:cr.next=16;break;case 47:cr.next=52;break;case 49:cr.prev=49,cr.t0=cr.catch(14),ir.e(cr.t0);case 52:return cr.prev=52,ir.f(),cr.finish(52);case 55:return ur.onUpdateSessions(Ne),cr.abrupt("return",c.resolve({deletedMsgCount:ar,sessionUpdateCount:hr}));case 57:case"end":return cr.stop()}},er,this,[[14,49,52,55]])}));return function(er){return Ue.apply(this,arguments)}}()},function(t,r,e){var n=e(69),o=e(8),s=e(9),a=e(7),i=e(3),d=e(26),u=e(17),c=e(2),m=e(35).fn,v=e(0),g=e(151);m.splitSysMsgs=function(b,T){for(var k,y=b.length-1;y>=0;y--)k=b[y],g.isCustom(k)&&(n(b).call(b,y,1),T.push(k))},m.onOfflineSysMsgs=function(b,T){var k,y=this,A=o(k=b.content.sysMsgs).call(k,function(Y){return Y=s(g).call(g,Y),T&&(Y.filter=!0),Y});A=s(A).call(A),y.markSysMsgRead(A);var V=[];y.splitSysMsgs(A,V);var Ce,ie=T?"offlineFilterSysMsgs":"offlineSysMsgs",Oe=T?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(A.length){var he=y.putSysMsg(A,"offlineSysMsgs").then(function(Y){var ae;(A=Y).length&&(y.logger.info("sysmsg::onOfflineSysMsgs: ",ie,A.length,A&&o(A).call(A,function(Fe){return Fe.idServer})),y.syncResult[ie]=y.syncResult[ie]||[],y.syncResult[ie]=a(ae=y.syncResult[ie]).call(ae,A))}).catch(function(Y){return y.logger.error("sysMsg::onOfflineSysMsgs: ",Y),i.reject(Y)});he.cmd="sysMsgs",y.syncPromiseArray.push(he)}V.length&&(y.logger.info("sysmsg::onOfflineSysMsgs: ",Oe,o(V).call(V,function(Y){return Y.idServer})),y.syncResult[Oe]=y.syncResult[Oe]||[],y.syncResult[Oe]=a(Ce=y.syncResult[Oe]).call(Ce,V))},m.onSendSysMsg=function(b,T){var k=b.obj||{};k?(this.completeSysMsg(k),b.error?k.status="fail":k.status="success",k=s(g).call(g,k),T&&(b.obj.filter=!0),b.obj=k):this.logger.warn("onSendSysMsg::no obj")},m.completeSysMsg=function(b){return b.from=this.account,b},m.onSysMsg=function(b,T){var k=s(g).call(g,b.content.sysMsg);T&&(k.filter=!0),this.markSysMsgRead(k),g.isCustom(k)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(k)):this.syncing?(this.logger.info("sysmsg::onSysMsg:is in syncing ..."),this.unhandledSysMsgs.push(k)):this.handleSysMsg(k)},m.handleSysMsg=function(b){var T=this,k=b.type,y=b.from,A=b.serverex;T.sysMsgPromise=T.sysMsgPromise.then(function(){return T.putSysMsg(b,"onSysMsg")}).then(function(V){b=V[0]}).then(function(){if(b){var V,Ce=i.resolve();switch(k){case"addFriend":V={type:"addFriend",account:y},A&&(V.serverex=A),Ce=T.onFriendRequest(V);break;case"passFriendApply":V={type:"passFriendApply",account:y},Ce=T.onFriendRequest(V);break;case"deleteFriend":Ce=T.onDeleteFriend({account:y})}return V&&V.friend&&(b.friend=V.friend),Ce}}).then(function(){b&&(T.logger.info("sysmsg::handleSysMsg: ",k,v.pickAsString(b,["idServer","deletedIdClient","deletedIdServer"])),d(function(){T.options.onsysmsg(b)},0))})},m.putSysMsg=function(b,T){if(v.isArray(b)||(b=[b]),u(b[0]))return i.resolve(b);var k=this,y=k.db,A=y.enable,V=i.resolve(),Ce=[];return(V=(V=V.then(function(){return A?y.putSysMsg(b):b}).then(function(ie){var Oe=[];c(b).call(b,function(he){k.checkSysMsgUnique(he)&&Oe.push(he)}),b=Oe,Ce=A?ie:b})).then(function(){return k.getSysMsgUnread().then(function(ie){return Ce.length||((Ce=b).backward=!0),k.updateSysMsgUnread(Ce,ie,1).then(function(Oe){T==="offlineSysMsgs"&&(k.syncResult.sysMsgUnread=Oe),T==="onSysMsg"&&k.onUpdateSysMsgUnread(Oe)})})})).then(function(){return b})},m.checkSysMsgUnique=v.genCheckUniqueFunc("idServer"),m.getSysMsgUnread=function(){var b=this,T=b.db;return new i(function(k){T.enable?T.getSysMsgUnread().then(function(y){k(y)},function(){k(b.sysMsgUnread)}):k(b.sysMsgUnread)})},m.updateSysMsgUnread=function(b,T,k){if(v.isArray(b)||(b=[b]),!b.length)return i.resolve(T);T=T||{};var y,A=this.db;return c(b).call(b,function(V){(k>0&&!V.read||k<0&&V.read)&&(y=V.type,T[y]=(T[y]||0)+k)}),T=g.completeUnread(T),this.sysMsgUnread=T,A.enable&&!b.backward?A.updateSysMsgUnread(T):i.resolve(T)},m.reduceSysMsgUnread=function(b){var T=this;return T.getSysMsgUnread().then(function(k){return T.updateSysMsgUnread(b,k,-1)}).then(function(k){T.onUpdateSysMsgUnread(k)})},m.onUpdateSysMsgUnread=function(b){var T=this;d(function(){T.logger.info("sysmsg::onUpdateSysMsgUnread:",b),T.options.onupdatesysmsgunread(b)},0)},m.updateSysMsg=function(b){var T=this,k=T.db;(k.enable?k.updateSysMsg(b):i.resolve(b)).then(function(y){T.onUpdateSysMsg(y)})},m.onUpdateSysMsg=function(b){var T=this;d(function(){v.isArray(b)||(b=[b]),c(b).call(b,function(k){T.logger.info("sysmsg::onUpdateSysMsg:",k.idServer),T.options.onupdatesysmsg(k)})},0)},m.processUnsettledSysMsgs=function(){var b,T,k=this;c(b=k.unhandledSysMsgs).call(b,function(y){k.handleSysMsg(y)}),c(T=k.unhandledSysMsgsForDeletedMsgs).call(T,function(y){k.onMsgDeleted(y.packet,y.isSuperTeam)}),k.resetUnsettledSysMsgs()}},function(t,r,e){var n=e(754),o=e(58),s=e(2),a=e(6),i=e(15),d=e(9),u=e(3),c=e(8),m=e(87),v=e(17),g=e(41),b=e(5),T=e(7),k=e(59),y=e(60),A=e(61),V=e(62),Ce=e(47);function ie(pe,le){var xe=b(pe);if(k){var ue=k(pe);le&&(ue=v(ue).call(ue,function(Ve){return y(pe,Ve).enumerable})),xe.push.apply(xe,ue)}return xe}function Oe(pe){for(var le=1;le<arguments.length;le++){var xe,ue,Ve=arguments[le]!=null?arguments[le]:{};le%2?s(xe=ie(Object(Ve),!0)).call(xe,function(Ue){o(pe,Ue,Ve[Ue])}):A?V(pe,A(Ve)):s(ue=ie(Object(Ve))).call(ue,function(Ue){Ce(pe,Ue,y(Ve,Ue))})}return pe}var he=e(35).fn,Y=e(0),ae=e(152),Fe=e(40),ze=e(151);he.processSession=function(pe){if(!pe.error)switch(pe.cmd){case"getServerSessions":this.onGetServerSessions(pe);break;case"getServerSession":this.onGetServerSession(pe);break;case"updateServerSession":this.onUpdateServerSession(pe)}},he.onGetServerSessions=function(pe){var le=this,xe=pe.content&&pe.content.sessionReqTag,ue=pe.content&&pe.content.sessionList,Ve=[];s(ue).call(ue,function(Ue){var er,At;if(Ue.id=Ue.id.split("|").join("-"),a(er=Ue.id).call(er,"super_team")===0&&(Ue.id="superTeam"+i(At=Ue.id).call(At,10)),Ue.updateTime=+Ue.updateTime,Ue.lastMsg){var ur=Ue.lastMsgType==="1"?"sysMsg":"msg";Ve.push(le.parser.unserialize(JSON.parse(Ue.lastMsg),ur).then(function(pr){var ar;Ue.lastMsg=ur==="msg"?d(ar=le.message).call(ar,pr):d(ze).call(ze,pr)}))}}),pe.promise=u.all(Ve).then(function(){pe.obj={sessionList:ue,hasMore:xe.hasMore==="1"},xe.minTimestamp&&(pe.obj.minTimestamp=+xe.minTimestamp)})},he.onGetServerSession=function(pe){var le,xe=this,ue=pe.content&&pe.content.session;if(ue){var Ve;if(ue.id=ue.id.split("|").join("-"),a(le=ue.id).call(le,"super_team")===0&&(ue.id="superTeam"+i(Ve=ue.id).call(Ve,10)),ue.updateTime=+ue.updateTime,ue.lastMsg){var Ue=pe.content.session&&pe.content.session.lastMsgType==="1"?"sysMsg":"msg";pe.promise=xe.parser.unserialize(JSON.parse(ue.lastMsg),Ue).then(function(er){var At;ue.lastMsg=Ue==="msg"?d(At=xe.message).call(At,er):d(ze).call(ze,er),pe.obj=ue})}else pe.obj=ue}},he.onUpdateServerSession=function(pe){pe.obj={}},he.onSyncUpdateServerSession=function(pe){var le,xe=this,ue=this,Ve=pe.content&&pe.content.session;if(Ve){var Ue;Ve.id=Ve.id.split("|").join("-"),a(le=Ve.id).call(le,"super_team")===0&&(Ve.id="superTeam"+i(Ue=Ve.id).call(Ue,10)),Ve.updateTime=+Ve.updateTime,Ve.lastMsg?ue.parser.unserialize(JSON.parse(Ve.lastMsg),"msg").then(function(er){var At;Ve.lastMsg=d(At=ue.message).call(At,er),xe.options.onSyncUpdateServerSession(Y.simpleClone(Ve))}):this.options.onSyncUpdateServerSession(Y.simpleClone(Ve))}},he.mergeSession=function(pe){pe=Y.copyWithNull(pe);var le=this.sessionSet,xe=pe.id,ue=le[xe]||{},Ve=!1;return ae.isComplete(pe)?delete ue.isDeleted:ue.isDeleted&&(Ve=!0),le[xe]=Y.merge(ue,pe),pe=Ve?pe:le[xe],Y.undef(pe.unread)&&(pe.unread=0),pe},he.mergeSessions=function(pe){var le=this;return c(pe=pe||[]).call(pe,function(xe){return le.mergeSession(xe)})},he.onDeleteSessions=function(pe){var le;pe.obj=c(le=pe.obj.sessions).call(le,function(xe){return ae.parse(xe)})},he.onUpdateSession=function(pe){if(pe){if(pe=this.mergeSession(pe),pe=m(ae).call(ae,pe),ae.isComplete(pe))return this.logger.info("session::onUpdateSession: ".concat(pe.id),pe.id,Y.secureOutput("session",pe)),this.options.onupdatesessions?this.options.onupdatesessions([pe]):this.options.onupdatesession(pe),pe;this.logger.warn("session::onUpdateSession::session is not complete",Y.secureOutput("session",pe))}},he.onUpdateSessions=function(pe){var le=this;if(pe){pe=le.mergeSessions(pe),pe=c(pe).call(pe,function(Ve){return m(ae).call(ae,Ve)});var xe=v(pe).call(pe,function(Ve){return ae.isComplete(Ve)}),ue=v(pe).call(pe,function(Ve){return!ae.isComplete(Ve)});if(ue&&ue.length>0&&le.logger.warn("session::onUpdateSessions::sessions is not complete",c(ue).call(ue,function(Ve){return Ve.id}),Y.secureOutput("session",ue)),xe.length!==0)return le.logger.info("session::onUpdateSessions:",Y.secureOutput("session",xe)),le.options.onupdatesessions?le.options.onupdatesessions(xe):s(xe).call(xe,function(Ve){le.options.onupdatesession(Ve)}),xe;le.logger.warn("session::onUpdateSessions::completeSessions is empty")}},he.setCurrSession=function(pe){pe=""+pe,this.currSessionId=pe,this.logger.info("session::setCurrSession:",pe)},he.resetSessionUnread=function(pe){var le=pe.id;this.db.enable&&this.db.updateSession({id:le,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[le]&&(this.markMsgRead(this.sessionUnreadMsgs[le],!0),this.sessionUnreadMsgs[le]=[]),this.getSessionInCache(le)?this.onUpdateSession({id:le,unread:0}):this.onUpdateSession(Oe(Oe({},pe),{},{unread:0}))},he.resetSessionsUnread=function(pe){var le=this,xe=this.db;xe.enable&&c(pe).call(pe,function(Ve){xe.updateSession({id:Ve.id,unread:0})});var ue=!this.options.autoMarkRead&&this.sessionUnreadMsgs;pe=c(pe).call(pe,function(Ve){return ue&&le.sessionUnreadMsgs[Ve.id]&&(le.markMsgRead(le.sessionUnreadMsgs[Ve.id],!0),le.sessionUnreadMsgs[Ve.id]=[]),le.getSessionInCache(Ve.id)?{id:Ve.id,unread:0}:Oe(Oe({},Ve),{},{unread:0})}),this.onUpdateSessions(pe)},he.insertLocalSession=function(pe){var le=this,xe=le.db,ue=pe.scene+"-"+pe.to,Ve=le.getSessionInCache(ue);return Ve&&ae.isComplete(Ve)?u.reject(Fe.sessionExist({callFunc:"session::insertLocalSession",session:Ve})):(xe.enable?xe.getMsgs({sessionId:ue,limit:1}):u.resolve()).then(function(Ue){if(Y.isArray(Ue)&&Ue.length===1){var er=Ue[0];(Ve=ae.genSessionByMsg(er)).updateTime=er.time}else Ve={id:ue,scene:pe.scene,to:pe.to,updateTime:+pe.updateTime||+new Date,lastMsg:null};return le.onUpdateSession(Ve),xe.enable?xe.putSession(Ve):u.resolve(Ve)})},he.checkAndUpdateLocalSessionByMsg=function(pe){var le,xe=this.db,ue=this,Ve=this.options.syncSessionUnread&&pe!==this.currSessionId,Ue=xe.getMsgs({sessionId:pe,limit:1}),er=xe.getSession(pe).then(function(At){if(At)return le=g({},At),At.ack=At.ack||0,Ve?xe.getMsgs({sessionId:pe,start:At.ack}):u.resolve();ue.logger.error("can't find session that sessionId = ".concat(pe))});return u.all([Ue,er]).then(function(At){var ur,pr,ar=n(At,2),hr=ar[0],Ne=ar[1],or={id:pe};if(!le)return ue.logger.error("checkAndUpdateLocalSessionByMsg:can not find session",pe),u.resolve(200);if(ur=le&&!le.lastMsg?null:le.lastMsg.idClient,hr&&hr[0]?pr=(hr=hr[0]).idClient:(pr=null,hr=null),ur!==pr&&(or.lastMsg=hr),Ne!==void 0){var ir=0;s(Ne=Ne||[]).call(Ne,function($e){var tr;try{tr=ue.options.shouldCountNotifyUnread($e)}catch(nr){throw ue.logger.error("userOption:shouldCountNotifyUnread function error",nr),nr}$e.isUnreadable&&$e.flow==="in"&&($e.type!=="notification"||tr)&&ir++}),ir!==le.unread&&(or.unread=ir)}return b(or).length>1?(ue.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",Y.secureOutput("session",or)),xe.updateSession(or).then(function(){return ue.onUpdateSession(or)})):u.resolve(200)})},he.syncSessionsWithMoreRoaming=function(pe){var le=this,xe=pe&&pe.content&&pe.content.sessions;if(xe&&xe.length){var ue={0:"p2p",1:"team",5:"superTeam"};if(s(xe).call(xe,function(Ue){var er,At=Ue.to===le.options.account?Ue.from:Ue.to;Ue.scene=ue[Ue.scene],Ue.id=T(er="".concat(Ue.scene,"-")).call(er,At),Ue.time=+Ue.time}),this.db.enable){var Ve=this.db.putSessionsWithMoreRoaming(xe);Ve.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(Ve)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=xe:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},he.syncStickTopSessions=function(pe){var le=this,xe=this.db,ue=[],Ve=[],Ue=u.resolve(),er=pe.content.sessions||[];this.syncing&&this.syncResult?(s(er).call(er,function(At){var ur=At.id.split("|");ur[0]==="super_team"&&(ur[0]="superTeam"),At.id=ur.join("-"),At.scene=ur[0],At.to=ur[1],At.isTop=!0,ue.push(ur.join("-")),delete At.createTime,delete At.updateTime,xe.enable&&Ve.push(xe.putSession(At))}),xe.enable&&(Ue=xe.updateTimetag("stickTopSessions",pe.content.timetag)),Ue.then(function(){return xe.enable?xe.getStickTopSessions():[]}).then(function(At){if(pe.content.modify){var ur=[];s(At).call(At,function(pr){a(ue).call(ue,pr.id)>-1||(ur.push(pr.id),pr.isTop=!1,pr.topCustom="",Ve.push(xe.putSession(pr)))})}else le.syncResult.stickTopSessions=At;return u.all(Ve)}),this.syncResult.stickTopSessions=er,Ue.cmd="syncStickTopSessions",this.syncPromiseArray.push(Ue)):this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")},he.getSessionInCache=function(pe,le){var xe=this.sessionSet[pe];return!xe||xe.isDeleted&&!le?void 0:xe},he.deleteSessionInCache=function(pe,le){var xe=this;Y.isArray(pe)||(pe=[pe]),le?s(pe).call(pe,function(ue){xe.sessionSet[ue]&&(xe.sessionSet[ue].isDeleted=!0)}):s(pe).call(pe,function(ue){return delete xe.sessionSet[ue]}),this.logger.info("sessions::deleteSessionInCache::delete session done",pe,le)},he.updateSessionInCache=function(pe){return this.logger.info("session::updateSessionInCache: ".concat(pe.id),pe.id,pe),this.getSessionInCache(pe.id)?pe=this.mergeSession(pe):(this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(pe.id)),null)},he.updateSessionInDbWithNotify=function(pe,le){var xe=this;return new u(function(ue,Ve){var Ue=xe.db;if(xe.getSessionInCache(pe.id)){var er=u.resolve(),At=Y.filterObj(pe,"id lastMsg localCustom unread");Ue.enable&&(er=Ue.updateSession(At)),er.then(function(ur){return xe.onUpdateSession(ur,le)}).then(ue,function(ur){Ve({callFunc:"session::updateLocalSession",event:ur})})}else Ve(Fe.sessionNotExist({sessionId:pe.id,callFunc:"session::updateLocalSession"}))})}},function(t,r,e){var n=e(745);t.exports=function(o){if(n(o))return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(153),o=e(70);t.exports=function(s,a){var i=s==null?null:n!==void 0&&o(s)||s["@@iterator"];if(i!=null){var d,u,c,m,v=[],g=!0,b=!1;try{if(c=(i=i.call(s)).next,a===0){if(Object(i)!==i)return;g=!1}else for(;!(g=(d=c.call(i)).done)&&(v.push(d.value),v.length!==a);g=!0);}catch(T){b=!0,u=T}finally{try{if(!g&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(b)throw u}}return v}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(2),o=e(5),s=e(7),a=e(41),i=e(35).fn,d=e(0);i.syncSessionAck=function(u){var c,m=this;if(this.logger.info("syncSessionAck::",u.content),m.syncing&&m.syncResult){m.saveAck.p2pTeam=u.content.timetag;var v={};n(c=[[u.content.p2p,"p2p"],[u.content.team.m_map,"team"]]).call(c,function(g){var b,T=g[0],k=g[1];n(b=o(T)).call(b,function(y){var A,V;v[s(A="".concat(k,"-")).call(A,y)]=T[y];var Ce={id:s(V="".concat(k,"-")).call(V,y),ack:T[y]};m.cacheSyncedSession(Ce)})}),m.syncResult.ackMap?m.syncResult.ackMap=a(m.syncResult.ackMap,v):m.syncResult.ackMap=v}else m.logger.warn("syncSessionAck: not in syncing or no syncResult",m.syncing,!!m.syncResult)},i.syncSuperTeamSessionAck=function(u){var c,m=this;if(m.syncResult){m.saveAck.superTeam=u.content.timetag;var v={},g=u.content.superTeam.m_map;n(c=o(g)).call(c,function(b){v["superTeam-".concat(b)]=g[b];var T={id:"superTeam-".concat(b),ack:g[b]};m.cacheSyncedSession(T)}),m.syncResult.ackMap?m.syncResult.ackMap=a(m.syncResult.ackMap,v):m.syncResult.ackMap=v}},i.onMarkSessionAck=function(u){u.error||this.storeSessionAck(u.obj)},i.syncMarkSessionAck=function(u){this.storeSessionAck(u.content,!0)},i.storeSessionAck=function(u,c){var m;if(this.options.syncSessionUnread&&u){var v;switch(u.scene){case 0:v="p2p";break;case 1:v="team";break;case void 0:default:v="superTeam"}var g=s(m="".concat(v,"-")).call(m,u.to),b=u.timetag;if(b<=((this.getSessionInCache(g)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",b);else{var T={id:g,ack:b};this.mergeSession(T),this.logger.info("session::storeSessionAck:",d.secureOutput("session",T)),this.markUnreadBySessionAck({sessionId:g,ack:T.ack},c)}}},i.markUnreadBySessionAck=function(u,c){var m=u.sessionId,v=u.ack,g=this,b=g.db;if(b.enable)g.pushMsgTask(function(){return b.getMsgCountAfterAck({shouldCountNotifyUnread:g.options.shouldCountNotifyUnread,sessionId:m,ack:v}).then(function(ie){var Oe={id:m,unread:ie,ack:v};return g.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",Oe),g.syncing?g.cacheSyncedSession(Oe):c&&g.onUpdateSession(Oe),b.updateSession(Oe)}).catch(function(ie){g.logger.error("markUnreadBySessionAck::error",ie)})});else{var T=g.getSessionInCache(m);if(T){var k=T.unreadMsgs;if(k&&k.length){for(var y=0,A=[],V=k.length-1;V>=0;V--){var Ce=k[V];if(!(Ce.time>v))break;y++,A.push(Ce)}T.unreadMsgs=A,T.unread=y,g.logger.info("session::markUnreadBySessionAck: unread ".concat(y)),g.syncing?g.cacheSyncedSession(T):c&&g.onUpdateSession(T)}}}}},function(t,r,e){var n=e(35).fn;n.processChatroom=function(o){switch(o.cmd){case"getChatroomAddress":this.onChatroomAddress(o)}},n.onChatroomAddress=function(o){o.error||(o.obj.address=o.content.address)}},function(t,r,e){var n=e(35).fn;n.processQchat=function(o){switch(o.cmd){case"getQChatAddress":this.onQChatAddress(o)}},n.onQChatAddress=function(o){o.error||(o.obj.address=o.content.address)}},function(t,r,e){e(35).fn.processFilter=function(n){switch(n.cmd){case"sendFilterMsg":this.onSendMsg(n,!0);break;case"filterMsg":this.onMsg(n,!0);break;case"filterSysMsg":this.onSysMsg(n,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(n,!0)}}},function(t,r,e){var n=e(8),o=e(44),s=e(35).fn,a=e(0),i=o.clientTypeMap;function d(u){u=u||{};var c=a.copy(u);return c.clientType&&(c.clientType=i[c.clientType]||""),c.serverCustom&&(c.custom=JSON.parse(c.serverCustom),typeof c.custom[0]=="string"&&(c.custom=c.custom[0]),delete c.serverCustom),c}s.processEventService=function(u){var c=u.content,m=u.error,v=this.options||{};switch(m&&(m.callFunc="events::processsEventService",this.onCustomError("事件服务解包失败","EVENT_SERVICE_ERROR",m)),u.cmd){case"pushEvent":if(a.isFunction(v.onpushevents)){var g={msgEvents:[d(c.msgEvent)]};v.onpushevents(g)}break;case"pushEvents":if(a.isFunction(v.onpushevents)){var b=c.msgEvents;b={msgEvents:n(b).call(b,function(T){return d(T)})},v.onpushevents(b)}}}},function(t,r,e){var n=e(35).fn,o=e(0);n.processProxyService=function(s){var a=s.error;switch(a&&(a.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",a)),s.cmd){case"onProxyMsg":if(o.isFunction(this.options.onProxyMsg)){var i=s.content.proxyMsg||{};i.time&&(i.time=+i.time),this.options.onProxyMsg(i)}break;case"httpProxy":s.obj=s.content&&s.content.proxyTag}}},function(t,r,e){var n=e(9),o=e(8),s=e(0),a=function(y){this.account=y.account},i=a.prototype,d=i.Message=e(72),u=i.TextMessage=e(829),c=i.FileMessage=e(203),m=i.GeoMessage=e(833),v=i.NotificationMessage=e(834),g=i.CustomMessage=e(835),b=i.TipMessage=e(836),T=i.RobotMessage=e(837),k=i.G2Message=e(838);i.validScenes=d.validScenes,i.validTypes=d.validTypes,i.sceneMap=d.sceneMap,i.sceneReverseMap=d.sceneReverseMap,i.reverse=function(y){var A;switch(d.getType(y)){case"text":A=n(u).call(u,y);break;case"image":case"audio":case"video":case"file":A=n(c).call(c,y);break;case"geo":A=n(m).call(m,y);break;case"notification":A=n(v).call(v,y);break;case"custom":A=n(g).call(g,y);break;case"tip":A=n(b).call(b,y);break;case"g2":A=n(k).call(k,y);break;case"robot":A=n(T).call(T,y);break;default:A=n(d).call(d,y)}return d.setExtra(A,this.account),A},i.reverseMsgs=function(y,A){var V,Ce,ie=this;return o(y).call(y,function(Oe){return Oe=n(ie).call(ie,Oe),A&&((V=A.modifyObj)&&(Oe=s.merge(Oe,V)),Ce=A.mapper,s.isFunction(Ce)&&(Oe=Ce(Oe))),Oe})},t.exports=a},function(t,r,e){var n=e(18),o=e(9),s=e(72),a=e(0);function i(d){a.verifyOptions(d,"text","msg::TextMessage"),d.type="text",s.call(this,d)}i.prototype=n(s.prototype),i.reverse=function(d){return o(s).call(s,d)},t.exports=i},function(t,r,e){var n=e(18),o=e(203);function s(){}s.prototype=n(o.prototype),s.verifyFile=function(a,i){return!0},t.exports=s},function(t,r,e){var n=e(18),o=e(203);function s(){}s.prototype=n(o.prototype),s.verifyFile=function(){},t.exports=s},function(t,r,e){var n=e(18),o=e(203);function s(){}s.prototype=n(o.prototype),s.verifyFile=function(){},t.exports=s},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(72),i=e(0);function d(u){u.type="geo",i.verifyOptions(u,"geo","msg::GeoMessage"),i.verifyOptions(u.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),i.verifyParamType("geo.lng",u.geo.lng,"number","msg::GeoMessage"),i.verifyParamType("geo.lat",u.geo.lat,"number","msg::GeoMessage"),i.verifyParamType("geo.title",u.geo.title,"string","msg::GeoMessage"),a.call(this,u),this.attach=n(u.geo)}d.prototype=o(a.prototype),d.reverse=function(u){var c=s(a).call(a,u);return u.attach=u.attach?""+u.attach:"",c.geo=u.attach?JSON.parse(u.attach):{},c},t.exports=d},function(t,r,e){var n=e(18),o=e(9),s=e(8),a=e(170),i=e(0).notundef,d=e(72),u=e(147).IM,c=e(191),m=e(202),v={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function g(){}g.prototype=n(d.prototype),g.reverse=function(b){var T=o(d).call(d,b);if(b.attach=b.attach?""+b.attach:"",b.attach){var k=JSON.parse(b.attach);if(T.attach={type:v[k.id]||k.id},i(k.data)){var y,A,V=k.data;i(V.tinfo)&&(T.attach.team=o(c).call(c,u.syncUnserialize(V.tinfo,"team"),!0)),i(V.ids)&&(T.attach.accounts=V.ids),i(V.id)&&(T.attach.account=V.id),i(V.uinfos)&&(T.attach.users=s(y=V.uinfos).call(y,function(Ce){return o(m).call(m,u.syncUnserialize(Ce,"user"))})),i(V.mute)&&(T.attach.mute=+V.mute==1),i(V.attach)&&(T.attach.custom=V.attach),i(V.channel)&&(T.attach.channelId=V.channel),i(V.calltype)&&(T.attach.netcallType=V.calltype),i(V.duration)&&(T.attach.duration=V.duration),i(V.time)&&(T.attach.time=V.time),i(V.from)&&(T.attach.from=V.from),i(V.ext)&&(T.attach.ext=V.ext),T.attach.accounts&&T.attach.accounts.length<=2&&T.from===T.to&&a(A=T.attach.accounts).call(A,function(Ce){if(Ce!==T.to)return T.to=Ce,!0})}}else T.attach={};return T},t.exports=g},function(t,r,e){var n=e(18),o=e(9),s=e(72),a=e(0);function i(d){a.verifyOptions(d,"content","msg::CustomMessage"),d.type="custom",s.call(this,d),this.attach=d.content}i.prototype=n(s.prototype),i.reverse=function(d){var u=o(s).call(s,d);return u.content=d.attach,u},t.exports=i},function(t,r,e){var n=e(18),o=e(9),s=e(72),a=e(0);function i(d){a.verifyOptions(d,"tip","msg::TipMessage"),d.type="tip",s.call(this,d),this.body=d.tip}i.prototype=n(s.prototype),i.reverse=function(d){var u=o(s).call(s,d);return u.text="",u.tip=d.body,d.attach&&(u.attach=d.attach),u},t.exports=i},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(8),i=e(72),d=e(0),u={welcome:"00",text:"01",link:"03"},c={"01":"text","02":"image","03":"answer",11:"template"};function m(v){d.verifyOptions(v,"content","msg::RobotMessage"),d.undef(v.robotAccid)&&(v.robotAccid=v.to);var g=v.content;switch(g.type){case"welcome":d.undef(v.body)&&(this.body="欢迎消息");break;case"text":d.verifyOptions(g,"content","msg::RobotMessage"),d.undef(v.body)&&(this.body=g.content);break;case"link":d.verifyOptions(g,"target","msg::RobotMessage")}g.type&&(g.type=u[g.type]),g={param:g,robotAccid:v.robotAccid},this.attach=n(g),v.type="robot",i.call(this,v)}m.prototype=o(i.prototype),m.reverse=function(v){var g=s(i).call(i,v);if(g.type==="robot"){var b=JSON.parse(v.attach);if(b.param&&(b.param.type=c[b.param.type]||"unknown"),b.robotMsg){var T=(b=d.merge(b,b.robotMsg)).message;b.flag==="bot"?b.message=a(T).call(T,function(k){return k.type=c[k.type]||"unknown",k}):b.flag,delete b.robotMsg}g.content=b}return g},t.exports=m},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(72),i=e(0);function d(u){i.verifyOptions(u,"attach","msg::G2Message"),u.type="g2",a.call(this,u),this.attach=n(u.attach)}d.prototype=o(a.prototype),d.reverse=function(u){var c=s(a).call(a,u);return u.attach&&(c.attach=JSON.parse(u.attach)),c},t.exports=d},function(t,r,e){var n=e(58),o=e(102),s=e(25),a=e(103),i=e(8),d=e(17),u=e(6),c=e(3),m=e(2),v=e(41),g=e(5),b=e(59),T=e(60),k=e(61),y=e(62),A=e(47);function V(ae,Fe){var ze=g(ae);if(b){var pe=b(ae);Fe&&(pe=d(pe).call(pe,function(le){return T(ae,le).enumerable})),ze.push.apply(ze,pe)}return ze}function Ce(ae){for(var Fe=1;Fe<arguments.length;Fe++){var ze,pe,le=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?m(ze=V(Object(le),!0)).call(ze,function(xe){n(ae,xe,le[xe])}):k?y(ae,k(le)):m(pe=V(Object(le))).call(pe,function(xe){A(ae,xe,T(le,xe))})}return ae}var ie=e(39).fn,Oe=e(0),he=Oe.isArray,Y=e(150);ie.mergeObjArray=function(ae,Fe,ze){return ae||(ae=[]),Fe?(he(Fe)||(Fe=[Fe]),Fe.length?(ze=ze||{},Oe.mergeObjArray(ae,Fe,ze)):ae):ae},ie.cutObjArray=function(ae,Fe,ze){return ae&&Fe?(he(Fe)||(Fe=[Fe]),Fe.length?(ze=ze||{},Oe.cutObjArray(ae,Fe,ze)):ae):ae},ie.mergeLoginPorts=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"deviceId"})},ie.cutLoginPorts=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"deviceId",sortPath:"type"})},ie.mergeRelations=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"account"})},ie.cutRelations=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"account"})},ie.findRelation=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"account",value:Fe})},ie.mergeFriends=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"account"})},ie.cutFriends=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"account"})},ie.cutFriendsByAccounts=function(ae,Fe){he(Fe)||(Fe=[Fe]);var ze=i(Fe).call(Fe,function(pe){return{account:pe}});return this.cutFriends(ae,ze)},ie.findFriend=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"account",value:Fe})},ie.mergeUsers=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"account"})},ie.findUser=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"account",value:Fe})},ie.mergeTeams=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"teamId"})},ie.cutTeams=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"teamId"})},ie.findTeam=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"teamId",value:Fe})},ie.assembleTeamOwner=Y.assembleOwner,ie.assembleTeamMembers=Y.assembleMembers,ie.genTeamMemberId=Y.genId,ie.mergeTeamMembers=function(ae,Fe){return this.mergeObjArray(ae,Fe)},ie.cutTeamMembers=function(ae,Fe){return this.cutObjArray(ae,Fe)},ie.cutTeamMembersByAccounts=function(ae,Fe,ze){he(ze)||(ze=[ze]);var pe=Y.assembleMembers({teamId:Fe},ze);return this.cutTeamMembers(ae,pe)},ie.findTeamMember=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"id",value:Fe})},ie.mergeSessions=function(ae,Fe){return this.mergeObjArray(ae,Fe,{sortPath:"updateTime",desc:!0})},ie.cutSessions=function(ae,Fe){return this.cutObjArray(ae,Fe)},ie.cutSessionsByIds=function(ae,Fe){he(Fe)||(Fe=[Fe]);var ze=i(Fe).call(Fe,function(pe){return{id:pe}});return this.cutSessions(ae,ze)},ie.findSession=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"id",value:Fe})},ie.mergeMsgs=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"idClient",sortPath:"time"})},ie.cutMsgs=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"idClient"})},ie.cutMsgsByIdClients=function(ae,Fe){he(Fe)||(Fe=[Fe]);var ze=i(Fe).call(Fe,function(pe){return{idClient:pe}});return this.cutMsgs(ae,ze)},ie.findMsg=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"idClient",value:Fe})},ie.mergeSysMsgs=function(ae,Fe){return this.mergeObjArray(ae,Fe,{keyPath:"idServer",desc:!0})},ie.cutSysMsgs=function(ae,Fe){return this.cutObjArray(ae,Fe,{keyPath:"idServer"})},ie.cutSysMsgsByIdServers=function(ae,Fe){he(Fe)||(Fe=[Fe]);var ze=i(Fe).call(Fe,function(pe){return{idServer:pe}});return this.cutSysMsgs(ae,ze)},ie.findSysMsg=function(ae,Fe){return Oe.findObjInArray(ae,{keyPath:"idServer",value:Fe})},ie.searchLocal=function(ae){if(Oe.verifyOptions(ae,"keyword","searchLocal"),this.db.enable){var Fe,ze=this,pe=this.db,le=ae.keyword+"",xe=["account","nick","alias"],ue=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],Ve="",Ue=ae.keyPath;switch(Ue?(Ve=(Ue=(Ue+"").split(".")).shift(),Ue=Ue.join(".")):Ve="all",Ve){case"user":Ue&&(xe=d(xe).call(xe,function(ir){return ir===Ue||u(ir).call(ir,Ue+".")===0})),ur(xe).then(function(ir){ae.done(null,{sessions:[],users:ir})});break;case"session":Ue&&(ue=d(ue).call(ue,function(ir){return ir===Ue||u(ir).call(ir,Ue+".")===0})),er(ue,!Ue||u(Ue).call(Ue,"target")>-1).then(function(ir){ae.done(null,{sessions:ir,users:[]})});break;case"all":ar().then(function(){c.all([er(ue,!0),ur(xe)]).then(function(ir){ae.done(null,{sessions:ir[0],users:ir[1]})})});break;default:ae.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else ae.done(null,{sessions:[],users:[],msg:"no db"});function er(ir,$e){return At.apply(this,arguments)}function At(){return(At=a(o.mark(function ir($e,tr){var nr;return o.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return nr=tr?[pe.getSessions(),ar(),pe.getTeams(),pe.getSuperTeams()]:[pe.getSessions()],Pt.abrupt("return",c.all(nr).then(function(Et){var kt,rr=Et[0]||[],cr={p2p:Et[1]||[],team:Et[2]||[],superTeam:Et[3]||[]},mr={};return tr&&(m(kt=g(cr)).call(kt,function(yr){var Tr;m(Tr=cr[yr]).call(Tr,function(Ir){var kr=Ir.teamId||Ir.account;mr[yr+"-"+kr]=Ir})}),m(rr).call(rr,function(yr){yr.target=mr[yr.id]})),Ne($e,rr)}));case 2:case"end":return Pt.stop()}},ir)}))).apply(this,arguments)}function ur(ir){return pr.apply(this,arguments)}function pr(){return(pr=a(o.mark(function ir($e){var tr;return o.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return nr.next=2,ar();case 2:return tr=nr.sent,nr.abrupt("return",Ne($e,tr));case 4:case"end":return nr.stop()}},ir)}))).apply(this,arguments)}function ar(){return hr.apply(this,arguments)}function hr(){return(hr=a(o.mark(function ir(){var $e,tr;return o.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(!Fe){nr.next=2;break}return nr.abrupt("return",Fe);case 2:return nr.next=4,ze.db.getFriends();case 4:if(nr.t0=nr.sent,nr.t0){nr.next=7;break}nr.t0=[];case 7:return $e=nr.t0,tr=ze.protocol.userSet||{},Fe=i($e).call($e,function(Pt){return Ce(Ce({},Pt),tr[Pt.account])}),nr.abrupt("return",Fe);case 11:case"end":return nr.stop()}},ir)}))).apply(this,arguments)}function Ne(ir,$e){var tr=[];return m($e).call($e,function(nr){for(var Pt=0;Pt<ir.length;Pt++){var Et=or(nr,ir[Pt].split("."));if(Et&&u(Et).call(Et,le)>-1){tr.push(v({},nr));break}}}),tr}function or(ir,$e){if(s(ir)==="object"&&ir)return $e.length===1?ir[$e[0]]:or(ir[$e.shift()],$e)}}},function(t,r,e){var n=e(15),o=e(39).fn,s=e(0),a=e(23).reportAPI;o.kick=function(i){var d;(i=i||{}).done=a({instance:this,className:"NIMFn",funcName:"kick",done:i.done}),s.verifyOptions(i,"deviceIds","link::kick"),this.processCallback(i),this.sendCmd("kick",{deviceIds:n(d=i.deviceIds).call(d,0)},i.callback)},o.disconnect=function(i){(i=i||{}).done=a({instance:this,className:"NIMFn",funcName:"disconnect",done:i.done}),i=i||{},this.protocol.disconnect(i.done)}},function(t,r,e){var n=e(39).fn,o=e(0),s=e(23).reportAPI;n.markInBlacklist=function(a){(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"markInBlacklist",done:a.done}),o.verifyOptions(a,"account isAdd","relation::markInBlacklist"),o.verifyParamType("isAdd",a.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(a),this.sendCmd("markInBlacklist",{account:a.account,isAdd:a.isAdd},a.callback)},n.addToBlacklist=function(a){return(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"addToBlacklist",done:a.done}),a.isAdd=!0,this.markInBlacklist(a)},n.removeFromBlacklist=function(a){return(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"removeFromBlacklist",done:a.done}),a.isAdd=!1,this.markInBlacklist(a)},n.markInMutelist=function(a){(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"markInMutelist",done:a.done}),o.verifyOptions(a,"account","relation::markInMutelist"),o.verifyParamType("isAdd",a.isAdd,"boolean","relation::markInMutelist"),this.processCallback(a),this.sendCmd("markInMutelist",{account:a.account,isAdd:a.isAdd},a.callback)},n.addToMutelist=function(a){return(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"addToMutelist",done:a.done}),a.isAdd=!0,this.markInMutelist(a)},n.removeFromMutelist=function(a){return(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"removeFromMutelist",done:a.done}),a.isAdd=!1,this.markInMutelist(a)},n.getRelations=function(a){(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"getRelations",done:a.done});var i=this,d=i.db,u=0;function c(){i.sendCmd("getRelations",{timetag:u,NOTSTORE:"timetag"},a.callback)}a=o.verifyOptions(a),i.processCallback(a),d.enable?d.getRelationsTimetag().then(function(m){u=m,c()},c):c()}},function(t,r,e){var n=e(7),o=e(2),s=e(6),a=e(39).fn,i=e(0),d=i.objs2accounts,u=e(202),c=e(23).reportAPI;a.updateMyInfo=function(m){(m=m||{}).done=c({instance:this,className:"NIMFn",funcName:"updateMyInfo",done:m.done}),i.verifyOptions(m),this.processCallback(m),m.user=new u(m),delete m.user.account,this.sendCmd("updateMyInfo",{user:m.user,antispamTag:{antiSpamBusinessId:m.antiSpamBusinessId},single:!0},m.callback)},a.getMyInfo=function(m){return(m=m||{}).done=c({instance:this,className:"NIMFn",funcName:"getMyInfo",done:m.done}),(m=m||{}).account=this.account,this.getUser(m)},a.getUser=function(m){(m=m||{}).done=c({instance:this,className:"NIMFn",funcName:"getUser",done:m.done});var v,g=this,b=g.db;function T(){g.sendCmd("getUsers",{accounts:[v],single:!0},m.callback)}i.verifyOptions(m,"account","user::getUser"),g.processCallback(m),m.cbaop=function(k,y){if(!k)return y=y[0]||null,g.logger.info("api::getUser: cbaop ".concat(v)),y},v=m.account,m.sync?T():b.enable?b.getUser(v).then(function(k){k?m.done(null,k):T()},T):T()},a.getUsers=function(m){(m=m||{}).done=c({instance:this,className:"NIMFn",funcName:"getUsers",done:m.done});var v,g=this,b=g.db,T=[];function k(){g.sendCmd("getUsers",{accounts:v,single:!0},m.callback)}i.verifyOptions(m,"accounts","user::getUsers"),i.verifyParamType("accounts",m.accounts,"array","user::getUsers"),g.processCallback(m),m.cbaop=function(y,A){if(!y)return A=n(A).call(A,T),g.logger.info("api::getUsers: cbaop ".concat(v)),A},v=i.deduplicate(m.accounts),i.verifyArrayMax("accounts",m.accounts,150,"user::getUsers"),m.sync?k():b.enable?b.getUsers(v).then(function(y){if(y&&y.length===v.length)m.done(null,y);else{T=y;var A=d(y),V=[];o(v).call(v,function(Ce){s(A).call(A,Ce)===-1&&V.push(Ce)}),v=V,k()}},k):k()}},function(t,r,e){var n=e(138),o=e(39).fn,s=e(0),a=s.notundef,i=e(750),d=e(23).reportAPI;o.friendRequest=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"friendRequest",done:u.done}),s.verifyOptions(u,"type account","friend::friendRequest"),s.verifyParamValid("type",u.type,i.validTypes(),"friend::friendRequest"),this.processPs(u),this.processCallback(u);var c={account:u.account,type:i.getByteFromType(u.type),ps:u.ps};a(u.idServer)&&(c.idServer=u.idServer),this.sendCmd("friendRequest",c,u.callback)},o.addFriend=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"addFriend",done:u.done}),u.type="addFriend",this.friendRequest(u)},o.applyFriend=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"applyFriend",done:u.done}),u.type="applyFriend",this.friendRequest(u)},o.passFriendApply=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"passFriendApply",done:u.done}),s.verifyOptions(u,"idServer","friend::passFriendApply"),u.type="passFriendApply",this.friendRequest(u)},o.rejectFriendApply=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"rejectFriendApply",done:u.done}),s.verifyOptions(u,"idServer","friend::rejectFriendApply"),u.type="rejectFriendApply",this.friendRequest(u)},o.deleteFriend=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"deleteFriend",done:u.done}),s.verifyOptions(u,"account","friend::deleteFriend");var c=u.delAlias===!0;this.processCallback(u),this.sendCmd("deleteFriend",{account:u.account,delFriendParams:{delAlias:c?1:0}},u.callback)},o.updateFriend=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"updateFriend",done:u.done}),this.processCallback(u);var c=new i(u);this.sendCmd("updateFriend",{friend:c,single:!0},u.callback)},o.getFriends=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"getFriends",done:u.done});var c=this.db;s.validate({timetag:{type:"number",required:!1}},u,"friend::getFriends"),this.processCallback(u),c.enable?c.getFriends({updateTime:u.updateTime||0}).then(function(m){(m=n(m).call(m,function(v,g){return v.updateTime-g.updateTime})).invalid=[],u.done(null,m)}):this.sendCmd("getFriends",{timetag:u.updateTime||0,NOTSTORE:"timetag"},u.callback)},o.isMyFriend=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"isMyFriend",done:u.done});var c=this.db;s.validate({account:{type:"string",allowEmpty:!1,require:!0}},u),this.processCallback(u),c.enable||u.done(null,!1),c.getFriend(u.account).then(function(m){m&&m.valid===!0?u.done(null,!0):u.done(null,!1)})},o.isUserInBlackList=function(u){(u=u||{}).done=d({instance:this,className:"NIMFn",funcName:"isUserInBlackList",done:u.done});var c=this.db;s.validate({account:{type:"string",allowEmpty:!1,require:!0}},u),this.processCallback(u),c.enable||u.done(null,!1),c.getUserFromBlackList(u.account).then(function(m){m&&m.account?u.done(null,!0):u.done(null,!1)})}},function(t,r,e){var n=e(39).fn,o=e(23).reportAPI;n.getRobots=function(s){(s=s||{}).done=o({instance:this,className:"NIMFn",funcName:"getRobots",done:s.done}),this.logger.warn("this api will be abandon"),(s=s||{}).type="getRobots",this.processCallback(s),this.sendCmd("sync",{sync:{robots:0}},s.callback)}},function(t,r,e){var n=e(15),o=e(8),s=e(17),a=e(3),i=e(39).fn,d=e(0),u=d.undef,c=e(191),m=e(150),v=e(23).reportAPI;i.createTeam=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"createTeam",done:g.done}),d.verifyOptions(g,"type name","team::createTeam"),u(g.accounts)?g.accounts=[]:d.verifyParamType("accounts",g.accounts,"array","team::createTeam"),g.action="create",this.processPs(g),this.processCallback(g),g.team=new c(g);var T={team:g.team,accounts:n(b=g.accounts).call(b,0),ps:g.ps,antispamTag:{antiSpamBusinessId:g.antiSpamBusinessId}};this.sendCmd("createTeam",T,g.callback)},i.updateTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateTeam",done:g.done}),d.verifyOptions(g,"teamId","team::updateTeam"),g.action="update",this.processCallback(g),g.team=new c(g),this.sendCmd("updateTeam",{team:g.team,antispamTag:{antiSpamBusinessId:g.antiSpamBusinessId},single:!0},g.callback)},i.addTeamMembers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"addTeamMembers",done:g.done}),d.verifyOptions(g,"teamId accounts","team::addTeamMembers"),d.verifyParamType("accounts",g.accounts,"array","team::addTeamMembers"),this.processPs(g),d.notexist(g.custom)&&(g.custom=""),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0),ps:g.ps,attach:g.custom};this.sendCmd("addTeamMembers",T,g.callback)},i.removeTeamMembers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"removeTeamMembers",done:g.done}),d.verifyOptions(g,"teamId accounts","team::removeTeamMembers"),d.verifyParamType("accounts",g.accounts,"array","team::removeTeamMembers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("removeTeamMembers",T,g.callback)},i.acceptTeamInvite=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"acceptTeamInvite",done:g.done}),d.verifyOptions(g,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,type:"teamInvite"};this.sendCmd("acceptTeamInvite",b,g.callback)},i.rejectTeamInvite=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"rejectTeamInvite",done:g.done}),d.verifyOptions(g,"idServer teamId from","team::rejectTeamInvite"),this.processPs(g),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,ps:g.ps,type:"teamInvite"};this.sendCmd("rejectTeamInvite",b,g.callback)},i.applyTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"applyTeam",done:g.done}),d.verifyOptions(g,"teamId","team::applyTeam"),this.processPs(g),this.processCallback(g);var b={teamId:g.teamId,ps:g.ps};this.sendCmd("applyTeam",b,g.callback)},i.passTeamApply=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"passTeamApply",done:g.done}),d.verifyOptions(g,"idServer teamId from","team::passTeamApply"),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,type:"applyTeam"};this.sendCmd("passTeamApply",b,g.callback)},i.rejectTeamApply=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"rejectTeamApply",done:g.done}),d.verifyOptions(g,"idServer teamId from","team::rejectTeamApply"),this.processPs(g),this.processCallback(g);var b={idServer:g.idServer,teamId:g.teamId,from:g.from,ps:g.ps,type:"applyTeam"};this.sendCmd("rejectTeamApply",b,g.callback)},i.addTeamManagers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"addTeamManagers",done:g.done}),d.verifyOptions(g,"teamId accounts","team::addTeamManagers"),d.verifyParamType("accounts",g.accounts,"array","team::addTeamManagers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("addTeamManagers",T,g.callback)},i.removeTeamManagers=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"removeTeamManagers",done:g.done}),d.verifyOptions(g,"teamId accounts","team::removeTeamManagers"),d.verifyParamType("accounts",g.accounts,"array","team::removeTeamManagers"),this.processCallback(g);var T={teamId:g.teamId,accounts:n(b=g.accounts).call(b,0)};this.sendCmd("removeTeamManagers",T,g.callback)},i.updateInfoInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateInfoInTeam",done:g.done}),d.verifyOptions(g,"teamId","team::updateInfoInTeam"),this.processCallback(g),this.sendCmd("updateInfoInTeam",{teamMember:new m(g),single:!0},g.callback)},i.updateNickInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateNickInTeam",done:g.done}),d.verifyOptions(g,"teamId account","team::updateNickInTeam"),this.processCallback(g),this.sendCmd("updateNickInTeam",{teamMember:new m(g),single:!0},g.callback)},i.updateMuteStateInTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateMuteStateInTeam",done:g.done}),d.verifyOptions(g,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(g),g.mute=g.mute?1:0,this.sendCmd("updateMuteStateInTeam",g)},i.getMutedTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getMutedTeamMembers",done:g.done}),d.verifyOptions(g,"teamId","team::getMutedTeamMembers"),this.processCallback(g),this.sendCmd("getMutedTeamMembers",g)},i.leaveTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"leaveTeam",done:g.done}),d.verifyOptions(g,"teamId","team::leaveTeam"),this.processCallback(g);var b={teamId:g.teamId};this.sendCmd("leaveTeam",b,g.callback)},i.transferTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"transferTeam",done:g.done}),d.verifyOptions(g,"teamId account leave","team::transferTeam"),d.verifyParamType("leave",g.leave,"boolean","team::transferTeam"),this.processCallback(g);var b={teamId:g.teamId,account:g.account,leave:g.leave};this.sendCmd("transferTeam",b,g.callback)},i.dismissTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"dismissTeam",done:g.done}),d.verifyOptions(g,"teamId","team::dismissTeam"),this.processCallback(g);var b={teamId:g.teamId};this.sendCmd("dismissTeam",b,g.callback)},i.getTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeam",done:g.done});var b,T=this,k=T.db;function y(){T.sendCmd("getTeam",{teamId:g.teamId},g.callback)}d.verifyOptions(g,"teamId","team::getTeam"),T.processCallback(g),g.cbaop=function(A){A||T.logger.info("api::getTeam: cbaop ".concat(b))},b=g.teamId,k.enable&&!g.sync?k.getTeam(b).then(function(A){A&&A.validToCurrentUser?(T.logger.log("api::getTeam: db.getTeam ".concat(b)),g.done(null,A)):y()},y):y()},i.getTeams=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeams",done:g.done});var b=this,T=b.db,k=0;function y(){b.sendCmd("getTeams",{timetag:k,NOTSTORE:"timetag"},g.callback)}d.verifyOptions(g),b.processCallback(g),T.enable?T.getTeamsTimetag().then(function(A){k=A,y()},y):y()},i.getTeamsById=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamsById",done:g.done}),d.verifyOptions(g,"teamIds","teams::getTeamsById"),this.processCallback(g),this.sendCmd("getTeamsById",{teamIds:g.teamIds},g.callback)},i.getTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMembers",done:g.done});var b=this;d.verifyOptions(g,"teamId","team::getTeamMembers"),b.processCallback(g),b.sendCmd("getTeamMembers",{teamId:g.teamId,timetag:0,NOTSTORE:"timetag"},g.callback)},i.getTeamMemberByTeamIdAndAccount=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMemberByTeamIdAndAccount",done:g.done});var b=this;d.verifyParamType("teamId",g.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),d.verifyOptions(g,"account","team::getTeamMemberByTeamIdAndAccount"),b.processCallback(g),b.sendCmd("getTeamMembers",{teamId:g.teamId,timetag:0,NOTSTORE:"timetag"},function(T,k,y){var A={};if(k&&k.members&&k.members.length){for(var V=0;V<k.members.length;V++)if(k.members[V].account===g.account){A[g.account]=k.members[V];break}}g.callback(T,A,y)})},i.getTeamMemberInvitorAccid=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMemberInvitorAccid",done:g.done}),d.verifyParamType("teamId",g.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),u(g.accounts)||(d.verifyParamType("accounts",g.accounts,"array","team::getTeamMemberInvitorAccid"),g.accounts.length>200&&d.onParamError("accounts 参数数组长度不能超过200","team::getTeamMemberInvitorAccid"));var b,T={teamId:g.teamId};g.accounts.length&&(T.accounts=n(b=g.accounts).call(b,0)),this.processCallback(g),this.sendCmd("getTeamMemberInvitorAccid",T,function(k,y,A){g.callback(k,A&&A.accountsMap||{})})},i.notifyForNewTeamMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"notifyForNewTeamMsg",done:g.done}),d.verifyOptions(g,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(g.teamIds).then(function(b){g.done(b.error||null,o(b),b.miss)},function(b){g.done(b)})},i.getMyTeamMembers=function(g){v({instance:this,className:"NIMFn",funcName:"getMyTeamMembers",hasCallback:!1}),d.verifyOptions(g,"teamIds","team::getMyTeamMembers");var b=this.processCallbackPromise(g);return this.sendCmd("getMyTeamMembers",g),b},i.getLocalTeams=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalTeams",done:g.done});var b,T=this.db,k=[];function y(){g.teams=k,g.done(b,g)}d.verifyOptions(g,"teamIds","team::getLocalTeams"),d.verifyParamType("teamIds",g.teamIds,"array","team::getLocalTeams"),this.processCallback(g),T.enable?T.getTeamsByTeamIds(g.teamIds).then(function(A){k=s(A).call(A,function(V){return!!V}),y()},function(A){b=A,y()}):y()},i.getLocalTeamMembers=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalTeamMembers",done:g.done});var b,T=this.db,k=[];function y(){g.members=k,g.done(b,g)}d.verifyOptions(g,"teamId accounts","team::getLocalTeamMembers"),d.verifyParamType("accounts",g.accounts,"array","team::getLocalTeamMembers"),this.processCallback(g),T.enable?T.getInvalidTeamMembers(g.teamId,g.accounts).then(function(A){k=s(A).call(A,function(V){return!!V}),y()},function(A){b=A,y()}):y()},i.deleteLocalTeam=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteLocalTeam",done:g.done});var b,T=this.db;function k(){g.done(b,g)}d.verifyOptions(g,"teamId","team::deleteLocalTeam"),this.processCallback(g),T.enable?T.deleteTeam(g.teamId).then(function(){k()},function(y){b=y,k()}):k()},i.muteTeamAll=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"muteTeamAll",done:g.done}),d.verifyOptions(g,"teamId mute","team::muteTeamAll"),g.mute=g.mute?1:0,this.processCallback(g),this.sendCmd("muteTeamAll",g)},i.sendTeamMsgReceipt=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"sendTeamMsgReceipt",done:g.done}),d.verifyOptions(g,"teamMsgReceipts","team::sendTeamMsgReceipt"),g.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceipt：teamMsgReceipts length over 50"):(this.processCallback(g),this.sendCmd("sendTeamMsgReceipt",g))},i.getTeamMsgReads=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMsgReads",done:g.done}),d.verifyOptions(g,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(g),this.sendCmd("getTeamMsgReads",g)},i.getTeamMsgReadAccounts=function(g){var b=this;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getTeamMsgReadAccounts",done:g.done});var T,k=this;d.verifyOptions(g,"teamMsgReceipt","team::getTeamMsgReadAccounts"),g.callback=function(y,A,V){y&&T?(A=A||{teamMsgReceipt:g.teamMsgReceipt},g.done(y,A,{teamMsgReceipt:g.teamMsgReceipt,unreadAccounts:T.unreadAccounts,readAccounts:T.readAccounts})):g.done(y,A,V)},this.db.enable&&g.teamMsgReceipt.idClient?this.db.getMsgReadDetail(g.teamMsgReceipt.idClient).then(function(y){if(T=y,!y)return a.reject("no record");if(y.unreadAccounts&&y.unreadAccounts.length>0)return a.reject("unreadAccounts.length > 0");var A={teamMsgReceipt:g.teamMsgReceipt,unreadAccounts:y.unreadAccounts,readAccounts:y.readAccounts};k.logger.info("getTeamMsgReadAccounts from db"),g.done(null,{teamMsgReceipt:g.teamMsgReceipt},A)}).catch(function(y){b.logger.warn("db.getMsgReadDetail invalid",y),k.sendCmd("getTeamMsgReadAccounts",g)}):k.sendCmd("getTeamMsgReadAccounts",g)}},function(t,r,e){var n=e(754),o=e(3),s=e(9),a=e(24),i=e(15),d=e(8),u=e(2),c=e(7),m=e(39).fn,v=e(0),g=v.undef,b=e(306),T=e(201),k=e(23).reportAPI;function y(A){var V=this.db;if(!V.enable)return o.resolve({valid:!1});var Ce=V.getSuperTeam(A),ie=V.getSuperTeamMembersTimetag(A);return o.all([Ce,ie]).then(function(Oe){var he=n(Oe,2),Y=he[0],ae=he[1],Fe=Y&&Y.memberUpdateTime,ze={timetag:ae=ae||0};return Fe&&ae>=Fe&&(ze.valid=!0),o.resolve(ze)}).catch(function(){return o.resolve({timetag:0})})}m.addSuperTeamMembers=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"addSuperTeamMembers",done:A.done}),v.verifyOptions(A,"teamId accounts","superTeam::addSuperTeamMembers"),v.verifyParamType("accounts",A.accounts,"array","superTeam::addSuperTeamMembers");var V=v.deduplicate(A.accounts);this.processPs(A),this.processCallback(A);var Ce={teamId:A.teamId,accounts:V,ps:A.ps};this.sendCmd("addSuperTeamMembers",Ce,A.callback)},m.removeSuperTeamMembers=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembers",done:A.done}),v.verifyOptions(A,"teamId accounts","team::removeSuperTeamMembers"),v.verifyParamType("accounts",A.accounts,"array","team::removeSuperTeamMembers");var V=v.deduplicate(A.accounts);this.processCallback(A);var Ce={teamId:A.teamId,accounts:V};this.sendCmd("removeSuperTeamMembers",Ce,A.callback)},m.leaveSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"leaveSuperTeam",done:A.done}),v.verifyOptions(A,"teamId","superTeam::leaveSuperTeam"),this.processCallback(A);var V={teamId:A.teamId};this.sendCmd("leaveSuperTeam",V,A.callback)},m.getSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getSuperTeam",done:A.done});var V,Ce=this,ie=Ce.db;function Oe(){Ce.sendCmd("getSuperTeam",{teamId:A.teamId},A.callback)}v.verifyOptions(A,"teamId","team::getSuperTeam"),Ce.processCallback(A),A.cbaop=function(he){he||Ce.logger.info("api::getSuperTeam: cbaop ".concat(V))},V=A.teamId,ie.enable&&!A.sync?ie.getSuperTeam(V).then(function(he){he&&he.validToCurrentUser?(Ce.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(V)),A.done(null,he)):Oe()}).catch(function(){Oe()}):Oe()},m.getSuperTeams=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getSuperTeams",done:A.done});var V=this,Ce=V.db,ie=0;function Oe(){V.sendCmd("getSuperTeams",{timetag:ie,NOTSTORE:"timetag"},A.callback)}v.verifyOptions(A),V.processCallback(A),Ce.enable?Ce.getSuperTeamsTimetag().then(function(he){ie=he,Oe()},Oe):Oe()},m.updateSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"updateSuperTeam",done:A.done}),v.verifyOptions(A,"teamId","superTeam::updateSuperTeam"),A.action="update",this.processCallback(A),A.team=new b(A),this.sendCmd("updateSuperTeam",{team:A.team,antispamTag:{antiSpamBusinessId:A.antiSpamBusinessId},single:!0},A.callback)},m.updateInfoInSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"updateInfoInSuperTeam",done:A.done}),v.verifyOptions(A,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(A),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new T(A),single:!0},A.callback)},m.getSuperTeamMembersByJoinTime=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByJoinTime",done:A.done});var V=this,Ce=A,ie=Ce.joinTime,Oe=s(Ce),he=Ce.limit,Y=Ce.teamId;Oe=!!Oe,g(ie)&&(ie=0),g(he)&&(he=100),v.verifyOptions(A,"teamId","superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("joinTime",ie,"number","api::superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("limit",he,"number","api::superTeam::getSuperTeamMembersByJoinTime"),V.processCallback(A),V.sendCmd("getSuperTeamMembersByJoinTime",{teamId:Y,limit:he,joinTime:ie,reverse:Oe,timetag:0,NOTSTORE:"timetag"},A.callback)},m.getAllSuperTeamMembers=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getAllSuperTeamMembers",done:A.done});var V=this,Ce=this.db;function ie(Oe){Oe=Oe||0,V.sendCmd("getSuperTeamMembers",{teamId:A.teamId,timetag:Oe,NOTSTORE:"timetag"},A.callback)}v.verifyOptions(A,"teamId","superTeam::getAllSuperTeamMembers"),V.processCallback(A),a(y).call(y,this)(A.teamId).then(function(Oe){var he=Oe.valid,Y=Oe.timetag;he?(V.logger.info("getAllSuperTeamMembers from local db"),Ce.getSuperTeamMembers(A.teamId).then(function(ae){var Fe={teamId:A.teamId,members:ae};A.done(null,Fe)},function(){return ie()})):ie(Y)})},m.applySuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"applySuperTeam",done:A.done}),v.verifyOptions(A,"teamId","team::applySuperTeam"),v.verifyOptions(A,"teamId","team::applySuperTeam"),this.processPs(A),this.processCallback(A);var V={teamId:A.teamId,ps:A.ps};this.sendCmd("applySuperTeam",V,A.callback)},m.passSuperTeamApply=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"passSuperTeamApply",done:A.done}),v.verifyOptions(A,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(A);var V={idServer:A.idServer,teamId:A.teamId,from:A.from};this.sendCmd("passSuperTeamApply",V,A.callback)},m.rejectSuperTeamApply=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"rejectSuperTeamApply",done:A.done}),v.verifyOptions(A,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(A),this.processCallback(A);var V={idServer:A.idServer,teamId:A.teamId,from:A.from,ps:A.ps};this.sendCmd("rejectSuperTeamApply",V,A.callback)},m.acceptSuperTeamInvite=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"acceptSuperTeamInvite",done:A.done}),v.verifyOptions(A,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(A);var V={idServer:A.idServer,teamId:A.teamId,from:A.from};this.sendCmd("acceptSuperTeamInvite",V,A.callback)},m.rejectSuperTeamInvite=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"rejectSuperTeamInvite",done:A.done}),v.verifyOptions(A,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(A),this.processCallback(A);var V={idServer:A.idServer,teamId:A.teamId,from:A.from,ps:A.ps};this.sendCmd("rejectSuperTeamInvite",V,A.callback)},m.addSuperTeamManagers=function(A){var V;(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"addSuperTeamManagers",done:A.done}),v.verifyOptions(A,"teamId accounts","team::addSuperTeamManagers"),v.verifyParamType("accounts",A.accounts,"array","team::addSuperTeamManagers"),this.processCallback(A);var Ce={teamId:A.teamId,accounts:i(V=A.accounts).call(V,0)};this.sendCmd("addSuperTeamManagers",Ce,A.callback)},m.removeSuperTeamManagers=function(A){var V;(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"removeSuperTeamManagers",done:A.done}),v.verifyOptions(A,"teamId accounts","team::removeSuperTeamManagers"),v.verifyParamType("accounts",A.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(A);var Ce={teamId:A.teamId,accounts:i(V=A.accounts).call(V,0)};this.sendCmd("removeSuperTeamManagers",Ce,A.callback)},m.updateSuperTeamMembersMute=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"updateSuperTeamMembersMute",done:A.done}),v.verifyOptions(A,"teamId accounts mute","team::updateSuperTeamMembersMute"),v.verifyParamType("accounts",A.accounts,"array","team::updateSuperTeamMembersMute"),v.verifyArrayMax("accounts",A.accounts,10),this.processCallback(A),A.mute=A.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",A)},m.updateSuperTeamMute=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"updateSuperTeamMute",done:A.done}),v.verifyOptions(A,"teamId mute","team::updateSuperTeamMute"),A.mute=A.mute?1:0,this.processCallback(A),this.sendCmd("updateSuperTeamMute",A)},m.updateNickInSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"updateNickInSuperTeam",done:A.done}),v.verifyOptions(A,"teamId account","team::updateNickInSuperTeam"),this.processCallback(A),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new T(A),single:!0},A.callback)},m.transferSuperTeam=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"transferSuperTeam",done:A.done}),v.verifyOptions(A,"teamId account leave","team::transferSuperTeam"),v.verifyParamType("leave",A.leave,"boolean","team::transferSuperTeam"),this.processCallback(A);var V={teamId:A.teamId,account:A.account,leave:A.leave};this.sendCmd("transferSuperTeam",V,A.callback)},m.getSuperTeamMembersByAccounts=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByAccounts",done:A.done});var V=this,Ce=this.db,ie=A,Oe=ie.teamId,he=ie.accounts;if(v.verifyOptions(A,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),v.verifyParamType("accounts",he,"array","superTeam::getSuperTeamMembersByAccounts"),v.verifyArrayMax("accounts",he,20),he.length<=0)return v.onParamError("参数accounts不能为空数组","superTeam::getSuperTeamMembersByAccounts");function Y(){var ae=d(he).call(he,function(Fe){return Oe+"|"+Fe});V.processCallback(A),V.sendCmd("getSuperTeamMembersByAccounts",{memberIds:ae},function(Fe,ze){A.done(null,{accounts:he,members:ze.members,invaldAccounts:ze.invalid})})}y.call(this,Oe).then(function(ae){var Fe,ze,pe;return ae.valid?(Fe=[],ze=[],pe=[],u(he).call(he,function(le){var xe,ue=Ce.getSuperTeamMemberById(c(xe="".concat(Oe,"-")).call(xe,le)).then(function(Ve){ze.push(Ve)}).catch(function(){pe.push(le)});Fe.push(ue)}),void o.all(Fe).then(function(){A.done(null,{accounts:he,members:ze,invaldAccounts:pe})})):Y()}).catch(function(){return Y()})},m.getMutedSuperTeamMembers=function(A){(A=A||{}).done=k({instance:this,className:"NIMFn",funcName:"getMutedSuperTeamMembers",done:A.done});var V=this,Ce=A,ie=Ce.joinTime,Oe=s(Ce),he=Ce.limit,Y=Ce.teamId;Oe=!!Oe,g(ie)&&(ie=0),g(he)&&(he=100),v.verifyOptions(A,"teamId","superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("joinTime",ie,"number","api::superTeam::getSuperTeamMembersByJoinTime"),v.verifyParamType("limit",he,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(A),V.sendCmd("getMutedSuperTeamMembers",{teamId:Y,limit:he,joinTime:ie,reverse:Oe},A.callback)}},function(t,r,e){var n=e(102),o=e(8),s=e(3),a=e(2),i=e(7),d=e(9),u=e(749),c=e(41),m=e(15),v=e(87),g=e(32),b=e(17),T=e(6),k=e(85),y=e(86),A=e(70),V=e(103);function Ce(ue,Ve){var Ue=y!==void 0&&A(ue)||ue["@@iterator"];if(!Ue){if(g(ue)||(Ue=function(hr,Ne){var or;if(hr){if(typeof hr=="string")return ie(hr,Ne);var ir=m(or=Object.prototype.toString.call(hr)).call(or,8,-1);if(ir==="Object"&&hr.constructor&&(ir=hr.constructor.name),ir==="Map"||ir==="Set")return k(hr);if(ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ir))return ie(hr,Ne)}}(ue))||Ve&&ue&&typeof ue.length=="number"){Ue&&(ue=Ue);var er=0,At=function(){};return{s:At,n:function(){return er>=ue.length?{done:!0}:{done:!1,value:ue[er++]}},e:function(hr){throw hr},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ur,pr=!0,ar=!1;return{s:function(){Ue=Ue.call(ue)},n:function(){var hr=Ue.next();return pr=hr.done,hr},e:function(hr){ar=!0,ur=hr},f:function(){try{pr||Ue.return==null||Ue.return()}finally{if(ar)throw ur}}}}function ie(ue,Ve){(Ve==null||Ve>ue.length)&&(Ve=ue.length);for(var Ue=0,er=new Array(Ve);Ue<Ve;Ue++)er[Ue]=ue[Ue];return er}var Oe=e(39).fn,he=e(0),Y=he.undef,ae=he.notundef,Fe=e(295),ze=e(152),pe=e(23).reportAPI,le=e(848);function xe(ue,Ve){var Ue=this,er=[],At=[],ur=this.db,pr=this;return ur.enable?(a(ue).call(ue,function(hr){var Ne=Ue.protocol.getSessionInCache(hr);Ne?ar(Ne,hr):At.push(ur.getSession(hr).then(function(or){return ar(or,hr)}))}),s.all(At).then(function(){return er})):(a(ue).call(ue,function(hr){return ar(Ue.protocol.getSessionInCache(hr),hr)}),s.resolve(er));function ar(hr,Ne){var or,ir,$e,tr;hr?hr.lastMsg?hr.scene&&hr.to?hr.ack>=hr.lastMsg.time?pr.logger.warn(i(or="".concat(Ve," not need ack ")).call(or,hr.id)):er.push(hr):pr.logger.warn(i(ir="".concat(Ve," session.scene|to undefined ")).call(ir,hr.id)):pr.logger.warn(i($e="".concat(Ve," session.lastMsg undefined ")).call($e,hr.id)):pr.logger.warn(i(tr="".concat(Ve," session undefined ")).call(tr,Ne))}}Oe.setCurrSession=function(ue){pe({instance:this,className:"NIMFn",funcName:"setCurrSession",hasCallback:!1}),this.resetSessionUnread(ue),this.protocol.setCurrSession(ue)},Oe.resetAllSessionUnread=function(){pe({instance:this,className:"NIMFn",funcName:"resetAllSessionUnread",hasCallback:!1});for(var ue in this.protocol.sessionSet)this.protocol.sessionSet[ue].unread>0&&this.resetSessionUnread(ue)},Oe.resetSessionsUnread=function(){var ue=V(n.mark(function Ve(Ue){var er,At,ur,pr,ar,hr,Ne,or,ir=arguments;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return er=ir.length>1&&ir[1]!==void 0?ir[1]:function(){},er=pe({instance:this,className:"NIMFn",funcName:"resetSessionsUnread",done:er}),(At=this).logger.info("resetSessionsUnread::",Ue),$e.next=6,xe.call(this,Ue,"api::resetSessionsUnread");case 6:if(ur=$e.sent,At.protocol.resetSessionsUnread(ur),At.options.syncSessionUnread&&ur.length!==0){$e.next=11;break}return er(),$e.abrupt("return");case 11:pr=o(ur).call(ur,function(tr){return{scene:tr.scene==="p2p"?0:1,to:tr.to,timetag:tr.lastMsg.time}}),ar=le(pr,50),hr=Ce(ar),$e.prev=14,or=n.mark(function tr(){var nr;return n.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return nr=Ne.value,Pt.next=3,new s(function(Et,kt){At.sendCmd("markSessionAckBatch",{sessionAckTags:nr},function(rr){rr?(er(rr),kt(rr)):Et()})});case 3:case"end":return Pt.stop()}},tr)}),hr.s();case 17:if((Ne=hr.n()).done){$e.next=21;break}return $e.delegateYield(or(),"t0",19);case 19:$e.next=17;break;case 21:$e.next=26;break;case 23:$e.prev=23,$e.t1=$e.catch(14),hr.e($e.t1);case 26:return $e.prev=26,hr.f(),$e.finish(26);case 29:er(null);case 30:case"end":return $e.stop()}},Ve,this,[[14,23,26,29]])}));return function(Ve){return ue.apply(this,arguments)}}(),Oe.resetSuperTeamSessionsUnread=function(){var ue=V(n.mark(function Ve(Ue){var er,At,ur,pr,ar,hr,Ne,or,ir=arguments;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return er=ir.length>1&&ir[1]!==void 0?ir[1]:function(){},er=pe({instance:this,className:"NIMFn",funcName:"resetSuperTeamSessionsUnread",done:er}),(At=this).logger.info("resetSuperTeamSessionsUnread::",Ue),$e.next=6,xe.call(this,Ue,"api::resetSuperTeamSessionsUnread");case 6:if(ur=$e.sent,At.protocol.resetSessionsUnread(ur),At.options.syncSessionUnread&&ur.length!==0){$e.next=11;break}return er(),$e.abrupt("return");case 11:pr=o(ur).call(ur,function(tr){return{to:tr.to,timetag:tr.lastMsg.time}}),ar=le(pr,50),hr=Ce(ar),$e.prev=14,or=n.mark(function tr(){var nr;return n.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return nr=Ne.value,Pt.next=3,new s(function(Et,kt){At.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:nr},function(rr){rr?(er(rr),kt(rr)):Et()})});case 3:case"end":return Pt.stop()}},tr)}),hr.s();case 17:if((Ne=hr.n()).done){$e.next=21;break}return $e.delegateYield(or(),"t0",19);case 19:$e.next=17;break;case 21:$e.next=26;break;case 23:$e.prev=23,$e.t1=$e.catch(14),hr.e($e.t1);case 26:return $e.prev=26,hr.f(),$e.finish(26);case 29:er(null);case 30:case"end":return $e.stop()}},Ve,this,[[14,23,26,29]])}));return function(Ve){return ue.apply(this,arguments)}}(),Oe.resetSessionUnread=function(ue){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};Ve=pe({instance:this,className:"NIMFn",funcName:"resetSessionUnread",done:Ve});var Ue=this,er=Ue.options.resetUnreadMode!==!1,At=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;hr?Ve(hr,ue):Ve(null)};Ue.logger.info("resetSessionUnread::use reset mode",er);var ur=Ue.protocol.getSessionInCache(ue),pr=!ur&&this.db.enable?Ue.db.getSession(ue):s.resolve(ur);function ar(hr){if(!hr.lastMsg&&!hr.updateTime)return Ue.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(ue)),At();if(!hr.scene||!hr.to)return Ue.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(ue)),At();var Ne;if(Ne=hr.lastMsg?hr.lastMsg.time:hr.updateTime,hr&&hr.ack&&hr.ack>=Ne)return Ue.logger.warn("api::resetSessionUnread: session ack not needs ".concat(ue)),At();var or={done:function($e){$e?(Ue.logger.error({message:$e||"mark ack failed",callFunc:"resetSessionUnread"}),At($e||"mark ack failed")):(er||Ue.protocol.resetSessionUnread(hr),At())}};if(Ue.processCallback(or),hr.scene==="superTeam")Ue.sendCmd("markSuperTeamSessionAck",{to:hr.to,timetag:Ne},or.callback);else{var ir={scene:hr.scene==="p2p"?0:1,to:hr.to,timetag:Ne};Ue.sendCmd("markSessionAck",ir,or.callback)}}pr.then(function(hr){return hr?Ue.options.syncSessionUnread?(er&&Ue.protocol.resetSessionUnread(hr),void ar(hr)):(Ue.protocol.resetSessionUnread(hr),At()):(Ue.logger.warn("api::resetSessionUnread: session undefined ".concat(ue)),At())})},Oe.resetCurrSession=function(){pe({instance:this,className:"NIMFn",funcName:"resetCurrSession",hasCallback:!1}),this.protocol.setCurrSession("")},Oe.insertLocalSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"insertLocalSession",done:ue.done});var Ve,Ue;function er(){ue.session=Ue,ue.done(Ve,ue)}he.verifyOptions(ue,"scene to","scene::insertLocalSession"),he.verifyParamValid("scene",ue.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(ue).then(function(At){Ue=At,er()},function(At){Ve=At,er()})},Oe.getLocalSessions=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getLocalSessions",done:ue.done});var Ve=[];he.verifyOptions(ue),Y(ue.limit)&&(ue.limit=100),he.verifyParamType("limit",ue.limit,"number","scene::getLocalSessions"),ae(d(ue))?he.verifyParamType("reverse",d(ue),"boolean","scene::getLocalSessions"):ue.reverse=!1,this.processCallback(ue);var Ue=u(this.protocol.sessionSet),er=0,At=ue.lastSessionId;if(d(ue)){var ur,pr=Ce(Ue);try{for(pr.s();!(ur=pr.n()).done;){var ar=ur.value,hr=ar.id;if(At)hr===At&&(At=void 0);else if(ar.lastMsg!==void 0){if(++er>ue.limit)break;Ve.push(c({},ar))}}}catch(tr){pr.e(tr)}finally{pr.f()}}else{var Ne,or,ir=Ce(Ue);try{for(ir.s();!(or=ir.n()).done;){var $e=or.value;if(At===$e.id)break;$e.lastMsg!==void 0&&Ve.push($e)}}catch(tr){ir.e(tr)}finally{ir.f()}Ve=d(Ne=m(Ve).call(Ve,-ue.limit)).call(Ne)}this.logger.debug("getLocalSessions::sessions is",Ve),Ve=o(Ve).call(Ve,function(tr){return v(ze).call(ze,tr)}),ue.sessions=Ve,delete ue.callback,ue.done(void 0,ue)},Oe.getLocalSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getLocalSession",done:ue.done});var Ve=this,Ue=Ve.db,er=null;if(he.verifyOptions(ue,"sessionId","scene::getLocalSession"),he.verifyParamType("sessionId",ue.sessionId,"string","scene::getLocalSession"),er=Ve.protocol.getSessionInCache(ue.sessionId),Ve.logger.debug("getLocalSession::cache session is",er),!er&&Ue.enable)return Ve.processCallback(ue),void Ue.getSession(ue.sessionId).then(function(At){At&&(er=At,Ve.logger.debug("getLocalSession::db session is",er)),ue.done(null,er)}).catch(function(At){ue.done(At)});ue.done(null,v(ze).call(ze,er))},Oe.getLocalSessionsByMsgType=function(ue){var Ve;(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getLocalSessionsByMsgType",done:ue.done});var Ue=this.db,er=ue.exclude,At=[],ur=m(Ve=Fe.validTypes).call(Ve,0);if(ae(er)){if(typeof er=="string")er=[er];else if(!g(er))return void he.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");er=b(er).call(er,function(pr){return T(ur).call(ur,pr)>-1}),ur=b(ur).call(ur,function(pr){return T(er).call(er,pr)===-1})}this.processCallback(ue),Ue.enable?Ue.getSessions().then(function(pr){er&&er.length!==0?ur&&ur.length!==0?(a(pr).call(pr,function(ar,hr){var Ne,or,ir;ar.lastMsg&&T(er).call(er,ar.lastMsg.type)>-1&&(Ne=hr,or=ar.id,ir=Ue.getMsgs({sessionId:or,limit:1,types:ur}).then(function($e){return $e&&$e[0]?pr[Ne].lastMsg=$e[0]:pr[Ne].lastMsg=null,s.resolve()}),At.push(ir))}),s.all(At).then(function(){ue.done(null,{exclude:er,sessions:pr})})):ue.done(null,{exclude:er,sessions:o(pr).call(pr,function(ar){ar.lastMsg=null})}):ue.done(null,{exclude:er,sessions:pr})}):ue.done(null,{exclude:er,sessions:[]})},Oe.updateLocalSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"updateLocalSession",done:ue.done});var Ve,Ue=this,er=Ue.db;he.verifyOptions(ue,"id","scene::updateLocalSession"),Ue.processCallback(ue);var At=he.filterObj(ue,"id localCustom");function ur(){ue.needNotify!==!1&&Ue.protocol.onUpdateSession(At),ue.session=At,ue.done(Ve,ue)}At=Ue.protocol.updateSessionInCache(ue),er.enable&&At?er.updateSession(At).then(function(pr){At=pr,ur()},function(pr){Ve=pr,ur()}):ur()},Oe.deleteLocalSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteLocalSession",done:ue.done});var Ve,Ue=this,er=Ue.db;he.verifyOptions(ue,"id","session::deleteLocalSession"),Ue.processCallback(ue);var At=Ue.protocol.getSessionInCache(ue.id);if(Ue.protocol.deleteSessionInCache(ue.id,ue.isLogic),er.enable?(ue.isLogic?er.deleteSessionLogic(ue.id):er.deleteSession(ue.id,At)).then(function(){Ue.logger.info("sessions::deleteSessionInDb::delete session done",ue.id),pr()},function(ar){Ve=ar,pr()}):pr(),ue.isDeleteRoaming){var ur=typeof ue.id=="string"?[ue.id]:ue.id;ur=o(ur).call(ur,function(ar){return ar.replace("-","|")}),this.sendCmd("deleteSessions",{sessions:ur},function(){})}function pr(){ue.done(Ve,ue)}},Oe.deleteSession=function(ue,Ve){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteSession",done:ue.done}),Ve||this.logger.warn('this api will be abandon,please use "deleteLocalSession"'),he.verifyOptions(ue,"scene to","session::deleteSession"),this.processCallback(ue),ue.sessions=[{scene:ue.scene,to:ue.to}],this.deleteSessions(ue)},Oe.deleteRoamingMsgBySession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteRoamingMsgBySession",done:ue.done}),this.deleteSession(ue,!0)},Oe.deleteSessions=function(ue){var Ve,Ue;(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteSessions",done:ue.done}),he.verifyOptions(ue,"sessions","session::deleteSessions"),he.verifyParamType("sessions",ue.sessions,"array","session::deleteSessions"),a(Ve=ue.sessions).call(Ve,function(er,At){he.verifyOptions(er,"scene to",!0,"sessions["+At+"].","session::deleteSessions")}),this.processCallback(ue),this.sendCmd("deleteSessions",{sessions:o(Ue=ue.sessions).call(Ue,function(er){return er.scene+"|"+er.to})},ue.callback)},Oe.getServerSessions=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getServerSessions",done:ue.done}),ae(ue.minTimestamp)&&he.verifyParamType("minTimestamp",ue.minTimestamp,"number","session::deleteSessions"),ae(ue.maxTimestamp)&&he.verifyParamType("maxTimestamp",ue.maxTimestamp,"number","session::deleteSessions"),ae(ue.needLastMsg)&&(ue.needLastMsg=ue.needLastMsg===!1?0:1),ae(ue.limit)&&(he.verifyParamType("limit",ue.limit,"number","session::deleteSessions"),he.verifyParamMax("limit",ue.limit,100,"scene::getLocalSessions")),this.processCallback(ue),this.sendCmd("getServerSessions",{sessionReqTag:ue},ue.callback)},Oe.getServerSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getServerSession",done:ue.done}),he.verifyOptions(ue,"scene to","scene::getServerSession"),he.verifyParamValid("scene",ue.scene,this.message.validScenes,"scene::getServerSession"),he.verifyParamType("to",ue.to,"string","to::getServerSession");var Ve=ue.scene+"|"+ue.to;ue.scene==="superTeam"&&(Ve="super_team|"+ue.to),this.processCallback(ue),this.sendCmd("getServerSession",{session:{id:Ve}},ue.callback)},Oe.updateServerSession=function(ue){(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"updateServerSession",done:ue.done}),he.verifyOptions(ue,"scene to","scene::updateServerSession"),he.verifyParamValid("scene",ue.scene,this.message.validScenes,"scene::updateServerSession"),he.verifyParamType("to",ue.to,"string","to::updateServerSession"),ae(ue.extra)&&he.verifyParamType("extra",ue.extra,"string","extra::updateServerSession");var Ve=ue.scene+"|"+ue.to;ue.scene==="superTeam"&&(Ve="super_team|"+ue.to),this.processCallback(ue),this.sendCmd("updateServerSession",{session:{id:Ve,ext:ue.extra||""}},ue.callback)},Oe.deleteServerSessions=function(ue){var Ve,Ue=this;(ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteServerSessions",done:ue.done}),he.verifyOptions(ue,"sessions","scene::deleteServerSessions"),he.verifyParamType("sessions",ue.sessions,"array","sessions::deleteServerSessions");var er=[];a(Ve=ue.sessions).call(Ve,function(At){he.verifyParamValid("scene",At.scene,Ue.message.validScenes,"scene::deleteServerSessions"),he.verifyParamType("to",At.to,"string","to::deleteServerSessions");var ur=At.scene+"|"+At.to;At.scene==="superTeam"&&(ur="super_team|"+At.to),er.push({id:ur})}),this.processCallback(ue),this.sendCmd("deleteServerSessions",{sessions:er},ue.callback)},Oe.updateSessionsWithMoreRoaming=function(ue){var Ve;if((ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"updateSessionsWithMoreRoaming",done:ue.done}),he.verifyOptions(ue,"msg","session::updateSessionsWithMoreRoaming"),he.verifyCallback(ue,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return ue.done(null,"db is disable");var Ue={time:ue.msg.time,idServer:ue.msg.idServer,to:ue.msg.to,from:ue.msg.from};he.verifyParamType("msg.time",ue.msg.time,"number","time::updateSessionsWithMoreRoaming"),he.verifyParamType("msg.idServer",ue.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),he.verifyParamType("msg.from",ue.msg.from,"string","from::updateSessionsWithMoreRoaming"),he.verifyParamType("msg.to",ue.msg.to,"string","to::updateSessionsWithMoreRoaming"),he.verifyParamValid("scene",ue.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var er=Ue.to===this.account?Ue.from:Ue.to;Ue.id=i(Ve="".concat(ue.msg.scene,"-")).call(Ve,er),this.db.updateSessionsWithMoreRoaming(Ue).then(function(At){ue.done(null,At)}).catch(function(At){ue.done(At)})},Oe.deleteSessionsWithMoreRoaming=function(ue){if((ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"deleteSessionsWithMoreRoaming",done:ue.done}),he.verifyOptions(ue,"id","session::deleteSessionsWithMoreRoaming"),he.verifyCallback(ue,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return ue.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(ue.id).then(function(Ve){ue.done(null,Ve)}).catch(function(Ve){ue.done(Ve)})},Oe.getSessionsWithMoreRoaming=function(ue){if((ue=ue||{}).done=pe({instance:this,className:"NIMFn",funcName:"getSessionsWithMoreRoaming",done:ue.done}),he.verifyCallback(ue,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return ue.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(ue.id).then(function(Ve){ue.done(null,Ve)}).catch(function(Ve){ue.done(Ve)})}},function(t,r,e){var n=e(849),o=e(850),s=e(851),a=Math.ceil,i=Math.max;t.exports=function(d,u,c){u=(c?o(d,u,c):u===void 0)?1:i(s(u),0);var m=d==null?0:d.length;if(!m||u<1)return[];for(var v=0,g=0,b=Array(a(m/u));v<m;)b[g++]=n(d,v,v+=u);return b}},function(t,r){t.exports=function(e,n,o){var s=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(o=o>a?a:o)<0&&(o+=a),a=n>o?0:o-n>>>0,n>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+n];return i}},function(t,r,e){var n=e(198),o=e(199),s=e(300),a=e(88);t.exports=function(i,d,u){if(!a(u))return!1;var c=typeof d;return!!(c=="number"?o(u)&&s(d,u.length):c=="string"&&d in u)&&n(u[d],i)}},function(t,r,e){var n=e(852);t.exports=function(o){var s=n(o),a=s%1;return s==s?a?s-a:s:0}},function(t,r,e){var n=e(853);t.exports=function(o){return o?(o=n(o))===1/0||o===-1/0?17976931348623157e292*(o<0?-1:1):o==o?o:0:o===0?o:0}},function(t,r,e){var n=e(854),o=e(88),s=e(856),a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt;t.exports=function(c){if(typeof c=="number")return c;if(s(c))return NaN;if(o(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=o(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=n(c);var v=i.test(c);return v||d.test(c)?u(c.slice(2),v?2:8):a.test(c)?NaN:+c}},function(t,r,e){var n=e(855),o=/^\s+/;t.exports=function(s){return s&&s.slice(0,n(s)+1).replace(o,"")}},function(t,r){var e=/\s/;t.exports=function(n){for(var o=n.length;o--&&e.test(n.charAt(o)););return o}},function(t,r,e){var n=e(119),o=e(104);t.exports=function(s){return typeof s=="symbol"||o(s)&&n(s)=="[object Symbol]"}},function(t,r,e){var n=e(120),o=e(858),s=e(859),a=e(102),i=e(103),d=e(58),u=e(17),c=e(15),m=e(2),v=e(32),g=e(170),b=e(8),T=e(7),k=e(9),y=e(10),A=e(864),V=e(5),Ce=e(59),ie=e(60),Oe=e(61),he=e(62),Y=e(47),ae=["callback","done"];function Fe(Ne,or){var ir=V(Ne);if(Ce){var $e=Ce(Ne);or&&($e=u($e).call($e,function(tr){return ie(Ne,tr).enumerable})),ir.push.apply(ir,$e)}return ir}function ze(Ne){for(var or=1;or<arguments.length;or++){var ir,$e,tr=arguments[or]!=null?arguments[or]:{};or%2?m(ir=Fe(Object(tr),!0)).call(ir,function(nr){d(Ne,nr,tr[nr])}):Oe?he(Ne,Oe(tr)):m($e=Fe(Object(tr))).call($e,function(nr){Y(Ne,nr,ie(tr,nr))})}return Ne}var pe=e(39).fn,le=e(0),xe=le.undef,ue=le.notundef,Ve=e(44),Ue=e(152),er=e(151),At=e(40),ur=e(72),pr=e(23).reportAPI,ar=e(13);pe.sendG2Msg=function(Ne){return(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"sendG2Msg",done:Ne.done}),this.processCallback(Ne),Ne.msg=new this.message.G2Message(Ne),this.sendMsg(Ne)},pe.beforeSendMsg=function(Ne){var or,ir=this.protocol,$e=Ne.msg;switch($e.to===this.account&&($e.fromDeviceId=Ve.deviceId),$e.userUpdateTime=ir.myInfo&&ir.myInfo.updateTime,$e.getScene()){case"p2p":or="sendMsg";break;case"team":or="sendTeamMsg";break;case"superTeam":or="sendSuperTeamMsg"}u(Ne)&&(or="sendFilterMsg",$e.filter=!0),Ne.cmd=or},pe.afterSendMsg=function(Ne){var or=Ne.rtnMsg;if(!or||!or.ignore){var ir=this.protocol.getSessionInCache(or.sessionId);Ne.isLocal&&ir&&ir.lastMsg&&or.time<ir.lastMsg.time||this.protocol.onUpdateSession(Ue.genSessionByMsg(or))}},pe.beforeForwardMsg=function(Ne){le.verifyOptions(Ne,"msg scene to","msg::beforeForwardMsg"),Ne.msg.scene=Ne.scene,Ne.msg.to=Ne.to},pe.markMsgRead=function(Ne){var or=this.protocol;!Ne||this.db.enable||or.options.autoMarkRead?this.logger.warn("api::markMsgRead: 不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)"):or.markMsgRead(Ne,!0)},pe.sendMsgReceipt=function(Ne){if((Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"sendMsgReceipt",done:Ne.done}),le.verifyOptions(Ne),this.processCallback(Ne),Ne.msg){le.verifyOptions(Ne,"msg","msg::sendMsgReceipt");var or=Ne.msg;le.verifyOptions(or,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(or)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:or.target,idClient:or.idClient,time:or.time}},Ne.callback):Ne.done()}else Ne.done()},pe.isMsgRemoteRead=function(Ne){return pr({instance:this,className:"NIMFn",funcName:"isMsgRemoteRead",hasCallback:!1}),this.protocol.isMsgRemoteRead(Ne)},pe.recallMsg=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"recallMsg",done:Ne.done}),this.deleteMsg(Ne,!0)},pe.deleteMsg=function(Ne,or){var ir;(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsg",done:Ne.done}),or||this.logger.warn("this api will be abandon,please use “recallMsg”"),le.verifyOptions(Ne,"msg","msg::deleteMsg");var $e=Ne.msg;if($e.scene!=="team"&&$e.from!==this.account||$e.status!=="success"||$e.isLocal)return Ne.done(At.newParamError("只能删除自己发的, 并且发送成功的消息，且不能是本地消息",{callFunc:"msg::deleteMsg"}),Ne);le.verifyOptions($e,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),le.verifyParamValid("msg.scene",$e.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(Ne),this.processCallback(Ne);var tr={deletedIdClient:$e.idClient,deletedIdServer:$e.idServer,time:$e.time,from:$e.from,to:$e.to,opeAccount:$e.from},nr=$e.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";tr.type="deleteMsg"+$e.scene[0].toUpperCase()+c(ir=$e.scene).call(ir,1);var Pt=["ps","apnsText","pushPayload","env","opeAccount","attach"];m(Pt).call(Pt,function(Et){Ne[Et]&&(tr[Et]=Ne[Et])}),tr=new er(tr),this.sendCmd(nr,{sysMsg:tr,msg:$e},Ne.callback)},pe.deleteMsgSelf=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelf",done:Ne.done}),le.verifyOptions(Ne,"msg","msg::deleteMsgSelf");var or=Ne.msg;if(or.scene==="superTeam")return Ne.done(At.newParamError("单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelf"}),Ne);le.verifyOptions(or,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),le.verifyParamValid("msg.scene",or.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(Ne);var ir={scene:or.scene==="p2p"?1:2,from:or.from,to:or.to,time:or.time,idClient:or.idClient,idServer:or.idServer,custom:Ne.custom};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:ir},Ne.callback)},pe.deleteMsgSelfBatch=function(Ne){var or,ir,$e,tr=this;if((Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelfBatch",done:Ne.done}),le.verifyOptions(Ne,"msgs","msg::deleteMsgSelfBatch"),(!v(Ne.msgs)||Ne.msgs.length===0||Ne.msgs.length>100)&&le.onParamError("msgs应该是数组且数据长度应大于0小于等于100","msg::deleteMsgSelfBatch"),g(or=Ne.msgs).call(or,function(Pt){return Pt.scene==="superTeam"}))return Ne.done(At.newParamError("消息列表中存在超大群消息，单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelfBatch"}),Ne);m(ir=Ne.msgs).call(ir,function(Pt){le.verifyOptions(Pt,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),le.verifyParamValid("msg.scene",Pt.scene,tr.message.validScenes,"msg::deleteMsgSelfBatch")}),this.processCallback(Ne);var nr=b($e=Ne.msgs).call($e,function(Pt){var Et;return{scene:Pt.scene==="p2p"?1:2,from:Pt.from,to:Pt.to,time:Pt.time,idClient:Pt.idClient,idServer:Pt.idServer,sessionId:Pt.sessionId||T(Et="".concat(Pt.scene,"-")).call(Et,Pt.to),custom:Ne.custom}});this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:nr},Ne.callback)};var hr={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};pe.getHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getHistoryMsgs",done:Ne.done}),this.protocol.syncing&&this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"),le.verifyOptions(Ne,"scene to","msg::getHistoryMsgs"),le.verifyParamValid("scene",Ne.scene,this.message.validScenes,"msg::getHistoryMsgs"),Ne.beginTime===void 0&&(Ne.beginTime=0);var or,ir=this.protocol.getSessionInCache(Ne.scene+"-"+Ne.to),$e=ir&&ir.lastEmptyTime;if($e>Ne.beginTime&&(Ne.beginTime=$e),le.verifyParamType("beginTime",Ne.beginTime,"number","msg::getHistoryMsgs"),Ne.endTime===void 0&&(Ne.endTime=0),le.verifyParamType("endTime",Ne.endTime,"number","msg::getHistoryMsgs"),Ne.lastMsgId=Ne.lastMsgId&&+Ne.lastMsgId?Ne.lastMsgId:"0",Ne.limit===void 0&&(Ne.limit=100),le.verifyParamType("limit",Ne.limit,"number","msg::getHistoryMsgs"),le.verifyParamMax("limit",Ne.limit,100,"msg::getHistoryMsgs"),ue(k(Ne))?le.verifyParamType("reverse",k(Ne),"boolean","msg::getHistoryMsgs"):Ne.reverse=!1,ue(Ne.asc)?le.verifyParamType("asc",Ne.asc,"boolean","msg::getHistoryMsgs"):Ne.asc=!1,xe(Ne.msgTypes))Ne.msgTypes=[];else if(v(Ne.msgTypes)){var tr,nr;Ne.msgTypes=b(tr=Ne.msgTypes).call(tr,function(Et){return hr[Et]}),Ne.msgTypes=u(nr=Ne.msgTypes).call(nr,function(Et){return typeof Et=="number"})}else typeof hr[Ne.msgTypes]=="number"?Ne.msgTypes=[hr[Ne.msgTypes]]:Ne.msgTypes=[];switch(this.processCallback(Ne),Ne.cbaop=function(Et,kt){if(!Et){var rr;Ne.asc&&(kt.msgs=k(rr=kt.msgs).call(rr)),kt.msgs=ur.deduplication(kt.msgs)}},Ne.scene){case"p2p":or="getHistoryMsgs";break;case"team":or="getTeamHistoryMsgs";break;case"superTeam":or="getSuperTeamHistoryMsgs"}var Pt={scene:Ne.scene,to:Ne.to,beginTime:Ne.beginTime,endTime:Ne.endTime,lastMsgId:Ne.lastMsgId,limit:Ne.limit,reverse:k(Ne),msgTypes:Ne.msgTypes};this.sendCmd(or,Pt,Ne.callback)},pe.searchHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"searchHistoryMsgs",done:Ne.done}),le.verifyOptions(Ne,"scene to keyword","msg::searchHistoryMsgs"),le.verifyParamValid("scene",Ne.scene,this.message.validScenes,"msg::searchHistoryMsgs"),Ne.beginTime===void 0&&(Ne.beginTime=0);var or,ir=this.protocol.getSessionInCache(Ne.scene+"-"+Ne.to),$e=ir&&ir.lastEmptyTime;switch($e>Ne.beginTime&&(Ne.beginTime=$e),le.verifyParamType("beginTime",Ne.beginTime,"number","msg::searchHistoryMsgs"),Ne.endTime===void 0&&(Ne.endTime=0),le.verifyParamType("endTime",Ne.endTime,"number","msg::searchHistoryMsgs"),Ne.limit===void 0&&(Ne.limit=100),le.verifyParamType("limit",Ne.limit,"number","msg::searchHistoryMsgs"),le.verifyParamMax("limit",Ne.limit,100,"msg::searchHistoryMsgs"),ue(k(Ne))?le.verifyParamType("reverse",k(Ne),"boolean","msg::searchHistoryMsgs"):Ne.reverse=!1,ue(Ne.asc)?le.verifyParamType("asc",Ne.asc,"boolean","msg::searchHistoryMsgs"):Ne.asc=!1,this.processCallback(Ne),Ne.asc&&(Ne.cbaop=function(nr,Pt){var Et;nr||(Pt.msgs=k(Et=Pt.msgs).call(Et))}),Ne.scene){case"p2p":or="searchHistoryMsgs";break;case"team":or="searchTeamHistoryMsgs"}var tr=le.filterObj(Ne,"scene to beginTime endTime keyword limit reverse");this.sendCmd(or,tr,Ne.callback)},pe.getLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgs",done:Ne.done});var or=this,ir=or.db,$e=[];le.verifyOptions(Ne);var tr=!1;ue(Ne.start)&&(tr=!0,le.verifyParamType("start",Ne.start,"number","msg::getLocalMsgs"));var nr=!1;if(ue(Ne.end)&&(nr=!0,le.verifyParamType("end",Ne.end,"number","msg::getLocalMsgs")),tr&&nr&&Ne.end<=Ne.start&&le.onParamError("参数 end 必须晚于 start"),ue(Ne.subTypes)&&le.verifyParamType("subTypes",Ne.subTypes,"array","msg::getLocalMsgs"),xe(Ne.limit)&&(Ne.limit=100),le.verifyParamType("limit",Ne.limit,"number","msg::getLocalMsgs"),le.verifyParamMin("limit",Ne.limit,1,"msg::getLocalMsgs"),or.processCallback(Ne),ir.enable){var Pt=new Date().getTime();ir.getMsgs(Ne).then(function(kt){var rr;$e=kt,or.logger.info(T(rr="api::getLocalMsgs: query db cost ".concat(new Date().getTime()-Pt," ms and the conditions is ")).call(rr,y(Ne))),Et()},function(kt){(kt=kt||{}).message=kt.message||"msg::getLocalMsgs:db error",Et()})}else Et();function Et(){var kt=le.simpleClone(Ne);kt.msgs=$e,delete kt.callback,delete kt.done,Ne.done(null,kt)}},pe.getLocalMsgsInUnread=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsInUnread",done:Ne.done});var or=this;le.validate({sessionId:{type:"string",allowEmpty:!1}},Ne),this.getLocalSession({sessionId:Ne.sessionId,done:function(ir,$e){ir?Ne.done&&Ne.done(ir):$e?($e.ack=$e.ack||0,or.getLocalMsgs(ze({sessionId:Ne.sessionId,start:$e.ack,limit:A,filterFunc:function(tr){return tr.flow==="in"&&tr.isUnreadable===!0},done:function(){}},Ne))):Ne.done&&Ne.done(new Error("session ".concat(Ne.sessionId," not exist")))}})},pe.getLocalMsgByIdClient=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgByIdClient",done:Ne.done});var or=this.db,ir=null,$e=null;function tr(){Ne.msg=$e,Ne.done(ir,Ne)}le.verifyOptions(Ne,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(Ne),or.enable?or.getMsgByIdClient(Ne.idClient).then(function(nr){nr&&($e=nr),tr()},function(nr){ir=nr,tr()}):(this.logger.warn("because db is false,error is null"),tr())},pe.getLocalMsgsByIdClients=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsByIdClients",done:Ne.done});var or,ir=this.db,$e=[];function tr(){Ne.msgs=$e,Ne.done(or,Ne)}le.verifyOptions(Ne,"idClients","msg::getLocalMsgByIdClients"),le.verifyParamType("idClients",Ne.idClients,"array","msg::getLocalMsgByIdClients"),this.processCallback(Ne),ir.enable?ir.getMsgsByIdClients(Ne.idClients).then(function(nr){$e=u(nr).call(nr,function(Pt){return!!Pt}),tr()},function(nr){or=nr,tr()}):tr()},pe.updateLocalMsg=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"updateLocalMsg",done:Ne.done});var or,ir=this.db,$e=null;if(le.verifyOptions(Ne,"idClient","msg::updateLocalMsg"),this.processCallback(Ne),ir.enable){var tr=le.filterObj(Ne,"idClient localCustom");ir.updateMsg(tr).then(function(Pt){$e=Pt,nr()},function(Pt){or=Pt,nr()})}else nr();function nr(){Ne.msg=$e,Ne.done(or,Ne)}},pe.deleteLocalMsg=function(){var Ne=i(a.mark(function or(ir){var $e,tr,nr,Pt;return a.wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Pt=function(){ir.done(tr,ir)},(ir=ir||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsg",done:ir.done}),$e=this,le.verifyOptions(ir,"msg","msg::deleteLocalMsg"),nr=ir.msg,le.verifyOptions(nr,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),$e.processCallback(ir),Et.prev=8,Et.next=11,$e.protocol.deleteLocalMsg(nr);case 11:Pt(),Et.next=18;break;case 14:Et.prev=14,Et.t0=Et.catch(8),tr=Et.t0,Pt();case 18:case"end":return Et.stop()}},or,this,[[8,14]])}));return function(or){return Ne.apply(this,arguments)}}(),pe.deleteLocalMsgsBySession=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgsBySession",done:Ne.done});var or,ir=this,$e=ir.db;le.verifyOptions(Ne,"scene to","msg::deleteLocalMsgsBySession"),le.verifyParamValid("scene",Ne.scene,ir.message.validScenes,"msg::deleteLocalMsgsBySession"),Ne.sessionId=Ne.scene+"-"+Ne.to,Ne.delLastMsg=Ne.delLastMsg===!0,Ne.isTag=Ne.isTag===!0;var tr=new Date().getTime();function nr(){Ne.done(or,Ne)}ir.processCallback(Ne);var Pt={id:Ne.sessionId};Ne.delLastMsg&&(Pt.lastMsg=null),Ne.isTag&&(Pt.lastEmptyTime=tr),$e.enable?$e.deleteMsgsBySessionId(Ne).then(function(){Ne.delLastMsg||Ne.isTag?$e.updateSession(Pt).then(function(Et){ir.protocol.onUpdateSession(Et),Ne.session=Et,nr()}):nr()}).catch(function(Et){or=Et,nr()}):(this.logger.warn("because db is false,error is null"),nr(),(Ne.delLastMsg||Ne.isTag)&&ir.protocol.onUpdateSession(Pt))},pe.deleteLocalMsgsByTime=function(Ne){var or=this.db;ar.isBrowser&&or.enable&&(ue((Ne=Ne||{}).start)?le.verifyParamType("start",Ne.start,"number","msg::deleteLocalMsgsByTime"):Ne.start=0,ue(Ne.end)?le.verifyParamType("end",Ne.end,"number","msg::deleteLocalMsgsByTime"):Ne.end=1/0,ue(Ne.end)&&ue(Ne.start)&&Ne.end<=Ne.start&&le.onParamError("参数 end 必须大于 start"),this.processCallback(Ne),this.protocol.deleteLocalMsgsByTime(Ne).then(function(ir){Ne.done(null,ir)},function(ir){Ne.done(ir,null)}))},pe.deleteLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgs",done:Ne.done});var or;function ir(){Ne.done(or,Ne)}Ne.updateSession=Ne.updateSession!==!1,le.verifyOptions(Ne,"sessionId","msg::deleteLocalMsgsBySession"),ue(Ne.start)&&le.verifyParamType("start",Ne.start,"number","msg::deleteLocalMsgs"),ue(Ne.end)&&le.verifyParamType("end",Ne.end,"number","msg::deleteLocalMsgs"),ue(Ne.end)&&ue(Ne.start)&&Ne.end<=Ne.start&&le.onParamError("参数 end 必须大于 start"),this.processCallback(Ne),this.protocol.deleteLocalMsgs(Ne).then(function(){ir()},function($e){or=$e,ir()})},pe.deleteAllLocalMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"deleteAllLocalMsgs",done:Ne.done});var or,ir=this.db;function $e(){Ne.done(or,Ne)}this.processCallback(Ne),this.protocol.sessionSet={},ir.enable?ir.deleteAllMsgs().then(function(){$e()},function(tr){or=tr,$e()}):(this.logger.warn("because db is false,error is null"),$e())},pe.saveMsgsToLocal=function(Ne){var or;(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"saveMsgsToLocal",done:Ne.done}),this.db.enable||(this.logger.warn("because db is false,error is null"),Ne.done(null,[])),le.verifyOptions(Ne,"msgs done","msg::saveMsgsToLocal"),le.verifyParamType("msgs",Ne.msgs,"Array","msg::saveMsgsToLocal");var ir=b(or=Ne.msgs).call(or,function($e){var tr=ze({},$e);return tr.hasOwnProperty("needUpdateSession")||(tr.needUpdateSession=!0),tr});this.db.putMsg(ir).then(function($e,tr){tr?Ne.done(tr):Ne.done(null,$e)})},pe.clearServerHistoryMsgs=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgs",done:Ne.done}),le.verifyOptions(Ne,"account","msg::clearServerHistoryMsgs");var or=Ne.delRoam!==!1;this.processCallback(Ne),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:Ne.account,delRoam:or?1:0}},Ne.callback)},pe.clearServerHistoryMsgsWithSync=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgsWithSync",done:Ne.done}),le.verifyOptions(Ne,"scene to","msg::clearServerHistoryMsgsWithSync");var or=Ne.isDeleteRoam===void 0||Ne.isDeleteRoam===!0,ir={type:Ne.scene==="team"?2:1,isDeleteRoam:or?1:0,isSyncSelf:Ne.isSyncSelf===!0?1:0};ir[ir.type===2?"toTid":"otherAccid"]=Ne.to,Ne.ext!==void 0&&(ir.ext=Ne.ext),this.processCallback(Ne),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:ir},Ne.callback)},pe.msgFtsInServer=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"msgFtsInServer",done:Ne.done}),this.processCallback(Ne);var or=Ne,ir=s({},(o(or),or));le.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},ir,"msg::msgFtsInServer"),ue(ir.toTime)&&ue(ir.fromTime)&&ir.toTime<ir.fromTime&&le.onParamError("Options error: toTime should be greater than fromTime");var $e,tr={ASC:1,DESC:2};ir.order&&tr[ir.order]&&(ir.order=tr[ir.order]),ir.msgTypeList&&(ir.msgTypeList=b($e=ir.msgTypeList).call($e,function(Pt){return hr[Pt]}));var nr=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];m(nr).call(nr,function(Pt){v(ir[Pt])&&(ir[Pt]=ir[Pt].join(","))}),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:ir},Ne.callback)},pe.msgFtsInServerByTiming=function(Ne){(Ne=Ne||{}).done=pr({instance:this,className:"NIMFn",funcName:"msgFtsInServerByTiming",done:Ne.done}),this.processCallback(Ne);var or=Ne,ir=(or.callback,or.done,n(or,ae));le.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},ir,"msg::msgFtsInServerByTimeSort"),ue(ir.toTime)&&ue(ir.fromTime)&&ir.toTime<ir.fromTime&&le.onParamError("Options error: toTime should be greater than fromTime");var $e,tr={ASC:1,DESC:2};ir.msgLimit===void 0&&(ir.msgLimit=20),ir.order&&tr[ir.order]&&(ir.order=tr[ir.order]),ir.msgTypeList&&(ir.msgTypeList=b($e=ir.msgTypeList).call($e,function(Pt){return hr[Pt]}));var nr=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];m(nr).call(nr,function(Pt){v(ir[Pt])&&(ir[Pt]=ir[Pt].join(","))}),this.sendCmd("msgFtsInServerByTiming",{msgTimingFullSearchRequestTag:ir},Ne.callback)}},function(t,r){t.exports=function(e){if(e==null)throw new TypeError("Cannot destructure "+e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(860),o=e(149);function s(){var a;return t.exports=s=n?o(a=n).call(a):function(i){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(i[c]=u[c])}return i},t.exports.__esModule=!0,t.exports.default=t.exports,s.apply(this,arguments)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(861)},function(t,r,e){t.exports=e(862)},function(t,r,e){var n=e(863);t.exports=n},function(t,r,e){var n=e(303);t.exports=n},function(t,r,e){t.exports=e(865)},function(t,r,e){var n=e(866);t.exports=n},function(t,r,e){e(867),t.exports=9007199254740991},function(t,r,e){e(1)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,r,e){var n=e(9),o=e(32),s=e(15),a=e(2),i=e(10),d=e(5),u=e(17),c=e(39).fn,m=e(0),v=e(751),g=e(753),b=(e(72),m.notundef),T=e(23).reportAPI;function k(y,A,V,Ce){V=V||"",m.verifyParamType(V+"from",y.from,"string",A),m.verifyParamType(V+"to",y.to,"string",A),m.verifyParamType(V+"idServer",y.idServer,"string",A),m.verifyParamType(V+"time",y.time,"number",A),m.verifyParamValid(V+"scene",y.scene,this.message.validScenes,A),Ce||m.verifyParamType(V+"idClient",y.idClient,"string",A)}c.getThreadMsgs=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getThreadMsgs",done:y.done}),m.verifyCallback(y,"done","msg::getThreadMsgs"),m.verifyOptions(y,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),m.verifyParamType("threadMsgFromAccount",y.threadMsgFromAccount,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgToAccount",y.threadMsgToAccount,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgIdServer",y.threadMsgIdServer,"string","msg::getThreadMsgs"),m.verifyParamType("threadMsgTime",y.threadMsgTime,"number","msg::getThreadMsgs"),m.verifyParamValid("scene",y.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(y);var A={scene:this.message.sceneMap[y.scene],from:y.threadMsgFromAccount,to:y.threadMsgToAccount,time:y.threadMsgTime,idServer:y.threadMsgIdServer},V={limit:y.limit<100?y.limit:100,beginTime:typeof y.beginTime=="number"?y.beginTime:0,reverse:n(y)===!0?1:0};typeof y.endTime=="number"&&(V.endTime=y.endTime,V.endTime<=V.beginTime&&m.onParamError("endTime应该大于beginTime","msg::getThreadMsgs")),y.lastMsgId&&(V.lastMsgId=y.lastMsgId),this.sendCmd("getThreadMsgs",{msg:A,threadMsgReq:V,NOTSTORE:"msg threadMsgReq"},y.callback)},c.getMsgsByIdServer=function(y){var A,V,Ce=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getMsgsByIdServer",done:y.done});var ie=this,Oe="msg::getMsgsByIdServer";m.verifyCallback(y,"done",Oe),(!o(y.reqMsgs)||y.reqMsgs.length===0||y.reqMsgs.length>100)&&m.onParamError("reqMsgs应该是数组且数据长度应大于0小于等于100",Oe),y.reqMsgs=s(A=y.reqMsgs).call(A,0),a(V=y.reqMsgs).call(V,function(he,Y){k.call(ie,he,Oe,"reqMsgs[".concat(Y,"]."),!0),he.scene=Ce.message.sceneMap[he.scene]}),this.processCallback(y),this.sendCmd("getMsgsByIdServer",{reqMsgs:y.reqMsgs},y.callback)},c.addQuickComment=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addQuickComment",done:y.done}),m.verifyOptions(y,"msg body","msg::addQuickComment"),k.call(this,y.msg,"msg::addQuickComment");var A=new v(y,"msg::addQuickComment");A.from=this.account;var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("addQuickComment",{msg:V,comment:A},y.callback)},c.deleteQuickComment=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteQuickComment",done:y.done}),m.verifyOptions(y,"msg body","msg::deleteQuickComment"),k.call(this,y.msg,"msg::deleteQuickComment");var A=new v(y,"msg::addQuickComment");A.from=this.account;var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("deleteQuickComment",{msg:V,comment:A},y.callback)},c.getQuickComments=function(y){var A=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getQuickComments",done:y.done});var V="msg::getQuickComments",Ce=this,ie={},Oe={};m.verifyOptions(y,"msgs","msg::getQuickComments"),(!o(y.msgs)||y.msgs.length===0||y.msgs.length>20)&&m.onParamError("msgs应该是数组且数据长度应大于0小于等于20",V);var he=[];try{he=JSON.parse(i(y.msgs))}catch{m.onParamError("msgs 不是合法的对象",V)}a(he).call(he,function(Y,ae){k.call(Ce,Y,V,"msgs[".concat(ae,"]."),!0),Y.scene=A.message.sceneMap[Y.scene],ie[Y.idClient]=null,Oe[Y.idClient]=ae}),this.processCallback(y),this.getLocalMsgsByIdClients({idClients:d(ie),done:function(Y,ae){var Fe,ze=Ce.protocol.timetags.sync;!Y&&ae.msgs&&ae.msgs.length&&ze&&(a(Fe=ae.msgs).call(Fe,function(pe){ie[pe.idClient]=pe}),he=u(he).call(he,function(pe){var le=ie[pe.idClient];return!le||(le.commentTimetag&&(pe.timestamp=le.commentTimetag),!(le.commentTimetag>ze))})),Ce.sendCmd("getQuickComments",{commentReq:he,idMap:ie,indexMap:Oe},y.callback)}})},c.addCollect=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addCollect",done:y.done}),m.verifyOptions(y,"type data","msg::addCollect");var A=new g(y,"msg::addCollect");this.processCallback(y),this.sendCmd("addCollect",{collect:A},y.callback)},c.deleteCollects=function(y){var A;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteCollects",done:y.done}),m.verifyOptions(y,"collectList","msg::deleteCollects"),(!o(y.collectList)||y.collectList.length===0||y.collectList.length>100)&&m.onParamError("collectList应该是数组且数据长度应大于0小于等于100","msg::deleteCollects"),a(A=y.collectList).call(A,function(V,Ce){m.verifyParamType("collectList[".concat(Ce,"].id"),V.id,"string","msg::deleteCollects"),m.verifyParamType("collectList[".concat(Ce,"].createTime"),V.createTime,"number","msg::deleteCollects")}),this.processCallback(y),this.sendCmd("deleteCollects",{collectList:y.collectList},y.callback)},c.updateCollect=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateCollect",done:y.done}),m.verifyOptions(y,"collect","msg::updateCollect"),m.verifyParamType("collect.id",y.collect.id,"string","msg::updateCollect"),m.verifyParamType("collect.createTime",y.collect.createTime,"number","msg::updateCollect"),this.processCallback(y),this.sendCmd("updateCollect",{collect:y.collect},y.callback)},c.getCollects=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getCollects",done:y.done}),m.verifyCallback(y,"done","msg::getCollects");var A={},V=["type","beginTime","endTime","limit"];a(V).call(V,function(Ce){b(y[Ce])&&(m.verifyParamType(Ce,y[Ce],"number","msg::getCollects"),A[Ce]=y[Ce])}),y.limit>100&&m.onParamError("limit不能大于100","msg::getCollects"),y.beginTime>y.endTime&&m.onParamError("beginTime不能大于endTime","msg::getCollects"),b(y.lastId)&&(m.verifyParamType("lastId",y.lastId,"string","msg::getCollects"),A.lastMsgId=y.lastId),b(n(y))&&(A.reverse=n(y)===!0?1:0),this.processCallback(y),this.sendCmd("getCollects",{collectQuery:A,NOTSTORE:"collectQuery"},y.callback)},c.addStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::addStickTopSession");var A=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",A[0],this.message.validScenes,"msg::addStickTopSession"),m.verifyParamType("id的后半部分",A[1],"string","msg::addStickTopSession"),A[0]==="superTeam"&&(A[0]="super_team");var V={id:A=A.join("|")};y.topCustom&&(m.verifyParamType("topCustom",y.topCustom,"string","msg::addStickTopSession"),V.topCustom=y.topCustom),this.processCallback(y),this.sendCmd("addStickTopSession",{stickTopSession:V},y.callback)},c.deleteStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::deleteStickTopSession");var A=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",A[0],this.message.validScenes,"msg::deleteStickTopSession"),m.verifyParamType("id的后半部分",A[1],"string","msg::deleteStickTopSession"),A[0]==="superTeam"&&(A[0]="super_team"),A=A.join("|"),this.processCallback(y),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:A}},y.callback)},c.updateStickTopSession=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateStickTopSession",done:y.done}),m.verifyOptions(y,"id","msg::updateStickTopSession");var A=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",A[0],this.message.validScenes,"msg::updateStickTopSession"),m.verifyParamType("id的后半部分",A[1],"string","msg::updateStickTopSession"),A[0]==="superTeam"&&(A[0]="super_team");var V={id:A=A.join("|")};y.topCustom&&(m.verifyParamType("topCustom",y.topCustom,"string","msg::updateStickTopSession"),V.topCustom=y.topCustom),this.processCallback(y),this.sendCmd("updateStickTopSession",{stickTopSession:V},y.callback)},c.getStickTopSessions=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getStickTopSessions",done:y.done}),m.verifyOptions(y,"done","msg::getStickTopSessions"),this.processCallback(y);var A,V=this.protocol.sessionSet,Ce=[];for(var ie in V)(A=this.protocol.getSessionInCache(ie,y.findDelete))&&A.isTop&&Ce.push(V[ie]);y.callback(null,Ce)},c.addMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"addMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::addMsgPin"),k.call(this,y.msg,"msg::addMsgPin");var A={pinFrom:this.account};b(y.pinCustom)&&(m.verifyParamType("pinCustom",y.pinCustom,"string","msg::addMsgPin"),A.pinCustom=y.pinCustom);var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("addMsgPin",{msg:V,pinTag:A},y.callback)},c.updateMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"updateMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::updateMsgPin"),k.call(this,y.msg,"msg::updateMsgPin");var A={pinFrom:this.account};b(y.pinCustom)&&(m.verifyParamType("pinCustom",y.pinCustom,"string","msg::updateMsgPin"),A.pinCustom=y.pinCustom);var V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("updateMsgPin",{msg:V,pinTag:A},y.callback)},c.deleteMsgPin=function(y){(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"deleteMsgPin",done:y.done}),m.verifyOptions(y,"msg","msg::deleteMsgPin"),k.call(this,y.msg,"msg::deleteMsgPin");var A={pinFrom:this.account},V={scene:this.message.sceneMap[y.msg.scene],from:y.msg.from,to:y.msg.to,time:y.msg.time,idServer:y.msg.idServer,idClient:y.msg.idClient};this.processCallback(y),this.sendCmd("deleteMsgPin",{msg:V,pinTag:A},y.callback)},c.getMsgPins=function(y){var A=this;(y=y||{}).done=T({instance:this,className:"NIMFn",funcName:"getMsgPins",done:y.done}),m.verifyOptions(y,"id","msg::getMsgPins");var V=this.db,Ce=m.getIdArray(y.id);m.verifyParamValid("id的前半部分",Ce[0],this.message.validScenes,"msg::getMsgPins"),m.verifyParamType("id的后半部分",Ce[1],"string","msg::getMsgPins"),Ce[0]==="superTeam"&&(Ce[0]="super_team");var ie={sessionId:Ce=Ce.join("|"),timetag:0};if(this.processCallback(y),V.enable){var Oe=this.protocol.timetags.sync;V.getTimetag("pin-"+y.id).then(function(Y){Y>Oe?V.getMsgPins(y.id).then(function(ae){return y.callback(null,{pins:ae||[]})}).catch(function(ae){return y.callback(ae)}):(ie.timetag=Y,he.call(A))})}else he.call(this);function he(){this.sendCmd("getMsgPins",{msgPinReq:ie,id:y.id,NOTSTORE:"msgPinReq"},y.callback)}}},function(t,r,e){var n=e(3),o=e(17),s=e(2),a=e(9),i=e(39).fn,d=e(0),u=d.undef,c=d.notundef,m=e(151),v=e(23).reportAPI;i.markSysMsgRead=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"markSysMsgRead",done:g.done});var b,T=this.db,k=n.resolve(),y=this.protocol;d.verifyOptions(g,"sysMsgs","sysmsg::markSysMsgRead");var A=g.sysMsgs;function V(){g.done(b,g)}d.isArray(A)||(A=[A]),T.enable?k=T.markSysMsgRead(A).then(function(Ce){A=Ce,y.onUpdateSysMsg(Ce)}):(A=o(A).call(A,function(Ce){return!Ce.read})).length&&(y.options.autoMarkRead||y.markSysMsgRead(A,!0),s(A).call(A,function(Ce){Ce.read=!0}),y.onUpdateSysMsg(A)),k.then(function(){return y.reduceSysMsgUnread(A)}).then(V,function(Ce){b=Ce,V()})},i.sendCustomSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"sendCustomSysMsg",done:g.done}),d.verifyOptions(g,"scene to content","sysmsg::sendCustomSysMsg"),d.verifyParamValid("scene",g.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(g);var b="sendCustomSysMsg";return g.scene==="p2p"?g.type="customP2p":g.scene==="superTeam"?(g.type="customSuperTeam",b="sendSuperTeamCustomSysMsg"):g.type="customTeam",g.sysMsg=new m(g),o(g)&&(b="sendFilterCustomSysMsg"),this.sendCmd(b,{sysMsg:g.sysMsg,single:!0},g.callback),this.formatReturnSysMsg(g.sysMsg)},i.formatReturnSysMsg=function(g){return g=d.copy(g),this.protocol.completeSysMsg(g),g.status="sending",g=a(m).call(m,g)},i.getLocalSysMsgs=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"getLocalSysMsgs",done:g.done});var b,T=this.db,k=[];function y(){g.sysMsgs=k,g.done(b,g)}d.verifyOptions(g),g.category&&d.verifyParamValid("category",g.category,m.validCategories,"sysmsg::getLocalSysMsgs"),g.type&&d.verifyParamValid("type",g.type,m.validTypes,"sysmsg::getLocalSysMsgs"),u(g.limit)&&(g.limit=100),d.verifyParamType("limit",g.limit,"number","sysmsg::getLocalSysMsgs"),d.verifyParamMax("limit",g.limit,100,"sysmsg::getLocalSysMsgs"),c(a(g))?d.verifyParamType("reverse",a(g),"boolean","sysmsg::getLocalSysMsgs"):g.reverse=!1,this.processCallback(g),T.enable?T.getSysMsgs(g).then(function(A){k=A,y()},function(A){b=A,y()}):y()},i.updateLocalSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"updateLocalSysMsg",done:g.done});var b,T=this.db,k=null;if(d.verifyOptions(g,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(g),T.enable){var y=d.filterObj(g,"idServer state localCustom");T.updateSysMsg(y).then(function(V){k=V,A()},function(V){b=V,A()})}else A();function A(){g.sysMsg=k,g.done(b,g)}},i.deleteLocalSysMsg=function(g){(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteLocalSysMsg",done:g.done});var b,T=this.db;function k(){g.done(b,g)}d.verifyOptions(g,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(g),T.enable?T.deleteSysMsg(g.idServer).then(function(){k()},function(y){b=y,k()}):k()},i.deleteAllLocalSysMsgs=function(g){var b;(g=g||{}).done=v({instance:this,className:"NIMFn",funcName:"deleteAllLocalSysMsgs",done:g.done});var T=this,k=T.db;function y(){T.protocol.onUpdateSysMsgUnread({}),g.done(b,g)}T.processCallback(g),k.enable?k.deleteAllSysMsgs().then(function(){y()},function(A){b=A,y()}):y()}},function(t,r,e){var n=e(39).fn,o=e(0),s=e(13),a=e(23).reportAPI;n.getChatroomAddress=function(i){(i=i||{}).done=a({instance:this,className:"NIMFn",funcName:"getChatroomAddress",done:i.done}),o.verifyOptions(i,"chatroomId","chatroom::getChatroomAddress"),i.isWeixinApp=s.isWeixinApp,i.type=s.ipVersion,this.processCallback(i),this.sendCmd("getChatroomAddress",i)}},function(t,r){},function(t,r){},function(t,r,e){var n=e(39).fn,o=e(0),s=e(23).reportAPI;n.audioToText=function(a){(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"audioToText",done:a.done}),o.verifyOptions(a,"url","audio::audioToText"),a.audioToText=o.filterObj(a,"url"),this.processCallback(a),this.sendCmd("audioToText",a)}},function(t,r,e){var n=e(39).fn;n.clearDB=function(o){var s=this.db;this.processCallback(o);var a=o.done;s.enable?s.clear().then(a,a):a()},n.removeDB=function(o){var s=this.db;this.processCallback(o);var a=o.done;s.enable?s.destroy().then(a,a):a()},n.closeDB=function(o){var s=this.db;this.processCallback(o);var a=o.done;s.enable?s.close().then(a,a):a()}},function(t,r,e){var n=e(39).fn,o=e(308),s=e(0),a=s.undef,i=e(23).reportAPI;n.getPushNotificationMultiportConfig=function(){return i({instance:this,className:"NIMFn",funcName:"getPushNotificationMultiportConfig",hasCallback:!1}),this.protocol.getPushNotificationMultiportConfig()},n.updatePushNotificationMultiportConfig=function(d){(d=d||{}).done=i({instance:this,className:"NIMFn",funcName:"updatePushNotificationMultiportConfig",done:d.done}),s.verifyOptions(d),a(d.shouldPushNotificationWhenPCOnline)&&(d.shouldPushNotificationWhenPCOnline=!0),d.donnop=new o(d),this.processCallback(d),this.sendCmd("updateDonnop",d)}},function(t,r,e){var n=e(2),o=e(3),s=e(7),a=e(25),i=e(39).fn,d=e(0),u=e(877),c=e(878),m=e(23).reportAPI;function v(g){return a(g)==="object"&&(g.msgEventSubscribes?g=g.msgEventSubscribes:g.msgEventSubscribe?g=g.msgEventSubscribe:g.accounts?g=g.accounts:g.msgEvent&&(g=g.msgEvent).time&&(g.time=+g.time),g.sync===1?g.sync=!0:g.sync===0&&(g.sync=!1)),g}i.batchSendEventsCmds=function(g,b,T){var k=this,y=d.dropArrayDuplicates(b.accounts);y=d.reshape2d(y,100);var A=[];n(y).call(y,function(V){A.push(new o(function(Ce,ie){var Oe=d.simpleClone(b);Oe.accounts=V,k.sendCmdWithResp(g,Oe,function(he,Y){he?ie(he):Ce(v(Y))})}))}),o.all(A).then(function(V){var Ce=null;if(V.length>0)if(V[0].msgEventSubscribe){var ie=V[0].msgEventSubscribe;ie=v(ie);var Oe=[];n(V).call(V,function(he){Oe=s(Oe).call(Oe,he.accounts)}),Ce={accounts:Oe,msgEventSubscribe:ie}}else Ce=[],n(V).call(V,function(he){Ce=s(Ce).call(Ce,he)});T(null,Ce)},function(V){T(V,null)})},i.publishEvent=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"publishEvent",done:g.done});var b=new u(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("publishEvent",{msgEvent:b},function(T,k){T||(k=v(k)),g.callback(T,k)})},i.subscribeEvent=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"subscribeEvent",done:g.done}),d.verifyOptions(g,"accounts","event::subscribeEvent");var b=new c(g);d.verifyParamType("accounts",g.accounts,"array","event::subscribeEvent"),this.processCallback(g),b=b.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:b,accounts:g.accounts},function(T,k){!T&&k&&(k={failedAccounts:k}),g.callback(T,k)})},i.unSubscribeEventsByAccounts=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByAccounts",done:g.done}),d.verifyOptions(g,"accounts","event::unSubscribeEventsByAccounts"),d.verifyParamType("accounts",g.accounts,"array","event::unSubscribeEventsByAccounts");var b=new c(g);b=b.assembleEvent(),this.processCallback(g),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:b,accounts:g.accounts},function(T,k){!T&&k&&(k={failedAccounts:k}),g.callback(T,k)})},i.unSubscribeEventsByType=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByType",done:g.done});var b=new c(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:b},function(T,k){g.callback(T,k)})},i.querySubscribeEventsByAccounts=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByAccounts",done:g.done}),d.verifyOptions(g,"accounts","event::querySubscribeEventsByAccounts"),d.verifyParamType("accounts",g.accounts,"array","event::querySubscribeEventsByAccounts");var b=new c(g);b=b.assembleEvent(),this.processCallback(g),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:b,accounts:g.accounts},function(T,k){!T&&k&&(k={msgEventSubscribes:k}),g.callback(T,k)})},i.querySubscribeEventsByType=function(g){(g=g||{}).done=m({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByType",done:g.done});var b=new c(g);b=b.assembleEvent(),this.processCallback(g),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:b},function(T,k){T||(k={msgEventSubscribes:v(k)}),g.callback(T,k)})}},function(t,r,e){var n=e(6),o=e(0),s=o.notundef,a=e(40);function i(d){if(o.verifyOptions(d,"type value","event::MsgEvent"),o.verifyParamType("type",d.type,"number","event::MsgEvent"),o.verifyParamType("value",d.value,"number","event::MsgEvent"),this.type=d.type,this.value=d.value,this.idClient=o.guid(),s(d.custom)&&(this.custom=""+d.custom),this.validTime=d.validTime||604800,o.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),o.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),o.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),s(d.broadcastType)){var u;if(o.verifyParamType("broadcastType",d.broadcastType,"number","event::MsgEvent"),n(u=[1,2]).call(u,d.broadcastType)<0)throw new a('参数错误"broadcastType":只能为1或2');this.broadcastType=d.broadcastType}else this.broadcastType=2;s(d.sync)?(o.verifyParamType("sync",d.sync,"boolean","event::MsgEvent"),this.sync=d.sync):this.sync=!1}i.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:this.sync===!0?1:0}},t.exports=i},function(t,r,e){var n=e(0),o=n.notundef;function s(a){n.verifyOptions(a,"type","event::MsgEventSubscribe"),n.verifyParamType("type",a.type,"number","event::MsgEventSubscribe"),n.findObjIndexInArray([1,2,3],a.type)<0&&n.verifyParamMin("type",a.type,1e5,"event::MsgEventSubscribe"),this.type=a.type,o(a.subscribeTime)?(n.verifyParamType("subscribeTime",a.subscribeTime,"number","event::MsgEventSubscribe"),n.verifyParamMin("subscribeTime",a.subscribeTime,60,"event::MsgEventSubscribe"),n.verifyParamMax("subscribeTime",a.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=a.subscribeTime):this.subscribeTime=2592e3,o(a.sync)?(n.verifyParamType("sync",a.sync,"boolean","event::MsgEventSubscribe"),this.sync=a.sync):this.sync=!0}s.prototype.assembleEvent=function(){return{type:this.type,subscribeTime:this.subscribeTime,sync:this.sync===!0?1:0}},t.exports=s},function(t,r,e){var n=e(41),o=e(39).fn,s=e(0),a=e(23).reportAPI;o.httpRequestProxy=function(i){(i=i||{}).done=a({instance:this,className:"NIMFn",funcName:"httpRequestProxy",done:i.done}),s.verifyOptions(i,"path","misc::httpRequestProxy");var d=n({},i);delete d.done,this.processCallback(i),this.sendCmd("httpProxy",{proxyTag:d},i.callback)}},function(t,r,e){var n=e(39).fn,o=e(13),s=e(23).reportAPI;n.getQChatAddress=function(a){(a=a||{}).done=s({instance:this,className:"NIMFn",funcName:"getQChatAddress",done:a.done}),this.processCallback(a),this.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:o.ipVersion}},a.done)}},function(t,r,e){e(297);var n=e(193);e(309)(n),t.exports=n},function(t,r,e){var n=e(312),o=e(15),s=e(3),a=e(57),i=e(7),d=e(26),u=e(194).fn,c=e(13),m=e(154).V2NIMConnectStatus;u.connect=function(){if(this.checkNetworkAvailable()===!1&&this.autoconnect)return this.logger.info("connect::skip this reconnection attempt because network is offline"),void this.reconnect();c.isBrowser&&this.reporter.restore(),n(u).connect.call(this)},u.refreshSocketUrl=function(){var v;return this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=o(v=this.socketUrlsBackup).call(v,0),this.logger.info("link::refreshSocketUrl"),this.statusProtector.emit("auth/loginLifeCycleAddressing"),s.resolve(this.socketUrls)},u.onHandshakeFailed=function(v,g){var b;this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:g,rt:a()-v,result:408,failReason:"ws_handshake_failed",time:a()}),this.logger.warn(i(b="link::onHandshakeFailed: shandshake failed, startTime: ".concat(v,", targetUrl: ")).call(b,g))},u.onConnectFailed=function(v,g,b){var T,k,y=typeof v=="string"?"connect_failed:".concat(v):"connect_failed";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:b,rt:a()-g,result:408,failReason:"ws_".concat(y),time:a()}),this.logger.warn(i(T=i(k="link::onConnectFailed: connect failed due to ".concat(v,", startTime: ")).call(k,g,", targetUrl: ")).call(T,b))},u.onSocketError=function(v,g,b){var T,k,y=typeof v=="string"?"socket.io error:".concat(v):"socket.io error";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:b,rt:a()-g,result:408,failReason:"ws_".concat(y),time:a()}),this.logger.warn(i(T=i(k="link::onSocketError: due to ".concat(v,", startTime: ")).call(k,g,", targetUrl: ")).call(T,b))},u.notifyDisconnect=function(v){n(u).notifyDisconnect.call(this,v)},u.disconnect=function(){var v=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void d(function(){n(u).disconnect.call(v,g)},0);this.connecting?this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==m.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively"):this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");var b=n(u);b.disconnect.call(this,g)}},function(t,r,e){var n=e(102),o=e(58),s=e(103),a=e(10),i=e(57),d=e(3),u=e(24),c=e(5),m=e(59),v=e(17),g=e(60),b=e(2),T=e(61),k=e(62),y=e(47);function A(Y,ae){var Fe=c(Y);if(m){var ze=m(Y);ae&&(ze=v(ze).call(ze,function(pe){return g(Y,pe).enumerable})),Fe.push.apply(Fe,ze)}return Fe}function V(Y){for(var ae=1;ae<arguments.length;ae++){var Fe,ze,pe=arguments[ae]!=null?arguments[ae]:{};ae%2?b(Fe=A(Object(pe),!0)).call(Fe,function(le){o(Y,le,pe[le])}):T?k(Y,T(pe)):b(ze=A(Object(pe))).call(ze,function(le){y(Y,le,g(pe,le))})}return Y}var Ce=e(194).fn,ie=e(44),Oe=e(0);function he(Y){var ae=this;if(Y.code===398)return this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),ae.forceDisconnect(),ae.backoff.setMin(5e3),void(ae.retryCount===0?ae.refreshSocketUrl():d.resolve()).then(function(){var Fe;ae.reconnect({allFailedCB:u(Fe=function(ze){this.logger.error("pendingLoginFailed: ",ze.code,ze),this.onAuthError(ze,"link::onLoginReconnectFailed")}).call(Fe,ae,Y)})});this.logger.error("pendingLoginFailed: ",Y.code,Y),ae.onAuthError(Y,"link::onLogin")}Ce.assembleLogin=function(){var Y=this.options;this.sdkSession=this.genSessionKey();var ae={appKey:Y.appKey,account:Y.account,deviceId:ie.deviceId,chatroomId:Y.chatroomId,session:this.sdkSession,appLogin:this.autoconnect?1:0},Fe=!0;if(Y.loc_x===void 0||Y.loc_y===void 0||Y.loc_z===void 0?Fe=!1:(typeof Y.loc_x!="number"&&(Y.loc_x=0),typeof Y.loc_y!="number"&&(Y.loc_y=0),typeof Y.loc_z!="number"&&(Y.loc_z=0)),Y.authType=Y.loginAuthType,ae=Oe.merge(ae,Oe.filterObj(Y,Fe?"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId":"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")),Y.tags&&Y.tags.length>0)try{ae.tags=a(Y.tags)}catch(ze){this.logger.error("assembleLogin::format tags error",Y.tags,ze)}return{type:1,login:ae,imLogin:this.assembleIMLogin()}},Ce.login=s(n.mark(function Y(){var ae,Fe,ze,pe=this;return n.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return ae=this,le.next=3,ae.assembleLogin();case 3:if(Fe=le.sent,!(ze=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){le.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[ze]){le.next=10;break}return this.logger.warn("onConnect::repeat login",ze),le.abrupt("return");case 10:this.socketIds[ze]=!0,le.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+ze+" appLogin is "+Fe.login.appLogin),ae.createLoginTime=i(),ae.sendCmd("login",V({},Fe),function(xe,ue){if(xe)ae.reporter.report("chatroomLogin",{accid:ae.account,roomId:ae.options&&ae.options.chatroomId,serverIps:ae.options&&ae.options.chatroomAddresses&&ae.options.chatroomAddresses.join(","),currentServerIp:ae.url,rt:i()-ae.createLoginTime,result:xe?xe.code:408,failReason:xe?xe.message:"",time:i()}),he.call(ae,xe),ae.statusProtector.emit("auth/loginLifeCycleLoginFail",xe);else if(ae.reporter.report("chatroomLogin",{accid:ae.account,roomId:ae.options&&ae.options.chatroomId,serverIps:ae.options&&ae.options.chatroomAddresses&&ae.options.chatroomAddresses.join(","),currentServerIp:ae.url,rt:i()-ae.createLoginTime,result:200,failReason:"",time:i()}),ae.resetReconnectStatus(),pe.heartbeatFail=0,pe.hasLogin=!0,pe.autoconnect=!0,ae.startHeartbeat(),ae.initOnlineListener(),ae.statusProtector.emit("auth/loginLifeCycleLoginSucc"),ae.keepNosSafeUrl)ae.afterLogin(ue);else{var Ve=[];ae.parser.checkObjSafeUrl(ue,Ve,[]),d.all(Ve).then(function(){ae.afterLogin(ue)}).catch(function(){ae.afterLogin(ue)})}});case 17:case"end":return le.stop()}},Y,this)})),Ce.afterLogin=function(Y){var ae=Y.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=ae,this.notifyLogin(Y)},Ce.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],Ce.kickedMessages=["","聊天室关闭了","被房主或者管理员踢出","不允许同一个帐号在多个地方同时登录","悄悄被踢","被拉黑了"]},function(t,r,e){var n=e(9),o=e(26),s=e(69),a=e(2),i=e(52),d=e(41),u=e(15),c=e(32),m=e(123),v=e(5),g=e(194).fn,b=e(0),T=e(13),k=e(885),y=e(763),A=e(890),V=e(891),Ce=e(892);g.completeMsg=function(ie){ie.chatroomId=this.chatroom&&this.chatroom.id,ie.from=this.options.account,ie.fromClientType="Web",ie.time||(ie.time=+new Date)},g.amendMsg=function(ie){return ie},g.onMsg=function(ie){var Oe,he=n(Oe=this.message).call(Oe,ie.content.msg);if(this.checkMsgUnique(he)){if(he.__handleTime=this.reporterHook.getSafeClock(),he.__receiveTime=ie.__receiveTime,b.get(ie,"content.msg.__clientExt"))try{he.__clientExt=JSON.parse(ie.content.msg.__clientExt)}catch{this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(ie.content.msg.__clientExt))}this.msgBuffer.push(he),this.msgFlushTimer||this.startMsgFlushTimer(),ie&&ie.content&&ie.content.msg&&ie.content.msg.needHighPriorityMsgAck==="1"&&this.sendCmd("sendChatroomMsgAck",{chatRoomMsgAckTag:{idClient:he.idClient,chatroomId:he.chatroomId}})}else this.logger.warn("onMsg::msg::repeat",he.idClient)},g.startMsgFlushTimer=function(){var ie=this,Oe=ie.options;ie.msgFlushTimer=o(function(){var he,Y=s(he=ie.msgBuffer).call(he,0,Oe.msgBufferSize);if(T.isBrowser){var ae=ie.reporterHook.getSafeClock();a(Y).call(Y,function(Fe){if(Fe.flow!=="out"){var ze={msgId:Fe.idServer,clientId:Fe.idClient,receiveTime:ie.reporterHook.getNTPTime(Fe.__receiveTime),serverTime:Fe.time,callbackTime:ie.reporterHook.getNTPTime(ae),preHandleTime:ie.reporterHook.getNTPTime(Fe.__handleTime),fromAccid:Fe.from,toAccid:ie.options.account,type:4,tid:"",roomId:Fe.chatroomId,result:200,failReason:"",rt:i(ae-Fe.__receiveTime)},pe=b.get(Fe,"__clientExt.statistics.apiCallingTime"),le=b.get(Fe,"__clientExt.statistics.sendTime");pe&&le&&(ze.apiCallingTime=pe,ze.sendTime=le,ze.attachUploadDuration=b.get(Fe,"__clientExt.statistics.attachUploadDuration")||0),ie.reporter&&ie.reporter.report("msgReceive",ze)}delete Fe.__handleTime,delete Fe.__receiveTime,delete Fe.__clientExt})}ie.options.onmsgs(Y),ie.msgBuffer.length?ie.startMsgFlushTimer():delete ie.msgFlushTimer},Oe.msgBufferInterval)},g.checkMsgUnique=b.genCheckUniqueFunc("idClient"),g.onSendMsg=function(ie){var Oe,he=ie.obj.msg;ie.error?he.status="fail":(he=ie.content.msg).status="success",d(he,ie.obj.msg),he=n(Oe=this.message).call(Oe,he),this.checkMsgUnique(he),ie.obj=he},g.onHistoryMsgs=function(ie){ie.error||(ie.obj||(ie.obj={}),ie.obj.msgs=this.message.reverseMsgs(ie.content.msgs))},g.onCdnMsgInfo=function(ie){if(ie){ie.cdnUrls&&(ie.cdnUrls=ie.cdnUrls.split("|")),ie.interval&&(ie.interval=1e3*i(ie.interval)),ie.timeout&&(ie.timeout=+ie.timeout),ie.enable&&(ie.enable=+ie.enable),ie.timestamp&&(ie.timestamp=+ie.timestamp,this.correctCdnTime(ie.timestamp));var Oe=!this.cdnInfo.enable&&ie.enable;d(this.cdnInfo,ie),Oe&&this.queryCdnMsgs()}},g.correctCdnTime=function(ie){ie&&typeof ie=="number"&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=ie,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",ie,this.cdnInfo.localTime,new Date(ie),new Date(this.cdnInfo.localTime)))},g.queryCdnMsgs=function(ie){var Oe,he=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=o(function(){return he.queryCdnMsgs()},this.cdnInfo.interval);var Y=+new Date;if(Y=Y-this.cdnInfo.localTime+this.cdnInfo.timestamp,Y-=Y%this.cdnInfo.interval,this.cdnInfo.lastNow!==Y&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var ae=this,Fe=this.cdnInfo.decryptKey,ze=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),pe=u(Oe=this.cdnInfo.cdnUrls).call(Oe,0);ie=ie||0,function le(){if(ie>=3)return void ae.finalFail++;if(pe.length){var xe=pe.shift().replace("#time",Y),ue=xe.split("/")[2],Ve=+new Date;ae.adaptersRequest(xe,{timeout:ze,onload:function(Ue){if(ae.cdnInfo.lastNow>Y)ae.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",ae.cdnInfo.lastNow,Y,Ue);else{ae.cdnInfo.lastNow=Y,ae.afterQueryCdn(ue,+new Date-Ve,!0);try{Ue=JSON.parse(Ue)}catch(pr){ae.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",pr)}if(Ue&&Ue.data){Ue.ptm&&(ae.cdnInfo.timeout=Ue.ptm),Ue.pis&&(ae.cdnInfo.interval=1e3*Ue.pis);var er,At,ur=Ue.e===!0?(er=Ue.data,At=Fe,k.decrypt(er,y.parse(At),{mode:A,padding:V}).toString(Ce)):Ue.data;ae.onCdnMsgsSmoothly(ur,Y,1e3*Ue.c)}}},onerror:function(Ue){if(ie++,ae.afterQueryCdn(ue,+new Date-Ve,!1),Ue.status===404){var er;try{var At=JSON.parse(Ue.result);At.code===404&&At.timestamp&&(er=At.timestamp)}catch(ur){ae.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",ur,Ue)}!er&&Ue.date&&(er=+new Date(Ue.date)),er&&(ae.correctCdnTime(er),clearTimeout(ae.queryCdnTimer),ae.queryCdnMsgs(ie))}else le()}},{exception_service:8})}}()}}},g.onCdnMsgsSmoothly=function(ie,Oe,he){try{ie=JSON.parse(ie)}catch(pe){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",pe)}if(this.logger.info("receive cdn msgs "+ie.length+" and request time is "+new Date(Oe)),c(ie)&&ie.length){var Y=this,ae=this.options.msgBufferInterval,Fe=Math.ceil(ie.length*ae/he);ze(),clearInterval(Y.cdnSmoothTimer),Y.cdnSmoothTimer=m(function(){return ze()},ae)}function ze(){if(Y.isConnected()){var pe=s(ie).call(ie,0,Fe);a(pe).call(pe,function(le){var xe=Y.parser.syncUnserialize(le,"msg");Y.onMsg({content:{msg:xe}})}),ie.length||clearInterval(Y.cdnSmoothTimer)}}},g.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},g.initCdnData=function(){this.resetCdnData(),b.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(ie,Oe,he){var Y,ae=this;this.cdnData[ie]||(this.cdnData[ie]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),he?(this.cdnData[ie].success++,this.cdnData[ie].sr+=Oe,Oe>this.cdnData[ie].smr&&(this.cdnData[ie].smr=Oe)):(this.cdnData[ie].fail++,this.cdnData[ie].fr+=Oe,Oe>this.cdnData[ie].fmr&&(this.cdnData[ie].fmr=Oe)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(a(Y=v(this.cdnData)).call(Y,function(Fe){ae.cdnData[Fe].sr=ae.cdnData[Fe].sr/ae.cdnData[Fe].success||0,ae.cdnData[Fe].fr=ae.cdnData[Fe].fr/ae.cdnData[Fe].fail||0}),this.options.onCdnRequestData(d({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(t,r,e){var n;t.exports=(n=e(89),e(763),e(887),e(764),e(311),function(){var o=n,s=o.lib.BlockCipher,a=o.algo,i=[],d=[],u=[],c=[],m=[],v=[],g=[],b=[],T=[],k=[];(function(){for(var V=[],Ce=0;Ce<256;Ce++)V[Ce]=Ce<128?Ce<<1:Ce<<1^283;var ie=0,Oe=0;for(Ce=0;Ce<256;Ce++){var he=Oe^Oe<<1^Oe<<2^Oe<<3^Oe<<4;he=he>>>8^255&he^99,i[ie]=he,d[he]=ie;var Y=V[ie],ae=V[Y],Fe=V[ae],ze=257*V[he]^16843008*he;u[ie]=ze<<24|ze>>>8,c[ie]=ze<<16|ze>>>16,m[ie]=ze<<8|ze>>>24,v[ie]=ze,ze=16843009*Fe^65537*ae^257*Y^16843008*ie,g[he]=ze<<24|ze>>>8,b[he]=ze<<16|ze>>>16,T[he]=ze<<8|ze>>>24,k[he]=ze,ie?(ie=Y^V[V[V[Fe^Y]]],Oe^=V[V[Oe]]):ie=Oe=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],A=a.AES=s.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var V=this._keyPriorReset=this._key,Ce=V.words,ie=V.sigBytes/4,Oe=4*((this._nRounds=ie+6)+1),he=this._keySchedule=[],Y=0;Y<Oe;Y++)Y<ie?he[Y]=Ce[Y]:(ze=he[Y-1],Y%ie?ie>6&&Y%ie==4&&(ze=i[ze>>>24]<<24|i[ze>>>16&255]<<16|i[ze>>>8&255]<<8|i[255&ze]):(ze=i[(ze=ze<<8|ze>>>24)>>>24]<<24|i[ze>>>16&255]<<16|i[ze>>>8&255]<<8|i[255&ze],ze^=y[Y/ie|0]<<24),he[Y]=he[Y-ie]^ze);for(var ae=this._invKeySchedule=[],Fe=0;Fe<Oe;Fe++){if(Y=Oe-Fe,Fe%4)var ze=he[Y];else ze=he[Y-4];ae[Fe]=Fe<4||Y<=4?ze:g[i[ze>>>24]]^b[i[ze>>>16&255]]^T[i[ze>>>8&255]]^k[i[255&ze]]}}},encryptBlock:function(V,Ce){this._doCryptBlock(V,Ce,this._keySchedule,u,c,m,v,i)},decryptBlock:function(V,Ce){var ie=V[Ce+1];V[Ce+1]=V[Ce+3],V[Ce+3]=ie,this._doCryptBlock(V,Ce,this._invKeySchedule,g,b,T,k,d),ie=V[Ce+1],V[Ce+1]=V[Ce+3],V[Ce+3]=ie},_doCryptBlock:function(V,Ce,ie,Oe,he,Y,ae,Fe){for(var ze=this._nRounds,pe=V[Ce]^ie[0],le=V[Ce+1]^ie[1],xe=V[Ce+2]^ie[2],ue=V[Ce+3]^ie[3],Ve=4,Ue=1;Ue<ze;Ue++){var er=Oe[pe>>>24]^he[le>>>16&255]^Y[xe>>>8&255]^ae[255&ue]^ie[Ve++],At=Oe[le>>>24]^he[xe>>>16&255]^Y[ue>>>8&255]^ae[255&pe]^ie[Ve++],ur=Oe[xe>>>24]^he[ue>>>16&255]^Y[pe>>>8&255]^ae[255&le]^ie[Ve++],pr=Oe[ue>>>24]^he[pe>>>16&255]^Y[le>>>8&255]^ae[255&xe]^ie[Ve++];pe=er,le=At,xe=ur,ue=pr}er=(Fe[pe>>>24]<<24|Fe[le>>>16&255]<<16|Fe[xe>>>8&255]<<8|Fe[255&ue])^ie[Ve++],At=(Fe[le>>>24]<<24|Fe[xe>>>16&255]<<16|Fe[ue>>>8&255]<<8|Fe[255&pe])^ie[Ve++],ur=(Fe[xe>>>24]<<24|Fe[ue>>>16&255]<<16|Fe[pe>>>8&255]<<8|Fe[255&le])^ie[Ve++],pr=(Fe[ue>>>24]<<24|Fe[pe>>>16&255]<<16|Fe[le>>>8&255]<<8|Fe[255&xe])^ie[Ve++],V[Ce]=er,V[Ce+1]=At,V[Ce+2]=ur,V[Ce+3]=pr},keySize:8});o.AES=s._createHelper(A)}(),n.AES)},function(t,r){},function(t,r,e){var n;t.exports=(n=e(89),function(o){var s=n,a=s.lib,i=a.WordArray,d=a.Hasher,u=s.algo,c=[];(function(){for(var k=0;k<64;k++)c[k]=4294967296*o.abs(o.sin(k+1))|0})();var m=u.MD5=d.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(k,y){for(var A=0;A<16;A++){var V=y+A,Ce=k[V];k[V]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)}var ie=this._hash.words,Oe=k[y+0],he=k[y+1],Y=k[y+2],ae=k[y+3],Fe=k[y+4],ze=k[y+5],pe=k[y+6],le=k[y+7],xe=k[y+8],ue=k[y+9],Ve=k[y+10],Ue=k[y+11],er=k[y+12],At=k[y+13],ur=k[y+14],pr=k[y+15],ar=ie[0],hr=ie[1],Ne=ie[2],or=ie[3];ar=v(ar,hr,Ne,or,Oe,7,c[0]),or=v(or,ar,hr,Ne,he,12,c[1]),Ne=v(Ne,or,ar,hr,Y,17,c[2]),hr=v(hr,Ne,or,ar,ae,22,c[3]),ar=v(ar,hr,Ne,or,Fe,7,c[4]),or=v(or,ar,hr,Ne,ze,12,c[5]),Ne=v(Ne,or,ar,hr,pe,17,c[6]),hr=v(hr,Ne,or,ar,le,22,c[7]),ar=v(ar,hr,Ne,or,xe,7,c[8]),or=v(or,ar,hr,Ne,ue,12,c[9]),Ne=v(Ne,or,ar,hr,Ve,17,c[10]),hr=v(hr,Ne,or,ar,Ue,22,c[11]),ar=v(ar,hr,Ne,or,er,7,c[12]),or=v(or,ar,hr,Ne,At,12,c[13]),Ne=v(Ne,or,ar,hr,ur,17,c[14]),ar=g(ar,hr=v(hr,Ne,or,ar,pr,22,c[15]),Ne,or,he,5,c[16]),or=g(or,ar,hr,Ne,pe,9,c[17]),Ne=g(Ne,or,ar,hr,Ue,14,c[18]),hr=g(hr,Ne,or,ar,Oe,20,c[19]),ar=g(ar,hr,Ne,or,ze,5,c[20]),or=g(or,ar,hr,Ne,Ve,9,c[21]),Ne=g(Ne,or,ar,hr,pr,14,c[22]),hr=g(hr,Ne,or,ar,Fe,20,c[23]),ar=g(ar,hr,Ne,or,ue,5,c[24]),or=g(or,ar,hr,Ne,ur,9,c[25]),Ne=g(Ne,or,ar,hr,ae,14,c[26]),hr=g(hr,Ne,or,ar,xe,20,c[27]),ar=g(ar,hr,Ne,or,At,5,c[28]),or=g(or,ar,hr,Ne,Y,9,c[29]),Ne=g(Ne,or,ar,hr,le,14,c[30]),ar=b(ar,hr=g(hr,Ne,or,ar,er,20,c[31]),Ne,or,ze,4,c[32]),or=b(or,ar,hr,Ne,xe,11,c[33]),Ne=b(Ne,or,ar,hr,Ue,16,c[34]),hr=b(hr,Ne,or,ar,ur,23,c[35]),ar=b(ar,hr,Ne,or,he,4,c[36]),or=b(or,ar,hr,Ne,Fe,11,c[37]),Ne=b(Ne,or,ar,hr,le,16,c[38]),hr=b(hr,Ne,or,ar,Ve,23,c[39]),ar=b(ar,hr,Ne,or,At,4,c[40]),or=b(or,ar,hr,Ne,Oe,11,c[41]),Ne=b(Ne,or,ar,hr,ae,16,c[42]),hr=b(hr,Ne,or,ar,pe,23,c[43]),ar=b(ar,hr,Ne,or,ue,4,c[44]),or=b(or,ar,hr,Ne,er,11,c[45]),Ne=b(Ne,or,ar,hr,pr,16,c[46]),ar=T(ar,hr=b(hr,Ne,or,ar,Y,23,c[47]),Ne,or,Oe,6,c[48]),or=T(or,ar,hr,Ne,le,10,c[49]),Ne=T(Ne,or,ar,hr,ur,15,c[50]),hr=T(hr,Ne,or,ar,ze,21,c[51]),ar=T(ar,hr,Ne,or,er,6,c[52]),or=T(or,ar,hr,Ne,ae,10,c[53]),Ne=T(Ne,or,ar,hr,Ve,15,c[54]),hr=T(hr,Ne,or,ar,he,21,c[55]),ar=T(ar,hr,Ne,or,xe,6,c[56]),or=T(or,ar,hr,Ne,pr,10,c[57]),Ne=T(Ne,or,ar,hr,pe,15,c[58]),hr=T(hr,Ne,or,ar,At,21,c[59]),ar=T(ar,hr,Ne,or,Fe,6,c[60]),or=T(or,ar,hr,Ne,Ue,10,c[61]),Ne=T(Ne,or,ar,hr,Y,15,c[62]),hr=T(hr,Ne,or,ar,ue,21,c[63]),ie[0]=ie[0]+ar|0,ie[1]=ie[1]+hr|0,ie[2]=ie[2]+Ne|0,ie[3]=ie[3]+or|0},_doFinalize:function(){var k=this._data,y=k.words,A=8*this._nDataBytes,V=8*k.sigBytes;y[V>>>5]|=128<<24-V%32;var Ce=o.floor(A/4294967296),ie=A;y[15+(V+64>>>9<<4)]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8),y[14+(V+64>>>9<<4)]=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),k.sigBytes=4*(y.length+1),this._process();for(var Oe=this._hash,he=Oe.words,Y=0;Y<4;Y++){var ae=he[Y];he[Y]=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8)}return Oe},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,y,A,V,Ce,ie,Oe){var he=k+(y&A|~y&V)+Ce+Oe;return(he<<ie|he>>>32-ie)+y}function g(k,y,A,V,Ce,ie,Oe){var he=k+(y&V|A&~V)+Ce+Oe;return(he<<ie|he>>>32-ie)+y}function b(k,y,A,V,Ce,ie,Oe){var he=k+(y^A^V)+Ce+Oe;return(he<<ie|he>>>32-ie)+y}function T(k,y,A,V,Ce,ie,Oe){var he=k+(A^(y|~V))+Ce+Oe;return(he<<ie|he>>>32-ie)+y}s.MD5=d._createHelper(m),s.HmacMD5=d._createHmacHelper(m)}(Math),n.MD5)},function(t,r,e){var n,o,s,a,i,d,u,c;t.exports=(c=e(89),o=(n=c).lib,s=o.WordArray,a=o.Hasher,i=n.algo,d=[],u=i.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,v){for(var g=this._hash.words,b=g[0],T=g[1],k=g[2],y=g[3],A=g[4],V=0;V<80;V++){if(V<16)d[V]=0|m[v+V];else{var Ce=d[V-3]^d[V-8]^d[V-14]^d[V-16];d[V]=Ce<<1|Ce>>>31}var ie=(b<<5|b>>>27)+A+d[V];ie+=V<20?1518500249+(T&k|~T&y):V<40?1859775393+(T^k^y):V<60?(T&k|T&y|k&y)-1894007588:(T^k^y)-899497514,A=y,y=k,k=T<<30|T>>>2,T=b,b=ie}g[0]=g[0]+b|0,g[1]=g[1]+T|0,g[2]=g[2]+k|0,g[3]=g[3]+y|0,g[4]=g[4]+A|0},_doFinalize:function(){var m=this._data,v=m.words,g=8*this._nDataBytes,b=8*m.sigBytes;return v[b>>>5]|=128<<24-b%32,v[14+(b+64>>>9<<4)]=Math.floor(g/4294967296),v[15+(b+64>>>9<<4)]=g,m.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}}),n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u),c.SHA1)},function(t,r,e){var n,o,s,a;t.exports=(n=e(89),s=(o=n).lib.Base,a=o.enc.Utf8,void(o.algo.HMAC=s.extend({init:function(i,d){i=this._hasher=new i.init,typeof d=="string"&&(d=a.parse(d));var u=i.blockSize,c=4*u;d.sigBytes>c&&(d=i.finalize(d)),d.clamp();for(var m=this._oKey=d.clone(),v=this._iKey=d.clone(),g=m.words,b=v.words,T=0;T<u;T++)g[T]^=1549556828,b[T]^=909522486;m.sigBytes=v.sigBytes=c,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var d=this._hasher,u=d.finalize(i);return d.reset(),d.finalize(this._oKey.clone().concat(u))}})))},function(t,r,e){var n,o;t.exports=(o=e(89),e(311),o.mode.ECB=((n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(s,a){this._cipher.encryptBlock(s,a)}}),n.Decryptor=n.extend({processBlock:function(s,a){this._cipher.decryptBlock(s,a)}}),n),o.mode.ECB)},function(t,r,e){var n;t.exports=(n=e(89),e(311),n.pad.Pkcs7)},function(t,r,e){var n;t.exports=(n=e(89),n.enc.Utf8)},function(t,r,e){var n=e(9),o=e(194).fn,s=e(310);o.onChatroomMembersInfo=o.onChatroomMembers=function(a){a.error||(a.obj.members=s.reverseMembers(a.content.members))},o.onGetChatroomMemberCountByTag=function(a){a.error||(a.obj=a.content)},o.onMarkChatroomMember=function(a){a.error||(a.obj.member=n(s).call(s,a.content.chatroomMember))},o.onSyncRobot=function(a){!a.error&&this.options.onrobots?this.options.onrobots(null,a.content):this.ontions.onrobots(a.error,{})}},function(t,r,e){var n=e(9),o=e(8),s=e(0),a=function(k){this.account=k.account},i=a.prototype,d=i.Message=e(117),u=i.TextMessage=e(895),c=i.FileMessage=e(204),m=i.GeoMessage=e(899),v=i.NotificationMessage=e(900),g=i.CustomMessage=e(901),b=i.TipMessage=e(902),T=i.RobotMessage=e(903);i.validTypes=d.validTypes,i.reverse=function(k){var y;switch(d.getType(k)){case"text":y=n(u).call(u,k);break;case"image":case"audio":case"video":case"file":y=n(c).call(c,k);break;case"geo":y=n(m).call(m,k);break;case"notification":y=n(v).call(v,k);break;case"custom":y=n(g).call(g,k);break;case"tip":y=n(b).call(b,k);break;case"robot":y=n(T).call(T,k);break;default:y=n(d).call(d,k)}return d.setExtra(y,this.account),y},i.reverseMsgs=function(k,y){var A,V,Ce=this;return o(k).call(k,function(ie){return ie=n(Ce).call(Ce,ie),y&&((A=y.modifyObj)&&(ie=s.merge(ie,A)),V=y.mapper,s.isFunction(V)&&(ie=V(ie))),ie})},t.exports=a},function(t,r,e){var n=e(18),o=e(9),s=e(117),a=e(0);function i(d){a.verifyOptions(d,"text","msg::TextMessage"),d.type="text",s.call(this,d),this.attach=d.text,this.body=""}i.prototype=n(s.prototype),i.reverse=function(d){var u=o(s).call(s,d);return u.text=d.attach,u},t.exports=i},function(t,r,e){var n=e(18),o=e(0),s=e(204);function a(){}a.prototype=n(s.prototype),a.verifyFile=function(i,d){o.verifyOptions(i,"w h",!0,"file.",d)},t.exports=a},function(t,r,e){var n=e(18),o=e(204),s=e(0);function a(){}a.prototype=n(o.prototype),a.verifyFile=function(i,d){s.verifyOptions(i,"dur",!0,"file.",d)},t.exports=a},function(t,r,e){var n=e(18),o=e(204),s=e(0);function a(){}a.prototype=n(o.prototype),a.verifyFile=function(i,d){s.verifyOptions(i,"dur w h",!0,"file.",d)},t.exports=a},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(117),i=e(0);function d(u){u.type="geo",i.verifyOptions(u,"geo","msg::GeoMessage"),i.verifyOptions(u.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),i.verifyParamType("geo.lng",u.geo.lng,"number","msg::GeoMessage"),i.verifyParamType("geo.lat",u.geo.lat,"number","msg::GeoMessage"),i.verifyParamType("geo.title",u.geo.title,"string","msg::GeoMessage"),a.call(this,u),this.attach=n(u.geo)}d.prototype=o(a.prototype),d.reverse=function(u){var c=s(a).call(a,u);return u.attach=u.attach?""+u.attach:"",c.geo=u.attach?JSON.parse(u.attach):{},c},t.exports=d},function(t,r,e){var n=e(18),o=e(9),s=e(52),a=e(0).notundef,i=e(117),d={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag",324:"batchQueueOffer",323:"deleteChatroomMsg",325:"updateChatroomTags"};function u(){}u.prototype=n(i.prototype),u.reverse=function(c){var m=o(i).call(i,c);if(c.attach=c.attach?""+c.attach:"",c.attach){var v=JSON.parse(c.attach);if(m.attach={type:d[v.id]},a(v.data)){var g=v.data;if(a(g.operator)&&(m.attach.from=g.operator),a(g.opeNick)&&(m.attach.fromNick=g.opeNick),a(g.target)&&(m.attach.to=g.target),a(g.tarNick)&&(m.attach.toNick=g.tarNick),a(g.muteDuration)&&(m.attach.duration=s(g.muteDuration,10)),a(g.tags)&&(m.attach.tags=g.tags),m.attach.type==="memberEnter"&&(a(g.muted)?m.attach.gaged=+g.muted==1:m.attach.gaged=!1,a(g.tempMuted)?m.attach.tempMuted=+g.tempMuted==1:m.attach.tempMuted=!1,a(g.muteTtl)?m.attach.tempMuteDuration=+g.muteTtl:m.attach.tempMuteDuration=0),m.attach.type==="deleteChatroomMsg"&&(m.attach.msgId=g.msgId,m.attach.msgTime=g.msgTime),a(g.ext)&&(m.attach.custom=g.ext),a(g.queueChange)){var b=JSON.parse(g.queueChange);switch(b._e){case"OFFER":m.attach.queueChange={type:"OFFER",elementKey:b.key,elementValue:b.content};break;case"POLL":m.attach.queueChange={type:"POLL",elementKey:b.key,elementValue:b.content};break;case"DROP":m.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":m.attach.queueChange={type:b._e,elementKv:b.kvObject};break;case"BATCH_OFFER":m.attach.queueChange={type:b._e,elements:b.elements}}}}}else m.attach={};return m},t.exports=u},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(117),i=e(0);function d(u){i.verifyOptions(u,"content","msg::CustomMessage"),u.type="custom",a.call(this,u),typeof u.content!="string"&&(u.content=n(u.content)),this.attach=u.content}d.prototype=o(a.prototype),d.reverse=function(u){var c=s(a).call(a,u);return c.content=u.attach,c},t.exports=d},function(t,r,e){var n=e(18),o=e(9),s=e(117),a=e(0);function i(d){a.verifyOptions(d,"tip","msg::TipMessage"),d.type="tip",s.call(this,d),this.attach=d.tip}i.prototype=n(s.prototype),i.reverse=function(d){var u=o(s).call(s,d);return u.tip=d.attach,u},t.exports=i},function(t,r,e){var n=e(10),o=e(18),s=e(9),a=e(8),i=e(117),d=e(0),u={welcome:"00",text:"01",link:"03"},c={"01":"text","02":"image","03":"answer",11:"template"};function m(v){d.verifyOptions(v,"content","msg::RobotMessage");var g=v.content;switch(g.type){case"welcome":d.undef(v.body)&&(this.body="欢迎消息");break;case"text":d.verifyOptions(g,"content","msg::RobotMessage"),d.undef(v.body)&&(this.body=g.content);break;case"link":d.verifyOptions(g,"target","msg::RobotMessage")}g.type&&(g.type=u[g.type]),g={param:g,robotAccid:v.robotAccid},this.attach=n(g),v.type="robot",i.call(this,v)}m.prototype=o(i.prototype),m.reverse=function(v){var g=s(i).call(i,v);if(g.type==="robot"){var b=JSON.parse(v.attach);if(b.param&&(b.param.type=c[b.param.type]||"unknown"),b.robotMsg){var T=(b=d.merge(b,b.robotMsg)).message;b.flag==="bot"?b.message=a(T).call(T,function(k){return k.type=c[k.type]||"unknown",k}):b.flag,delete b.robotMsg}g.content=b}return g},t.exports=m},function(t,r,e){var n=e(9),o=e(32),s=e(8),a=e(17),i=e(10),d=e(0),u=d.undef,c=e(193).fn,m=e(23).reportAPI;c.beforeSendMsg=function(g){g.cmd="sendMsg"};var v={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};c.getHistoryMsgs=function(g){if((g=g||{}).done=m({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgs",done:g.done}),d.verifyOptions(g),u(g.timetag)?g.timetag=0:d.verifyParamType("timetag",g.timetag,"number","msg::getHistoryMsgs"),u(g.limit)?g.limit=100:d.verifyParamType("limit",g.limit,"number","msg::getHistoryMsgs"),u(n(g))?g.reverse=!1:d.verifyParamType("reverse",n(g),"boolean","msg::getHistoryMsgs"),u(g.msgTypes))g.msgTypes=[];else if(o(g.msgTypes)){var b,T;g.msgTypes=s(b=g.msgTypes).call(b,function(k){return v[k]}),g.msgTypes=a(T=g.msgTypes).call(T,function(k){return typeof k=="number"})}else typeof v[g.msgTypes]=="number"?g.msgTypes=[v[g.msgTypes]]:g.msgTypes=[];this.processCallback(g),this.sendCmd("getHistoryMsgs",g,function(k,y,A){o(A)&&(A=s(A).call(A,function(V){return v[V.type]&&(V.type=v[V.type]),V})),g.callback(k,y,A)})},c.getHistoryMsgsByTags=function(g){if((g=g||{}).done=m({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgsByTags",done:g.done}),d.verifyOptions(g,"tags","api::msg::getHistoryMsgsByTags"),d.verifyParamType("tags",g.tags,"array","api::msg::getHistoryMsgsByTags"),u(g.fromTime)?g.fromTime=0:d.verifyParamType("fromTime",g.fromTime,"number","api::msg::getHistoryMsgsByTags"),u(g.toTime)?g.toTime=0:d.verifyParamType("toTime",g.toTime,"number","api::msg::getHistoryMsgsByTags"),u(g.limit)?g.limit=100:d.verifyParamType("limit",g.limit,"number","msg::getHistoryMsgs"),u(n(g))?g.reverse=0:d.verifyParamType("reverse",n(g),"number","msg::getHistoryMsgs"),u(g.types))g.types=[];else if(o(g.types)){var b,T;g.types=s(b=g.types).call(b,function(k){return v[k]}),g.types=a(T=g.types).call(T,function(k){return typeof k=="number"})}else typeof v[g.types]=="number"?g.types=[v[g.types]]:g.types=[];this.processCallback(g),g.types=i(g.types),g.tags=i(g.tags),this.sendCmd("getHistoryMsgsByTags",{chatRoomTagHistoryMsgRequestTag:g},g.callback)}},function(t,r,e){var n=e(193).fn,o=e(23).reportAPI;n.disconnect=function(s){(s=s||{}).done=o({instance:this,className:"ChatroomFn",funcName:"disconnect",done:s.done}),this.protocol.disconnect(s.done)}},function(t,r,e){var n=e(0),o=n.undef,s=n.verifyOptions,a=n.verifyParamType,i=e(310),d=e(193).fn,u=e(23).reportAPI;d.updateMyChatroomMemberInfo=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"updateMyChatroomMemberInfo",done:c.done}),s(c,"member needNotify","member::updateMyChatroomMemberInfo"),a("needNotify",c.needNotify,"boolean","member::updateMyChatroomMemberInfo"),c.needSave=c.needSave||!1,a("needSave",c.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(c),this.processCallback(c),c.chatroomMember=new i(c.member),c.antispamTag={antiSpamBusinessId:c.antiSpamBusinessId},this.sendCmd("updateMyChatroomMemberInfo",c)},d.getChatroomMembers=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"getChatroomMembers",done:c.done}),s(c,"guest","member::getChatroomMembers"),a("guest",c.guest,"boolean","member::getChatroomMembers"),o(c.time)?c.time=0:a("time",c.time,"number","member::getChatroomMembers"),o(c.limit)?c.limit=100:a("limit",c.limit,"number","member::getChatroomMembers"),this.processCallback(c),c.guest?c.type=c.desc===!1?3:1:c.type=c.onlyOnline?2:0,this.sendCmd("getChatroomMembers",c)},d.getChatroomMembersByTag=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersByTag",done:c.done}),s(c,"tag","getChatroomMembersByTag::rag"),o(c.time)?c.time=0:a("time",c.time,"number","getChatroomMembersByTag::time"),o(c.limit)?c.limit=100:a("limit",c.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(c),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:n.filterObj(c,"tag limit time"),callback:c.callback})},d.getChatroomMemberCountByTag=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"getChatroomMemberCountByTag",done:c.done}),s(c,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(c),this.sendCmd("getChatroomMemberCountByTag",c)},d.getChatroomMembersInfo=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersInfo",done:c.done}),s(c,"accounts","member::getChatroomMembersInfo"),a("accounts",c.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(c),this.sendCmd("getChatroomMembersInfo",c)},d.markChatroomIdentity=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomIdentity",done:c.done}),s(c,"identity","member::markChatroomIdentity"),c.type={manager:1,common:2,black:-1,mute:-2}[c.identity],delete c.identity,isNaN(c.type)?s(c,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(c)},d.markChatroomManager=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomManager",done:c.done}),c.type=1,this.markChatroomMember(c)},d.markChatroomCommonMember=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomCommonMember",done:c.done}),c.type=2,this.markChatroomMember(c)},d.markChatroomBlacklist=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomBlacklist",done:c.done}),c.type=-1,this.markChatroomMember(c)},d.markChatroomGaglist=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomGaglist",done:c.done}),c.type=-2,this.markChatroomMember(c)},d.markChatroomMember=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"markChatroomMember",done:c.done}),s(c,"account type isAdd","member::markChatroomMember"),a("isAdd",c.isAdd,"boolean","member::markChatroomMember"),o(c.level)?c.level=0:a("level",c.level,"number","member::markChatroomMember"),this.processCustom(c),this.processCallback(c),this.sendCmd("markChatroomMember",c)},d.kickChatroomMember=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"kickChatroomMember",done:c.done}),s(c,"account","member::kickChatroomMember"),this.processCustom(c),this.processCallback(c),this.sendCmd("kickChatroomMember",c)},d.updateChatroomMemberTempMute=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"updateChatroomMemberTempMute",done:c.done}),s(c,"account duration needNotify","member::updateChatroomMemberTempMute"),a("duration",c.duration,"number","member::updateChatroomMemberTempMute"),a("needNotify",c.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(c),this.processCallback(c),this.sendCmd("updateChatroomMemberTempMute",c)},d.updateTagMembersTempMute=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"updateTagMembersTempMute",done:c.done}),s(c,"tag duration needNotify","member::updateTagMembersTempMute"),a("duration",c.duration,"number","member::updateTagMembersTempMute"),a("needNotify",c.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(c),this.processCallback(c);var m=n.filterObj(c,"tag duration custom notifyTargetTags");m.needNotify=c.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:m,callback:c.callback})},d.updateCoordinate=n.throttle(function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"updateCoordinate",done:c.done});var m=!0;c.x===void 0||c.y===void 0||c.z===void 0?m=!1:(typeof c.x!="number"&&(c.x=0),typeof c.y!="number"&&(c.y=0),typeof c.z!="number"&&(c.z=0)),this.processCallback(c);var v=n.filterObj(c,m?"x y z distance":"distance");this.sendCmd("updateCoordinate",{coordinateReq:v,callback:c.callback})},300,{},function(c){c&&c.done&&c.done({code:416,chatroomId:this.options.chatroomId})}),d.getRobotList=function(c){(c=c||{}).done=u({instance:this,className:"ChatroomFn",funcName:"getRobotList",done:c.done}),this.logger.warn("this api will be abandon"),o(c.timetag)&&(c.timetag=0),this.processCallback(c),this.sendCmd("syncRobot",c)}},function(t,r,e){var n=e(193).fn,o=e(0),s=e(23).reportAPI;n.queueOffer=function(a){(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"queueOffer",done:a.done}),o.verifyOptions(a,"elementKey elementValue","msg::queueOffer");var i={elementKey:a.elementKey,elementValue:a.elementValue,transient:!!a.transient};a.elementAccount&&(i.elementAccount=a.elementAccount),this.processCallback(a),this.sendCmd("queueOffer",i,a.callback)},n.queuePoll=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"queuePoll",done:a.done}),a.elementKey=a.elementKey||"",this.processCallback(a),this.sendCmd("queuePoll",a,a.callback)},n.queueList=function(a){(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"queueList",done:a.done}),this.processCallback(a),this.sendCmd("queueList",a,a.callback)},n.peak=function(a){(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"peak",done:a.done}),this.processCallback(a),this.sendCmd("peak",a,a.callback)},n.queueDrop=function(a){(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"queueDrop",done:a.done}),this.processCallback(a),this.sendCmd("queueDrop",a,a.callback)},n.queueChange=function(a){(a=a||{}).done=s({instance:this,className:"ChatroomFn",funcName:"queueChange",done:a.done}),o.verifyOptions(a,"elementMap","msg::queueOffer"),a.needNotify?(a.needNotify=!0,o.verifyOptions(a,"notifyExt","msg::queueOffer")):a.needNotify=!1,this.processCallback(a),this.sendCmd("queueChange",a,a.callback)}},,,function(t,r,e){t.exports=e(911)},function(t,r,e){e(297);var n={NIM:e(765),Chatroom:e(881)};e(309)(n),t.exports=n}])})})(NIM_Web_SDK);var NIM_Web_SDKExports=NIM_Web_SDK.exports;const NIM_SDK=getDefaultExportFromCjs(NIM_Web_SDKExports);class NimChatroomSocket{constructor(r){Bi(this,"liveId");Bi(this,"nimChatroomSocket");Bi(this,"onMessage");Bi(this,"handleRoomSocketMessage",r=>{this.onMessage(this,r)});Bi(this,"onConnet",r=>{console.log("进入小偶像的直播间成功。")});Bi(this,"handleRoomSocketError",(r,e)=>{console.log("发生错误",r,e)});Bi(this,"handleRoomSocketDisconnect",r=>{console.log("连接断开",r)});this.liveId=r.liveId,this.onMessage=r.onMessage}init(r){this.nimChatroomSocket=NIM_SDK.Chatroom.getInstance({appKey:atob(r),chatroomId:this.liveId,chatroomAddresses:["chatweblink01.netease.im:443"],onconnect:this.onConnet,onmsgs:this.handleRoomSocketMessage,onerror:this.handleRoomSocketError,ondisconnect:this.handleRoomSocketDisconnect,isAnonymous:!0,chatroomNick:this.uuid(),chatroomAvatar:"",db:!1,dbLog:!1})}disconnect(){var r,e;(e=(r=this.nimChatroomSocket)==null?void 0:r.disconnect)==null||e.call(r,{done(){}}),this.nimChatroomSocket=void 0}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}}class PocketMessage{constructor(){Bi(this,"content");Bi(this,"url");Bi(this,"type");Bi(this,"color")}add(r,e){return this.content=r,this.type=1,this.color=e,this}addImg(r,e,n){return this.content=r,this.url=e,this.type=2,this.color=n,this}addVoice(r,e,n){return this.content=r,this.url=e,this.type=3,this.color=n,this}addVideo(r,e,n){return this.content=r,this.url=e,this.type=4,this.color=n,this}}const elMessageBox="",elInput="",elOverlay="",_hoisted_1$2={key:0,style:{color:"green"}},_hoisted_2$2={key:1,style:{color:"orange"}},_hoisted_3$2={style:{height:"530px",overflow:"auto"},id:"textArae"},_hoisted_4$2={style:{margin:"5px"}},_hoisted_5$2={key:1},_hoisted_6$1={style:{height:"530px",overflow:"auto"}},_hoisted_7$1=createBaseVNode("tr",null,[createBaseVNode("th",{width:"300px"},"图片"),createBaseVNode("th",null,"操作")],-1),_hoisted_8$1={align:"center"},_hoisted_9$1=createBaseVNode("span",{title:"点击复制",style:{position:"absolute",right:"10px",bottom:"0",color:"rgb(194, 191, 191)","font-size":"15px"}},"如发现问题，反馈QQ：1615842006",-1),_sfc_main$3=defineComponent({__name:"Index",setup(t){const r=ref(!1),e=ref(!1),n=ref({}),o=ref({}),s=ref(!1),a=ref(!1),i=useRouter(),d=ref(),u=ref(),c=ref(),m=ref(new Array),v=ref(new Array),g=ref(),b=ref(!1);watch(m.value,(At,ur)=>{At.length>=100&&m.value.splice(0,1);var pr=document.getElementById("textArae");pr!==null&&(pr.scrollTop=pr.scrollHeight)});const T=async()=>{await axios$1({url:"http://parkerbot.api/api/StartAliYunApi"})},k=async()=>{var At=await axios$1({url:"http://parkerbot.api/api/StartMiraiConsole"});At.data||ElMessage({showClose:!0,message:"Mirai目录不存在或路径错误，请检查后重试！",type:"error"}),At.data&&ElMessage({showClose:!0,message:"已为您打开Mirai控制台！",type:"success"})},y=async()=>{d.value&&d.value.destroy(),u.value&&u.value.destroy(),c.value&&c.value.disconnect();const At=await Fe();n.value=At.data.config;const ur=At.data.config.KD;var pr=!1;if(At.data.enable.forEach(Ne=>{Ne.key=="KD"&&(pr=JSON.parse(Ne.value))}),pr)d.value=new NIMSDK({appkey:atob(ur.appKey),account:ur.account,token:ur.token}),await d.value.connect(),u.value=new QChatSDK({appkey:atob(ur.appKey),account:ur.account,token:ur.token,linkAddresses:await d.value.plugin.getQChatAddress({ipType:2})}),u.value.on("logined",V),u.value.on("message",Ce),u.value.on("disconnect",Oe),await u.value.login();else{var ar="机器人启动中！";m.value.push(new PocketMessage().add(ar)),ar="";var hr=await axios$1({url:"http://parkerbot.api/api/start"});s.value&&(hr.data.mirai?ar+="QQ机器人启动成功。":ar+="QQ机器人启动失败。"),setTimeout(()=>{ar&&m.value.push(new PocketMessage().add(ar)),m.value.push(new PocketMessage().add("机器人已启动!"))},500)}r.value=!0},A=()=>{var At="机器人关闭中！";m.value.push(new PocketMessage().add(At)),d.value&&d.value.destroy(),u.value&&u.value.destroy(),c.value&&c.value.disconnect(),g.value&&g.value.close(),At="机器人已关闭！",m.value.push(new PocketMessage().add(At)),r.value=!1},V=async function(){var At=`口袋登录成功。订阅小偶像${n.value.KD.name}的房间。`;if(m.value.push(new PocketMessage().add(At)),u.value==null)throw"聊天室未成功实例化";if((await u.value.qchatServer.subscribeAllChannel({type:1,serverIds:[n.value.KD.serverId]})).failServerIds.length){At=`小偶像${n.value.KD.name}的房间订阅失败。请检查配置后重试，如仍有问题，请联系开发者。`,m.value.push(new PocketMessage().add(At));return}At=`小偶像${n.value.KD.name}的房间订阅成功。`,m.value.push(new PocketMessage().add(At)),c.value=new NimChatroomSocket({liveId:n.value.KD.liveRoomId,onMessage:ie}),c.value.init(n.value.KD.appKey);var pr=await axios$1({url:"http://parkerbot.api/api/start"});g.value=new window.WebSocket("ws://localhost:6001"),g.value.onopen=()=>{b.value=!0,m.value.push(new PocketMessage().add("连接消息推送服务器成功。"))},g.value.onclose=()=>{b.value=!1,m.value.push(new PocketMessage().add("连接消息推送服务器失败，请尝试再次启动机器人。请检查配置后重试，如仍有问题，请联系开发者。"))},s.value&&(pr.data.mirai?At="QQ机器人启动成功。":At="QQ机器人启动失败，请尝试再次启动机器人。请检查配置后重试，如仍有问题，请联系开发者。",m.value.push(new PocketMessage().add(At)))},Ce=async function(At){var pr,ar,hr,Ne;if(At.fromType=1,At.ext=JSON.parse(At.ext),At.channelName=await he(At.channelId),At.time=dayjs(At.time).format("YYYY-MM-DD HH:mm:ss"),b.value&&((pr=g.value)==null||pr.send(JSON.stringify(At))),At.type=="text"){var ur=`【${At.channelName}|${At.time}】${At.ext.user.nickName}:${At.body}`;m.value.push(new PocketMessage().add(ur))}else At.type=="image"?m.value.push(new PocketMessage().addImg(`【${At.channelName}|${At.time}】${At.ext.user.nickName}:`,(ar=At==null?void 0:At.attach)==null?void 0:ar.url)):At.type=="video"?m.value.push(new PocketMessage().addVideo(`【${At.channelName}|${At.time}】${At.ext.user.nickName}:`,(hr=At==null?void 0:At.attach)==null?void 0:hr.url)):At.type=="audio"?m.value.push(new PocketMessage().addVoice(`【${At.channelName}|${At.time}】${At.ext.user.nickName}:`,(Ne=At==null?void 0:At.attach)==null?void 0:Ne.url)):At.type=="custom"&&m.value.push(new PocketMessage().add(`【${At.channelName}|${At.time}】${At.ext.user.nickName}:发送了一条特殊消息！`))},ie=function(At,ur){ur.forEach(pr=>{var ar;b.value&&(pr.fromType=2,(ar=g.value)==null||ar.send(JSON.stringify(pr)))})},Oe=function(...At){m.value.push(new PocketMessage().add("登录连接状态已断开。"))},he=async function(At){if(u.value==null)throw"聊天室未成功实例化。";const ur=await u.value.qchatChannel.getChannels({channelIds:[`${At}`]});return ur?ur[0].name:""},Y=()=>{d.value&&d.value.destroy(),u.value&&u.value.destroy(),c.value&&c.value.disconnect(),i.push("/config")},ae=()=>{d.value&&d.value.destroy(),u.value&&u.value.destroy(),c.value&&c.value.disconnect(),i.push("mirai")},Fe=async()=>{var At=await axios$1({url:"http://parkerbot.api/api/GetBaseConfig"});return At};onMounted(async()=>{const At=await Fe();n.value=At.data.config,o.value=At.data.mirai,s.value=At.data.mirai.useMirai,At.data.enable.forEach(ar=>{ar.key==="BD"&&JSON.parse(ar.value)&&At.data.config.BD.saveAliyunDisk&&(a.value=!0)}),e.value=At.data.windStatus,await le();let ur="请仔细阅读：QQ被风控时使用，发送消息原理是模拟鼠标键盘发送。如果你使用的是云服务器或挂机宝一类的，请不要手动关闭远程连接，请到【更多】里点击【关闭远程】。";if(e.value){var pr=ur;m.value.find(ar=>ar.content===ur)||m.value.push(new PocketMessage().add(pr,"red"))}else m.value=m.value.filter(ar=>ar.content!==ur)});const ze=async(At,ur)=>{var pr=await axios$1({url:"http://parkerbot.api/api/piccheck?id="+At+"&type=1"});pr.data&&(ElMessage({showClose:!0,message:"保存成功！",type:"success"}),v.value.splice(ur,1)),pr.data||ElMessage({showClose:!0,message:"保存失败！",type:"error"})},pe=async(At,ur)=>{var pr=await axios$1({url:"http://parkerbot.api/api/piccheck?id="+At+"&type=2"});pr.data&&(ElMessage({showClose:!0,message:"删除成功！",type:"success"}),v.value.splice(ur,1)),pr.data||ElMessage({showClose:!0,message:"删除失败！",type:"error"})},le=async()=>{var At=await axios$1({url:"http://parkerbot.api/api/refresh"});v.value=At.data},xe=()=>{ElMessageBox.prompt("","请输入微博id",{confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:(At,ur,pr)=>{if(At=="confirm"){const ar=ur.inputValue;!ar||ar.trim()===""?ElMessage({showClose:!0,message:"请输入微博id",type:"warning"}):pr()}else pr()}}).then(async({value:At})=>{if(!(!At||At.trim()==="")){var ur=await axios$1({url:"http://parkerbot.api/api/SaveByBlogId?blogId="+At});ur.data.success?ElMessage({showClose:!0,message:ur.data.msg||"抓取成功！",type:"success"}):ElMessage({showClose:!0,message:ur.data.msg||"抓取失败！",type:"error"})}})},ue=()=>{e.value=!e.value,ElMessage.success(e.value?"已开启风控模式":"已关闭风控模式"),axios$1.get("http://parkerbot.api/api/SetWindStatus",{params:{windStatus:e.value}});let At="请仔细阅读：QQ被风控时使用，发送消息原理是模拟鼠标键盘发送。如果你使用的是云服务器或挂机宝一类的，请不要手动关闭远程连接，请到【更多】里点击【关闭远程】。";if(e.value){var ur=At;m.value.find(pr=>pr.content===At)||m.value.push(new PocketMessage().add(ur,"red"))}else m.value=m.value.filter(pr=>pr.content!==At)},Ve=()=>{ElMessageBox.alert("确认后会打开一个窗口，作用是5秒后会自动关闭远程连接，你需要在5秒内，点击qq窗口输入框，并显示出光标！","请仔细阅读",{confirmButtonText:"我知道了",beforeClose:(At,ur,pr)=>{At==="confirm"&&axios$1.get("http://parkerbot.api/api/closeRemote"),pr()}})},Ue=()=>{ElMessageBox.alert("若发现配置项没有生效，可尝试清空缓存！","提示",{confirmButtonText:"确定",callback:()=>{axios$1.get("http://parkerbot.api/api/clearCache").then(At=>{At.data?ElMessage.success("缓存已经清空！"):ElMessage.error("操作失败")})}})},er=()=>{m.value.length=0};return(At,ur)=>{const pr=ElButton,ar=ElHeader,hr=ElIcon,Ne=ElDropdownItem,or=ElDropdownMenu,ir=ElDropdown,$e=ElImage,tr=ElCol,nr=ElRow,Pt=ElMain,Et=ElContainer;return openBlock(),createElementBlock(Fragment,null,[createVNode(Et,null,{default:withCtx(()=>[createVNode(ar,{height:"50px"},{default:withCtx(()=>[createVNode(pr,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:Y},{default:withCtx(()=>[createTextVNode(" 修改配置 ")]),_:1},8,["icon"]),e.value?createCommentVNode("",!0):(openBlock(),createBlock(pr,{key:0,title:"不启用QQ机器人无需配置",type:"primary","native-type":"button",icon:unref(setting_default),onClick:ae},{default:withCtx(()=>[createTextVNode(" Mirai配置 ")]),_:1},8,["icon"])),s.value?(openBlock(),createBlock(pr,{key:1,type:"primary","native-type":"button",onClick:k},{default:withCtx(()=>[createTextVNode("启动Mirai机器人")]),_:1})):createCommentVNode("",!0),r.value?(openBlock(),createBlock(pr,{key:3,type:"danger","native-type":"button",onClick:A},{default:withCtx(()=>[createTextVNode("关闭机器人")]),_:1})):(openBlock(),createBlock(pr,{key:2,type:"primary","native-type":"button",onClick:y},{default:withCtx(()=>[createTextVNode("启动机器人")]),_:1})),a.value?(openBlock(),createBlock(pr,{key:4,type:"primary","native-type":"button",onClick:T},{default:withCtx(()=>[createTextVNode("启动阿里云盘")]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(ir,{style:{right:"1vw",position:"fixed"}},{dropdown:withCtx(()=>[createVNode(or,null,{default:withCtx(()=>[createVNode(Ne,{onClick:xe},{default:withCtx(()=>[createTextVNode("抓取微博")]),_:1}),createVNode(Ne,{onClick:ue},{default:withCtx(()=>[e.value?(openBlock(),createElementBlock("span",_hoisted_2$2,"关闭风控")):(openBlock(),createElementBlock("span",_hoisted_1$2,"开启风控"))]),_:1}),e.value?(openBlock(),createBlock(Ne,{key:0,onClick:Ve},{default:withCtx(()=>[createTextVNode("关闭远程")]),_:1})):createCommentVNode("",!0),createVNode(Ne,{onClick:Ue},{default:withCtx(()=>[createTextVNode("清空缓存")]),_:1})]),_:1})]),default:withCtx(()=>[createVNode(pr,{type:"primary"},{default:withCtx(()=>[createTextVNode("更多 "),createVNode(hr,null,{default:withCtx(()=>[createVNode(unref(arrow_down_bold_default))]),_:1})]),_:1})]),_:1}),createVNode(Pt,null,{default:withCtx(()=>[createVNode(nr,{gutter:20},{default:withCtx(()=>[createVNode(tr,{span:12},{default:withCtx(()=>[createBaseVNode("h3",{style:{"margin-left":"40%",cursor:"pointer"},onClick:er,title:"点击清空日志"},"消息及日志"),createBaseVNode("div",_hoisted_3$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.value,(kt,rr)=>(openBlock(),createElementBlock("div",_hoisted_4$2,[createTextVNode(toDisplayString(rr+1+":")+" ",1),kt.type!=2?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle({color:kt.color||""})},toDisplayString(kt.content),5)):createCommentVNode("",!0),kt.type==2?(openBlock(),createElementBlock("span",_hoisted_5$2,[createTextVNode(toDisplayString(kt.content)+" ",1),createVNode($e,{style:{height:"80px",width:"80px"},src:kt.url,"preview-src-list":[kt.url]},null,8,["src","preview-src-list"])])):createCommentVNode("",!0)]))),256))])]),_:1}),createVNode(tr,{span:12},{default:withCtx(()=>[createBaseVNode("h3",{title:"点此刷新",onClick:le,style:{cursor:"pointer","margin-left":"40%"}},"图片列表"),createBaseVNode("div",_hoisted_6$1,[createBaseVNode("table",null,[_hoisted_7$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,(kt,rr)=>(openBlock(),createElementBlock("tr",null,[createBaseVNode("td",_hoisted_8$1,[createVNode($e,{style:{height:"80px",width:"80px"},src:kt.content,"preview-src-list":[kt.content]},null,8,["src","preview-src-list"])]),createBaseVNode("td",null,[createVNode(pr,{size:"small",onClick:cr=>ze(kt.id,rr)},{default:withCtx(()=>[createTextVNode("保存")]),_:2},1032,["onClick"]),createVNode(pr,{size:"small",type:"danger",onClick:cr=>pe(kt.id,rr)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])])]))),256))])])]),_:1})]),_:1})]),_:1})]),_:1}),_hoisted_9$1],64)}}}),elCascader="",elTag="",elCascaderPanel="",elCheckbox="",elRadio="",elDialog="",elBacktop="",elCollapse="",elForm="",elUpload="",elProgress="",elSwitch="",elCollapseItem="",elOption="",elOptionGroup="",elSelect="",elCheckboxGroup="",elTransfer="",elFormItem="",elAffix="",elBadge="",elMessage="",_hoisted_1$1={style:{"margin-bottom":"1%"}},_hoisted_2$1=createBaseVNode("label",{style:{"font-size":"18px","margin-right":"3%"}},"启用模块",-1),_hoisted_3$1=createBaseVNode("span",{style:{color:"red"}},"*撤回机器人需要管理员权限，私信需要与机器人为好友",-1),_hoisted_4$1=createBaseVNode("span",{style:{color:"red"}},"*用户微博人脸识别",-1),_hoisted_5$1=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔",-1),_hoisted_6=createBaseVNode("span",{style:{color:"red"}},"*当【关注用户】发的微博文案中含有这些词汇时监听生效",-1),_hoisted_7=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_8=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_9=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_10=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_11=createBaseVNode("span",{style:{color:"red"}},"*IM账号和token可点此登录口袋后自动获取",-1),_hoisted_12=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_13=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_14=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_15=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_16=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则使用qq配置的群",-1),_hoisted_17=createBaseVNode("span",{style:{color:"red"}},"*多个用英文逗号,分隔；不填写则默认超管",-1),_hoisted_18=createBaseVNode("span",{style:{color:"red"}},"*上传人脸轮廓清晰的图片",-1),_hoisted_19=createBaseVNode("span",{style:{color:"red"}},"*直接保存(非双胞胎建议80，双胞胎建议70)",-1),_hoisted_20=createBaseVNode("span",{style:{color:"red"}},"*超过该值，但未超过上面的值，将加入审核列表，审核通过才会保存",-1),_hoisted_21=createBaseVNode("span",{style:{color:"red"}},"*启用会将图片自动上传到阿里云盘相册",-1),_hoisted_22={key:0,style:{width:"95%","margin-top":"5px"}},_hoisted_23=createBaseVNode("span",null,"未查询到小偶像，检查名称等后重新查询或者自行通过下方地址获取小偶像信息填入：",-1),_hoisted_24={style:{"word-break":"break-all"}},_sfc_main$2=defineComponent({__name:"Config",setup(t){const r=ref(!1),e=ref([]),n=ref([]),o=ref([]),s=ref([]),a=ref(!1),i=ref({show:!1,group:[],name:"",loading:!1,url:""}),d=ref({qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}),u=ref(),c=ref({QQ:{group:"",funcEnable:"",funcEnable1:[],funcAdmin:"",funcAdmin1:[],funcUser:"",funcUser1:[],admin:"",notice:!1,permission:"",sensitive:"",action:"",actions:Array(),debug:!1,gptKey:""},WB:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1,cg:"",keyword:""},BZ:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},KD:{name:"",sec:60,hasSend:!1,area:"86",code:"",phone:"",group:"",forwardGroup:!1,token:"",account:"",serverId:"",qq:"",forwardQQ:!1,liveRoomId:"",msgType:""},XHS:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},DY:{url:"",timeSpan:0,group:"",forwardGroup:!1,qq:"",forwardQQ:!1},BD:{appKey:"",appSeret:"",faceVerify:!1,imageList:"",imageList1:new Array,similarity:0,saveAliyunDisk:!1,audit:0,albumName:""}}),m=ref({input:[{required:!0,message:"请输入该值",trigger:"blur"}],imageList1:[{required:!0,validator:(he,Y,ae)=>{c.value.BD.faceVerify&&c.value.BD.imageList1.length<=0&&ae(new Error("请上传图片")),ae()},trigger:["blur","change"]}],audit:[{required:!0,validator:(he,Y,ae)=>{c.value.BD.faceVerify&&!Y&&ae(new Error("请输入该值")),ae()},trigger:["blur","change"]}],saveAliyunDisk:[{required:!0,validator:(he,Y,ae)=>{c.value.BD.saveAliyunDisk&&!Y&&ae(new Error("请输入该值")),ae()},trigger:["blur","change"]}]});watch(n,(he,Y)=>{if(he.length<=0){c.value.QQ.funcEnable1=[];return}var ae=he.filter(function(pe){return Y.indexOf(pe)===-1}).concat(Y.filter(function(pe){return he.indexOf(pe)===-1})),Fe=ae[0];if(he.length>Y.length&&e.value.forEach(pe=>{if(pe.value==Fe&&!c.value.QQ.funcEnable1.some(le=>le.value==Fe)){c.value.QQ.funcEnable1.push(pe);return}}),he.length<Y.length){var ze=-1;c.value.QQ.funcEnable1.forEach((pe,le)=>{if(pe.value==Fe){ze=le;return}}),c.value.QQ.funcEnable1.splice(ze,1)}}),onMounted(()=>{axios$1({url:"http://parkerbot.api/api/GetBaseConfig"}).then(he=>{for(let Y in d.value)for(let ae of he.data.enable)if(ae.key.toLowerCase()==Y){JSON.parse(ae.value)?d.value[Y]=!0:d.value[Y]=!1;continue}s.value=JSON.parse(he.data.config.KD.msgTypeList),he.data.config.QQ.funcEnable1=he.data.config.QQ.funcEnable?JSON.parse(he.data.config.QQ.funcEnable):new Array,he.data.config.QQ.funcAdmin1=he.data.config.QQ.funcAdmin?he.data.config.QQ.funcAdmin.split(","):[],he.data.config.QQ.funcUser1=he.data.config.QQ.funcUser?he.data.config.QQ.funcUser.split(","):[],c.value=he.data.config,c.value.QQ.actions=c.value.QQ.action===""?[]:c.value.QQ.action.split(","),c.value.KD.area="86",n.value=he.data.config.QQ.funcEnable1.map(Y=>Y.value),o.value=c.value.KD.msgType?c.value.KD.msgType.split(","):[],r.value=he.data.windStatus||!1}),axios$1({url:"http://parkerbot.api/api/GetQQFun"}).then(he=>{e.value=he.data})});const v=()=>{history.go(-1)},g=async he=>{he&&await he.validate((Y,ae)=>{if(Y){c.value.BD.imageList=c.value.BD.imageList1.map(pe=>pe.url).toString(),c.value.QQ.action=c.value.QQ.actions.toString(),c.value.QQ.funcEnable=JSON.stringify(c.value.QQ.funcEnable1);var Fe=c.value.QQ.funcEnable1.map(pe=>pe.value),ze=Fe.filter(function(pe){return c.value.QQ.funcUser.indexOf(pe)==-1});c.value.QQ.funcAdmin=ze.toString(),c.value.QQ.funcUser=c.value.QQ.funcUser1.toString(),c.value.KD.msgType=o.value.toString(),axios$1({url:"http://parkerbot.api/api/SetConfig",method:"post",data:{config:c.value,enable:d.value}}).then(pe=>{pe.data?ElMessage({message:"修改成功",type:"success"}):ElMessage({message:"修改失败，请重试。如果连续失败，请联系作者！",type:"error"})})}else return ElMessage({message:"请检查配置信息是否均已填写完成",type:"warning"}),!1})},b=()=>{i.value.loading=!1,i.value.show=!1,i.value.name="",i.value.url="",i.value.group=[],a.value=!1,c.value.KD.hasSend=!1,c.value.KD.sec=60},T=()=>{if(!c.value.KD.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}var he=/^1[3456789]\d{9}$/;if(he.test(c.value.KD.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}c.value.KD.hasSend=!0,y(),axios$1({url:"http://parkerbot.api/api/SendSmsCode",method:"get",params:{mobile:c.value.KD.phone,area:c.value.KD.area}}).then(Y=>{let ae=JSON.parse(Y==null?void 0:Y.data);ae!=null&&ae.success?ElMessage({message:"发送成功，请注意查收！",type:"success"}):ElMessage({message:(ae==null?void 0:ae.message)??"发送失败！",type:"success"})})},k=()=>{if(!c.value.KD.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}if(!c.value.KD.code){ElMessage({message:"请输入验证码！",type:"warning"});return}var he=/^1[3456789]\d{9}$/;if(he.test(c.value.KD.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}axios$1({url:"http://parkerbot.api/api/PocketLogin",method:"get",params:{mobile:c.value.KD.phone,code:c.value.KD.code}}).then(Y=>{let ae=JSON.parse(Y==null?void 0:Y.data);ae!=null&&ae.success?axios$1({url:"http://parkerbot.api/api/GetPokectUserInfo",method:"get",params:{token:ae.content.token}}).then(Fe=>{let ze=JSON.parse(Fe==null?void 0:Fe.data);ze!=null&&ze.success?(c.value.KD.token=ze.content.pwd,c.value.KD.account=ze.content.accid,setTimeout(()=>{b()},1e3),ElMessage({message:(ze==null?void 0:ze.message)??"登录成功",type:"success"})):ElMessage({message:(ze==null?void 0:ze.message)??"登录失败！",type:"error"})}):ElMessage({message:(ae==null?void 0:ae.message)??"登录失败！",type:"error"})})},y=()=>{c.value.KD.sec=60;let he;he=setInterval(()=>{c.value.KD.sec>0?c.value.KD.sec--:(clearInterval(he),c.value.KD.sec=60,c.value.KD.hasSend=!1)},1e3)},A=he=>{c.value.BD.imageList1.push(he)},V=he=>{var Y=-1;c.value.BD.imageList1.forEach((ae,Fe)=>{if(ae.name===he.name){Y=Fe;return}}),Y>=0&&c.value.BD.imageList1.splice(Y,1)},Ce=ref([{label:"SNH48",value:"SNH48",children:[{value:"TEAM SII",label:"TEAM SII"},{value:"TEAM HII",label:"TEAM HII"},{value:"TEAM X",label:"TEAM X"}]},{label:"GNZ48",value:"GNZ48",children:[{value:"TEAM G",label:"TEAM G"},{value:"TEAM NIII",label:"TEAM NIII"},{value:"TEAM Z",label:"TEAM Z"},{value:"TEAM CII",label:"TEAM CII"}]},{label:"CGT48",value:"CGT48",children:[{value:"TEAM GII",label:"TEAM GII"}]},{label:"BEJ48",value:"BEJ48",children:[{value:"TEAM B",label:"TEAM B"},{value:"TEAM E",label:"TEAM E"}]},{label:"CKG48",value:"CKG48"}]),ie=async()=>{if(!i.value.name){ElMessage({message:"请输入小偶像姓名",type:"error"});return}i.value.loading=!0;var he=await axios$1({url:"http://parkerbot.api/api/getxox?group="+i.value.group.toString()+"&name="+i.value.name}).catch(()=>{i.value.loading=!1});if(he.data.success){var Y=he.data.data;c.value.KD.name=Y.name,c.value.KD.liveRoomId=Y.liveId,c.value.KD.serverId=Y.serverId,b()}else i.value.url=he.data.data;i.value.loading=!1},Oe=()=>{};return(he,Y)=>{const ae=ElButton,Fe=ElAffix,ze=ElHeader,pe=ElCheckbox,le=ElInput,xe=ElFormItem,ue=ElCol,Ve=ElCheckboxGroup,Ue=ElTransfer,er=ElOption,At=ElSelect,ur=ElCollapseItem,pr=ElSwitch,ar=ElIcon,hr=ElUpload,Ne=ElForm,or=ElCollapse,ir=ElBacktop,$e=ElMain,tr=ElContainer,nr=ElDialog,Pt=ElCascader;return openBlock(),createElementBlock(Fragment,null,[createVNode(tr,null,{default:withCtx(()=>[createVNode(ze,null,{default:withCtx(()=>[createVNode(Fe,{offset:30},{default:withCtx(()=>[createVNode(ae,{type:"primary","native-type":"button",icon:unref(arrow_left_default),onClick:v},{default:withCtx(()=>[createTextVNode("返回")]),_:1},8,["icon"]),createVNode(ae,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:Y[0]||(Y[0]=Et=>g(u.value))},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"]),createVNode(ae,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:Y[1]||(Y[1]=Et=>Oe())},{default:withCtx(()=>[createTextVNode("重置")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode($e,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[_hoisted_2$1,r.value?createCommentVNode("",!0):(openBlock(),createBlock(pe,{key:0,modelValue:d.value.qq,"onUpdate:modelValue":Y[2]||(Y[2]=Et=>d.value.qq=Et),label:"QQ"},null,8,["modelValue"])),createVNode(pe,{modelValue:d.value.wb,"onUpdate:modelValue":Y[3]||(Y[3]=Et=>d.value.wb=Et),label:"微博"},null,8,["modelValue"]),createVNode(pe,{modelValue:d.value.bz,"onUpdate:modelValue":Y[4]||(Y[4]=Et=>d.value.bz=Et),label:"B站"},null,8,["modelValue"]),createVNode(pe,{modelValue:d.value.kd,"onUpdate:modelValue":Y[5]||(Y[5]=Et=>d.value.kd=Et),label:"口袋48"},null,8,["modelValue"]),createVNode(pe,{modelValue:d.value.xhs,"onUpdate:modelValue":Y[6]||(Y[6]=Et=>d.value.xhs=Et),label:"小红书"},null,8,["modelValue"]),createVNode(pe,{modelValue:d.value.dy,"onUpdate:modelValue":Y[7]||(Y[7]=Et=>d.value.dy=Et),label:"抖音"},null,8,["modelValue"]),createVNode(pe,{modelValue:d.value.bd,"onUpdate:modelValue":Y[8]||(Y[8]=Et=>d.value.bd=Et),label:"百度"},null,8,["modelValue"])]),createVNode(or,null,{default:withCtx(()=>[createVNode(Ne,{ref_key:"form",ref:u,model:c.value,"label-width":"100px"},{default:withCtx(()=>[d.value.qq&&!r.value?(openBlock(),createBlock(ur,{key:0,title:"QQ",name:"qq"},{default:withCtx(()=>[createVNode(xe,{label:"QQ群",prop:"QQ.group",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.group,"onUpdate:modelValue":Y[9]||(Y[9]=Et=>c.value.QQ.group=Et),placeholder:"多个用英文逗号,分隔；不填写则qq机器人所在的全部群开启，填写则针对填写的群开启"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"超级管理员",prop:"QQ.admin",rules:m.value.input},{default:withCtx(()=>[createVNode(ue,{span:16},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.admin,"onUpdate:modelValue":Y[10]||(Y[10]=Et=>c.value.QQ.admin=Et),placeholder:"仅支持配置一个账号"},null,8,["modelValue"])]),_:1}),createVNode(ue,{span:3,style:{"margin-left":"2%"}},{default:withCtx(()=>[createVNode(pe,{modelValue:c.value.QQ.notice,"onUpdate:modelValue":Y[11]||(Y[11]=Et=>c.value.QQ.notice=Et),label:"开启消息通知"},null,8,["modelValue"])]),_:1}),createVNode(ue,{span:3,style:{"margin-left":"2%"}},{default:withCtx(()=>[createVNode(pe,{modelValue:c.value.QQ.debug,"onUpdate:modelValue":Y[12]||(Y[12]=Et=>c.value.QQ.debug=Et),label:"开启程序错误通知"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"]),createVNode(xe,{label:"管理员"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.permission,"onUpdate:modelValue":Y[13]||(Y[13]=Et=>c.value.QQ.permission=Et),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"])]),_:1}),createVNode(xe,{label:"启用功能"},{default:withCtx(()=>[createVNode(Ve,{modelValue:n.value,"onUpdate:modelValue":Y[14]||(Y[14]=Et=>n.value=Et)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,Et=>(openBlock(),createBlock(pe,{label:Et.value,key:Et.id},{default:withCtx(()=>[createTextVNode(toDisplayString(Et.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(xe,{label:"功能分类"},{default:withCtx(()=>[createVNode(Ue,{modelValue:c.value.QQ.funcUser1,"onUpdate:modelValue":Y[15]||(Y[15]=Et=>c.value.QQ.funcUser1=Et),data:c.value.QQ.funcEnable1,titles:["管理员","普通用户"],props:{key:"value",label:"name"}},null,8,["modelValue","data"])]),_:1}),createVNode(xe,{label:"敏感词"},{default:withCtx(()=>[createVNode(le,{type:"textarea",modelValue:c.value.QQ.sensitive,"onUpdate:modelValue":Y[16]||(Y[16]=Et=>c.value.QQ.sensitive=Et),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"])]),_:1}),createVNode(xe,{label:"敏感词操作"},{default:withCtx(()=>[createVNode(At,{modelValue:c.value.QQ.actions,"onUpdate:modelValue":Y[17]||(Y[17]=Et=>c.value.QQ.actions=Et),multiple:"",placeholder:"请选择","collapse-tags":"",style:{width:"30%"}},{default:withCtx(()=>[createVNode(er,{label:"群内提示",value:"1"}),createVNode(er,{label:"私信群管理员",value:"2"}),createVNode(er,{label:"私信机器人管理员",value:"3"}),createVNode(er,{label:"私信机器人超管",value:"4"}),createVNode(er,{label:"撤回",value:"5"})]),_:1},8,["modelValue"]),_hoisted_3$1]),_:1}),createVNode(xe,{label:"ChatGpt密钥"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.QQ.gptKey,"onUpdate:modelValue":Y[18]||(Y[18]=Et=>c.value.QQ.gptKey=Et),placeholder:"启用【问答功能时需要提供】"},null,8,["modelValue"])]),_:1})]),_:1})):createCommentVNode("",!0),d.value.wb?(openBlock(),createBlock(ur,{key:1,title:"微博",name:"wb"},{default:withCtx(()=>[createVNode(xe,{label:"主要用户",prop:"WB.url",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.WB.url,"onUpdate:modelValue":Y[19]||(Y[19]=Et=>c.value.WB.url=Et),placeholder:"多个用英文,分隔"},null,8,["modelValue"]),_hoisted_4$1]),_:1},8,["rules"]),d.value.qq&&!r.value?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(xe,{label:"关注用户"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.WB.cg,"onUpdate:modelValue":Y[20]||(Y[20]=Et=>c.value.WB.cg=Et),placeholder:"多个用英文,分隔"},null,8,["modelValue"]),_hoisted_5$1]),_:1}),createVNode(xe,{label:"微博关键词"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.WB.keyword,"onUpdate:modelValue":Y[21]||(Y[21]=Et=>c.value.WB.keyword=Et),placeholder:"多个用英文逗号,分隔"},null,8,["modelValue"]),_hoisted_6]),_:1})],64)):createCommentVNode("",!0),createVNode(xe,{label:"监听间隔",prop:"WB.timeSpan",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.WB.timeSpan,"onUpdate:modelValue":Y[22]||(Y[22]=Et=>c.value.WB.timeSpan=Et),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:r.value?"转发至qq":"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.WB.forwardGroup,"onUpdate:modelValue":Y[23]||(Y[23]=Et=>c.value.WB.forwardGroup=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),c.value.WB.forwardGroup===!0&&!r.value?(openBlock(),createBlock(xe,{key:1,label:"qq群"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.WB.group,"onUpdate:modelValue":Y[24]||(Y[24]=Et=>c.value.WB.group=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_7]),_:1})):createCommentVNode("",!0),r.value?createCommentVNode("",!0):(openBlock(),createBlock(xe,{key:2,label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.WB.forwardQQ,"onUpdate:modelValue":Y[25]||(Y[25]=Et=>c.value.WB.forwardQQ=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})),c.value.WB.forwardQQ===!0&&!r.value?(openBlock(),createBlock(xe,{key:3,label:"qq好友"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.WB.qq,"onUpdate:modelValue":Y[26]||(Y[26]=Et=>c.value.WB.qq=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_8]),_:1})):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),d.value.bz?(openBlock(),createBlock(ur,{key:2,title:"B站",name:"bz"},{default:withCtx(()=>[createVNode(xe,{label:"用户ID",prop:"BZ.url",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BZ.url,"onUpdate:modelValue":Y[27]||(Y[27]=Et=>c.value.BZ.url=Et),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"监听间隔",prop:"BZ.timeSpan",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.BZ.timeSpan,"onUpdate:modelValue":Y[28]||(Y[28]=Et=>c.value.BZ.timeSpan=Et),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:r.value?"转发至qq":"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BZ.forwardGroup,"onUpdate:modelValue":Y[29]||(Y[29]=Et=>c.value.BZ.forwardGroup=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),c.value.BZ.forwardGroup===!0&&!r.value?(openBlock(),createBlock(xe,{key:0,label:"qq群"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BZ.group,"onUpdate:modelValue":Y[30]||(Y[30]=Et=>c.value.BZ.group=Et),placeholder:"发新动态转发消息"},null,8,["modelValue"]),_hoisted_9]),_:1})):createCommentVNode("",!0),r.value?createCommentVNode("",!0):(openBlock(),createBlock(xe,{key:1,label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BZ.forwardQQ,"onUpdate:modelValue":Y[31]||(Y[31]=Et=>c.value.BZ.forwardQQ=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})),c.value.BZ.forwardQQ===!0&&!r.value?(openBlock(),createBlock(xe,{key:2,label:"qq好友"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BZ.qq,"onUpdate:modelValue":Y[32]||(Y[32]=Et=>c.value.BZ.qq=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_10]),_:1})):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),d.value.kd?(openBlock(),createBlock(ur,{key:3,title:"口袋48",name:"kd"},{default:withCtx(()=>[createVNode(xe,{label:"姓名",prop:"KD.name",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.name,"onUpdate:modelValue":Y[33]||(Y[33]=Et=>c.value.KD.name=Et)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"IMServerId",prop:"KD.serverId",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.serverId,"onUpdate:modelValue":Y[34]||(Y[34]=Et=>c.value.KD.serverId=Et)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"直播房间Id",prop:"KD.liveRoomId",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.liveRoomId,"onUpdate:modelValue":Y[35]||(Y[35]=Et=>c.value.KD.liveRoomId=Et)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,null,{default:withCtx(()=>[createVNode(ae,{onClick:Y[36]||(Y[36]=Et=>i.value.show=!0)},{default:withCtx(()=>[createTextVNode("查询小偶像信息")]),_:1})]),_:1}),createVNode(xe,{label:"IM账号",prop:"KD.account",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.account,"onUpdate:modelValue":Y[37]||(Y[37]=Et=>c.value.KD.account=Et)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"IMtoken",prop:"KD.token",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.token,"onUpdate:modelValue":Y[38]||(Y[38]=Et=>c.value.KD.token=Et)},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,null,{default:withCtx(()=>[createVNode(ae,{onClick:Y[39]||(Y[39]=Et=>a.value=!0)},{default:withCtx(()=>[createTextVNode("登录口袋48")]),_:1}),_hoisted_11]),_:1}),createVNode(xe,{label:r.value?"转发至qq":"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.KD.forwardGroup,"onUpdate:modelValue":Y[40]||(Y[40]=Et=>c.value.KD.forwardGroup=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),c.value.KD.forwardGroup===!0&&!r.value?(openBlock(),createBlock(xe,{key:0,label:"qq群"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.group,"onUpdate:modelValue":Y[41]||(Y[41]=Et=>c.value.KD.group=Et),placeholder:"发新消息转发消息"},null,8,["modelValue"]),_hoisted_12]),_:1})):createCommentVNode("",!0),r.value?createCommentVNode("",!0):(openBlock(),createBlock(xe,{key:1,label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.KD.forwardQQ,"onUpdate:modelValue":Y[42]||(Y[42]=Et=>c.value.KD.forwardQQ=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})),c.value.KD.forwardQQ===!0&&!r.value?(openBlock(),createBlock(xe,{key:2,label:"qq好友"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.qq,"onUpdate:modelValue":Y[43]||(Y[43]=Et=>c.value.KD.qq=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_13]),_:1})):createCommentVNode("",!0),withDirectives(createVNode(xe,{label:"监听消息类型"},{default:withCtx(()=>[createVNode(Ve,{modelValue:o.value,"onUpdate:modelValue":Y[44]||(Y[44]=Et=>o.value=Et)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,(Et,kt)=>(openBlock(),createBlock(pe,{label:Et.value,key:kt},{default:withCtx(()=>[createTextVNode(toDisplayString(Et.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[vShow,c.value.KD.forwardGroup===!0||c.value.KD.forwardQQ===!0]])]),_:1})):createCommentVNode("",!0),d.value.xhs?(openBlock(),createBlock(ur,{key:4,title:"小红书",name:"xhs"},{default:withCtx(()=>[createVNode(xe,{label:"用户ID",prop:"XHS.url",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.XHS.url,"onUpdate:modelValue":Y[45]||(Y[45]=Et=>c.value.XHS.url=Et),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"监听时长",prop:"XHS.timeSpan",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.XHS.timeSpan,"onUpdate:modelValue":Y[46]||(Y[46]=Et=>c.value.XHS.timeSpan=Et),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:r.value?"转发至qq":"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.XHS.forwardGroup,"onUpdate:modelValue":Y[47]||(Y[47]=Et=>c.value.XHS.forwardGroup=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),c.value.XHS.forwardGroup===!0&&!r.value?(openBlock(),createBlock(xe,{key:0,label:"qq群"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.XHS.group,"onUpdate:modelValue":Y[48]||(Y[48]=Et=>c.value.XHS.group=Et),placeholder:"发新动态转发消息"},null,8,["modelValue"]),_hoisted_14]),_:1})):createCommentVNode("",!0),r.value?createCommentVNode("",!0):(openBlock(),createBlock(xe,{key:1,label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.XHS.forwardQQ,"onUpdate:modelValue":Y[49]||(Y[49]=Et=>c.value.XHS.forwardQQ=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})),c.value.XHS.forwardQQ===!0&&!r.value?(openBlock(),createBlock(xe,{key:2,label:"qq好友"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.XHS.qq,"onUpdate:modelValue":Y[50]||(Y[50]=Et=>c.value.XHS.qq=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_15]),_:1})):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),d.value.dy?(openBlock(),createBlock(ur,{key:5,title:"抖音",name:"dy"},{default:withCtx(()=>[createVNode(xe,{label:"用户ID",prop:"DY.url",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.DY.url,"onUpdate:modelValue":Y[51]||(Y[51]=Et=>c.value.DY.url=Et),placeholder:"多个用英文,分隔"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"监听时长",prop:"DY.timeSpan",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.DY.timeSpan,"onUpdate:modelValue":Y[52]||(Y[52]=Et=>c.value.DY.timeSpan=Et),placeholder:"单位分钟"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:r.value?"转发至qq":"转发至qq群"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.DY.forwardGroup,"onUpdate:modelValue":Y[53]||(Y[53]=Et=>c.value.DY.forwardGroup=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),withDirectives(createVNode(xe,{label:"qq群"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.DY.group,"onUpdate:modelValue":Y[54]||(Y[54]=Et=>c.value.DY.group=Et),placeholder:"发新抖音转发消息"},null,8,["modelValue"]),_hoisted_16]),_:1},512),[[vShow,c.value.DY.forwardGroup===!0&&!r.value]]),r.value?createCommentVNode("",!0):(openBlock(),createBlock(xe,{key:0,label:"转发至qq好友"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.DY.forwardQQ,"onUpdate:modelValue":Y[55]||(Y[55]=Et=>c.value.DY.forwardQQ=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})),withDirectives(createVNode(xe,{label:"qq好友"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.DY.qq,"onUpdate:modelValue":Y[56]||(Y[56]=Et=>c.value.DY.qq=Et),placeholder:"发新微博转发消息"},null,8,["modelValue"]),_hoisted_17]),_:1},512),[[vShow,c.value.DY.forwardQQ===!0&&!r.value]])]),_:1})):createCommentVNode("",!0),d.value.bd?(openBlock(),createBlock(ur,{key:6,title:"百度",name:"bd"},{default:withCtx(()=>[createVNode(xe,{label:"apiKey",prop:"BD.appKey",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BD.appKey,"onUpdate:modelValue":Y[57]||(Y[57]=Et=>c.value.BD.appKey=Et),placeholder:"百度appKey"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"appSeret",prop:"BD.appSeret",rules:m.value.input},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BD.appSeret,"onUpdate:modelValue":Y[58]||(Y[58]=Et=>c.value.BD.appSeret=Et),placeholder:"百度appSeret"},null,8,["modelValue"])]),_:1},8,["rules"]),createVNode(xe,{label:"开启人脸验证"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BD.faceVerify,"onUpdate:modelValue":Y[59]||(Y[59]=Et=>c.value.BD.faceVerify=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(xe,{label:"基础人脸",prop:"BD.imageList1",rules:m.value.imageList1},{default:withCtx(()=>[createVNode(hr,{"file-list":c.value.BD.imageList1,action:"http://parkerbot.api/api/upload","on-success":A,"on-remove":V,"list-type":"picture-card",limit:3,accept:".jpg,.png,.jpeg"},{default:withCtx(()=>[createVNode(ar,null,{default:withCtx(()=>[createVNode(unref(plus_default))]),_:1})]),_:1},8,["file-list"]),_hoisted_18]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(xe,{label:"人脸相似度",prop:"BD.similarity",rules:m.value.audit},{default:withCtx(()=>[createVNode(ue,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.BD.similarity,"onUpdate:modelValue":Y[60]||(Y[60]=Et=>c.value.BD.similarity=Et)},null,8,["modelValue"])]),_:1}),_hoisted_19]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(xe,{label:"审核相似度",prop:"BD.audit",rules:m.value.audit},{default:withCtx(()=>[createVNode(ue,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:c.value.BD.audit,"onUpdate:modelValue":Y[61]||(Y[61]=Et=>c.value.BD.audit=Et)},null,8,["modelValue"])]),_:1}),_hoisted_20]),_:1},8,["rules"]),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(xe,{label:"上传云盘"},{default:withCtx(()=>[createVNode(pr,{modelValue:c.value.BD.saveAliyunDisk,"onUpdate:modelValue":Y[62]||(Y[62]=Et=>c.value.BD.saveAliyunDisk=Et),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),_hoisted_21]),_:1},512),[[vShow,c.value.BD.faceVerify]]),withDirectives(createVNode(xe,{label:"相册名称",prop:"BD.albumName",rules:m.value.saveAliyunDisk},{default:withCtx(()=>[createVNode(ue,{span:8},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.BD.albumName,"onUpdate:modelValue":Y[63]||(Y[63]=Et=>c.value.BD.albumName=Et)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"]),[[vShow,c.value.BD.saveAliyunDisk]])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model"])]),_:1}),createVNode(ir,{right:100,bottom:100})]),_:1})]),_:1}),createVNode(nr,{title:"登录口袋48",modelValue:a.value,"onUpdate:modelValue":Y[66]||(Y[66]=Et=>a.value=Et),"before-close":b,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(Ne,{"label-width":"100px"},{default:withCtx(()=>[createVNode(xe,{label:"手机号",required:"",class:"mt-4"},{default:withCtx(()=>[createVNode(le,{modelValue:c.value.KD.phone,"onUpdate:modelValue":Y[64]||(Y[64]=Et=>c.value.KD.phone=Et),style:{width:"95%"}},{prepend:withCtx(()=>[createTextVNode("+"+toDisplayString(c.value.KD.area),1)]),_:1},8,["modelValue"])]),_:1}),createVNode(xe,{label:"验证码",required:""},{default:withCtx(()=>[createVNode(le,{type:"primary",modelValue:c.value.KD.code,"onUpdate:modelValue":Y[65]||(Y[65]=Et=>c.value.KD.code=Et),style:{width:"65%"}},null,8,["modelValue"]),withDirectives(createVNode(ae,{style:{width:"25%","margin-left":"5%"},onClick:T},{default:withCtx(()=>[createTextVNode("发送验证码")]),_:1},512),[[vShow,!c.value.KD.hasSend]]),withDirectives(createVNode(ae,{style:{width:"25%","margin-left":"5%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(c.value.KD.sec)+"秒",1)]),_:1},512),[[vShow,c.value.KD.hasSend]])]),_:1}),createVNode(xe,null,{default:withCtx(()=>[createVNode(ae,{type:"primary",onClick:k},{default:withCtx(()=>[createTextVNode("登录")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),createVNode(nr,{title:"查询小偶像 ",modelValue:i.value.show,"onUpdate:modelValue":Y[69]||(Y[69]=Et=>i.value.show=Et),"before-close":b,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(Ne,{"label-width":"100px"},{default:withCtx(()=>[createVNode(xe,{label:"队伍",class:"mt-4"},{default:withCtx(()=>[createVNode(Pt,{props:{expandTrigger:"hover",checkStrictly:"true"},placeholder:"请选择",modelValue:i.value.group,"onUpdate:modelValue":Y[67]||(Y[67]=Et=>i.value.group=Et),options:Ce.value,style:{width:"95%"}},null,8,["modelValue","options"])]),_:1}),createVNode(xe,{label:"姓名",required:""},{default:withCtx(()=>[createVNode(le,{modelValue:i.value.name,"onUpdate:modelValue":Y[68]||(Y[68]=Et=>i.value.name=Et),style:{width:"95%"}},null,8,["modelValue"])]),_:1}),createVNode(xe,null,{default:withCtx(()=>[createVNode(ae,{type:"primary",loading:i.value.loading,onClick:ie},{default:withCtx(()=>[createTextVNode("查询")]),_:1},8,["loading"])]),_:1}),i.value.url?(openBlock(),createElementBlock("div",_hoisted_22,[_hoisted_23,createBaseVNode("div",_hoisted_24,toDisplayString(i.value.url),1)])):createCommentVNode("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),_hoisted_1=createBaseVNode("span",null,"配置正确目录后下方内容可以通过上方【获取配置】按钮获取。",-1),_hoisted_2=createBaseVNode("div",null,"具体配置教学由于网上很多此处不再赘述，下面提供几个教学地址：",-1),_hoisted_3=createBaseVNode("div",null,[createTextVNode("1、GitHub："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://sinoahpx.github.io/Mirai.Net.Documents/#/?id=mirainet-文档"),createTextVNode(" 通常来说你只用看到开始使用-快速开始-安装mirai环境即可，如果想了解什么是mirai可以看开始使用-基础知识-mirai生态 ")],-1),_hoisted_4=createBaseVNode("div",null,[createTextVNode("2、CSDN博客："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://blog.csdn.net/qq_30141543/article/details/125576220")],-1),_hoisted_5=createBaseVNode("div",null,[createTextVNode("3、哔哩哔哩："),createBaseVNode("span",{style:{color:"rgb(19, 1, 173)","text-decoration-line":"underline"}},"https://www.bilibili.com/video/BV1eb4y1k7uX/")],-1),_sfc_main$1=defineComponent({__name:"Mirai",setup(t){const r=ref(),e=ref({useMirai:!1,path:"",address:"",qq:"",verifyKey:""});onMounted(()=>{axios$1({url:"http://parkerbot.api/api/GetMiraiConfig"}).then(a=>{e.value=a.data})});const n=function(){axios$1({url:"http://parkerbot.api/api/getMiraiFile"}).then(a=>{a.data==!1?ElMessage({showClose:!0,message:"目录不存在或路径错误，请检查后重试！",type:"error"}):(e.value.address=a.data.address,e.value.verifyKey=a.data.verifyKey,ElMessage({showClose:!0,message:"获取成功！",type:"success"}))})},o=()=>{history.go(-1)},s=async a=>{a&&await a.validate((i,d)=>{i&&axios$1({url:"http://parkerbot.api/api/setMiraiconfig",method:"post",data:e.value}).then(u=>{if(u.data)ElMessage({showClose:!0,message:"保存成功",type:"success"});else return ElMessage({message:"修改失败，请重试。如果连续失败，请联系作者！",type:"error"}),!1})})};return(a,i)=>{const d=ElButton,u=ElHeader,c=ElSwitch,m=ElFormItem,v=ElInput,g=ElForm,b=ElMain,T=ElFooter,k=ElContainer;return openBlock(),createBlock(k,null,{default:withCtx(()=>[createVNode(u,null,{default:withCtx(()=>[createVNode(d,{type:"primary","native-type":"button",icon:unref(arrow_left_default),onClick:o},{default:withCtx(()=>[createTextVNode("返回")]),_:1},8,["icon"]),createVNode(d,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:i[0]||(i[0]=y=>s(r.value))},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"])]),_:1}),createVNode(b,null,{default:withCtx(()=>[createVNode(g,{ref_key:"miraiForm",ref:r,model:e.value,"label-width":"120px"},{default:withCtx(()=>[createVNode(m,{label:"启用机器人",prop:"useMirai"},{default:withCtx(()=>[createVNode(c,{modelValue:e.value.useMirai,"onUpdate:modelValue":i[1]||(i[1]=y=>e.value.useMirai=y),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),createVNode(m,{label:"qq",prop:"qq"},{default:withCtx(()=>[createVNode(v,{disabled:!e.value.useMirai,modelValue:e.value.qq,"onUpdate:modelValue":i[2]||(i[2]=y=>e.value.qq=y)},null,8,["disabled","modelValue"])]),_:1}),createVNode(m,{label:"mirai根目录",prop:"path"},{default:withCtx(()=>[createVNode(v,{disabled:!e.value.useMirai,modelValue:e.value.path,"onUpdate:modelValue":i[3]||(i[3]=y=>e.value.path=y),style:{width:"87%"}},null,8,["disabled","modelValue"]),createVNode(d,{disabled:!e.value.useMirai,onClick:n,"native-type":"button",type:"primary"},{default:withCtx(()=>[createTextVNode("获取配置")]),_:1},8,["disabled"])]),_:1}),createVNode(m,{label:"Tips："},{default:withCtx(()=>[_hoisted_1]),_:1}),createVNode(m,{label:"地址",prop:"address"},{default:withCtx(()=>[createVNode(v,{disabled:!e.value.useMirai,modelValue:e.value.address,"onUpdate:modelValue":i[4]||(i[4]=y=>e.value.address=y)},null,8,["disabled","modelValue"])]),_:1}),createVNode(m,{label:"verifyKey",prop:"verifyKey"},{default:withCtx(()=>[createVNode(v,{disabled:!e.value.useMirai,modelValue:e.value.verifyKey,"onUpdate:modelValue":i[5]||(i[5]=y=>e.value.verifyKey=y)},null,8,["disabled","modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),createVNode(T,null,{default:withCtx(()=>[_hoisted_2,_hoisted_3,_hoisted_4,_hoisted_5]),_:1})]),_:1})}}}),router=createRouter({history:createWebHistory("/"),routes:[{path:"/",name:"home",component:_sfc_main$3},{path:"/mirai",name:"mirai",component:_sfc_main$1},{path:"/config",name:"config",component:_sfc_main$2}]}),_sfc_main=defineComponent({__name:"App",setup(t){return(r,e)=>(openBlock(),createBlock(unref(RouterView)))}}),app=createApp(_sfc_main);app.use(router);app.mount("#app")});export default YC();
